/*!
 * 
 *          iclient-maplibregl
 *          CopyrightÂ© 2000 - 2024 SuperMap Software Co.Ltd
 *          license: Apache-2.0
 *          version: v11.2.0
 *
 */!function(){var t={1358:function(t){!function(e){"use strict";if(e.__disableNativeFetch||!e.fetch){s.prototype.append=function(t,e){t=i(t),e=a(e);var r=this.map[t];r||(r=[],this.map[t]=r),r.push(e)},s.prototype.delete=function(t){delete this.map[i(t)]},s.prototype.get=function(t){var e=this.map[i(t)];return e?e[0]:null},s.prototype.getAll=function(t){return this.map[i(t)]||[]},s.prototype.has=function(t){return this.map.hasOwnProperty(i(t))},s.prototype.set=function(t,e){this.map[i(t)]=[a(e)]},s.prototype.forEach=function(t,e){Object.getOwnPropertyNames(this.map).forEach(function(r){this.map[r].forEach(function(n){t.call(e,n,r,this)},this)},this)};var r={blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e},n=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];p.prototype.clone=function(){return new p(this)},f.call(p.prototype),f.call(y.prototype),y.prototype.clone=function(){return new y(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new s(this.headers),url:this.url})},y.error=function(){var t=new y(null,{status:0,statusText:""});return t.type="error",t};var o=[301,302,303,307,308];y.redirect=function(t,e){if(-1===o.indexOf(e))throw new RangeError("Invalid status code");return new y(null,{status:e,headers:{location:t}})},e.Headers=s,e.Request=p,e.Response=y,e.fetch=function(t,e){return new Promise(function(n,o){var i;i=p.prototype.isPrototypeOf(t)&&!e?t:new p(t,e);var a=new XMLHttpRequest;var u=!1;function l(){if(4===a.readyState){var t=1223===a.status?204:a.status;if(t<100||t>599){if(u)return;return u=!0,void o(new TypeError("Network request failed"))}var e={status:t,statusText:a.statusText,headers:function(t){var e=new s;return t.getAllResponseHeaders().trim().split("\n").forEach(function(t){var r=t.trim().split(":"),n=r.shift().trim(),o=r.join(":").trim();e.append(n,o)}),e}(a),url:"responseURL"in a?a.responseURL:/^X-Request-URL:/m.test(a.getAllResponseHeaders())?a.getResponseHeader("X-Request-URL"):void 0},r="response"in a?a.response:a.responseText;u||(u=!0,n(new y(r,e)))}}a.onreadystatechange=l,a.onload=l,a.onerror=function(){u||(u=!0,o(new TypeError("Network request failed")))},a.open(i.method,i.url,!0);try{"include"===i.credentials&&("withCredentials"in a?a.withCredentials=!0:console&&console.warn&&console.warn("withCredentials is not supported, you can ignore this warning"))}catch(t){console&&console.warn&&console.warn("set withCredentials error:"+t)}"responseType"in a&&r.blob&&(a.responseType="blob"),i.headers.forEach(function(t,e){a.setRequestHeader(e,t)}),a.send(void 0===i._bodyInit?null:i._bodyInit)})},e.fetch.polyfill=!0,t.exports&&(t.exports=e.fetch)}function i(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function a(t){return"string"!=typeof t&&(t=String(t)),t}function s(t){this.map={},t instanceof s?t.forEach(function(t,e){this.append(e,t)},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function u(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function l(t){return new Promise(function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}})}function c(t){var e=new FileReader;return e.readAsArrayBuffer(t),l(e)}function f(){return this.bodyUsed=!1,this._initBody=function(t,e){if(this._bodyInit=t,"string"==typeof t)this._bodyText=t;else if(r.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t,this._options=e;else if(r.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(t){if(!r.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t))throw new Error("unsupported BodyInit type")}else this._bodyText=""},r.blob?(this.blob=function(){var t=u(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(c)},this.text=function(){var t,e,r,n,o,i,a,s=u(this);if(s)return s;if(this._bodyBlob)return t=this._bodyBlob,e=this._options,r=new FileReader,n=e.headers.map["content-type"]?e.headers.map["content-type"].toString():"",o=/charset\=[0-9a-zA-Z\-\_]*;?/,i=t.type.match(o)||n.match(o),a=[t],i&&a.push(i[0].replace(/^charset\=/,"").replace(/;$/,"")),r.readAsText.apply(r,a),l(r);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var t=u(this);return t||Promise.resolve(this._bodyText)},r.formData&&(this.formData=function(){return this.text().then(h)}),this.json=function(){return this.text().then(JSON.parse)},this}function p(t,e){var r,o,i=(e=e||{}).body;if(p.prototype.isPrototypeOf(t)){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new s(t.headers)),this.method=t.method,this.mode=t.mode,i||(i=t._bodyInit,t.bodyUsed=!0)}else this.url=t;if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new s(e.headers)),this.method=(r=e.method||this.method||"GET",o=r.toUpperCase(),n.indexOf(o)>-1?o:r),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i,e)}function h(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var r=t.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(o))}}),e}function y(t,e){e||(e={}),this._initBody(t,e),this.type="default",this.status=e.status,this.ok=this.status>=200&&this.status<300,this.statusText=e.statusText,this.headers=e.headers instanceof s?e.headers:new s(e.headers),this.url=e.url||""}}("undefined"!=typeof self?self:this)},3678:function(t,e){var r,n,o;n=[e,t],void 0===(o="function"==typeof(r=function(t,e){"use strict";var r={timeout:5e3,jsonpCallback:"callback",jsonpCallbackFunction:null};function n(t){try{delete window[t]}catch(e){window[t]=void 0}}function o(t){var e=document.getElementById(t);e&&document.getElementsByTagName("head")[0].removeChild(e)}e.exports=function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=t,a=e.timeout||r.timeout,s=e.jsonpCallback||r.jsonpCallback,u=void 0;return new Promise(function(r,l){var c=e.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),f=s+"_"+c;window[c]=function(t){r({ok:!0,json:function(){return Promise.resolve(t)}}),u&&clearTimeout(u),o(f),n(c)},i+=-1===i.indexOf("?")?"?":"&";var p=document.createElement("script");p.setAttribute("src",""+i+s+"="+c),e.charset&&p.setAttribute("charset",e.charset),p.id=f,document.getElementsByTagName("head")[0].appendChild(p),u=setTimeout(function(){l(new Error("JSONP request to "+t+" timed out")),n(c),o(f),window[c]=function(){n(c)}},a),p.onerror=function(){l(new Error("JSONP request to "+t+" failed")),n(c),o(f),u&&clearTimeout(u)}})}})?r.apply(e,n):r)||(t.exports=o)},3448:function(t){var e=[],r=[],n="insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).";function o(t,o){if(o=o||{},void 0===t)throw new Error(n);var i,a=!0===o.prepend?"prepend":"append",s=void 0!==o.container?o.container:document.querySelector("head"),u=e.indexOf(s);return-1===u&&(u=e.push(s)-1,r[u]={}),void 0!==r[u]&&void 0!==r[u][a]?i=r[u][a]:(i=r[u][a]=function(){var t=document.createElement("style");return t.setAttribute("type","text/css"),t}(),"prepend"===a?s.insertBefore(i,s.childNodes[0]):s.appendChild(i)),65279===t.charCodeAt(0)&&(t=t.substr(1,t.length)),i.styleSheet?i.styleSheet.cssText+=t:i.textContent+=t,i}t.exports=o,t.exports.insertCss=o},5611:function(t,e,r){function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t=r.nmd(t);var o=200,i="__lodash_hash_undefined__",a=9007199254740991,s="[object Arguments]",u="[object Boolean]",l="[object Date]",c="[object Function]",f="[object GeneratorFunction]",p="[object Map]",h="[object Number]",y="[object Object]",d="[object RegExp]",b="[object Set]",v="[object String]",m="[object Symbol]",g="[object ArrayBuffer]",S="[object DataView]",w="[object Float32Array]",O="[object Float64Array]",_="[object Int8Array]",P="[object Int16Array]",E="[object Int32Array]",C="[object Uint8Array]",T="[object Uint8ClampedArray]",j="[object Uint16Array]",k="[object Uint32Array]",x=/\w*$/,A=/^\[object .+?Constructor\]$/,I=/^(?:0|[1-9]\d*)$/,N={};N[s]=N["[object Array]"]=N[g]=N[S]=N[u]=N[l]=N[w]=N[O]=N[_]=N[P]=N[E]=N[p]=N[h]=N[y]=N[d]=N[b]=N[v]=N[m]=N[C]=N[T]=N[j]=N[k]=!0,N["[object Error]"]=N[c]=N["[object WeakMap]"]=!1;var R="object"==(void 0===r.g?"undefined":n(r.g))&&r.g&&r.g.Object===Object&&r.g,M="object"==("undefined"==typeof self?"undefined":n(self))&&self&&self.Object===Object&&self,L=R||M||Function("return this")(),B="object"==n(e)&&e&&!e.nodeType&&e,D=B&&"object"==n(t)&&t&&!t.nodeType&&t,F=D&&D.exports===B;function U(t,e){return t.set(e[0],e[1]),t}function G(t,e){return t.add(e),t}function V(t,e,r,n){var o=-1,i=t?t.length:0;for(n&&i&&(r=t[++o]);++o<i;)r=e(r,t[o],o,t);return r}function q(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function H(t){var e=-1,r=Array(t.size);return t.forEach(function(t,n){r[++e]=[n,t]}),r}function z(t,e){return function(r){return t(e(r))}}function J(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r}var W,K=Array.prototype,Q=Function.prototype,Y=Object.prototype,X=L["__core-js_shared__"],Z=(W=/[^.]+$/.exec(X&&X.keys&&X.keys.IE_PROTO||""))?"Symbol(src)_1."+W:"",$=Q.toString,tt=Y.hasOwnProperty,et=Y.toString,rt=RegExp("^"+$.call(tt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),nt=F?L.Buffer:void 0,ot=L.Symbol,it=L.Uint8Array,at=z(Object.getPrototypeOf,Object),st=Object.create,ut=Y.propertyIsEnumerable,lt=K.splice,ct=Object.getOwnPropertySymbols,ft=nt?nt.isBuffer:void 0,pt=z(Object.keys,Object),ht=Dt(L,"DataView"),yt=Dt(L,"Map"),dt=Dt(L,"Promise"),bt=Dt(L,"Set"),vt=Dt(L,"WeakMap"),mt=Dt(Object,"create"),gt=qt(ht),St=qt(yt),wt=qt(dt),Ot=qt(bt),_t=qt(vt),Pt=ot?ot.prototype:void 0,Et=Pt?Pt.valueOf:void 0;function Ct(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Tt(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function jt(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function kt(t){this.__data__=new Tt(t)}function xt(t,e){var r=zt(t)||function(t){return function(t){return function(t){return!!t&&"object"==n(t)}(t)&&Jt(t)}(t)&&tt.call(t,"callee")&&(!ut.call(t,"callee")||et.call(t)==s)}(t)?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],o=r.length,i=!!o;for(var a in t)!e&&!tt.call(t,a)||i&&("length"==a||Gt(a,o))||r.push(a);return r}function At(t,e,r){var n=t[e];tt.call(t,e)&&Ht(n,r)&&(void 0!==r||e in t)||(t[e]=r)}function It(t,e){for(var r=t.length;r--;)if(Ht(t[r][0],e))return r;return-1}function Nt(t,e,r,n,o,i,a){var A;if(n&&(A=i?n(t,o,i,a):n(t)),void 0!==A)return A;if(!Qt(t))return t;var I=zt(t);if(I){if(A=function(t){var e=t.length,r=t.constructor(e);e&&"string"==typeof t[0]&&tt.call(t,"index")&&(r.index=t.index,r.input=t.input);return r}(t),!e)return function(t,e){var r=-1,n=t.length;e||(e=Array(n));for(;++r<n;)e[r]=t[r];return e}(t,A)}else{var R=Ut(t),M=R==c||R==f;if(Wt(t))return function(t,e){if(e)return t.slice();var r=new t.constructor(t.length);return t.copy(r),r}(t,e);if(R==y||R==s||M&&!i){if(q(t))return i?t:{};if(A=function(t){return"function"!=typeof t.constructor||Vt(t)?{}:(e=at(t),Qt(e)?st(e):{});var e}(M?{}:t),!e)return function(t,e){return Lt(t,Ft(t),e)}(t,function(t,e){return t&&Lt(e,Yt(e),t)}(A,t))}else{if(!N[R])return i?t:{};A=function(t,e,r,n){var o=t.constructor;switch(e){case g:return Mt(t);case u:case l:return new o(+t);case S:return function(t,e){var r=e?Mt(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}(t,n);case w:case O:case _:case P:case E:case C:case T:case j:case k:return function(t,e){var r=e?Mt(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}(t,n);case p:return function(t,e,r){return V(e?r(H(t),!0):H(t),U,new t.constructor)}(t,n,r);case h:case v:return new o(t);case d:return(s=new(a=t).constructor(a.source,x.exec(a))).lastIndex=a.lastIndex,s;case b:return function(t,e,r){return V(e?r(J(t),!0):J(t),G,new t.constructor)}(t,n,r);case m:return i=t,Et?Object(Et.call(i)):{}}var i;var a,s}(t,R,Nt,e)}}a||(a=new kt);var L=a.get(t);if(L)return L;if(a.set(t,A),!I)var B=r?function(t){return function(t,e,r){var n=e(t);return zt(t)?n:function(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}(n,r(t))}(t,Yt,Ft)}(t):Yt(t);return function(t,e){for(var r=-1,n=t?t.length:0;++r<n&&!1!==e(t[r],r,t););}(B||t,function(o,i){B&&(o=t[i=o]),At(A,i,Nt(o,e,r,n,i,t,a))}),A}function Rt(t){return!(!Qt(t)||Z&&Z in t)&&(Kt(t)||q(t)?rt:A).test(qt(t))}function Mt(t){var e=new t.constructor(t.byteLength);return new it(e).set(new it(t)),e}function Lt(t,e,r,n){r||(r={});for(var o=-1,i=e.length;++o<i;){var a=e[o],s=n?n(r[a],t[a],a,r,t):void 0;At(r,a,void 0===s?t[a]:s)}return r}function Bt(t,e){var r,o,i=t.__data__;return("string"==(o=n(r=e))||"number"==o||"symbol"==o||"boolean"==o?"__proto__"!==r:null===r)?i["string"==typeof e?"string":"hash"]:i.map}function Dt(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return Rt(r)?r:void 0}Ct.prototype.clear=function(){this.__data__=mt?mt(null):{}},Ct.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},Ct.prototype.get=function(t){var e=this.__data__;if(mt){var r=e[t];return r===i?void 0:r}return tt.call(e,t)?e[t]:void 0},Ct.prototype.has=function(t){var e=this.__data__;return mt?void 0!==e[t]:tt.call(e,t)},Ct.prototype.set=function(t,e){return this.__data__[t]=mt&&void 0===e?i:e,this},Tt.prototype.clear=function(){this.__data__=[]},Tt.prototype.delete=function(t){var e=this.__data__,r=It(e,t);return!(r<0||(r==e.length-1?e.pop():lt.call(e,r,1),0))},Tt.prototype.get=function(t){var e=this.__data__,r=It(e,t);return r<0?void 0:e[r][1]},Tt.prototype.has=function(t){return It(this.__data__,t)>-1},Tt.prototype.set=function(t,e){var r=this.__data__,n=It(r,t);return n<0?r.push([t,e]):r[n][1]=e,this},jt.prototype.clear=function(){this.__data__={hash:new Ct,map:new(yt||Tt),string:new Ct}},jt.prototype.delete=function(t){return Bt(this,t).delete(t)},jt.prototype.get=function(t){return Bt(this,t).get(t)},jt.prototype.has=function(t){return Bt(this,t).has(t)},jt.prototype.set=function(t,e){return Bt(this,t).set(t,e),this},kt.prototype.clear=function(){this.__data__=new Tt},kt.prototype.delete=function(t){return this.__data__.delete(t)},kt.prototype.get=function(t){return this.__data__.get(t)},kt.prototype.has=function(t){return this.__data__.has(t)},kt.prototype.set=function(t,e){var r=this.__data__;if(r instanceof Tt){var n=r.__data__;if(!yt||n.length<o-1)return n.push([t,e]),this;r=this.__data__=new jt(n)}return r.set(t,e),this};var Ft=ct?z(ct,Object):function(){return[]},Ut=function(t){return et.call(t)};function Gt(t,e){return!!(e=null==e?a:e)&&("number"==typeof t||I.test(t))&&t>-1&&t%1==0&&t<e}function Vt(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Y)}function qt(t){if(null!=t){try{return $.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Ht(t,e){return t===e||t!=t&&e!=e}(ht&&Ut(new ht(new ArrayBuffer(1)))!=S||yt&&Ut(new yt)!=p||dt&&"[object Promise]"!=Ut(dt.resolve())||bt&&Ut(new bt)!=b||vt&&"[object WeakMap]"!=Ut(new vt))&&(Ut=function(t){var e=et.call(t),r=e==y?t.constructor:void 0,n=r?qt(r):void 0;if(n)switch(n){case gt:return S;case St:return p;case wt:return"[object Promise]";case Ot:return b;case _t:return"[object WeakMap]"}return e});var zt=Array.isArray;function Jt(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=a}(t.length)&&!Kt(t)}var Wt=ft||function(){return!1};function Kt(t){var e=Qt(t)?et.call(t):"";return e==c||e==f}function Qt(t){var e=n(t);return!!t&&("object"==e||"function"==e)}function Yt(t){return Jt(t)?xt(t):function(t){if(!Vt(t))return pt(t);var e=[];for(var r in Object(t))tt.call(t,r)&&"constructor"!=r&&e.push(r);return e}(t)}t.exports=function(t){return Nt(t,!0,!0)}},8518:function(t,e,r){function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=9007199254740991,i="[object Arguments]",a="[object Function]",s="[object GeneratorFunction]",u="[object Map]",l="[object Set]",c=/^\[object .+?Constructor\]$/,f=/^(?:0|[1-9]\d*)$/,p="object"==(void 0===r.g?"undefined":n(r.g))&&r.g&&r.g.Object===Object&&r.g,h="object"==("undefined"==typeof self?"undefined":n(self))&&self&&self.Object===Object&&self,y=p||h||Function("return this")();function d(t,e){return function(t,e){for(var r=-1,n=t?t.length:0,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o}(e,function(e){return[e,t[e]]})}var b,v,m,g=Function.prototype,S=Object.prototype,w=y["__core-js_shared__"],O=(b=/[^.]+$/.exec(w&&w.keys&&w.keys.IE_PROTO||""))?"Symbol(src)_1."+b:"",_=g.toString,P=S.hasOwnProperty,E=S.toString,C=RegExp("^"+_.call(P).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),T=S.propertyIsEnumerable,j=(v=Object.keys,m=Object,function(t){return v(m(t))}),k=V(y,"DataView"),x=V(y,"Map"),A=V(y,"Promise"),I=V(y,"Set"),N=V(y,"WeakMap"),R=z(k),M=z(x),L=z(A),B=z(I),D=z(N);function F(t,e){var r=J(t)||function(t){return function(t){return function(t){return!!t&&"object"==n(t)}(t)&&W(t)}(t)&&P.call(t,"callee")&&(!T.call(t,"callee")||E.call(t)==i)}(t)?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],o=r.length,a=!!o;for(var s in t)!e&&!P.call(t,s)||a&&("length"==s||H(s,o))||r.push(s);return r}function U(t){return!(!Q(t)||O&&O in t)&&(K(t)||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}(t)?C:c).test(z(t))}function G(t){if(r=(e=t)&&e.constructor,n="function"==typeof r&&r.prototype||S,e!==n)return j(t);var e,r,n,o=[];for(var i in Object(t))P.call(t,i)&&"constructor"!=i&&o.push(i);return o}function V(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return U(r)?r:void 0}var q=function(t){return E.call(t)};function H(t,e){return!!(e=null==e?o:e)&&("number"==typeof t||f.test(t))&&t>-1&&t%1==0&&t<e}function z(t){if(null!=t){try{return _.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(k&&"[object DataView]"!=q(new k(new ArrayBuffer(1)))||x&&q(new x)!=u||A&&"[object Promise]"!=q(A.resolve())||I&&q(new I)!=l||N&&"[object WeakMap]"!=q(new N))&&(q=function(t){var e=E.call(t),r="[object Object]"==e?t.constructor:void 0,n=r?z(r):void 0;if(n)switch(n){case R:return"[object DataView]";case M:return u;case L:return"[object Promise]";case B:return l;case D:return"[object WeakMap]"}return e});var J=Array.isArray;function W(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=o}(t.length)&&!K(t)}function K(t){var e=Q(t)?E.call(t):"";return e==a||e==s}function Q(t){var e=n(t);return!!t&&("object"==e||"function"==e)}var Y,X=(Y=function(t){return W(t)?F(t):G(t)},function(t){var e,r,n,o=q(t);return o==u?(e=t,r=-1,n=Array(e.size),e.forEach(function(t,e){n[++r]=[e,t]}),n):o==l?function(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=[t,t]}),r}(t):d(t,Y(t))});t.exports=X},44:function(t,e,r){function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t=r.nmd(t);var o=200,i="Expected a function",a="__lodash_hash_undefined__",s=1,u=2,l=1/0,c=9007199254740991,f="[object Arguments]",p="[object Array]",h="[object Boolean]",y="[object Date]",d="[object Error]",b="[object Function]",v="[object GeneratorFunction]",m="[object Map]",g="[object Number]",S="[object Object]",w="[object RegExp]",O="[object Set]",_="[object String]",P="[object Symbol]",E="[object ArrayBuffer]",C="[object DataView]",T=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,j=/^\w*$/,k=/^\./,x=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,A=/\\(\\)?/g,I=/^\[object .+?Constructor\]$/,N=/^(?:0|[1-9]\d*)$/,R={};R["[object Float32Array]"]=R["[object Float64Array]"]=R["[object Int8Array]"]=R["[object Int16Array]"]=R["[object Int32Array]"]=R["[object Uint8Array]"]=R["[object Uint8ClampedArray]"]=R["[object Uint16Array]"]=R["[object Uint32Array]"]=!0,R[f]=R[p]=R[E]=R[h]=R[C]=R[y]=R[d]=R[b]=R[m]=R[g]=R[S]=R[w]=R[O]=R[_]=R["[object WeakMap]"]=!1;var M="object"==(void 0===r.g?"undefined":n(r.g))&&r.g&&r.g.Object===Object&&r.g,L="object"==("undefined"==typeof self?"undefined":n(self))&&self&&self.Object===Object&&self,B=M||L||Function("return this")(),D="object"==n(e)&&e&&!e.nodeType&&e,F=D&&"object"==n(t)&&t&&!t.nodeType&&t,U=F&&F.exports===D&&M.process,G=function(){try{return U&&U.binding("util")}catch(t){}}(),V=G&&G.isTypedArray;function q(t,e){return!!(t?t.length:0)&&function(t,e,r){if(e!=e)return function(t,e,r,n){var o=t.length,i=r+(n?1:-1);for(;n?i--:++i<o;)if(e(t[i],i,t))return i;return-1}(t,J,r);var n=r-1,o=t.length;for(;++n<o;)if(t[n]===e)return n;return-1}(t,e,0)>-1}function H(t,e,r){for(var n=-1,o=t?t.length:0;++n<o;)if(r(e,t[n]))return!0;return!1}function z(t,e){for(var r=-1,n=t?t.length:0;++r<n;)if(e(t[r],r,t))return!0;return!1}function J(t){return t!=t}function W(t,e){return t.has(e)}function K(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function Q(t){var e=-1,r=Array(t.size);return t.forEach(function(t,n){r[++e]=[n,t]}),r}function Y(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r}var X,Z,$,tt=Array.prototype,et=Function.prototype,rt=Object.prototype,nt=B["__core-js_shared__"],ot=(X=/[^.]+$/.exec(nt&&nt.keys&&nt.keys.IE_PROTO||""))?"Symbol(src)_1."+X:"",it=et.toString,at=rt.hasOwnProperty,st=rt.toString,ut=RegExp("^"+it.call(at).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),lt=B.Symbol,ct=B.Uint8Array,ft=rt.propertyIsEnumerable,pt=tt.splice,ht=(Z=Object.keys,$=Object,function(t){return Z($(t))}),yt=zt(B,"DataView"),dt=zt(B,"Map"),bt=zt(B,"Promise"),vt=zt(B,"Set"),mt=zt(B,"WeakMap"),gt=zt(Object,"create"),St=$t(yt),wt=$t(dt),Ot=$t(bt),_t=$t(vt),Pt=$t(mt),Et=lt?lt.prototype:void 0,Ct=Et?Et.valueOf:void 0,Tt=Et?Et.toString:void 0;function jt(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function kt(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function xt(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function At(t){var e=-1,r=t?t.length:0;for(this.__data__=new xt;++e<r;)this.add(t[e])}function It(t){this.__data__=new kt(t)}function Nt(t,e){var r=ne(t)||re(t)?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],n=r.length,o=!!n;for(var i in t)!e&&!at.call(t,i)||o&&("length"==i||Wt(i,n))||r.push(i);return r}function Rt(t,e){for(var r=t.length;r--;)if(ee(t[r][0],e))return r;return-1}function Mt(t,e){for(var r=0,n=(e=Kt(e,t)?[e]:Gt(e)).length;null!=t&&r<n;)t=t[Zt(e[r++])];return r&&r==n?t:void 0}function Lt(t,e){return null!=t&&e in Object(t)}function Bt(t,e,r,n,o){return t===e||(null==t||null==e||!se(t)&&!ue(e)?t!=t&&e!=e:function(t,e,r,n,o,i){var a=ne(t),l=ne(e),c=p,b=p;a||(c=(c=Jt(t))==f?S:c);l||(b=(b=Jt(e))==f?S:b);var v=c==S&&!K(t),T=b==S&&!K(e),j=c==b;if(j&&!v)return i||(i=new It),a||ce(t)?qt(t,e,r,n,o,i):function(t,e,r,n,o,i,a){switch(r){case C:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case E:return!(t.byteLength!=e.byteLength||!n(new ct(t),new ct(e)));case h:case y:case g:return ee(+t,+e);case d:return t.name==e.name&&t.message==e.message;case w:case _:return t==e+"";case m:var l=Q;case O:var c=i&u;if(l||(l=Y),t.size!=e.size&&!c)return!1;var f=a.get(t);if(f)return f==e;i|=s,a.set(t,e);var p=qt(l(t),l(e),n,o,i,a);return a.delete(t),p;case P:if(Ct)return Ct.call(t)==Ct.call(e)}return!1}(t,e,c,r,n,o,i);if(!(o&u)){var k=v&&at.call(t,"__wrapped__"),x=T&&at.call(e,"__wrapped__");if(k||x){var A=k?t.value():t,I=x?e.value():e;return i||(i=new It),r(A,I,n,o,i)}}if(!j)return!1;return i||(i=new It),function(t,e,r,n,o,i){var a=o&u,s=fe(t),l=s.length,c=fe(e).length;if(l!=c&&!a)return!1;for(var f=l;f--;){var p=s[f];if(!(a?p in e:at.call(e,p)))return!1}var h=i.get(t);if(h&&i.get(e))return h==e;var y=!0;i.set(t,e),i.set(e,t);for(var d=a;++f<l;){p=s[f];var b=t[p],v=e[p];if(n)var m=a?n(v,b,p,e,t,i):n(b,v,p,t,e,i);if(!(void 0===m?b===v||r(b,v,n,o,i):m)){y=!1;break}d||(d="constructor"==p)}if(y&&!d){var g=t.constructor,S=e.constructor;g!=S&&"constructor"in t&&"constructor"in e&&!("function"==typeof g&&g instanceof g&&"function"==typeof S&&S instanceof S)&&(y=!1)}return i.delete(t),i.delete(e),y}(t,e,r,n,o,i)}(t,e,Bt,r,n,o))}function Dt(t){return!(!se(t)||ot&&ot in t)&&(ie(t)||K(t)?ut:I).test($t(t))}function Ft(t){return"function"==typeof t?t:null==t?pe:"object"==n(t)?ne(t)?function(t,e){if(Kt(t)&&Qt(e))return Yt(Zt(t),e);return function(r){var n=function(t,e,r){var n=null==t?void 0:Mt(t,e);return void 0===n?r:n}(r,t);return void 0===n&&n===e?function(t,e){return null!=t&&function(t,e,r){var n,o=-1,i=(e=Kt(e,t)?[e]:Gt(e)).length;for(;++o<i;){var a=Zt(e[o]);if(!(n=null!=t&&r(t,a)))break;t=t[a]}if(n)return n;return!!(i=t?t.length:0)&&ae(i)&&Wt(a,i)&&(ne(t)||re(t))}(t,e,Lt)}(r,t):Bt(e,n,void 0,s|u)}}(t[0],t[1]):function(t){var e=function(t){var e=fe(t),r=e.length;for(;r--;){var n=e[r],o=t[n];e[r]=[n,o,Qt(o)]}return e}(t);if(1==e.length&&e[0][2])return Yt(e[0][0],e[0][1]);return function(r){return r===t||function(t,e,r,n){var o=r.length,i=o,a=!n;if(null==t)return!i;for(t=Object(t);o--;){var l=r[o];if(a&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++o<i;){var c=(l=r[o])[0],f=t[c],p=l[1];if(a&&l[2]){if(void 0===f&&!(c in t))return!1}else{var h=new It;if(n)var y=n(f,p,c,t,e,h);if(!(void 0===y?Bt(p,f,n,s|u,h):y))return!1}}return!0}(r,t,e)}}(t):Kt(e=t)?(r=Zt(e),function(t){return null==t?void 0:t[r]}):function(t){return function(e){return Mt(e,t)}}(e);var e,r}function Ut(t){if(r=(e=t)&&e.constructor,n="function"==typeof r&&r.prototype||rt,e!==n)return ht(t);var e,r,n,o=[];for(var i in Object(t))at.call(t,i)&&"constructor"!=i&&o.push(i);return o}function Gt(t){return ne(t)?t:Xt(t)}jt.prototype.clear=function(){this.__data__=gt?gt(null):{}},jt.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},jt.prototype.get=function(t){var e=this.__data__;if(gt){var r=e[t];return r===a?void 0:r}return at.call(e,t)?e[t]:void 0},jt.prototype.has=function(t){var e=this.__data__;return gt?void 0!==e[t]:at.call(e,t)},jt.prototype.set=function(t,e){return this.__data__[t]=gt&&void 0===e?a:e,this},kt.prototype.clear=function(){this.__data__=[]},kt.prototype.delete=function(t){var e=this.__data__,r=Rt(e,t);return!(r<0||(r==e.length-1?e.pop():pt.call(e,r,1),0))},kt.prototype.get=function(t){var e=this.__data__,r=Rt(e,t);return r<0?void 0:e[r][1]},kt.prototype.has=function(t){return Rt(this.__data__,t)>-1},kt.prototype.set=function(t,e){var r=this.__data__,n=Rt(r,t);return n<0?r.push([t,e]):r[n][1]=e,this},xt.prototype.clear=function(){this.__data__={hash:new jt,map:new(dt||kt),string:new jt}},xt.prototype.delete=function(t){return Ht(this,t).delete(t)},xt.prototype.get=function(t){return Ht(this,t).get(t)},xt.prototype.has=function(t){return Ht(this,t).has(t)},xt.prototype.set=function(t,e){return Ht(this,t).set(t,e),this},At.prototype.add=At.prototype.push=function(t){return this.__data__.set(t,a),this},At.prototype.has=function(t){return this.__data__.has(t)},It.prototype.clear=function(){this.__data__=new kt},It.prototype.delete=function(t){return this.__data__.delete(t)},It.prototype.get=function(t){return this.__data__.get(t)},It.prototype.has=function(t){return this.__data__.has(t)},It.prototype.set=function(t,e){var r=this.__data__;if(r instanceof kt){var n=r.__data__;if(!dt||n.length<o-1)return n.push([t,e]),this;r=this.__data__=new xt(n)}return r.set(t,e),this};var Vt=vt&&1/Y(new vt([,-0]))[1]==l?function(t){return new vt(t)}:function(){};function qt(t,e,r,n,o,i){var a=o&u,l=t.length,c=e.length;if(l!=c&&!(a&&c>l))return!1;var f=i.get(t);if(f&&i.get(e))return f==e;var p=-1,h=!0,y=o&s?new At:void 0;for(i.set(t,e),i.set(e,t);++p<l;){var d=t[p],b=e[p];if(n)var v=a?n(b,d,p,e,t,i):n(d,b,p,t,e,i);if(void 0!==v){if(v)continue;h=!1;break}if(y){if(!z(e,function(t,e){if(!y.has(e)&&(d===t||r(d,t,n,o,i)))return y.add(e)})){h=!1;break}}else if(d!==b&&!r(d,b,n,o,i)){h=!1;break}}return i.delete(t),i.delete(e),h}function Ht(t,e){var r,o,i=t.__data__;return("string"==(o=n(r=e))||"number"==o||"symbol"==o||"boolean"==o?"__proto__"!==r:null===r)?i["string"==typeof e?"string":"hash"]:i.map}function zt(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return Dt(r)?r:void 0}var Jt=function(t){return st.call(t)};function Wt(t,e){return!!(e=null==e?c:e)&&("number"==typeof t||N.test(t))&&t>-1&&t%1==0&&t<e}function Kt(t,e){if(ne(t))return!1;var r=n(t);return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!le(t))||(j.test(t)||!T.test(t)||null!=e&&t in Object(e))}function Qt(t){return t==t&&!se(t)}function Yt(t,e){return function(r){return null!=r&&(r[t]===e&&(void 0!==e||t in Object(r)))}}(yt&&Jt(new yt(new ArrayBuffer(1)))!=C||dt&&Jt(new dt)!=m||bt&&"[object Promise]"!=Jt(bt.resolve())||vt&&Jt(new vt)!=O||mt&&"[object WeakMap]"!=Jt(new mt))&&(Jt=function(t){var e=st.call(t),r=e==S?t.constructor:void 0,n=r?$t(r):void 0;if(n)switch(n){case St:return C;case wt:return m;case Ot:return"[object Promise]";case _t:return O;case Pt:return"[object WeakMap]"}return e});var Xt=te(function(t){var e;t=null==(e=t)?"":function(t){if("string"==typeof t)return t;if(le(t))return Tt?Tt.call(t):"";var e=t+"";return"0"==e&&1/t==-l?"-0":e}(e);var r=[];return k.test(t)&&r.push(""),t.replace(x,function(t,e,n,o){r.push(n?o.replace(A,"$1"):e||t)}),r});function Zt(t){if("string"==typeof t||le(t))return t;var e=t+"";return"0"==e&&1/t==-l?"-0":e}function $t(t){if(null!=t){try{return it.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function te(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError(i);var r=function r(){var n=arguments,o=e?e.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=t.apply(this,n);return r.cache=i.set(o,a),a};return r.cache=new(te.Cache||xt),r}function ee(t,e){return t===e||t!=t&&e!=e}function re(t){return function(t){return ue(t)&&oe(t)}(t)&&at.call(t,"callee")&&(!ft.call(t,"callee")||st.call(t)==f)}te.Cache=xt;var ne=Array.isArray;function oe(t){return null!=t&&ae(t.length)&&!ie(t)}function ie(t){var e=se(t)?st.call(t):"";return e==b||e==v}function ae(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=c}function se(t){var e=n(t);return!!t&&("object"==e||"function"==e)}function ue(t){return!!t&&"object"==n(t)}function le(t){return"symbol"==n(t)||ue(t)&&st.call(t)==P}var ce=V?function(t){return function(e){return t(e)}}(V):function(t){return ue(t)&&ae(t.length)&&!!R[st.call(t)]};function fe(t){return oe(t)?Nt(t):Ut(t)}function pe(t){return t}t.exports=function(t,e){return t&&t.length?function(t,e,r){var n=-1,i=q,a=t.length,s=!0,u=[],l=u;if(r)s=!1,i=H;else if(a>=o){var c=e?null:Vt(t);if(c)return Y(c);s=!1,i=W,l=new At}else l=e?[]:u;t:for(;++n<a;){var f=t[n],p=e?e(f):f;if(f=r||0!==f?f:0,s&&p==p){for(var h=l.length;h--;)if(l[h]===p)continue t;e&&l.push(p),u.push(f)}else i(l,p,r)||(l!==u&&l.push(p),u.push(f))}return u}(t,Ft(e)):[]}},7915:function(t,e,r){var n,o,i,a;function s(t){"@babel/helpers - typeof";return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t=r.nmd(t),window,a=function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==s(t)&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=32)}([function(t,e){t.exports={options:{usePureJavaScript:!1}}},function(t,e,r){(function(e){var n=r(0),o=r(35),i=t.exports=n.util=n.util||{};function a(t){if(8!==t&&16!==t&&24!==t&&32!==t)throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}function u(t){if(this.data="",this.read=0,"string"==typeof t)this.data=t;else if(i.isArrayBuffer(t)||i.isArrayBufferView(t))if("undefined"!=typeof Buffer&&t instanceof Buffer)this.data=t.toString("binary");else{var e=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,e)}catch(t){for(var r=0;r<e.length;++r)this.putByte(e[r])}}else(t instanceof u||"object"==s(t)&&"string"==typeof t.data&&"number"==typeof t.read)&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}!function(){if("undefined"!=typeof process&&process.nextTick&&!process.browser)return i.nextTick=process.nextTick,void("function"==typeof setImmediate?i.setImmediate=setImmediate:i.setImmediate=i.nextTick);if("function"==typeof setImmediate)return i.setImmediate=function(){return setImmediate.apply(void 0,arguments)},void(i.nextTick=function(t){return setImmediate(t)});if(i.setImmediate=function(t){setTimeout(t,0)},"undefined"!=typeof window&&"function"==typeof window.postMessage){var t="forge.setImmediate",e=[];i.setImmediate=function(r){e.push(r),1===e.length&&window.postMessage(t,"*")},window.addEventListener("message",function(r){if(r.source===window&&r.data===t){r.stopPropagation();var n=e.slice();e.length=0,n.forEach(function(t){t()})}},!0)}if("undefined"!=typeof MutationObserver){var r=Date.now(),n=!0,o=document.createElement("div");e=[],new MutationObserver(function(){var t=e.slice();e.length=0,t.forEach(function(t){t()})}).observe(o,{attributes:!0});var a=i.setImmediate;i.setImmediate=function(t){Date.now()-r>15?(r=Date.now(),a(t)):(e.push(t),1===e.length&&o.setAttribute("a",n=!n))}}i.nextTick=i.setImmediate}(),i.isNodejs="undefined"!=typeof process&&process.versions&&process.versions.node,i.globalScope=i.isNodejs?e:"undefined"==typeof self?window:self,i.isArray=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},i.isArrayBuffer=function(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer},i.isArrayBufferView=function(t){return t&&i.isArrayBuffer(t.buffer)&&void 0!==t.byteLength},i.ByteBuffer=u,i.ByteStringBuffer=u,i.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>4096&&(this.data.substr(0,1),this._constructedStringLength=0)},i.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},i.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0},i.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))},i.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var r=this.data;e>0;)1&e&&(r+=t),(e>>>=1)>0&&(t+=t);return this.data=r,this._optimizeConstructedString(e),this},i.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this},i.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(i.encodeUtf8(t))},i.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(255&t))},i.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(255&t))},i.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(255&t))},i.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(255&t)+String.fromCharCode(t>>8&255))},i.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(255&t)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))},i.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(255&t)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))},i.ByteStringBuffer.prototype.putInt=function(t,e){a(e);var r="";do{e-=8,r+=String.fromCharCode(t>>e&255)}while(e>0);return this.putBytes(r)},i.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)},i.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())},i.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},i.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t},i.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t},i.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t},i.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t},i.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t},i.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t},i.ByteStringBuffer.prototype.getInt=function(t){a(t);var e=0;do{e=(e<<8)+this.data.charCodeAt(this.read++),t-=8}while(t>0);return e},i.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e},i.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):0===t?e="":(e=0===this.read?this.data:this.data.slice(this.read),this.clear()),e},i.ByteStringBuffer.prototype.bytes=function(t){return void 0===t?this.data.slice(this.read):this.data.slice(this.read,this.read+t)},i.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)},i.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this},i.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},i.ByteStringBuffer.prototype.copy=function(){var t=i.createBuffer(this.data);return t.read=this.read,t},i.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this},i.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this},i.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this},i.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var r=this.data.charCodeAt(e);r<16&&(t+="0"),t+=r.toString(16)}return t},i.ByteStringBuffer.prototype.toString=function(){return i.decodeUtf8(this.bytes())},i.DataBuffer=function(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var r=i.isArrayBuffer(t),n=i.isArrayBufferView(t);if(r||n)return this.data=r?new DataView(t):new DataView(t.buffer,t.byteOffset,t.byteLength),void(this.write="writeOffset"in e?e.writeOffset:this.data.byteLength);this.data=new DataView(new ArrayBuffer(0)),this.write=0,null!=t&&this.putBytes(t),"writeOffset"in e&&(this.write=e.writeOffset)},i.DataBuffer.prototype.length=function(){return this.write-this.read},i.DataBuffer.prototype.isEmpty=function(){return this.length()<=0},i.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+e);return n.set(r),this.data=new DataView(n.buffer),this},i.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this},i.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var r=0;r<e;++r)this.data.setUint8(t);return this},i.DataBuffer.prototype.putBytes=function(t,e){if(i.isArrayBufferView(t)){var r=(n=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)).byteLength-n.byteOffset;return this.accommodate(r),new Uint8Array(this.data.buffer,this.write).set(n),this.write+=r,this}if(i.isArrayBuffer(t)){var n=new Uint8Array(t);return this.accommodate(n.byteLength),new Uint8Array(this.data.buffer).set(n,this.write),this.write+=n.byteLength,this}if(t instanceof i.DataBuffer||"object"==s(t)&&"number"==typeof t.read&&"number"==typeof t.write&&i.isArrayBufferView(t.data))return n=new Uint8Array(t.data.byteLength,t.read,t.length()),this.accommodate(n.byteLength),new Uint8Array(t.data.byteLength,this.write).set(n),this.write+=n.byteLength,this;if(t instanceof i.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary","string"==typeof t){var o;if("hex"===e)return this.accommodate(Math.ceil(t.length/2)),o=new Uint8Array(this.data.buffer,this.write),this.write+=i.binary.hex.decode(t,o,this.write),this;if("base64"===e)return this.accommodate(3*Math.ceil(t.length/4)),o=new Uint8Array(this.data.buffer,this.write),this.write+=i.binary.base64.decode(t,o,this.write),this;if("utf8"===e&&(t=i.encodeUtf8(t),e="binary"),"binary"===e||"raw"===e)return this.accommodate(t.length),o=new Uint8Array(this.data.buffer,this.write),this.write+=i.binary.raw.decode(o),this;if("utf16"===e)return this.accommodate(2*t.length),o=new Uint16Array(this.data.buffer,this.write),this.write+=i.text.utf16.encode(o),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)},i.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this},i.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")},i.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this},i.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this},i.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this},i.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this},i.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this},i.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this},i.DataBuffer.prototype.putInt=function(t,e){a(e),this.accommodate(e/8);do{e-=8,this.data.setInt8(this.write++,t>>e&255)}while(e>0);return this},i.DataBuffer.prototype.putSignedInt=function(t,e){return a(e),this.accommodate(e/8),t<0&&(t+=2<<e-1),this.putInt(t,e)},i.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)},i.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t},i.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t},i.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t},i.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t},i.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t},i.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t},i.DataBuffer.prototype.getInt=function(t){a(t);var e=0;do{e=(e<<8)+this.data.getInt8(this.read++),t-=8}while(t>0);return e},i.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e},i.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):0===t?e="":(e=0===this.read?this.data:this.data.slice(this.read),this.clear()),e},i.DataBuffer.prototype.bytes=function(t){return void 0===t?this.data.slice(this.read):this.data.slice(this.read,this.read+t)},i.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)},i.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this},i.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)},i.DataBuffer.prototype.copy=function(){return new i.DataBuffer(this)},i.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this},i.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this},i.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this},i.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var r=this.data.getUint8(e);r<16&&(t+="0"),t+=r.toString(16)}return t},i.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if("binary"===(t=t||"utf8")||"raw"===t)return i.binary.raw.encode(e);if("hex"===t)return i.binary.hex.encode(e);if("base64"===t)return i.binary.base64.encode(e);if("utf8"===t)return i.text.utf8.decode(e);if("utf16"===t)return i.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)},i.createBuffer=function(t,e){return e=e||"raw",void 0!==t&&"utf8"===e&&(t=i.encodeUtf8(t)),new i.ByteBuffer(t)},i.fillString=function(t,e){for(var r="";e>0;)1&e&&(r+=t),(e>>>=1)>0&&(t+=t);return r},i.xorBytes=function(t,e,r){for(var n="",o="",i="",a=0,s=0;r>0;--r,++a)o=t.charCodeAt(a)^e.charCodeAt(a),s>=10&&(n+=i,i="",s=0),i+=String.fromCharCode(o),++s;return n+i},i.hexToBytes=function(t){var e="",r=0;for(!0&t.length&&(r=1,e+=String.fromCharCode(parseInt(t[0],16)));r<t.length;r+=2)e+=String.fromCharCode(parseInt(t.substr(r,2),16));return e},i.bytesToHex=function(t){return i.createBuffer(t).toHex()},i.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(255&t)};var l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],f="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";i.encode64=function(t,e){for(var r,n,o,i="",a="",s=0;s<t.length;)r=t.charCodeAt(s++),n=t.charCodeAt(s++),o=t.charCodeAt(s++),i+=l.charAt(r>>2),i+=l.charAt((3&r)<<4|n>>4),isNaN(n)?i+="==":(i+=l.charAt((15&n)<<2|o>>6),i+=isNaN(o)?"=":l.charAt(63&o)),e&&i.length>e&&(a+=i.substr(0,e)+"\r\n",i=i.substr(e));return a+i},i.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e,r,n,o,i="",a=0;a<t.length;)e=c[t.charCodeAt(a++)-43],r=c[t.charCodeAt(a++)-43],n=c[t.charCodeAt(a++)-43],o=c[t.charCodeAt(a++)-43],i+=String.fromCharCode(e<<2|r>>4),64!==n&&(i+=String.fromCharCode((15&r)<<4|n>>2),64!==o&&(i+=String.fromCharCode((3&n)<<6|o)));return i},i.encodeUtf8=function(t){return unescape(encodeURIComponent(t))},i.decodeUtf8=function(t){return decodeURIComponent(escape(t))},i.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:o.encode,decode:o.decode}},i.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)},i.binary.raw.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length));for(var o=r=r||0,i=0;i<t.length;++i)n[o++]=t.charCodeAt(i);return e?o-r:n},i.binary.hex.encode=i.bytesToHex,i.binary.hex.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/2)));var o=0,i=r=r||0;for(1&t.length&&(o=1,n[i++]=parseInt(t[0],16));o<t.length;o+=2)n[i++]=parseInt(t.substr(o,2),16);return e?i-r:n},i.binary.base64.encode=function(t,e){for(var r,n,o,i="",a="",s=0;s<t.byteLength;)r=t[s++],n=t[s++],o=t[s++],i+=l.charAt(r>>2),i+=l.charAt((3&r)<<4|n>>4),isNaN(n)?i+="==":(i+=l.charAt((15&n)<<2|o>>6),i+=isNaN(o)?"=":l.charAt(63&o)),e&&i.length>e&&(a+=i.substr(0,e)+"\r\n",i=i.substr(e));return a+i},i.binary.base64.decode=function(t,e,r){var n,o,i,a,s=e;s||(s=new Uint8Array(3*Math.ceil(t.length/4))),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var u=0,l=r=r||0;u<t.length;)n=c[t.charCodeAt(u++)-43],o=c[t.charCodeAt(u++)-43],i=c[t.charCodeAt(u++)-43],a=c[t.charCodeAt(u++)-43],s[l++]=n<<2|o>>4,64!==i&&(s[l++]=(15&o)<<4|i>>2,64!==a&&(s[l++]=(3&i)<<6|a));return e?l-r:s.subarray(0,l)},i.binary.base58.encode=function(t,e){return i.binary.baseN.encode(t,f,e)},i.binary.base58.decode=function(t,e){return i.binary.baseN.decode(t,f,e)},i.text={utf8:{},utf16:{}},i.text.utf8.encode=function(t,e,r){t=i.encodeUtf8(t);var n=e;n||(n=new Uint8Array(t.length));for(var o=r=r||0,a=0;a<t.length;++a)n[o++]=t.charCodeAt(a);return e?o-r:n},i.text.utf8.decode=function(t){return i.decodeUtf8(String.fromCharCode.apply(null,t))},i.text.utf16.encode=function(t,e,r){var n=e;n||(n=new Uint8Array(2*t.length));for(var o=new Uint16Array(n.buffer),i=r=r||0,a=r,s=0;s<t.length;++s)o[a++]=t.charCodeAt(s),i+=2;return e?i-r:n},i.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))},i.deflate=function(t,e,r){if(e=i.decode64(t.deflate(i.encode64(e)).rval),r){var n=2;32&e.charCodeAt(1)&&(n=6),e=e.substring(n,e.length-4)}return e},i.inflate=function(t,e,r){var n=t.inflate(i.encode64(e)).rval;return null===n?null:i.decode64(n)};var p=function(t,e,r){if(!t)throw new Error("WebStorage not available.");var n;if(null===r?n=t.removeItem(e):(r=i.encode64(JSON.stringify(r)),n=t.setItem(e,r)),void 0!==n&&!0!==n.rval){var o=new Error(n.error.message);throw o.id=n.error.id,o.name=n.error.name,o}},h=function(t,e){if(!t)throw new Error("WebStorage not available.");var r=t.getItem(e);if(t.init)if(null===r.rval){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return null!==r&&(r=JSON.parse(i.decode64(r))),r},y=function(t,e,r,n){var o=h(t,e);null===o&&(o={}),o[r]=n,p(t,e,o)},d=function(t,e,r){var n=h(t,e);return null!==n&&(n=r in n?n[r]:null),n},b=function(t,e,r){var n=h(t,e);if(null!==n&&r in n){delete n[r];var o=!0;for(var i in n){o=!1;break}o&&(n=null),p(t,e,n)}},v=function(t,e){p(t,e,null)},m=function(t,e,r){var n,o=null;void 0===r&&(r=["web","flash"]);var i=!1,a=null;for(var s in r){n=r[s];try{if("flash"===n||"both"===n){if(null===e[0])throw new Error("Flash local storage not available.");o=t.apply(this,e),i="flash"===n}"web"!==n&&"both"!==n||(e[0]=localStorage,o=t.apply(this,e),i=!0)}catch(t){a=t}if(i)break}if(!i)throw a;return o};i.setItem=function(t,e,r,n,o){m(y,arguments,o)},i.getItem=function(t,e,r,n){return m(d,arguments,n)},i.removeItem=function(t,e,r,n){m(b,arguments,n)},i.clearItems=function(t,e,r){m(v,arguments,r)},i.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},i.format=function(t){for(var e,r,n=/%./g,o=0,i=[],a=0;e=n.exec(t);){(r=t.substring(a,n.lastIndex-2)).length>0&&i.push(r),a=n.lastIndex;var s=e[0][1];switch(s){case"s":case"o":o<arguments.length?i.push(arguments[1+o++]):i.push("<?>");break;case"%":i.push("%");break;default:i.push("<%"+s+"?>")}}return i.push(t.substring(a)),i.join("")},i.formatNumber=function(t,e,r,n){var o=t,i=isNaN(e=Math.abs(e))?2:e,a=void 0===r?",":r,s=void 0===n?".":n,u=o<0?"-":"",l=parseInt(o=Math.abs(+o||0).toFixed(i),10)+"",c=l.length>3?l.length%3:0;return u+(c?l.substr(0,c)+s:"")+l.substr(c).replace(/(\d{3})(?=\d)/g,"$1"+s)+(i?a+Math.abs(o-l).toFixed(i).slice(2):"")},i.formatSize=function(t){return t>=1073741824?i.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?i.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?i.formatNumber(t/1024,0)+" KiB":i.formatNumber(t,0)+" bytes"},i.bytesFromIP=function(t){return-1!==t.indexOf(".")?i.bytesFromIPv4(t):-1!==t.indexOf(":")?i.bytesFromIPv6(t):null},i.bytesFromIPv4=function(t){if(4!==(t=t.split(".")).length)return null;for(var e=i.createBuffer(),r=0;r<t.length;++r){var n=parseInt(t[r],10);if(isNaN(n))return null;e.putByte(n)}return e.getBytes()},i.bytesFromIPv6=function(t){for(var e=0,r=2*(8-(t=t.split(":").filter(function(t){return 0===t.length&&++e,!0})).length+e),n=i.createBuffer(),o=0;o<8;++o)if(t[o]&&0!==t[o].length){var a=i.hexToBytes(t[o]);a.length<2&&n.putByte(0),n.putBytes(a)}else n.fillWithByte(0,r),r=0;return n.getBytes()},i.bytesToIP=function(t){return 4===t.length?i.bytesToIPv4(t):16===t.length?i.bytesToIPv6(t):null},i.bytesToIPv4=function(t){if(4!==t.length)return null;for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e.join(".")},i.bytesToIPv6=function(t){if(16!==t.length)return null;for(var e=[],r=[],n=0,o=0;o<t.length;o+=2){for(var a=i.bytesToHex(t[o]+t[o+1]);"0"===a[0]&&"0"!==a;)a=a.substr(1);if("0"===a){var s=r[r.length-1],u=e.length;s&&u===s.end+1?(s.end=u,s.end-s.start>r[n].end-r[n].start&&(n=r.length-1)):r.push({start:u,end:u})}e.push(a)}if(r.length>0){var l=r[n];l.end-l.start>0&&(e.splice(l.start,l.end-l.start+1,""),0===l.start&&e.unshift(""),7===l.end&&e.push(""))}return e.join(":")},i.estimateCores=function(t,e){if("function"==typeof t&&(e=t,t={}),t=t||{},"cores"in i&&!t.update)return e(null,i.cores);if("undefined"!=typeof navigator&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return i.cores=navigator.hardwareConcurrency,e(null,i.cores);if("undefined"==typeof Worker)return i.cores=1,e(null,i.cores);if("undefined"==typeof Blob)return i.cores=2,e(null,i.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(t){for(var e=Date.now(),r=e+4;Date.now()<r;);self.postMessage({st:e,et:r})})}.toString(),")()"],{type:"application/javascript"}));!function t(n,o,a){if(0===o){var s=Math.floor(n.reduce(function(t,e){return t+e},0)/n.length);return i.cores=Math.max(1,s),URL.revokeObjectURL(r),e(null,i.cores)}!function(t,e){for(var n=[],o=[],i=0;i<t;++i){var a=new Worker(r);a.addEventListener("message",function(r){if(o.push(r.data),o.length===t){for(var i=0;i<t;++i)n[i].terminate();e(null,o)}}),n.push(a)}for(i=0;i<t;++i)n[i].postMessage(i)}(a,function(e,r){n.push(function(t,e){for(var r=[],n=0;n<t;++n)for(var o=e[n],i=r[n]=[],a=0;a<t;++a)if(n!==a){var s=e[a];(o.st>s.st&&o.st<s.et||s.st>o.st&&s.st<o.et)&&i.push(a)}return r.reduce(function(t,e){return Math.max(t,e.length)},0)}(a,r)),t(n,o-1,a)})}([],5,16)}}).call(this,r(34))},function(t,e,r){var n=r(0);r(5),r(23),r(24),r(1),n.random&&n.random.getBytes?t.exports=n.random:function(e){var r={},o=new Array(4),i=n.util.createBuffer();function a(){var t=n.prng.create(r);return t.getBytes=function(e,r){return t.generate(e,r)},t.getBytesSync=function(e){return t.generate(e)},t}r.formatKey=function(t){var e=n.util.createBuffer(t);return(t=new Array(4))[0]=e.getInt32(),t[1]=e.getInt32(),t[2]=e.getInt32(),t[3]=e.getInt32(),n.aes._expandKey(t,!1)},r.formatSeed=function(t){var e=n.util.createBuffer(t);return(t=new Array(4))[0]=e.getInt32(),t[1]=e.getInt32(),t[2]=e.getInt32(),t[3]=e.getInt32(),t},r.cipher=function(t,e){return n.aes._updateBlock(t,e,o,!1),i.putInt32(o[0]),i.putInt32(o[1]),i.putInt32(o[2]),i.putInt32(o[3]),i.getBytes()},r.increment=function(t){return++t[3],t},r.md=n.md.sha256;var s=a(),u=null,l=n.util.globalScope,c=l.crypto||l.msCrypto;if(c&&c.getRandomValues&&(u=function(t){return c.getRandomValues(t)}),n.options.usePureJavaScript||!n.util.isNodejs&&!u){if("undefined"==typeof window||window.document,s.collectInt(+new Date,32),"undefined"!=typeof navigator){var f="";for(var p in navigator)try{"string"==typeof navigator[p]&&(f+=navigator[p])}catch(t){}s.collect(f),f=null}e&&(e().mousemove(function(t){s.collectInt(t.clientX,16),s.collectInt(t.clientY,16)}),e().keypress(function(t){s.collectInt(t.charCode,8)}))}if(n.random)for(var p in s)n.random[p]=s[p];else n.random=s;n.random.createInstance=a,t.exports=n.random}("undefined"!=typeof jQuery?jQuery:null)},function(t,e,r){var n=r(0);r(1),r(6);var o=t.exports=n.asn1=n.asn1||{};function i(t,e,r){if(r>e){var n=new Error("Too few bytes to parse DER.");throw n.available=t.length(),n.remaining=e,n.requested=r,n}}o.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192},o.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30},o.create=function(t,e,r,i,a){if(n.util.isArray(i)){for(var s=[],u=0;u<i.length;++u)void 0!==i[u]&&s.push(i[u]);i=s}var l={tagClass:t,type:e,constructed:r,composed:r||n.util.isArray(i),value:i};return a&&"bitStringContents"in a&&(l.bitStringContents=a.bitStringContents,l.original=o.copy(l)),l},o.copy=function(t,e){var r;if(n.util.isArray(t)){r=[];for(var i=0;i<t.length;++i)r.push(o.copy(t[i],e));return r}return"string"==typeof t?t:(r={tagClass:t.tagClass,type:t.type,constructed:t.constructed,composed:t.composed,value:o.copy(t.value,e)},e&&!e.excludeBitStringContents&&(r.bitStringContents=t.bitStringContents),r)},o.equals=function(t,e,r){if(n.util.isArray(t)){if(!n.util.isArray(e))return!1;if(t.length!==e.length)return!1;for(var i=0;i<t.length;++i)if(!o.equals(t[i],e[i]))return!1;return!0}if(s(t)!=s(e))return!1;if("string"==typeof t)return t===e;var a=t.tagClass===e.tagClass&&t.type===e.type&&t.constructed===e.constructed&&t.composed===e.composed&&o.equals(t.value,e.value);return r&&r.includeBitStringContents&&(a=a&&t.bitStringContents===e.bitStringContents),a},o.getBerValueLength=function(t){var e=t.getByte();if(128!==e)return 128&e?t.getInt((127&e)<<3):e},o.fromDer=function(t,e){void 0===e&&(e={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),"boolean"==typeof e&&(e={strict:e,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in e||(e.strict=!0),"parseAllBytes"in e||(e.parseAllBytes=!0),"decodeBitStrings"in e||(e.decodeBitStrings=!0),"string"==typeof t&&(t=n.util.createBuffer(t));var r=t.length(),a=function t(e,r,n,a){var s;i(e,r,2);var u=e.getByte();r--;var l=192&u,c=31&u;s=e.length();var f,p,h=function(t,e){var r=t.getByte();if(e--,128!==r){var n;if(128&r){var o=127&r;i(t,e,o),n=t.getInt(o<<3)}else n=r;if(n<0)throw new Error("Negative length: "+n);return n}}(e,r);if(r-=s-e.length(),void 0!==h&&h>r){if(a.strict){var y=new Error("Too few bytes to read ASN.1 value.");throw y.available=e.length(),y.remaining=r,y.requested=h,y}h=r}var d=32==(32&u);if(d)if(f=[],void 0===h)for(;;){if(i(e,r,2),e.bytes(2)===String.fromCharCode(0,0)){e.getBytes(2),r-=2;break}s=e.length(),f.push(t(e,r,n+1,a)),r-=s-e.length()}else for(;h>0;)s=e.length(),f.push(t(e,h,n+1,a)),r-=s-e.length(),h-=s-e.length();if(void 0===f&&l===o.Class.UNIVERSAL&&c===o.Type.BITSTRING&&(p=e.bytes(h)),void 0===f&&a.decodeBitStrings&&l===o.Class.UNIVERSAL&&c===o.Type.BITSTRING&&h>1){var b=e.read,v=r,m=0;if(c===o.Type.BITSTRING&&(i(e,r,1),m=e.getByte(),r--),0===m)try{s=e.length();var g=t(e,r,n+1,{strict:!0,decodeBitStrings:!0}),S=s-e.length();r-=S,c==o.Type.BITSTRING&&S++;var w=g.tagClass;S!==h||w!==o.Class.UNIVERSAL&&w!==o.Class.CONTEXT_SPECIFIC||(f=[g])}catch(t){}void 0===f&&(e.read=b,r=v)}if(void 0===f){if(void 0===h){if(a.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");h=r}if(c===o.Type.BMPSTRING)for(f="";h>0;h-=2)i(e,r,2),f+=String.fromCharCode(e.getInt16()),r-=2;else f=e.getBytes(h),r-=h}var O=void 0===p?null:{bitStringContents:p};return o.create(l,c,d,f,O)}(t,t.length(),0,e);if(e.parseAllBytes&&0!==t.length()){var s=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw s.byteCount=r,s.remaining=t.length(),s}return a},o.toDer=function(t){var e=n.util.createBuffer(),r=t.tagClass|t.type,i=n.util.createBuffer(),a=!1;if("bitStringContents"in t&&(a=!0,t.original&&(a=o.equals(t,t.original))),a)i.putBytes(t.bitStringContents);else if(t.composed){t.constructed?r|=32:i.putByte(0);for(var s=0;s<t.value.length;++s)void 0!==t.value[s]&&i.putBuffer(o.toDer(t.value[s]))}else if(t.type===o.Type.BMPSTRING)for(s=0;s<t.value.length;++s)i.putInt16(t.value.charCodeAt(s));else t.type===o.Type.INTEGER&&t.value.length>1&&(0===t.value.charCodeAt(0)&&0==(128&t.value.charCodeAt(1))||255===t.value.charCodeAt(0)&&128==(128&t.value.charCodeAt(1)))?i.putBytes(t.value.substr(1)):i.putBytes(t.value);if(e.putByte(r),i.length()<=127)e.putByte(127&i.length());else{var u=i.length(),l="";do{l+=String.fromCharCode(255&u),u>>>=8}while(u>0);for(e.putByte(128|l.length),s=l.length-1;s>=0;--s)e.putByte(l.charCodeAt(s))}return e.putBuffer(i),e},o.oidToDer=function(t){var e,r,o,i,a=t.split("."),s=n.util.createBuffer();s.putByte(40*parseInt(a[0],10)+parseInt(a[1],10));for(var u=2;u<a.length;++u){e=!0,r=[],o=parseInt(a[u],10);do{i=127&o,o>>>=7,e||(i|=128),r.push(i),e=!1}while(o>0);for(var l=r.length-1;l>=0;--l)s.putByte(r[l])}return s},o.derToOid=function(t){var e;"string"==typeof t&&(t=n.util.createBuffer(t));var r=t.getByte();e=Math.floor(r/40)+"."+r%40;for(var o=0;t.length()>0;)o<<=7,128&(r=t.getByte())?o+=127&r:(e+="."+(o+r),o=0);return e},o.utcTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(t.substr(2,2),10)-1,o=parseInt(t.substr(4,2),10),i=parseInt(t.substr(6,2),10),a=parseInt(t.substr(8,2),10),s=0;if(t.length>11){var u=t.charAt(10),l=10;"+"!==u&&"-"!==u&&(s=parseInt(t.substr(10,2),10),l+=2)}if(e.setUTCFullYear(r,n,o),e.setUTCHours(i,a,s,0),l&&("+"===(u=t.charAt(l))||"-"===u)){var c=60*parseInt(t.substr(l+1,2),10)+parseInt(t.substr(l+4,2),10);c*=6e4,"+"===u?e.setTime(+e-c):e.setTime(+e+c)}return e},o.generalizedTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,4),10),n=parseInt(t.substr(4,2),10)-1,o=parseInt(t.substr(6,2),10),i=parseInt(t.substr(8,2),10),a=parseInt(t.substr(10,2),10),s=parseInt(t.substr(12,2),10),u=0,l=0,c=!1;"Z"===t.charAt(t.length-1)&&(c=!0);var f=t.length-5,p=t.charAt(f);return"+"!==p&&"-"!==p||(l=60*parseInt(t.substr(f+1,2),10)+parseInt(t.substr(f+4,2),10),l*=6e4,"+"===p&&(l*=-1),c=!0),"."===t.charAt(14)&&(u=1e3*parseFloat(t.substr(14),10)),c?(e.setUTCFullYear(r,n,o),e.setUTCHours(i,a,s,u),e.setTime(+e+l)):(e.setFullYear(r,n,o),e.setHours(i,a,s,u)),e},o.dateToUtcTime=function(t){if("string"==typeof t)return t;var e="",r=[];r.push((""+t.getUTCFullYear()).substr(2)),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+"Z"},o.dateToGeneralizedTime=function(t){if("string"==typeof t)return t;var e="",r=[];r.push(""+t.getUTCFullYear()),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+"Z"},o.integerToDer=function(t){var e=n.util.createBuffer();if(t>=-128&&t<128)return e.putSignedInt(t,8);if(t>=-32768&&t<32768)return e.putSignedInt(t,16);if(t>=-8388608&&t<8388608)return e.putSignedInt(t,24);if(t>=-2147483648&&t<2147483648)return e.putSignedInt(t,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=t,r},o.derToInteger=function(t){"string"==typeof t&&(t=n.util.createBuffer(t));var e=8*t.length();if(e>32)throw new Error("Integer too large; max is 32-bits.");return t.getSignedInt(e)},o.validate=function(t,e,r,i){var a=!1;if(t.tagClass!==e.tagClass&&void 0!==e.tagClass||t.type!==e.type&&void 0!==e.type)i&&(t.tagClass!==e.tagClass&&i.push("["+e.name+'] Expected tag class "'+e.tagClass+'", got "'+t.tagClass+'"'),t.type!==e.type&&i.push("["+e.name+'] Expected type "'+e.type+'", got "'+t.type+'"'));else if(t.constructed===e.constructed||void 0===e.constructed){if(a=!0,e.value&&n.util.isArray(e.value))for(var s=0,u=0;a&&u<e.value.length;++u)a=e.value[u].optional||!1,t.value[s]&&((a=o.validate(t.value[s],e.value[u],r,i))?++s:e.value[u].optional&&(a=!0)),!a&&i&&i.push("["+e.name+'] Tag class "'+e.tagClass+'", type "'+e.type+'" expected value length "'+e.value.length+'", got "'+t.value.length+'"');if(a&&r&&(e.capture&&(r[e.capture]=t.value),e.captureAsn1&&(r[e.captureAsn1]=t),e.captureBitStringContents&&"bitStringContents"in t&&(r[e.captureBitStringContents]=t.bitStringContents),e.captureBitStringValue&&"bitStringContents"in t))if(t.bitStringContents.length<2)r[e.captureBitStringValue]="";else{if(0!==t.bitStringContents.charCodeAt(0))throw new Error("captureBitStringValue only supported for zero unused bits");r[e.captureBitStringValue]=t.bitStringContents.slice(1)}}else i&&i.push("["+e.name+'] Expected constructed "'+e.constructed+'", got "'+t.constructed+'"');return a};var a=/[^\\u0000-\\u00ff]/;o.prettyPrint=function(t,e,r){var i="";r=r||2,(e=e||0)>0&&(i+="\n");for(var s="",u=0;u<e*r;++u)s+=" ";switch(i+=s+"Tag: ",t.tagClass){case o.Class.UNIVERSAL:i+="Universal:";break;case o.Class.APPLICATION:i+="Application:";break;case o.Class.CONTEXT_SPECIFIC:i+="Context-Specific:";break;case o.Class.PRIVATE:i+="Private:"}if(t.tagClass===o.Class.UNIVERSAL)switch(i+=t.type,t.type){case o.Type.NONE:i+=" (None)";break;case o.Type.BOOLEAN:i+=" (Boolean)";break;case o.Type.INTEGER:i+=" (Integer)";break;case o.Type.BITSTRING:i+=" (Bit string)";break;case o.Type.OCTETSTRING:i+=" (Octet string)";break;case o.Type.NULL:i+=" (Null)";break;case o.Type.OID:i+=" (Object Identifier)";break;case o.Type.ODESC:i+=" (Object Descriptor)";break;case o.Type.EXTERNAL:i+=" (External or Instance of)";break;case o.Type.REAL:i+=" (Real)";break;case o.Type.ENUMERATED:i+=" (Enumerated)";break;case o.Type.EMBEDDED:i+=" (Embedded PDV)";break;case o.Type.UTF8:i+=" (UTF8)";break;case o.Type.ROID:i+=" (Relative Object Identifier)";break;case o.Type.SEQUENCE:i+=" (Sequence)";break;case o.Type.SET:i+=" (Set)";break;case o.Type.PRINTABLESTRING:i+=" (Printable String)";break;case o.Type.IA5String:i+=" (IA5String (ASCII))";break;case o.Type.UTCTIME:i+=" (UTC time)";break;case o.Type.GENERALIZEDTIME:i+=" (Generalized time)";break;case o.Type.BMPSTRING:i+=" (BMP String)"}else i+=t.type;if(i+="\n",i+=s+"Constructed: "+t.constructed+"\n",t.composed){var l=0,c="";for(u=0;u<t.value.length;++u)void 0!==t.value[u]&&(l+=1,c+=o.prettyPrint(t.value[u],e+1,r),u+1<t.value.length&&(c+=","));i+=s+"Sub values: "+l+c}else{if(i+=s+"Value: ",t.type===o.Type.OID){var f=o.derToOid(t.value);i+=f,n.pki&&n.pki.oids&&f in n.pki.oids&&(i+=" ("+n.pki.oids[f]+") ")}if(t.type===o.Type.INTEGER)try{i+=o.derToInteger(t.value)}catch(e){i+="0x"+n.util.bytesToHex(t.value)}else if(t.type===o.Type.BITSTRING){if(t.value.length>1?i+="0x"+n.util.bytesToHex(t.value.slice(1)):i+="(none)",t.value.length>0){var p=t.value.charCodeAt(0);1==p?i+=" (1 unused bit shown)":p>1&&(i+=" ("+p+" unused bits shown)")}}else if(t.type===o.Type.OCTETSTRING)a.test(t.value)||(i+="("+t.value+") "),i+="0x"+n.util.bytesToHex(t.value);else if(t.type===o.Type.UTF8)try{i+=n.util.decodeUtf8(t.value)}catch(e){if("URI malformed"!==e.message)throw e;i+="0x"+n.util.bytesToHex(t.value)+" (malformed UTF8)"}else t.type===o.Type.PRINTABLESTRING||t.type===o.Type.IA5String?i+=t.value:a.test(t.value)?i+="0x"+n.util.bytesToHex(t.value):0===t.value.length?i+="[null]":i+=t.value}return i}},function(t,e,r){var n=r(0);t.exports=n.md=n.md||{},n.md.algorithms=n.md.algorithms||{}},function(t,e,r){var n=r(0);function o(t,e){n.cipher.registerAlgorithm(t,function(){return new n.aes.Algorithm(t,e)})}r(13),r(19),r(1),t.exports=n.aes=n.aes||{},n.aes.startEncrypting=function(t,e,r,n){var o=y({key:t,output:r,decrypt:!1,mode:n});return o.start(e),o},n.aes.createEncryptionCipher=function(t,e){return y({key:t,output:null,decrypt:!1,mode:e})},n.aes.startDecrypting=function(t,e,r,n){var o=y({key:t,output:r,decrypt:!0,mode:n});return o.start(e),o},n.aes.createDecryptionCipher=function(t,e){return y({key:t,output:null,decrypt:!0,mode:e})},n.aes.Algorithm=function(t,e){c||f();var r=this;r.name=t,r.mode=new e({blockSize:16,cipher:{encrypt:function(t,e){return h(r._w,t,e,!1)},decrypt:function(t,e){return h(r._w,t,e,!0)}}}),r._init=!1},n.aes.Algorithm.prototype.initialize=function(t){if(!this._init){var e,r=t.key;if("string"!=typeof r||16!==r.length&&24!==r.length&&32!==r.length){if(n.util.isArray(r)&&(16===r.length||24===r.length||32===r.length)){e=r,r=n.util.createBuffer();for(var o=0;o<e.length;++o)r.putByte(e[o])}}else r=n.util.createBuffer(r);if(!n.util.isArray(r)){e=r,r=[];var i=e.length();if(16===i||24===i||32===i)for(i>>>=2,o=0;o<i;++o)r.push(e.getInt32())}if(!n.util.isArray(r)||4!==r.length&&6!==r.length&&8!==r.length)throw new Error("Invalid key parameter.");var a=this.mode.name,s=-1!==["CFB","OFB","CTR","GCM"].indexOf(a);this._w=p(r,t.decrypt&&!s),this._init=!0}},n.aes._expandKey=function(t,e){return c||f(),p(t,e)},n.aes._updateBlock=h,o("AES-ECB",n.cipher.modes.ecb),o("AES-CBC",n.cipher.modes.cbc),o("AES-CFB",n.cipher.modes.cfb),o("AES-OFB",n.cipher.modes.ofb),o("AES-CTR",n.cipher.modes.ctr),o("AES-GCM",n.cipher.modes.gcm);var i,a,s,u,l,c=!1;function f(){c=!0,s=[0,1,2,4,8,16,32,64,128,27,54];for(var t=new Array(256),e=0;e<128;++e)t[e]=e<<1,t[e+128]=e+128<<1^283;for(i=new Array(256),a=new Array(256),u=new Array(4),l=new Array(4),e=0;e<4;++e)u[e]=new Array(256),l[e]=new Array(256);var r,n,o,f,p,h,y,d=0,b=0;for(e=0;e<256;++e){f=(f=b^b<<1^b<<2^b<<3^b<<4)>>8^255&f^99,i[d]=f,a[f]=d,h=(p=t[f])<<24^f<<16^f<<8^f^p,y=((r=t[d])^(n=t[r])^(o=t[n]))<<24^(d^o)<<16^(d^n^o)<<8^d^r^o;for(var v=0;v<4;++v)u[v][d]=h,l[v][f]=y,h=h<<24|h>>>8,y=y<<24|y>>>8;0===d?d=b=1:(d=r^t[t[t[r^o]]],b^=t[t[b]])}}function p(t,e){for(var r,n=t.slice(0),o=1,a=n.length,u=4*(a+6+1),c=a;c<u;++c)r=n[c-1],c%a==0?(r=i[r>>>16&255]<<24^i[r>>>8&255]<<16^i[255&r]<<8^i[r>>>24]^s[o]<<24,o++):a>6&&c%a==4&&(r=i[r>>>24]<<24^i[r>>>16&255]<<16^i[r>>>8&255]<<8^i[255&r]),n[c]=n[c-a]^r;if(e){for(var f,p=l[0],h=l[1],y=l[2],d=l[3],b=n.slice(0),v=(c=0,(u=n.length)-4);c<u;c+=4,v-=4)if(0===c||c===u-4)b[c]=n[v],b[c+1]=n[v+3],b[c+2]=n[v+2],b[c+3]=n[v+1];else for(var m=0;m<4;++m)f=n[v+m],b[c+(3&-m)]=p[i[f>>>24]]^h[i[f>>>16&255]]^y[i[f>>>8&255]]^d[i[255&f]];n=b}return n}function h(t,e,r,n){var o,s,c,f,p,h,y,d,b,v,m,g,S=t.length/4-1;n?(o=l[0],s=l[1],c=l[2],f=l[3],p=a):(o=u[0],s=u[1],c=u[2],f=u[3],p=i),h=e[0]^t[0],y=e[n?3:1]^t[1],d=e[2]^t[2],b=e[n?1:3]^t[3];for(var w=3,O=1;O<S;++O)v=o[h>>>24]^s[y>>>16&255]^c[d>>>8&255]^f[255&b]^t[++w],m=o[y>>>24]^s[d>>>16&255]^c[b>>>8&255]^f[255&h]^t[++w],g=o[d>>>24]^s[b>>>16&255]^c[h>>>8&255]^f[255&y]^t[++w],b=o[b>>>24]^s[h>>>16&255]^c[y>>>8&255]^f[255&d]^t[++w],h=v,y=m,d=g;r[0]=p[h>>>24]<<24^p[y>>>16&255]<<16^p[d>>>8&255]<<8^p[255&b]^t[++w],r[n?3:1]=p[y>>>24]<<24^p[d>>>16&255]<<16^p[b>>>8&255]<<8^p[255&h]^t[++w],r[2]=p[d>>>24]<<24^p[b>>>16&255]<<16^p[h>>>8&255]<<8^p[255&y]^t[++w],r[n?1:3]=p[b>>>24]<<24^p[h>>>16&255]<<16^p[y>>>8&255]<<8^p[255&d]^t[++w]}function y(t){var e,r="AES-"+((t=t||{}).mode||"CBC").toUpperCase(),o=(e=t.decrypt?n.cipher.createDecipher(r,t.key):n.cipher.createCipher(r,t.key)).start;return e.start=function(t,r){var i=null;r instanceof n.util.ByteBuffer&&(i=r,r={}),(r=r||{}).output=i,r.iv=t,o.call(e,r)},e}},function(t,e,r){var n=r(0);n.pki=n.pki||{};var o=t.exports=n.pki.oids=n.oids=n.oids||{};function i(t,e){o[t]=e,o[e]=t}function a(t,e){o[t]=e}i("1.2.840.113549.1.1.1","rsaEncryption"),i("1.2.840.113549.1.1.4","md5WithRSAEncryption"),i("1.2.840.113549.1.1.5","sha1WithRSAEncryption"),i("1.2.840.113549.1.1.7","RSAES-OAEP"),i("1.2.840.113549.1.1.8","mgf1"),i("1.2.840.113549.1.1.9","pSpecified"),i("1.2.840.113549.1.1.10","RSASSA-PSS"),i("1.2.840.113549.1.1.11","sha256WithRSAEncryption"),i("1.2.840.113549.1.1.12","sha384WithRSAEncryption"),i("1.2.840.113549.1.1.13","sha512WithRSAEncryption"),i("1.3.101.112","EdDSA25519"),i("1.2.840.10040.4.3","dsa-with-sha1"),i("1.3.14.3.2.7","desCBC"),i("1.3.14.3.2.26","sha1"),i("1.3.14.3.2.29","sha1WithRSASignature"),i("2.16.840.1.101.3.4.2.1","sha256"),i("2.16.840.1.101.3.4.2.2","sha384"),i("2.16.840.1.101.3.4.2.3","sha512"),i("2.16.840.1.101.3.4.2.4","sha224"),i("2.16.840.1.101.3.4.2.5","sha512-224"),i("2.16.840.1.101.3.4.2.6","sha512-256"),i("1.2.840.113549.2.2","md2"),i("1.2.840.113549.2.5","md5"),i("1.2.840.113549.1.7.1","data"),i("1.2.840.113549.1.7.2","signedData"),i("1.2.840.113549.1.7.3","envelopedData"),i("1.2.840.113549.1.7.4","signedAndEnvelopedData"),i("1.2.840.113549.1.7.5","digestedData"),i("1.2.840.113549.1.7.6","encryptedData"),i("1.2.840.113549.1.9.1","emailAddress"),i("1.2.840.113549.1.9.2","unstructuredName"),i("1.2.840.113549.1.9.3","contentType"),i("1.2.840.113549.1.9.4","messageDigest"),i("1.2.840.113549.1.9.5","signingTime"),i("1.2.840.113549.1.9.6","counterSignature"),i("1.2.840.113549.1.9.7","challengePassword"),i("1.2.840.113549.1.9.8","unstructuredAddress"),i("1.2.840.113549.1.9.14","extensionRequest"),i("1.2.840.113549.1.9.20","friendlyName"),i("1.2.840.113549.1.9.21","localKeyId"),i("1.2.840.113549.1.9.22.1","x509Certificate"),i("1.2.840.113549.1.12.10.1.1","keyBag"),i("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag"),i("1.2.840.113549.1.12.10.1.3","certBag"),i("1.2.840.113549.1.12.10.1.4","crlBag"),i("1.2.840.113549.1.12.10.1.5","secretBag"),i("1.2.840.113549.1.12.10.1.6","safeContentsBag"),i("1.2.840.113549.1.5.13","pkcs5PBES2"),i("1.2.840.113549.1.5.12","pkcs5PBKDF2"),i("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4"),i("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4"),i("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC"),i("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC"),i("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC"),i("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC"),i("1.2.840.113549.2.7","hmacWithSHA1"),i("1.2.840.113549.2.8","hmacWithSHA224"),i("1.2.840.113549.2.9","hmacWithSHA256"),i("1.2.840.113549.2.10","hmacWithSHA384"),i("1.2.840.113549.2.11","hmacWithSHA512"),i("1.2.840.113549.3.7","des-EDE3-CBC"),i("2.16.840.1.101.3.4.1.2","aes128-CBC"),i("2.16.840.1.101.3.4.1.22","aes192-CBC"),i("2.16.840.1.101.3.4.1.42","aes256-CBC"),i("2.5.4.3","commonName"),i("2.5.4.4","surname"),i("2.5.4.5","serialNumber"),i("2.5.4.6","countryName"),i("2.5.4.7","localityName"),i("2.5.4.8","stateOrProvinceName"),i("2.5.4.9","streetAddress"),i("2.5.4.10","organizationName"),i("2.5.4.11","organizationalUnitName"),i("2.5.4.12","title"),i("2.5.4.13","description"),i("2.5.4.15","businessCategory"),i("2.5.4.17","postalCode"),i("2.5.4.42","givenName"),i("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName"),i("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName"),i("2.16.840.1.113730.1.1","nsCertType"),i("2.16.840.1.113730.1.13","nsComment"),a("2.5.29.1","authorityKeyIdentifier"),a("2.5.29.2","keyAttributes"),a("2.5.29.3","certificatePolicies"),a("2.5.29.4","keyUsageRestriction"),a("2.5.29.5","policyMapping"),a("2.5.29.6","subtreesConstraint"),a("2.5.29.7","subjectAltName"),a("2.5.29.8","issuerAltName"),a("2.5.29.9","subjectDirectoryAttributes"),a("2.5.29.10","basicConstraints"),a("2.5.29.11","nameConstraints"),a("2.5.29.12","policyConstraints"),a("2.5.29.13","basicConstraints"),i("2.5.29.14","subjectKeyIdentifier"),i("2.5.29.15","keyUsage"),a("2.5.29.16","privateKeyUsagePeriod"),i("2.5.29.17","subjectAltName"),i("2.5.29.18","issuerAltName"),i("2.5.29.19","basicConstraints"),a("2.5.29.20","cRLNumber"),a("2.5.29.21","cRLReason"),a("2.5.29.22","expirationDate"),a("2.5.29.23","instructionCode"),a("2.5.29.24","invalidityDate"),a("2.5.29.25","cRLDistributionPoints"),a("2.5.29.26","issuingDistributionPoint"),a("2.5.29.27","deltaCRLIndicator"),a("2.5.29.28","issuingDistributionPoint"),a("2.5.29.29","certificateIssuer"),a("2.5.29.30","nameConstraints"),i("2.5.29.31","cRLDistributionPoints"),i("2.5.29.32","certificatePolicies"),a("2.5.29.33","policyMappings"),a("2.5.29.34","policyConstraints"),i("2.5.29.35","authorityKeyIdentifier"),a("2.5.29.36","policyConstraints"),i("2.5.29.37","extKeyUsage"),a("2.5.29.46","freshestCRL"),a("2.5.29.54","inhibitAnyPolicy"),i("1.3.6.1.4.1.11129.2.4.2","timestampList"),i("1.3.6.1.5.5.7.1.1","authorityInfoAccess"),i("1.3.6.1.5.5.7.3.1","serverAuth"),i("1.3.6.1.5.5.7.3.2","clientAuth"),i("1.3.6.1.5.5.7.3.3","codeSigning"),i("1.3.6.1.5.5.7.3.4","emailProtection"),i("1.3.6.1.5.5.7.3.8","timeStamping")},function(t,e,r){var n=r(0);r(1);var o=t.exports=n.pem=n.pem||{};function i(t){for(var e=t.name+": ",r=[],n=function(t,e){return" "+e},o=0;o<t.values.length;++o)r.push(t.values[o].replace(/^(\S+\r\n)/,n));e+=r.join(",")+"\r\n";var i=0,a=-1;for(o=0;o<e.length;++o,++i)if(i>65&&-1!==a){var s=e[a];","===s?(++a,e=e.substr(0,a)+"\r\n "+e.substr(a)):e=e.substr(0,a)+"\r\n"+s+e.substr(a+1),i=o-a-1,a=-1,++o}else" "!==e[o]&&"\t"!==e[o]&&","!==e[o]||(a=o);return e}function a(t){return t.replace(/^\s+/,"")}o.encode=function(t,e){e=e||{};var r,o="-----BEGIN "+t.type+"-----\r\n";if(t.procType&&(o+=i(r={name:"Proc-Type",values:[String(t.procType.version),t.procType.type]})),t.contentDomain&&(o+=i(r={name:"Content-Domain",values:[t.contentDomain]})),t.dekInfo&&(r={name:"DEK-Info",values:[t.dekInfo.algorithm]},t.dekInfo.parameters&&r.values.push(t.dekInfo.parameters),o+=i(r)),t.headers)for(var a=0;a<t.headers.length;++a)o+=i(t.headers[a]);return t.procType&&(o+="\r\n"),(o+=n.util.encode64(t.body,e.maxline||64)+"\r\n")+"-----END "+t.type+"-----\r\n"},o.decode=function(t){for(var e,r=[],o=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,i=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,s=/\r?\n/;e=o.exec(t);){var u=e[1];"NEW CERTIFICATE REQUEST"===u&&(u="CERTIFICATE REQUEST");var l={type:u,procType:null,contentDomain:null,dekInfo:null,headers:[],body:n.util.decode64(e[3])};if(r.push(l),e[2]){for(var c=e[2].split(s),f=0;e&&f<c.length;){for(var p=c[f].replace(/\s+$/,""),h=f+1;h<c.length;++h){var y=c[h];if(!/\s/.test(y[0]))break;p+=y,f=h}if(e=p.match(i)){for(var d={name:e[1],values:[]},b=e[2].split(","),v=0;v<b.length;++v)d.values.push(a(b[v]));if(l.procType)if(l.contentDomain||"Content-Domain"!==d.name)if(l.dekInfo||"DEK-Info"!==d.name)l.headers.push(d);else{if(0===d.values.length)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');l.dekInfo={algorithm:b[0],parameters:b[1]||null}}else l.contentDomain=b[0]||"";else{if("Proc-Type"!==d.name)throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(2!==d.values.length)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');l.procType={version:b[0],type:b[1]}}}++f}if("ENCRYPTED"===l.procType&&!l.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(0===r.length)throw new Error("Invalid PEM formatted message.");return r}},function(t,e,r){var n=r(0);r(4),r(1),(t.exports=n.hmac=n.hmac||{}).create=function(){var t=null,e=null,r=null,o=null,i={start:function(i,a){if(null!==i)if("string"==typeof i){if(!((i=i.toLowerCase())in n.md.algorithms))throw new Error('Unknown hash algorithm "'+i+'"');e=n.md.algorithms[i].create()}else e=i;if(null===a)a=t;else{if("string"==typeof a)a=n.util.createBuffer(a);else if(n.util.isArray(a)){var s=a;a=n.util.createBuffer();for(var u=0;u<s.length;++u)a.putByte(s[u])}var l=a.length();for(l>e.blockLength&&(e.start(),e.update(a.bytes()),a=e.digest()),r=n.util.createBuffer(),o=n.util.createBuffer(),l=a.length(),u=0;u<l;++u)s=a.at(u),r.putByte(54^s),o.putByte(92^s);if(l<e.blockLength)for(s=e.blockLength-l,u=0;u<s;++u)r.putByte(54),o.putByte(92);t=a,r=r.bytes(),o=o.bytes()}e.start(),e.update(r)},update:function(t){e.update(t)},getMac:function(){var t=e.digest().bytes();return e.start(),e.update(o),e.update(t),e.digest()}};return i.digest=i.getMac,i}},function(t,e,r){var n=r(0);r(4),r(1);var o=t.exports=n.sha1=n.sha1||{};n.md.sha1=n.md.algorithms.sha1=o,o.create=function(){a||(i=String.fromCharCode(128),i+=n.util.fillString(String.fromCharCode(0),64),a=!0);var t=null,e=n.util.createBuffer(),r=new Array(80),o={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){o.messageLength=0,o.fullMessageLength=o.messageLength64=[];for(var r=o.messageLengthSize/4,i=0;i<r;++i)o.fullMessageLength.push(0);return e=n.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},o}};return o.start(),o.update=function(i,a){"utf8"===a&&(i=n.util.encodeUtf8(i));var u=i.length;o.messageLength+=u,u=[u/4294967296>>>0,u>>>0];for(var l=o.fullMessageLength.length-1;l>=0;--l)o.fullMessageLength[l]+=u[1],u[1]=u[0]+(o.fullMessageLength[l]/4294967296>>>0),o.fullMessageLength[l]=o.fullMessageLength[l]>>>0,u[0]=u[1]/4294967296>>>0;return e.putBytes(i),s(t,r,e),(e.read>2048||0===e.length())&&e.compact(),o},o.digest=function(){var a=n.util.createBuffer();a.putBytes(e.bytes());var u,l=o.fullMessageLength[o.fullMessageLength.length-1]+o.messageLengthSize&o.blockLength-1;a.putBytes(i.substr(0,o.blockLength-l));for(var c=8*o.fullMessageLength[0],f=0;f<o.fullMessageLength.length-1;++f)c+=(u=8*o.fullMessageLength[f+1])/4294967296>>>0,a.putInt32(c>>>0),c=u>>>0;a.putInt32(c);var p={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4};s(p,r,a);var h=n.util.createBuffer();return h.putInt32(p.h0),h.putInt32(p.h1),h.putInt32(p.h2),h.putInt32(p.h3),h.putInt32(p.h4),h},o};var i=null,a=!1;function s(t,e,r){for(var n,o,i,a,s,u,l,c=r.length();c>=64;){for(o=t.h0,i=t.h1,a=t.h2,s=t.h3,u=t.h4,l=0;l<16;++l)n=r.getInt32(),e[l]=n,n=(o<<5|o>>>27)+(s^i&(a^s))+u+1518500249+n,u=s,s=a,a=(i<<30|i>>>2)>>>0,i=o,o=n;for(;l<20;++l)n=(n=e[l-3]^e[l-8]^e[l-14]^e[l-16])<<1|n>>>31,e[l]=n,n=(o<<5|o>>>27)+(s^i&(a^s))+u+1518500249+n,u=s,s=a,a=(i<<30|i>>>2)>>>0,i=o,o=n;for(;l<32;++l)n=(n=e[l-3]^e[l-8]^e[l-14]^e[l-16])<<1|n>>>31,e[l]=n,n=(o<<5|o>>>27)+(i^a^s)+u+1859775393+n,u=s,s=a,a=(i<<30|i>>>2)>>>0,i=o,o=n;for(;l<40;++l)n=(n=e[l-6]^e[l-16]^e[l-28]^e[l-32])<<2|n>>>30,e[l]=n,n=(o<<5|o>>>27)+(i^a^s)+u+1859775393+n,u=s,s=a,a=(i<<30|i>>>2)>>>0,i=o,o=n;for(;l<60;++l)n=(n=e[l-6]^e[l-16]^e[l-28]^e[l-32])<<2|n>>>30,e[l]=n,n=(o<<5|o>>>27)+(i&a|s&(i^a))+u+2400959708+n,u=s,s=a,a=(i<<30|i>>>2)>>>0,i=o,o=n;for(;l<80;++l)n=(n=e[l-6]^e[l-16]^e[l-28]^e[l-32])<<2|n>>>30,e[l]=n,n=(o<<5|o>>>27)+(i^a^s)+u+3395469782+n,u=s,s=a,a=(i<<30|i>>>2)>>>0,i=o,o=n;t.h0=t.h0+o|0,t.h1=t.h1+i|0,t.h2=t.h2+a|0,t.h3=t.h3+s|0,t.h4=t.h4+u|0,c-=64}}},function(t,e,r){var n=r(0);function o(t,e){n.cipher.registerAlgorithm(t,function(){return new n.des.Algorithm(t,e)})}r(13),r(19),r(1),t.exports=n.des=n.des||{},n.des.startEncrypting=function(t,e,r,n){var o=y({key:t,output:r,decrypt:!1,mode:n||(null===e?"ECB":"CBC")});return o.start(e),o},n.des.createEncryptionCipher=function(t,e){return y({key:t,output:null,decrypt:!1,mode:e})},n.des.startDecrypting=function(t,e,r,n){var o=y({key:t,output:r,decrypt:!0,mode:n||(null===e?"ECB":"CBC")});return o.start(e),o},n.des.createDecryptionCipher=function(t,e){return y({key:t,output:null,decrypt:!0,mode:e})},n.des.Algorithm=function(t,e){var r=this;r.name=t,r.mode=new e({blockSize:8,cipher:{encrypt:function(t,e){return h(r._keys,t,e,!1)},decrypt:function(t,e){return h(r._keys,t,e,!0)}}}),r._init=!1},n.des.Algorithm.prototype.initialize=function(t){if(!this._init){var e=n.util.createBuffer(t.key);if(0===this.name.indexOf("3DES")&&24!==e.length())throw new Error("Invalid Triple-DES key size: "+8*e.length());this._keys=function(t){for(var e,r=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],n=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],o=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],a=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],s=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],u=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],l=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],c=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],f=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],p=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],h=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],y=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],d=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],b=t.length()>8?3:1,v=[],m=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],g=0,S=0;S<b;S++){var w=t.getInt32(),O=t.getInt32();w^=(e=252645135&(w>>>4^O))<<4,w^=e=65535&((O^=e)>>>-16^w),w^=(e=858993459&(w>>>2^(O^=e<<-16)))<<2,w^=e=65535&((O^=e)>>>-16^w),w^=(e=1431655765&(w>>>1^(O^=e<<-16)))<<1,w^=e=16711935&((O^=e)>>>8^w),e=(w^=(e=1431655765&(w>>>1^(O^=e<<8)))<<1)<<8|(O^=e)>>>20&240,w=O<<24|O<<8&16711680|O>>>8&65280|O>>>24&240,O=e;for(var _=0;_<m.length;++_){m[_]?(w=w<<2|w>>>26,O=O<<2|O>>>26):(w=w<<1|w>>>27,O=O<<1|O>>>27);var P=r[(w&=-15)>>>28]|n[w>>>24&15]|o[w>>>20&15]|i[w>>>16&15]|a[w>>>12&15]|s[w>>>8&15]|u[w>>>4&15],E=l[(O&=-15)>>>28]|c[O>>>24&15]|f[O>>>20&15]|p[O>>>16&15]|h[O>>>12&15]|y[O>>>8&15]|d[O>>>4&15];e=65535&(E>>>16^P),v[g++]=P^e,v[g++]=E^e<<16}}return v}(e),this._init=!0}},o("DES-ECB",n.cipher.modes.ecb),o("DES-CBC",n.cipher.modes.cbc),o("DES-CFB",n.cipher.modes.cfb),o("DES-OFB",n.cipher.modes.ofb),o("DES-CTR",n.cipher.modes.ctr),o("3DES-ECB",n.cipher.modes.ecb),o("3DES-CBC",n.cipher.modes.cbc),o("3DES-CFB",n.cipher.modes.cfb),o("3DES-OFB",n.cipher.modes.ofb),o("3DES-CTR",n.cipher.modes.ctr);var i=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],a=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],s=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],u=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],l=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],c=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],f=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],p=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function h(t,e,r,n){var o,h,y=32===t.length?3:9;o=3===y?n?[30,-2,-2]:[0,32,2]:n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var d=e[0],b=e[1];d^=(h=252645135&(d>>>4^b))<<4,d^=(h=65535&(d>>>16^(b^=h)))<<16,d^=h=858993459&((b^=h)>>>2^d),d^=h=16711935&((b^=h<<2)>>>8^d),d=(d^=(h=1431655765&(d>>>1^(b^=h<<8)))<<1)<<1|d>>>31,b=(b^=h)<<1|b>>>31;for(var v=0;v<y;v+=3){for(var m=o[v+1],g=o[v+2],S=o[v];S!=m;S+=g){var w=b^t[S],O=(b>>>4|b<<28)^t[S+1];h=d,d=b,b=h^(a[w>>>24&63]|u[w>>>16&63]|c[w>>>8&63]|p[63&w]|i[O>>>24&63]|s[O>>>16&63]|l[O>>>8&63]|f[63&O])}h=d,d=b,b=h}b=b>>>1|b<<31,b^=h=1431655765&((d=d>>>1|d<<31)>>>1^b),b^=(h=16711935&(b>>>8^(d^=h<<1)))<<8,b^=(h=858993459&(b>>>2^(d^=h)))<<2,b^=h=65535&((d^=h)>>>16^b),b^=h=252645135&((d^=h<<16)>>>4^b),d^=h<<4,r[0]=d,r[1]=b}function y(t){var e,r="DES-"+((t=t||{}).mode||"CBC").toUpperCase(),o=(e=t.decrypt?n.cipher.createDecipher(r,t.key):n.cipher.createCipher(r,t.key)).start;return e.start=function(t,r){var i=null;r instanceof n.util.ByteBuffer&&(i=r,r={}),(r=r||{}).output=i,r.iv=t,o.call(e,r)},e}},function(t,e,r){var n=r(0);if(r(3),r(12),r(6),r(26),r(27),r(2),r(1),void 0===o)var o=n.jsbn.BigInteger;var i=n.util.isNodejs?r(16):null,a=n.asn1,u=n.util;n.pki=n.pki||{},t.exports=n.pki.rsa=n.rsa=n.rsa||{};var l=n.pki,c=[6,4,2,4,2,4,6,2],f={name:"PrivateKeyInfo",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:a.Class.UNIVERSAL,type:a.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},p={name:"RSAPrivateKey",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},h={name:"RSAPublicKey",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},y=n.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:a.Class.UNIVERSAL,type:a.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},d={name:"DigestInfo",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:a.Class.UNIVERSAL,type:a.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:a.Class.UNIVERSAL,type:a.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},b=function(t){var e;if(!(t.algorithm in l.oids)){var r=new Error("Unknown message digest algorithm.");throw r.algorithm=t.algorithm,r}e=l.oids[t.algorithm];var n=a.oidToDer(e).getBytes(),o=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[]),i=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[]);i.value.push(a.create(a.Class.UNIVERSAL,a.Type.OID,!1,n)),i.value.push(a.create(a.Class.UNIVERSAL,a.Type.NULL,!1,""));var s=a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,t.digest().getBytes());return o.value.push(i),o.value.push(s),a.toDer(o).getBytes()},v=function(t,e,r){if(r)return t.modPow(e.e,e.n);if(!e.p||!e.q)return t.modPow(e.d,e.n);var i;e.dP||(e.dP=e.d.mod(e.p.subtract(o.ONE))),e.dQ||(e.dQ=e.d.mod(e.q.subtract(o.ONE))),e.qInv||(e.qInv=e.q.modInverse(e.p));do{i=new o(n.util.bytesToHex(n.random.getBytes(e.n.bitLength()/8)),16)}while(i.compareTo(e.n)>=0||!i.gcd(e.n).equals(o.ONE));for(var a=(t=t.multiply(i.modPow(e.e,e.n)).mod(e.n)).mod(e.p).modPow(e.dP,e.p),s=t.mod(e.q).modPow(e.dQ,e.q);a.compareTo(s)<0;)a=a.add(e.p);var u=a.subtract(s).multiply(e.qInv).mod(e.p).multiply(e.q).add(s);return u.multiply(i.modInverse(e.n)).mod(e.n)};function m(t,e,r){var o=n.util.createBuffer(),i=Math.ceil(e.n.bitLength()/8);if(t.length>i-11){var a=new Error("Message is too long for PKCS#1 v1.5 padding.");throw a.length=t.length,a.max=i-11,a}o.putByte(0),o.putByte(r);var s,u=i-3-t.length;if(0===r||1===r){s=0===r?0:255;for(var l=0;l<u;++l)o.putByte(s)}else for(;u>0;){var c=0,f=n.random.getBytes(u);for(l=0;l<u;++l)0===(s=f.charCodeAt(l))?++c:o.putByte(s);u=c}return o.putByte(0),o.putBytes(t),o}function g(t,e,r,o){var i=Math.ceil(e.n.bitLength()/8),a=n.util.createBuffer(t),s=a.getByte(),u=a.getByte();if(0!==s||r&&0!==u&&1!==u||!r&&2!=u||r&&0===u&&void 0===o)throw new Error("Encryption block is invalid.");var l=0;if(0===u){l=i-3-o;for(var c=0;c<l;++c)if(0!==a.getByte())throw new Error("Encryption block is invalid.")}else if(1===u)for(l=0;a.length()>1;){if(255!==a.getByte()){--a.read;break}++l}else if(2===u)for(l=0;a.length()>1;){if(0===a.getByte()){--a.read;break}++l}if(0!==a.getByte()||l!==i-3-a.length())throw new Error("Encryption block is invalid.");return a.getBytes()}function S(t,e,r){"function"==typeof e&&(r=e,e={});var i={algorithm:{name:(e=e||{}).algorithm||"PRIMEINC",options:{workers:e.workers||2,workLoad:e.workLoad||100,workerScript:e.workerScript}}};function a(){s(t.pBits,function(e,n){return e?r(e):(t.p=n,null!==t.q?u(e,t.q):void s(t.qBits,u))})}function s(t,e){n.prime.generateProbablePrime(t,i,e)}function u(e,n){if(e)return r(e);if(t.q=n,t.p.compareTo(t.q)<0){var i=t.p;t.p=t.q,t.q=i}if(0!==t.p.subtract(o.ONE).gcd(t.e).compareTo(o.ONE))return t.p=null,void a();if(0!==t.q.subtract(o.ONE).gcd(t.e).compareTo(o.ONE))return t.q=null,void s(t.qBits,u);if(t.p1=t.p.subtract(o.ONE),t.q1=t.q.subtract(o.ONE),t.phi=t.p1.multiply(t.q1),0!==t.phi.gcd(t.e).compareTo(o.ONE))return t.p=t.q=null,void a();if(t.n=t.p.multiply(t.q),t.n.bitLength()!==t.bits)return t.q=null,void s(t.qBits,u);var c=t.e.modInverse(t.phi);t.keys={privateKey:l.rsa.setPrivateKey(t.n,t.e,c,t.p,t.q,c.mod(t.p1),c.mod(t.q1),t.q.modInverse(t.p)),publicKey:l.rsa.setPublicKey(t.n,t.e)},r(null,t.keys)}"prng"in e&&(i.prng=e.prng),a()}function w(t){var e=t.toString(16);e[0]>="8"&&(e="00"+e);var r=n.util.hexToBytes(e);return r.length>1&&(0===r.charCodeAt(0)&&0==(128&r.charCodeAt(1))||255===r.charCodeAt(0)&&128==(128&r.charCodeAt(1)))?r.substr(1):r}function O(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}function _(t){return n.util.isNodejs&&"function"==typeof i[t]}function P(t){return void 0!==u.globalScope&&"object"==s(u.globalScope.crypto)&&"object"==s(u.globalScope.crypto.subtle)&&"function"==typeof u.globalScope.crypto.subtle[t]}function E(t){return void 0!==u.globalScope&&"object"==s(u.globalScope.msCrypto)&&"object"==s(u.globalScope.msCrypto.subtle)&&"function"==typeof u.globalScope.msCrypto.subtle[t]}function C(t){for(var e=n.util.hexToBytes(t.toString(16)),r=new Uint8Array(e.length),o=0;o<e.length;++o)r[o]=e.charCodeAt(o);return r}l.rsa.encrypt=function(t,e,r){var i,a=r,s=Math.ceil(e.n.bitLength()/8);!1!==r&&!0!==r?(a=2===r,i=m(t,e,r)):(i=n.util.createBuffer()).putBytes(t);for(var u=new o(i.toHex(),16),l=v(u,e,a).toString(16),c=n.util.createBuffer(),f=s-Math.ceil(l.length/2);f>0;)c.putByte(0),--f;return c.putBytes(n.util.hexToBytes(l)),c.getBytes()},l.rsa.decrypt=function(t,e,r,i){var a=Math.ceil(e.n.bitLength()/8);if(t.length!==a){var s=new Error("Encrypted message length is invalid.");throw s.length=t.length,s.expected=a,s}var u=new o(n.util.createBuffer(t).toHex(),16);if(u.compareTo(e.n)>=0)throw new Error("Encrypted message is invalid.");for(var l=v(u,e,r).toString(16),c=n.util.createBuffer(),f=a-Math.ceil(l.length/2);f>0;)c.putByte(0),--f;return c.putBytes(n.util.hexToBytes(l)),!1!==i?g(c.getBytes(),e,r):c.getBytes()},l.rsa.createKeyPairGenerationState=function(t,e,r){"string"==typeof t&&(t=parseInt(t,10)),t=t||2048;var i,a=(r=r||{}).prng||n.random,s={nextBytes:function(t){for(var e=a.getBytesSync(t.length),r=0;r<t.length;++r)t[r]=e.charCodeAt(r)}},u=r.algorithm||"PRIMEINC";if("PRIMEINC"!==u)throw new Error("Invalid key generation algorithm: "+u);return(i={algorithm:u,state:0,bits:t,rng:s,eInt:e||65537,e:new o(null),p:null,q:null,qBits:t>>1,pBits:t-(t>>1),pqState:0,num:null,keys:null}).e.fromInt(i.eInt),i},l.rsa.stepKeyPairGenerationState=function(t,e){"algorithm"in t||(t.algorithm="PRIMEINC");var r=new o(null);r.fromInt(30);for(var n,i=0,a=function(t,e){return t|e},s=+new Date,u=0;null===t.keys&&(e<=0||u<e);){if(0===t.state){var f=null===t.p?t.pBits:t.qBits,p=f-1;0===t.pqState?(t.num=new o(f,t.rng),t.num.testBit(p)||t.num.bitwiseTo(o.ONE.shiftLeft(p),a,t.num),t.num.dAddOffset(31-t.num.mod(r).byteValue(),0),i=0,++t.pqState):1===t.pqState?t.num.bitLength()>f?t.pqState=0:t.num.isProbablePrime(O(t.num.bitLength()))?++t.pqState:t.num.dAddOffset(c[i++%8],0):2===t.pqState?t.pqState=0===t.num.subtract(o.ONE).gcd(t.e).compareTo(o.ONE)?3:0:3===t.pqState&&(t.pqState=0,null===t.p?t.p=t.num:t.q=t.num,null!==t.p&&null!==t.q&&++t.state,t.num=null)}else if(1===t.state)t.p.compareTo(t.q)<0&&(t.num=t.p,t.p=t.q,t.q=t.num),++t.state;else if(2===t.state)t.p1=t.p.subtract(o.ONE),t.q1=t.q.subtract(o.ONE),t.phi=t.p1.multiply(t.q1),++t.state;else if(3===t.state)0===t.phi.gcd(t.e).compareTo(o.ONE)?++t.state:(t.p=null,t.q=null,t.state=0);else if(4===t.state)t.n=t.p.multiply(t.q),t.n.bitLength()===t.bits?++t.state:(t.q=null,t.state=0);else if(5===t.state){var h=t.e.modInverse(t.phi);t.keys={privateKey:l.rsa.setPrivateKey(t.n,t.e,h,t.p,t.q,h.mod(t.p1),h.mod(t.q1),t.q.modInverse(t.p)),publicKey:l.rsa.setPublicKey(t.n,t.e)}}u+=(n=+new Date)-s,s=n}return null!==t.keys},l.rsa.generateKeyPair=function(t,e,r,o){if(1===arguments.length?"object"==s(t)?(r=t,t=void 0):"function"==typeof t&&(o=t,t=void 0):2===arguments.length?"number"==typeof t?"function"==typeof e?(o=e,e=void 0):"number"!=typeof e&&(r=e,e=void 0):(r=t,o=e,t=void 0,e=void 0):3===arguments.length&&("number"==typeof e?"function"==typeof r&&(o=r,r=void 0):(o=r,r=e,e=void 0)),r=r||{},void 0===t&&(t=r.bits||2048),void 0===e&&(e=r.e||65537),!n.options.usePureJavaScript&&!r.prng&&t>=256&&t<=16384&&(65537===e||3===e))if(o){if(_("generateKeyPair"))return i.generateKeyPair("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(t,e,r){if(t)return o(t);o(null,{privateKey:l.privateKeyFromPem(r),publicKey:l.publicKeyFromPem(e)})});if(P("generateKey")&&P("exportKey"))return u.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:C(e),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(t){return u.globalScope.crypto.subtle.exportKey("pkcs8",t.privateKey)}).then(void 0,function(t){o(t)}).then(function(t){if(t){var e=l.privateKeyFromAsn1(a.fromDer(n.util.createBuffer(t)));o(null,{privateKey:e,publicKey:l.setRsaPublicKey(e.n,e.e)})}});if(E("generateKey")&&E("exportKey")){var c=u.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:C(e),hash:{name:"SHA-256"}},!0,["sign","verify"]);return c.oncomplete=function(t){var e=t.target.result,r=u.globalScope.msCrypto.subtle.exportKey("pkcs8",e.privateKey);r.oncomplete=function(t){var e=t.target.result,r=l.privateKeyFromAsn1(a.fromDer(n.util.createBuffer(e)));o(null,{privateKey:r,publicKey:l.setRsaPublicKey(r.n,r.e)})},r.onerror=function(t){o(t)}},void(c.onerror=function(t){o(t)})}}else if(_("generateKeyPairSync")){var f=i.generateKeyPairSync("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:l.privateKeyFromPem(f.privateKey),publicKey:l.publicKeyFromPem(f.publicKey)}}var p=l.rsa.createKeyPairGenerationState(t,e,r);if(!o)return l.rsa.stepKeyPairGenerationState(p,0),p.keys;S(p,r,o)},l.setRsaPublicKey=l.rsa.setPublicKey=function(t,e){var r={n:t,e:e,encrypt:function(t,e,o){if("string"==typeof e?e=e.toUpperCase():void 0===e&&(e="RSAES-PKCS1-V1_5"),"RSAES-PKCS1-V1_5"===e)e={encode:function(t,e,r){return m(t,e,2).getBytes()}};else if("RSA-OAEP"===e||"RSAES-OAEP"===e)e={encode:function(t,e){return n.pkcs1.encode_rsa_oaep(e,t,o)}};else if(-1!==["RAW","NONE","NULL",null].indexOf(e))e={encode:function(t){return t}};else if("string"==typeof e)throw new Error('Unsupported encryption scheme: "'+e+'".');var i=e.encode(t,r,!0);return l.rsa.encrypt(i,r,!0)},verify:function(t,e,o,i){"string"==typeof o?o=o.toUpperCase():void 0===o&&(o="RSASSA-PKCS1-V1_5"),void 0===i&&(i={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in i||(i._parseAllDigestBytes=!0),"RSASSA-PKCS1-V1_5"===o?o={verify:function(t,e){e=g(e,r,!0);var o=a.fromDer(e,{parseAllBytes:i._parseAllDigestBytes}),s={},u=[];if(!a.validate(o,d,s,u))throw(l=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.")).errors=u,l;var l,c=a.derToOid(s.algorithmIdentifier);if(c!==n.oids.md2&&c!==n.oids.md5&&c!==n.oids.sha1&&c!==n.oids.sha224&&c!==n.oids.sha256&&c!==n.oids.sha384&&c!==n.oids.sha512&&c!==n.oids["sha512-224"]&&c!==n.oids["sha512-256"])throw(l=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.")).oid=c,l;if(!(c!==n.oids.md2&&c!==n.oids.md5||"parameters"in s))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return t===s.digest}}:"NONE"!==o&&"NULL"!==o&&null!==o||(o={verify:function(t,e){return t===g(e,r,!0)}});var s=l.rsa.decrypt(e,r,!0,!1);return o.verify(t,s,r.n.bitLength())}};return r},l.setRsaPrivateKey=l.rsa.setPrivateKey=function(t,e,r,o,i,a,s,u){var c={n:t,e:e,d:r,p:o,q:i,dP:a,dQ:s,qInv:u,decrypt:function(t,e,r){"string"==typeof e?e=e.toUpperCase():void 0===e&&(e="RSAES-PKCS1-V1_5");var o=l.rsa.decrypt(t,c,!1,!1);if("RSAES-PKCS1-V1_5"===e)e={decode:g};else if("RSA-OAEP"===e||"RSAES-OAEP"===e)e={decode:function(t,e){return n.pkcs1.decode_rsa_oaep(e,t,r)}};else{if(-1===["RAW","NONE","NULL",null].indexOf(e))throw new Error('Unsupported encryption scheme: "'+e+'".');e={decode:function(t){return t}}}return e.decode(o,c,!1)},sign:function(t,e){var r=!1;"string"==typeof e&&(e=e.toUpperCase()),void 0===e||"RSASSA-PKCS1-V1_5"===e?(e={encode:b},r=1):"NONE"!==e&&"NULL"!==e&&null!==e||(e={encode:function(){return t}},r=1);var n=e.encode(t,c.n.bitLength());return l.rsa.encrypt(n,c,r)}};return c},l.wrapRsaPrivateKey=function(t){return a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,a.integerToDer(0).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(l.oids.rsaEncryption).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.NULL,!1,"")]),a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,a.toDer(t).getBytes())])},l.privateKeyFromAsn1=function(t){var e,r,i,s,u,c,h,y,d={},b=[];if(a.validate(t,f,d,b)&&(t=a.fromDer(n.util.createBuffer(d.privateKey))),d={},b=[],!a.validate(t,p,d,b)){var v=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw v.errors=b,v}return e=n.util.createBuffer(d.privateKeyModulus).toHex(),r=n.util.createBuffer(d.privateKeyPublicExponent).toHex(),i=n.util.createBuffer(d.privateKeyPrivateExponent).toHex(),s=n.util.createBuffer(d.privateKeyPrime1).toHex(),u=n.util.createBuffer(d.privateKeyPrime2).toHex(),c=n.util.createBuffer(d.privateKeyExponent1).toHex(),h=n.util.createBuffer(d.privateKeyExponent2).toHex(),y=n.util.createBuffer(d.privateKeyCoefficient).toHex(),l.setRsaPrivateKey(new o(e,16),new o(r,16),new o(i,16),new o(s,16),new o(u,16),new o(c,16),new o(h,16),new o(y,16))},l.privateKeyToAsn1=l.privateKeyToRSAPrivateKey=function(t){return a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,a.integerToDer(0).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,w(t.n)),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,w(t.e)),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,w(t.d)),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,w(t.p)),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,w(t.q)),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,w(t.dP)),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,w(t.dQ)),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,w(t.qInv))])},l.publicKeyFromAsn1=function(t){var e={},r=[];if(a.validate(t,y,e,r)){var i,s=a.derToOid(e.publicKeyOid);if(s!==l.oids.rsaEncryption)throw(i=new Error("Cannot read public key. Unknown OID.")).oid=s,i;t=e.rsaPublicKey}if(r=[],!a.validate(t,h,e,r))throw(i=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.")).errors=r,i;var u=n.util.createBuffer(e.publicKeyModulus).toHex(),c=n.util.createBuffer(e.publicKeyExponent).toHex();return l.setRsaPublicKey(new o(u,16),new o(c,16))},l.publicKeyToAsn1=l.publicKeyToSubjectPublicKeyInfo=function(t){return a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(l.oids.rsaEncryption).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.NULL,!1,"")]),a.create(a.Class.UNIVERSAL,a.Type.BITSTRING,!1,[l.publicKeyToRSAPublicKey(t)])])},l.publicKeyToRSAPublicKey=function(t){return a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,w(t.n)),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,w(t.e))])}},function(t,e,r){var n,o=r(0);function i(t,e,r){this.data=[],null!=t&&("number"==typeof t?this.fromNumber(t,e,r):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function a(){return new i(null)}function s(t,e,r,n,o,i){for(var a=16383&e,s=e>>14;--i>=0;){var u=16383&this.data[t],l=this.data[t++]>>14,c=s*u+l*a;o=((u=a*u+((16383&c)<<14)+r.data[n]+o)>>28)+(c>>14)+s*l,r.data[n++]=268435455&u}return o}t.exports=o.jsbn=o.jsbn||{},o.jsbn.BigInteger=i,"undefined"==typeof navigator?(i.prototype.am=s,n=28):"Microsoft Internet Explorer"==navigator.appName?(i.prototype.am=function(t,e,r,n,o,i){for(var a=32767&e,s=e>>15;--i>=0;){var u=32767&this.data[t],l=this.data[t++]>>15,c=s*u+l*a;o=((u=a*u+((32767&c)<<15)+r.data[n]+(1073741823&o))>>>30)+(c>>>15)+s*l+(o>>>30),r.data[n++]=1073741823&u}return o},n=30):"Netscape"!=navigator.appName?(i.prototype.am=function(t,e,r,n,o,i){for(;--i>=0;){var a=e*this.data[t++]+r.data[n]+o;o=Math.floor(a/67108864),r.data[n++]=67108863&a}return o},n=26):(i.prototype.am=s,n=28),i.prototype.DB=n,i.prototype.DM=(1<<n)-1,i.prototype.DV=1<<n,i.prototype.FV=Math.pow(2,52),i.prototype.F1=52-n,i.prototype.F2=2*n-52;var u,l,c=new Array;for(u="0".charCodeAt(0),l=0;l<=9;++l)c[u++]=l;for(u="a".charCodeAt(0),l=10;l<36;++l)c[u++]=l;for(u="A".charCodeAt(0),l=10;l<36;++l)c[u++]=l;function f(t){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(t)}function p(t,e){var r=c[t.charCodeAt(e)];return null==r?-1:r}function h(t){var e=a();return e.fromInt(t),e}function y(t){var e,r=1;return 0!=(e=t>>>16)&&(t=e,r+=16),0!=(e=t>>8)&&(t=e,r+=8),0!=(e=t>>4)&&(t=e,r+=4),0!=(e=t>>2)&&(t=e,r+=2),0!=(e=t>>1)&&(t=e,r+=1),r}function d(t){this.m=t}function b(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function v(t,e){return t&e}function m(t,e){return t|e}function g(t,e){return t^e}function S(t,e){return t&~e}function w(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function O(t){for(var e=0;0!=t;)t&=t-1,++e;return e}function _(){}function P(t){return t}function E(t){this.r2=a(),this.q3=a(),i.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}d.prototype.convert=function(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t},d.prototype.revert=function(t){return t},d.prototype.reduce=function(t){t.divRemTo(this.m,null,t)},d.prototype.mulTo=function(t,e,r){t.multiplyTo(e,r),this.reduce(r)},d.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},b.prototype.convert=function(t){var e=a();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(i.ZERO)>0&&this.m.subTo(e,e),e},b.prototype.revert=function(t){var e=a();return t.copyTo(e),this.reduce(e),e},b.prototype.reduce=function(t){for(;t.t<=this.mt2;)t.data[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=32767&t.data[e],n=r*this.mpl+((r*this.mph+(t.data[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(r=e+this.m.t,t.data[r]+=this.m.am(0,n,t,e,0,this.m.t);t.data[r]>=t.DV;)t.data[r]-=t.DV,t.data[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)},b.prototype.mulTo=function(t,e,r){t.multiplyTo(e,r),this.reduce(r)},b.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},i.prototype.copyTo=function(t){for(var e=this.t-1;e>=0;--e)t.data[e]=this.data[e];t.t=this.t,t.s=this.s},i.prototype.fromInt=function(t){this.t=1,this.s=t<0?-1:0,t>0?this.data[0]=t:t<-1?this.data[0]=t+this.DV:this.t=0},i.prototype.fromString=function(t,e){var r;if(16==e)r=4;else if(8==e)r=3;else if(256==e)r=8;else if(2==e)r=1;else if(32==e)r=5;else{if(4!=e)return void this.fromRadix(t,e);r=2}this.t=0,this.s=0;for(var n=t.length,o=!1,a=0;--n>=0;){var s=8==r?255&t[n]:p(t,n);s<0?"-"==t.charAt(n)&&(o=!0):(o=!1,0==a?this.data[this.t++]=s:a+r>this.DB?(this.data[this.t-1]|=(s&(1<<this.DB-a)-1)<<a,this.data[this.t++]=s>>this.DB-a):this.data[this.t-1]|=s<<a,(a+=r)>=this.DB&&(a-=this.DB))}8==r&&0!=(128&t[0])&&(this.s=-1,a>0&&(this.data[this.t-1]|=(1<<this.DB-a)-1<<a)),this.clamp(),o&&i.ZERO.subTo(this,this)},i.prototype.clamp=function(){for(var t=this.s&this.DM;this.t>0&&this.data[this.t-1]==t;)--this.t},i.prototype.dlShiftTo=function(t,e){var r;for(r=this.t-1;r>=0;--r)e.data[r+t]=this.data[r];for(r=t-1;r>=0;--r)e.data[r]=0;e.t=this.t+t,e.s=this.s},i.prototype.drShiftTo=function(t,e){for(var r=t;r<this.t;++r)e.data[r-t]=this.data[r];e.t=Math.max(this.t-t,0),e.s=this.s},i.prototype.lShiftTo=function(t,e){var r,n=t%this.DB,o=this.DB-n,i=(1<<o)-1,a=Math.floor(t/this.DB),s=this.s<<n&this.DM;for(r=this.t-1;r>=0;--r)e.data[r+a+1]=this.data[r]>>o|s,s=(this.data[r]&i)<<n;for(r=a-1;r>=0;--r)e.data[r]=0;e.data[a]=s,e.t=this.t+a+1,e.s=this.s,e.clamp()},i.prototype.rShiftTo=function(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t)e.t=0;else{var n=t%this.DB,o=this.DB-n,i=(1<<n)-1;e.data[0]=this.data[r]>>n;for(var a=r+1;a<this.t;++a)e.data[a-r-1]|=(this.data[a]&i)<<o,e.data[a-r]=this.data[a]>>n;n>0&&(e.data[this.t-r-1]|=(this.s&i)<<o),e.t=this.t-r,e.clamp()}},i.prototype.subTo=function(t,e){for(var r=0,n=0,o=Math.min(t.t,this.t);r<o;)n+=this.data[r]-t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n-=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e.data[r++]=this.DV+n:n>0&&(e.data[r++]=n),e.t=r,e.clamp()},i.prototype.multiplyTo=function(t,e){var r=this.abs(),n=t.abs(),o=r.t;for(e.t=o+n.t;--o>=0;)e.data[o]=0;for(o=0;o<n.t;++o)e.data[o+r.t]=r.am(0,n.data[o],e,o,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&i.ZERO.subTo(e,e)},i.prototype.squareTo=function(t){for(var e=this.abs(),r=t.t=2*e.t;--r>=0;)t.data[r]=0;for(r=0;r<e.t-1;++r){var n=e.am(r,e.data[r],t,2*r,0,1);(t.data[r+e.t]+=e.am(r+1,2*e.data[r],t,2*r+1,n,e.t-r-1))>=e.DV&&(t.data[r+e.t]-=e.DV,t.data[r+e.t+1]=1)}t.t>0&&(t.data[t.t-1]+=e.am(r,e.data[r],t,2*r,0,1)),t.s=0,t.clamp()},i.prototype.divRemTo=function(t,e,r){var n=t.abs();if(!(n.t<=0)){var o=this.abs();if(o.t<n.t)return null!=e&&e.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=a());var s=a(),u=this.s,l=t.s,c=this.DB-y(n.data[n.t-1]);c>0?(n.lShiftTo(c,s),o.lShiftTo(c,r)):(n.copyTo(s),o.copyTo(r));var f=s.t,p=s.data[f-1];if(0!=p){var h=p*(1<<this.F1)+(f>1?s.data[f-2]>>this.F2:0),d=this.FV/h,b=(1<<this.F1)/h,v=1<<this.F2,m=r.t,g=m-f,S=null==e?a():e;for(s.dlShiftTo(g,S),r.compareTo(S)>=0&&(r.data[r.t++]=1,r.subTo(S,r)),i.ONE.dlShiftTo(f,S),S.subTo(s,s);s.t<f;)s.data[s.t++]=0;for(;--g>=0;){var w=r.data[--m]==p?this.DM:Math.floor(r.data[m]*d+(r.data[m-1]+v)*b);if((r.data[m]+=s.am(0,w,r,g,0,f))<w)for(s.dlShiftTo(g,S),r.subTo(S,r);r.data[m]<--w;)r.subTo(S,r)}null!=e&&(r.drShiftTo(f,e),u!=l&&i.ZERO.subTo(e,e)),r.t=f,r.clamp(),c>0&&r.rShiftTo(c,r),u<0&&i.ZERO.subTo(r,r)}}},i.prototype.invDigit=function(){if(this.t<1)return 0;var t=this.data[0];if(0==(1&t))return 0;var e=3&t;return(e=(e=(e=(e=e*(2-(15&t)*e)&15)*(2-(255&t)*e)&255)*(2-((65535&t)*e&65535))&65535)*(2-t*e%this.DV)%this.DV)>0?this.DV-e:-e},i.prototype.isEven=function(){return 0==(this.t>0?1&this.data[0]:this.s)},i.prototype.exp=function(t,e){if(t>4294967295||t<1)return i.ONE;var r=a(),n=a(),o=e.convert(this),s=y(t)-1;for(o.copyTo(r);--s>=0;)if(e.sqrTo(r,n),(t&1<<s)>0)e.mulTo(n,o,r);else{var u=r;r=n,n=u}return e.revert(r)},i.prototype.toString=function(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var r,n=(1<<e)-1,o=!1,i="",a=this.t,s=this.DB-a*this.DB%e;if(a-- >0)for(s<this.DB&&(r=this.data[a]>>s)>0&&(o=!0,i=f(r));a>=0;)s<e?(r=(this.data[a]&(1<<s)-1)<<e-s,r|=this.data[--a]>>(s+=this.DB-e)):(r=this.data[a]>>(s-=e)&n,s<=0&&(s+=this.DB,--a)),r>0&&(o=!0),o&&(i+=f(r));return o?i:"0"},i.prototype.negate=function(){var t=a();return i.ZERO.subTo(this,t),t},i.prototype.abs=function(){return this.s<0?this.negate():this},i.prototype.compareTo=function(t){var e=this.s-t.s;if(0!=e)return e;var r=this.t;if(0!=(e=r-t.t))return this.s<0?-e:e;for(;--r>=0;)if(0!=(e=this.data[r]-t.data[r]))return e;return 0},i.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+y(this.data[this.t-1]^this.s&this.DM)},i.prototype.mod=function(t){var e=a();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(i.ZERO)>0&&t.subTo(e,e),e},i.prototype.modPowInt=function(t,e){var r;return r=t<256||e.isEven()?new d(e):new b(e),this.exp(t,r)},i.ZERO=h(0),i.ONE=h(1),_.prototype.convert=P,_.prototype.revert=P,_.prototype.mulTo=function(t,e,r){t.multiplyTo(e,r)},_.prototype.sqrTo=function(t,e){t.squareTo(e)},E.prototype.convert=function(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=a();return t.copyTo(e),this.reduce(e),e},E.prototype.revert=function(t){return t},E.prototype.reduce=function(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)},E.prototype.mulTo=function(t,e,r){t.multiplyTo(e,r),this.reduce(r)},E.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)};var C=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],T=(1<<26)/C[C.length-1];i.prototype.chunkSize=function(t){return Math.floor(Math.LN2*this.DB/Math.log(t))},i.prototype.toRadix=function(t){if(null==t&&(t=10),0==this.signum()||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),n=h(r),o=a(),i=a(),s="";for(this.divRemTo(n,o,i);o.signum()>0;)s=(r+i.intValue()).toString(t).substr(1)+s,o.divRemTo(n,o,i);return i.intValue().toString(t)+s},i.prototype.fromRadix=function(t,e){this.fromInt(0),null==e&&(e=10);for(var r=this.chunkSize(e),n=Math.pow(e,r),o=!1,a=0,s=0,u=0;u<t.length;++u){var l=p(t,u);l<0?"-"==t.charAt(u)&&0==this.signum()&&(o=!0):(s=e*s+l,++a>=r&&(this.dMultiply(n),this.dAddOffset(s,0),a=0,s=0))}a>0&&(this.dMultiply(Math.pow(e,a)),this.dAddOffset(s,0)),o&&i.ZERO.subTo(this,this)},i.prototype.fromNumber=function(t,e,r){if("number"==typeof e)if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(i.ONE.shiftLeft(t-1),m,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(i.ONE.shiftLeft(t-1),this);else{var n=new Array,o=7&t;n.length=1+(t>>3),e.nextBytes(n),o>0?n[0]&=(1<<o)-1:n[0]=0,this.fromString(n,256)}},i.prototype.bitwiseTo=function(t,e,r){var n,o,i=Math.min(t.t,this.t);for(n=0;n<i;++n)r.data[n]=e(this.data[n],t.data[n]);if(t.t<this.t){for(o=t.s&this.DM,n=i;n<this.t;++n)r.data[n]=e(this.data[n],o);r.t=this.t}else{for(o=this.s&this.DM,n=i;n<t.t;++n)r.data[n]=e(o,t.data[n]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()},i.prototype.changeBit=function(t,e){var r=i.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r},i.prototype.addTo=function(t,e){for(var r=0,n=0,o=Math.min(t.t,this.t);r<o;)n+=this.data[r]+t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n+=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n+=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,n>0?e.data[r++]=n:n<-1&&(e.data[r++]=this.DV+n),e.t=r,e.clamp()},i.prototype.dMultiply=function(t){this.data[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()},i.prototype.dAddOffset=function(t,e){if(0!=t){for(;this.t<=e;)this.data[this.t++]=0;for(this.data[e]+=t;this.data[e]>=this.DV;)this.data[e]-=this.DV,++e>=this.t&&(this.data[this.t++]=0),++this.data[e]}},i.prototype.multiplyLowerTo=function(t,e,r){var n,o=Math.min(this.t+t.t,e);for(r.s=0,r.t=o;o>0;)r.data[--o]=0;for(n=r.t-this.t;o<n;++o)r.data[o+this.t]=this.am(0,t.data[o],r,o,0,this.t);for(n=Math.min(t.t,e);o<n;++o)this.am(0,t.data[o],r,o,0,e-o);r.clamp()},i.prototype.multiplyUpperTo=function(t,e,r){--e;var n=r.t=this.t+t.t-e;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)r.data[this.t+n-e]=this.am(e-n,t.data[n],r,0,0,this.t+n-e);r.clamp(),r.drShiftTo(1,r)},i.prototype.modInt=function(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(0==e)r=this.data[0]%t;else for(var n=this.t-1;n>=0;--n)r=(e*r+this.data[n])%t;return r},i.prototype.millerRabin=function(t){var e=this.subtract(i.ONE),r=e.getLowestSetBit();if(r<=0)return!1;for(var n,o=e.shiftRight(r),a={nextBytes:function(t){for(var e=0;e<t.length;++e)t[e]=Math.floor(256*Math.random())}},s=0;s<t;++s){do{n=new i(this.bitLength(),a)}while(n.compareTo(i.ONE)<=0||n.compareTo(e)>=0);var u=n.modPow(o,this);if(0!=u.compareTo(i.ONE)&&0!=u.compareTo(e)){for(var l=1;l++<r&&0!=u.compareTo(e);)if(0==(u=u.modPowInt(2,this)).compareTo(i.ONE))return!1;if(0!=u.compareTo(e))return!1}}return!0},i.prototype.clone=function(){var t=a();return this.copyTo(t),t},i.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this.data[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this.data[0];if(0==this.t)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]},i.prototype.byteValue=function(){return 0==this.t?this.s:this.data[0]<<24>>24},i.prototype.shortValue=function(){return 0==this.t?this.s:this.data[0]<<16>>16},i.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this.data[0]<=0?0:1},i.prototype.toByteArray=function(){var t=this.t,e=new Array;e[0]=this.s;var r,n=this.DB-t*this.DB%8,o=0;if(t-- >0)for(n<this.DB&&(r=this.data[t]>>n)!=(this.s&this.DM)>>n&&(e[o++]=r|this.s<<this.DB-n);t>=0;)n<8?(r=(this.data[t]&(1<<n)-1)<<8-n,r|=this.data[--t]>>(n+=this.DB-8)):(r=this.data[t]>>(n-=8)&255,n<=0&&(n+=this.DB,--t)),0!=(128&r)&&(r|=-256),0==o&&(128&this.s)!=(128&r)&&++o,(o>0||r!=this.s)&&(e[o++]=r);return e},i.prototype.equals=function(t){return 0==this.compareTo(t)},i.prototype.min=function(t){return this.compareTo(t)<0?this:t},i.prototype.max=function(t){return this.compareTo(t)>0?this:t},i.prototype.and=function(t){var e=a();return this.bitwiseTo(t,v,e),e},i.prototype.or=function(t){var e=a();return this.bitwiseTo(t,m,e),e},i.prototype.xor=function(t){var e=a();return this.bitwiseTo(t,g,e),e},i.prototype.andNot=function(t){var e=a();return this.bitwiseTo(t,S,e),e},i.prototype.not=function(){for(var t=a(),e=0;e<this.t;++e)t.data[e]=this.DM&~this.data[e];return t.t=this.t,t.s=~this.s,t},i.prototype.shiftLeft=function(t){var e=a();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e},i.prototype.shiftRight=function(t){var e=a();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e},i.prototype.getLowestSetBit=function(){for(var t=0;t<this.t;++t)if(0!=this.data[t])return t*this.DB+w(this.data[t]);return this.s<0?this.t*this.DB:-1},i.prototype.bitCount=function(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=O(this.data[r]^e);return t},i.prototype.testBit=function(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this.data[e]&1<<t%this.DB)},i.prototype.setBit=function(t){return this.changeBit(t,m)},i.prototype.clearBit=function(t){return this.changeBit(t,S)},i.prototype.flipBit=function(t){return this.changeBit(t,g)},i.prototype.add=function(t){var e=a();return this.addTo(t,e),e},i.prototype.subtract=function(t){var e=a();return this.subTo(t,e),e},i.prototype.multiply=function(t){var e=a();return this.multiplyTo(t,e),e},i.prototype.divide=function(t){var e=a();return this.divRemTo(t,e,null),e},i.prototype.remainder=function(t){var e=a();return this.divRemTo(t,null,e),e},i.prototype.divideAndRemainder=function(t){var e=a(),r=a();return this.divRemTo(t,e,r),new Array(e,r)},i.prototype.modPow=function(t,e){var r,n,o=t.bitLength(),i=h(1);if(o<=0)return i;r=o<18?1:o<48?3:o<144?4:o<768?5:6,n=o<8?new d(e):e.isEven()?new E(e):new b(e);var s=new Array,u=3,l=r-1,c=(1<<r)-1;if(s[1]=n.convert(this),r>1){var f=a();for(n.sqrTo(s[1],f);u<=c;)s[u]=a(),n.mulTo(f,s[u-2],s[u]),u+=2}var p,v,m=t.t-1,g=!0,S=a();for(o=y(t.data[m])-1;m>=0;){for(o>=l?p=t.data[m]>>o-l&c:(p=(t.data[m]&(1<<o+1)-1)<<l-o,m>0&&(p|=t.data[m-1]>>this.DB+o-l)),u=r;0==(1&p);)p>>=1,--u;if((o-=u)<0&&(o+=this.DB,--m),g)s[p].copyTo(i),g=!1;else{for(;u>1;)n.sqrTo(i,S),n.sqrTo(S,i),u-=2;u>0?n.sqrTo(i,S):(v=i,i=S,S=v),n.mulTo(S,s[p],i)}for(;m>=0&&0==(t.data[m]&1<<o);)n.sqrTo(i,S),v=i,i=S,S=v,--o<0&&(o=this.DB-1,--m)}return n.revert(i)},i.prototype.modInverse=function(t){var e=t.isEven();if(this.isEven()&&e||0==t.signum())return i.ZERO;for(var r=t.clone(),n=this.clone(),o=h(1),a=h(0),s=h(0),u=h(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),e?(o.isEven()&&a.isEven()||(o.addTo(this,o),a.subTo(t,a)),o.rShiftTo(1,o)):a.isEven()||a.subTo(t,a),a.rShiftTo(1,a);for(;n.isEven();)n.rShiftTo(1,n),e?(s.isEven()&&u.isEven()||(s.addTo(this,s),u.subTo(t,u)),s.rShiftTo(1,s)):u.isEven()||u.subTo(t,u),u.rShiftTo(1,u);r.compareTo(n)>=0?(r.subTo(n,r),e&&o.subTo(s,o),a.subTo(u,a)):(n.subTo(r,n),e&&s.subTo(o,s),u.subTo(a,u))}return 0!=n.compareTo(i.ONE)?i.ZERO:u.compareTo(t)>=0?u.subtract(t):u.signum()<0?(u.addTo(t,u),u.signum()<0?u.add(t):u):u},i.prototype.pow=function(t){return this.exp(t,new _)},i.prototype.gcd=function(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var n=e;e=r,r=n}var o=e.getLowestSetBit(),i=r.getLowestSetBit();if(i<0)return e;for(o<i&&(i=o),i>0&&(e.rShiftTo(i,e),r.rShiftTo(i,r));e.signum()>0;)(o=e.getLowestSetBit())>0&&e.rShiftTo(o,e),(o=r.getLowestSetBit())>0&&r.rShiftTo(o,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return i>0&&r.lShiftTo(i,r),r},i.prototype.isProbablePrime=function(t){var e,r=this.abs();if(1==r.t&&r.data[0]<=C[C.length-1]){for(e=0;e<C.length;++e)if(r.data[0]==C[e])return!0;return!1}if(r.isEven())return!1;for(e=1;e<C.length;){for(var n=C[e],o=e+1;o<C.length&&n<T;)n*=C[o++];for(n=r.modInt(n);e<o;)if(n%C[e++]==0)return!1}return r.millerRabin(t)}},function(t,e,r){var n=r(0);r(1),t.exports=n.cipher=n.cipher||{},n.cipher.algorithms=n.cipher.algorithms||{},n.cipher.createCipher=function(t,e){var r=t;if("string"==typeof r&&(r=n.cipher.getAlgorithm(r))&&(r=r()),!r)throw new Error("Unsupported algorithm: "+t);return new n.cipher.BlockCipher({algorithm:r,key:e,decrypt:!1})},n.cipher.createDecipher=function(t,e){var r=t;if("string"==typeof r&&(r=n.cipher.getAlgorithm(r))&&(r=r()),!r)throw new Error("Unsupported algorithm: "+t);return new n.cipher.BlockCipher({algorithm:r,key:e,decrypt:!0})},n.cipher.registerAlgorithm=function(t,e){t=t.toUpperCase(),n.cipher.algorithms[t]=e},n.cipher.getAlgorithm=function(t){return(t=t.toUpperCase())in n.cipher.algorithms?n.cipher.algorithms[t]:null};var o=n.cipher.BlockCipher=function(t){this.algorithm=t.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=t.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=t.decrypt,this.algorithm.initialize(t)};o.prototype.start=function(t){t=t||{};var e={};for(var r in t)e[r]=t[r];e.decrypt=this._decrypt,this._finish=!1,this._input=n.util.createBuffer(),this.output=t.output||n.util.createBuffer(),this.mode.start(e)},o.prototype.update=function(t){for(t&&this._input.putBuffer(t);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()},o.prototype.finish=function(t){!t||"ECB"!==this.mode.name&&"CBC"!==this.mode.name||(this.mode.pad=function(e){return t(this.blockSize,e,!1)},this.mode.unpad=function(e){return t(this.blockSize,e,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e)||this.mode.afterFinish&&!this.mode.afterFinish(this.output,e)))}},function(t,e,r){var n=r(0);r(4),r(1);var o=t.exports=n.md5=n.md5||{};n.md.md5=n.md.algorithms.md5=o,o.create=function(){l||function(){i=String.fromCharCode(128),i+=n.util.fillString(String.fromCharCode(0),64),a=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],s=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],u=new Array(64);for(var t=0;t<64;++t)u[t]=Math.floor(4294967296*Math.abs(Math.sin(t+1)));l=!0}();var t=null,e=n.util.createBuffer(),r=new Array(16),o={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){o.messageLength=0,o.fullMessageLength=o.messageLength64=[];for(var r=o.messageLengthSize/4,i=0;i<r;++i)o.fullMessageLength.push(0);return e=n.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},o}};return o.start(),o.update=function(i,a){"utf8"===a&&(i=n.util.encodeUtf8(i));var s=i.length;o.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var u=o.fullMessageLength.length-1;u>=0;--u)o.fullMessageLength[u]+=s[1],s[1]=s[0]+(o.fullMessageLength[u]/4294967296>>>0),o.fullMessageLength[u]=o.fullMessageLength[u]>>>0,s[0]=s[1]/4294967296>>>0;return e.putBytes(i),c(t,r,e),(e.read>2048||0===e.length())&&e.compact(),o},o.digest=function(){var a=n.util.createBuffer();a.putBytes(e.bytes());var s=o.fullMessageLength[o.fullMessageLength.length-1]+o.messageLengthSize&o.blockLength-1;a.putBytes(i.substr(0,o.blockLength-s));for(var u,l=0,f=o.fullMessageLength.length-1;f>=0;--f)l=(u=8*o.fullMessageLength[f]+l)/4294967296>>>0,a.putInt32Le(u>>>0);var p={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3};c(p,r,a);var h=n.util.createBuffer();return h.putInt32Le(p.h0),h.putInt32Le(p.h1),h.putInt32Le(p.h2),h.putInt32Le(p.h3),h},o};var i=null,a=null,s=null,u=null,l=!1;function c(t,e,r){for(var n,o,i,l,c,f,p,h=r.length();h>=64;){for(o=t.h0,i=t.h1,l=t.h2,c=t.h3,p=0;p<16;++p)e[p]=r.getInt32Le(),n=o+(c^i&(l^c))+u[p]+e[p],o=c,c=l,l=i,i+=n<<(f=s[p])|n>>>32-f;for(;p<32;++p)n=o+(l^c&(i^l))+u[p]+e[a[p]],o=c,c=l,l=i,i+=n<<(f=s[p])|n>>>32-f;for(;p<48;++p)n=o+(i^l^c)+u[p]+e[a[p]],o=c,c=l,l=i,i+=n<<(f=s[p])|n>>>32-f;for(;p<64;++p)n=o+(l^(i|~c))+u[p]+e[a[p]],o=c,c=l,l=i,i+=n<<(f=s[p])|n>>>32-f;t.h0=t.h0+o|0,t.h1=t.h1+i|0,t.h2=t.h2+l|0,t.h3=t.h3+c|0,h-=64}}},function(t,e,r){var n=r(0);r(8),r(4),r(1);var o,i=n.pkcs5=n.pkcs5||{};n.util.isNodejs&&!n.options.usePureJavaScript&&(o=r(16)),t.exports=n.pbkdf2=i.pbkdf2=function(t,e,r,i,a,u){if("function"==typeof a&&(u=a,a=null),n.util.isNodejs&&!n.options.usePureJavaScript&&o.pbkdf2&&(null===a||"object"!=s(a))&&(o.pbkdf2Sync.length>4||!a||"sha1"===a))return"string"!=typeof a&&(a="sha1"),t=Buffer.from(t,"binary"),e=Buffer.from(e,"binary"),u?4===o.pbkdf2Sync.length?o.pbkdf2(t,e,r,i,function(t,e){if(t)return u(t);u(null,e.toString("binary"))}):o.pbkdf2(t,e,r,i,a,function(t,e){if(t)return u(t);u(null,e.toString("binary"))}):4===o.pbkdf2Sync.length?o.pbkdf2Sync(t,e,r,i).toString("binary"):o.pbkdf2Sync(t,e,r,i,a).toString("binary");if(null==a&&(a="sha1"),"string"==typeof a){if(!(a in n.md.algorithms))throw new Error("Unknown hash algorithm: "+a);a=n.md[a].create()}var l=a.digestLength;if(i>4294967295*l){var c=new Error("Derived key is too long.");if(u)return u(c);throw c}var f=Math.ceil(i/l),p=i-(f-1)*l,h=n.hmac.create();h.start(a,t);var y,d,b,v="";if(!u){for(var m=1;m<=f;++m){h.start(null,null),h.update(e),h.update(n.util.int32ToBytes(m)),y=b=h.digest().getBytes();for(var g=2;g<=r;++g)h.start(null,null),h.update(b),d=h.digest().getBytes(),y=n.util.xorBytes(y,d,l),b=d;v+=m<f?y:y.substr(0,p)}return v}function S(){if(m>f)return u(null,v);h.start(null,null),h.update(e),h.update(n.util.int32ToBytes(m)),y=b=h.digest().getBytes(),g=2,w()}function w(){if(g<=r)return h.start(null,null),h.update(b),d=h.digest().getBytes(),y=n.util.xorBytes(y,d,l),b=d,++g,n.util.setImmediate(w);v+=m<f?y:y.substr(0,p),++m,S()}m=1,S()}},function(t,e){},function(t,e,r){var n=r(0);r(5),r(3),r(10),r(4),r(37),r(6),r(7),r(18),r(11),r(1);var o=n.asn1,i=t.exports=n.pki=n.pki||{},a=i.oids,u={};u.CN=a.commonName,u.commonName="CN",u.C=a.countryName,u.countryName="C",u.L=a.localityName,u.localityName="L",u.ST=a.stateOrProvinceName,u.stateOrProvinceName="ST",u.O=a.organizationName,u.organizationName="O",u.OU=a.organizationalUnitName,u.organizationalUnitName="OU",u.E=a.emailAddress,u.emailAddress="E";var l=n.pki.rsa.publicKeyValidator,c={name:"Certificate",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:o.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:o.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:o.Class.UNIVERSAL,type:o.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:o.Class.UNIVERSAL,type:o.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:o.Class.UNIVERSAL,type:o.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:o.Class.UNIVERSAL,type:o.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},l,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:o.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:o.Class.UNIVERSAL,type:o.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:o.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:o.Class.UNIVERSAL,type:o.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:o.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:o.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:o.Class.UNIVERSAL,type:o.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},f={name:"rsapss",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:o.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:o.Class.UNIVERSAL,type:o.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:o.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:o.Class.UNIVERSAL,type:o.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:o.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:o.Class.UNIVERSAL,type:o.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:o.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:o.Class.UNIVERSAL,type:o.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},p={name:"CertificationRequestInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},l,{name:"CertificationRequestInfo.attributes",tagClass:o.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:o.Class.UNIVERSAL,type:o.Type.SET,constructed:!0}]}]}]},h={name:"CertificationRequest",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[p,{name:"CertificationRequest.signatureAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:o.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:o.Class.UNIVERSAL,type:o.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};function y(t,e){"string"==typeof e&&(e={shortName:e});for(var r,n=null,o=0;null===n&&o<t.attributes.length;++o)r=t.attributes[o],(e.type&&e.type===r.type||e.name&&e.name===r.name||e.shortName&&e.shortName===r.shortName)&&(n=r);return n}i.RDNAttributesAsArray=function(t,e){for(var r,n,i,s=[],l=0;l<t.value.length;++l){r=t.value[l];for(var c=0;c<r.value.length;++c)i={},n=r.value[c],i.type=o.derToOid(n.value[0].value),i.value=n.value[1].value,i.valueTagClass=n.value[1].type,i.type in a&&(i.name=a[i.type],i.name in u&&(i.shortName=u[i.name])),e&&(e.update(i.type),e.update(i.value)),s.push(i)}return s},i.CRIAttributesAsArray=function(t){for(var e=[],r=0;r<t.length;++r)for(var n=t[r],s=o.derToOid(n.value[0].value),l=n.value[1].value,c=0;c<l.length;++c){var f={};if(f.type=s,f.value=l[c].value,f.valueTagClass=l[c].type,f.type in a&&(f.name=a[f.type],f.name in u&&(f.shortName=u[f.name])),f.type===a.extensionRequest){f.extensions=[];for(var p=0;p<f.value.length;++p)f.extensions.push(i.certificateExtensionFromAsn1(f.value[p]))}e.push(f)}return e};var d=function(t,e,r){var n={};if(t!==a["RSASSA-PSS"])return n;r&&(n={hash:{algorithmOid:a.sha1},mgf:{algorithmOid:a.mgf1,hash:{algorithmOid:a.sha1}},saltLength:20});var i={},s=[];if(!o.validate(e,f,i,s)){var u=new Error("Cannot read RSASSA-PSS parameter block.");throw u.errors=s,u}return void 0!==i.hashOid&&(n.hash=n.hash||{},n.hash.algorithmOid=o.derToOid(i.hashOid)),void 0!==i.maskGenOid&&(n.mgf=n.mgf||{},n.mgf.algorithmOid=o.derToOid(i.maskGenOid),n.mgf.hash=n.mgf.hash||{},n.mgf.hash.algorithmOid=o.derToOid(i.maskGenHashOid)),void 0!==i.saltLength&&(n.saltLength=i.saltLength.charCodeAt(0)),n},b=function(t){switch(a[t.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return n.md.sha1.create();case"md5WithRSAEncryption":return n.md.md5.create();case"sha256WithRSAEncryption":return n.md.sha256.create();case"sha384WithRSAEncryption":return n.md.sha384.create();case"sha512WithRSAEncryption":return n.md.sha512.create();case"RSASSA-PSS":return n.md.sha256.create();default:var e=new Error("Could not compute "+t.type+" digest. Unknown signature OID.");throw e.signatureOid=t.signatureOid,e}},v=function(t){var e,r=t.certificate;switch(r.signatureOid){case a.sha1WithRSAEncryption:case a.sha1WithRSASignature:break;case a["RSASSA-PSS"]:var o,i,s;if(void 0===(o=a[r.signatureParameters.mgf.hash.algorithmOid])||void 0===n.md[o])throw(s=new Error("Unsupported MGF hash function.")).oid=r.signatureParameters.mgf.hash.algorithmOid,s.name=o,s;if(void 0===(i=a[r.signatureParameters.mgf.algorithmOid])||void 0===n.mgf[i])throw(s=new Error("Unsupported MGF function.")).oid=r.signatureParameters.mgf.algorithmOid,s.name=i,s;if(i=n.mgf[i].create(n.md[o].create()),void 0===(o=a[r.signatureParameters.hash.algorithmOid])||void 0===n.md[o])throw(s=new Error("Unsupported RSASSA-PSS hash function.")).oid=r.signatureParameters.hash.algorithmOid,s.name=o,s;e=n.pss.create(n.md[o].create(),i,r.signatureParameters.saltLength)}return r.publicKey.verify(t.md.digest().getBytes(),t.signature,e)};function m(t){for(var e,r,i=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]),a=t.attributes,s=0;s<a.length;++s){var u=(e=a[s]).value,l=o.Type.PRINTABLESTRING;"valueTagClass"in e&&(l=e.valueTagClass)===o.Type.UTF8&&(u=n.util.encodeUtf8(u)),r=o.create(o.Class.UNIVERSAL,o.Type.SET,!0,[o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(e.type).getBytes()),o.create(o.Class.UNIVERSAL,l,!1,u)])]),i.value.push(r)}return i}function g(t){for(var e,r=0;r<t.length;++r){if(void 0===(e=t[r]).name&&(e.type&&e.type in i.oids?e.name=i.oids[e.type]:e.shortName&&e.shortName in u&&(e.name=i.oids[u[e.shortName]])),void 0===e.type){if(!(e.name&&e.name in i.oids))throw(s=new Error("Attribute type not specified.")).attribute=e,s;e.type=i.oids[e.name]}if(void 0===e.shortName&&e.name&&e.name in u&&(e.shortName=u[e.name]),e.type===a.extensionRequest&&(e.valueConstructed=!0,e.valueTagClass=o.Type.SEQUENCE,!e.value&&e.extensions)){e.value=[];for(var n=0;n<e.extensions.length;++n)e.value.push(i.certificateExtensionToAsn1(S(e.extensions[n])))}var s;if(void 0===e.value)throw(s=new Error("Attribute value not specified.")).attribute=e,s}}function S(t,e){if(e=e||{},void 0===t.name&&t.id&&t.id in i.oids&&(t.name=i.oids[t.id]),void 0===t.id){if(!(t.name&&t.name in i.oids))throw(w=new Error("Extension ID not specified.")).extension=t,w;t.id=i.oids[t.name]}if(void 0!==t.value)return t;if("keyUsage"===t.name){var r=0,s=0,u=0;t.digitalSignature&&(s|=128,r=7),t.nonRepudiation&&(s|=64,r=6),t.keyEncipherment&&(s|=32,r=5),t.dataEncipherment&&(s|=16,r=4),t.keyAgreement&&(s|=8,r=3),t.keyCertSign&&(s|=4,r=2),t.cRLSign&&(s|=2,r=1),t.encipherOnly&&(s|=1,r=0),t.decipherOnly&&(u|=128,r=7);var l=String.fromCharCode(r);0!==u?l+=String.fromCharCode(s)+String.fromCharCode(u):0!==s&&(l+=String.fromCharCode(s)),t.value=o.create(o.Class.UNIVERSAL,o.Type.BITSTRING,!1,l)}else if("basicConstraints"===t.name)t.value=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]),t.cA&&t.value.value.push(o.create(o.Class.UNIVERSAL,o.Type.BOOLEAN,!1,String.fromCharCode(255))),"pathLenConstraint"in t&&t.value.value.push(o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(t.pathLenConstraint).getBytes()));else if("extKeyUsage"===t.name){t.value=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]);var c=t.value.value;for(var f in t)!0===t[f]&&(f in a?c.push(o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(a[f]).getBytes())):-1!==f.indexOf(".")&&c.push(o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(f).getBytes())))}else if("nsCertType"===t.name)r=0,s=0,t.client&&(s|=128,r=7),t.server&&(s|=64,r=6),t.email&&(s|=32,r=5),t.objsign&&(s|=16,r=4),t.reserved&&(s|=8,r=3),t.sslCA&&(s|=4,r=2),t.emailCA&&(s|=2,r=1),t.objCA&&(s|=1,r=0),l=String.fromCharCode(r),0!==s&&(l+=String.fromCharCode(s)),t.value=o.create(o.Class.UNIVERSAL,o.Type.BITSTRING,!1,l);else if("subjectAltName"===t.name||"issuerAltName"===t.name){t.value=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]);for(var p=0;p<t.altNames.length;++p){if(l=(v=t.altNames[p]).value,7===v.type&&v.ip){if(null===(l=n.util.bytesFromIP(v.ip)))throw(w=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.')).extension=t,w}else 8===v.type&&(l=v.oid?o.oidToDer(o.oidToDer(v.oid)):o.oidToDer(l));t.value.value.push(o.create(o.Class.CONTEXT_SPECIFIC,v.type,!1,l))}}else if("nsComment"===t.name&&e.cert){if(!/^[\x00-\x7F]*$/.test(t.comment)||t.comment.length<1||t.comment.length>128)throw new Error('Invalid "nsComment" content.');t.value=o.create(o.Class.UNIVERSAL,o.Type.IA5STRING,!1,t.comment)}else if("subjectKeyIdentifier"===t.name&&e.cert){var h=e.cert.generateSubjectKeyIdentifier();t.subjectKeyIdentifier=h.toHex(),t.value=o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,h.getBytes())}else if("authorityKeyIdentifier"===t.name&&e.cert){if(t.value=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]),c=t.value.value,t.keyIdentifier){var y=!0===t.keyIdentifier?e.cert.generateSubjectKeyIdentifier().getBytes():t.keyIdentifier;c.push(o.create(o.Class.CONTEXT_SPECIFIC,0,!1,y))}if(t.authorityCertIssuer){var d=[o.create(o.Class.CONTEXT_SPECIFIC,4,!0,[m(!0===t.authorityCertIssuer?e.cert.issuer:t.authorityCertIssuer)])];c.push(o.create(o.Class.CONTEXT_SPECIFIC,1,!0,d))}if(t.serialNumber){var b=n.util.hexToBytes(!0===t.serialNumber?e.cert.serialNumber:t.serialNumber);c.push(o.create(o.Class.CONTEXT_SPECIFIC,2,!1,b))}}else if("cRLDistributionPoints"===t.name){t.value=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]),c=t.value.value;var v,g=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]),S=o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[]);for(p=0;p<t.altNames.length;++p){if(l=(v=t.altNames[p]).value,7===v.type&&v.ip){if(null===(l=n.util.bytesFromIP(v.ip)))throw(w=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.')).extension=t,w}else 8===v.type&&(l=v.oid?o.oidToDer(o.oidToDer(v.oid)):o.oidToDer(l));S.value.push(o.create(o.Class.CONTEXT_SPECIFIC,v.type,!1,l))}g.value.push(o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[S])),c.push(g)}var w;if(void 0===t.value)throw(w=new Error("Extension value not specified.")).extension=t,w;return t}function w(t,e){switch(t){case a["RSASSA-PSS"]:var r=[];return void 0!==e.hash.algorithmOid&&r.push(o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(e.hash.algorithmOid).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")])])),void 0!==e.mgf.algorithmOid&&r.push(o.create(o.Class.CONTEXT_SPECIFIC,1,!0,[o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(e.mgf.algorithmOid).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(e.mgf.hash.algorithmOid).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")])])])),void 0!==e.saltLength&&r.push(o.create(o.Class.CONTEXT_SPECIFIC,2,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(e.saltLength).getBytes())])),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,r);default:return o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")}}i.certificateFromPem=function(t,e,r){var a=n.pem.decode(t)[0];if("CERTIFICATE"!==a.type&&"X509 CERTIFICATE"!==a.type&&"TRUSTED CERTIFICATE"!==a.type){var s=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw s.headerType=a.type,s}if(a.procType&&"ENCRYPTED"===a.procType.type)throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var u=o.fromDer(a.body,r);return i.certificateFromAsn1(u,e)},i.certificateToPem=function(t,e){var r={type:"CERTIFICATE",body:o.toDer(i.certificateToAsn1(t)).getBytes()};return n.pem.encode(r,{maxline:e})},i.publicKeyFromPem=function(t){var e=n.pem.decode(t)[0];if("PUBLIC KEY"!==e.type&&"RSA PUBLIC KEY"!==e.type){var r=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw r.headerType=e.type,r}if(e.procType&&"ENCRYPTED"===e.procType.type)throw new Error("Could not convert public key from PEM; PEM is encrypted.");var a=o.fromDer(e.body);return i.publicKeyFromAsn1(a)},i.publicKeyToPem=function(t,e){var r={type:"PUBLIC KEY",body:o.toDer(i.publicKeyToAsn1(t)).getBytes()};return n.pem.encode(r,{maxline:e})},i.publicKeyToRSAPublicKeyPem=function(t,e){var r={type:"RSA PUBLIC KEY",body:o.toDer(i.publicKeyToRSAPublicKey(t)).getBytes()};return n.pem.encode(r,{maxline:e})},i.getPublicKeyFingerprint=function(t,e){var r,a=(e=e||{}).md||n.md.sha1.create();switch(e.type||"RSAPublicKey"){case"RSAPublicKey":r=o.toDer(i.publicKeyToRSAPublicKey(t)).getBytes();break;case"SubjectPublicKeyInfo":r=o.toDer(i.publicKeyToAsn1(t)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+e.type+'".')}a.start(),a.update(r);var s=a.digest();if("hex"===e.encoding){var u=s.toHex();return e.delimiter?u.match(/.{2}/g).join(e.delimiter):u}if("binary"===e.encoding)return s.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".');return s},i.certificationRequestFromPem=function(t,e,r){var a=n.pem.decode(t)[0];if("CERTIFICATE REQUEST"!==a.type){var s=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw s.headerType=a.type,s}if(a.procType&&"ENCRYPTED"===a.procType.type)throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var u=o.fromDer(a.body,r);return i.certificationRequestFromAsn1(u,e)},i.certificationRequestToPem=function(t,e){var r={type:"CERTIFICATE REQUEST",body:o.toDer(i.certificationRequestToAsn1(t)).getBytes()};return n.pem.encode(r,{maxline:e})},i.createCertificate=function(){var t={version:2,serialNumber:"00",signatureOid:null,signature:null,siginfo:{}};return t.siginfo.algorithmOid=null,t.validity={},t.validity.notBefore=new Date,t.validity.notAfter=new Date,t.issuer={},t.issuer.getField=function(e){return y(t.issuer,e)},t.issuer.addField=function(e){g([e]),t.issuer.attributes.push(e)},t.issuer.attributes=[],t.issuer.hash=null,t.subject={},t.subject.getField=function(e){return y(t.subject,e)},t.subject.addField=function(e){g([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.extensions=[],t.publicKey=null,t.md=null,t.setSubject=function(e,r){g(e),t.subject.attributes=e,delete t.subject.uniqueId,r&&(t.subject.uniqueId=r),t.subject.hash=null},t.setIssuer=function(e,r){g(e),t.issuer.attributes=e,delete t.issuer.uniqueId,r&&(t.issuer.uniqueId=r),t.issuer.hash=null},t.setExtensions=function(e){for(var r=0;r<e.length;++r)S(e[r],{cert:t});t.extensions=e},t.getExtension=function(e){"string"==typeof e&&(e={name:e});for(var r,n=null,o=0;null===n&&o<t.extensions.length;++o)r=t.extensions[o],(e.id&&r.id===e.id||e.name&&r.name===e.name)&&(n=r);return n},t.sign=function(e,r){t.md=r||n.md.sha1.create();var s=a[t.md.algorithm+"WithRSAEncryption"];if(!s){var u=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw u.algorithm=t.md.algorithm,u}t.signatureOid=t.siginfo.algorithmOid=s,t.tbsCertificate=i.getTBSCertificate(t);var l=o.toDer(t.tbsCertificate);t.md.update(l.getBytes()),t.signature=e.sign(t.md)},t.verify=function(e){var r=!1;if(!t.issued(e)){var n=e.issuer,a=t.subject,s=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw s.expectedIssuer=a.attributes,s.actualIssuer=n.attributes,s}var u=e.md;if(null===u){u=b({signatureOid:e.signatureOid,type:"certificate"});var l=e.tbsCertificate||i.getTBSCertificate(e),c=o.toDer(l);u.update(c.getBytes())}return null!==u&&(r=v({certificate:t,md:u,signature:e.signature})),r},t.isIssuer=function(e){var r=!1,n=t.issuer,o=e.subject;if(n.hash&&o.hash)r=n.hash===o.hash;else if(n.attributes.length===o.attributes.length){var i,a;r=!0;for(var s=0;r&&s<n.attributes.length;++s)i=n.attributes[s],a=o.attributes[s],i.type===a.type&&i.value===a.value||(r=!1)}return r},t.issued=function(e){return e.isIssuer(t)},t.generateSubjectKeyIdentifier=function(){return i.getPublicKeyFingerprint(t.publicKey,{type:"RSAPublicKey"})},t.verifySubjectKeyIdentifier=function(){for(var e=a.subjectKeyIdentifier,r=0;r<t.extensions.length;++r){var o=t.extensions[r];if(o.id===e){var i=t.generateSubjectKeyIdentifier().getBytes();return n.util.hexToBytes(o.subjectKeyIdentifier)===i}}return!1},t},i.certificateFromAsn1=function(t,e){var r={},a=[];if(!o.validate(t,c,r,a)){var s=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw s.errors=a,s}if(o.derToOid(r.publicKeyOid)!==i.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var u=i.createCertificate();u.version=r.certVersion?r.certVersion.charCodeAt(0):0;var l=n.util.createBuffer(r.certSerialNumber);u.serialNumber=l.toHex(),u.signatureOid=n.asn1.derToOid(r.certSignatureOid),u.signatureParameters=d(u.signatureOid,r.certSignatureParams,!0),u.siginfo.algorithmOid=n.asn1.derToOid(r.certinfoSignatureOid),u.siginfo.parameters=d(u.siginfo.algorithmOid,r.certinfoSignatureParams,!1),u.signature=r.certSignature;var f=[];if(void 0!==r.certValidity1UTCTime&&f.push(o.utcTimeToDate(r.certValidity1UTCTime)),void 0!==r.certValidity2GeneralizedTime&&f.push(o.generalizedTimeToDate(r.certValidity2GeneralizedTime)),void 0!==r.certValidity3UTCTime&&f.push(o.utcTimeToDate(r.certValidity3UTCTime)),void 0!==r.certValidity4GeneralizedTime&&f.push(o.generalizedTimeToDate(r.certValidity4GeneralizedTime)),f.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(f.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(u.validity.notBefore=f[0],u.validity.notAfter=f[1],u.tbsCertificate=r.tbsCertificate,e){u.md=b({signatureOid:u.signatureOid,type:"certificate"});var p=o.toDer(u.tbsCertificate);u.md.update(p.getBytes())}var h=n.md.sha1.create(),v=o.toDer(r.certIssuer);h.update(v.getBytes()),u.issuer.getField=function(t){return y(u.issuer,t)},u.issuer.addField=function(t){g([t]),u.issuer.attributes.push(t)},u.issuer.attributes=i.RDNAttributesAsArray(r.certIssuer),r.certIssuerUniqueId&&(u.issuer.uniqueId=r.certIssuerUniqueId),u.issuer.hash=h.digest().toHex();var m=n.md.sha1.create(),S=o.toDer(r.certSubject);return m.update(S.getBytes()),u.subject.getField=function(t){return y(u.subject,t)},u.subject.addField=function(t){g([t]),u.subject.attributes.push(t)},u.subject.attributes=i.RDNAttributesAsArray(r.certSubject),r.certSubjectUniqueId&&(u.subject.uniqueId=r.certSubjectUniqueId),u.subject.hash=m.digest().toHex(),r.certExtensions?u.extensions=i.certificateExtensionsFromAsn1(r.certExtensions):u.extensions=[],u.publicKey=i.publicKeyFromAsn1(r.subjectPublicKeyInfo),u},i.certificateExtensionsFromAsn1=function(t){for(var e=[],r=0;r<t.value.length;++r)for(var n=t.value[r],o=0;o<n.value.length;++o)e.push(i.certificateExtensionFromAsn1(n.value[o]));return e},i.certificateExtensionFromAsn1=function(t){var e={};if(e.id=o.derToOid(t.value[0].value),e.critical=!1,t.value[1].type===o.Type.BOOLEAN?(e.critical=0!==t.value[1].value.charCodeAt(0),e.value=t.value[2].value):e.value=t.value[1].value,e.id in a)if(e.name=a[e.id],"keyUsage"===e.name){var r=0,i=0;(u=o.fromDer(e.value)).value.length>1&&(r=u.value.charCodeAt(1),i=u.value.length>2?u.value.charCodeAt(2):0),e.digitalSignature=128==(128&r),e.nonRepudiation=64==(64&r),e.keyEncipherment=32==(32&r),e.dataEncipherment=16==(16&r),e.keyAgreement=8==(8&r),e.keyCertSign=4==(4&r),e.cRLSign=2==(2&r),e.encipherOnly=1==(1&r),e.decipherOnly=128==(128&i)}else if("basicConstraints"===e.name){(u=o.fromDer(e.value)).value.length>0&&u.value[0].type===o.Type.BOOLEAN?e.cA=0!==u.value[0].value.charCodeAt(0):e.cA=!1;var s=null;u.value.length>0&&u.value[0].type===o.Type.INTEGER?s=u.value[0].value:u.value.length>1&&(s=u.value[1].value),null!==s&&(e.pathLenConstraint=o.derToInteger(s))}else if("extKeyUsage"===e.name)for(var u=o.fromDer(e.value),l=0;l<u.value.length;++l){var c=o.derToOid(u.value[l].value);c in a?e[a[c]]=!0:e[c]=!0}else if("nsCertType"===e.name)r=0,(u=o.fromDer(e.value)).value.length>1&&(r=u.value.charCodeAt(1)),e.client=128==(128&r),e.server=64==(64&r),e.email=32==(32&r),e.objsign=16==(16&r),e.reserved=8==(8&r),e.sslCA=4==(4&r),e.emailCA=2==(2&r),e.objCA=1==(1&r);else if("subjectAltName"===e.name||"issuerAltName"===e.name){var f;e.altNames=[],u=o.fromDer(e.value);for(var p=0;p<u.value.length;++p){var h={type:(f=u.value[p]).type,value:f.value};switch(e.altNames.push(h),f.type){case 1:case 2:case 6:break;case 7:h.ip=n.util.bytesToIP(f.value);break;case 8:h.oid=o.derToOid(f.value)}}}else"subjectKeyIdentifier"===e.name&&(u=o.fromDer(e.value),e.subjectKeyIdentifier=n.util.bytesToHex(u.value));return e},i.certificationRequestFromAsn1=function(t,e){var r={},a=[];if(!o.validate(t,h,r,a)){var s=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw s.errors=a,s}if(o.derToOid(r.publicKeyOid)!==i.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var u=i.createCertificationRequest();if(u.version=r.csrVersion?r.csrVersion.charCodeAt(0):0,u.signatureOid=n.asn1.derToOid(r.csrSignatureOid),u.signatureParameters=d(u.signatureOid,r.csrSignatureParams,!0),u.siginfo.algorithmOid=n.asn1.derToOid(r.csrSignatureOid),u.siginfo.parameters=d(u.siginfo.algorithmOid,r.csrSignatureParams,!1),u.signature=r.csrSignature,u.certificationRequestInfo=r.certificationRequestInfo,e){u.md=b({signatureOid:u.signatureOid,type:"certification request"});var l=o.toDer(u.certificationRequestInfo);u.md.update(l.getBytes())}var c=n.md.sha1.create();return u.subject.getField=function(t){return y(u.subject,t)},u.subject.addField=function(t){g([t]),u.subject.attributes.push(t)},u.subject.attributes=i.RDNAttributesAsArray(r.certificationRequestInfoSubject,c),u.subject.hash=c.digest().toHex(),u.publicKey=i.publicKeyFromAsn1(r.subjectPublicKeyInfo),u.getAttribute=function(t){return y(u,t)},u.addAttribute=function(t){g([t]),u.attributes.push(t)},u.attributes=i.CRIAttributesAsArray(r.certificationRequestInfoAttributes||[]),u},i.createCertificationRequest=function(){var t={version:0,signatureOid:null,signature:null,siginfo:{}};return t.siginfo.algorithmOid=null,t.subject={},t.subject.getField=function(e){return y(t.subject,e)},t.subject.addField=function(e){g([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.publicKey=null,t.attributes=[],t.getAttribute=function(e){return y(t,e)},t.addAttribute=function(e){g([e]),t.attributes.push(e)},t.md=null,t.setSubject=function(e){g(e),t.subject.attributes=e,t.subject.hash=null},t.setAttributes=function(e){g(e),t.attributes=e},t.sign=function(e,r){t.md=r||n.md.sha1.create();var s=a[t.md.algorithm+"WithRSAEncryption"];if(!s){var u=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw u.algorithm=t.md.algorithm,u}t.signatureOid=t.siginfo.algorithmOid=s,t.certificationRequestInfo=i.getCertificationRequestInfo(t);var l=o.toDer(t.certificationRequestInfo);t.md.update(l.getBytes()),t.signature=e.sign(t.md)},t.verify=function(){var e=!1,r=t.md;if(null===r){r=b({signatureOid:t.signatureOid,type:"certification request"});var n=t.certificationRequestInfo||i.getCertificationRequestInfo(t),a=o.toDer(n);r.update(a.getBytes())}return null!==r&&(e=v({certificate:t,md:r,signature:t.signature})),e},t};var O=new Date("1950-01-01T00:00:00Z"),_=new Date("2050-01-01T00:00:00Z");function P(t){return t>=O&&t<_?o.create(o.Class.UNIVERSAL,o.Type.UTCTIME,!1,o.dateToUtcTime(t)):o.create(o.Class.UNIVERSAL,o.Type.GENERALIZEDTIME,!1,o.dateToGeneralizedTime(t))}i.getTBSCertificate=function(t){var e=P(t.validity.notBefore),r=P(t.validity.notAfter),a=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(t.version).getBytes())]),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,n.util.hexToBytes(t.serialNumber)),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(t.siginfo.algorithmOid).getBytes()),w(t.siginfo.algorithmOid,t.siginfo.parameters)]),m(t.issuer),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[e,r]),m(t.subject),i.publicKeyToAsn1(t.publicKey)]);return t.issuer.uniqueId&&a.value.push(o.create(o.Class.CONTEXT_SPECIFIC,1,!0,[o.create(o.Class.UNIVERSAL,o.Type.BITSTRING,!1,String.fromCharCode(0)+t.issuer.uniqueId)])),t.subject.uniqueId&&a.value.push(o.create(o.Class.CONTEXT_SPECIFIC,2,!0,[o.create(o.Class.UNIVERSAL,o.Type.BITSTRING,!1,String.fromCharCode(0)+t.subject.uniqueId)])),t.extensions.length>0&&a.value.push(i.certificateExtensionsToAsn1(t.extensions)),a},i.getCertificationRequestInfo=function(t){return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(t.version).getBytes()),m(t.subject),i.publicKeyToAsn1(t.publicKey),function(t){var e=o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[]);if(0===t.attributes.length)return e;for(var r=t.attributes,i=0;i<r.length;++i){var a=r[i],s=a.value,u=o.Type.UTF8;"valueTagClass"in a&&(u=a.valueTagClass),u===o.Type.UTF8&&(s=n.util.encodeUtf8(s));var l=!1;"valueConstructed"in a&&(l=a.valueConstructed);var c=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(a.type).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SET,!0,[o.create(o.Class.UNIVERSAL,u,l,s)])]);e.value.push(c)}return e}(t)])},i.distinguishedNameToAsn1=function(t){return m(t)},i.certificateToAsn1=function(t){var e=t.tbsCertificate||i.getTBSCertificate(t);return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[e,o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(t.signatureOid).getBytes()),w(t.signatureOid,t.signatureParameters)]),o.create(o.Class.UNIVERSAL,o.Type.BITSTRING,!1,String.fromCharCode(0)+t.signature)])},i.certificateExtensionsToAsn1=function(t){var e=o.create(o.Class.CONTEXT_SPECIFIC,3,!0,[]),r=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]);e.value.push(r);for(var n=0;n<t.length;++n)r.value.push(i.certificateExtensionToAsn1(t[n]));return e},i.certificateExtensionToAsn1=function(t){var e=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]);e.value.push(o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(t.id).getBytes())),t.critical&&e.value.push(o.create(o.Class.UNIVERSAL,o.Type.BOOLEAN,!1,String.fromCharCode(255)));var r=t.value;return"string"!=typeof t.value&&(r=o.toDer(r).getBytes()),e.value.push(o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,r)),e},i.certificationRequestToAsn1=function(t){var e=t.certificationRequestInfo||i.getCertificationRequestInfo(t);return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[e,o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(t.signatureOid).getBytes()),w(t.signatureOid,t.signatureParameters)]),o.create(o.Class.UNIVERSAL,o.Type.BITSTRING,!1,String.fromCharCode(0)+t.signature)])},i.createCaStore=function(t){var e={certs:{}};function r(t){return a(t),e.certs[t.hash]||null}function a(t){if(!t.hash){var e=n.md.sha1.create();t.attributes=i.RDNAttributesAsArray(m(t),e),t.hash=e.digest().toHex()}}if(e.getIssuer=function(t){return r(t.issuer)},e.addCertificate=function(t){if("string"==typeof t&&(t=n.pki.certificateFromPem(t)),a(t.subject),!e.hasCertificate(t))if(t.subject.hash in e.certs){var r=e.certs[t.subject.hash];n.util.isArray(r)||(r=[r]),r.push(t),e.certs[t.subject.hash]=r}else e.certs[t.subject.hash]=t},e.hasCertificate=function(t){"string"==typeof t&&(t=n.pki.certificateFromPem(t));var e=r(t.subject);if(!e)return!1;n.util.isArray(e)||(e=[e]);for(var a=o.toDer(i.certificateToAsn1(t)).getBytes(),s=0;s<e.length;++s)if(a===o.toDer(i.certificateToAsn1(e[s])).getBytes())return!0;return!1},e.listAllCertificates=function(){var t=[];for(var r in e.certs)if(e.certs.hasOwnProperty(r)){var o=e.certs[r];if(n.util.isArray(o))for(var i=0;i<o.length;++i)t.push(o[i]);else t.push(o)}return t},e.removeCertificate=function(t){var s;if("string"==typeof t&&(t=n.pki.certificateFromPem(t)),a(t.subject),!e.hasCertificate(t))return null;var u=r(t.subject);if(!n.util.isArray(u))return s=e.certs[t.subject.hash],delete e.certs[t.subject.hash],s;for(var l=o.toDer(i.certificateToAsn1(t)).getBytes(),c=0;c<u.length;++c)l===o.toDer(i.certificateToAsn1(u[c])).getBytes()&&(s=u[c],u.splice(c,1));return 0===u.length&&delete e.certs[t.subject.hash],s},t)for(var s=0;s<t.length;++s){var u=t[s];e.addCertificate(u)}return e},i.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"},i.verifyCertificateChain=function(t,e,r){"function"==typeof r&&(r={verify:r}),r=r||{};var o=(e=e.slice(0)).slice(0),a=r.validityCheckDate;void 0===a&&(a=new Date);var u=!0,l=null,c=0;do{var f=e.shift(),p=null,h=!1;if(a&&(a<f.validity.notBefore||a>f.validity.notAfter)&&(l={message:"Certificate is not valid yet or has expired.",error:i.certificateError.certificate_expired,notBefore:f.validity.notBefore,notAfter:f.validity.notAfter,now:a}),null===l){if(null===(p=e[0]||t.getIssuer(f))&&f.isIssuer(f)&&(h=!0,p=f),p){var y=p;n.util.isArray(y)||(y=[y]);for(var d=!1;!d&&y.length>0;){p=y.shift();try{d=p.verify(f)}catch(t){}}d||(l={message:"Certificate signature is invalid.",error:i.certificateError.bad_certificate})}null!==l||p&&!h||t.hasCertificate(f)||(l={message:"Certificate is not trusted.",error:i.certificateError.unknown_ca})}if(null===l&&p&&!f.isIssuer(p)&&(l={message:"Certificate issuer is invalid.",error:i.certificateError.bad_certificate}),null===l)for(var b={keyUsage:!0,basicConstraints:!0},v=0;null===l&&v<f.extensions.length;++v){var m=f.extensions[v];m.critical&&!(m.name in b)&&(l={message:"Certificate has an unsupported critical extension.",error:i.certificateError.unsupported_certificate})}if(null===l&&(!u||0===e.length&&(!p||h))){var g=f.getExtension("basicConstraints"),S=f.getExtension("keyUsage");null!==S&&(S.keyCertSign&&null!==g||(l={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:i.certificateError.bad_certificate})),null!==l||null===g||g.cA||(l={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:i.certificateError.bad_certificate}),null===l&&null!==S&&"pathLenConstraint"in g&&c-1>g.pathLenConstraint&&(l={message:"Certificate basicConstraints pathLenConstraint violated.",error:i.certificateError.bad_certificate})}var w=null===l||l.error,O=r.verify?r.verify(w,c,o):w;if(!0!==O)throw!0===w&&(l={message:"The application rejected the certificate.",error:i.certificateError.bad_certificate}),(O||0===O)&&("object"!=s(O)||n.util.isArray(O)?"string"==typeof O&&(l.error=O):(O.message&&(l.message=O.message),O.error&&(l.error=O.error))),l;l=null,u=!1,++c}while(e.length>0);return!0}},function(t,e,r){var n=r(0);r(2),r(1),(t.exports=n.pss=n.pss||{}).create=function(t){3===arguments.length&&(t={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var e,r=t.md,o=t.mgf,i=r.digestLength,a=t.salt||null;if("string"==typeof a&&(a=n.util.createBuffer(a)),"saltLength"in t)e=t.saltLength;else{if(null===a)throw new Error("Salt length not specified or specific salt not given.");e=a.length()}if(null!==a&&a.length()!==e)throw new Error("Given salt length does not match length of given salt.");var s=t.prng||n.random;return{encode:function(t,u){var l,c,f=u-1,p=Math.ceil(f/8),h=t.digest().getBytes();if(p<i+e+2)throw new Error("Message is too long to encrypt.");c=null===a?s.getBytesSync(e):a.bytes();var y=new n.util.ByteBuffer;y.fillWithByte(0,8),y.putBytes(h),y.putBytes(c),r.start(),r.update(y.getBytes());var d=r.digest().getBytes(),b=new n.util.ByteBuffer;b.fillWithByte(0,p-e-i-2),b.putByte(1),b.putBytes(c);var v=b.getBytes(),m=p-i-1,g=o.generate(d,m),S="";for(l=0;l<m;l++)S+=String.fromCharCode(v.charCodeAt(l)^g.charCodeAt(l));var w=65280>>8*p-f&255;return(S=String.fromCharCode(S.charCodeAt(0)&~w)+S.substr(1))+d+String.fromCharCode(188)},verify:function(t,a,s){var u,l=s-1,c=Math.ceil(l/8);if(a=a.substr(-c),c<i+e+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(188!==a.charCodeAt(c-1))throw new Error("Encoded message does not end in 0xBC.");var f=c-i-1,p=a.substr(0,f),h=a.substr(f,i),y=65280>>8*c-l&255;if(0!=(p.charCodeAt(0)&y))throw new Error("Bits beyond keysize not zero as expected.");var d=o.generate(h,f),b="";for(u=0;u<f;u++)b+=String.fromCharCode(p.charCodeAt(u)^d.charCodeAt(u));b=String.fromCharCode(b.charCodeAt(0)&~y)+b.substr(1);var v=c-i-e-2;for(u=0;u<v;u++)if(0!==b.charCodeAt(u))throw new Error("Leftmost octets not zero as expected");if(1!==b.charCodeAt(v))throw new Error("Inconsistent PSS signature, 0x01 marker not found");var m=b.substr(-e),g=new n.util.ByteBuffer;return g.fillWithByte(0,8),g.putBytes(t),g.putBytes(m),r.start(),r.update(g.getBytes()),h===r.digest().getBytes()}}}},function(t,e,r){var n=r(0);r(1),n.cipher=n.cipher||{};var o=t.exports=n.cipher.modes=n.cipher.modes||{};function i(t,e){if("string"==typeof t&&(t=n.util.createBuffer(t)),n.util.isArray(t)&&t.length>4){var r=t;t=n.util.createBuffer();for(var o=0;o<r.length;++o)t.putByte(r[o])}if(t.length()<e)throw new Error("Invalid IV length; got "+t.length()+" bytes and expected "+e+" bytes.");if(!n.util.isArray(t)){var i=[],a=e/4;for(o=0;o<a;++o)i.push(t.getInt32());t=i}return t}function a(t){t[t.length-1]=t[t.length-1]+1&4294967295}function s(t){return[t/4294967296|0,4294967295&t]}o.ecb=function(t){t=t||{},this.name="ECB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},o.ecb.prototype.start=function(t){},o.ecb.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();for(this.cipher.encrypt(this._inBlock,this._outBlock),n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])},o.ecb.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();for(this.cipher.decrypt(this._inBlock,this._outBlock),n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])},o.ecb.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0},o.ecb.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return!(n>this.blockSize<<2||(t.truncate(n),0))},o.cbc=function(t){t=t||{},this.name="CBC",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},o.cbc.prototype.start=function(t){if(null===t.iv){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else{if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=i(t.iv,this.blockSize),this._prev=this._iv.slice(0)}},o.cbc.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^t.getInt32();for(this.cipher.encrypt(this._inBlock,this._outBlock),n=0;n<this._ints;++n)e.putInt32(this._outBlock[n]);this._prev=this._outBlock},o.cbc.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();for(this.cipher.decrypt(this._inBlock,this._outBlock),n=0;n<this._ints;++n)e.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)},o.cbc.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0},o.cbc.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return!(n>this.blockSize<<2||(t.truncate(n),0))},o.cfb=function(t){t=t||{},this.name="CFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0},o.cfb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=i(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},o.cfb.prototype.encrypt=function(t,e,r){var n=t.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var o=0;o<this._ints;++o)this._inBlock[o]=t.getInt32()^this._outBlock[o],e.putInt32(this._inBlock[o]);else{var i=(this.blockSize-n)%this.blockSize;for(i>0&&(i=this.blockSize-i),this._partialOutput.clear(),o=0;o<this._ints;++o)this._partialBlock[o]=t.getInt32()^this._outBlock[o],this._partialOutput.putInt32(this._partialBlock[o]);if(i>0)t.read-=this.blockSize;else for(o=0;o<this._ints;++o)this._inBlock[o]=this._partialBlock[o];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!r)return e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},o.cfb.prototype.decrypt=function(t,e,r){var n=t.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var o=0;o<this._ints;++o)this._inBlock[o]=t.getInt32(),e.putInt32(this._inBlock[o]^this._outBlock[o]);else{var i=(this.blockSize-n)%this.blockSize;for(i>0&&(i=this.blockSize-i),this._partialOutput.clear(),o=0;o<this._ints;++o)this._partialBlock[o]=t.getInt32(),this._partialOutput.putInt32(this._partialBlock[o]^this._outBlock[o]);if(i>0)t.read-=this.blockSize;else for(o=0;o<this._ints;++o)this._inBlock[o]=this._partialBlock[o];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!r)return e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},o.ofb=function(t){t=t||{},this.name="OFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0},o.ofb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=i(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},o.ofb.prototype.encrypt=function(t,e,r){var n=t.length();if(0===t.length())return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var o=0;o<this._ints;++o)e.putInt32(t.getInt32()^this._outBlock[o]),this._inBlock[o]=this._outBlock[o];else{var i=(this.blockSize-n)%this.blockSize;for(i>0&&(i=this.blockSize-i),this._partialOutput.clear(),o=0;o<this._ints;++o)this._partialOutput.putInt32(t.getInt32()^this._outBlock[o]);if(i>0)t.read-=this.blockSize;else for(o=0;o<this._ints;++o)this._inBlock[o]=this._outBlock[o];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!r)return e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},o.ofb.prototype.decrypt=o.ofb.prototype.encrypt,o.ctr=function(t){t=t||{},this.name="CTR",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0},o.ctr.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=i(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},o.ctr.prototype.encrypt=function(t,e,r){var n=t.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var o=0;o<this._ints;++o)e.putInt32(t.getInt32()^this._outBlock[o]);else{var i=(this.blockSize-n)%this.blockSize;for(i>0&&(i=this.blockSize-i),this._partialOutput.clear(),o=0;o<this._ints;++o)this._partialOutput.putInt32(t.getInt32()^this._outBlock[o]);if(i>0&&(t.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!r)return e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}a(this._inBlock)},o.ctr.prototype.decrypt=o.ctr.prototype.encrypt,o.gcm=function(t){t=t||{},this.name="GCM",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0,this._R=3774873600},o.gcm.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");var e,r=n.util.createBuffer(t.iv);if(this._cipherLength=0,e="additionalData"in t?n.util.createBuffer(t.additionalData):n.util.createBuffer(),this._tagLength="tagLength"in t?t.tagLength:128,this._tag=null,t.decrypt&&(this._tag=n.util.createBuffer(t.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var o=r.length();if(12===o)this._j0=[r.getInt32(),r.getInt32(),r.getInt32(),1];else{for(this._j0=[0,0,0,0];r.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(s(8*o)))}this._inBlock=this._j0.slice(0),a(this._inBlock),this._partialBytes=0,e=n.util.createBuffer(e),this._aDataLength=s(8*e.length());var i=e.length()%this.blockSize;for(i&&e.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];e.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()])},o.gcm.prototype.encrypt=function(t,e,r){var n=t.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize){for(var o=0;o<this._ints;++o)e.putInt32(this._outBlock[o]^=t.getInt32());this._cipherLength+=this.blockSize}else{var i=(this.blockSize-n)%this.blockSize;for(i>0&&(i=this.blockSize-i),this._partialOutput.clear(),o=0;o<this._ints;++o)this._partialOutput.putInt32(t.getInt32()^this._outBlock[o]);if(i<=0||r){if(r){var s=n%this.blockSize;this._cipherLength+=s,this._partialOutput.truncate(this.blockSize-s)}else this._cipherLength+=this.blockSize;for(o=0;o<this._ints;++o)this._outBlock[o]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!r)return t.read-=this.blockSize,e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),a(this._inBlock)},o.gcm.prototype.decrypt=function(t,e,r){var n=t.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),a(this._inBlock),this._hashBlock[0]=t.getInt32(),this._hashBlock[1]=t.getInt32(),this._hashBlock[2]=t.getInt32(),this._hashBlock[3]=t.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var o=0;o<this._ints;++o)e.putInt32(this._outBlock[o]^this._hashBlock[o]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize},o.gcm.prototype.afterFinish=function(t,e){var r=!0;e.decrypt&&e.overflow&&t.truncate(this.blockSize-e.overflow),this.tag=n.util.createBuffer();var o=this._aDataLength.concat(s(8*this._cipherLength));this._s=this.ghash(this._hashSubkey,this._s,o);var i=[];this.cipher.encrypt(this._j0,i);for(var a=0;a<this._ints;++a)this.tag.putInt32(this._s[a]^i[a]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),e.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r},o.gcm.prototype.multiply=function(t,e){for(var r=[0,0,0,0],n=e.slice(0),o=0;o<128;++o)t[o/32|0]&1<<31-o%32&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n);return r},o.gcm.prototype.pow=function(t,e){for(var r=1&t[3],n=3;n>0;--n)e[n]=t[n]>>>1|(1&t[n-1])<<31;e[0]=t[0]>>>1,r&&(e[0]^=this._R)},o.gcm.prototype.tableMultiply=function(t){for(var e=[0,0,0,0],r=0;r<32;++r){var n=t[r/8|0]>>>4*(7-r%8)&15,o=this._m[r][n];e[0]^=o[0],e[1]^=o[1],e[2]^=o[2],e[3]^=o[3]}return e},o.gcm.prototype.ghash=function(t,e,r){return e[0]^=r[0],e[1]^=r[1],e[2]^=r[2],e[3]^=r[3],this.tableMultiply(e)},o.gcm.prototype.generateHashTable=function(t,e){for(var r=8/e,n=4*r,o=16*r,i=new Array(o),a=0;a<o;++a){var s=[0,0,0,0],u=(n-1-a%n)*e;s[a/n|0]=1<<e-1<<u,i[a]=this.generateSubHashTable(this.multiply(s,t),e)}return i},o.gcm.prototype.generateSubHashTable=function(t,e){var r=1<<e,n=r>>>1,o=new Array(r);o[n]=t.slice(0);for(var i=n>>>1;i>0;)this.pow(o[2*i],o[i]=[]),i>>=1;for(i=2;i<n;){for(var a=1;a<i;++a){var s=o[i],u=o[a];o[i+a]=[s[0]^u[0],s[1]^u[1],s[2]^u[2],s[3]^u[3]]}i*=2}for(o[0]=[0,0,0,0],i=n+1;i<r;++i){var l=o[i^n];o[i]=[t[0]^l[0],t[1]^l[1],t[2]^l[2],t[3]^l[3]]}return o}},function(t,e,r){var n=r(0);r(3),r(8),r(14),r(7),r(21),r(2),r(9),r(1);var o=function(t,e,r,o){var i=n.util.createBuffer(),a=t.length>>1,s=a+(1&t.length),u=t.substr(0,s),l=t.substr(a,s),c=n.util.createBuffer(),f=n.hmac.create();r=e+r;var p=Math.ceil(o/16),h=Math.ceil(o/20);f.start("MD5",u);var y=n.util.createBuffer();c.putBytes(r);for(var d=0;d<p;++d)f.start(null,null),f.update(c.getBytes()),c.putBuffer(f.digest()),f.start(null,null),f.update(c.bytes()+r),y.putBuffer(f.digest());f.start("SHA1",l);var b=n.util.createBuffer();for(c.clear(),c.putBytes(r),d=0;d<h;++d)f.start(null,null),f.update(c.getBytes()),c.putBuffer(f.digest()),f.start(null,null),f.update(c.bytes()+r),b.putBuffer(f.digest());return i.putBytes(n.util.xorBytes(y.getBytes(),b.getBytes(),o)),i},i=function(t,e,r){var o=!1;try{var i=t.deflate(e.fragment.getBytes());e.fragment=n.util.createBuffer(i),e.length=i.length,o=!0}catch(t){}return o},a=function(t,e,r){var o=!1;try{var i=t.inflate(e.fragment.getBytes());e.fragment=n.util.createBuffer(i),e.length=i.length,o=!0}catch(t){}return o},u=function(t,e){var r=0;switch(e){case 1:r=t.getByte();break;case 2:r=t.getInt16();break;case 3:r=t.getInt24();break;case 4:r=t.getInt32()}return n.util.createBuffer(t.getBytes(r))},l=function(t,e,r){t.putInt(r.length(),e<<3),t.putBuffer(r)},c={Versions:{TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}}};c.SupportedVersions=[c.Versions.TLS_1_1,c.Versions.TLS_1_0],c.Version=c.SupportedVersions[0],c.MaxFragment=15360,c.ConnectionEnd={server:0,client:1},c.PRFAlgorithm={tls_prf_sha256:0},c.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2},c.CipherType={stream:0,block:1,aead:2},c.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4},c.CompressionMethod={none:0,deflate:1},c.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24},c.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20},c.Alert={},c.Alert.Level={warning:1,fatal:2},c.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100},c.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2},c.CipherSuites={},c.getCipherSuite=function(t){var e=null;for(var r in c.CipherSuites){var n=c.CipherSuites[r];if(n.id[0]===t.charCodeAt(0)&&n.id[1]===t.charCodeAt(1)){e=n;break}}return e},c.handleUnexpected=function(t,e){!t.open&&t.entity===c.ConnectionEnd.client||t.error(t,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.unexpected_message}})},c.handleHelloRequest=function(t,e,r){!t.handshaking&&t.handshakes>0&&(c.queue(t,c.createAlert(t,{level:c.Alert.Level.warning,description:c.Alert.Description.no_renegotiation})),c.flush(t)),t.process()},c.parseHelloMessage=function(t,e,r){var o=null,i=t.entity===c.ConnectionEnd.client;if(r<38)t.error(t,{message:i?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.illegal_parameter}});else{var a=e.fragment,s=a.length();if(o={version:{major:a.getByte(),minor:a.getByte()},random:n.util.createBuffer(a.getBytes(32)),session_id:u(a,1),extensions:[]},i?(o.cipher_suite=a.getBytes(2),o.compression_method=a.getByte()):(o.cipher_suites=u(a,2),o.compression_methods=u(a,1)),(s=r-(s-a.length()))>0){for(var l=u(a,2);l.length()>0;)o.extensions.push({type:[l.getByte(),l.getByte()],data:u(l,2)});if(!i)for(var f=0;f<o.extensions.length;++f){var p=o.extensions[f];if(0===p.type[0]&&0===p.type[1])for(var h=u(p.data,2);h.length()>0&&0===h.getByte();)t.session.extensions.server_name.serverNameList.push(u(h,2).getBytes())}}if(t.session.version&&(o.version.major!==t.session.version.major||o.version.minor!==t.session.version.minor))return t.error(t,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.protocol_version}});if(i)t.session.cipherSuite=c.getCipherSuite(o.cipher_suite);else for(var y=n.util.createBuffer(o.cipher_suites.bytes());y.length()>0&&(t.session.cipherSuite=c.getCipherSuite(y.getBytes(2)),null===t.session.cipherSuite););if(null===t.session.cipherSuite)return t.error(t,{message:"No cipher suites in common.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.handshake_failure},cipherSuite:n.util.bytesToHex(o.cipher_suite)});t.session.compressionMethod=i?o.compression_method:c.CompressionMethod.none}return o},c.createSecurityParameters=function(t,e){var r=t.entity===c.ConnectionEnd.client,n=e.random.bytes(),o=r?t.session.sp.client_random:n,i=r?n:c.createRandom().getBytes();t.session.sp={entity:t.entity,prf_algorithm:c.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:t.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:o,server_random:i}},c.handleServerHello=function(t,e,r){var n=c.parseHelloMessage(t,e,r);if(!t.fail){if(!(n.version.minor<=t.version.minor))return t.error(t,{message:"Incompatible TLS version.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.protocol_version}});t.version.minor=n.version.minor,t.session.version=t.version;var o=n.session_id.bytes();o.length>0&&o===t.session.id?(t.expect=d,t.session.resuming=!0,t.session.sp.server_random=n.random.bytes()):(t.expect=f,t.session.resuming=!1,c.createSecurityParameters(t,n)),t.session.id=o,t.process()}},c.handleClientHello=function(t,e,r){var o=c.parseHelloMessage(t,e,r);if(!t.fail){var i=o.session_id.bytes(),a=null;if(t.sessionCache&&(null===(a=t.sessionCache.getSession(i))?i="":(a.version.major!==o.version.major||a.version.minor>o.version.minor)&&(a=null,i="")),0===i.length&&(i=n.random.getBytes(32)),t.session.id=i,t.session.clientHelloVersion=o.version,t.session.sp={},a)t.version=t.session.version=a.version,t.session.sp=a.sp;else{for(var s,u=1;u<c.SupportedVersions.length&&!((s=c.SupportedVersions[u]).minor<=o.version.minor);++u);t.version={major:s.major,minor:s.minor},t.session.version=t.version}null!==a?(t.expect=O,t.session.resuming=!0,t.session.sp.client_random=o.random.bytes()):(t.expect=!1!==t.verifyClient?g:S,t.session.resuming=!1,c.createSecurityParameters(t,o)),t.open=!0,c.queue(t,c.createRecord(t,{type:c.ContentType.handshake,data:c.createServerHello(t)})),t.session.resuming?(c.queue(t,c.createRecord(t,{type:c.ContentType.change_cipher_spec,data:c.createChangeCipherSpec()})),t.state.pending=c.createConnectionState(t),t.state.current.write=t.state.pending.write,c.queue(t,c.createRecord(t,{type:c.ContentType.handshake,data:c.createFinished(t)}))):(c.queue(t,c.createRecord(t,{type:c.ContentType.handshake,data:c.createCertificate(t)})),t.fail||(c.queue(t,c.createRecord(t,{type:c.ContentType.handshake,data:c.createServerKeyExchange(t)})),!1!==t.verifyClient&&c.queue(t,c.createRecord(t,{type:c.ContentType.handshake,data:c.createCertificateRequest(t)})),c.queue(t,c.createRecord(t,{type:c.ContentType.handshake,data:c.createServerHelloDone(t)})))),c.flush(t),t.process()}},c.handleCertificate=function(t,e,r){if(r<3)return t.error(t,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.illegal_parameter}});var o,i,a=e.fragment,s={certificate_list:u(a,3)},l=[];try{for(;s.certificate_list.length()>0;)o=u(s.certificate_list,3),i=n.asn1.fromDer(o),o=n.pki.certificateFromAsn1(i,!0),l.push(o)}catch(e){return t.error(t,{message:"Could not parse certificate list.",cause:e,send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.bad_certificate}})}var f=t.entity===c.ConnectionEnd.client;!f&&!0!==t.verifyClient||0!==l.length?0===l.length?t.expect=f?p:S:(f?t.session.serverCertificate=l[0]:t.session.clientCertificate=l[0],c.verifyCertificateChain(t,l)&&(t.expect=f?p:S)):t.error(t,{message:f?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.illegal_parameter}}),t.process()},c.handleServerKeyExchange=function(t,e,r){if(r>0)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.unsupported_certificate}});t.expect=h,t.process()},c.handleClientKeyExchange=function(t,e,r){if(r<48)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.unsupported_certificate}});var o=e.fragment,i={enc_pre_master_secret:u(o,2).getBytes()},a=null;if(t.getPrivateKey)try{a=t.getPrivateKey(t,t.session.serverCertificate),a=n.pki.privateKeyFromPem(a)}catch(e){t.error(t,{message:"Could not get private key.",cause:e,send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.internal_error}})}if(null===a)return t.error(t,{message:"No private key set.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.internal_error}});try{var s=t.session.sp;s.pre_master_secret=a.decrypt(i.enc_pre_master_secret);var l=t.session.clientHelloVersion;if(l.major!==s.pre_master_secret.charCodeAt(0)||l.minor!==s.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch(t){s.pre_master_secret=n.random.getBytes(48)}t.expect=O,null!==t.session.clientCertificate&&(t.expect=w),t.process()},c.handleCertificateRequest=function(t,e,r){if(r<3)return t.error(t,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.illegal_parameter}});var n=e.fragment,o={certificate_types:u(n,1),certificate_authorities:u(n,2)};t.session.certificateRequest=o,t.expect=y,t.process()},c.handleCertificateVerify=function(t,e,r){if(r<2)return t.error(t,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.illegal_parameter}});var o=e.fragment;o.read-=4;var i=o.bytes();o.read+=4;var a={signature:u(o,2).getBytes()},s=n.util.createBuffer();s.putBuffer(t.session.md5.digest()),s.putBuffer(t.session.sha1.digest()),s=s.getBytes();try{if(!t.session.clientCertificate.publicKey.verify(s,a.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");t.session.md5.update(i),t.session.sha1.update(i)}catch(e){return t.error(t,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.handshake_failure}})}t.expect=O,t.process()},c.handleServerHelloDone=function(t,e,r){if(r>0)return t.error(t,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.record_overflow}});if(null===t.serverCertificate){var o={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.insufficient_security}},i=t.verify(t,o.alert.description,0,[]);if(!0!==i)return(i||0===i)&&("object"!=s(i)||n.util.isArray(i)?"number"==typeof i&&(o.alert.description=i):(i.message&&(o.message=i.message),i.alert&&(o.alert.description=i.alert))),t.error(t,o)}null!==t.session.certificateRequest&&(e=c.createRecord(t,{type:c.ContentType.handshake,data:c.createCertificate(t)}),c.queue(t,e)),e=c.createRecord(t,{type:c.ContentType.handshake,data:c.createClientKeyExchange(t)}),c.queue(t,e),t.expect=m;var a=function(t,e){null!==t.session.certificateRequest&&null!==t.session.clientCertificate&&c.queue(t,c.createRecord(t,{type:c.ContentType.handshake,data:c.createCertificateVerify(t,e)})),c.queue(t,c.createRecord(t,{type:c.ContentType.change_cipher_spec,data:c.createChangeCipherSpec()})),t.state.pending=c.createConnectionState(t),t.state.current.write=t.state.pending.write,c.queue(t,c.createRecord(t,{type:c.ContentType.handshake,data:c.createFinished(t)})),t.expect=d,c.flush(t),t.process()};if(null===t.session.certificateRequest||null===t.session.clientCertificate)return a(t,null);c.getClientSignature(t,a)},c.handleChangeCipherSpec=function(t,e){if(1!==e.fragment.getByte())return t.error(t,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.illegal_parameter}});var r=t.entity===c.ConnectionEnd.client;(t.session.resuming&&r||!t.session.resuming&&!r)&&(t.state.pending=c.createConnectionState(t)),t.state.current.read=t.state.pending.read,(!t.session.resuming&&r||t.session.resuming&&!r)&&(t.state.pending=null),t.expect=r?b:_,t.process()},c.handleFinished=function(t,e,r){var i=e.fragment;i.read-=4;var a=i.bytes();i.read+=4;var s=e.fragment.getBytes();(i=n.util.createBuffer()).putBuffer(t.session.md5.digest()),i.putBuffer(t.session.sha1.digest());var u=t.entity===c.ConnectionEnd.client,l=u?"server finished":"client finished",f=t.session.sp;if((i=o(f.master_secret,l,i.getBytes(),12)).getBytes()!==s)return t.error(t,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.decrypt_error}});t.session.md5.update(a),t.session.sha1.update(a),(t.session.resuming&&u||!t.session.resuming&&!u)&&(c.queue(t,c.createRecord(t,{type:c.ContentType.change_cipher_spec,data:c.createChangeCipherSpec()})),t.state.current.write=t.state.pending.write,t.state.pending=null,c.queue(t,c.createRecord(t,{type:c.ContentType.handshake,data:c.createFinished(t)}))),t.expect=u?v:P,t.handshaking=!1,++t.handshakes,t.peerCertificate=u?t.session.serverCertificate:t.session.clientCertificate,c.flush(t),t.isConnected=!0,t.connected(t),t.process()},c.handleAlert=function(t,e){var r,n=e.fragment,o={level:n.getByte(),description:n.getByte()};switch(o.description){case c.Alert.Description.close_notify:r="Connection closed.";break;case c.Alert.Description.unexpected_message:r="Unexpected message.";break;case c.Alert.Description.bad_record_mac:r="Bad record MAC.";break;case c.Alert.Description.decryption_failed:r="Decryption failed.";break;case c.Alert.Description.record_overflow:r="Record overflow.";break;case c.Alert.Description.decompression_failure:r="Decompression failed.";break;case c.Alert.Description.handshake_failure:r="Handshake failure.";break;case c.Alert.Description.bad_certificate:r="Bad certificate.";break;case c.Alert.Description.unsupported_certificate:r="Unsupported certificate.";break;case c.Alert.Description.certificate_revoked:r="Certificate revoked.";break;case c.Alert.Description.certificate_expired:r="Certificate expired.";break;case c.Alert.Description.certificate_unknown:r="Certificate unknown.";break;case c.Alert.Description.illegal_parameter:r="Illegal parameter.";break;case c.Alert.Description.unknown_ca:r="Unknown certificate authority.";break;case c.Alert.Description.access_denied:r="Access denied.";break;case c.Alert.Description.decode_error:r="Decode error.";break;case c.Alert.Description.decrypt_error:r="Decrypt error.";break;case c.Alert.Description.export_restriction:r="Export restriction.";break;case c.Alert.Description.protocol_version:r="Unsupported protocol version.";break;case c.Alert.Description.insufficient_security:r="Insufficient security.";break;case c.Alert.Description.internal_error:r="Internal error.";break;case c.Alert.Description.user_canceled:r="User canceled.";break;case c.Alert.Description.no_renegotiation:r="Renegotiation not supported.";break;default:r="Unknown error."}if(o.description===c.Alert.Description.close_notify)return t.close();t.error(t,{message:r,send:!1,origin:t.entity===c.ConnectionEnd.client?"server":"client",alert:o}),t.process()},c.handleHandshake=function(t,e){var r=e.fragment,o=r.getByte(),i=r.getInt24();if(i>r.length())return t.fragmented=e,e.fragment=n.util.createBuffer(),r.read-=4,t.process();t.fragmented=null,r.read-=4;var a=r.bytes(i+4);r.read+=4,o in F[t.entity][t.expect]?(t.entity!==c.ConnectionEnd.server||t.open||t.fail||(t.handshaking=!0,t.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:n.md.md5.create(),sha1:n.md.sha1.create()}),o!==c.HandshakeType.hello_request&&o!==c.HandshakeType.certificate_verify&&o!==c.HandshakeType.finished&&(t.session.md5.update(a),t.session.sha1.update(a)),F[t.entity][t.expect][o](t,e,i)):c.handleUnexpected(t,e)},c.handleApplicationData=function(t,e){t.data.putBuffer(e.fragment),t.dataReady(t),t.process()},c.handleHeartbeat=function(t,e){var r=e.fragment,o=r.getByte(),i=r.getInt16(),a=r.getBytes(i);if(o===c.HeartbeatMessageType.heartbeat_request){if(t.handshaking||i>a.length)return t.process();c.queue(t,c.createRecord(t,{type:c.ContentType.heartbeat,data:c.createHeartbeat(c.HeartbeatMessageType.heartbeat_response,a)})),c.flush(t)}else if(o===c.HeartbeatMessageType.heartbeat_response){if(a!==t.expectedHeartbeatPayload)return t.process();t.heartbeatReceived&&t.heartbeatReceived(t,n.util.createBuffer(a))}t.process()};var f=1,p=2,h=3,y=4,d=5,b=6,v=7,m=8,g=1,S=2,w=3,O=4,_=5,P=6,E=c.handleUnexpected,C=c.handleChangeCipherSpec,T=c.handleAlert,j=c.handleHandshake,k=c.handleApplicationData,x=c.handleHeartbeat,A=[];A[c.ConnectionEnd.client]=[[E,T,j,E,x],[E,T,j,E,x],[E,T,j,E,x],[E,T,j,E,x],[E,T,j,E,x],[C,T,E,E,x],[E,T,j,E,x],[E,T,j,k,x],[E,T,j,E,x]],A[c.ConnectionEnd.server]=[[E,T,j,E,x],[E,T,j,E,x],[E,T,j,E,x],[E,T,j,E,x],[C,T,E,E,x],[E,T,j,E,x],[E,T,j,k,x],[E,T,j,E,x]];var I=c.handleHelloRequest,N=c.handleServerHello,R=c.handleCertificate,M=c.handleServerKeyExchange,L=c.handleCertificateRequest,B=c.handleServerHelloDone,D=c.handleFinished,F=[];F[c.ConnectionEnd.client]=[[E,E,N,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E],[I,E,E,E,E,E,E,E,E,E,E,R,M,L,B,E,E,E,E,E,E],[I,E,E,E,E,E,E,E,E,E,E,E,M,L,B,E,E,E,E,E,E],[I,E,E,E,E,E,E,E,E,E,E,E,E,L,B,E,E,E,E,E,E],[I,E,E,E,E,E,E,E,E,E,E,E,E,E,B,E,E,E,E,E,E],[I,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E],[I,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,D],[I,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E],[I,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E]];var U=c.handleClientHello,G=c.handleClientKeyExchange,V=c.handleCertificateVerify;F[c.ConnectionEnd.server]=[[E,U,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E],[E,E,E,E,E,E,E,E,E,E,E,R,E,E,E,E,E,E,E,E,E],[E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,G,E,E,E,E],[E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,V,E,E,E,E,E],[E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E],[E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,D],[E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E],[E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E]],c.generateKeys=function(t,e){var r=o,n=e.client_random+e.server_random;t.session.resuming||(e.master_secret=r(e.pre_master_secret,"master secret",n,48).bytes(),e.pre_master_secret=null),n=e.server_random+e.client_random;var i=2*e.mac_key_length+2*e.enc_key_length,a=t.version.major===c.Versions.TLS_1_0.major&&t.version.minor===c.Versions.TLS_1_0.minor;a&&(i+=2*e.fixed_iv_length);var s=r(e.master_secret,"key expansion",n,i),u={client_write_MAC_key:s.getBytes(e.mac_key_length),server_write_MAC_key:s.getBytes(e.mac_key_length),client_write_key:s.getBytes(e.enc_key_length),server_write_key:s.getBytes(e.enc_key_length)};return a&&(u.client_write_IV=s.getBytes(e.fixed_iv_length),u.server_write_IV=s.getBytes(e.fixed_iv_length)),u},c.createConnectionState=function(t){var e=t.entity===c.ConnectionEnd.client,r=function(){var t={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:function(t){return!0},compressionState:null,compressFunction:function(t){return!0},updateSequenceNumber:function(){4294967295===t.sequenceNumber[1]?(t.sequenceNumber[1]=0,++t.sequenceNumber[0]):++t.sequenceNumber[1]}};return t},n={read:r(),write:r()};if(n.read.update=function(t,e){return n.read.cipherFunction(e,n.read)?n.read.compressFunction(t,e,n.read)||t.error(t,{message:"Could not decompress record.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.decompression_failure}}):t.error(t,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.bad_record_mac}}),!t.fail},n.write.update=function(t,e){return n.write.compressFunction(t,e,n.write)?n.write.cipherFunction(e,n.write)||t.error(t,{message:"Could not encrypt record.",send:!1,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.internal_error}}):t.error(t,{message:"Could not compress record.",send:!1,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.internal_error}}),!t.fail},t.session){var o=t.session.sp;switch(t.session.cipherSuite.initSecurityParameters(o),o.keys=c.generateKeys(t,o),n.read.macKey=e?o.keys.server_write_MAC_key:o.keys.client_write_MAC_key,n.write.macKey=e?o.keys.client_write_MAC_key:o.keys.server_write_MAC_key,t.session.cipherSuite.initConnectionState(n,t,o),o.compression_algorithm){case c.CompressionMethod.none:break;case c.CompressionMethod.deflate:n.read.compressFunction=a,n.write.compressFunction=i;break;default:throw new Error("Unsupported compression algorithm.")}}return n},c.createRandom=function(){var t=new Date,e=+t+6e4*t.getTimezoneOffset(),r=n.util.createBuffer();return r.putInt32(e),r.putBytes(n.random.getBytes(28)),r},c.createRecord=function(t,e){return e.data?{type:e.type,version:{major:t.version.major,minor:t.version.minor},length:e.data.length(),fragment:e.data}:null},c.createAlert=function(t,e){var r=n.util.createBuffer();return r.putByte(e.level),r.putByte(e.description),c.createRecord(t,{type:c.ContentType.alert,data:r})},c.createClientHello=function(t){t.session.clientHelloVersion={major:t.version.major,minor:t.version.minor};for(var e=n.util.createBuffer(),r=0;r<t.cipherSuites.length;++r){var o=t.cipherSuites[r];e.putByte(o.id[0]),e.putByte(o.id[1])}var i=e.length(),a=n.util.createBuffer();a.putByte(c.CompressionMethod.none);var s=a.length(),u=n.util.createBuffer();if(t.virtualHost){var f=n.util.createBuffer();f.putByte(0),f.putByte(0);var p=n.util.createBuffer();p.putByte(0),l(p,2,n.util.createBuffer(t.virtualHost));var h=n.util.createBuffer();l(h,2,p),l(f,2,h),u.putBuffer(f)}var y=u.length();y>0&&(y+=2);var d=t.session.id,b=d.length+1+2+4+28+2+i+1+s+y,v=n.util.createBuffer();return v.putByte(c.HandshakeType.client_hello),v.putInt24(b),v.putByte(t.version.major),v.putByte(t.version.minor),v.putBytes(t.session.sp.client_random),l(v,1,n.util.createBuffer(d)),l(v,2,e),l(v,1,a),y>0&&l(v,2,u),v},c.createServerHello=function(t){var e=t.session.id,r=e.length+1+2+4+28+2+1,o=n.util.createBuffer();return o.putByte(c.HandshakeType.server_hello),o.putInt24(r),o.putByte(t.version.major),o.putByte(t.version.minor),o.putBytes(t.session.sp.server_random),l(o,1,n.util.createBuffer(e)),o.putByte(t.session.cipherSuite.id[0]),o.putByte(t.session.cipherSuite.id[1]),o.putByte(t.session.compressionMethod),o},c.createCertificate=function(t){var e,r=t.entity===c.ConnectionEnd.client,o=null;t.getCertificate&&(e=r?t.session.certificateRequest:t.session.extensions.server_name.serverNameList,o=t.getCertificate(t,e));var i=n.util.createBuffer();if(null!==o)try{n.util.isArray(o)||(o=[o]);for(var a=null,s=0;s<o.length;++s){var u=n.pem.decode(o[s])[0];if("CERTIFICATE"!==u.type&&"X509 CERTIFICATE"!==u.type&&"TRUSTED CERTIFICATE"!==u.type){var f=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw f.headerType=u.type,f}if(u.procType&&"ENCRYPTED"===u.procType.type)throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var p=n.util.createBuffer(u.body);null===a&&(a=n.asn1.fromDer(p.bytes(),!1));var h=n.util.createBuffer();l(h,3,p),i.putBuffer(h)}o=n.pki.certificateFromAsn1(a),r?t.session.clientCertificate=o:t.session.serverCertificate=o}catch(e){return t.error(t,{message:"Could not send certificate list.",cause:e,send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.bad_certificate}})}var y=3+i.length(),d=n.util.createBuffer();return d.putByte(c.HandshakeType.certificate),d.putInt24(y),l(d,3,i),d},c.createClientKeyExchange=function(t){var e=n.util.createBuffer();e.putByte(t.session.clientHelloVersion.major),e.putByte(t.session.clientHelloVersion.minor),e.putBytes(n.random.getBytes(46));var r=t.session.sp;r.pre_master_secret=e.getBytes();var o=(e=t.session.serverCertificate.publicKey.encrypt(r.pre_master_secret)).length+2,i=n.util.createBuffer();return i.putByte(c.HandshakeType.client_key_exchange),i.putInt24(o),i.putInt16(e.length),i.putBytes(e),i},c.createServerKeyExchange=function(t){return n.util.createBuffer()},c.getClientSignature=function(t,e){var r=n.util.createBuffer();r.putBuffer(t.session.md5.digest()),r.putBuffer(t.session.sha1.digest()),r=r.getBytes(),t.getSignature=t.getSignature||function(t,e,r){var o=null;if(t.getPrivateKey)try{o=t.getPrivateKey(t,t.session.clientCertificate),o=n.pki.privateKeyFromPem(o)}catch(e){t.error(t,{message:"Could not get private key.",cause:e,send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.internal_error}})}null===o?t.error(t,{message:"No private key set.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.internal_error}}):e=o.sign(e,null),r(t,e)},t.getSignature(t,r,e)},c.createCertificateVerify=function(t,e){var r=e.length+2,o=n.util.createBuffer();return o.putByte(c.HandshakeType.certificate_verify),o.putInt24(r),o.putInt16(e.length),o.putBytes(e),o},c.createCertificateRequest=function(t){var e=n.util.createBuffer();e.putByte(1);var r=n.util.createBuffer();for(var o in t.caStore.certs){var i=t.caStore.certs[o],a=n.pki.distinguishedNameToAsn1(i.subject),s=n.asn1.toDer(a);r.putInt16(s.length()),r.putBuffer(s)}var u=1+e.length()+2+r.length(),f=n.util.createBuffer();return f.putByte(c.HandshakeType.certificate_request),f.putInt24(u),l(f,1,e),l(f,2,r),f},c.createServerHelloDone=function(t){var e=n.util.createBuffer();return e.putByte(c.HandshakeType.server_hello_done),e.putInt24(0),e},c.createChangeCipherSpec=function(){var t=n.util.createBuffer();return t.putByte(1),t},c.createFinished=function(t){var e=n.util.createBuffer();e.putBuffer(t.session.md5.digest()),e.putBuffer(t.session.sha1.digest());var r=t.entity===c.ConnectionEnd.client,i=t.session.sp,a=r?"client finished":"server finished";e=o(i.master_secret,a,e.getBytes(),12);var s=n.util.createBuffer();return s.putByte(c.HandshakeType.finished),s.putInt24(e.length()),s.putBuffer(e),s},c.createHeartbeat=function(t,e,r){void 0===r&&(r=e.length);var o=n.util.createBuffer();o.putByte(t),o.putInt16(r),o.putBytes(e);var i=o.length(),a=Math.max(16,i-r-3);return o.putBytes(n.random.getBytes(a)),o},c.queue=function(t,e){if(e&&(0!==e.fragment.length()||e.type!==c.ContentType.handshake&&e.type!==c.ContentType.alert&&e.type!==c.ContentType.change_cipher_spec)){if(e.type===c.ContentType.handshake){var r=e.fragment.bytes();t.session.md5.update(r),t.session.sha1.update(r),r=null}var o;if(e.fragment.length()<=c.MaxFragment)o=[e];else{o=[];for(var i=e.fragment.bytes();i.length>c.MaxFragment;)o.push(c.createRecord(t,{type:e.type,data:n.util.createBuffer(i.slice(0,c.MaxFragment))})),i=i.slice(c.MaxFragment);i.length>0&&o.push(c.createRecord(t,{type:e.type,data:n.util.createBuffer(i)}))}for(var a=0;a<o.length&&!t.fail;++a){var s=o[a];t.state.current.write.update(t,s)&&t.records.push(s)}}},c.flush=function(t){for(var e=0;e<t.records.length;++e){var r=t.records[e];t.tlsData.putByte(r.type),t.tlsData.putByte(r.version.major),t.tlsData.putByte(r.version.minor),t.tlsData.putInt16(r.fragment.length()),t.tlsData.putBuffer(t.records[e].fragment)}return t.records=[],t.tlsDataReady(t)};var q=function(t){switch(t){case!0:return!0;case n.pki.certificateError.bad_certificate:return c.Alert.Description.bad_certificate;case n.pki.certificateError.unsupported_certificate:return c.Alert.Description.unsupported_certificate;case n.pki.certificateError.certificate_revoked:return c.Alert.Description.certificate_revoked;case n.pki.certificateError.certificate_expired:return c.Alert.Description.certificate_expired;case n.pki.certificateError.certificate_unknown:return c.Alert.Description.certificate_unknown;case n.pki.certificateError.unknown_ca:return c.Alert.Description.unknown_ca;default:return c.Alert.Description.bad_certificate}};for(var H in c.verifyCertificateChain=function(t,e){try{var r={};for(var o in t.verifyOptions)r[o]=t.verifyOptions[o];r.verify=function(e,r,o){q(e);var i=t.verify(t,e,r,o);if(!0!==i){if("object"==s(i)&&!n.util.isArray(i)){var a=new Error("The application rejected the certificate.");throw a.send=!0,a.alert={level:c.Alert.Level.fatal,description:c.Alert.Description.bad_certificate},i.message&&(a.message=i.message),i.alert&&(a.alert.description=i.alert),a}i!==e&&(i=function(t){switch(i){case!0:return!0;case c.Alert.Description.bad_certificate:return n.pki.certificateError.bad_certificate;case c.Alert.Description.unsupported_certificate:return n.pki.certificateError.unsupported_certificate;case c.Alert.Description.certificate_revoked:return n.pki.certificateError.certificate_revoked;case c.Alert.Description.certificate_expired:return n.pki.certificateError.certificate_expired;case c.Alert.Description.certificate_unknown:return n.pki.certificateError.certificate_unknown;case c.Alert.Description.unknown_ca:return n.pki.certificateError.unknown_ca;default:return n.pki.certificateError.bad_certificate}}())}return i},n.pki.verifyCertificateChain(t.caStore,e,r)}catch(e){var i=e;("object"!=s(i)||n.util.isArray(i))&&(i={send:!0,alert:{level:c.Alert.Level.fatal,description:q(e)}}),"send"in i||(i.send=!0),"alert"in i||(i.alert={level:c.Alert.Level.fatal,description:q(i.error)}),t.error(t,i)}return!t.fail},c.createSessionCache=function(t,e){var r=null;if(t&&t.getSession&&t.setSession&&t.order)r=t;else{for(var o in(r={}).cache=t||{},r.capacity=Math.max(e||100,1),r.order=[],t)r.order.length<=e?r.order.push(o):delete t[o];r.getSession=function(t){var e=null,o=null;if(t?o=n.util.bytesToHex(t):r.order.length>0&&(o=r.order[0]),null!==o&&o in r.cache)for(var i in e=r.cache[o],delete r.cache[o],r.order)if(r.order[i]===o){r.order.splice(i,1);break}return e},r.setSession=function(t,e){if(r.order.length===r.capacity){var o=r.order.shift();delete r.cache[o]}o=n.util.bytesToHex(t),r.order.push(o),r.cache[o]=e}}return r},c.createConnection=function(t){var e;e=t.caStore?n.util.isArray(t.caStore)?n.pki.createCaStore(t.caStore):t.caStore:n.pki.createCaStore();var r=t.cipherSuites||null;if(null===r)for(var o in r=[],c.CipherSuites)r.push(c.CipherSuites[o]);var i=t.server?c.ConnectionEnd.server:c.ConnectionEnd.client,a=t.sessionCache?c.createSessionCache(t.sessionCache):null,s={version:{major:c.Version.major,minor:c.Version.minor},entity:i,sessionId:t.sessionId,caStore:e,sessionCache:a,cipherSuites:r,connected:t.connected,virtualHost:t.virtualHost||null,verifyClient:t.verifyClient||!1,verify:t.verify||function(t,e,r,n){return e},verifyOptions:t.verifyOptions||{},getCertificate:t.getCertificate||null,getPrivateKey:t.getPrivateKey||null,getSignature:t.getSignature||null,input:n.util.createBuffer(),tlsData:n.util.createBuffer(),data:n.util.createBuffer(),tlsDataReady:t.tlsDataReady,dataReady:t.dataReady,heartbeatReceived:t.heartbeatReceived,closed:t.closed,error:function(e,r){r.origin=r.origin||(e.entity===c.ConnectionEnd.client?"client":"server"),r.send&&(c.queue(e,c.createAlert(e,r.alert)),c.flush(e));var n=!1!==r.fatal;n&&(e.fail=!0),t.error(e,r),n&&e.close(!1)},deflate:t.deflate||null,inflate:t.inflate||null,reset:function(t){s.version={major:c.Version.major,minor:c.Version.minor},s.record=null,s.session=null,s.peerCertificate=null,s.state={pending:null,current:null},s.expect=(s.entity,c.ConnectionEnd.client,0),s.fragmented=null,s.records=[],s.open=!1,s.handshakes=0,s.handshaking=!1,s.isConnected=!1,s.fail=!(t||void 0===t),s.input.clear(),s.tlsData.clear(),s.data.clear(),s.state.current=c.createConnectionState(s)}};return s.reset(),s.handshake=function(t){if(s.entity!==c.ConnectionEnd.client)s.error(s,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(s.handshaking)s.error(s,{message:"Handshake already in progress.",fatal:!1});else{s.fail&&!s.open&&0===s.handshakes&&(s.fail=!1),s.handshaking=!0;var e=null;(t=t||"").length>0&&(s.sessionCache&&(e=s.sessionCache.getSession(t)),null===e&&(t="")),0===t.length&&s.sessionCache&&null!==(e=s.sessionCache.getSession())&&(t=e.id),s.session={id:t,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:n.md.md5.create(),sha1:n.md.sha1.create()},e&&(s.version=e.version,s.session.sp=e.sp),s.session.sp.client_random=c.createRandom().getBytes(),s.open=!0,c.queue(s,c.createRecord(s,{type:c.ContentType.handshake,data:c.createClientHello(s)})),c.flush(s)}},s.process=function(t){var e=0;return t&&s.input.putBytes(t),s.fail||(null!==s.record&&s.record.ready&&s.record.fragment.isEmpty()&&(s.record=null),null===s.record&&(e=function(t){var e=0,r=t.input,o=r.length();if(o<5)e=5-o;else{t.record={type:r.getByte(),version:{major:r.getByte(),minor:r.getByte()},length:r.getInt16(),fragment:n.util.createBuffer(),ready:!1};var i=t.record.version.major===t.version.major;i&&t.session&&t.session.version&&(i=t.record.version.minor===t.version.minor),i||t.error(t,{message:"Incompatible TLS version.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.protocol_version}})}return e}(s)),s.fail||null===s.record||s.record.ready||(e=function(t){var e=0,r=t.input,n=r.length();return n<t.record.length?e=t.record.length-n:(t.record.fragment.putBytes(r.getBytes(t.record.length)),r.compact(),t.state.current.read.update(t,t.record)&&(null!==t.fragmented&&(t.fragmented.type===t.record.type?(t.fragmented.fragment.putBuffer(t.record.fragment),t.record=t.fragmented):t.error(t,{message:"Invalid fragmented record.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.unexpected_message}})),t.record.ready=!0)),e}(s)),!s.fail&&null!==s.record&&s.record.ready&&function(t,e){var r=e.type-c.ContentType.change_cipher_spec,n=A[t.entity][t.expect];r in n?n[r](t,e):c.handleUnexpected(t,e)}(s,s.record)),e},s.prepare=function(t){return c.queue(s,c.createRecord(s,{type:c.ContentType.application_data,data:n.util.createBuffer(t)})),c.flush(s)},s.prepareHeartbeatRequest=function(t,e){return t instanceof n.util.ByteBuffer&&(t=t.bytes()),void 0===e&&(e=t.length),s.expectedHeartbeatPayload=t,c.queue(s,c.createRecord(s,{type:c.ContentType.heartbeat,data:c.createHeartbeat(c.HeartbeatMessageType.heartbeat_request,t,e)})),c.flush(s)},s.close=function(t){if(!s.fail&&s.sessionCache&&s.session){var e={id:s.session.id,version:s.session.version,sp:s.session.sp};e.sp.keys=null,s.sessionCache.setSession(e.id,e)}s.open&&(s.open=!1,s.input.clear(),(s.isConnected||s.handshaking)&&(s.isConnected=s.handshaking=!1,c.queue(s,c.createAlert(s,{level:c.Alert.Level.warning,description:c.Alert.Description.close_notify})),c.flush(s)),s.closed(s)),s.reset(t)},s},t.exports=n.tls=n.tls||{},c)"function"!=typeof c[H]&&(n.tls[H]=c[H]);n.tls.prf_tls1=o,n.tls.hmac_sha1=function(t,e,r){var o=n.hmac.create();o.start("SHA1",t);var i=n.util.createBuffer();return i.putInt32(e[0]),i.putInt32(e[1]),i.putByte(r.type),i.putByte(r.version.major),i.putByte(r.version.minor),i.putInt16(r.length),i.putBytes(r.fragment.bytes()),o.update(i.getBytes()),o.digest().getBytes()},n.tls.createSessionCache=c.createSessionCache,n.tls.createConnection=c.createConnection},function(t,e,r){var n=r(0);r(3),r(6),r(22),r(7),r(15),r(28),r(18),r(11),r(1),r(17);var o=n.asn1,i=t.exports=n.pki=n.pki||{};i.pemToDer=function(t){var e=n.pem.decode(t)[0];if(e.procType&&"ENCRYPTED"===e.procType.type)throw new Error("Could not convert PEM to DER; PEM is encrypted.");return n.util.createBuffer(e.body)},i.privateKeyFromPem=function(t){var e=n.pem.decode(t)[0];if("PRIVATE KEY"!==e.type&&"RSA PRIVATE KEY"!==e.type){var r=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&"ENCRYPTED"===e.procType.type)throw new Error("Could not convert private key from PEM; PEM is encrypted.");var a=o.fromDer(e.body);return i.privateKeyFromAsn1(a)},i.privateKeyToPem=function(t,e){var r={type:"RSA PRIVATE KEY",body:o.toDer(i.privateKeyToAsn1(t)).getBytes()};return n.pem.encode(r,{maxline:e})},i.privateKeyInfoToPem=function(t,e){var r={type:"PRIVATE KEY",body:o.toDer(t).getBytes()};return n.pem.encode(r,{maxline:e})}},function(t,e,r){var n=r(0);if(r(5),r(3),r(10),r(4),r(6),r(15),r(7),r(2),r(25),r(11),r(1),void 0===o)var o=n.jsbn.BigInteger;var i=n.asn1,a=n.pki=n.pki||{};t.exports=a.pbe=n.pbe=n.pbe||{};var s=a.oids,u={name:"EncryptedPrivateKeyInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},l={name:"PBES2Algorithms",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},c={name:"pkcs-12PbeParams",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"iterations"}]};function f(t,e){return t.start().update(e).digest().getBytes()}function p(t){var e;if(t){if(!(e=a.oids[i.derToOid(t)])){var r=new Error("Unsupported PRF OID.");throw r.oid=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}}else e="hmacWithSHA1";return h(e)}function h(t){var e=n.md;switch(t){case"hmacWithSHA224":e=n.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":t=t.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!(e&&t in e))throw new Error("Unknown hash algorithm: "+t);return e[t].create()}a.encryptPrivateKeyInfo=function(t,e,r){(r=r||{}).saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var o,u,l,c=n.random.getBytesSync(r.saltSize),f=r.count,p=i.integerToDer(f);if(0===r.algorithm.indexOf("aes")||"des"===r.algorithm){var y,d,b;switch(r.algorithm){case"aes128":o=16,y=16,d=s["aes128-CBC"],b=n.aes.createEncryptionCipher;break;case"aes192":o=24,y=16,d=s["aes192-CBC"],b=n.aes.createEncryptionCipher;break;case"aes256":o=32,y=16,d=s["aes256-CBC"],b=n.aes.createEncryptionCipher;break;case"des":o=8,y=8,d=s.desCBC,b=n.des.createEncryptionCipher;break;default:throw(O=new Error("Cannot encrypt private key. Unknown encryption algorithm.")).algorithm=r.algorithm,O}var v="hmacWith"+r.prfAlgorithm.toUpperCase(),m=h(v),g=n.pkcs5.pbkdf2(e,c,f,o,m),S=n.random.getBytesSync(y);(_=b(g)).start(S),_.update(i.toDer(t)),_.finish(),l=_.output.getBytes();var w=function(t,e,r,o){var s=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,t),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,e.getBytes())]);return"hmacWithSHA1"!==o&&s.value.push(i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,n.util.hexToBytes(r.toString(16))),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(a.oids[o]).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")])),s}(c,p,o,v);u=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(s.pkcs5PBES2).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(s.pkcs5PBKDF2).getBytes()),w]),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(d).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,S)])])])}else{var O;if("3des"!==r.algorithm)throw(O=new Error("Cannot encrypt private key. Unknown encryption algorithm.")).algorithm=r.algorithm,O;o=24;var _,P=new n.util.ByteBuffer(c);g=a.pbe.generatePkcs12Key(e,P,1,f,o),S=a.pbe.generatePkcs12Key(e,P,2,f,o),(_=n.des.createEncryptionCipher(g)).start(S),_.update(i.toDer(t)),_.finish(),l=_.output.getBytes(),u=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(s["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,c),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,p.getBytes())])])}return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[u,i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,l)])},a.decryptPrivateKeyInfo=function(t,e){var r=null,o={},s=[];if(!i.validate(t,u,o,s)){var l=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw l.errors=s,l}var c=i.derToOid(o.encryptionOid),f=a.pbe.getCipher(c,o.encryptionParams,e),p=n.util.createBuffer(o.encryptedData);return f.update(p),f.finish()&&(r=i.fromDer(f.output)),r},a.encryptedPrivateKeyToPem=function(t,e){var r={type:"ENCRYPTED PRIVATE KEY",body:i.toDer(t).getBytes()};return n.pem.encode(r,{maxline:e})},a.encryptedPrivateKeyFromPem=function(t){var e=n.pem.decode(t)[0];if("ENCRYPTED PRIVATE KEY"!==e.type){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&"ENCRYPTED"===e.procType.type)throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return i.fromDer(e.body)},a.encryptRsaPrivateKey=function(t,e,r){if(!(r=r||{}).legacy){var o=a.wrapRsaPrivateKey(a.privateKeyToAsn1(t));return o=a.encryptPrivateKeyInfo(o,e,r),a.encryptedPrivateKeyToPem(o)}var s,u,l,c;switch(r.algorithm){case"aes128":s="AES-128-CBC",l=16,u=n.random.getBytesSync(16),c=n.aes.createEncryptionCipher;break;case"aes192":s="AES-192-CBC",l=24,u=n.random.getBytesSync(16),c=n.aes.createEncryptionCipher;break;case"aes256":s="AES-256-CBC",l=32,u=n.random.getBytesSync(16),c=n.aes.createEncryptionCipher;break;case"3des":s="DES-EDE3-CBC",l=24,u=n.random.getBytesSync(8),c=n.des.createEncryptionCipher;break;case"des":s="DES-CBC",l=8,u=n.random.getBytesSync(8),c=n.des.createEncryptionCipher;break;default:var f=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw f.algorithm=r.algorithm,f}var p=c(n.pbe.opensslDeriveBytes(e,u.substr(0,8),l));p.start(u),p.update(i.toDer(a.privateKeyToAsn1(t))),p.finish();var h={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:s,parameters:n.util.bytesToHex(u).toUpperCase()},body:p.output.getBytes()};return n.pem.encode(h)},a.decryptRsaPrivateKey=function(t,e){var r=null,o=n.pem.decode(t)[0];if("ENCRYPTED PRIVATE KEY"!==o.type&&"PRIVATE KEY"!==o.type&&"RSA PRIVATE KEY"!==o.type)throw(l=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".')).headerType=l,l;if(o.procType&&"ENCRYPTED"===o.procType.type){var s,u;switch(o.dekInfo.algorithm){case"DES-CBC":s=8,u=n.des.createDecryptionCipher;break;case"DES-EDE3-CBC":s=24,u=n.des.createDecryptionCipher;break;case"AES-128-CBC":s=16,u=n.aes.createDecryptionCipher;break;case"AES-192-CBC":s=24,u=n.aes.createDecryptionCipher;break;case"AES-256-CBC":s=32,u=n.aes.createDecryptionCipher;break;case"RC2-40-CBC":s=5,u=function(t){return n.rc2.createDecryptionCipher(t,40)};break;case"RC2-64-CBC":s=8,u=function(t){return n.rc2.createDecryptionCipher(t,64)};break;case"RC2-128-CBC":s=16,u=function(t){return n.rc2.createDecryptionCipher(t,128)};break;default:var l;throw(l=new Error('Could not decrypt private key; unsupported encryption algorithm "'+o.dekInfo.algorithm+'".')).algorithm=o.dekInfo.algorithm,l}var c=n.util.hexToBytes(o.dekInfo.parameters),f=u(n.pbe.opensslDeriveBytes(e,c.substr(0,8),s));if(f.start(c),f.update(n.util.createBuffer(o.body)),!f.finish())return r;r=f.output.getBytes()}else r=o.body;return null!==(r="ENCRYPTED PRIVATE KEY"===o.type?a.decryptPrivateKeyInfo(i.fromDer(r),e):i.fromDer(r))&&(r=a.privateKeyFromAsn1(r)),r},a.pbe.generatePkcs12Key=function(t,e,r,o,i,a){var s,u;if(null==a){if(!("sha1"in n.md))throw new Error('"sha1" hash algorithm unavailable.');a=n.md.sha1.create()}var l=a.digestLength,c=a.blockLength,f=new n.util.ByteBuffer,p=new n.util.ByteBuffer;if(null!=t){for(u=0;u<t.length;u++)p.putInt16(t.charCodeAt(u));p.putInt16(0)}var h=p.length(),y=e.length(),d=new n.util.ByteBuffer;d.fillWithByte(r,c);var b=c*Math.ceil(y/c),v=new n.util.ByteBuffer;for(u=0;u<b;u++)v.putByte(e.at(u%y));var m=c*Math.ceil(h/c),g=new n.util.ByteBuffer;for(u=0;u<m;u++)g.putByte(p.at(u%h));var S=v;S.putBuffer(g);for(var w=Math.ceil(i/l),O=1;O<=w;O++){var _=new n.util.ByteBuffer;_.putBytes(d.bytes()),_.putBytes(S.bytes());for(var P=0;P<o;P++)a.start(),a.update(_.getBytes()),_=a.digest();var E=new n.util.ByteBuffer;for(u=0;u<c;u++)E.putByte(_.at(u%l));var C=Math.ceil(y/c)+Math.ceil(h/c),T=new n.util.ByteBuffer;for(s=0;s<C;s++){var j=new n.util.ByteBuffer(S.getBytes(c)),k=511;for(u=E.length()-1;u>=0;u--)k>>=8,k+=E.at(u)+j.at(u),j.setAt(u,255&k);T.putBuffer(j)}S=T,f.putBuffer(_)}return f.truncate(f.length()-i),f},a.pbe.getCipher=function(t,e,r){switch(t){case a.oids.pkcs5PBES2:return a.pbe.getCipherForPBES2(t,e,r);case a.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case a.oids["pbewithSHAAnd40BitRC2-CBC"]:return a.pbe.getCipherForPKCS12PBE(t,e,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=t,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}},a.pbe.getCipherForPBES2=function(t,e,r){var o,s={},u=[];if(!i.validate(e,l,s,u))throw(o=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.")).errors=u,o;if((t=i.derToOid(s.kdfOid))!==a.oids.pkcs5PBKDF2)throw(o=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.")).oid=t,o.supportedOids=["pkcs5PBKDF2"],o;if((t=i.derToOid(s.encOid))!==a.oids["aes128-CBC"]&&t!==a.oids["aes192-CBC"]&&t!==a.oids["aes256-CBC"]&&t!==a.oids["des-EDE3-CBC"]&&t!==a.oids.desCBC)throw(o=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.")).oid=t,o.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],o;var c,f,h=s.kdfSalt,y=n.util.createBuffer(s.kdfIterationCount);switch(y=y.getInt(y.length()<<3),a.oids[t]){case"aes128-CBC":c=16,f=n.aes.createDecryptionCipher;break;case"aes192-CBC":c=24,f=n.aes.createDecryptionCipher;break;case"aes256-CBC":c=32,f=n.aes.createDecryptionCipher;break;case"des-EDE3-CBC":c=24,f=n.des.createDecryptionCipher;break;case"desCBC":c=8,f=n.des.createDecryptionCipher}var d=p(s.prfOid),b=n.pkcs5.pbkdf2(r,h,y,c,d),v=s.encIv,m=f(b);return m.start(v),m},a.pbe.getCipherForPKCS12PBE=function(t,e,r){var o={},s=[];if(!i.validate(e,c,o,s))throw(d=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.")).errors=s,d;var u,l,f,h=n.util.createBuffer(o.salt),y=n.util.createBuffer(o.iterations);switch(y=y.getInt(y.length()<<3),t){case a.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:u=24,l=8,f=n.des.startDecrypting;break;case a.oids["pbewithSHAAnd40BitRC2-CBC"]:u=5,l=8,f=function(t,e){var r=n.rc2.createDecryptionCipher(t,40);return r.start(e,null),r};break;default:var d;throw(d=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.")).oid=t,d}var b=p(o.prfOid),v=a.pbe.generatePkcs12Key(r,h,1,y,u,b);return b.start(),f(v,a.pbe.generatePkcs12Key(r,h,2,y,l,b))},a.pbe.opensslDeriveBytes=function(t,e,r,o){if(null==o){if(!("md5"in n.md))throw new Error('"md5" hash algorithm unavailable.');o=n.md.md5.create()}null===e&&(e="");for(var i=[f(o,t+e)],a=16,s=1;a<r;++s,a+=16)i.push(f(o,i[s-1]+t+e));return i.join("").substr(0,r)}},function(t,e,r){var n=r(0);r(4),r(1);var o=t.exports=n.sha256=n.sha256||{};n.md.sha256=n.md.algorithms.sha256=o,o.create=function(){a||(i=String.fromCharCode(128),i+=n.util.fillString(String.fromCharCode(0),64),s=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],a=!0);var t=null,e=n.util.createBuffer(),r=new Array(64),o={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){o.messageLength=0,o.fullMessageLength=o.messageLength64=[];for(var r=o.messageLengthSize/4,i=0;i<r;++i)o.fullMessageLength.push(0);return e=n.util.createBuffer(),t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},o}};return o.start(),o.update=function(i,a){"utf8"===a&&(i=n.util.encodeUtf8(i));var s=i.length;o.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var l=o.fullMessageLength.length-1;l>=0;--l)o.fullMessageLength[l]+=s[1],s[1]=s[0]+(o.fullMessageLength[l]/4294967296>>>0),o.fullMessageLength[l]=o.fullMessageLength[l]>>>0,s[0]=s[1]/4294967296>>>0;return e.putBytes(i),u(t,r,e),(e.read>2048||0===e.length())&&e.compact(),o},o.digest=function(){var a=n.util.createBuffer();a.putBytes(e.bytes());var s,l=o.fullMessageLength[o.fullMessageLength.length-1]+o.messageLengthSize&o.blockLength-1;a.putBytes(i.substr(0,o.blockLength-l));for(var c=8*o.fullMessageLength[0],f=0;f<o.fullMessageLength.length-1;++f)c+=(s=8*o.fullMessageLength[f+1])/4294967296>>>0,a.putInt32(c>>>0),c=s>>>0;a.putInt32(c);var p={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4,h5:t.h5,h6:t.h6,h7:t.h7};u(p,r,a);var h=n.util.createBuffer();return h.putInt32(p.h0),h.putInt32(p.h1),h.putInt32(p.h2),h.putInt32(p.h3),h.putInt32(p.h4),h.putInt32(p.h5),h.putInt32(p.h6),h.putInt32(p.h7),h},o};var i=null,a=!1,s=null;function u(t,e,r){for(var n,o,i,a,u,l,c,f,p,h,y,d,b,v=r.length();v>=64;){for(u=0;u<16;++u)e[u]=r.getInt32();for(;u<64;++u)n=((n=e[u-2])>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,o=((o=e[u-15])>>>7|o<<25)^(o>>>18|o<<14)^o>>>3,e[u]=n+e[u-7]+o+e[u-16]|0;for(l=t.h0,c=t.h1,f=t.h2,p=t.h3,h=t.h4,y=t.h5,d=t.h6,b=t.h7,u=0;u<64;++u)i=(l>>>2|l<<30)^(l>>>13|l<<19)^(l>>>22|l<<10),a=l&c|f&(l^c),n=b+((h>>>6|h<<26)^(h>>>11|h<<21)^(h>>>25|h<<7))+(d^h&(y^d))+s[u]+e[u],b=d,d=y,y=h,h=p+n>>>0,p=f,f=c,c=l,l=n+(o=i+a)>>>0;t.h0=t.h0+l|0,t.h1=t.h1+c|0,t.h2=t.h2+f|0,t.h3=t.h3+p|0,t.h4=t.h4+h|0,t.h5=t.h5+y|0,t.h6=t.h6+d|0,t.h7=t.h7+b|0,v-=64}}},function(t,e,r){var n=r(0);r(1);var o=null;!n.util.isNodejs||n.options.usePureJavaScript||process.versions["node-webkit"]||(o=r(16)),(t.exports=n.prng=n.prng||{}).create=function(t){for(var e={plugin:t,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=t.md,i=new Array(32),a=0;a<32;++a)i[a]=r.create();function s(){if(e.pools[0].messageLength>=32)return u();var t=32-e.pools[0].messageLength<<5;e.collect(e.seedFileSync(t)),u()}function u(){e.reseeds=4294967295===e.reseeds?0:e.reseeds+1;var t=e.plugin.md.create();t.update(e.keyBytes);for(var r=1,n=0;n<32;++n)e.reseeds%r==0&&(t.update(e.pools[n].digest().getBytes()),e.pools[n].start()),r<<=1;e.keyBytes=t.digest().getBytes(),t.start(),t.update(e.keyBytes);var o=t.digest().getBytes();e.key=e.plugin.formatKey(e.keyBytes),e.seed=e.plugin.formatSeed(o),e.generated=0}function l(t){var e=null,r=n.util.globalScope,o=r.crypto||r.msCrypto;o&&o.getRandomValues&&(e=function(t){return o.getRandomValues(t)});var i=n.util.createBuffer();if(e)for(;i.length()<t;){var a=Math.max(1,Math.min(t-i.length(),65536)/4),s=new Uint32Array(Math.floor(a));try{e(s);for(var u=0;u<s.length;++u)i.putInt32(s[u])}catch(t){if(!("undefined"!=typeof QuotaExceededError&&t instanceof QuotaExceededError))throw t}}if(i.length()<t)for(var l,c,f,p=Math.floor(65536*Math.random());i.length()<t;)for(c=16807*(65535&p),c+=(32767&(l=16807*(p>>16)))<<16,p=4294967295&(c=(2147483647&(c+=l>>15))+(c>>31)),u=0;u<3;++u)f=p>>>(u<<3),f^=Math.floor(256*Math.random()),i.putByte(255&f);return i.getBytes(t)}return e.pools=i,e.pool=0,e.generate=function(t,r){if(!r)return e.generateSync(t);var o=e.plugin.cipher,i=e.plugin.increment,a=e.plugin.formatKey,s=e.plugin.formatSeed,l=n.util.createBuffer();e.key=null,function c(f){if(f)return r(f);if(l.length()>=t)return r(null,l.getBytes(t));if(e.generated>1048575&&(e.key=null),null===e.key)return n.util.nextTick(function(){!function(t){if(e.pools[0].messageLength>=32)return u(),t();var r=32-e.pools[0].messageLength<<5;e.seedFile(r,function(r,n){if(r)return t(r);e.collect(n),u(),t()})}(c)});var p=o(e.key,e.seed);e.generated+=p.length,l.putBytes(p),e.key=a(o(e.key,i(e.seed))),e.seed=s(o(e.key,e.seed)),n.util.setImmediate(c)}()},e.generateSync=function(t){var r=e.plugin.cipher,o=e.plugin.increment,i=e.plugin.formatKey,a=e.plugin.formatSeed;e.key=null;for(var u=n.util.createBuffer();u.length()<t;){e.generated>1048575&&(e.key=null),null===e.key&&s();var l=r(e.key,e.seed);e.generated+=l.length,u.putBytes(l),e.key=i(r(e.key,o(e.seed))),e.seed=a(r(e.key,e.seed))}return u.getBytes(t)},o?(e.seedFile=function(t,e){o.randomBytes(t,function(t,r){if(t)return e(t);e(null,r.toString())})},e.seedFileSync=function(t){return o.randomBytes(t).toString()}):(e.seedFile=function(t,e){try{e(null,l(t))}catch(t){e(t)}},e.seedFileSync=l),e.collect=function(t){for(var r=t.length,n=0;n<r;++n)e.pools[e.pool].update(t.substr(n,1)),e.pool=31===e.pool?0:e.pool+1},e.collectInt=function(t,r){for(var n="",o=0;o<r;o+=8)n+=String.fromCharCode(t>>o&255);e.collect(n)},e.registerWorker=function(t){t===self?e.seedFile=function(t,e){self.addEventListener("message",function t(r){var n=r.data;n.forge&&n.forge.prng&&(self.removeEventListener("message",t),e(n.forge.prng.err,n.forge.prng.bytes))}),self.postMessage({forge:{prng:{needed:t}}})}:t.addEventListener("message",function(r){var n=r.data;n.forge&&n.forge.prng&&e.seedFile(n.forge.prng.needed,function(e,r){t.postMessage({forge:{prng:{err:e,bytes:r}}})})})},e}},function(t,e,r){var n=r(0);r(1);var o=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],i=[1,2,3,5],a=function(t,e){return t<<e&65535|(65535&t)>>16-e},s=function(t,e){return(65535&t)>>e|t<<16-e&65535};t.exports=n.rc2=n.rc2||{},n.rc2.expandKey=function(t,e){"string"==typeof t&&(t=n.util.createBuffer(t)),e=e||128;var r,i=t,a=t.length(),s=e,u=Math.ceil(s/8),l=255>>(7&s);for(r=a;r<128;r++)i.putByte(o[i.at(r-1)+i.at(r-a)&255]);for(i.setAt(128-u,o[i.at(128-u)&l]),r=127-u;r>=0;r--)i.setAt(r,o[i.at(r+1)^i.at(r+u)]);return i};var u=function(t,e,r){var o,u,l,c,f=!1,p=null,h=null,y=null,d=[];for(t=n.rc2.expandKey(t,e),l=0;l<64;l++)d.push(t.getInt16Le());r?(o=function(t){for(l=0;l<4;l++)t[l]+=d[c]+(t[(l+3)%4]&t[(l+2)%4])+(~t[(l+3)%4]&t[(l+1)%4]),t[l]=a(t[l],i[l]),c++},u=function(t){for(l=0;l<4;l++)t[l]+=d[63&t[(l+3)%4]]}):(o=function(t){for(l=3;l>=0;l--)t[l]=s(t[l],i[l]),t[l]-=d[c]+(t[(l+3)%4]&t[(l+2)%4])+(~t[(l+3)%4]&t[(l+1)%4]),c--},u=function(t){for(l=3;l>=0;l--)t[l]-=d[63&t[(l+3)%4]]});var b=function(t){var e=[];for(l=0;l<4;l++){var n=p.getInt16Le();null!==y&&(r?n^=y.getInt16Le():y.putInt16Le(n)),e.push(65535&n)}c=r?0:63;for(var o=0;o<t.length;o++)for(var i=0;i<t[o][0];i++)t[o][1](e);for(l=0;l<4;l++)null!==y&&(r?y.putInt16Le(e[l]):e[l]^=y.getInt16Le()),h.putInt16Le(e[l])},v=null;return v={start:function(t,e){t&&"string"==typeof t&&(t=n.util.createBuffer(t)),f=!1,p=n.util.createBuffer(),h=e||new n.util.createBuffer,y=t,v.output=h},update:function(t){for(f||p.putBuffer(t);p.length()>=8;)b([[5,o],[1,u],[6,o],[1,u],[5,o]])},finish:function(t){var e=!0;if(r)if(t)e=t(8,p,!r);else{var n=8===p.length()?8:8-p.length();p.fillWithByte(n,n)}if(e&&(f=!0,v.update()),!r&&(e=0===p.length()))if(t)e=t(8,h,!r);else{var o=h.length(),i=h.at(o-1);i>o?e=!1:h.truncate(i)}return e}}};n.rc2.startEncrypting=function(t,e,r){var o=n.rc2.createEncryptionCipher(t,128);return o.start(e,r),o},n.rc2.createEncryptionCipher=function(t,e){return u(t,e,!0)},n.rc2.startDecrypting=function(t,e,r){var o=n.rc2.createDecryptionCipher(t,128);return o.start(e,r),o},n.rc2.createDecryptionCipher=function(t,e){return u(t,e,!1)}},function(t,e,r){var n=r(0);r(1),r(2),r(9);var o=t.exports=n.pkcs1=n.pkcs1||{};function i(t,e,r){r||(r=n.md.sha1.create());for(var o="",i=Math.ceil(e/r.digestLength),a=0;a<i;++a){var s=String.fromCharCode(a>>24&255,a>>16&255,a>>8&255,255&a);r.start(),r.update(t+s),o+=r.digest().getBytes()}return o.substring(0,e)}o.encode_rsa_oaep=function(t,e,r){var o,a,s,u;"string"==typeof r?(o=r,a=arguments[3]||void 0,s=arguments[4]||void 0):r&&(o=r.label||void 0,a=r.seed||void 0,s=r.md||void 0,r.mgf1&&r.mgf1.md&&(u=r.mgf1.md)),s?s.start():s=n.md.sha1.create(),u||(u=s);var l=Math.ceil(t.n.bitLength()/8),c=l-2*s.digestLength-2;if(e.length>c)throw(d=new Error("RSAES-OAEP input message length is too long.")).length=e.length,d.maxLength=c,d;o||(o=""),s.update(o,"raw");for(var f=s.digest(),p="",h=c-e.length,y=0;y<h;y++)p+="\0";var d,b=f.getBytes()+p+""+e;if(a){if(a.length!==s.digestLength)throw(d=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.")).seedLength=a.length,d.digestLength=s.digestLength,d}else a=n.random.getBytes(s.digestLength);var v=i(a,l-s.digestLength-1,u),m=n.util.xorBytes(b,v,b.length),g=i(m,s.digestLength,u);return"\0"+n.util.xorBytes(a,g,a.length)+m},o.decode_rsa_oaep=function(t,e,r){var o,a,s;"string"==typeof r?(o=r,a=arguments[3]||void 0):r&&(o=r.label||void 0,a=r.md||void 0,r.mgf1&&r.mgf1.md&&(s=r.mgf1.md));var u=Math.ceil(t.n.bitLength()/8);if(e.length!==u)throw(v=new Error("RSAES-OAEP encoded message length is invalid.")).length=e.length,v.expectedLength=u,v;if(void 0===a?a=n.md.sha1.create():a.start(),s||(s=a),u<2*a.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");o||(o=""),a.update(o,"raw");for(var l=a.digest().getBytes(),c=e.charAt(0),f=e.substring(1,a.digestLength+1),p=e.substring(1+a.digestLength),h=i(p,a.digestLength,s),y=i(n.util.xorBytes(f,h,f.length),u-a.digestLength-1,s),d=n.util.xorBytes(p,y,p.length),b=d.substring(0,a.digestLength),v="\0"!==c,m=0;m<a.digestLength;++m)v|=l.charAt(m)!==b.charAt(m);for(var g=1,S=a.digestLength,w=a.digestLength;w<d.length;w++){var O=d.charCodeAt(w);v|=O&(g?65534:0),S+=g&=1&O^1}if(v||1!==d.charCodeAt(S))throw new Error("Invalid RSAES-OAEP padding.");return d.substring(S+1)}},function(t,e,r){var n=r(0);r(1),r(12),r(2),function(){if(n.prime)t.exports=n.prime;else{var e=t.exports=n.prime=n.prime||{},r=n.jsbn.BigInteger,o=[6,4,2,4,2,4,6,2],i=new r(null);i.fromInt(30);var a=function(t,e){return t|e};e.generateProbablePrime=function(t,e,o){"function"==typeof e&&(o=e,e={});var i=(e=e||{}).algorithm||"PRIMEINC";"string"==typeof i&&(i={name:i}),i.options=i.options||{};var a=e.prng||n.random,l={nextBytes:function(t){for(var e=a.getBytesSync(t.length),r=0;r<t.length;++r)t[r]=e.charCodeAt(r)}};if("PRIMEINC"===i.name)return function(t,e,o,i){return"workers"in o?function(t,e,o,i){if("undefined"==typeof Worker)return s(t,e,o,i);var a=u(t,e),l=o.workers,c=o.workLoad||100,f=30*c/8,p=o.workerScript||"forge/prime.worker.js";if(-1===l)return n.util.estimateCores(function(t,e){t&&(e=2),l=e-1,h()});function h(){l=Math.max(1,l);for(var n=[],o=0;o<l;++o)n[o]=new Worker(p);for(o=0;o<l;++o)n[o].addEventListener("message",h);var s=!1;function h(o){if(!s){var l=o.data;if(l.found){for(var p=0;p<n.length;++p)n[p].terminate();return s=!0,i(null,new r(l.prime,16))}a.bitLength()>t&&(a=u(t,e));var h=a.toString(16);o.target.postMessage({hex:h,workLoad:c}),a.dAddOffset(f,0)}}}h()}(t,e,o,i):s(t,e,o,i)}(t,l,i.options,o);throw new Error("Invalid prime generation algorithm: "+i.name)}}function s(t,e,r,i){var a=u(t,e),s=function(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}(a.bitLength());"millerRabinTests"in r&&(s=r.millerRabinTests);var l=10;"maxBlockTime"in r&&(l=r.maxBlockTime),function t(e,r,i,a,s,l,c){var f=+new Date;do{if(e.bitLength()>r&&(e=u(r,i)),e.isProbablePrime(s))return c(null,e);e.dAddOffset(o[a++%8],0)}while(l<0||+new Date-f<l);n.util.setImmediate(function(){t(e,r,i,a,s,l,c)})}(a,t,e,0,s,l,i)}function u(t,e){var n=new r(t,e),o=t-1;return n.testBit(o)||n.bitwiseTo(r.ONE.shiftLeft(o),a,n),n.dAddOffset(31-n.mod(i).byteValue(),0),n}}()},function(t,e,r){var n=r(0);r(3),r(8),r(6),r(29),r(22),r(2),r(11),r(9),r(1),r(17);var o=n.asn1,i=n.pki,a=t.exports=n.pkcs12=n.pkcs12||{},s={name:"ContentInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:o.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},u={name:"PFX",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"version"},s,{name:"PFX.macData",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:o.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},l={name:"SafeBag",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:o.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:o.Class.UNIVERSAL,type:o.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},c={name:"Attribute",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:o.Class.UNIVERSAL,type:o.Type.SET,constructed:!0,capture:"values"}]},f={name:"CertBag",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:o.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:o.Class.UNIVERSAL,type:o.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function p(t,e,r,n){for(var o=[],i=0;i<t.length;i++)for(var a=0;a<t[i].safeBags.length;a++){var s=t[i].safeBags[a];void 0!==n&&s.type!==n||(null!==e?void 0!==s.attributes[e]&&s.attributes[e].indexOf(r)>=0&&o.push(s):o.push(s))}return o}function h(t){if(t.composed||t.constructed){for(var e=n.util.createBuffer(),r=0;r<t.value.length;++r)e.putBytes(t.value[r].value);t.composed=t.constructed=!1,t.value=e.getBytes()}return t}function y(t,e){var r={},a=[];if(!o.validate(t,n.pkcs7.asn1.encryptedDataValidator,r,a))throw(s=new Error("Cannot read EncryptedContentInfo.")).errors=a,s;var s,u=o.derToOid(r.contentType);if(u!==i.oids.data)throw(s=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.")).oid=u,s;u=o.derToOid(r.encAlgorithm);var l=i.pbe.getCipher(u,r.encParameter,e),c=h(r.encryptedContentAsn1),f=n.util.createBuffer(c.value);if(l.update(f),!l.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return l.output.getBytes()}function d(t,e,r){if(!e&&0===t.length)return[];if((t=o.fromDer(t,e)).tagClass!==o.Class.UNIVERSAL||t.type!==o.Type.SEQUENCE||!0!==t.constructed)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var n=[],a=0;a<t.value.length;a++){var s=t.value[a],u={},c=[];if(!o.validate(s,l,u,c))throw(v=new Error("Cannot read SafeBag.")).errors=c,v;var p,h,y={type:o.derToOid(u.bagId),attributes:b(u.bagAttributes)};n.push(y);var d=u.bagValue.value[0];switch(y.type){case i.oids.pkcs8ShroudedKeyBag:if(null===(d=i.decryptPrivateKeyInfo(d,r)))throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case i.oids.keyBag:try{y.key=i.privateKeyFromAsn1(d)}catch(t){y.key=null,y.asn1=d}continue;case i.oids.certBag:p=f,h=function(){if(o.derToOid(u.certId)!==i.oids.x509Certificate){var t=new Error("Unsupported certificate type, only X.509 supported.");throw t.oid=o.derToOid(u.certId),t}var r=o.fromDer(u.cert,e);try{y.cert=i.certificateFromAsn1(r,!0)}catch(t){y.cert=null,y.asn1=r}};break;default:var v;throw(v=new Error("Unsupported PKCS#12 SafeBag type.")).oid=y.type,v}if(void 0!==p&&!o.validate(d,p,u,c))throw(v=new Error("Cannot read PKCS#12 "+p.name)).errors=c,v;h()}return n}function b(t){var e={};if(void 0!==t)for(var r=0;r<t.length;++r){var n={},a=[];if(!o.validate(t[r],c,n,a)){var s=new Error("Cannot read PKCS#12 BagAttribute.");throw s.errors=a,s}var u=o.derToOid(n.oid);if(void 0!==i.oids[u]){e[i.oids[u]]=[];for(var l=0;l<n.values.length;++l)e[i.oids[u]].push(n.values[l].value)}}return e}a.pkcs12FromAsn1=function(t,e,r){"string"==typeof e?(r=e,e=!0):void 0===e&&(e=!0);var l={};if(!o.validate(t,u,l,[]))throw(c=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.")).errors=c,c;var c,f={version:l.version.charCodeAt(0),safeContents:[],getBags:function(t){var e,r={};return"localKeyId"in t?e=t.localKeyId:"localKeyIdHex"in t&&(e=n.util.hexToBytes(t.localKeyIdHex)),void 0===e&&!("friendlyName"in t)&&"bagType"in t&&(r[t.bagType]=p(f.safeContents,null,null,t.bagType)),void 0!==e&&(r.localKeyId=p(f.safeContents,"localKeyId",e,t.bagType)),"friendlyName"in t&&(r.friendlyName=p(f.safeContents,"friendlyName",t.friendlyName,t.bagType)),r},getBagsByFriendlyName:function(t,e){return p(f.safeContents,"friendlyName",t,e)},getBagsByLocalKeyId:function(t,e){return p(f.safeContents,"localKeyId",t,e)}};if(3!==l.version.charCodeAt(0))throw(c=new Error("PKCS#12 PFX of version other than 3 not supported.")).version=l.version.charCodeAt(0),c;if(o.derToOid(l.contentType)!==i.oids.data)throw(c=new Error("Only PKCS#12 PFX in password integrity mode supported.")).oid=o.derToOid(l.contentType),c;var b=l.content.value[0];if(b.tagClass!==o.Class.UNIVERSAL||b.type!==o.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(b=h(b),l.mac){var v=null,m=0,g=o.derToOid(l.macAlgorithm);switch(g){case i.oids.sha1:v=n.md.sha1.create(),m=20;break;case i.oids.sha256:v=n.md.sha256.create(),m=32;break;case i.oids.sha384:v=n.md.sha384.create(),m=48;break;case i.oids.sha512:v=n.md.sha512.create(),m=64;break;case i.oids.md5:v=n.md.md5.create(),m=16}if(null===v)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+g);var S=new n.util.ByteBuffer(l.macSalt),w="macIterations"in l?parseInt(n.util.bytesToHex(l.macIterations),16):1,O=a.generateKey(r,S,3,w,m,v),_=n.hmac.create();if(_.start(v,O),_.update(b.value),_.getMac().getBytes()!==l.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return function(t,e,r,n){if((e=o.fromDer(e,r)).tagClass!==o.Class.UNIVERSAL||e.type!==o.Type.SEQUENCE||!0!==e.constructed)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var a=0;a<e.value.length;a++){var u=e.value[a],l={},c=[];if(!o.validate(u,s,l,c))throw(v=new Error("Cannot read ContentInfo.")).errors=c,v;var f={encrypted:!1},p=null,b=l.content.value[0];switch(o.derToOid(l.contentType)){case i.oids.data:if(b.tagClass!==o.Class.UNIVERSAL||b.type!==o.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");p=h(b).value;break;case i.oids.encryptedData:p=y(b,n),f.encrypted=!0;break;default:var v;throw(v=new Error("Unsupported PKCS#12 contentType.")).contentType=o.derToOid(l.contentType),v}f.safeBags=d(p,r,n),t.safeContents.push(f)}}(f,b.value,e,r),f},a.toPkcs12Asn1=function(t,e,r,s){(s=s||{}).saltSize=s.saltSize||8,s.count=s.count||2048,s.algorithm=s.algorithm||s.encAlgorithm||"aes128","useMac"in s||(s.useMac=!0),"localKeyId"in s||(s.localKeyId=null),"generateLocalKeyId"in s||(s.generateLocalKeyId=!0);var u,l=s.localKeyId;if(null!==l)l=n.util.hexToBytes(l);else if(s.generateLocalKeyId)if(e){var c=n.util.isArray(e)?e[0]:e;"string"==typeof c&&(c=i.certificateFromPem(c)),(T=n.md.sha1.create()).update(o.toDer(i.certificateToAsn1(c)).getBytes()),l=T.digest().getBytes()}else l=n.random.getBytes(20);var f=[];null!==l&&f.push(o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(i.oids.localKeyId).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SET,!0,[o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,l)])])),"friendlyName"in s&&f.push(o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(i.oids.friendlyName).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SET,!0,[o.create(o.Class.UNIVERSAL,o.Type.BMPSTRING,!1,s.friendlyName)])])),f.length>0&&(u=o.create(o.Class.UNIVERSAL,o.Type.SET,!0,f));var p=[],h=[];null!==e&&(h=n.util.isArray(e)?e:[e]);for(var y=[],d=0;d<h.length;++d){"string"==typeof(e=h[d])&&(e=i.certificateFromPem(e));var b=0===d?u:void 0,v=i.certificateToAsn1(e),m=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(i.oids.certBag).getBytes()),o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(i.oids.x509Certificate).getBytes()),o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,o.toDer(v).getBytes())])])]),b]);y.push(m)}if(y.length>0){var g=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,y),S=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(i.oids.data).getBytes()),o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,o.toDer(g).getBytes())])]);p.push(S)}var w=null;if(null!==t){var O=i.wrapRsaPrivateKey(i.privateKeyToAsn1(t));w=null===r?o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(i.oids.keyBag).getBytes()),o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[O]),u]):o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(i.oids.pkcs8ShroudedKeyBag).getBytes()),o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[i.encryptPrivateKeyInfo(O,r,s)]),u]);var _=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[w]),P=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(i.oids.data).getBytes()),o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,o.toDer(_).getBytes())])]);p.push(P)}var E,C=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,p);if(s.useMac){var T=n.md.sha1.create(),j=new n.util.ByteBuffer(n.random.getBytes(s.saltSize)),k=s.count,x=(t=a.generateKey(r,j,3,k,20),n.hmac.create());x.start(T,t),x.update(o.toDer(C).getBytes());var A=x.getMac();E=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(i.oids.sha1).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")]),o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,A.getBytes())]),o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,j.getBytes()),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(k).getBytes())])}return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(3).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(i.oids.data).getBytes()),o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,o.toDer(C).getBytes())])]),E])},a.generateKey=n.pbe.generatePkcs12Key},function(t,e,r){var n=r(0);r(3),r(1);var o=n.asn1,i=t.exports=n.pkcs7asn1=n.pkcs7asn1||{};n.pkcs7=n.pkcs7||{},n.pkcs7.asn1=i;var a={name:"ContentInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:o.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};i.contentInfoValidator=a;var s={name:"EncryptedContentInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:o.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:o.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};i.envelopedDataValidator={name:"EnvelopedData",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:o.Class.UNIVERSAL,type:o.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(s)},i.encryptedDataValidator={name:"EncryptedData",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"version"}].concat(s)};var u={name:"SignerInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:o.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:o.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:o.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};i.signedDataValidator={name:"SignedData",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:o.Class.UNIVERSAL,type:o.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},a,{name:"SignedData.Certificates",tagClass:o.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:o.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:o.Class.UNIVERSAL,type:o.Type.SET,capture:"signerInfos",optional:!0,value:[u]}]},i.recipientInfoValidator={name:"RecipientInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:o.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}},function(t,e,r){var n=r(0);r(1),n.mgf=n.mgf||{},(t.exports=n.mgf.mgf1=n.mgf1=n.mgf1||{}).create=function(t){return{generate:function(e,r){for(var o=new n.util.ByteBuffer,i=Math.ceil(r/t.digestLength),a=0;a<i;a++){var s=new n.util.ByteBuffer;s.putInt32(a),t.start(),t.update(e+s.getBytes()),o.putBuffer(t.digest())}return o.truncate(o.length()-r),o.getBytes()}}}},function(t,e,r){var n=r(0);r(4),r(1);var o=t.exports=n.sha512=n.sha512||{};n.md.sha512=n.md.algorithms.sha512=o;var i=n.sha384=n.sha512.sha384=n.sha512.sha384||{};i.create=function(){return o.create("SHA-384")},n.md.sha384=n.md.algorithms.sha384=i,n.sha512.sha256=n.sha512.sha256||{create:function(){return o.create("SHA-512/256")}},n.md["sha512/256"]=n.md.algorithms["sha512/256"]=n.sha512.sha256,n.sha512.sha224=n.sha512.sha224||{create:function(){return o.create("SHA-512/224")}},n.md["sha512/224"]=n.md.algorithms["sha512/224"]=n.sha512.sha224,o.create=function(t){if(s||(a=String.fromCharCode(128),a+=n.util.fillString(String.fromCharCode(0),128),u=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],(l={})["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],l["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],l["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],l["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],s=!0),void 0===t&&(t="SHA-512"),!(t in l))throw new Error("Invalid SHA-512 algorithm: "+t);for(var e=l[t],r=null,o=n.util.createBuffer(),i=new Array(80),f=0;f<80;++f)i[f]=new Array(2);var p=64;switch(t){case"SHA-384":p=48;break;case"SHA-512/256":p=32;break;case"SHA-512/224":p=28}var h={algorithm:t.replace("-","").toLowerCase(),blockLength:128,digestLength:p,messageLength:0,fullMessageLength:null,messageLengthSize:16,start:function(){h.messageLength=0,h.fullMessageLength=h.messageLength128=[];for(var t=h.messageLengthSize/4,i=0;i<t;++i)h.fullMessageLength.push(0);for(o=n.util.createBuffer(),r=new Array(e.length),i=0;i<e.length;++i)r[i]=e[i].slice(0);return h}};return h.start(),h.update=function(t,e){"utf8"===e&&(t=n.util.encodeUtf8(t));var a=t.length;h.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var s=h.fullMessageLength.length-1;s>=0;--s)h.fullMessageLength[s]+=a[1],a[1]=a[0]+(h.fullMessageLength[s]/4294967296>>>0),h.fullMessageLength[s]=h.fullMessageLength[s]>>>0,a[0]=a[1]/4294967296>>>0;return o.putBytes(t),c(r,i,o),(o.read>2048||0===o.length())&&o.compact(),h},h.digest=function(){var e=n.util.createBuffer();e.putBytes(o.bytes());var s,u=h.fullMessageLength[h.fullMessageLength.length-1]+h.messageLengthSize&h.blockLength-1;e.putBytes(a.substr(0,h.blockLength-u));for(var l=8*h.fullMessageLength[0],f=0;f<h.fullMessageLength.length-1;++f)l+=(s=8*h.fullMessageLength[f+1])/4294967296>>>0,e.putInt32(l>>>0),l=s>>>0;e.putInt32(l);var p=new Array(r.length);for(f=0;f<r.length;++f)p[f]=r[f].slice(0);c(p,i,e);var y,d=n.util.createBuffer();for(y="SHA-512"===t?p.length:"SHA-384"===t?p.length-2:p.length-4,f=0;f<y;++f)d.putInt32(p[f][0]),f===y-1&&"SHA-512/224"===t||d.putInt32(p[f][1]);return d},h};var a=null,s=!1,u=null,l=null;function c(t,e,r){for(var n,o,i,a,s,l,c,f,p,h,y,d,b,v,m,g,S,w,O,_,P,E,C,T,j,k,x,A,I,N,R,M,L,B=r.length();B>=128;){for(x=0;x<16;++x)e[x][0]=r.getInt32()>>>0,e[x][1]=r.getInt32()>>>0;for(;x<80;++x)n=(((A=(N=e[x-2])[0])>>>19|(I=N[1])<<13)^(I>>>29|A<<3)^A>>>6)>>>0,o=((A<<13|I>>>19)^(I<<3|A>>>29)^(A<<26|I>>>6))>>>0,i=(((A=(M=e[x-15])[0])>>>1|(I=M[1])<<31)^(A>>>8|I<<24)^A>>>7)>>>0,a=((A<<31|I>>>1)^(A<<24|I>>>8)^(A<<25|I>>>7))>>>0,R=e[x-7],L=e[x-16],I=o+R[1]+a+L[1],e[x][0]=n+R[0]+i+L[0]+(I/4294967296>>>0)>>>0,e[x][1]=I>>>0;for(y=t[0][0],d=t[0][1],b=t[1][0],v=t[1][1],m=t[2][0],g=t[2][1],S=t[3][0],w=t[3][1],O=t[4][0],_=t[4][1],P=t[5][0],E=t[5][1],C=t[6][0],T=t[6][1],j=t[7][0],k=t[7][1],x=0;x<80;++x)c=((O>>>14|_<<18)^(O>>>18|_<<14)^(_>>>9|O<<23))>>>0,f=(C^O&(P^C))>>>0,s=((y>>>28|d<<4)^(d>>>2|y<<30)^(d>>>7|y<<25))>>>0,l=((y<<4|d>>>28)^(d<<30|y>>>2)^(d<<25|y>>>7))>>>0,p=(y&b|m&(y^b))>>>0,h=(d&v|g&(d^v))>>>0,I=k+(((O<<18|_>>>14)^(O<<14|_>>>18)^(_<<23|O>>>9))>>>0)+((T^_&(E^T))>>>0)+u[x][1]+e[x][1],n=j+c+f+u[x][0]+e[x][0]+(I/4294967296>>>0)>>>0,o=I>>>0,i=s+p+((I=l+h)/4294967296>>>0)>>>0,a=I>>>0,j=C,k=T,C=P,T=E,P=O,E=_,O=S+n+((I=w+o)/4294967296>>>0)>>>0,_=I>>>0,S=m,w=g,m=b,g=v,b=y,v=d,y=n+i+((I=o+a)/4294967296>>>0)>>>0,d=I>>>0;I=t[0][1]+d,t[0][0]=t[0][0]+y+(I/4294967296>>>0)>>>0,t[0][1]=I>>>0,I=t[1][1]+v,t[1][0]=t[1][0]+b+(I/4294967296>>>0)>>>0,t[1][1]=I>>>0,I=t[2][1]+g,t[2][0]=t[2][0]+m+(I/4294967296>>>0)>>>0,t[2][1]=I>>>0,I=t[3][1]+w,t[3][0]=t[3][0]+S+(I/4294967296>>>0)>>>0,t[3][1]=I>>>0,I=t[4][1]+_,t[4][0]=t[4][0]+O+(I/4294967296>>>0)>>>0,t[4][1]=I>>>0,I=t[5][1]+E,t[5][0]=t[5][0]+P+(I/4294967296>>>0)>>>0,t[5][1]=I>>>0,I=t[6][1]+T,t[6][0]=t[6][0]+C+(I/4294967296>>>0)>>>0,t[6][1]=I>>>0,I=t[7][1]+k,t[7][0]=t[7][0]+j+(I/4294967296>>>0)>>>0,t[7][1]=I>>>0,B-=128}}},function(t,e,r){t.exports=r(33)},function(t,e,r){t.exports=r(0),r(5),r(36),r(3),r(13),r(10),r(38),r(8),r(40),r(41),r(42),r(30),r(15),r(7),r(26),r(28),r(43),r(21),r(27),r(24),r(18),r(2),r(25),r(44),r(20),r(1)},function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==("undefined"==typeof window?"undefined":s(window))&&(r=window)}t.exports=r},function(t,e){var r={};t.exports=r;var n={};r.encode=function(t,e,r){if("string"!=typeof e)throw new TypeError('"alphabet" must be a string.');if(void 0!==r&&"number"!=typeof r)throw new TypeError('"maxline" must be a number.');var n="";if(t instanceof Uint8Array){var o=0,i=e.length,a=e.charAt(0),s=[0];for(o=0;o<t.length;++o){for(var u=0,l=t[o];u<s.length;++u)l+=s[u]<<8,s[u]=l%i,l=l/i|0;for(;l>0;)s.push(l%i),l=l/i|0}for(o=0;0===t[o]&&o<t.length-1;++o)n+=a;for(o=s.length-1;o>=0;--o)n+=e[s[o]]}else n=function(t,e){var r=0,n=e.length,o=e.charAt(0),i=[0];for(r=0;r<t.length();++r){for(var a=0,s=t.at(r);a<i.length;++a)s+=i[a]<<8,i[a]=s%n,s=s/n|0;for(;s>0;)i.push(s%n),s=s/n|0}var u="";for(r=0;0===t.at(r)&&r<t.length()-1;++r)u+=o;for(r=i.length-1;r>=0;--r)u+=e[i[r]];return u}(t,e);if(r){var c=new RegExp(".{1,"+r+"}","g");n=n.match(c).join("\r\n")}return n},r.decode=function(t,e){if("string"!=typeof t)throw new TypeError('"input" must be a string.');if("string"!=typeof e)throw new TypeError('"alphabet" must be a string.');var r=n[e];if(!r){r=n[e]=[];for(var o=0;o<e.length;++o)r[e.charCodeAt(o)]=o}t=t.replace(/\s/g,"");var i=e.length,a=e.charAt(0),s=[0];for(o=0;o<t.length;o++){var u=r[t.charCodeAt(o)];if(void 0===u)return;for(var l=0,c=u;l<s.length;++l)c+=s[l]*i,s[l]=255&c,c>>=8;for(;c>0;)s.push(255&c),c>>=8}for(var f=0;t[f]===a&&f<t.length-1;++f)s.push(0);return"undefined"!=typeof Buffer?Buffer.from(s.reverse()):new Uint8Array(s.reverse())}},function(t,e,r){var n=r(0);r(5),r(20);var o=t.exports=n.tls;function i(t,e,r){var i=e.entity===n.tls.ConnectionEnd.client;t.read.cipherState={init:!1,cipher:n.cipher.createDecipher("AES-CBC",i?r.keys.server_write_key:r.keys.client_write_key),iv:i?r.keys.server_write_IV:r.keys.client_write_IV},t.write.cipherState={init:!1,cipher:n.cipher.createCipher("AES-CBC",i?r.keys.client_write_key:r.keys.server_write_key),iv:i?r.keys.client_write_IV:r.keys.server_write_IV},t.read.cipherFunction=l,t.write.cipherFunction=a,t.read.macLength=t.write.macLength=r.mac_length,t.read.macFunction=t.write.macFunction=o.hmac_sha1}function a(t,e){var r,i=!1,a=e.macFunction(e.macKey,e.sequenceNumber,t);t.fragment.putBytes(a),e.updateSequenceNumber(),r=t.version.minor===o.Versions.TLS_1_0.minor?e.cipherState.init?null:e.cipherState.iv:n.random.getBytesSync(16),e.cipherState.init=!0;var u=e.cipherState.cipher;return u.start({iv:r}),t.version.minor>=o.Versions.TLS_1_1.minor&&u.output.putBytes(r),u.update(t.fragment),u.finish(s)&&(t.fragment=u.output,t.length=t.fragment.length(),i=!0),i}function s(t,e,r){if(!r){var n=t-e.length()%t;e.fillWithByte(n-1,n)}return!0}function u(t,e,r){var n=!0;if(r){for(var o=e.length(),i=e.last(),a=o-1-i;a<o-1;++a)n=n&&e.at(a)==i;n&&e.truncate(i+1)}return n}function l(t,e){var r,i=!1;r=t.version.minor===o.Versions.TLS_1_0.minor?e.cipherState.init?null:e.cipherState.iv:t.fragment.getBytes(16),e.cipherState.init=!0;var a=e.cipherState.cipher;a.start({iv:r}),a.update(t.fragment),i=a.finish(u);var s=e.macLength,l=n.random.getBytesSync(s),c=a.output.length();c>=s?(t.fragment=a.output.getBytes(c-s),l=a.output.getBytes(s)):t.fragment=a.output.getBytes(),t.fragment=n.util.createBuffer(t.fragment),t.length=t.fragment.length();var f=e.macFunction(e.macKey,e.sequenceNumber,t);return e.updateSequenceNumber(),function(t,e,r){var o=n.hmac.create();return o.start("SHA1",t),o.update(e),e=o.digest().getBytes(),o.start(null,null),o.update(r),e===(r=o.digest().getBytes())}(e.macKey,l,f)&&i}o.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:function(t){t.bulk_cipher_algorithm=o.BulkCipherAlgorithm.aes,t.cipher_type=o.CipherType.block,t.enc_key_length=16,t.block_length=16,t.fixed_iv_length=16,t.record_iv_length=16,t.mac_algorithm=o.MACAlgorithm.hmac_sha1,t.mac_length=20,t.mac_key_length=20},initConnectionState:i},o.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:function(t){t.bulk_cipher_algorithm=o.BulkCipherAlgorithm.aes,t.cipher_type=o.CipherType.block,t.enc_key_length=32,t.block_length=16,t.fixed_iv_length=16,t.record_iv_length=16,t.mac_algorithm=o.MACAlgorithm.hmac_sha1,t.mac_length=20,t.mac_key_length=20},initConnectionState:i}},function(t,e,r){var n=r(0);r(30),t.exports=n.mgf=n.mgf||{},n.mgf.mgf1=n.mgf1},function(t,e,r){var n=r(0);r(12),r(2),r(31),r(1);var o=r(39),i=o.publicKeyValidator,a=o.privateKeyValidator;if(void 0===s)var s=n.jsbn.BigInteger;var u=n.util.ByteBuffer,l="undefined"==typeof Buffer?Uint8Array:Buffer;n.pki=n.pki||{},t.exports=n.pki.ed25519=n.ed25519=n.ed25519||{};var c=n.ed25519;function f(t){var e=t.message;if(e instanceof Uint8Array||e instanceof l)return e;var r=t.encoding;if(void 0===e){if(!t.md)throw new TypeError('"options.message" or "options.md" not specified.');e=t.md.digest().getBytes(),r="binary"}if("string"==typeof e&&!r)throw new TypeError('"options.encoding" must be "binary" or "utf8".');if("string"==typeof e){if("undefined"!=typeof Buffer)return Buffer.from(e,r);e=new u(e,r)}else if(!(e instanceof u))throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');for(var n=new l(e.length()),o=0;o<n.length;++o)n[o]=e.at(o);return n}c.constants={},c.constants.PUBLIC_KEY_BYTE_LENGTH=32,c.constants.PRIVATE_KEY_BYTE_LENGTH=64,c.constants.SEED_BYTE_LENGTH=32,c.constants.SIGN_BYTE_LENGTH=64,c.constants.HASH_BYTE_LENGTH=64,c.generateKeyPair=function(t){var e=(t=t||{}).seed;if(void 0===e)e=n.random.getBytesSync(c.constants.SEED_BYTE_LENGTH);else if("string"==typeof e){if(e.length!==c.constants.SEED_BYTE_LENGTH)throw new TypeError('"seed" must be '+c.constants.SEED_BYTE_LENGTH+" bytes in length.")}else if(!(e instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');e=f({message:e,encoding:"binary"});for(var r=new l(c.constants.PUBLIC_KEY_BYTE_LENGTH),o=new l(c.constants.PRIVATE_KEY_BYTE_LENGTH),i=0;i<32;++i)o[i]=e[i];return function(t,e){var r,n=[M(),M(),M(),M()],o=S(e,32);for(o[0]&=248,o[31]&=127,o[31]|=64,A(n,o),E(t,n),r=0;r<32;++r)e[r+32]=t[r]}(r,o),{publicKey:r,privateKey:o}},c.privateKeyFromAsn1=function(t){var e={},r=[];if(!n.asn1.validate(t,a,e,r)){var o=new Error("Invalid Key.");throw o.errors=r,o}var i=n.asn1.derToOid(e.privateKeyOid),s=n.oids.EdDSA25519;if(i!==s)throw new Error('Invalid OID "'+i+'"; OID must be "'+s+'".');var u=e.privateKey;return{privateKeyBytes:f({message:n.asn1.fromDer(u).value,encoding:"binary"})}},c.publicKeyFromAsn1=function(t){var e={},r=[];if(!n.asn1.validate(t,i,e,r)){var o=new Error("Invalid Key.");throw o.errors=r,o}var a=n.asn1.derToOid(e.publicKeyOid),s=n.oids.EdDSA25519;if(a!==s)throw new Error('Invalid OID "'+a+'"; OID must be "'+s+'".');var u=e.ed25519PublicKey;if(u.length!==c.constants.PUBLIC_KEY_BYTE_LENGTH)throw new Error("Key length is invalid.");return f({message:u,encoding:"binary"})},c.publicKeyFromPrivateKey=function(t){var e=f({message:(t=t||{}).privateKey,encoding:"binary"});if(e.length!==c.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+c.constants.PRIVATE_KEY_BYTE_LENGTH);for(var r=new l(c.constants.PUBLIC_KEY_BYTE_LENGTH),n=0;n<r.length;++n)r[n]=e[32+n];return r},c.sign=function(t){var e=f(t=t||{}),r=f({message:t.privateKey,encoding:"binary"});if(r.length===c.constants.SEED_BYTE_LENGTH)r=c.generateKeyPair({seed:r}).privateKey;else if(r.length!==c.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+c.constants.SEED_BYTE_LENGTH+" or "+c.constants.PRIVATE_KEY_BYTE_LENGTH);var n=new l(c.constants.SIGN_BYTE_LENGTH+e.length);!function(t,e,r,n){var o,i,a=new Float64Array(64),s=[M(),M(),M(),M()],u=S(n,32);u[0]&=248,u[31]&=127,u[31]|=64;for(o=0;o<r;++o)t[64+o]=e[o];for(o=0;o<32;++o)t[32+o]=u[32+o];var l=S(t.subarray(32),r+32);for(O(l),A(s,l),E(t,s),o=32;o<64;++o)t[o]=n[o];var c=S(t,r+64);for(O(c),o=32;o<64;++o)a[o]=0;for(o=0;o<32;++o)a[o]=l[o];for(o=0;o<32;++o)for(i=0;i<32;i++)a[o+i]+=c[o]*u[i];w(t.subarray(32),a)}(n,e,e.length,r);for(var o=new l(c.constants.SIGN_BYTE_LENGTH),i=0;i<o.length;++i)o[i]=n[i];return o},c.verify=function(t){var e=f(t=t||{});if(void 0===t.signature)throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var r=f({message:t.signature,encoding:"binary"});if(r.length!==c.constants.SIGN_BYTE_LENGTH)throw new TypeError('"options.signature" must have a byte length of '+c.constants.SIGN_BYTE_LENGTH);var n=f({message:t.publicKey,encoding:"binary"});if(n.length!==c.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('"options.publicKey" must have a byte length of '+c.constants.PUBLIC_KEY_BYTE_LENGTH);var o,i=new l(c.constants.SIGN_BYTE_LENGTH+e.length),a=new l(c.constants.SIGN_BYTE_LENGTH+e.length);for(o=0;o<c.constants.SIGN_BYTE_LENGTH;++o)i[o]=r[o];for(o=0;o<e.length;++o)i[o+c.constants.SIGN_BYTE_LENGTH]=e[o];return function(t,e,r,n){var o,i=new l(32),a=[M(),M(),M(),M()],s=[M(),M(),M(),M()];if(r<64)return-1;if(function(t,e){var r=M(),n=M(),o=M(),i=M(),a=M(),s=M(),u=M();return I(t[2],h),function(t,e){var r;for(r=0;r<16;++r)t[r]=e[2*r]+(e[2*r+1]<<8);t[15]&=32767}(t[1],e),D(o,t[1]),F(i,o,y),B(o,o,t[2]),L(i,t[2],i),D(a,i),D(s,a),F(u,s,a),F(r,u,o),F(r,r,i),function(t,e){var r,n=M();for(r=0;r<16;++r)n[r]=e[r];for(r=250;r>=0;--r)D(n,n),1!==r&&F(n,n,e);for(r=0;r<16;++r)t[r]=n[r]}(r,r),F(r,r,o),F(r,r,i),F(r,r,i),F(t[0],r,i),D(n,t[0]),F(n,n,i),T(n,o)&&F(t[0],t[0],g),D(n,t[0]),F(n,n,i),T(n,o)?-1:(k(t[0])===e[31]>>7&&B(t[0],p,t[0]),F(t[3],t[0],t[1]),0)}(s,n))return-1;for(o=0;o<r;++o)t[o]=e[o];for(o=0;o<32;++o)t[o+32]=n[o];var u=S(t,r);if(O(u),x(a,s,u),A(s,e.subarray(32)),_(a,s),E(i,a),r-=64,j(e,0,i,0)){for(o=0;o<r;++o)t[o]=0;return-1}for(o=0;o<r;++o)t[o]=e[o+64];return r}(a,i,i.length,n)>=0};var p=M(),h=M([1]),y=M([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),d=M([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),b=M([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),v=M([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),m=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),g=M([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function S(t,e){var r=n.md.sha512.create(),o=new u(t);r.update(o.getBytes(e),"binary");var i=r.digest().getBytes();if("undefined"!=typeof Buffer)return Buffer.from(i,"binary");for(var a=new l(c.constants.HASH_BYTE_LENGTH),s=0;s<64;++s)a[s]=i.charCodeAt(s);return a}function w(t,e){var r,n,o,i;for(n=63;n>=32;--n){for(r=0,o=n-32,i=n-12;o<i;++o)e[o]+=r-16*e[n]*m[o-(n-32)],r=e[o]+128>>8,e[o]-=256*r;e[o]+=r,e[n]=0}for(r=0,o=0;o<32;++o)e[o]+=r-(e[31]>>4)*m[o],r=e[o]>>8,e[o]&=255;for(o=0;o<32;++o)e[o]-=r*m[o];for(n=0;n<32;++n)e[n+1]+=e[n]>>8,t[n]=255&e[n]}function O(t){for(var e=new Float64Array(64),r=0;r<64;++r)e[r]=t[r],t[r]=0;w(t,e)}function _(t,e){var r=M(),n=M(),o=M(),i=M(),a=M(),s=M(),u=M(),l=M(),c=M();B(r,t[1],t[0]),B(c,e[1],e[0]),F(r,r,c),L(n,t[0],t[1]),L(c,e[0],e[1]),F(n,n,c),F(o,t[3],e[3]),F(o,o,d),F(i,t[2],e[2]),L(i,i,i),B(a,n,r),B(s,i,o),L(u,i,o),L(l,n,r),F(t[0],a,s),F(t[1],l,u),F(t[2],u,s),F(t[3],a,l)}function P(t,e,r){for(var n=0;n<4;++n)R(t[n],e[n],r)}function E(t,e){var r=M(),n=M(),o=M();!function(t,e){var r,n=M();for(r=0;r<16;++r)n[r]=e[r];for(r=253;r>=0;--r)D(n,n),2!==r&&4!==r&&F(n,n,e);for(r=0;r<16;++r)t[r]=n[r]}(o,e[2]),F(r,e[0],o),F(n,e[1],o),C(t,n),t[31]^=k(r)<<7}function C(t,e){var r,n,o,i=M(),a=M();for(r=0;r<16;++r)a[r]=e[r];for(N(a),N(a),N(a),n=0;n<2;++n){for(i[0]=a[0]-65517,r=1;r<15;++r)i[r]=a[r]-65535-(i[r-1]>>16&1),i[r-1]&=65535;i[15]=a[15]-32767-(i[14]>>16&1),o=i[15]>>16&1,i[14]&=65535,R(a,i,1-o)}for(r=0;r<16;r++)t[2*r]=255&a[r],t[2*r+1]=a[r]>>8}function T(t,e){var r=new l(32),n=new l(32);return C(r,t),C(n,e),j(r,0,n,0)}function j(t,e,r,n){return function(t,e,r,n,o){var i,a=0;for(i=0;i<32;++i)a|=t[e+i]^r[n+i];return(1&a-1>>>8)-1}(t,e,r,n)}function k(t){var e=new l(32);return C(e,t),1&e[0]}function x(t,e,r){var n,o;for(I(t[0],p),I(t[1],h),I(t[2],h),I(t[3],p),o=255;o>=0;--o)P(t,e,n=r[o/8|0]>>(7&o)&1),_(e,t),_(t,t),P(t,e,n)}function A(t,e){var r=[M(),M(),M(),M()];I(r[0],b),I(r[1],v),I(r[2],h),F(r[3],b,v),x(t,r,e)}function I(t,e){var r;for(r=0;r<16;r++)t[r]=0|e[r]}function N(t){var e,r,n=1;for(e=0;e<16;++e)r=t[e]+n+65535,n=Math.floor(r/65536),t[e]=r-65536*n;t[0]+=n-1+37*(n-1)}function R(t,e,r){for(var n,o=~(r-1),i=0;i<16;++i)n=o&(t[i]^e[i]),t[i]^=n,e[i]^=n}function M(t){var e,r=new Float64Array(16);if(t)for(e=0;e<t.length;++e)r[e]=t[e];return r}function L(t,e,r){for(var n=0;n<16;++n)t[n]=e[n]+r[n]}function B(t,e,r){for(var n=0;n<16;++n)t[n]=e[n]-r[n]}function D(t,e){F(t,e,e)}function F(t,e,r){var n,o,i=0,a=0,s=0,u=0,l=0,c=0,f=0,p=0,h=0,y=0,d=0,b=0,v=0,m=0,g=0,S=0,w=0,O=0,_=0,P=0,E=0,C=0,T=0,j=0,k=0,x=0,A=0,I=0,N=0,R=0,M=0,L=r[0],B=r[1],D=r[2],F=r[3],U=r[4],G=r[5],V=r[6],q=r[7],H=r[8],z=r[9],J=r[10],W=r[11],K=r[12],Q=r[13],Y=r[14],X=r[15];i+=(n=e[0])*L,a+=n*B,s+=n*D,u+=n*F,l+=n*U,c+=n*G,f+=n*V,p+=n*q,h+=n*H,y+=n*z,d+=n*J,b+=n*W,v+=n*K,m+=n*Q,g+=n*Y,S+=n*X,a+=(n=e[1])*L,s+=n*B,u+=n*D,l+=n*F,c+=n*U,f+=n*G,p+=n*V,h+=n*q,y+=n*H,d+=n*z,b+=n*J,v+=n*W,m+=n*K,g+=n*Q,S+=n*Y,w+=n*X,s+=(n=e[2])*L,u+=n*B,l+=n*D,c+=n*F,f+=n*U,p+=n*G,h+=n*V,y+=n*q,d+=n*H,b+=n*z,v+=n*J,m+=n*W,g+=n*K,S+=n*Q,w+=n*Y,O+=n*X,u+=(n=e[3])*L,l+=n*B,c+=n*D,f+=n*F,p+=n*U,h+=n*G,y+=n*V,d+=n*q,b+=n*H,v+=n*z,m+=n*J,g+=n*W,S+=n*K,w+=n*Q,O+=n*Y,_+=n*X,l+=(n=e[4])*L,c+=n*B,f+=n*D,p+=n*F,h+=n*U,y+=n*G,d+=n*V,b+=n*q,v+=n*H,m+=n*z,g+=n*J,S+=n*W,w+=n*K,O+=n*Q,_+=n*Y,P+=n*X,c+=(n=e[5])*L,f+=n*B,p+=n*D,h+=n*F,y+=n*U,d+=n*G,b+=n*V,v+=n*q,m+=n*H,g+=n*z,S+=n*J,w+=n*W,O+=n*K,_+=n*Q,P+=n*Y,E+=n*X,f+=(n=e[6])*L,p+=n*B,h+=n*D,y+=n*F,d+=n*U,b+=n*G,v+=n*V,m+=n*q,g+=n*H,S+=n*z,w+=n*J,O+=n*W,_+=n*K,P+=n*Q,E+=n*Y,C+=n*X,p+=(n=e[7])*L,h+=n*B,y+=n*D,d+=n*F,b+=n*U,v+=n*G,m+=n*V,g+=n*q,S+=n*H,w+=n*z,O+=n*J,_+=n*W,P+=n*K,E+=n*Q,C+=n*Y,T+=n*X,h+=(n=e[8])*L,y+=n*B,d+=n*D,b+=n*F,v+=n*U,m+=n*G,g+=n*V,S+=n*q,w+=n*H,O+=n*z,_+=n*J,P+=n*W,E+=n*K,C+=n*Q,T+=n*Y,j+=n*X,y+=(n=e[9])*L,d+=n*B,b+=n*D,v+=n*F,m+=n*U,g+=n*G,S+=n*V,w+=n*q,O+=n*H,_+=n*z,P+=n*J,E+=n*W,C+=n*K,T+=n*Q,j+=n*Y,k+=n*X,d+=(n=e[10])*L,b+=n*B,v+=n*D,m+=n*F,g+=n*U,S+=n*G,w+=n*V,O+=n*q,_+=n*H,P+=n*z,E+=n*J,C+=n*W,T+=n*K,j+=n*Q,k+=n*Y,x+=n*X,b+=(n=e[11])*L,v+=n*B,m+=n*D,g+=n*F,S+=n*U,w+=n*G,O+=n*V,_+=n*q,P+=n*H,E+=n*z,C+=n*J,T+=n*W,j+=n*K,k+=n*Q,x+=n*Y,A+=n*X,v+=(n=e[12])*L,m+=n*B,g+=n*D,S+=n*F,w+=n*U,O+=n*G,_+=n*V,P+=n*q,E+=n*H,C+=n*z,T+=n*J,j+=n*W,k+=n*K,x+=n*Q,A+=n*Y,I+=n*X,m+=(n=e[13])*L,g+=n*B,S+=n*D,w+=n*F,O+=n*U,_+=n*G,P+=n*V,E+=n*q,C+=n*H,T+=n*z,j+=n*J,k+=n*W,x+=n*K,A+=n*Q,I+=n*Y,N+=n*X,g+=(n=e[14])*L,S+=n*B,w+=n*D,O+=n*F,_+=n*U,P+=n*G,E+=n*V,C+=n*q,T+=n*H,j+=n*z,k+=n*J,x+=n*W,A+=n*K,I+=n*Q,N+=n*Y,R+=n*X,S+=(n=e[15])*L,a+=38*(O+=n*D),s+=38*(_+=n*F),u+=38*(P+=n*U),l+=38*(E+=n*G),c+=38*(C+=n*V),f+=38*(T+=n*q),p+=38*(j+=n*H),h+=38*(k+=n*z),y+=38*(x+=n*J),d+=38*(A+=n*W),b+=38*(I+=n*K),v+=38*(N+=n*Q),m+=38*(R+=n*Y),g+=38*(M+=n*X),i=(n=(i+=38*(w+=n*B))+(o=1)+65535)-65536*(o=Math.floor(n/65536)),a=(n=a+o+65535)-65536*(o=Math.floor(n/65536)),s=(n=s+o+65535)-65536*(o=Math.floor(n/65536)),u=(n=u+o+65535)-65536*(o=Math.floor(n/65536)),l=(n=l+o+65535)-65536*(o=Math.floor(n/65536)),c=(n=c+o+65535)-65536*(o=Math.floor(n/65536)),f=(n=f+o+65535)-65536*(o=Math.floor(n/65536)),p=(n=p+o+65535)-65536*(o=Math.floor(n/65536)),h=(n=h+o+65535)-65536*(o=Math.floor(n/65536)),y=(n=y+o+65535)-65536*(o=Math.floor(n/65536)),d=(n=d+o+65535)-65536*(o=Math.floor(n/65536)),b=(n=b+o+65535)-65536*(o=Math.floor(n/65536)),v=(n=v+o+65535)-65536*(o=Math.floor(n/65536)),m=(n=m+o+65535)-65536*(o=Math.floor(n/65536)),g=(n=g+o+65535)-65536*(o=Math.floor(n/65536)),S=(n=S+o+65535)-65536*(o=Math.floor(n/65536)),i=(n=(i+=o-1+37*(o-1))+(o=1)+65535)-65536*(o=Math.floor(n/65536)),a=(n=a+o+65535)-65536*(o=Math.floor(n/65536)),s=(n=s+o+65535)-65536*(o=Math.floor(n/65536)),u=(n=u+o+65535)-65536*(o=Math.floor(n/65536)),l=(n=l+o+65535)-65536*(o=Math.floor(n/65536)),c=(n=c+o+65535)-65536*(o=Math.floor(n/65536)),f=(n=f+o+65535)-65536*(o=Math.floor(n/65536)),p=(n=p+o+65535)-65536*(o=Math.floor(n/65536)),h=(n=h+o+65535)-65536*(o=Math.floor(n/65536)),y=(n=y+o+65535)-65536*(o=Math.floor(n/65536)),d=(n=d+o+65535)-65536*(o=Math.floor(n/65536)),b=(n=b+o+65535)-65536*(o=Math.floor(n/65536)),v=(n=v+o+65535)-65536*(o=Math.floor(n/65536)),m=(n=m+o+65535)-65536*(o=Math.floor(n/65536)),g=(n=g+o+65535)-65536*(o=Math.floor(n/65536)),S=(n=S+o+65535)-65536*(o=Math.floor(n/65536)),i+=o-1+37*(o-1),t[0]=i,t[1]=a,t[2]=s,t[3]=u,t[4]=l,t[5]=c,t[6]=f,t[7]=p,t[8]=h,t[9]=y,t[10]=d,t[11]=b,t[12]=v,t[13]=m,t[14]=g,t[15]=S}},function(t,e,r){var n=r(0);r(3);var o=n.asn1;e.privateKeyValidator={name:"PrivateKeyInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},e.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{tagClass:o.Class.UNIVERSAL,type:o.Type.BITSTRING,constructed:!1,composed:!0,captureBitStringValue:"ed25519PublicKey"}]}},function(t,e,r){var n=r(0);r(1),r(2),r(12),t.exports=n.kem=n.kem||{};var o=n.jsbn.BigInteger;function i(t,e,r,o){t.generate=function(t,i){for(var a=new n.util.ByteBuffer,s=Math.ceil(i/o)+r,u=new n.util.ByteBuffer,l=r;l<s;++l){u.putInt32(l),e.start(),e.update(t+u.getBytes());var c=e.digest();a.putBytes(c.getBytes(o))}return a.truncate(a.length()-i),a.getBytes()}}n.kem.rsa={},n.kem.rsa.create=function(t,e){var r=(e=e||{}).prng||n.random;return{encrypt:function(e,i){var a,s=Math.ceil(e.n.bitLength()/8);do{a=new o(n.util.bytesToHex(r.getBytesSync(s)),16).mod(e.n)}while(a.compareTo(o.ONE)<=0);var u=s-(a=n.util.hexToBytes(a.toString(16))).length;return u>0&&(a=n.util.fillString(String.fromCharCode(0),u)+a),{encapsulation:e.encrypt(a,"NONE"),key:t.generate(a,i)}},decrypt:function(e,r,n){var o=e.decrypt(r,"NONE");return t.generate(o,n)}}},n.kem.kdf1=function(t,e){i(this,t,0,e||t.digestLength)},n.kem.kdf2=function(t,e){i(this,t,1,e||t.digestLength)}},function(t,e,r){var n=r(0);r(1),t.exports=n.log=n.log||{},n.log.levels=["none","error","warning","info","debug","verbose","max"];var o={},i=[],a=null;n.log.LEVEL_LOCKED=2,n.log.NO_LEVEL_CHECK=4,n.log.INTERPOLATE=8;for(var s=0;s<n.log.levels.length;++s){var u=n.log.levels[s];o[u]={index:s,name:u.toUpperCase()}}n.log.logMessage=function(t){for(var e=o[t.level].index,r=0;r<i.length;++r){var a=i[r];a.flags&n.log.NO_LEVEL_CHECK?a.f(t):e<=o[a.level].index&&a.f(a,t)}},n.log.prepareStandard=function(t){"standard"in t||(t.standard=o[t.level].name+" ["+t.category+"] "+t.message)},n.log.prepareFull=function(t){if(!("full"in t)){var e=[t.message];e=e.concat([]||0),t.full=n.util.format.apply(this,e)}},n.log.prepareStandardFull=function(t){"standardFull"in t||(n.log.prepareStandard(t),t.standardFull=t.standard)};var l=["error","warning","info","debug","verbose"];for(s=0;s<l.length;++s)!function(t){n.log[t]=function(e,r){var o=Array.prototype.slice.call(arguments).slice(2),i={timestamp:new Date,level:t,category:e,message:r,arguments:o};n.log.logMessage(i)}}(l[s]);if(n.log.makeLogger=function(t){var e={flags:0,f:t};return n.log.setLevel(e,"none"),e},n.log.setLevel=function(t,e){var r=!1;if(t&&!(t.flags&n.log.LEVEL_LOCKED))for(var o=0;o<n.log.levels.length;++o)if(e==n.log.levels[o]){t.level=e,r=!0;break}return r},n.log.lock=function(t,e){void 0===e||e?t.flags|=n.log.LEVEL_LOCKED:t.flags&=~n.log.LEVEL_LOCKED},n.log.addLogger=function(t){i.push(t)},"undefined"!=typeof console&&"log"in console){var c;if(console.error&&console.warn&&console.info&&console.debug){var f={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},p=function(t,e){n.log.prepareStandard(e);var r=f[e.level],o=[e.standard];o=o.concat(e.arguments.slice()),r.apply(console,o)};c=n.log.makeLogger(p)}else p=function(t,e){n.log.prepareStandardFull(e),console.log(e.standardFull)},c=n.log.makeLogger(p);n.log.setLevel(c,"debug"),n.log.addLogger(c),a=c}else console={log:function(){}};if(null!==a&&"undefined"!=typeof window&&window.location){var h=new URL(window.location.href).searchParams;h.has("console.level")&&n.log.setLevel(a,h.get("console.level").slice(-1)[0]),h.has("console.lock")&&"true"==h.get("console.lock").slice(-1)[0]&&n.log.lock(a)}n.log.consoleLogger=a},function(t,e,r){t.exports=r(4),r(14),r(9),r(23),r(31)},function(t,e,r){var n=r(0);r(5),r(3),r(10),r(6),r(7),r(29),r(2),r(1),r(17);var o=n.asn1,i=t.exports=n.pkcs7=n.pkcs7||{};function a(t){var e={},r=[];if(!o.validate(t,i.asn1.recipientInfoValidator,e,r)){var a=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw a.errors=r,a}return{version:e.version.charCodeAt(0),issuer:n.pki.RDNAttributesAsArray(e.issuer),serialNumber:n.util.createBuffer(e.serial).toHex(),encryptedContent:{algorithm:o.derToOid(e.encAlgorithm),parameter:e.encParameter?e.encParameter.value:void 0,content:e.encKey}}}function u(t){var e=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(t.version).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[n.pki.distinguishedNameToAsn1({attributes:t.issuer}),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,n.util.hexToBytes(t.serialNumber))]),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(t.digestAlgorithm).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")])]);if(t.authenticatedAttributesAsn1&&e.value.push(t.authenticatedAttributesAsn1),e.value.push(o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(t.signatureAlgorithm).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")])),e.value.push(o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,t.signature)),t.unauthenticatedAttributes.length>0){for(var r=o.create(o.Class.CONTEXT_SPECIFIC,1,!0,[]),i=0;i<t.unauthenticatedAttributes.length;++i){var a=t.unauthenticatedAttributes[i];r.values.push(l(a))}e.value.push(r)}return e}function l(t){var e;if(t.type===n.pki.oids.contentType)e=o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(t.value).getBytes());else if(t.type===n.pki.oids.messageDigest)e=o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,t.value.bytes());else if(t.type===n.pki.oids.signingTime){var r=new Date("1950-01-01T00:00:00Z"),i=new Date("2050-01-01T00:00:00Z"),a=t.value;if("string"==typeof a){var s=Date.parse(a);a=isNaN(s)?13===a.length?o.utcTimeToDate(a):o.generalizedTimeToDate(a):new Date(s)}e=a>=r&&a<i?o.create(o.Class.UNIVERSAL,o.Type.UTCTIME,!1,o.dateToUtcTime(a)):o.create(o.Class.UNIVERSAL,o.Type.GENERALIZEDTIME,!1,o.dateToGeneralizedTime(a))}return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(t.type).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SET,!0,[e])])}function c(t,e,r){var i={};if(!o.validate(e,r,i,[])){var a=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw a.errors=a,a}if(o.derToOid(i.contentType)!==n.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(i.encryptedContent){var s="";if(n.util.isArray(i.encryptedContent))for(var u=0;u<i.encryptedContent.length;++u){if(i.encryptedContent[u].type!==o.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");s+=i.encryptedContent[u].value}else s=i.encryptedContent;t.encryptedContent={algorithm:o.derToOid(i.encAlgorithm),parameter:n.util.createBuffer(i.encParameter.value),content:n.util.createBuffer(s)}}if(i.content){if(s="",n.util.isArray(i.content))for(u=0;u<i.content.length;++u){if(i.content[u].type!==o.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");s+=i.content[u].value}else s=i.content;t.content=n.util.createBuffer(s)}return t.version=i.version.charCodeAt(0),t.rawCapture=i,i}function f(t){if(void 0===t.encryptedContent.key)throw new Error("Symmetric key not available.");if(void 0===t.content){var e;switch(t.encryptedContent.algorithm){case n.pki.oids["aes128-CBC"]:case n.pki.oids["aes192-CBC"]:case n.pki.oids["aes256-CBC"]:e=n.aes.createDecryptionCipher(t.encryptedContent.key);break;case n.pki.oids.desCBC:case n.pki.oids["des-EDE3-CBC"]:e=n.des.createDecryptionCipher(t.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+t.encryptedContent.algorithm)}if(e.start(t.encryptedContent.parameter),e.update(t.encryptedContent.content),!e.finish())throw new Error("Symmetric decryption failed.");t.content=e.output}}i.messageFromPem=function(t){var e=n.pem.decode(t)[0];if("PKCS7"!==e.type){var r=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw r.headerType=e.type,r}if(e.procType&&"ENCRYPTED"===e.procType.type)throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var a=o.fromDer(e.body);return i.messageFromAsn1(a)},i.messageToPem=function(t,e){var r={type:"PKCS7",body:o.toDer(t.toAsn1()).getBytes()};return n.pem.encode(r,{maxline:e})},i.messageFromAsn1=function(t){var e={},r=[];if(!o.validate(t,i.asn1.contentInfoValidator,e,r)){var a=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw a.errors=r,a}var s,u=o.derToOid(e.contentType);switch(u){case n.pki.oids.envelopedData:s=i.createEnvelopedData();break;case n.pki.oids.encryptedData:s=i.createEncryptedData();break;case n.pki.oids.signedData:s=i.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+u+" is not (yet) supported.")}return s.fromAsn1(e.content.value[0]),s},i.createSignedData=function(){var t=null;return t={type:n.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(e){if(c(t,e,i.asn1.signedDataValidator),t.certificates=[],t.crls=[],t.digestAlgorithmIdentifiers=[],t.contentInfo=null,t.signerInfos=[],t.rawCapture.certificates)for(var r=t.rawCapture.certificates.value,o=0;o<r.length;++o)t.certificates.push(n.pki.certificateFromAsn1(r[o]))},toAsn1:function(){t.contentInfo||t.sign();for(var e=[],r=0;r<t.certificates.length;++r)e.push(n.pki.certificateToAsn1(t.certificates[r]));var i=[],a=o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(t.version).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SET,!0,t.digestAlgorithmIdentifiers),t.contentInfo])]);return e.length>0&&a.value[0].value.push(o.create(o.Class.CONTEXT_SPECIFIC,0,!0,e)),i.length>0&&a.value[0].value.push(o.create(o.Class.CONTEXT_SPECIFIC,1,!0,i)),a.value[0].value.push(o.create(o.Class.UNIVERSAL,o.Type.SET,!0,t.signerInfos)),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(t.type).getBytes()),a])},addSigner:function(e){var r=e.issuer,o=e.serialNumber;if(e.certificate){var i=e.certificate;"string"==typeof i&&(i=n.pki.certificateFromPem(i)),r=i.issuer.attributes,o=i.serialNumber}var a=e.key;if(!a)throw new Error("Could not add PKCS#7 signer; no private key specified.");"string"==typeof a&&(a=n.pki.privateKeyFromPem(a));var s=e.digestAlgorithm||n.pki.oids.sha1;switch(s){case n.pki.oids.sha1:case n.pki.oids.sha256:case n.pki.oids.sha384:case n.pki.oids.sha512:case n.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+s)}var u=e.authenticatedAttributes||[];if(u.length>0){for(var l=!1,c=!1,f=0;f<u.length;++f){var p=u[f];if(l||p.type!==n.pki.oids.contentType){if(c||p.type!==n.pki.oids.messageDigest);else if(c=!0,l)break}else if(l=!0,c)break}if(!l||!c)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}t.signers.push({key:a,version:1,issuer:r,serialNumber:o,digestAlgorithm:s,signatureAlgorithm:n.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:u,unauthenticatedAttributes:[]})},sign:function(e){var r;e=e||{},("object"!=s(t.content)||null===t.contentInfo)&&(t.contentInfo=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(n.pki.oids.data).getBytes())]),"content"in t&&(t.content instanceof n.util.ByteBuffer?r=t.content.bytes():"string"==typeof t.content&&(r=n.util.encodeUtf8(t.content)),e.detached?t.detachedContent=o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,r):t.contentInfo.value.push(o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,r)])))),0!==t.signers.length&&function(e){var r;if(!(r=t.detachedContent?t.detachedContent:(r=t.contentInfo.value[1]).value[0]))throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var i=o.derToOid(t.contentInfo.value[0].value),a=o.toDer(r);for(var s in a.getByte(),o.getBerValueLength(a),a=a.getBytes(),e)e[s].start().update(a);for(var c=new Date,f=0;f<t.signers.length;++f){var p=t.signers[f];if(0===p.authenticatedAttributes.length){if(i!==n.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{p.authenticatedAttributesAsn1=o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var h=o.create(o.Class.UNIVERSAL,o.Type.SET,!0,[]),y=0;y<p.authenticatedAttributes.length;++y){var d=p.authenticatedAttributes[y];d.type===n.pki.oids.messageDigest?d.value=e[p.digestAlgorithm].digest():d.type===n.pki.oids.signingTime&&(d.value||(d.value=c)),h.value.push(l(d)),p.authenticatedAttributesAsn1.value.push(l(d))}a=o.toDer(h).getBytes(),p.md.start().update(a)}p.signature=p.key.sign(p.md,"RSASSA-PKCS1-V1_5")}t.signerInfos=function(t){for(var e=[],r=0;r<t.length;++r)e.push(u(t[r]));return e}(t.signers)}(function(){for(var e={},r=0;r<t.signers.length;++r){var i=t.signers[r];(a=i.digestAlgorithm)in e||(e[a]=n.md[n.pki.oids[a]].create()),0===i.authenticatedAttributes.length?i.md=e[a]:i.md=n.md[n.pki.oids[a]].create()}for(var a in t.digestAlgorithmIdentifiers=[],e)t.digestAlgorithmIdentifiers.push(o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(a).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")]));return e}())},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(e){"string"==typeof e&&(e=n.pki.certificateFromPem(e)),t.certificates.push(e)},addCertificateRevokationList:function(t){throw new Error("PKCS#7 CRL support not yet implemented.")}}},i.createEncryptedData=function(){var t=null;return t={type:n.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:n.pki.oids["aes256-CBC"]},fromAsn1:function(e){c(t,e,i.asn1.encryptedDataValidator)},decrypt:function(e){void 0!==e&&(t.encryptedContent.key=e),f(t)}}},i.createEnvelopedData=function(){var t=null;return t={type:n.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:n.pki.oids["aes256-CBC"]},fromAsn1:function(e){var r=c(t,e,i.asn1.envelopedDataValidator);t.recipients=function(t){for(var e=[],r=0;r<t.length;++r)e.push(a(t[r]));return e}(r.recipientInfos.value)},toAsn1:function(){return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(t.type).getBytes()),o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(t.version).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SET,!0,function(t){for(var e,r=[],i=0;i<t.length;++i)r.push((e=t[i],o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(e.version).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[n.pki.distinguishedNameToAsn1({attributes:e.issuer}),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,n.util.hexToBytes(e.serialNumber))]),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(e.encryptedContent.algorithm).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")]),o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,e.encryptedContent.content)])));return r}(t.recipients)),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,(e=t.encryptedContent,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(n.pki.oids.data).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(e.algorithm).getBytes()),e.parameter?o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,e.parameter.getBytes()):void 0]),o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,e.content.getBytes())])]))])])]);var e},findRecipient:function(e){for(var r=e.issuer.attributes,n=0;n<t.recipients.length;++n){var o=t.recipients[n],i=o.issuer;if(o.serialNumber===e.serialNumber&&i.length===r.length){for(var a=!0,s=0;s<r.length;++s)if(i[s].type!==r[s].type||i[s].value!==r[s].value){a=!1;break}if(a)return o}}return null},decrypt:function(e,r){if(void 0===t.encryptedContent.key&&void 0!==e&&void 0!==r)switch(e.encryptedContent.algorithm){case n.pki.oids.rsaEncryption:case n.pki.oids.desCBC:var o=r.decrypt(e.encryptedContent.content);t.encryptedContent.key=n.util.createBuffer(o);break;default:throw new Error("Unsupported asymmetric cipher, OID "+e.encryptedContent.algorithm)}f(t)},addRecipient:function(e){t.recipients.push({version:0,issuer:e.issuer.attributes,serialNumber:e.serialNumber,encryptedContent:{algorithm:n.pki.oids.rsaEncryption,key:e.publicKey}})},encrypt:function(e,r){if(void 0===t.encryptedContent.content){var o,i,a;switch(r=r||t.encryptedContent.algorithm,e=e||t.encryptedContent.key,r){case n.pki.oids["aes128-CBC"]:o=16,i=16,a=n.aes.createEncryptionCipher;break;case n.pki.oids["aes192-CBC"]:o=24,i=16,a=n.aes.createEncryptionCipher;break;case n.pki.oids["aes256-CBC"]:o=32,i=16,a=n.aes.createEncryptionCipher;break;case n.pki.oids["des-EDE3-CBC"]:o=24,i=8,a=n.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+r)}if(void 0===e)e=n.util.createBuffer(n.random.getBytes(o));else if(e.length()!=o)throw new Error("Symmetric key has wrong length; got "+e.length()+" bytes, expected "+o+".");t.encryptedContent.algorithm=r,t.encryptedContent.key=e,t.encryptedContent.parameter=n.util.createBuffer(n.random.getBytes(i));var s=a(e);if(s.start(t.encryptedContent.parameter.copy()),s.update(t.content),!s.finish())throw new Error("Symmetric encryption failed.");t.encryptedContent.content=s.output}for(var u=0;u<t.recipients.length;++u){var l=t.recipients[u];if(void 0===l.encryptedContent.content)switch(l.encryptedContent.algorithm){case n.pki.oids.rsaEncryption:l.encryptedContent.content=l.encryptedContent.key.encrypt(t.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+l.encryptedContent.algorithm)}}}}}},function(t,e,r){var n=r(0);r(5),r(8),r(14),r(9),r(1);var o=t.exports=n.ssh=n.ssh||{};function i(t,e){var r=e.toString(16);r[0]>="8"&&(r="00"+r);var o=n.util.hexToBytes(r);t.putInt32(o.length),t.putBytes(o)}function a(t,e){t.putInt32(e.length),t.putString(e)}function s(){for(var t=n.md.sha1.create(),e=arguments.length,r=0;r<e;++r)t.update(arguments[r]);return t.digest()}o.privateKeyToPutty=function(t,e,r){var o=""===(e=e||"")?"none":"aes256-cbc",u="PuTTY-User-Key-File-2: ssh-rsa\r\n";u+="Encryption: "+o+"\r\n",u+="Comment: "+(r=r||"")+"\r\n";var l=n.util.createBuffer();a(l,"ssh-rsa"),i(l,t.e),i(l,t.n);var c=n.util.encode64(l.bytes(),64),f=Math.floor(c.length/66)+1;u+="Public-Lines: "+f+"\r\n",u+=c;var p,h=n.util.createBuffer();if(i(h,t.d),i(h,t.p),i(h,t.q),i(h,t.qInv),e){var y=h.length()+16-1;y-=y%16;var d=s(h.bytes());d.truncate(d.length()-y+h.length()),h.putBuffer(d);var b=n.util.createBuffer();b.putBuffer(s("\0\0\0\0",e)),b.putBuffer(s("\0\0\0",e));var v=n.aes.createEncryptionCipher(b.truncate(8),"CBC");v.start(n.util.createBuffer().fillWithByte(0,16)),v.update(h.copy()),v.finish();var m=v.output;m.truncate(16),p=n.util.encode64(m.bytes(),64)}else p=n.util.encode64(h.bytes(),64);u+="\r\nPrivate-Lines: "+(f=Math.floor(p.length/66)+1)+"\r\n",u+=p;var g=s("putty-private-key-file-mac-key",e),S=n.util.createBuffer();a(S,"ssh-rsa"),a(S,o),a(S,r),S.putInt32(l.length()),S.putBuffer(l),S.putInt32(h.length()),S.putBuffer(h);var w=n.hmac.create();return w.start("sha1",g),w.update(S.bytes()),u+"\r\nPrivate-MAC: "+w.digest().toHex()+"\r\n"},o.publicKeyToOpenSSH=function(t,e){e=e||"";var r=n.util.createBuffer();return a(r,"ssh-rsa"),i(r,t.e),i(r,t.n),"ssh-rsa "+n.util.encode64(r.bytes())+" "+e},o.privateKeyToOpenSSH=function(t,e){return e?n.pki.encryptRsaPrivateKey(t,e,{legacy:!0,algorithm:"aes128"}):n.pki.privateKeyToPem(t)},o.getPublicKeyFingerprint=function(t,e){var r=(e=e||{}).md||n.md.md5.create(),o=n.util.createBuffer();a(o,"ssh-rsa"),i(o,t.e),i(o,t.n),r.start(),r.update(o.getBytes());var s=r.digest();if("hex"===e.encoding){var u=s.toHex();return e.delimiter?u.match(/.{2}/g).join(e.delimiter):u}if("binary"===e.encoding)return s.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".');return s}}])},"object"==s(e)&&"object"==s(t)?t.exports=a():(o=[],void 0===(i="function"==typeof(n=a)?n.apply(e,o):n)||(t.exports=i))},5246:function(t,e,r){var n,o,i;function a(t){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}i=function(){"use strict";function t(t){var e=this.constructor;return this.then(function(r){return e.resolve(t()).then(function(){return r})},function(r){return e.resolve(t()).then(function(){return e.reject(r)})})}function e(t){return new this(function(e,r){if(!t||void 0===t.length)return r(new TypeError(a(t)+" "+t+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var n=Array.prototype.slice.call(t);if(0===n.length)return e([]);var o=n.length;function i(t,r){if(r&&("object"===a(r)||"function"==typeof r)){var s=r.then;if("function"==typeof s)return void s.call(r,function(e){i(t,e)},function(r){n[t]={status:"rejected",reason:r},0==--o&&e(n)})}n[t]={status:"fulfilled",value:r},0==--o&&e(n)}for(var s=0;s<n.length;s++)i(s,n[s])})}var n=setTimeout;function o(t){return Boolean(t&&void 0!==t.length)}function i(){}function s(t){if(!(this instanceof s))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],p(t,this)}function u(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,s._immediateFn(function(){var r=1===t._state?e.onFulfilled:e.onRejected;if(null!==r){var n;try{n=r(t._value)}catch(t){return void c(e.promise,t)}l(e.promise,n)}else(1===t._state?l:c)(e.promise,t._value)})):t._deferreds.push(e)}function l(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"===a(e)||"function"==typeof e)){var r=e.then;if(e instanceof s)return t._state=3,t._value=e,void f(t);if("function"==typeof r)return void p((n=r,o=e,function(){n.apply(o,arguments)}),t)}t._state=1,t._value=e,f(t)}catch(e){c(t,e)}var n,o}function c(t,e){t._state=2,t._value=e,f(t)}function f(t){2===t._state&&0===t._deferreds.length&&s._immediateFn(function(){t._handled||s._unhandledRejectionFn(t._value)});for(var e=0,r=t._deferreds.length;e<r;e++)u(t,t._deferreds[e]);t._deferreds=null}function p(t,e){var r=!1;try{t(function(t){r||(r=!0,l(e,t))},function(t){r||(r=!0,c(e,t))})}catch(t){if(r)return;r=!0,c(e,t)}}s.prototype.catch=function(t){return this.then(null,t)},s.prototype.then=function(t,e){var r=new this.constructor(i);return u(this,new function(t,e,r){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=r}(t,e,r)),r},s.prototype.finally=t,s.all=function(t){return new s(function(e,r){if(!o(t))return r(new TypeError("Promise.all accepts an array"));var n=Array.prototype.slice.call(t);if(0===n.length)return e([]);var i=n.length;function s(t,o){try{if(o&&("object"===a(o)||"function"==typeof o)){var u=o.then;if("function"==typeof u)return void u.call(o,function(e){s(t,e)},r)}n[t]=o,0==--i&&e(n)}catch(t){r(t)}}for(var u=0;u<n.length;u++)s(u,n[u])})},s.allSettled=e,s.resolve=function(t){return t&&"object"===a(t)&&t.constructor===s?t:new s(function(e){e(t)})},s.reject=function(t){return new s(function(e,r){r(t)})},s.race=function(t){return new s(function(e,r){if(!o(t))return r(new TypeError("Promise.race accepts an array"));for(var n=0,i=t.length;n<i;n++)s.resolve(t[n]).then(e,r)})},s._immediateFn="function"==typeof setImmediate&&function(t){setImmediate(t)}||function(t){n(t,0)},s._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var h=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r.g)return r.g;throw new Error("unable to locate global object")}();"function"!=typeof h.Promise?h.Promise=s:(h.Promise.prototype.finally||(h.Promise.prototype.finally=t),h.Promise.allSettled||(h.Promise.allSettled=e))},"object"===a(e)?i():void 0===(o="function"==typeof(n=i)?n.call(e,r,e,t):n)||(t.exports=o)},1089:function(t,e,r){var n,o,i;function a(t){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}i=function(){"use strict";function t(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function e(t,e){return t<e?-1:t>e?1:0}return function(r,n,o,i,a){!function e(r,n,o,i,a){for(;i>o;){if(i-o>600){var s=i-o+1,u=n-o+1,l=Math.log(s),c=.5*Math.exp(2*l/3),f=.5*Math.sqrt(l*c*(s-c)/s)*(u-s/2<0?-1:1),p=Math.max(o,Math.floor(n-u*c/s+f)),h=Math.min(i,Math.floor(n+(s-u)*c/s+f));e(r,n,p,h,a)}var y=r[n],d=o,b=i;for(t(r,o,n),a(r[i],y)>0&&t(r,o,i);d<b;){for(t(r,d,b),d++,b--;a(r[d],y)<0;)d++;for(;a(r[b],y)>0;)b--}0===a(r[o],y)?t(r,o,b):t(r,++b,i),b<=n&&(o=b+1),n<=b&&(i=b-1)}}(r,n,o||0,i||r.length-1,a||e)}},"object"===a(e)?t.exports=i():void 0===(o="function"==typeof(n=i)?n.call(e,r,e,t):n)||(t.exports=o)},833:function(t,e,r){"use strict";t.exports=o,t.exports.default=o;var n=r(1089);function o(t,e){if(!(this instanceof o))return new o(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function i(t,e,r){if(!r)return e.indexOf(t);for(var n=0;n<e.length;n++)if(r(t,e[n]))return n;return-1}function a(t,e){s(t,0,t.children.length,e,t)}function s(t,e,r,n,o){o||(o=d(null)),o.minX=1/0,o.minY=1/0,o.maxX=-1/0,o.maxY=-1/0;for(var i,a=e;a<r;a++)i=t.children[a],u(o,t.leaf?n(i):i);return o}function u(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function l(t,e){return t.minX-e.minX}function c(t,e){return t.minY-e.minY}function f(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function p(t){return t.maxX-t.minX+(t.maxY-t.minY)}function h(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function y(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function d(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function b(t,e,r,o,i){for(var a,s=[e,r];s.length;)(r=s.pop())-(e=s.pop())<=o||(a=e+Math.ceil((r-e)/o/2)*o,n(t,a,e,r,i),s.push(e,a,a,r))}o.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,r=[],n=this.toBBox;if(!y(t,e))return r;for(var o,i,a,s,u=[];e;){for(o=0,i=e.children.length;o<i;o++)a=e.children[o],y(t,s=e.leaf?n(a):a)&&(e.leaf?r.push(a):h(t,s)?this._all(a,r):u.push(a));e=u.pop()}return r},collides:function(t){var e=this.data,r=this.toBBox;if(!y(t,e))return!1;for(var n,o,i,a,s=[];e;){for(n=0,o=e.children.length;n<o;n++)if(i=e.children[n],y(t,a=e.leaf?r(i):i)){if(e.leaf||h(t,a))return!0;s.push(i)}e=s.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,r=t.length;e<r;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var o=this.data;this.data=n,n=o}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=d([]),this},remove:function(t,e){if(!t)return this;for(var r,n,o,a,s=this.data,u=this.toBBox(t),l=[],c=[];s||l.length;){if(s||(s=l.pop(),n=l[l.length-1],r=c.pop(),a=!0),s.leaf&&-1!==(o=i(t,s.children,e)))return s.children.splice(o,1),l.push(s),this._condense(l),this;a||s.leaf||!h(s,u)?n?(r++,s=n.children[r],a=!1):s=null:(l.push(s),c.push(r),r=0,n=s,s=s.children[0])}return this},toBBox:function(t){return t},compareMinX:l,compareMinY:c,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var r=[];t;)t.leaf?e.push.apply(e,t.children):r.push.apply(r,t.children),t=r.pop();return e},_build:function(t,e,r,n){var o,i=r-e+1,s=this._maxEntries;if(i<=s)return a(o=d(t.slice(e,r+1)),this.toBBox),o;n||(n=Math.ceil(Math.log(i)/Math.log(s)),s=Math.ceil(i/Math.pow(s,n-1))),(o=d([])).leaf=!1,o.height=n;var u,l,c,f,p=Math.ceil(i/s),h=p*Math.ceil(Math.sqrt(s));for(b(t,e,r,h,this.compareMinX),u=e;u<=r;u+=h)for(b(t,u,c=Math.min(u+h-1,r),p,this.compareMinY),l=u;l<=c;l+=p)f=Math.min(l+p-1,c),o.children.push(this._build(t,l,f,n-1));return a(o,this.toBBox),o},_chooseSubtree:function(t,e,r,n){for(var o,i,a,s,u,l,c,p,h,y;n.push(e),!e.leaf&&n.length-1!==r;){for(c=p=1/0,o=0,i=e.children.length;o<i;o++)u=f(a=e.children[o]),h=t,y=a,(l=(Math.max(y.maxX,h.maxX)-Math.min(y.minX,h.minX))*(Math.max(y.maxY,h.maxY)-Math.min(y.minY,h.minY))-u)<p?(p=l,c=u<c?u:c,s=a):l===p&&u<c&&(c=u,s=a);e=s||e.children[0]}return e},_insert:function(t,e,r){var n=this.toBBox,o=r?t:n(t),i=[],a=this._chooseSubtree(o,this.data,e,i);for(a.children.push(t),u(a,o);e>=0&&i[e].children.length>this._maxEntries;)this._split(i,e),e--;this._adjustParentBBoxes(o,i,e)},_split:function(t,e){var r=t[e],n=r.children.length,o=this._minEntries;this._chooseSplitAxis(r,o,n);var i=this._chooseSplitIndex(r,o,n),s=d(r.children.splice(i,r.children.length-i));s.height=r.height,s.leaf=r.leaf,a(r,this.toBBox),a(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(r,s)},_splitRoot:function(t,e){this.data=d([t,e]),this.data.height=t.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,r){var n,o,i,a,u,l,c,p,h,y,d,b,v,m;for(l=c=1/0,n=e;n<=r-e;n++)o=s(t,0,n,this.toBBox),i=s(t,n,r,this.toBBox),h=o,y=i,void 0,void 0,void 0,void 0,d=Math.max(h.minX,y.minX),b=Math.max(h.minY,y.minY),v=Math.min(h.maxX,y.maxX),m=Math.min(h.maxY,y.maxY),a=Math.max(0,v-d)*Math.max(0,m-b),u=f(o)+f(i),a<l?(l=a,p=n,c=u<c?u:c):a===l&&u<c&&(c=u,p=n);return p},_chooseSplitAxis:function(t,e,r){var n=t.leaf?this.compareMinX:l,o=t.leaf?this.compareMinY:c;this._allDistMargin(t,e,r,n)<this._allDistMargin(t,e,r,o)&&t.children.sort(n)},_allDistMargin:function(t,e,r,n){t.children.sort(n);var o,i,a=this.toBBox,l=s(t,0,e,a),c=s(t,r-e,r,a),f=p(l)+p(c);for(o=e;o<r-e;o++)i=t.children[o],u(l,t.leaf?a(i):i),f+=p(l);for(o=r-e-1;o>=e;o--)i=t.children[o],u(c,t.leaf?a(i):i),f+=p(c);return f},_adjustParentBBoxes:function(t,e,r){for(var n=r;n>=0;n--)u(e[n],t)},_condense:function(t){for(var e,r=t.length-1;r>=0;r--)0===t[r].children.length?r>0?(e=t[r-1].children).splice(e.indexOf(t[r]),1):this.clear():a(t[r],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}},5400:function(t,e,r){var n,o;function i(t){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t=r.nmd(t),function(a,s){"use strict";"object"===i(t)&&t.exports?t.exports=s():void 0===(o="function"==typeof(n=s)?n.call(e,r,e,t):n)||(t.exports=o)}(0,function(t){"use strict";var e=t&&t.IPv6;return{best:function(t){var e,r,n=t.toLowerCase().split(":"),o=n.length,i=8;for(""===n[0]&&""===n[1]&&""===n[2]?(n.shift(),n.shift()):""===n[0]&&""===n[1]?n.shift():""===n[o-1]&&""===n[o-2]&&n.pop(),-1!==n[(o=n.length)-1].indexOf(".")&&(i=7),e=0;e<o&&""!==n[e];e++);if(e<i)for(n.splice(e,1,"0000");n.length<i;)n.splice(e,0,"0000");for(var a=0;a<i;a++){r=n[a].split("");for(var s=0;s<3&&"0"===r[0]&&r.length>1;s++)r.splice(0,1);n[a]=r.join("")}var u=-1,l=0,c=0,f=-1,p=!1;for(a=0;a<i;a++)p?"0"===n[a]?c+=1:(p=!1,c>l&&(u=f,l=c)):"0"===n[a]&&(p=!0,f=a,c=1);c>l&&(u=f,l=c),l>1&&n.splice(u,l,""),o=n.length;var h="";for(""===n[0]&&(h=":"),a=0;a<o&&(h+=n[a],a!==o-1);a++)h+=":";return""===n[o-1]&&(h+=":"),h},noConflict:function(){return t.IPv6===this&&(t.IPv6=e),this}}})},2714:function(t,e,r){var n,o;function i(t){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t=r.nmd(t),function(a,s){"use strict";"object"===i(t)&&t.exports?t.exports=s():void 0===(o="function"==typeof(n=s)?n.call(e,r,e,t):n)||(t.exports=o)}(0,function(t){"use strict";var e=t&&t.SecondLevelDomains,r={list:{ac:" com gov mil net org ",ae:" ac co gov mil name net org pro sch ",af:" com edu gov net org ",al:" com edu gov mil net org ",ao:" co ed gv it og pb ",ar:" com edu gob gov int mil net org tur ",at:" ac co gv or ",au:" asn com csiro edu gov id net org ",ba:" co com edu gov mil net org rs unbi unmo unsa untz unze ",bb:" biz co com edu gov info net org store tv ",bh:" biz cc com edu gov info net org ",bn:" com edu gov net org ",bo:" com edu gob gov int mil net org tv ",br:" adm adv agr am arq art ato b bio blog bmd cim cng cnt com coop ecn edu eng esp etc eti far flog fm fnd fot fst g12 ggf gov imb ind inf jor jus lel mat med mil mus net nom not ntr odo org ppg pro psc psi qsl rec slg srv tmp trd tur tv vet vlog wiki zlg ",bs:" com edu gov net org ",bz:" du et om ov rg ",ca:" ab bc mb nb nf nl ns nt nu on pe qc sk yk ",ck:" biz co edu gen gov info net org ",cn:" ac ah bj com cq edu fj gd gov gs gx gz ha hb he hi hl hn jl js jx ln mil net nm nx org qh sc sd sh sn sx tj tw xj xz yn zj ",co:" com edu gov mil net nom org ",cr:" ac c co ed fi go or sa ",cy:" ac biz com ekloges gov ltd name net org parliament press pro tm ",do:" art com edu gob gov mil net org sld web ",dz:" art asso com edu gov net org pol ",ec:" com edu fin gov info med mil net org pro ",eg:" com edu eun gov mil name net org sci ",er:" com edu gov ind mil net org rochest w ",es:" com edu gob nom org ",et:" biz com edu gov info name net org ",fj:" ac biz com info mil name net org pro ",fk:" ac co gov net nom org ",fr:" asso com f gouv nom prd presse tm ",gg:" co net org ",gh:" com edu gov mil org ",gn:" ac com gov net org ",gr:" com edu gov mil net org ",gt:" com edu gob ind mil net org ",gu:" com edu gov net org ",hk:" com edu gov idv net org ",hu:" 2000 agrar bolt casino city co erotica erotika film forum games hotel info ingatlan jogasz konyvelo lakas media news org priv reklam sex shop sport suli szex tm tozsde utazas video ",id:" ac co go mil net or sch web ",il:" ac co gov idf k12 muni net org ",in:" ac co edu ernet firm gen gov i ind mil net nic org res ",iq:" com edu gov i mil net org ",ir:" ac co dnssec gov i id net org sch ",it:" edu gov ",je:" co net org ",jo:" com edu gov mil name net org sch ",jp:" ac ad co ed go gr lg ne or ",ke:" ac co go info me mobi ne or sc ",kh:" com edu gov mil net org per ",ki:" biz com de edu gov info mob net org tel ",km:" asso com coop edu gouv k medecin mil nom notaires pharmaciens presse tm veterinaire ",kn:" edu gov net org ",kr:" ac busan chungbuk chungnam co daegu daejeon es gangwon go gwangju gyeongbuk gyeonggi gyeongnam hs incheon jeju jeonbuk jeonnam k kg mil ms ne or pe re sc seoul ulsan ",kw:" com edu gov net org ",ky:" com edu gov net org ",kz:" com edu gov mil net org ",lb:" com edu gov net org ",lk:" assn com edu gov grp hotel int ltd net ngo org sch soc web ",lr:" com edu gov net org ",lv:" asn com conf edu gov id mil net org ",ly:" com edu gov id med net org plc sch ",ma:" ac co gov m net org press ",mc:" asso tm ",me:" ac co edu gov its net org priv ",mg:" com edu gov mil nom org prd tm ",mk:" com edu gov inf name net org pro ",ml:" com edu gov net org presse ",mn:" edu gov org ",mo:" com edu gov net org ",mt:" com edu gov net org ",mv:" aero biz com coop edu gov info int mil museum name net org pro ",mw:" ac co com coop edu gov int museum net org ",mx:" com edu gob net org ",my:" com edu gov mil name net org sch ",nf:" arts com firm info net other per rec store web ",ng:" biz com edu gov mil mobi name net org sch ",ni:" ac co com edu gob mil net nom org ",np:" com edu gov mil net org ",nr:" biz com edu gov info net org ",om:" ac biz co com edu gov med mil museum net org pro sch ",pe:" com edu gob mil net nom org sld ",ph:" com edu gov i mil net ngo org ",pk:" biz com edu fam gob gok gon gop gos gov net org web ",pl:" art bialystok biz com edu gda gdansk gorzow gov info katowice krakow lodz lublin mil net ngo olsztyn org poznan pwr radom slupsk szczecin torun warszawa waw wroc wroclaw zgora ",pr:" ac biz com edu est gov info isla name net org pro prof ",ps:" com edu gov net org plo sec ",pw:" belau co ed go ne or ",ro:" arts com firm info nom nt org rec store tm www ",rs:" ac co edu gov in org ",sb:" com edu gov net org ",sc:" com edu gov net org ",sh:" co com edu gov net nom org ",sl:" com edu gov net org ",st:" co com consulado edu embaixada gov mil net org principe saotome store ",sv:" com edu gob org red ",sz:" ac co org ",tr:" av bbs bel biz com dr edu gen gov info k12 name net org pol tel tsk tv web ",tt:" aero biz cat co com coop edu gov info int jobs mil mobi museum name net org pro tel travel ",tw:" club com ebiz edu game gov idv mil net org ",mu:" ac co com gov net or org ",mz:" ac co edu gov org ",na:" co com ",nz:" ac co cri geek gen govt health iwi maori mil net org parliament school ",pa:" abo ac com edu gob ing med net nom org sld ",pt:" com edu gov int net nome org publ ",py:" com edu gov mil net org ",qa:" com edu gov mil net org ",re:" asso com nom ",ru:" ac adygeya altai amur arkhangelsk astrakhan bashkiria belgorod bir bryansk buryatia cbg chel chelyabinsk chita chukotka chuvashia com dagestan e-burg edu gov grozny int irkutsk ivanovo izhevsk jar joshkar-ola kalmykia kaluga kamchatka karelia kazan kchr kemerovo khabarovsk khakassia khv kirov koenig komi kostroma kranoyarsk kuban kurgan kursk lipetsk magadan mari mari-el marine mil mordovia mosreg msk murmansk nalchik net nnov nov novosibirsk nsk omsk orenburg org oryol penza perm pp pskov ptz rnd ryazan sakhalin samara saratov simbirsk smolensk spb stavropol stv surgut tambov tatarstan tom tomsk tsaritsyn tsk tula tuva tver tyumen udm udmurtia ulan-ude vladikavkaz vladimir vladivostok volgograd vologda voronezh vrn vyatka yakutia yamal yekaterinburg yuzhno-sakhalinsk ",rw:" ac co com edu gouv gov int mil net ",sa:" com edu gov med net org pub sch ",sd:" com edu gov info med net org tv ",se:" a ac b bd c d e f g h i k l m n o org p parti pp press r s t tm u w x y z ",sg:" com edu gov idn net org per ",sn:" art com edu gouv org perso univ ",sy:" com edu gov mil net news org ",th:" ac co go in mi net or ",tj:" ac biz co com edu go gov info int mil name net nic org test web ",tn:" agrinet com defense edunet ens fin gov ind info intl mincom nat net org perso rnrt rns rnu tourism ",tz:" ac co go ne or ",ua:" biz cherkassy chernigov chernovtsy ck cn co com crimea cv dn dnepropetrovsk donetsk dp edu gov if in ivano-frankivsk kh kharkov kherson khmelnitskiy kiev kirovograd km kr ks kv lg lugansk lutsk lviv me mk net nikolaev od odessa org pl poltava pp rovno rv sebastopol sumy te ternopil uzhgorod vinnica vn zaporizhzhe zhitomir zp zt ",ug:" ac co go ne or org sc ",uk:" ac bl british-library co cym gov govt icnet jet lea ltd me mil mod national-library-scotland nel net nhs nic nls org orgn parliament plc police sch scot soc ",us:" dni fed isa kids nsn ",uy:" com edu gub mil net org ",ve:" co com edu gob info mil net org web ",vi:" co com k12 net org ",vn:" ac biz com edu gov health info int name net org pro ",ye:" co com gov ltd me net org plc ",yu:" ac co edu gov org ",za:" ac agric alt bourse city co cybernet db edu gov grondar iaccess imt inca landesign law mil net ngo nis nom olivetti org pix school tm web ",zm:" ac co com edu gov net org sch ",com:"ar br cn de eu gb gr hu jpn kr no qc ru sa se uk us uy za ",net:"gb jp se uk ",org:"ae",de:"com "},has:function(t){var e=t.lastIndexOf(".");if(e<=0||e>=t.length-1)return!1;var n=t.lastIndexOf(".",e-1);if(n<=0||n>=e-1)return!1;var o=r.list[t.slice(e+1)];return!!o&&o.indexOf(" "+t.slice(n+1,e)+" ")>=0},is:function(t){var e=t.lastIndexOf(".");if(e<=0||e>=t.length-1)return!1;if(t.lastIndexOf(".",e-1)>=0)return!1;var n=r.list[t.slice(e+1)];return!!n&&n.indexOf(" "+t.slice(0,e)+" ")>=0},get:function(t){var e=t.lastIndexOf(".");if(e<=0||e>=t.length-1)return null;var n=t.lastIndexOf(".",e-1);if(n<=0||n>=e-1)return null;var o=r.list[t.slice(e+1)];return o?o.indexOf(" "+t.slice(n+1,e)+" ")<0?null:t.slice(n+1):null},noConflict:function(){return t.SecondLevelDomains===this&&(t.SecondLevelDomains=e),this}};return r})},7411:function(t,e,r){var n,o,i;function a(t){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t=r.nmd(t),function(s,u){"use strict";"object"===a(t)&&t.exports?t.exports=u(r(9018),r(5400),r(2714)):(o=[r(9018),r(5400),r(2714)],void 0===(i="function"==typeof(n=u)?n.apply(e,o):n)||(t.exports=i))}(0,function(t,e,r,n){"use strict";var o=n&&n.URI;function i(t,e){var r=arguments.length>=1,n=arguments.length>=2;if(!(this instanceof i))return r?n?new i(t,e):new i(t):new i;if(void 0===t){if(r)throw new TypeError("undefined is not a valid argument for URI");t="undefined"!=typeof location?location.href+"":""}if(null===t&&r)throw new TypeError("null is not a valid argument for URI");return this.href(t),void 0!==e?this.absoluteTo(e):this}i.version="1.19.11";var s=i.prototype,u=Object.prototype.hasOwnProperty;function l(t){return t.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function c(t){return void 0===t?"Undefined":String(Object.prototype.toString.call(t)).slice(8,-1)}function f(t){return"Array"===c(t)}function p(t,e){var r,n,o={};if("RegExp"===c(e))o=null;else if(f(e))for(r=0,n=e.length;r<n;r++)o[e[r]]=!0;else o[e]=!0;for(r=0,n=t.length;r<n;r++){(o&&void 0!==o[t[r]]||!o&&e.test(t[r]))&&(t.splice(r,1),n--,r--)}return t}function h(t,e){var r,n;if(f(e)){for(r=0,n=e.length;r<n;r++)if(!h(t,e[r]))return!1;return!0}var o=c(e);for(r=0,n=t.length;r<n;r++)if("RegExp"===o){if("string"==typeof t[r]&&t[r].match(e))return!0}else if(t[r]===e)return!0;return!1}function y(t,e){if(!f(t)||!f(e))return!1;if(t.length!==e.length)return!1;t.sort(),e.sort();for(var r=0,n=t.length;r<n;r++)if(t[r]!==e[r])return!1;return!0}function d(t){return t.replace(/^\/+|\/+$/g,"")}function b(t){return escape(t)}function v(t){return encodeURIComponent(t).replace(/[!'()*]/g,b).replace(/\*/g,"%2A")}i._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,preventInvalidHostname:i.preventInvalidHostname,duplicateQueryParameters:i.duplicateQueryParameters,escapeQuerySpace:i.escapeQuerySpace}},i.preventInvalidHostname=!1,i.duplicateQueryParameters=!1,i.escapeQuerySpace=!0,i.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,i.idn_expression=/[^a-z0-9\._-]/i,i.punycode_expression=/(xn--)/i,i.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,i.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,i.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?Â«Â»ââââ]))/gi,i.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?Â«Â»âââââ]+$/,parens:/(\([^\)]*\)|\[[^\]]*\]|\{[^}]*\}|<[^>]*>)/g},i.leading_whitespace_expression=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,i.ascii_tab_whitespace=/[\u0009\u000A\u000D]+/g,i.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},i.hostProtocols=["http","https"],i.invalid_hostname_characters=/[^a-zA-Z0-9\.\-:_]/,i.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"},i.getDomAttribute=function(t){if(t&&t.nodeName){var e=t.nodeName.toLowerCase();if("input"!==e||"image"===t.type)return i.domAttributes[e]}},i.encode=v,i.decode=decodeURIComponent,i.iso8859=function(){i.encode=escape,i.decode=unescape},i.unicode=function(){i.encode=v,i.decode=decodeURIComponent},i.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/gi,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/gi,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}},urnpath:{encode:{expression:/%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/gi,map:{"%21":"!","%24":"$","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"=","%40":"@"}},decode:{expression:/[\/\?#:]/g,map:{"/":"%2F","?":"%3F","#":"%23",":":"%3A"}}}},i.encodeQuery=function(t,e){var r=i.encode(t+"");return void 0===e&&(e=i.escapeQuerySpace),e?r.replace(/%20/g,"+"):r},i.decodeQuery=function(t,e){t+="",void 0===e&&(e=i.escapeQuerySpace);try{return i.decode(e?t.replace(/\+/g,"%20"):t)}catch(e){return t}};var m,g={encode:"encode",decode:"decode"},S=function(t,e){return function(r){try{return i[e](r+"").replace(i.characters[t][e].expression,function(r){return i.characters[t][e].map[r]})}catch(t){return r}}};for(m in g)i[m+"PathSegment"]=S("pathname",g[m]),i[m+"UrnPathSegment"]=S("urnpath",g[m]);var w=function(t,e,r){return function(n){var o;o=r?function(t){return i[e](i[r](t))}:i[e];for(var a=(n+"").split(t),s=0,u=a.length;s<u;s++)a[s]=o(a[s]);return a.join(t)}};function O(t){return function(e,r){return void 0===e?this._parts[t]||"":(this._parts[t]=e||null,this.build(!r),this)}}function _(t,e){return function(r,n){return void 0===r?this._parts[t]||"":(null!==r&&(r+="").charAt(0)===e&&(r=r.substring(1)),this._parts[t]=r,this.build(!n),this)}}i.decodePath=w("/","decodePathSegment"),i.decodeUrnPath=w(":","decodeUrnPathSegment"),i.recodePath=w("/","encodePathSegment","decode"),i.recodeUrnPath=w(":","encodeUrnPathSegment","decode"),i.encodeReserved=S("reserved","encode"),i.parse=function(t,e){var r;return e||(e={preventInvalidHostname:i.preventInvalidHostname}),(r=(t=(t=t.replace(i.leading_whitespace_expression,"")).replace(i.ascii_tab_whitespace,"")).indexOf("#"))>-1&&(e.fragment=t.substring(r+1)||null,t=t.substring(0,r)),(r=t.indexOf("?"))>-1&&(e.query=t.substring(r+1)||null,t=t.substring(0,r)),"//"===(t=(t=t.replace(/^(https?|ftp|wss?)?:+[/\\]*/i,"$1://")).replace(/^[/\\]{2,}/i,"//")).substring(0,2)?(e.protocol=null,t=t.substring(2),t=i.parseAuthority(t,e)):(r=t.indexOf(":"))>-1&&(e.protocol=t.substring(0,r)||null,e.protocol&&!e.protocol.match(i.protocol_expression)?e.protocol=void 0:"//"===t.substring(r+1,r+3).replace(/\\/g,"/")?(t=t.substring(r+3),t=i.parseAuthority(t,e)):(t=t.substring(r+1),e.urn=!0)),e.path=t,e},i.parseHost=function(t,e){t||(t="");var r,n,o=(t=t.replace(/\\/g,"/")).indexOf("/");if(-1===o&&(o=t.length),"["===t.charAt(0))r=t.indexOf("]"),e.hostname=t.substring(1,r)||null,e.port=t.substring(r+2,o)||null,"/"===e.port&&(e.port=null);else{var a=t.indexOf(":"),s=t.indexOf("/"),u=t.indexOf(":",a+1);-1!==u&&(-1===s||u<s)?(e.hostname=t.substring(0,o)||null,e.port=null):(n=t.substring(0,o).split(":"),e.hostname=n[0]||null,e.port=n[1]||null)}return e.hostname&&"/"!==t.substring(o).charAt(0)&&(o++,t="/"+t),e.preventInvalidHostname&&i.ensureValidHostname(e.hostname,e.protocol),e.port&&i.ensureValidPort(e.port),t.substring(o)||"/"},i.parseAuthority=function(t,e){return t=i.parseUserinfo(t,e),i.parseHost(t,e)},i.parseUserinfo=function(t,e){var r=t;-1!==t.indexOf("\\")&&(t=t.replace(/\\/g,"/"));var n,o=t.indexOf("/"),a=t.lastIndexOf("@",o>-1?o:t.length-1);return a>-1&&(-1===o||a<o)?(n=t.substring(0,a).split(":"),e.username=n[0]?i.decode(n[0]):null,n.shift(),e.password=n[0]?i.decode(n.join(":")):null,t=r.substring(a+1)):(e.username=null,e.password=null),t},i.parseQuery=function(t,e){if(!t)return{};if(!(t=t.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,"")))return{};for(var r,n,o,a={},s=t.split("&"),l=s.length,c=0;c<l;c++)r=s[c].split("="),n=i.decodeQuery(r.shift(),e),o=r.length?i.decodeQuery(r.join("="),e):null,"__proto__"!==n&&(u.call(a,n)?("string"!=typeof a[n]&&null!==a[n]||(a[n]=[a[n]]),a[n].push(o)):a[n]=o);return a},i.build=function(t){var e="",r=!1;return t.protocol&&(e+=t.protocol+":"),t.urn||!e&&!t.hostname||(e+="//",r=!0),e+=i.buildAuthority(t)||"","string"==typeof t.path&&("/"!==t.path.charAt(0)&&r&&(e+="/"),e+=t.path),"string"==typeof t.query&&t.query&&(e+="?"+t.query),"string"==typeof t.fragment&&t.fragment&&(e+="#"+t.fragment),e},i.buildHost=function(t){var e="";return t.hostname?(i.ip6_expression.test(t.hostname)?e+="["+t.hostname+"]":e+=t.hostname,t.port&&(e+=":"+t.port),e):""},i.buildAuthority=function(t){return i.buildUserinfo(t)+i.buildHost(t)},i.buildUserinfo=function(t){var e="";return t.username&&(e+=i.encode(t.username)),t.password&&(e+=":"+i.encode(t.password)),e&&(e+="@"),e},i.buildQuery=function(t,e,r){var n,o,a,s,l="";for(o in t)if("__proto__"!==o&&u.call(t,o))if(f(t[o]))for(n={},a=0,s=t[o].length;a<s;a++)void 0!==t[o][a]&&void 0===n[t[o][a]+""]&&(l+="&"+i.buildQueryParameter(o,t[o][a],r),!0!==e&&(n[t[o][a]+""]=!0));else void 0!==t[o]&&(l+="&"+i.buildQueryParameter(o,t[o],r));return l.substring(1)},i.buildQueryParameter=function(t,e,r){return i.encodeQuery(t,r)+(null!==e?"="+i.encodeQuery(e,r):"")},i.addQuery=function(t,e,r){if("object"===a(e))for(var n in e)u.call(e,n)&&i.addQuery(t,n,e[n]);else{if("string"!=typeof e)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");if(void 0===t[e])return void(t[e]=r);"string"==typeof t[e]&&(t[e]=[t[e]]),f(r)||(r=[r]),t[e]=(t[e]||[]).concat(r)}},i.setQuery=function(t,e,r){if("object"===a(e))for(var n in e)u.call(e,n)&&i.setQuery(t,n,e[n]);else{if("string"!=typeof e)throw new TypeError("URI.setQuery() accepts an object, string as the name parameter");t[e]=void 0===r?null:r}},i.removeQuery=function(t,e,r){var n,o,s;if(f(e))for(n=0,o=e.length;n<o;n++)t[e[n]]=void 0;else if("RegExp"===c(e))for(s in t)e.test(s)&&(t[s]=void 0);else if("object"===a(e))for(s in e)u.call(e,s)&&i.removeQuery(t,s,e[s]);else{if("string"!=typeof e)throw new TypeError("URI.removeQuery() accepts an object, string, RegExp as the first parameter");void 0!==r?"RegExp"===c(r)?!f(t[e])&&r.test(t[e])?t[e]=void 0:t[e]=p(t[e],r):t[e]!==String(r)||f(r)&&1!==r.length?f(t[e])&&(t[e]=p(t[e],r)):t[e]=void 0:t[e]=void 0}},i.hasQuery=function(t,e,r,n){switch(c(e)){case"String":break;case"RegExp":for(var o in t)if(u.call(t,o)&&e.test(o)&&(void 0===r||i.hasQuery(t,o,r)))return!0;return!1;case"Object":for(var a in e)if(u.call(e,a)&&!i.hasQuery(t,a,e[a]))return!1;return!0;default:throw new TypeError("URI.hasQuery() accepts a string, regular expression or object as the name parameter")}switch(c(r)){case"Undefined":return e in t;case"Boolean":return r===Boolean(f(t[e])?t[e].length:t[e]);case"Function":return!!r(t[e],e,t);case"Array":return!!f(t[e])&&(n?h:y)(t[e],r);case"RegExp":return f(t[e])?!!n&&h(t[e],r):Boolean(t[e]&&t[e].match(r));case"Number":r=String(r);case"String":return f(t[e])?!!n&&h(t[e],r):t[e]===r;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},i.joinPaths=function(){for(var t=[],e=[],r=0,n=0;n<arguments.length;n++){var o=new i(arguments[n]);t.push(o);for(var a=o.segment(),s=0;s<a.length;s++)"string"==typeof a[s]&&e.push(a[s]),a[s]&&r++}if(!e.length||!r)return new i("");var u=new i("").segment(e);return""!==t[0].path()&&"/"!==t[0].path().slice(0,1)||u.path("/"+u.path()),u.normalize()},i.commonPath=function(t,e){var r,n=Math.min(t.length,e.length);for(r=0;r<n;r++)if(t.charAt(r)!==e.charAt(r)){r--;break}return r<1?t.charAt(0)===e.charAt(0)&&"/"===t.charAt(0)?"/":"":("/"===t.charAt(r)&&"/"===e.charAt(r)||(r=t.substring(0,r).lastIndexOf("/")),t.substring(0,r+1))},i.withinString=function(t,e,r){r||(r={});var n=r.start||i.findUri.start,o=r.end||i.findUri.end,a=r.trim||i.findUri.trim,s=r.parens||i.findUri.parens,u=/[a-z0-9-]=["']?$/i;for(n.lastIndex=0;;){var l=n.exec(t);if(!l)break;var c=l.index;if(r.ignoreHtml){var f=t.slice(Math.max(c-3,0),c);if(f&&u.test(f))continue}for(var p=c+t.slice(c).search(o),h=t.slice(c,p),y=-1;;){var d=s.exec(h);if(!d)break;var b=d.index+d[0].length;y=Math.max(y,b)}if(!((h=y>-1?h.slice(0,y)+h.slice(y).replace(a,""):h.replace(a,"")).length<=l[0].length||r.ignore&&r.ignore.test(h))){var v=e(h,c,p=c+h.length,t);void 0!==v?(v=String(v),t=t.slice(0,c)+v+t.slice(p),n.lastIndex=c+v.length):n.lastIndex=p}}return n.lastIndex=0,t},i.ensureValidHostname=function(e,r){var n=!!e,o=!1;if(!!r&&(o=h(i.hostProtocols,r)),o&&!n)throw new TypeError("Hostname cannot be empty, if protocol is "+r);if(e&&e.match(i.invalid_hostname_characters)){if(!t)throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-:_] and Punycode.js is not available');if(t.toASCII(e).match(i.invalid_hostname_characters))throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-:_]')}},i.ensureValidPort=function(t){if(t){var e=Number(t);if(!(/^[0-9]+$/.test(e)&&e>0&&e<65536))throw new TypeError('Port "'+t+'" is not a valid port')}},i.noConflict=function(t){if(t){var e={URI:this.noConflict()};return n.URITemplate&&"function"==typeof n.URITemplate.noConflict&&(e.URITemplate=n.URITemplate.noConflict()),n.IPv6&&"function"==typeof n.IPv6.noConflict&&(e.IPv6=n.IPv6.noConflict()),n.SecondLevelDomains&&"function"==typeof n.SecondLevelDomains.noConflict&&(e.SecondLevelDomains=n.SecondLevelDomains.noConflict()),e}return n.URI===this&&(n.URI=o),this},s.build=function(t){return!0===t?this._deferred_build=!0:(void 0===t||this._deferred_build)&&(this._string=i.build(this._parts),this._deferred_build=!1),this},s.clone=function(){return new i(this)},s.valueOf=s.toString=function(){return this.build(!1)._string},s.protocol=O("protocol"),s.username=O("username"),s.password=O("password"),s.hostname=O("hostname"),s.port=O("port"),s.query=_("query","?"),s.fragment=_("fragment","#"),s.search=function(t,e){var r=this.query(t,e);return"string"==typeof r&&r.length?"?"+r:r},s.hash=function(t,e){var r=this.fragment(t,e);return"string"==typeof r&&r.length?"#"+r:r},s.pathname=function(t,e){if(void 0===t||!0===t){var r=this._parts.path||(this._parts.hostname?"/":"");return t?(this._parts.urn?i.decodeUrnPath:i.decodePath)(r):r}return this._parts.urn?this._parts.path=t?i.recodeUrnPath(t):"":this._parts.path=t?i.recodePath(t):"/",this.build(!e),this},s.path=s.pathname,s.href=function(t,e){var r;if(void 0===t)return this.toString();this._string="",this._parts=i._parts();var n=t instanceof i,o="object"===a(t)&&(t.hostname||t.path||t.pathname);t.nodeName&&(t=t[i.getDomAttribute(t)]||"",o=!1);if(!n&&o&&void 0!==t.pathname&&(t=t.toString()),"string"==typeof t||t instanceof String)this._parts=i.parse(String(t),this._parts);else{if(!n&&!o)throw new TypeError("invalid input");var s=n?t._parts:t;for(r in s)"query"!==r&&u.call(this._parts,r)&&(this._parts[r]=s[r]);s.query&&this.query(s.query,!1)}return this.build(!e),this},s.is=function(t){var e=!1,n=!1,o=!1,a=!1,s=!1,u=!1,l=!1,c=!this._parts.urn;switch(this._parts.hostname&&(c=!1,n=i.ip4_expression.test(this._parts.hostname),o=i.ip6_expression.test(this._parts.hostname),s=(a=!(e=n||o))&&r&&r.has(this._parts.hostname),u=a&&i.idn_expression.test(this._parts.hostname),l=a&&i.punycode_expression.test(this._parts.hostname)),t.toLowerCase()){case"relative":return c;case"absolute":return!c;case"domain":case"name":return a;case"sld":return s;case"ip":return e;case"ip4":case"ipv4":case"inet4":return n;case"ip6":case"ipv6":case"inet6":return o;case"idn":return u;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return l}return null};var P=s.protocol,E=s.port,C=s.hostname;s.protocol=function(t,e){if(t&&!(t=t.replace(/:(\/\/)?$/,"")).match(i.protocol_expression))throw new TypeError('Protocol "'+t+"\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");return P.call(this,t,e)},s.scheme=s.protocol,s.port=function(t,e){return this._parts.urn?void 0===t?"":this:(void 0!==t&&(0===t&&(t=null),t&&(":"===(t+="").charAt(0)&&(t=t.substring(1)),i.ensureValidPort(t))),E.call(this,t,e))},s.hostname=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0!==t){var r={preventInvalidHostname:this._parts.preventInvalidHostname};if("/"!==i.parseHost(t,r))throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-]');t=r.hostname,this._parts.preventInvalidHostname&&i.ensureValidHostname(t,this._parts.protocol)}return C.call(this,t,e)},s.origin=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t){var r=this.protocol();return this.authority()?(r?r+"://":"")+this.authority():""}var n=i(t);return this.protocol(n.protocol()).authority(n.authority()).build(!e),this},s.host=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t)return this._parts.hostname?i.buildHost(this._parts):"";if("/"!==i.parseHost(t,this._parts))throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-]');return this.build(!e),this},s.authority=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t)return this._parts.hostname?i.buildAuthority(this._parts):"";if("/"!==i.parseAuthority(t,this._parts))throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-]');return this.build(!e),this},s.userinfo=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t){var r=i.buildUserinfo(this._parts);return r?r.substring(0,r.length-1):r}return"@"!==t[t.length-1]&&(t+="@"),i.parseUserinfo(t,this._parts),this.build(!e),this},s.resource=function(t,e){var r;return void 0===t?this.path()+this.search()+this.hash():(r=i.parse(t),this._parts.path=r.path,this._parts.query=r.query,this._parts.fragment=r.fragment,this.build(!e),this)},s.subdomain=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t){if(!this._parts.hostname||this.is("IP"))return"";var r=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,r)||""}var n=this._parts.hostname.length-this.domain().length,o=this._parts.hostname.substring(0,n),a=new RegExp("^"+l(o));if(t&&"."!==t.charAt(t.length-1)&&(t+="."),-1!==t.indexOf(":"))throw new TypeError("Domains cannot contain colons");return t&&i.ensureValidHostname(t,this._parts.protocol),this._parts.hostname=this._parts.hostname.replace(a,t),this.build(!e),this},s.domain=function(t,e){if(this._parts.urn)return void 0===t?"":this;if("boolean"==typeof t&&(e=t,t=void 0),void 0===t){if(!this._parts.hostname||this.is("IP"))return"";var r=this._parts.hostname.match(/\./g);if(r&&r.length<2)return this._parts.hostname;var n=this._parts.hostname.length-this.tld(e).length-1;return n=this._parts.hostname.lastIndexOf(".",n-1)+1,this._parts.hostname.substring(n)||""}if(!t)throw new TypeError("cannot set domain empty");if(-1!==t.indexOf(":"))throw new TypeError("Domains cannot contain colons");if(i.ensureValidHostname(t,this._parts.protocol),!this._parts.hostname||this.is("IP"))this._parts.hostname=t;else{var o=new RegExp(l(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(o,t)}return this.build(!e),this},s.tld=function(t,e){if(this._parts.urn)return void 0===t?"":this;if("boolean"==typeof t&&(e=t,t=void 0),void 0===t){if(!this._parts.hostname||this.is("IP"))return"";var n=this._parts.hostname.lastIndexOf("."),o=this._parts.hostname.substring(n+1);return!0!==e&&r&&r.list[o.toLowerCase()]&&r.get(this._parts.hostname)||o}var i;if(!t)throw new TypeError("cannot set TLD empty");if(t.match(/[^a-zA-Z0-9-]/)){if(!r||!r.is(t))throw new TypeError('TLD "'+t+'" contains characters other than [A-Z0-9]');i=new RegExp(l(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(i,t)}else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");i=new RegExp(l(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(i,t)}return this.build(!e),this},s.directory=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t||!0===t){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var r=this._parts.path.length-this.filename().length-1,n=this._parts.path.substring(0,r)||(this._parts.hostname?"/":"");return t?i.decodePath(n):n}var o=this._parts.path.length-this.filename().length,a=this._parts.path.substring(0,o),s=new RegExp("^"+l(a));return this.is("relative")||(t||(t="/"),"/"!==t.charAt(0)&&(t="/"+t)),t&&"/"!==t.charAt(t.length-1)&&(t+="/"),t=i.recodePath(t),this._parts.path=this._parts.path.replace(s,t),this.build(!e),this},s.filename=function(t,e){if(this._parts.urn)return void 0===t?"":this;if("string"!=typeof t){if(!this._parts.path||"/"===this._parts.path)return"";var r=this._parts.path.lastIndexOf("/"),n=this._parts.path.substring(r+1);return t?i.decodePathSegment(n):n}var o=!1;"/"===t.charAt(0)&&(t=t.substring(1)),t.match(/\.?\//)&&(o=!0);var a=new RegExp(l(this.filename())+"$");return t=i.recodePath(t),this._parts.path=this._parts.path.replace(a,t),o?this.normalizePath(e):this.build(!e),this},s.suffix=function(t,e){if(this._parts.urn)return void 0===t?"":this;if(void 0===t||!0===t){if(!this._parts.path||"/"===this._parts.path)return"";var r,n,o=this.filename(),a=o.lastIndexOf(".");return-1===a?"":(r=o.substring(a+1),n=/^[a-z0-9%]+$/i.test(r)?r:"",t?i.decodePathSegment(n):n)}"."===t.charAt(0)&&(t=t.substring(1));var s,u=this.suffix();if(u)s=t?new RegExp(l(u)+"$"):new RegExp(l("."+u)+"$");else{if(!t)return this;this._parts.path+="."+i.recodePath(t)}return s&&(t=i.recodePath(t),this._parts.path=this._parts.path.replace(s,t)),this.build(!e),this},s.segment=function(t,e,r){var n=this._parts.urn?":":"/",o=this.path(),i="/"===o.substring(0,1),a=o.split(n);if(void 0!==t&&"number"!=typeof t&&(r=e,e=t,t=void 0),void 0!==t&&"number"!=typeof t)throw new Error('Bad segment "'+t+'", must be 0-based integer');if(i&&a.shift(),t<0&&(t=Math.max(a.length+t,0)),void 0===e)return void 0===t?a:a[t];if(null===t||void 0===a[t])if(f(e)){a=[];for(var s=0,u=e.length;s<u;s++)(e[s].length||a.length&&a[a.length-1].length)&&(a.length&&!a[a.length-1].length&&a.pop(),a.push(d(e[s])))}else(e||"string"==typeof e)&&(e=d(e),""===a[a.length-1]?a[a.length-1]=e:a.push(e));else e?a[t]=d(e):a.splice(t,1);return i&&a.unshift(""),this.path(a.join(n),r)},s.segmentCoded=function(t,e,r){var n,o,a;if("number"!=typeof t&&(r=e,e=t,t=void 0),void 0===e){if(f(n=this.segment(t,e,r)))for(o=0,a=n.length;o<a;o++)n[o]=i.decode(n[o]);else n=void 0!==n?i.decode(n):void 0;return n}if(f(e))for(o=0,a=e.length;o<a;o++)e[o]=i.encode(e[o]);else e="string"==typeof e||e instanceof String?i.encode(e):e;return this.segment(t,e,r)};var T=s.query;return s.query=function(t,e){if(!0===t)return i.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("function"==typeof t){var r=i.parseQuery(this._parts.query,this._parts.escapeQuerySpace),n=t.call(this,r);return this._parts.query=i.buildQuery(n||r,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!e),this}return void 0!==t&&"string"!=typeof t?(this._parts.query=i.buildQuery(t,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!e),this):T.call(this,t,e)},s.setQuery=function(t,e,r){var n=i.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("string"==typeof t||t instanceof String)n[t]=void 0!==e?e:null;else{if("object"!==a(t))throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");for(var o in t)u.call(t,o)&&(n[o]=t[o])}return this._parts.query=i.buildQuery(n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof t&&(r=e),this.build(!r),this},s.addQuery=function(t,e,r){var n=i.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return i.addQuery(n,t,void 0===e?null:e),this._parts.query=i.buildQuery(n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof t&&(r=e),this.build(!r),this},s.removeQuery=function(t,e,r){var n=i.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return i.removeQuery(n,t,e),this._parts.query=i.buildQuery(n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof t&&(r=e),this.build(!r),this},s.hasQuery=function(t,e,r){var n=i.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return i.hasQuery(n,t,e,r)},s.setSearch=s.setQuery,s.addSearch=s.addQuery,s.removeSearch=s.removeQuery,s.hasSearch=s.hasQuery,s.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},s.normalizeProtocol=function(t){return"string"==typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!t)),this},s.normalizeHostname=function(r){return this._parts.hostname&&(this.is("IDN")&&t?this._parts.hostname=t.toASCII(this._parts.hostname):this.is("IPv6")&&e&&(this._parts.hostname=e.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!r)),this},s.normalizePort=function(t){return"string"==typeof this._parts.protocol&&this._parts.port===i.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!t)),this},s.normalizePath=function(t){var e,r=this._parts.path;if(!r)return this;if(this._parts.urn)return this._parts.path=i.recodeUrnPath(this._parts.path),this.build(!t),this;if("/"===this._parts.path)return this;var n,o,a="";for("/"!==(r=i.recodePath(r)).charAt(0)&&(e=!0,r="/"+r),"/.."!==r.slice(-3)&&"/."!==r.slice(-2)||(r+="/"),r=r.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),e&&(a=r.substring(1).match(/^(\.\.\/)+/)||"")&&(a=a[0]);-1!==(n=r.search(/\/\.\.(\/|$)/));)0!==n?(-1===(o=r.substring(0,n).lastIndexOf("/"))&&(o=n),r=r.substring(0,o)+r.substring(n+3)):r=r.substring(3);return e&&this.is("relative")&&(r=a+r.substring(1)),this._parts.path=r,this.build(!t),this},s.normalizePathname=s.normalizePath,s.normalizeQuery=function(t){return"string"==typeof this._parts.query&&(this._parts.query.length?this.query(i.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!t)),this},s.normalizeFragment=function(t){return this._parts.fragment||(this._parts.fragment=null,this.build(!t)),this},s.normalizeSearch=s.normalizeQuery,s.normalizeHash=s.normalizeFragment,s.iso8859=function(){var t=i.encode,e=i.decode;i.encode=escape,i.decode=decodeURIComponent;try{this.normalize()}finally{i.encode=t,i.decode=e}return this},s.unicode=function(){var t=i.encode,e=i.decode;i.encode=v,i.decode=unescape;try{this.normalize()}finally{i.encode=t,i.decode=e}return this},s.readable=function(){var e=this.clone();e.username("").password("").normalize();var r="";if(e._parts.protocol&&(r+=e._parts.protocol+"://"),e._parts.hostname&&(e.is("punycode")&&t?(r+=t.toUnicode(e._parts.hostname),e._parts.port&&(r+=":"+e._parts.port)):r+=e.host()),e._parts.hostname&&e._parts.path&&"/"!==e._parts.path.charAt(0)&&(r+="/"),r+=e.path(!0),e._parts.query){for(var n="",o=0,a=e._parts.query.split("&"),s=a.length;o<s;o++){var u=(a[o]||"").split("=");n+="&"+i.decodeQuery(u[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"),void 0!==u[1]&&(n+="="+i.decodeQuery(u[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}r+="?"+n.substring(1)}return r+=i.decodeQuery(e.hash(),!0)},s.absoluteTo=function(t){var e,r,n,o=this.clone(),a=["protocol","username","password","hostname","port"];if(this._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(t instanceof i||(t=new i(t)),o._parts.protocol)return o;if(o._parts.protocol=t._parts.protocol,this._parts.hostname)return o;for(r=0;n=a[r];r++)o._parts[n]=t._parts[n];return o._parts.path?(".."===o._parts.path.substring(-2)&&(o._parts.path+="/"),"/"!==o.path().charAt(0)&&(e=(e=t.directory())||(0===t.path().indexOf("/")?"/":""),o._parts.path=(e?e+"/":"")+o._parts.path,o.normalizePath())):(o._parts.path=t._parts.path,o._parts.query||(o._parts.query=t._parts.query)),o.build(),o},s.relativeTo=function(t){var e,r,n,o,a,s=this.clone().normalize();if(s._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(t=new i(t).normalize(),e=s._parts,r=t._parts,o=s.path(),a=t.path(),"/"!==o.charAt(0))throw new Error("URI is already relative");if("/"!==a.charAt(0))throw new Error("Cannot calculate a URI relative to another relative URI");if(e.protocol===r.protocol&&(e.protocol=null),e.username!==r.username||e.password!==r.password)return s.build();if(null!==e.protocol||null!==e.username||null!==e.password)return s.build();if(e.hostname!==r.hostname||e.port!==r.port)return s.build();if(e.hostname=null,e.port=null,o===a)return e.path="",s.build();if(!(n=i.commonPath(o,a)))return s.build();var u=r.path.substring(n.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return e.path=u+e.path.substring(n.length)||"./",s.build()},s.equals=function(t){var e,r,n,o,a,s=this.clone(),l=new i(t),c={};if(s.normalize(),l.normalize(),s.toString()===l.toString())return!0;if(n=s.query(),o=l.query(),s.query(""),l.query(""),s.toString()!==l.toString())return!1;if(n.length!==o.length)return!1;for(a in e=i.parseQuery(n,this._parts.escapeQuerySpace),r=i.parseQuery(o,this._parts.escapeQuerySpace),e)if(u.call(e,a)){if(f(e[a])){if(!y(e[a],r[a]))return!1}else if(e[a]!==r[a])return!1;c[a]=!0}for(a in r)if(u.call(r,a)&&!c[a])return!1;return!0},s.preventInvalidHostname=function(t){return this._parts.preventInvalidHostname=!!t,this},s.duplicateQueryParameters=function(t){return this._parts.duplicateQueryParameters=!!t,this},s.escapeQuerySpace=function(t){return this._parts.escapeQuerySpace=!!t,this},i})},9018:function(t,e,r){var n;function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t=r.nmd(t),function(i){var a="object"==o(e)&&e&&!e.nodeType&&e,s="object"==o(t)&&t&&!t.nodeType&&t,u="object"==(void 0===r.g?"undefined":o(r.g))&&r.g;u.global!==u&&u.window!==u&&u.self!==u||(i=u);var l,c,f=2147483647,p=36,h=1,y=26,d=38,b=700,v=72,m=128,g="-",S=/^xn--/,w=/[^\x20-\x7E]/,O=/[\x2E\u3002\uFF0E\uFF61]/g,_={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},P=p-h,E=Math.floor,C=String.fromCharCode;function T(t){throw new RangeError(_[t])}function j(t,e){for(var r=t.length,n=[];r--;)n[r]=e(t[r]);return n}function k(t,e){var r=t.split("@"),n="";return r.length>1&&(n=r[0]+"@",t=r[1]),n+j((t=t.replace(O,".")).split("."),e).join(".")}function x(t){for(var e,r,n=[],o=0,i=t.length;o<i;)(e=t.charCodeAt(o++))>=55296&&e<=56319&&o<i?56320==(64512&(r=t.charCodeAt(o++)))?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),o--):n.push(e);return n}function A(t){return j(t,function(t){var e="";return t>65535&&(e+=C((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=C(t)}).join("")}function I(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function N(t,e,r){var n=0;for(t=r?E(t/b):t>>1,t+=E(t/e);t>P*y>>1;n+=p)t=E(t/P);return E(n+(P+1)*t/(t+d))}function R(t){var e,r,n,o,i,a,s,u,l,c,d,b=[],S=t.length,w=0,O=m,_=v;for((r=t.lastIndexOf(g))<0&&(r=0),n=0;n<r;++n)t.charCodeAt(n)>=128&&T("not-basic"),b.push(t.charCodeAt(n));for(o=r>0?r+1:0;o<S;){for(i=w,a=1,s=p;o>=S&&T("invalid-input"),((u=(d=t.charCodeAt(o++))-48<10?d-22:d-65<26?d-65:d-97<26?d-97:p)>=p||u>E((f-w)/a))&&T("overflow"),w+=u*a,!(u<(l=s<=_?h:s>=_+y?y:s-_));s+=p)a>E(f/(c=p-l))&&T("overflow"),a*=c;_=N(w-i,e=b.length+1,0==i),E(w/e)>f-O&&T("overflow"),O+=E(w/e),w%=e,b.splice(w++,0,O)}return A(b)}function M(t){var e,r,n,o,i,a,s,u,l,c,d,b,S,w,O,_=[];for(b=(t=x(t)).length,e=m,r=0,i=v,a=0;a<b;++a)(d=t[a])<128&&_.push(C(d));for(n=o=_.length,o&&_.push(g);n<b;){for(s=f,a=0;a<b;++a)(d=t[a])>=e&&d<s&&(s=d);for(s-e>E((f-r)/(S=n+1))&&T("overflow"),r+=(s-e)*S,e=s,a=0;a<b;++a)if((d=t[a])<e&&++r>f&&T("overflow"),d==e){for(u=r,l=p;!(u<(c=l<=i?h:l>=i+y?y:l-i));l+=p)O=u-c,w=p-c,_.push(C(I(c+O%w,0))),u=E(O/w);_.push(C(I(u,0))),i=N(r,S,n==o),r=0,++n}++r,++e}return _.join("")}if(l={version:"1.3.2",ucs2:{decode:x,encode:A},decode:R,encode:M,toASCII:function(t){return k(t,function(t){return w.test(t)?"xn--"+M(t):t})},toUnicode:function(t){return k(t,function(t){return S.test(t)?R(t.slice(4).toLowerCase()):t})}},"object"==o(r.amdO)&&r.amdO)void 0===(n=function(){return l}.call(e,r,e,t))||(t.exports=n);else if(a&&s)if(t.exports==a)s.exports=l;else for(c in l)l.hasOwnProperty(c)&&(a[c]=l[c]);else i.punycode=l}(this)},6894:function(t,e,r){"use strict";var n=maplibregl,o=r.n(n);function i(t){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,s(n.key),n)}}function s(t){var e=function(t,e){if("object"!=i(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==i(e)?e:String(e)}var u=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.imageUrl=null,this.link=null,this.width=null,this.height=null,this.alt="SuperMap iClient",this._extend(this,e)}var e,r,n;return e=t,(r=[{key:"onAdd",value:function(t){this._map=t,this._container=document.createElement("div"),this._container.className="maplibregl-ctrl iclient-logo",this._container.style.marginTop=0,this._container.style.marginBottom=0,this._container.style.marginLeft=0,this._container.style.marginRight=0;var e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAF4AAAAdCAYAAAAjHtusAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA4ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDozYWZlOGIwMi01MWE3LTRiZjYtYWVkYS05MGQ2ZTQ4YjZiMmUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6ODg0NkFBQUE3RjEzMTFFNzhFRjJFQkY4RjcxQjc1NjIiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6ODg0NkFBQTk3RjEzMTFFNzhFRjJFQkY4RjcxQjc1NjIiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4MWI3NzdhNC1lZmEyLTQ1MzUtOGQzNi03MmRjNDkyODMzN2UiIHN0UmVmOmRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDpjYTYzODVjMi1jNDQ1LTExN2EtYTc0ZC1lM2I5MzJlMGE4Y2QiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5q1HM0AAAF/ElEQVR42tSabYhUVRjHZ7W01C1uaCRW4F3oi9SXCUnwQ9gsGUFvOEtQH1bLu5VS9sbYh5KicjYt29qiGQwVg2xWWKgocob91AvC+CWsoJqB3qHMSdTMpZyeU/+Df07n3pk7997Z6cBv99z7nHvOvf/z/pxJNZvNVI/jCKXmv6EquAmVkxPSlvtp2GItr0/96fFQForChJAWDiVYTkMYMu4XBFcYjLOwWS3sNwmn8NGzZ0h4Flv/zwIdchAnh/slCGmmKUNIBzYPaXOUr0vPuEjD71JAPh7l61embzinhV3V8nnCGmGT8LwlzSL8/yUh4Tfjo9T/CgnCIYNKycA2Qq21AcHU/VHE80Idoo3Qs0W6p0UtUnkZvEMDeVcCyqxEafF7hL8Qf0oYsIj+lfC9cH1CwhchWAGCtZO+AooQOkdC1Km1VtCb63StW73uFSzgKFUkNwBbmZGGmqowhvg8ZNpH9oXChcIcYRdeNomgxLkaH+S1SGubAxyIpFv+Zp+0DYjrAS00j/dem2VGEl6FJ4Qa4quEu8j2hTCJ+GJhe4JjfQMf6JCYPPbysMPxBlp0BUKOogEF9Rg9/heNvNKYfM0KsZUZaYxX4STGrzJa+zbhPeFH2DcK10KItcI+pI0rVElwXl1ULaKnIJhDw0oRQpTQc1zcbwRU8ATy4DR6yMlTzwkqMziEWHvubJ4Nk4ZtHdnqwvwY17xq3Z4FjrG+z2Kdrdf2ZSGD+xlLPh6t1R0jP9fI22ZzKI92yvQl7EbmBxI4S7Y+vIAOL87QZqsc5uNnssxZIcfYjXT9snCR7jjobidp+FkxA2v+Cq1QervMDmp4P7Xs3YZtE9kOC3P/By6JGaETl8ElwueYTNTDq4UDsKnd7YfCNbT239LF1udS72xYJt1UWxNfN4IIP4bWuTpEja01JtMFZFsm/AHbtHBlDE6yasA4moYTrUbvdBTXHqUrAH4uSadbyzF+vbBM2IsNkS3MNa5305JxqfA02T4TnkX8XOH1mPw8ruVejpxbI9hZD2Cz1U7LdrrUvjP/WfZinNZhr6V27hP+FPZh9aLvLxVO4DllX0G2OcKnlO/DCblxaz6uXBtmi+8mBaP3/SP8IuEIiTRoPPQm2TaEmEyXo0JU+F0YiPFD0hhOsiE/vqeEVwyTgF8L51OilcIZ2I4Ll5NttvAJPfukUeB2sk0ZPSbKIUUJpCII7+DasWy08uhNNazT0wGHI7mAtB7KqMKm38HhDdAUibTVKGicbB8YAqrJ9DRsp43JdB4qUof1HQrPE6XTQWu3Ce/inVzjXhXpMiTwUYugNVQ+p80jrUsV5EH0POKeuXO9QjhFq5GryNYvfEMCDhsftYVsB9ETtG0V9ZjfhCURhbcJFpfwVZ9jvhxsLHwTYtp2svlWQw3vXL8UnqHVSIG8l8ex+tHhBXgjddgqHEZ8ufAA2aaEnYgrF/KrPXrEmMUqZ9THLW06xhoBaVueQpkug+ewOUphE3Qv2Q5gGamXYa+QbVq4O+DQ5FHyZqrjxNt7UHh9uuRa0F7HjCF8o9PCTOGnscM7g2u1Hl9C9oeEnxC/1ajZg8JLiM9Hj9GHJseMShwL2DO0G5yEWn3Zh1QUods5CPkIoqlwAZxhXMsb6HrcEPBxchhdJ6wj29vCW4hfLOzo8J3rltYX50nXQAATSf/K4DEaGlTLvplsk/QCpoD60EQ7gLYZc8H9wq+I3yncEOEcNhuz6HWf3XEiwU/4Y8YEqVp2P10rt+8REvBGw026i4aDcbL9jF8r8Blmf4fCOzhViiscskygXRdehf3CO4hfigmTBXyQrl8TFtD1IzQX3CbcQrY3hPcRv4z8OmHPXwchVNln2MmE7BX6VwIFi/he6uxvb6JM3m0fdqvx/ATidxg2JeC7VDErAw5NzGfvwRJVheEIQ8Mg/pdwIM+UOmi9Q8ivCsrIy0tF+wVbEcLrd3Pb2XisEb4Tdlhsi4WP4RBbaLGrHfC3PrvMIezy9rTpGm5lz9LOMG15xvFxD/j5gjzjjDbMOzk+9zzt3v5bgAEAibzFeFHVgYkAAAAASUVORK5CYII=";this.imageUrl&&(e=this.imageUrl);var r=this.alt,n="94px",o="29px",i="width:"+n+";height:"+o+";";this.imageUrl&&(i="width:"+(n=this.width)+";height:"+(o=this.height)+";",n&&o||(i=""));var a=this.link,s="<img src="+e+" alt='"+r+"' style='"+i+"margin-bottom: 2px'>";return this._container.innerHTML=a?"<a href='"+a+"' target='_blank'>"+s+"</a>":s,this._createStyleSheet(),this._container}},{key:"_createStyleSheet",value:function(){var t=document.createElement("style");t.type="text/css",t.innerHTML=".iclient-logo{margin:0 !important;}.iclient-logo a{border: none;display: block;height:31px;}.iclient-logo img{border: none;white-space: nowrap}",document.getElementsByTagName("head")[0].appendChild(t)}},{key:"_extend",value:function(t){for(var e=0;e<Object.getOwnPropertyNames(arguments).length;e++){var r=Object.getOwnPropertyNames(arguments)[e];if("caller"!=r&&"callee"!=r&&"length"!=r&&"arguments"!=r){var n=arguments[r];if(n)for(var o=0;o<Object.getOwnPropertyNames(n).length;o++){var i=Object.getOwnPropertyNames(n)[o];"caller"!=r&&"callee"!=r&&"length"!=r&&"arguments"!=r&&(t[i]=n[i])}}}return t}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function l(t){"@babel/helpers - typeof";return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f(n.key),n)}}function f(t){var e=function(t,e){if("object"!=l(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==l(e)?e:String(e)}var p=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.w=e?parseFloat(e):0,this.h=e?parseFloat(r):0,this.CLASS_NAME="SuperMap.Size"}var e,r,n;return e=t,(r=[{key:"toString",value:function(){return"w="+this.w+",h="+this.h}},{key:"clone",value:function(){return new t(this.w,this.h)}},{key:"equals",value:function(t){var e=!1;return null!=t&&(e=this.w===t.w&&this.h===t.h||isNaN(this.w)&&isNaN(this.h)&&isNaN(t.w)&&isNaN(t.h)),e}},{key:"destroy",value:function(){this.w=null,this.h=null}}])&&c(e.prototype,r),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function h(t){"@babel/helpers - typeof";return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function y(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,d(n.key),n)}}function d(t){var e=function(t,e){if("object"!=h(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==h(e)?e:String(e)}var b=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e?parseFloat(e):0,this.y=r?parseFloat(r):0,this.mode=n,this.CLASS_NAME="SuperMap.Pixel"}var e,r,n;return e=t,(r=[{key:"toString",value:function(){return"x="+this.x+",y="+this.y}},{key:"clone",value:function(){return new t(this.x,this.y,this.mode)}},{key:"equals",value:function(t){var e=!1;return null!=t&&(e=this.x==t.x&&this.y==t.y||isNaN(this.x)&&isNaN(this.y)&&isNaN(t.x)&&isNaN(t.y)),e}},{key:"distanceTo",value:function(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))}},{key:"add",value:function(e,r){if(null==e||null==r)throw new TypeError("Pixel.add cannot receive null values");return new t(this.x+e,this.y+r)}},{key:"offset",value:function(t){var e=this.clone();return t&&(e=this.add(t.x,t.y)),e}},{key:"destroy",value:function(){this.x=null,this.y=null,this.mode=null}}])&&y(e.prototype,r),n&&y(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function v(t){"@babel/helpers - typeof";return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function m(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,g(n.key),n)}}function g(t){var e=function(t,e){if("object"!=v(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==v(e)?e:String(e)}b.Mode={LeftTop:"lefttop",RightTop:"righttop",RightBottom:"rightbottom",LeftBottom:"leftbottom"};var S=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];for(var n=function(t,e,r){return e&&m(t.prototype,e),r&&m(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=0;n<e.length;n++)a(this,new e[n](r))}),o=0;o<e.length;o++){var i=e[o];a(n,i),a(n.prototype,i.prototype),a(n.prototype,new i)}return n;function a(t,e){var r=Object.getOwnPropertyNames(e);Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(e)));for(var n=0;n<r.length;n++){var o=r[n];if("constructor"!==o&&"prototype"!==o&&"name"!==o&&"length"!==o){var i=Object.getOwnPropertyDescriptor(e,o);window.ActiveXObject?Object.defineProperty(t,o,i||{}):Object.defineProperty(t,o,i)}}}},w={startsWith:function(t,e){return 0==t.indexOf(e)},contains:function(t,e){return-1!=t.indexOf(e)},trim:function(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},camelize:function(t){for(var e=t.split("-"),r=e[0],n=1,o=e.length;n<o;n++){var i=e[n];r+=i.charAt(0).toUpperCase()+i.substring(1)}return r},format:function(t,e,r){e||(e=window);return t.replace(w.tokenRegEx,function(t,n){for(var o,i=n.split(/\.+/),a=0;a<i.length;a++)0==a&&(o=e),o=o[i[a]];return"function"==typeof o&&(o=r?o.apply(null,r):o()),void 0===o?"undefined":o})},tokenRegEx:/\$\{([\w.]+?)\}/g,numberRegEx:/^([+-]?)(?=\d|\.\d)\d*(\.\d*)?([Ee]([+-]?\d+))?$/,isNumeric:function(t){return w.numberRegEx.test(t)},numericIf:function(t){return w.isNumeric(t)?parseFloat(t):t}},O={decimalSeparator:".",thousandsSeparator:",",limitSigDigs:function(t,e){var r=0;return e>0&&(r=parseFloat(t.toPrecision(e))),r},format:function(t,e,r,n){e=void 0!==e?e:0,r=void 0!==r?r:O.thousandsSeparator,n=void 0!==n?n:O.decimalSeparator,null!=e&&(t=parseFloat(t.toFixed(e)));var o=t.toString().split(".");1===o.length&&null==e&&(e=0);var i,a=o[0];if(r)for(var s=/(-?[0-9]+)([0-9]{3})/;s.test(a);)a=a.replace(s,"$1"+r+"$2");if(0==e)i=a;else{var u=o.length>1?o[1]:"0";null!=e&&(u+=new Array(e-u.length+1).join("0")),i=a+n+u}return i}};Number.prototype.limitSigDigs||(Number.prototype.limitSigDigs=function(t){return O.limitSigDigs(this,t)});var _={bind:function(t,e){var r=Array.prototype.slice.apply(arguments,[2]);return function(){var n=r.concat(Array.prototype.slice.apply(arguments,[0]));return t.apply(e,n)}},bindAsEventListener:function(t,e){return function(r){return t.call(e,r||window.event)}},False:function(){return!1},True:function(){return!0},Void:function(){}},P={filter:function(t,e,r){var n=[];if(Array.prototype.filter)n=t.filter(e,r);else{var o=t.length;if("function"!=typeof e)throw new TypeError;for(var i=0;i<o;i++)if(i in t){var a=t[i];e.call(r,a,i,t)&&n.push(a)}}return n}};function E(t){"@babel/helpers - typeof";return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function C(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,T(n.key),n)}}function T(t){var e=function(t,e){if("object"!=E(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=E(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==E(e)?e:String(e)}var j=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.CLASS_NAME="SuperMap.Geometry",this.id=V.createUniqueID(this.CLASS_NAME+"_"),this.parent=null,this.bounds=null,this.SRID=null}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.id=null,this.bounds=null,this.SRID=null}},{key:"clone",value:function(){return new t}},{key:"setBounds",value:function(t){t&&(this.bounds=t.clone())}},{key:"clearBounds",value:function(){this.bounds=null,this.parent&&this.parent.clearBounds()}},{key:"extendBounds",value:function(t){this.getBounds()?this.bounds.extend(t):this.setBounds(t)}},{key:"getBounds",value:function(){return null==this.bounds&&this.calculateBounds(),this.bounds}},{key:"calculateBounds",value:function(){}},{key:"getVertices",value:function(t){}},{key:"getArea",value:function(){return 0}}])&&C(e.prototype,r),n&&C(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),k=r(7411),x=r.n(k);function A(t){"@babel/helpers - typeof";return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var I,N,R,M,L,B,D,F=(N="",R="",M="pc",(L=navigator.userAgent.toLowerCase()).indexOf("msie")>-1||L.indexOf("trident")>-1&&L.indexOf("rv")>-1?(N="msie",I=L.match(/msie ([\d.]+)/)||L.match(/rv:([\d.]+)/)):L.indexOf("chrome")>-1?(N="chrome",I=L.match(/chrome\/([\d.]+)/)):L.indexOf("firefox")>-1?(N="firefox",I=L.match(/firefox\/([\d.]+)/)):L.indexOf("opera")>-1?(N="opera",I=L.match(/version\/([\d.]+)/)):L.indexOf("safari")>-1&&(N="safari",I=L.match(/version\/([\d.]+)/)),R=I?I[1]:"",L.indexOf("ipad")>-1||L.indexOf("ipod")>-1||L.indexOf("iphone")>-1?M="apple":L.indexOf("android")>-1&&(R=(I=L.match(/version\/([\d.]+)/))?I[1]:"",M="android"),{name:N,version:R,device:M}),U=(B=!0,D=F,document.createElement("canvas").getContext?("firefox"===D.name&&parseFloat(D.version)<5&&(B=!1),"safari"===D.name&&parseFloat(D.version)<4&&(B=!1),"opera"===D.name&&parseFloat(D.version)<10&&(B=!1),"msie"===D.name&&parseFloat(D.version)<9&&(B=!1)):B=!1,B),G=function(){var t=navigator.userAgent.toLowerCase();return-1===t.indexOf("webkit")&&-1!==t.indexOf("gecko")}(),V={assign:function(t){for(var e=0;e<Object.getOwnPropertyNames(arguments).length;e++){var r=Object.getOwnPropertyNames(arguments)[e];if("caller"!=r&&"callee"!=r&&"length"!=r&&"arguments"!=r){var n=arguments[r];if(n)for(var o=0;o<Object.getOwnPropertyNames(n).length;o++){var i=Object.getOwnPropertyNames(n)[o];"caller"!=r&&"callee"!=r&&"length"!=r&&"arguments"!=r&&(t[i]=n[i])}}}return t},extend:function(t,e){if(t=t||{},e){for(var r in e){var n=e[r];void 0!==n&&(t[r]=n)}!("function"==typeof window.Event&&e instanceof window.Event)&&e.hasOwnProperty&&e.hasOwnProperty("toString")&&(t.toString=e.toString)}return t},copy:function(t,e){var r;if(t=t||{},e)for(var n in t)void 0!==(r=e[n])&&(t[n]=r)},reset:function(t){for(var e in t=t||{})if(t.hasOwnProperty(e)){if("object"===A(t[e])&&t[e]instanceof Array){for(var r in t[e])t[e][r].destroy&&t[e][r].destroy();t[e].length=0}else"object"===A(t[e])&&t[e]instanceof Object&&t[e].destroy&&t[e].destroy();t[e]=null}},getElement:function(){for(var t=[],e=0,r=arguments.length;e<r;e++){var n=arguments[e];if("string"==typeof n&&(n=document.getElementById(n)),1===arguments.length)return n;t.push(n)}return t},isElement:function(t){return!(!t||1!==t.nodeType)},isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},removeItem:function(t,e){for(var r=t.length-1;r>=0;r--)t[r]===e&&t.splice(r,1);return t},indexOf:function(t,e){if(null==t)return-1;if("function"==typeof t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1},modifyDOMElement:function(t,e,r,n,o,i,a,s){e&&(t.id=e),r&&(t.style.left=r.x+"px",t.style.top=r.y+"px"),n&&(t.style.width=n.w+"px",t.style.height=n.h+"px"),o&&(t.style.position=o),i&&(t.style.border=i),a&&(t.style.overflow=a),parseFloat(s)>=0&&parseFloat(s)<1?(t.style.filter="alpha(opacity="+100*s+")",t.style.opacity=s):1===parseFloat(s)&&(t.style.filter="",t.style.opacity="")},applyDefaults:function(t,e){t=t||{};var r="function"==typeof window.Event&&e instanceof window.Event;for(var n in e)(void 0===t[n]||!r&&e.hasOwnProperty&&e.hasOwnProperty(n)&&!t.hasOwnProperty(n))&&(t[n]=e[n]);return!r&&e&&e.hasOwnProperty&&e.hasOwnProperty("toString")&&!t.hasOwnProperty("toString")&&(t.toString=e.toString),t},getParameterString:function(t){var e=[];for(var r in t){var n,o=t[r];if(null!=o&&"function"!=typeof o)n=Array.isArray(o)||"[object Object]"===o.toString()?encodeURIComponent(JSON.stringify(o)):encodeURIComponent(o),e.push(encodeURIComponent(r)+"="+n)}return e.join("&")},urlAppend:function(t,e){var r=t;if(e){0===e.indexOf("?")&&(e=e.substring(1));var n=(t+" ").split(/[?&]/);r+=" "===n.pop()?e:n.length?"&"+e:"?"+e}return r},urlPathAppend:function(t,e){var r=t;if(!e)return r;0===e.indexOf("/")&&(e=e.substring(1));var n=t.split("?");return n[0].indexOf("/",n[0].length-1)<0&&(n[0]+="/"),r="".concat(n[0]).concat(e).concat(n.length>1?"?".concat(n[1]):"")},DEFAULT_PRECISION:14,toFloat:function(t,e){return null==e&&(e=V.DEFAULT_PRECISION),"number"!=typeof t&&(t=parseFloat(t)),0===e?t:parseFloat(t.toPrecision(e))},rad:function(t){return t*Math.PI/180},getParameters:function(t){t=null===t||void 0===t?window.location.href:t;var e="";if(w.contains(t,"?")){var r=t.indexOf("?")+1,n=w.contains(t,"#")?t.indexOf("#"):t.length;e=t.substring(r,n)}for(var o={},i=e.split(/[&;]/),a=0,s=i.length;a<s;++a){var u=i[a].split("=");if(u[0]){var l=u[0];try{l=decodeURIComponent(l)}catch(t){l=unescape(l)}var c=(u[1]||"").replace(/\+/g," ");try{c=decodeURIComponent(c)}catch(t){c=unescape(c)}1==(c=c.split(",")).length&&(c=c[0]),o[l]=c}}return o},lastSeqID:0,createUniqueID:function(t){return null==t&&(t="id_"),V.lastSeqID+=1,t+V.lastSeqID},normalizeScale:function(t){return t>1?1/t:t},getResolutionFromScale:function(t,e){var r;t&&(null==e&&(e="degrees"),r=1/(V.normalizeScale(t)*q[e]*96));return r},getScaleFromResolution:function(t,e){return null==e&&(e="degrees"),t*q[e]*96},getBrowser:function(){return F},isSupportCanvas:U,supportCanvas:function(){return V.isSupportCanvas},isInTheSameDomain:function(t){return!t||(-1===t.indexOf("//")||V.isSameDomain(t,document.location.toString()))},isSameDomain:function(t,e){return new(x())(t).normalize().origin()===new(x())(e).normalize().origin()},calculateDpi:function(t,e,r,n,o){if(t&&e&&r){var i,a=t.getWidth(),s=t.getHeight(),u=e.w,l=e.h;if(o=o||6378137,"degree"===(n=n||"degrees").toLowerCase()||"degrees"===n.toLowerCase()||"dd"===n.toLowerCase()){var c=a/u,f=s/l;i=254/(c>f?c:f)/r/(2*Math.PI*o/360)/1e4}else{i=254/(a/u)/r/1e4}return i}},toJSON:function(t){var e=t;if(null==e)return null;switch(e.constructor){case String:return e=(e=(e=(e=(e=(e=(e='"'+e.replace(/(["\\])/g,"\\$1")+'"').replace(/\n/g,"\\n")).replace(/\r/g,"\\r")).replace("<","&lt;")).replace(">","&gt;")).replace(/%/g,"%25")).replace(/&/g,"%26");case Array:for(var r="",n=0,o=e.length;n<o;n++)r+=V.toJSON(e[n]),n!==e.length-1&&(r+=",");return"["+r+"]";case Number:return isFinite(e)?String(e):null;case Boolean:return String(e);case Date:return"{'__type':\"System.DateTime\",'Year':"+e.getFullYear()+",'Month':"+(e.getMonth()+1)+",'Day':"+e.getDate()+",'Hour':"+e.getHours()+",'Minute':"+e.getMinutes()+",'Second':"+e.getSeconds()+",'Millisecond':"+e.getMilliseconds()+",'TimezoneOffset':"+e.getTimezoneOffset()+"}";default:if(null!=e.toJSON&&"function"==typeof e.toJSON)return e.toJSON();if("object"===A(e)){if(e.length){for(var i=[],a=0,s=e.length;a<s;a++)i.push(V.toJSON(e[a]));return"["+i.join(",")+"]"}var u=[];for(var l in e)"function"!=typeof e[l]&&"CLASS_NAME"!==l&&"parent"!==l&&u.push("'"+l+"':"+V.toJSON(e[l]));return u.length>0?"{"+u.join(",")+"}":"{}"}return e.toString()}},getResolutionFromScaleDpi:function(t,e,r,n){return n=n||6378137,r=r||"",t>0&&e>0?(t=V.normalizeScale(t),"degree"===r.toLowerCase()||"degrees"===r.toLowerCase()||"dd"===r.toLowerCase()?254/e/t/(2*Math.PI*n/360)/1e4:254/e/t/1e4):-1},getScaleFromResolutionDpi:function(t,e,r,n){return n=n||6378137,r=r||"",t>0&&e>0?"degree"===r.toLowerCase()||"degrees"===r.toLowerCase()||"dd"===r.toLowerCase()?254/e/t/(2*Math.PI*n/360)/1e4:254/e/t/1e4:-1},transformResult:function(t){return t.responseText&&"string"==typeof t.responseText&&(t=JSON.parse(t.responseText)),t},copyAttributes:function(t,e){if(t=t||{},e)for(var r in e){var n=e[r];void 0!==n&&"CLASS_NAME"!==r&&"function"!=typeof n&&(t[r]=n)}return t},copyAttributesWithClip:function(t,e,r){if(t=t||{},e)for(var n in e){var o=!1;if(r&&r.length)for(var i=0,a=r.length;i<a;i++)if(n===r[i]){o=!0;break}if(!0!==o){var s=e[n];void 0!==s&&"CLASS_NAME"!==n&&"function"!=typeof s&&(t[n]=s)}}return t},cloneObject:function(t){if(null===t||"object"!==A(t))return t;if(t instanceof Date){var e=new Date;return e.setTime(t.getTime()),e}if(t instanceof Array)return t.slice(0);if(t instanceof Object){var r={};for(var n in t)t.hasOwnProperty(n)&&(r[n]=V.cloneObject(t[n]));return r}throw new Error("Unable to copy obj! Its type isn't supported.")},lineIntersection:function(t,e,r,n){var o,i,a=null,s=(n.x-r.x)*(t.y-r.y)-(n.y-r.y)*(t.x-r.x),u=(e.x-t.x)*(t.y-r.y)-(e.y-t.y)*(t.x-r.x),l=(n.y-r.y)*(e.x-t.x)-(n.x-r.x)*(e.y-t.y);if(0!=l)i=u/l,a=(o=s/l)>=0&&i<=1&&o<=1&&i>=0?new j.Point(t.x+o*(e.x-t.x),t.y+o*(e.y-t.y)):"No Intersection";else if(0==s&&0==u){var c=Math.max(t.y,e.y),f=Math.min(t.y,e.y),p=Math.max(t.x,e.x),h=Math.min(t.x,e.x);a=(r.y>=f&&r.y<=c||n.y>=f&&n.y<=c)&&r.x>=h&&r.x<=p||n.x>=h&&n.x<=p?"Coincident":"Parallel"}else a="Parallel";return a},getTextBounds:function(t,e,r){document.body.appendChild(r),r.style.width="auto",r.style.height="auto",t.fontSize&&(r.style.fontSize=t.fontSize),t.fontFamily&&(r.style.fontFamily=t.fontFamily),t.fontWeight&&(r.style.fontWeight=t.fontWeight),r.style.position="relative",r.style.visibility="hidden",r.style.display="inline-block",r.innerHTML=e;var n=r.clientWidth,o=r.clientHeight;return document.body.removeChild(r),{textWidth:n,textHeight:o}},convertPath:function(t,e){return e?t.replace(/\{([\w-\.]+)\}/g,function(t,r){var n;return n=e.hasOwnProperty(r)?function(t){if(void 0==t||null==t)return"";if(t instanceof Date)return t.toJSON();if(function(t){if("string"!=typeof t&&"object"!==A(t))return!1;try{var e=t.toString();return"[object Object]"===e||"[object Array]"===e}catch(t){return!1}}(t))return JSON.stringify(t);return t.toString()}(e[r]):t,encodeURIComponent(n)}):t}},q={inches:1,ft:12,mi:63360,m:39.3701,km:39370.1,dd:4374754,yd:36};q.in=q.inches,q.degrees=q.dd,q.nmi=1852*q.m;var H=.0254000508001016;function z(t){"@babel/helpers - typeof";return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function J(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,W(n.key),n)}}function W(t){var e=function(t,e){if("object"!=z(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=z(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==z(e)?e:String(e)}V.extend(q,{Inch:q.inches,Meter:39.37,Foot:12,IFoot:11.999976,ClarkeFoot:11.999868327581488,SearsFoot:11.999955194477684,GoldCoastFoot:11.999964589846002,IInch:.9999979999999999,MicroInch:999998e-9,Mil:9.99998e-7,Centimeter:.3937,Kilometer:39370,Yard:36,SearsYard:35.99986558343306,IndianYard:35.99987015540864,IndianYd37:35.999740205100004,IndianYd62:35.999880755999996,IndianYd75:35.999868945,IndianFoot:11.9999567087,IndianFt37:11.9999134017,IndianFt62:11.999960252000001,IndianFt75:11.999956315,Mile:63360,IYard:35.999928,IMile:63359.87328,NautM:72913.24,"Lat-66":4367838.370169282,"Lat-83":4367954.152606599,Decimeter:3.9370000000000003,Millimeter:.03937,Dekameter:393.7,Decameter:393.7,Hectometer:3937,GermanMeter:39.370535294205006,CaGrid:39.359685060000004,ClarkeChain:791.991309620512,GunterChain:792.0000000000001,BenoitChain:791.9977268035781,SearsChain:791.9970428354235,ClarkeLink:7.91991309620512,GunterLink:7.920000000000001,BenoitLink:7.919977268035781,SearsLink:7.919970428354236,Rod:198.00000000000014,IntnlChain:791.998416,IntnlLink:7.91998416,Perch:198.00000000000014,Pole:198.00000000000014,Furlong:7919.999999999997,Rood:148.75036777426,CapeFoot:11.999868185255002,Brealey:14763.75,ModAmFt:12.000458400000001,Fathom:71.999856,"NautM-UK":72959.85408,"50kilometers":1968500,"150kilometers":5905500}),V.extend(q,{mm:q.Meter/1e3,cm:q.Meter/100,dm:100*q.Meter,km:1e3*q.Meter,kmi:q.nmi,fath:q.Fathom,ch:q.IntnlChain,link:q.IntnlLink,"us-in":q.inches,"us-ft":q.Foot,"us-yd":q.Yard,"us-ch":q.GunterChain,"us-mi":q.Mile,"ind-yd":q.IndianYd37,"ind-ft":q.IndianFt37,"ind-ch":791.9942845122}),q.degree=q.dd,q.meter=q.m,q.foot=q.ft,q.inch=q.inches,q.mile=q.mi,q.kilometer=q.km,q.yard=q.yd;var K=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),V.isArray(e)&&(r=e[1],e=e[0]),this.lon=e?V.toFloat(e):0,this.lat=r?V.toFloat(r):0,this.CLASS_NAME="SuperMap.LonLat"}var e,r,n;return e=t,n=[{key:"fromString",value:function(e){var r=e.split(",");return new t(r[0],r[1])}},{key:"fromArray",value:function(e){var r=V.isArray(e);return new t(r&&e[0],r&&e[1])}}],(r=[{key:"toString",value:function(){return"lon="+this.lon+",lat="+this.lat}},{key:"toShortString",value:function(){return this.lon+","+this.lat}},{key:"clone",value:function(){return new t(this.lon,this.lat)}},{key:"add",value:function(e,r){if(null==e||null==r)throw new TypeError("LonLat.add cannot receive null values");return new t(this.lon+V.toFloat(e),this.lat+V.toFloat(r))}},{key:"equals",value:function(t){var e=!1;return null!=t&&(e=this.lon===t.lon&&this.lat===t.lat||isNaN(this.lon)&&isNaN(this.lat)&&isNaN(t.lon)&&isNaN(t.lat)),e}},{key:"wrapDateLine",value:function(t){var e=this.clone();if(t){for(;e.lon<t.left;)e.lon+=t.getWidth();for(;e.lon>t.right;)e.lon-=t.getWidth()}return e}},{key:"destroy",value:function(){this.lon=null,this.lat=null}}])&&J(e.prototype,r),n&&J(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Q(t){"@babel/helpers - typeof";return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Y(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,X(n.key),n)}}function X(t){var e=function(t,e){if("object"!=Q(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Q(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Q(e)?e:String(e)}var Z=function(){function t(e,r,n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),V.isArray(e)&&(o=e[3],n=e[2],r=e[1],e=e[0]),this.left=null!=e?V.toFloat(e):this.left,this.bottom=null!=r?V.toFloat(r):this.bottom,this.right=null!=n?V.toFloat(n):this.right,this.top=null!=o?V.toFloat(o):this.top,this.centerLonLat=null,this.CLASS_NAME="SuperMap.Bounds"}var e,r,n;return e=t,n=[{key:"fromString",value:function(e,r){var n=e.split(",");return t.fromArray(n,r)}},{key:"fromArray",value:function(e,r){return!0===r?new t(e[1],e[0],e[3],e[2]):new t(e[0],e[1],e[2],e[3])}},{key:"fromSize",value:function(e){return new t(0,e.h,e.w,0)}},{key:"oppositeQuadrant",value:function(t){var e="";return e+="t"===t.charAt(0)?"b":"t",e+="l"===t.charAt(1)?"r":"l"}}],(r=[{key:"clone",value:function(){return new t(this.left,this.bottom,this.right,this.top)}},{key:"equals",value:function(t){var e=!1;return null!=t&&(e=this.left===t.left&&this.right===t.right&&this.top===t.top&&this.bottom===t.bottom),e}},{key:"toString",value:function(){return[this.left,this.bottom,this.right,this.top].join(",")}},{key:"toArray",value:function(t){return!0===t?[this.bottom,this.left,this.top,this.right]:[this.left,this.bottom,this.right,this.top]}},{key:"toBBOX",value:function(t,e){null==t&&(t=6);var r=Math.pow(10,t),n=Math.round(this.left*r)/r,o=Math.round(this.bottom*r)/r,i=Math.round(this.right*r)/r,a=Math.round(this.top*r)/r;return!0===e?o+","+n+","+a+","+i:n+","+o+","+i+","+a}},{key:"getWidth",value:function(){return this.right-this.left}},{key:"getHeight",value:function(){return this.top-this.bottom}},{key:"getSize",value:function(){return new p(this.getWidth(),this.getHeight())}},{key:"getCenterPixel",value:function(){return new b((this.left+this.right)/2,(this.bottom+this.top)/2)}},{key:"getCenterLonLat",value:function(){return this.centerLonLat||(this.centerLonLat=new K((this.left+this.right)/2,(this.bottom+this.top)/2)),this.centerLonLat}},{key:"scale",value:function(e,r){var n,o;return e=e||1,null==r&&(r=this.getCenterLonLat()),"SuperMap.LonLat"===r.CLASS_NAME?(n=r.lon,o=r.lat):(n=r.x,o=r.y),new t((this.left-n)*e+n,(this.bottom-o)*e+o,(this.right-n)*e+n,(this.top-o)*e+o)}},{key:"add",value:function(e,r){if(null==e||null==r)throw new TypeError("Bounds.add cannot receive null values");return new t(this.left+e,this.bottom+r,this.right+e,this.top+r)}},{key:"extend",value:function(e){var r=null;if(e){switch(e.CLASS_NAME){case"SuperMap.LonLat":r=new t(e.lon,e.lat,e.lon,e.lat);break;case"SuperMap.Geometry.Point":r=new t(e.x,e.y,e.x,e.y);break;case"SuperMap.Bounds":r=e}r&&(this.centerLonLat=null,(null==this.left||r.left<this.left)&&(this.left=r.left),(null==this.bottom||r.bottom<this.bottom)&&(this.bottom=r.bottom),(null==this.right||r.right>this.right)&&(this.right=r.right),(null==this.top||r.top>this.top)&&(this.top=r.top))}}},{key:"containsLonLat",value:function(t,e){"boolean"==typeof e&&(e={inclusive:e}),e=e||{};var r=this.contains(t.lon,t.lat,e.inclusive),n=e.worldBounds;if(n&&!r){var o=n.getWidth(),i=(n.left+n.right)/2,a=Math.round((t.lon-i)/o);r=this.containsLonLat({lon:t.lon-a*o,lat:t.lat},{inclusive:e.inclusive})}return r}},{key:"containsPixel",value:function(t,e){return this.contains(t.x,t.y,e)}},{key:"contains",value:function(t,e,r){if(null==r&&(r=!0),null==t||null==e)return!1;var n=!1;return n=r?t>=this.left&&t<=this.right&&e>=this.bottom&&e<=this.top:t>this.left&&t<this.right&&e>this.bottom&&e<this.top,n}},{key:"intersectsBounds",value:function(t,e){if("boolean"==typeof e&&(e={inclusive:e}),(e=e||{}).worldBounds){var r=this.wrapDateLine(e.worldBounds);t=t.wrapDateLine(e.worldBounds)}else r=this;null==e.inclusive&&(e.inclusive=!0);var n=!1,o=r.left===t.right||r.right===t.left||r.top===t.bottom||r.bottom===t.top;if(e.inclusive||!o){var i=t.bottom>=r.bottom&&t.bottom<=r.top||r.bottom>=t.bottom&&r.bottom<=t.top,a=t.top>=r.bottom&&t.top<=r.top||r.top>t.bottom&&r.top<t.top,s=t.left>=r.left&&t.left<=r.right||r.left>=t.left&&r.left<=t.right,u=t.right>=r.left&&t.right<=r.right||r.right>=t.left&&r.right<=t.right;n=(i||a)&&(s||u)}if(e.worldBounds&&!n){var l=e.worldBounds,c=l.getWidth(),f=!l.containsBounds(r),p=!l.containsBounds(t);f&&!p?(t=t.add(-c,0),n=r.intersectsBounds(t,{inclusive:e.inclusive})):p&&!f&&(r=r.add(-c,0),n=t.intersectsBounds(r,{inclusive:e.inclusive}))}return n}},{key:"containsBounds",value:function(t,e,r){null==e&&(e=!1),null==r&&(r=!0);var n=this.contains(t.left,t.bottom,r),o=this.contains(t.right,t.bottom,r),i=this.contains(t.left,t.top,r),a=this.contains(t.right,t.top,r);return e?n||o||i||a:n&&o&&i&&a}},{key:"determineQuadrant",value:function(t){var e="",r=this.getCenterLonLat();return e+=t.lat<r.lat?"b":"t",e+=t.lon<r.lon?"l":"r"}},{key:"wrapDateLine",value:function(t,e){var r=(e=e||{}).leftTolerance||0,n=e.rightTolerance||0,o=this.clone();if(t){for(var i=t.getWidth();o.left<t.left&&o.right-n<=t.left;)o=o.add(i,0);for(;o.left+r>=t.right&&o.right>t.right;)o=o.add(-i,0);var a=o.left+r;a<t.right&&a>t.left&&o.right-n>t.right&&(o=o.add(-i,0))}return o}},{key:"toServerJSONObject",value:function(){return{rightTop:{x:this.right,y:this.top},leftBottom:{x:this.left,y:this.bottom},left:this.left,right:this.right,top:this.top,bottom:this.bottom}}},{key:"destroy",value:function(){this.left=null,this.right=null,this.top=null,this.bottom=null,this.centerLonLat=null}}])&&Y(e.prototype,r),n&&Y(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function $(t){"@babel/helpers - typeof";return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,et(n.key),n)}}function et(t){var e=function(t,e){if("object"!=$(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=$(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==$(e)?e:String(e)}function rt(t,e,r){return e=ot(e),function(t,e){if(e&&("object"===$(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],ot(t).constructor):e.apply(t,r))}function nt(){return(nt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ot(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function ot(t){return(ot=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function it(t,e){return(it=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var at=function(t){function e(t,r,n,o){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=rt(this,e,[t,r,n,o])).x=parseFloat(t),i.y=parseFloat(r),i.tag=o||0==o?parseFloat(o):null,i.type=n||"Point",i.CLASS_NAME="SuperMap.Geometry.Point",i.geometryType="Point",i}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&it(t,e)}(e,j),r=e,(n=[{key:"clone",value:function(t){return null==t&&(t=new e(this.x,this.y)),V.applyDefaults(t,this),t}},{key:"calculateBounds",value:function(){this.bounds=new Z(this.x,this.y,this.x,this.y)}},{key:"equals",value:function(t){var e=!1;return null!=t&&(e=this.x===t.x&&this.y===t.y||isNaN(this.x)&&isNaN(this.y)&&isNaN(t.x)&&isNaN(t.y)),e}},{key:"move",value:function(t,e){this.x=this.x+t,this.y=this.y+e,this.clearBounds()}},{key:"toShortString",value:function(){return this.x+", "+this.y}},{key:"destroy",value:function(){this.x=null,this.y=null,this.tag=null,nt(ot(e.prototype),"destroy",this).call(this)}},{key:"getVertices",value:function(){return[this]}}])&&tt(r.prototype,n),o&&tt(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function st(t){"@babel/helpers - typeof";return(st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ut(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,lt(n.key),n)}}function lt(t){var e=function(t,e){if("object"!=st(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=st(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==st(e)?e:String(e)}function ct(t,e,r){return e=pt(e),function(t,e){if(e&&("object"===st(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],pt(t).constructor):e.apply(t,r))}function ft(){return(ft="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=pt(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function pt(t){return(pt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ht(t,e){return(ht=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var yt=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=ct(this,e)).components=[],r.componentTypes=null,null!=t&&r.addComponents(t),r.CLASS_NAME="SuperMap.Geometry.Collection",r.geometryType="Collection",r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ht(t,e)}(e,j),r=e,(n=[{key:"destroy",value:function(){this.components.length=0,this.components=null,ft(pt(e.prototype),"destroy",this).call(this)}},{key:"clone",value:function(){for(var t=new e,r=0,n=this.components.length;r<n;r++)t.addComponent(this.components[r].clone());return V.applyDefaults(t,this),t}},{key:"getComponentsString",value:function(){for(var t=[],e=0,r=this.components.length;e<r;e++)t.push(this.components[e].toShortString());return t.join(",")}},{key:"calculateBounds",value:function(){this.bounds=null;var t=new Z,e=this.components;if(e)for(var r=0,n=e.length;r<n;r++)t.extend(e[r].getBounds());null!=t.left&&null!=t.bottom&&null!=t.right&&null!=t.top&&this.setBounds(t)}},{key:"addComponents",value:function(t){V.isArray(t)||(t=[t]);for(var e=0,r=t.length;e<r;e++)this.addComponent(t[e])}},{key:"addComponent",value:function(t,e){var r=!1;if(t&&(null==this.componentTypes||V.indexOf(this.componentTypes,t.CLASS_NAME)>-1)){if(null!=e&&e<this.components.length){var n=this.components.slice(0,e),o=this.components.slice(e,this.components.length);n.push(t),this.components=n.concat(o)}else this.components.push(t);t.parent=this,this.clearBounds(),r=!0}return r}},{key:"removeComponents",value:function(t){var e=!1;V.isArray(t)||(t=[t]);for(var r=t.length-1;r>=0;--r)e=this.removeComponent(t[r])||e;return e}},{key:"removeComponent",value:function(t){return V.removeItem(this.components,t),this.clearBounds(),!0}},{key:"getArea",value:function(){for(var t=0,e=0,r=this.components.length;e<r;e++)t+=this.components[e].getArea();return t}},{key:"equals",value:function(t){var e=!0;if(t&&t.CLASS_NAME&&this.CLASS_NAME===t.CLASS_NAME)if(V.isArray(t.components)&&t.components.length===this.components.length){for(var r=0,n=this.components.length;r<n;++r)if(!this.components[r].equals(t.components[r])){e=!1;break}}else e=!1;else e=!1;return e}},{key:"getVertices",value:function(t){for(var e=[],r=0,n=this.components.length;r<n;++r)Array.prototype.push.apply(e,this.components[r].getVertices(t));return e}}])&&ut(r.prototype,n),o&&ut(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function dt(t){"@babel/helpers - typeof";return(dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,vt(n.key),n)}}function vt(t){var e=function(t,e){if("object"!=dt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=dt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==dt(e)?e:String(e)}function mt(t,e,r){return e=gt(e),function(t,e){if(e&&("object"===dt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],gt(t).constructor):e.apply(t,r))}function gt(t){return(gt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function St(t,e){return(St=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var wt=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=mt(this,e,[t])).componentTypes=["SuperMap.Geometry.Point"],r.CLASS_NAME="SuperMap.Geometry.MultiPoint",r.geometryType="MultiPoint",r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&St(t,e)}(e,yt),r=e,(n=[{key:"addPoint",value:function(t,e){this.addComponent(t,e)}},{key:"removePoint",value:function(t){this.removeComponent(t)}}])&&bt(r.prototype,n),o&&bt(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function Ot(t){"@babel/helpers - typeof";return(Ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Pt(n.key),n)}}function Pt(t){var e=function(t,e){if("object"!=Ot(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ot(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ot(e)?e:String(e)}function Et(t,e,r){return e=Ct(e),function(t,e){if(e&&("object"===Ot(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Ct(t).constructor):e.apply(t,r))}function Ct(t){return(Ct=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Tt(t,e){return(Tt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var jt=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Et(this,e,[t])).componentTypes=["SuperMap.Geometry.Point","SuperMap.PointWithMeasure"],r.CLASS_NAME="SuperMap.Geometry.Curve",r.geometryType="Curve",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Tt(t,e)}(e,wt),r=e,n&&_t(r.prototype,n),o&&_t(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function kt(t){"@babel/helpers - typeof";return(kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,At(n.key),n)}}function At(t){var e=function(t,e){if("object"!=kt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=kt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==kt(e)?e:String(e)}function It(t,e,r){return e=Rt(e),function(t,e){if(e&&("object"===kt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Rt(t).constructor):e.apply(t,r))}function Nt(){return(Nt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Rt(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Rt(t){return(Rt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Mt(t,e){return(Mt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Lt=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=It(this,e,[t])).CLASS_NAME="SuperMap.Geometry.LineString",r.geometryType="LineString",r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Mt(t,e)}(e,jt),r=e,o=[{key:"calculateCircle",value:function(t){if(t.length<3)return t;var e={},r=t[0],n=t[1],o=t[2],i=0,a=0,s=!0,u=0,l=0,c=0,f=[],p=(o.y-r.y)/(o.x-r.x),h=o.y-p*o.x;if(o.x!=r.x&&o.y!=r.y&&n.y==p*n.x+h||o.x==r.x&&n.x==r.x||o.y==r.y&&n.y==r.y||o.x==r.x&&o.y==r.y||o.x==n.x&&o.y==n.y||r.x==n.x&&r.y==n.y)f.push(r),f.push(n),f.push(o);else{var y=(n.x*n.x+n.y*n.y-(r.x*r.x+r.y*r.y))*(2*(o.y-r.y))-(o.x*o.x+o.y*o.y-(r.x*r.x+r.y*r.y))*(2*(n.y-r.y)),d=2*(n.x-r.x)*(o.x*o.x+o.y*o.y-(r.x*r.x+r.y*r.y))-2*(o.x-r.x)*(n.x*n.x+n.y*n.y-(r.x*r.x+r.y*r.y)),b=4*((n.x-r.x)*(o.y-r.y)-(o.x-r.x)*(n.y-r.y));e.x=y/b,e.y=d/b;var v=(2*(i=Math.sqrt((r.x-e.x)*(r.x-e.x)+(r.y-e.y)*(r.y-e.y)))*i-((r.x-o.x)*(r.x-o.x)+(r.y-o.y)*(r.y-o.y)))/(2*i*i);v=(v=v>=1?1:v)<=-1?-1:v,c=180*Math.acos(v)/Math.PI,a=(c=o.x==r.x?e.x>r.x&&n.x>r.x||e.x<r.x&&n.x<r.x?360-c:c:e.y>p*e.x+h&&n.y>p*n.x+h||e.y<p*e.x+h&&n.y<p*n.x+h?360-c:c)/72,o.y!=r.y?o.x==r.x?o.y>r.y?n.x<r.x&&(s=!1):n.x>r.x&&(s=!1):o.x<r.x?n.y<p*n.x+h&&(s=!1):n.y>p*n.x+h&&(s=!1):o.x>r.x?n.y>r.y&&(s=!1):n.y<r.y&&(s=!1);var m=(r.y-e.y)/(r.x-e.x),g=m>=0?180*Math.atan(m)/Math.PI:Math.abs(180*Math.atan(m)/Math.PI)+90,S=Math.abs(e.y);r.y==S&&S==o.y&&r.x<o.x&&(g+=180);var w=r.y-e.y;f.push(r);for(var O=1;O<72;O++){u=a*O,l=g,s?w>=0?m>=0?l+=u:l=180-(l-90)+u:l=m>0?l-180+u:90-l+u:w>=0?m>=0?l-=u:l=180-(l-90)-u:l=m>=0?l-180-u:90-l-u,l=l*Math.PI/180;var _=e.x+i*Math.cos(l),P=e.y+i*Math.sin(l);f.push(new at(_,P))}f.push(o)}return f}},{key:"createLineEPS",value:function(t){var r=[],n=t.length;if(n<2)return t;for(var o=0;o<n;){if("LTypeArc"==t[o].type){var i=e.createLineArc(r,o,n,t);r=i[0],o=i[1]}else r.push(t[o]),o++}return r}},{key:"createLineArc",value:function(t,r,n,o){if(0==r){var i=e.addPointEPS(o,r,n,"LTypeArc");Array.prototype.push.apply(t,i[0]),r=i[1]+1}else if(r==n-1){var a=[o[r-1],o[r]],s=e.calculateCircle(a);Array.prototype.push.apply(t,s),r++}else{var u=e.addPointEPS(o,r,n,"LTypeArc");t.pop(),Array.prototype.push.apply(t,u[0]),r=u[1]+1}return[t,r]}},{key:"addPointEPS",value:function(t,r,n,o){var i,a=[],s=r+1;return 0==r?Array.prototype.push.apply(a,[t[r],t[r+1]]):r==n-1?Array.prototype.push.apply(a,[t[r-1],t[r]]):Array.prototype.push.apply(a,[t[r-1],t[r],t[r+1]]),"LTypeCurve"==o?i=e.calculatePointsFBZN(a):"LTypeArc"==o&&(i=e.calculateCircle(a)),[i,s]}}],(n=[{key:"removeComponent",value:function(t){var r=this.components&&this.components.length>2;return r&&Nt(Rt(e.prototype),"removeComponent",this).apply(this,arguments),r}},{key:"getSortedSegments",value:function(){for(var t,e,r=this.components.length-1,n=new Array(r),o=0;o<r;++o)t=this.components[o],e=this.components[o+1],t.x<e.x?n[o]={x1:t.x,y1:t.y,x2:e.x,y2:e.y}:n[o]={x1:e.x,y1:e.y,x2:t.x,y2:t.y};return n.sort(function(t,e){return t.x1-e.x1})}},{key:"getVertices",value:function(t){return!0===t?[this.components[0],this.components[this.components.length-1]]:!1===t?this.components.slice(1,this.components.length-1):this.components.slice()}}])&&xt(r.prototype,n),o&&xt(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function Bt(t){"@babel/helpers - typeof";return(Bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Dt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ft(n.key),n)}}function Ft(t){var e=function(t,e){if("object"!=Bt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Bt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Bt(e)?e:String(e)}function Ut(t,e,r){return e=Vt(e),function(t,e){if(e&&("object"===Bt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Vt(t).constructor):e.apply(t,r))}function Gt(){return(Gt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Vt(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Vt(t){return(Vt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function qt(t,e){return(qt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Ht=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Ut(this,e,[t])).componentTypes=["SuperMap.Geometry.Point"],r.CLASS_NAME="SuperMap.Geometry.LinearRing",r.geometryType="LinearRing",r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qt(t,e)}(e,Lt),r=e,(n=[{key:"addComponent",value:function(t,r){var n=!1,o=this.components.pop();null==r&&t.equals(o)||(n=Gt(Vt(e.prototype),"addComponent",this).apply(this,arguments));var i=this.components[0];return Gt(Vt(e.prototype),"addComponent",this).apply(this,[i]),n}},{key:"removeComponent",value:function(t){var r=this.components&&this.components.length>3;if(r){this.components.pop(),Gt(Vt(e.prototype),"removeComponent",this).apply(this,arguments);var n=this.components[0];Gt(Vt(e.prototype),"addComponent",this).apply(this,[n])}return r}},{key:"getArea",value:function(){var t=0;if(this.components&&this.components.length>2){for(var e=0,r=0,n=this.components.length;r<n-1;r++){var o=this.components[r],i=this.components[r+1];e+=(o.x+i.x)*(i.y-o.y)}t=-e/2}return t}},{key:"getVertices",value:function(t){return!0===t?[]:this.components.slice(0,this.components.length-1)}}])&&Dt(r.prototype,n),o&&Dt(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function zt(t){"@babel/helpers - typeof";return(zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Wt(n.key),n)}}function Wt(t){var e=function(t,e){if("object"!=zt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=zt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==zt(e)?e:String(e)}function Kt(t,e,r){return e=Qt(e),function(t,e){if(e&&("object"===zt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Qt(t).constructor):e.apply(t,r))}function Qt(t){return(Qt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Yt(t,e){return(Yt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Xt=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Kt(this,e,[t])).componentTypes=["SuperMap.Geometry.LinearRing"],r.CLASS_NAME="SuperMap.Geometry.Polygon",r.geometryType="Polygon",r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Yt(t,e)}(e,yt),r=e,(n=[{key:"getArea",value:function(){var t=0;if(this.components&&this.components.length>0){t+=Math.abs(this.components[0].getArea());for(var e=1,r=this.components.length;e<r;e++)t-=Math.abs(this.components[e].getArea())}return t}}])&&Jt(r.prototype,n),o&&Jt(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function Zt(t){"@babel/helpers - typeof";return(Zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,te(n.key),n)}}function te(t){var e=function(t,e){if("object"!=Zt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Zt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Zt(e)?e:String(e)}var ee=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.CLASS_NAME="SuperMap.Feature",this.layer=e,this.id=V.createUniqueID(this.CLASS_NAME+"_"),this.lonlat=r,this.data=null!=n?n:{}}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.id=null,this.lonlat=null,this.data=null}}])&&$t(e.prototype,r),n&&$t(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function re(t){"@babel/helpers - typeof";return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ne(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,oe(n.key),n)}}function oe(t){var e=function(t,e){if("object"!=re(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=re(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==re(e)?e:String(e)}function ie(t,e,r){return e=se(e),function(t,e){if(e&&("object"===re(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],se(t).constructor):e.apply(t,r))}function ae(){return(ae="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=se(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function se(t){return(se=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ue(t,e){return(ue=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var le="Unknown",ce="Insert",fe="Update",pe="Delete",he=function(t){function e(t,r,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=ie(this,e,[null,null,r])).fid=null,o.geometry=t||null,o.attributes={},r&&(o.attributes=V.extend(o.attributes,r)),o.bounds=null,o.state=null,o.style=n||null,o.url=null,o.lonlat=null,o.CLASS_NAME="SuperMap.Feature.Vector",e.style={default:{fillColor:"#ee9900",fillOpacity:.4,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"#ee9900",strokeOpacity:1,strokeWidth:1,strokeLinecap:"round",strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"inherit",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},select:{fillColor:"blue",fillOpacity:.4,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"blue",strokeOpacity:1,strokeWidth:2,strokeLinecap:"round",strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"pointer",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},temporary:{fillColor:"#66cccc",fillOpacity:.2,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"#66cccc",strokeOpacity:1,strokeLinecap:"round",strokeWidth:2,strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"default",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},delete:{display:"none"}},o}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ue(t,e)}(e,ee),r=e,(n=[{key:"destroy",value:function(){this.layer&&(this.layer.removeFeatures(this),this.layer=null),this.geometry=null,ae(se(e.prototype),"destroy",this).call(this)}},{key:"clone",value:function(){return new e(this.geometry?this.geometry.clone():null,this.attributes,this.style)}},{key:"toState",value:function(t){if(t===fe)switch(this.state){case le:case pe:this.state=t}else if(t===ce)switch(this.state){case le:break;default:this.state=t}else if(t===pe)switch(this.state){case ce:case pe:break;case le:case fe:this.state=t}else t===le&&(this.state=t)}}])&&ne(r.prototype,n),o&&ne(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function ye(t){"@babel/helpers - typeof";return(ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function de(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,be(n.key),n)}}function be(t){var e=function(t,e){if("object"!=ye(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ye(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ye(e)?e:String(e)}var ve=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.data=null,this.keepData=!1,V.extend(this,e),this.options=e,this.CLASS_NAME="SuperMap.Format"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){}},{key:"read",value:function(t){}},{key:"write",value:function(t){}}])&&de(e.prototype,r),n&&de(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function me(t){"@babel/helpers - typeof";return(me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ge(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Se(n.key),n)}}function Se(t){var e=function(t,e){if("object"!=me(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=me(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==me(e)?e:String(e)}function we(t,e,r){return e=Oe(e),function(t,e){if(e&&("object"===me(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Oe(t).constructor):e.apply(t,r))}function Oe(t){return(Oe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _e(t,e){return(_e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Pe=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=we(this,e,[t])).indent="    ",r.space=" ",r.newline="\n",r.level=0,r.pretty=!1,r.nativeJSON=!(!window.JSON||"function"!=typeof JSON.parse||"function"!=typeof JSON.stringify),r.CLASS_NAME="SuperMap.Format.JSON",r.serialize={object:function(t){if(null==t)return"null";if(t.constructor===Date)return this.serialize.date.apply(this,[t]);if(t.constructor===Array)return this.serialize.array.apply(this,[t]);var e,r,n,o=["{"];this.level+=1;var i=!1;for(e in t)t.hasOwnProperty(e)&&(r=this.write.apply(this,[e,this.pretty]),n=this.write.apply(this,[t[e],this.pretty]),null!=r&&null!=n&&(i&&o.push(","),o.push(this.writeNewline(),this.writeIndent(),r,":",this.writeSpace(),n),i=!0));return this.level-=1,o.push(this.writeNewline(),this.writeIndent(),"}"),o.join("")},array:function(t){var e,r=["["];this.level+=1;for(var n=0,o=t.length;n<o;++n)null!=(e=this.write.apply(this,[t[n],this.pretty]))&&(n>0&&r.push(","),r.push(this.writeNewline(),this.writeIndent(),e));return this.level-=1,r.push(this.writeNewline(),this.writeIndent(),"]"),r.join("")},string:function(t){var e={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return/["\\\x00-\x1f]/.test(t)?'"'+t.replace(/([\x00-\x1f\\"])/g,function(t,r){var n=e[r];return n||(n=r.charCodeAt(),"\\u00"+Math.floor(n/16).toString(16)+(n%16).toString(16))})+'"':'"'+t+'"'},number:function(t){return isFinite(t)?String(t):"null"},boolean:function(t){return String(t)},date:function(t){function e(t){return t<10?"0"+t:t}return'"'+t.getFullYear()+"-"+e(t.getMonth()+1)+"-"+e(t.getDate())+"T"+e(t.getHours())+":"+e(t.getMinutes())+":"+e(t.getSeconds())+'"'}},r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_e(t,e)}(e,ve),r=e,(n=[{key:"read",value:function(t,e){var r;if(this.nativeJSON)try{r=JSON.parse(t,e)}catch(e){return{data:t}}return this.keepData&&(this.data=r),r}},{key:"write",value:function(t,e){this.pretty=!!e;var r=null,n=me(t);if(this.serialize[n])try{r=!this.pretty&&this.nativeJSON?JSON.stringify(t):this.serialize[n].apply(this,[t])}catch(t){}return r}},{key:"writeIndent",value:function(){var t=[];if(this.pretty)for(var e=0;e<this.level;++e)t.push(this.indent);return t.join("")}},{key:"writeNewline",value:function(){return this.pretty?this.newline:""}},{key:"writeSpace",value:function(){return this.pretty?this.space:""}}])&&ge(r.prototype,n),o&&ge(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function Ee(t){"@babel/helpers - typeof";return(Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ce(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Te(n.key),n)}}function Te(t){var e=function(t,e){if("object"!=Ee(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ee(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ee(e)?e:String(e)}function je(t,e,r){return e=ke(e),function(t,e){if(e&&("object"===Ee(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],ke(t).constructor):e.apply(t,r))}function ke(t){return(ke=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function xe(t,e){return(xe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Ae=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=je(this,e,[t])).componentTypes=["SuperMap.Geometry.LineString"],r.CLASS_NAME="SuperMap.Geometry.MultiLineString",r.geometryType="MultiLineString",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xe(t,e)}(e,yt),r=e,n&&Ce(r.prototype,n),o&&Ce(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Ie(t){"@babel/helpers - typeof";return(Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ne(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Re(n.key),n)}}function Re(t){var e=function(t,e){if("object"!=Ie(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ie(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ie(e)?e:String(e)}function Me(t,e,r){return e=Le(e),function(t,e){if(e&&("object"===Ie(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Le(t).constructor):e.apply(t,r))}function Le(t){return(Le=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Be(t,e){return(Be=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var De=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Me(this,e,[t])).componentTypes=["SuperMap.Geometry.Polygon"],r.CLASS_NAME="SuperMap.Geometry.MultiPolygon",r.geometryType="MultiPolygon",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Be(t,e)}(e,yt),r=e,n&&Ne(r.prototype,n),o&&Ne(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Fe(t){"@babel/helpers - typeof";return(Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ue(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ge(n.key),n)}}function Ge(t){var e=function(t,e){if("object"!=Fe(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Fe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Fe(e)?e:String(e)}var Ve=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.red=e||0==e?e:255,this.green=r||0,this.blue=n||0,this.CLASS_NAME="SuperMap.ServerColor"}var e,r,n;return e=t,n=[{key:"fromJson",value:function(e){if(e){var r=new t,n=255;null!==e.red&&(n=Number(e.red)),r.red=n;var o=0;null!==e.green&&(o=Number(e.green)),r.green=o;var i=0;return null!==e.blue&&(i=Number(e.blue)),r.blue=i,r}}}],(r=[{key:"destroy",value:function(){this.red=null,this.green=null,this.blue=null}}])&&Ue(e.prototype,r),n&&Ue(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function qe(t){"@babel/helpers - typeof";return(qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function He(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ze(n.key),n)}}function ze(t){var e=function(t,e){if("object"!=qe(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=qe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==qe(e)?e:String(e)}var Je=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.fillBackColor=new Ve(255,255,255),this.fillBackOpaque=!1,this.fillForeColor=new Ve(255,0,0),this.fillGradientMode=null,this.fillGradientAngle=0,this.fillGradientOffsetRatioX=0,this.fillGradientOffsetRatioY=0,this.fillOpaqueRate=100,this.fillSymbolID=0,this.lineColor=new Ve(0,0,0),this.lineSymbolID=0,this.lineWidth=1,this.markerAngle=0,this.markerSize=1,this.markerSymbolID=-1,e&&V.extend(this,e),this.CLASS_NAME="SuperMap.ServerStyle"}var e,r,n;return e=t,n=[{key:"fromJson",value:function(e){if(e)return new t({fillBackColor:Ve.fromJson(e.fillBackColor),fillBackOpaque:e.fillBackOpaque,fillForeColor:Ve.fromJson(e.fillForeColor),fillGradientMode:e.fillGradientMode,fillGradientAngle:e.fillGradientAngle,fillGradientOffsetRatioX:e.fillGradientOffsetRatioX,fillGradientOffsetRatioY:e.fillGradientOffsetRatioY,fillOpaqueRate:e.fillOpaqueRate,fillSymbolID:e.fillSymbolID,lineColor:Ve.fromJson(e.lineColor),lineSymbolID:e.lineSymbolID,lineWidth:e.lineWidth,markerAngle:e.markerAngle,markerSize:e.markerSize,markerSymbolID:e.markerSymbolID})}}],(r=[{key:"destroy",value:function(){var t=this;t.fillBackColor&&(t.fillBackColor.destroy(),t.fillBackColor=null),t.fillBackOpaque=null,t.fillForeColor&&(t.fillForeColor.destroy(),t.fillForeColor=null),t.fillGradientMode=null,t.fillGradientAngle=null,t.fillGradientOffsetRatioX=null,t.fillGradientOffsetRatioY=null,t.fillOpaqueRate=null,t.fillSymbolID=null,t.lineColor&&(t.lineColor.destroy(),t.lineColor=null),t.lineSymbolID=null,t.lineWidth=null,t.markerAngle=null,t.markerSize=null,t.markerSymbolID=null}},{key:"toServerJSONObject",value:function(){var t={};return t=V.copyAttributes(t,this)}}])&&He(e.prototype,r),n&&He(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function We(t){"@babel/helpers - typeof";return(We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ke(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Qe(n.key),n)}}function Qe(t){var e=function(t,e){if("object"!=We(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=We(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==We(e)?e:String(e)}function Ye(t,e,r){return e=Xe(e),function(t,e){if(e&&("object"===We(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ze(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Xe(t).constructor):e.apply(t,r))}function Xe(t){return(Xe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ze(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $e(t,e){return($e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var tr=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Ye(this,e,[t])).measure=null,t&&V.extend(Ze(r),t),r.CLASS_NAME="SuperMap.PointWithMeasure",r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$e(t,e)}(e,at),r=e,o=[{key:"fromJson",value:function(t){if(t)return new e({x:t.x,y:t.y,measure:t.measure})}}],(n=[{key:"equals",value:function(t){var e=!1;if(null!=t){var r=this.x===t.x&&this.y===t.y&&this.measure===t.measure,n=isNaN(this.x)&&isNaN(this.y)&&isNaN(this.measure),o=isNaN(t.x)&&isNaN(t.y)&&isNaN(t.measure);e=r||n&&o}return e}},{key:"toJson",value:function(){var t="{";return null!=this.measure&&void 0!=this.measure&&(t+='"measure":'+this.measure+","),t+='"x":'+this.x+",",t+='"y":'+this.y,t+="}"}},{key:"destroy",value:function(){this.measure=null,this.x=null,this.y=null}}])&&Ke(r.prototype,n),o&&Ke(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function er(t){"@babel/helpers - typeof";return(er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,nr(n.key),n)}}function nr(t){var e=function(t,e){if("object"!=er(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=er(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==er(e)?e:String(e)}function or(t,e,r){return e=ir(e),function(t,e){if(e&&("object"===er(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ar(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],ir(t).constructor):e.apply(t,r))}function ir(t){return(ir=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ar(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function sr(t,e){return(sr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var ur=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=or(this,e,[t,r])).id=null,n.center=null,n.style=null,n.length=null,n.maxM=null,n.minM=null,n.parts=null,n.points=null,n.type=null,n.componentTypes=["SuperMap.Geometry.LinearRing","SuperMap.Geometry.LineString"],r&&V.extend(ar(n),r),n.CLASS_NAME="SuperMap.Route",n.geometryType="LINEM",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sr(t,e)}(e,yt),r=e,o=[{key:"fromJson",value:function(t){if(t){var r=t.parts||[],n=t.points||[],o=r.length,i=[];if(!(o>0))return null;for(var a=0,s=0,u=[];a<o;a++){for(var l=0;l<r[a];l++)u.push(tr.fromJson(n[s+l]));s+=r[a],u[0].equals(u[r[a]-1])?i.push(new Ht(u)):i.push(new Lt(u)),u=[]}return new e(i,{id:t.id,center:t.center,style:t.style,length:t.length,maxM:t.maxM,minM:t.minM,type:t.type,parts:t.parts})}}}],(n=[{key:"toJson",value:function(){var t="{";if(null!=this.id&&void 0!=this.id&&(t+='"id":'+this.id+","),null!=this.center&&void 0!=this.center&&(t+='"center":'+this.center+","),null!=this.style&&void 0!=this.style&&(t+='"style":'+this.style+","),null!=this.length&&void 0!=this.length&&(t+='"length":'+this.length+","),null!=this.maxM&&void 0!=this.maxM&&(t+='"maxM":'+this.maxM+","),null!=this.minM&&void 0!=this.minM&&(t+='"minM":'+this.minM+","),null!=this.type&&void 0!=this.type&&(t+='"type":"'+this.type+'",'),null!=this.parts&&void 0!=this.parts){t+='"parts":['+this.parts[0];for(var e=1;e<this.parts.length;e++)t+=","+this.parts[e];t+="],"}if(null!=this.components&&this.components.length>0){t+='"points":[';for(var r=0,n=this.components.length;r<n;r++)for(var o=0,i=this.components[r].components.length;o<i;o++)t+=this.components[r].components[o].toJson()+",";t=t.replace(/,$/g,""),t+="]"}return t=t.replace(/,$/g,""),t+="}"}},{key:"destroy",value:function(){var t=this;t.id=null,t.center=null,t.style=null,t.length=null,t.maxM=null,t.minM=null,t.type=null,t.parts=null,t.components.length=0,t.components=null,t.componentTypes=null}}])&&rr(r.prototype,n),o&&rr(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}(),lr={GEOJSON:"GEOJSON",ISERVER:"ISERVER",FGB:"FGB"},cr={ISERVER:"ISERVER",IPORTAL:"IPORTAL",ONLINE:"ONLINE"},fr={LINE:"LINE",LINEM:"LINEM",POINT:"POINT",REGION:"REGION",POINTEPS:"POINTEPS",LINEEPS:"LINEEPS",REGIONEPS:"REGIONEPS",ELLIPSE:"ELLIPSE",CIRCLE:"CIRCLE",TEXT:"TEXT",RECTANGLE:"RECTANGLE",UNKNOWN:"UNKNOWN",GEOCOMPOUND:"GEOCOMPOUND"},pr={ATTRIBUTE:"ATTRIBUTE",ATTRIBUTEANDGEOMETRY:"ATTRIBUTEANDGEOMETRY",GEOMETRY:"GEOMETRY"},hr={CONTAIN:"CONTAIN",CROSS:"CROSS",DISJOINT:"DISJOINT",IDENTITY:"IDENTITY",INTERSECT:"INTERSECT",NONE:"NONE",OVERLAP:"OVERLAP",TOUCH:"TOUCH",WITHIN:"WITHIN"},yr={DISTANCE:"DISTANCE",AREA:"AREA"},dr={METER:"METER",KILOMETER:"KILOMETER",MILE:"MILE",YARD:"YARD",DEGREE:"DEGREE",MILLIMETER:"MILLIMETER",CENTIMETER:"CENTIMETER",INCH:"INCH",DECIMETER:"DECIMETER",FOOT:"FOOT",SECOND:"SECOND",MINUTE:"MINUTE",RADIAN:"RADIAN"},br={CENTIMETER:"CENTIMETER",DECIMETER:"DECIMETER",FOOT:"FOOT",INCH:"INCH",KILOMETER:"KILOMETER",METER:"METER",MILE:"MILE",MILLIMETER:"MILLIMETER",YARD:"YARD"},vr={CAPTION:"CAPTION",CAPTION_PERCENT:"CAPTION_PERCENT",CAPTION_VALUE:"CAPTION_VALUE",PERCENT:"PERCENT",VALUE:"VALUE"},mr={AREA:"AREA",BAR:"BAR",BAR3D:"BAR3D",LINE:"LINE",PIE:"PIE",PIE3D:"PIE3D",POINT:"POINT",RING:"RING",ROSE:"ROSE",ROSE3D:"ROSE3D",STACK_BAR:"STACK_BAR",STACK_BAR3D:"STACK_BAR3D",STEP:"STEP"},gr={ALL:"ALL",NONE:"NONE",YAXES:"YAXES"},Sr={CONSTANT:"CONSTANT",LOGARITHM:"LOGARITHM",SQUAREROOT:"SQUAREROOT"},wr={CUSTOMINTERVAL:"CUSTOMINTERVAL",EQUALINTERVAL:"EQUALINTERVAL",LOGARITHM:"LOGARITHM",QUANTILE:"QUANTILE",SQUAREROOT:"SQUAREROOT",STDDEVIATION:"STDDEVIATION"},Or={BLACK_WHITE:"BLACKWHITE",BLUE_BLACK:"BLUEBLACK",BLUE_RED:"BLUERED",BLUE_WHITE:"BLUEWHITE",CYAN_BLACK:"CYANBLACK",CYAN_BLUE:"CYANBLUE",CYAN_GREEN:"CYANGREEN",CYAN_WHITE:"CYANWHITE",GREEN_BLACK:"GREENBLACK",GREEN_BLUE:"GREENBLUE",GREEN_ORANGE_VIOLET:"GREENORANGEVIOLET",GREEN_RED:"GREENRED",GREEN_WHITE:"GREENWHITE",PINK_BLACK:"PINKBLACK",PINK_BLUE:"PINKBLUE",PINK_RED:"PINKRED",PINK_WHITE:"PINKWHITE",RAIN_BOW:"RAINBOW",RED_BLACK:"REDBLACK",RED_WHITE:"REDWHITE",SPECTRUM:"SPECTRUM",TERRAIN:"TERRAIN",YELLOW_BLACK:"YELLOWBLACK",YELLOW_BLUE:"YELLOWBLUE",YELLOW_GREEN:"YELLOWGREEN",YELLOW_RED:"YELLOWRED",YELLOW_WHITE:"YELLOWWHITE"},_r={TOPLEFT:"TOPLEFT",TOPCENTER:"TOPCENTER",TOPRIGHT:"TOPRIGHT",BASELINELEFT:"BASELINELEFT",BASELINECENTER:"BASELINECENTER",BASELINERIGHT:"BASELINERIGHT",BOTTOMLEFT:"BOTTOMLEFT",BOTTOMCENTER:"BOTTOMCENTER",BOTTOMRIGHT:"BOTTOMRIGHT",MIDDLELEFT:"MIDDLELEFT",MIDDLECENTER:"MIDDLECENTER",MIDDLERIGHT:"MIDDLERIGHT"},Pr={NORMAL:"ALONG_LINE_NORMAL",LB_TO_RT:"LEFT_BOTTOM_TO_RIGHT_TOP",LT_TO_RB:"LEFT_TOP_TO_RIGHT_BOTTOM",RB_TO_LT:"RIGHT_BOTTOM_TO_LEFT_TOP",RT_TO_LB:"RIGHT_TOP_TO_LEFT_BOTTOM"},Er={DIAMOND:"DIAMOND",ELLIPSE:"ELLIPSE",MARKER:"MARKER",NONE:"NONE",RECT:"RECT",ROUNDRECT:"ROUNDRECT",TRIANGLE:"TRIANGLE"},Cr={NEWLINE:"NEWLINE",NONE:"NONE",OMIT:"OMIT"},Tr={FLAT:"FLAT",ROUND:"ROUND"},jr={CLIP:"CLIP",ERASE:"ERASE",IDENTITY:"IDENTITY",INTERSECT:"INTERSECT",UNION:"UNION",UPDATE:"UPDATE",XOR:"XOR"},kr={INDEXEDHDFS:"INDEXEDHDFS",UDB:"UDB",MONGODB:"MONGODB",PG:"PG"},xr={BSPLINE:"BSPLINE",POLISH:"POLISH"},Ar={ISOLINE:"ISOLINE",ISOREGION:"ISOREGION"},Ir={DATASET_AND_RECORDSET:"DATASET_AND_RECORDSET",DATASET_ONLY:"DATASET_ONLY",RECORDSET_ONLY:"RECORDSET_ONLY"},Nr={ADD:"add",UPDATE:"update",DELETE:"delete"},Rr={LESS_TIME:"LESS_TIME",LESS_TRANSFER:"LESS_TRANSFER",LESS_WALK:"LESS_WALK",MIN_DISTANCE:"MIN_DISTANCE"},Mr={BUS:"BUS",SUBWAY:"SUBWAY",NO_SUBWAY:"NO_SUBWAY",NONE:"NONE"},Lr={EXPONENTIAL:"EXPONENTIAL",GAUSSIAN:"GAUSSIAN",SPHERICAL:"SPHERICAL"},Br={EXP1:"EXP1",EXP2:"EXP2"},Dr={IP:"IP",REFERER:"Referer",REQUESTIP:"RequestIP",NONE:"NONE",SERVER:"SERVER",WEB:"WEB"},Fr={CLIP:"clip",INTERSECT:"intersect"},Ur={SQUAREMETER:"SquareMeter",SQUAREKILOMETER:"SquareKiloMeter",HECTARE:"Hectare",ARE:"Are",ACRE:"Acre",SQUAREFOOT:"SquareFoot",SQUAREYARD:"SquareYard",SQUAREMILE:"SquareMile"},Gr={METER:"Meter",KILOMETER:"Kilometer",YARD:"Yard",FOOT:"Foot",MILE:"Mile"},Vr={MAX:"max",MIN:"min",AVERAGE:"average",SUM:"sum",VARIANCE:"variance",STDDEVIATION:"stdDeviation"},qr={SUMMARYMESH:"SUMMARYMESH",SUMMARYREGION:"SUMMARYREGION"},Hr={REGIONNOOVERLAP:"REGIONNOOVERLAP",REGIONNOOVERLAPWITH:"REGIONNOOVERLAPWITH",REGIONCONTAINEDBYREGION:"REGIONCONTAINEDBYREGION",REGIONCOVEREDBYREGION:"REGIONCOVEREDBYREGION",LINENOOVERLAP:"LINENOOVERLAP",LINENOOVERLAPWITH:"LINENOOVERLAPWITH",POINTNOIDENTICAL:"POINTNOIDENTICAL"},zr={GEOHASH_GRID:"geohash_grid"},Jr={AVG:"avg",MAX:"max",MIN:"min",SUM:"sum"},Wr={NDVI:"NDVI",HILLSHADE:"HILLSHADE"},Kr={CUSTOM:"CUSTOM",INTERSECTION:"INTERSECTION",UNION:"UNION"},Qr={CUSTOM:"CUSTOM",MAX:"MAX",MIN:"MIN"},Yr={DAY_BRIGHT:"DAY_BRIGHT",DUSK:"DUSK",NIGHT:"NIGHT"},Xr={BASIC:"BASIC",STANDARD:"STANDARD",OTHER:"OTHER"};function Zr(t){"@babel/helpers - typeof";return(Zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,tn(n.key),n)}}function tn(t){var e=function(t,e){if("object"!=Zr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Zr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Zr(e)?e:String(e)}var en=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=0,this.style=null,this.parts=null,this.points=null,this.type=null,this.prjCoordSys=null,e&&V.extend(this,e),this.CLASS_NAME="SuperMap.ServerGeometry"}var e,r,n;return e=t,n=[{key:"fromJson",value:function(e){if(e)return new t({id:e.id,style:Je.fromJson(e.style),parts:e.parts,partTopo:e.partTopo,points:e.points,center:e.center,length:e.length,maxM:e.maxM,minM:e.minM,type:e.type})}},{key:"fromGeometry",value:function(e){if(e){var r=0,n=[],o=[],i=null,a=e.components,s=e.CLASS_NAME,u={epsgCode:e.SRID};if(isNaN(e.id)||(r=e.id),"SuperMap.Geometry.LinearRing"!=s&&"SuperMap.Geometry.LineString"!=s&&(e instanceof wt||e instanceof Ae)){for(var l=a.length,c=0;c<l;c++){var f=a[c].getVertices(),p=f.length;n.push(p);for(var h=0;h<p;h++)o.push(new at(f[h].x,f[h].y))}i="SuperMap.Geometry.MultiPoint"==s?fr.POINT:fr.LINE}else if(e instanceof De){for(var y=a.length,d=0;d<y;d++)for(var b=a[d].components,v=b.length,m=0;m<v;m++){var g=b[m].getVertices(),S=g.length+1;n.push(S);for(var w=0;w<S-1;w++)o.push(new at(g[w].x,g[w].y));o.push(new at(g[0].x,g[0].y))}i=fr.REGION}else if(e instanceof Xt){for(var O=a.length,_=0;_<O;_++){var P=a[_].getVertices(),E=P.length+1;n.push(E);for(var C=0;C<E-1;C++)o.push(new at(P[C].x,P[C].y));o.push(new at(P[0].x,P[0].y))}i=fr.REGION}else{for(var T=e.getVertices(),j=T.length,k=0;k<j;k++)o.push(new at(T[k].x,T[k].y));e instanceof Ht&&(o.push(new at(T[0].x,T[0].y)),j++),n.push(j),i=e instanceof at?fr.POINT:fr.LINE}return new t({id:r,style:null,parts:n,points:o,type:i,prjCoordSys:u})}}},{key:"IsClockWise",value:function(t){var e=t.length;if(e<3)return 0;var r=t[0].y*(t[e-1].x-t[1].x);t.push(t[0]);for(var n=1;n<e;n++)r+=t[n].y*(t[n-1].x-t[n+1].x);return.5*r}},{key:"bubbleSort",value:function(t,e,r,n){for(var o=0;o<t.length;o++)for(var i=0;i<t.length;i++)if(t[o]>t[i]){var a=t[i];t[i]=t[o],t[o]=a;var s=e[i];if(e[i]=e[o],e[o]=s,r&&r.length>0){var u=r[i];r[i]=r[o],r[o]=u}if(n&&n.length>0){var l=n[i];n[i]=n[o],n[o]=l}}}}],(r=[{key:"destroy",value:function(){var t=this;t.id=null,t.style=null,t.parts=null,t.partTopo=null,t.points=null,t.type=null,t.prjCoordSys=null}},{key:"toGeometry",value:function(){var t=this;switch(t.type.toUpperCase()){case fr.POINT:return t.toGeoPoint();case fr.LINE:return t.toGeoLine();case fr.LINEM:return t.toGeoLinem();case fr.REGION:return t.toGeoRegion();case fr.POINTEPS:return t.toGeoPoint();case fr.LINEEPS:return t.toGeoLineEPS();case fr.REGIONEPS:return t.toGeoRegionEPS();case fr.GEOCOMPOUND:return t.transformGeoCompound()}}},{key:"toGeoPoint",value:function(){var t=this.parts||[],e=this.points||[],r=t.length;if(r>0){if(1===r)return new at(e[0].x,e[0].y);for(var n=[],o=0;o<r;o++)n.push(new at(e[o].x,e[o].y));return new wt(n)}return null}},{key:"toGeoLine",value:function(){var t=this.parts||[],e=this.points||[],r=t.length;if(r>0){if(1===r){for(var n=[],o=0;o<t[0];o++)n.push(new at(e[o].x,e[o].y));return n[0].equals(n[t[0]-1])?new Ht(n):new Lt(n)}for(var i=[],a=0;a<r;a++){for(var s=[],u=0;u<t[a];u++)s.push(new at(e[u].x,e[u].y));i.push(new Lt(s)),e.splice(0,t[a])}return new Ae(i)}return null}},{key:"toGeoLineEPS",value:function(){var t,e,r,n,o,i=this.parts||[],a=this.points||[],s=i.length;if(s>0){if(1===s){for(t=0,r=[];t<i[0];t++)r.push(new at(a[t].x,a[t].y,a[t].type));return r[0].equals(r[i[0]-1])?(o=Lt.createLineEPS(r),new Ht(o)):(o=Lt.createLineEPS(r),new Lt(o))}for(t=0,n=[];t<s;t++){for(e=0,r=[];e<i[t];e++)r.push(new at(a[e].x,a[e].y));o=Lt.createLineEPS(r),n.push(new Lt(o)),a.splice(0,i[t])}return new Ae(n)}return null}},{key:"toGeoLinem",value:function(){return ur.fromJson(this)}},{key:"toGeoRegion",value:function(){var e=this.parts||[],r=this.partTopo||[],n=this.points||[],o=e.length;if(o<=0)return null;var i=[],a=[];if(1==o){for(var s=0;s<n.length;s++)a.push(new at(n[s].x,n[s].y));return i.push(new Xt([new Ht(a)])),new De(i)}for(var u=[],l=[],c=[],f=[],p=[],h=0,y=0;h<o;h++){for(var d=0;d<e[h];d++)a.push(new at(n[y+d].x,n[y+d].y));y+=e[h];var b=new Xt([new Ht(a)]);a=[],c.push(b),0===r.length&&f.push(b.getBounds()),p.push(1),l.push(b.getArea())}if(0===r.length){t.bubbleSort(l,c,r,f);for(var v=[],m=1;m<c.length;m++)for(var g=m-1;g>=0;g--)if(v[m]=-1,f[g].containsBounds(f[m])){p[m]=-1*p[g],p[m]<0&&(v[m]=g);break}for(var S=0;S<c.length;S++)p[S]>0?i.push(c[S]):(i[v[S]].components=i[v[S]].components.concat(c[S].components),i.push(""))}else{i=new Array;for(var w=0;w<c.length;w++)if(r[w]&&-1==r[w]?u=u.concat(c[w].components):(u.length>0&&i.length>0&&(i[i.length-1].components=i[i.length-1].components.concat(u),u=[]),i.push(c[w])),w==o-1){var O=i.length;if(O)i[O-1].components=i[O-1].components.concat(u);else for(var _=0,P=u.length;_<P;_++)i.push(new Xt(u))}}return new De(i)}},{key:"toGeoRegionEPS",value:function(){var e=this.parts||[],r=this.partTopo||[],n=this.points||[],o=e.length;if(o<=0)return null;var i,a=[],s=[];if(1==o){for(var u=0;u<n.length;u++)s.push(new at(n[u].x,n[u].y));return i=Lt.createLineEPS(s),a.push(new Xt([new Ht(i)])),new De(a)}for(var l=[],c=[],f=[],p=[],h=[],y=0,d=0;y<o;y++){for(var b=0;b<e[y];b++)s.push(new at(n[d+b].x,n[d+b].y));d+=e[y],i=Lt.createLineEPS(s);var v=new Xt([new Ht(i)]);s=[],f.push(v),0===r.length&&p.push(v.getBounds()),h.push(1),c.push(v.getArea())}if(0===r.length){t.bubbleSort(c,f,r,p);for(var m=[],g=1;g<f.length;g++)for(var S=g-1;S>=0;S--)if(m[g]=-1,p[S].containsBounds(p[g])){h[g]=-1*h[S],h[g]<0&&(m[g]=S);break}for(var w=0;w<f.length;w++)h[w]>0?a.push(f[w]):(a[m[w]].components=a[m[w]].components.concat(f[w].components),a.push(""))}else{a=new Array;for(var O=0;O<f.length;O++)if(r[O]&&-1==r[O]?l=l.concat(f[O].components):(l.length>0&&a.length>0&&(a[a.length-1].components=a[a.length-1].components.concat(l),l=[]),a.push(f[O])),O==o-1){var _=a.length;if(_)a[_-1].components=a[_-1].components.concat(l);else for(var P=0,E=l.length;P<E;P++)a.push(new Xt(l))}}return new De(a)}},{key:"transformGeoCompound",value:function(){var e=this.geoParts||[],r=e.length;if(r<=0)return null;for(var n=[],o=0;o<r;o++){var i=e[o];n.push(new t(i).toGeometry())}return new yt(n)}}])&&$r(e.prototype,r),n&&$r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function rn(t){"@babel/helpers - typeof";return(rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,on(n.key),n)}}function on(t){var e=function(t,e){if("object"!=rn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=rn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==rn(e)?e:String(e)}function an(t,e,r){return e=un(e),function(t,e){if(e&&("object"===rn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],un(t).constructor):e.apply(t,r))}function sn(){return(sn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=un(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function un(t){return(un=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ln(t,e){return(ln=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var cn=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=an(this,e,[t])).ignoreExtraDims=!0,r.CLASS_NAME="SuperMap.Format.GeoJSON",r.parseCoords={point:function(t){if(!1===this.ignoreExtraDims&&2!=t.length)throw"Only 2D points are supported: "+t;return new at(t[0],t[1])},multipoint:function(t){for(var e=[],r=null,n=0,o=t.length;n<o;++n){try{r=this.parseCoords.point.apply(this,[t[n]])}catch(t){throw t}e.push(r)}return new wt(e)},linestring:function(t){for(var e=[],r=null,n=0,o=t.length;n<o;++n){try{r=this.parseCoords.point.apply(this,[t[n]])}catch(t){throw t}e.push(r)}return new Lt(e)},multilinestring:function(t){for(var e=[],r=null,n=0,o=t.length;n<o;++n){try{r=this.parseCoords.linestring.apply(this,[t[n]])}catch(t){throw t}e.push(r)}return new Ae(e)},polygon:function(t){for(var e,r,n=[],o=0,i=t.length;o<i;++o){try{r=this.parseCoords.linestring.apply(this,[t[o]])}catch(t){throw t}e=new Ht(r.components),n.push(e)}return new Xt(n)},multipolygon:function(t){for(var e=[],r=null,n=0,o=t.length;n<o;++n){try{r=this.parseCoords.polygon.apply(this,[t[n]])}catch(t){throw t}e.push(r)}return new De(e)},box:function(t){if(2!=t.length)throw"GeoJSON box coordinates must have 2 elements";return new Xt([new Ht([new at(t[0][0],t[0][1]),new at(t[1][0],t[0][1]),new at(t[1][0],t[1][1]),new at(t[0][0],t[1][1]),new at(t[0][0],t[0][1])])])}},r.extract={feature:function(t){var e=this.extract.geometry.apply(this,[t.geometry]),r={type:"Feature",properties:this.createAttributes(t),geometry:e};return t.geometry&&"TEXT"===t.geometry.type&&(r.properties.texts=t.geometry.texts,r.properties.textStyle=t.geometry.textStyle),t.fid&&(r.id=t.fid),t.ID&&(r.id=t.ID),r},geometry:function(t){if(null==t)return null;!t.parts&&t.points&&(t.parts=[t.points.length]);var e,r=t.hasOwnProperty("geometryType")?t:new en(t).toGeometry()||t,n=r.geometryType||r.type;return"LinearRing"===n&&(n="LineString"),"LINEM"===n&&(n="MultiLineString"),e=this.extract[n.toLowerCase()].apply(this,[r]),"Collection"===(n="TEXT"===n?"Point":n)?{type:"GeometryCollection",geometries:e}:{type:n,coordinates:e}},point:function(t){var e=[t.x,t.y];for(var r in t)"x"===r||"y"===r||null===t[r]||isNaN(t[r])||e.push(t[r]);return e},text:function(t){return[t.points[0].x,t.points[0].y]},multipoint:function(t){for(var e=[],r=0,n=t.components.length;r<n;++r)e.push(this.extract.point.apply(this,[t.components[r]]));return e},linestring:function(t){for(var e=[],r=0,n=t.components.length;r<n;++r)e.push(this.extract.point.apply(this,[t.components[r]]));return e},multilinestring:function(t){for(var e=[],r=0,n=t.components.length;r<n;++r)e.push(this.extract.linestring.apply(this,[t.components[r]]));return e},polygon:function(t){for(var e=[],r=0,n=t.components.length;r<n;++r)e.push(this.extract.linestring.apply(this,[t.components[r]]));return e},multipolygon:function(t){for(var e=[],r=0,n=t.components.length;r<n;++r)e.push(this.extract.polygon.apply(this,[t.components[r]]));return e},collection:function(t){for(var e=t.components.length,r=new Array(e),n=0;n<e;++n)r[n]=this.extract.geometry.apply(this,[t.components[n]]);return r}},r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ln(t,e)}(e,Pe),r=e,(n=[{key:"read",value:function(t,r,n){r=r||"FeatureCollection";var o=null,i=null;if(i="string"==typeof t?sn(un(e.prototype),"read",this).call(this,t,n):t){if("string"!=typeof i.type);else if(this.isValidType(i,r))switch(r){case"Geometry":try{o=this.parseGeometry(i)}catch(t){}break;case"Feature":try{(o=this.parseFeature(i)).type="Feature"}catch(t){}break;case"FeatureCollection":switch(o=[],i.type){case"Feature":try{o.push(this.parseFeature(i))}catch(t){o=null}break;case"FeatureCollection":for(var a=0,s=i.features.length;a<s;++a)try{o.push(this.parseFeature(i.features[a]))}catch(t){o=null}break;default:try{var u=this.parseGeometry(i);o.push(new he(u))}catch(t){o=null}}}}else;return o}},{key:"write",value:function(t,r){return sn(un(e.prototype),"write",this).call(this,this.toGeoJSON(t),r)}},{key:"fromGeoJSON",value:function(t,e,r){var n=this,o=this.read(t,e,r);return V.isArray(o)?o.map(function(t){return n._toiSevrerFeature(t)}):this._toiSevrerFeature(o)}},{key:"toGeoJSON",value:function(t){var e={type:null};if(V.isArray(t)){e.type="FeatureCollection";var r=t.length;e.features=new Array(r);for(var n=0;n<r;++n){var o=t[n];if(s(o)){var i={};i.geometry=o,e.features[n]=this.extract.feature.apply(this,[i])}else e.features[n]=this.extract.feature.apply(this,[o])}}else if(s(t)){var a={};a.geometry=t,e=this.extract.feature.apply(this,[a])}else e=this.extract.feature.apply(this,[t]);function s(t){return t.hasOwnProperty("parts")&&t.hasOwnProperty("points")||t.hasOwnProperty("geoParts")}return e}},{key:"isValidType",value:function(t,e){var r=!1;switch(e){case"Geometry":-1==V.indexOf(["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon","Box","GeometryCollection"],t.type)||(r=!0);break;case"FeatureCollection":r=!0;break;default:t.type==e&&(r=!0)}return r}},{key:"parseFeature",value:function(t){var e,r,n,o;n=t.properties?t.properties:{},o=t.geometry&&t.geometry.bbox||t.bbox;try{r=this.parseGeometry(t.geometry)}catch(t){throw t}return e=new he(r,n),o&&(e.bounds=Z.fromArray(o)),t.id&&(e.geometry.id=t.id,e.fid=t.id),e}},{key:"parseGeometry",value:function(t){if(null==t)return null;var e;if("GeometryCollection"==t.type){if(!V.isArray(t.geometries))throw"GeometryCollection must have geometries array: "+t;for(var r=t.geometries.length,n=new Array(r),o=0;o<r;++o)n[o]=this.parseGeometry.apply(this,[t.geometries[o]]);e=new yt(n)}else{if(!V.isArray(t.coordinates))throw"Geometry must have coordinates array: "+t;if(!this.parseCoords[t.type.toLowerCase()])throw"Unsupported geometry type: "+t.type;try{e=this.parseCoords[t.type.toLowerCase()].apply(this,[t.coordinates])}catch(t){throw t}}return e}},{key:"createCRSObject",value:function(t){var e=t.layer.projection.toString(),r={};if(e.match(/epsg:/i)){var n=parseInt(e.substring(e.indexOf(":")+1));r=4326==n?{type:"name",properties:{name:"urn:ogc:def:crs:OGC:1.3:CRS84"}}:{type:"name",properties:{name:"EPSG:"+n}}}return r}},{key:"_toiSevrerFeature",value:function(t){var e=t.attributes,r=[],n=[];for(var o in e)r.push(o),n.push(e[o]);var i={fieldNames:r,fieldValues:n,geometry:en.fromGeometry(t.geometry)};return i.geometry.id=t.fid,i}},{key:"createAttributes",value:function(t){if(!t)return null;var e={};!function(t,e){if(!t.hasOwnProperty("fieldNames")||!t.hasOwnProperty("fieldValues"))return;var r=t.fieldNames,n=t.fieldValues;for(var o in r)e[r[o]]=n[o]}(t,e);var r=["fieldNames","fieldValues","geometry","stringID","ID"];for(var n in t)r.indexOf(n)>-1||(e[n]=t[n]);return e}}])&&nn(r.prototype,n),o&&nn(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}(),fn=function(t){return"[object Array]"==Object.prototype.toString.call(t)},pn=function(t){return"string"==typeof t&&t.constructor===String},hn={toSuperMapGeometry:function(t){if(t&&t.type)return(new cn).read(t,"FeatureCollection")[0].geometry},toSuperMapBounds:function(t){return fn(t)?new Z(t[0],t[1],t[2],t[3]):t instanceof o().LngLatBounds?new Z(t.getWest(),t.getSouth(),t.getEast(),t.getNorth()):t},toSuperMapPoint:function(t){return fn(t)?new at(t[0],t[1]):t.lng&&t.lat?new at(t.lng,t.lat):new at(t.geometry.coordinates[0],t.geometry.coordinates[1])},toSuperMapPolygon:function(t){var e=t.getWest(),r=t.getEast(),n=t.getSouth(),o=t.getNorth();return new Xt([new Ht([new at(e,n),new at(r,n),new at(r,o),new at(e,o)])])},isArray:fn,toGeoJSON:function(t){if(t)return(new cn).toGeoJSON(t)},toProcessingParam:function(t){var e={};if(t.length<1)e="";else{for(var r=[],n=0;n<t.length;n++){var o={};o.x=t[n][0],o.y=t[n][1],r.push(o)}e.type="REGION",e.points=r}return e},extend:function(t){for(var e=0;e<Object.getOwnPropertyNames(arguments).length;e++){var r=Object.getOwnPropertyNames(arguments)[e];if("caller"!=r&&"callee"!=r&&"length"!=r&&"arguments"!=r){var n=arguments[r];if(n)for(var o=0;o<Object.getOwnPropertyNames(n).length;o++){var i=Object.getOwnPropertyNames(n)[o];"caller"!=r&&"callee"!=r&&"length"!=r&&"arguments"!=r&&(t[i]=n[i])}}}return t},isNumber:function(t){if(""===t)return!1;var e=Number(t);return 0===e||!isNaN(e)},isString:pn,newGuid:function(t){for(var e=t||32,r="",n=1;n<e;n++){r+=Math.floor(16*Math.random()).toString(16)}return r},hexToRgba:function(t,e){var r=[],n=[];if(3==(t=t.replace(/#/,"")).length){for(var o=[],i=0;i<3;i++)o.push(t.charAt(i)+t.charAt(i));t=o.join("")}for(var a=0;a<6;a+=2)r[a]="0x"+t.substr(a,2),n.push(parseInt(Number(r[a])));return n.push(e),"rgba("+n.join(",")+")"},isMatchAdministrativeName:function(t,e){if(pn(e)){var r=t.substr(0,2);return"å¼ å®¶"===r&&(r=t.substr(0,3)),!!e.match(new RegExp(r))}return!1}};function yn(t){"@babel/helpers - typeof";return(yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dn(t){return function(t){if(Array.isArray(t))return bn(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return bn(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bn(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bn(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function vn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,mn(n.key),n)}}function mn(t){var e=function(t,e){if("object"!=yn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=yn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==yn(e)?e:String(e)}function gn(t,e,r){return e=Sn(e),function(t,e){if(e&&("object"===yn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Sn(t).constructor):e.apply(t,r))}function Sn(t){return(Sn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function wn(t,e){return(wn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}!function(){o().Map=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=gn(this,e,[t])).overlayLayersManager={},r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wn(t,e)}(e,o().Map),r=e,n&&vn(r.prototype,n),i&&vn(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,i}(),void 0===o().Map.prototype.addLayerBak&&(o().Map.prototype.addLayerBak=o().Map.prototype.addLayer,o().Map.prototype.addLayer=function(t,e){return t.source||"custom"===t.type||"background"===t.type?(this.addLayerBak(t,e),t.overlay&&!this.overlayLayersManager[t.id]&&(this.overlayLayersManager[t.id]=t),this):this.overlayLayersManager[t.id]||this.style._layers[t.id]?void this.fire("error",{error:new Error("A layer with this id already exists.")}):(function(t,e){t.onAdd&&t.onAdd(e)}(t,this),this.overlayLayersManager[t.id]=t,this)}),o().Map.prototype.listLayers=function(){var t=[],e=this.style._order||[];for(var r in t.push.apply(t,dn(e)),this.overlayLayersManager){var n=this.overlayLayersManager[r].id;t.includes(n)||t.push(n)}return t},o().Map.prototype.getLayer=function(t){return this.overlayLayersManager[t]?this.overlayLayersManager[t]:this.style.getLayer(t)},o().Map.prototype.moveLayer=function(t,e){return this.overlayLayersManager[t]?(this.overlayLayersManager[t].moveLayer?this.overlayLayersManager[t].moveLayer(t,e):function(t,e){var r=document.getElementById(t);if(e){var n=document.getElementById(e);n||o().Evented.prototype.fire("error",{error:new Error('Layer with id "'.concat(e,'" does not exist on this document.'))})}r&&n?n.parentNode.insertBefore(r,n):r.parentNode.appendChild(r)}(t,e),this):this.style._layers[t]?(this.style.moveLayer(t,e),this._update(!0),this):void 0},o().Map.prototype.removeLayer=function(t){if(this.overlayLayersManager[t]){var e=this.overlayLayersManager[t];if(delete this.overlayLayersManager[t],"custom"!==e.type)return e.removeFromMap&&e.removeFromMap(),this}return this.style.removeLayer(t),this._update(!0),this},o().Map.prototype.setLayoutProperty=function(t,e,r){return this.overlayLayersManager[t]?("visibility"===e&&(r="visible"===r,n=this.overlayLayersManager[t],o=r,n.setVisibility&&n.setVisibility(o),this.style.fire("data",{dataType:"style"})),this):(this.style.setLayoutProperty(t,e,r),this._update(!0),this);var n,o},o().Map.prototype.updateTransform=function(t,e,r,n,i,a,s){this.transform.units=t;var u=this.mercatorZfromAltitude;o().MercatorCoordinate.fromLngLat=function(t,n){n=n||0;var i=o().LngLat.convert(t);return new(o().MercatorCoordinate)((i.lng-e)/a,(r-i.lat)/s,u(n,i.lat))},o().MercatorCoordinate.prototype.toLngLat=function(){return new(o().LngLat)(this.x*a+e,r-this.y*s)},this.customConvertPoint=window.URL.createObjectURL(new Blob(["customConvertPoint = {projectX:function(x){return (x - "+n+") / "+a+" + 0.5},projectY:function(y){y = 0.5 - ((y - "+i+") / "+s+");return y < 0 ? 0 : y > 1 ? 1 : y;},toY:function(y){return (0.5-y)*"+s+"+"+i+";}}"],{type:"text/javascript"}))}}();function On(t){"@babel/helpers - typeof";return(On="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Pn(n.key),n)}}function Pn(t){var e=function(t,e){if("object"!=On(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=On(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==On(e)?e:String(e)}function En(t,e,r){return e=Cn(e),function(t,e){if(e&&("object"===On(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Tn(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Cn(t).constructor):e.apply(t,r))}function Cn(t){return(Cn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Tn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jn(t,e){return(jn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var kn,xn,An=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=En(this,e)).options=r||{},n.url=t,n.fire("initialized",Tn(n)),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jn(t,e)}(e,o().Evented),r=e,n&&_n(r.prototype,n),i&&_n(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,i}(),In=(r(5246),r(1358),r(3678)),Nn=r.n(In),Rn=window.fetch,Mn={limitLength:1500,queryKeys:[],queryValues:[],supermap_callbacks:{},addQueryStrings:function(t){for(var e in t){this.queryKeys.push(e),"string"!=typeof t[e]&&(t[e]=V.toJSON(t[e]));var r=encodeURIComponent(t[e]);this.queryValues.push(r)}},issue:function(t){for(var e=this,r=e.getUid(),n=t.url,o=[],i=n,a=0,s=e.queryKeys?e.queryKeys.length:0,u=0;u<s;u++)if(i.length+e.queryKeys[u].length+2>=e.limitLength){if(0==a)return!1;o.push(i),i=n,a=0,u--}else if(i.length+e.queryKeys[u].length+2+e.queryValues[u].length>e.limitLength)for(var l=e.queryValues[u];l.length>0;){var c=e.limitLength-i.length-e.queryKeys[u].length-2;i.indexOf("?")>-1?i+="&":i+="?";var f=l.substring(0,c);"%"===f.substring(c-1,c)?(c-=1,f=l.substring(0,c)):"%"===f.substring(c-2,c-1)&&(c-=2,f=l.substring(0,c)),i+=e.queryKeys[u]+"="+f,l=l.substring(c),f.length>0&&(o.push(i),i=n,a=0)}else a++,i.indexOf("?")>-1?i+="&":i+="?",i+=e.queryKeys[u]+"="+e.queryValues[u];return o.push(i),e.send(o,"SuperMapJSONPCallbacks_"+r,t&&t.proxy)},getUid:function(){return 1e3*(new Date).getTime()+Math.floor(1e17*Math.random())},send:function(t,e,r){var n=t.length;if(n>0)return new Promise(function(o){for(var i=(new Date).getTime(),a=0;a<n;a++){var s=t[a];s.indexOf("?")>-1?s+="&":s+="?",s+="sectionCount="+n,s+="&sectionIndex="+a,s+="&jsonpUserID="+i,r&&(s=decodeURIComponent(s),s=r+encodeURIComponent(s)),Nn()(s,{jsonpCallbackFunction:e,timeout:3e4}).then(function(t){o(t.json())})}})},GET:function(t){return this.queryKeys.length=0,this.queryValues.length=0,this.addQueryStrings(t.params),this.issue(t)},POST:function(t){return this.queryKeys.length=0,this.queryValues.length=0,this.addQueryStrings({requestEntity:t.data}),this.issue(t)},PUT:function(t){return this.queryKeys.length=0,this.queryValues.length=0,this.addQueryStrings({requestEntity:t.data}),this.issue(t)},DELETE:function(t){return this.queryKeys.length=0,this.queryValues.length=0,this.addQueryStrings({requestEntity:t.data}),this.issue(t)}},Ln=function(){return void 0!=kn?kn:window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest},Bn=function(){return xn||45e3},Dn={commit:function(t,e,r,n){switch(t=t?t.toUpperCase():t){case"GET":return this.get(e,r,n);case"POST":return this.post(e,r,n);case"PUT":return this.put(e,r,n);case"DELETE":return this.delete(e,r,n);default:return this.get(e,r,n)}},supportDirectRequest:function(t,e){return!!V.isInTheSameDomain(t)||(void 0!=e.crossOrigin?e.crossOrigin:Ln()||e.proxy)},get:function(t,e,r){r=r||{};if(t=V.urlAppend(t,this._getParameterString(e||{})),t=this._processUrl(t,r),!this.supportDirectRequest(t,r)){var n={url:t=t.replace(".json",".jsonp"),data:e};return Mn.GET(n)}return this.urlIsLong(t)?this._postSimulatie("GET",t.substring(0,t.indexOf("?")),e,r):this._fetch(t,e,r,"GET")},delete:function(t,e,r){r=r||{};if(t=V.urlAppend(t,this._getParameterString(e||{})),t=this._processUrl(t,r),!this.supportDirectRequest(t,r)){t=t.replace(".json",".jsonp");var n={url:t+="&_method=DELETE",data:e};return Mn.DELETE(n)}return this.urlIsLong(t)?this._postSimulatie("DELETE",t.substring(0,t.indexOf("?")),e,r):this._fetch(t,e,r,"DELETE")},post:function(t,e,r){if(r=r||{},t=this._processUrl(t,r),!this.supportDirectRequest(t,r)){t=t.replace(".json",".jsonp");var n={url:V.urlAppend(t,"_method=POST"),data:e};return Mn.POST(n)}return this._fetch(t,e,r,"POST")},put:function(t,e,r){if(r=r||{},t=this._processUrl(t,r),!this.supportDirectRequest(t,r)){t=t.replace(".json",".jsonp");var n={url:t+="&_method=PUT",data:e};return Mn.PUT(n)}return this._fetch(t,e,r,"PUT")},urlIsLong:function(t){for(var e=0,r=null,n=0,o=t.length;n<o;n++)(r=t.charCodeAt(n))<127?e++:128<=r&&r<=2047?e+=2:2048<=r&&r<=65535&&(e+=3);return!(e<2e3)},_postSimulatie:function(t,e,r,n){return e+=(e.indexOf("?")>-1?"&":"?")+"_method="+t,"string"!=typeof r&&(r=JSON.stringify(r)),this.post(e,r,n)},_processUrl:function(t,e){if(this._isMVTRequest(t))return t;if(-1===t.indexOf(".json")&&!e.withoutFormatSuffix)if(t.indexOf("?")<0)t+=".json";else{var r=t.split("?");2===r.length&&(t=r[0]+".json?"+r[1])}return e&&e.proxy&&("function"==typeof e.proxy?t=e.proxy(t):(t=decodeURIComponent(t),t=e.proxy+encodeURIComponent(t))),t},_fetch:function(t,e,r,n){return(r=r||{}).headers=r.headers||{},r.headers["Content-Type"]||FormData.prototype.isPrototypeOf(e)||(r.headers["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8"),r.timeout?this._timeout(r.timeout,Rn(t,{method:n,headers:r.headers,body:"PUT"===n||"POST"===n?e:void 0,credentials:this._getWithCredentials(r),mode:"cors",timeout:Bn()}).then(function(t){return t})):Rn(t,{method:n,body:"PUT"===n||"POST"===n?e:void 0,headers:r.headers,credentials:this._getWithCredentials(r),mode:"cors",timeout:Bn()}).then(function(t){return t})},_getWithCredentials:function(t){return!0===t.withCredentials?"include":!1===t.withCredentials?"omit":"same-origin"},_fetchJsonp:function(t,e){return e=e||{},Nn()(t,{method:"GET",timeout:e.timeout}).then(function(t){return t})},_timeout:function(t,e){return new Promise(function(r,n){setTimeout(function(){n(new Error("timeout"))},t),e.then(r,n)})},_getParameterString:function(t){var e=[];for(var r in t){var n,o=t[r];if(null!=o&&"function"!=typeof o)n=Array.isArray(o)||"[object Object]"===o.toString()?encodeURIComponent(JSON.stringify(o)):encodeURIComponent(o),e.push(encodeURIComponent(r)+"="+n)}return e.join("&")},_isMVTRequest:function(t){return t.indexOf(".mvt")>-1||t.indexOf(".pbf")>-1}},Fn={observers:!1,KEY_SPACE:32,KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,element:function(t){return t.target||t.srcElement},isSingleTouch:function(t){return t.touches&&1===t.touches.length},isMultiTouch:function(t){return t.touches&&t.touches.length>1},isLeftClick:function(t){return t.which&&1===t.which||t.button&&1===t.button},isRightClick:function(t){return t.which&&3===t.which||t.button&&2===t.button},stop:function(t,e){e||(t.preventDefault?t.preventDefault():t.returnValue=!1),t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},findElement:function(t,e){for(var r=Fn.element(t);r.parentNode&&(!r.tagName||r.tagName.toUpperCase()!=e.toUpperCase());)r=r.parentNode;return r},observe:function(t,e,r,n){var o=V.getElement(t);if(n=n||!1,"keypress"===e&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||o.attachEvent)&&(e="keydown"),this.observers||(this.observers={}),!o._eventCacheID){var i="eventCacheID_";o.id&&(i=o.id+"_"+i),o._eventCacheID=V.createUniqueID(i)}var a=o._eventCacheID;this.observers[a]||(this.observers[a]=[]),this.observers[a].push({element:o,name:e,observer:r,useCapture:n}),o.addEventListener?"mousewheel"===e?o.addEventListener(e,r,{useCapture:n,passive:!1}):o.addEventListener(e,r,n):o.attachEvent&&o.attachEvent("on"+e,r)},stopObservingElement:function(t){var e=V.getElement(t)._eventCacheID;this._removeElementObservers(Fn.observers[e])},_removeElementObservers:function(t){if(t)for(var e=t.length-1;e>=0;e--){var r=t[e],n=new Array(r.element,r.name,r.observer,r.useCapture);Fn.stopObserving.apply(this,n)}},stopObserving:function(t,e,r,n){n=n||!1;var o=V.getElement(t),i=o._eventCacheID;"keypress"===e&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||o.detachEvent)&&(e="keydown");var a=!1,s=Fn.observers[i];if(s)for(var u=0;!a&&u<s.length;){var l=s[u];if(l.name===e&&l.observer===r&&l.useCapture===n){s.splice(u,1),0==s.length&&delete Fn.observers[i],a=!0;break}u++}return a&&(o.removeEventListener?o.removeEventListener(e,r,n):o&&o.detachEvent&&o.detachEvent("on"+e,r)),a},unloadCache:function(){if(Fn&&Fn.observers){for(var t in Fn.observers){var e=Fn.observers[t];Fn._removeElementObservers.apply(this,[e])}Fn.observers=!1}},CLASS_NAME:"SuperMap.Event"};function Un(t){"@babel/helpers - typeof";return(Un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Gn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Vn(n.key),n)}}function Vn(t){var e=function(t,e){if("object"!=Un(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Un(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Un(e)?e:String(e)}Fn.observe(window,"resize",Fn.unloadCache,!1);var qn=function(){function t(e,r,n,o,i){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.BROWSER_EVENTS=["mouseover","mouseout","mousedown","mouseup","mousemove","click","dblclick","rightclick","dblrightclick","resize","focus","blur","touchstart","touchmove","touchend","keydown","MSPointerDown","MSPointerUp","pointerdown","pointerup","MSGestureStart","MSGestureChange","MSGestureEnd","contextmenu"],this.listeners={},this.object=e,this.element=null,this.eventTypes=[],this.eventHandler=null,this.fallThrough=o,this.includeXY=!1,this.extensions={},this.extensionCount={},this.clearMouseListener=null,V.extend(this,i),null!=n)for(var a=0,s=n.length;a<s;a++)this.addEventType(n[a]);null!=r&&this.attachToElement(r),this.CLASS_NAME="SuperMap.Events"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){for(var t in this.extensions)"boolean"!=typeof this.extensions[t]&&this.extensions[t].destroy();this.extensions=null,this.element&&(Fn.stopObservingElement(this.element),this.element.hasScrollEvent&&Fn.stopObserving(window,"scroll",this.clearMouseListener)),this.element=null,this.listeners=null,this.object=null,this.eventTypes=null,this.fallThrough=null,this.eventHandler=null}},{key:"addEventType",value:function(t){this.listeners[t]||(this.eventTypes.push(t),this.listeners[t]=[])}},{key:"attachToElement",value:function(t){this.element?Fn.stopObservingElement(this.element):(this.eventHandler=_.bindAsEventListener(this.handleBrowserEvent,this),this.clearMouseListener=_.bind(this.clearMouseCache,this)),this.element=t;for(var e=0,r=this.BROWSER_EVENTS.length;e<r;e++){var n=this.BROWSER_EVENTS[e];this.addEventType(n),Fn.observe(t,n,this.eventHandler)}Fn.observe(t,"dragstart",Fn.stop)}},{key:"on",value:function(t){for(var e in t)"scope"!==e&&t.hasOwnProperty(e)&&this.register(e,t.scope,t[e])}},{key:"register",value:function(e,r,n,o){if(e in t&&!this.extensions[e]&&(this.extensions[e]=new t[e](this)),null!=n&&-1!==V.indexOf(this.eventTypes,e)){null==r&&(r=this.object);var i=this.listeners[e];i||(i=[],this.listeners[e]=i,this.extensionCount[e]=0);var a={obj:r,func:n};o?(i.splice(this.extensionCount[e],0,a),"object"===Un(o)&&o.extension&&this.extensionCount[e]++):i.push(a)}}},{key:"registerPriority",value:function(t,e,r){this.register(t,e,r,!0)}},{key:"un",value:function(t){for(var e in t)"scope"!==e&&t.hasOwnProperty(e)&&this.unregister(e,t.scope,t[e])}},{key:"unregister",value:function(t,e,r){null==e&&(e=this.object);var n=this.listeners[t];if(null!=n)for(var o=0,i=n.length;o<i;o++)if(n[o].obj===e&&n[o].func===r){n.splice(o,1);break}}},{key:"remove",value:function(t){null!=this.listeners[t]&&(this.listeners[t]=[])}},{key:"triggerEvent",value:function(t,e){var r=this.listeners[t];if(r&&0!=r.length){var n;null==e&&(e={}),e.object=this.object,e.element=this.element,e.type||(e.type=t);for(var o=0,i=(r=r.slice()).length;o<i;o++){var a=r[o];if(void 0!=(n=a.func.apply(a.obj,[e]))&&!1===n)break}return this.fallThrough||Fn.stop(e,!0),n}}},{key:"handleBrowserEvent",value:function(t){var e=t.type,r=this.listeners[e];if(r&&0!=r.length){var n=t.touches;if(n&&n[0]){for(var o,i=0,a=0,s=n.length,u=0;u<s;++u)i+=(o=n[u]).clientX,a+=o.clientY;t.clientX=i/s,t.clientY=a/s}this.includeXY&&(t.xy=this.getMousePosition(t)),this.triggerEvent(e,t)}}},{key:"clearMouseCache",value:function(){this.element.scrolls=null,this.element.lefttop=null;var t=document.body;t&&(0==t.scrollTop&&0==t.scrollLeft||!navigator.userAgent.match(/iPhone/i))&&(this.element.offsets=null)}},{key:"getMousePosition",value:function(t){if(this.includeXY?this.element.hasScrollEvent||(Fn.observe(window,"scroll",this.clearMouseListener),this.element.hasScrollEvent=!0):this.clearMouseCache(),!this.element.scrolls){var e=V.getViewportElement();this.element.scrolls=[e.scrollLeft,e.scrollTop]}return this.element.lefttop||(this.element.lefttop=[document.documentElement.clientLeft||0,document.documentElement.clientTop||0]),this.element.offsets||(this.element.offsets=V.pagePosition(this.element)),new b(t.clientX+this.element.scrolls[0]-this.element.offsets[0]-this.element.lefttop[0],t.clientY+this.element.scrolls[1]-this.element.offsets[1]-this.element.lefttop[1])}}])&&Gn(e.prototype,r),n&&Gn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Hn(t){"@babel/helpers - typeof";return(Hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Jn(n.key),n)}}function Jn(t){var e=function(t,e){if("object"!=Hn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Hn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Hn(e)?e:String(e)}qn.prototype.BROWSER_EVENTS=["mouseover","mouseout","mousedown","mouseup","mousemove","click","dblclick","rightclick","dblrightclick","resize","focus","blur","touchstart","touchmove","touchend","keydown","MSPointerDown","MSPointerUp","pointerdown","pointerup","MSGestureStart","MSGestureChange","MSGestureEnd","contextmenu"];var Wn=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.value=e||"",this.name=r||"token",this.CLASS_NAME="SuperMap.Credential"}var e,r,n;return e=t,(r=[{key:"getUrlParameters",value:function(){return this.name+"="+this.value}},{key:"getValue",value:function(){return this.value}},{key:"destroy",value:function(){this.value=null,this.name=null}}])&&zn(e.prototype,r),n&&zn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Kn(t){"@babel/helpers - typeof";return(Kn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Yn(n.key),n)}}function Yn(t){var e=function(t,e){if("object"!=Kn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Kn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Kn(e)?e:String(e)}Wn.CREDENTIAL=null;var Xn=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n;return e=t,n=[{key:"generateToken",value:function(t,e){var r=this.servers[t];if(r)return Dn.post(r.tokenServiceUrl,JSON.stringify(e.toJSON())).then(function(t){return t.text()})}},{key:"registerServers",value:function(t){this.servers=this.servers||{},V.isArray(t)||(t=[t]);for(var e=0;e<t.length;e++){var r=t[e];this.servers[r.server]=r}}},{key:"registerToken",value:function(t,e){if(this.tokens=this.tokens||{},t&&e){var r=this._getTokenStorageKey(t);this.tokens[r]=e}}},{key:"registerKey",value:function(t,e){if(this.keys=this.keys||{},t&&!(t.length<1)&&e){t=V.isArray(t)?t:[t];for(var r=0;r<t.length;r++){var n=this._getUrlRestString(t[0])||t[0];this.keys[n]=e}}}},{key:"getServerInfo",value:function(t){return this.servers=this.servers||{},this.servers[t]}},{key:"getToken",value:function(t){if(t){this.tokens=this.tokens||{};var e=this._getTokenStorageKey(t);return this.tokens[e]}}},{key:"getKey",value:function(t){this.keys=this.keys||{};var e=this._getUrlRestString(t)||t;return this.keys[e]}},{key:"loginiServer",value:function(t,e,r,n){t=V.urlPathAppend(t,"services/security/login");var o={username:e&&e.toString(),password:r&&r.toString(),rememberme:n};o=JSON.stringify(o);return Dn.post(t,o,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).then(function(t){return t.json()})}},{key:"logoutiServer",value:function(t){t=V.urlPathAppend(t,"services/security/logout");return Dn.get(t,"",{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},withoutFormatSuffix:!0}).then(function(){return!0}).catch(function(){return!1})}},{key:"loginOnline",value:function(e,r){var n=t.SSO+"/login?service="+e;this._open(n,r)}},{key:"loginiPortal",value:function(t,e,r){t=V.urlPathAppend(t,"web/login");var n={username:e&&e.toString(),password:r&&r.toString()};n=JSON.stringify(n);return Dn.post(t,n,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},withCredentials:!1}).then(function(t){return t.json()})}},{key:"logoutiPortal",value:function(t){t=V.urlPathAppend(t,"services/security/logout");return Dn.get(t,"",{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},withCredentials:!0,withoutFormatSuffix:!0}).then(function(){return!0}).catch(function(){return!1})}},{key:"loginManager",value:function(t,e){var r=V.urlPathAppend(t,"/security/tokens"),n=e||{},o={username:n.userName&&n.userName.toString(),password:n.password&&n.password.toString()};o=JSON.stringify(o);var i=this;return Dn.post(r,o,{headers:{Accept:"*/*","Content-Type":"application/json; charset=UTF-8"}}).then(function(t){return t.text()}).then(function(t){return i.imanagerToken=t,t})}},{key:"destroyAllCredentials",value:function(){this.keys=null,this.tokens=null,this.servers=null}},{key:"destroyToken",value:function(t){if(t){var e=this._getTokenStorageKey(t);this.tokens=this.tokens||{},this.tokens[e]&&delete this.tokens[e]}}},{key:"destroyKey",value:function(t){if(t){this.keys=this.keys||{};var e=this._getUrlRestString(t)||t;this.keys[e]&&delete this.keys[e]}}},{key:"appendCredential",value:function(t){var e=t,r=this.getToken(t),n=r?new Wn(r,"token"):null;return n||(n=(r=this.getKey(t))?new Wn(r,"key"):null),n&&(e=V.urlAppend(e,n.getUrlParameters())),e}},{key:"_open",value:function(t,e){e=null==e||e;var r=window.screen.availWidth/2-this.INNER_WINDOW_WIDTH/2,n=window.screen.availHeight/2-this.INNER_WINDOW_HEIGHT/2,o="height="+this.INNER_WINDOW_HEIGHT+", width="+this.INNER_WINDOW_WIDTH+",top="+n+", left="+r+",toolbar=no, menubar=no, scrollbars=no, resizable=no, location=no, status=no";e?window.open(t,"login"):window.open(t,"login",o)}},{key:"_getTokenStorageKey",value:function(t){var e=t.match(/(.*?):\/\/([^\/]+)/i);return e?e[0]:t}},{key:"_getUrlRestString",value:function(t){if(!t)return t;var e=t.match(/(http|https):\/\/(.*\/rest)/i);return e?e[0]:t}}],(r=null)&&Qn(e.prototype,r),n&&Qn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Zn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function $n(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Zn(Object(r),!0).forEach(function(e){to(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Zn(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function to(t,e,r){return(e=no(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function eo(t){"@babel/helpers - typeof";return(eo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ro(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,no(n.key),n)}}function no(t){var e=function(t,e){if("object"!=eo(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=eo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==eo(e)?e:String(e)}Xn.INNER_WINDOW_WIDTH=600,Xn.INNER_WINDOW_HEIGHT=600,Xn.SSO="https://sso.supermap.com",Xn.ONLINE="https://www.supermapol.com";var oo=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=this;this.EVENT_TYPES=["processCompleted","processFailed"],this.events=null,this.eventListeners=null,this.url=null,this.urls=null,this.proxy=null,this.index=null,this.length=null,this.totalTimes=null,this.POLLING_TIMES=3,this.isInTheSameDomain=null,this.withCredentials=!1,V.isArray(e)?(n.urls=e,n.length=e.length,n.totalTimes=n.length,1===n.length?n.url=e[0]:(n.index=parseInt(Math.random()*n.length),n.url=e[n.index])):(n.totalTimes=1,n.url=e),V.isArray(e)&&!n.isServiceSupportPolling()&&(n.url=e[0],n.totalTimes=1),r=r||{},this.crossOrigin=r.crossOrigin,this.headers=r.headers,V.extend(this,r),n.isInTheSameDomain=V.isInTheSameDomain(n.url),n.events=new qn(n,null,n.EVENT_TYPES,!0),n.eventListeners instanceof Object&&n.events.on(n.eventListeners),this.CLASS_NAME="SuperMap.CommonServiceBase"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;V.isArray(t.urls)&&(t.urls=null,t.index=null,t.length=null,t.totalTimes=null),t.url=null,t.isInTheSameDomain=null,t.EVENT_TYPES=null,t.events&&(t.events.destroy(),t.events=null),t.eventListeners&&(t.eventListeners=null)}},{key:"request",value:function(t){var e=t.scope.format;if("string"==typeof t.success&&(t.scope.format=t.success,e=t.success,t.success=null,t.failure=null),e&&!this.supportDataFormat(e))throw new Error("".concat(this.CLASS_NAME," is not surport ").concat(e," format!"));var r=this;return t.url=t.url||r.url,this._returnContent(t)&&!t.url.includes("returnContent=true")&&(t.url=V.urlAppend(t.url,"returnContent=true")),t.proxy=t.proxy||r.proxy,t.withCredentials=void 0!=t.withCredentials?t.withCredentials:r.withCredentials,t.crossOrigin=void 0!=t.crossOrigin?t.crossOrigin:r.crossOrigin,t.headers=t.headers||r.headers,t.isInTheSameDomain=r.isInTheSameDomain,t.withoutFormatSuffix=t.scope.withoutFormatSuffix||!1,t.url=Xn.appendCredential(t.url),r.calculatePollingTimes(),t.scope=r,r.totalTimes>0?(r.totalTimes--,r.ajaxPolling(t)):r._commit(t)}},{key:"ajaxPolling",value:function(t){var e=this,r=t.url,n=/^http:\/\/([a-z]{9}|(\d+\.){3}\d+):\d{0,4}/;return e.index=parseInt(Math.random()*e.length),e.url=e.urls[e.index],r=r.replace(n,n.exec(e.url)[0]),t.url=r,t.isInTheSameDomain=V.isInTheSameDomain(r),e._commit(t)}},{key:"calculatePollingTimes",value:function(){var t=this;t.times?t.totalTimes>t.POLLING_TIMES?t.times>t.POLLING_TIMES?t.totalTimes=t.POLLING_TIMES:t.totalTimes=t.times:t.times<t.totalTimes&&(t.totalTimes=t.times):t.totalTimes>t.POLLING_TIMES&&(t.totalTimes=t.POLLING_TIMES),t.totalTimes--}},{key:"isServiceSupportPolling",value:function(){return!("SuperMap.REST.ThemeService"===this.CLASS_NAME||"SuperMap.REST.EditFeaturesService"===this.CLASS_NAME)}},{key:"transformResult",value:function(t,e){return{result:t=V.transformResult(t),options:e}}},{key:"transformErrorResult",value:function(t,e){return{error:(t=V.transformResult(t)).error||t,options:e}}},{key:"serviceProcessCompleted",value:function(t,e){t=this.transformResult(t).result,this.events.triggerEvent("processCompleted",{result:t,options:e})}},{key:"serviceProcessFailed",value:function(t,e){var r=(t=this.transformErrorResult(t).error).error||t;this.events.triggerEvent("processFailed",{error:r,options:e})}},{key:"_returnContent",value:function(t){return t.scope.format!==lr.FGB&&!!t.scope.returnContent}},{key:"supportDataFormat",value:function(t){return this.dataFormat().includes(t)}},{key:"dataFormat",value:function(){return[lr.GEOJSON,lr.ISERVER]}},{key:"_commit",value:function(t){var e=this;if("POST"===t.method||"PUT"===t.method||"PATCH"===t.method)if(t.params&&(t.url=V.urlAppend(t.url,V.getParameterString(t.params||{}))),"object"!==eo(t.data)||t.data instanceof FormData)t.params=t.data;else try{t.params=V.toJSON(t.data)}catch(t){console.log("ä¸æ¯jsonå¯¹è±¡")}return Dn.commit(t.method,t.url,t.params,{headers:t.headers,withoutFormatSuffix:t.withoutFormatSuffix,withCredentials:t.withCredentials,crossOrigin:t.crossOrigin,timeout:t.async?0:null,proxy:t.proxy}).then(function(t){return t.text?t.text():t.json?t.json():t}).then(function(e){var r=e;return"string"==typeof e&&(r=(new Pe).read(e)),(!r||r.error||r.code>=300&&304!==r.code)&&(r=r&&r.error?{error:r.error}:{error:r}),r&&t.scope.format===lr.FGB&&(r.newResourceLocation=r.newResourceLocation.replace(".json","")+".fgb"),r}).catch(function(t){return{error:t}}).then(function(r){var n={object:e};if(r.error){var o="processFailed";if(e.events&&e.events.listeners[o]&&e.events.listeners[o].length){var i=t.failure&&(t.scope?_.bind(t.failure,t.scope):t.failure);i?i(r,t):e.serviceProcessFailed(r,t)}else(n=$n($n({},n),e.transformErrorResult(r,t))).type=o,t.failure&&t.failure(n)}else{var a="processCompleted";if(e.events&&e.events.listeners[a]&&e.events.listeners[a].length){var s=t.success&&(t.scope?_.bind(t.success,t.scope):t.success);s?s(r,t):e.serviceProcessCompleted(r,t)}else r.succeed=void 0==r.succeed||r.succeed,(n=$n($n({},n),e.transformResult(r,t))).type=a,t.success&&t.success(n)}return n})}}])&&ro(e.prototype,r),n&&ro(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function io(t){"@babel/helpers - typeof";return(io="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ao(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,so(n.key),n)}}function so(t){var e=function(t,e){if("object"!=io(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=io(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==io(e)?e:String(e)}var uo=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e.filters&&"string"==typeof e.filters&&(e.filters=e.filters.split(",")),this.address=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null,V.extend(this,e)}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.address=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null}}])&&ao(e.prototype,r),n&&ao(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function lo(t){"@babel/helpers - typeof";return(lo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function co(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,fo(n.key),n)}}function fo(t){var e=function(t,e){if("object"!=lo(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=lo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==lo(e)?e:String(e)}var po=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e.filters&&(e.filters=e.filters.split(",")),this.x=null,this.y=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null,this.geoDecodingRadius=null,V.extend(this,e)}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.x=null,this.y=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null,this.geoDecodingRadius=null}}])&&co(e.prototype,r),n&&co(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ho(t){"@babel/helpers - typeof";return(ho="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,bo(n.key),n)}}function bo(t){var e=function(t,e){if("object"!=ho(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ho(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ho(e)?e:String(e)}function vo(t,e,r){return e=go(e),function(t,e){if(e&&("object"===ho(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],go(t).constructor):e.apply(t,r))}function mo(){return(mo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=go(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function go(t){return(go=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function So(t,e){return(So=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var wo=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=vo(this,e,[t,r])).options=r||{},n.CLASS_NAME="SuperMap.AddressMatchService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&So(t,e)}(e,oo),r=e,(n=[{key:"destroy",value:function(){mo(go(e.prototype),"destroy",this).call(this)}},{key:"code",value:function(t,e,r){if(e instanceof uo)return this.processAsync(t,e,r)}},{key:"decode",value:function(t,e,r){if(e instanceof po)return this.processAsync(t,e,r)}},{key:"processAsync",value:function(t,e,r){return this.request({method:"GET",url:t,params:e,scope:this,success:r,failure:r})}},{key:"transformResult",value:function(t,e){return t.succeed&&delete t.succeed,{result:t,options:e}}}])&&yo(r.prototype,n),o&&yo(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function Oo(t){"@babel/helpers - typeof";return(Oo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Po(n.key),n)}}function Po(t){var e=function(t,e){if("object"!=Oo(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Oo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Oo(e)?e:String(e)}function Eo(t,e,r){return e=Co(e),function(t,e){if(e&&("object"===Oo(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Co(t).constructor):e.apply(t,r))}function Co(t){return(Co=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function To(t,e){return(To=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var jo=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Eo(this,e,[t,r]))._addressMatchService=new wo(t,r),n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&To(t,e)}(e,An),r=e,(n=[{key:"code",value:function(t,e){return this._addressMatchService.code(V.urlPathAppend(this.url,"geocoding"),t,e)}},{key:"decode",value:function(t,e){return this._addressMatchService.decode(V.urlPathAppend(this.url,"geodecoding"),t,e)}}])&&_o(r.prototype,n),o&&_o(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function ko(t){"@babel/helpers - typeof";return(ko="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ao(n.key),n)}}function Ao(t){var e=function(t,e){if("object"!=ko(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ko(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ko(e)?e:String(e)}var Io=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.customParams=null,this.prjCoordSys=null,this.expectCount=1e5,this.networkType=fr.LINE,this.queryOption=pr.ATTRIBUTEANDGEOMETRY,this.queryParams=null,this.startRecord=0,this.holdTime=10,this.returnCustomResult=!1,this.returnFeatureWithFieldCaption=!1,V.extend(this,e),this.CLASS_NAME="SuperMap.QueryParameters")}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;if(t.customParams=null,t.expectCount=null,t.networkType=null,t.queryOption=null,t.queryParams){for(var e=0,r=t.queryParams,n=r.length;e<n;e++)r[e].destroy();t.queryParams=null}t.startRecord=null,t.holdTime=null,t.returnCustomResult=null,t.prjCoordSys=null}}])&&xo(e.prototype,r),n&&xo(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function No(t){"@babel/helpers - typeof";return(No="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ro(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Mo(n.key),n)}}function Mo(t){var e=function(t,e){if("object"!=No(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=No(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==No(e)?e:String(e)}var Lo=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.isQueryPoint=null,this.isQueryLine=null,this.isQueryRegion=null,this.attributeFilter=null,this.chartFeatureInfoSpecCode=null,V.extend(this,e),this.CLASS_NAME="SuperMap.ChartQueryFilterParameter"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.isQueryPoint=null,t.isQueryLine=null,t.isQueryRegion=null,t.attributeFilter=null,t.chartFeatureInfoSpecCode=null}},{key:"toJson",value:function(){var t="";return t+='"isQueryPoint":'+this.isQueryPoint+",",t+='"isQueryLine":'+this.isQueryLine+",",t+='"isQueryRegion":'+this.isQueryRegion+",",this.attributeFilter&&(t+='"attributeFilter": "'+this.attributeFilter.replace(/"/g,"'")+'",'),t="{"+(t+='"chartFeatureInfoSpecCode":'+this.chartFeatureInfoSpecCode)+"}"}}])&&Ro(e.prototype,r),n&&Ro(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Bo(t){"@babel/helpers - typeof";return(Bo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Do(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Fo(n.key),n)}}function Fo(t){var e=function(t,e){if("object"!=Bo(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Bo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Bo(e)?e:String(e)}var Uo=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.queryMode=null,this.bounds=null,this.chartLayerNames=null,this.chartQueryFilterParameters=null,this.returnContent=!0,this.startRecord=0,this.expectCount=null,V.extend(this,e),this.CLASS_NAME="SuperMap.ChartQueryParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.queryMode=null,t.bounds=null,t.chartLayerNames=null,t.chartQueryFilterParameters=null,t.returnContent=!0,t.startRecord=0,t.expectCount=null}},{key:"getVariablesJson",value:function(){var t="";if(t+='"queryMode":"'+this.queryMode+'",',this.chartLayerNames&&this.chartLayerNames.length){for(var e=[],r=this.chartLayerNames.length,n=0;n<r;n++)e.push('"'+this.chartLayerNames[n]+'"');t+='"chartLayerNames":'+("["+e.join(",")+"]")+","}if("ChartBoundsQuery"!==this.queryMode&&"ChartFeatureBoundsQuery"!==this.queryMode||!this.bounds||(t+='"bounds":{"leftBottom":{"x":'+this.bounds.left+',"y":'+this.bounds.bottom+'},"rightTop":{"x":'+this.bounds.right+',"y":'+this.bounds.top+"}},"),this.chartQueryFilterParameters&&this.chartQueryFilterParameters.length){for(var o=[],i=this.chartQueryFilterParameters.length,a=0;a<i;a++){var s=this.chartQueryFilterParameters[a];s instanceof Lo&&o.push(s.toJson())}var u="["+o.join(",")+"]";u='"chartQueryParams":'+u+",",u+='"startRecord":'+this.startRecord+",",t+='"chartQueryParameters":'+(u="{"+(u+='"expectCount":'+this.expectCount)+"}")}return t="{"+t+"}"}}])&&Do(e.prototype,r),n&&Do(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),Go={AGENCY:"äº§åè´£ä»»æºæ",BCNSHP:"ç«æ å½¢ç¶",BUISHP:"å»ºç­å½¢ç¶",BOYSHP:"æµ®æ å½¢ç¶",BURDEP:"åç½®æ·±åº¦",CALSGN:"å¼å·",CATAIR:"æºåºç±»",CATACH:"éå°ç±»",CATBRG:"æ¡¥æ¢ç±»",CATBUA:"å»ºç­ç¾¤åºç±»",CATCBL:"çµç¼ç±»",CATCAN:"æ¸ éç±»",CATCAM:"æ¹ä½æ å¿ç±»",CATCHP:"æ£æ¥ç«ç±»",CATCOA:"æµ·å²¸çº¿ç±»",CATCTR:"æ§å¶ç¹ç±»",CATCON:"ä¼ éè£ç½®ç±»",CATCOV:"ä½ç¨èå´ç±»",CATCRN:"èµ·éæºç±»",CATDAM:"æ°´åç±»",CATDIS:"è·ç¦»æ å¿ç±»",CATDOC:"è¹åç±»",CATDPG:"å¾åºåºç±»",CATFNC:"æ æ ç±»",CATFRY:"è½®æ¸¡ç±»",CATFIF:"æé±¼è®¾å¤ç±»",CATFOG:"é¾å·ç±»",CATFOR:"é²å¾¡å·¥äºç±»",CATGAT:"é¨ç±»",CATHAF:"æ¸¯å£è®¾å¤ç±»",CATHLK:"è¶¸è¹ç±»",CATICE:"å°ç±»",CATINB:"ä½ä¸æµ®æ ç±»",CATLND:"å°é¢å°å¸¦ç±»",CATLMK:"éæ ç±»",CATLAM:"ä¾§é¢æ å¿ç±»",CATLIT:"ç¯æ ç±»",CATMFA:"æµ·æ°´å»æ®åºç±»",CATMPA:"åäºæ¼ä¹ åºç±»",CATMOR:"ç³»æ³ç»ç¼è®¾å¤ç±»",CATNAV:"å¯¼èªçº¿ç±»",CATOBS:"éç¢ç©ç±»",CATOFP:"æµ·ä¸å¹³å°ç±»",CATOLB:"æ²¹éç±»",CATPLE:"æ¨æ¡©ç±»",CATPIL:"å¼èªåç»è¹ç¹ç±»",CATPIP:"ç®¡éç±»",CATPRA:"çäº§åºåç±»",CATPYL:"å¡æ¶ç±»",CATQUA:"æ°æ®è´¨éç±»",CATRAS:"é·è¾¾ç«ç±»",CATRTB:"é·è¾¾åºç­å¨ç±»",CATROS:"æ çº¿çµå°ç±»",CATTRK:"æ¨èèªçº¿ç±»",CATRSC:"æå©ç«ç±»",CATREA:"éå¶åºç±»",CATROD:"éè·¯ç±»",CATRUN:"è·éç±»",CATSEA:"æµ·åºç±»",CATSLC:"å²¸çº¿å»ºç­ç©ç±»",CATSIT:"äº¤éä¿¡å·ç«ç±»",CATSIW:"åè­¦ä¿¡å·å°ç±»",CATSIL:"ç­ä»ãç½ç±»",CATSLO:"æå¡ç±»",CATSCF:"å°åè¹ç¨è®¾å¤ç±»",CATSPM:"ä¸ç¨æ å¿ç±»",CATTSS:"åééèªå¶ç±»",CATVEG:"æ¤è¢«ç±»",CATWAT:"ç´æµç±»",CATWED:"æµ·èãå·¨åæµ·è»ç±»",CATWRK:"æ²è¹ç±»",CATZOC:"æ°æ®ç½®ä¿¡åº¦åºç±»",SPACE_:"å­ç¬¦ç©ºæ ¼",CHARS_:"å­ç¬¦è¯´æ",COLOUR:"é¢è²",COLPAT:"å½©è²å¾æ¡",COMCHA:"éä¿¡é¢é",CSIZE_:"ç½ç»è±å°ºå¯¸",CPDATE:"æ±ç¼æ¥æ",CSCALE:"ç¼è¾æ¯ä¾å°º",CONDTN:"ç¶æ",CONRAD:"é·è¾¾å¯è§",CONVIS:"è§è§å¯è§",CURVEL:"æµ·æµéåº¦",DATEND:"ç»æ­¢æ¥æ",DATSTA:"å¼å§æ¥æ",DRVAL1:"æ·±åº¦èå´å¼1",DRVAL2:"æ·±åº¦èå´å¼2",DUNITS:"æ·±åº¦åä½",ELEVAT:"æµ·æ",ESTRNG:"é¢è®¡ä¼ è¾èå´",EXCLIT:"ç¯åæ¾ç¤ºç¶åµ",EXPSOU:"æ°´æ·±è¯´æ",FUNCTN:"åè½",HEIGHT:"é«åº¦",HUNITS:"é«åº¦ãé¿åº¦åä½",HORACC:"æ°´å¹³ç²¾åº¦",HORCLR:"æ°´å¹³åç©º",HORLEN:"æ°´å¹³é¿åº¦",HORWID:"æ°´å¹³å®½åº¦",ICEFAC:"å°åµç³»æ°",INFORM:"ä¿¡æ¯",JRSDTN:"ç®¡è¾åºå",JUSTH_:"æ°´å¹³å¯¹é½",JUSTV_:"åç´å¯¹é½",LIFCAP:"èµ·éè½å",LITCHR:"ç¯è´¨",LITVIS:"ç¯æ è½è§åº¦",MARSYS:"æµ·ä¸æ å¿ä½ç³»",MLTYLT:"ç¯ç»",NATION:"å½ç±",NATCON:"å»ºç­ç»ææ§è´¨",NATSUR:"è¡¨é¢æ§è´¨",NATQUA:"è¡¨é¢æ§è´¨éå®æ¯è¯­",NMDATE:"èªæµ·éåæ¥æ",OBJNAM:"ç©æ åç§°",ORIENT:"æ¹ä½",PEREND:"å®æç»æ­¢æ¥æ",PERSTA:"å®æå¼å§æ¥æ",PICREP:"å¾ç¤ºæ¾ç¤º",PILDST:"å¼èªåºå",PRCTRY:"çäº§å½å®¶",PRODCT:"äº§å",PUBREF:"åºçç©åè",QUASOU:"æ°´æ·±æµéç¹æ§",RADWAL:"é·è¾¾æ³¢é¿",RADIUS:"åå¾",RECDAT:"è®°å½æ¥æ",RECIND:"è®°å½è¡¨ç¤ºæ³",RYRMGV:"ç£å·®åèå¹´ä»½",RESTRN:"éå¶åº",SCAMAX:"æå¤§æ¯ä¾å°º",SCAMIN:"æå°æ¯ä¾å°º",SCVAL1:"æ¯ä¾å¼1",SCVAL2:"æ¯ä¾å¼2",SECTR1:"æå½¢çé1",SECTR2:"æå½¢çé2",SHIPAM:"åç§»åæ°",SIGFRQ:"ä¿¡å·é¢ç",SIGGEN:"ä¿¡å·çæ",SIGGRP:"ä¿¡å·ç»",SIGPER:"ä¿¡å·å¨æ",SIGSEQ:"ä¿¡å·æ¶åº",SOUACC:"æµæ·±ç²¾åº¦",SDISMX:"æå¤§æµæ·±é´è·",SDISMN:"æå°æµæ·±é´è·",SORDAT:"æ°æ®æ¥æºæ¥æ",SORIND:"æ°æ®æ¥æºè¡¨ç¤º",STATUS:"ç¶åµ",SURATH:"æµéæºæ",SUREND:"æµéç»ææ¥æ",SURSTA:"æµéå¼å§æ¥æ",SURTYP:"æµéç±»å",SCALE_:"ç¬¦å·ç¼©æ¾ç³»æ°",SCODE_:"ç¬¦å·ä»£ç ",TECSOU:"æ°´æ·±æµéææ¯",TXSTR_:"ææ¬ä¸²",TXTDSC:"æ­£ææè¿°",TS_TSP:"æ½®æµéåçå¼",TS_TSV:"æ½®æµæ¶åºå¼",T_ACWL:"æ½®æ±æ½®ä½ç²¾åº¦",T_HWLW:"æ½®æ±é«ä½æ½®å¼",T_MTOD:"æ½®æ±é¢æ¥æ¹æ³",T_THDF:"æ½®æ±æ½®æ¶ä¸æ½®é«å·®",T_TINT:"æ½®æ±æ¶é´é´éå¼",T_TSVL:"æ½®æ±æ¶åºå¼",T_VAHC:"æ½®æ±è°ååæ½®å¼",TIMEND:"ç»æ­¢æ¶é´",TIMSTA:"å¼å§æ¶é´",TINTS_:"è²è°",TOPSHP:"é¡¶æ ãæ¼æ å½¢ç¶",TRAFIC:"äº¤éæµ",VALACM:"ç£å·®å¹´åç",VALDCO:"ç­æ·±çº¿å¼",VALLMA:"å±é¨ç£åå¼å¸¸å¼",VALMAG:"ç£å·®å¼",VALMXR:"æå¤§ä½ç¨è·ç¦»",VALNMR:"æ å®ä½ç¨è·ç¦»",VALSOU:"æ°´æ·±å¼",VERACC:"åç´ç²¾åº¦",VERCLR:"ç«ååç©º",VERCCL:"å°é­ç«ååç©º",VERCOP:"å¼å¯ç«ååç©º",VERCSA:"å®å¨ç«ååç©º",VERDAT:"åç´åºåé¢",VERLEN:"åç´é«åº¦",WATLEV:"æ°´ä½æåº",CAT_TS:"æ½®æµç±»",PUNITS:"ä½ç½®ç²¾åº¦åä½",CLSDEF:"ç©æ å®ä¹",CLSNAM:"ç©æ åç§°",SYMINS:"ç©æ åç§°",NINFOM:"ç¨å½å®¶è¯­è¨è¡¨ç¤ºçä¿¡æ¯",NOBJNM:"ç¨å½å®¶è¯­è¨è¡¨ç¤ºçç©æ åç§°",NPLDST:"ç¨å½å®¶è¯­è¨è¡¨ç¤ºçå¼èªåº",NTXST_:"ç¨å½å®¶è¯­è¨è¡¨ç¤ºçææ¬ä¸²",NTXTDS:"ç¨å½å®¶è¯­è¨è¡¨ç¤ºçæ­£æ",HORDAT:"æ°´å¹³åºåé¢",POSACC:"ä½ç½®ç²¾åº¦",QUAPOS:"ä½ç½®æ§è´¨"};function Vo(t){"@babel/helpers - typeof";return(Vo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ho(n.key),n)}}function Ho(t){var e=function(t,e){if("object"!=Vo(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Vo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Vo(e)?e:String(e)}function zo(t,e,r){return e=Wo(e),Jo(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Wo(t).constructor):e.apply(t,r))}function Jo(t,e){if(e&&("object"===Vo(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ko(t)}function Wo(t){return(Wo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ko(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Qo(t,e){return(Qo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Yo=function(t){function e(t,r){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=zo(this,e,[t,r]),r=r||{},n.returnContent=null,n.format=lr.GEOJSON,V.extend(Ko(n),r);var o=Ko(n);return r.format&&(o.format=r.format.toUpperCase()),o.url?(o.url=V.urlPathAppend(o.url,"queryResults"),n.CLASS_NAME="SuperMap.ChartQueryService",n):Jo(n)}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Qo(t,e)}(e,oo),r=e,(n=[{key:"destroy",value:function(){oo.prototype.destroy.apply(this,arguments),this.returnContent=null,this.format=null}},{key:"processAsync",value:function(t,e){if(t instanceof Uo){var r,n=this;return n.returnContent=t.returnContent,r=t.getVariablesJson(),n.returnContent&&(n.url=V.urlAppend(n.url,"returnContent=true")),n.request({method:"POST",data:r,scope:n,success:e,failure:e})}}},{key:"_tranformFeatureField",value:function(t,e){t.forEach(function(t){t.fieldNames.forEach(function(r,n){t.fieldNames[n]="function"==typeof e&&e(r)||Go[r]||r})})}},{key:"_transformFeatures",value:function(t,e,r){this._tranformFeatureField(t.features,e),r===lr.GEOJSON&&(t.features=(new cn).toGeoJSON(t.features))}},{key:"transformResult",value:function(t,e){var r=this,n=this;t=V.transformResult(t);var o=n.fieldNameFormatter;if(t&&t.recordsets)for(var i=0,a=t.recordsets,s=a.length;i<s;i++)a[i].features&&this._transformFeatures(a[i],o,n.format),a[i].chartRecordsets&&a[i].chartRecordsets.forEach(function(t){r._transformFeatures(t,o,n.format)});return{result:t,options:e}}},{key:"getQueryParameters",value:function(t){return new Io({queryMode:t.queryMode,bounds:t.bounds,chartLayerNames:t.chartLayerNames,chartQueryFilterParameters:t.chartQueryFilterParameters,returnContent:t.returnContent})}}])&&qo(r.prototype,n),o&&qo(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function Xo(t){"@babel/helpers - typeof";return(Xo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,$o(n.key),n)}}function $o(t){var e=function(t,e){if("object"!=Xo(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Xo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Xo(e)?e:String(e)}function ti(t,e,r){return e=ri(e),function(t,e){if(e&&("object"===Xo(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],ri(t).constructor):e.apply(t,r))}function ei(){return(ei="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ri(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function ri(t){return(ri=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ni(t,e){return(ni=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var oi=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=ti(this,e,[t,r])).CLASS_NAME="SuperMap.ChartFeatureInfoSpecsService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ni(t,e)}(e,oo),r=e,(n=[{key:"destroy",value:function(){ei(ri(e.prototype),"destroy",this).call(this),V.reset(this)}},{key:"processAsync",value:function(t){return this.isTempLayers||V.urlPathAppend(this.url,"chartFeatureInfoSpecs"),this.request({method:"GET",params:null,scope:this,success:t,failure:t})}}])&&Zo(r.prototype,n),o&&Zo(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function ii(t){"@babel/helpers - typeof";return(ii="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ai(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,si(n.key),n)}}function si(t){var e=function(t,e){if("object"!=ii(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ii(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ii(e)?e:String(e)}function ui(t,e,r){return e=ci(e),function(t,e){if(e&&("object"===ii(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],ci(t).constructor):e.apply(t,r))}function li(){return(li="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ci(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function ci(t){return(ci=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function fi(t,e){return(fi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var pi=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=ui(this,e,[t,r])).CLASS_NAME="SuperMap.ChartAcronymClassifyService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fi(t,e)}(e,oo),r=e,(n=[{key:"destroy",value:function(){li(ci(e.prototype),"destroy",this).call(this),V.reset(this)}},{key:"processAsync",value:function(t){var e=this;return e.isTempLayers||(e.url=V.urlPathAppend(e.url,"chartAcronymClassify")),e.request({method:"GET",params:null,scope:e,success:t,failure:t})}}])&&ai(r.prototype,n),o&&ai(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function hi(t){"@babel/helpers - typeof";return(hi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yi(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,di(n.key),n)}}function di(t){var e=function(t,e){if("object"!=hi(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=hi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==hi(e)?e:String(e)}var bi=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=e,this.options=r||{}}var e,r,n;return e=t,(r=[{key:"queryChart",value:function(t,e,r){var n=this,o=t,i=n._processFormat(r);return new Yo(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:i,fieldNameFormatter:n.options.fieldNameFormatter}).processAsync(o,e)}},{key:"getChartFeatureInfo",value:function(t){var e=this,r=V.urlPathAppend(e.url,"chartFeatureInfoSpecs");return new oi(r,{proxy:e.options.proxy,withCredentials:e.options.withCredentials,crossOrigin:e.options.crossOrigin,headers:e.options.headers}).processAsync(t)}},{key:"getChartAcronymClassify",value:function(t){var e=this;return new pi(e.url,{proxy:e.options.proxy,withCredentials:e.options.withCredentials,crossOrigin:e.options.crossOrigin,headers:e.options.headers}).processAsync(t)}},{key:"_processFormat",value:function(t){return t||lr.GEOJSON}}])&&yi(e.prototype,r),n&&yi(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function vi(t){"@babel/helpers - typeof";return(vi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mi(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,gi(n.key),n)}}function gi(t){var e=function(t,e){if("object"!=vi(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=vi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==vi(e)?e:String(e)}function Si(t,e,r){return e=wi(e),function(t,e){if(e&&("object"===vi(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],wi(t).constructor):e.apply(t,r))}function wi(t){return(wi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Oi(t,e){return(Oi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var _i=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Si(this,e,[t,r]))._chartService=new bi(t,r),n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Oi(t,e)}(e,An),r=e,(n=[{key:"queryChart",value:function(t,e,r){return t=this._processParams(t),this._chartService.queryChart(t,e,r)}},{key:"getChartFeatureInfo",value:function(t){return this._chartService.getChartFeatureInfo(t)}},{key:"getChartAcronymClassify",value:function(t){return this._chartService.getChartAcronymClassify(t)}},{key:"_processParams",value:function(t){return t?(t.returnContent=null==t.returnContent||t.returnContent,t.chartQueryFilterParameters&&!hn.isArray(t.chartQueryFilterParameters)&&(t.chartQueryFilterParameters=[t.chartQueryFilterParameters]),t.bounds&&(t.bounds=hn.toSuperMapBounds(t.bounds)),t):{}}},{key:"_processFormat",value:function(t){return t||lr.GEOJSON}}])&&mi(r.prototype,n),o&&mi(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function Pi(t){"@babel/helpers - typeof";return(Pi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ei(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ci(n.key),n)}}function Ci(t){var e=function(t,e){if("object"!=Pi(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Pi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Pi(e)?e:String(e)}function Ti(t,e,r){return e=ji(e),function(t,e){if(e&&("object"===Pi(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ki(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],ji(t).constructor):e.apply(t,r))}function ji(t){return(ji=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ki(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xi(t,e){return(xi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Ai=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=r||{}).EVENT_TYPES=["broadcastSocketConnected","broadcastSocketClosed","broadcastSocketError","broadcastFailed","broadcastSucceeded","subscribeSocketConnected","subscribeSocketClosed","subscribeSocketError","messageSucceeded","setFilterParamSucceeded"],(n=Ti(this,e,[t,r])).geometry=null,n.prjCoordSys=null,n.excludeField=null,V.extend(ki(n),r),n.CLASS_NAME="SuperMap.DataFlowService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xi(t,e)}(e,oo),r=e,(n=[{key:"initBroadcast",value:function(){var t=this;return this.broadcastWebSocket=this._connect(V.urlPathAppend(t.url,"broadcast")),this.broadcastWebSocket.onopen=function(e){t.broadcastWebSocket.isOpen=!0,e.eventType="broadcastSocketConnected",t.events.triggerEvent("broadcastSocketConnected",e)},this.broadcastWebSocket.onclose=function(e){t.broadcastWebSocket&&(t.broadcastWebSocket.isOpen=!1),e.eventType="broadcastSocketClosed",t.events.triggerEvent("broadcastSocketClosed",e)},this.broadcastWebSocket.onerror=function(e){e.eventType="broadcastSocketError",t.events.triggerEvent("broadcastSocketError",e)},this}},{key:"broadcast",value:function(t){this.broadcastWebSocket&&this.broadcastWebSocket.isOpen?(this.broadcastWebSocket.send(JSON.stringify(t)),this.events.triggerEvent("broadcastSucceeded")):this.events.triggerEvent("broadcastFailed")}},{key:"initSubscribe",value:function(){var t=this;return this.subscribeWebSocket=this._connect(V.urlPathAppend(t.url,"subscribe")),this.subscribeWebSocket.onopen=function(e){t.subscribeWebSocket.send(t._getFilterParams()),e.eventType="subscribeSocketConnected",t.events.triggerEvent("subscribeSocketConnected",e)},this.subscribeWebSocket.onclose=function(e){e.eventType="subscribeWebSocketClosed",t.events.triggerEvent("subscribeWebSocketClosed",e)},this.subscribeWebSocket.onerror=function(e){e.eventType="subscribeSocketError",t.events.triggerEvent("subscribeSocketError",e)},this.subscribeWebSocket.onmessage=function(e){t._onMessage(e)},this}},{key:"setExcludeField",value:function(t){return this.excludeField=t,this.subscribeWebSocket.send(this._getFilterParams()),this}},{key:"setGeometry",value:function(t){return this.geometry=t,this.subscribeWebSocket.send(this._getFilterParams()),this}},{key:"unSubscribe",value:function(){this.subscribeWebSocket&&(this.subscribeWebSocket.close(),this.subscribeWebSocket=null)}},{key:"unBroadcast",value:function(){this.broadcastWebSocket&&(this.broadcastWebSocket.close(),this.broadcastWebSocket=null)}},{key:"destroy",value:function(){oo.prototype.destroy.apply(this,arguments);this.geometry=null,this.prjCoordSys=null,this.excludeField=null,this.unBroadcast(),this.unSubscribe()}},{key:"_getFilterParams",value:function(){var t={filterParam:{prjCoordSys:this.prjCoordSys,excludeField:this.excludeField,geometry:this.geometry}};return V.toJSON(t)}},{key:"_onMessage",value:function(t){if(t.data&&t.data.indexOf("filterParam")>=0){var e=JSON.parse(t.data);return t.filterParam=e,t.eventType="setFilterParamSucceeded",void this.events.triggerEvent("setFilterParamSucceeded",t)}var r=JSON.parse(t.data);t.featureResult=r,t.eventType="messageSucceeded",this.events.triggerEvent("messageSucceeded",t)}},{key:"_connect",value:function(t){return t=Xn.appendCredential(t),"WebSocket"in window?new WebSocket(t):"MozWebSocket"in window?new(0,window.MozWebSocket)(t):(console.log("no WebSocket"),null)}}])&&Ei(r.prototype,n),o&&Ei(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function Ii(t){"@babel/helpers - typeof";return(Ii="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ni(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ri(n.key),n)}}function Ri(t){var e=function(t,e){if("object"!=Ii(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ii(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ii(e)?e:String(e)}function Mi(t,e,r){return e=Li(e),function(t,e){if(e&&("object"===Ii(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Bi(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Li(t).constructor):e.apply(t,r))}function Li(t){return(Li=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Bi(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Di(t,e){return(Di=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Fi=function(t){function e(t,r){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=r||{}).projection&&(r.prjCoordSys=r.projection),(n=Mi(this,e,[t,r])).dataFlow=new Ai(t,r),n.dataFlow.events.on({broadcastSocketConnected:n._defaultEvent,broadcastSocketError:n._defaultEvent,broadcastFailed:n._defaultEvent,broadcastSucceeded:n._defaultEvent,subscribeSocketConnected:n._defaultEvent,subscribeSocketError:n._defaultEvent,messageSucceeded:n._defaultEvent,setFilterParamSucceeded:n._defaultEvent,scope:Bi(n)});var o=Bi(n);return o.on("subscribeSocketConnected",function(t){o.fire("subscribesucceeded",t)}),n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Di(t,e)}(e,An),r=e,(n=[{key:"initBroadcast",value:function(){return this.dataFlow.initBroadcast(),this}},{key:"broadcast",value:function(t){this.dataFlow.broadcast(t)}},{key:"initSubscribe",value:function(){return this.dataFlow.initSubscribe(),this}},{key:"setExcludeField",value:function(t){return this.dataFlow.setExcludeField(t),this.options.excludeField=t,this}},{key:"setGeometry",value:function(t){return this.dataFlow.setGeometry(t),this.options.geometry=t,this}},{key:"unSubscribe",value:function(){this.dataFlow.unSubscribe()}},{key:"unBroadcast",value:function(){this.dataFlow.unBroadcast()}},{key:"_defaultEvent",value:function(t){this.fire(t.eventType||t.type,t)}}])&&Ni(r.prototype,n),o&&Ni(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function Ui(t){"@babel/helpers - typeof";return(Ui="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Gi(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Vi(n.key),n)}}function Vi(t){var e=function(t,e){if("object"!=Ui(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ui(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ui(e)?e:String(e)}function qi(t,e,r){return e=Wi(e),Hi(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Wi(t).constructor):e.apply(t,r))}function Hi(t,e){if(e&&("object"===Ui(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return zi(t)}function zi(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ji(){return(Ji="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Wi(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Wi(t){return(Wi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ki(t,e){return(Ki=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Qi=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=qi(this,e,[t,r]),r?(n.datasource=null,n.dataset=null,r&&V.extend(zi(n),r),n.CLASS_NAME="SuperMap.DatasetService",n):Hi(n)}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ki(t,e)}(e,oo),r=e,(n=[{key:"destroy",value:function(){Ji(Wi(e.prototype),"destroy",this).call(this);this.datasource=null,this.dataset=null}},{key:"getDatasetsService",value:function(t,e){var r=V.urlPathAppend(this.url,"datasources/name/".concat(t,"/datasets"));return this.processAsync(r,"GET",e)}},{key:"getDatasetService",value:function(t,e,r){var n=V.urlPathAppend(this.url,"datasources/name/".concat(t,"/datasets/name/").concat(e));return this.processAsync(n,"GET",r)}},{key:"setDatasetService",value:function(t,e){if(t){var r=V.urlPathAppend(this.url,"datasources/name/".concat(t.datasourceName,"/datasets/name/").concat(t.datasetName));return delete t.datasourceName,this.processAsync(r,"PUT",e,t)}}},{key:"deleteDatasetService",value:function(t,e,r){var n=V.urlPathAppend(this.url,"datasources/name/".concat(t,"/datasets/name/").concat(e));return this.processAsync(n,"DELETE",r)}},{key:"processAsync",value:function(t,e,r,n){var o={url:t,method:e,scope:this,success:r,failure:r};return n&&(o.data=V.toJSON(n)),this.request(o)}}])&&Gi(r.prototype,n),o&&Gi(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function Yi(t){"@babel/helpers - typeof";return(Yi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xi(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Zi(n.key),n)}}function Zi(t){var e=function(t,e){if("object"!=Yi(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Yi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Yi(e)?e:String(e)}var $i=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.datasourceName=null,this.datasetName=null,this.datasetType=null,e&&V.extend(this,e),this.CLASS_NAME="SuperMap.CreateDatasetParameters")}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.datasourceName=null,this.datasetName=null,this.datasetType=null}}])&&Xi(e.prototype,r),n&&Xi(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ta(t){"@babel/helpers - typeof";return(ta="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ea(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ra(n.key),n)}}function ra(t){var e=function(t,e){if("object"!=ta(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ta(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ta(e)?e:String(e)}var na=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.datasourceName=null,this.datasetName=null,this.isFileCache=null,this.description=null,this.prjCoordSys=null,this.charset=null,this.palette=null,this.noValue=null,e&&V.extend(this,e),this.CLASS_NAME="SuperMap.UpdateDatasetParameters")}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.datasourceName=null,t.datasetName=null,t.isFileCache=null,t.prjCoordSys=null,t.charset=null,t.palette=null,t.noValue=null}}])&&ea(e.prototype,r),n&&ea(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function oa(t){"@babel/helpers - typeof";return(oa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ia(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,aa(n.key),n)}}function aa(t){var e=function(t,e){if("object"!=oa(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=oa(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==oa(e)?e:String(e)}function sa(t,e,r){return e=ua(e),function(t,e){if(e&&("object"===oa(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],ua(t).constructor):e.apply(t,r))}function ua(t){return(ua=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function la(t,e){return(la=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var ca=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=sa(this,e,[t,r]))._datasetService=new Qi(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers}),n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&la(t,e)}(e,An),r=e,(n=[{key:"getDatasets",value:function(t,e){if(t)return this._datasetService.getDatasetsService(t,e)}},{key:"getDataset",value:function(t,e,r){if(t&&e)return this._datasetService.getDatasetService(t,e,r)}},{key:"setDataset",value:function(t,e){if(t instanceof $i||t instanceof na){if(t instanceof $i)var r={datasetType:t.datasetType,datasetName:t.datasetName,datasourceName:t.datasourceName};else t instanceof na&&(r={datasetName:t.datasetName,datasourceName:t.datasourceName,isFileCache:t.isFileCache,description:t.description,prjCoordSys:t.prjCoordSys,charset:t.charset});return this._datasetService.setDatasetService(r,e)}}},{key:"deleteDataset",value:function(t,e,r){return this._datasetService.deleteDatasetService(t,e,r)}}])&&ia(r.prototype,n),o&&ia(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function fa(t){"@babel/helpers - typeof";return(fa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pa(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ha(n.key),n)}}function ha(t){var e=function(t,e){if("object"!=fa(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=fa(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==fa(e)?e:String(e)}var ya=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.datasourceName=null,this.description=null,this.coordUnit=null,this.distanceUnit=null,e&&V.extend(this,e),this.CLASS_NAME="SuperMap.SetDatasourceParameters")}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.datasourceName=null,this.description=null,this.coordUnit=null,this.distanceUnit=null}}])&&pa(e.prototype,r),n&&pa(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function da(t){"@babel/helpers - typeof";return(da="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ba(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,va(n.key),n)}}function va(t){var e=function(t,e){if("object"!=da(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=da(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==da(e)?e:String(e)}function ma(t,e,r){return e=wa(e),function(t,e){if(e&&("object"===da(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ga(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],wa(t).constructor):e.apply(t,r))}function ga(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Sa(){return(Sa="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=wa(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function wa(t){return(wa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Oa(t,e){return(Oa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var _a=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=ma(this,e,[t,r]),r&&V.extend(ga(n),r),n.CLASS_NAME="SuperMap.DatasourceService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Oa(t,e)}(e,oo),r=e,(n=[{key:"destroy",value:function(){Sa(wa(e.prototype),"destroy",this).call(this)}},{key:"getDatasourceService",value:function(t,e){var r=V.urlPathAppend(this.url,"datasources/name/".concat(t));return this.processAsync(r,"GET",e)}},{key:"getDatasourcesService",value:function(t){var e=V.urlPathAppend(this.url,"datasources");return this.processAsync(e,"GET",t)}},{key:"setDatasourceService",value:function(t,e){if(t){var r=V.urlPathAppend(this.url,"datasources/name/".concat(t.datasourceName));return this.processAsync(r,"PUT",e,t)}}},{key:"processAsync",value:function(t,e,r,n){var o={url:t,method:e,scope:this,success:r,failure:r};return n&&(o.data=V.toJSON(n)),this.request(o)}}])&&ba(r.prototype,n),o&&ba(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function Pa(t){"@babel/helpers - typeof";return(Pa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ea(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ca(n.key),n)}}function Ca(t){var e=function(t,e){if("object"!=Pa(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Pa(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Pa(e)?e:String(e)}function Ta(t,e,r){return e=ja(e),function(t,e){if(e&&("object"===Pa(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],ja(t).constructor):e.apply(t,r))}function ja(t){return(ja=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ka(t,e){return(ka=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var xa=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Ta(this,e,[t,r]))._datasourceService=new _a(n.url,{proxy:n.proxy,withCredentials:n.withCredentials,crossOrigin:n.crossOrigin,headers:n.headers}),n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ka(t,e)}(e,An),r=e,(n=[{key:"getDatasources",value:function(t){return this._datasourceService.getDatasourcesService(t)}},{key:"getDatasource",value:function(t,e){if(t)return this._datasourceService.getDatasourceService(t,e)}},{key:"setDatasource",value:function(t,e){if(t instanceof ya){var r={description:t.description,coordUnit:t.coordUnit,distanceUnit:t.distanceUnit,datasourceName:t.datasourceName};return this._datasourceService.setDatasourceService(r,e)}}}])&&Ea(r.prototype,n),o&&Ea(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function Aa(t){"@babel/helpers - typeof";return(Aa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ia(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Na(n.key),n)}}function Na(t){var e=function(t,e){if("object"!=Aa(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Aa(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Aa(e)?e:String(e)}var Ra=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.dataSourceName=null,this.dataSetName=null,this.features=null,this.editType=Nr.ADD,this.IDs=null,this.returnContent=!1,this.isUseBatch=!1,V.extend(this,e),this.CLASS_NAME="SuperMap.EditFeaturesParameters"}var e,r,n;return e=t,n=[{key:"toJsonParameters",value:function(t){var e,r,n;if(t.editType===Nr.DELETE){if(null===t.IDs)return;n={ids:t.IDs}}else if(n=[],t.features){r=t.features.length;for(var o=0;o<r;o++)(e=t.features[o]).geometry=en.fromGeometry(e.geometry),n.push(e)}return V.toJSON(n)}}],(r=[{key:"destroy",value:function(){var t=this;t.dataSourceName=null,t.dataSetName=null,t.features=null,t.editType=null,t.IDs=null,t.returnContent=null}}])&&Ia(e.prototype,r),n&&Ia(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ma(t){"@babel/helpers - typeof";return(Ma="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function La(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ba(n.key),n)}}function Ba(t){var e=function(t,e){if("object"!=Ma(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ma(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ma(e)?e:String(e)}function Da(t,e,r){return e=Ga(e),function(t,e){if(e&&("object"===Ma(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Fa(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Ga(t).constructor):e.apply(t,r))}function Fa(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ua(){return(Ua="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ga(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Ga(t){return(Ga=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Va(t,e){return(Va=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var qa=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Da(this,e,[t,r])).returnContent=!1,n.isUseBatch=!1,r&&V.extend(Fa(n),r),n.url=V.urlPathAppend(n.url,"features"),n.CLASS_NAME="SuperMap.EditFeaturesService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Va(t,e)}(e,oo),r=e,(n=[{key:"destroy",value:function(){Ua(Ga(e.prototype),"destroy",this).call(this);this.returnContent=null,this.isUseBatch=null,this.fromIndex=null,this.toIndex=null}},{key:"processAsync",value:function(t,e){if(t instanceof Ra){var r=this,n="POST",o="",i=t.editType,a=null;if(r.returnContent=t.returnContent,r.isUseBatch=t.isUseBatch,a=Ra.toJsonParameters(t),i===Nr.DELETE){a=o=V.toJSON(t.IDs);var s=V.urlAppend(r.url,V.getParameterString({ids:o}));Dn.urlIsLong(s)?(r.url=V.urlAppend(r.url,V.getParameterString({_method:"DELETE"})),n="POST"):(r.url=s,n="DELETE")}else i===Nr.UPDATE?n="PUT":(r.isUseBatch&&(r.url=V.urlAppend(r.url,"isUseBatch=".concat(r.isUseBatch)),r.returnContent=!1),r.returnContent&&(r.url=V.urlAppend(r.url,"returnContent=true"),n="POST"));return r.request({method:n,data:a,scope:r,success:e,failure:e})}}},{key:"getMetaData",value:function(t,e){var r=t.featureId;return this.url=V.urlPathAppend(this.url,r+"/metadata"),this.request({method:"GET",data:null,scope:this,success:e,failure:e})}}])&&La(r.prototype,n),o&&La(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function Ha(t){"@babel/helpers - typeof";return(Ha="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function za(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ja(n.key),n)}}function Ja(t){var e=function(t,e){if("object"!=Ha(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ha(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ha(e)?e:String(e)}function Wa(t,e,r){return e=Ya(e),function(t,e){if(e&&("object"===Ha(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ka(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Ya(t).constructor):e.apply(t,r))}function Ka(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Qa(){return(Qa="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ya(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Ya(t){return(Ya=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Xa(t,e){return(Xa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Za=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=Wa(this,e,[t,r]),r=r||{},n.returnContent=!0,n.returnFeaturesOnly=!1,n.fromIndex=0,n.toIndex=19,n.hasGeometry=!0,n.maxFeatures=null,n.format=lr.GEOJSON,V.extend(Ka(n),r),n.url=V.urlPathAppend(n.url,"featureResults"),n.CLASS_NAME="SuperMap.GetFeaturesServiceBase",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Xa(t,e)}(e,oo),r=e,(n=[{key:"destroy",value:function(){Qa(Ya(e.prototype),"destroy",this).call(this);var t=this;t.returnContent=null,t.fromIndex=null,t.toIndex=null,t.maxFeatures=null,t.format=null,t.hasGeometry=null}},{key:"processAsync",value:function(t,e){if(t){var r,n=this,o=!0;return n.returnContent=t.returnContent,n.returnFeaturesOnly=t.returnFeaturesOnly,n.fromIndex=t.fromIndex,n.toIndex=t.toIndex,n.maxFeatures=t.maxFeatures,n.hasGeometry=t.hasGeometry,n.returnContent&&(o=!1),null!=n.fromIndex&&null!=n.toIndex&&!isNaN(n.fromIndex)&&!isNaN(n.toIndex)&&n.fromIndex>=0&&n.toIndex>=0&&!o&&(n.url=V.urlAppend(n.url,"fromIndex=".concat(n.fromIndex,"&toIndex=").concat(n.toIndex))),n.returnContent&&(t.returnCountOnly||t.returnDatasetInfoOnly||t.returnFeaturesOnly||console.warn("recommend set returnFeaturesOnly config to true to imporve performance. if need get Total amount and Dataset information. FeatureService provide getFeaturesCount and getFeaturesDatasetInfo method"),t.returnCountOnly&&(n.url=V.urlAppend(n.url,"returnCountOnly="+t.returnCountOnly)),t.returnDatasetInfoOnly&&(n.url=V.urlAppend(n.url,"returnDatasetInfoOnly="+t.returnDatasetInfoOnly)),t.returnFeaturesOnly&&(n.url=V.urlAppend(n.url,"returnFeaturesOnly="+t.returnFeaturesOnly))),r=n.getJsonParameters(t),n.request({method:"POST",data:r,scope:n,success:e,failure:e})}}},{key:"transformResult",value:function(t,e){t=V.transformResult(t);var r=new cn;(this.format===lr.GEOJSON&&t.features&&(t.features=r.toGeoJSON(t.features)),this.returnFeaturesOnly&&Array.isArray(t))&&(t={succeed:t.succeed,features:r.toGeoJSON(t)});return{result:t,options:e}}},{key:"dataFormat",value:function(){return[lr.GEOJSON,lr.ISERVER,lr.FGB]}}])&&za(r.prototype,n),o&&za(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function $a(t){"@babel/helpers - typeof";return($a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ts(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,es(n.key),n)}}function es(t){var e=function(t,e){if("object"!=$a(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=$a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==$a(e)?e:String(e)}var rs=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.attributeFilter=null,this.name=null,this.joinItems=null,this.linkItems=null,this.ids=null,this.orderBy=null,this.groupBy=null,this.fields=null,e&&V.extend(this,e),this.CLASS_NAME="SuperMap.FilterParameter"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;if(t.attributeFilter=null,t.name=null,t.joinItems){for(var e=0,r=t.joinItems,n=r.length;e<n;e++)r[e].destroy();t.joinItems=null}if(t.linkItems){for(var o=0,i=t.linkItems,a=i.length;o<a;o++)i[o].destroy();t.linkItems=null}t.ids=null,t.orderBy=null,t.groupBy=null,t.fields=null}}])&&ts(e.prototype,r),n&&ts(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ns(t){"@babel/helpers - typeof";return(ns="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function os(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,is(n.key),n)}}function is(t){var e=function(t,e){if("object"!=ns(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ns(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ns(e)?e:String(e)}var as=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.datasetNames=null,this.targetEpsgCode=null,this.targetPrj=null,this.returnContent=!0,this.fromIndex=0,this.toIndex=19,this.returnFeaturesOnly=!1,this.maxFeatures=null,this.hasGeometry=!0,this.aggregations=null,V.extend(this,e),this.CLASS_NAME="SuperMap.GetFeaturesParametersBase"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.datasetNames=null,t.returnContent=null,t.fromIndex=null,t.toIndex=null,t.hasGeometry=null,t.maxFeatures=null,t.targetEpsgCode=null,t.targetPrj=null,t.aggregation&&(t.aggregation=null)}}])&&os(e.prototype,r),n&&os(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ss(t){"@babel/helpers - typeof";return(ss="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function us(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ls(n.key),n)}}function ls(t){var e=function(t,e){if("object"!=ss(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ss(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ss(e)?e:String(e)}function cs(t,e,r){return e=hs(e),function(t,e){if(e&&("object"===ss(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return fs(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],hs(t).constructor):e.apply(t,r))}function fs(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ps(){return(ps="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=hs(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function hs(t){return(hs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ys(t,e){return(ys=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var ds=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=cs(this,e,[t])).getFeatureMode="ID",r.IDs=null,r.fields=null,V.extend(fs(r),t),r.CLASS_NAME="SuperMap.GetFeaturesByIDsParameters",r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ys(t,e)}(e,as),r=e,o=[{key:"toJsonParameters",value:function(t){var e,r;return e={datasetNames:t.datasetNames,getFeatureMode:"ID",ids:t.IDs},t.fields&&((r=new rs).name=t.datasetNames,r.fields=t.fields,e.queryParameter=r),t.targetEpsgCode&&(e.targetEpsgCode=t.targetEpsgCode),"boolean"==typeof t.hasGeometry&&(e.hasGeometry=t.hasGeometry),!t.targetEpsgCode&&t.targetPrj&&(e.targetPrj=t.targetPrj),t.aggregations&&(e.aggregations=t.aggregations),V.toJSON(e)}}],(n=[{key:"destroy",value:function(){ps(hs(e.prototype),"destroy",this).call(this);var t=this;if(t.IDs=null,t.getFeatureMode=null,t.fields){for(;t.fields.length>0;)t.fields.pop();t.fields=null}}}])&&us(r.prototype,n),o&&us(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function bs(t){"@babel/helpers - typeof";return(bs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vs(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ms(n.key),n)}}function ms(t){var e=function(t,e){if("object"!=bs(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=bs(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==bs(e)?e:String(e)}function gs(t,e,r){return e=ws(e),function(t,e){if(e&&("object"===bs(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],ws(t).constructor):e.apply(t,r))}function Ss(){return(Ss="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ws(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function ws(t){return(ws=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Os(t,e){return(Os=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var _s=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=gs(this,e,[t,r])).CLASS_NAME="SuperMap.GetFeaturesByIDsService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Os(t,e)}(e,Za),r=e,(n=[{key:"destroy",value:function(){Ss(ws(e.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(t){return ds.toJsonParameters(t)}}])&&vs(r.prototype,n),o&&vs(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function Ps(t){"@babel/helpers - typeof";return(Ps="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Es(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Cs(n.key),n)}}function Cs(t){var e=function(t,e){if("object"!=Ps(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ps(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ps(e)?e:String(e)}function Ts(t,e,r){return e=xs(e),function(t,e){if(e&&("object"===Ps(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return js(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],xs(t).constructor):e.apply(t,r))}function js(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ks(){return(ks="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=xs(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function xs(t){return(xs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function As(t,e){return(As=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Is=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Ts(this,e,[t])).getFeatureMode="SQL",r.queryParameter=null,V.extend(js(r),t),r.CLASS_NAME="SuperMap.GetFeaturesBySQLParameters",r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&As(t,e)}(e,as),r=e,o=[{key:"toJsonParameters",value:function(t){var e={datasetNames:t.datasetNames,getFeatureMode:"SQL",queryParameter:t.queryParameter};return t.maxFeatures&&!isNaN(t.maxFeatures)&&(e.maxFeatures=t.maxFeatures),"boolean"==typeof t.hasGeometry&&(e.hasGeometry=t.hasGeometry),t.aggregations&&(e.aggregations=t.aggregations),t.targetEpsgCode&&(e.targetEpsgCode=t.targetEpsgCode),!t.targetEpsgCode&&t.targetPrj&&(e.targetPrj=t.targetPrj),t.aggregations&&(e.aggregations=t.aggregations),V.toJSON(e)}}],(n=[{key:"destroy",value:function(){ks(xs(e.prototype),"destroy",this).call(this);this.getFeatureMode=null,this.queryParameter&&(this.queryParameter.destroy(),this.queryParameter=null)}}])&&Es(r.prototype,n),o&&Es(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function Ns(t){"@babel/helpers - typeof";return(Ns="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Rs(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ms(n.key),n)}}function Ms(t){var e=function(t,e){if("object"!=Ns(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ns(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ns(e)?e:String(e)}function Ls(t,e,r){return e=Ds(e),function(t,e){if(e&&("object"===Ns(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Ds(t).constructor):e.apply(t,r))}function Bs(){return(Bs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ds(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Ds(t){return(Ds=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Fs(t,e){return(Fs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Us=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Ls(this,e,[t,r])).CLASS_NAME="SuperMap.GetFeaturesBySQLService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Fs(t,e)}(e,Za),r=e,(n=[{key:"destroy",value:function(){Bs(Ds(e.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(t){return Is.toJsonParameters(t)}}])&&Rs(r.prototype,n),o&&Rs(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function Gs(t){"@babel/helpers - typeof";return(Gs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vs(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,qs(n.key),n)}}function qs(t){var e=function(t,e){if("object"!=Gs(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Gs(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Gs(e)?e:String(e)}function Hs(t,e,r){return e=Ws(e),function(t,e){if(e&&("object"===Gs(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return zs(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Ws(t).constructor):e.apply(t,r))}function zs(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Js(){return(Js="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ws(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Ws(t){return(Ws=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ks(t,e){return(Ks=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Qs=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Hs(this,e,[t])).getFeatureMode=e.getFeatureMode.BOUNDS,r.bounds=null,r.fields=null,r.attributeFilter=null,r.spatialQueryMode=hr.CONTAIN,V.extend(zs(r),t),r.CLASS_NAME="SuperMap.GetFeaturesByBoundsParameters",r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ks(t,e)}(e,as),r=e,o=[{key:"toJsonParameters",value:function(t){var r,n,o;return n={leftBottom:{x:t.bounds.left,y:t.bounds.bottom},rightTop:{x:t.bounds.right,y:t.bounds.top}},o={datasetNames:t.datasetNames,getFeatureMode:e.getFeatureMode.BOUNDS,bounds:n,spatialQueryMode:t.spatialQueryMode},t.fields&&((r=new rs).name=t.datasetNames,r.fields=t.fields,o.queryParameter=r),t.attributeFilter&&(o.attributeFilter=t.attributeFilter,o.getFeatureMode=e.getFeatureMode.BOUNDS_ATTRIBUTEFILTER),t.maxFeatures&&!isNaN(t.maxFeatures)&&(o.maxFeatures=t.maxFeatures),"boolean"==typeof t.hasGeometry&&(o.hasGeometry=t.hasGeometry),t.targetEpsgCode&&(o.targetEpsgCode=t.targetEpsgCode),!t.targetEpsgCode&&t.targetPrj&&(o.targetPrj=t.targetPrj),t.aggregations&&(o.aggregations=t.aggregations),V.toJSON(o)}}],(n=[{key:"destroy",value:function(){Js(Ws(e.prototype),"destroy",this).call(this);var t=this;if(t.bounds&&(t.bounds.destroy(),t.bounds=null),t.fields){for(;t.fields.length>0;)t.fields.pop();t.fields=null}t.attributeFilter=null,t.spatialQueryMode=null,t.getFeatureMode=null}}])&&Vs(r.prototype,n),o&&Vs(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function Ys(t){"@babel/helpers - typeof";return(Ys="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xs(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Zs(n.key),n)}}function Zs(t){var e=function(t,e){if("object"!=Ys(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ys(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ys(e)?e:String(e)}function $s(t,e,r){return e=eu(e),function(t,e){if(e&&("object"===Ys(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],eu(t).constructor):e.apply(t,r))}function tu(){return(tu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=eu(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function eu(t){return(eu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ru(t,e){return(ru=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}Qs.getFeatureMode={BOUNDS:"BOUNDS",BOUNDS_ATTRIBUTEFILTER:"BOUNDS_ATTRIBUTEFILTER"};var nu=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=$s(this,e,[t,r])).CLASS_NAME="SuperMap.GetFeaturesByBoundsService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ru(t,e)}(e,Za),r=e,(n=[{key:"destroy",value:function(){tu(eu(e.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(t){return Qs.toJsonParameters(t)}}])&&Xs(r.prototype,n),o&&Xs(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function ou(t){"@babel/helpers - typeof";return(ou="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function iu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,au(n.key),n)}}function au(t){var e=function(t,e){if("object"!=ou(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ou(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ou(e)?e:String(e)}function su(t,e,r){return e=cu(e),function(t,e){if(e&&("object"===ou(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return uu(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],cu(t).constructor):e.apply(t,r))}function uu(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function lu(){return(lu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=cu(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function cu(t){return(cu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function fu(t,e){return(fu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var pu=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=su(this,e,[t])).bufferDistance=null,r.attributeFilter=null,r.geometry=null,r.fields=null,V.extend(uu(r),t),r.CLASS_NAME="SuperMap.GetFeaturesByBufferParameters",r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fu(t,e)}(e,as),r=e,o=[{key:"toJsonParameters",value:function(t){var e,r,n;return n=en.fromGeometry(t.geometry),r={datasetNames:t.datasetNames,getFeatureMode:"BUFFER",bufferDistance:t.bufferDistance,geometry:n},t.fields&&((e=new rs).name=t.datasetNames,e.fields=t.fields,r.queryParameter=e),t.attributeFilter&&(r.attributeFilter=t.attributeFilter,r.getFeatureMode="BUFFER_ATTRIBUTEFILTER"),t.maxFeatures&&!isNaN(t.maxFeatures)&&(r.maxFeatures=t.maxFeatures),"boolean"==typeof t.hasGeometry&&(r.hasGeometry=t.hasGeometry),t.targetEpsgCode&&(r.targetEpsgCode=t.targetEpsgCode),!t.targetEpsgCode&&t.targetPrj&&(r.targetPrj=t.targetPrj),V.toJSON(r)}}],(n=[{key:"destroy",value:function(){lu(cu(e.prototype),"destroy",this).call(this);var t=this;if(t.bufferDistance=null,t.attributeFilter=null,t.fields){for(;t.fields.length>0;)t.fields.pop();t.fields=null}t.geometry&&(t.geometry.destroy(),t.geometry=null)}}])&&iu(r.prototype,n),o&&iu(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function hu(t){"@babel/helpers - typeof";return(hu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,du(n.key),n)}}function du(t){var e=function(t,e){if("object"!=hu(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=hu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==hu(e)?e:String(e)}function bu(t,e,r){return e=mu(e),function(t,e){if(e&&("object"===hu(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],mu(t).constructor):e.apply(t,r))}function vu(){return(vu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=mu(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function mu(t){return(mu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function gu(t,e){return(gu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Su=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=bu(this,e,[t,r])).CLASS_NAME="SuperMap.GetFeaturesByBufferService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gu(t,e)}(e,Za),r=e,(n=[{key:"destroy",value:function(){vu(mu(e.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(t){return pu.toJsonParameters(t)}}])&&yu(r.prototype,n),o&&yu(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function wu(t){"@babel/helpers - typeof";return(wu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ou(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_u(n.key),n)}}function _u(t){var e=function(t,e){if("object"!=wu(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=wu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==wu(e)?e:String(e)}function Pu(t,e,r){return e=Tu(e),function(t,e){if(e&&("object"===wu(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Eu(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Tu(t).constructor):e.apply(t,r))}function Eu(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Cu(){return(Cu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Tu(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Tu(t){return(Tu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ju(t,e){return(ju=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var ku=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Pu(this,e,[t])).getFeatureMode="SPATIAL",r.geometry=null,r.fields=null,r.attributeFilter=null,r.spatialQueryMode=hr.CONTAIN,V.extend(Eu(r),t),r.CLASS_NAME="SuperMap.GetFeaturesByGeometryParameters",r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ju(t,e)}(e,as),r=e,o=[{key:"toJsonParameters",value:function(t){var e,r,n;return r=en.fromGeometry(t.geometry),n={datasetNames:t.datasetNames,getFeatureMode:"SPATIAL",geometry:r,spatialQueryMode:t.spatialQueryMode},t.fields&&((e=new rs).name=t.datasetNames,e.fields=t.fields,n.queryParameter=e),t.attributeFilter&&(n.attributeFilter=t.attributeFilter,n.getFeatureMode="SPATIAL_ATTRIBUTEFILTER"),t.maxFeatures&&!isNaN(t.maxFeatures)&&(n.maxFeatures=t.maxFeatures),"boolean"==typeof t.hasGeometry&&(n.hasGeometry=t.hasGeometry),t.targetEpsgCode&&(n.targetEpsgCode=t.targetEpsgCode),!t.targetEpsgCode&&t.targetPrj&&(n.targetPrj=t.targetPrj),t.aggregations&&(n.aggregations=t.aggregations),V.toJSON(n)}}],(n=[{key:"destroy",value:function(){Cu(Tu(e.prototype),"destroy",this).call(this);var t=this;if(t.geometry&&(t.geometry.destroy(),t.geometry=null),t.fields){for(;t.fields.length>0;)t.fields.pop();t.fields=null}t.attributeFilter=null,t.spatialQueryMode=null,t.getFeatureMode=null}}])&&Ou(r.prototype,n),o&&Ou(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function xu(t){"@babel/helpers - typeof";return(xu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Au(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Iu(n.key),n)}}function Iu(t){var e=function(t,e){if("object"!=xu(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=xu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==xu(e)?e:String(e)}function Nu(t,e,r){return e=Mu(e),function(t,e){if(e&&("object"===xu(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Mu(t).constructor):e.apply(t,r))}function Ru(){return(Ru="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Mu(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Mu(t){return(Mu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Lu(t,e){return(Lu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Bu=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Nu(this,e,[t,r])).CLASS_NAME="SuperMap.GetFeaturesByGeometryService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Lu(t,e)}(e,Za),r=e,(n=[{key:"destroy",value:function(){Ru(Mu(e.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(t){return ku.toJsonParameters(t)}}])&&Au(r.prototype,n),o&&Au(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function Du(t){"@babel/helpers - typeof";return(Du="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Uu(n.key),n)}}function Uu(t){var e=function(t,e){if("object"!=Du(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Du(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Du(e)?e:String(e)}var Gu=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.dataSourceName=null,this.dataSetName=null,this.featureId=null,V.extend(this,e),this.CLASS_NAME="SuperMap.AttachmentsParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.dataSourceName=null,this.dataSetName=null,this.featureId=null}}])&&Fu(e.prototype,r),n&&Fu(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Vu(t){"@babel/helpers - typeof";return(Vu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Hu(n.key),n)}}function Hu(t){var e=function(t,e){if("object"!=Vu(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Vu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Vu(e)?e:String(e)}function zu(t,e,r){return e=Ju(e),function(t,e){if(e&&("object"===Vu(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Wu(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Ju(t).constructor):e.apply(t,r))}function Ju(t){return(Ju=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Wu(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ku(t,e){return(Ku=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Qu=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=zu(this,e,[t])).file=null,r.IDs=null,r.editType=Nr.ADD,V.extend(Wu(r),t),r.CLASS_NAME="SuperMap.EditAttachmentsParameters",r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ku(t,e)}(e,Gu),r=e,(n=[{key:"destroy",value:function(){var t=this;t.dataSourceName=null,t.dataSetName=null,t.featureId=null,t.file=null,t.IDs=null,t.editType=null}}])&&qu(r.prototype,n),o&&qu(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function Yu(t){"@babel/helpers - typeof";return(Yu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Zu(n.key),n)}}function Zu(t){var e=function(t,e){if("object"!=Yu(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Yu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Yu(e)?e:String(e)}function $u(t,e,r){return e=rl(e),function(t,e){if(e&&("object"===Yu(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return tl(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],rl(t).constructor):e.apply(t,r))}function tl(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function el(){return(el="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=rl(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function rl(t){return(rl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function nl(t,e){return(nl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var ol=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=$u(this,e,[t,r]),r&&V.extend(tl(n),r),n.CLASS_NAME="SuperMap.FeatureAttachmentsService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nl(t,e)}(e,oo),r=e,(n=[{key:"destroy",value:function(){el(rl(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof Qu){V.extend(this,t);var r=this,n=t.editType;if(r.featureId=t.featureId,r.IDs=t.IDs,n===Nr.DELETE){if(!r.IDs||Array.isArray(r.IDs)&&0===r.IDs.length)return;r.method="DELETE";for(var o=[],i=0;i<r.IDs.length;i++){var a=V.urlPathAppend(r.url,"/features/".concat(r.featureId,"/attachments/").concat(r.IDs[i])),s=r.request({url:a,method:r.method,data:null,scope:r,success:null,failure:null});o.push(s)}return Promise.all(o).then(function(t){return e&&e(t),t})}if(t.file&&(t.file instanceof File||t.file instanceof Blob)){var u=new FormData;return u.append("file",t.file),r.method="POST",r.url=V.urlPathAppend(r.url,"/features/".concat(r.featureId,"/attachments")),r.request({method:r.method,data:u,scope:r,success:e,failure:e})}}}},{key:"getAttachments",value:function(t,e){if(t instanceof Gu){V.extend(this,t);var r=this;return r.method="GET",r.featureId=t.featureId,r.url=V.urlPathAppend(r.url,"/features/".concat(r.featureId,"/attachments")),r.request({method:r.method,data:null,scope:r,success:e,failure:e})}}}])&&Xu(r.prototype,n),o&&Xu(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function il(t){"@babel/helpers - typeof";return(il="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function al(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function sl(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?al(Object(r),!0).forEach(function(e){ul(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):al(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function ul(t,e,r){return(e=cl(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ll(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,cl(n.key),n)}}function cl(t){var e=function(t,e){if("object"!=il(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=il(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==il(e)?e:String(e)}var fl={id:_s,sql:Us,bounds:nu,buffer:Su,geometry:Bu},pl=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=e,this.options=r||{}}var e,r,n;return e=t,(r=[{key:"getFeaturesByIDs",value:function(t,e,r){var n=this;return new _s(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:r}).processAsync(t,e)}},{key:"getFeaturesByBounds",value:function(t,e,r){var n=this;return new nu(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"getFeaturesByBuffer",value:function(t,e,r){var n=this;return new Su(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"getFeaturesBySQL",value:function(t,e,r){var n=this;return new Us(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"getFeaturesByGeometry",value:function(t,e,r){var n=this;return new Bu(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"editFeatures",value:function(t,e){if(t&&t.dataSourceName&&t.dataSetName){var r=this,n=r.url,o=t.dataSourceName,i=t.dataSetName;return n=V.urlPathAppend(n,"datasources/"+o+"/datasets/"+i),new qa(n,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}}},{key:"getMetadata",value:function(t,e){var r=this,n=r.url,o=t.dataSourceName,i=t.dataSetName;return n=V.urlPathAppend(n,"datasources/"+o+"/datasets/"+i),new qa(n,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).getMetaData(t,e)}},{key:"getFeatureAttachments",value:function(t,e){if(t&&t.dataSourceName&&t.dataSetName&&null!=!t.featureId){var r=this,n=r.url,o=t.dataSourceName,i=t.dataSetName;return n=V.urlPathAppend(n,"datasources/"+o+"/datasets/"+i),new ol(n,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).getAttachments(t,e)}}},{key:"editFeatureAttachments",value:function(t,e){if(t&&t.dataSourceName&&t.dataSetName&&null!=!t.featureId&&t.editType){var r=this,n=r.url,o=t.dataSourceName,i=t.dataSetName;return n=V.urlPathAppend(n,"datasources/"+o+"/datasets/"+i),new ol(n,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}}},{key:"getFeaturesCount",value:function(t,e){var r=this,n=sl(sl({},t),{},{returnCountOnly:!0,returnContent:!0,returnFeaturesOnly:!1}),o=Object.keys(fl).find(function(t){return n.CLASS_NAME.toLowerCase().includes(t)});return new fl[o](r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(n,e)}},{key:"getFeaturesDatasetInfo",value:function(t,e){var r=this,n=sl(sl({},t),{},{returnDatasetInfoOnly:!0,returnContent:!0,returnFeaturesOnly:!1}),o=Object.keys(fl).find(function(t){return n.CLASS_NAME.toLowerCase().includes(t)});return new fl[o](r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(n,e)}},{key:"_processFormat",value:function(t){return t||lr.GEOJSON}}])&&ll(e.prototype,r),n&&ll(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function hl(t){"@babel/helpers - typeof";return(hl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yl(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,dl(n.key),n)}}function dl(t){var e=function(t,e){if("object"!=hl(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=hl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==hl(e)?e:String(e)}function bl(t,e,r){return e=vl(e),function(t,e){if(e&&("object"===hl(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],vl(t).constructor):e.apply(t,r))}function vl(t){return(vl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ml(t,e){return(ml=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var gl=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=bl(this,e,[t,r]))._featureService=new pl(t,r),n}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ml(t,e)}(e,An),r=e,(n=[{key:"getFeaturesByIDs",value:function(t,e,r){return t=this._processParams(t),this._featureService.getFeaturesByIDs(t,e,r)}},{key:"getFeaturesByBounds",value:function(t,e,r){return t=this._processParams(t),this._featureService.getFeaturesByBounds(t,e,r)}},{key:"getFeaturesByBuffer",value:function(t,e,r){return t=this._processParams(t),this._featureService.getFeaturesByBuffer(t,e,r)}},{key:"getFeaturesBySQL",value:function(t,e,r){return t=this._processParams(t),this._featureService.getFeaturesBySQL(t,e,r)}},{key:"getFeaturesByGeometry",value:function(t,e,r){return t=this._processParams(t),this._featureService.getFeaturesByGeometry(t,e,r)}},{key:"editFeatures",value:function(t,e){if(t&&t.dataSourceName&&t.dataSetName){var r=this,n=r.url,o=t.dataSourceName,i=t.dataSetName;return n=V.urlPathAppend(n,"datasources/"+o+"/datasets/"+i),new qa(n,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(r._processParams(t),e)}}},{key:"getMetadata",value:function(t,e){return this._featureService.getMetadata(t,e)}},{key:"getFeatureAttachments",value:function(t,e){return this._featureService.getFeatureAttachments(t,e)}},{key:"editFeatureAttachments",value:function(t,e){return this._featureService.editFeatureAttachments(t,e)}},{key:"getFeaturesCount",value:function(t,e){return t=this._processParams(t),this._featureService.getFeaturesCount(t,e)}},{key:"getFeaturesDatasetInfo",value:function(t,e){return t=this._processParams(t),this._featureService.getFeaturesDatasetInfo(t,e)}},{key:"_processParams",value:function(t){if(!t)return{};var e=this;if(t.returnContent=null==t.returnContent||t.returnContent,t.fromIndex=t.fromIndex?t.fromIndex:0,t.toIndex=0===t.toIndex?0:t.toIndex?t.toIndex:-1,t.bounds&&(t.bounds=hn.toSuperMapBounds(t.bounds)),t.editType&&(t.editType=t.editType.toLowerCase()),t.geometry&&(t.geometry instanceof o().LngLatBounds?(t.geometry=hn.toSuperMapPolygon(t.geometry),t.geometry.SRID=4326):t.geometry instanceof o().Point?t.geometry=new at(t.geometry.x,t.geometry.y):t.geometry instanceof o().LngLat?(t.geometry=new at(t.geometry.lng,t.geometry.lat),t.geometry.SRID=4326):t.geometry instanceof j||(t.geometry=hn.toSuperMapGeometry(t.geometry))),t.features){var r=[];hn.isArray(t.features)?t.features.map(function(t){return r.push(e._createServerFeature(t)),r}):r.push(e._createServerFeature(t.features)),t.features=r}return t}},{key:"_createServerFeature",value:function(t){if(t.toServerFeature)return t.toServerFeature({geometryFunction:function(t){return hn.toSuperMapGeometry(t)}});var e={},r=[],n=[],o=t.properties;for(var i in o)r.push(i),n.push(o[i]);return e.fieldNames=r,e.fieldValues=n,t.id&&(e.id=t.id),e.geometry=hn.toSuperMapGeometry(t),e}}])&&yl(r.prototype,n),i&&yl(r,i),Object.defineProperty(r,"prototype",{writable:!1}),e}();function Sl(t){"@babel/helpers - typeof";return(Sl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wl(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ol(n.key),n)}}function Ol(t){var e=function(t,e){if("object"!=Sl(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Sl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Sl(e)?e:String(e)}function _l(t,e,r){return e=Cl(e),function(t,e){if(e&&("object"===Sl(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Pl(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Cl(t).constructor):e.apply(t,r))}function Pl(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function El(){return(El="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Cl(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Cl(t){return(Cl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Tl(t,e){return(Tl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var jl=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=_l(this,e,[t,r])).datasource=null,n.dataset=null,r&&V.extend(Pl(n),r),n.CLASS_NAME="SuperMap.GetFieldsService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Tl(t,e)}(e,oo),r=e,(n=[{key:"destroy",value:function(){El(Cl(e.prototype),"destroy",this).call(this);this.datasource=null,this.dataset=null}},{key:"processAsync",value:function(t){var e=this;return e.url=V.urlPathAppend(e.url,"datasources/".concat(e.datasource,"/datasets/").concat(e.dataset,"/fields")),e.request({method:"GET",data:null,scope:e,success:t,failure:t})}}])&&wl(r.prototype,n),o&&wl(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function kl(t){"@babel/helpers - typeof";return(kl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xl(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Al(n.key),n)}}function Al(t){var e=function(t,e){if("object"!=kl(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=kl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==kl(e)?e:String(e)}var Il=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.datasource=null,this.dataset=null,e&&V.extend(this,e),this.CLASS_NAME="SuperMap.FieldParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.datasource=null,this.dataset=null}}])&&xl(e.prototype,r),n&&xl(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Nl(t){"@babel/helpers - typeof";return(Nl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Rl(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ml(n.key),n)}}function Ml(t){var e=function(t,e){if("object"!=Nl(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Nl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Nl(e)?e:String(e)}function Ll(t,e,r){return e=Bl(e),function(t,e){if(e&&("object"===Nl(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Dl(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Bl(t).constructor):e.apply(t,r))}function Bl(t){return(Bl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Dl(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Fl(t,e){return(Fl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Ul=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Ll(this,e,[t])).fieldName=null,r.statisticMode=null,t&&V.extend(Dl(r),t),r.CLASS_NAME="SuperMap.FieldStatisticsParameters",r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Fl(t,e)}(e,Il),r=e,(n=[{key:"destroy",value:function(){this.fieldName=null,this.statisticMode=null}}])&&Rl(r.prototype,n),o&&Rl(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function Gl(t){"@babel/helpers - typeof";return(Gl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vl(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ql(n.key),n)}}function ql(t){var e=function(t,e){if("object"!=Gl(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Gl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Gl(e)?e:String(e)}function Hl(t,e,r){return e=Wl(e),function(t,e){if(e&&("object"===Gl(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return zl(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Wl(t).constructor):e.apply(t,r))}function zl(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Jl(){return(Jl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Wl(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Wl(t){return(Wl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Kl(t,e){return(Kl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Ql=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Hl(this,e,[t,r])).datasource=null,n.dataset=null,n.field=null,n.statisticMode=null,r&&V.extend(zl(n),r),n.CLASS_NAME="SuperMap.FieldStatisticService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Kl(t,e)}(e,oo),r=e,(n=[{key:"destroy",value:function(){Jl(Wl(e.prototype),"destroy",this).call(this);this.datasource=null,this.dataset=null,this.field=null,this.statisticMode=null}},{key:"processAsync",value:function(t){var e=this,r="datasources/"+e.datasource+"/datasets/"+e.dataset+"/fields/"+e.field+"/"+e.statisticMode;return e.url=V.urlPathAppend(e.url,r),e.request({method:"GET",data:null,scope:e,success:t,failure:t})}}])&&Vl(r.prototype,n),o&&Vl(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function Yl(t){"@babel/helpers - typeof";return(Yl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xl(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Zl(n.key),n)}}function Zl(t){var e=function(t,e){if("object"!=Yl(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Yl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Yl(e)?e:String(e)}var $l=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=e,this.options=r||{}}var e,r,n;return e=t,(r=[{key:"getFields",value:function(t,e){var r=this;return new jl(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,datasource:t.datasource,dataset:t.dataset}).processAsync(e)}},{key:"getFieldStatisticsInfo",value:function(t,e){if(t instanceof Ul){var r=this,n=t.fieldName,o=t.statisticMode;o&&!Array.isArray(o)&&(o=[o]),r.currentStatisticResult={fieldName:n},r._statisticsCallback=e,o.forEach(function(e){r.currentStatisticResult[e]=null,r._fieldStatisticRequest(t.datasource,t.dataset,n,e)})}}},{key:"_fieldStatisticRequest",value:function(t,e,r,n){var o=this;new Ql(o.url,{datasource:t,dataset:e,field:r,statisticMode:n,crossOrigin:o.options.crossOrigin,headers:o.options.headers}).processAsync(o._processCompleted.bind(o))}},{key:"_processCompleted",value:function(t){var e=this;if(t.error)e._statisticsCallback(t);else{var r=!0,n=t.result;for(var o in this.currentStatisticResult&&null==e.currentStatisticResult[n.mode]&&(this.currentStatisticResult[n.mode]=n.result),e.currentStatisticResult)if(null==e.currentStatisticResult[o]){r=!1;break}r&&e._statisticsCallback({result:e.currentStatisticResult})}}}])&&Xl(e.prototype,r),n&&Xl(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function tc(t){"@babel/helpers - typeof";return(tc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ec(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,rc(n.key),n)}}function rc(t){var e=function(t,e){if("object"!=tc(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=tc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==tc(e)?e:String(e)}function nc(t,e,r){return e=oc(e),function(t,e){if(e&&("object"===tc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],oc(t).constructor):e.apply(t,r))}function oc(t){return(oc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ic(t,e){return(ic=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var ac=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=nc(this,e,[t,r]))._fieldService=new $l(t,r),n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ic(t,e)}(e,An),r=e,(n=[{key:"getFields",value:function(t,e){return this._fieldService.getFields(t,e)}},{key:"getFieldStatisticsInfo",value:function(t,e){return this._fieldService.getFieldStatisticsInfo(t,e)}}])&&ec(r.prototype,n),o&&ec(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function sc(t){"@babel/helpers - typeof";return(sc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function uc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,lc(n.key),n)}}function lc(t){var e=function(t,e){if("object"!=sc(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=sc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==sc(e)?e:String(e)}var cc=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.datasetName=null,this.dataSourceName=null,this.X=null,this.Y=null,this.bounds=null,V.extend(this,e),this.CLASS_NAME="SuperMap.GetGridCellInfosParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.datasetName=null,this.dataSourceName=null,this.X=null,this.Y=null}}])&&uc(e.prototype,r),n&&uc(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function fc(t){"@babel/helpers - typeof";return(fc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,hc(n.key),n)}}function hc(t){var e=function(t,e){if("object"!=fc(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=fc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==fc(e)?e:String(e)}function yc(t,e,r){return e=vc(e),function(t,e){if(e&&("object"===fc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return dc(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],vc(t).constructor):e.apply(t,r))}function dc(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bc(){return(bc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=vc(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function vc(t){return(vc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function mc(t,e){return(mc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var gc=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=yc(this,e,[t,r])).datasetName=null,n.dataSourceName=null,n.datasetType=null,n.X=null,n.Y=null,r&&V.extend(dc(n),r),n.CLASS_NAME="SuperMap.GetGridCellInfosService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mc(t,e)}(e,oo),r=e,(n=[{key:"destroy",value:function(){bc(vc(e.prototype),"destroy",this).call(this);var t=this;t.X=null,t.Y=null,t.datasetName=null,t.dataSourceName=null,t.datasetType=null}},{key:"processAsync",value:function(t,e){if(t instanceof cc){V.extend(this,t);var r=this;return r.url=V.urlPathAppend(r.url,"datasources/".concat(r.dataSourceName,"/datasets/").concat(r.datasetName)),r.request({method:"GET",data:null,scope:r,success:function(t){!e&&t.result||(t=t.result?t.result:t,r.getDatasetInfoCompleted(t,e))},failure:e}).then(function(t){var e=t.result;return e&&r.getDatasetInfoCompleted(e)})}}},{key:"getDatasetInfoCompleted",value:function(t,e){return t=V.transformResult(t),this.datasetType=t.datasetInfo.type,this.queryGridInfos(e)}},{key:"queryGridInfos",value:function(t){var e=this,r="GRID"===e.datasetType?"gridValue":"imageValue",n=e.bounds?r+"s":r,o=V.urlPathAppend(e.url,n),i="GET",a=null;return Array.isArray(e.bounds)?(i="POST",a=e.bounds):e.bounds?o=V.urlAppend(o,"bounds=".concat(encodeURIComponent(JSON.stringify(e.bounds)))):null!=e.X&&null!=e.Y&&(o=V.urlAppend(o,"x=".concat(e.X,"&y=").concat(e.Y))),e.request({url:o,method:i,data:a,scope:e,success:t,failure:t})}}])&&pc(r.prototype,n),o&&pc(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function Sc(t){"@babel/helpers - typeof";return(Sc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Oc(n.key),n)}}function Oc(t){var e=function(t,e){if("object"!=Sc(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Sc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Sc(e)?e:String(e)}function _c(t,e,r){return e=Pc(e),function(t,e){if(e&&("object"===Sc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Pc(t).constructor):e.apply(t,r))}function Pc(t){return(Pc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ec(t,e){return(Ec=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Cc=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=_c(this,e,[t,r]))._gridCellQueryService=new gc(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers}),n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ec(t,e)}(e,An),r=e,(n=[{key:"getGridCellInfos",value:function(t,e){return t?this._gridCellQueryService.processAsync(t,e):null}}])&&wc(r.prototype,n),o&&wc(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function Tc(t){"@babel/helpers - typeof";return(Tc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,kc(n.key),n)}}function kc(t){var e=function(t,e){if("object"!=Tc(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Tc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Tc(e)?e:String(e)}function xc(t,e,r){return e=Ac(e),function(t,e){if(e&&("object"===Tc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Ac(t).constructor):e.apply(t,r))}function Ac(t){return(Ac=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ic(t,e){return(Ic=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Nc=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=xc(this,e,[t,r=r||{}])).CLASS_NAME="SuperMap.GeoprocessingService",n.headers={},n.crossOrigin=!0,n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ic(t,e)}(e,oo),r=e,(n=[{key:"getTools",value:function(t){return this._processAsync({url:"".concat(this.url,"/list"),callback:t})}},{key:"getTool",value:function(t,e){return this._processAsync({url:"".concat(this.url,"/").concat(t),callback:e})}},{key:"execute",value:function(t,e,r,n){var o={parameter:e=e||null,environment:r=r||null};return this._processAsync({url:"".concat(this.url,"/").concat(t,"/execute"),executeParamter:o,callback:n})}},{key:"submitJob",value:function(t,e,r,n){e=e||null,r=r||null;var o=JSON.stringify({parameter:e,environments:r});return this._processAsync({url:"".concat(this.url,"/").concat(t,"/jobs"),method:"POST",callback:n,params:o})}},{key:"waitForJobCompletion",value:function(t,e,r,n){var o=this,i=setInterval(function(){o._processAsync({url:"".concat(o.url,"/").concat(e,"/jobs/").concat(t),callback:function(t){var e=t.result.state.runState;t.options.statusCallback&&t.options.statusCallback(e),-1!==["FINISHED","FAILED","CANCELED"].indexOf(e)&&(clearInterval(i),n(t))}})},r.interval)}},{key:"getJobInfo",value:function(t,e,r){return this._processAsync({url:"".concat(this.url,"/").concat(t,"/jobs/").concat(e),callback:r})}},{key:"cancelJob",value:function(t,e,r){return this._processAsync({url:"".concat(this.url,"/").concat(t,"/jobs/").concat(e,"/cancel"),callback:r})}},{key:"getJobs",value:function(t,e){var r="".concat(this.url,"/jobs");t&&"string"==typeof t?r="".concat(this.url,"/").concat(t,"/jobs"):e=t,this._processAsync({url:r,callback:e})}},{key:"getResults",value:function(t,e,r,n){var o="".concat(this.url,"/").concat(t,"/jobs/").concat(e,"/results");return r&&("string"==typeof r?o="".concat(o,"/").concat(r):n=r),this._processAsync({url:o,callback:n})}},{key:"_processAsync",value:function(t){var e=t.url,r=t.method,n=t.callback,o=t.paramter;return this.request({url:e,method:r||"GET",params:o,headers:{"Content-type":"application/json"},scope:this,success:n,failure:n})}}])&&jc(r.prototype,n),o&&jc(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function Rc(t){"@babel/helpers - typeof";return(Rc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Mc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Lc(n.key),n)}}function Lc(t){var e=function(t,e){if("object"!=Rc(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Rc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Rc(e)?e:String(e)}function Bc(t,e,r){return e=Dc(e),function(t,e){if(e&&("object"===Rc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Dc(t).constructor):e.apply(t,r))}function Dc(t){return(Dc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Fc(t,e){return(Fc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Uc=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Bc(this,e,[t,r])).headers={},n.crossOrigin=!0,n.withCredentials=!0,n.proxy=!0,n._geoprocessingJobsService=new Nc(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers}),n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Fc(t,e)}(e,An),r=e,(n=[{key:"getTools",value:function(t){return this._geoprocessingJobsService.getTools(t)}},{key:"getTool",value:function(t,e){return this._geoprocessingJobsService.getTool(t,e)}},{key:"execute",value:function(t,e,r,n){return this._geoprocessingJobsService.execute(t,e,r,n)}},{key:"submitJob",value:function(t,e,r,n){return this._geoprocessingJobsService.submitJob(t,e,r,n)}},{key:"waitForJobCompletion",value:function(t,e,r,n){return this._geoprocessingJobsService.waitForJobCompletion(t,e,r,n)}},{key:"getJobInfo",value:function(t,e,r){return this._geoprocessingJobsService.getJobInfo(t,e,r)}},{key:"cancelJob",value:function(t,e,r){return this._geoprocessingJobsService.cancelJob(t,e,r)}},{key:"getJobs",value:function(t,e){return this._geoprocessingJobsService.getJobs(t,e)}},{key:"getResults",value:function(t,e,r,n){return this._geoprocessingJobsService.getResults(t,e,r,n)}}])&&Mc(r.prototype,n),o&&Mc(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function Gc(t){"@babel/helpers - typeof";return(Gc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,qc(n.key),n)}}function qc(t){var e=function(t,e){if("object"!=Gc(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Gc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Gc(e)?e:String(e)}var Hc=function(){function t(e,r){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!e)return this;this.memoryData=null,this.type=e,r&&V.extend(this,r),this.CLASS_NAME="SuperMap.Theme"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.memoryData&&(this.memoryData.destroy(),this.memoryData=null),this.type=null}},{key:"toServerJSONObject",value:function(){}}])&&Vc(e.prototype,r),n&&Vc(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function zc(t){"@babel/helpers - typeof";return(zc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Wc(n.key),n)}}function Wc(t){var e=function(t,e){if("object"!=zc(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=zc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==zc(e)?e:String(e)}var Kc=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.align=_r.BASELINECENTER,this.backColor=new Ve(255,255,255),this.foreColor=new Ve(0,0,0),this.backOpaque=!1,this.sizeFixed=!0,this.fontHeight=6,this.fontWidth=0,this.fontWeight=400,this.fontName="Times New Roman",this.bold=!1,this.italic=!1,this.italicAngle=0,this.shadow=!1,this.strikeout=!1,this.outline=!1,this.opaqueRate=0,this.underline=!1,this.rotation=0,e&&V.extend(this,e),this.CLASS_NAME="SuperMap.ServerTextStyle"}var e,r,n;return e=t,n=[{key:"fromObj",value:function(e){var r=new t(e);return V.copy(r,e),r.backColor=Ve.fromJson(e.backColor),r.foreColor=Ve.fromJson(e.foreColor),r}}],(r=[{key:"destroy",value:function(){var t=this;t.align=null,t.backColor&&(t.backColor.destroy(),t.backColor=null),t.foreColor&&(t.foreColor.destroy(),t.foreColor=null),t.backOpaque=null,t.sizeFixed=null,t.fontHeight=null,t.fontWidth=null,t.fontWeight=null,t.fontName=null,t.bold=null,t.italic=null,t.italicAngle=null,t.shadow=null,t.strikeout=null,t.outline=null,t.opaqueRate=null,t.underline=null,t.rotation=null}}])&&Jc(e.prototype,r),n&&Jc(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Qc(t){"@babel/helpers - typeof";return(Qc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Xc(n.key),n)}}function Xc(t){var e=function(t,e){if("object"!=Qc(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Qc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Qc(e)?e:String(e)}var Zc=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.caption=null,this.end=0,this.start=0,this.visible=!0,this.style=new Kc,e&&V.extend(this,e),this.CLASS_NAME="SuperMap.ThemeLabelItem"}var e,r,n;return e=t,n=[{key:"fromObj",value:function(e){if(e){var r=new t;return V.copy(r,e),r}}}],(r=[{key:"destroy",value:function(){var t=this;t.caption=null,t.end=null,t.start=null,t.style&&(t.style.destroy(),t.style=null),t.visible=null}}])&&Yc(e.prototype,r),n&&Yc(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function $c(t){"@babel/helpers - typeof";return($c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tf(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ef(n.key),n)}}function ef(t){var e=function(t,e){if("object"!=$c(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=$c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==$c(e)?e:String(e)}var rf=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.caption=null,this.style=new Je,this.unique=null,this.visible=!0,e&&V.extend(this,e),this.CLASS_NAME="SuperMap.ThemeUniqueItem"}var e,r,n;return e=t,n=[{key:"fromObj",value:function(e){var r=new t;return V.copy(r,e),r.style=Je.fromJson(e.style),r}}],(r=[{key:"destroy",value:function(){var t=this;t.caption=null,t.unique=null,t.style&&(t.style.destroy(),t.style=null),t.visible=null}},{key:"toServerJSONObject",value:function(){var t={};return(t=V.copyAttributes(t,this)).style&&t.style.toServerJSONObject&&(t.style=t.style.toServerJSONObject()),t}}])&&tf(e.prototype,r),n&&tf(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function nf(t){"@babel/helpers - typeof";return(nf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function of(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,af(n.key),n)}}function af(t){var e=function(t,e){if("object"!=nf(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=nf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==nf(e)?e:String(e)}var sf=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.offsetFixed=!1,this.offsetX="0.0",this.offsetY="0.0",e&&V.extend(this,e),this.CLASS_NAME="SuperMap.ThemeOffset"}var e,r,n;return e=t,n=[{key:"fromObj",value:function(e){if(e){var r=new t;return V.copy(r,e),r}}}],(r=[{key:"destroy",value:function(){this.offsetFixed=null,this.offsetX=null,this.offsetY=null}}])&&of(e.prototype,r),n&&of(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function uf(t){"@babel/helpers - typeof";return(uf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lf(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,cf(n.key),n)}}function cf(t){var e=function(t,e){if("object"!=uf(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=uf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==uf(e)?e:String(e)}var ff=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.defaultStyle=null,this.separator=null,this.separatorEnabled=!1,this.splitIndexes=null,this.styles=new Kc,e&&V.extend(this,e),this.CLASS_NAME="SuperMap.LabelMixedTextStyle"}var e,r,n;return e=t,n=[{key:"fromObj",value:function(e){if(e){var r=new t,n=e.styles;if(V.copy(r,e),r.defaultStyle=new Kc(e.defaultStyle),n){r.styles=[];for(var o=0,i=n.length;o<i;o++)r.styles.push(new Kc(n[o]))}return r}}}],(r=[{key:"destroy",value:function(){var t=this;if(t.defaultStyle&&(t.defaultStyle.destroy(),t.defaultStyle=null),t.separator=null,t.separatorEnabled=null,t.splitIndexes&&(t.splitIndexes=null),t.styles){for(var e=0,r=t.styles,n=r.length;e<n;e++)r[e].destroy();t.styles=null}}}])&&lf(e.prototype,r),n&&lf(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function pf(t){"@babel/helpers - typeof";return(pf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hf(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,yf(n.key),n)}}function yf(t){var e=function(t,e){if("object"!=pf(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=pf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==pf(e)?e:String(e)}var df=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.maxTextHeight=0,this.maxTextWidth=0,this.minTextHeight=0,this.minTextWidth=0,this.uniformStyle=new Kc,this.uniformMixedStyle=null,e&&V.extend(this,e),this.CLASS_NAME="SuperMap.ThemeLabelText"}var e,r,n;return e=t,n=[{key:"fromObj",value:function(e){if(e){var r=new t;return V.copy(r,e),r.uniformStyle=Kc.fromObj(e.uniformStyle),r.uniformMixedStyle=ff.fromObj(e.uniformMixedStyle),r}}}],(r=[{key:"destroy",value:function(){var t=this;t.maxTextHeight=null,t.maxTextWidth=null,t.minTextHeight=null,t.minTextWidth=null,t.uniformStyle&&(t.uniformStyle.destroy(),t.uniformStyle=null),t.uniformMixedStyle&&(t.uniformMixedStyle.destroy(),t.uniformMixedStyle=null)}}])&&hf(e.prototype,r),n&&hf(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function bf(t){"@babel/helpers - typeof";return(bf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vf(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,mf(n.key),n)}}function mf(t){var e=function(t,e){if("object"!=bf(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=bf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==bf(e)?e:String(e)}var gf=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.isAlongLine=!0,this.alongLineDirection=Pr.LB_TO_RT,this.angleFixed=!1,this.repeatedLabelAvoided=!1,this.repeatIntervalFixed=!1,this.labelRepeatInterval=0,e&&V.extend(this,e),this.CLASS_NAME="SuperMap.ThemeLabelAlongLine"}var e,r,n;return e=t,n=[{key:"fromObj",value:function(e){if(e){var r=new t;return V.copy(r,e),r}}}],(r=[{key:"destroy",value:function(){var t=this;t.isAlongLine=null,t.alongLineDirection=null,t.angleFixed=null,t.repeatedLabelAvoided=null,t.repeatIntervalFixed=null,t.labelRepeatInterval=null}}])&&vf(e.prototype,r),n&&vf(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Sf(t){"@babel/helpers - typeof";return(Sf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wf(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Of(n.key),n)}}function Of(t){var e=function(t,e){if("object"!=Sf(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Sf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Sf(e)?e:String(e)}var _f=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.labelBackShape=Er.NONE,this.backStyle=new Je,e&&V.extend(this,e),this.CLASS_NAME="SuperMap.ThemeLabelBackground"}var e,r,n;return e=t,n=[{key:"fromObj",value:function(e){if(e){var r=new t;return r.labelBackShape=e.labelBackShape,r.backStyle=Je.fromJson(e.backStyle),r}}}],(r=[{key:"destroy",value:function(){this.labelBackShape=null,this.backStyle&&(this.backStyle.destroy(),this.backStyle=null)}}])&&wf(e.prototype,r),n&&wf(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Pf(t){"@babel/helpers - typeof";return(Pf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ef(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Cf(n.key),n)}}function Cf(t){var e=function(t,e){if("object"!=Pf(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Pf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Pf(e)?e:String(e)}function Tf(t,e,r){return e=xf(e),function(t,e){if(e&&("object"===Pf(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return jf(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],xf(t).constructor):e.apply(t,r))}function jf(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function kf(){return(kf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=xf(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function xf(t){return(xf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Af(t,e){return(Af=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var If=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Tf(this,e,["LABEL",t])).alongLine=new gf,r.background=new _f,r.items=null,r.uniqueItems=null,r.labelExpression=null,r.labelOverLengthMode=Cr.NONE,r.matrixCells=null,r.maxLabelLength=256,r.numericPrecision=0,r.offset=new sf,r.overlapAvoided=!0,r.rangeExpression=null,r.uniqueExpression=null,r.smallGeometryLabeled=!1,r.text=new df,r.textSpace=0,t&&V.extend(jf(r),t),r.CLASS_NAME="SuperMap.ThemeLabel",r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Af(t,e)}(e,Hc),r=e,o=[{key:"fromObj",value:function(t){if(t){var r=new e,n=t.items,o=t.uniqueItems,i=t.matrixCells;if(t.matrixCells=null,V.copy(r,t),r.alongLine=gf.fromObj(t),r.background=_f.fromObj(t),n){r.items=[];for(var a=0,s=n.length;a<s;a++)r.items.push(Zc.fromObj(n[a]))}if(o){r.uniqueItems=[];for(var u=0,l=o.length;u<l;u++)r.uniqueItems.push(rf.fromObj(o[u]))}if(i){r.matrixCells=[];for(var c=0,f=i.length;c<f;c++);}return r.offset=sf.fromObj(t),r.text=df.fromObj(t),r}}}],(n=[{key:"destroy",value:function(){kf(xf(e.prototype),"destroy",this).call(this);var t=this;if(t.alongLine=null,t.background&&(t.background.destroy(),t.background=null),t.items){for(var r=0,n=t.items,o=n.length;r<o;r++)n[r].destroy();t.items=null}if(t.uniqueItems){for(var i=0,a=t.uniqueItems,s=a.length;i<s;i++)a[i].destory();t.uniqueItems=null}t.labelExpression=null,t.labelOverLengthMode=null,t.matrixCells=null,t.maxLabelLength=null,t.numericPrecision=null,t.overlapAvoided=null,t.rangeExpression=null,t.uniqueExpression=null,t.offset&&(t.offset.destroy(),t.offset=null),t.overlapAvoided=null,t.smallGeometryLabeled=null,t.text&&(t.text.destroy(),t.text=null),t.textSpace=null}},{key:"toJSON",value:function(){return V.toJSON(this.toServerJSONObject())}},{key:"toServerJSONObject",value:function(){var t={};return t.type=this.type,t.memoryData=this.memoryData,this.alongLine&&(t.alongLine=this.alongLine.isAlongLine,t.alongLineDirection=this.alongLine.alongLineDirection,t.angleFixed=this.alongLine.angleFixed,t.isLabelRepeated=this.alongLine.isLabelRepeated,t.labelRepeatInterval=this.alongLine.labelRepeatInterval,t.repeatedLabelAvoided=this.alongLine.repeatedLabelAvoided,t.repeatIntervalFixed=this.alongLine.repeatIntervalFixed),this.offset&&(t.offsetFixed=this.offset.offsetFixed,t.offsetX=this.offset.offsetX,t.offsetY=this.offset.offsetY),this.text&&(t.maxTextHeight=this.text.maxTextHeight,t.maxTextWidth=this.text.maxTextWidth,t.minTextHeight=this.text.minTextHeight,t.minTextWidth=this.text.minTextWidth,t.uniformStyle=this.text.uniformStyle,t.uniformMixedStyle=this.text.uniformMixedStyle),this.background&&(t.labelBackShape=this.background.labelBackShape,t.backStyle=this.background.backStyle),t.labelOverLengthMode=this.labelOverLengthMode,t.maxLabelLength=this.maxLabelLength,t.smallGeometryLabeled=this.smallGeometryLabeled,t.rangeExpression=this.rangeExpression,t.uniqueExpression=this.uniqueExpression,t.numericPrecision=this.numericPrecision,t.items=this.items,t.uniqueItems=this.uniqueItems,t.labelExpression=this.labelExpression,t.overlapAvoided=this.overlapAvoided,t.matrixCells=this.matrixCells,t.textSpace=this.textSpace,t}}])&&Ef(r.prototype,n),o&&Ef(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function Nf(t){"@babel/helpers - typeof";return(Nf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Rf(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Mf(n.key),n)}}function Mf(t){var e=function(t,e){if("object"!=Nf(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Nf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Nf(e)?e:String(e)}function Lf(t,e,r){return e=Ff(e),function(t,e){if(e&&("object"===Nf(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Bf(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Ff(t).constructor):e.apply(t,r))}function Bf(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Df(){return(Df="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ff(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Ff(t){return(Ff=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Uf(t,e){return(Uf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Gf=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Lf(this,e,["UNIQUE",t])).defaultStyle=new Je,r.items=null,r.uniqueExpression=null,r.colorGradientType=Or.YELLOW_RED,t&&V.extend(Bf(r),t),r.CLASS_NAME="SuperMap.ThemeUnique",r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Uf(t,e)}(e,Hc),r=e,o=[{key:"fromObj",value:function(t){var r=new e,n=t.items,o=n?n.length:0;V.extend(r,t),r.items=[],r.defaultStyle=Je.fromJson(t.defaultStyle);for(var i=0;i<o;i++)r.items.push(rf.fromObj(n[i]));return r}}],(n=[{key:"destroy",value:function(){Df(Ff(e.prototype),"destroy",this).call(this);var t=this;if(t.uniqueExpression=null,t.colorGradientType=null,t.items){if(t.items.length>0)for(var r in t.items)t.items[r].destroy(),t.items[r]=null;t.items=null}t.defaultStyle&&(t.defaultStyle.destroy(),t.defaultStyle=null)}},{key:"toServerJSONObject",value:function(){var t={};if((t=V.copyAttributes(t,this)).defaultStyle&&t.defaultStyle.toServerJSONObject&&(t.defaultStyle=t.defaultStyle.toServerJSONObject()),t.items){for(var e=[],r=t.items.length,n=0;n<r;n++)e.push(t.items[n].toServerJSONObject());t.items=e}return t}}])&&Rf(r.prototype,n),o&&Rf(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function Vf(t){"@babel/helpers - typeof";return(Vf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qf(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Hf(n.key),n)}}function Hf(t){var e=function(t,e){if("object"!=Vf(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Vf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Vf(e)?e:String(e)}var zf=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.axesColor=new Ve(0,0,0),this.axesDisplayed=!1,this.axesGridDisplayed=!1,this.axesTextDisplayed=!1,this.axesTextStyle=new Kc,e&&V.extend(this,e),this.CLASS_NAME="SuperMap.ThemeGraphAxes"}var e,r,n;return e=t,n=[{key:"fromObj",value:function(e){if(e){var r=new t;return V.copy(r,e),r.axesColor=Ve.fromJson(e.axesColor),r.axesTextStyle=Kc.fromObj(e.axesTextStyle),r}}}],(r=[{key:"destroy",value:function(){var t=this;t.axesColor&&(t.axesColor.destroy(),t.axesColor=null),t.axesDisplayed=null,t.axesGridDisplayed=null,t.axesTextDisplayed=null,t.axesTextStyle&&(t.axesTextStyle.destroy(),t.axesTextStyle=null)}}])&&qf(e.prototype,r),n&&qf(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Jf(t){"@babel/helpers - typeof";return(Jf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wf(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Kf(n.key),n)}}function Kf(t){var e=function(t,e){if("object"!=Jf(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Jf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Jf(e)?e:String(e)}var Qf=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.maxGraphSize=0,this.minGraphSize=0,e&&V.extend(this,e),this.CLASS_NAME="SuperMap.ThemeGraphSize"}var e,r,n;return e=t,n=[{key:"fromObj",value:function(e){var r=new t;return V.copy(r,e),r}}],(r=[{key:"destroy",value:function(){this.maxGraphSize=null,this.minGraphSize=null}}])&&Wf(e.prototype,r),n&&Wf(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Yf(t){"@babel/helpers - typeof";return(Yf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xf(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Zf(n.key),n)}}function Zf(t){var e=function(t,e){if("object"!=Yf(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Yf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Yf(e)?e:String(e)}var $f=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.graphTextDisplayed=!1,this.graphTextFormat=vr.CAPTION,this.graphTextStyle=new Kc,e&&V.extend(this,e),this.CLASS_NAME="SuperMap.ThemeGraphText"}var e,r,n;return e=t,n=[{key:"fromObj",value:function(e){var r=new t;return V.copy(r,e),r.graphTextStyle=Kc.fromObj(e.graphTextStyle),r}}],(r=[{key:"destroy",value:function(){var t=this;t.graphTextDisplayed=null,t.graphTextFormat=null,t.graphTextStyle&&(t.graphTextStyle.destroy(),t.graphTextStyle=null)}}])&&Xf(e.prototype,r),n&&Xf(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function tp(t){"@babel/helpers - typeof";return(tp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ep(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,rp(n.key),n)}}function rp(t){var e=function(t,e){if("object"!=tp(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=tp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==tp(e)?e:String(e)}var np=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.caption=null,this.graphExpression=null,this.memoryDoubleValues=null,this.uniformStyle=new Je,e&&V.extend(this,e),this.CLASS_NAME="SuperMap.ThemeGraphItem"}var e,r,n;return e=t,n=[{key:"fromObj",value:function(e){if(e){var r=new t;return V.copy(r,e),r.uniformStyle=Je.fromJson(e.uniformStyle),r}}}],(r=[{key:"destroy",value:function(){this.caption=null,this.graphExpression=null,this.memoryDoubleValues=null,this.uniformStyle=null}}])&&ep(e.prototype,r),n&&ep(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function op(t){"@babel/helpers - typeof";return(op="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ip(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ap(n.key),n)}}function ap(t){var e=function(t,e){if("object"!=op(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=op(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==op(e)?e:String(e)}function sp(t,e,r){return e=cp(e),function(t,e){if(e&&("object"===op(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return up(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],cp(t).constructor):e.apply(t,r))}function up(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function lp(){return(lp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=cp(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function cp(t){return(cp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function fp(t,e){return(fp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var pp=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=sp(this,e,["GRAPH",t])).barWidth=0,r.graduatedMode=Sr.CONSTANT,r.graphAxes=new zf,r.graphSize=new Qf,r.graphSizeFixed=!1,r.graphText=new $f,r.graphType=mr.AREA,r.graphAxesTextDisplayMode=gr.NONE,r.items=null,r.memoryKeys=null,r.negativeDisplayed=!1,r.offset=new sf,r.overlapAvoided=!0,r.roseAngle=0,r.startAngle=0,t&&V.extend(up(r),t),r.CLASS_NAME="SuperMap.ThemeGraph",r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fp(t,e)}(e,Hc),r=e,o=[{key:"fromObj",value:function(t){var r=new e,n=t.items,o=n?n.length:0;V.copy(r,t),r.items=[],r.graphAxes=zf.fromObj(t),r.graphSize=Qf.fromObj(t),r.graphText=$f.fromObj(t),r.offset=sf.fromObj(t);for(var i=0;i<o;i++)r.items.push(np.fromObj(n[i]));return r}}],(n=[{key:"destroy",value:function(){lp(cp(e.prototype),"destroy",this).call(this);var t=this;if(t.barWidth=null,t.graduatedMode=null,t.graphAxes&&(t.graphAxes.destroy(),t.graphAxes=null),t.graphSize&&(t.graphSize.destroy(),t.graphSize=null),t.graphSizeFixed=null,t.graphText&&(t.graphText.destroy(),t.graphText=null),t.graphType=null,t.items){for(var r=0,n=t.items,o=n.length;r<o;r++)n[r].destroy();t.items=null}t.memoryKeys=null,t.negativeDisplayed=null,t.offset&&(t.offset.destroy(),t.offset=null),t.overlapAvoided=null,t.roseAngle=null,t.startAngle=null,t.graphAxesTextDisplayMode=null}},{key:"toJSON",value:function(){return V.toJSON(this.toServerJSONObject())}},{key:"toServerJSONObject",value:function(){var t={};return t.type=this.type,this.graphText&&(t.graphTextDisplayed=this.graphText.graphTextDisplayed,t.graphTextFormat=this.graphText.graphTextFormat,t.graphTextStyle=this.graphText.graphTextStyle),this.graphAxes&&(t.axesColor=this.graphAxes.axesColor,t.axesDisplayed=this.graphAxes.axesDisplayed,t.axesGridDisplayed=this.graphAxes.axesGridDisplayed,t.axesTextDisplayed=this.graphAxes.axesTextDisplayed,t.axesTextStyle=this.graphAxes.axesTextStyle),this.graphSize&&(t.maxGraphSize=this.graphSize.maxGraphSize,t.minGraphSize=this.graphSize.minGraphSize),this.offset&&(t.offsetFixed=this.offset.offsetFixed,t.offsetX=this.offset.offsetX,t.offsetY=this.offset.offsetY),t.barWidth=this.barWidth,t.graduatedMode=this.graduatedMode,t.graphSizeFixed=this.graphSizeFixed,t.graphType=this.graphType,t.graphAxesTextDisplayMode=this.graphAxesTextDisplayMode,t.items=this.items,t.memoryKeys=this.memoryKeys,t.negativeDisplayed=this.negativeDisplayed,t.overlapAvoided=this.overlapAvoided,t.roseAngle=this.roseAngle,t.startAngle=this.startAngle,t}}])&&ip(r.prototype,n),o&&ip(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function hp(t){"@babel/helpers - typeof";return(hp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yp(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,dp(n.key),n)}}function dp(t){var e=function(t,e){if("object"!=hp(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=hp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==hp(e)?e:String(e)}function bp(t,e,r){return e=vp(e),function(t,e){if(e&&("object"===hp(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return mp(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],vp(t).constructor):e.apply(t,r))}function vp(t){return(vp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function mp(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gp(t,e){return(gp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Sp=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=bp(this,e,["DOTDENSITY",t])).dotExpression=null,r.style=new Je,r.value=null,t&&V.extend(mp(r),t),r.CLASS_NAME="SuperMap.ThemeDotDensity",r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gp(t,e)}(e,Hc),r=e,o=[{key:"fromObj",value:function(t){if(t){var r=new e;return V.copy(r,t),r.style=Je.fromJson(t.style),r}}}],(n=[{key:"destroy",value:function(){var t=this;t.dotExpression=null,t.value=null,t.style&&(t.style.destroy(),t.style=null)}},{key:"toServerJSONObject",value:function(){var t={};return(t=V.copyAttributes(t,this)).style&&t.style.toServerJSONObject&&(t.style=t.style.toServerJSONObject()),t}}])&&yp(r.prototype,n),o&&yp(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function wp(t){"@babel/helpers - typeof";return(wp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Op(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_p(n.key),n)}}function _p(t){var e=function(t,e){if("object"!=wp(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=wp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==wp(e)?e:String(e)}var Pp=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.negativeDisplayed=!1,this.negativeStyle=new Je,this.positiveStyle=new Je,this.zeroDisplayed=!1,this.zeroStyle=new Je,e&&V.extend(this,e),this.CLASS_NAME="SuperMap.ThemeGraduatedSymbolStyle"}var e,r,n;return e=t,n=[{key:"fromObj",value:function(e){if(e){var r=new t;return V.copy(r,e),r.negativeStyle=Je.fromJson(e.negativeStyle),r.positiveStyle=Je.fromJson(e.positiveStyle),r.zeroStyle=Je.fromJson(e.zeroStyle),r}}}],(r=[{key:"destroy",value:function(){var t=this;t.negativeDisplayed=null,t.negativeStyle=null,t.positiveStyle=null,t.zeroDisplayed=null,t.zeroStyle=null}}])&&Op(e.prototype,r),n&&Op(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ep(t){"@babel/helpers - typeof";return(Ep="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Cp(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Tp(n.key),n)}}function Tp(t){var e=function(t,e){if("object"!=Ep(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ep(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ep(e)?e:String(e)}function jp(t,e,r){return e=Ap(e),function(t,e){if(e&&("object"===Ep(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return kp(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Ap(t).constructor):e.apply(t,r))}function kp(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xp(){return(xp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ap(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Ap(t){return(Ap=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ip(t,e){return(Ip=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Np=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=jp(this,e,["GRADUATEDSYMBOL",t])).baseValue=0,r.expression=null,r.graduatedMode=Sr.CONSTAN,r.offset=new sf,r.style=new Pp,t&&V.extend(kp(r),t),r.CLASS_NAME="SuperMap.ThemeGraduatedSymbol",r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ip(t,e)}(e,Hc),r=e,o=[{key:"fromObj",value:function(t){if(t){var r=new e;return V.copy(r,t),r.offset=sf.fromObj(t),r.style=Pp.fromObj(t),r}}}],(n=[{key:"destroy",value:function(){xp(Ap(e.prototype),"destroy",this).call(this);var t=this;t.expression=null,t.graduatedMode=Sr.CONSTANT,t.offset&&(t.offset.destroy(),t.offset=null),t.style&&(t.style.destroy(),t.style=null)}},{key:"toJSON",value:function(){return V.toJSON(this.toServerJSONObject())}},{key:"toServerJSONObject",value:function(){var t={};return t.type=this.type,t.memoryData=this.memoryData,t.baseValue=this.baseValue,t.expression=this.expression,t.graduatedMode=this.graduatedMode,this.offset&&(t.offsetFixed=this.offset.offsetFixed,t.offsetX=this.offset.offsetX,t.offsetY=this.offset.offsetY),this.style&&(t.negativeStyle=this.style.negativeStyle,t.negativeDisplayed=this.style.negativeDisplayed,t.positiveStyle=this.style.positiveStyle,t.zeroDisplayed=this.style.zeroDisplayed,t.zeroStyle=this.style.zeroStyle),t}}])&&Cp(r.prototype,n),o&&Cp(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function Rp(t){"@babel/helpers - typeof";return(Rp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Mp(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Lp(n.key),n)}}function Lp(t){var e=function(t,e){if("object"!=Rp(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Rp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Rp(e)?e:String(e)}var Bp=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.caption=null,this.end=0,this.start=0,this.style=new Je,this.visible=!0,e&&V.extend(this,e),this.CLASS_NAME="SuperMap.ThemeRangeItem"}var e,r,n;return e=t,n=[{key:"fromObj",value:function(e){if(e){var r=new t;return V.copy(r,e),r.style=Je.fromJson(e.style),r}}}],(r=[{key:"destroy",value:function(){var t=this;t.caption=null,t.end=null,t.start=null,t.style&&(t.style.destroy(),t.style=null),t.visible=null}},{key:"toServerJSONObject",value:function(){var t={};return(t=V.copyAttributes(t,this)).style&&t.style.toServerJSONObject&&(t.style=t.style.toServerJSONObject()),t}}])&&Mp(e.prototype,r),n&&Mp(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Dp(t){"@babel/helpers - typeof";return(Dp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fp(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Up(n.key),n)}}function Up(t){var e=function(t,e){if("object"!=Dp(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Dp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Dp(e)?e:String(e)}function Gp(t,e,r){return e=Hp(e),function(t,e){if(e&&("object"===Dp(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Vp(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Hp(t).constructor):e.apply(t,r))}function Vp(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qp(){return(qp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Hp(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Hp(t){return(Hp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function zp(t,e){return(zp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Jp=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Gp(this,e,["RANGE",t])).precision="1.0E-12",r.items=null,r.rangeExpression=null,r.rangeMode=wr.EQUALINTERVAL,r.rangeParameter=0,r.colorGradientType=Or.YELLOW_RED,t&&V.extend(Vp(r),t),r.CLASS_NAME="SuperMap.ThemeRange",r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zp(t,e)}(e,Hc),r=e,o=[{key:"fromObj",value:function(t){if(t){var r=new e;V.copy(r,t);var n=t.items,o=n?n.length:0;r.items=[];for(var i=0;i<o;i++)r.items.push(Bp.fromObj(n[i]));return r}}}],(n=[{key:"destroy",value:function(){qp(Hp(e.prototype),"destroy",this).call(this);var t=this;if(t.items){if(t.items.length>0)for(var r in t.items)t.items[r].destroy(),t.items[r]=null;t.items=null}t.rangeExpression=null,t.rangeMode=null,t.rangeParameter=null,t.colorGradientType=null}}])&&Fp(r.prototype,n),o&&Fp(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function Wp(t){"@babel/helpers - typeof";return(Wp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Kp(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Qp(n.key),n)}}function Qp(t){var e=function(t,e){if("object"!=Wp(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Wp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Wp(e)?e:String(e)}var Yp=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.bounds=null,this.caption=null,this.description=null,this.name=null,this.queryable=null,this.subLayers=null,this.type=null,this.visible=null,V.extend(this,e),this.CLASS_NAME="SuperMap.UGCLayer"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){V.reset(this)}},{key:"fromJson",value:function(t){t=t||{},V.extend(this,t);var e=this.bounds;e&&(this.bounds=new Z(e.leftBottom.x,e.leftBottom.y,e.rightTop.x,e.rightTop.y))}},{key:"toServerJSONObject",value:function(){var t={};return(t=V.copyAttributes(t,this)).bounds&&t.bounds.toServerJSONObject&&(t.bounds=t.bounds.toServerJSONObject()),t}}])&&Kp(e.prototype,r),n&&Kp(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Xp(t){"@babel/helpers - typeof";return(Xp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zp(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,$p(n.key),n)}}function $p(t){var e=function(t,e){if("object"!=Xp(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Xp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Xp(e)?e:String(e)}function th(t,e,r){return e=rh(e),function(t,e){if(e&&("object"===Xp(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],rh(t).constructor):e.apply(t,r))}function eh(){return(eh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=rh(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function rh(t){return(rh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function nh(t,e){return(nh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var oh=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=th(this,e,[t=t||{}])).completeLineSymbolDisplayed=null,r.maxScale=null,r.minScale=null,r.minVisibleGeometrySize=null,r.opaqueRate=null,r.symbolScalable=null,r.symbolScale=null,r.overlapDisplayed=null,r.overlapDisplayedOptions=null,r.CLASS_NAME="SuperMap.UGCMapLayer",r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nh(t,e)}(e,Yp),r=e,(n=[{key:"destroy",value:function(){eh(rh(e.prototype),"destroy",this).call(this),V.reset(this)}},{key:"fromJson",value:function(t){eh(rh(e.prototype),"fromJson",this).call(this,t)}},{key:"toServerJSONObject",value:function(){return eh(rh(e.prototype),"toServerJSONObject",this).call(this)}}])&&Zp(r.prototype,n),o&&Zp(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function ih(t){"@babel/helpers - typeof";return(ih="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ah(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,sh(n.key),n)}}function sh(t){var e=function(t,e){if("object"!=ih(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ih(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ih(e)?e:String(e)}var uh=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.foreignTableName=null,this.joinFilter=null,this.joinType=null,e&&V.extend(this,e),this.CLASS_NAME="SuperMap.JoinItem"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.foreignTableName=null,this.joinFilter=null,this.joinType=null}},{key:"toServerJSONObject",value:function(){var t={};return t=V.copyAttributes(t,this)}}])&&ah(e.prototype,r),n&&ah(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function lh(t){"@babel/helpers - typeof";return(lh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ch(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,fh(n.key),n)}}function fh(t){var e=function(t,e){if("object"!=lh(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=lh(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==lh(e)?e:String(e)}var ph=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.bounds=null,this.dataSourceName=null,this.description=null,this.encodeType=null,this.isReadOnly=null,this.name=null,this.prjCoordSys=null,this.tableName=null,this.type=null,V.extend(this,e);var r=this.bounds;r&&(this.bounds=new Z(r.leftBottom.x,r.leftBottom.y,r.rightTop.x,r.rightTop.y)),this.CLASS_NAME="SuperMap.DatasetInfo"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){V.reset(this)}},{key:"toServerJSONObject",value:function(){var t={};return(t=V.copyAttributes(t,this)).bounds&&t.bounds.toServerJSONObject&&(t.bounds=t.bounds.toServerJSONObject()),t}}])&&ch(e.prototype,r),n&&ch(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function hh(t){"@babel/helpers - typeof";return(hh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yh(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,dh(n.key),n)}}function dh(t){var e=function(t,e){if("object"!=hh(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=hh(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==hh(e)?e:String(e)}function bh(t,e,r){return e=mh(e),function(t,e){if(e&&("object"===hh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],mh(t).constructor):e.apply(t,r))}function vh(){return(vh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=mh(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function mh(t){return(mh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function gh(t,e){return(gh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Sh=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=bh(this,e,[t=t||{}])).datasetInfo=null,r.displayFilter=null,r.joinItems=null,r.representationField=null,r.ugcLayerType=null,r.CLASS_NAME="SuperMap.UGCSubLayer",r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gh(t,e)}(e,oh),r=e,(n=[{key:"fromJson",value:function(t){if(vh(mh(e.prototype),"fromJson",this).call(this,t),this.datasetInfo&&(this.datasetInfo=new ph(this.datasetInfo)),this.joinItems&&this.joinItems.length){for(var r=[],n=0;n<this.joinItems.length;n++)r[n]=new uh(this.joinItems[n]);this.joinItems=r}}},{key:"destroy",value:function(){vh(mh(e.prototype),"destroy",this).call(this),V.reset(this)}},{key:"toServerJSONObject",value:function(){var t=vh(mh(e.prototype),"toServerJSONObject",this).call(this);if(t.joinItems){for(var r=[],n=0;n<t.joinItems.length;n++)t.joinItems[n].toServerJSONObject&&(r[n]=t.joinItems[n].toServerJSONObject());t.joinItems=r}return t.datasetInfo&&t.datasetInfo.toServerJSONObject&&(t.datasetInfo=t.datasetInfo.toServerJSONObject()),t}}])&&yh(r.prototype,n),o&&yh(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function wh(t){"@babel/helpers - typeof";return(wh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Oh(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_h(n.key),n)}}function _h(t){var e=function(t,e){if("object"!=wh(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=wh(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==wh(e)?e:String(e)}function Ph(t,e,r){return e=Ch(e),function(t,e){if(e&&("object"===wh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Ch(t).constructor):e.apply(t,r))}function Eh(){return(Eh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ch(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Ch(t){return(Ch=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Th(t,e){return(Th=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var jh=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Ph(this,e,[t=t||{}])).theme=null,r.themeElementPosition=null,r.CLASS_NAME="SuperMap.ServerTheme",r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Th(t,e)}(e,Sh),r=e,(n=[{key:"destroy",value:function(){Eh(Ch(e.prototype),"destroy",this).call(this),V.reset(this)}},{key:"fromJson",value:function(t){Eh(Ch(e.prototype),"fromJson",this).call(this,t);var r=this.theme;switch(r&&r.type){case"LABEL":this.theme=If.fromObj(r);break;case"UNIQUE":this.theme=Gf.fromObj(r);break;case"GRAPH":this.theme=pp.fromObj(r);break;case"DOTDENSITY":this.theme=Sp.fromObj(r);break;case"GRADUATEDSYMBOL":this.theme=Np.fromObj(r);break;case"RANGE":this.theme=Jp.fromObj(r)}this.themeElementPosition&&(this.themeElementPosition=new K(this.themeElementPosition.x,this.themeElementPosition.y))}},{key:"toServerJSONObject",value:function(){var t=Eh(Ch(e.prototype),"toServerJSONObject",this).call(this);return t.themeElementPosition&&t.themeElementPosition.toServerJSONObject&&(t.themeElementPosition=t.themeElementPosition.toServerJSONObject()),t.theme&&t.theme.toServerJSONObject&&(t.theme=t.theme.toServerJSONObject()),t}}])&&Oh(r.prototype,n),o&&Oh(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function kh(t){"@babel/helpers - typeof";return(kh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xh(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ah(n.key),n)}}function Ah(t){var e=function(t,e){if("object"!=kh(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=kh(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==kh(e)?e:String(e)}var Ih=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.elevation=null,this.color=null,V.extend(this,e);var r=this.color;r&&(this.color=new Ve(r.red,r.green,r.blue)),this.CLASS_NAME="SuperMap.ColorDictionary"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){V.reset(this)}},{key:"toServerJSONObject",value:function(){var t={};return t=V.copyAttributes(t,this)}}])&&xh(e.prototype,r),n&&xh(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Nh(t){"@babel/helpers - typeof";return(Nh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Rh(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Mh(n.key),n)}}function Mh(t){var e=function(t,e){if("object"!=Nh(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Nh(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Nh(e)?e:String(e)}function Lh(t,e,r){return e=Dh(e),function(t,e){if(e&&("object"===Nh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Dh(t).constructor):e.apply(t,r))}function Bh(){return(Bh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Dh(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Dh(t){return(Dh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Fh(t,e){return(Fh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Uh=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Lh(this,e,[t=t||{}])).colorDictionarys=null,r.brightness=null,r.colorGradientType=null,r.colors=null,r.contrast=null,r.dashStyle=null,r.gridType=null,r.horizontalSpacing=null,r.sizeFixed=null,r.solidStyle=null,r.specialColor=null,r.specialValue=null,r.specialValueTransparent=null,r.verticalSpacing=null,r.CLASS_NAME="SuperMap.Grid",r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Fh(t,e)}(e,Sh),r=e,(n=[{key:"destroy",value:function(){Bh(Dh(e.prototype),"destroy",this).call(this),V.reset(this)}},{key:"fromJson",value:function(t){if(Bh(Dh(e.prototype),"fromJson",this).call(this,t),this.specialColor&&(this.specialColor=new Ve(this.specialColor.red,this.specialColor.green,this.specialColor.blue)),this.colors){var r,n=[];for(var o in this.colors)r=this.colors[o],n.push(new Ve(r.red,r.green,r.blue));this.colors=n}if(this.dashStyle&&(this.dashStyle=new Je(this.dashStyle)),this.solidStyle&&(this.solidStyle=new Je(this.solidStyle)),this.colorDictionary){var i,a=[];for(var s in this.colorDictionary)i=this.colorDictionary[s],a.push(new Ih({elevation:s,color:i}));this.colorDictionarys=a}delete this.colorDictionary}},{key:"toServerJSONObject",value:function(){var t=Bh(Dh(e.prototype),"toServerJSONObject",this).call(this);return t.dashStyle&&t.dashStyle.toServerJSONObject&&(t.dashStyle=t.dashStyle.toServerJSONObject()),t.solidStyle&&t.solidStyle.toServerJSONObject&&(t.solidStyle=t.solidStyle.toServerJSONObject()),t}}])&&Rh(r.prototype,n),o&&Rh(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function Gh(t){"@babel/helpers - typeof";return(Gh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vh(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,qh(n.key),n)}}function qh(t){var e=function(t,e){if("object"!=Gh(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Gh(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Gh(e)?e:String(e)}function Hh(t,e,r){return e=Jh(e),function(t,e){if(e&&("object"===Gh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Jh(t).constructor):e.apply(t,r))}function zh(){return(zh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Jh(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Jh(t){return(Jh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Wh(t,e){return(Wh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Kh=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Hh(this,e,[t=t||{}])).brightness=null,r.colorSpaceType=null,r.contrast=null,r.displayBandIndexes=null,r.transparent=null,r.transparentColor=null,r.transparentColorTolerance=null,r.CLASS_NAME="SuperMap.Image",r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Wh(t,e)}(e,Sh),r=e,(n=[{key:"destroy",value:function(){zh(Jh(e.prototype),"destroy",this).call(this),V.reset(this)}},{key:"fromJson",value:function(t){zh(Jh(e.prototype),"fromJson",this).call(this,t),this.transparentColor&&(this.transparentColor=new Ve(this.transparentColor.red,this.transparentColor.green,this.transparentColor.blue))}},{key:"toServerJSONObject",value:function(){return zh(Jh(e.prototype),"toServerJSONObject",this).call(this)}}])&&Vh(r.prototype,n),o&&Vh(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function Qh(t){"@babel/helpers - typeof";return(Qh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yh(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Xh(n.key),n)}}function Xh(t){var e=function(t,e){if("object"!=Qh(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Qh(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Qh(e)?e:String(e)}function Zh(t,e,r){return e=ty(e),function(t,e){if(e&&("object"===Qh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],ty(t).constructor):e.apply(t,r))}function $h(){return($h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ty(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function ty(t){return(ty=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ey(t,e){return(ey=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var ry=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Zh(this,e,[t=t||{}])).style=null,r.CLASS_NAME="SuperMap.Vector",r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ey(t,e)}(e,Sh),r=e,(n=[{key:"destroy",value:function(){$h(ty(e.prototype),"destroy",this).call(this),V.reset(this)}},{key:"fromJson",value:function(t){$h(ty(e.prototype),"fromJson",this).call(this,t);var r=this.style;r&&(this.style=new Je(r))}},{key:"toServerJSONObject",value:function(){var t=$h(ty(e.prototype),"toServerJSONObject",this).call(this);return t.style&&t.style.toServerJSONObject&&(t.style=t.style.toServerJSONObject()),t}}])&&Yh(r.prototype,n),o&&Yh(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function ny(t){"@babel/helpers - typeof";return(ny="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oy(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,iy(n.key),n)}}function iy(t){var e=function(t,e){if("object"!=ny(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ny(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ny(e)?e:String(e)}function ay(t,e,r){return e=ly(e),function(t,e){if(e&&("object"===ny(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return sy(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],ly(t).constructor):e.apply(t,r))}function sy(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function uy(){return(uy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ly(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function ly(t){return(ly=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function cy(t,e){return(cy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var fy=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=ay(this,e,[t,r])).isTempLayers=!1,r&&V.extend(sy(n),r),n.CLASS_NAME="SuperMap.GetLayersInfoService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cy(t,e)}(e,oo),r=e,(n=[{key:"destroy",value:function(){uy(ly(e.prototype),"destroy",this).call(this),V.reset(this)}},{key:"processAsync",value:function(t){var e=this;return e.isTempLayers||(e.url=V.urlPathAppend(e.url,"layers")),e.request({method:"GET",params:null,scope:e,success:t,failure:t})}},{key:"transformResult",value:function(t,e){var r,n;return n=(r=!!(t=V.transformResult(t))&&t.length>0?t[0].subLayers.layers:null)?r.length:0,this.handleLayers(n,r),{result:t[0],options:e}}},{key:"handleLayers",value:function(t,e){var r;if(t)for(var n=0;n<t;n++){if(e[n].subLayers&&e[n].subLayers.layers&&e[n].subLayers.layers.length>0)this.handleLayers(e[n].subLayers.layers.length,e[n].subLayers.layers);else switch(e[n].ugcLayerType){case"THEME":(r=new jh).fromJson(e[n]),e[n]=r;break;case"GRID":(r=new Uh).fromJson(e[n]),e[n]=r;break;case"IMAGE":(r=new Kh).fromJson(e[n]),e[n]=r;break;case"VECTOR":(r=new ry).fromJson(e[n]),e[n]=r}}}}])&&oy(r.prototype,n),o&&oy(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function py(t){"@babel/helpers - typeof";return(py="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hy(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,yy(n.key),n)}}function yy(t){var e=function(t,e){if("object"!=py(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=py(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==py(e)?e:String(e)}function dy(t,e,r){return e=my(e),function(t,e){if(e&&("object"===py(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return by(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],my(t).constructor):e.apply(t,r))}function by(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vy(){return(vy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=my(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function my(t){return(my=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function gy(t,e){return(gy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Sy=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=dy(this,e,[t,r]),r&&V.extend(by(n),r),n.CLASS_NAME="SuperMap.GetLayersLegendInfoService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gy(t,e)}(e,oo),r=e,(n=[{key:"destroy",value:function(){vy(my(e.prototype),"destroy",this).call(this),V.reset(this)}},{key:"processAsync",value:function(t,e){return this.url=V.urlPathAppend(this.url,"/legend"),this.request({method:"GET",params:t,scope:this,success:e,failure:e})}}])&&hy(r.prototype,n),o&&hy(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function wy(t){"@babel/helpers - typeof";return(wy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Oy(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_y(n.key),n)}}function _y(t){var e=function(t,e){if("object"!=wy(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=wy(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==wy(e)?e:String(e)}function Py(t,e,r){return e=Ty(e),function(t,e){if(e&&("object"===wy(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ey(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Ty(t).constructor):e.apply(t,r))}function Ey(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Cy(){return(Cy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ty(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Ty(t){return(Ty=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function jy(t,e){return(jy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var ky=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=Py(this,e,[t,r]),r&&V.extend(Ey(n),r),n.CLASS_NAME="SuperMap.SetLayerInfoService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jy(t,e)}(e,oo),r=e,(n=[{key:"destroy",value:function(){Cy(Ty(e.prototype),"destroy",this).call(this),V.reset(this)}},{key:"processAsync",value:function(t,e){if(t){var r=V.toJSON(t);return this.request({method:"PUT",data:r,scope:this,success:e,failure:e})}}}])&&Oy(r.prototype,n),o&&Oy(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function xy(t){"@babel/helpers - typeof";return(xy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ay(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Iy(n.key),n)}}function Iy(t){var e=function(t,e){if("object"!=xy(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=xy(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==xy(e)?e:String(e)}function Ny(t,e,r){return e=Ly(e),function(t,e){if(e&&("object"===xy(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ry(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Ly(t).constructor):e.apply(t,r))}function Ry(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function My(){return(My="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ly(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Ly(t){return(Ly=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function By(t,e){return(By=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Dy=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Ny(this,e,[t,r])).resourceID=null,n.isTempLayers=!1,r&&V.extend(Ry(n),r),n.CLASS_NAME="SuperMap.SetLayersInfoService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&By(t,e)}(e,oo),r=e,(n=[{key:"destroy",value:function(){My(Ly(e.prototype),"destroy",this).call(this),V.reset(this)}},{key:"processAsync",value:function(t,e){if(t){var r,n=[],o=this,i="";o.isTempLayers?(o.url=V.urlPathAppend(o.url,"tempLayersSet/"+o.resourceID),i="PUT"):(o.url=V.urlPathAppend(o.url,"tempLayersSet"),i="POST"),t.subLayers||(t.subLayers={layers:[]}),t.subLayers.layers||(t.subLayers.layers=[]);var a=t.subLayers.layers,s=a.length;for(var u in a){if("GRID"===a[u].ugcLayerType){var l={},c=a[u].colorDictionarys;for(var f in c){l[c[f].elevation]=c[f].color}}a[u].colorDictionary=l,delete a[u].colorDictionarys}for(var p=0;p<s;p++)a[p].toJsonObject?n.push(a[p].toJsonObject()):n.push(a[p]);(r=V.extend(r,t)).subLayers={layers:n},r.object=null;var h=V.toJSON([r]);return o.request({method:i,data:h,scope:o,success:e,failure:e})}}}])&&Ay(r.prototype,n),o&&Ay(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function Fy(t){"@babel/helpers - typeof";return(Fy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Uy(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Gy(n.key),n)}}function Gy(t){var e=function(t,e){if("object"!=Fy(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Fy(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Fy(e)?e:String(e)}var Vy=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.layerStatusList=[],this.holdTime=15,this.resourceID=null,e&&V.extend(this,e)}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.layerStatusList=null,this.holdTime=null,this.resourceID=null}},{key:"toJSON",value:function(){var t="{";t+='"layers":[';for(var e=[],r=0,n=this.layerStatusList.length;r<n;r++)e.push(this.layerStatusList[r].toJSON());return t+=e,t+="]",t+="}"}}])&&Uy(e.prototype,r),n&&Uy(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function qy(t){"@babel/helpers - typeof";return(qy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hy(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,zy(n.key),n)}}function zy(t){var e=function(t,e){if("object"!=qy(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=qy(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==qy(e)?e:String(e)}function Jy(t,e,r){return e=Qy(e),function(t,e){if(e&&("object"===qy(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Wy(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Qy(t).constructor):e.apply(t,r))}function Wy(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ky(){return(Ky="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Qy(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Qy(t){return(Qy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Yy(t,e){return(Yy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Xy=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Jy(this,e,[t,r])).lastparams=null,n.mapUrl=t,r&&V.extend(Wy(n),r),n.CLASS_NAME="SuperMap.SetLayerStatusService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Yy(t,e)}(e,oo),r=e,(n=[{key:"destroy",value:function(){Ky(Qy(e.prototype),"destroy",this).call(this),V.reset(this)}},{key:"processAsync",value:function(t,e){if(t instanceof Vy){var r=this;if(r.url=r.mapUrl,null==t.resourceID)return r.url=V.urlPathAppend(r.url,"tempLayersSet"),r.lastparams=t,r.request({method:"POST",scope:r,success:r.createTempLayerComplete.bind(r,e),failure:e});r.url=V.urlPathAppend(r.url,"tempLayersSet/"+t.resourceID),r.url=V.urlAppend(r.url,"elementRemain=true&reference="+t.resourceID+"&holdTime="+t.holdTime.toString());var n="[{";return n+='"type":"UGC",',null!=t.layerStatusList&&t.layerStatusList.length>0&&(n+='"subLayers":'+t.toJSON()),n+=',"visible":true,',n+='"name":"'+this.getMapName(this.mapUrl)+'"',n+="}]",r.request({method:"PUT",data:n,scope:r,success:e,failure:e})}}},{key:"createTempLayerComplete",value:function(t,e){return e=e.result?e.result:e,(e=V.transformResult(e)).succeed&&(this.lastparams.resourceID=e.newResourceID),this.processAsync(this.lastparams,t)}},{key:"getMapName",value:function(t){var e=t;"/"===e.charAt(e.length-1)&&(e=e.substr(0,e.length-1));var r=e.lastIndexOf("/");return e.substring(r+1,e.length)}},{key:"transformResult",value:function(t,e){return null!=(t=V.transformResult(t))&&null!=this.lastparams&&null!=this.lastparams.resourceID&&(t.newResourceID=this.lastparams.resourceID),{result:t,options:e}}}])&&Hy(r.prototype,n),o&&Hy(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function Zy(t){"@babel/helpers - typeof";return(Zy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $y(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,td(n.key),n)}}function td(t){var e=function(t,e){if("object"!=Zy(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Zy(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Zy(e)?e:String(e)}var ed=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=e,this.options=r||{}}var e,r,n;return e=t,(r=[{key:"getLayersInfo",value:function(t){var e=this;return new fy(e.url,{proxy:e.options.proxy,withCredentials:e.options.withCredentials,crossOrigin:e.options.crossOrigin,headers:e.options.headers}).processAsync(t)}},{key:"getLayersLegendInfo",value:function(t,e){var r=this;return new Sy(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}},{key:"setLayerInfo",value:function(t,e){if(t){var r=this,n=t.resourceID,o=t.tempLayerName,i=t.layerInfo;if(n&&o){var a=V.urlPathAppend(r.url,"tempLayersSet/"+n+"/"+o);return new ky(a,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(i,e)}}}},{key:"setLayersInfo",value:function(t,e){if(t){var r=this,n=t.resourceID,o=!!t.isTempLayers&&t.isTempLayers,i=t.layersInfo;if((!o||n)&&i)return new Dy(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,resourceID:n,isTempLayers:o}).processAsync(i,e)}}},{key:"setLayerStatus",value:function(t,e){if(t){var r=this;return new Xy(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}}}])&&$y(e.prototype,r),n&&$y(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function rd(t){"@babel/helpers - typeof";return(rd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nd(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,od(n.key),n)}}function od(t){var e=function(t,e){if("object"!=rd(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=rd(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==rd(e)?e:String(e)}function id(t,e,r){return e=ad(e),function(t,e){if(e&&("object"===rd(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],ad(t).constructor):e.apply(t,r))}function ad(t){return(ad=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function sd(t,e){return(sd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var ud=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=id(this,e,[t,r]))._layerInfoService=new ed(t,r),n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sd(t,e)}(e,An),r=e,(n=[{key:"getLayersInfo",value:function(t){return this._layerInfoService.getLayersInfo(t)}},{key:"getLayersLegendInfo",value:function(t,e){return this._layerInfoService.getLayersLegendInfo(t,e)}},{key:"setLayerInfo",value:function(t,e){return this._layerInfoService.setLayerInfo(t,e)}},{key:"setLayersInfo",value:function(t,e){return this._layerInfoService.setLayersInfo(t,e)}},{key:"setLayerStatus",value:function(t,e){return this._layerInfoService.setLayerStatus(t,e)}}])&&nd(r.prototype,n),o&&nd(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function ld(t){"@babel/helpers - typeof";return(ld="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cd(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,fd(n.key),n)}}function fd(t){var e=function(t,e){if("object"!=ld(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ld(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ld(e)?e:String(e)}function pd(t,e,r){return e=dd(e),function(t,e){if(e&&("object"===ld(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return hd(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],dd(t).constructor):e.apply(t,r))}function hd(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function yd(){return(yd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=dd(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function dd(t){return(dd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function bd(t,e){return(bd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var vd=function(t){function e(t,r){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=pd(this,e,[t,r])).projection=null,n.CLASS_NAME="SuperMap.MapService",r&&V.extend(hd(n),r);var o=hd(n);if(o.projection){var i=o.projection.split(":");i instanceof Array&&(2===i.length&&(o.url=V.urlAppend(o.url,"prjCoordSys=".concat(encodeURIComponent('{"epsgCode":"'.concat(i[1],'"}'))))),1===i.length&&(o.url=V.urlAppend(o.url,"prjCoordSys=".concat(encodeURIComponent('{"epsgCode":"'.concat(i[0],'"}'))))))}return n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bd(t,e)}(e,oo),r=e,(n=[{key:"destroy",value:function(){yd(dd(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t){return this.request({method:"GET",scope:this,success:t,failure:t})}},{key:"transformResult",value:function(t,e){var r=(t=V.transformResult(t)).code>=200&&t.code<300||0==t.code||304===t.code,n=t.code&&r;return!t.code||n?{result:t,options:e}:{error:t,options:e}}}])&&cd(r.prototype,n),o&&cd(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function md(t){"@babel/helpers - typeof";return(md="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gd(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Sd(n.key),n)}}function Sd(t){var e=function(t,e){if("object"!=md(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=md(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==md(e)?e:String(e)}function wd(t,e,r){return e=_d(e),function(t,e){if(e&&("object"===md(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],_d(t).constructor):e.apply(t,r))}function Od(){return(Od="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_d(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function _d(t){return(_d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Pd(t,e){return(Pd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Ed=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=wd(this,e,[t,r])).CLASS_NAME="SuperMap.TilesetsService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Pd(t,e)}(e,oo),r=e,(n=[{key:"destroy",value:function(){Od(_d(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t){if(this.url){return this.url=V.urlPathAppend(this.url,"tilesets"),this.request({method:"GET",scope:this,success:t,failure:t})}}}])&&gd(r.prototype,n),o&&gd(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function Cd(t){"@babel/helpers - typeof";return(Cd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Td(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,jd(n.key),n)}}function jd(t){var e=function(t,e){if("object"!=Cd(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Cd(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Cd(e)?e:String(e)}function kd(t,e,r){return e=xd(e),function(t,e){if(e&&("object"===Cd(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],xd(t).constructor):e.apply(t,r))}function xd(t){return(xd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ad(t,e){return(Ad=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Id=function(t){function e(t,r){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),kd(this,e,[t,r])}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ad(t,e)}(e,An),r=e,(n=[{key:"getMapInfo",value:function(t){var e=this;return new vd(e.url,{proxy:e.options.proxy,withCredentials:e.options.withCredentials,crossOrigin:e.options.crossOrigin,headers:e.options.headers,projection:e.options.projection}).processAsync(t)}},{key:"getWKT",value:function(t){var e=this;return new vd(V.urlPathAppend(e.url,"prjCoordSys.wkt"),{proxy:e.options.proxy,withCredentials:e.options.withCredentials,withoutFormatSuffix:!0,crossOrigin:e.options.crossOrigin,headers:e.options.headers,projection:e.options.projection}).processAsync(t)}},{key:"getTilesets",value:function(t){var e=this;return new Ed(e.url,{proxy:e.options.proxy,withCredentials:e.options.withCredentials,crossOrigin:e.options.crossOrigin,headers:e.options.headers}).processAsync(t)}}])&&Td(r.prototype,n),o&&Td(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function Nd(t){"@babel/helpers - typeof";return(Nd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Rd(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Md(n.key),n)}}function Md(t){var e=function(t,e){if("object"!=Nd(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Nd(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Nd(e)?e:String(e)}var Ld=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.geometry=e,this.unit=dr.METER,this.prjCoordSys=null,this.distanceMode=null,r&&V.extend(this,r),this.CLASS_NAME="SuperMap.MeasureParameters")}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.geometry=null,this.unit=null,this.prjCoordSys=null}}])&&Rd(e.prototype,r),n&&Rd(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Bd(t){"@babel/helpers - typeof";return(Bd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Dd(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Fd(n.key),n)}}function Fd(t){var e=function(t,e){if("object"!=Bd(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Bd(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Bd(e)?e:String(e)}function Ud(t,e,r){return e=qd(e),function(t,e){if(e&&("object"===Bd(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Gd(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],qd(t).constructor):e.apply(t,r))}function Gd(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Vd(){return(Vd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=qd(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function qd(t){return(qd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Hd(t,e){return(Hd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var zd=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Ud(this,e,[t,r])).measureMode=yr.DISTANCE,r&&V.extend(Gd(n),r),n.CLASS_NAME="SuperMap.MeasureService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Hd(t,e)}(e,oo),r=e,(n=[{key:"destroy",value:function(){Vd(qd(e.prototype),"destroy",this).call(this);this.measureMode=null}},{key:"processAsync",value:function(t,e){if(t instanceof Ld){var r,n,o=this,i=t.geometry;if(i){o.url=V.urlPathAppend(o.url,o.measureMode===yr.AREA?"area":"distance");var a,s,u,l=en.fromGeometry(i);if(l)return r=l.parts[0],n=l.points.splice(0,r),t.prjCoordSys?("object"===Bd(t.prjCoordSys)?a='{"epsgCode"'+(s=t.prjCoordSys.projCode).substring(s.indexOf(":"),s.length)+"}":"string"==typeof t.prjCoordSys&&(a='{"epsgCode"'+t.prjCoordSys.substring(t.prjCoordSys.indexOf(":"),t.prjCoordSys.length)+"}"),u={point2Ds:V.toJSON(n),unit:t.unit,prjCoordSys:a,distanceMode:t.distanceMode||"Geodesic"}):u={point2Ds:V.toJSON(n),unit:t.unit,distanceMode:t.distanceMode||"Geodesic"},o.request({method:"GET",params:u,scope:o,success:e,failure:e})}}}}])&&Dd(r.prototype,n),o&&Dd(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function Jd(t){"@babel/helpers - typeof";return(Jd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wd(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Kd(n.key),n)}}function Kd(t){var e=function(t,e){if("object"!=Jd(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Jd(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Jd(e)?e:String(e)}function Qd(t,e,r){return e=Yd(e),function(t,e){if(e&&("object"===Jd(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Yd(t).constructor):e.apply(t,r))}function Yd(t){return(Yd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Xd(t,e){return(Xd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Zd=function(t){function e(t,r){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Qd(this,e,[t,r])}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Xd(t,e)}(e,An),r=e,(n=[{key:"measureDistance",value:function(t,e){return this.measure(t,"DISTANCE",e)}},{key:"measureArea",value:function(t,e){return this.measure(t,"AREA",e)}},{key:"measure",value:function(t,e,r){var n=this;return new zd(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,measureMode:e}).processAsync(n._processParam(t),r)}},{key:"_processParam",value:function(t){return!t||t.geometry instanceof j||(t.geometry=hn.toSuperMapGeometry(t.geometry)),t}}])&&Wd(r.prototype,n),o&&Wd(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function $d(t){"@babel/helpers - typeof";return($d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tb(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,eb(n.key),n)}}function eb(t){var e=function(t,e){if("object"!=$d(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=$d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==$d(e)?e:String(e)}function rb(t,e,r){return e=ob(e),function(t,e){if(e&&("object"===$d(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],ob(t).constructor):e.apply(t,r))}function nb(){return(nb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ob(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function ob(t){return(ob=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ib(t,e){return(ib=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var ab=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=rb(this,e,[t,r])).format=lr.GEOJSON,n.CLASS_NAME="SuperMap.NetworkAnalystServiceBase",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ib(t,e)}(e,oo),r=e,(n=[{key:"destroy",value:function(){nb(ob(e.prototype),"destroy",this).call(this),this.format=null}},{key:"transformResult",value:function(t,e){var r;return(t=V.transformResult(t))&&this.format===lr.GEOJSON&&"function"==typeof this.toGeoJSONResult&&(r=this.toGeoJSONResult(t)),r||(r=t),{result:r,options:e}}},{key:"toGeoJSONResult",value:function(t){return null}}])&&tb(r.prototype,n),o&&tb(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function sb(t){"@babel/helpers - typeof";return(sb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ub(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,lb(n.key),n)}}function lb(t){var e=function(t,e){if("object"!=sb(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=sb(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==sb(e)?e:String(e)}var cb=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);this.sourceNodeIDs=null,this.edgeID=null,this.nodeID=null,this.isUncertainDirectionValid=!1,V.extend(this,e),this.CLASS_NAME="SuperMap.BurstPipelineAnalystParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.sourceNodeIDs=null,this.edgeID=null,this.nodeID=null,this.isUncertainDirectionValid=null}}])&&ub(e.prototype,r),n&&ub(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function fb(t){"@babel/helpers - typeof";return(fb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pb(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,hb(n.key),n)}}function hb(t){var e=function(t,e){if("object"!=fb(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=fb(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==fb(e)?e:String(e)}function yb(t,e,r){return e=bb(e),function(t,e){if(e&&("object"===fb(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],bb(t).constructor):e.apply(t,r))}function db(){return(db="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=bb(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function bb(t){return(bb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function vb(t,e){return(vb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var mb=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=yb(this,e,[t,r])).CLASS_NAME="SuperMap.BurstPipelineAnalystService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vb(t,e)}(e,ab),r=e,(n=[{key:"destroy",value:function(){db(bb(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(!(t instanceof cb))return null;var r;if(this.url=V.urlPathAppend(this.url,"burstAnalyse"),r={sourceNodeIDs:t.sourceNodeIDs,isUncertainDirectionValid:t.isUncertainDirectionValid},null!==t.edgeID&&null!==t.nodeID)throw new Error("edgeID and nodeID cannot be null at the same time.");if(null===t.edgeID&&null===t.nodeID)throw new Error("edgeID and nodeID cannot be null at the same time.");return null!==t.edgeID?r.edgeID=t.edgeID:r.nodeID=t.nodeID,this.request({method:"GET",params:r,scope:this,success:e,failure:e})}}])&&pb(r.prototype,n),o&&pb(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function gb(t){"@babel/helpers - typeof";return(gb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Sb(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,wb(n.key),n)}}function wb(t){var e=function(t,e){if("object"!=gb(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=gb(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==gb(e)?e:String(e)}var Ob=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.returnEdgeFeatures=!1,this.returnEdgeGeometry=!1,this.returnEdgeIDs=!1,this.returnNodeFeatures=!1,this.returnNodeGeometry=!1,this.returnNodeIDs=!1,this.returnPathGuides=!1,this.returnRoutes=!1,V.extend(this,e),this.CLASS_NAME="SuperMap.TransportationAnalystResultSetting")}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.returnEdgeFeatures=null,t.returnEdgeGeometry=null,t.returnEdgeIDs=null,t.returnNodeFeatures=null,t.returnNodeGeometry=null,t.returnNodeIDs=null,t.returnPathGuides=null,t.returnRoutes=null}}])&&Sb(e.prototype,r),n&&Sb(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function _b(t){"@babel/helpers - typeof";return(_b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pb(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Eb(n.key),n)}}function Eb(t){var e=function(t,e){if("object"!=_b(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=_b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==_b(e)?e:String(e)}var Cb=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.barrierEdgeIDs=null,this.barrierNodeIDs=null,this.barrierPoints=null,this.weightFieldName=null,this.turnWeightField=null,this.resultSetting=new Ob,V.extend(this,e),this.CLASS_NAME="SuperMap.TransportationAnalystParameter")}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;if(t.barrierEdgeIDs=null,t.barrierNodeIDs=null,t.weightFieldName=null,t.turnWeightField=null,t.resultSetting&&(t.resultSetting.destroy(),t.resultSetting=null),t.barrierPoints&&t.barrierPoints.length)for(var e in t.barrierPoints)t.barrierPoints[e].destroy();t.barrierPoints=null}}])&&Pb(e.prototype,r),n&&Pb(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Tb(t){"@babel/helpers - typeof";return(Tb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jb(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,kb(n.key),n)}}function kb(t){var e=function(t,e){if("object"!=Tb(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Tb(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Tb(e)?e:String(e)}var xb=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.isAnalyzeById=!1,this.nodes=null,this.parameter=new Cb,V.extend(this,e),this.CLASS_NAME="SuperMap.ComputeWeightMatrixParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.isAnalyzeById=null,t.nodes=null,t.parameter&&(t.parameter.destroy(),t.parameter=null)}}])&&jb(e.prototype,r),n&&jb(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ab(t){"@babel/helpers - typeof";return(Ab="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ib(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Nb(n.key),n)}}function Nb(t){var e=function(t,e){if("object"!=Ab(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ab(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ab(e)?e:String(e)}function Rb(t,e,r){return e=Lb(e),function(t,e){if(e&&("object"===Ab(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Lb(t).constructor):e.apply(t,r))}function Mb(){return(Mb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Lb(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Lb(t){return(Lb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Bb(t,e){return(Bb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Db=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Rb(this,e,[t,r])).CLASS_NAME="SuperMap.ComputeWeightMatrixService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Bb(t,e)}(e,ab),r=e,(n=[{key:"destroy",value:function(){Mb(Lb(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof xb){var r,n=this;return n.url=V.urlPathAppend(n.url,"weightmatrix"),r={parameter:V.toJSON(t.parameter),nodes:n.getJson(t.isAnalyzeById,t.nodes)},n.request({method:"GET",params:r,scope:n,success:e,failure:e})}}},{key:"getJson",value:function(t,e){var r="[",n=e?e.length:0;if(!1===t)for(var o=0;o<n;o++)o>0&&(r+=","),r+='{"x":'+e[o].x+',"y":'+e[o].y+"}";else if(!0===t)for(var i=0;i<n;i++)i>0&&(r+=","),r+=e[i];return r+="]"}}])&&Ib(r.prototype,n),o&&Ib(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function Fb(t){"@babel/helpers - typeof";return(Fb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ub(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Gb(n.key),n)}}function Gb(t){var e=function(t,e){if("object"!=Fb(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Fb(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Fb(e)?e:String(e)}var Vb=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.sourceNodeIDs=null,this.edgeID=null,this.nodeID=null,this.returnFeatures=!0,this.isUncertainDirectionValid=!1,this.queryType=null,V.extend(this,e),this.CLASS_NAME="SuperMap.FacilityAnalystStreamParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.edgeID=null,t.nodeID=null,t.weightName=null,t.returnFeatures=null,t.isUncertainDirectionValid=null,t.type=null}}])&&Ub(e.prototype,r),n&&Ub(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function qb(t){"@babel/helpers - typeof";return(qb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hb(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,zb(n.key),n)}}function zb(t){var e=function(t,e){if("object"!=qb(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=qb(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==qb(e)?e:String(e)}function Jb(t,e,r){return e=Kb(e),function(t,e){if(e&&("object"===qb(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Kb(t).constructor):e.apply(t,r))}function Wb(){return(Wb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Kb(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Kb(t){return(Kb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Qb(t,e){return(Qb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Yb=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Jb(this,e,[t,r])).CLASS_NAME="SuperMap.FacilityAnalystStreamService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Qb(t,e)}(e,ab),r=e,(n=[{key:"destroy",value:function(){Wb(Kb(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof Vb){var r,n=this;if(0===t.queryType)n.url=V.urlPathAppend(n.url,"upstreamcirticalfaclilities");else{if(1!==t.queryType)return;n.url=V.urlPathAppend(n.url,"downstreamcirticalfaclilities")}if(r={sourceNodeIDs:t.sourceNodeIDs,isUncertainDirectionValid:t.isUncertainDirectionValid,returnFeatures:t.returnFeatures},!(null!==t.edgeID&&null!==t.nodeID||null===t.edgeID&&null===t.nodeID))return null!==t.edgeID?r.edgeID=t.edgeID:r.nodeID=t.nodeID,n.request({method:"GET",params:r,scope:n,success:e,failure:e})}}},{key:"toGeoJSONResult",value:function(t){if(!t)return null;var e=new cn;return t.edgesFeatures&&(t.edgesFeatures=e.toGeoJSON(t.edgesFeatures)),t.nodesFeatures&&(t.nodesFeatures=e.toGeoJSON(t.nodesFeatures)),t}}])&&Hb(r.prototype,n),o&&Hb(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function Xb(t){"@babel/helpers - typeof";return(Xb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zb(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,$b(n.key),n)}}function $b(t){var e=function(t,e){if("object"!=Xb(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Xb(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Xb(e)?e:String(e)}var tv=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.edgeID=null,this.nodeID=null,this.weightName=null,this.returnFeatures=!0,this.isUncertainDirectionValid=!0,this.traceType=null,this.withIndex=null,V.extend(this,e),this.CLASS_NAME="SuperMap.TraceAnalystParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.edgeID=null,t.nodeID=null,t.weightName=null,t.returnFeatures=null,t.isUncertainDirectionValid=null,t.type=null,t.withIndex=null}}])&&Zb(e.prototype,r),n&&Zb(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ev(t){"@babel/helpers - typeof";return(ev="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rv(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,nv(n.key),n)}}function nv(t){var e=function(t,e){if("object"!=ev(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ev(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ev(e)?e:String(e)}function ov(t,e,r){return e=av(e),function(t,e){if(e&&("object"===ev(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],av(t).constructor):e.apply(t,r))}function iv(){return(iv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=av(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function av(t){return(av=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function sv(t,e){return(sv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var uv=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=ov(this,e,[t,r])).CLASS_NAME="SuperMap.TraceAnalystService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sv(t,e)}(e,ab),r=e,(n=[{key:"destroy",value:function(){iv(av(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof tv){var r,n=this;if(0===t.traceType)n.url=V.urlPathAppend(n.url,"traceup");else{if(1!==t.traceType)return;n.url=V.urlPathAppend(n.url,"tracedown")}if(r={weightName:t.weightName,isUncertainDirectionValid:t.isUncertainDirectionValid,returnFeatures:t.returnFeatures},!(null!==t.edgeID&&null!==t.nodeID||null===t.edgeID&&null===t.nodeID))return null!==t.edgeID?r.edgeID=t.edgeID:r.nodeID=t.nodeID,n.request({method:"GET",params:r,scope:n,success:e,failure:e})}}},{key:"toGeoJSONResult",value:function(t){if(!t)return null;var e=new cn;return t.edgesFeatures&&(t.edgesFeatures=e.toGeoJSON(t.edgesFeatures)),t.nodesFeatures&&(t.nodesFeatures=e.toGeoJSON(t.nodesFeatures)),t}}])&&rv(r.prototype,n),o&&rv(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function lv(t){"@babel/helpers - typeof";return(lv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cv(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,fv(n.key),n)}}function fv(t){var e=function(t,e){if("object"!=lv(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=lv(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==lv(e)?e:String(e)}var pv=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.connected=null,this.returnFeatures=!0,this.edgeIDs=null,this.nodeIDs=null,this.withIndex=null,V.extend(this,e),this.CLASS_NAME="SuperMap.ConnectedEdgesAnalystParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.edgeIDs=null,t.nodeIDs=null,t.connected=null,t.returnFeatures=null,t.withIndex=null}}])&&cv(e.prototype,r),n&&cv(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function hv(t){"@babel/helpers - typeof";return(hv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yv(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,dv(n.key),n)}}function dv(t){var e=function(t,e){if("object"!=hv(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=hv(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==hv(e)?e:String(e)}function bv(t,e,r){return e=mv(e),function(t,e){if(e&&("object"===hv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],mv(t).constructor):e.apply(t,r))}function vv(){return(vv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=mv(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function mv(t){return(mv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function gv(t,e){return(gv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Sv=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=bv(this,e,[t,r])).CLASS_NAME="SuperMap.ConnectedEdgesAnalystService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gv(t,e)}(e,ab),r=e,(n=[{key:"destroy",value:function(){vv(mv(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof pv){var r;if(this.url=V.urlPathAppend(this.url,"connectededges"),r={connected:t.connected,returnFeatures:t.returnFeatures},!(null!==t.edgeIDs&&null!==t.nodeIDs||null===t.edgeIDs&&null===t.nodeIDs))return null!==t.edgeIDs?r.edgeIDs=t.edgeIDs:r.nodeIDs=t.nodeIDs,this.request({method:"GET",params:r,scope:this,success:e,failure:e})}}},{key:"toGeoJSONResult",value:function(t){if(!t)return null;var e=new cn;return t.edgesFeatures&&(t.edgesFeatures=e.toGeoJSON(t.edgesFeatures)),t.nodesFeatures&&(t.nodesFeatures=e.toGeoJSON(t.nodesFeatures)),t}}])&&yv(r.prototype,n),o&&yv(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function wv(t){"@babel/helpers - typeof";return(wv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ov(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_v(n.key),n)}}function _v(t){var e=function(t,e){if("object"!=wv(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=wv(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==wv(e)?e:String(e)}var Pv=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.event=null,this.expectFacilityCount=1,this.facilities=null,this.fromEvent=!1,this.isAnalyzeById=!1,this.maxWeight=0,this.parameter=new Cb,V.extend(this,e),this.CLASS_NAME="SuperMap.FindClosestFacilitiesParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.event=null,t.expectFacilityCount=null,t.facilities=null,t.fromEvent=null,t.isAnalyzeById=null,t.maxWeight=null,t.parameter&&(t.parameter.destroy(),t.parameter=null)}}])&&Ov(e.prototype,r),n&&Ov(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ev(t){"@babel/helpers - typeof";return(Ev="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Cv(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Tv(n.key),n)}}function Tv(t){var e=function(t,e){if("object"!=Ev(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ev(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ev(e)?e:String(e)}function jv(t,e,r){return e=xv(e),function(t,e){if(e&&("object"===Ev(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],xv(t).constructor):e.apply(t,r))}function kv(){return(kv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=xv(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function xv(t){return(xv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Av(t,e){return(Av=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Iv=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=jv(this,e,[t,r])).CLASS_NAME="SuperMap.FindClosestFacilitiesService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Av(t,e)}(e,ab),r=e,(n=[{key:"destroy",value:function(){kv(xv(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof Pv){var r,n=this;return n.url=V.urlPathAppend(n.url,"closestfacility"),r={expectFacilityCount:t.expectFacilityCount,fromEvent:t.fromEvent,maxWeight:t.maxWeight,parameter:V.toJSON(t.parameter),event:V.toJSON(t.event),facilities:n.getJson(t.isAnalyzeById,t.facilities)},n.request({method:"GET",params:r,scope:n,success:e,failure:e})}}},{key:"getJson",value:function(t,e){var r="[",n=e?e.length:0;if(!1===t)for(var o=0;o<n;o++)o>0&&(r+=","),r+='{"x":'+e[o].x+',"y":'+e[o].y+"}";else if(!0===t)for(var i=0;i<n;i++)i>0&&(r+=","),r+=e[i];return r+="]"}},{key:"toGeoJSONResult",value:function(t){if(!t||!t.facilityPathList)return t;var e=new cn;return t.facilityPathList.map(function(t){return t.route&&(t.route=e.toGeoJSON(t.route)),t.pathGuideItems&&(t.pathGuideItems=e.toGeoJSON(t.pathGuideItems)),t.edgeFeatures&&(t.edgeFeatures=e.toGeoJSON(t.edgeFeatures)),t.nodeFeatures&&(t.nodeFeatures=e.toGeoJSON(t.nodeFeatures)),t}),t}}])&&Cv(r.prototype,n),o&&Cv(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function Nv(t){"@babel/helpers - typeof";return(Nv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Rv(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Mv(n.key),n)}}function Mv(t){var e=function(t,e){if("object"!=Nv(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Nv(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Nv(e)?e:String(e)}var Lv=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.expectedSupplyCenterCount=null,this.isFromCenter=!1,this.supplyCenters=null,this.turnWeightField=null,this.weightName=null,V.extend(this,e),this.CLASS_NAME="SuperMap.FindLocationParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;if(t.expectedSupplyCenterCount=null,t.isFromCenter=null,t.turnWeightField=null,t.weightName=null,t.supplyCenters){for(var e=0,r=t.supplyCenters,n=r.length;e<n;e++)r[e].destroy();t.supplyCenters=null}}}])&&Rv(e.prototype,r),n&&Rv(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Bv(t){"@babel/helpers - typeof";return(Bv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Dv(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Fv(n.key),n)}}function Fv(t){var e=function(t,e){if("object"!=Bv(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Bv(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Bv(e)?e:String(e)}function Uv(t,e,r){return e=Vv(e),function(t,e){if(e&&("object"===Bv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Vv(t).constructor):e.apply(t,r))}function Gv(){return(Gv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Vv(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Vv(t){return(Vv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function qv(t,e){return(qv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Hv=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Uv(this,e,[t,r])).CLASS_NAME="SuperMap.FindLocationService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qv(t,e)}(e,ab),r=e,(n=[{key:"destroy",value:function(){Gv(Vv(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof Lv){var r,n=this;return n.url=V.urlPathAppend(n.url,"location"),r={isFromCenter:t.isFromCenter,expectedSupplyCenterCount:t.expectedSupplyCenterCount,weightName:t.weightName,turnWeightField:t.turnWeightField,returnEdgeFeature:!0,returnEdgeGeometry:!0,returnNodeFeature:!0,mapParameter:V.toJSON(t.mapParameter),supplyCenters:n.getCentersJson(t.supplyCenters)},n.request({method:"GET",params:r,scope:n,success:e,failure:e})}}},{key:"getCentersJson",value:function(t){for(var e="[",r=t?t.length:0,n=0;n<r;n++)n>0&&(e+=","),e+=V.toJSON(t[n]);return e+="]"}},{key:"toGeoJSONResult",value:function(t){if(!t)return null;var e=new cn;return t.demandResults&&(t.demandResults=e.toGeoJSON(t.demandResults)),t.supplyResults&&(t.supplyResults=e.toGeoJSON(t.supplyResults)),t}}])&&Dv(r.prototype,n),o&&Dv(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function zv(t){"@babel/helpers - typeof";return(zv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jv(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Wv(n.key),n)}}function Wv(t){var e=function(t,e){if("object"!=zv(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=zv(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==zv(e)?e:String(e)}var Kv=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.centers=null,this.hasLeastTotalCost=!1,this.isAnalyzeById=!1,this.nodes=null,this.parameter=new Cb,V.extend(this,e),this.CLASS_NAME="SuperMap.FindMTSPPathsParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.centers=null,t.hasLeastTotalCost=null,t.isAnalyzeById=null,t.nodes=null,t.maxWeight=null,t.parameter&&(t.parameter.destroy(),t.parameter=null)}}])&&Jv(e.prototype,r),n&&Jv(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Qv(t){"@babel/helpers - typeof";return(Qv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yv(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Xv(n.key),n)}}function Xv(t){var e=function(t,e){if("object"!=Qv(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Qv(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Qv(e)?e:String(e)}function Zv(t,e,r){return e=tm(e),function(t,e){if(e&&("object"===Qv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],tm(t).constructor):e.apply(t,r))}function $v(){return($v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=tm(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function tm(t){return(tm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function em(t,e){return(em=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var rm=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Zv(this,e,[t,r])).CLASS_NAME="SuperMap.FindMTSPPathsService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&em(t,e)}(e,ab),r=e,(n=[{key:"destroy",value:function(){$v(tm(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof Kv){var r,n=this,o=n.getJson(t.isAnalyzeById,t.centers),i=n.getJson(t.isAnalyzeById,t.nodes);return n.url=V.urlPathAppend(n.url,"mtsppath"),r={centers:o,nodes:i,parameter:V.toJSON(t.parameter),hasLeastTotalCost:t.hasLeastTotalCost},n.request({method:"GET",params:r,scope:n,success:e,failure:e})}}},{key:"getJson",value:function(t,e){var r="[",n=e?e.length:0;if(!1===t)for(var o=0;o<n;o++)o>0&&(r+=","),r+='{"x":'+e[o].x+',"y":'+e[o].y+"}";else if(!0===t)for(var i=0;i<n;i++)i>0&&(r+=","),r+=e[i];return r+="]"}},{key:"toGeoJSONResult",value:function(t){if(!t||!t.pathList)return null;var e=new cn;return t.pathList.map(function(t){return t.route&&(t.route=e.toGeoJSON(t.route)),t.pathGuideItems&&(t.pathGuideItems=e.toGeoJSON(t.pathGuideItems)),t.edgeFeatures&&(t.edgeFeatures=e.toGeoJSON(t.edgeFeatures)),t.nodeFeatures&&(t.nodeFeatures=e.toGeoJSON(t.nodeFeatures)),t}),t}}])&&Yv(r.prototype,n),o&&Yv(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function nm(t){"@babel/helpers - typeof";return(nm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function om(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,im(n.key),n)}}function im(t){var e=function(t,e){if("object"!=nm(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=nm(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==nm(e)?e:String(e)}var am=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.isAnalyzeById=!1,this.hasLeastEdgeCount=null,this.nodes=null,this.parameter=new Cb,V.extend(this,e),this.CLASS_NAME="SuperMap.FindPathParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.isAnalyzeById=null,t.hasLeastEdgeCount=null,t.nodes=null,t.parameter&&(t.parameter.destroy(),t.parameter=null)}}])&&om(e.prototype,r),n&&om(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function sm(t){"@babel/helpers - typeof";return(sm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function um(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,lm(n.key),n)}}function lm(t){var e=function(t,e){if("object"!=sm(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=sm(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==sm(e)?e:String(e)}function cm(t,e,r){return e=pm(e),function(t,e){if(e&&("object"===sm(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],pm(t).constructor):e.apply(t,r))}function fm(){return(fm="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=pm(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function pm(t){return(pm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function hm(t,e){return(hm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var ym=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=cm(this,e,[t,r])).CLASS_NAME="SuperMap.FindPathService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hm(t,e)}(e,ab),r=e,(n=[{key:"destroy",value:function(){fm(pm(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof am){var r,n=this;return n.url=V.urlPathAppend(n.url,"path"),r={hasLeastEdgeCount:t.hasLeastEdgeCount,parameter:V.toJSON(t.parameter),nodes:n.getJson(t.isAnalyzeById,t.nodes)},n.request({method:"GET",params:r,scope:n,success:e,failure:e})}}},{key:"getJson",value:function(t,e){var r="[",n=e?e.length:0;if(!1===t)for(var o=0;o<n;o++)o>0&&(r+=","),r+='{"x":'+e[o].x+',"y":'+e[o].y+"}";else if(!0===t)for(var i=0;i<n;i++)i>0&&(r+=","),r+=e[i];return r+="]"}},{key:"toGeoJSONResult",value:function(t){if(!t||!t.pathList||t.pathList.length<1)return null;var e=new cn;return t.pathList.forEach(function(t){t.route&&(t.route=e.toGeoJSON(t.route)),t.pathGuideItems&&(t.pathGuideItems=e.toGeoJSON(t.pathGuideItems)),t.edgeFeatures&&(t.edgeFeatures=e.toGeoJSON(t.edgeFeatures)),t.nodeFeatures&&(t.nodeFeatures=e.toGeoJSON(t.nodeFeatures))}),t}}])&&um(r.prototype,n),o&&um(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function dm(t){"@babel/helpers - typeof";return(dm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bm(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,vm(n.key),n)}}function vm(t){var e=function(t,e){if("object"!=dm(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=dm(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==dm(e)?e:String(e)}var mm=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.isAnalyzeById=!1,this.isCenterMutuallyExclusive=!1,this.centers=null,this.isFromCenter=!1,this.isReturnComplexArea=!1,this.serviceBufferRadius=100,this.weights=null,this.parameter=new Cb,V.extend(this,e),this.CLASS_NAME="SuperMap.FindServiceAreasParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.isAnalyzeById=null,t.isCenterMutuallyExclusive=null,t.centers=null,t.isFromCenter=null,t.weights=null,t.parameter&&(t.parameter.destroy(),t.parameter=null)}}])&&bm(e.prototype,r),n&&bm(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function gm(t){"@babel/helpers - typeof";return(gm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Sm(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,wm(n.key),n)}}function wm(t){var e=function(t,e){if("object"!=gm(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=gm(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==gm(e)?e:String(e)}function Om(t,e,r){return e=Pm(e),function(t,e){if(e&&("object"===gm(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Pm(t).constructor):e.apply(t,r))}function _m(){return(_m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Pm(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Pm(t){return(Pm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Em(t,e){return(Em=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Cm=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Om(this,e,[t,r])).CLASS_NAME="SuperMap.FindServiceAreasService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Em(t,e)}(e,ab),r=e,(n=[{key:"destroy",value:function(){_m(Pm(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof mm){var r,n=this;return n.url=V.urlPathAppend(n.url,"servicearea"),r={isReturnComplexArea:t.isReturnComplexArea,serviceBufferRadius:t.serviceBufferRadius,isFromCenter:t.isFromCenter,isCenterMutuallyExclusive:t.isCenterMutuallyExclusive,parameter:V.toJSON(t.parameter),centers:n.getJson(t.isAnalyzeById,t.centers),weights:n.getJson(!0,t.weights)},n.request({method:"GET",params:r,scope:n,success:e,failure:e})}}},{key:"getJson",value:function(t,e){var r="[",n=e?e.length:0;if(!1===t)for(var o=0;o<n;o++)o>0&&(r+=","),r+='{"x":'+e[o].x+',"y":'+e[o].y+"}";else if(!0===t)for(var i=0;i<n;i++)i>0&&(r+=","),r+=e[i];return r+="]"}},{key:"toGeoJSONResult",value:function(t){if(!t||!t.serviceAreaList)return t;var e=new cn;return t.serviceAreaList.map(function(t){return t.serviceRegion&&(t.serviceRegion=e.toGeoJSON(t.serviceRegion)),t.edgeFeatures&&(t.edgeFeatures=e.toGeoJSON(t.edgeFeatures)),t.nodeFeatures&&(t.nodeFeatures=e.toGeoJSON(t.nodeFeatures)),t.routes&&(t.routes=e.toGeoJSON(t.routes)),t}),t}}])&&Sm(r.prototype,n),o&&Sm(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function Tm(t){"@babel/helpers - typeof";return(Tm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jm(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,km(n.key),n)}}function km(t){var e=function(t,e){if("object"!=Tm(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Tm(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Tm(e)?e:String(e)}var xm=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.endNodeAssigned=!1,this.isAnalyzeById=!1,this.nodes=null,this.parameter=new Cb,V.extend(this,e),this.CLASS_NAME="SuperMap.FindTSPPathsParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.endNodeAssigned=null,t.isAnalyzeById=null,t.nodes=null,t.parameter&&(t.parameter.destroy(),t.parameter=null)}}])&&jm(e.prototype,r),n&&jm(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Am(t){"@babel/helpers - typeof";return(Am="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Im(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Nm(n.key),n)}}function Nm(t){var e=function(t,e){if("object"!=Am(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Am(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Am(e)?e:String(e)}function Rm(t,e,r){return e=Lm(e),function(t,e){if(e&&("object"===Am(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Lm(t).constructor):e.apply(t,r))}function Mm(){return(Mm="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Lm(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Lm(t){return(Lm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Bm(t,e){return(Bm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Dm=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Rm(this,e,[t,r])).CLASS_NAME="SuperMap.FindTSPPathsService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Bm(t,e)}(e,ab),r=e,(n=[{key:"destroy",value:function(){Mm(Lm(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof xm){var r,n=this;return n.url=V.urlPathAppend(n.url,"tsppath"),r={parameter:V.toJSON(t.parameter),endNodeAssigned:t.endNodeAssigned,nodes:n.getNodesJson(t)},n.request({method:"GET",params:r,scope:n,success:e,failure:e})}}},{key:"getNodesJson",value:function(t){var e,r,n,o,i="";if(!1===t.isAnalyzeById){for(e="[",r=0,n=(o=t.nodes).length;r<n;r++)r>0&&(e+=","),e+='{"x":'+o[r].x+',"y":'+o[r].y+"}";i+=e+="]"}else if(!0===t.isAnalyzeById){for(var a="[",s=t.nodes,u=s.length,l=0;l<u;l++)l>0&&(a+=","),a+=s[l];i+=a+="]"}return i}},{key:"toGeoJSONResult",value:function(t){if(!t||!t.tspPathList)return null;var e=new cn;return t.tspPathList.forEach(function(t){t.route&&(t.route=e.toGeoJSON(t.route)),t.pathGuideItems&&(t.pathGuideItems=e.toGeoJSON(t.pathGuideItems)),t.edgeFeatures&&(t.edgeFeatures=e.toGeoJSON(t.edgeFeatures)),t.nodeFeatures&&(t.nodeFeatures=e.toGeoJSON(t.nodeFeatures))}),t}}])&&Im(r.prototype,n),o&&Im(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function Fm(t){"@babel/helpers - typeof";return(Fm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Um(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Gm(n.key),n)}}function Gm(t){var e=function(t,e){if("object"!=Fm(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Fm(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Fm(e)?e:String(e)}var Vm=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.edgeId="",this.fromNodeId="",this.toNodeId="",this.weightField="",this.edgeWeight="",V.extend(this,e),this.CLASS_NAME="SuperMap.UpdateEdgeWeightParameters")}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.edgeId=null,this.fromNodeId=null,this.toNodeId=null,this.weightField=null,this.edgeWeight=null}}])&&Um(e.prototype,r),n&&Um(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function qm(t){"@babel/helpers - typeof";return(qm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hm(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,zm(n.key),n)}}function zm(t){var e=function(t,e){if("object"!=qm(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=qm(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==qm(e)?e:String(e)}function Jm(t,e,r){return e=Km(e),function(t,e){if(e&&("object"===qm(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Km(t).constructor):e.apply(t,r))}function Wm(){return(Wm="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Km(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Km(t){return(Km=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Qm(t,e){return(Qm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Ym=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Jm(this,e,[t,r])).CLASS_NAME="SuperMap.UpdateEdgeWeightService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Qm(t,e)}(e,ab),r=e,(n=[{key:"destroy",value:function(){Wm(Km(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof Vm){var r=this,n=r.parse(t);r.url=V.urlPathAppend(r.url,n);var o=t.edgeWeight?t.edgeWeight:null;return r.request({method:"PUT",scope:r,data:o,success:e,failure:e})}}},{key:"parse",value:function(t){if(t){var e="";for(var r in t)if(""!==t[r]&&"edgeWeight"!==t[r])switch(r){case"edgeId":e+="/edgeweight/"+t[r];break;case"fromNodeId":e+="/fromnode/"+t[r];break;case"toNodeId":e+="/tonode/"+t[r];break;case"weightField":e+="/weightfield/"+t[r]}return e}}}])&&Hm(r.prototype,n),o&&Hm(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function Xm(t){"@babel/helpers - typeof";return(Xm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zm(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,$m(n.key),n)}}function $m(t){var e=function(t,e){if("object"!=Xm(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Xm(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Xm(e)?e:String(e)}var tg=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.nodeId="",this.fromEdgeId="",this.toEdgeId="",this.weightField="",this.turnNodeWeight="",V.extend(this,e),this.CLASS_NAME="SuperMap.UpdateTurnNodeWeightParameters")}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.nodeId=null,this.fromEdgeId=null,this.toEdgeId=null,this.weightField=null,this.turnNodeWeight=null}}])&&Zm(e.prototype,r),n&&Zm(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function eg(t){"@babel/helpers - typeof";return(eg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rg(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ng(n.key),n)}}function ng(t){var e=function(t,e){if("object"!=eg(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=eg(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==eg(e)?e:String(e)}function og(t,e,r){return e=ag(e),function(t,e){if(e&&("object"===eg(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],ag(t).constructor):e.apply(t,r))}function ig(){return(ig="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ag(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function ag(t){return(ag=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function sg(t,e){return(sg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var ug=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=og(this,e,[t,r])).CLASS_NAME="SuperMap.UpdateTurnNodeWeightService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sg(t,e)}(e,ab),r=e,(n=[{key:"destroy",value:function(){ig(ag(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof tg){var r=this,n=r.parse(t);r.url=V.urlPathAppend(r.url,n);var o=t.turnNodeWeight?t.turnNodeWeight:null;return r.request({method:"PUT",scope:r,data:o,success:e,failure:e})}}},{key:"parse",value:function(t){if(t){var e="";for(var r in t)if(""!==t[r]&&"turnNodeWeight"!==t[r])switch(r){case"nodeId":e+="/turnnodeweight/"+t[r];break;case"fromEdgeId":e+="/fromedge/"+t[r];break;case"toEdgeId":e+="/toedge/"+t[r];break;case"weightField":e+="/weightfield/"+t[r]}return e}}}])&&rg(r.prototype,n),o&&rg(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function lg(t){"@babel/helpers - typeof";return(lg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cg(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,fg(n.key),n)}}function fg(t){var e=function(t,e){if("object"!=lg(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=lg(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==lg(e)?e:String(e)}var pg=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=e,this.options=r||{}}var e,r,n;return e=t,(r=[{key:"burstPipelineAnalyst",value:function(t,e){var r=this;return new mb(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}},{key:"computeWeightMatrix",value:function(t,e){var r=this;return new Db(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}},{key:"findClosestFacilities",value:function(t,e,r){var n=this;return new Iv(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"traceAnalyst",value:function(t,e,r){var n=this;return new uv(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"connectedEdgesAnalyst",value:function(t,e,r){var n=this;return new Sv(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"streamFacilityAnalyst",value:function(t,e,r){var n=this;return new Yb(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"findLocation",value:function(t,e,r){var n=this;return new Hv(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"findPath",value:function(t,e,r){var n=this;return new ym(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"findTSPPaths",value:function(t,e,r){var n=this;return new Dm(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"findMTSPPaths",value:function(t,e,r){var n=this;return new rm(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"findServiceAreas",value:function(t,e,r){var n=this;return new Cm(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"updateEdgeWeight",value:function(t,e){var r=this;return new Ym(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}},{key:"updateTurnNodeWeight",value:function(t,e){var r=this;return new ug(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}},{key:"_processFormat",value:function(t){return t||lr.GEOJSON}}])&&cg(e.prototype,r),n&&cg(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function hg(t){"@babel/helpers - typeof";return(hg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yg(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,dg(n.key),n)}}function dg(t){var e=function(t,e){if("object"!=hg(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=hg(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==hg(e)?e:String(e)}function bg(t,e,r){return e=vg(e),function(t,e){if(e&&("object"===hg(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],vg(t).constructor):e.apply(t,r))}function vg(t){return(vg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function mg(t,e){return(mg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var gg=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=bg(this,e,[t,r]))._networkAnalystService=new pg(t,r),n}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mg(t,e)}(e,An),r=e,(n=[{key:"burstPipelineAnalyst",value:function(t,e){return t=this._processParams(t),this._networkAnalystService.burstPipelineAnalyst(t,e)}},{key:"computeWeightMatrix",value:function(t,e){return t=this._processParams(t),this._networkAnalystService.computeWeightMatrix(t,e)}},{key:"findClosestFacilities",value:function(t,e,r){return t=this._processParams(t),this._networkAnalystService.findClosestFacilities(t,e,r)}},{key:"traceAnalyst",value:function(t,e,r){return t=this._processParams(t),this._networkAnalystService.traceAnalyst(t,e,r)}},{key:"connectedEdgesAnalyst",value:function(t,e,r){return t=this._processParams(t),this._networkAnalystService.connectedEdgesAnalyst(t,e,r)}},{key:"streamFacilityAnalyst",value:function(t,e,r){return t=this._processParams(t),this._networkAnalystService.streamFacilityAnalyst(t,e,r)}},{key:"findLocation",value:function(t,e,r){return t=this._processParams(t),this._networkAnalystService.findLocation(t,e,r)}},{key:"findPath",value:function(t,e,r){return t=this._processParams(t),this._networkAnalystService.findPath(t,e,r)}},{key:"findTSPPaths",value:function(t,e,r){return t=this._processParams(t),this._networkAnalystService.findTSPPaths(t,e,r)}},{key:"findMTSPPaths",value:function(t,e,r){return t=this._processParams(t),this._networkAnalystService.findMTSPPaths(t,e,r)}},{key:"findServiceAreas",value:function(t,e,r){return t=this._processParams(t),this._networkAnalystService.findServiceAreas(t,e,r)}},{key:"updateEdgeWeight",value:function(t,e){return this._networkAnalystService.updateEdgeWeight(t,e)}},{key:"updateTurnNodeWeight",value:function(t,e){return this._networkAnalystService.updateTurnNodeWeight(t,e)}},{key:"_processParams",value:function(t){if(!t)return{};var e=this;if(t.centers&&hn.isArray(t.centers)&&t.centers.map(function(r,n){return t.centers[n]=e._toPointObject(r),t.centers[n]}),t.nodes&&hn.isArray(t.nodes)&&t.nodes.map(function(r,n){return t.nodes[n]=e._toPointObject(r),t.nodes[n]}),t.event&&(t.event=e._toPointObject(t.event)),t.facilities&&hn.isArray(t.facilities)&&t.facilities.map(function(r,n){return t.facilities[n]=e._toPointObject(r),t.facilities[n]}),t.parameter&&t.parameter.barrierPoints){var r=t.parameter.barrierPoints;hn.isArray(r)?r.map(function(r,n){return t.parameter[n]=e._toPointObject(r),t.parameter.barrierPoints[n]}):t.parameter.barrierPoints=[r instanceof o().LngLat?{x:r.lng,y:r.lat}:r]}return t}},{key:"_toPointObject",value:function(t){return hn.isArray(t)?{x:t[0],y:t[1]}:t instanceof o().LngLat?{x:t.lng,y:t.lat}:t instanceof o().Point?{x:t.x,y:t.y}:t}},{key:"_processFormat",value:function(t){return t||lr.GEOJSON}}])&&yg(r.prototype,n),i&&yg(r,i),Object.defineProperty(r,"prototype",{writable:!1}),e}();function Sg(t){"@babel/helpers - typeof";return(Sg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wg(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Og(n.key),n)}}function Og(t){var e=function(t,e){if("object"!=Sg(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Sg(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Sg(e)?e:String(e)}var _g=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.edgeID=null,this.nodeID=null,this.weightName=null,this.isUncertainDirectionValid=!1,V.extend(this,e),this.CLASS_NAME="SuperMap.FacilityAnalyst3DParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.edgeID=null,this.nodeID=null,this.weightName=null,this.isUncertainDirectionValid=null}}])&&wg(e.prototype,r),n&&wg(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Pg(t){"@babel/helpers - typeof";return(Pg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Eg(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Cg(n.key),n)}}function Cg(t){var e=function(t,e){if("object"!=Pg(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Pg(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Pg(e)?e:String(e)}function Tg(t,e,r){return e=kg(e),function(t,e){if(e&&("object"===Pg(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],kg(t).constructor):e.apply(t,r))}function jg(){return(jg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=kg(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function kg(t){return(kg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function xg(t,e){return(xg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Ag=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Tg(this,e,[t])).CLASS_NAME="SuperMap.FacilityAnalystSinks3DParameters",r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xg(t,e)}(e,_g),r=e,(n=[{key:"destroy",value:function(){jg(kg(e.prototype),"destroy",this).call(this)}}])&&Eg(r.prototype,n),o&&Eg(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function Ig(t){"@babel/helpers - typeof";return(Ig="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ng(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Rg(n.key),n)}}function Rg(t){var e=function(t,e){if("object"!=Ig(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ig(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ig(e)?e:String(e)}function Mg(t,e,r){return e=Lg(e),function(t,e){if(e&&("object"===Ig(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Lg(t).constructor):e.apply(t,r))}function Lg(t){return(Lg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Bg(t,e){return(Bg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Dg=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Mg(this,e,[t,r])).CLASS_NAME="SuperMap.FacilityAnalystSinks3DService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Bg(t,e)}(e,oo),r=e,(n=[{key:"destroy",value:function(){oo.prototype.destroy.apply(this,arguments)}},{key:"processAsync",value:function(t,e){if(t instanceof Ag){var r;return this.url=V.urlPathAppend(this.url,"sinks"),r={edgeID:t.edgeID,nodeID:t.nodeID,weightName:t.weightName,isUncertainDirectionValid:t.isUncertainDirectionValid},this.request({method:"GET",params:r,scope:this,success:e,failure:e})}}}])&&Ng(r.prototype,n),o&&Ng(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function Fg(t){"@babel/helpers - typeof";return(Fg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ug(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Gg(n.key),n)}}function Gg(t){var e=function(t,e){if("object"!=Fg(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Fg(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Fg(e)?e:String(e)}function Vg(t,e,r){return e=Hg(e),function(t,e){if(e&&("object"===Fg(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Hg(t).constructor):e.apply(t,r))}function qg(){return(qg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Hg(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Hg(t){return(Hg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function zg(t,e){return(zg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Jg=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Vg(this,e,[t])).CLASS_NAME="SuperMap.FacilityAnalystSources3DParameters",r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zg(t,e)}(e,_g),r=e,(n=[{key:"destroy",value:function(){qg(Hg(e.prototype),"destroy",this).call(this)}}])&&Ug(r.prototype,n),o&&Ug(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function Wg(t){"@babel/helpers - typeof";return(Wg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Kg(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Qg(n.key),n)}}function Qg(t){var e=function(t,e){if("object"!=Wg(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Wg(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Wg(e)?e:String(e)}function Yg(t,e,r){return e=Zg(e),function(t,e){if(e&&("object"===Wg(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Zg(t).constructor):e.apply(t,r))}function Xg(){return(Xg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Zg(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Zg(t){return(Zg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function $g(t,e){return($g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var tS=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Yg(this,e,[t,r])).CLASS_NAME="SuperMap.FacilityAnalystSources3DService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$g(t,e)}(e,oo),r=e,(n=[{key:"destroy",value:function(){Xg(Zg(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof Jg){var r;return this.url=V.urlPathAppend(this.url,"sources"),r={edgeID:t.edgeID,nodeID:t.nodeID,weightName:t.weightName,isUncertainDirectionValid:t.isUncertainDirectionValid},this.request({method:"GET",params:r,scope:this,success:e,failure:e})}}}])&&Kg(r.prototype,n),o&&Kg(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function eS(t){"@babel/helpers - typeof";return(eS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rS(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,nS(n.key),n)}}function nS(t){var e=function(t,e){if("object"!=eS(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=eS(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==eS(e)?e:String(e)}function oS(t,e,r){return e=aS(e),function(t,e){if(e&&("object"===eS(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],aS(t).constructor):e.apply(t,r))}function iS(){return(iS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=aS(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function aS(t){return(aS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function sS(t,e){return(sS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var uS=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=oS(this,e,[t])).CLASS_NAME="SuperMap.FacilityAnalystTraceup3DParameters",r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sS(t,e)}(e,_g),r=e,(n=[{key:"destroy",value:function(){iS(aS(e.prototype),"destroy",this).call(this)}}])&&rS(r.prototype,n),o&&rS(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function lS(t){"@babel/helpers - typeof";return(lS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cS(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,fS(n.key),n)}}function fS(t){var e=function(t,e){if("object"!=lS(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=lS(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==lS(e)?e:String(e)}function pS(t,e,r){return e=yS(e),function(t,e){if(e&&("object"===lS(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],yS(t).constructor):e.apply(t,r))}function hS(){return(hS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=yS(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function yS(t){return(yS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function dS(t,e){return(dS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var bS=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=pS(this,e,[t,r])).CLASS_NAME="SuperMap.FacilityAnalystTraceup3DService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dS(t,e)}(e,oo),r=e,(n=[{key:"destroy",value:function(){hS(yS(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof uS){var r;return this.url=V.urlPathAppend(this.url,"traceupresult"),r={edgeID:t.edgeID,nodeID:t.nodeID,weightName:t.weightName,isUncertainDirectionValid:t.isUncertainDirectionValid},this.request({method:"GET",params:r,scope:this,success:e,failure:e})}}}])&&cS(r.prototype,n),o&&cS(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function vS(t){"@babel/helpers - typeof";return(vS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mS(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,gS(n.key),n)}}function gS(t){var e=function(t,e){if("object"!=vS(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=vS(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==vS(e)?e:String(e)}function SS(t,e,r){return e=OS(e),function(t,e){if(e&&("object"===vS(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],OS(t).constructor):e.apply(t,r))}function wS(){return(wS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=OS(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function OS(t){return(OS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _S(t,e){return(_S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var PS=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=SS(this,e,[t])).CLASS_NAME="SuperMap.FacilityAnalystTracedown3DParameters",r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_S(t,e)}(e,_g),r=e,(n=[{key:"destroy",value:function(){wS(OS(e.prototype),"destroy",this).call(this)}}])&&mS(r.prototype,n),o&&mS(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function ES(t){"@babel/helpers - typeof";return(ES="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function CS(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,TS(n.key),n)}}function TS(t){var e=function(t,e){if("object"!=ES(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ES(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ES(e)?e:String(e)}function jS(t,e,r){return e=xS(e),function(t,e){if(e&&("object"===ES(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],xS(t).constructor):e.apply(t,r))}function kS(){return(kS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=xS(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function xS(t){return(xS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function AS(t,e){return(AS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var IS=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=jS(this,e,[t,r])).CLASS_NAME="SuperMap.FacilityAnalystTracedown3DService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&AS(t,e)}(e,oo),r=e,(n=[{key:"destroy",value:function(){kS(xS(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof PS){var r;return this.url=V.urlPathAppend(this.url,"tracedownresult"),r={edgeID:t.edgeID,nodeID:t.nodeID,weightName:t.weightName,isUncertainDirectionValid:t.isUncertainDirectionValid},this.request({method:"GET",params:r,scope:this,success:e,failure:e})}}}])&&CS(r.prototype,n),o&&CS(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function NS(t){"@babel/helpers - typeof";return(NS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function RS(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,MS(n.key),n)}}function MS(t){var e=function(t,e){if("object"!=NS(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=NS(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==NS(e)?e:String(e)}function LS(t,e,r){return e=FS(e),function(t,e){if(e&&("object"===NS(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return BS(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],FS(t).constructor):e.apply(t,r))}function BS(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function DS(){return(DS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=FS(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function FS(t){return(FS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function US(t,e){return(US=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var GS=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=LS(this,e,[t]),t=t||{},r.sourceNodeIDs=null,V.extend(BS(r),t),r.CLASS_NAME="SuperMap.FacilityAnalystUpstream3DParameters",r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&US(t,e)}(e,_g),r=e,(n=[{key:"destroy",value:function(){DS(FS(e.prototype),"destroy",this).call(this),this.sourceNodeIDs=null}}])&&RS(r.prototype,n),o&&RS(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function VS(t){"@babel/helpers - typeof";return(VS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qS(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,HS(n.key),n)}}function HS(t){var e=function(t,e){if("object"!=VS(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=VS(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==VS(e)?e:String(e)}function zS(t,e,r){return e=WS(e),function(t,e){if(e&&("object"===VS(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],WS(t).constructor):e.apply(t,r))}function JS(){return(JS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=WS(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function WS(t){return(WS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function KS(t,e){return(KS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var QS=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=zS(this,e,[t,r])).CLASS_NAME="SuperMap.FacilityAnalystUpstream3DService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&KS(t,e)}(e,oo),r=e,(n=[{key:"destroy",value:function(){JS(WS(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof GS){var r;return this.url=V.urlPathAppend(this.url,"upstreamcirticalfaclilities"),r={sourceNodeIDs:t.sourceNodeIDs,edgeID:t.edgeID,nodeID:t.nodeID,isUncertainDirectionValid:t.isUncertainDirectionValid},this.request({method:"GET",params:r,scope:this,success:e,failure:e})}}}])&&qS(r.prototype,n),o&&qS(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function YS(t){"@babel/helpers - typeof";return(YS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function XS(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ZS(n.key),n)}}function ZS(t){var e=function(t,e){if("object"!=YS(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=YS(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==YS(e)?e:String(e)}var $S=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=e,this.options=r||{}}var e,r,n;return e=t,(r=[{key:"sinksFacilityAnalyst",value:function(t,e){var r=this;return new Dg(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}},{key:"sourcesFacilityAnalyst",value:function(t,e){var r=this;return new tS(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}},{key:"traceUpFacilityAnalyst",value:function(t,e){var r=this;return new bS(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}},{key:"traceDownFacilityAnalyst",value:function(t,e){var r=this;return new IS(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}},{key:"upstreamFacilityAnalyst",value:function(t,e){var r=this;return new QS(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}}])&&XS(e.prototype,r),n&&XS(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function tw(t){"@babel/helpers - typeof";return(tw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ew(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,rw(n.key),n)}}function rw(t){var e=function(t,e){if("object"!=tw(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=tw(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==tw(e)?e:String(e)}function nw(t,e,r){return e=ow(e),function(t,e){if(e&&("object"===tw(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],ow(t).constructor):e.apply(t,r))}function ow(t){return(ow=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function iw(t,e){return(iw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var aw=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=nw(this,e,[t,r]))._networkAnalyst3DService=new $S(t,r),n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&iw(t,e)}(e,An),r=e,(n=[{key:"sinksFacilityAnalyst",value:function(t,e){return this._networkAnalyst3DService.sinksFacilityAnalyst(t,e)}},{key:"sourcesFacilityAnalyst",value:function(t,e){return this._networkAnalyst3DService.sourcesFacilityAnalyst(t,e)}},{key:"traceUpFacilityAnalyst",value:function(t,e){return this._networkAnalyst3DService.traceUpFacilityAnalyst(t,e)}},{key:"traceDownFacilityAnalyst",value:function(t,e){return this._networkAnalyst3DService.traceDownFacilityAnalyst(t,e)}},{key:"upstreamFacilityAnalyst",value:function(t,e){return this._networkAnalyst3DService.upstreamFacilityAnalyst(t,e)}}])&&ew(r.prototype,n),o&&ew(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function sw(t){"@babel/helpers - typeof";return(sw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function uw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,lw(n.key),n)}}function lw(t){var e=function(t,e){if("object"!=sw(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=sw(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==sw(e)?e:String(e)}function cw(t,e,r){return e=pw(e),function(t,e){if(e&&("object"===sw(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],pw(t).constructor):e.apply(t,r))}function fw(){return(fw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=pw(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function pw(t){return(pw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function hw(t,e){return(hw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var yw=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=cw(this,e,[t,r=r||{}])).CLASS_NAME="SuperMap.ProcessingServiceBase",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hw(t,e)}(e,oo),r=e,(n=[{key:"destroy",value:function(){fw(pw(e.prototype),"destroy",this).call(this)}},{key:"getJobs",value:function(t,e){var r=this;return Dn.get(Xn.appendCredential(t),null,{proxy:r.proxy}).then(function(t){return t.json()}).then(function(t){var n={result:t,object:r,type:"processCompleted"};return e(n),n}).catch(function(t){var n={error:t,object:r,type:"processFailed"};return e(n),n})}},{key:"addJob",value:function(t,e,r,n,o,i){var a=this,s=null;e&&e instanceof r&&(s=new Object,r.toObject(e,s));var u=Object.assign({"Content-Type":"application/x-www-form-urlencoded"},a.headers||{}),l={proxy:a.proxy,headers:u,withCredentials:a.withCredentials,crossOrigin:a.crossOrigin,isInTheSameDomain:a.isInTheSameDomain};return Dn.post(Xn.appendCredential(t),JSON.stringify(s),l).then(function(t){return t.json()}).then(function(t){return t.succeed?a.transformResult(t,n,o,i):((t=a.transformErrorResult(t)).options=a,t.type="processFailed",o(t),t)}).catch(function(t){return(t=a.transformErrorResult({error:t})).options=a,t.type="processFailed",o(t),t})}},{key:"transformResult",value:function(t,e,r,n){t=V.transformResult(t),e=e||1e3;var o=this;if(t)return new Promise(function(i){var a=setInterval(function(){Dn.get(Xn.appendCredential(t.newResourceLocation),{_t:(new Date).getTime()}).then(function(t){return t.json()}).then(function(t){if(i({object:o,id:t.id,state:t.state}),n({id:t.id,state:t.state,object:o}),"LOST"===t.state.runState||"KILLED"===t.state.runState||"FAILED"===t.state.runState){clearInterval(a);var e={error:t.state.errorMsg,state:t.state.runState,object:o,type:"processFailed"};i(e),r(e)}if("FINISHED"===t.state.runState&&t.setting.serviceInfo){clearInterval(a);var s={result:t,object:o,type:"processCompleted"};i(s),r(s)}}).catch(function(t){clearInterval(a);var e={error:t,object:o,type:"processFailed"};i(e),r(e)})},e)})}}])&&uw(r.prototype,n),o&&uw(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function dw(t){"@babel/helpers - typeof";return(dw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,vw(n.key),n)}}function vw(t){var e=function(t,e){if("object"!=dw(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=dw(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==dw(e)?e:String(e)}var mw=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.alias=null,this.connect=null,this.dataBase=null,this.driver=null,this.engineType=null,this.exclusive=null,this.OpenLinkTable=null,this.password=null,this.readOnly=null,this.server=null,this.user=null,e&&V.extend(this,e),this.CLASS_NAME="SuperMap.DatasourceConnectionInfo"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.alias=null,t.connect=null,t.dataBase=null,t.driver=null,t.engineType=null,t.exclusive=null,t.OpenLinkTable=null,t.password=null,t.readOnly=null,t.server=null,t.user=null}}])&&bw(e.prototype,r),n&&bw(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function gw(t){"@babel/helpers - typeof";return(gw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Sw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ww(n.key),n)}}function ww(t){var e=function(t,e){if("object"!=gw(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=gw(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==gw(e)?e:String(e)}var Ow=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.type=kr.UDB,this.datasetName="analystResult",this.datasourceInfo=null,this.outputPath="",V.extend(this,e),this.CLASS_NAME="SuperMap.OutputSetting"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.type=null,t.datasetName=null,t.outputPath=null,t.datasourceInfo instanceof mw&&(t.datasourceInfo.destroy(),t.datasourceInfo=null)}}])&&Sw(e.prototype,r),n&&Sw(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function _w(t){"@babel/helpers - typeof";return(_w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ew(n.key),n)}}function Ew(t){var e=function(t,e){if("object"!=_w(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=_w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==_w(e)?e:String(e)}var Cw=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.items=null,this.numericPrecision=1,this.rangeMode=wr.EQUALINTERVAL,this.rangeCount="",this.colorGradientType=Or.YELLOW_RED,V.extend(this,e),this.CLASS_NAME="SuperMap.MappingParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;if(t.items){if(t.items.length>0)for(var e in t.items)t.items[e].destroy(),t.items[e]=null;t.items=null}t.numericPrecision=null,t.rangeMode=null,t.rangeCount=null,t.colorGradientType=null}}])&&Pw(e.prototype,r),n&&Pw(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Tw(t){"@babel/helpers - typeof";return(Tw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,kw(n.key),n)}}function kw(t){var e=function(t,e){if("object"!=Tw(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Tw(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Tw(e)?e:String(e)}var xw=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.datasetName="",this.query="",this.resolution=80,this.method=0,this.meshType=0,this.fields="",this.radius=300,this.meshSizeUnit=Gr.METER,this.radiusUnit=Gr.METER,this.areaUnit=Ur.SQUAREMILE,this.output=null,this.mappingParameters=null,V.extend(this,e),this.CLASS_NAME="SuperMap.KernelDensityJobParameter")}var e,r,n;return e=t,n=[{key:"toObject",value:function(t,e){for(var r in t)"datasetName"!==r?"output"!==r?(e.analyst=e.analyst||{},"query"===r&&t[r]?e.analyst[r]=t[r].toBBOX():e.analyst[r]=t[r],"mappingParameters"===r&&(e.analyst[r]=e.analyst[r]||{},e.analyst.mappingParameters=t[r])):(e.output=e.output||{},e.output=t[r]):(e.input=e.input||{},e.input[r]=t[r])}}],(r=[{key:"destroy",value:function(){this.datasetName=null,this.query=null,this.resolution=null,this.method=null,this.radius=null,this.meshType=null,this.fields=null,this.meshSizeUnit=null,this.radiusUnit=null,this.areaUnit=null,this.output instanceof Ow&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof Cw&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&jw(e.prototype,r),n&&jw(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Aw(t){"@babel/helpers - typeof";return(Aw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Iw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Nw(n.key),n)}}function Nw(t){var e=function(t,e){if("object"!=Aw(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Aw(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Aw(e)?e:String(e)}function Rw(t,e,r){return e=Lw(e),function(t,e){if(e&&("object"===Aw(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Lw(t).constructor):e.apply(t,r))}function Mw(){return(Mw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Lw(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Lw(t){return(Lw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Bw(t,e){return(Bw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Dw=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Rw(this,e,[t,r])).url=V.urlPathAppend(n.url,"spatialanalyst/density"),n.CLASS_NAME="SuperMap.KernelDensityJobsService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Bw(t,e)}(e,yw),r=e,(n=[{key:"destroy",value:function(){Mw(Lw(e.prototype),"destroy",this).call(this)}},{key:"getKernelDensityJobs",value:function(t){return Mw(Lw(e.prototype),"getJobs",this).call(this,this.url,t)}},{key:"getKernelDensityJob",value:function(t,r){return Mw(Lw(e.prototype),"getJobs",this).call(this,V.urlPathAppend(this.url,t),r)}},{key:"addKernelDensityJob",value:function(t,r,n,o){return Mw(Lw(e.prototype),"addJob",this).call(this,this.url,t,xw,r,n,o)}}])&&Iw(r.prototype,n),o&&Iw(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function Fw(t){"@babel/helpers - typeof";return(Fw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Uw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Gw(n.key),n)}}function Gw(t){var e=function(t,e){if("object"!=Fw(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Fw(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Fw(e)?e:String(e)}var Vw=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.datasetName="",this.datasetQuery="",this.geometryQuery="",this.mode=hr.CONTAIN,this.output=null,this.mappingParameters=null,V.extend(this,e),this.CLASS_NAME="SuperMap.SingleObjectQueryJobsParameter")}var e,r,n;return e=t,n=[{key:"toObject",value:function(t,e){for(var r in t)"datasetName"!==r?"output"!==r?(e.analyst=e.analyst||{},e.analyst[r]=t[r],"mappingParameters"===r&&(e.analyst[r]=e.analyst[r]||{},e.analyst.mappingParameters=t[r])):(e.output=e.output||{},e.output=t[r]):(e.input=e.input||{},e.input[r]=t[r])}}],(r=[{key:"destroy",value:function(){this.datasetName=null,this.datasetQuery=null,this.geometryQuery=null,this.mode=null,this.output instanceof Ow&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof Cw&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&Uw(e.prototype,r),n&&Uw(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function qw(t){"@babel/helpers - typeof";return(qw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,zw(n.key),n)}}function zw(t){var e=function(t,e){if("object"!=qw(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=qw(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==qw(e)?e:String(e)}function Jw(t,e,r){return e=Kw(e),function(t,e){if(e&&("object"===qw(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Kw(t).constructor):e.apply(t,r))}function Ww(){return(Ww="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Kw(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Kw(t){return(Kw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Qw(t,e){return(Qw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Yw=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Jw(this,e,[t,r])).url=V.urlPathAppend(n.url,"spatialanalyst/query"),n.CLASS_NAME="SuperMap.SingleObjectQueryJobsService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Qw(t,e)}(e,yw),r=e,(n=[{key:"destroy",value:function(){Ww(Kw(e.prototype),"destroy",this).call(this)}},{key:"getQueryJobs",value:function(t){return Ww(Kw(e.prototype),"getJobs",this).call(this,this.url,t)}},{key:"getQueryJob",value:function(t,r){return Ww(Kw(e.prototype),"getJobs",this).call(this,V.urlPathAppend(this.url,t),r)}},{key:"addQueryJob",value:function(t,r,n,o){return Ww(Kw(e.prototype),"addJob",this).call(this,this.url,t,Vw,r,n,o)}}])&&Hw(r.prototype,n),o&&Hw(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function Xw(t){"@babel/helpers - typeof";return(Xw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,$w(n.key),n)}}function $w(t){var e=function(t,e){if("object"!=Xw(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Xw(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Xw(e)?e:String(e)}var tO=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.datasetName="",this.regionDataset="",this.query="",this.resolution=100,this.meshType=0,this.statisticModes=Vr.AVERAGE,this.fields="",this.type=qr.SUMMARYMESH,this.output=null,this.mappingParameters=null,V.extend(this,e),this.CLASS_NAME="SuperMap.SummaryMeshJobParameter")}var e,r,n;return e=t,n=[{key:"toObject",value:function(t,e){for(var r in t)"datasetName"!==r?"type"!==r?"output"!==r?("SUMMARYMESH"===t.type&&"regionDataset"!==r||"SUMMARYREGION"===t.type&&!n(["meshType","resolution","query"],r))&&(e.analyst=e.analyst||{},"query"===r&&t[r]?e.analyst[r]=t[r].toBBOX():e.analyst[r]=t[r],"mappingParameters"===r&&(e.analyst[r]=e.analyst[r]||{},e.analyst.mappingParameters=t[r])):(e.output=e.output||{},e.output=t[r]):e.type=t[r]:(e.input=e.input||{},e.input[r]=t[r]);function n(t,e){for(var r=t.length;r--;)if(t[r]===e)return!0;return!1}}}],(r=[{key:"destroy",value:function(){this.datasetName=null,this.query=null,this.resolution=null,this.statisticModes=null,this.meshType=null,this.fields=null,this.regionDataset=null,this.type=null,this.output instanceof Ow&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof Cw&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&Zw(e.prototype,r),n&&Zw(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function eO(t){"@babel/helpers - typeof";return(eO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,nO(n.key),n)}}function nO(t){var e=function(t,e){if("object"!=eO(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=eO(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==eO(e)?e:String(e)}function oO(t,e,r){return e=aO(e),function(t,e){if(e&&("object"===eO(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],aO(t).constructor):e.apply(t,r))}function iO(){return(iO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=aO(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function aO(t){return(aO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function sO(t,e){return(sO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var uO=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=oO(this,e,[t,r])).url=V.urlPathAppend(n.url,"spatialanalyst/aggregatepoints"),n.CLASS_NAME="SuperMap.SummaryMeshJobsService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sO(t,e)}(e,yw),r=e,(n=[{key:"destroy",value:function(){iO(aO(e.prototype),"destroy",this).call(this)}},{key:"getSummaryMeshJobs",value:function(t){return iO(aO(e.prototype),"getJobs",this).call(this,this.url,t)}},{key:"getSummaryMeshJob",value:function(t,r){return iO(aO(e.prototype),"getJobs",this).call(this,V.urlPathAppend(this.url,t),r)}},{key:"addSummaryMeshJob",value:function(t,r,n,o){return iO(aO(e.prototype),"addJob",this).call(this,this.url,t,tO,r,n,o)}}])&&rO(r.prototype,n),o&&rO(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function lO(t){"@babel/helpers - typeof";return(lO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,fO(n.key),n)}}function fO(t){var e=function(t,e){if("object"!=lO(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=lO(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==lO(e)?e:String(e)}var pO=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.datasetName="",this.datasetVectorClip="",this.geometryClip="",this.mode=Fr.CLIP,this.output=null,this.mappingParameters=null,V.extend(this,e),this.CLASS_NAME="SuperMap.VectorClipJobsParameter"}var e,r,n;return e=t,n=[{key:"toObject",value:function(t,e){for(var r in t)"datasetName"!==r?"output"!==r?(e.analyst=e.analyst||{},e.analyst[r]=t[r],"mappingParameters"===r&&(e.analyst[r]=e.analyst[r]||{},e.analyst.mappingParameters=t[r])):(e.output=e.output||{},e.output=t[r]):(e.input=e.input||{},e.input[r]=t[r])}}],(r=[{key:"destroy",value:function(){this.datasetName=null,this.datasetVectorClip=null,this.geometryClip=null,this.mode=null,this.output instanceof Ow&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof Cw&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&cO(e.prototype,r),n&&cO(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function hO(t){"@babel/helpers - typeof";return(hO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,dO(n.key),n)}}function dO(t){var e=function(t,e){if("object"!=hO(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=hO(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==hO(e)?e:String(e)}function bO(t,e,r){return e=mO(e),function(t,e){if(e&&("object"===hO(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],mO(t).constructor):e.apply(t,r))}function vO(){return(vO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=mO(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function mO(t){return(mO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function gO(t,e){return(gO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var SO=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=bO(this,e,[t,r])).url=V.urlPathAppend(n.url,"spatialanalyst/vectorclip"),n.CLASS_NAME="SuperMap.VectorClipJobsService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gO(t,e)}(e,yw),r=e,(n=[{key:"destroy",value:function(){vO(mO(e.prototype),"destroy",this).call(this)}},{key:"getVectorClipJobs",value:function(t){return vO(mO(e.prototype),"getJobs",this).call(this,this.url,t)}},{key:"getVectorClipJob",value:function(t,r){return vO(mO(e.prototype),"getJobs",this).call(this,V.urlPathAppend(this.url,t),r)}},{key:"addVectorClipJob",value:function(t,r,n,o){return vO(mO(e.prototype),"addJob",this).call(this,this.url,t,pO,r,n,o)}}])&&yO(r.prototype,n),o&&yO(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function wO(t){"@babel/helpers - typeof";return(wO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function OO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_O(n.key),n)}}function _O(t){var e=function(t,e){if("object"!=wO(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=wO(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==wO(e)?e:String(e)}var PO=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.datasetName="",this.datasetOverlay="",this.mode="",this.srcFields="",this.overlayFields="",this.output=null,this.mappingParameters=null,V.extend(this,e),this.CLASS_NAME="SuperMap.OverlayGeoJobParameter")}var e,r,n;return e=t,n=[{key:"toObject",value:function(t,e){for(var r in t)"datasetName"!=r?"output"!==r?(e.analyst=e.analyst||{},e.analyst[r]=t[r],"mappingParameters"===r&&(e.analyst[r]=e.analyst[r]||{},e.analyst.mappingParameters=t[r])):(e.output=e.output||{},e.output=t[r]):(e.input=e.input||{},e.input[r]=t[r])}}],(r=[{key:"destroy",value:function(){this.datasetName=null,this.datasetOverlay=null,this.mode=null,this.srcFields=null,this.overlayFields=null,this.output instanceof Ow&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof Cw&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&OO(e.prototype,r),n&&OO(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function EO(t){"@babel/helpers - typeof";return(EO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function CO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,TO(n.key),n)}}function TO(t){var e=function(t,e){if("object"!=EO(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=EO(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==EO(e)?e:String(e)}function jO(t,e,r){return e=xO(e),function(t,e){if(e&&("object"===EO(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],xO(t).constructor):e.apply(t,r))}function kO(){return(kO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=xO(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function xO(t){return(xO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function AO(t,e){return(AO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var IO=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=jO(this,e,[t,r])).url=V.urlPathAppend(n.url,"spatialanalyst/overlay"),n.CLASS_NAME="SuperMap.OverlayGeoJobsService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&AO(t,e)}(e,yw),r=e,(n=[{key:"destroy",value:function(){kO(xO(e.prototype),"destroy",this).call(this)}},{key:"getOverlayGeoJobs",value:function(t){return kO(xO(e.prototype),"getJobs",this).call(this,this.url,t)}},{key:"getOverlayGeoJob",value:function(t,r){return kO(xO(e.prototype),"getJobs",this).call(this,V.urlPathAppend(this.url,t),r)}},{key:"addOverlayGeoJob",value:function(t,r,n,o){return kO(xO(e.prototype),"addJob",this).call(this,this.url,t,PO,r,n,o)}}])&&CO(r.prototype,n),o&&CO(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function NO(t){"@babel/helpers - typeof";return(NO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function RO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,MO(n.key),n)}}function MO(t){var e=function(t,e){if("object"!=NO(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=NO(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==NO(e)?e:String(e)}var LO=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.datasetName="",this.regionDataset="",this.sumShape=!0,this.query="",this.standardSummaryFields=!1,this.standardFields="",this.standardStatisticModes="",this.weightedSummaryFields=!1,this.weightedFields="",this.weightedStatisticModes="",this.meshType=0,this.resolution=100,this.meshSizeUnit=Gr.METER,this.type=qr.SUMMARYMESH,this.output=null,this.mappingParameters=null,V.extend(this,e),this.CLASS_NAME="SuperMap.SummaryRegionJobParameter")}var e,r,n;return e=t,n=[{key:"toObject",value:function(t,e){for(var r in t)"datasetName"!==r?"type"!==r&&"type"!==r?"output"!==r?("SUMMARYREGION"===t.type||"SUMMARYMESH"===t.type&&"regionDataset"!==r)&&(e.analyst=e.analyst||{},"query"===r&&t[r]?e.analyst[r]=t[r].toBBOX():e.analyst[r]=t[r],"mappingParameters"===r&&(e.analyst[r]=e.analyst[r]||{},e.analyst.mappingParameters=t[r])):(e.output=e.output||{},e.output=t[r]):e.type=t[r]:(e.input=e.input||{},e.input[r]=t[r])}}],(r=[{key:"destroy",value:function(){this.datasetName=null,this.sumShape=null,this.regionDataset=null,this.query=null,this.standardSummaryFields=null,this.standardFields=null,this.standardStatisticModes=null,this.weightedSummaryFields=null,this.weightedFields=null,this.weightedStatisticModes=null,this.meshType=null,this.resolution=null,this.meshSizeUnit=null,this.type=null,this.output instanceof Ow&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof Cw&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&RO(e.prototype,r),n&&RO(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function BO(t){"@babel/helpers - typeof";return(BO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function DO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,FO(n.key),n)}}function FO(t){var e=function(t,e){if("object"!=BO(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=BO(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==BO(e)?e:String(e)}function UO(t,e,r){return e=VO(e),function(t,e){if(e&&("object"===BO(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],VO(t).constructor):e.apply(t,r))}function GO(){return(GO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=VO(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function VO(t){return(VO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function qO(t,e){return(qO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var HO=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=UO(this,e,[t,r])).url=V.urlPathAppend(n.url,"spatialanalyst/summaryregion"),n.CLASS_NAME="SuperMap.SummaryRegionJobsService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qO(t,e)}(e,yw),r=e,(n=[{key:"destroy",value:function(){GO(VO(e.prototype),"destroy",this).call(this)}},{key:"getSummaryRegionJobs",value:function(t){return GO(VO(e.prototype),"getJobs",this).call(this,this.url,t)}},{key:"getSummaryRegionJob",value:function(t,r){return GO(VO(e.prototype),"getJobs",this).call(this,V.urlPathAppend(this.url,t),r)}},{key:"addSummaryRegionJob",value:function(t,r,n,o){return GO(VO(e.prototype),"addJob",this).call(this,this.url,t,LO,r,n,o)}}])&&DO(r.prototype,n),o&&DO(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function zO(t){"@babel/helpers - typeof";return(zO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function JO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,WO(n.key),n)}}function WO(t){var e=function(t,e){if("object"!=zO(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=zO(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==zO(e)?e:String(e)}var KO=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.datasetName="",this.bounds="",this.distance="",this.distanceField="",this.distanceUnit=Gr.METER,this.dissolveField="",this.output=null,this.mappingParameters=null,!e)return this;V.extend(this,e),this.CLASS_NAME="SuperMap.BuffersAnalystJobsParameter"}var e,r,n;return e=t,n=[{key:"toObject",value:function(t,e){for(var r in t)"datasetName"!==r?"output"!==r?(e.analyst=e.analyst||{},"bounds"===r&&t[r]?e.analyst[r]=t[r].toBBOX():e.analyst[r]=t[r],"mappingParameters"===r&&(e.analyst[r]=e.analyst[r]||{},e.analyst.mappingParameters=t[r])):(e.output=e.output||{},e.output=t[r]):(e.input=e.input||{},e.input[r]=t[r])}}],(r=[{key:"destroy",value:function(){this.datasetName=null,this.bounds=null,this.distance=null,this.distanceField=null,this.distanceUnit=null,this.dissolveField=null,this.output instanceof Ow&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof Cw&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&JO(e.prototype,r),n&&JO(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function QO(t){"@babel/helpers - typeof";return(QO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function YO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,XO(n.key),n)}}function XO(t){var e=function(t,e){if("object"!=QO(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=QO(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==QO(e)?e:String(e)}function ZO(t,e,r){return e=t_(e),function(t,e){if(e&&("object"===QO(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],t_(t).constructor):e.apply(t,r))}function $O(){return($O="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=t_(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function t_(t){return(t_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function e_(t,e){return(e_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var r_=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=ZO(this,e,[t,r])).url=V.urlPathAppend(n.url,"spatialanalyst/buffers"),n.CLASS_NAME="SuperMap.BuffersAnalystJobsService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&e_(t,e)}(e,yw),r=e,(n=[{key:"destroy",value:function(){$O(t_(e.prototype),"destroy",this).call(this)}},{key:"getBuffersJobs",value:function(t){return $O(t_(e.prototype),"getJobs",this).call(this,this.url,t)}},{key:"getBuffersJob",value:function(t,r){return $O(t_(e.prototype),"getJobs",this).call(this,V.urlPathAppend(this.url,t),r)}},{key:"addBuffersJob",value:function(t,r,n,o){return $O(t_(e.prototype),"addJob",this).call(this,this.url,t,KO,r,n,o)}}])&&YO(r.prototype,n),o&&YO(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function n_(t){"@babel/helpers - typeof";return(n_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o_(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,i_(n.key),n)}}function i_(t){var e=function(t,e){if("object"!=n_(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=n_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==n_(e)?e:String(e)}var a_=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.datasetName="",this.datasetTopology="",this.tolerance="",this.rule=Hr.REGIONNOOVERLAP,this.output=null,this.mappingParameters=null,V.extend(this,e),this.CLASS_NAME="SuperMap.TopologyValidatorJobsParameter")}var e,r,n;return e=t,n=[{key:"toObject",value:function(t,e){for(var r in t)"datasetName"!==r?"output"!==r?(e.analyst=e.analyst||{},e.analyst[r]=t[r],"mappingParameters"===r&&(e.analyst[r]=e.analyst[r]||{},e.analyst.mappingParameters=t[r])):(e.output=e.output||{},e.output=t[r]):(e.input=e.input||{},e.input[r]=t[r])}}],(r=[{key:"destroy",value:function(){this.datasetName=null,this.datasetTopology=null,this.tolerance=null,this.rule=null,this.output instanceof Ow&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof Cw&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&o_(e.prototype,r),n&&o_(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function s_(t){"@babel/helpers - typeof";return(s_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u_(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,l_(n.key),n)}}function l_(t){var e=function(t,e){if("object"!=s_(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=s_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==s_(e)?e:String(e)}function c_(t,e,r){return e=p_(e),function(t,e){if(e&&("object"===s_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],p_(t).constructor):e.apply(t,r))}function f_(){return(f_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p_(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function p_(t){return(p_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h_(t,e){return(h_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var y_=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=c_(this,e,[t,r])).url=V.urlPathAppend(n.url,"spatialanalyst/topologyvalidator"),n.CLASS_NAME="SuperMap.TopologyValidatorJobsService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h_(t,e)}(e,yw),r=e,(n=[{key:"destroy",value:function(){f_(p_(e.prototype),"destroy",this).call(this)}},{key:"getTopologyValidatorJobs",value:function(t){return f_(p_(e.prototype),"getJobs",this).call(this,this.url,t)}},{key:"getTopologyValidatorJob",value:function(t,r){return f_(p_(e.prototype),"getJobs",this).call(this,V.urlPathAppend(this.url,t),r)}},{key:"addTopologyValidatorJob",value:function(t,r,n,o){return f_(p_(e.prototype),"addJob",this).call(this,this.url,t,a_,r,n,o)}}])&&u_(r.prototype,n),o&&u_(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function d_(t){"@babel/helpers - typeof";return(d_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function b_(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,v_(n.key),n)}}function v_(t){var e=function(t,e){if("object"!=d_(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=d_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==d_(e)?e:String(e)}var m_=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.datasetName="",this.groupField="",this.attributeField="",this.statisticModes="",this.output=null,this.mappingParameters=null,V.extend(this,e),this.CLASS_NAME="SuperMap.SummaryAttributesJobsParameter")}var e,r,n;return e=t,n=[{key:"toObject",value:function(t,e){for(var r in t)"datasetName"!==r?"output"!==r?(e.analyst=e.analyst||{},e.analyst[r]=t[r],"mappingParameters"===r&&(e.analyst[r]=e.analyst[r]||{},e.analyst.mappingParameters=t[r])):(e.output=e.output||{},e.output=t[r]):(e.input=e.input||{},e.input[r]=t[r])}}],(r=[{key:"destroy",value:function(){this.datasetName=null,this.groupField=null,this.attributeField=null,this.statisticModes=null,this.output instanceof Ow&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof Cw&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&b_(e.prototype,r),n&&b_(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function g_(t){"@babel/helpers - typeof";return(g_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function S_(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,w_(n.key),n)}}function w_(t){var e=function(t,e){if("object"!=g_(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=g_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==g_(e)?e:String(e)}function O_(t,e,r){return e=P_(e),function(t,e){if(e&&("object"===g_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],P_(t).constructor):e.apply(t,r))}function __(){return(__="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=P_(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function P_(t){return(P_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function E_(t,e){return(E_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var C_=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=O_(this,e,[t,r])).url=V.urlPathAppend(n.url,"spatialanalyst/summaryattributes"),n.CLASS_NAME="SuperMap.SummaryAttributesJobsService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&E_(t,e)}(e,yw),r=e,(n=[{key:"destroy",value:function(){__(P_(e.prototype),"destroy",this).call(this)}},{key:"getSummaryAttributesJobs",value:function(t){return __(P_(e.prototype),"getJobs",this).call(this,this.url,t)}},{key:"getSummaryAttributesJob",value:function(t,r){return __(P_(e.prototype),"getJobs",this).call(this,V.urlPathAppend(this.url,t),r)}},{key:"addSummaryAttributesJob",value:function(t,r,n,o){return __(P_(e.prototype),"addJob",this).call(this,this.url,t,m_,r,n,o)}}])&&S_(r.prototype,n),o&&S_(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function T_(t){"@babel/helpers - typeof";return(T_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function j_(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,k_(n.key),n)}}function k_(t){var e=function(t,e){if("object"!=T_(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=T_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==T_(e)?e:String(e)}var x_=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=e,this.options=r||{},this.kernelDensityJobs={},this.summaryMeshJobs={},this.queryJobs={},this.summaryRegionJobs={},this.vectorClipJobs={},this.overlayGeoJobs={},this.buffersJobs={},this.topologyValidatorJobs={},this.summaryAttributesJobs={}}var e,r,n;return e=t,(r=[{key:"getKernelDensityJobs",value:function(t,e){var r=this,n=r._processFormat(e);return new Dw(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,format:n}).getKernelDensityJobs(t)}},{key:"getKernelDensityJob",value:function(t,e,r){var n=this,o=n._processFormat(r);return new Dw(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:o}).getKernelDensityJob(t,e)}},{key:"addKernelDensityJob",value:function(t,e,r,n){var o=this,i=o._processFormat(n);return new Dw(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,format:i}).addKernelDensityJob(t,r,e,function(t){o.kernelDensityJobs[t.id]=t.state})}},{key:"getKernelDensityJobState",value:function(t){return this.kernelDensityJobs[t]}},{key:"getSummaryMeshJobs",value:function(t,e){var r=this,n=r._processFormat(e);return new uO(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,format:n}).getSummaryMeshJobs(t)}},{key:"getSummaryMeshJob",value:function(t,e,r){var n=this,o=n._processFormat(r);return new uO(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:o}).getSummaryMeshJob(t,e)}},{key:"addSummaryMeshJob",value:function(t,e,r,n){var o=this,i=o._processFormat(n);return new uO(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,format:i}).addSummaryMeshJob(t,r,e,function(t){o.summaryMeshJobs[t.id]=t.state})}},{key:"getSummaryMeshJobState",value:function(t){return this.summaryMeshJobs[t]}},{key:"getQueryJobs",value:function(t,e){var r=this,n=r._processFormat(e);return new Yw(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,format:n}).getQueryJobs(t)}},{key:"getQueryJob",value:function(t,e,r){var n=this,o=n._processFormat(r);return new Yw(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:o}).getQueryJob(t,e)}},{key:"addQueryJob",value:function(t,e,r,n){var o=this,i=o._processFormat(n);return new Yw(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,format:i}).addQueryJob(t,r,e,function(t){o.queryJobs[t.id]=t.state})}},{key:"getQueryJobState",value:function(t){return this.queryJobs[t]}},{key:"getSummaryRegionJobs",value:function(t,e){var r=this,n=r._processFormat(e);return new HO(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,format:n}).getSummaryRegionJobs(t)}},{key:"getSummaryRegionJob",value:function(t,e,r){var n=this,o=n._processFormat(r);return new HO(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:o}).getSummaryRegionJob(t,e)}},{key:"addSummaryRegionJob",value:function(t,e,r,n){var o=this,i=o._processFormat(n);return new HO(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,format:i}).addSummaryRegionJob(t,r,e,function(t){o.summaryRegionJobs[t.id]=t.state})}},{key:"getSummaryRegionJobState",value:function(t){return this.summaryRegionJobs[t]}},{key:"getVectorClipJobs",value:function(t,e){var r=this,n=r._processFormat(e);return new SO(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,format:n}).getVectorClipJobs(t)}},{key:"getVectorClipJob",value:function(t,e,r){var n=this,o=n._processFormat(r);return new SO(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:o}).getVectorClipJob(t,e)}},{key:"addVectorClipJob",value:function(t,e,r,n){var o=this,i=o._processFormat(n);return new SO(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,format:i}).addVectorClipJob(t,r,e,function(t){o.vectorClipJobs[t.id]=t.state})}},{key:"getVectorClipJobState",value:function(t){return this.vectorClipJobs[t]}},{key:"getOverlayGeoJobs",value:function(t,e){var r=this,n=r._processFormat(e);return new IO(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,format:n}).getOverlayGeoJobs(t)}},{key:"getOverlayGeoJob",value:function(t,e,r){var n=this,o=n._processFormat(r);return new IO(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:o}).getOverlayGeoJob(t,e)}},{key:"addOverlayGeoJob",value:function(t,e,r,n){var o=this,i=o._processFormat(n);return new IO(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,format:i}).addOverlayGeoJob(t,r,e,function(t){o.overlayGeoJobs[t.id]=t.state})}},{key:"getoverlayGeoJobState",value:function(t){return this.overlayGeoJobs[t]}},{key:"getBuffersJobs",value:function(t,e){var r=this,n=r._processFormat(e);return new r_(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,format:n}).getBuffersJobs(t)}},{key:"getBuffersJob",value:function(t,e,r){var n=this,o=n._processFormat(r);return new r_(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:o}).getBuffersJob(t,e)}},{key:"addBuffersJob",value:function(t,e,r,n){var o=this,i=o._processFormat(n);return new r_(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,format:i}).addBuffersJob(t,r,e,function(t){o.buffersJobs[t.id]=t.state})}},{key:"getBuffersJobState",value:function(t){return this.buffersJobs[t]}},{key:"getTopologyValidatorJobs",value:function(t,e){var r=this,n=r._processFormat(e);return new y_(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,format:n}).getTopologyValidatorJobs(t)}},{key:"getTopologyValidatorJob",value:function(t,e,r){var n=this,o=n._processFormat(r);return new y_(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:o}).getTopologyValidatorJob(t,e)}},{key:"addTopologyValidatorJob",value:function(t,e,r,n){var o=this,i=o._processFormat(n);return new y_(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,format:i}).addTopologyValidatorJob(t,r,e,function(t){o.topologyValidatorJobs[t.id]=t.state})}},{key:"getTopologyValidatorJobState",value:function(t){return this.topologyValidatorJobs[t]}},{key:"getSummaryAttributesJobs",value:function(t,e){var r=this,n=r._processFormat(e);return new C_(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,format:n}).getSummaryAttributesJobs(t)}},{key:"getSummaryAttributesJob",value:function(t,e,r){var n=this,o=n._processFormat(r);return new C_(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:o}).getSummaryAttributesJob(t,e)}},{key:"addSummaryAttributesJob",value:function(t,e,r,n){var o=this,i=o._processFormat(n);return new C_(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,format:i}).addSummaryAttributesJob(t,r,e,function(t){o.summaryAttributesJobs[t.id]=t.state})}},{key:"getSummaryAttributesJobState",value:function(t){return this.summaryAttributesJobs[t]}},{key:"_processFormat",value:function(t){return t||lr.GEOJSON}}])&&j_(e.prototype,r),n&&j_(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function A_(t){"@babel/helpers - typeof";return(A_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function I_(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,N_(n.key),n)}}function N_(t){var e=function(t,e){if("object"!=A_(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=A_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==A_(e)?e:String(e)}function R_(t,e,r){return e=M_(e),function(t,e){if(e&&("object"===A_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],M_(t).constructor):e.apply(t,r))}function M_(t){return(M_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function L_(t,e){return(L_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var B_=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=R_(this,e,[t,r]))._processingService=new x_(t,r),n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&L_(t,e)}(e,An),r=e,(n=[{key:"getKernelDensityJobs",value:function(t,e){return this._processingService.getKernelDensityJobs(t,e)}},{key:"getKernelDensityJob",value:function(t,e,r){return this._processingService.getKernelDensityJob(t,e,r)}},{key:"addKernelDensityJob",value:function(t,e,r,n){return t=this._processParams(t),this._processingService.addKernelDensityJob(t,e,r,n)}},{key:"getKernelDensityJobState",value:function(t){return this._processingService.getKernelDensityJobState(t)}},{key:"getSummaryMeshJobs",value:function(t,e){return this._processingService.getSummaryMeshJobs(t,e)}},{key:"getSummaryMeshJob",value:function(t,e,r){return this._processingService.getSummaryMeshJob(t,e,r)}},{key:"addSummaryMeshJob",value:function(t,e,r,n){return t=this._processParams(t),this._processingService.addSummaryMeshJob(t,e,r,n)}},{key:"getSummaryMeshJobState",value:function(t){return this._processingService.getSummaryMeshJobState(t)}},{key:"getQueryJobs",value:function(t,e){return this._processingService.getQueryJobs(t,e)}},{key:"getQueryJob",value:function(t,e,r){return this._processingService.getQueryJob(t,e,r)}},{key:"addQueryJob",value:function(t,e,r,n){return t=this._processParams(t),this._processingService.addQueryJob(t,e,r,n)}},{key:"getQueryJobState",value:function(t){return this._processingService.getQueryJobState(t)}},{key:"getSummaryRegionJobs",value:function(t,e){return this._processingService.getSummaryRegionJobs(t,e)}},{key:"getSummaryRegionJob",value:function(t,e,r){return this._processingService.getSummaryRegionJob(t,e,r)}},{key:"addSummaryRegionJob",value:function(t,e,r,n){return t=this._processParams(t),this._processingService.addSummaryRegionJob(t,e,r,n)}},{key:"getSummaryRegionJobState",value:function(t){return this._processingService.getSummaryRegionJobState(t)}},{key:"getVectorClipJobs",value:function(t,e){return this._processingService.getVectorClipJobs(t,e)}},{key:"getVectorClipJob",value:function(t,e,r){return this._processingService.getVectorClipJob(t,e,r)}},{key:"addVectorClipJob",value:function(t,e,r,n){return t=this._processParams(t),this._processingService.addVectorClipJob(t,e,r,n)}},{key:"getVectorClipJobState",value:function(t){return this._processingService.getVectorClipJobState(t)}},{key:"getOverlayGeoJobs",value:function(t,e){return this._processingService.getOverlayGeoJobs(t,e)}},{key:"getOverlayGeoJob",value:function(t,e,r){return this._processingService.getOverlayGeoJob(t,e,r)}},{key:"addOverlayGeoJob",value:function(t,e,r,n){return t=this._processParams(t),this._processingService.addOverlayGeoJob(t,e,r,n)}},{key:"getoverlayGeoJobState",value:function(t){return this._processingService.getoverlayGeoJobState(t)}},{key:"getBuffersJobs",value:function(t,e){return this._processingService.getBuffersJobs(t,e)}},{key:"getBuffersJob",value:function(t,e,r){return this._processingService.getBuffersJob(t,e,r)}},{key:"addBuffersJob",value:function(t,e,r,n){return t=this._processParams(t),this._processingService.addBuffersJob(t,e,r,n)}},{key:"getBuffersJobState",value:function(t){return this._processingService.getBuffersJobState(t)}},{key:"getTopologyValidatorJobs",value:function(t,e){return this._processingService.getTopologyValidatorJobs(t,e)}},{key:"getTopologyValidatorJob",value:function(t,e,r){return this._processingService.getTopologyValidatorJob(t,e,r)}},{key:"addTopologyValidatorJob",value:function(t,e,r,n){return t=this._processParams(t),this._processingService.addTopologyValidatorJob(t,e,r,n)}},{key:"getTopologyValidatorJobState",value:function(t){return this._processingService.getTopologyValidatorJobState(t)}},{key:"getSummaryAttributesJobs",value:function(t,e){return this._processingService.getSummaryAttributesJobs(t,e)}},{key:"getSummaryAttributesJob",value:function(t,e,r){return this._processingService.getSummaryAttributesJob(t,e,r)}},{key:"addSummaryAttributesJob",value:function(t,e,r,n){return t=this._processParams(t),this._processingService.addSummaryAttributesJob(t,e,r,n)}},{key:"getSummaryAttributesJobState",value:function(t){return this._processingService.getSummaryAttributesJobState(t)}},{key:"_processFormat",value:function(t){return t||lr.GEOJSON}},{key:"_processParams",value:function(t){return t?(t.bounds&&(t.bounds=hn.toSuperMapBounds(t.bounds)),t.query&&(t.query=hn.toSuperMapBounds(t.query)),t.geometryQuery&&(t.geometryQuery=hn.toProcessingParam(t.geometryQuery)),t.geometryClip&&(t.geometryClip=hn.toProcessingParam(t.geometryClip)),t):{}}}])&&I_(r.prototype,n),o&&I_(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function D_(t){"@babel/helpers - typeof";return(D_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function F_(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,U_(n.key),n)}}function U_(t){var e=function(t,e){if("object"!=D_(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=D_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==D_(e)?e:String(e)}function G_(t,e,r){return e=z_(e),V_(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],z_(t).constructor):e.apply(t,r))}function V_(t,e){if(e&&("object"===D_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return q_(t)}function q_(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function H_(){return(H_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=z_(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function z_(t){return(z_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function J_(t,e){return(J_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var W_=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=G_(this,e,[t,r])).returnContent=!1,n.format=lr.GEOJSON,n.returnFeatureWithFieldCaption=!1,r&&V.extend(q_(n),r),n.CLASS_NAME="SuperMap.QueryService",n.url?(r&&r.format&&(n.format=r.format.toUpperCase()),n.url=V.urlPathAppend(n.url,"queryResults"),n):V_(n)}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&J_(t,e)}(e,oo),r=e,(n=[{key:"destroy",value:function(){H_(z_(e.prototype),"destroy",this).call(this);this.returnContent=null,this.format=null}},{key:"processAsync",value:function(t,e){if(t instanceof Io){var r,n=this,o=null;return n.returnContent=t.returnContent,r=n.getJsonParameters(t),n.returnContent||(o=t.returnCustomResult)&&(n.url=V.urlAppend(n.url,"returnCustomResult="+o)),n.returnFeatureWithFieldCaption=t.returnFeatureWithFieldCaption,n.request({method:"POST",data:r,scope:n,success:e,failure:e})}}},{key:"transformResult",value:function(t,e){t=V.transformResult(t);var r=new cn;if(t&&t.recordsets)for(var n=0,o=t.recordsets,i=o.length;n<i;n++)o[n].features&&(!0===this.returnFeatureWithFieldCaption&&o[n].features.map(function(t){return t.fieldNames=o[n].fieldCaptions,t}),this.format===lr.GEOJSON&&(o[n].features=r.toGeoJSON(o[n].features)));return{result:t,options:e}}},{key:"dataFormat",value:function(){return[lr.GEOJSON,lr.ISERVER,lr.FGB]}},{key:"getQueryParameters",value:function(t){return new Io({customParams:t.customParams,expectCount:t.expectCount,networkType:t.networkType,queryOption:t.queryOption,queryParams:t.queryParams,startRecord:t.startRecord,prjCoordSys:t.prjCoordSys,holdTime:t.holdTime})}}])&&F_(r.prototype,n),o&&F_(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function K_(t){"@babel/helpers - typeof";return(K_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Q_(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Y_(n.key),n)}}function Y_(t){var e=function(t,e){if("object"!=K_(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=K_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==K_(e)?e:String(e)}function X_(t,e,r){return e=tP(e),function(t,e){if(e&&("object"===K_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Z_(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],tP(t).constructor):e.apply(t,r))}function Z_(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $_(){return($_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=tP(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function tP(t){return(tP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function eP(t,e){return(eP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var rP=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=X_(this,e,[t=t||{}])).returnContent=!0,r.bounds=null,V.extend(Z_(r),t),r.CLASS_NAME="SuperMap.QueryByBoundsParameters",r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&eP(t,e)}(e,Io),r=e,(n=[{key:"destroy",value:function(){$_(tP(e.prototype),"destroy",this).call(this);this.returnContent=null,this.bounds&&(this.bounds=null)}}])&&Q_(r.prototype,n),o&&Q_(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function nP(t){"@babel/helpers - typeof";return(nP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oP(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,iP(n.key),n)}}function iP(t){var e=function(t,e){if("object"!=nP(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=nP(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==nP(e)?e:String(e)}function aP(t,e,r){return e=uP(e),function(t,e){if(e&&("object"===nP(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],uP(t).constructor):e.apply(t,r))}function sP(){return(sP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=uP(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function uP(t){return(uP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function lP(t,e){return(lP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var cP=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=aP(this,e,[t,r])).CLASS_NAME="SuperMap.QueryByBoundsService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lP(t,e)}(e,W_),r=e,(n=[{key:"destroy",value:function(){sP(uP(e.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(t){if(!(t instanceof rP))return null;var e,r="",n=t.bounds;return e=this.getQueryParameters(t),r+="'queryMode':'BoundsQuery','queryParameters':",r+=V.toJSON(e),r="{"+(r+=",'bounds': {'rightTop':{'y':"+n.top+",'x':"+n.right+"},'leftBottom':{'y':"+n.bottom+",'x':"+n.left+"}}")+"}"}}])&&oP(r.prototype,n),o&&oP(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function fP(t){"@babel/helpers - typeof";return(fP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pP(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,hP(n.key),n)}}function hP(t){var e=function(t,e){if("object"!=fP(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=fP(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==fP(e)?e:String(e)}function yP(t,e,r){return e=vP(e),function(t,e){if(e&&("object"===fP(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return dP(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],vP(t).constructor):e.apply(t,r))}function dP(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bP(){return(bP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=vP(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function vP(t){return(vP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function mP(t,e){return(mP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var gP=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=yP(this,e,[t=t||{}])).geometry=null,r.isNearest=null,r.returnContent=!0,V.extend(dP(r),t),r.CLASS_NAME="SuperMap.QueryByDistanceParameters",r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mP(t,e)}(e,Io),r=e,(n=[{key:"destroy",value:function(){bP(vP(e.prototype),"destroy",this).call(this);var t=this;t.returnContent=null,t.distance=null,t.isNearest=null,t.geometry&&(t.geometry.destroy(),t.geometry=null)}}])&&pP(r.prototype,n),o&&pP(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function SP(t){"@babel/helpers - typeof";return(SP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wP(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,OP(n.key),n)}}function OP(t){var e=function(t,e){if("object"!=SP(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=SP(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==SP(e)?e:String(e)}function _P(t,e,r){return e=EP(e),function(t,e){if(e&&("object"===SP(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],EP(t).constructor):e.apply(t,r))}function PP(){return(PP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=EP(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function EP(t){return(EP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function CP(t,e){return(CP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var TP=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=_P(this,e,[t,r])).CLASS_NAME="SuperMap.QueryByDistanceService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&CP(t,e)}(e,W_),r=e,(n=[{key:"destroy",value:function(){PP(EP(e.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(t){if(t instanceof gP){var e="",r=this.getQueryParameters(t),n=en.fromGeometry(t.geometry);return e+=t.isNearest?"'queryMode':'FindNearest','queryParameters':":"'queryMode':'DistanceQuery','queryParameters':",e+=V.toJSON(r),e="{"+(e+=",'geometry':"+V.toJSON(n)+",'distance':"+t.distance)+"}"}}}])&&wP(r.prototype,n),o&&wP(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function jP(t){"@babel/helpers - typeof";return(jP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kP(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,xP(n.key),n)}}function xP(t){var e=function(t,e){if("object"!=jP(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=jP(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==jP(e)?e:String(e)}function AP(t,e,r){return e=RP(e),function(t,e){if(e&&("object"===jP(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return IP(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],RP(t).constructor):e.apply(t,r))}function IP(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function NP(){return(NP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=RP(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function RP(t){return(RP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function MP(t,e){return(MP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var LP=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=AP(this,e,[t=t||{}])).returnContent=!0,V.extend(IP(r),t),r.CLASS_NAME="SuperMap.QueryBySQLParameters",r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&MP(t,e)}(e,Io),r=e,(n=[{key:"destroy",value:function(){NP(RP(e.prototype),"destroy",this).call(this);this.returnContent=null}}])&&kP(r.prototype,n),o&&kP(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function BP(t){"@babel/helpers - typeof";return(BP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function DP(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,FP(n.key),n)}}function FP(t){var e=function(t,e){if("object"!=BP(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=BP(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==BP(e)?e:String(e)}function UP(t,e,r){return e=VP(e),function(t,e){if(e&&("object"===BP(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],VP(t).constructor):e.apply(t,r))}function GP(){return(GP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=VP(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function VP(t){return(VP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function qP(t,e){return(qP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var HP=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=UP(this,e,[t,r])).CLASS_NAME="SuperMap.QueryBySQLService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qP(t,e)}(e,W_),r=e,(n=[{key:"destroy",value:function(){GP(VP(e.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(t){if(t instanceof LP){var e,r="";return e=this.getQueryParameters(t),r+="'queryMode':'SqlQuery','queryParameters':",r="{"+(r+=V.toJSON(e))+"}"}}}])&&DP(r.prototype,n),o&&DP(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function zP(t){"@babel/helpers - typeof";return(zP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function JP(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,WP(n.key),n)}}function WP(t){var e=function(t,e){if("object"!=zP(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=zP(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==zP(e)?e:String(e)}function KP(t,e,r){return e=XP(e),function(t,e){if(e&&("object"===zP(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return QP(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],XP(t).constructor):e.apply(t,r))}function QP(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function YP(){return(YP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=XP(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function XP(t){return(XP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ZP(t,e){return(ZP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var $P=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=KP(this,e,[t=t||{}])).returnContent=!0,r.geometry=null,r.spatialQueryMode=hr.INTERSECT,V.extend(QP(r),t),r.CLASS_NAME="SuperMap.QueryByGeometryParameters",r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ZP(t,e)}(e,Io),r=e,(n=[{key:"destroy",value:function(){YP(XP(e.prototype),"destroy",this).call(this);this.returnContent=null,this.geometry=null,this.spatialQueryMode=null}}])&&JP(r.prototype,n),o&&JP(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function tE(t){"@babel/helpers - typeof";return(tE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function eE(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,rE(n.key),n)}}function rE(t){var e=function(t,e){if("object"!=tE(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=tE(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==tE(e)?e:String(e)}function nE(t,e,r){return e=iE(e),function(t,e){if(e&&("object"===tE(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],iE(t).constructor):e.apply(t,r))}function oE(){return(oE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=iE(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function iE(t){return(iE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function aE(t,e){return(aE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var sE=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=nE(this,e,[t,r])).CLASS_NAME="SuperMap.QueryByGeometryService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&aE(t,e)}(e,W_),r=e,(n=[{key:"destroy",value:function(){oE(iE(e.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(t){if(t instanceof $P){var e,r="",n=t.geometry,o=en.fromGeometry(n);return e=this.getQueryParameters(t),r+="'queryMode':'SpatialQuery','queryParameters':",r="{"+(r+=V.toJSON(e)+",'geometry':"+V.toJSON(o)+",'spatialQueryMode':"+V.toJSON(t.spatialQueryMode))+"}"}}}])&&eE(r.prototype,n),o&&eE(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function uE(t){"@babel/helpers - typeof";return(uE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lE(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,cE(n.key),n)}}function cE(t){var e=function(t,e){if("object"!=uE(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=uE(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==uE(e)?e:String(e)}var fE=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=r||{},this.url=e}var e,r,n;return e=t,(r=[{key:"queryByBounds",value:function(t,e,r){var n=this;return new cP(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"queryByDistance",value:function(t,e,r){var n=this;return new TP(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:r}).processAsync(t,e)}},{key:"queryBySQL",value:function(t,e,r){var n=this;return new HP(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:r}).processAsync(t,e)}},{key:"queryByGeometry",value:function(t,e,r){var n=this;return new sE(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:r}).processAsync(t,e)}},{key:"_processFormat",value:function(t){return t||lr.GEOJSON}}])&&lE(e.prototype,r),n&&lE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function pE(t){"@babel/helpers - typeof";return(pE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hE(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,yE(n.key),n)}}function yE(t){var e=function(t,e){if("object"!=pE(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=pE(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==pE(e)?e:String(e)}function dE(t,e,r){return e=bE(e),function(t,e){if(e&&("object"===pE(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],bE(t).constructor):e.apply(t,r))}function bE(t){return(bE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function vE(t,e){return(vE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var mE=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=dE(this,e,[t,r]))._queryService=new fE(t,r),n}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vE(t,e)}(e,An),r=e,(n=[{key:"queryByBounds",value:function(t,e,r){return t=this._processParams(t),this._queryService.queryByBounds(t,e,r)}},{key:"queryByDistance",value:function(t,e,r){return t=this._processParams(t),this._queryService.queryByDistance(t,e,r)}},{key:"queryBySQL",value:function(t,e,r){return t=this._processParams(t),this._queryService.queryBySQL(t,e,r)}},{key:"queryByGeometry",value:function(t,e,r){return t=this._processParams(t),this._queryService.queryByGeometry(t,e,r)}},{key:"_processParams",value:function(t){return t?(t.returnContent=null==t.returnContent||t.returnContent,t.queryParams&&!hn.isArray(t.queryParams)&&(t.queryParams=[t.queryParams]),t.bounds&&(t.bounds instanceof Array&&(t.bounds=new Z(t.bounds[0],t.bounds[1],t.bounds[2],t.bounds[3])),t.bounds instanceof o().LngLatBounds&&(t.bounds=new Z(t.bounds.getSouthWest().lng,t.bounds.getSouthWest().lat,t.bounds.getNorthEast().lng,t.bounds.getNorthEast().lat))),t.geometry&&(t.geometry instanceof o().LngLat&&(t.geometry=new at(t.geometry.lng,t.geometry.lat)),t.geometry instanceof o().Point&&(t.geometry=new at(t.geometry.x,t.geometry.y)),t.geometry instanceof o().LngLatBounds&&(t.geometry=hn.toSuperMapPolygon(t.geometry)),t.geometry instanceof j||(t.geometry=hn.toSuperMapGeometry(t.geometry))),t):{}}}])&&hE(r.prototype,n),i&&hE(r,i),Object.defineProperty(r,"prototype",{writable:!1}),e}();function gE(t){"@babel/helpers - typeof";return(gE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function SE(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,wE(n.key),n)}}function wE(t){var e=function(t,e){if("object"!=gE(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=gE(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==gE(e)?e:String(e)}function OE(t,e,r){return e=PE(e),function(t,e){if(e&&("object"===gE(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],PE(t).constructor):e.apply(t,r))}function _E(){return(_E="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=PE(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function PE(t){return(PE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function EE(t,e){return(EE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var CE=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=OE(this,e,[t,r])).format=r&&r.format||lr.GEOJSON,n.CLASS_NAME="SuperMap.SpatialAnalystBase",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&EE(t,e)}(e,oo),r=e,(n=[{key:"destroy",value:function(){_E(PE(e.prototype),"destroy",this).call(this),this.format=null}},{key:"transformResult",value:function(t,e){var r;if((t=V.transformResult(t))&&this.format===lr.GEOJSON&&"function"==typeof this.toGeoJSONResult)if(V.isArray(t)){for(var n=0;n<t.length;n++)t[n]=this.toGeoJSONResult(t[n]);r=t}else r=this.toGeoJSONResult(t);return r||(r=t),{result:r,options:e}}},{key:"toGeoJSONResult",value:function(t){if(!t)return null;t.result&&t.result.resultGeometry&&(t=t.result);var e=new cn;if(t.recordsets)for(var r=0,n=t.recordsets,o=n.length;r<o;r++)n[r].features&&(n[r].features=e.toGeoJSON(n[r].features));else t.recordset&&t.recordset.features&&(t.recordset.features=e.toGeoJSON(t.recordset.features));return t.resultGeometry&&(t.resultGeometry=e.toGeoJSON(t.resultGeometry)),t.regions&&(t.regions=e.toGeoJSON(t.regions)),t}}])&&SE(r.prototype,n),o&&SE(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function TE(t){"@babel/helpers - typeof";return(TE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jE(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,kE(n.key),n)}}function kE(t){var e=function(t,e){if("object"!=TE(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=TE(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==TE(e)?e:String(e)}var xE=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.dataset=null,this.targetDatasourceName=null,this.totalGridName=null,this.diffuseDatasetGridName=null,this.durationDatasetGridName=null,this.directDatasetGridName=null,this.latitude=null,this.timeMode="MULTIDAYS",this.dayStart=null,this.dayEnd=null,this.hourStart=null,this.hourEnd=null,this.transmittance=null,this.hourInterval=null,this.dayInterval=null,this.deleteExistResultDataset=!1,V.extend(this,e),this.CLASS_NAME="SuperMap.AreaSolarRadiationParameters"}var e,r,n;return e=t,n=[{key:"toObject",value:function(t,e){var r={};for(var n in t){if("dataset"!==n)"latitude"===n||"timeMode"===n||"dayStart"===n||("dayEnd"===n||"hourStart"===n||"hourEnd"===n)||("transmittance"===n||"hourInterval"===n||"dayInterval"===n)?r[n]=t[n]:e[n]=t[n]}e.parameter=r}}],(r=[{key:"destroy",value:function(){var t=this;t.dataset=null,t.zFactor=1,t.averageCurvatureName=null,t.profileCurvatureName=null,t.planCurvatureName=null,t.deleteExistResultDataset=!0}}])&&jE(e.prototype,r),n&&jE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function AE(t){"@babel/helpers - typeof";return(AE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function IE(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,NE(n.key),n)}}function NE(t){var e=function(t,e){if("object"!=AE(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=AE(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==AE(e)?e:String(e)}function RE(t,e,r){return e=LE(e),function(t,e){if(e&&("object"===AE(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],LE(t).constructor):e.apply(t,r))}function ME(){return(ME="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=LE(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function LE(t){return(LE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function BE(t,e){return(BE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var DE=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=RE(this,e,[t,r])).CLASS_NAME="SuperMap.AreaSolarRadiationService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&BE(t,e)}(e,CE),r=e,(n=[{key:"destroy",value:function(){ME(LE(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof xE){var r=this,n={};t instanceof xE&&(r.url=V.urlPathAppend(r.url,"datasets/".concat(t.dataset,"/solarradiation"))),r.url=V.urlAppend(r.url,"returnContent=true"),xE.toObject(t,n);var o=V.toJSON(n);return r.request({method:"POST",data:o,scope:r,success:e,failure:e})}}}])&&IE(r.prototype,n),o&&IE(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function FE(t){"@babel/helpers - typeof";return(FE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function UE(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,GE(n.key),n)}}function GE(t){var e=function(t,e){if("object"!=FE(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=FE(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==FE(e)?e:String(e)}var VE=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.exp=null,this.value=100,V.extend(this,e),this.CLASS_NAME="SuperMap.BufferDistance"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.exp=null,this.value=null}}])&&UE(e.prototype,r),n&&UE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function qE(t){"@babel/helpers - typeof";return(qE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function HE(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,zE(n.key),n)}}function zE(t){var e=function(t,e){if("object"!=qE(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=qE(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==qE(e)?e:String(e)}var JE=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.endType=Tr.FLAT,this.leftDistance=new VE,this.rightDistance=new VE,this.semicircleLineSegment=4,this.radiusUnit=br.METER,e&&V.extend(this,e),this.CLASS_NAME="SuperMap.BufferSetting"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.endType=null,t.leftDistance&&(t.leftDistance.destroy(),t.leftDistance=null),t.rightDistance&&(t.rightDistance.destroy(),t.rightDistance=null),t.semicircleLineSegment=null,t.radiusUnit=null}}])&&HE(e.prototype,r),n&&HE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function WE(t){"@babel/helpers - typeof";return(WE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function KE(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,QE(n.key),n)}}function QE(t){var e=function(t,e){if("object"!=WE(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=WE(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==WE(e)?e:String(e)}var YE=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);this.bufferSetting=new JE,V.extend(this,e),this.CLASS_NAME="SuperMap.BufferAnalystParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.bufferSetting&&(this.bufferSetting.destroy(),this.bufferSetting=null)}}])&&KE(e.prototype,r),n&&KE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function XE(t){"@babel/helpers - typeof";return(XE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ZE(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,$E(n.key),n)}}function $E(t){var e=function(t,e){if("object"!=XE(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=XE(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==XE(e)?e:String(e)}var tC=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.expectCount=1e3,this.dataset=null,this.dataReturnMode=Ir.RECORDSET_ONLY,this.deleteExistResultDataset=!0,V.extend(this,e),this.CLASS_NAME="SuperMap.DataReturnOption"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.expectCount=null,this.dataset=null,this.dataReturnMode=null,this.deleteExistResultDataset=null}}])&&ZE(e.prototype,r),n&&ZE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function eC(t){"@babel/helpers - typeof";return(eC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rC(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,nC(n.key),n)}}function nC(t){var e=function(t,e){if("object"!=eC(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=eC(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==eC(e)?e:String(e)}function oC(t,e,r){return e=sC(e),function(t,e){if(e&&("object"===eC(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return iC(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],sC(t).constructor):e.apply(t,r))}function iC(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function aC(){return(aC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=sC(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function sC(t){return(sC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function uC(t,e){return(uC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var lC=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=oC(this,e,[t])).dataset=null,r.filterQueryParameter=new rs,r.resultSetting=new tC,r.isAttributeRetained=!0,r.isUnion=!1,V.extend(iC(r),t),r.CLASS_NAME="SuperMap.DatasetBufferAnalystParameters",r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uC(t,e)}(e,YE),r=e,o=[{key:"toObject",value:function(t,e){for(var r in t)if("bufferSetting"===r)t.bufferSetting.radiusUnit=t.bufferSetting.radiusUnit.toUpperCase(),e.bufferAnalystParameter=t.bufferSetting;else if("resultSetting"===r)e.dataReturnOption=t.resultSetting;else{if("dataset"===r)continue;e[r]=t[r]}}}],(n=[{key:"destroy",value:function(){aC(sC(e.prototype),"destroy",this).call(this);var t=this;t.dataset=null,t.filterQueryParameter&&(t.filterQueryParameter.destroy(),t.filterQueryParameter=null),t.resultSetting&&(t.resultSetting.destroy(),t.resultSetting=null),t.isAttributeRetained=null,t.isUnion=null}}])&&rC(r.prototype,n),o&&rC(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function cC(t){"@babel/helpers - typeof";return(cC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fC(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,pC(n.key),n)}}function pC(t){var e=function(t,e){if("object"!=cC(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=cC(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==cC(e)?e:String(e)}function hC(t,e,r){return e=bC(e),function(t,e){if(e&&("object"===cC(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return yC(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],bC(t).constructor):e.apply(t,r))}function yC(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dC(){return(dC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=bC(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function bC(t){return(bC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function vC(t,e){return(vC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var mC=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=hC(this,e,[t])).sourceGeometry=null,r.sourceGeometrySRID=null,t&&V.extend(yC(r),t),r.CLASS_NAME=" SuperMap.GeometryBufferAnalystParameters",r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vC(t,e)}(e,YE),r=e,o=[{key:"toObject",value:function(t,e){for(var r in t)if("bufferSetting"===r){var n={};for(var o in t.bufferSetting)n[o]=t.bufferSetting[o];e.analystParameter=n}else"sourceGeometry"===r?e.sourceGeometry=en.fromGeometry(t.sourceGeometry):e[r]=t[r]}}],(n=[{key:"destroy",value:function(){dC(bC(e.prototype),"destroy",this).call(this);this.sourceGeometry&&(this.sourceGeometry.destroy(),this.sourceGeometry=null)}}])&&fC(r.prototype,n),o&&fC(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function gC(t){"@babel/helpers - typeof";return(gC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function SC(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,wC(n.key),n)}}function wC(t){var e=function(t,e){if("object"!=gC(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=gC(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==gC(e)?e:String(e)}function OC(t,e,r){return e=EC(e),function(t,e){if(e&&("object"===gC(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _C(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],EC(t).constructor):e.apply(t,r))}function _C(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function PC(){return(PC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=EC(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function EC(t){return(EC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function CC(t,e){return(CC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var TC=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=OC(this,e,[t,r])).mode=null,r&&V.extend(_C(n),r),n.CLASS_NAME="SuperMap.BufferAnalystService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&CC(t,e)}(e,CE),r=e,(n=[{key:"destroy",value:function(){PC(EC(e.prototype),"destroy",this).call(this),this.mode=null}},{key:"processAsync",value:function(t,e){var r={},n=this;t instanceof lC?(n.mode="datasets",n.url=V.urlPathAppend(n.url,"datasets/"+t.dataset+"/buffer"),lC.toObject(t,r)):t instanceof mC&&(n.mode="geometry",n.url=V.urlPathAppend(n.url,"geometry/buffer"),mC.toObject(t,r));var o=V.toJSON(r);return this.returnContent=!0,n.request({method:"POST",data:o,scope:n,success:e,failure:e})}},{key:"dataFormat",value:function(){return[lr.GEOJSON,lr.ISERVER,lr.FGB]}}])&&SC(r.prototype,n),o&&SC(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function jC(t){"@babel/helpers - typeof";return(jC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kC(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,xC(n.key),n)}}function xC(t){var e=function(t,e){if("object"!=jC(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=jC(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==jC(e)?e:String(e)}var AC=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.dataset=null,this.bounds=null,this.fieldName=null,this.resultGridDatasetResolution=null,this.searchRadius=null,this.targetDatasource=null,this.resultGridName=null,this.deleteExistResultDataset=!1,V.extend(this,e),this.CLASS_NAME="SuperMap.DensityKernelAnalystParameters"}var e,r,n;return e=t,n=[{key:"toObject",value:function(t,e){for(var r in t)"dataset"!==r&&(e[r]=t[r])}}],(r=[{key:"destroy",value:function(){var t=this;t.dataset=null,t.bounds=null,t.fieldName=null,t.resultGridDatasetResolution=null,t.searchRadius=null,t.targetDatasource=null,t.resultGridName=null,t.deleteExistResultDataset=null}}])&&kC(e.prototype,r),n&&kC(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function IC(t){"@babel/helpers - typeof";return(IC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function NC(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,RC(n.key),n)}}function RC(t){var e=function(t,e){if("object"!=IC(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=IC(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==IC(e)?e:String(e)}function MC(t,e,r){return e=DC(e),function(t,e){if(e&&("object"===IC(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return LC(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],DC(t).constructor):e.apply(t,r))}function LC(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function BC(){return(BC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=DC(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function DC(t){return(DC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function FC(t,e){return(FC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var UC=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=MC(this,e,[t,r])).mode=null,r&&V.extend(LC(n),r),n.CLASS_NAME="SuperMap.DensityAnalystService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&FC(t,e)}(e,CE),r=e,(n=[{key:"destroy",value:function(){BC(DC(e.prototype),"destroy",this).call(this),this.mode=null}},{key:"processAsync",value:function(t,e){var r=this,n=new Object;t instanceof AC&&(r.url=V.urlPathAppend(r.url,"datasets/"+t.dataset+"/densityanalyst/kernel"),r.mode="kernel"),AC.toObject(t,n);var o=V.toJSON(n);return r.url=V.urlAppend(r.url,"returnContent=true"),r.request({method:"POST",data:o,scope:r,success:e,failure:e})}}])&&NC(r.prototype,n),o&&NC(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function GC(t){"@babel/helpers - typeof";return(GC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function VC(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,qC(n.key),n)}}function qC(t){var e=function(t,e){if("object"!=GC(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=GC(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==GC(e)?e:String(e)}var HC=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.routeTable=null,this.routeIDField=null,this.attributeFilter=null,this.eventTable=null,this.eventRouteIDField=null,this.measureField=null,this.measureStartField=null,this.measureEndField=null,this.measureOffsetField=null,this.errorInfoField=null,this.retainedFields=null,this.dataReturnOption=null,e&&V.extend(this,e),this.CLASS_NAME="SuperMap.GenerateSpatialDataParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.routeTable&&(t.routeTable=null),t.routeIDField=null,t.attributeFilter=null,t.eventTable=null,t.eventRouteIDField=null,t.measureField=null,t.measureStartField=null,t.measureEndField=null,t.measureOffsetField=null,t.errorInfoField=null,t.dataReturnOption&&(t.dataReturnOption.destroy(),t.dataReturnOption=null)}}])&&VC(e.prototype,r),n&&VC(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function zC(t){"@babel/helpers - typeof";return(zC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function JC(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,WC(n.key),n)}}function WC(t){var e=function(t,e){if("object"!=zC(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=zC(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==zC(e)?e:String(e)}function KC(t,e,r){return e=YC(e),function(t,e){if(e&&("object"===zC(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],YC(t).constructor):e.apply(t,r))}function QC(){return(QC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=YC(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function YC(t){return(YC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function XC(t,e){return(XC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var ZC=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=KC(this,e,[t,r])).CLASS_NAME="SuperMap.GenerateSpatialDataService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&XC(t,e)}(e,CE),r=e,(n=[{key:"destroy",value:function(){QC(YC(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof HC){var r;return r=this.getJsonParameters(t),this.request({method:"POST",data:r,scope:this,success:e,failure:e})}}},{key:"getJsonParameters",value:function(t){var e="datasets/"+t.routeTable+"/linearreferencing/generatespatialdata";return this.url=V.urlPathAppend(this.url,e),this.url=V.urlAppend(this.url,"returnContent=true"),V.toJSON(t)}}])&&JC(r.prototype,n),o&&JC(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function $C(t){"@babel/helpers - typeof";return($C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tT(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,eT(n.key),n)}}function eT(t){var e=function(t,e){if("object"!=$C(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=$C(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==$C(e)?e:String(e)}var rT=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.dataset=null,this.sourceFilter=null,this.referenceFilter=null,this.spatialRelationType=null,this.isBorderInside=null,this.returnFeature=null,this.returnGeoRelatedOnly=null,this.startRecord=0,this.expectCount=500,e&&V.extend(this,e),this.CLASS_NAME="SuperMap.GeoRelationAnalystParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.sourceFilter&&t.sourceFilter.destroy(),t.sourceFilter=null,t.referenceFilter&&t.referenceFilter.destroy(),t.referenceFilter=null,t.dataset=null,t.spatialRelationType=null,t.isBorderInside=null,t.returnFeature=null,t.returnGeoRelatedOnly=null,t.startRecord=null,t.expectCount=null}}])&&tT(e.prototype,r),n&&tT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function nT(t){"@babel/helpers - typeof";return(nT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oT(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,iT(n.key),n)}}function iT(t){var e=function(t,e){if("object"!=nT(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=nT(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==nT(e)?e:String(e)}function aT(t,e,r){return e=uT(e),function(t,e){if(e&&("object"===nT(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],uT(t).constructor):e.apply(t,r))}function sT(){return(sT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=uT(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function uT(t){return(uT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function lT(t,e){return(lT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var cT=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=aT(this,e,[t,r])).CLASS_NAME="SuperMap.GeoRelationAnalystService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lT(t,e)}(e,CE),r=e,(n=[{key:"destroy",value:function(){sT(uT(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof rT){var r=this;r.url=V.urlPathAppend(r.url,"datasets/"+t.dataset+"/georelation");var n=V.toJSON(t);return r.url=V.urlAppend(r.url,"returnContent=true"),r.request({method:"POST",data:n,scope:r,success:e,failure:e})}}}])&&oT(r.prototype,n),o&&oT(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function fT(t){"@babel/helpers - typeof";return(fT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pT(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,hT(n.key),n)}}function hT(t){var e=function(t,e){if("object"!=fT(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=fT(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==fT(e)?e:String(e)}var yT=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.bounds=null,this.searchRadius=0,this.zValueFieldName=null,this.zValueScale=1,this.resolution=null,this.filterQueryParameter=null,this.outputDatasetName=null,this.outputDatasourceName=null,this.pixelFormat=null,this.dataset=null,this.inputPoints=null,this.InterpolationAnalystType="dataset",this.clipParam=null,V.extend(this,e),this.CLASS_NAME="SuperMap.InterpolationAnalystParameters")}var e,r,n;return e=t,n=[{key:"toObject",value:function(t,e){for(var r in t)if("inputPoints"===r&&"geometry"===t.InterpolationAnalystType){for(var n=[],o=0;o<t.inputPoints.length;o++){var i=t.inputPoints[o],a={x:i.x,y:i.y,z:i.tag};n.push(a)}e[r]=n}else e[r]=t[r]}}],(r=[{key:"destroy",value:function(){var t=this;t.bounds=null,t.searchRadius=null,t.zValueFieldName=null,t.zValueScale=null,t.resolution=null,t.filterQueryParameter=null,t.outputDatasetName=null,t.pixelFormat=null}}])&&pT(e.prototype,r),n&&pT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function dT(t){"@babel/helpers - typeof";return(dT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bT(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,vT(n.key),n)}}function vT(t){var e=function(t,e){if("object"!=dT(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=dT(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==dT(e)?e:String(e)}function mT(t,e,r){return e=wT(e),function(t,e){if(e&&("object"===dT(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return gT(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],wT(t).constructor):e.apply(t,r))}function gT(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ST(){return(ST="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=wT(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function wT(t){return(wT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function OT(t,e){return(OT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var _T=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=mT(this,e,[t])).smooth=.1,r.tension=40,r.searchMode=null,r.expectedCount=12,r.maxPointCountForInterpolation=200,r.maxPointCountInNode=50,t&&V.extend(gT(r),t),r.CLASS_NAME="SuperMap.InterpolationRBFAnalystParameters",r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&OT(t,e)}(e,yT),r=e,o=[{key:"toObject",value:function(t,e){for(var r in t)e[r]=t[r]}}],(n=[{key:"destroy",value:function(){ST(wT(e.prototype),"destroy",this).call(this);var t=this;t.smooth=null,t.tension=null,t.searchMode=null,t.expectedCount=null,t.maxPointCountForInterpolation=null,t.maxPointCountInNode=null}}])&&bT(r.prototype,n),o&&bT(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function PT(t){"@babel/helpers - typeof";return(PT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ET(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,CT(n.key),n)}}function CT(t){var e=function(t,e){if("object"!=PT(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=PT(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==PT(e)?e:String(e)}function TT(t,e,r){return e=xT(e),function(t,e){if(e&&("object"===PT(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return jT(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],xT(t).constructor):e.apply(t,r))}function jT(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function kT(){return(kT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=xT(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function xT(t){return(xT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function AT(t,e){return(AT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var IT=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=TT(this,e,[t]),t&&V.extend(jT(r),t),r.CLASS_NAME="SuperMap.InterpolationDensityAnalystParameters",r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&AT(t,e)}(e,yT),r=e,(n=[{key:"destroy",value:function(){kT(xT(e.prototype),"destroy",this).call(this)}}])&&ET(r.prototype,n),o&&ET(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function NT(t){"@babel/helpers - typeof";return(NT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function RT(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,MT(n.key),n)}}function MT(t){var e=function(t,e){if("object"!=NT(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=NT(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==NT(e)?e:String(e)}function LT(t,e,r){return e=FT(e),function(t,e){if(e&&("object"===NT(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return BT(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],FT(t).constructor):e.apply(t,r))}function BT(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function DT(){return(DT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=FT(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function FT(t){return(FT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function UT(t,e){return(UT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var GT=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=LT(this,e,[t])).power=2,r.searchMode=null,r.expectedCount=12,t&&V.extend(BT(r),t),r.CLASS_NAME="SuperMap.InterpolationIDWAnalystParameters",r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&UT(t,e)}(e,yT),r=e,(n=[{key:"destroy",value:function(){DT(FT(e.prototype),"destroy",this).call(this);this.power=null,this.searchMode=null,this.expectedCount=null}}])&&RT(r.prototype,n),o&&RT(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function VT(t){"@babel/helpers - typeof";return(VT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qT(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,HT(n.key),n)}}function HT(t){var e=function(t,e){if("object"!=VT(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=VT(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==VT(e)?e:String(e)}var zT=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.clipRegion=null,this.createResultDataset=!1,this.resultDatasetName=null,this.resultDatasourceName=null,this.returnResultRegion=!0,V.extend(this,e),this.CLASS_NAME="SuperMap.ThiessenAnalystParameters")}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.clipRegion&&(t.clipRegion.destroy(),t.clipRegion=null),t.createResultDataset=null,t.resultDatasetName=null,t.resultDatasourceName=null,t.returnResultRegion=null}}])&&qT(e.prototype,r),n&&qT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function JT(t){"@babel/helpers - typeof";return(JT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function WT(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,KT(n.key),n)}}function KT(t){var e=function(t,e){if("object"!=JT(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=JT(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==JT(e)?e:String(e)}function QT(t,e,r){return e=ZT(e),function(t,e){if(e&&("object"===JT(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return YT(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],ZT(t).constructor):e.apply(t,r))}function YT(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function XT(){return(XT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ZT(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function ZT(t){return(ZT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function $T(t,e){return($T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var tj=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=QT(this,e,[t])).type=null,r.mean=null,r.angle=0,r.nugget=0,r.range=0,r.sill=0,r.variogramMode=Lr.SPHERICAL,r.exponent=Br.EXP1,r.searchMode=null,r.expectedCount=12,r.maxPointCountForInterpolation=200,r.maxPointCountInNode=50,t&&V.extend(YT(r),t),r.CLASS_NAME="SuperMap.InterpolationKrigingAnalystParameters",r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$T(t,e)}(e,yT),r=e,(n=[{key:"destroy",value:function(){XT(ZT(e.prototype),"destroy",this).call(this);var t=this;t.type=null,t.mean=null,t.angle=null,t.nugget=null,t.range=null,t.sill=null,t.variogramMode=null,t.exponent=null,t.searchMode=null,t.expectedCount=null,t.maxPointCountForInterpolation=null,t.maxPointCountInNode=null}}])&&WT(r.prototype,n),o&&WT(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function ej(t){"@babel/helpers - typeof";return(ej="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,nj(n.key),n)}}function nj(t){var e=function(t,e){if("object"!=ej(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ej(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ej(e)?e:String(e)}function oj(t,e,r){return e=sj(e),function(t,e){if(e&&("object"===ej(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ij(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],sj(t).constructor):e.apply(t,r))}function ij(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function aj(){return(aj="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=sj(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function sj(t){return(sj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function uj(t,e){return(uj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var lj=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=oj(this,e,[t,r])).mode=null,r&&V.extend(ij(n),r),n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uj(t,e)}(e,CE),r=e,(n=[{key:"destroy",value:function(){aj(sj(e.prototype),"destroy",this).call(this),this.mode=null,this.CLASS_NAME="SuperMap.InterpolationAnalystService"}},{key:"processAsync",value:function(t,e){var r={},n=this;t instanceof IT?(n.mode="Density","geometry"===t.InterpolationAnalystType?n.url=V.urlPathAppend(n.url,"geometry/interpolation/density"):n.url=V.urlPathAppend(n.url,"datasets/"+t.dataset+"/interpolation/density")):t instanceof GT?(n.mode="IDW","geometry"===t.InterpolationAnalystType?n.url=V.urlPathAppend(n.url,"geometry/interpolation/idw"):n.url=V.urlPathAppend(n.url,"datasets/"+t.dataset+"/interpolation/idw")):t instanceof _T?(n.mode="RBF","geometry"===t.InterpolationAnalystType?n.url=V.urlPathAppend(n.url,"geometry/interpolation/rbf"):n.url=V.urlPathAppend(n.url,"datasets/"+t.dataset+"/interpolation/rbf")):t instanceof tj&&(n.mode="Kriging","geometry"===t.InterpolationAnalystType?n.url=V.urlPathAppend(n.url,"geometry/interpolation/kriging"):n.url=V.urlPathAppend(n.url,"datasets/"+t.dataset+"/interpolation/kriging")),yT.toObject(t,r);var o=V.toJSON(r);return n.url=V.urlAppend(n.url,"returnContent=true"),n.request({method:"POST",data:o,scope:n,success:e,failure:e})}}])&&rj(r.prototype,n),o&&rj(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function cj(t){"@babel/helpers - typeof";return(cj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,pj(n.key),n)}}function pj(t){var e=function(t,e){if("object"!=cj(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=cj(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==cj(e)?e:String(e)}var hj=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.dataset=null,this.extractRegion=null,this.expression=null,this.isZip=!1,this.ignoreNoValue=!1,this.targetDatasource=null,this.resultGridName=null,this.deleteExistResultDataset=!1,V.extend(this,e),this.CLASS_NAME="SuperMap.MathExpressionAnalysisParameters")}var e,r,n;return e=t,n=[{key:"toObject",value:function(t,e){for(var r in t)if("dataset"!==r&&(e[r]=t[r]),"extractRegion"===r&&t[r]){for(var n=t[r].components[0].components,o={},i=[],a=n.length,s=0;s<a-1;s++){var u={};u.x=n[s].x,u.y=n[s].y,i.push(u)}o.points=i,o.type="REGION",e[r]=o}}}],(r=[{key:"destroy",value:function(){var t=this;t.dataset=null,t.bounds=null,t.expression=null,t.isZip=!0,t.ignoreNoValue=!0,t.targetDatasource=null,t.resultGridName=null,t.deleteExistResultDataset=null}}])&&fj(e.prototype,r),n&&fj(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function yj(t){"@babel/helpers - typeof";return(yj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,bj(n.key),n)}}function bj(t){var e=function(t,e){if("object"!=yj(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=yj(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==yj(e)?e:String(e)}function vj(t,e,r){return e=gj(e),function(t,e){if(e&&("object"===yj(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],gj(t).constructor):e.apply(t,r))}function mj(){return(mj="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=gj(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function gj(t){return(gj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Sj(t,e){return(Sj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var wj=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=vj(this,e,[t,r])).CLASS_NAME="SuperMap.MathExpressionAnalysisService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Sj(t,e)}(e,CE),r=e,(n=[{key:"destroy",value:function(){mj(gj(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){var r=this,n={};t instanceof hj&&(r.url=V.urlPathAppend(r.url,"datasets/"+t.dataset+"/mathanalyst")),hj.toObject(t,n);var o=V.toJSON(n);return r.url=V.urlAppend(r.url,"returnContent=true"),r.request({method:"POST",data:o,scope:r,success:e,failure:e})}}])&&dj(r.prototype,n),o&&dj(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function Oj(t){"@babel/helpers - typeof";return(Oj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _j(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Pj(n.key),n)}}function Pj(t){var e=function(t,e){if("object"!=Oj(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Oj(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Oj(e)?e:String(e)}var Ej=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.operation=jr.UNION,e&&V.extend(this,e),this.CLASS_NAME="SuperMap.OverlayAnalystParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.operation=null}}])&&_j(e.prototype,r),n&&_j(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Cj(t){"@babel/helpers - typeof";return(Cj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Tj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,jj(n.key),n)}}function jj(t){var e=function(t,e){if("object"!=Cj(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Cj(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Cj(e)?e:String(e)}function kj(t,e,r){return e=Ij(e),function(t,e){if(e&&("object"===Cj(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return xj(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Ij(t).constructor):e.apply(t,r))}function xj(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Aj(){return(Aj="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ij(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Ij(t){return(Ij=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Nj(t,e){return(Nj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Rj=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=kj(this,e,[t])).operateDataset=null,r.operateDatasetFields=[],r.operateDatasetFilter=new rs,r.operateRegions=[],r.sourceDataset=null,r.sourceDatasetFields=[],r.sourceDatasetFilter=new rs,r.tolerance=0,r.resultSetting=new tC,V.extend(xj(r),t),r.CLASS_NAME="SuperMap.DatasetOverlayAnalystParameters",r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Nj(t,e)}(e,Ej),r=e,o=[{key:"toObject",value:function(t,e){for(var r in t)if("sourceDataset"!==r)if("operateRegions"===r){e.operateRegions=[];var n=t.operateRegions;for(var o in n)n.hasOwnProperty(o)&&(e.operateRegions[o]=en.fromGeometry(n[o]))}else"resultSetting"===r?e.dataReturnOption=t.resultSetting:e[r]=t[r]}}],(n=[{key:"destroy",value:function(){Aj(Ij(e.prototype),"destroy",this).call(this);var t=this;if(t.operateDataset=null,t.operateDatasetFields=null,t.operateDatasetFilter&&(t.operateDatasetFilter.destroy(),t.operateDatasetFilter=null),t.operateRegions){for(var r=0,n=t.operateRegions,o=n.length;r<o;r++)n[r].destroy();t.operateRegions=null}t.sourceDataset=null,t.sourceDatasetFields=null,t.sourceDatasetFilter&&(t.sourceDatasetFilter.destroy(),t.sourceDatasetFilter=null),t.tolerance=null,t.resultSetting&&(t.resultSetting.destroy(),t.resultSetting=null)}}])&&Tj(r.prototype,n),o&&Tj(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function Mj(t){"@babel/helpers - typeof";return(Mj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Lj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Bj(n.key),n)}}function Bj(t){var e=function(t,e){if("object"!=Mj(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Mj(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Mj(e)?e:String(e)}function Dj(t,e,r){return e=Gj(e),function(t,e){if(e&&("object"===Mj(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Fj(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Gj(t).constructor):e.apply(t,r))}function Fj(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Uj(){return(Uj="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Gj(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Gj(t){return(Gj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Vj(t,e){return(Vj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var qj=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=Dj(this,e,[t]),t&&t.operateGeometry&&(r.operateGeometry=t.operateGeometry),t&&t.sourceGeometry&&(r.sourceGeometry=t.sourceGeometry),t&&t.operateGeometries&&(r.operateGeometries=t.operateGeometries),t&&t.sourceGeometries&&(r.sourceGeometries=t.sourceGeometries),t&&V.extend(Fj(r),t),r.CLASS_NAME="SuperMap.GeometryOverlayAnalystParameters",r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Vj(t,e)}(e,Ej),r=e,o=[{key:"toObject",value:function(t,e){for(var r in t)if("sourceGeometry"===r)e.sourceGeometry=en.fromGeometry(t.sourceGeometry);else if("sourceGeometries"===r){for(var n=[],o=0;o<t.sourceGeometries.length;o++)n.push(en.fromGeometry(t.sourceGeometries[o]));e.sourceGeometries=n}else if("operateGeometry"===r)e.operateGeometry=en.fromGeometry(t.operateGeometry);else if("operateGeometries"===r){for(var i=[],a=0;a<t.operateGeometries.length;a++)i.push(en.fromGeometry(t.operateGeometries[a]));e.operateGeometries=i}else e[r]=t[r]}}],(n=[{key:"destroy",value:function(){Uj(Gj(e.prototype),"destroy",this).call(this);var t=this;t.sourceGeometry&&(t.sourceGeometry.destroy(),t.sourceGeometry=null),t.sourceGeometries&&(t.sourceGeometries.destroy(),t.sourceGeometries=null),t.sourceGeometry&&(t.sourceGeometry.destroy(),t.sourceGeometry=null),t.operateGeometries&&(t.operateGeometries.destroy(),t.operateGeometries=null)}}])&&Lj(r.prototype,n),o&&Lj(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function Hj(t){"@babel/helpers - typeof";return(Hj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Jj(n.key),n)}}function Jj(t){var e=function(t,e){if("object"!=Hj(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Hj(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Hj(e)?e:String(e)}function Wj(t,e,r){return e=Yj(e),function(t,e){if(e&&("object"===Hj(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Kj(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Yj(t).constructor):e.apply(t,r))}function Kj(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Qj(){return(Qj="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Yj(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Yj(t){return(Yj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Xj(t,e){return(Xj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Zj=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Wj(this,e,[t,r])).mode=null,r&&V.extend(Kj(n),r),n.CLASS_NAME="SuperMap.OverlayAnalystService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Xj(t,e)}(e,CE),r=e,(n=[{key:"destroy",value:function(){Qj(Yj(e.prototype),"destroy",this).call(this),this.mode=null}},{key:"processAsync",value:function(t,e){var r={},n=this;t instanceof Rj?(n.mode="datasets",n.url=V.urlPathAppend(n.url,"datasets/"+t.sourceDataset+"/overlay"),Rj.toObject(t,r)):t instanceof qj&&(n.mode="geometry",t.operateGeometries&&t.sourceGeometries?(n.url=V.urlPathAppend(n.url,"geometry/overlay/batch"),n.url=V.urlAppend(n.url,"ignoreAnalystParam=true")):n.url=V.urlPathAppend(n.url,"geometry/overlay"),qj.toObject(t,r)),this.returnContent=!0;var o=V.toJSON(r);return n.request({method:"POST",data:o,scope:n,success:e,failure:e})}},{key:"dataFormat",value:function(){return[lr.GEOJSON,lr.ISERVER,lr.FGB]}}])&&zj(r.prototype,n),o&&zj(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function $j(t){"@babel/helpers - typeof";return($j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tk(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ek(n.key),n)}}function ek(t){var e=function(t,e){if("object"!=$j(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=$j(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==$j(e)?e:String(e)}var rk=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!e)return this;this.sourceRoute=null,this.point=null,this.tolerance=null,this.isIgnoreGap=!1,V.extend(this,e),this.CLASS_NAME="SuperMap.RouteCalculateMeasureParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.sourceRoute=null,t.point=null,t.tolerance&&(t.tolerance=null),t.isIgnoreGap&&(t.isIgnoreGap=!1)}}])&&tk(e.prototype,r),n&&tk(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function nk(t){"@babel/helpers - typeof";return(nk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ok(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ik(n.key),n)}}function ik(t){var e=function(t,e){if("object"!=nk(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=nk(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==nk(e)?e:String(e)}function ak(t,e,r){return e=uk(e),function(t,e){if(e&&("object"===nk(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],uk(t).constructor):e.apply(t,r))}function sk(){return(sk="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=uk(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function uk(t){return(uk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function lk(t,e){return(lk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var ck=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=ak(this,e,[t,r])).CLASS_NAME="SuperMap.RouteCalculateMeasureService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lk(t,e)}(e,CE),r=e,(n=[{key:"destroy",value:function(){sk(uk(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof rk){var r;return r=this.getJsonParameters(t),this.request({method:"POST",data:r,scope:this,success:e,failure:e})}}},{key:"getJsonParameters",value:function(t){return this.url=V.urlPathAppend(this.url,"geometry/calculatemeasure"),this.url=V.urlAppend(this.url,"returnContent=true"),V.toJSON(t)}}])&&ok(r.prototype,n),o&&ok(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function fk(t){"@babel/helpers - typeof";return(fk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pk(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,hk(n.key),n)}}function hk(t){var e=function(t,e){if("object"!=fk(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=fk(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==fk(e)?e:String(e)}var yk=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!e)return this;this.sourceRoute=null,this.dataset=null,this.routeIDField=null,this.routeID=null,this.type=null,this.measure=null,this.offset=0,this.isIgnoreGap=!1,this.startMeasure=null,this.endMeasure=null;var r=e.sourceRoute,n={};if(r&&r instanceof j&&r.components){n.type=r.type,n.parts=r.parts;for(var o=[],i=0,a=r.components.length;i<a;i++)o=o.concat(r.components[i].components);n.points=o,e.sourceRoute=n}V.extend(this,e),this.CLASS_NAME="SuperMap.RouteLocatorParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.sourceRoute=null,t.type=null,t.measure=null,t.offset=0,t.isIgnoreGap=!1,t.startMeasure=null,t.endMeasure=null,t.dataset=null,t.routeID=null,t.routeIDField=null}}])&&pk(e.prototype,r),n&&pk(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function dk(t){"@babel/helpers - typeof";return(dk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bk(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,vk(n.key),n)}}function vk(t){var e=function(t,e){if("object"!=dk(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=dk(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==dk(e)?e:String(e)}function mk(t,e,r){return e=Sk(e),function(t,e){if(e&&("object"===dk(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Sk(t).constructor):e.apply(t,r))}function gk(){return(gk="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Sk(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Sk(t){return(Sk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function wk(t,e){return(wk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Ok=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=mk(this,e,[t,r])).CLASS_NAME="SuperMap.RouteLocatorService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wk(t,e)}(e,CE),r=e,(n=[{key:"destroy",value:function(){gk(Sk(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof yk){var r;return r=this.getJsonParameters(t),this.request({method:"POST",data:r,scope:this,success:e,failure:e})}}},{key:"getJsonParameters",value:function(t){var e="geometry/routelocator";return t.dataset&&(e="datasets/"+t.dataset+"/linearreferencing/routelocator",t.sourceRoute=null),this.url=V.urlPathAppend(this.url,e),this.url=V.urlAppend(this.url,"returnContent=true"),V.toJSON(t)}}])&&bk(r.prototype,n),o&&bk(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function _k(t){"@babel/helpers - typeof";return(_k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pk(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ek(n.key),n)}}function Ek(t){var e=function(t,e){if("object"!=_k(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=_k(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==_k(e)?e:String(e)}var Ck=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.clipRegion=null,this.datumValue=0,this.expectedZValues=null,this.interval=0,this.resampleTolerance=0,this.smoothMethod=xr.BSPLINE,this.smoothness=0,e&&V.extend(this,e),this.CLASS_NAME="SuperMap.SurfaceAnalystParametersSetting"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.clipRegion&&(t.clipRegion.destroy(),t.clipRegion=null),t.datumValue=null,t.expectedZValues=null,t.interval=null,t.resampleTolerance=null,t.smoothMethod=null,t.smoothness=null}},{key:"toJSON",value:function(){var t="'datumValue':"+V.toJSON(this.datumValue);if(t+=",'interval':"+V.toJSON(this.interval),t+=",'resampleTolerance':"+V.toJSON(this.resampleTolerance),t+=",'smoothMethod':"+V.toJSON(this.smoothMethod),t+=",'smoothness':"+V.toJSON(this.smoothness),null!=this.expectedZValues&&(t+=",'expectedZValues':"+V.toJSON(this.expectedZValues)),null!=this.clipRegion){var e=this.clipRegion;this.clipRegion instanceof j&&this.clipRegion.components&&(e=en.fromGeometry(this.clipRegion)),t+=",'clipRegion':"+V.toJSON(e)}return"{"+t+"}"}}])&&Pk(e.prototype,r),n&&Pk(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Tk(t){"@babel/helpers - typeof";return(Tk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jk(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,kk(n.key),n)}}function kk(t){var e=function(t,e){if("object"!=Tk(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Tk(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Tk(e)?e:String(e)}var xk=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.resolution=0,this.extractParameter=new Ck,this.resultSetting=new tC,this.surfaceAnalystMethod=Ar.ISOLINE,e&&V.extend(this,e),this.CLASS_NAME="SuperMap.SurfaceAnalystParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.resolution=null,t.extractParameter&&(t.extractParameter.destroy(),t.extractParameter=null),t.resultSetting&&(t.resultSetting.destroy(),t.resultSetting=null),t.surfaceAnalystMethod=null}}])&&jk(e.prototype,r),n&&jk(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ak(t){"@babel/helpers - typeof";return(Ak="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ik(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Nk(n.key),n)}}function Nk(t){var e=function(t,e){if("object"!=Ak(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ak(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ak(e)?e:String(e)}function Rk(t,e,r){return e=Bk(e),function(t,e){if(e&&("object"===Ak(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Mk(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Bk(t).constructor):e.apply(t,r))}function Mk(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Lk(){return(Lk="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Bk(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Bk(t){return(Bk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Dk(t,e){return(Dk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Fk=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Rk(this,e,[t])).dataset=null,r.filterQueryParameter=new rs,r.zValueFieldName=null,t&&V.extend(Mk(r),t),r.CLASS_NAME="SuperMap.DatasetSurfaceAnalystParameters",r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Dk(t,e)}(e,xk),r=e,o=[{key:"toObject",value:function(t,e){for(var r in t)if("filterQueryParameter"===r&&(e.filterQueryParameter=t.filterQueryParameter),"extractParameter"===r)t.extractParameter.clipRegion instanceof j&&t.extractParameter.clipRegion.components&&(t.extractParameter.clipRegion=en.fromGeometry(t.extractParameter.clipRegion)),e.extractParameter=t.extractParameter;else{if("dataset"===r)continue;if("surfaceAnalystMethod"===r)continue;e[r]=t[r]}}}],(n=[{key:"destroy",value:function(){Lk(Bk(e.prototype),"destroy",this).call(this);var t=this;t.dataset=null,t.filterQueryParameter&&(t.filterQueryParameter.destroy(),t.filterQueryParameter=null),t.zValueFieldName=null}}])&&Ik(r.prototype,n),o&&Ik(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function Uk(t){"@babel/helpers - typeof";return(Uk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Gk(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Vk(n.key),n)}}function Vk(t){var e=function(t,e){if("object"!=Uk(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Uk(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Uk(e)?e:String(e)}function qk(t,e,r){return e=Jk(e),function(t,e){if(e&&("object"===Uk(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Hk(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Jk(t).constructor):e.apply(t,r))}function Hk(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zk(){return(zk="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Jk(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Jk(t){return(Jk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Wk(t,e){return(Wk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Kk=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=qk(this,e,[t])).points=null,r.zValues=null,t&&V.extend(Hk(r),t),r.CLASS_NAME="SuperMap.GeometrySurfaceAnalystParameters",r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Wk(t,e)}(e,xk),r=e,(n=[{key:"destroy",value:function(){zk(Jk(e.prototype),"destroy",this).call(this);if(this.points){for(var t=0,r=this.points,n=r.length;t<n;t++)r[t].destroy();this.points=null}this.zValues=null}}])&&Gk(r.prototype,n),o&&Gk(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function Qk(t){"@babel/helpers - typeof";return(Qk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yk(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Xk(n.key),n)}}function Xk(t){var e=function(t,e){if("object"!=Qk(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Qk(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Qk(e)?e:String(e)}function Zk(t,e,r){return e=tx(e),function(t,e){if(e&&("object"===Qk(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],tx(t).constructor):e.apply(t,r))}function $k(){return($k="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=tx(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function tx(t){return(tx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ex(t,e){return(ex=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var rx=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Zk(this,e,[t,r])).CLASS_NAME="SuperMap.SurfaceAnalystService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ex(t,e)}(e,CE),r=e,(n=[{key:"destroy",value:function(){$k(tx(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof xk){var r;return r=this.getJsonParameters(t),this.request({method:"POST",data:r,scope:this,success:e,failure:e})}}},{key:"getJsonParameters",value:function(t){var e="",r={};if(t instanceof Fk)this.url=V.urlPathAppend(this.url,"datasets/"+t.dataset+"/"+t.surfaceAnalystMethod.toLowerCase()),Fk.toObject(t,r),e=V.toJSON(r);else{if(!(t instanceof Kk))return;this.url=V.urlPathAppend(this.url,"geometry/"+t.surfaceAnalystMethod.toLowerCase()),e=V.toJSON(t)}return this.returnContent=!0,e}},{key:"dataFormat",value:function(){return[lr.GEOJSON,lr.ISERVER,lr.FGB]}}])&&Yk(r.prototype,n),o&&Yk(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function nx(t){"@babel/helpers - typeof";return(nx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ox(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ix(n.key),n)}}function ix(t){var e=function(t,e){if("object"!=nx(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=nx(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==nx(e)?e:String(e)}var ax=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.dataset=null,this.zFactor=1,this.averageCurvatureName=null,this.profileCurvatureName="",this.planCurvatureName="",this.deleteExistResultDataset=!1,V.extend(this,e),this.CLASS_NAME="SuperMap.TerrainCurvatureCalculationParameters")}var e,r,n;return e=t,n=[{key:"toObject",value:function(t,e){for(var r in t)"dataset"!==r&&(e[r]=t[r])}}],(r=[{key:"destroy",value:function(){var t=this;t.dataset=null,t.zFactor=1,t.averageCurvatureName=null,t.profileCurvatureName=null,t.planCurvatureName=null,t.deleteExistResultDataset=!0}}])&&ox(e.prototype,r),n&&ox(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function sx(t){"@babel/helpers - typeof";return(sx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ux(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,lx(n.key),n)}}function lx(t){var e=function(t,e){if("object"!=sx(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=sx(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==sx(e)?e:String(e)}function cx(t,e,r){return e=px(e),function(t,e){if(e&&("object"===sx(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],px(t).constructor):e.apply(t,r))}function fx(){return(fx="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=px(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function px(t){return(px=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function hx(t,e){return(hx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var yx=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=cx(this,e,[t,r])).CLASS_NAME="SuperMap.TerrainCurvatureCalculationService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hx(t,e)}(e,CE),r=e,(n=[{key:"destroy",value:function(){fx(px(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){var r=this,n={};t instanceof ax&&(r.url=V.urlPathAppend(r.url,"datasets/"+t.dataset+"/terraincalculation/curvature")),ax.toObject(t,n);var o=V.toJSON(n);return r.url=V.urlAppend(r.url,"returnContent=true"),r.request({method:"POST",data:o,scope:r,success:e,failure:e})}}])&&ux(r.prototype,n),o&&ux(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function dx(t){"@babel/helpers - typeof";return(dx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bx(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,vx(n.key),n)}}function vx(t){var e=function(t,e){if("object"!=dx(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=dx(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==dx(e)?e:String(e)}var mx=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.dataset=null,this.cutFillType="GRID",this.afterCutFillDataset=null,this.resultDataset=null,this.buildPyramid=null,this.deleteExistResultDataset=null,this.bufferRadius=null,this.isRoundHead=null,this.line3D=null,this.region=null,this.region3D=null,V.extend(this,e),this.CLASS_NAME="SuperMap.TerrainCutFillCalculationParameters")}var e,r,n;return e=t,n=[{key:"toObject",value:function(t,e){for(var r in t)"dataset"!==r&&(e[r]=t[r])}}],(r=[{key:"destroy",value:function(){var t=this;t.cutFillType=null,t.afterCutFillDataset=null,t.resultDataset=null,t.buildPyramid=null,t.deleteExistResultDataset=null,t.bufferRadius=null,t.isRoundHead=null,t.line3D=null,t.region=null,t.region3D=null}}])&&bx(e.prototype,r),n&&bx(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function gx(t){"@babel/helpers - typeof";return(gx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Sx(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,wx(n.key),n)}}function wx(t){var e=function(t,e){if("object"!=gx(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=gx(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==gx(e)?e:String(e)}function Ox(t,e,r){return e=Px(e),function(t,e){if(e&&("object"===gx(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Px(t).constructor):e.apply(t,r))}function _x(){return(_x="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Px(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Px(t){return(Px=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ex(t,e){return(Ex=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Cx=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Ox(this,e,[t,r])).CLASS_NAME="SuperMap.TerrainCutFillCalculationService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ex(t,e)}(e,CE),r=e,(n=[{key:"destroy",value:function(){_x(Px(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){var r=this,n={};t instanceof mx&&(r.url=V.urlPathAppend(r.url,"datasets/"+t.dataset+"/terraincalculation/cutfill")),mx.toObject(t,n);var o=V.toJSON(n);return r.url=V.urlAppend(r.url,"returnContent=true"),r.request({method:"POST",data:o,scope:r,success:e,failure:e})}}])&&Sx(r.prototype,n),o&&Sx(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function Tx(t){"@babel/helpers - typeof";return(Tx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jx(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,kx(n.key),n)}}function kx(t){var e=function(t,e){if("object"!=Tx(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Tx(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Tx(e)?e:String(e)}var xx=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.dataset=null,this.terrainAnalystSetting=null,this.resultDatasetName=null,this.deleteExistResultDataset=null,V.extend(this,e),this.CLASS_NAME="SuperMap.TerrainAspectCalculationParameters")}var e,r,n;return e=t,n=[{key:"toObject",value:function(t,e){for(var r in t)"dataset"!==r&&(e[r]=t[r])}}],(r=[{key:"destroy",value:function(){this.terrainAnalystSetting=null,this.resultDatasetName=null,this.deleteExistResultDataset=null}}])&&jx(e.prototype,r),n&&jx(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ax(t){"@babel/helpers - typeof";return(Ax="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ix(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Nx(n.key),n)}}function Nx(t){var e=function(t,e){if("object"!=Ax(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ax(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ax(e)?e:String(e)}function Rx(t,e,r){return e=Lx(e),function(t,e){if(e&&("object"===Ax(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Lx(t).constructor):e.apply(t,r))}function Mx(){return(Mx="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Lx(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Lx(t){return(Lx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Bx(t,e){return(Bx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Dx=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Rx(this,e,[t,r])).CLASS_NAME="SuperMap.TerrainAspectCalculationService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Bx(t,e)}(e,CE),r=e,(n=[{key:"destroy",value:function(){Mx(Lx(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){var r=this,n={};t instanceof xx&&(r.url=V.urlPathAppend(r.url,"datasets/"+t.dataset+"/terraincalculation/aspect")),xx.toObject(t,n);var o=V.toJSON(n);return r.url=V.urlAppend(r.url,"returnContent=true"),r.request({method:"POST",data:o,scope:r,success:e,failure:e})}}])&&Ix(r.prototype,n),o&&Ix(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function Fx(t){"@babel/helpers - typeof";return(Fx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ux(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Gx(n.key),n)}}function Gx(t){var e=function(t,e){if("object"!=Fx(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Fx(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Fx(e)?e:String(e)}var Vx=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.dataset=null,this.terrainAnalystSetting=null,this.resultDatasetName=null,this.deleteExistResultDataset=null,this.zFactor=null,this.slopeType=null,V.extend(this,e),this.CLASS_NAME="SuperMap.TerrainSlopeCalculationParameters")}var e,r,n;return e=t,n=[{key:"toObject",value:function(t,e){for(var r in t)"dataset"!==r&&(e[r]=t[r])}}],(r=[{key:"destroy",value:function(){var t=this;t.terrainAnalystSetting=null,t.resultDatasetName=null,t.deleteExistResultDataset=null,t.zFactor=null,t.slopeType=null}}])&&Ux(e.prototype,r),n&&Ux(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function qx(t){"@babel/helpers - typeof";return(qx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hx(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,zx(n.key),n)}}function zx(t){var e=function(t,e){if("object"!=qx(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=qx(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==qx(e)?e:String(e)}function Jx(t,e,r){return e=Kx(e),function(t,e){if(e&&("object"===qx(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Kx(t).constructor):e.apply(t,r))}function Wx(){return(Wx="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Kx(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Kx(t){return(Kx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Qx(t,e){return(Qx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Yx=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Jx(this,e,[t,r])).CLASS_NAME="SuperMap.TerrainSlopeCalculationService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Qx(t,e)}(e,CE),r=e,(n=[{key:"destroy",value:function(){Wx(Kx(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){var r=this,n={};t instanceof Vx&&(r.url=V.urlPathAppend(r.url,"datasets/"+t.dataset+"/terraincalculation/slope")),Vx.toObject(t,n);var o=V.toJSON(n);return r.url=V.urlAppend(r.url,"returnContent=true"),r.request({method:"POST",data:o,scope:r,success:e,failure:e})}}])&&Hx(r.prototype,n),o&&Hx(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function Xx(t){"@babel/helpers - typeof";return(Xx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zx(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,$x(n.key),n)}}function $x(t){var e=function(t,e){if("object"!=Xx(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Xx(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Xx(e)?e:String(e)}function tA(t,e,r){return e=nA(e),function(t,e){if(e&&("object"===Xx(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return eA(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],nA(t).constructor):e.apply(t,r))}function eA(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function rA(){return(rA="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=nA(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function nA(t){return(nA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function oA(t,e){return(oA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var iA=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=tA(this,e,[t])).filterQueryParameter=null,r.dataset=null,t&&V.extend(eA(r),t),r.CLASS_NAME="SuperMap.DatasetThiessenAnalystParameters",r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&oA(t,e)}(e,zT),r=e,o=[{key:"toObject",value:function(t,e){for(var r in t)"clipRegion"===r?e.clipRegion=en.fromGeometry(t.clipRegion):e[r]=t[r]}}],(n=[{key:"destroy",value:function(){rA(nA(e.prototype),"destroy",this).call(this);this.filterQueryParameter&&(this.filterQueryParameter.destroy(),this.filterQueryParameter=null)}}])&&Zx(r.prototype,n),o&&Zx(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function aA(t){"@babel/helpers - typeof";return(aA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,uA(n.key),n)}}function uA(t){var e=function(t,e){if("object"!=aA(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=aA(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==aA(e)?e:String(e)}function lA(t,e,r){return e=pA(e),function(t,e){if(e&&("object"===aA(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return cA(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],pA(t).constructor):e.apply(t,r))}function cA(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fA(){return(fA="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=pA(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function pA(t){return(pA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function hA(t,e){return(hA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var yA=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=lA(this,e,[t])).points=null,t&&V.extend(cA(r),t),r.CLASS_NAME="SuperMap.GeometryThiessenAnalystParameters",r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hA(t,e)}(e,zT),r=e,o=[{key:"toObject",value:function(t,e){for(var r in t)"clipRegion"===r?e.clipRegion=en.fromGeometry(t.clipRegion):e[r]=t[r]}}],(n=[{key:"destroy",value:function(){fA(pA(e.prototype),"destroy",this).call(this);if(this.points){for(var t=this.points.length-1;t>=0;t--)this.points[t].destroy();this.points=null}}}])&&sA(r.prototype,n),o&&sA(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function dA(t){"@babel/helpers - typeof";return(dA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,vA(n.key),n)}}function vA(t){var e=function(t,e){if("object"!=dA(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=dA(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==dA(e)?e:String(e)}function mA(t,e,r){return e=wA(e),function(t,e){if(e&&("object"===dA(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return gA(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],wA(t).constructor):e.apply(t,r))}function gA(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function SA(){return(SA="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=wA(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function wA(t){return(wA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function OA(t,e){return(OA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var _A=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=mA(this,e,[t,r])).mode=null,r&&V.extend(gA(n),r),n.CLASS_NAME="SuperMap.ThiessenAnalystService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&OA(t,e)}(e,CE),r=e,(n=[{key:"destroy",value:function(){SA(wA(e.prototype),"destroy",this).call(this),this.mode=null}},{key:"processAsync",value:function(t,e){var r={},n=this;t instanceof iA?(n.mode="datasets",n.url=V.urlPathAppend(n.url,"datasets/"+t.dataset+"/thiessenpolygon"),iA.toObject(t,r)):t instanceof yA&&(n.mode="geometry",n.url=V.urlPathAppend(n.url,"geometry/thiessenpolygon"),yA.toObject(t,r));var o=V.toJSON(r);return this.returnContent=!0,n.request({method:"POST",data:o,scope:n,success:e,failure:e})}},{key:"dataFormat",value:function(){return[lr.GEOJSON,lr.ISERVER,lr.FGB]}}])&&bA(r.prototype,n),o&&bA(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function PA(t){"@babel/helpers - typeof";return(PA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function EA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,CA(n.key),n)}}function CA(t){var e=function(t,e){if("object"!=PA(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=PA(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==PA(e)?e:String(e)}var TA=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.referenceDatasetName=null,this.referenceFilterQueryParameter=null,this.createResultDataset=null,this.resultDatasetName=null,this.resultDatasourceName=null,this.minDistance=null,this.maxDistance=null,e&&V.extend(this,e),this.CLASS_NAME="SuperMap.MinDistanceAnalystParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.referenceDatasetName=null,t.dataset=null,t.referenceFilterQueryParameter=null,t.createResultDataset=null,t.resultDatasetName=null,t.resultDatasourceName=null,t.minDistance=null,t.maxDistance=null}}])&&EA(e.prototype,r),n&&EA(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function jA(t){"@babel/helpers - typeof";return(jA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,xA(n.key),n)}}function xA(t){var e=function(t,e){if("object"!=jA(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=jA(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==jA(e)?e:String(e)}function AA(t,e,r){return e=RA(e),function(t,e){if(e&&("object"===jA(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return IA(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],RA(t).constructor):e.apply(t,r))}function IA(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function NA(){return(NA="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=RA(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function RA(t){return(RA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function MA(t,e){return(MA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var LA=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=AA(this,e,[t])).dataset=null,r.inputFilterQueryParameter=null,t&&V.extend(IA(r),t),r.CLASS_NAME="SuperMap.DatasetMinDistanceAnalystParameters",r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&MA(t,e)}(e,TA),r=e,(n=[{key:"destroy",value:function(){NA(RA(e.prototype),"destroy",this).call(this);this.dataset=null,this.inputFilterQueryParameter=null}}])&&kA(r.prototype,n),o&&kA(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function BA(t){"@babel/helpers - typeof";return(BA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function DA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,FA(n.key),n)}}function FA(t){var e=function(t,e){if("object"!=BA(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=BA(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==BA(e)?e:String(e)}function UA(t,e,r){return e=qA(e),function(t,e){if(e&&("object"===BA(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return GA(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],qA(t).constructor):e.apply(t,r))}function GA(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function VA(){return(VA="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=qA(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function qA(t){return(qA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function HA(t,e){return(HA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var zA=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=UA(this,e,[t])).inputGeometries=null,t&&V.extend(GA(r),t),r.CLASS_NAME="SuperMap.GeometryMinDistanceAnalystParameters",r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&HA(t,e)}(e,TA),r=e,o=[{key:"toObject",value:function(t,e){for(var r in t)if("inputGeometries"===r&&t.inputGeometries){for(var n=[],o=0;o<t.inputGeometries.length;o++)n.push(en.fromGeometry(t.inputGeometries[o]));e.inputGeometries=n}else e[r]=t[r]}}],(n=[{key:"destroy",value:function(){VA(qA(e.prototype),"destroy",this).call(this);this.inputGeometries=null}}])&&DA(r.prototype,n),o&&DA(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function JA(t){"@babel/helpers - typeof";return(JA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function WA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,KA(n.key),n)}}function KA(t){var e=function(t,e){if("object"!=JA(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=JA(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==JA(e)?e:String(e)}function QA(t,e,r){return e=ZA(e),function(t,e){if(e&&("object"===JA(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return YA(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],ZA(t).constructor):e.apply(t,r))}function YA(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function XA(){return(XA="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ZA(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function ZA(t){return(ZA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function $A(t,e){return($A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var tI=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=QA(this,e,[t,r]),r&&V.extend(YA(n),r),n.CLASS_NAME="SuperMap.MinDistanceAnalystService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$A(t,e)}(e,CE),r=e,(n=[{key:"destroy",value:function(){XA(ZA(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){var r=this,n={};t instanceof LA?(r.url=V.urlPathAppend(r.url,"datasets/"+t.dataset+"/mindistance"),n=t):t instanceof zA&&(r.url=V.urlPathAppend(r.url,"geometry/mindistance"),zA.toObject(t,n));var o=V.toJSON(n);return r.url=V.urlAppend(r.url,"returnContent=true"),r.request({method:"POST",data:o,scope:r,success:e,failure:e})}}])&&WA(r.prototype,n),o&&WA(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function eI(t){"@babel/helpers - typeof";return(eI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rI(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,nI(n.key),n)}}function nI(t){var e=function(t,e){if("object"!=eI(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=eI(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==eI(e)?e:String(e)}function oI(t,e,r){return e=sI(e),function(t,e){if(e&&("object"===eI(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return iI(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],sI(t).constructor):e.apply(t,r))}function iI(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function aI(){return(aI="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=sI(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function sI(t){return(sI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function uI(t,e){return(uI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var lI=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=oI(this,e,[t,r]),r&&V.extend(iI(n),r),n.CLASS_NAME="SuperMap.ConvexHullAnalystService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uI(t,e)}(e,CE),r=e,(n=[{key:"destroy",value:function(){aI(sI(e.prototype),"destroy",this).call(this),this.mode=null}},{key:"processAsync",value:function(t,e){var r=this;r.url=V.urlPathAppend(r.url,"geometry/3d/convexhull");var n=V.toJSON(t);return r.url=V.urlAppend(r.url,"returnContent=true"),r.request({method:"POST",data:n,scope:r,success:e,failure:e})}}])&&rI(r.prototype,n),o&&rI(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function cI(t){"@babel/helpers - typeof";return(cI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fI(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,pI(n.key),n)}}function pI(t){var e=function(t,e){if("object"!=cI(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=cI(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==cI(e)?e:String(e)}function hI(t,e,r){return e=bI(e),function(t,e){if(e&&("object"===cI(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return yI(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],bI(t).constructor):e.apply(t,r))}function yI(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dI(){return(dI="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=bI(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function bI(t){return(bI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function vI(t,e){return(vI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var mI=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=hI(this,e,[t,r]),r&&V.extend(yI(n),r),n.CLASS_NAME="SuperMap.GeometryBatchAnalystService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vI(t,e)}(e,CE),r=e,(n=[{key:"processAsync",value:function(t,e){var r=this;r.url=V.urlPathAppend(r.url,"geometry/batchanalyst"),r.url=V.urlAppend(r.url,"returnContent=true&ignoreAnalystParam=true");var n=r._processParams(t),o=V.toJSON(n);return r.request({method:"POST",data:o,scope:r,success:e,failure:e})}},{key:"_processParams",value:function(t){var e=this;if(V.isArray(t)){var r=[];return t.map(function(t){return r.push(e._toJSON(t)),t}),r}}},{key:"_toJSON",value:function(t){var e={};if("buffer"===t.analystName)e.analystName="buffer",e.param={},mC.toObject(t.param,e.param);else if("overlay"===t.analystName)e.analystName="overlay",e.param={},qj.toObject(t.param,e.param);else if("interpolationDensity"===t.analystName)e.analystName="interpolationDensity",e.param={},yT.toObject(t.param,e.param);else if("interpolationidw"===t.analystName)e.analystName="interpolationidw",e.param={},yT.toObject(t.param,e.param);else if("interpolationRBF"===t.analystName)e.analystName="interpolationRBF",e.param={},yT.toObject(t.param,e.param);else if("interpolationKriging"===t.analystName)e.analystName="interpolationKriging",e.param={},yT.toObject(t.param,e.param);else{if("thiessenpolygon"!==t.analystName)return t;e.analystName="thiessenpolygon",e.param={},yA.toObject(t.param,e.param)}return e}},{key:"destroy",value:function(){dI(bI(e.prototype),"destroy",this).call(this)}}])&&fI(r.prototype,n),o&&fI(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function gI(t){"@babel/helpers - typeof";return(gI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function SI(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,wI(n.key),n)}}function wI(t){var e=function(t,e){if("object"!=gI(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=gI(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==gI(e)?e:String(e)}var OI=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=e,this.options=r||{}}var e,r,n;return e=t,(r=[{key:"getAreaSolarRadiationResult",value:function(t,e,r){var n=this;return new DE(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"bufferAnalysis",value:function(t,e,r){var n=this;return new TC(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"densityAnalysis",value:function(t,e,r){var n=this;return new UC(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"generateSpatialData",value:function(t,e,r){var n=this;return new ZC(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"geoRelationAnalysis",value:function(t,e,r){var n=this;return new cT(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"interpolationAnalysis",value:function(t,e,r){var n=this;return new lj(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"mathExpressionAnalysis",value:function(t,e,r){var n=this;return new wj(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"overlayAnalysis",value:function(t,e,r){var n=this;return new Zj(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"routeCalculateMeasure",value:function(t,e,r){var n=this;return new ck(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"routeLocate",value:function(t,e,r){var n=this;return new Ok(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"surfaceAnalysis",value:function(t,e,r){var n=this;return new rx(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"terrainCurvatureCalculate",value:function(t,e,r){var n=this;return new yx(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"terrainCutFillCalculate",value:function(t,e,r){var n=this;return new Cx(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"terrainAspectCalculate",value:function(t,e,r){var n=this;return new Dx(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"terrainSlopeCalculate",value:function(t,e,r){var n=this;return new Yx(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"thiessenAnalysis",value:function(t,e,r){var n=this;return new _A(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"minDistanceAnalysis",value:function(t,e,r){var n=this;return new tI(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"convexHullAnalysis",value:function(t,e,r){var n=this;return new lI(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"geometrybatchAnalysis",value:function(t,e,r){for(var n=new mI(this.url,{format:this._processFormat(r)}),o=[],i=0;i<t.length;i++){var a=t[i];o.push({analystName:a.analystName,param:a.param})}return n.processAsync(o,e)}},{key:"_processFormat",value:function(t){return t||lr.GEOJSON}}])&&SI(e.prototype,r),n&&SI(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function _I(t){"@babel/helpers - typeof";return(_I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function PI(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,EI(n.key),n)}}function EI(t){var e=function(t,e){if("object"!=_I(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=_I(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==_I(e)?e:String(e)}function CI(t,e,r){return e=TI(e),function(t,e){if(e&&("object"===_I(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],TI(t).constructor):e.apply(t,r))}function TI(t){return(TI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function jI(t,e){return(jI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var kI=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=CI(this,e,[t,r]))._spatialAnalystService=new OI(t,r),n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jI(t,e)}(e,An),r=e,(n=[{key:"getAreaSolarRadiationResult",value:function(t,e,r){return this._spatialAnalystService.getAreaSolarRadiationResult(t,e,r)}},{key:"bufferAnalysis",value:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.bufferAnalysis(t,e,r)}},{key:"densityAnalysis",value:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.densityAnalysis(t,e,r)}},{key:"generateSpatialData",value:function(t,e,r){return this._spatialAnalystService.generateSpatialData(t,e,r)}},{key:"geoRelationAnalysis",value:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.geoRelationAnalysis(t,e,r)}},{key:"interpolationAnalysis",value:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.interpolationAnalysis(t,e,r)}},{key:"mathExpressionAnalysis",value:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.mathExpressionAnalysis(t,e,r)}},{key:"overlayAnalysis",value:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.overlayAnalysis(t,e,r)}},{key:"routeCalculateMeasure",value:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.routeCalculateMeasure(t,e,r)}},{key:"routeLocate",value:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.routeLocate(t,e,r)}},{key:"surfaceAnalysis",value:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.surfaceAnalysis(t,e,r)}},{key:"terrainCurvatureCalculate",value:function(t,e,r){return this._spatialAnalystService.terrainCurvatureCalculate(t,e,r)}},{key:"terrainCutFillCalculate",value:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.terrainCutFillCalculate(t,e,r)}},{key:"terrainAspectCalculate",value:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.terrainAspectCalculate(t,e,r)}},{key:"terrainSlopeCalculate",value:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.terrainSlopeCalculate(t,e,r)}},{key:"thiessenAnalysis",value:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.thiessenAnalysis(t,e,r)}},{key:"minDistanceAnalysis",value:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.minDistanceAnalysis(t,e,r)}},{key:"convexHullAnalysis",value:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.convexHullAnalysis(t,e,r)}},{key:"geometrybatchAnalysis",value:function(t,e,r){for(var n=0;n<t.length;n++)t[n].param=this._processParams(t[n].param);return this._spatialAnalystService.geometrybatchAnalysis(t,e,r)}},{key:"_processParams",value:function(t){if(!t)return{};if(t.bounds&&(t.bounds=hn.toSuperMapBounds(t.bounds)),t.inputPoints)for(var e=0;e<t.inputPoints.length;e++){var r=t.inputPoints[e];hn.isArray(r)&&(t.inputPoints[e]={x:r[0],y:r[1],tag:r[2]})}if(t.points)for(var n=0;n<t.points.length;n++){var o=t.points[n];t.points[n]=hn.toSuperMapPoint(o)}if(t.point&&(t.point=hn.toSuperMapPoint(t.point)),t.extractRegion&&(t.extractRegion=hn.toSuperMapGeometry(t.extractRegion)),t.extractParameter&&t.extractParameter.clipRegion&&(t.extractParameter.clipRegion=hn.toSuperMapGeometry(t.extractParameter.clipRegion)),t.clipParam&&t.clipParam.clipRegion&&(t.clipParam.clipRegion=hn.toSuperMapGeometry(t.clipParam.clipRegion)),t.clipRegion&&(t.clipRegion=hn.toSuperMapGeometry(t.clipRegion)),t.sourceRoute&&t.sourceRoute){var i={type:"LINEM"};i.parts=[t.sourceRoute.geometry.coordinates.length],i.points=[];for(var a=0;a<t.sourceRoute.geometry.coordinates.length;a++){var s=t.sourceRoute.geometry.coordinates[a];i.points=i.points.concat({x:s[0],y:s[1],measure:s[2]})}t.sourceRoute=i}if(t.operateRegions&&hn.isArray(t.operateRegions)&&t.operateRegions.map(function(e,r){return t.operateRegions[r]=hn.toSuperMapGeometry(e),t.operateRegions[r]}),t.sourceGeometry){var u=null;t.sourceGeometrySRID&&(u=t.sourceGeometrySRID),t.sourceGeometry=hn.toSuperMapGeometry(t.sourceGeometry),u&&(t.sourceGeometry.SRID=u),delete t.sourceGeometry.sourceGeometrySRID}if(t.operateGeometry&&(t.operateGeometry=hn.toSuperMapGeometry(t.operateGeometry)),t.sourceGeometries){for(var l=[],c=0;c<t.sourceGeometries.length;c++)l.push(hn.toSuperMapGeometry(t.sourceGeometries[c]));t.sourceGeometries=l}if(t.operateGeometries){for(var f=[],p=0;p<t.operateGeometries.length;p++)f.push(hn.toSuperMapGeometry(t.operateGeometries[p]));t.operateGeometries=f}if(t.inputGeometries){for(var h=[],y=0;y<t.inputGeometries.length;y++)h.push(hn.toSuperMapGeometry(t.inputGeometries[y]));t.inputGeometries=h}return t.sourceRoute&&t.sourceRoute.components&&hn.isArray(t.sourceRoute.components)&&t.sourceRoute.components.map(function(e,r){return t.sourceRoute.components[r]=hn.toSuperMapGeometry(e),t.sourceRoute.components[r]}),t}},{key:"_processFormat",value:function(t){return t||lr.GEOJSON}}])&&PI(r.prototype,n),o&&PI(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function xI(t){"@babel/helpers - typeof";return(xI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function AI(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,II(n.key),n)}}function II(t){var e=function(t,e){if("object"!=xI(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=xI(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==xI(e)?e:String(e)}var NI=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.datasetNames=null,this.dataSourceNames=null,this.joinItems=null,this.themes=null,this.displayFilters=null,this.displayOrderBys=null,this.fieldValuesDisplayFilter=null,e&&V.extend(this,e),this.CLASS_NAME="SuperMap.ThemeParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;if(t.datasetNames=null,t.dataSourceNames=null,t.joinItems){for(var e=0,r=t.joinItems,n=r.length;e<n;e++)r[e].destroy();t.joinItems=null}if(t.themes){for(var o=0,i=t.themes,a=i.length;o<a;o++)i[o].destroy();t.themes=null}}}])&&AI(e.prototype,r),n&&AI(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function RI(t){"@babel/helpers - typeof";return(RI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function MI(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,LI(n.key),n)}}function LI(t){var e=function(t,e){if("object"!=RI(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=RI(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==RI(e)?e:String(e)}function BI(t,e,r){return e=UI(e),function(t,e){if(e&&("object"===RI(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return DI(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],UI(t).constructor):e.apply(t,r))}function DI(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function FI(){return(FI="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=UI(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function UI(t){return(UI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function GI(t,e){return(GI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var VI=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=BI(this,e,[t,r]),r&&V.extend(DI(n),r),n.url=V.urlPathAppend(n.url,"tempLayersSet"),n.CLASS_NAME="SuperMap.ThemeService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&GI(t,e)}(e,oo),r=e,(n=[{key:"destroy",value:function(){FI(UI(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof NI){var r;return r=this.getJsonParameters(t),this.request({method:"POST",data:r,scope:this,success:e,failure:e})}}},{key:"getJsonParameters",value:function(t){var e,r="",n=null,o=null,i=null;r+="[{'type': 'UGC','subLayers': {'layers': [";for(var a=0;a<t.themes.length;a++){n=t.themes[a];var s=V.toJSON(n);if(r+="{'theme': "+(s=s.slice(0,-1))+"},'type': 'UGC','ugcLayerType': 'THEME',",(o=t.displayFilters)&&o.length>0&&(1===o.length?r+="'displayFilter':\""+o[0]+'",':r+="'displayFilter':\""+o[a]+'",'),(i=t.displayOrderBy)&&i.length>0&&(1===i.length?r+="'displayOrderBy':'"+i[0]+"',":r+="'displayOrderBy':'"+i[a]+"',"),(e=t.fieldValuesDisplayFilter)&&(r+="'fieldValuesDisplayFilter':"+V.toJSON(e)+","),t.joinItems&&t.joinItems.length>0&&t.joinItems[a]&&(r+="'joinItems':["+V.toJSON(t.joinItems[a])+"],"),t.datasetNames&&t.dataSourceNames){var u=t.datasetNames[a]?a:t.datasetNames.length-1,l=t.dataSourceNames[a]?a:t.dataSourceNames.length-1;r+="'datasetInfo': {'name': '"+t.datasetNames[u]+"','dataSourceName': '"+t.dataSourceNames[l]+"'}},"}else r+="},"}t.themes&&t.themes.length>0&&(r=r.substring(0,r.length-1)),r+="]},";var c=this.url.split("/");return r+="'name': '"+c[c.length-2]+"'}]"}}])&&MI(r.prototype,n),o&&MI(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function qI(t){"@babel/helpers - typeof";return(qI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function HI(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,zI(n.key),n)}}function zI(t){var e=function(t,e){if("object"!=qI(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=qI(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==qI(e)?e:String(e)}function JI(t,e,r){return e=WI(e),function(t,e){if(e&&("object"===qI(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],WI(t).constructor):e.apply(t,r))}function WI(t){return(WI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function KI(t,e){return(KI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var QI=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=JI(this,e,[t,r]))._commonThemeService=new VI(t,r),n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&KI(t,e)}(e,An),r=e,(n=[{key:"getThemeInfo",value:function(t,e){return this._commonThemeService.processAsync(t,e)}}])&&HI(r.prototype,n),o&&HI(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function YI(t){"@babel/helpers - typeof";return(YI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function XI(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ZI(n.key),n)}}function ZI(t){var e=function(t,e){if("object"!=YI(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=YI(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==YI(e)?e:String(e)}var $I=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.keyWord=null,this.returnPosition=!1,V.extend(this,e),this.CLASS_NAME="SuperMap.StopQueryParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){V.reset(this)}}])&&XI(e.prototype,r),n&&XI(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function tN(t){"@babel/helpers - typeof";return(tN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function eN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,rN(n.key),n)}}function rN(t){var e=function(t,e){if("object"!=tN(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=tN(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==tN(e)?e:String(e)}function nN(t,e,r){return e=aN(e),function(t,e){if(e&&("object"===tN(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return oN(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],aN(t).constructor):e.apply(t,r))}function oN(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function iN(){return(iN="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=aN(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function aN(t){return(aN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function sN(t,e){return(sN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var uN=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=nN(this,e,[t,r]),r=r||{},V.extend(oN(n),r),n.CLASS_NAME="SuperMap.StopQueryService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sN(t,e)}(e,oo),r=e,(n=[{key:"destroy",value:function(){iN(aN(e.prototype),"destroy",this).call(this),V.reset(this)}},{key:"processAsync",value:function(t,e){if(t instanceof $I){return this.url=V.urlPathAppend(this.url,"stops/keyword/"+t.keyWord),this.request({method:"GET",params:{returnPosition:t.returnPosition},scope:this,success:e,failure:e})}}}])&&eN(r.prototype,n),o&&eN(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function lN(t){"@babel/helpers - typeof";return(lN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,fN(n.key),n)}}function fN(t){var e=function(t,e){if("object"!=lN(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=lN(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==lN(e)?e:String(e)}var pN=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.transferLines=null,this.points=null,V.extend(this,e),this.CLASS_NAME="SuperMap.TransferPathParameters"}var e,r,n;return e=t,n=[{key:"toJson",value:function(t){if(t)return V.toJSON(t)}}],(r=[{key:"destroy",value:function(){V.reset(this)}}])&&cN(e.prototype,r),n&&cN(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function hN(t){"@babel/helpers - typeof";return(hN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,dN(n.key),n)}}function dN(t){var e=function(t,e){if("object"!=hN(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=hN(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==hN(e)?e:String(e)}function bN(t,e,r){return e=mN(e),function(t,e){if(e&&("object"===hN(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],mN(t).constructor):e.apply(t,r))}function vN(){return(vN="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=mN(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function mN(t){return(mN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function gN(t,e){return(gN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var SN=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=bN(this,e,[t,r])).CLASS_NAME="SuperMap.TransferPathService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gN(t,e)}(e,oo),r=e,(n=[{key:"destroy",value:function(){vN(mN(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof pN){var r;return this.url=V.urlPathAppend(this.url,"path"),r={points:V.toJSON(t.points),transferLines:V.toJSON(t.transferLines)},this.request({method:"GET",params:r,scope:this,success:e,failure:e})}}}])&&yN(r.prototype,n),o&&yN(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function wN(t){"@babel/helpers - typeof";return(wN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ON(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_N(n.key),n)}}function _N(t){var e=function(t,e){if("object"!=wN(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=wN(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==wN(e)?e:String(e)}var PN=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.solutionCount=6,this.transferPreference=Mr.NONE,this.transferTactic=Rr.LESS_TIME,this.walkingRatio=null,this.points=!1,this.evadeLines=null,this.evadeStops=null,this.priorLines=null,this.priorStops=null,this.travelTime=null,V.extend(this,e),this.CLASS_NAME="SuperMap.TransferSolutionParameters"}var e,r,n;return e=t,n=[{key:"toJson",value:function(t){if(t)return V.toJSON(t)}}],(r=[{key:"destroy",value:function(){V.reset(this)}}])&&ON(e.prototype,r),n&&ON(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function EN(t){"@babel/helpers - typeof";return(EN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function CN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,TN(n.key),n)}}function TN(t){var e=function(t,e){if("object"!=EN(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=EN(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==EN(e)?e:String(e)}function jN(t,e,r){return e=xN(e),function(t,e){if(e&&("object"===EN(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],xN(t).constructor):e.apply(t,r))}function kN(){return(kN="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=xN(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function xN(t){return(xN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function AN(t,e){return(AN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var IN=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=jN(this,e,[t,r])).CLASS_NAME="SuperMap.TransferSolutionService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&AN(t,e)}(e,oo),r=e,(n=[{key:"destroy",value:function(){kN(xN(e.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof PN){var r;return this.url=V.urlPathAppend(this.url,"solutions"),r={points:V.toJSON(t.points),walkingRatio:t.walkingRatio,transferTactic:t.transferTactic,solutionCount:t.solutionCount,transferPreference:t.transferPreference},t.evadeLines&&(r.evadeLines=V.toJSON(t.evadeLines)),t.evadeStops&&(r.evadeStops=V.toJSON(t.evadeStops)),t.priorLines&&(r.priorLines=V.toJSON(t.priorLines)),t.priorStops&&(r.priorStops=V.toJSON(t.priorStops)),t.travelTime&&(r.travelTime=t.travelTime),this.request({method:"GET",params:r,scope:this,success:e,failure:e})}}}])&&CN(r.prototype,n),o&&CN(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function NN(t){"@babel/helpers - typeof";return(NN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function RN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,MN(n.key),n)}}function MN(t){var e=function(t,e){if("object"!=NN(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=NN(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==NN(e)?e:String(e)}var LN=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=e,this.options=r||{}}var e,r,n;return e=t,(r=[{key:"queryStop",value:function(t,e){var r=this;return new uN(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}},{key:"analysisTransferPath",value:function(t,e){var r=this;return new SN(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}},{key:"analysisTransferSolution",value:function(t,e){var r=this;return new IN(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}}])&&RN(e.prototype,r),n&&RN(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function BN(t){"@babel/helpers - typeof";return(BN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function DN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,FN(n.key),n)}}function FN(t){var e=function(t,e){if("object"!=BN(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=BN(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==BN(e)?e:String(e)}function UN(t,e,r){return e=GN(e),function(t,e){if(e&&("object"===BN(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],GN(t).constructor):e.apply(t,r))}function GN(t){return(GN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function VN(t,e){return(VN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var qN=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=UN(this,e,[t,r]))._trafficTransferAnalystServiceBase=new LN(t,r),n}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&VN(t,e)}(e,An),r=e,(n=[{key:"queryStop",value:function(t,e){return this._trafficTransferAnalystServiceBase.queryStop(t,e)}},{key:"analysisTransferPath",value:function(t,e){return this._trafficTransferAnalystServiceBase.analysisTransferPath(t,e)}},{key:"analysisTransferSolution",value:function(t,e){return this._trafficTransferAnalystServiceBase.analysisTransferSolution(t,e)}},{key:"_processParams",value:function(t){return t?(t.transferLines&&!hn.isArray(t.transferLines)&&(t.transferLines=[t.transferLines]),t.points&&hn.isArray(t.points)&&t.points.map(function(e,r){return t.points[r]=e instanceof o().LngLat?{x:e.lng,y:e.lat}:e,t.points[r]}),t):{}}}])&&DN(r.prototype,n),i&&DN(r,i),Object.defineProperty(r,"prototype",{writable:!1}),e}();function HN(t){"@babel/helpers - typeof";return(HN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zN(){zN=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new x(n||[]);return o(a,"_invoke",{value:C(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",b={};function v(){}function m(){}function g(){}var S={};l(S,a,function(){return this});var w=Object.getPrototypeOf,O=w&&w(w(A([])));O&&O!==r&&n.call(O,a)&&(S=O);var _=g.prototype=v.prototype=Object.create(S);function P(t){["next","throw","return"].forEach(function(e){l(t,e,function(t){return this._invoke(e,t)})})}function E(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==HN(c)&&n.call(c,"__await")?e.resolve(c.__await).then(function(t){r("next",t,a,s)},function(t){r("throw",t,a,s)}):e.resolve(c).then(function(t){l.value=t,a(l)},function(t){return r("throw",t,a,s)})}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e(function(e,o){r(t,n,e,o)})}return i=i?i.then(o,o):o()}})}function C(e,r,n){var o=p;return function(i,a){if(o===y)throw new Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=T(s,n);if(u){if(u===b)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?d:h,l.arg===b)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=d,n.method="throw",n.arg=l.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,b;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,b):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function A(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(HN(e)+" is not iterable")}return m.prototype=g,o(_,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},P(E.prototype),l(E.prototype,s,function(){return this}),e.AsyncIterator=E,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new E(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},P(_),l(_,u,"Generator"),l(_,a,function(){return this}),l(_,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=A,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:A(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),b}},e}function JN(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function WN(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){JN(i,n,o,a,s,"next",t)}function s(t){JN(i,n,o,a,s,"throw",t)}a(void 0)})}}function KN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,QN(n.key),n)}}function QN(t){var e=function(t,e){if("object"!=HN(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=HN(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==HN(e)?e:String(e)}function YN(t,e,r){return e=tR(e),XN(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],tR(t).constructor):e.apply(t,r))}function XN(t,e){if(e&&("object"===HN(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ZN(t)}function ZN(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $N(){return($N="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=tR(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function tR(t){return(tR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function eR(t,e){return(eR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var rR=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=YN(this,e,[t,r]),r&&V.extend(ZN(n),r),n.templates=[],n.CLASS_NAME="SuperMap.WebPrintingService",n.url?n:XN(n)}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&eR(t,e)}(e,oo),r=e,(n=[{key:"destroy",value:function(){$N(tR(e.prototype),"destroy",this).call(this)}},{key:"createWebPrintingJob",value:function(){var t=WN(zN().mark(function t(e,r){return zN().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this._processParams(e);case 4:return t.abrupt("return",this.processAsync("jobs","POST",r,e));case 5:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}()},{key:"getPrintingJob",value:function(t,e){this.rollingProcess(this._processUrl("jobs/".concat(t)),e)}},{key:"getPrintingJobResult",value:function(t,e){return this.processAsync("jobs/".concat(t,"/result"),"GET",e)}},{key:"getLayoutTemplates",value:function(t){return this.processAsync("layouts","GET",t)}},{key:"rollingProcess",value:function(t,e){var r=this;this.id&&clearInterval(this.id),this.id=setInterval(function(){r.request({url:t,method:"GET",scope:r,success:e,failure:e})},1e3)}},{key:"processAsync",value:function(t,e,r,n){var o={url:this._processUrl(t),method:e,scope:this,success:r,failure:r};return n&&(o.data=V.toJSON(n)),this.request(o)}},{key:"transformResult",value:function(t,e){return"FINISHED"===(t=V.transformResult(t)).status||"ERROR"===t.status?clearInterval(this.id):"RUNNING"===t.status&&(e.success=!1),{result:t,options:e}}},{key:"_processUrl",value:function(t){return t?V.urlPathAppend(this.url,t):this.url}},{key:"_processParams",value:function(){var t=WN(zN().mark(function t(e){var r,n,o,i,a,s,u,l,c,f,p,h,y,d,b,v,m;return zN().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.layoutOptions){t.next=2;break}return t.abrupt("return");case 2:if(r=e.layoutOptions,n=r.legendOptions,o=r.templateName,n&&(!e.layoutOptions.legendOptions.title&&(e.layoutOptions.legendOptions.title=""),e.layoutOptions.legendOptions.picAsBase64=e.layoutOptions.legendOptions.picAsBase64&&e.layoutOptions.legendOptions.picAsBase64.replace(/^data:.+;base64,/,""),e.layoutOptions.legendOptions.customItems&&e.layoutOptions.legendOptions.customItems.hasOwnProperty("picAsBase64")&&(e.layoutOptions.legendOptions.customItems.picAsBase64=e.layoutOptions.legendOptions.customItems.picAsBase64.replace(/^data:.+;base64,/,""))),this.templates.length){t.next=9;break}return t.next=7,this.getLayoutTemplates();case 7:i=t.sent,this.templates=i.result;case 9:a=this.templates.find(function(t){return t.templateName===o}),s=a.layoutOptions,u=s.hasCopyright,l=s.hasSubtitle,c=s.hasAuthor,f=s.hasScaleBar,p=s.hasTitle,h=s.hasTime,y=s.hasSummaryText,d=s.hasLittleMap,b=s.hasNorthArrow,v=s.hasLegend,m=e.layoutOptions,p?void 0===m.title&&(e.layoutOptions.title=null):delete e.layoutOptions.title,l?void 0===m.subTitle&&(e.layoutOptions.subTitle=null):delete e.layoutOptions.subTitle,c?void 0===m.author&&(e.layoutOptions.author=null):delete e.layoutOptions.author,u?void 0===m.copyright&&(e.layoutOptions.copyright=null):delete e.layoutOptions.copyright,y&&m.summaryText||delete e.layoutOptions.summaryText,h&&m.time||delete e.layoutOptions.time,d&&m.littleMapOptions||delete e.layoutOptions.littleMapOptions,f&&m.scaleBarOptions||delete e.layoutOptions.scaleBarOptions,b&&m.northArrowOptions||delete e.layoutOptions.northArrowOptions,v&&m.legendOptions||delete e.layoutOptions.legendOptions;case 22:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}])&&KN(r.prototype,n),o&&KN(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function nR(t){"@babel/helpers - typeof";return(nR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,iR(n.key),n)}}function iR(t){var e=function(t,e){if("object"!=nR(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=nR(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==nR(e)?e:String(e)}function aR(t,e,r){return e=sR(e),function(t,e){if(e&&("object"===nR(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],sR(t).constructor):e.apply(t,r))}function sR(t){return(sR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function uR(t,e){return(uR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var lR=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=aR(this,e,[t,r]))._webPrintingService=new rR(t,r),n}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uR(t,e)}(e,An),r=e,(n=[{key:"createWebPrintingJob",value:function(t,e){if(t)return this._webPrintingService.createWebPrintingJob(this._processParams(t),e)}},{key:"getPrintingJob",value:function(t,e){return this._webPrintingService.getPrintingJob(t,e)}},{key:"getPrintingJobResult",value:function(t,e){return this._webPrintingService.getPrintingJobResult(t,e)}},{key:"getLayoutTemplates",value:function(t){return this._webPrintingService.getLayoutTemplates(t)}},{key:"_processParams",value:function(t){return t.layoutOptions&&t.layoutOptions.littleMapOptions&&(t.layoutOptions.littleMapOptions.center=this._toPointObject(t.layoutOptions.littleMapOptions.center)),t.exportOptions&&(t.exportOptions.center=this._toPointObject(t.exportOptions.center)),t}},{key:"_toPointObject",value:function(t){return hn.isArray(t)?{x:t[0],y:t[1]}:t instanceof at||t instanceof o().Point?{x:t.x,y:t.y}:t instanceof o().LngLat?{x:t.lng,y:t.lat}:t}}])&&oR(r.prototype,n),i&&oR(r,i),Object.defineProperty(r,"prototype",{writable:!1}),e}();function cR(t){"@babel/helpers - typeof";return(cR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function pR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,hR(n.key),n)}}function hR(t){var e=function(t,e){if("object"!=cR(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=cR(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==cR(e)?e:String(e)}function yR(t,e,r){return e=vR(e),function(t,e){if(e&&("object"===cR(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return dR(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],vR(t).constructor):e.apply(t,r))}function dR(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bR(){return(bR="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=vR(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function vR(t){return(vR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function mR(t,e){return(mR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var gR=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=yR(this,e,[t,r])).options=r||{},r&&V.extend(dR(n),r),n.CLASS_NAME="SuperMap.ImageService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mR(t,e)}(e,oo),r=e,(n=[{key:"destroy",value:function(){bR(vR(e.prototype),"destroy",this).call(this)}},{key:"getCollections",value:function(t){var e=V.convertPath("/collections"),r=V.urlPathAppend(this.url,e);return this._processAsync({url:r,mehtod:"GET",callback:t})}},{key:"getCollectionByID",value:function(t,e){var r={collectionId:t},n=V.convertPath("/collections/{collectionId}",r),o=V.urlPathAppend(this.url,n);return this._processAsync({url:o,mehtod:"GET",callback:e})}},{key:"search",value:function(t,e){var r=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?fR(Object(r),!0).forEach(function(e){var n,o,i;n=t,o=e,i=r[e],(o=hR(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):fR(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}({},t||{}),n=V.convertPath("/search"),o=V.urlPathAppend(this.url,n);return this._processAsync({url:o,method:"POST",data:r,callback:e})}},{key:"_processAsync",value:function(t){var e=t.url,r=t.method,n=t.callback,o=t.data;return this.request({method:r||"GET",url:e,data:o,scope:this,success:n,failure:n})}}])&&pR(r.prototype,n),o&&pR(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function SR(t){"@babel/helpers - typeof";return(SR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,OR(n.key),n)}}function OR(t){var e=function(t,e){if("object"!=SR(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=SR(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==SR(e)?e:String(e)}function _R(t,e,r){return e=PR(e),function(t,e){if(e&&("object"===SR(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],PR(t).constructor):e.apply(t,r))}function PR(t){return(PR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ER(t,e){return(ER=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var CR=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=_R(this,e,[t,r]))._imageService=new gR(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers}),n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ER(t,e)}(e,An),r=e,(n=[{key:"getCollections",value:function(t){return this._imageService.getCollections(t)}},{key:"getCollectionByID",value:function(t,e){return this._imageService.getCollectionByID(t,e)}},{key:"search",value:function(t,e){return this._imageService.search(t,e)}}])&&wR(r.prototype,n),o&&wR(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function TR(t){"@babel/helpers - typeof";return(TR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,kR(n.key),n)}}function kR(t){var e=function(t,e){if("object"!=TR(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=TR(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==TR(e)?e:String(e)}function xR(t,e,r){return e=NR(e),function(t,e){if(e&&("object"===TR(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return AR(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],NR(t).constructor):e.apply(t,r))}function AR(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function IR(){return(IR="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=NR(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function NR(t){return(NR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function RR(t,e){return(RR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var MR=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=xR(this,e,[t,r])).options=r||{},r&&V.extend(AR(n),r),n.CLASS_NAME="SuperMap.ImageCollectionService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&RR(t,e)}(e,oo),r=e,(n=[{key:"destroy",value:function(){IR(NR(e.prototype),"destroy",this).call(this)}},{key:"getLegend",value:function(t,e){var r={collectionId:this.options.collectionId};"function"==typeof t&&(e=t,t=null);var n=V.convertPath("/collections/{collectionId}/legend",r),o=V.urlPathAppend(this.url,n);return this._processAsync({url:o,method:"GET",params:t,callback:e})}},{key:"getStatistics",value:function(t){var e={collectionId:this.options.collectionId},r=V.convertPath("/collections/{collectionId}/statistics",e),n=V.urlPathAppend(this.url,r);return this._processAsync({url:n,method:"GET",callback:t})}},{key:"getTileInfo",value:function(t){var e={collectionId:this.options.collectionId},r=V.convertPath("/collections/{collectionId}/tileInfo",e),n=V.urlPathAppend(this.url,r);return this._processAsync({url:n,method:"GET",callback:t})}},{key:"deleteItemByID",value:function(t,e){var r={collectionId:this.options.collectionId,featureId:t},n=V.convertPath("/collections/{collectionId}/items/{featureId}",r),o=V.urlPathAppend(this.url,n);return this._processAsync({url:o,method:"DELETE",callback:e})}},{key:"getItemByID",value:function(t,e){var r={collectionId:this.options.collectionId,featureId:t},n=V.convertPath("/collections/{collectionId}/items/{featureId}",r),o=V.urlPathAppend(this.url,n);return this._processAsync({url:o,method:"GET",callback:e})}},{key:"_processAsync",value:function(t){var e=t.url,r=t.method,n=t.callback,o=t.params;return this.request({method:r||"GET",url:e,params:o,scope:this,success:n,failure:n})}}])&&jR(r.prototype,n),o&&jR(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function LR(t){"@babel/helpers - typeof";return(LR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function BR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,DR(n.key),n)}}function DR(t){var e=function(t,e){if("object"!=LR(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=LR(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==LR(e)?e:String(e)}function FR(t,e,r){return e=UR(e),function(t,e){if(e&&("object"===LR(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],UR(t).constructor):e.apply(t,r))}function UR(t){return(UR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function GR(t,e){return(GR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var VR=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=FR(this,e,[t,r]))._imageCollectionService=new MR(n.url,{collectionId:n.options.collectionId,proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers}),n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&GR(t,e)}(e,An),r=e,(n=[{key:"getLegend",value:function(t,e){return this._imageCollectionService.getLegend(t,e)}},{key:"getStatistics",value:function(t){return this._imageCollectionService.getStatistics(t)}},{key:"getTileInfo",value:function(t){return this._imageCollectionService.getTileInfo(t)}},{key:"deleteItemByID",value:function(t,e){return this._imageCollectionService.deleteItemByID(t,e)}},{key:"getItemByID",value:function(t,e){return this._imageCollectionService.getItemByID(t,e)}}])&&BR(r.prototype,n),o&&BR(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function qR(t){"@babel/helpers - typeof";return(qR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function HR(){HR=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new x(n||[]);return o(a,"_invoke",{value:C(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",b={};function v(){}function m(){}function g(){}var S={};l(S,a,function(){return this});var w=Object.getPrototypeOf,O=w&&w(w(A([])));O&&O!==r&&n.call(O,a)&&(S=O);var _=g.prototype=v.prototype=Object.create(S);function P(t){["next","throw","return"].forEach(function(e){l(t,e,function(t){return this._invoke(e,t)})})}function E(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==qR(c)&&n.call(c,"__await")?e.resolve(c.__await).then(function(t){r("next",t,a,s)},function(t){r("throw",t,a,s)}):e.resolve(c).then(function(t){l.value=t,a(l)},function(t){return r("throw",t,a,s)})}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e(function(e,o){r(t,n,e,o)})}return i=i?i.then(o,o):o()}})}function C(e,r,n){var o=p;return function(i,a){if(o===y)throw new Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=T(s,n);if(u){if(u===b)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?d:h,l.arg===b)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=d,n.method="throw",n.arg=l.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,b;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,b):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function A(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(qR(e)+" is not iterable")}return m.prototype=g,o(_,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},P(E.prototype),l(E.prototype,s,function(){return this}),e.AsyncIterator=E,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new E(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},P(_),l(_,u,"Generator"),l(_,a,function(){return this}),l(_,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=A,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:A(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),b}},e}function zR(t){return function(t){if(Array.isArray(t))return JR(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return JR(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return JR(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function JR(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function WR(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function KR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,QR(n.key),n)}}function QR(t){var e=function(t,e){if("object"!=qR(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=qR(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==qR(e)?e:String(e)}function YR(t,e,r){return e=ZR(e),function(t,e){if(e&&("object"===qR(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],ZR(t).constructor):e.apply(t,r))}function XR(){return(XR="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ZR(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function ZR(t){return(ZR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function $R(t,e){return($R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var tM=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=YR(this,e,[t,r])).options=r||{},n.CLASS_NAME="SuperMap.KnowledgeGraphService",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$R(t,e)}(e,oo),r=e,(n=[{key:"destroy",value:function(){XR(ZR(e.prototype),"destroy",this).call(this)}},{key:"findShortestPath",value:function(t,e){var r=this.url+"/shortestPath.json?startID=".concat(t.startID,"&endID=").concat(t.endID);this.processAsync({url:r,method:"GET",callback:e})}},{key:"query",value:function(t,e){var r=V.urlAppend(this.url+"/query.json","".concat("cypherQuery","=").concat(encodeURI(t)));this.processAsync({url:r,method:"GET",callback:e})}},{key:"getGraphMaps",value:function(t){var e=this.url+"/graphmaps.json";this.processAsync({url:e,method:"GET",callback:t})}},{key:"getGraphMap",value:function(t,e){var r=this.url+"/graphmaps/".concat(t,".json");this.processAsync({url:r,method:"GET",callback:e})}},{key:"getGraphMapData",value:function(){var t,e=(t=HR().mark(function t(e){var r,n,o,i,a,s,u,l,c;return HR().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=[],t.next=3,this._getGraphMapData(e);case 3:if(n=t.sent){t.next=6;break}return t.abrupt("return");case 6:o=n.dataContent.queries&&n.dataContent.queries.query||[],i=[],i="string"==typeof o?[o]:o,(a=this._getGraphMapExpandQuery(n)).length&&(s=i).push.apply(s,zR(a)),u=0;case 12:if(!(u<i.length)){t.next=21;break}return l=i[u],t.next=16,this._queryDataBySql(l);case 16:c=t.sent,r=r.concat([],c);case 18:u++,t.next=12;break;case 21:return t.abrupt("return",{data:r,graphMap:n});case 22:case"end":return t.stop()}},t,this)}),function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){WR(i,n,o,a,s,"next",t)}function s(t){WR(i,n,o,a,s,"throw",t)}a(void 0)})});return function(t){return e.apply(this,arguments)}}()},{key:"_getGraphMapExpandQuery",value:function(t){var e=[];return(t.dataContent.expand&&JSON.parse(t.dataContent.expand)||[]).forEach(function(t){e.push("match p=(n)-[]-(m) where id(n)=".concat(t," return p;"))}),e}},{key:"processAsync",value:function(t){var e=t.url,r=t.params,n=t.method,o=t.callback,i={method:n,url:e,scope:this,success:o,failure:o};return r&&(i.params=r),this.request(i)}},{key:"_getGraphMapData",value:function(t){var e=this;return new Promise(function(r,n){e.getGraphMap(t,function(t){"processFailed"===t.type?n(t.error):""===t.result.data?n("æ æ°æ®"):r(t.result.graphMap)})})}},{key:"_queryDataBySql",value:function(t){var e=this;return new Promise(function(r,n){e.query(t,function(t){"processFailed"===t.type?n(t.error):r(t.result)})})}}])&&KR(r.prototype,n),o&&KR(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function eM(t){"@babel/helpers - typeof";return(eM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rM(){rM=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new x(n||[]);return o(a,"_invoke",{value:C(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",b={};function v(){}function m(){}function g(){}var S={};l(S,a,function(){return this});var w=Object.getPrototypeOf,O=w&&w(w(A([])));O&&O!==r&&n.call(O,a)&&(S=O);var _=g.prototype=v.prototype=Object.create(S);function P(t){["next","throw","return"].forEach(function(e){l(t,e,function(t){return this._invoke(e,t)})})}function E(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==eM(c)&&n.call(c,"__await")?e.resolve(c.__await).then(function(t){r("next",t,a,s)},function(t){r("throw",t,a,s)}):e.resolve(c).then(function(t){l.value=t,a(l)},function(t){return r("throw",t,a,s)})}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e(function(e,o){r(t,n,e,o)})}return i=i?i.then(o,o):o()}})}function C(e,r,n){var o=p;return function(i,a){if(o===y)throw new Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=T(s,n);if(u){if(u===b)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?d:h,l.arg===b)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=d,n.method="throw",n.arg=l.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,b;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,b):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function A(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(eM(e)+" is not iterable")}return m.prototype=g,o(_,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},P(E.prototype),l(E.prototype,s,function(){return this}),e.AsyncIterator=E,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new E(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},P(_),l(_,u,"Generator"),l(_,a,function(){return this}),l(_,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=A,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:A(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),b}},e}function nM(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function oM(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,iM(n.key),n)}}function iM(t){var e=function(t,e){if("object"!=eM(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=eM(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==eM(e)?e:String(e)}function aM(t,e,r){return e=sM(e),function(t,e){if(e&&("object"===eM(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],sM(t).constructor):e.apply(t,r))}function sM(t){return(sM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function uM(t,e){return(uM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var lM=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=aM(this,e,[t,r]))._knowledgeGraphService=new tM(t,r),n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uM(t,e)}(e,An),r=e,(n=[{key:"findShortestPath",value:function(t,e){return this._knowledgeGraphService.findShortestPath(t,e)}},{key:"query",value:function(t,e){return this._knowledgeGraphService.query(t,e)}},{key:"getGraphMaps",value:function(t){return this._knowledgeGraphService.getGraphMaps(t)}},{key:"getGraphMap",value:function(t,e){return this._knowledgeGraphService.getGraphMap(t,e)}},{key:"getGraphMapData",value:function(){var t,e=(t=rM().mark(function t(e){var r;return rM().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._knowledgeGraphService.getGraphMapData(e);case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}},t,this)}),function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){nM(i,n,o,a,s,"next",t)}function s(t){nM(i,n,o,a,s,"throw",t)}a(void 0)})});return function(t){return e.apply(this,arguments)}}()}])&&oM(r.prototype,n),o&&oM(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}(),cM=r(44),fM=r.n(cM);function pM(t){"@babel/helpers - typeof";return(pM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hM(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function yM(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?hM(Object(r),!0).forEach(function(e){dM(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):hM(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function dM(t,e,r){var n;return(e="symbol"==pM(n=function(t,e){if("object"!=pM(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=pM(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function bM(t){return function(t){if(Array.isArray(t))return vM(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return vM(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vM(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vM(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function mM(t,e){var r=(e=e||{}).styles&&e.styles.style,n=e.captionFields&&e.captionFields.captionField,o=e.showRelationTypes,i={nodes:[],edges:[]};return t.forEach(function(t){var e=t.path;if(e){var a,s,u=function(t,e,r,n){var o={nodes:[],edges:[]};return t.forEach(function(t){if(SM(t)){var i=OM(t,e,n);o.edges.push(i)}else{var a=wM(t,e,r);o.nodes.push(a)}}),o}(e,r,n,o),l=u.nodes,c=u.edges;(a=i.nodes).push.apply(a,bM(l)),(s=i.edges).push.apply(s,bM(c))}else if(SM(t)){var f=OM(t,r,o);i.edges.push(f)}else{var p=wM(t,r,n);i.nodes.push(p)}}),{nodes:gM(i.nodes),edges:gM(i.edges,"edgeId")}}function gM(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id";return fM()(t,e)}function SM(t){return t.hasOwnProperty("start")&&t.hasOwnProperty("end")}function wM(t,e,r){var n=t.id,o=t.properties,i=t.lables,a=e?function(t,e){if(!e)return{};for(var r=t.id,n=t.labels,o=e.filter(function(t){return"entity"===t.type}),i=0;i<o.length;i++){var a=o[i],s=a.color,u=a.textColor,l=a.font,c=a.size,f=a.entityTypes,p=a.entityIds,h=JSON.parse(p||"[]"),y=JSON.parse(f||"[]");if(h.includes(r)||y.includes(n[0]))return yM(yM({fillColor:s,fontSize:l.fontSize,fill:u,size:c},PM(l.fontName)),_M(l.fontStyle))}return{}}(t,e):{},s=function(t,e){var r=t.id,n=t.labels,o=t.properties;if(e)for(var i=e instanceof Array?e:[e],a=0;a<i.length;a++){var s=i[a],u=s.name,l=s.entityTypes,c=s.entityIds,f=JSON.parse(c||"[]"),p=JSON.parse(l||"[]"),h=n&&n.join("&");if(f.includes(r)||p.includes(h))return o[u]}return o[o._labelfieldname]}(t,r),u=a.fillColor||"",l={id:n+"",label:void 0===s?"":s+"",properties:o,lables:i};return a.size&&(l.size=a.size,delete a.size),a.fillColor&&(l.style={fill:u,stroke:u},delete a.fillColor),0!==Object.keys(a).length&&(l.labelCfg={style:a}),l}function OM(t,e,r){var n=t.start,o=t.end,i=t.id,a=t.type,s=t.properties,u=e?function(t,e){if(!e)return{};for(var r=t.id,n=t.type,o=e.filter(function(t){return"relationShip"===t.type}),i=0;i<o.length;i++){var a=o[i],s=a.color,u=a.width,l=a.textColor,c=a.font,f=a.relationTypes,p=a.relationIds,h=JSON.parse(p||"[]"),y=JSON.parse(f||"[]");if(h.includes(r)||y.includes(n))return yM(yM({stroke:s,lineWidth:1.4*Number(u),fontSize:c.fontSize,fill:l},PM(c.fontName)),_M(c.fontStyle))}return{}}(t,e):{},l={source:n+"",target:o+"",edgeId:i+"",label:a,style:{},labelCfg:{},properties:s};return!1===r&&delete l.label,u.stroke&&(l.style.stroke=u.stroke,l.style.endArrow={path:"M 0,0 L 4,2 L 4,-2 Z",fill:u.stroke},delete u.stroke),u.lineWidth&&(l.style.lineWidth=u.lineWidth,delete u.lineWidth),l.labelCfg={style:u},l}function _M(t){return 1===t||"bold"===t?{fontWeight:"bold"}:2===t||"italic"===t?{fontStyle:"italic"}:"bolditalic"===t?{fontWeight:"bold",fontStyle:"italic"}:{}}function PM(t){if(!t)return{};var e=t.split(".");return yM({fontFamily:e[0]},_M(e[1]))}var EM=function(){try{return G6}catch(t){return{}}}(),CM=r.n(EM),TM=r(3448),jM=r.n(TM);function kM(t){"@babel/helpers - typeof";return(kM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xM(t){return function(t){if(Array.isArray(t))return AM(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return AM(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return AM(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function AM(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function IM(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function NM(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?IM(Object(r),!0).forEach(function(e){RM(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):IM(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function RM(t,e,r){return(e=LM(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function MM(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,LM(n.key),n)}}function LM(t){var e=function(t,e){if("object"!=kM(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=kM(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==kM(e)?e:String(e)}var BM=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.config=null,this.graph=null,this.data=null,this.collpasedData={},this.importG6(),this.hoverColor="#b4d6ff",this.CLASS_NAME="SuperMap.G6Render"}var e,r,n;return e=t,(r=[{key:"importG6",value:function(){CM()||console.log("please import g6, egï¼https://gw.alipayobjects.com/os/lib/antv/g6/4.3.2/dist/g6.min.js")}},{key:"initGraph",value:function(t){var e=new(CM().Graph)(t);return this.graph=e,t&&!1===t.highlightNode||this.highlightNode(e),t&&!1===t.highlightEdge||this.highlightEdge(e),!1===t.dragCanvas&&!1===t.dragNode||this.stopDefaultEventPropagation(),e}},{key:"_getDefaultEdgeHighlightStyle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.hoverColor;return{stroke:t,shadowColor:t,shadowBlur:5,endArrow:{path:"M 0,0 L 4,2 L 4,-2 Z",fill:t}}}},{key:"_getDefaultNodeHighlightStyle",value:function(){return{lineWidth:3,stroke:arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.hoverColor}}},{key:"_getContextMenu",value:function(){var t=this;return new(CM().Menu)({shouldBegin:function(t){return!!(t.target&&t.target.isCanvas&&t.target.isCanvas())||!!t.item},getContent:function(e){var r=e.item;if(!(e.target&&e.target.isCanvas&&e.target.isCanvas())&&r){var n=r.getType(),o=r.getModel();return n&&o&&"node"===n?t.isCollpased(o.id)?"<ul>\n              <li id='expand'>å±å¼</li>\n            </ul>":"<ul>\n              <li id='collapse'>æå </li>\n            </ul>":void 0}},handleMenuClick:function(e,r){switch(e.id.split("-")[0]){case"hide":t.hideItem(r);break;case"expand":t.expandNode(r);break;case"collapse":t.collapseNode(r);break;case"show":t.showItem(r)}},offsetX:26,offsetY:0,itemTypes:["node","edge","canvas"]})}},{key:"_getGraphConfig",value:function(t){var e=this,r={speed:120,maxIteration:83,tick:function(){e.refreshPositions()}},n={type:"fruchterman",gravity:5},o={},i={type:"line",style:{endArrow:{path:"M 0,0 L 4,2 L 4,-2 Z",fill:"#e0e0e0"},lineWidth:.5},labelCfg:{autoRotate:!0,style:{fontSize:4,fill:"#333"}}},a={default:["drag-canvas","zoom-canvas","drag-node"]},s=this._getContextMenu(),u=[new(CM().ToolBar),s];if(!t)return this._setToolBarStyle(),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"knowledgeGraph",s=document.querySelector("#".concat(t));return{container:t,width:s.scrollWidth,height:s.scrollHeight,plugins:u,modes:a,layout:NM(NM({},n),r),defaultNode:o,defaultEdge:i,nodeStateStyles:{hover:e._getDefaultNodeHighlightStyle(),actived:e._getDefaultNodeHighlightStyle()},edgeStateStyles:{hover:e._getDefaultEdgeHighlightStyle(),actived:e._getDefaultEdgeHighlightStyle()}}}();t.container=t.container||"knowledgeGraph";var l="string"==typeof t.container?document.querySelector("#".concat(t.container)):t.container;t.width=t.width||l.scrollWidth,t.height=t.height||l.scrollHeight,t.layout=NM(NM(NM({},n),t.layout||{}),!1!==t.animate?r:{}),t.defaultNode=NM(NM({},o),t.defaultNode||{}),t.defaultEdge=NM(NM({},i),t.defaultEdge||{}),t.modes={default:[]},!1!==t.dragCanvas&&t.modes.default.push("drag-canvas"),!1!==t.zoomCanvas&&t.modes.default.push("zoom-canvas"),!1!==t.dragNode&&t.modes.default.push("drag-node");var c=NM(NM({},this._getDefaultNodeHighlightStyle()),t.nodeHighlightStyle||{}),f=NM(NM({},this._getDefaultEdgeHighlightStyle()),t.edgeHighlightStyle||{});return t.nodeStateStyles={hover:c,actived:c},t.edgeStateStyles={hover:f,actived:f},!1!==t.showToolBar&&(t.plugins=[new(CM().ToolBar)],this._setToolBarStyle()),!1!==t.showContextMenu&&(t.plugins=[].concat(xM(t.plugins||[]),[s]),this._setToolBarStyle()),t}},{key:"changeSize",value:function(t,e){return this.graph.changeSize(t,e)}},{key:"autoResize",value:function(){var t=this,e=this.getContainer();window.addEventListener("resize",function(){var r=e.scrollWidth,n=e.scrollHeight;t.graph.changeSize(r,n),t.graph.refresh()})}},{key:"zoom",value:function(t,e,r,n){this.graph.zoom(t,e,r,n)}},{key:"zoomTo",value:function(t,e,r,n){this.graph.zoomTo(t,e,r,n)}},{key:"fitView",value:function(t,e,r,n){this.graph.fitView(t,e,r,n)}},{key:"fitCenter",value:function(t,e){this.graph.fitCenter(t,e)}},{key:"getGraphCenterPoint",value:function(){return this.graph.getGraphCenterPoint()}},{key:"getViewPortCenterPoint",value:function(){return this.graph.getViewPortCenterPoint()}},{key:"getZoom",value:function(){return this.graph.getZoom()}},{key:"getMinZoom",value:function(){return this.graph.getMinZoom()}},{key:"setMinZoom",value:function(t){this.graph.setMinZoom(t)}},{key:"getMaxZoom",value:function(){return this.graph.getMaxZoom()}},{key:"setMaxZoom",value:function(t){this.graph.setMaxZoom(t)}},{key:"getWidth",value:function(){return this.graph.getWidth()}},{key:"getHeight",value:function(){return this.graph.getHeight()}},{key:"setCenter",value:function(t){var e=this.graph.getWidth()/2,r=this.graph.getHeight()/2,n=this.graph.getCanvasByPoint(t.x,t.y);this.graph.translate(e-n.x,r-n.y)}},{key:"_setToolBarStyle",value:function(){jM()("\n      .g6-component-toolbar li[code='redo'],\n      .g6-component-toolbar li[code='undo'],\n      .g6-component-toolbar li[code='realZoom'] {\n        display: none;\n      }\n      .g6-component-contextmenu {\n        position: absolute;\n        z-index: 2;\n        list-style-type: none;\n        border-radius: 6px;\n        font-size: 14px;\n        width: fit-content;\n        transition: opacity .2s;\n        text-align: center;\n        box-shadow: 0 5px 18px 0 rgba(0, 0, 0, 0.6);\n        border: 0px;\n      }\n      .g6-component-contextmenu ul {\n        padding-left: 0px;\n        margin: 0;\n      }\n      .g6-component-contextmenu li {\n        cursor: pointer;\n        list-style-type: none;\n        list-style: none;\n        margin-left: 0;\n        line-height: 38px;\n        padding: 0px 35px;\n      }\n      .g6-component-contextmenu li:hover {\n        color: #333;\n        background: #aaaaaa45;\n      }\n    ")}},{key:"highlightNode",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph,e=null;t.on("node:mouseenter",function(r){var n=r.item;t.setAutoPaint(!1),e&&t.clearItemStates(e,"hover"),t.setItemState(n,"hover",!0),e=n,t.paint(),t.setAutoPaint(!0)}),t.on("node:mouseleave",function(){t.setAutoPaint(!1),e&&(t.clearItemStates(e,"hover"),e=null),t.paint(),t.setAutoPaint(!0)})}},{key:"highlightEdge",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph,e=null;t.on("edge:mouseenter",function(r){var n=r.item;t.setAutoPaint(!1),e&&t.clearItemStates(e,"hover"),t.setItemState(n,"hover",!0),e=n,t.paint(),t.setAutoPaint(!0)}),t.on("edge:mouseleave",function(){t.setAutoPaint(!1),e&&(t.clearItemStates(e,"hover"),e=null),t.paint(),t.setAutoPaint(!0)})}},{key:"setData",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.graph;this.data?e.changeData(t):e.data(t),this.data=t}},{key:"render",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph).render()}},{key:"updateGraph",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.graph;this.data=t,e.changeData(t)}},{key:"refresh",value:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph).refresh()}},{key:"getContainer",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph).getContainer()}},{key:"getCanvas",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph).get("canvas")}},{key:"getNodes",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph).getNodes()}},{key:"getEdges",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph).getEdges()}},{key:"getNeighbors",value:function(t,e){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.graph).getNeighbors(t,e)}},{key:"findById",value:function(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.graph).findById(t)}},{key:"find",value:function(t,e){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.graph).find(t,e)}},{key:"findAll",value:function(t,e){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.graph).findAll(t,e)}},{key:"getEdgesByNode",value:function(t){return t.getEdges()}},{key:"getInEdges",value:function(t){return t.getInEdges()}},{key:"getOutEdges",value:function(t){return t.getOutEdges()}},{key:"getSourceByEdge",value:function(t){return t.getSource()}},{key:"getTargetByEdge",value:function(t){return t.getTarget()}},{key:"expandNode",value:function(t){var e=t.getModel().id;this._expandCollapseNode(this.collpasedData[e],"show"),delete this.collpasedData[e]}},{key:"collapseNode",value:function(t){var e=t.getModel().id,r=[];this._collapseFunc(t,r),this.collpasedData[e]=r,this._expandCollapseNode(r)}},{key:"isCollpased",value:function(t){return!!this.collpasedData[t]}},{key:"_collapseFunc",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=this.getNeighbors(t,"target"),n=this.getNeighbors(t,"source"),o=0;o<r.length;o++){var i=r[o],a=i.getModel();1===this.getNeighbors(i).length&&e.push({id:a.id})}for(var s=0;s<n.length;s++){var u=n[s],l=u.getModel(),c=this.getNeighbors(u),f=this.getNeighbors(u,"source");if(1===c.length||0===f.length)e.push({id:l.id});else{var p=[];this._collapseFunc(u,p),e.push({id:l.id,children:p})}}return e}},{key:"_expandCollapseNode",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"hide";t&&t.forEach(function(t){"hide"===r?e.hideItem(t.id):(e.showItem(t.id),e.isCollpased(t.id)&&delete e.collpasedData[t.id]),t.children&&e._expandCollapseNode(t.children,r)})}},{key:"showItem",value:function(t,e){(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.graph).showItem(t,e)}},{key:"hideItem",value:function(t,e){(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.graph).hideItem(t,e)}},{key:"show",value:function(t){t.show()}},{key:"hide",value:function(t){t.hide()}},{key:"changeVisibility",value:function(t,e){t.changeVisibility(e)}},{key:"isVisible",value:function(t){return t.isVisible()}},{key:"getModel",value:function(t){return t.getModel()}},{key:"addItem",value:function(t,e){(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.graph).addItem(t,e)}},{key:"removeItem",value:function(t){(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.graph).removeItem(t)}},{key:"updateItem",value:function(t,e){(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.graph).updateItem(t,e)}},{key:"refreshItem",value:function(t){(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.graph).refreshItem(t)}},{key:"refreshPositions",value:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph).refreshPositions()}},{key:"on",value:function(t,e){(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.graph).on(t,e)}},{key:"off",value:function(t,e){(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.graph).off(t,e)}},{key:"toDataURL",value:function(t,e){(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.graph).toDataURL(t,e)}},{key:"bindNodeDefaultDragEvent",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph;t.on("node:dragstart",function(t){DM(t)}),t.on("node:drag",function(t){DM(t)}),t.on("node:dragend",function(t){t.item.get("model").fx=null,t.item.get("model").fy=null})}},{key:"stopDefaultEventPropagation",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph;t.on("click",function(t){t.stopPropagation()}),t.on("mousedown",function(t){t.stopPropagation()}),t.on("mouseover",function(t){t.stopPropagation()}),t.on("mouseout",function(t){t.stopPropagation()})}},{key:"clear",value:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph).clear()}},{key:"destroy",value:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph).destroy()}}])&&MM(e.prototype,r),n&&MM(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function DM(t){var e=t.item.get("model");return e.fx=t.x,e.fy=t.y,e.x=t.x,e.y=t.y,e}var FM=r(5611),UM=r.n(FM);function GM(t){"@babel/helpers - typeof";return(GM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function VM(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,qM(n.key),n)}}function qM(t){var e=function(t,e){if("object"!=GM(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=GM(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==GM(e)?e:String(e)}var HM=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"G6";!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.graph=null,this.config=UM()(e),this.graphRender=null,this.type=r,this.createGraphRender(this.type),this.config=this.graphRender._getGraphConfig(this.config),this.createGraph(this.config),this.CLASS_NAME="SuperMap.KnowledgeGraph"}var e,r,n;return e=t,n=[{key:"dataFromGraphMap",value:function(t,e){return mM(t,e)}},{key:"dataFromKnowledgeGraphQuery",value:function(t){return mM(t)}}],(r=[{key:"_handleNodes",value:function(t,e){var r=this;t.filter(function(t){return""!==t}).forEach(function(t){var n=r.findById(t);e(n,"node")})}},{key:"_handleEdges",value:function(t,e){var r=this;t.filter(function(t){return""!==t}).forEach(function(t){var n=r.find("edge",function(e){return e.get("model").edgeId==t});e(n,"edge")})}},{key:"highlight",value:function(t){var e=t.nodeIDs,r=void 0===e?[]:e,n=t.edgeIDs,o=void 0===n?[]:n,i=this.graph,a=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"node";if(e){var n=t[r+"StateStyles"];n&&i.updateItem(e,{style:e.style,stateStyles:{actived:n}}),i.setItemState(e,"actived",!0),i.paint(),i.setAutoPaint(!0)}};this._handleNodes(r,a),this._handleEdges(o,a)}},{key:"clearHighlight",value:function(t){var e=this.graph,r=function(t){t&&(e.clearItemStates(t,"actived"),e.paint(),e.setAutoPaint(!0))};if(e.setAutoPaint(!1),!t)return e.getNodes().forEach(function(t){r(t)}),void e.getEdges().forEach(function(t){r(t)});var n=t.nodeIDs,o=void 0===n?[]:n,i=t.edgeIDs,a=void 0===i?[]:i;this._handleNodes(o,r),this._handleEdges(a,r)}},{key:"handleNodeStatus",value:function(t){var e=t.expand,r=t.collapse,n=t.hidden;this.expandNodes(e),this.collapseNodes(r),this.hideNodes(n)}},{key:"expandNodes",value:function(t){var e=this;t&&t.forEach(function(t){e.expandNode(t+"")})}},{key:"collapseNodes",value:function(t){var e=this;t&&t.forEach(function(t){e.collapseNode(t+"")})}},{key:"hideNodes",value:function(t){var e=this;t&&t.forEach(function(t){e.hideItem(t+"")})}},{key:"createGraphRender",value:function(t){"G6"===t&&(this.graphRender=new BM)}},{key:"createGraph",value:function(t){var e=this.initGraph(t);return this.graph=e,this.autoResize(),e}},{key:"getGraph",value:function(){return this.graph}},{key:"autoResize",value:function(){this.config&&!1!==this.config.autoResize&&this.graphRender.autoResize()}},{key:"zoom",value:function(t,e,r,n){this.graphRender.zoom(t,e,r,n)}},{key:"zoomTo",value:function(t,e,r,n){this.graphRender.zoomTo(t,e,r,n)}},{key:"fitView",value:function(t,e,r,n){this.graphRender.fitView(t,e,r,n)}},{key:"fitCenter",value:function(t,e){this.graphRender.fitCenter(t,e)}},{key:"getGraphCenterPoint",value:function(){return this.graphRender.getGraphCenterPoint()}},{key:"getViewPortCenterPoint",value:function(){return this.graphRender.getViewPortCenterPoint()}},{key:"getZoom",value:function(){return this.graphRender.getZoom()}},{key:"getMinZoom",value:function(){return this.graphRender.getMinZoom()}},{key:"setMinZoom",value:function(t){this.graphRender.setMinZoom(t)}},{key:"getMaxZoom",value:function(){return this.graphRender.getMaxZoom()}},{key:"setMaxZoom",value:function(t){this.graphRender.setMaxZoom(t)}},{key:"getWidth",value:function(){return this.graphRender.getWidth()}},{key:"getHeight",value:function(){return this.graphRender.getHeight()}},{key:"initGraph",value:function(t){var e=this,r=this.graphRender.initGraph(t);this.graph=r;return this.graph.on("afterlayout",function(){void 0!==e.config.zoom&&e.zoom(e.config.zoom),void 0!==e.config.center&&e.graphRender.setCenter({x:e.config.center[0],y:e.config.center[1]})}),r}},{key:"setData",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.graph;t=t||{nodes:[],edges:[]},this.config&&this.config.nodeLabelMaxWidth&&(t.nodes=this.nodeLabelOpenEllipsis(this.config.nodeLabelMaxWidth,t.nodes)),this.graphRender.setData(t,e),this.render(e),this.data=t}},{key:"render",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph;t&&this.graphRender.render(t)}},{key:"updateGraph",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.graph;e&&this.graphRender.updateGraph(t,e)}},{key:"refresh",value:function(){return this.graphRender.refresh()}},{key:"changeSize",value:function(t,e){return this.graphRender.changeSize(t,e)}},{key:"resize",value:function(t,e){this.graphRender.changeSize(t,e),this.graphRender.refresh()}},{key:"getContainer",value:function(){return this.graphRender.getContainer()}},{key:"getCanvas",value:function(){return this.graphRender.getCanvas()}},{key:"getNodes",value:function(){return this.graphRender.getNodes()}},{key:"getEdges",value:function(){return this.graphRender.getEdges()}},{key:"getNeighbors",value:function(t,e){return this.graphRender.getNeighbors(t,e)}},{key:"findById",value:function(t){return this.graphRender.findById(t)}},{key:"find",value:function(t,e){return this.graphRender.find(t,e)}},{key:"findAll",value:function(t,e){return this.graphRender.findAll(t,e)}},{key:"getEdgesByNode",value:function(t){return this.graphRender.getEdgesByNode(t)}},{key:"getInEdges",value:function(t){return this.graphRender.getInEdges(t)}},{key:"getOutEdges",value:function(t){return this.graphRender.getOutEdges(t)}},{key:"getSourceByEdge",value:function(t){return this.graphRender.getSourceByEdge(t)}},{key:"getTargetByEdge",value:function(t){return this.graphRender.getTargetByEdge(t)}},{key:"expandNode",value:function(t){var e=this.findById(t);e&&this.graphRender.expandNode(e)}},{key:"collapseNode",value:function(t){var e=this.findById(t);e&&this.graphRender.collapseNode(e)}},{key:"showItem",value:function(t,e){this.graphRender.showItem(t,e)}},{key:"hideItem",value:function(t,e){this.graphRender.hideItem(t,e)}},{key:"show",value:function(t){this.graphRender.show(t)}},{key:"hide",value:function(t){this.graphRender.hide(t)}},{key:"changeVisibility",value:function(t,e){this.graphRender.changeVisibility(t,e)}},{key:"isVisible",value:function(t){return this.graphRender.isVisible(t)}},{key:"getModel",value:function(t){return this.graphRender.getModel(t)}},{key:"addItem",value:function(t,e){return this.graphRender.addItem(t,e)}},{key:"removeItem",value:function(t){return this.graphRender.removeItem(t)}},{key:"updateItem",value:function(t,e){return this.graphRender.updateItem(t,e)}},{key:"refreshItem",value:function(t){return this.graphRender.refreshItem(t)}},{key:"refreshPositions",value:function(){return this.graphRender.refreshPositions()}},{key:"on",value:function(t,e){this.graphRender.on(t,e)}},{key:"off",value:function(t,e){this.graphRender.off(t,e)}},{key:"toDataURL",value:function(t,e){this.graphRender.toDataURL(t,e)}},{key:"nodeLabelOpenEllipsis",value:function(t,e){var r=this;return e?t?e.map(function(e){var n=e.labelCfg&&e.labelCfg.fontSize||r.defaultNode&&r.defaultNode.labelCfg&&r.defaultNode.labelCfg.fontSize||14;return e.label=function(t,e,r){var n=1*r;e*=1.6;if(function(t){for(var e=0,r=0;r<t.length;r++)t.charCodeAt(r)>0&&t.charCodeAt(r)<128?e++:e+=2;return e}(t)*n>e){var o=Math.floor((e-20)/n),i=t.substring(0,o);return(t.substring(o).length+"â¦".length)*n>e?i+"\n"+t.substring(o,o+o-2)+"â¦":0==t.substring(o).length?i:i+"\n"+t.substring(o)}return t}(e.label,t,n),e}):e:[]}},{key:"clear",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph;t&&t.clear()}},{key:"destroy",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph;t&&t.destroy()}}])&&VM(e.prototype,r),n&&VM(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function zM(t){"@babel/helpers - typeof";return(zM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function JM(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function WM(){WM=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new x(n||[]);return o(a,"_invoke",{value:C(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",b={};function v(){}function m(){}function g(){}var S={};l(S,a,function(){return this});var w=Object.getPrototypeOf,O=w&&w(w(A([])));O&&O!==r&&n.call(O,a)&&(S=O);var _=g.prototype=v.prototype=Object.create(S);function P(t){["next","throw","return"].forEach(function(e){l(t,e,function(t){return this._invoke(e,t)})})}function E(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==zM(c)&&n.call(c,"__await")?e.resolve(c.__await).then(function(t){r("next",t,a,s)},function(t){r("throw",t,a,s)}):e.resolve(c).then(function(t){l.value=t,a(l)},function(t){return r("throw",t,a,s)})}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e(function(e,o){r(t,n,e,o)})}return i=i?i.then(o,o):o()}})}function C(e,r,n){var o=p;return function(i,a){if(o===y)throw new Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=T(s,n);if(u){if(u===b)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?d:h,l.arg===b)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=d,n.method="throw",n.arg=l.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,b;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,b):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function A(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(zM(e)+" is not iterable")}return m.prototype=g,o(_,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},P(E.prototype),l(E.prototype,s,function(){return this}),e.AsyncIterator=E,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new E(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},P(_),l(_,u,"Generator"),l(_,a,function(){return this}),l(_,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=A,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:A(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),b}},e}function KM(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function QM(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,YM(n.key),n)}}function YM(t){var e=function(t,e){if("object"!=zM(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=zM(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==zM(e)?e:String(e)}function XM(t,e,r){return e=ZM(e),function(t,e){if(e&&("object"===zM(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],ZM(t).constructor):e.apply(t,r))}function ZM(t){return(ZM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function $M(t,e){return($M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var tL=function(t){function e(t,r){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=XM(this,e,[t,r])).graph=null,n.EVENT_TYPES=["loaded"];var o=t.split("/").pop();return n.url=t.replace("/graphmaps/".concat(o),""),n.createGraphMap(o,r),n}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$M(t,e)}(e,o().Evented),r=e,(n=[{key:"createGraphMap",value:function(){var t,e=(t=WM().mark(function t(e,r){var n,o,i=this;return WM().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.knowledgeGraphService=this.createKnowledgeGraphService(this.url,r),t.next=3,this.knowledgeGraphService.getGraphMapData(e);case 3:n=t.sent,o=HM.dataFromGraphMap(n.data,n.graphMap),this.graph=new HM(r&&r.config),this.graph.on("afterlayout",function(){i.fire(i.EVENT_TYPES[0])}),this.graph.setData(o),this.graph.handleNodeStatus((a=n.graphMap,void 0,void 0,void 0,void 0,s=a.dataContent,u=s.expand,l=s.collapse,c=s.hidden,{expand:u&&JSON.parse(u),collapse:l&&JSON.parse(l),hidden:c&&JSON.parse(c)}));case 9:case"end":return t.stop()}var a,s,u,l,c},t,this)}),function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){KM(i,n,o,a,s,"next",t)}function s(t){KM(i,n,o,a,s,"throw",t)}a(void 0)})});return function(t,r){return e.apply(this,arguments)}}()},{key:"createKnowledgeGraphService",value:function(t,e){return new lM(t,e)}},{key:"findShortestPath",value:function(t,e){var r=this,n=t.startID,o=t.endID,i=t.isHighlight,a=void 0===i||i,s=t.highlightStateStyles,u=void 0===s?{}:s;return this.knowledgeGraphService.findShortestPath({startID:n,endID:o},function(t){if(e&&e(t),a)if("processCompleted"===t.type&&t.result.succeed){var n=t.result,o=n.nodeIDs,i=n.edgeIDs;r.highlight(function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?JM(Object(r),!0).forEach(function(e){var n,o,i;n=t,o=e,i=r[e],(o=YM(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):JM(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}({nodeIDs:o,edgeIDs:i},u))}else alert(t.error.errorMsg,!1)})}},{key:"highlight",value:function(t){this.graph&&this.graph.highlight(t)}},{key:"clearHighlight",value:function(t){this.graph&&this.graph.clearHighlight(t)}}])&&QM(r.prototype,n),i&&QM(r,i),Object.defineProperty(r,"prototype",{writable:!1}),e}(),eL=function(){try{return mapv}catch(t){return{}}}();function rL(t){"@babel/helpers - typeof";return(rL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,oL(n.key),n)}}function oL(t){var e=function(t,e){if("object"!=rL(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=rL(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==rL(e)?e:String(e)}function iL(t,e,r){return e=lL(e),aL(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],lL(t).constructor):e.apply(t,r))}function aL(t,e){if(e&&("object"===rL(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return sL(t)}function sL(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function uL(){return(uL="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=lL(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function lL(t){return(lL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function cL(t,e){return(cL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var fL=eL.baiduMapLayer?eL.baiduMapLayer.__proto__:Function,pL=function(t){function e(t,r,n,o,i){var a;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),a=iL(this,e,[t,r,n]),!fL)return aL(a);a.options=n||{},a.transferCoordinate=o.transferCoordinate,a.getCenterPixel=o.getCenterPixel,a.getResolution=o.getResolution,a.validZoom=o.validZoom;var s=i.mapElement,u=i.targetElement,l=i.id;return a.targetElement=u,a.canvas=a._createCanvas(l,s),a.canvasLayer={canvas:a.canvas,devicePixelRatio:a.devicePixelRatio},a.init(n),a.argCheck(n),a.stopAniamation=!1,a.animation=n.animation,a.clickEvent=a.clickEvent.bind(sL(a)),a.mousemoveEvent=a.mousemoveEvent.bind(sL(a)),a._canvasUpdate(),a.targetElement.appendChild(a.canvas),a._expectShow=!0,a.isShow=!0,a}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cL(t,e)}(e,fL),r=e,(n=[{key:"clickEvent",value:function(t){var r=t.point;uL(lL(e.prototype),"clickEvent",this).call(this,r,t)}},{key:"mousemoveEvent",value:function(t){var r=t.point;uL(lL(e.prototype),"mousemoveEvent",this).call(this,r,t)}},{key:"getContext",value:function(){return this.canvas.getContext(this.context)}},{key:"addData",value:function(t,e){var r=t;t&&t.get&&(r=t.get()),this.dataSet.add(r),this.update({options:e})}},{key:"update",value:function(t){var r=t||{},n=r.data;n&&n.get&&(n=n.get()),void 0!=n&&this.dataSet.set(n),uL(lL(e.prototype),"update",this).call(this,{options:r.options})}},{key:"getData",value:function(){return this.dataSet}},{key:"removeData",value:function(t){if(this.dataSet){var e=this.dataSet.get({filter:function(e){return null==t||"function"!=typeof t||!t(e)}});this.dataSet.set(e),this.update({options:null})}}},{key:"clearData",value:function(){this.dataSet&&this.dataSet.clear(),this.update({options:null})}},{key:"updateData",value:function(t,e){t&&t.get&&this.dataSet.set(t.get()),this.update({options:e})}},{key:"_createCanvas",value:function(t,e){var r=e.style,n=r.width,o=r.height,i=document.createElement("canvas");i.style.position="absolute",i.style.top="0px",i.style.left="0px",i.id=t;var a="undefined"==typeof window?{}:window,s=this.devicePixelRatio=a.devicePixelRatio||1;return i.width=parseInt(n)*s,i.height=parseInt(o)*s,this.options.context&&"2d"!=this.options.context||i.getContext("2d").scale(s,s),i.style.width=n,i.style.height=o,i}},{key:"_canvasUpdate",value:function(t){if(!this.stopAniamation){var e=this.options.animation,r=this.getContext();if(this.isEnabledTime()){if(void 0===t)return void this.clear(r);"2d"===this.context&&(r.save(),r.globalCompositeOperation="destination-out",r.fillStyle="rgba(0, 0, 0, .1)",r.fillRect(0,0,r.canvas.width,r.canvas.height),r.restore())}else this.clear(r);if("2d"===this.context)for(var n in this.options)r[n]=this.options[n];else r.clear(r.COLOR_BUFFER_BIT);if(this.validZoom()){var o={transferCoordinate:this.transferCoordinate()},i=this.getResolution();void 0!==t&&(o.filter=function(r){var n=e.trails||10;return t&&r.time>t-n&&r.time<t});var a=this.dataSet.get(o);this.processData(a),"m"===this.options.unit?(this.options.size&&(this.options._size=this.options.size/i),this.options.width&&(this.options._width=this.options.width/i),this.options.height&&(this.options._height=this.options.height/i)):(this.options._size=this.options.size,this.options._height=this.options.height,this.options._width=this.options.width);var s=this.getCenterPixel();this.drawContext(r,a,this.options,s),this.options.updateCallback&&this.options.updateCallback(t)}}}},{key:"init",value:function(t){this.options=t,this.initDataRange(t),this.context=this.options.context||"2d",this.options.zIndex&&this.setZIndex(this.options.zIndex),this.initAnimator()}},{key:"destroy",value:function(){this.targetElement.removeChild(this.canvas),this.clearData(),this.animator&&this.animator.stop(),this.animator=null}},{key:"addAnimatorEvent",value:function(){}},{key:"moveEndEvent",value:function(){this.stopAniamation=!1,this._canvasUpdate()}},{key:"draw",value:function(){this._canvasUpdate()}},{key:"visible",value:function(){return this.isShow}},{key:"hide",value:function(){this.isShow=!1,this.canvas.style.display="none"}},{key:"show",value:function(){this.isShow=!0,this.canvas.style.display="block"}},{key:"setZIndex",value:function(t){this.canvas.style.zIndex=t}},{key:"clear",value:function(t){t&&t.clearRect&&t.clearRect(0,0,parseInt(this.map.getCanvas().style.width),parseInt(this.map.getCanvas().style.height))}}])&&nL(r.prototype,n),o&&nL(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}(),hL=function(t){var e;if(!t)return e;return["m","meter","meters"].indexOf(t.toLocaleLowerCase())>-1?e=1:["degrees","deg","degree","dd"].indexOf(t.toLocaleLowerCase())>-1?e=2*Math.PI*6378137/360:t===dr.KILOMETER?e=.001:t===dr.INCH?e=1/.025399999918:t===dr.FOOT&&(e=.3048),e};function yL(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[-180,180],o=n[1],i=n[0],a=o-i;return t===o&&e?t:t===i&&r?t:0===((t-i)%a+a)%a&&e?o:((t-i)%a+a)%a+i}function dL(t){var e=parseInt(t),r=parseInt(60*(t-e)),n=parseInt(60*(60*(t-e)-r));return r=0===parseInt(r/10)?"0".concat(r):r,n=0===parseInt(n/10)?"0".concat(n):n,"".concat(e,"Â°").concat(r,"'").concat(n)}function bL(t,e,r){return 1/(t*e*(1/.0254)*hL(r))}function vL(t){"@babel/helpers - typeof";return(vL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,gL(n.key),n)}}function gL(t){var e=function(t,e){if("object"!=vL(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=vL(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==vL(e)?e:String(e)}var SL=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=r.layerID?r.layerID:V.createUniqueID("mapvLayer_"),delete r.layerID,this.options=r,this.dataSet=e,this.type="custom",this.isPitching=!1,this.pitchStartEvent=this._pitchStart.bind(this),this.pitchEndEvent=this._pitchEnd.bind(this),this.renderingMode="3d",this.context=this.options.context||"2d",this.overlay=!0}var e,r,n;return e=t,(r=[{key:"onAdd",value:function(t){this.map=t,this.mapContainer=t.getCanvasContainer(),this.renderer=new pL(t,this.dataSet,this.options,{transferCoordinate:this._transferCoordinate,getCenterPixel:this._getCenterPixel,getResolution:this._getResolution,validZoom:this._validZoom.bind(this)},{id:this.id,targetElement:this.mapContainer,mapElement:this.map.getCanvas()}),this.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px",this._bindEvent()}},{key:"onRemove",value:function(){this.renderer.destroy(),this._unbindEvent()}},{key:"render",value:function(){this.map.isZooming()||this.map.isRotating()||this.isPitching?this.renderer.visible()&&this.renderer.hide():(!this.renderer.visible()&&this.renderer.show(),this.renderer.draw())}},{key:"hide",value:function(){return this.renderer&&this.renderer.hide(),this}},{key:"show",value:function(){return this.renderer&&this.renderer.show(),this}},{key:"_validZoom",value:function(){return!(this.options.minZoom&&this.map.getZoom()<this.options.minZoom||this.options.maxZoom&&this.map.getZoom()>this.options.maxZoom)}},{key:"_transferCoordinate",value:function(){var t=this.map,e=t.getBounds(),r=e.getEast()-e.getWest(),n=e.getNorth()-e.getSouth(),i=r/this.map.getCanvas().getBoundingClientRect().width,a=n/this.map.getCanvas().getBoundingClientRect().height,s=t.getCenter(),u=t.project(s),l=this;return function(e){if(t.transform.rotationMatrix||"2d"===l.context){var r=t.project(new(o().LngLat)(e[0],e[1]));return[r.x,r.y]}var n=[(e[0]-s.lng)/i,(s.lat-e[1])/a];return[n[0]+u.x,n[1]+u.y]}}},{key:"_getResolution",value:function(){var t=this.map.getBounds(),e=(t.getEast()-t.getWest())/this.map.getCanvas().getBoundingClientRect().width;return hL("DEGREE")*e}},{key:"_getCenterPixel",value:function(){return this.map.project(new(o().LngLat)(0,0))}},{key:"getTopLeft",value:function(){var t,e=this.map;e&&(t=e.getBounds().getNorthWest());return t}},{key:"addData",value:function(t,e){this.renderer.addData(t,e)}},{key:"update",value:function(t){this.renderer.update(t)}},{key:"getData",value:function(){return this.renderer&&(this.dataSet=this.renderer.getData()),this.dataSet}},{key:"removeData",value:function(t){this.renderer&&this.renderer.removeData(t)}},{key:"clearData",value:function(){this.renderer.clearData()}},{key:"_bindEvent",value:function(){var t=this.map;t.on("pitchstart",this.pitchStartEvent),t.on("pitchend",this.pitchEndEvent),this.options.methods&&(this.options.methods.click&&t.on("click",this.renderer.clickEvent),this.options.methods.mousemove&&t.on("mousemove",this.renderer.mousemoveEvent))}},{key:"_unbindEvent",value:function(){var t=this.map;t.off("pitchstart",this.pitchStartEvent),t.off("pitchend",this.pitchEndEvent),this.options.methods&&(this.options.methods.click&&t.off("click",this.renderer.clickEvent),this.options.methods.mousemove&&t.off("mousemove",this.renderer.mousemoveEvent))}},{key:"setVisibility",value:function(t){t!==this.visibility&&(this.visibility=t,t?this.show():this.hide())}},{key:"setZIndex",value:function(t){this.renderer.setZIndex(t)}},{key:"_pitchStart",value:function(){this.isPitching=!0}},{key:"_pitchEnd",value:function(){this.isPitching=!1}}])&&mL(e.prototype,r),n&&mL(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),wL=function(){try{return THREE}catch(t){return{}}}();function OL(t,e,r){if(t===r||t===e)return t;var n=r-e;return((t-e)%n+n)%n+e}function _L(t){return t*Math.PI/180}var PL={matrix:[1,-1,0,0],projection:{R:6378137,minZoom:0,maxZoom:22,nativeMaxZoom:19,RAD:Math.PI/180,METERS_PER_DEGREE:6378137*Math.PI/180,MAX_LATITUDE:85.0511287798,project:function(t){var e=this.RAD,r=this.METERS_PER_DEGREE,n=this.MAX_LATITUDE,o=t instanceof Array?{lng:t[0],lat:t[1]}:{lng:t.lng,lat:t.lat},i=o.lng,a=Math.max(Math.min(n,o.lat),-n);return{x:i*r,y:(0===a?0:Math.log(Math.tan((90+a)*e/2))/e)*r}},unproject:function(t){var e,r=t.x,n=t.y,o=this.RAD,i=this.METERS_PER_DEGREE;return 0===n?e=0:(e=n/i,e=(2*Math.atan(Math.exp(e*o))-Math.PI/2)/o),{lng:OL(r/i,-180,180),lat:OL(e,-this.MAX_LATITUDE,this.MAX_LATITUDE)}},locate:function(t,e,r){if(!t)return null;if(e=e||0,r=r||0,!e&&!r)return t;var n=t.lng;if(0!==e){var o=Math.abs(e),i=_L(t.lng);n=OL(180*(i+=2*Math.sqrt(Math.pow(Math.sin(o/(2*this.R)),2)/Math.pow(Math.cos(i),2))*(o>0?1:-1))/Math.PI,-180,180)}var a=t.lat;if(0!==r){var s=Math.abs(r),u=_L(t.lat);a=OL(180*(u+=2*Math.sin(s/(2*this.R))*(s>0?1:-1))/Math.PI,-90,90)}return{lng:n,lat:a}},getResolution:function(t){if(!this.resolutions){for(var e=[],r=12756274*Math.PI,n=0;n<=this.maxZoom;n++)e[n]=r/(256*Math.pow(2,n));this.resolutions=e}var o=0|t,i=this.resolutions.length;o=o<0?0:o>i-1?i-1:o;var a=this.resolutions[o];return(0|t)!==t&&o!==i-1?a+(this.resolutions[o+1]-a)*(t-o):a}},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},lngLatToPoint:function(t,e){var r=this.project(t);return this.transform(r,this.projection.getResolution(e))},locate:function(t,e,r){return this.projection.locate(t,e,r)},transform:function(t,e){return{x:this.matrix[0]*(t.x-this.matrix[2])/e,y:this.matrix[1]*(t.y-this.matrix[3])/e}}};function EL(t){"@babel/helpers - typeof";return(EL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function CL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,TL(n.key),n)}}function TL(t){var e=function(t,e){if("object"!=EL(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=EL(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==EL(e)?e:String(e)}var jL=PL.projection,kL=wL.Color,xL=wL.Scene,AL=wL.WebGLRenderer,IL=wL.PerspectiveCamera,NL=wL.Vector3,RL=wL.Shape,ML=wL.Mesh,LL=wL.ExtrudeGeometry,BL=Math.PI/180,DL=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,FL=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame,UL=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._layer=e,this.renderer=r||"gl",this.options=n}var e,r,n;return e=t,(r=[{key:"setMap",value:function(t){this.map=t}},{key:"render",value:function(){this._layer&&(this.prepare(),this._layer.fire("initialized"),this._layer&&this._layer.draw(this.context,this.scene,this.camera),this._layer.fire("draw"),this.renderScene())}},{key:"update",value:function(){this.remove(),this.render()}},{key:"renderScene",value:function(){this.locationCamera(),this.animationFrame=this.renderFrame(function(){this.animationFrame=null,this.context&&this.context.render(this.scene,this.camera)}.bind(this))}},{key:"renderFrame",value:function(t){return DL(function(){t&&"function"==typeof t&&t()})}},{key:"resize",value:function(){this._resetElementSize(this.container),this._resetElementSize(this.canvas);var t=this.canvas.width,e=this.canvas.height,r=this.getMapSize();this.camera.aspect=t/e,this.camera.updateProjectionMatrix(),this.context.setSize(r.width,r.height),this.renderScene()}},{key:"prepare",value:function(){if(!this.map)return new Error("map object is necessary");this.canvas?this.clear(this.context):(this._initContainer(),this._initThreeRenderer(),this._layer.fire("rendererinitialized"))}},{key:"getMapSize",value:function(){var t=this.map.getContainer();return{width:t.clientWidth,height:t.clientHeight}}},{key:"cancelFrame",value:function(){null!=this.animationFrame&&FL(this.animationFrame)}},{key:"remove",value:function(){null!=this.animationFrame&&FL(this.animationFrame),this.container.removeChild(this.canvas),this.container.parentNode.removeChild(this.container),this.context=null,this.canvas=null,this.container=null}},{key:"clear",value:function(t){t&&t.clear&&t.clear(),t&&t.clearRect&&t.clearRect(0,0,t.canvas.width,t.canvas.height)}},{key:"getScale",value:function(t){var e=this.map,r=null==t?e.getZoom():t,n=jL.getResolution(jL.nativeMaxZoom);return jL.getResolution(r)/n}},{key:"getCanvasContainer",value:function(){return this.container}},{key:"getCanvas",value:function(){return this.canvas}},{key:"locationCamera",value:function(){var t=this.map,e=this.getMapSize(),r=t.transform.zoomScale(jL.nativeMaxZoom-t.getZoom()-1),n=Math.tan(t.transform.fov/2*BL),o=this.camera,i=t.getPitch()*BL,a=-r*e.height/2/n;o.position.z=a*Math.cos(i);var s=PL.lngLatToPoint(t.getCenter(),jL.nativeMaxZoom),u=Math.sin(i)*a,l=t.getBearing()*BL;o.position.x=s.x+u*Math.sin(l),o.position.y=s.y-u*Math.cos(l),o.up.set(Math.sin(l),-Math.cos(l),0),o.lookAt(new wL.Vector3(s.x,s.y,0)),o.updateProjectionMatrix()}},{key:"toThreeShape",value:function(t){var e=this;if(!t)return null;var r=this.getCoordinatesCenter(t),n=this.lngLatToPosition(r),o=t.map(function(t){return e.lngLatToPosition({lng:t[0],lat:t[1]}).sub(n)});return new RL(o)}},{key:"toThreeMesh",value:function(t,e,r,n){if(!t)return null;var o=t;n&&(o=this.removeDuplicatedCoordinates(t));var i=this.distanceToThreeVector3(e,e).x,a=this.toThreeShape(o),s=new LL(a,{amount:i,bevelEnabled:!0}),u=new ML(s,r),l=this.lngLatToPosition(this.getCoordinatesCenter(o));return u.position.set(l.x,l.y,-i),u}},{key:"addObject",value:function(t,e){e&&t&&this.setPosition(t,e),this.scene.add(t)}},{key:"clearMesh",value:function(){var t=this.scene;if(!t)return this;for(var e=t.children.length-1;e>=0;e--)t.children[e]instanceof wL.Mesh&&t.remove(t.children[e]);return this}},{key:"clearAll",value:function(t){var e=this.scene;if(!e)return this;for(var r=e.children.length-1;r>=0;r--)!t&&e.children[r]instanceof wL.Camera||e.remove(e.children[r]);return this}},{key:"setPosition",value:function(t,e){if(!t||!e)return this;var r=this.lngLatToPosition(e);return t.position.set(r.x,r.y,r.z),this}},{key:"lngLatToPosition",value:function(t){var e=PL.projection.nativeMaxZoom,r=PL.lngLatToPoint(t,e);return new NL(r.x,r.y,-0)}},{key:"distanceToThreeVector3",value:function(t,e,r){var n=this.map,o=r||n.getCenter(),i=PL.projection.nativeMaxZoom,a=PL.locate(o,t,e),s=PL.lngLatToPoint(o,i),u=PL.lngLatToPoint(a,i),l=Math.abs(u.x-s.x)*Math.sign(t),c=Math.abs(u.y-s.y)*Math.sign(e);return new NL(l,c,0)}},{key:"removeDuplicatedCoordinates",value:function(t){function e(t,e){return t[0]===e[0]&&t[1]===e[1]}for(var r=[].concat(t),n=r.length-1;n>=1;n--)e(r[n],r[n-1])&&r.splice(n,1);return e(r[0],r[r.length-1])&&r.splice(r.length-1,1),r}},{key:"getCoordinatesCenter",value:function(t){for(var e=0,r=0,n=0,o=0,i=t.length;o<i;o++)t[o]&&(e+=t[o][0],r+=t[o][1],n++);return{lng:e/n,lat:r/n}}},{key:"_initContainer",value:function(){var t=this._createCanvas(),e=this.container=document.createElement("div");e.id=this._layer.id,e.className="threejs-wrapper",e.style.position="absolute",e.style.left="0px",e.style.top="0px",e.style.overflow="hidden",this._resetElementSize(e),e.appendChild(t),this.map.getCanvasContainer().appendChild(e)}},{key:"_createCanvas",value:function(){if(!this.canvas){var t=this.canvas=document.createElement("canvas");return t.className="threejs-overlay",t.style.outline="none",this._resetElementSize(t),t}}},{key:"_resetElementSize",value:function(t){if(t){var e=this.getMapSize(),r=window.devicePixelRatio?window.devicePixelRatio:1,n=r*e.width,o=r*e.height;t.width=n,t.height=o,t.style.width=e.width+"px",t.style.height=e.height+"px"}}},{key:"_initThreeRenderer",value:function(){var t,e=this.map,r=this.getMapSize();"gl"===(this.renderer||"gl")&&((t=new AL({canvas:this.canvas,alpha:!0,antialias:!0,preserveDrawingBuffer:!0},this.options)).autoClear=!0,t.clear()),t.setClearColor(new kL(1,1,1),0),t.canvas=this.canvas,this.context=t;var n=e.transform.fov,o=Math.tan(n/2*BL),i=this.getScale(jL.minZoom)/this.getScale(jL.nativeMaxZoom)*r.height/2/o;this.camera=new IL(n,r.width/r.height,1,i),this.scene=new xL,this.scene.add(this.camera)}}])&&CL(e.prototype,r),n&&CL(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function GL(t){"@babel/helpers - typeof";return(GL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function VL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,qL(n.key),n)}}function qL(t){var e=function(t,e){if("object"!=GL(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=GL(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==GL(e)?e:String(e)}function HL(t,e,r){return e=zL(e),function(t,e){if(e&&("object"===GL(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return JL(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],zL(t).constructor):e.apply(t,r))}function zL(t){return(zL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function JL(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function WL(t,e){return(WL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var KL=function(t){function e(t,r,n){var o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=HL(this,e)).id=t,o.options=n,o.type="custom",o.renderingMode="3d",o.overlay=!0;var i=n&&n.threeOptions;return o.renderer=new UL(JL(o),r,i),o}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&WL(t,e)}(e,o().Evented),r=e,(n=[{key:"toThreeShape",value:function(t){return this.renderer.toThreeShape(t)}},{key:"toThreeMesh",value:function(t,e,r,n){return this.renderer.toThreeMesh(t,e,r,n)}},{key:"addObject",value:function(t,e){this.renderer&&this.renderer.addObject(t,e)}},{key:"getScene",value:function(){return this.renderer.scene}},{key:"getCamera",value:function(){return this.renderer.camera}},{key:"getThreeRenderer",value:function(){return this.renderer.context}},{key:"clearMesh",value:function(){return this.renderer.clearMesh(),this}},{key:"clearAll",value:function(t){return this.renderer.clearAll(t),this}},{key:"setPosition",value:function(t,e){return this.renderer.setPosition(t,e)}},{key:"lngLatToPosition",value:function(t){return this.renderer.lngLatToPosition(t)}},{key:"distanceToThreeVector3",value:function(t,e,r){var n=this._map,o=r||n.getCenter();return this.renderer.distanceToThreeVector3(t,e,o)}},{key:"removeDuplicatedCoordinates",value:function(t){return this.renderer.removeDuplicatedCoordinates(t)}},{key:"getCoordinatesCenter",value:function(t){return this.renderer.getCoordinatesCenter(t)}},{key:"onAdd",value:function(t){var e=this;return e._map=t,e.renderer.setMap(t),e.renderer.render(),e.on("render",function(){this.context&&this.context.render(this.scene,this.camera)}.bind(e.renderer)),this}},{key:"addTo",value:function(t){return t.addLayer(this),this}},{key:"render",value:function(){this._update()}},{key:"getCanvasContainer",value:function(){return this.renderer.getCanvasContainer()}},{key:"getCanvas",value:function(){return this.renderer.getCanvas()}},{key:"remove",value:function(){this.renderer.remove(),this._map=null}},{key:"draw",value:function(){return this}},{key:"renderScene",value:function(){return this.renderer.renderScene(),this.fire("renderscene"),this}},{key:"_resize",value:function(){this.renderer.resize()}},{key:"_update",value:function(){return this.renderScene(),this.fire("render"),this}}])&&VL(r.prototype,n),i&&VL(r,i),Object.defineProperty(r,"prototype",{writable:!1}),e}();function QL(t){"@babel/helpers - typeof";return(QL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function YL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function XL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ZL(n.key),n)}}function ZL(t){var e=function(t,e){if("object"!=QL(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=QL(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==QL(e)?e:String(e)}var $L=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.layerTypeID=e,this.data=[].concat(r.data),this.props=r.props?r.props:{},this.callback=r.callback?r.callback:{},this.id=r.layerId?r.layerId:V.createUniqueID("graphicLayer_"+this.layerTypeID+"_")}var e,r,n;return e=t,(r=[{key:"onAdd",value:function(){}},{key:"render",value:function(){}},{key:"setStyle",value:function(t){V.extend(this.props,t),this._createLayerByLayerTypeID(),this.update()}},{key:"setData",value:function(t){this.data=this.data||[],this.data.length=0;var e=V.isArray(t)?[].concat(t):[t];this.layer.props.data||(this.layer.props.data=[]),this.layer.props.data.length=0;for(var r=0;r<e.length;r++)this.layer.props.data.push(e[r]);this.data=this.layer.props.data,this.update()}},{key:"addData",value:function(t){this.data=this.data||[];var e=V.isArray(t)?[].concat(t):[t];this.layer.props.data||(this.layer.props.data=[]);for(var r=0;r<e.length;r++)this.layer.props.data.push(e[r]);this.update()}},{key:"update",value:function(){if("Awaiting state"!==this.layer.lifecycle){this.layer.setChangeFlags({dataChanged:!0,propsChanged:!0,viewportChanged:!0,updateTriggersChanged:!0})}this._draw()}},{key:"clear",value:function(){this.removeData(),this.deckGL.finalize()}},{key:"removeData",value:function(){this.data.length=0,this.layer.props.data&&(this.layer.props.data.length=0),this.update()}},{key:"moveTo",value:function(t,e){var r=document.getElementById(this.id);if(e=void 0===e||e){var n=document.getElementById(t);r&&n&&n.parentNode.insertBefore(r,n)}else{var o=document.getElementById(t);if(r){if(o.nextSibling)return void o.parentNode.insertBefore(r,o.nextSibling);o.parentNode.appendChild(r)}}}},{key:"setVisibility",value:function(t){this.canvas&&t!==this.visibility&&(this.visibility=t,this.canvas.style.display=t?"block":"none")}},{key:"_draw",value:function(){var t=this._getState();t.layers=[this.layer],t.canvas=this.canvas,this.deckGL.setProps(t)}},{key:"_getState",value:function(){var t=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?YL(Object(r),!0).forEach(function(e){var n,o,i;n=t,o=e,i=r[e],(o=ZL(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):YL(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}({width:parseInt(this.canvas.style.width),height:parseInt(this.canvas.style.height)},this.getMapInfo()),e={};for(var r in t)e[r]=t[r];for(var n in this.props)e[n]=this.props[n];return this._isEPSG3857&&this._isEPSG3857()?(e.coordinateSystem=this.coordinateSystem,e.isGeographicCoordinateSystem=this.isGeographicCoordinateSystem):(e.coordinateSystem=1,e.isGeographicCoordinateSystem=!1),e.data=this.data,e}},{key:"_createLayerByLayerTypeID",value:function(){if(this.props.data=this.data,this.props.isGeographicCoordinateSystem=this.isGeographicCoordinateSystem,this.props.coordinateSystem=this.coordinateSystem,this.props.pickable=Boolean(this.props.onClick)||Boolean(this.props.onHover),"scatter-plot"===this.layerTypeID)this.props.id="scatter-plot",this._createScatterPlotLayer();else if("path-layer"===this.layerTypeID)this.props.id="path-layer",this._createPathLayer();else if("polygon-layer"===this.layerTypeID)this.props.id="polygon-layer",this._createPolygonLayer();else if("arc-layer"===this.layerTypeID)this.props.id="arc-layer",this._createArcLineLayer();else{if("hexagon-layer"!==this.layerTypeID)throw new Error(this.layerTypeID+" does not support");this.props.id="hexagon-layer",this._createHexagonLayer()}}},{key:"_createScatterPlotLayer",value:function(){var t=this;this.props.getPosition=this.callback.getPosition?this.callback.getPosition:function(t){if(!t)return[0,0,0];var e=t.getLngLat();return e&&[e.lng,e.lat,0]},this.callback.getColor&&(this.props.getColor=this.callback.getColor?this.callback.getColor:function(e){var r=e&&e.getStyle();return r&&r.color||t.props.color}),this.callback.getRadius&&(this.props.getRadius=this.callback.getRadius?this.callback.getRadius:function(e){var r=e&&e.getStyle();return r&&r.radius||t.props.radius}),(this.props.color||this.props.radius)&&(this.props.updateTriggers={},this.props.radius&&(this.props.updateTriggers.getRadius=[this.props.radius]),this.props.color&&(this.props.updateTriggers.getColor=[this.props.color])),this.layer=new window.DeckGL.ScatterplotLayer(this.props)}},{key:"_createPathLayer",value:function(){this.props.getPath=this.callback.getPath?this.callback.getPath:function(t){return t.geometry.coordinates},this.callback.getColor&&(this.props.getColor=this.callback.getColor),this.callback.getWidth&&(this.props.getWidth=this.callback.getWidth),this.callback.getDashArray&&(this.props.getDashArray=this.callback.getDashArray),this.layer=new window.DeckGL.PathLayer(this.props)}},{key:"_createPolygonLayer",value:function(){this.props.getPolygon=this.callback.getPolygon?this.callback.getPolygon:function(t){return t.geometry.coordinates},this.callback.getElevation&&(this.props.getElevation=this.callback.getElevation),this.callback.getFillColor&&(this.props.getFillColor=this.callback.getFillColor),this.callback.getLineColor&&(this.props.getLineColor=this.callback.getLineColor),this.callback.getLineWidth&&(this.props.getLineWidth=this.callback.getLineWidth),this.props.updateTriggers={},this.props.updateTriggers.getColor=this.props.color?this.props.color:[0,0,128,128],this.layer=new window.DeckGL.PolygonLayer(this.props)}},{key:"_createArcLineLayer",value:function(){this.props.getSourcePosition=this.callback.getSourcePosition?this.callback.getSourcePosition:function(t){return t?t.geometry.coordinates[0]:[0,0,0]},this.props.getTargetPosition=this.callback.getTargetPosition?this.callback.getTargetPosition:function(t){return t?t.geometry.coordinates[1]:[0,0,0]},this.callback.getStrokeWidth&&(this.props.getStrokeWidth=this.callback.getStrokeWidth),this.callback.getSourceColor&&(this.props.getSourceColor=this.callback.getSourceColor),this.callback.getTargetColor&&(this.props.getTargetColor=this.callback.getTargetColor),this.layer=new window.DeckGL.ArcLayer(this.props)}},{key:"_createHexagonLayer",value:function(){this.props.getPosition=this.callback.getPosition?this.callback.getPosition:function(t){return t?t.geometry.coordinates:[0,0,0]},this.callback.getColorValue&&(this.props.getColorValue=this.callback.getColorValue),this.callback.getElevationValue&&(this.props.getElevationValue=this.callback.getElevationValue),this.layer=new window.DeckGL.HexagonLayer(this.props)}},{key:"_initContainer",value:function(t,e){var r=e.style,n=r.width,o=r.height;this.canvas=this._createCanvas(n,o),t.appendChild(this.canvas)}},{key:"_createCanvas",value:function(t,e){var r=document.createElement("canvas");return r.id=this.id,r.style.position="absolute",r.style.top="0px",r.style.left="0px",r.style.cursor="",r.width=parseInt(t),r.height=parseInt(e),r.style.width=t,r.style.height=e,r}}])&&XL(e.prototype,r),n&&XL(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function tB(t){"@babel/helpers - typeof";return(tB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function eB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,rB(n.key),n)}}function rB(t){var e=function(t,e){if("object"!=tB(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=tB(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==tB(e)?e:String(e)}function nB(t,e,r){return e=oB(e),function(t,e){if(e&&("object"===tB(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],oB(t).constructor):e.apply(t,r))}function oB(t){return(oB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function iB(t,e){return(iB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var aB=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=nB(this,e,[t,r])).type="custom",n.renderingMode="3d",n.overlay=!0,n}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&iB(t,e)}(e,$L),r=e,(n=[{key:"onAdd",value:function(t){if(this.map=t,this.canvas)return this.mapContainer=this.map.getCanvasContainer(),this;this._isEPSG3857()?(this.coordinateSystem=3,this.isGeographicCoordinateSystem=!0):(this.coordinateSystem=1,this.isGeographicCoordinateSystem=!1),this._initContainer(this.map.getCanvasContainer(),this.map.getCanvas()),this._createLayerByLayerTypeID();var e=this._getState(),r={};for(var n in e)r[n]=e[n];r.layers=[this.layer],r.canvas=this.canvas,this.deckGL=new window.DeckGL.experimental.DeckGLJS(r),this._draw()}},{key:"onRemove",value:function(){this.map.getCanvasContainer().removeChild(this.canvas),this.clear()}},{key:"getMapInfo",value:function(){var t=this.map.getCenter();return{center:t,zoom:this.map.getZoom(),maxZoom:this.map.getMaxZoom(),pitch:this.map.getPitch(),bearing:this.map.getBearing(),longitude:t.lng,latitude:t.lat}}},{key:"render",value:function(){this._draw()}},{key:"_isEPSG3857",value:function(){return this.map.getCRS&&this.map.getCRS()!==o().CRS.EPSG3857}}])&&eB(r.prototype,n),i&&eB(r,i),Object.defineProperty(r,"prototype",{writable:!1}),e}();function sB(t){"@babel/helpers - typeof";return(sB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function uB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,lB(n.key),n)}}function lB(t){var e=function(t,e){if("object"!=sB(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=sB(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==sB(e)?e:String(e)}function cB(t,e,r){return e=pB(e),function(t,e){if(e&&("object"===sB(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],pB(t).constructor):e.apply(t,r))}function fB(){return(fB="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=pB(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function pB(t){return(pB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function hB(t,e){return(hB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var yB=function(t){function e(t,r,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=cB(this,e,[t,r,n])).x=parseFloat(t),o.y=parseFloat(r),o.text=n.toString(),o.bsInfo={h:null,w:null},o.element=document.createElement("span"),o.CLASS_NAME="SuperMap.Geometry.GeoText",o.geometryType="GeoText",o}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hB(t,e)}(e,j),r=e,(n=[{key:"destroy",value:function(){fB(pB(e.prototype),"destroy",this).call(this),this.x=null,this.y=null,this.text=null}},{key:"getCentroid",value:function(){return new at(this.x,this.y)}},{key:"clone",value:function(t){return null==t&&(t=new e(this.x,this.y,this.text)),V.applyDefaults(t,this),t}},{key:"calculateBounds",value:function(){this.bounds=new Z(this.x,this.y,this.x,this.y)}},{key:"getLabelPxBoundsByLabel",value:function(t,e,r,n){var o,i,a,s,u=V.cloneObject(t),l=(n.label||this.text).split("\n").length;if(e=parseFloat(e),r=parseFloat(r),l>1&&(r=parseFloat(r)*l),n.labelAlign&&"cm"!==n.labelAlign)switch(n.labelAlign){case"lt":u.x+=e/2,u.y+=r/2;break;case"lm":u.x+=e/2;break;case"lb":u.x+=e/2,u.y-=r/2;break;case"ct":u.y+=r/2;break;case"cb":u.y-=r/2;break;case"rt":u.x-=e/2,u.y+=r/2;break;case"rm":u.x-=e/2;break;case"rb":u.x-=e/2,u.y-=r/2}return this.bsInfo.h=r,this.bsInfo.w=e,o=u.x-parseFloat(e)/2,i=u.y+parseFloat(r)/2,s=u.x+parseFloat(e)/2,a=u.y-parseFloat(r)/2,new Z(o,i,s,a)}},{key:"getLabelPxBoundsByText",value:function(t,e){var r,n,o,i,a=this.getLabelPxSize(e),s=V.cloneObject(t);if(e.labelAlign&&"cm"!==e.labelAlign)switch(e.labelAlign){case"lt":s.x+=a.w/2,s.y+=a.h/2;break;case"lm":s.x+=a.w/2;break;case"lb":s.x+=a.w/2,s.y-=a.h/2;break;case"ct":s.y+=a.h/2;break;case"cb":s.y-=a.h/2;break;case"rt":s.x-=a.w/2,s.y+=a.h/2;break;case"rm":s.x-=a.w/2;break;case"rb":s.x-=a.w/2,s.y-=a.h/2}return this.bsInfo.h=a.h,this.bsInfo.w=a.w,r=s.x-a.w/2,n=s.y+a.h/2,i=e.fontStyle&&"italic"===e.fontStyle?s.x+a.w/2+parseInt(parseFloat(e.fontSize)/2):s.x+a.w/2,o=s.y-a.h/2,new Z(r,n,i,o)}},{key:"getLabelPxSize",value:function(t){var e,r,n,o,i=parseFloat(t.strokeWidth);e=t.label||this.text,r=t.fontSize?parseFloat(t.fontSize):parseFloat("12px");var a=e.split("\n"),s=a.length;o=s>1?r*s+s+i+.2*r:r+i+.2*r+1,n=0,this.labelWTmp&&n<this.labelWTmp&&(n=this.labelWTmp);for(var u=0;u<s;u++){var l=this.getTextCount(a[u]),c=this.labelWTmp=V.getTextBounds(t,a[u],this.element).textWidth+1*l.textC+i;n<c&&(n=c)}var f=new Object;return f.h=o,f.w=n,f}},{key:"getTextCount",value:function(t){for(var e={},r=0,n=0,o=0;o<t.length;o++)t.charCodeAt(o)>255?r++:n++;return e.cnC=r,e.enC=n,e.textC=t.length,e}}])&&uB(r.prototype,n),o&&uB(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function dB(t){"@babel/helpers - typeof";return(dB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,vB(n.key),n)}}function vB(t){var e=function(t,e){if("object"!=dB(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=dB(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==dB(e)?e:String(e)}var mB=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.fieldNames=null,this.fieldValues=null,this.geometry=null,e&&V.extend(this,e),this.CLASS_NAME="SuperMap.ServerFeature"}var e,r,n;return e=t,n=[{key:"fromJson",value:function(e){var r=null;if(e)return(r=e.geometry)&&(r=en.fromJson(r)),new t({fieldNames:e.fieldNames,fieldValues:e.fieldValues,geometry:r})}}],(r=[{key:"destroy",value:function(){var t=this;t.fieldNames=null,t.fieldValues=null,t.geometry&&(t.geometry.destroy(),t.geometry=null)}},{key:"toFeature",value:function(){var t,e,r,n,o={},i=this;for(var a in t=i.fieldNames,e=i.fieldValues,t)o[t[a]]=e[a];return i.geometry&&(r=i.geometry.toGeometry()),n=new he(r,o),i.geometry&&i.geometry.id&&(n.fid=i.geometry.id),n}}])&&bB(e.prototype,r),n&&bB(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function gB(t){"@babel/helpers - typeof";return(gB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function SB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,wB(n.key),n)}}function wB(t){var e=function(t,e){if("object"!=gB(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=gB(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==gB(e)?e:String(e)}var OB=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=e,this.rootCanvas=null,this.features=[],this.visibility=!0,this.opacity=e.opacity?e.opacity:1,this.colors=e.colors?e.colors:["blue","cyan","lime","yellow","red"],this.useGeoUnit=!!e.useGeoUnit&&e.useGeoUnit,this.radius=e.radius?e.radius:50,this.featureWeight=e.featureWeight?e.featureWeight:null,this.maxWeight=null,this.minWeight=null,this.canvasContext=null,this.maxWidth=null,this.maxHeight=null,this.extent={},this.mapElement=e.mapElement,this._createCanvasContainer(e.targetElement,e.size)}var e,r,n;return e=t,(r=[{key:"addFeatures",value:function(t){this.features=this.toiClientFeature(t),this.refresh()}},{key:"refresh",value:function(){0!==this.features.length&&this.updateHeatPoints(this.extent)}},{key:"setOpacity",value:function(t){t!==this.opacity&&(this.opacity=t,V.modifyDOMElement(this.rootCanvas,null,null,null,null,null,null,t))}},{key:"updateHeatPoints",value:function(t){this.features&&this.features.length>0?this.convertFastToPixelPoints(t):this.canvasContext.clearRect(0,0,this.maxWidth,this.maxWidth)}},{key:"convertFastToPixelPoints",value:function(t){var e,r,n,o,i,a,s,u=[],l=t.getEast()-t.getWest(),c=t.getNorth()-t.getSouth(),f=this.mapElement;o=l/f.width>c/f.height?l/f.width:c/f.height,this.useRadius=this.useGeoUnit?parseInt(this.radius/o):this.radius;for(var p=0;p<this.features.length;p++){var h=this.features[p],y=h.geometry,d=this.getPixelXY(new K(y.x,y.y));this.featureWeight?(d.weight=h.attributes[this.featureWeight],this.maxWeight||(i=i||d.weight,a=a||d.weight,i=Math.max(i,d.weight),a=Math.min(a,d.weight))):d.weight=1,e=Math.floor(d.x),r=Math.floor(d.y),n=d.weight,u.push([e,r,n])}this.maxWeight?this.draw(u,this.maxWeight):(s=i&&a?(i+a)/2:1,this.draw(u,s))}},{key:"draw",value:function(t,e){if(!(this.maxHeight>0&&this.maxWidth>0))return!1;var r=this.canvasContext;r.setTransform(1,0,0,1,0,0),this.canvasContext.clearRect(0,0,this.maxWidth,this.maxHeight),this.drawCircle(this.useRadius),this.createGradient();for(var n=0;n<t.length;n++){var o=t[n];this.canvasContext.globalAlpha=Math.max(o[2]/e,.05),this.canvasContext.drawImage(this.circle,o[0]-this.useRadius,o[1]-this.useRadius)}var i=r.getImageData(0,0,this.maxWidth,this.maxHeight);this.colorize(i.data,this.grad),r.putImageData(i,0,0)}},{key:"colorize",value:function(t,e){for(var r,n=0;n<t.length;n+=4)(r=4*t[n+3])&&(t[n]=e[r],t[n+1]=e[r+1],t[n+2]=e[r+2])}},{key:"drawCircle",value:function(t){var e=t/2,r=this.circle=document.createElement("canvas"),n=r.getContext("2d");r.height=2*t,r.width=2*t,n.shadowOffsetX=n.shadowOffsetY=2*t,n.shadowBlur=e,n.shadowColor="#000000",n.beginPath(),n.arc(-t,-t,t/2,0,2*Math.PI,!0),n.closePath(),n.fill()}},{key:"createGradient",value:function(){var t=this.colors,e=document.createElement("canvas"),r=e.getContext("2d"),n=r.createLinearGradient(0,0,0,256);e.height=256,e.width=1;for(var o=1,i=0,a=t.length;i<a;i++)n.addColorStop(o/a,t[i]),o++;r.fillStyle=n,r.fillRect(0,0,1,256),this.grad=r.getImageData(0,0,1,256).data}},{key:"getPixelXY",value:function(t){var e;if(t instanceof at||t instanceof yB){var r=this.options.convertLatlonToPixel({lon:t.x,lat:t.y});e={x:parseInt(r.x),y:parseInt(r.y)}}if(t instanceof K){var n=this.options.convertLatlonToPixel(t);e={x:parseInt(n.x),y:parseInt(n.y)}}return e}},{key:"_createCanvasContainer",value:function(t){this.rootCanvas=document.createElement("canvas"),this.rootCanvas.id=this.options.id,this.rootCanvas.width=this.maxWidth=parseInt(this.mapElement.style.width),this.rootCanvas.height=this.maxHeight=parseInt(this.mapElement.style.height),this.canvasContext=this.rootCanvas.getContext("2d");var e=window.devicePixelRatio||1;1!==e&&this.canvasContext&&this.canvasContext.scale(e,e),V.modifyDOMElement(this.rootCanvas,null,{x:0,y:0},{w:this.maxWidth,h:this.maxHeight},"absolute",null,null,this.opacity),t.appendChild(this.rootCanvas)}},{key:"toiClientFeature",value:function(t){V.isArray(t)||(t=[t]);for(var e=[],r=0;r<t.length;r++)if(t[r]instanceof he)e.push(t[r]);else if(-1!=["FeatureCollection","Feature","Geometry"].indexOf(t[r].type)){var n=new cn;e=e.concat(n.read(t[r]))}else{if(!t[r].geometry||!t[r].geometry.parts)throw new Error("Features[".concat(r,"]'s type does not match, please check."));e.push(mB.fromJson(t[r]).toFeature())}return e}},{key:"removeFeatures",value:function(t){if(t&&0!==t.length&&this.features&&0!==this.features.length){if(t===this.features)return this.removeAllFeatures();V.isArray(t)||(t=[t]);for(var e,r,n=[],o=0,i=t.length;o<i;o++)e=t[o],-1!==(r=V.indexOf(this.features,e))?this.features.splice(r,1):n.push(e);var a=0==n.length;return this.refresh(),{succeed:a,heatPointsFailedRemoved:n}}}},{key:"removeAllFeatures",value:function(){this.features=[],this.refresh()}},{key:"removeFromMap",value:function(){this.removeAllFeatures(),this.options.targetElement.removeChild(this.rootCanvas)}},{key:"setVisibility",value:function(t){this.rootCanvas&&t!==this.visibility&&(this.visibility=t,this.rootCanvas.style.display=t?"block":"none")}},{key:"setExtent",value:function(t){this.extent=t}},{key:"_hide",value:function(){this.rootCanvas.style.display="none"}},{key:"_show",value:function(){this.rootCanvas.style.display="block"}}])&&SB(e.prototype,r),n&&SB(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function _B(t){"@babel/helpers - typeof";return(_B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function PB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function EB(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?PB(Object(r),!0).forEach(function(e){CB(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):PB(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function CB(t,e,r){return(e=jB(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function TB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,jB(n.key),n)}}function jB(t){var e=function(t,e){if("object"!=_B(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=_B(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==_B(e)?e:String(e)}function kB(t,e,r){return e=xB(e),function(t,e){if(e&&("object"===_B(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],xB(t).constructor):e.apply(t,r))}function xB(t){return(xB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function AB(t,e){return(AB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var IB=function(t){function e(t,r){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=kB(this,e);var o=r||{};return n.options=o,n.name=t,n.id=o.id?o.id:V.createUniqueID("HeatMapLayer_"),n.loadWhileAnimating=void 0===o.loadWhileAnimating||o.loadWhileAnimating,n.features={},n.EVENT_TYPES=["featuresadded","featuresremoved","featuresdrawcompleted"],n.type="custom",n.renderingMode="3d",n.overlay=!0,n}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&AB(t,e)}(e,o().Evented),r=e,(n=[{key:"onAdd",value:function(t){this.map=t;var e=this.map.getCanvasContainer(),r=this.map.getCanvas();this.renderer=new OB(EB(EB({id:this.id},this.options),{},{convertLatlonToPixel:this._convertLatlonToPixel.bind(this),targetElement:e,mapElement:r})),this.features.features&&this.features.features.length&&(this.renderer.setExtent(this.map.getBounds()),this.renderer.addFeatures(this.features))}},{key:"onRemove",value:function(){this.removeAllFeatures(),this.renderer.removeFromMap(),this.features={},this.renderer=null}},{key:"render",value:function(){this.refresh()}},{key:"addFeatures",value:function(t){this.renderer?this.renderer.addFeatures(t):this.features=t,this.fire(this.EVENT_TYPES[0],{features:t,succeed:!0})}},{key:"refresh",value:function(){this.map&&(this.renderer.setExtent(this.map.getBounds()),this.renderer.refresh())}},{key:"setOpacity",value:function(t){t!==this.opacity&&(this.renderer.setOpacity(t),null!==this.map&&this.fire("changelayer",{layer:this,property:"opacity"}))}},{key:"updateHeatPoints",value:function(t){this.renderer.updateHeatPoints(t)}},{key:"getPixelXY",value:function(t){return this.renderer.getPixelXY(t)}},{key:"removeFeatures",value:function(t){var e=this.renderer.removeFeatures(t);if(e){var r=e.heatPointsFailedRemoved,n=e.succeed;this.fire(this.EVENT_TYPES[1],{features:r,succeed:n})}}},{key:"removeAllFeatures",value:function(){this.renderer.removeAllFeatures()}},{key:"moveTo",value:function(t,e){var r=document.getElementById(this.renderer.rootCanvas.id);if(e=void 0===e||e){var n=document.getElementById(t);r&&n&&n.parentNode.insertBefore(r,n)}else{var o=document.getElementById(t);if(r){if(o.nextSibling)return void o.parentNode.insertBefore(r,o.nextSibling);o.parentNode.appendChild(r)}}}},{key:"setVisibility",value:function(t){this.renderer.setVisibility(t)}},{key:"_convertLatlonToPixel",value:function(t){return this.map.project(new(o().LngLat)(t.lon,t.lat))}}])&&TB(r.prototype,n),i&&TB(r,i),Object.defineProperty(r,"prototype",{writable:!1}),e}();function NB(t){"@babel/helpers - typeof";return(NB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function RB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function MB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,LB(n.key),n)}}function LB(t){var e=function(t,e){if("object"!=NB(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=NB(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==NB(e)?e:String(e)}var BB={color:[0,0,0,255],opacity:.8,radius:10,radiusScale:1,radiusMinPixels:0,radiusMaxPixels:Number.MAX_SAFE_INTEGER,strokeWidth:1,outline:!1},DB=function(){function t(e,r,n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var i=V.assign(this,BB,r);this.id=e,this.graphics=[].concat(i.graphics),this.mapOptions=o,this.functions=n,this.visibility=!0,this.init()}var e,r,n;return e=t,(r=[{key:"init",value:function(){this.canvas&&this.mapOptions.targetElement.appendChild(this.canvas),this._initContainer();var t=this.getState(),e=t.data,r=t.color,n=t.radius,o=t.opacity,i=t.highlightColor,a=t.radiusScale,s=t.radiusMinPixels,u=t.radiusMaxPixels,l=t.strokeWidth,c=t.outline,f=this,p={id:"scatter-plot",data:e,pickable:Boolean(this.onClick)||Boolean(this.onHover),autoHighlight:!0,color:r,opacity:o,radius:n,radiusScale:a,highlightColor:i,radiusMinPixels:s,radiusMaxPixels:u,strokeWidth:l,outline:c,isGeographicCoordinateSystem:this.isGeographicCoordinateSystem,coordinateSystem:this.coordinateSystem,getPosition:function(t){if(!t)return[0,0,0];var e=t.getLngLat();return e&&[e.lng,e.lat,0]},getColor:function(t){var e=t&&t.getStyle();return e&&e.color||f.color},getRadius:function(t){var e=t&&t.getStyle();return e&&e.radius||f.radius},updateTriggers:{getColor:[r],getRadius:[n]}};this.onClick&&(p.onClick=this.onClick),this.onHover&&(p.onHover=this.onHover),this.layer=new window.DeckGL.ScatterplotLayer(p);var h={};for(var y in t)h[y]=t[y];var d=parseInt(this.canvas.style.width),b=parseInt(this.canvas.style.height);h.width=d,h.height=b,h.layers=[this.layer],h.canvas=this.canvas,this.deckGL=new window.DeckGL.experimental.DeckGLJS(h),this.draw()}},{key:"setStyle",value:function(t){var e={color:this.color,radius:this.radius,opacity:this.opacity,highlightColor:this.highlightColor,radiusScale:this.radiusScale,radiusMinPixels:this.radiusMinPixels,radiusMaxPixels:this.radiusMaxPixels,strokeWidth:this.strokeWidth,outline:this.outline};V.assign(this,e,t),this.update()}},{key:"setGraphics",value:function(t){this.graphics=this.graphics||[],this.graphics.length=0;var e=V.isArray(t)?[].concat(t):[t];this.layer.props.data||(this.layer.props.data=[]),this.layer.props.data.length=0;for(var r=0;r<e.length;r++)this.layer.props.data.push(e[r]);this.update()}},{key:"addGraphics",value:function(t){this.graphics=this.graphics||[];var e=V.isArray(t)?[].concat(t):[t];this.layer.props.data||(this.layer.props.data=[]);for(var r=0;r<e.length;r++)this.layer.props.data.push(e[r]);this.update()}},{key:"getGraphicBy",value:function(t,e){var r=null;for(var n in this.graphics)if(this.graphics[n][t]===e){r=this.graphics[n];break}return r}},{key:"getGraphicById",value:function(t){return this.getGraphicBy("id",t)}},{key:"getGraphicsByAttribute",value:function(t,e){var r,n=[];for(var o in this.graphics)(r=this.graphics[o])&&r.attributes&&r.attributes[t]===e&&n.push(r);return n}},{key:"removeGraphics",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!t||0===t.length||t===this.graphics)return this.graphics.length=0,this.layer.props.data&&(this.layer.props.data.length=0),void this.update();V.isArray(t)||(t=[t]);for(var e=t.length-1;e>=0;e--){var r=t[e],n=V.indexOf(this.graphics,r);-1!==n&&this.graphics.splice(n,1)}this.update()}},{key:"update",value:function(){if("Awaiting state"!==this.layer.lifecycle){this.layer.setChangeFlags({dataChanged:!0,propsChanged:!0,viewportChanged:!0,updateTriggersChanged:!0});var t=this.getState(),e=parseInt(this.canvas.style.width),r=parseInt(this.canvas.style.height);t.width=e,t.height=r,this.layer.setState(t)}}},{key:"clear",value:function(){this.removeGraphics(),this.deckGL.finalize()}},{key:"remove",value:function(){this.mapOptions.targetElement.removeChild(this.canvas)}},{key:"destroy",value:function(){this.remove(),this.clear()}},{key:"moveTo",value:function(t,e){var r=document.getElementById(this.id);if(e=void 0===e||e){var n=document.getElementById(t);r&&n&&n.parentNode.insertBefore(r,n)}else{var o=document.getElementById(t);if(r){if(o.nextSibling)return void o.parentNode.insertBefore(r,o.nextSibling);o.parentNode.appendChild(r)}}}},{key:"setVisibility",value:function(t){this.canvas&&t!==this.visibility&&(this.visibility=t,this.canvas.style.display=t?"block":"none")}},{key:"draw",value:function(){var t=this.getState(),e={};for(var r in t)e[r]=t[r];var n=parseInt(this.canvas.style.width),o=parseInt(this.canvas.style.height);e.width=n,e.height=o,e.layers=[this.layer],e.canvas=this.canvas,this.deckGL.setProps(e)}},{key:"_initContainer",value:function(){this.canvas=this._createCanvas(this.mapOptions.mapElement),this.mapOptions.targetElement.appendChild(this.canvas)}},{key:"_createCanvas",value:function(t){var e=document.createElement("canvas");return this.id&&(e.id=this.id),e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.cursor="",e.width=parseInt(t.style.width),e.height=parseInt(t.style.height),e.style.width=t.style.width,e.style.height=t.style.height,e}},{key:"getState",value:function(){var t=this.functions.getMapState();return function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?RB(Object(r),!0).forEach(function(e){var n,o,i;n=t,o=e,i=r[e],(o=LB(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):RB(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}({data:this.graphics,color:this.color,radius:this.radius,opacity:this.opacity,highlightColor:this.highlightColor,radiusScale:this.radiusScale,radiusMinPixels:this.radiusMinPixels,radiusMaxPixels:this.radiusMaxPixels,strokeWidth:this.strokeWidth,outline:this.outline},t)}}])&&MB(e.prototype,r),n&&MB(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function FB(t){"@babel/helpers - typeof";return(FB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function UB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,GB(n.key),n)}}function GB(t){var e=function(t,e){if("object"!=FB(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=FB(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==FB(e)?e:String(e)}var VB=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=r,this.id=e||V.createUniqueID("graphicLayer_"),this.type="custom",this.renderingMode="3d",this.overlay=!0}var e,r,n;return e=t,(r=[{key:"addTo",value:function(t){return this.onAdd(t),this}},{key:"onAdd",value:function(t){this.map=t,this.renderer=new DB(this.id,this.options,{getMapState:this.getMapState.bind(this)},{targetElement:this.map.getCanvasContainer(),mapElement:this.map.getCanvas()})}},{key:"render",value:function(){this.renderer.draw()}},{key:"setStyle",value:function(t){this.renderer&&this.renderer.setStyle(t)}},{key:"setGraphics",value:function(t){this.renderer&&this.renderer.setGraphics(t)}},{key:"addGraphics",value:function(t){this.renderer&&this.renderer.addGraphics(t)}},{key:"getGraphicBy",value:function(t,e){return this.renderer&&this.renderer.getGraphicBy(t,e)}},{key:"getGraphicById",value:function(t){return this.getGraphicBy("id",t)}},{key:"getGraphicsByAttribute",value:function(t,e){return this.renderer&&this.renderer.getGraphicsByAttribute(t,e)}},{key:"removeGraphics",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.renderer&&this.renderer.removeGraphics(t)}},{key:"clear",value:function(){this.renderer&&this.renderer.clear()}},{key:"remove",value:function(){this.renderer&&this.renderer.remove()}},{key:"onRemove",value:function(){this.remove(),this.clear()}},{key:"moveTo",value:function(t,e){this.renderer.moveTo(t,e)}},{key:"setVisibility",value:function(t){this.renderer.setVisibility(t)}},{key:"getState",value:function(){return this.renderer.getState()}},{key:"getMapState",value:function(){var t={},e=this.map.getCenter(),r={longitude:e.lng,latitude:e.lat,zoom:this.map.getZoom(),maxZoom:this.map.getMaxZoom(),pitch:this.map.getPitch(),bearing:this.map.getBearing()};for(var n in r)t[n]=r[n];return this.map.getCRS&&this.map.getCRS()!==o().CRS.EPSG3857&&(t.coordinateSystem=this.coordinateSystem,t.isGeographicCoordinateSystem=this.isGeographicCoordinateSystem),t}}])&&UB(e.prototype,r),n&&UB(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function qB(t){"@babel/helpers - typeof";return(qB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function HB(t){return function(t){if(Array.isArray(t))return zB(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return zB(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zB(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zB(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function JB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,WB(n.key),n)}}function WB(t){var e=function(t,e){if("object"!=qB(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=qB(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==qB(e)?e:String(e)}var KB={textSize:"12px",textFont:["12px Calibri","sans-serif"],textAnchor:"bottom",textColor:"rgba(0,0,0,1)",textHaloColor:"rgba(255,255,255,1)",textHaloWidth:1},QB={lineColor:"red",lineCap:"round",lineJoin:"round",lindDasharray:[.4,5],lineDashOffset:0,lineWidth:1},YB={showLabel:!0,opacity:1,visible:!0,interval:10,extent:null,minZoom:0,maxZoom:50,wrapX:!0,strokeStyle:QB,lngLabelFormatter:null,latLabelFormatter:null,lngLabelStyle:KB,latLabelStyle:KB},XB=function(){function t(e,r,n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.map=e,this.id=o&&o.id,this.sourceId=this.id+"_line",this.canvasId=this.id,this.options=r,this.mapElement=o.mapElement,this.targetElement=o.targetElement,this.getMapStateByKey=n.getMapStateByKey,this.getDefaultExtent=n.getDefaultExtent,this.setVisibility=n.setVisibility,this.updateGraticuleLayer=n.updateGraticuleLayer,this.init()}var e,r,n;return e=t,(r=[{key:"init",value:function(){this._initialize(),this._createCanvas(),this._drawCanvas(),this.setVisibility(),this._drawLabel()}},{key:"onRemove",value:function(){this.targetElement.removeChild(this.canvas),this.canvas=null}},{key:"setMinZoom",value:function(t){this.options.minZoom=t,this.setVisibility()}},{key:"setMaxZoom",value:function(t){this.options.maxZoom=t,this.setVisibility()}},{key:"setShowLabel",value:function(t){this.options.showLabel=t,this._drawLabel()}},{key:"setExtent",value:function(t){this.options.extent=this.getDefaultExtent(t),this.features=this._getGraticuleFeatures(),this.updateGraticuleLayer(),this._drawLabel()}},{key:"setLngLabelStyle",value:function(t){this.options.lngLabelStyle=t,this._drawLabel()}},{key:"setLatLabelStyle",value:function(t){this.options.latLabelStyle=t,this._drawLabel()}},{key:"setIntervals",value:function(t){this.options.interval=t,this._calcInterval(),this.features=this._getGraticuleFeatures(),this.updateGraticuleLayer(),this._drawLabel()}},{key:"draw",value:function(){this._reset()}},{key:"_initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options;(t=t||{}).strokeStyle=Object.assign({},QB,t.strokeStyle||{}),t.lngLabelStyle=Object.assign({},KB,t.lngLabelStyle||{}),t.latLabelStyle=Object.assign({},KB,t.latLabelStyle||{}),this.options=Object.assign({},YB,t,{extent:this.getDefaultExtent(t.extent),wrapX:t.wrapX}),this.oldExtent=this.options.extent,this._calcInterval(),this.isRotate=!1,this.visible=this.options.visible,this.features=this._getGraticuleFeatures()}},{key:"_createCanvas",value:function(){if(!this.canvas){var t=this.mapElement;this.canvas=document.createElement("canvas"),this.canvas.id=this.canvasId,this.canvas.style.position="absolute",this.canvas.style.top="0px",this.canvas.style.left="0px";var e=("undefined"==typeof window?{}:window).devicePixelRatio||1;this.canvas.width=parseInt(t.style.width)*e,this.canvas.height=parseInt(t.style.height)*e,this.canvas.style.width=t.style.width,this.canvas.style.height=t.style.height,this.canvas.globalAlpha=this.options.opacity,this.targetElement.appendChild(this.canvas)}}},{key:"_drawCanvas",value:function(){this.canvas||this._createCanvas(),this.setVisibility(),this._reset()}},{key:"_resizeCallback",value:function(){this.targetElement&&this.targetElement.removeChild(this.canvas),this.canvas=null,this._drawCanvas()}},{key:"_reset",value:function(){this._updateRotate(),this._updateExtent(),this._calcInterval(),this._drawLabel()}},{key:"_updateRotate",value:function(){var t=this.getMapStateByKey("getBearing");this.isRotate=t>-180&&t<=-90||t>=90&&t<180}},{key:"_updateExtent",value:function(){if(this.options.wrapX&&!this.oldExtent){var t=this.getMapStateByKey("getBounds"),e=t._ne,r=t._sw;this.options.extent=[r.lng,r.lat,e.lng,e.lat]}}},{key:"_calcInterval",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.interval;"function"==typeof t?(t=t(this.map),this._currLngInterval=t,this._currLatInterval=t):(this._currLngInterval=t,this._currLatInterval=t)}},{key:"_formatLat",value:function(t){return this.options.latFormatTickLabel?this.options.latLabelFormatter(t):t<0?dL(-1*t)+"S":t>0?dL(t)+"N":""+dL(t)}},{key:"_formatLng",value:function(t){return this.options.lngLabelFormatter?this.options.lngLabelFormatter(t):(t=yL(t))>0&&t<=180?dL(t)+"E":t<0&&t>=-180?dL(-1*t)+"W":""+dL(t)}},{key:"_parsePxToInt",value:function(t){t.length>2&&"p"===t.charAt(t.length-2)&&(t=t.substr(0,t.length-2));try{return parseInt(t,10)}catch(t){console.log(t)}return 0}},{key:"_drawLabel",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.visible,r=this.canvas,n=r.getContext("2d");if(e&&this.options.showLabel){if(this.mapElement){this._currLngInterval&&this._currLatInterval||this._calcInterval(),n.clearRect(0,0,r.width,r.height);var o=this.options,i=o.lngLabelStyle,a=o.latLabelStyle,s=this._getGridiculePoints(),u=s.lngPoints,l=s.latPonits;u.forEach(function(e){t._drawLng(n,e[0],e[1],e[2],i)}),l.forEach(function(e){t._drawLat(n,e[0],e[1],e[2],a)})}}else n.clearRect(0,0,r.width,r.height)}},{key:"_drawLat",value:function(t,e,r,n,o){t=this._setLabelStyle(t,o);var i=this.canvas.width,a=12;try{var s=t.font.split(" ")[0];a=this._parsePxToInt(s)}catch(t){console.log(t)}if(!n){var u=e;e=r,r=this.getMapStateByKey("project",[u,e])}var l=this._formatLat(e),c=t.measureText(l).width;t.strokeText(l,(n?i:r.x)-c,(n?r:r.y)+a/2),t.fillText(l,(n?i:r.x)-c,(n?r:r.y)+a/2)}},{key:"_drawLng",value:function(t,e,r,n,o){t=this._setLabelStyle(t,o);var i=this.canvas.height;if(!n){var a=r;r=this.getMapStateByKey("project",[e,a])}var s=this._formatLng(e),u=t.measureText(s).width;t.strokeText(s,(n?r:r.x)-u/2,n?i:r.y),t.fillText(s,(n?r:r.x)-u/2,n?i:r.y)}},{key:"_getLatPoints",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-180,180],r=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.features;if(o){if(this.options.wrapX&&-180===e[0]&&180===e[1])return[];var i=[];return o.forEach(function(o){var a=o.geometry.coordinates[0][1];if(o.geometry.coordinates[1][1]===a){var s="number"==typeof n?n:e[1];t.isRotate&&(s="number"==typeof r?r:e[0]),t.options.wrapX&&(i=i.concat(t._getWrapPoints(s,a,[s,s]))),i.push([s,a])}}),i}}},{key:"_getLngPoints",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-90,90],r=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.features;if(o){var i="number"==typeof r?r:e[0];this.isRotate&&(i="number"==typeof n?n:e[1]);var a=[];return o.forEach(function(e){var r=e.geometry.coordinates[0][0];e.geometry.coordinates[1][0]===r&&(a.push([r,i]),t.options.wrapX&&(a=a.concat(t._getWrapPoints(r,i))))}),a}}},{key:"_getWrapPoints",value:function(t,e){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.oldExtent,n=[],o=this.getMapStateByKey("getBounds"),i=o._ne,a=o._sw,s=r.length>2?r[2]:r[1];t>=a.lng;){var u=yL(t,180===s,-180===r[0]);(!r||u>=r[0]&&u<=s)&&n.push([t,e]),t-=360}for(;t<=i.lng;){var l=yL(t,180===s,-180===r[0]);(!r||l>=r[0]&&l<=s)&&n.push([t,e]),t+=360}return n}},{key:"_getGridiculePoints",value:function(){var t=this._getEdgeLat(),e=this._getEdgeLng(),r=this._getRange(),n=r.latRange,o=r.lngRange,i=r.firstLat,a=r.firstLng,s=r.lastLat,u=r.lastLng;return{latPonits:this._getUniquePoint(this._getLatPoints(o,a,u),t,1),lngPoints:this._getUniquePoint(this._getLngPoints(n,i,s),e,0)}}},{key:"_getEdgeLat",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._currLatInterval,r=[],n=[],o=this.canvas.width,i=this.canvas.height,a=this._getRange().extent,s=this.getMapStateByKey("getBounds")._ne;if(this.options.wrapX&&yL(s.lng)>a[2])return[];for(var u=this._countDecimals(e),l=0;l<=i;l++){var c=this.getMapStateByKey("unproject",[o,l]),f=yL(c.lng);(this.options.wrapX?f>=a[0]&&f<=a[2]:c.lng>=a[0]&&c.lng<=a[2])&&c.lat>=a[1]&&c.lat<=a[3]&&(r.push([c.lat,l]),n.push(c.lat),void 0===t&&c.lat.toFixed(u)%e==0&&(t=Number(c.lat.toFixed(u))))}var p=this._getIntersectRange(t,n,r,e),h=p.first,y=p.last,d=p.coordinates,b=p.points;t=Math.min(Math.max(h,-90),90);var v=Math.max(Math.min(Math.round(y),90),-90);return-90!==t||-90!==v?this._getClosestCoordinate(t,v,d,b,e):[]}},{key:"_getEdgeLng",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._currLngInterval,r=[],n=[],o=this.canvas.width,i=this.canvas.height,a=this.options.extent,s=this._countDecimals(e),u=this.getMapStateByKey("getBounds")._sw;if(this.options.wrapX&&yL(u.lat)>a[3])return[];for(var l=0;l<=o;l++){var c=this.getMapStateByKey("unproject",[l,i]),f=yL(c.lng);(this.options.wrapX?f>=a[0]&&f<=a[2]:c.lng>=a[0]&&c.lng<=a[2])&&c.lat>=a[1]&&c.lat<=a[3]&&(r.push([c.lng,l]),n.push(c.lng),void 0===t&&c.lng.toFixed(s)%e==0&&(t=Number(c.lng.toFixed(s))))}var p=this._getIntersectRange(t,n,r,e),h=p.first,y=p.last,d=p.coordinates,b=p.points;return t=h,this._getClosestCoordinate(t,y,d,b,e)}},{key:"_getIntersectRange",value:function(t,e,r,n){var o=e[e.length-1];if(t>o){o=t,e.reverse(),r.reverse();for(var i=this._countDecimals(n),a=0;a<=e.length;a++){var s=e[a];if(s.toFixed(i)%n==0){t=Number(s.toFixed(i));break}}}return{first:t,last:o,coordinates:e,points:r}}},{key:"_getClosestCoordinate",value:function(t,e,r,n,o){for(var i=[],a=t;a<=e;){var s=this._getClosestNumberIndex(a,r),u=n[s];i.push([Math.round(u[0]),u[1],!0]),a+=o,r=r.slice(s),n=n.slice(s)}return i}},{key:"_getClosestNumberIndex",value:function(t,e){for(var r=0,n=Number.MAX_VALUE,o=0;o<e.length;o++){var i=Math.abs(e[o]-t);if(i<=n){if(i===n&&e[o]<e[r])continue;r=o,n=i}}return r}},{key:"_getUniquePoint",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(this.options.wrapX)return t.concat(e);if(!e||0===e.length)return t;var n=e,o=this.canvas.width,i=this.canvas.height;for(var a in t){var s=this.getMapStateByKey("project",t[a]),u=n.findIndex(function(e){return e[0]===t[a][r]});u<=-1?n.push(t[a]):s&&s.x>=0&&s.x<=o&&s.y>=0&&s.y<=i&&(n[u]=t[a])}return n}},{key:"_countDecimals",value:function(t){return Math.floor(t)!==t&&t.toString().split(".")[1].length||0}},{key:"_getGraticuleFeatures",value:function(){var t=this._currLngInterval||10,e=this._currLatInterval||10,r=[],n=this._getRange(),o=n.latRange,i=n.lngRange,a=n.firstLat,s=n.firstLng,u=n.lastLat,l=n.lastLng;this.options.wrapX&&!this.oldExtent&&(o=[-90,90],i=[-180,180],a=s=u=l=null),"number"==typeof s&&r.unshift(this._makeLineFeature(this._makeLineCoords(s,o,a,u))),"number"==typeof l&&r.unshift(this._makeLineFeature(this._makeLineCoords(l,o,a,u)));for(var c=i[0];c<=i[1];c+=t)r.unshift(this._makeLineFeature(this._makeLineCoords(c,o,a,u)));"number"==typeof a&&r.unshift(this._makeLineFeature(this._makeLineCoords(a,i,s,l,"lat"))),"number"==typeof u&&r.unshift(this._makeLineFeature(this._makeLineCoords(u,i,s,l,"lat")));for(var f=o[0];f<=o[1];f+=e)r.unshift(this._makeLineFeature(this._makeLineCoords(f,i,s,l,"lat")));return r}},{key:"_getRange",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.extent&&HB(this.options.extent);t&&0!==t.length||(t=this.getDefaultExtent());var e={};if((t=t.map(function(t){return Number(t.toFixed(6))}))[1]%this._currLatInterval!=0){e.firstLat=t[1];var r=Math.ceil(t[1]/this._currLatInterval);t[1]=r*this._currLatInterval}if(t[3]%this._currLatInterval!=0){e.lastLat=t[3];var n=Math.floor(t[3]/this._currLatInterval);t[3]=n*this._currLatInterval}if(t[0]%this._currLngInterval!=0){e.firstLng=t[0];var o=Math.ceil(t[0]/this._currLngInterval);t[0]=o*this._currLngInterval}if(t[2]%this._currLngInterval!=0){e.lastLng=t[2];var i=Math.floor(t[2]/this._currLngInterval);t[2]=i*this._currLngInterval}return Object.assign({latRange:[t[1],t[3]],lngRange:[t[0],t[2]],extent:t},e)}},{key:"_makeLineCoords",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[-90,90],r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"lng";t="lng"===o?this._lngFix(t):t,r="number"==typeof r?r:e[0],n="number"==typeof n?n:e[1];for(var i=Math.abs(r-n),a=[],s=r;s<=n;s+=i)"lng"===o?a.push([t,s]):a.push([s,t]);return a}},{key:"_makeLineFeature",value:function(t){return{type:"Feature",geometry:{type:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"LineString",coordinates:t}}}},{key:"_lngFix",value:function(t){return t>=180?180:t<=-180?-180:t}},{key:"_transformStrokeStyle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.strokeStyle;if(!t||"string"==typeof t)return{paint:{"line-color":t||"rgba(0,0,0,0.2)"}};var e={visibility:this.visible?"visible":"none","line-join":t.lineJoin||"round","line-cap":t.lineCap||"round"},r={"line-color":t.lineColor||"rgba(0,0,0,0.2)","line-width":t.lineWidth||1,"line-offset":t.lineDashOffset||0,"line-translate-anchor":"viewport"};return t.lineWidth&&("function"==typeof t.lineWidth?r["line-width"]=t.lineWidth(this.map):r["line-width"]=t.lineWidth),t.lindDasharray&&("function"==typeof t.lindDasharray?r["line-dasharray"]=t.lindDasharray(this.map):r["line-dasharray"]=t.lindDasharray),{layout:e,paint:r}}},{key:"_setLabelStyle",value:function(t,e){return e.textColor&&(t.fillStyle=e.textColor),e.textSize&&(t.font=e.textSize+" "+(e.textFont||["Calibri","sans-serif"]).join(",")),e.textHaloColor&&(t.strokeStyle=e.textHaloColor,t.lineWidth=e.textHaloWidth||1),e.textAnchor&&(t.textBaseline=this._getTxetBaseline(e.textAnchor),t.textAligin=this._getTxetAlign(e.textAligin)),t}},{key:"_getTxetBaseline",value:function(t){if(!t)return"bottom";var e=t.split("-");return e.includes("bottom")?"bottom":e.includes("top")?"top":e.includes("center")?"middle":void 0}},{key:"_getTxetAlign",value:function(t){if(!t)return"center";var e=t.split("-");return e.includes("left")?"left":e.includes("right")?"right":e.includes("center")?"center":void 0}}])&&JB(e.prototype,r),n&&JB(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ZB(t){"@babel/helpers - typeof";return(ZB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $B(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,tD(n.key),n)}}function tD(t){var e=function(t,e){if("object"!=ZB(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ZB(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ZB(e)?e:String(e)}var eD,rD={textSize:"12px",textFont:["12px Calibri","sans-serif"],textAnchor:"bottom",textColor:"rgba(0,0,0,1)",textHaloColor:"rgba(255,255,255,1)",textHaloWidth:1},nD={lineColor:"red",lineCap:"round",lineJoin:"round",lindDasharray:[.4,5],lineDashOffset:0,lineWidth:1},oD={showLabel:!0,opacity:1,visible:!0,interval:10,extent:null,minZoom:0,maxZoom:50,wrapX:!0,strokeStyle:nD,lngLabelFormatter:null,latLabelFormatter:null,lngLabelStyle:rD,latLabelStyle:rD},iD=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e&&e.layerID?e.layerID:V.createUniqueID("graticuleLayer_"),this.sourceId=this.id+"_line",(e=e||{}).strokeStyle=Object.assign({},nD,e.strokeStyle||{}),e.lngLabelStyle=Object.assign({},rD,e.lngLabelStyle||{}),e.latLabelStyle=Object.assign({},rD,e.latLabelStyle||{}),this.options=Object.assign({},oD,e),this.type="custom",this.renderingMode="3d",this.overlay=!0,this.styleDataEevent=this._setLayerTop.bind(this)}var e,r,n;return e=t,(r=[{key:"onAdd",value:function(t){this.map=t,this.renderer=new XB(this.map,this.options,{getMapStateByKey:this.getMapStateByKey,getDefaultExtent:this.getDefaultExtent,updateGraticuleLayer:this.updateGraticuleLayer.bind(this),setVisibility:this.setVisibility.bind(this)},{mapElement:this.map.getCanvas(),targetElement:this.map.getCanvasContainer(),id:this.id}),this.addGraticuleLayer(),this.resizeEvent=this.renderer._resizeCallback.bind(this.renderer),this.zoomendEvent=this.setVisibility.bind(this),this._bindEvent()}},{key:"render",value:function(){this.renderer.draw()}},{key:"getMapStateByKey",value:function(t,e){return"getBearing"===t?this.map.getBearing():"getBounds"===t?this.map.getBounds():"project"===t?this.map.project(e):"unproject"===t?this.map.unproject(e):void 0}},{key:"onRemove",value:function(){this.renderer.onRemove(),this._unbindEvent()}},{key:"setVisibility",value:function(t){var e=this.map&&this.map.getZoom();this.options.visible="boolean"==typeof t?t:this.options.visible,this.visible="boolean"==typeof t?t:this.options.visible&&e>=this.options.minZoom&&e<=this.options.maxZoom,this.renderer&&(this.renderer.visible=this.visible),this.map.getLayer(this.sourceId)&&this.map.setLayoutProperty(this.sourceId,"visibility",this.visible?"visible":"none"),this.renderer&&this.renderer._drawLabel()}},{key:"setMinZoom",value:function(t){this.options.minZoom=t,this.setVisibility()}},{key:"setMaxZoom",value:function(t){this.options.maxZoom=t,this.setVisibility()}},{key:"setShowLabel",value:function(t){this.options.showLabel=t,this.renderer._drawLabel()}},{key:"setExtent",value:function(t){this.options.extent=this.getDefaultExtent(t,this.map),this.updateGraticuleLayer(),this.renderer._drawLabel()}},{key:"setStrokeStyle",value:function(t){if(this.map&&this.map.getLayer(this.sourceId)){this.options.strokeStyle=t;var e=this.renderer._transformStrokeStyle(t),r=e.layout,n=e.paint;for(var o in r)this.map.setLayoutProperty(this.sourceId,o,r[o]);for(var i in n)this.map.setPaintProperty(this.sourceId,i,n[i])}}},{key:"setLngLabelStyle",value:function(t){this.options.lngLabelStyle=t,this.renderer._drawLabel()}},{key:"setLatLabelStyle",value:function(t){this.options.latLabelStyle=t,this.renderer._drawLabel()}},{key:"setIntervals",value:function(t){this.renderer&&this.renderer.setIntervals(t)}},{key:"getDefaultExtent",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.map,r=(e.getCRS&&e.getCRS()||{}).lngLatExtent;if(r||(r=[-180,-85.05119,180,85.05119]),!t||0===t.length)return r;var n=o().LngLatBounds.convert(t),i=n._sw,a=n._ne;return t=[i.lng,i.lat,a.lng,a.lat],t=[Math.max(r[0],t[0]),Math.max(r[1],t[1]),Math.min(r[2],t[2]),Math.min(r[3],t[3])]}},{key:"addGraticuleLayer",value:function(){if(!this.map.getSource(this.sourceId)){var t={type:"geojson",data:{type:"FeatureCollection",features:this.renderer.features}};this.map.addSource(this.sourceId,t)}if(!this.map.getLayer(this.sourceId)){var e=Object.assign({id:this.sourceId,type:"line",source:this.sourceId},this.renderer._transformStrokeStyle());this.map.addLayer(e)}}},{key:"updateGraticuleLayer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.features;if(this.map.getSource(this.sourceId)){var e={type:"FeatureCollection",features:t};this.map.getSource(this.sourceId).setData(e)}this.addGraticuleLayer()}},{key:"_bindEvent",value:function(){this.map.on("styledata",this.styleDataEevent),this.map.on("resize",this.resizeEvent),this.map.on("zoomend",this.zoomendEvent)}},{key:"_unbindEvent",value:function(){this.map.off("styledata",this.styleDataEevent),this.map.off("resize",this.resizeEvent),this.map.off("zoomend",this.zoomendEvent)}},{key:"_setLayerTop",value:function(){var t=this,e=this.map;if(e){var r=e.getStyle&&e.getStyle().layers;r&&r.length&&r.findIndex(function(e){return e.id===t.sourceId})!==r.length-1&&e.getLayer(this.sourceId)&&(e.removeLayer(this.sourceId),this.addGraticuleLayer())}}},{key:"_getLatPoints",value:function(t,e,r,n){return this.renderer._getLatPoints(t,e,r,n)}}])&&$B(e.prototype,r),n&&$B(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();!function(t){t[t.Unknown=0]="Unknown",t[t.Point=1]="Point",t[t.LineString=2]="LineString",t[t.Polygon=3]="Polygon",t[t.MultiPoint=4]="MultiPoint",t[t.MultiLineString=5]="MultiLineString",t[t.MultiPolygon=6]="MultiPolygon",t[t.GeometryCollection=7]="GeometryCollection",t[t.CircularString=8]="CircularString",t[t.CompoundCurve=9]="CompoundCurve",t[t.CurvePolygon=10]="CurvePolygon",t[t.MultiCurve=11]="MultiCurve",t[t.MultiSurface=12]="MultiSurface",t[t.Curve=13]="Curve",t[t.Surface=14]="Surface",t[t.PolyhedralSurface=15]="PolyhedralSurface",t[t.TIN=16]="TIN",t[t.Triangle=17]="Triangle"}(eD||(eD={}));var aD,sD=new Int32Array(2),uD=new Float32Array(sD.buffer),lD=new Float64Array(sD.buffer),cD=1===new Uint16Array(new Uint8Array([1,0]).buffer)[0];function fD(t){"@babel/helpers - typeof";return(fD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pD(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,hD(n.key),n)}}function hD(t){var e=function(t,e){if("object"!=fD(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=fD(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==fD(e)?e:String(e)}!function(t){t[t.UTF8_BYTES=1]="UTF8_BYTES",t[t.UTF16_STRING=2]="UTF16_STRING"}(aD||(aD={}));var yD=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.bytes_=e,this.position_=0,this.text_decoder_=new TextDecoder}var e,r,n;return e=t,n=[{key:"allocate",value:function(e){return new t(new Uint8Array(e))}}],(r=[{key:"clear",value:function(){this.position_=0}},{key:"bytes",value:function(){return this.bytes_}},{key:"position",value:function(){return this.position_}},{key:"setPosition",value:function(t){this.position_=t}},{key:"capacity",value:function(){return this.bytes_.length}},{key:"readInt8",value:function(t){return this.readUint8(t)<<24>>24}},{key:"readUint8",value:function(t){return this.bytes_[t]}},{key:"readInt16",value:function(t){return this.readUint16(t)<<16>>16}},{key:"readUint16",value:function(t){return this.bytes_[t]|this.bytes_[t+1]<<8}},{key:"readInt32",value:function(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}},{key:"readUint32",value:function(t){return this.readInt32(t)>>>0}},{key:"readInt64",value:function(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}},{key:"readUint64",value:function(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}},{key:"readFloat32",value:function(t){return sD[0]=this.readInt32(t),uD[0]}},{key:"readFloat64",value:function(t){return sD[cD?0:1]=this.readInt32(t),sD[cD?1:0]=this.readInt32(t+4),lD[0]}},{key:"writeInt8",value:function(t,e){this.bytes_[t]=e}},{key:"writeUint8",value:function(t,e){this.bytes_[t]=e}},{key:"writeInt16",value:function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8}},{key:"writeUint16",value:function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8}},{key:"writeInt32",value:function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24}},{key:"writeUint32",value:function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24}},{key:"writeInt64",value:function(t,e){this.writeInt32(t,Number(BigInt.asIntN(32,e))),this.writeInt32(t+4,Number(BigInt.asIntN(32,e>>BigInt(32))))}},{key:"writeUint64",value:function(t,e){this.writeUint32(t,Number(BigInt.asUintN(32,e))),this.writeUint32(t+4,Number(BigInt.asUintN(32,e>>BigInt(32))))}},{key:"writeFloat32",value:function(t,e){uD[0]=e,this.writeInt32(t,sD[0])}},{key:"writeFloat64",value:function(t,e){lD[0]=e,this.writeInt32(t,sD[cD?0:1]),this.writeInt32(t+4,sD[cD?1:0])}},{key:"getBufferIdentifier",value:function(){if(this.bytes_.length<this.position_+4+4)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var t="",e=0;e<4;e++)t+=String.fromCharCode(this.readInt8(this.position_+4+e));return t}},{key:"__offset",value:function(t,e){var r=t-this.readInt32(t);return e<this.readInt16(r)?this.readInt16(r+e):0}},{key:"__union",value:function(t,e){return t.bb_pos=e+this.readInt32(e),t.bb=this,t}},{key:"__string",value:function(t,e){t+=this.readInt32(t);var r=this.readInt32(t);t+=4;var n=this.bytes_.subarray(t,t+r);return e===aD.UTF8_BYTES?n:this.text_decoder_.decode(n)}},{key:"__union_with_string",value:function(t,e){return"string"==typeof t?this.__string(e):this.__union(t,e)}},{key:"__indirect",value:function(t){return t+this.readInt32(t)}},{key:"__vector",value:function(t){return t+this.readInt32(t)+4}},{key:"__vector_len",value:function(t){return this.readInt32(t+this.readInt32(t))}},{key:"__has_identifier",value:function(t){if(4!=t.length)throw new Error("FlatBuffers: file identifier must be length 4");for(var e=0;e<4;e++)if(t.charCodeAt(e)!=this.readInt8(this.position()+4+e))return!1;return!0}},{key:"createScalarList",value:function(t,e){for(var r=[],n=0;n<e;++n){var o=t(n);null!==o&&r.push(o)}return r}},{key:"createObjList",value:function(t,e){for(var r=[],n=0;n<e;++n){var o=t(n);null!==o&&r.push(o.unpack())}return r}}])&&pD(e.prototype,r),n&&pD(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function dD(t){"@babel/helpers - typeof";return(dD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bD(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,vD(n.key),n)}}function vD(t){var e=function(t,e){if("object"!=dD(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=dD(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==dD(e)?e:String(e)}var mD,gD=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.bb=null,this.bb_pos=0}var e,r,n;return e=t,n=[{key:"getRootAsGeometry",value:function(e,r){return(r||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"getSizePrefixedRootAsGeometry",value:function(e,r){return e.setPosition(e.position()+4),(r||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"startGeometry",value:function(t){t.startObject(8)}},{key:"addEnds",value:function(t,e){t.addFieldOffset(0,e,0)}},{key:"createEndsVector",value:function(t,e){t.startVector(4,e.length,4);for(var r=e.length-1;r>=0;r--)t.addInt32(e[r]);return t.endVector()}},{key:"startEndsVector",value:function(t,e){t.startVector(4,e,4)}},{key:"addXy",value:function(t,e){t.addFieldOffset(1,e,0)}},{key:"createXyVector",value:function(t,e){t.startVector(8,e.length,8);for(var r=e.length-1;r>=0;r--)t.addFloat64(e[r]);return t.endVector()}},{key:"startXyVector",value:function(t,e){t.startVector(8,e,8)}},{key:"addZ",value:function(t,e){t.addFieldOffset(2,e,0)}},{key:"createZVector",value:function(t,e){t.startVector(8,e.length,8);for(var r=e.length-1;r>=0;r--)t.addFloat64(e[r]);return t.endVector()}},{key:"startZVector",value:function(t,e){t.startVector(8,e,8)}},{key:"addM",value:function(t,e){t.addFieldOffset(3,e,0)}},{key:"createMVector",value:function(t,e){t.startVector(8,e.length,8);for(var r=e.length-1;r>=0;r--)t.addFloat64(e[r]);return t.endVector()}},{key:"startMVector",value:function(t,e){t.startVector(8,e,8)}},{key:"addT",value:function(t,e){t.addFieldOffset(4,e,0)}},{key:"createTVector",value:function(t,e){t.startVector(8,e.length,8);for(var r=e.length-1;r>=0;r--)t.addFloat64(e[r]);return t.endVector()}},{key:"startTVector",value:function(t,e){t.startVector(8,e,8)}},{key:"addTm",value:function(t,e){t.addFieldOffset(5,e,0)}},{key:"createTmVector",value:function(t,e){t.startVector(8,e.length,8);for(var r=e.length-1;r>=0;r--)t.addInt64(e[r]);return t.endVector()}},{key:"startTmVector",value:function(t,e){t.startVector(8,e,8)}},{key:"addType",value:function(t,e){t.addFieldInt8(6,e,eD.Unknown)}},{key:"addParts",value:function(t,e){t.addFieldOffset(7,e,0)}},{key:"createPartsVector",value:function(t,e){t.startVector(4,e.length,4);for(var r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}},{key:"startPartsVector",value:function(t,e){t.startVector(4,e,4)}},{key:"endGeometry",value:function(t){return t.endObject()}},{key:"createGeometry",value:function(e,r,n,o,i,a,s,u,l){return t.startGeometry(e),t.addEnds(e,r),t.addXy(e,n),t.addZ(e,o),t.addM(e,i),t.addT(e,a),t.addTm(e,s),t.addType(e,u),t.addParts(e,l),t.endGeometry(e)}}],(r=[{key:"__init",value:function(t,e){return this.bb_pos=t,this.bb=e,this}},{key:"ends",value:function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readUint32(this.bb.__vector(this.bb_pos+e)+4*t):0}},{key:"endsLength",value:function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"endsArray",value:function(){var t=this.bb.__offset(this.bb_pos,4);return t?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}},{key:"xy",value:function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}},{key:"xyLength",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"xyArray",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}},{key:"z",value:function(t){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}},{key:"zLength",value:function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"zArray",value:function(){var t=this.bb.__offset(this.bb_pos,8);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}},{key:"m",value:function(t){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}},{key:"mLength",value:function(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"mArray",value:function(){var t=this.bb.__offset(this.bb_pos,10);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}},{key:"t",value:function(t){var e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}},{key:"tLength",value:function(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"tArray",value:function(){var t=this.bb.__offset(this.bb_pos,12);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}},{key:"tm",value:function(t){var e=this.bb.__offset(this.bb_pos,14);return e?this.bb.readUint64(this.bb.__vector(this.bb_pos+e)+8*t):BigInt(0)}},{key:"tmLength",value:function(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"type",value:function(){var t=this.bb.__offset(this.bb_pos,16);return t?this.bb.readUint8(this.bb_pos+t):eD.Unknown}},{key:"parts",value:function(e,r){var n=this.bb.__offset(this.bb_pos,18);return n?(r||new t).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*e),this.bb):null}},{key:"partsLength",value:function(){var t=this.bb.__offset(this.bb_pos,18);return t?this.bb.__vector_len(this.bb_pos+t):0}}])&&bD(e.prototype,r),n&&bD(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function SD(t,e){for(var r=[],n=0;n<t.length;n+=2){var o=[t[n],t[n+1]];e&&o.push(e[n>>1]),r.push(o)}return r}function wD(t,e,r){if(!r||0===r.length)return[SD(t,e)];var n,o=0,i=Array.from(r).map(function(e){return t.slice(o,o=e<<1)});return e&&(o=0,n=Array.from(r).map(function(t){return e.slice(o,o=t)})),i.map(function(t,e){return SD(t,n?n[e]:void 0)})}function OD(t,e){var r=e;if(r===eD.Unknown&&(r=t.type()),r===eD.GeometryCollection){for(var n=[],o=0;o<t.partsLength();o++){var i=t.parts(o),a=i.type();n.push(OD(i,a))}return{type:eD[r],geometries:n}}if(r===eD.MultiPolygon){for(var s=[],u=0;u<t.partsLength();u++)s.push(OD(t.parts(u),eD.Polygon));return{type:eD[r],coordinates:s.map(function(t){return t.coordinates})}}var l=function(t,e){var r=t.xyArray(),n=t.zArray();switch(e){case eD.Point:var o=Array.from(r);return n&&o.push(n[0]),o;case eD.MultiPoint:case eD.LineString:return SD(r,n);case eD.MultiLineString:case eD.Polygon:return wD(r,n,t.endsArray())}}(t,r);return{type:eD[r],coordinates:l}}function _D(t){"@babel/helpers - typeof";return(_D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function PD(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ED(n.key),n)}}function ED(t){var e=function(t,e){if("object"!=_D(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=_D(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==_D(e)?e:String(e)}!function(t){t[t.Byte=0]="Byte",t[t.UByte=1]="UByte",t[t.Bool=2]="Bool",t[t.Short=3]="Short",t[t.UShort=4]="UShort",t[t.Int=5]="Int",t[t.UInt=6]="UInt",t[t.Long=7]="Long",t[t.ULong=8]="ULong",t[t.Float=9]="Float",t[t.Double=10]="Double",t[t.String=11]="String",t[t.Json=12]="Json",t[t.DateTime=13]="DateTime",t[t.Binary=14]="Binary"}(mD||(mD={}));var CD=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.bb=null,this.bb_pos=0}var e,r,n;return e=t,n=[{key:"getRootAsColumn",value:function(e,r){return(r||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"getSizePrefixedRootAsColumn",value:function(e,r){return e.setPosition(e.position()+4),(r||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"startColumn",value:function(t){t.startObject(11)}},{key:"addName",value:function(t,e){t.addFieldOffset(0,e,0)}},{key:"addType",value:function(t,e){t.addFieldInt8(1,e,mD.Byte)}},{key:"addTitle",value:function(t,e){t.addFieldOffset(2,e,0)}},{key:"addDescription",value:function(t,e){t.addFieldOffset(3,e,0)}},{key:"addWidth",value:function(t,e){t.addFieldInt32(4,e,-1)}},{key:"addPrecision",value:function(t,e){t.addFieldInt32(5,e,-1)}},{key:"addScale",value:function(t,e){t.addFieldInt32(6,e,-1)}},{key:"addNullable",value:function(t,e){t.addFieldInt8(7,+e,1)}},{key:"addUnique",value:function(t,e){t.addFieldInt8(8,+e,0)}},{key:"addPrimaryKey",value:function(t,e){t.addFieldInt8(9,+e,0)}},{key:"addMetadata",value:function(t,e){t.addFieldOffset(10,e,0)}},{key:"endColumn",value:function(t){var e=t.endObject();return t.requiredField(e,4),e}},{key:"createColumn",value:function(e,r,n,o,i,a,s,u,l,c,f,p){return t.startColumn(e),t.addName(e,r),t.addType(e,n),t.addTitle(e,o),t.addDescription(e,i),t.addWidth(e,a),t.addPrecision(e,s),t.addScale(e,u),t.addNullable(e,l),t.addUnique(e,c),t.addPrimaryKey(e,f),t.addMetadata(e,p),t.endColumn(e)}}],(r=[{key:"__init",value:function(t,e){return this.bb_pos=t,this.bb=e,this}},{key:"name",value:function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"type",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):mD.Byte}},{key:"title",value:function(t){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"description",value:function(t){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"width",value:function(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readInt32(this.bb_pos+t):-1}},{key:"precision",value:function(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readInt32(this.bb_pos+t):-1}},{key:"scale",value:function(){var t=this.bb.__offset(this.bb_pos,16);return t?this.bb.readInt32(this.bb_pos+t):-1}},{key:"nullable",value:function(){var t=this.bb.__offset(this.bb_pos,18);return!t||!!this.bb.readInt8(this.bb_pos+t)}},{key:"unique",value:function(){var t=this.bb.__offset(this.bb_pos,20);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}},{key:"primaryKey",value:function(){var t=this.bb.__offset(this.bb_pos,22);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}},{key:"metadata",value:function(t){var e=this.bb.__offset(this.bb_pos,24);return e?this.bb.__string(this.bb_pos+e,t):null}}])&&PD(e.prototype,r),n&&PD(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function TD(t){"@babel/helpers - typeof";return(TD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jD(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,kD(n.key),n)}}function kD(t){var e=function(t,e){if("object"!=TD(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=TD(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==TD(e)?e:String(e)}var xD=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.bb=null,this.bb_pos=0}var e,r,n;return e=t,n=[{key:"getRootAsFeature",value:function(e,r){return(r||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"getSizePrefixedRootAsFeature",value:function(e,r){return e.setPosition(e.position()+4),(r||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"startFeature",value:function(t){t.startObject(3)}},{key:"addGeometry",value:function(t,e){t.addFieldOffset(0,e,0)}},{key:"addProperties",value:function(t,e){t.addFieldOffset(1,e,0)}},{key:"createPropertiesVector",value:function(t,e){t.startVector(1,e.length,1);for(var r=e.length-1;r>=0;r--)t.addInt8(e[r]);return t.endVector()}},{key:"startPropertiesVector",value:function(t,e){t.startVector(1,e,1)}},{key:"addColumns",value:function(t,e){t.addFieldOffset(2,e,0)}},{key:"createColumnsVector",value:function(t,e){t.startVector(4,e.length,4);for(var r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}},{key:"startColumnsVector",value:function(t,e){t.startVector(4,e,4)}},{key:"endFeature",value:function(t){return t.endObject()}},{key:"finishFeatureBuffer",value:function(t,e){t.finish(e)}},{key:"finishSizePrefixedFeatureBuffer",value:function(t,e){t.finish(e,void 0,!0)}},{key:"createFeature",value:function(e,r,n,o){return t.startFeature(e),t.addGeometry(e,r),t.addProperties(e,n),t.addColumns(e,o),t.endFeature(e)}}],(r=[{key:"__init",value:function(t,e){return this.bb_pos=t,this.bb=e,this}},{key:"geometry",value:function(t){var e=this.bb.__offset(this.bb_pos,4);return e?(t||new gD).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}},{key:"properties",value:function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb.__vector(this.bb_pos+e)+t):0}},{key:"propertiesLength",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"propertiesArray",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}},{key:"columns",value:function(t,e){var r=this.bb.__offset(this.bb_pos,8);return r?(e||new CD).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*t),this.bb):null}},{key:"columnsLength",value:function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}}])&&jD(e.prototype,r),n&&jD(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),AD=(new TextEncoder,new TextDecoder);function ID(t,e){var r={};if(!e||0===e.length)return r;var n=t.propertiesArray();if(!n)return r;for(var o=new DataView(n.buffer,n.byteOffset),i=t.propertiesLength(),a=0;a<i;){var s=o.getUint16(a,!0);a+=2;var u=e[s],l=u.name;switch(u.type){case mD.Bool:r[l]=!!o.getUint8(a),a+=1;break;case mD.Byte:r[l]=o.getInt8(a),a+=1;break;case mD.UByte:r[l]=o.getUint8(a),a+=1;break;case mD.Short:r[l]=o.getInt16(a,!0),a+=2;break;case mD.UShort:r[l]=o.getUint16(a,!0),a+=2;break;case mD.Int:r[l]=o.getInt32(a,!0),a+=4;break;case mD.UInt:r[l]=o.getUint32(a,!0),a+=4;break;case mD.Long:r[l]=Number(o.getBigInt64(a,!0)),a+=8;break;case mD.ULong:r[l]=Number(o.getBigUint64(a,!0)),a+=8;break;case mD.Float:r[l]=o.getFloat32(a,!0),a+=4;break;case mD.Double:r[l]=o.getFloat64(a,!0),a+=8;break;case mD.DateTime:case mD.String:var c=o.getUint32(a,!0);a+=4,r[l]=AD.decode(n.subarray(a,a+c)),a+=c;break;case mD.Json:var f=o.getUint32(a,!0);a+=4;var p=AD.decode(n.subarray(a,a+f));r[l]=JSON.parse(p),a+=f;break;default:throw new Error("Unknown type "+u.type)}}return r}function ND(t,e){var r=e.columns;return{type:"Feature",geometry:OD(t.geometry(),e.geometryType),properties:ID(t,r)}}var RD=new Uint8Array(0);function MD(t){this._source=t,this._array=RD,this._index=0}function LD(t){"@babel/helpers - typeof";return(LD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function BD(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,DD(n.key),n)}}function DD(t){var e=function(t,e){if("object"!=LD(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=LD(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==LD(e)?e:String(e)}MD.prototype.read=function(){var t=this,e=t._array.subarray(t._index);return t._source.read().then(function(r){return t._array=RD,t._index=0,r.done?e.length>0?{done:!1,value:e}:{done:!0,value:void 0}:{done:!1,value:function(t,e){if(!t.length)return e;if(!e.length)return t;var r=new Uint8Array(t.length+e.length);return r.set(t),r.set(e,t.length),r}(e,r.value)}})},MD.prototype.slice=function(t){if((t|=0)<0)throw new Error("invalid length");var e=this,r=this._array.length-this._index;if(this._index+t<=this._array.length)return Promise.resolve(this._array.subarray(this._index,this._index+=t));var n=new Uint8Array(t);return n.set(this._array.subarray(this._index)),function o(){return e._source.read().then(function(i){return i.done?(e._array=RD,e._index=0,r>0?n.subarray(0,r):null):r+i.value.length>=t?(e._array=i.value,e._index=t-r,n.set(i.value.subarray(0,t-r),r),n):(n.set(i.value,r),r+=i.value.length,o())})}()},MD.prototype.cancel=function(){return this._source.cancel()};var FD=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.bb=null,this.bb_pos=0}var e,r,n;return e=t,n=[{key:"getRootAsCrs",value:function(e,r){return(r||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"getSizePrefixedRootAsCrs",value:function(e,r){return e.setPosition(e.position()+4),(r||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"startCrs",value:function(t){t.startObject(6)}},{key:"addOrg",value:function(t,e){t.addFieldOffset(0,e,0)}},{key:"addCode",value:function(t,e){t.addFieldInt32(1,e,0)}},{key:"addName",value:function(t,e){t.addFieldOffset(2,e,0)}},{key:"addDescription",value:function(t,e){t.addFieldOffset(3,e,0)}},{key:"addWkt",value:function(t,e){t.addFieldOffset(4,e,0)}},{key:"addCodeString",value:function(t,e){t.addFieldOffset(5,e,0)}},{key:"endCrs",value:function(t){return t.endObject()}},{key:"createCrs",value:function(e,r,n,o,i,a,s){return t.startCrs(e),t.addOrg(e,r),t.addCode(e,n),t.addName(e,o),t.addDescription(e,i),t.addWkt(e,a),t.addCodeString(e,s),t.endCrs(e)}}],(r=[{key:"__init",value:function(t,e){return this.bb_pos=t,this.bb=e,this}},{key:"org",value:function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"code",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}},{key:"name",value:function(t){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"description",value:function(t){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"wkt",value:function(t){var e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"codeString",value:function(t){var e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__string(this.bb_pos+e,t):null}}])&&BD(e.prototype,r),n&&BD(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function UD(t){"@babel/helpers - typeof";return(UD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function GD(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,VD(n.key),n)}}function VD(t){var e=function(t,e){if("object"!=UD(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=UD(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==UD(e)?e:String(e)}var qD=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.bb=null,this.bb_pos=0}var e,r,n;return e=t,n=[{key:"getRootAsHeader",value:function(e,r){return(r||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"getSizePrefixedRootAsHeader",value:function(e,r){return e.setPosition(e.position()+4),(r||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"startHeader",value:function(t){t.startObject(14)}},{key:"addName",value:function(t,e){t.addFieldOffset(0,e,0)}},{key:"addEnvelope",value:function(t,e){t.addFieldOffset(1,e,0)}},{key:"createEnvelopeVector",value:function(t,e){t.startVector(8,e.length,8);for(var r=e.length-1;r>=0;r--)t.addFloat64(e[r]);return t.endVector()}},{key:"startEnvelopeVector",value:function(t,e){t.startVector(8,e,8)}},{key:"addGeometryType",value:function(t,e){t.addFieldInt8(2,e,eD.Unknown)}},{key:"addHasZ",value:function(t,e){t.addFieldInt8(3,+e,0)}},{key:"addHasM",value:function(t,e){t.addFieldInt8(4,+e,0)}},{key:"addHasT",value:function(t,e){t.addFieldInt8(5,+e,0)}},{key:"addHasTm",value:function(t,e){t.addFieldInt8(6,+e,0)}},{key:"addColumns",value:function(t,e){t.addFieldOffset(7,e,0)}},{key:"createColumnsVector",value:function(t,e){t.startVector(4,e.length,4);for(var r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}},{key:"startColumnsVector",value:function(t,e){t.startVector(4,e,4)}},{key:"addFeaturesCount",value:function(t,e){t.addFieldInt64(8,e,BigInt("0"))}},{key:"addIndexNodeSize",value:function(t,e){t.addFieldInt16(9,e,16)}},{key:"addCrs",value:function(t,e){t.addFieldOffset(10,e,0)}},{key:"addTitle",value:function(t,e){t.addFieldOffset(11,e,0)}},{key:"addDescription",value:function(t,e){t.addFieldOffset(12,e,0)}},{key:"addMetadata",value:function(t,e){t.addFieldOffset(13,e,0)}},{key:"endHeader",value:function(t){return t.endObject()}},{key:"finishHeaderBuffer",value:function(t,e){t.finish(e)}},{key:"finishSizePrefixedHeaderBuffer",value:function(t,e){t.finish(e,void 0,!0)}}],(r=[{key:"__init",value:function(t,e){return this.bb_pos=t,this.bb=e,this}},{key:"name",value:function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"envelope",value:function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}},{key:"envelopeLength",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"envelopeArray",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}},{key:"geometryType",value:function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):eD.Unknown}},{key:"hasZ",value:function(){var t=this.bb.__offset(this.bb_pos,10);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}},{key:"hasM",value:function(){var t=this.bb.__offset(this.bb_pos,12);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}},{key:"hasT",value:function(){var t=this.bb.__offset(this.bb_pos,14);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}},{key:"hasTm",value:function(){var t=this.bb.__offset(this.bb_pos,16);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}},{key:"columns",value:function(t,e){var r=this.bb.__offset(this.bb_pos,18);return r?(e||new CD).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*t),this.bb):null}},{key:"columnsLength",value:function(){var t=this.bb.__offset(this.bb_pos,18);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"featuresCount",value:function(){var t=this.bb.__offset(this.bb_pos,20);return t?this.bb.readUint64(this.bb_pos+t):BigInt("0")}},{key:"indexNodeSize",value:function(){var t=this.bb.__offset(this.bb_pos,22);return t?this.bb.readUint16(this.bb_pos+t):16}},{key:"crs",value:function(t){var e=this.bb.__offset(this.bb_pos,24);return e?(t||new FD).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}},{key:"title",value:function(t){var e=this.bb.__offset(this.bb_pos,26);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"description",value:function(t){var e=this.bb.__offset(this.bb_pos,28);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"metadata",value:function(t){var e=this.bb.__offset(this.bb_pos,30);return e?this.bb.__string(this.bb_pos+e,t):null}}])&&GD(e.prototype,r),n&&GD(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function HD(t){for(var e=qD.getRootAsHeader(t),r=e.featuresCount(),n=e.indexNodeSize(),o=[],i=0;i<e.columnsLength();i++){var a=e.columns(i);if(!a)throw new Error("Column unexpectedly missing");if(!a.name())throw new Error("Column name unexpectedly missing");o.push({name:a.name(),type:a.type(),title:a.title(),description:a.description(),width:a.width(),precision:a.precision(),scale:a.scale(),nullable:a.nullable(),unique:a.unique(),primary_key:a.primaryKey()})}var s=e.crs(),u=s?{org:s.org(),code:s.code(),name:s.name(),description:s.description(),wkt:s.wkt(),code_string:s.codeString()}:null;return{geometryType:e.geometryType(),columns:o,envelope:null,featuresCount:Number(r),indexNodeSize:n,crs:u,title:e.title(),description:e.description(),metadata:e.metadata()}}var zD=function(t,e){return(zD=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function JD(t,e,r,n){return new(r||(r=Promise))(function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(a,s)}u((n=n.apply(t,e||[])).next())})}function WD(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function KD(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function QD(t){return this instanceof QD?(this.v=t,this):new QD(t)}function YD(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,o=r.apply(t,e||[]),i=[];return n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n;function a(t){o[t]&&(n[t]=function(e){return new Promise(function(r,n){i.push([t,e,r,n])>1||s(t,e)})})}function s(t,e){try{(r=o[t](e)).value instanceof QD?Promise.resolve(r.value.v).then(u,l):c(i[0][2],r)}catch(t){c(i[0][3],t)}var r}function u(t){s("next",t)}function l(t){s("throw",t)}function c(t,e){t(e),i.shift(),i.length&&s(i[0][0],i[0][1])}}var XD=function(t){function e(e){var r=t.call(this,e)||this;return Object.defineProperty(r,"name",{value:"RepeaterOverflowError",enumerable:!1}),"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf(r,r.constructor.prototype):r.__proto__=r.constructor.prototype,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(r,r.constructor),r}return function(t,e){function r(){this.constructor=t}zD(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(e,t),e}(Error);(function(){function t(t){if(t<0)throw new RangeError("Capacity may not be less than 0");this._c=t,this._q=[]}Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this._q.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"full",{get:function(){return this._q.length>=this._c},enumerable:!1,configurable:!0}),t.prototype.add=function(t){if(this.full)throw new Error("Buffer full");this._q.push(t)},t.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()}})(),function(){function t(t){if(t<1)throw new RangeError("Capacity may not be less than 1");this._c=t,this._q=[]}Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this._q.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"full",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.add=function(t){for(;this._q.length>=this._c;)this._q.shift();this._q.push(t)},t.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()}}(),function(){function t(t){if(t<1)throw new RangeError("Capacity may not be less than 1");this._c=t,this._q=[]}Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this._q.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"full",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.add=function(t){this._q.length<this._c&&this._q.push(t)},t.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()}}();function ZD(t){null!=t&&"function"==typeof t.then&&t.then(iF,iF)}var $D=0,tF=1,eF=2,rF=3,nF=4,oF=1024,iF=function(){};function aF(t){var e=t.err,r=Promise.resolve(t.execution).then(function(t){if(null!=e)throw e;return t});return t.err=void 0,t.execution=r.then(function(){},function(){}),void 0===t.pending?r:t.pending.then(function(){return r})}function sF(t,e){var r=t.state>=rF;return Promise.resolve(e).then(function(e){return!r&&t.state>=nF?aF(t).then(function(t){return{value:t,done:!0}}):{value:e,done:r}})}function uF(t,e){var r,n;if(!(t.state>=eF))if(t.state=eF,t.onnext(),t.onstop(),null==t.err&&(t.err=e),0!==t.pushes.length||void 0!==t.buffer&&!t.buffer.empty)try{for(var o=KD(t.pushes),i=o.next();!i.done;i=o.next()){i.value.resolve()}}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}else lF(t)}function lF(t){var e,r;if(!(t.state>=rF)){t.state<eF&&uF(t),t.state=rF,t.buffer=void 0;try{for(var n=KD(t.nexts),o=n.next();!o.done;o=n.next()){var i=o.value,a=void 0===t.pending?aF(t):t.pending.then(function(){return aF(t)});i.resolve(sF(t,a))}}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}t.pushes=[],t.nexts=[]}}function cF(t){t.state>=nF||(t.state<rF&&lF(t),t.state=nF)}function fF(t){if(!(t.state>=tF)){t.state=tF;var e=function(t,e){if(ZD(e),t.pushes.length>=oF)throw new XD("No more than "+oF+" pending calls to push are allowed on a single repeater.");if(t.state>=eF)return Promise.resolve(void 0);var r,n=void 0===t.pending?Promise.resolve(e):t.pending.then(function(){return e});n=n.catch(function(e){t.state<eF&&(t.err=e),cF(t)}),t.nexts.length?(t.nexts.shift().resolve(sF(t,n)),r=t.nexts.length?Promise.resolve(t.nexts[0].value):new Promise(function(e){return t.onnext=e})):void 0===t.buffer||t.buffer.full?r=new Promise(function(e){return t.pushes.push({resolve:e,value:n})}):(t.buffer.add(n),r=Promise.resolve(void 0));var o=!0,i={},a=r.catch(function(t){if(o)throw t});return i.then=function(t,e){return o=!1,Promise.prototype.then.call(r,t,e)},i.catch=function(t){return o=!1,Promise.prototype.catch.call(r,t)},i.finally=r.finally.bind(r),t.pending=n.then(function(){return a}).catch(function(e){t.err=e,cF(t)}),i}.bind(null,t),r=function(t){var e=uF.bind(null,t),r=new Promise(function(e){return t.onstop=e});return e.then=r.then.bind(r),e.catch=r.catch.bind(r),e.finally=r.finally.bind(r),e}(t);t.execution=new Promise(function(n){return n(t.executor(e,r))}),t.execution.catch(function(){return uF(t)})}}var pF=new WeakMap,hF=function(){function t(t,e){pF.set(this,{executor:t,buffer:e,err:void 0,state:$D,pushes:[],nexts:[],pending:void 0,execution:void 0,onnext:iF,onstop:iF})}return t.prototype.next=function(t){ZD(t);var e=pF.get(this);if(void 0===e)throw new Error("WeakMap error");if(e.nexts.length>=oF)throw new XD("No more than "+oF+" pending calls to next are allowed on a single repeater.");if(e.state<=$D&&fF(e),e.onnext(t),void 0!==e.buffer&&!e.buffer.empty){var r=sF(e,e.buffer.remove());if(e.pushes.length){var n=e.pushes.shift();e.buffer.add(n.value),e.onnext=n.resolve}return r}if(e.pushes.length){var o=e.pushes.shift();return e.onnext=o.resolve,sF(e,o.value)}return e.state>=eF?(lF(e),sF(e,aF(e))):new Promise(function(r){return e.nexts.push({resolve:r,value:t})})},t.prototype.return=function(t){ZD(t);var e=pF.get(this);if(void 0===e)throw new Error("WeakMap error");return lF(e),e.execution=Promise.resolve(e.execution).then(function(){return t}),sF(e,aF(e))},t.prototype.throw=function(t){var e=pF.get(this);if(void 0===e)throw new Error("WeakMap error");return e.state<=$D||e.state>=eF||void 0!==e.buffer&&!e.buffer.empty?(lF(e),null==e.err&&(e.err=t),sF(e,aF(e))):this.next(Promise.reject(t))},t.prototype[Symbol.asyncIterator]=function(){return this},t.race=dF,t.merge=bF,t.zip=vF,t.latest=mF,t}();function yF(t,e){var r,n,o=[],i=function(t){null!=t&&"function"==typeof t[Symbol.asyncIterator]?o.push(t[Symbol.asyncIterator]()):null!=t&&"function"==typeof t[Symbol.iterator]?o.push(t[Symbol.iterator]()):o.push(function(){return YD(this,arguments,function(){return WD(this,function(r){switch(r.label){case 0:return e.yieldValues?[4,QD(t)]:[3,3];case 1:return[4,r.sent()];case 2:r.sent(),r.label=3;case 3:return e.returnValues?[4,QD(t)]:[3,5];case 4:return[2,r.sent()];case 5:return[2]}})})}())};try{for(var a=KD(t),s=a.next();!s.done;s=a.next()){i(s.value)}}catch(t){r={error:t}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return o}function dF(t){var e=this,r=yF(t,{returnValues:!0});return new hF(function(t,n){return JD(e,void 0,void 0,function(){var e,o,i,a,s,u;return WD(this,function(l){switch(l.label){case 0:if(!r.length)return n(),[2];o=!1,n.then(function(){e(),o=!0}),l.label=1;case 1:l.trys.push([1,,5,7]),a=void 0,s=0,u=function(){var o,u,l,c,f,p;return WD(this,function(h){switch(h.label){case 0:o=s;try{for(f=void 0,u=KD(r),l=u.next();!l.done;l=u.next())c=l.value,Promise.resolve(c.next()).then(function(t){t.done?(n(),void 0===i&&(i=t)):s===o&&(s++,e(t))},function(t){return n(t)})}catch(t){f={error:t}}finally{try{l&&!l.done&&(p=u.return)&&p.call(u)}finally{if(f)throw f.error}}return[4,new Promise(function(t){return e=t})];case 1:return void 0===(a=h.sent())?[3,3]:[4,t(a.value)];case 2:h.sent(),h.label=3;case 3:return[2]}})},l.label=2;case 2:return o?[3,4]:[5,u()];case 3:return l.sent(),[3,2];case 4:return[2,i&&i.value];case 5:return n(),[4,Promise.race(r.map(function(t){return t.return&&t.return()}))];case 6:return l.sent(),[7];case 7:return[2]}})})})}function bF(t){var e=this,r=yF(t,{yieldValues:!0});return new hF(function(t,n){return JD(e,void 0,void 0,function(){var e,o,i,a=this;return WD(this,function(s){switch(s.label){case 0:if(!r.length)return n(),[2];e=[],o=!1,n.then(function(){var t,r;o=!0;try{for(var n=KD(e),i=n.next();!i.done;i=n.next()){(0,i.value)()}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}}),s.label=1;case 1:return s.trys.push([1,,3,4]),[4,Promise.all(r.map(function(r,s){return JD(a,void 0,void 0,function(){var a;return WD(this,function(u){switch(u.label){case 0:u.trys.push([0,,6,9]),u.label=1;case 1:return o?[3,5]:(Promise.resolve(r.next()).then(function(t){return e[s](t)},function(t){return n(t)}),[4,new Promise(function(t){e[s]=t})]);case 2:return void 0===(a=u.sent())?[3,4]:a.done?(i=a,[2]):[4,t(a.value)];case 3:u.sent(),u.label=4;case 4:return[3,1];case 5:return[3,9];case 6:return r.return?[4,r.return()]:[3,8];case 7:u.sent(),u.label=8;case 8:return[7];case 9:return[2]}})})}))];case 2:return s.sent(),[2,i&&i.value];case 3:return n(),[7];case 4:return[2]}})})})}function vF(t){var e=this,r=yF(t,{returnValues:!0});return new hF(function(t,n){return JD(e,void 0,void 0,function(){var e,o,i,a;return WD(this,function(s){switch(s.label){case 0:if(!r.length)return n(),[2,[]];o=!1,n.then(function(){e(),o=!0}),s.label=1;case 1:s.trys.push([1,,6,8]),s.label=2;case 2:return o?[3,5]:(Promise.all(r.map(function(t){return t.next()})).then(function(t){return e(t)},function(t){return n(t)}),[4,new Promise(function(t){return e=t})]);case 3:return void 0===(i=s.sent())?[2]:(a=i.map(function(t){return t.value}),i.some(function(t){return t.done})?[2,a]:[4,t(a)]);case 4:return s.sent(),[3,2];case 5:return[3,8];case 6:return n(),[4,Promise.all(r.map(function(t){return t.return&&t.return()}))];case 7:return s.sent(),[7];case 8:return[2]}})})})}function mF(t){var e=this,r=yF(t,{yieldValues:!0,returnValues:!0});return new hF(function(t,n){return JD(e,void 0,void 0,function(){var e,o,i,a,s,u=this;return WD(this,function(l){switch(l.label){case 0:if(!r.length)return n(),[2,[]];o=[],i=!1,n.then(function(){var t,r;e();try{for(var n=KD(o),a=n.next();!a.done;a=n.next()){(0,a.value)()}}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}i=!0}),l.label=1;case 1:return l.trys.push([1,,5,7]),Promise.all(r.map(function(t){return t.next()})).then(function(t){return e(t)},function(t){return n(t)}),[4,new Promise(function(t){return e=t})];case 2:return void 0===(a=l.sent())?[2]:(s=a.map(function(t){return t.value}),a.every(function(t){return t.done})?[2,s]:[4,t(s.slice())]);case 3:return l.sent(),[4,Promise.all(r.map(function(e,r){return JD(u,void 0,void 0,function(){var u;return WD(this,function(l){switch(l.label){case 0:if(a[r].done)return[2,a[r].value];l.label=1;case 1:return i?[3,4]:(Promise.resolve(e.next()).then(function(t){return o[r](t)},function(t){return n(t)}),[4,new Promise(function(t){return o[r]=t})]);case 2:return void 0===(u=l.sent())?[2,a[r].value]:u.done?[2,u.value]:(s[r]=u.value,[4,t(s.slice())]);case 3:return l.sent(),[3,1];case 4:return[2]}})})}))];case 4:return[2,l.sent()];case 5:return n(),[4,Promise.all(r.map(function(t){return t.return&&t.return()}))];case 6:return l.sent(),[7];case 7:return[2]}})})})}function gF(t){"@babel/helpers - typeof";return(gF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function SF(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,wF(n.key),n)}}function wF(t){var e=function(t,e){if("object"!=gF(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=gF(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==gF(e)?e:String(e)}var OF=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._extraRequestThreshold=262144}var e,r,n;return e=t,(r=[{key:"extraRequestThreshold",value:function(){return this._extraRequestThreshold}},{key:"setExtraRequestThreshold",value:function(t){if(t<0)throw new Error("extraRequestThreshold cannot be negative");this._extraRequestThreshold=t}}])&&SF(e.prototype,r),n&&SF(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();OF.global=new OF;var _F,PF=OF;function EF(t){"@babel/helpers - typeof";return(EF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function CF(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,TF(n.key),n)}}function TF(t){var e=function(t,e){if("object"!=EF(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=EF(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==EF(e)?e:String(e)}!function(t){t[t.Debug=0]="Debug",t[t.Info=1]="Info",t[t.Warn=2]="Warn",t[t.Error=3]="Error"}(_F||(_F={}));var jF=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n;return e=t,n=[{key:"debug",value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];this.log.apply(this,[_F.Debug].concat(e))}},{key:"info",value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];this.log.apply(this,[_F.Info].concat(e))}},{key:"warn",value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];this.log.apply(this,[_F.Warn].concat(e))}},{key:"error",value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];this.log.apply(this,[_F.Error].concat(e))}},{key:"log",value:function(t){if(!(this.logLevel>t)){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];switch(t){case _F.Debug:var o;(o=console).debug.apply(o,r);break;case _F.Info:var i;(i=console).info.apply(i,r);break;case _F.Warn:var a;(a=console).warn.apply(a,r);break;case _F.Error:var s;(s=console).error.apply(s,r)}}}}],(r=null)&&CF(e.prototype,r),n&&CF(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();jF.logLevel=_F.Warn;var kF=jF;function xF(t){"@babel/helpers - typeof";return(xF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function AF(){AF=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new x(n||[]);return o(a,"_invoke",{value:C(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",b={};function v(){}function m(){}function g(){}var S={};l(S,a,function(){return this});var w=Object.getPrototypeOf,O=w&&w(w(A([])));O&&O!==r&&n.call(O,a)&&(S=O);var _=g.prototype=v.prototype=Object.create(S);function P(t){["next","throw","return"].forEach(function(e){l(t,e,function(t){return this._invoke(e,t)})})}function E(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==xF(c)&&n.call(c,"__await")?e.resolve(c.__await).then(function(t){r("next",t,a,s)},function(t){r("throw",t,a,s)}):e.resolve(c).then(function(t){l.value=t,a(l)},function(t){return r("throw",t,a,s)})}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e(function(e,o){r(t,n,e,o)})}return i=i?i.then(o,o):o()}})}function C(e,r,n){var o=p;return function(i,a){if(o===y)throw new Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=T(s,n);if(u){if(u===b)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?d:h,l.arg===b)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=d,n.method="throw",n.arg=l.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,b;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,b):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function A(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(xF(e)+" is not iterable")}return m.prototype=g,o(_,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},P(E.prototype),l(E.prototype,s,function(){return this}),e.AsyncIterator=E,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new E(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},P(_),l(_,u,"Generator"),l(_,a,function(){return this}),l(_,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=A,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:A(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),b}},e}function IF(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return NF(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return NF(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function NF(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function RF(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function MF(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,LF(n.key),n)}}function LF(t){var e=function(t,e){if("object"!=xF(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=xF(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==xF(e)?e:String(e)}function BF(t){var e,r;function n(e,r){try{var i=t[e](r),a=i.value,s=a instanceof DF;Promise.resolve(s?a.v:a).then(function(r){if(s){var u="return"===e?"return":"next";if(!a.k||r.done)return n(u,r);r=t[u](r).value}o(i.done?"return":"normal",r)},function(t){n("throw",t)})}catch(t){o("throw",t)}}function o(t,o){switch(t){case"return":e.resolve({value:o,done:!0});break;case"throw":e.reject(o);break;default:e.resolve({value:o,done:!1})}(e=e.next)?n(e.key,e.arg):r=null}this._invoke=function(t,o){return new Promise(function(i,a){var s={key:t,arg:o,resolve:i,reject:a,next:null};r?r=r.next=s:(e=r=s,n(t,o))})},"function"!=typeof t.return&&(this.return=void 0)}function DF(t,e){this.v=t,this.k=e}BF.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},BF.prototype.next=function(t){return this._invoke("next",t)},BF.prototype.throw=function(t){return this._invoke("throw",t)},BF.prototype.return=function(t){return this._invoke("return",t)};var FF=40;function UF(t,e){e=Math.min(Math.max(+e,2),65535);var r=t,n=r;do{n+=r=Math.ceil(r/e)}while(1!==r);return n*FF}function GF(t,e){if(e<2)throw new Error("Node size must be at least 2");if(0===t)throw new Error("Number of items must be greater than 0");var r=t,n=r,o=[r];do{n+=r=Math.ceil(r/e),o.push(r)}while(1!==r);var i=[];r=n;for(var a=0,s=o;a<s.length;a++){var u=s[a];i.push(r-u),r-=u}for(var l=[],c=0;c<o.length;c++)l.push([i[c],i[c]+o[c]]);return l}function VF(t,e,r,n){return qF.apply(this,arguments)}function qF(){var t;return t=AF().mark(function t(e,r,n,o){var i,a,s,u,l,c,f,p,h,y;return AF().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i=function(){function t(e,r){RF(this,t),this._level=r,this.nodes=e}var e,r,n;return e=t,(r=[{key:"level",value:function(){return this._level}},{key:"startNodeIdx",value:function(){return this.nodes[0]}},{key:"endNodeIdx",value:function(){return this.nodes[1]}},{key:"extendEndNodeIdx",value:function(t){console.assert(t>this.nodes[1]),this.nodes[1]=t}},{key:"toString",value:function(){return"[NodeRange level: ".concat(this._level,", nodes: ").concat(this.nodes[0],"-").concat(this.nodes[1],"]")}}])&&MF(e.prototype,r),n&&MF(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),a=n.minX,s=n.minY,u=n.maxX,l=n.maxY,kF.info("tree items: ".concat(e,", nodeSize: ").concat(r)),c=GF(e,r),f=c[0][0],void 0,d=c.length-1,p=new i([0,1],d),h=[p],kF.debug("starting stream search with queue: ".concat(h,", numItems: ").concat(e,", nodeSize: ").concat(r,", levelBounds: ").concat(c)),y=AF().mark(function t(){var n,p,y,d,b,v,m,g,S;return AF().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=h.shift(),kF.debug("popped node: ".concat(n,", queueLength: ").concat(h.length)),p=n.startNodeIdx(),y=p>=f,d=function(){var t=IF(c[n.level()],2)[1],e=Math.min(n.endNodeIdx()+r,t);return y&&e<t?e+1:e}(),b=d-p,t.next=8,new DF(o(p*FF,b*FF),0);case 8:v=t.sent,m=new DataView(v),g=AF().mark(function t(r){var o,c,d,b,v,g,S,w,O,_;return AF().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(c=(o=r-p)*FF,!(u<m.getFloat64(c+0,!0))){t.next=4;break}return t.abrupt("return",0);case 4:if(!(l<m.getFloat64(c+8,!0))){t.next=6;break}return t.abrupt("return",0);case 6:if(!(a>m.getFloat64(c+16,!0))){t.next=8;break}return t.abrupt("return",0);case 8:if(!(s>m.getFloat64(c+24,!0))){t.next=10;break}return t.abrupt("return",0);case 10:if(d=m.getBigUint64(c+32,!0),!y){t.next=18;break}return b=d,v=function(){if(r<e-1){var t=(o+1)*FF;return m.getBigUint64(t+32,!0)-b}return null}(),g=r-f,t.next=17,[Number(b),g,Number(v)];case 17:return t.abrupt("return",0);case 18:if(S=d,w=PF.global.extraRequestThreshold()/FF,!(void 0!==(O=h[h.length-1])&&O.level()==n.level()-1&&S<O.endNodeIdx()+w)){t.next=25;break}return kF.debug('Merging "nodeRange" request into existing range: '.concat(O,", newEndNodeIdx: ").concat(O.endNodeIdx()," -> ").concat(S)),O.extendEndNodeIdx(Number(S)),t.abrupt("return",0);case 25:void 0,void 0,P=n.level()-1,E=[Number(S),Number(S)+1],_=new i(E,P),void 0!==O&&O.level()==_.level()?kF.info("Same level, but too far away. Pushing new request for nodeIdx: ".concat(S," rather than merging with distant ").concat(O)):kF.info("Pushing new level for ".concat(_," onto queue with nearestNodeRange: ").concat(O," since there's not already a range for this level.")),h.push(_);case 28:case"end":return t.stop()}var P,E},t)}),S=p;case 12:if(!(S<d)){t.next=20;break}return t.delegateYield(g(S),"t0",14);case 14:if(0!==t.t0){t.next=17;break}return t.abrupt("continue",17);case 17:S++,t.next=12;break;case 20:case"end":return t.stop()}},t)});case 9:if(0==h.length){t.next=13;break}return t.delegateYield(y(),"t0",11);case 11:t.next=9;break;case 13:case"end":return t.stop()}var d},t)}),(qF=function(){return new BF(t.apply(this,arguments))}).apply(this,arguments)}var HF=new Uint8Array([102,103,98,3,102,103,98,0]),zF=4;function JF(t){"@babel/helpers - typeof";return(JF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function WF(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=QF(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function KF(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||QF(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function QF(t,e){if(t){if("string"==typeof t)return YF(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?YF(t,e):void 0}}function YF(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function XF(){XF=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new x(n||[]);return o(a,"_invoke",{value:C(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",b={};function v(){}function m(){}function g(){}var S={};l(S,a,function(){return this});var w=Object.getPrototypeOf,O=w&&w(w(A([])));O&&O!==r&&n.call(O,a)&&(S=O);var _=g.prototype=v.prototype=Object.create(S);function P(t){["next","throw","return"].forEach(function(e){l(t,e,function(t){return this._invoke(e,t)})})}function E(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==JF(c)&&n.call(c,"__await")?e.resolve(c.__await).then(function(t){r("next",t,a,s)},function(t){r("throw",t,a,s)}):e.resolve(c).then(function(t){l.value=t,a(l)},function(t){return r("throw",t,a,s)})}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e(function(e,o){r(t,n,e,o)})}return i=i?i.then(o,o):o()}})}function C(e,r,n){var o=p;return function(i,a){if(o===y)throw new Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=T(s,n);if(u){if(u===b)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?d:h,l.arg===b)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=d,n.method="throw",n.arg=l.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,b;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,b):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function A(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(JF(e)+" is not iterable")}return m.prototype=g,o(_,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},P(E.prototype),l(E.prototype,s,function(){return this}),e.AsyncIterator=E,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new E(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},P(_),l(_,u,"Generator"),l(_,a,function(){return this}),l(_,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=A,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:A(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),b}},e}function ZF(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function $F(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){ZF(i,n,o,a,s,"next",t)}function s(t){ZF(i,n,o,a,s,"throw",t)}a(void 0)})}}function tU(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function eU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,nU(n.key),n)}}function rU(t,e,r){return e&&eU(t.prototype,e),r&&eU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function nU(t){var e=function(t,e){if("object"!=JF(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=JF(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==JF(e)?e:String(e)}function oU(t){return function(){return new iU(t.apply(this,arguments))}}function iU(t){var e,r;function n(e,r){try{var i=t[e](r),a=i.value,s=a instanceof uU;Promise.resolve(s?a.v:a).then(function(r){if(s){var u="return"===e?"return":"next";if(!a.k||r.done)return n(u,r);r=t[u](r).value}o(i.done?"return":"normal",r)},function(t){n("throw",t)})}catch(t){o("throw",t)}}function o(t,o){switch(t){case"return":e.resolve({value:o,done:!0});break;case"throw":e.reject(o);break;default:e.resolve({value:o,done:!1})}(e=e.next)?n(e.key,e.arg):r=null}this._invoke=function(t,o){return new Promise(function(i,a){var s={key:t,arg:o,resolve:i,reject:a,next:null};r?r=r.next=s:(e=r=s,n(t,o))})},"function"!=typeof t.return&&(this.return=void 0)}function aU(t){return new uU(t,0)}function sU(t){var e={},r=!1;function n(e,n){return r=!0,{done:!1,value:new uU(n=new Promise(function(r){r(t[e](n))}),1)}}return e["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},e.next=function(t){return r?(r=!1,t):n("next",t)},"function"==typeof t.throw&&(e.throw=function(t){if(r)throw r=!1,t;return n("throw",t)}),"function"==typeof t.return&&(e.return=function(t){return r?(r=!1,t):n("return",t)}),e}function uU(t,e){this.v=t,this.k=e}function lU(t){var e,r,n,o=2;for("undefined"!=typeof Symbol&&(r=Symbol.asyncIterator,n=Symbol.iterator);o--;){if(r&&null!=(e=t[r]))return e.call(t);if(n&&null!=(e=t[n]))return new cU(e.call(t));r="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function cU(t){function e(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var e=t.done;return Promise.resolve(t.value).then(function(t){return{value:t,done:e}})}return(cU=function(t){this.s=t,this.n=t.next}).prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(t){var r=this.s.return;return void 0===r?Promise.resolve({value:t,done:!0}):e(r.apply(this.s,arguments))},throw:function(t){var r=this.s.return;return void 0===r?Promise.reject(t):e(r.apply(this.s,arguments))}},new cU(t)}iU.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},iU.prototype.next=function(t){return this._invoke("next",t)},iU.prototype.throw=function(t){return this._invoke("throw",t)},iU.prototype.return=function(t){return this._invoke("return",t)};var fU=function(){function t(e,r,n,o,i){tU(this,t),this.headerClient=e,this.header=r,this.headerLength=n,this.indexLength=o,this.nocache=i}return rU(t,[{key:"selectBbox",value:function(t){var e=this;return oU(XF().mark(function r(){var n,o,i,a,s,u,l,c,f,p,h,y,d,b,v,m,g,S;return XF().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:n=e.lengthBeforeTree(),o=e.headerClient,i=function(){var t=$F(XF().mark(function t(e,r){var i;return XF().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=0,t.abrupt("return",o.getRange(n+e,r,i,"index"));case 2:case"end":return t.stop()}},t)}));return function(e,r){return t.apply(this,arguments)}}(),a=[],s=[],u=!1,l=!1,r.prev=7,f=lU(VF(e.header.featuresCount,e.header.indexNodeSize,t,i));case 9:return r.next=11,aU(f.next());case 11:if(!(u=!(p=r.sent).done)){r.next=26;break}if(h=p.value,y=KF(h,2),d=y[0],b=KF(h,3),(v=b[2])||(kF.info("final feature"),v=4),0!=s.length){r.next=19;break}return s.push([d,v]),r.abrupt("continue",23);case 19:m=s[s.length-1],(g=d-(m[0]+m[1]))>PF.global.extraRequestThreshold()&&(kF.info("Pushing new feature batch, since gap ".concat(g," was too large")),a.push(s),s=[]),s.push([d,v]);case 23:u=!1,r.next=9;break;case 26:r.next=32;break;case 28:r.prev=28,r.t0=r.catch(7),l=!0,c=r.t0;case 32:if(r.prev=32,r.prev=33,!u||null==f.return){r.next=37;break}return r.next=37,aU(f.return());case 37:if(r.prev=37,!l){r.next=40;break}throw c;case 40:return r.finish(37);case 41:return r.finish(32);case 42:return e.headerClient.logUsage("header+index"),s.length>0&&a.push(s),S=a.flatMap(function(t){return e.readFeatureBatch(t,e.nocache)}),r.delegateYield(sU(lU(hF.merge(S))),"t1",46);case 46:case"end":return r.stop()}},r,null,[[7,28,32,42],[33,,37,41]])}))()}},{key:"lengthBeforeTree",value:function(){return HF.length+zF+this.headerLength}},{key:"lengthBeforeFeatures",value:function(){return this.lengthBeforeTree()+this.indexLength}},{key:"buildFeatureClient",value:function(t){return new pU(this.headerClient.httpClient,t)}},{key:"readFeatureBatch",value:function(t,e){var r=this;return oU(XF().mark(function n(){var o,i,a,s,u,l,c,f,p,h,y,d;return XF().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:o=KF(t[0],1),i=o[0],a=KF(t[t.length-1],2),s=a[0],u=a[1],l=s+u-i,c=r.buildFeatureClient(e),f=l,p=WF(t),n.prev=8,p.s();case 10:if((h=p.n()).done){n.next=19;break}return y=KF(h.value,1),d=y[0],n.next=14,aU(r.readFeature(c,d,f));case 14:return n.next=16,n.sent;case 16:f=0;case 17:n.next=10;break;case 19:n.next=24;break;case 21:n.prev=21,n.t0=n.catch(8),p.e(n.t0);case 24:return n.prev=24,p.f(),n.finish(24);case 27:c.logUsage("feature");case 28:case"end":return n.stop()}},n,null,[[8,21,24,27]])}))()}},{key:"readFeature",value:function(){var t=$F(XF().mark(function t(e,r,n){var o,i,a,s,u,l,c;return XF().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=r+this.lengthBeforeFeatures(),t.next=3,e.getRange(o,4,n,"feature length");case 3:return a=t.sent,i=new DataView(a).getUint32(0,!0),t.next=7,e.getRange(o+4,i,n,"feature data");case 7:return s=t.sent,u=new Uint8Array(s),(l=new Uint8Array(i+zF)).set(u,zF),(c=new yD(l)).setPosition(zF),t.abrupt("return",xD.getRootAsFeature(c));case 14:case"end":return t.stop()}},t,this)}));return function(e,r,n){return t.apply(this,arguments)}}()}],[{key:"open",value:function(){var e=$F(XF().mark(function e(r,n){var o,i,a,s,u,l,c,f,p,h,y;return XF().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=2024,i=new pU(r,n),a=function(){var t,e=0;for(t=0;t<3;t++){e+=Math.pow(16,t)*FF}return e}(),s=o+a,kF.debug("fetching header. minReqLength: ".concat(s," (assumedHeaderLength: ").concat(o,", assumedIndexLength: ").concat(a,")")),e.t0=Uint8Array,e.next=8,i.getRange(0,8,s,"header");case 8:if(e.t1=e.sent,(u=new e.t0(e.t1)).subarray(0,3).every(function(t,e){return HF[e]===t})){e.next=13;break}throw kF.error("bytes: ".concat(u," != ").concat(HF)),new Error("Not a FlatGeobuf file");case 13:return kF.debug("magic bytes look good"),e.next=16,i.getRange(8,4,s,"header");case 16:if(c=e.sent,!((l=new DataView(c).getUint32(0,!0))>10485760||l<8)){e.next=21;break}throw new Error("Invalid header size");case 21:return kF.debug("headerLength: ".concat(l)),e.next=24,i.getRange(12,l,s,"header");case 24:return f=e.sent,p=new yD(new Uint8Array(f)),h=HD(p),y=UF(h.featuresCount,h.indexNodeSize),kF.debug("completed: opening http reader"),e.abrupt("return",new t(i,h,l,y,n));case 30:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}()}]),t}(),pU=function(){function t(e,r){if(tU(this,t),this.bytesEverUsed=0,this.bytesEverFetched=0,this.buffer=new ArrayBuffer(0),this.head=0,"string"==typeof e)this.httpClient=new hU(e,r);else{if(!(e instanceof hU))throw new Error("Unknown source ");this.httpClient=e}}return rU(t,[{key:"getRange",value:function(){var t=$F(XF().mark(function t(e,r,n,o){var i,a,s;return XF().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.bytesEverUsed+=r,i=e-this.head,a=i+r,!(i>=0&&a<=this.buffer.byteLength)){t.next=5;break}return t.abrupt("return",this.buffer.slice(i,a));case 5:return s=Math.max(r,n),this.bytesEverFetched+=s,kF.debug("requesting for new Range: ".concat(e,"-").concat(e+s-1)),t.next=10,this.httpClient.getRange(e,s,o);case 10:return this.buffer=t.sent,this.head=e,t.abrupt("return",this.buffer.slice(0,r));case 13:case"end":return t.stop()}},t,this)}));return function(e,r,n,o){return t.apply(this,arguments)}}()},{key:"logUsage",value:function(t){var e=t.split(" ")[0],r=this.bytesEverUsed,n=this.bytesEverFetched,o=(100*r/n).toFixed(2);kF.info("".concat(e," bytes used/requested: ").concat(r," / ").concat(n," = ").concat(o,"%"))}}]),t}(),hU=function(){function t(e,r){tU(this,t),this.requestsEverMade=0,this.bytesEverRequested=0,this.url=e,this.nocache=r}return rU(t,[{key:"getRange",value:function(){var t=$F(XF().mark(function t(e,r,n){var o,i,a;return XF().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.requestsEverMade+=1,this.bytesEverRequested+=r,o="bytes=".concat(e,"-").concat(e+r-1),kF.info("request: #".concat(this.requestsEverMade,", purpose: ").concat(n,"), bytes: (this_request: ").concat(r,", ever: ").concat(this.bytesEverRequested,"), Range: ").concat(o)),i={Range:o},this.nocache&&(i["Cache-Control"]="no-cache, no-store"),t.next=8,fetch(this.url,{headers:i});case 8:return a=t.sent,t.abrupt("return",a.arrayBuffer());case 10:case"end":return t.stop()}},t,this)}));return function(e,r,n){return t.apply(this,arguments)}}()}]),t}();function yU(t){"@babel/helpers - typeof";return(yU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dU(){dU=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new x(n||[]);return o(a,"_invoke",{value:C(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",b={};function v(){}function m(){}function g(){}var S={};l(S,a,function(){return this});var w=Object.getPrototypeOf,O=w&&w(w(A([])));O&&O!==r&&n.call(O,a)&&(S=O);var _=g.prototype=v.prototype=Object.create(S);function P(t){["next","throw","return"].forEach(function(e){l(t,e,function(t){return this._invoke(e,t)})})}function E(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==yU(c)&&n.call(c,"__await")?e.resolve(c.__await).then(function(t){r("next",t,a,s)},function(t){r("throw",t,a,s)}):e.resolve(c).then(function(t){l.value=t,a(l)},function(t){return r("throw",t,a,s)})}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e(function(e,o){r(t,n,e,o)})}return i=i?i.then(o,o):o()}})}function C(e,r,n){var o=p;return function(i,a){if(o===y)throw new Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=T(s,n);if(u){if(u===b)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?d:h,l.arg===b)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=d,n.method="throw",n.arg=l.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,b;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,b):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function A(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(yU(e)+" is not iterable")}return m.prototype=g,o(_,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},P(E.prototype),l(E.prototype,s,function(){return this}),e.AsyncIterator=E,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new E(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},P(_),l(_,u,"Generator"),l(_,a,function(){return this}),l(_,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=A,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:A(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),b}},e}function bU(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function vU(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){bU(i,n,o,a,s,"next",t)}function s(t){bU(i,n,o,a,s,"throw",t)}a(void 0)})}}function mU(t){var e,r,n,o=2;for("undefined"!=typeof Symbol&&(r=Symbol.asyncIterator,n=Symbol.iterator);o--;){if(r&&null!=(e=t[r]))return e.call(t);if(n&&null!=(e=t[n]))return new gU(e.call(t));r="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function gU(t){function e(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var e=t.done;return Promise.resolve(t.value).then(function(t){return{value:t,done:e}})}return(gU=function(t){this.s=t,this.n=t.next}).prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(t){var r=this.s.return;return void 0===r?Promise.resolve({value:t,done:!0}):e(r.apply(this.s,arguments))},throw:function(t){var r=this.s.return;return void 0===r?Promise.reject(t):e(r.apply(this.s,arguments))}},new gU(t)}function SU(t){return new _U(t,0)}function wU(t){return function(){return new OU(t.apply(this,arguments))}}function OU(t){var e,r;function n(e,r){try{var i=t[e](r),a=i.value,s=a instanceof _U;Promise.resolve(s?a.v:a).then(function(r){if(s){var u="return"===e?"return":"next";if(!a.k||r.done)return n(u,r);r=t[u](r).value}o(i.done?"return":"normal",r)},function(t){n("throw",t)})}catch(t){o("throw",t)}}function o(t,o){switch(t){case"return":e.resolve({value:o,done:!0});break;case"throw":e.reject(o);break;default:e.resolve({value:o,done:!1})}(e=e.next)?n(e.key,e.arg):r=null}this._invoke=function(t,o){return new Promise(function(i,a){var s={key:t,arg:o,resolve:i,reject:a,next:null};r?r=r.next=s:(e=r=s,n(t,o))})},"function"!=typeof t.return&&(this.return=void 0)}function _U(t,e){this.v=t,this.k=e}function PU(){return(PU=wU(dU().mark(function t(e,r,n){var o,i,a,s,u,l,c,f,p,h;return dU().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o="function"==typeof(y=e).slice?y:new MD("function"==typeof y.read?y:y.getReader()),i=function(){var t=vU(dU().mark(function t(e){return dU().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.slice(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),t.t0=Uint8Array,t.next=5,SU(i(8,"magic bytes"));case 5:if(t.t1=t.sent,(a=new t.t0(t.t1)).subarray(0,3).every(function(t,e){return HF[e]===t})){t.next=9;break}throw new Error("Not a FlatGeobuf file");case 9:return t.t2=Uint8Array,t.next=12,SU(i(4,"header length"));case 12:return t.t3=t.sent,a=new t.t2(t.t3),s=new yD(a),u=s.readUint32(0),t.t4=Uint8Array,t.next=19,SU(i(u,"header data"));case 19:if(t.t5=t.sent,a=new t.t4(t.t5),s=new yD(a),l=HD(s),n&&n(l),c=l.indexNodeSize,f=l.featuresCount,!(c>0)){t.next=29;break}return p=UF(f,c),t.next=29,SU(i(p,"entire index, w/o rect"));case 29:return t.next=31,SU(CU(i,l,r));case 31:if(!(h=t.sent)){t.next=36;break}return t.next=34,h;case 34:t.next=29;break;case 36:case"end":return t.stop()}var y},t)}))).apply(this,arguments)}function EU(){return(EU=wU(function(t,e,r,n){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return dU().mark(function i(){var a,s,u,l,c,f,p;return dU().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,SU(fU.open(t,o));case 2:a=i.sent,kF.debug("opened reader"),n&&n(a.header),s=!1,u=!1,i.prev=7,c=mU(a.selectBbox(e));case 9:return i.next=11,SU(c.next());case 11:if(!(s=!(f=i.sent).done)){i.next=18;break}return p=f.value,i.next=15,r(p,a.header);case 15:s=!1,i.next=9;break;case 18:i.next=24;break;case 20:i.prev=20,i.t0=i.catch(7),u=!0,l=i.t0;case 24:if(i.prev=24,i.prev=25,!s||null==c.return){i.next=29;break}return i.next=29,SU(c.return());case 29:if(i.prev=29,!u){i.next=32;break}throw l;case 32:return i.finish(29);case 33:return i.finish(24);case 34:case"end":return i.stop()}},i,null,[[7,20,24,34],[25,,29,33]])})()})).apply(this,arguments)}function CU(t,e,r){return TU.apply(this,arguments)}function TU(){return(TU=vU(dU().mark(function t(e,r,n){var o,i,a,s,u;return dU().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Uint8Array,t.next=3,e(4,"feature length");case 3:if(t.t1=t.sent,0!==(o=new t.t0(t.t1)).byteLength){t.next=7;break}return t.abrupt("return");case 7:return i=new yD(o),a=i.readUint32(0),t.t2=Uint8Array,t.next=12,e(a,"feature data");case 12:return t.t3=t.sent,o=new t.t2(t.t3),(s=new Uint8Array(a+4)).set(o,4),(i=new yD(s)).setPosition(zF),u=xD.getRootAsFeature(i),t.abrupt("return",n(u,r));case 20:case"end":return t.stop()}},t)}))).apply(this,arguments)}function jU(t,e){return{type:"FeatureCollection",features:function(t,e,r){if(!t.subarray(0,3).every(function(t,e){return HF[e]===t}))throw new Error("Not a FlatGeobuf file");var n=new yD(t),o=n.readUint32(HF.length);n.setPosition(HF.length+zF);var i=HD(n);r&&r(i);var a=HF.length+zF+o,s=i.indexNodeSize,u=i.featuresCount;s>0&&(a+=UF(u,s));for(var l=[];a<n.capacity();){var c=n.readUint32(a);n.setPosition(a+zF);var f=xD.getRootAsFeature(n);l.push(e(f,i)),a+=zF+c}return l}(t,ND,e)}}function kU(t,e){return function(t,e,r){return PU.apply(this,arguments)}(t,ND,e)}function xU(t,e,r){return function(t,e,r,n){return EU.apply(this,arguments)}(t,e,ND,r,arguments.length>3&&void 0!==arguments[3]&&arguments[3])}function AU(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return t instanceof Uint8Array?jU(t,r):t instanceof ReadableStream?kU(t,r):xU(t,e,r,n)}OU.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},OU.prototype.next=function(t){return this._invoke("next",t)},OU.prototype.throw=function(t){return this._invoke("throw",t)},OU.prototype.return=function(t){return this._invoke("return",t)};var IU=r(833),NU=r.n(IU);function RU(t){"@babel/helpers - typeof";return(RU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function MU(){MU=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new x(n||[]);return o(a,"_invoke",{value:C(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",b={};function v(){}function m(){}function g(){}var S={};l(S,a,function(){return this});var w=Object.getPrototypeOf,O=w&&w(w(A([])));O&&O!==r&&n.call(O,a)&&(S=O);var _=g.prototype=v.prototype=Object.create(S);function P(t){["next","throw","return"].forEach(function(e){l(t,e,function(t){return this._invoke(e,t)})})}function E(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==RU(c)&&n.call(c,"__await")?e.resolve(c.__await).then(function(t){r("next",t,a,s)},function(t){r("throw",t,a,s)}):e.resolve(c).then(function(t){l.value=t,a(l)},function(t){return r("throw",t,a,s)})}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e(function(e,o){r(t,n,e,o)})}return i=i?i.then(o,o):o()}})}function C(e,r,n){var o=p;return function(i,a){if(o===y)throw new Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=T(s,n);if(u){if(u===b)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?d:h,l.arg===b)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=d,n.method="throw",n.arg=l.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,b;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,b):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function A(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(RU(e)+" is not iterable")}return m.prototype=g,o(_,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},P(E.prototype),l(E.prototype,s,function(){return this}),e.AsyncIterator=E,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new E(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},P(_),l(_,u,"Generator"),l(_,a,function(){return this}),l(_,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=A,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:A(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),b}},e}function LU(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function BU(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){LU(i,n,o,a,s,"next",t)}function s(t){LU(i,n,o,a,s,"throw",t)}a(void 0)})}}function DU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,FU(n.key),n)}}function FU(t){var e=function(t,e){if("object"!=RU(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=RU(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==RU(e)?e:String(e)}function UU(t){var e,r,n,o=2;for("undefined"!=typeof Symbol&&(r=Symbol.asyncIterator,n=Symbol.iterator);o--;){if(r&&null!=(e=t[r]))return e.call(t);if(n&&null!=(e=t[n]))return new GU(e.call(t));r="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function GU(t){function e(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var e=t.done;return Promise.resolve(t.value).then(function(t){return{value:t,done:e}})}return(GU=function(t){this.s=t,this.n=t.next}).prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(t){var r=this.s.return;return void 0===r?Promise.resolve({value:t,done:!0}):e(r.apply(this.s,arguments))},throw:function(t){var r=this.s.return;return void 0===r?Promise.reject(t):e(r.apply(this.s,arguments))}},new GU(t)}var VU={1:"circle",2:"line",3:"fill",5:"line",4:"circle",6:"fill",MultiPolygon:"fill",Point:"circle",MultiLineString:"line",MultiPoint:"circle",LineString:"line",Polygon:"fill"},qU=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e.layerID?e.layerID:V.createUniqueID("FGBLayer_"),this.layerId=this.id+"outer",this.sourceId=this.layerId,this.options=e,this.strategy=e.strategy||"bbox",this.url=e.url,this.layerType="",this.extent=e.extent,this.init()}var e,r,n;return e=t,(r=[{key:"init",value:function(){"bbox"===this.strategy&&(this.loadedExtentsRtree_=new(NU()))}},{key:"iterateFeatures",value:function(){var t=BU(MU().mark(function t(e){var r,n,o,i,a,s,u;return MU().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r={type:"FeatureCollection",features:[]},n=!1,o=!1,t.prev=3,a=UU(e);case 5:return t.next=7,a.next();case 7:if(!(n=!(s=t.sent).done)){t.next=15;break}u=s.value,this.options.featureLoader&&"function"==typeof this.options.featureLoader&&(u=this.options.featureLoader(u)),this.layerType||(this.layerType=VU[u.geometry.type]),r.features.push(u);case 12:n=!1,t.next=5;break;case 15:t.next=21;break;case 17:t.prev=17,t.t0=t.catch(3),o=!0,i=t.t0;case 21:if(t.prev=21,t.prev=22,!n||null==a.return){t.next=26;break}return t.next=26,a.return();case 26:if(t.prev=26,!o){t.next=29;break}throw i;case 29:return t.finish(26);case 30:return t.finish(21);case 31:return t.abrupt("return",r);case 32:case"end":return t.stop()}},t,this,[[3,17,21,31],[22,,26,30]])}));return function(e){return t.apply(this,arguments)}}()},{key:"_loadData",value:function(){var t=BU(MU().mark(function t(e){var r,n,o=this;return MU().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]},e.length){t.next=7;break}return t.next=4,this._getStream(this.url);case 4:r=t.sent,t.next=9;break;case 7:n.value={extent:e.slice()},this.loadedExtentsRtree_.insert(n);case 9:return t.next=11,AU(r&&r.body||this.url,n,function(t){o.layerType=VU[t.geometryType]});case 11:return t.abrupt("return",t.sent);case 12:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"_getStream",value:function(){var t=BU(MU().mark(function t(e){return MU().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Dn.get(e,{},{withoutFormatSuffix:!0}).then(function(t){return t});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},{key:"_containsExtent",value:function(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}},{key:"_getInExtent",value:function(t){var e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.loadedExtentsRtree_.search(e).map(function(t){return t.value})}},{key:"_forEachInExtent",value:function(t,e){return this._forEach(this._getInExtent(t),e)}},{key:"_forEach",value:function(t,e){for(var r,n=0,o=t.length;n<o;n++)if(r=e(t[n]))return r;return r}}])&&DU(e.prototype,r),n&&DU(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function HU(t){"@babel/helpers - typeof";return(HU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zU(){zU=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new x(n||[]);return o(a,"_invoke",{value:C(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",b={};function v(){}function m(){}function g(){}var S={};l(S,a,function(){return this});var w=Object.getPrototypeOf,O=w&&w(w(A([])));O&&O!==r&&n.call(O,a)&&(S=O);var _=g.prototype=v.prototype=Object.create(S);function P(t){["next","throw","return"].forEach(function(e){l(t,e,function(t){return this._invoke(e,t)})})}function E(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==HU(c)&&n.call(c,"__await")?e.resolve(c.__await).then(function(t){r("next",t,a,s)},function(t){r("throw",t,a,s)}):e.resolve(c).then(function(t){l.value=t,a(l)},function(t){return r("throw",t,a,s)})}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e(function(e,o){r(t,n,e,o)})}return i=i?i.then(o,o):o()}})}function C(e,r,n){var o=p;return function(i,a){if(o===y)throw new Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=T(s,n);if(u){if(u===b)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?d:h,l.arg===b)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=d,n.method="throw",n.arg=l.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,b;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,b):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function A(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(HU(e)+" is not iterable")}return m.prototype=g,o(_,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},P(E.prototype),l(E.prototype,s,function(){return this}),e.AsyncIterator=E,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new E(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},P(_),l(_,u,"Generator"),l(_,a,function(){return this}),l(_,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=A,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:A(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),b}},e}function JU(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function WU(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){JU(i,n,o,a,s,"next",t)}function s(t){JU(i,n,o,a,s,"throw",t)}a(void 0)})}}function KU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,QU(n.key),n)}}function QU(t){var e=function(t,e){if("object"!=HU(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=HU(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==HU(e)?e:String(e)}var YU={circle:{"circle-radius":6,"circle-color":"#3fb1e3","circle-opacity":1,"circle-blur":0,"circle-translate":[0,0],"circle-stroke-width":0,"circle-stroke-color":"#000","circle-stroke-opacity":1},line:{"line-opacity":1,"line-color":"#3fb1e3","line-width":3,"line-blur":1},fill:{"fill-opacity":.8,"fill-color":"#3fb1e3","fill-translate":[0,0],"fill-antialias":!0,"fill-outline-color":"#3fb1e3"}},XU=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e.layerID?e.layerID:V.createUniqueID("FGBLayer_"),this.layerId=this.id+"outer",this.sourceId=this.layerId,this.options=e,this.strategy=e.strategy||"bbox",this.url=e.url,this.layerType="",this.type="custom",this.renderingMode="3d",this.overlay=!0,this.extent=e.extent,this._updateFeaturesFn=this._updateFeatures.bind(this)}var e,r,n;return e=t,(r=[{key:"onAdd",value:function(t){this.map=t;var e,r,n,o=[];if("bbox"===this.strategy){var i=this.map.getBounds().toArray();o=[i[0][0],i[0][1],i[1][0],i[1][1]],this.map.on("moveend",this._updateFeaturesFn)}if(this.extent){var a=(e=this.extent,n=[],function(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}(e,r=o)&&(e[0]>r[0]?n[0]=e[0]:n[0]=r[0],e[1]>r[1]?n[1]=e[1]:n[1]=r[1],e[2]<r[2]?n[2]=e[2]:n[2]=r[2],e[3]<r[3]?n[3]=e[3]:n[3]=r[3]),n);o=a&&a.length?a:this.extent}this.renderer=new qU(this.options),this._handleFeatures(o)}},{key:"render",value:function(){}},{key:"onRemove",value:function(){this.map.off("moveend",this._updateFeaturesFn)}},{key:"moveLayer",value:function(t,e){this.map.moveLayer(t,e)}},{key:"setVisibility",value:function(t){var e=t?"visible":"none";this.map.setLayoutProperty(this.layerId,"visibility",e)}},{key:"_handleFeatures",value:function(){var t=WU(zU().mark(function t(e){var r,n,o;return zU().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.renderer._loadData(e);case 2:return r=t.sent,t.next=5,this.renderer.iterateFeatures(r);case 5:n=t.sent,this.map.getSource(this.sourceId)?this.map.getSource(this.sourceId).setData(n):this.map.addSource(this.sourceId,{type:"geojson",data:n}),this.map.getLayer(this.layerId)||(this.layerType=this.renderer.layerType,o=Object.assign({id:this.layerId,type:this.layerType,source:this.sourceId,paint:Object.assign(YU[this.layerType],this.options.paint)||{},layout:this.options.layout||{}}),this.map.addLayer(o));case 8:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"_updateFeatures",value:function(){var t=WU(zU().mark(function t(){var e,r,n,o,i=this;return zU().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.map.getBounds().toArray(),r=[e[0][0],e[0][1],e[1][0],e[1][1]],this.renderer._forEachInExtent(r,function(t){return i.renderer._containsExtent(t.extent,r)})){t.next=11;break}return t.next=6,this.renderer._loadData(r);case 6:return n=t.sent,t.next=9,this.renderer.iterateFeatures(n);case 9:o=t.sent,this.map.getSource(this.sourceId).setData(o);case 11:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}])&&KU(e.prototype,r),n&&KU(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ZU(t){"@babel/helpers - typeof";return(ZU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $U(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function tG(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?$U(Object(r),!0).forEach(function(e){eG(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$U(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function eG(t,e,r){return(e=nG(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function rG(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,nG(n.key),n)}}function nG(t){var e=function(t,e){if("object"!=ZU(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ZU(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ZU(e)?e:String(e)}var oG=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.map=e}var e,r,n;return e=t,(r=[{key:"addLayer",value:function(t,e,r){t.paint&&Object.assign(e.paint||{},t.paint),t.layout&&Object.assign(e.layout||{},t.layout),this.map.addLayerBySymbolBak(tG(tG({},t),e),r)}}])&&rG(e.prototype,r),n&&rG(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function iG(t){"@babel/helpers - typeof";return(iG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function aG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function sG(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?aG(Object(r),!0).forEach(function(e){uG(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):aG(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function uG(t,e,r){return(e=cG(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function lG(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,cG(n.key),n)}}function cG(t){var e=function(t,e){if("object"!=iG(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=iG(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==iG(e)?e:String(e)}var fG=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.map=e,this.singleSymbol=new oG(e),this.layerIds={}}var e,r,n;return e=t,(r=[{key:"addLayer",value:function(t,e,r){var n=this;e.forEach(function(e){var o=V.createUniqueID("".concat(t.id,"_compositeLayer_"));n.singleSymbol.addLayer(sG(sG({},t),{},{id:o}),e,r),n.addLayerId(t.id,o)})}},{key:"addLayerId",value:function(t,e){this.layerIds[t]||(this.layerIds[t]=[]),!this.layerIds[t].includes(e)&&this.layerIds[t].push(e)}},{key:"removeLayerId",value:function(t){delete this.layerIds[t]}},{key:"getLayerIds",value:function(t){return this.layerIds[t]}},{key:"getLayerId",value:function(t){for(var e in this.layerIds)if(this.layerIds[e].find(function(e){return e===t}))return e}}])&&lG(e.prototype,r),n&&lG(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function pG(t){"@babel/helpers - typeof";return(pG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hG(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,yG(n.key),n)}}function yG(t){var e=function(t,e){if("object"!=pG(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=pG(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==pG(e)?e:String(e)}var dG=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.symbols={},this.images={}}var e,r,n;return e=t,(r=[{key:"addSymbol",value:function(t,e){e.layout&&delete e.layout.visibility,this.symbols[t]=e}},{key:"getSymbol",value:function(t){return this.symbols[t]&&JSON.parse(JSON.stringify(this.symbols[t]))}},{key:"removeSymbol",value:function(t){delete this.symbols[t]}},{key:"addImageInfo",value:function(t,e){this.images[t]=e}},{key:"getImageInfo",value:function(t){return this.images[t]}}])&&hG(e.prototype,r),n&&hG(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function bG(t){"@babel/helpers - typeof";return(bG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vG(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],u=!0,l=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||mG(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mG(t,e){if(t){if("string"==typeof t)return gG(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?gG(t,e):void 0}}function gG(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function SG(t,e,r){var n;return(e="symbol"==bG(n=function(t,e){if("object"!=bG(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=bG(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var wG={circle:"circle",symbol:"symbol",line:"line",fill:"fill"},OG=[{prefix:"line-",type:wG.line},{prefix:"fill-",type:wG.fill},{prefix:"circle-",type:wG.circle}];function _G(t){return t&&t.length>0}function PG(t){var e=function(t){var e,r,n=t.paint,o=void 0===n?{}:n,i=t.layout,a=void 0===i?{}:i,s=Object.keys(o).concat(Object.keys(a)),u=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=mG(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}(OG);try{var l=function(){var t=r.value,n=s.some(function(e){return e.startsWith(t.prefix)});if(n)return e=t.type,1};for(u.s();!(r=u.n()).done&&!l(););}catch(t){u.e(t)}finally{u.f()}return e||wG.symbol}(t);return SG(SG(SG({},wG.symbol,{type:"layout",name:"icon-image"}),wG.line,{type:"paint",name:"line-pattern"}),wG.fill,{type:"paint",name:"fill-pattern"})[e]}var EG=["array","boolean","collator","format","literal","number","object","string","to-boolean","to-color","to-number","to-string","typeof","feature-state","geometry-type","id","line-progress","properties","at","get","has","length","!","!=","<","<=","==",">",">=","all","any","case","match","coalesce","interpolate","interpolate-hcl","interpolate-lab","step","let","var","concat","downcase","is-supported-script","resolved-locale","upcase","rgb","rgba","-","*","/","%","^","+","abs","acos","asin","atan","ceil","cos","e","floor","ln","ln2","log10","log2","max","min","pi","round","sin","sqrt","tan","zoom","heatmap-density"];function CG(t){if(t&&t.length>0){var e=vG(t,1)[0];return"string"==typeof e&&EG.includes(e)}return!1}function TG(t){return Object.keys(t).every(function(e){return!CG(t[e])})}function jG(t){return(_G(t)?t:[t]).every(function(t){return TG(t.paint||{})&&TG(t.layout||{})})}var kG=function(t){return["background-color","background-color-transition","background-pattern","background-pattern-transition","background-opacity","background-opacity-transition","fill-antialias","fill-opacity","fill-opacity-transition","fill-color","fill-color-transition","fill-outline-color","fill-outline-color-transition","fill-translate","fill-translate-transition","fill-translate-anchor","fill-pattern","fill-pattern-transition","fill-extrusion-opacity","fill-extrusion-opacity-transition","fill-extrusion-color","fill-extrusion-color-transition","fill-extrusion-translate","fill-extrusion-translate-transition","fill-extrusion-translate-anchor","fill-extrusion-pattern","fill-extrusion-pattern-transition","fill-extrusion-height","fill-extrusion-height-transition","fill-extrusion-base","fill-extrusion-base-transition","fill-extrusion-vertical-gradient","line-opacity","line-opacity-transition","line-color","line-color-transition","line-translate","line-translate-transition","line-translate-anchor","line-width","line-width-transition","line-gap-width","line-gap-width-transition","line-offset","line-offset-transition","line-blur","line-blur-transition","line-dasharray","line-dasharray-transition","line-pattern","line-pattern-transition","line-gradient","icon-opacity","icon-opacity-transition","icon-color","icon-color-transition","icon-halo-color","icon-halo-color-transition","icon-halo-width","icon-halo-width-transition","icon-halo-blur","icon-halo-blur-transition","icon-translate","icon-translate-transition","icon-translate-anchor","text-opacity","text-opacity-transition","text-color","text-color-transition","text-halo-color","text-halo-color-transition","text-halo-width","text-halo-width-transition","text-halo-blur","text-halo-blur-transition","text-translate","text-translate-transition","text-translate-anchor","raster-opacity","raster-opacity-transition","raster-hue-rotate","raster-hue-rotate-transition","raster-brightness-min","raster-brightness-min-transition","raster-brightness-max","raster-brightness-max-transition","raster-saturation","raster-saturation-transition","raster-contrast","raster-contrast-transition","raster-fade-duration","raster-resampling","circle-sort-key","circle-radius","circle-radius-transition","circle-color","circle-color-transition","circle-blur","circle-blur-transition","circle-opacity","circle-opacity-transition","circle-translate","circle-translate-transition","circle-translate-anchor","circle-pitch-scale","circle-pitch-alignment","circle-stroke-width","circle-stroke-width-transition","circle-stroke-color","circle-stroke-color-transition","circle-stroke-opacity","circle-stroke-opacity-transition","heatmap-radius","heatmap-radius-transition","heatmap-weight","heatmap-intensity","heatmap-intensity-transition","heatmap-color","heatmap-opacity","heatmap-opacity-transition","hillshade-illumination-direction","hillshade-illumination-anchor","hillshade-exaggeration","hillshade-exaggeration-transition","hillshade-shadow-color","hillshade-shadow-color-transition","hillshade-highlight-color","hillshade-highlight-color-transition","hillshade-accent-color","hillshade-accent-color-transition"].includes(t)};function xG(t){"@babel/helpers - typeof";return(xG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function AG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function IG(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?AG(Object(r),!0).forEach(function(e){NG(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):AG(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function NG(t,e,r){return(e=MG(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function RG(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,MG(n.key),n)}}function MG(t){var e=function(t,e){if("object"!=xG(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=xG(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==xG(e)?e:String(e)}var LG=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.map=e,this.symbolManager=new dG,this.singleSymbolRender=new oG(e),this.compositeSymbolRender=new fG(e),this._layerSymbols={}}var e,r,n;return e=t,(r=[{key:"_update",value:function(t){return this.map=t,this}},{key:"addLayer",value:function(t,e){if("string"==typeof t.symbol){var r=t.symbol;if(r){var n=this.getSymbol(r);if(!n)return this.map.fire("error",{error:new Error('Symbol "'.concat(r,'" could not be loaded. Please make sure you have added the symbol with map.addSymbol().'))});this.setSymbolTolayer(t.id,r),this.getSymbolRender(n).addLayer(t,n,e)}}else CG(t.symbol)&&(this.setSymbolTolayer(t.id,t.symbol),this.addExpressionLayer(t,e))}},{key:"setSymbol",value:function(t,e){var r=this.map.getStyle().layers,n=r.findIndex(function(e){return e.id===t});if(-1===n)return this.map.fire("error",{error:new Error('Cannot set symbol "'.concat(e,'" to non-existing layer "').concat(t,'".'))});this.map.removeLayer(t);var o=r[n+1]&&r[n+1].id,i=o&&this.map.style.getLayer(o),a=i&&i.id||o&&this.getFirstLayerId(o),s=r[n];this.addLayer(IG(IG({},s),{},{paint:{},layout:{visibility:s.layout&&s.layout.visibility||"visible"},symbol:e}),a)}},{key:"getMatchLayers",value:function(t){var e=[],r=["all"];t.filter&&r.push(t.filter);var n=[],o=t.symbol.slice(2);return o.forEach(function(i,a){a%2==1?(e.push(IG(IG({},t),{},{filter:[].concat(r,[["==",t.symbol[1][1],o[a-1]]]),symbol:i})),n.push(["!=",t.symbol[1][1],o[a-1]])):a===o.length-1&&e.unshift(IG(IG({},t),{},{filter:[].concat(r,n),symbol:i}))}),e}},{key:"getCaseLayers",value:function(t){var e=[],r=["all"];t.filter&&r.push(t.filter);var n=[],o=t.symbol.slice(1);return o.forEach(function(i,a){a%2==1?(e.push(IG(IG({},t),{},{filter:[].concat(r,[o[a-1]]),symbol:i})),n.push(["!",o[a-1]])):a===o.length-1&&e.unshift(IG(IG({},t),{},{filter:[].concat(r,n),symbol:i}))}),e}},{key:"addExpressionLayer",value:function(t,e){var r=this,n={match:this.getMatchLayers,case:this.getCaseLayers}[t.symbol[0]],o=n&&n(t);if(!o)return this.map.fire("error",{error:new Error("This expressions not supported")});o.forEach(function(n){n.id=V.createUniqueID("".concat(t.id,"_compositeLayer_")),r.compositeSymbolRender.addLayerId(t.id,n.id),r.addLayer(n,e)})}},{key:"getSymbolRender",value:function(t){return _G(t)?this.compositeSymbolRender:this.singleSymbolRender}},{key:"addSymbolImageToMap",value:function(t,e){var r=PG(t),n=r.type,o=r.name,i=t[n]&&t[n][o];i&&!this.map.hasImage(i)&&(this.map.addImage(i,e),this.symbolManager.addImageInfo(i,e))}},{key:"addSymbol",value:function(t,e){return this.getSymbol(t)?this.map.fire("error",{error:new Error("An symbol with this name already exists.")}):jG(e)?void this.symbolManager.addSymbol(t,e):this.map.fire("error",{error:new Error("Symbol is not supported expressions.")})}},{key:"setSymbolTolayer",value:function(t,e){this._layerSymbols[t]=e}},{key:"getLayerSymbol",value:function(t){return this._layerSymbols[t]}},{key:"hasSymbol",value:function(){return Object.keys(this._layerSymbols).length>0}},{key:"removeSymbol",value:function(t){this.symbolManager.removeSymbol(t)}},{key:"getSymbol",value:function(t){return this.symbolManager.getSymbol(t)}},{key:"getLayerIds",value:function(t){return this.compositeSymbolRender.getLayerIds(t)||[]}},{key:"getLayerId",value:function(t){return this.compositeSymbolRender.getLayerId(t)}},{key:"removeLayerId",value:function(t){return this.compositeSymbolRender.removeLayerId(t)}},{key:"getLayer",value:function(t){var e=this.map.getLayerBySymbolBak(t),r=this.getLayerSymbol(t);if(e)return r?IG(IG({},e),{},{symbol:r}):e;var n=this.getLayerIds(t);if(n[0]){var o=this.map.getLayerBySymbolBak(n[0]);return o&&IG(IG({},o),{},{symbol:r,id:t})}}},{key:"removeLayer",value:function(t){var e=this,r=this.getLayerIds(t);r.length>0?(r.forEach(function(t){return e.map.style.removeLayer(t)}),this.removeLayerId(t)):this.map.style.removeLayer(t)}},{key:"getStyle",value:function(){var t=this,e=this.map.style.serialize();return this.hasSymbol()&&(e.layers=e.layers.reduce(function(e,r){var n=t.getLayerId(r.id);return n?!e.find(function(t){return t.id===n})&&e.push(IG(IG({},r),{},{symbol:t.getLayerSymbol(n),id:n})):t.getLayerSymbol(r.id)?e.push(IG(IG({},r),{},{symbol:t.getLayerSymbol(r.id)})):e.push(r),e},[])),e}},{key:"getFirstLayerId",value:function(t){return this.getLayerIds(t)[0]}},{key:"moveLayer",value:function(t,e){var r=this,n=this.getLayerIds(t),o=e&&this.map.style.getLayer(e),i=o&&o.id||e&&this.getFirstLayerId(e);n.length>0?n.forEach(function(t){return r.map.style.moveLayer(t,i)}):this.map.style.moveLayer(t,i)}},{key:"setFilter",value:function(t,e,r){var n=this;if(CG(this.getLayerSymbol(t))){var o=this.getFirstLayerId(t);this.map.style.setFilter(o,e,r);var i=this.getLayerSymbol(t);this.setSymbol(t,i)}else{var a=this.getLayerIds(t);a.length>0?a.forEach(function(t){return n.map.style.setFilter(t,e,r)}):this.map.style.setFilter(t,e,r)}}},{key:"getFilter",value:function(t){var e=this.getFirstLayerId(t);if(this.map.style.getLayer(e))return this.map.style.getFilter(e)}},{key:"setLayerZoomRange",value:function(t,e,r){var n=this,o=this.getLayerIds(t);o.length>0?o.forEach(function(t){return n.map.style.setLayerZoomRange(t,e,r)}):this.map.style.setLayerZoomRange(t,e,r)}},{key:"setPaintProperty",value:function(t,e,r,n){var o=this,i=this.getLayerIds(t);i.length>0?i.forEach(function(t){return o.map.style.setPaintProperty(t,e,r,n)}):this.map.style.setPaintProperty(t,e,r,n)}},{key:"getPaintProperty",value:function(t,e){var r=this.getFirstLayerId(t);return this.map.style.getPaintProperty(r,e)}},{key:"setLayoutProperty",value:function(t,e,r,n){var o=this,i=this.getLayerIds(t);i.length>0?i.forEach(function(t){return o.map.style.setLayoutProperty(t,e,r,n)}):this.map.style.setLayoutProperty(t,e,r,n)}},{key:"getLayoutProperty",value:function(t,e){var r=this.getFirstLayerId(t);return this.map.style.getLayoutProperty(r,e)}},{key:"updateLayerSymbol",value:function(t){var e=this;Object.keys(this._layerSymbols).forEach(function(r){var n=e._layerSymbols[r];n.includes(t)&&e.setSymbol(r,n)})}},{key:"updateSymbol",value:function(t,e){return this.getSymbol(t)?jG(e)?(this.symbolManager.addSymbol(t,e),void this.updateLayerSymbol(t)):this.map.fire("error",{error:new Error("Symbol is not supported expressions.")}):this.map.fire("error",{error:new Error('Symbol "'.concat(t,'" could not be loaded. Please make sure you have added the symbol with map.addSymbol().'))})}},{key:"setSymbolProperty",value:function(t,e,r,n){var o=this.getSymbol(t);if(!o)return this.map.fire("error",{error:new Error('Symbol "'.concat(t,'" could not be loaded. Please make sure you have added the symbol with map.addSymbol().'))});if(CG(n))return this.map.fire("error",{error:new Error("Symbol value is not supported expressions.")});var i=kG(r)?"paint":"layout";if(o.length>0){var a=o[e];if(!a)return this.map.fire("error",{error:new Error("symbol[".concat(e,"] does not exist."))});a[i]||(a[i]={}),Object.assign(a[i],NG({},r,n))}else o[i]||(o[i]={}),Object.assign(o[i],NG({},r,n));this.symbolManager.addSymbol(t,o),this.updateLayerSymbol(t)}},{key:"getSymbolProperty",value:function(t,e,r){var n=this.getSymbol(t);if(n){var o=kG(r)?"paint":"layout";return n.length>0?n[e]&&n[e][o]&&n[e][o][r]:n[o]&&n[o][r]}this.map.fire("error",{error:new Error('Symbol "'.concat(t,'" could not be loaded. Please make sure you have added the symbol with map.addSymbol().'))})}}])&&RG(e.prototype,r),n&&RG(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function BG(t){"@babel/helpers - typeof";return(BG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function DG(){DG=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new x(n||[]);return o(a,"_invoke",{value:C(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",b={};function v(){}function m(){}function g(){}var S={};l(S,a,function(){return this});var w=Object.getPrototypeOf,O=w&&w(w(A([])));O&&O!==r&&n.call(O,a)&&(S=O);var _=g.prototype=v.prototype=Object.create(S);function P(t){["next","throw","return"].forEach(function(e){l(t,e,function(t){return this._invoke(e,t)})})}function E(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==BG(c)&&n.call(c,"__await")?e.resolve(c.__await).then(function(t){r("next",t,a,s)},function(t){r("throw",t,a,s)}):e.resolve(c).then(function(t){l.value=t,a(l)},function(t){return r("throw",t,a,s)})}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e(function(e,o){r(t,n,e,o)})}return i=i?i.then(o,o):o()}})}function C(e,r,n){var o=p;return function(i,a){if(o===y)throw new Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=T(s,n);if(u){if(u===b)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?d:h,l.arg===b)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=d,n.method="throw",n.arg=l.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,b;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,b):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function A(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(BG(e)+" is not iterable")}return m.prototype=g,o(_,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},P(E.prototype),l(E.prototype,s,function(){return this}),e.AsyncIterator=E,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new E(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},P(_),l(_,u,"Generator"),l(_,a,function(){return this}),l(_,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=A,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:A(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),b}},e}function FG(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function UG(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){FG(i,n,o,a,s,"next",t)}function s(t){FG(i,n,o,a,s,"throw",t)}a(void 0)})}}var GG=function(){var t=function(t){return o().Map.prototype.symbolHandler||(o().Map.prototype.symbolHandler=new LG(t)),o().Map.prototype.symbolHandler._update(t)};function e(){return(e=UG(DG().mark(function t(e,r){var n,o,i,a,s,u;return DG().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(r.basePath,"/").concat(e,"/").concat(e),t.next=4,Dn.get("".concat(n,".json")).then(function(t){return t.ok?t.json():null}).catch(function(){return null});case 4:if(o=t.sent){t.next=7;break}return t.abrupt("return",null);case 7:if(i=o.paint||{},a=o.layout||{},s=i["fill-pattern"]||i["line-pattern"]||a["icon-image"],t.t0=s,!t.t0){t.next=15;break}return t.next=14,new Promise(function(t){var e=new Image;e.src="".concat(n,".png"),e.onload=function(r){t(r?e:null)},e.onerror=function(){t(null)}});case 14:t.t0=t.sent;case 15:return u=t.t0,t.abrupt("return",{value:o,image:u});case 17:case"end":return t.stop()}},t)}))).apply(this,arguments)}function r(r,n){return function(t,r){return e.apply(this,arguments)}(r,n).then(function(e){if(!e)return null;var r=e.value,o=e.image;return o&&t(n).addSymbolImageToMap(r,o),r})}void 0===o().Map.prototype.addLayerBySymbolBak&&(o().Map.prototype.addLayerBySymbolBak=o().Map.prototype.addLayer,o().Map.prototype.addLayer=function(e,r){var n=t(this);if(!(n.getLayerIds(e.id).length>0))return e.symbol?(n.addLayer(e,r),this):(this.addLayerBySymbolBak(e,r),this);this.fire("error",{error:new Error("A layer with this id already exists.")})}),void 0===o().Map.prototype.getLayerBySymbolBak&&(o().Map.prototype.getLayerBySymbolBak=o().Map.prototype.getLayer,o().Map.prototype.getLayer=function(e){return t(this).getLayer(e)}),void 0===o().Map.prototype.moveLayerBySymbolBak&&(o().Map.prototype.moveLayerBySymbolBak=o().Map.prototype.moveLayer,o().Map.prototype.moveLayer=function(e,r){return!this.style.getLayer(e)||r&&!this.style.getLayer(r)?(t(this).moveLayer(e,r),this._update(!0)):this.moveLayerBySymbolBak(e,r)}),void 0===o().Map.prototype.removeLayerBySymbolBak&&(o().Map.prototype.removeLayerBySymbolBak=o().Map.prototype.removeLayer,o().Map.prototype.removeLayer=function(e){return this.style.getLayer(e)?this.removeLayerBySymbolBak(e):t(this).removeLayer(e)}),void 0===o().Map.prototype.setLayoutPropertyBySymbolBak&&(o().Map.prototype.setLayoutPropertyBySymbolBak=o().Map.prototype.setLayoutProperty,o().Map.prototype.setLayoutProperty=function(e,r,n,o){return this.overlayLayersManager[e]||this.style.getLayer(e)?this.setLayoutPropertyBySymbolBak(e,r,n,o):(t(this).setLayoutProperty(e,r,n,o),this._update(!0))}),o().Map.prototype.setSymbol=function(e,r){t(this).setSymbol(e,r)},o().Map.prototype.setStyleBak||(o().Map.prototype.setStyleBak=o().Map.prototype.setStyle,o().Map.prototype.setStyle=function(t,e){var r=this;return this.setStyleBak(t,e),this.style&&this.style.once("style.load",function(){t.layers.filter(function(t){return t.symbol}).forEach(function(t){r.setSymbol(t.id,t.symbol)})}),this}),o().Map.prototype.loadSymbol=(n=UG(DG().mark(function t(e,n){var o,i,a,s,u,l,c=this;return DG().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("string"!=typeof e){t.next=9;break}return t.next=3,r(e,this);case 3:o=t.sent,i=null,o||(i="Symbol ".concat(e," is not exists")),n(i,o),t.next=21;break;case 9:if(!V.isArray(e)){t.next=20;break}return a=e.map(function(t){return r(t,c)}),t.next=13,Promise.all(a);case 13:s=t.sent,u=null,(l=e.filter(function(t,e){return!s[e]})).length>0&&(u="Symbol ".concat(l.join(",")," is not exists")),n(u,s),t.next=21;break;case 20:n({message:"Symbol id must be a string or string[]."});case 21:case"end":return t.stop()}},t,this)})),function(t,e){return n.apply(this,arguments)}),o().Map.prototype.addSymbol=function(e,r){t(this).addSymbol(e,r)},o().Map.prototype.getSymbol=function(e){return t(this).getSymbol(e)},o().Map.prototype.hasSymbol=function(t){return t?!!this.getSymbol(t):(this.fire("error",{error:new Error("Missing required symbol id")}),!1)},o().Map.prototype.removeSymbol=function(e){t(this).removeSymbol(e)},o().Map.prototype.updateSymbol=function(e,r){t(this).updateSymbol(e,r)},o().Map.prototype.setSymbolProperty=function(e,r,n,o){t(this).setSymbolProperty(e,r,n,o)},o().Map.prototype.getSymbolProperty=function(e,r,n){return t(this).getSymbolProperty(e,r,n)},o().Map.prototype.getStyle=function(){if(this.style)return t(this).getStyle()},o().Map.prototype.setFilter=function(e,r,n){return this.style.getLayer(e)?(this.style.setFilter(e,r,n),this._update(!0)):(t(this).setFilter(e,r,n),this._update(!0))},o().Map.prototype.getFilter=function(e){return this.style.getLayer(e)?this.style.getFilter(e):t(this).getFilter(e)},o().Map.prototype.setLayerZoomRange=function(e,r,n){return this.style.getLayer(e)?(this.style.setLayerZoomRange(e,r,n),this._update(!0)):(t(this).setLayerZoomRange(e,r,n),this._update(!0))},o().Map.prototype.setPaintProperty=function(e,r,n,o){return this.style.getLayer(e)?(this.style.setPaintProperty(e,r,n,o),this._update(!0)):(t(this).setPaintProperty(e,r,n,o),this._update(!0))},o().Map.prototype.getPaintProperty=function(e,r){return this.style.getLayer(e)?this.style.getPaintProperty(e,r):t(this).getPaintProperty(e,r)},o().Map.prototype.getLayoutProperty=function(e,r){return this.style.getLayer(e)?this.style.getLayoutProperty(e,r):t(this).getLayoutProperty(e,r)},void 0===o().Map.prototype.onBak&&(o().Map.prototype.onBak=o().Map.prototype.on,o().Map.prototype.on=function(e,r,n){var o=this;return void 0===n||this.style.getLayer(r)?this.onBak(e,r,n):(t(this).getLayerIds(r).forEach(function(t){return o.onBak(e,t,n)}),this)}),void 0===o().Map.prototype.onceBak&&(o().Map.prototype.onceBak=o().Map.prototype.once,o().Map.prototype.once=function(e,r,n){var o=this;return void 0===n||this.style.getLayer(r)?this.onceBak(e,r,n):(t(this).getLayerIds(r).forEach(function(t){return o.onceBak(e,t,n)}),this)}),void 0===o().Map.prototype.offBak&&(o().Map.prototype.offBak=o().Map.prototype.off,o().Map.prototype.off=function(e,r,n){var o=this;return void 0===n||this.style.getLayer(r)?this.offBak(e,r,n):(t(this).getLayerIds(r).forEach(function(t){return o.offBak(e,t,n)}),this)});var n};function VG(t){"@babel/helpers - typeof";return(VG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qG(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,HG(n.key),n)}}function HG(t){var e=function(t,e){if("object"!=VG(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=VG(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==VG(e)?e:String(e)}var zG=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.defaultBasePath="./resources/symbols"}var e,r,n;return e=t,(r=[{key:"init",value:function(t){o().Map.prototype.basePath=t&&t.basePath||this.defaultBasePath,GG()}}])&&qG(e.prototype,r),n&&qG(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),JG=function(){try{return L7}catch(t){return{}}}();function WG(t,e,r){return r?new t({id:r.getContainer().id,pickBufferScale:1,map:new e({mapInstance:r})}):null}function KG(t){"@babel/helpers - typeof";return(KG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function QG(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function YG(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?QG(Object(r),!0).forEach(function(e){XG(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):QG(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function XG(t,e,r){return(e=$G(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ZG(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,$G(n.key),n)}}function $G(t){var e=function(t,e){if("object"!=KG(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=KG(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==KG(e)?e:String(e)}var tV=function(){function t(e){var r=e.type,n=e.options;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.type="custom",this.id=n&&n.layerID?n.layerID:V.createUniqueID("l7_layer_");var o=YG({},n||{});"ThreeLayer"!==r&&(this.l7layer=new JG[r](YG(YG({},o),{},{name:this.id}))),this.overlay=!0}var e,r,n;return e=t,(r=[{key:"getL7Layer",value:function(){return this.l7layer}},{key:"reRender",value:function(){this.scene&&this.scene.getLayer(this.l7layer.id)&&this.scene.layerService.renderLayer(this.l7layer.id),this.map&&this.map.triggerRepaint()}},{key:"moveLayer",value:function(t,e){this.map.style.moveLayer(t,e)}},{key:"setVisibility",value:function(t){this.animateStatus&&this.cancelAnimationFrame(),t?this.l7layer.show():this.l7layer.hide(),this.map.style.setLayoutProperty(this.id,"visibility",t?"visible":"none")}},{key:"addSceneLayer",value:function(t){this.scene=t,this.scene.addLayer(this.l7layer)}},{key:"onAdd",value:function(t){var e=this;if(this.map=t,!t.$l7scene){var r=WG(JG.Scene,JG.Maplibre,t);return t.$l7scene=r,void r.on("loaded",function(){e.addSceneLayer(r)})}this.addSceneLayer(t.$l7scene)}},{key:"remove",value:function(){this.scene&&this.scene.removeLayer(this.l7layer)}},{key:"onRemove",value:function(){this.cancelAnimationFrame(),this.scene&&this.scene.removeLayer(this.l7layer)}},{key:"cancelAnimationFrame",value:function(){this.requestAnimationFrameId&&window.cancelAnimationFrame(this.requestAnimationFrameId),this.animateStatus=!1}},{key:"render",value:function(){var t=this;if(this.scene&&this.scene.getLayer(this.l7layer.id)){if(this.scene.layerService.renderLayer(this.l7layer.id),this.l7layer.animateStatus||this.l7layer.layerModel&&this.l7layer.layerModel.spriteAnimate){this.animateStatus||(!function e(){t.requestAnimationFrameId=window.requestAnimationFrame(e),t.map.triggerRepaint()}(),this.animateStatus=!0)}}else this.cancelAnimationFrame()}}])&&ZG(e.prototype,r),n&&ZG(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function eV(t){"@babel/helpers - typeof";return(eV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,nV(n.key),n)}}function nV(t){var e=function(t,e){if("object"!=eV(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=eV(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==eV(e)?e:String(e)}o().Map.prototype.getL7Scene=function(){var t=this;return new Promise(function(e){if(t.$l7scene)return e(t.$l7scene),t.$l7scene;var r=WG(JG.Scene,JG.Maplibre,t);r.on("loaded",function(){return t.$l7scene=r,e(r),r})})};var oV=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.lngLat=hn.isArray(e)?{lng:e[0],lat:e[1]}:e,this.style=hn.extend({},r),this.attributes=n}var e,r,n;return e=t,(r=[{key:"getId",value:function(){return this.id}},{key:"setId",value:function(t){this.id=t}},{key:"getLngLat",value:function(){return this.lngLat}},{key:"setLngLat",value:function(t){this.lngLat=hn.isArray(t)?{lng:t[0],lat:t[1]}:t}},{key:"setStyle",value:function(t){this.style=hn.extend(this.style,t)}},{key:"getStyle",value:function(){return this.style}},{key:"setAttributes",value:function(t){this.attributes=hn.extend({},this.attributes,t)}},{key:"getAttributes",value:function(){return this.attributes}}])&&rV(e.prototype,r),n&&rV(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function iV(t){"@babel/helpers - typeof";return(iV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function aV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,sV(n.key),n)}}function sV(t){var e=function(t,e){if("object"!=iV(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=iV(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==iV(e)?e:String(e)}var uV=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.MapService=e,this.url=r,this.options=n,this.CLASS_NAME="SuperMap.InitMapServiceBase"}var e,r,n;return e=t,(r=[{key:"createMapService",value:function(){var t=this.MapService,e=this.url,r=this.options;return new t(e,{proxy:r.proxy,withCredentials:r.withCredentials,crossOrigin:r.crossOrigin,headers:r.headers,projection:r.projection})}},{key:"getMapInfo",value:function(t){var e=this.createMapService();return t?new Promise(function(r,n){e.getMapInfo(function(e){t(e,r,n)})}):e.getMapInfo()}},{key:"getTilesets",value:function(){return this.createMapService().getTilesets()}},{key:"getWKT",value:function(){var t=this;return new Promise(function(e,r){t.createMapService().getWKT(function(t){try{var n=t.result.data;e(n)}catch(t){r(t)}})})}}])&&aV(e.prototype,r),n&&aV(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function lV(t){return"PCS_NON_EARTH"===t}function cV(t){var e=t.type,r=t.epsgCode;return"PCS_NON_EARTH"==e?"":"EPSG:"+r}function fV(t){if(t.tileFormat){var e=t.tileFormat.toLowerCase();return["jpg_png","default","png8"].includes(e)?"png":e}return"png"}function pV(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0,r=Array.isArray(t)&&t.filter(function(t){return t.metaData.tileType===e.tileType||cV(t.metaData.prjCoordSys)===cV(e.prjCoordSys)});return r&&r[0]&&r[0].metaData}function hV(t,e){var r=t.scale,n=t.dpi,o=t.coordUnit,i=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:22,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:512,n=[],o=Math.abs(t.left-t.right)/r,i=0;i<e;i++)n.push(o/Math.pow(2,i));return n.sort(function(t,e){return e-t})}(e);return function(t,e){for(var r,n=0,o=0;o<e.length;o++)0===o&&(r=Math.abs(t-e[o])),r>Math.abs(t-e[o])&&(r=Math.abs(t-e[o]),n=o);return n}(bL(r,n,o),i)}var yV=1,dV=2,bV=3,vV=4,mV=5,gV=6378137,SV=6356752.314,wV=.0066943799901413165,OV=484813681109536e-20,_V=Math.PI/2,PV=.16666666666666666,EV=.04722222222222222,CV=.022156084656084655,TV=1e-10,jV=.017453292519943295,kV=57.29577951308232,xV=Math.PI/4,AV=2*Math.PI,IV=3.14159265359,NV={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},RV={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},MV=/[\s_\-\/\(\)]/g;function LV(t,e){if(t[e])return t[e];for(var r,n=Object.keys(t),o=e.toLowerCase().replace(MV,""),i=-1;++i<n.length;)if((r=n[i]).toLowerCase().replace(MV,"")===o)return t[r]}function BV(t){var e,r,n,o={},i=t.split("+").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,e){var r=e.split("=");return r.push(!0),t[r[0].toLowerCase()]=r[1],t},{}),a={proj:"projName",datum:"datumCode",rf:function(t){o.rf=parseFloat(t)},lat_0:function(t){o.lat0=t*jV},lat_1:function(t){o.lat1=t*jV},lat_2:function(t){o.lat2=t*jV},lat_ts:function(t){o.lat_ts=t*jV},lon_0:function(t){o.long0=t*jV},lon_1:function(t){o.long1=t*jV},lon_2:function(t){o.long2=t*jV},alpha:function(t){o.alpha=parseFloat(t)*jV},gamma:function(t){o.rectified_grid_angle=parseFloat(t)},lonc:function(t){o.longc=t*jV},x_0:function(t){o.x0=parseFloat(t)},y_0:function(t){o.y0=parseFloat(t)},k_0:function(t){o.k0=parseFloat(t)},k:function(t){o.k0=parseFloat(t)},a:function(t){o.a=parseFloat(t)},b:function(t){o.b=parseFloat(t)},r:function(t){o.a=o.b=parseFloat(t)},r_a:function(){o.R_A=!0},zone:function(t){o.zone=parseInt(t,10)},south:function(){o.utmSouth=!0},towgs84:function(t){o.datum_params=t.split(",").map(function(t){return parseFloat(t)})},to_meter:function(t){o.to_meter=parseFloat(t)},units:function(t){o.units=t;var e=LV(RV,t);e&&(o.to_meter=e.to_meter)},from_greenwich:function(t){o.from_greenwich=t*jV},pm:function(t){var e=LV(NV,t);o.from_greenwich=(e||parseFloat(t))*jV},nadgrids:function(t){"@null"===t?o.datumCode="none":o.nadgrids=t},axis:function(t){3===t.length&&-1!=="ewnsud".indexOf(t.substr(0,1))&&-1!=="ewnsud".indexOf(t.substr(1,1))&&-1!=="ewnsud".indexOf(t.substr(2,1))&&(o.axis=t)},approx:function(){o.approx=!0}};for(e in i)r=i[e],e in a?"function"==typeof(n=a[e])?n(r):o[n]=r:o[e]=r;return"string"==typeof o.datumCode&&"WGS84"!==o.datumCode&&(o.datumCode=o.datumCode.toLowerCase()),o}var DV=function(t){return new zV(t).output()},FV=1,UV=/\s/,GV=/[A-Za-z]/,VV=/[A-Za-z84_]/,qV=/[,\]]/,HV=/[\d\.E\-\+]/;function zV(t){if("string"!=typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=FV}function JV(t,e,r){Array.isArray(e)&&(r.unshift(e),e=null);var n=e?{}:t,o=r.reduce(function(t,e){return WV(e,t),t},n);e&&(t[e]=o)}function WV(t,e){if(Array.isArray(t)){var r=t.shift();if("PARAMETER"===r&&(r=t.shift()),1===t.length)return Array.isArray(t[0])?(e[r]={},void WV(t[0],e[r])):void(e[r]=t[0]);if(t.length)if("TOWGS84"!==r){if("AXIS"===r)return r in e||(e[r]=[]),void e[r].push(t);var n;switch(Array.isArray(r)||(e[r]={}),r){case"UNIT":case"PRIMEM":case"VERT_DATUM":return e[r]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&WV(t[2],e[r]));case"SPHEROID":case"ELLIPSOID":return e[r]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&WV(t[3],e[r]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return t[0]=["name",t[0]],void JV(e,r,t);default:for(n=-1;++n<t.length;)if(!Array.isArray(t[n]))return WV(t,e[r]);return JV(e,r,t)}}else e[r]=t;else e[r]=!0}else e[t]=!0}function KV(t){"@babel/helpers - typeof";return(KV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}zV.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;UV.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case FV:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},zV.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=4);if(qV.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},zV.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=FV)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=FV,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},zV.prototype.number=function(t){if(!HV.test(t)){if(qV.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},zV.prototype.quoted=function(t){'"'!==t?this.word+=t:this.state=5},zV.prototype.keyword=function(t){if(VV.test(t))this.word+=t;else{if("["===t){var e=[];return e.push(this.word),this.level++,null===this.root?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,void(this.state=FV)}if(!qV.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},zV.prototype.neutral=function(t){if(GV.test(t))return this.word=t,void(this.state=2);if('"'===t)return this.word="",void(this.state=4);if(HV.test(t))return this.word=t,void(this.state=3);if(!qV.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},zV.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var QV=.017453292519943295;function YV(t){return t*QV}function XV(t){var e=DV(t),r=e.shift(),n=e.shift();e.unshift(["name",n]),e.unshift(["type",r]);var o={};return WV(e,o),function(t){if("GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"===KV(t.PROJECTION)?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var e="",r=0,n=t.AXIS.length;r<n;++r){var o=[t.AXIS[r][0].toLowerCase(),t.AXIS[r][1].toLowerCase()];-1!==o[0].indexOf("north")||("y"===o[0]||"lat"===o[0])&&"north"===o[1]?e+="n":-1!==o[0].indexOf("south")||("y"===o[0]||"lat"===o[0])&&"south"===o[1]?e+="s":-1!==o[0].indexOf("east")||("x"===o[0]||"lon"===o[0])&&"east"===o[1]?e+="e":-1===o[0].indexOf("west")&&("x"!==o[0]&&"lon"!==o[0]||"west"!==o[1])||(e+="w")}2===e.length&&(e+="u"),3===e.length&&(t.axis=e)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var i=t.GEOGCS;function a(e){return e*(t.to_meter||1)}"GEOGCS"===t.type&&(i=t),i&&(i.DATUM?t.datumCode=i.DATUM.name.toLowerCase():t.datumCode=i.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==t.datumCode&&"new_zealand_1949"!==t.datumCode||(t.datumCode="nzgd49"),"wgs_1984"!==t.datumCode&&"world_geodetic_system_1984"!==t.datumCode||("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),i.DATUM&&i.DATUM.SPHEROID&&(t.ellps=i.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=i.DATUM.SPHEROID.a,t.rf=parseFloat(i.DATUM.SPHEROID.rf,10)),i.DATUM&&i.DATUM.TOWGS84&&(t.datum_params=i.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),"ch1903+"===t.datumCode&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",YV],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",YV],["x0","false_easting",a],["y0","false_northing",a],["long0","central_meridian",YV],["lat0","latitude_of_origin",YV],["lat0","standard_parallel_1",YV],["lat1","standard_parallel_1",YV],["lat2","standard_parallel_2",YV],["azimuth","Azimuth"],["alpha","azimuth",YV],["srsCode","name"]].forEach(function(e){return r=t,o=(n=e)[0],i=n[1],void(!(o in r)&&i in r&&(r[o]=r[i],3===n.length&&(r[o]=n[2](r[o]))));var r,n,o,i}),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.projName&&"Lambert_Azimuthal_Equal_Area"!==t.projName||(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName?!t.lat_ts&&t.lat0&&"Polar_Stereographic"===t.projName&&(t.lat_ts=t.lat0,t.lat0=YV(t.lat0>0?90:-90)):(t.lat0=YV(t.lat1>0?90:-90),t.lat_ts=t.lat1)}(o),o}function ZV(t){var e=this;if(2===arguments.length){var r=arguments[1];"string"==typeof r?"+"===r.charAt(0)?ZV[t]=BV(arguments[1]):ZV[t]=XV(arguments[1]):ZV[t]=r}else if(1===arguments.length){if(Array.isArray(t))return t.map(function(t){Array.isArray(t)?ZV.apply(e,t):ZV(t)});if("string"==typeof t){if(t in ZV)return ZV[t]}else"EPSG"in t?ZV["EPSG:"+t.EPSG]=t:"ESRI"in t?ZV["ESRI:"+t.ESRI]=t:"IAU2000"in t?ZV["IAU2000:"+t.IAU2000]=t:console.log(t);return}}!function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}(ZV);var $V=ZV;var tq=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];var eq=["3857","900913","3785","102113"];var rq=function(t){if(!function(t){return"string"==typeof t}(t))return t;if(function(t){return t in $V}(t))return $V[t];if(function(t){return tq.some(function(e){return t.indexOf(e)>-1})}(t)){var e=XV(t);if(function(t){var e=LV(t,"authority");if(e){var r=LV(e,"epsg");return r&&eq.indexOf(r)>-1}}(e))return $V["EPSG:3857"];var r=function(t){var e=LV(t,"extension");if(e)return LV(e,"proj4")}(e);return r?BV(r):e}return function(t){return"+"===t[0]}(t)?BV(t):void 0};function nq(t,e){var r,n;if(t=t||{},!e)return t;for(n in e)void 0!==(r=e[n])&&(t[n]=r);return t}function oq(t,e,r){var n=t*e;return r/Math.sqrt(1-n*n)}function iq(t){return t<0?-1:1}function aq(t){return Math.abs(t)<=IV?t:t-iq(t)*AV}function sq(t,e,r){var n=t*r,o=.5*t;return n=Math.pow((1-n)/(1+n),o),Math.tan(.5*(_V-e))/n}function uq(t,e){for(var r,n,o=.5*t,i=_V-2*Math.atan(e),a=0;a<=15;a++)if(r=t*Math.sin(i),i+=n=_V-2*Math.atan(e*Math.pow((1-r)/(1+r),o))-i,Math.abs(n)<=1e-10)return i;return-9999}function lq(t){return t}var cq=[{init:function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=oq(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(t){var e,r,n=t.x,o=t.y;if(o*kV>90&&o*kV<-90&&n*kV>180&&n*kV<-180)return null;if(Math.abs(Math.abs(o)-_V)<=TV)return null;if(this.sphere)e=this.x0+this.a*this.k0*aq(n-this.long0),r=this.y0+this.a*this.k0*Math.log(Math.tan(xV+.5*o));else{var i=Math.sin(o),a=sq(this.e,o,i);e=this.x0+this.a*this.k0*aq(n-this.long0),r=this.y0-this.a*this.k0*Math.log(a)}return t.x=e,t.y=r,t},inverse:function(t){var e,r,n=t.x-this.x0,o=t.y-this.y0;if(this.sphere)r=_V-2*Math.atan(Math.exp(-o/(this.a*this.k0)));else{var i=Math.exp(-o/(this.a*this.k0));if(-9999===(r=uq(this.e,i)))return null}return e=aq(this.long0+n/(this.a*this.k0)),t.x=e,t.y=r,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function(){},forward:lq,inverse:lq,names:["longlat","identity"]}],fq={},pq=[];function hq(t,e){var r=pq.length;return t.names?(pq[r]=t,t.names.forEach(function(t){fq[t.toLowerCase()]=r}),this):(console.log(e),!0)}var yq={start:function(){cq.forEach(hq)},add:hq,get:function(t){if(!t)return!1;var e=t.toLowerCase();return void 0!==fq[e]&&pq[fq[e]]?pq[fq[e]]:void 0}},dq={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:6378249.2,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},bq=dq.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};dq.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var vq={};vq.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},vq.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},vq.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},vq.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},vq.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},vq.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},vq.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},vq.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},vq.militargeographische_institut={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},vq.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},vq.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},vq.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},vq.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},vq.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},vq.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},vq.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},vq.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},vq.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};var mq=function(t,e,r,n,o,i,a){var s={};return s.datum_type=void 0===t||"none"===t?mV:vV,e&&(s.datum_params=e.map(parseFloat),0===s.datum_params[0]&&0===s.datum_params[1]&&0===s.datum_params[2]||(s.datum_type=yV),s.datum_params.length>3&&(0===s.datum_params[3]&&0===s.datum_params[4]&&0===s.datum_params[5]&&0===s.datum_params[6]||(s.datum_type=dV,s.datum_params[3]*=OV,s.datum_params[4]*=OV,s.datum_params[5]*=OV,s.datum_params[6]=s.datum_params[6]/1e6+1))),a&&(s.datum_type=bV,s.grids=a),s.a=r,s.b=n,s.es=o,s.ep2=i,s},gq={};function Sq(t){if(0===t.length)return null;var e="@"===t[0];return e&&(t=t.slice(1)),"null"===t?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:gq[t]||null,isNull:!1}}function wq(t){return t/3600*Math.PI/180}function Oq(t,e,r){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,r)))}function _q(t){return t.map(function(t){return[wq(t.longitudeShift),wq(t.latitudeShift)]})}function Pq(t,e,r){return{name:Oq(t,e+8,e+16).trim(),parent:Oq(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,r),upperLatitude:t.getFloat64(e+88,r),lowerLongitude:t.getFloat64(e+104,r),upperLongitude:t.getFloat64(e+120,r),latitudeInterval:t.getFloat64(e+136,r),longitudeInterval:t.getFloat64(e+152,r),gridNodeCount:t.getInt32(e+168,r)}}function Eq(t,e,r,n){for(var o=e+176,i=[],a=0;a<r.gridNodeCount;a++){var s={latitudeShift:t.getFloat32(o+16*a,n),longitudeShift:t.getFloat32(o+16*a+4,n),latitudeAccuracy:t.getFloat32(o+16*a+8,n),longitudeAccuracy:t.getFloat32(o+16*a+12,n)};i.push(s)}return i}function Cq(t,e){if(!(this instanceof Cq))return new Cq(t);e=e||function(t){if(t)throw t};var r=rq(t);if("object"==typeof r){var n=Cq.projections.get(r.projName);if(n){if(r.datumCode&&"none"!==r.datumCode){var o=LV(vq,r.datumCode);o&&(r.datum_params=r.datum_params||(o.towgs84?o.towgs84.split(","):null),r.ellps=o.ellipse,r.datumName=o.datumName?o.datumName:r.datumCode)}r.k0=r.k0||1,r.axis=r.axis||"enu",r.ellps=r.ellps||"wgs84",r.lat1=r.lat1||r.lat0;var i,a,s,u,l,c,f,p=function(t,e,r,n,o){if(!t){var i=LV(dq,n);i||(i=bq),t=i.a,e=i.b,r=i.rf}return r&&!e&&(e=(1-1/r)*t),(0===r||Math.abs(t-e)<TV)&&(o=!0,e=t),{a:t,b:e,rf:r,sphere:o}}(r.a,r.b,r.rf,r.ellps,r.sphere),h=(i=p.a,a=p.b,p.rf,s=r.R_A,c=((u=i*i)-(l=a*a))/u,f=0,s?(u=(i*=1-c*(PV+c*(EV+c*CV)))*i,c=0):f=Math.sqrt(c),{es:c,e:f,ep2:(u-l)/l}),y=function(t){return void 0===t?null:t.split(",").map(Sq)}(r.nadgrids),d=r.datum||mq(r.datumCode,r.datum_params,p.a,p.b,h.es,h.ep2,y);nq(this,r),nq(this,n),this.a=p.a,this.b=p.b,this.rf=p.rf,this.sphere=p.sphere,this.es=h.es,this.e=h.e,this.ep2=h.ep2,this.datum=d,this.init(),e(null,this)}else e(t)}else e(t)}Cq.projections=yq,Cq.projections.start();var Tq=Cq;function jq(t,e,r){var n,o,i,a,s=t.x,u=t.y,l=t.z?t.z:0;if(u<-_V&&u>-1.001*_V)u=-_V;else if(u>_V&&u<1.001*_V)u=_V;else{if(u<-_V)return{x:-1/0,y:-1/0,z:t.z};if(u>_V)return{x:1/0,y:1/0,z:t.z}}return s>Math.PI&&(s-=2*Math.PI),o=Math.sin(u),a=Math.cos(u),i=o*o,{x:((n=r/Math.sqrt(1-e*i))+l)*a*Math.cos(s),y:(n+l)*a*Math.sin(s),z:(n*(1-e)+l)*o}}function kq(t,e,r,n){var o,i,a,s,u,l,c,f,p,h,y,d,b,v,m,g=t.x,S=t.y,w=t.z?t.z:0;if(o=Math.sqrt(g*g+S*S),i=Math.sqrt(g*g+S*S+w*w),o/r<1e-12){if(v=0,i/r<1e-12)return _V,m=-n,{x:t.x,y:t.y,z:t.z}}else v=Math.atan2(S,g);a=w/i,f=(s=o/i)*(1-e)*(u=1/Math.sqrt(1-e*(2-e)*s*s)),p=a*u,b=0;do{b++,l=e*(c=r/Math.sqrt(1-e*p*p))/(c+(m=o*f+w*p-c*(1-e*p*p))),d=(y=a*(u=1/Math.sqrt(1-l*(2-l)*s*s)))*f-(h=s*(1-l)*u)*p,f=h,p=y}while(d*d>1e-24&&b<30);return{x:v,y:Math.atan(y/Math.abs(h)),z:m}}function xq(t){return t===yV||t===dV}function Aq(t,e,r){if(function(t,e){return t.datum_type===e.datum_type&&!(t.a!==e.a||Math.abs(t.es-e.es)>5e-11)&&(t.datum_type===yV?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:t.datum_type!==dV||t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6])}(t,e))return r;if(t.datum_type===mV||e.datum_type===mV)return r;var n=t.a,o=t.es;if(t.datum_type===bV){if(0!==Iq(t,!1,r))return;n=gV,o=wV}var i=e.a,a=e.b,s=e.es;if(e.datum_type===bV&&(i=gV,a=SV,s=wV),o===s&&n===i&&!xq(t.datum_type)&&!xq(e.datum_type))return r;if((r=jq(r,o,n),xq(t.datum_type)&&(r=function(t,e,r){if(e===yV)return{x:t.x+r[0],y:t.y+r[1],z:t.z+r[2]};if(e===dV){var n=r[0],o=r[1],i=r[2],a=r[3],s=r[4],u=r[5],l=r[6];return{x:l*(t.x-u*t.y+s*t.z)+n,y:l*(u*t.x+t.y-a*t.z)+o,z:l*(-s*t.x+a*t.y+t.z)+i}}}(r,t.datum_type,t.datum_params)),xq(e.datum_type)&&(r=function(t,e,r){if(e===yV)return{x:t.x-r[0],y:t.y-r[1],z:t.z-r[2]};if(e===dV){var n=r[0],o=r[1],i=r[2],a=r[3],s=r[4],u=r[5],l=r[6],c=(t.x-n)/l,f=(t.y-o)/l,p=(t.z-i)/l;return{x:c+u*f-s*p,y:-u*c+f+a*p,z:s*c-a*f+p}}}(r,e.datum_type,e.datum_params)),r=kq(r,s,i,a),e.datum_type===bV)&&0!==Iq(e,!0,r))return;return r}function Iq(t,e,r){if(null===t.grids||0===t.grids.length)return console.log("Grid shift grids not found"),-1;var n={x:-r.x,y:r.y},o={x:Number.NaN,y:Number.NaN},i=[];t:for(var a=0;a<t.grids.length;a++){var s=t.grids[a];if(i.push(s.name),s.isNull){o=n;break}if(s.mandatory,null!==s.grid)for(var u=s.grid.subgrids,l=0,c=u.length;l<c;l++){var f=u[l],p=(Math.abs(f.del[1])+Math.abs(f.del[0]))/1e4,h=f.ll[0]-p,y=f.ll[1]-p,d=f.ll[0]+(f.lim[0]-1)*f.del[0]+p,b=f.ll[1]+(f.lim[1]-1)*f.del[1]+p;if(!(y>n.y||h>n.x||b<n.y||d<n.x)&&(o=Nq(n,e,f),!isNaN(o.x)))break t}else if(s.mandatory)return console.log("Unable to find mandatory grid '"+s.name+"'"),-1}return isNaN(o.x)?(console.log("Failed to find a grid shift table for location '"+-n.x*kV+" "+n.y*kV+" tried: '"+i+"'"),-1):(r.x=-o.x,r.y=o.y,0)}function Nq(t,e,r){var n={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return n;var o={x:t.x,y:t.y};o.x-=r.ll[0],o.y-=r.ll[1],o.x=aq(o.x-Math.PI)+Math.PI;var i=Rq(o,r);if(e){if(isNaN(i.x))return n;i.x=o.x-i.x,i.y=o.y-i.y;var a,s,u=9;do{if(s=Rq(i,r),isNaN(s.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}a={x:o.x-(s.x+i.x),y:o.y-(s.y+i.y)},i.x+=a.x,i.y+=a.y}while(u--&&Math.abs(a.x)>1e-12&&Math.abs(a.y)>1e-12);if(u<0)return console.log("Inverse grid shift iterator failed to converge."),n;n.x=aq(i.x+r.ll[0]),n.y=i.y+r.ll[1]}else isNaN(i.x)||(n.x=t.x+i.x,n.y=t.y+i.y);return n}function Rq(t,e){var r,n={x:t.x/e.del[0],y:t.y/e.del[1]},o=Math.floor(n.x),i=Math.floor(n.y),a=n.x-1*o,s=n.y-1*i,u={x:Number.NaN,y:Number.NaN};if(o<0||o>=e.lim[0])return u;if(i<0||i>=e.lim[1])return u;r=i*e.lim[0]+o;var l=e.cvs[r][0],c=e.cvs[r][1];r++;var f=e.cvs[r][0],p=e.cvs[r][1];r+=e.lim[0];var h=e.cvs[r][0],y=e.cvs[r][1];r--;var d=e.cvs[r][0],b=e.cvs[r][1],v=a*s,m=a*(1-s),g=(1-a)*(1-s),S=(1-a)*s;return u.x=g*l+m*f+S*d+v*h,u.y=g*c+m*p+S*b+v*y,u}function Mq(t,e,r){var n,o,i,a=r.x,s=r.y,u=r.z||0,l={};for(i=0;i<3;i++)if(!e||2!==i||void 0!==r.z)switch(0===i?(n=a,o=-1!=="ew".indexOf(t.axis[i])?"x":"y"):1===i?(n=s,o=-1!=="ns".indexOf(t.axis[i])?"y":"x"):(n=u,o="z"),t.axis[i]){case"e":l[o]=n;break;case"w":l[o]=-n;break;case"n":l[o]=n;break;case"s":l[o]=-n;break;case"u":void 0!==r[o]&&(l.z=n);break;case"d":void 0!==r[o]&&(l.z=-n);break;default:return null}return l}function Lq(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}function Bq(t){if("function"==typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof t||t!=t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function Dq(t,e,r,n){var o,i=void 0!==(r=Array.isArray(r)?Lq(r):{x:r.x,y:r.y,z:r.z,m:r.m}).z;if(function(t){Bq(t.x),Bq(t.y)}(r),t.datum&&e.datum&&function(t,e){return(t.datum.datum_type===yV||t.datum.datum_type===dV||t.datum.datum_type===bV)&&"WGS84"!==e.datumCode||(e.datum.datum_type===yV||e.datum.datum_type===dV||e.datum.datum_type===bV)&&"WGS84"!==t.datumCode}(t,e)&&(r=Dq(t,o=new Tq("WGS84"),r,n),t=o),n&&"enu"!==t.axis&&(r=Mq(t,!1,r)),"longlat"===t.projName)r={x:r.x*jV,y:r.y*jV,z:r.z||0};else if(t.to_meter&&(r={x:r.x*t.to_meter,y:r.y*t.to_meter,z:r.z||0}),!(r=t.inverse(r)))return;if(t.from_greenwich&&(r.x+=t.from_greenwich),r=Aq(t.datum,e.datum,r))return e.from_greenwich&&(r={x:r.x-e.from_greenwich,y:r.y,z:r.z||0}),"longlat"===e.projName?r={x:r.x*kV,y:r.y*kV,z:r.z||0}:(r=e.forward(r),e.to_meter&&(r={x:r.x/e.to_meter,y:r.y/e.to_meter,z:r.z||0})),n&&"enu"!==e.axis?Mq(e,!0,r):(r&&!i&&delete r.z,r)}var Fq=Tq("WGS84");function Uq(t,e,r,n){var o,i,a;return Array.isArray(r)?(o=Dq(t,e,r,n)||{x:NaN,y:NaN},r.length>2?void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name?"number"==typeof o.z?[o.x,o.y,o.z].concat(r.splice(3)):[o.x,o.y,r[2]].concat(r.splice(3)):[o.x,o.y].concat(r.splice(2)):[o.x,o.y]):(i=Dq(t,e,r,n),2===(a=Object.keys(r)).length?i:(a.forEach(function(n){if(void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name){if("x"===n||"y"===n||"z"===n)return}else if("x"===n||"y"===n)return;i[n]=r[n]}),i))}function Gq(t){return t instanceof Tq?t:t.oProj?t.oProj:Tq(t)}var Vq=function(t,e,r){t=Gq(t);var n,o=!1;return void 0===e?(e=t,t=Fq,o=!0):(void 0!==e.x||Array.isArray(e))&&(r=e,e=t,t=Fq,o=!0),e=Gq(e),r?Uq(t,e,r):(n={forward:function(r,n){return Uq(t,e,r,n)},inverse:function(r,n){return Uq(e,t,r,n)}},o&&(n.oProj=e),n)},qq=6,Hq="AJSAJS",zq="AFAFAF",Jq=65,Wq=73,Kq=79,Qq=86,Yq=90,Xq={forward:Zq,inverse:function(t){var e=rH(oH(t.toUpperCase()));if(e.lat&&e.lon)return[e.lon,e.lat,e.lon,e.lat];return[e.left,e.bottom,e.right,e.top]},toPoint:$q};function Zq(t,e){return e=e||5,function(t,e){var r="00000"+t.easting,n="00000"+t.northing;return t.zoneNumber+t.zoneLetter+(h=t.easting,y=t.northing,d=t.zoneNumber,b=nH(d),v=Math.floor(h/1e5),m=Math.floor(y/1e5)%20,o=v,i=m,a=b,s=a-1,u=Hq.charCodeAt(s),l=zq.charCodeAt(s),c=u+o-1,f=l+i,p=!1,c>Yq&&(c=c-Yq+Jq-1,p=!0),(c===Wq||u<Wq&&c>Wq||(c>Wq||u<Wq)&&p)&&c++,(c===Kq||u<Kq&&c>Kq||(c>Kq||u<Kq)&&p)&&++c===Wq&&c++,c>Yq&&(c=c-Yq+Jq-1),f>Qq?(f=f-Qq+Jq-1,p=!0):p=!1,(f===Wq||l<Wq&&f>Wq||(f>Wq||l<Wq)&&p)&&f++,(f===Kq||l<Kq&&f>Kq||(f>Kq||l<Kq)&&p)&&++f===Wq&&f++,f>Qq&&(f=f-Qq+Jq-1),String.fromCharCode(c)+String.fromCharCode(f))+r.substr(r.length-5,e)+n.substr(n.length-5,e);var o,i,a,s,u,l,c,f,p;var h,y,d,b,v,m}(function(t){var e,r,n,o,i,a,s,u=t.lat,l=t.lon,c=6378137,f=tH(u),p=tH(l);s=Math.floor((l+180)/6)+1,180===l&&(s=60);u>=56&&u<64&&l>=3&&l<12&&(s=32);u>=72&&u<84&&(l>=0&&l<9?s=31:l>=9&&l<21?s=33:l>=21&&l<33?s=35:l>=33&&l<42&&(s=37));a=tH(6*(s-1)-180+3),.006739496752268451,e=c/Math.sqrt(1-.00669438*Math.sin(f)*Math.sin(f)),r=Math.tan(f)*Math.tan(f),n=.006739496752268451*Math.cos(f)*Math.cos(f),o=Math.cos(f)*(p-a),i=c*(.9983242984503243*f-.002514607064228144*Math.sin(2*f)+2639046602129982e-21*Math.sin(4*f)-3.418046101696858e-9*Math.sin(6*f));var h=.9996*e*(o+(1-r+n)*o*o*o/6+(5-18*r+r*r+72*n-.39089081163157013)*o*o*o*o*o/120)+5e5,y=.9996*(i+e*Math.tan(f)*(o*o/2+(5-r+9*n+4*n*n)*o*o*o*o/24+(61-58*r+r*r+600*n-2.2240339282485886)*o*o*o*o*o*o/720));u<0&&(y+=1e7);return{northing:Math.round(y),easting:Math.round(h),zoneNumber:s,zoneLetter:function(t){var e="Z";84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C");return e}(u)}}({lat:t[1],lon:t[0]}),e)}function $q(t){var e=rH(oH(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function tH(t){return t*(Math.PI/180)}function eH(t){return t/Math.PI*180}function rH(t){var e=t.northing,r=t.easting,n=t.zoneLetter,o=t.zoneNumber;if(o<0||o>60)return null;var i,a,s,u,l,c,f,p,h=6378137,y=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),d=r-5e5,b=e;n<"N"&&(b-=1e7),c=6*(o-1)-180+3,p=(f=b/.9996/6367449.145945056)+(3*y/2-27*y*y*y/32)*Math.sin(2*f)+(21*y*y/16-55*y*y*y*y/32)*Math.sin(4*f)+151*y*y*y/96*Math.sin(6*f),i=h/Math.sqrt(1-.00669438*Math.sin(p)*Math.sin(p)),a=Math.tan(p)*Math.tan(p),s=.006739496752268451*Math.cos(p)*Math.cos(p),u=.99330562*h/Math.pow(1-.00669438*Math.sin(p)*Math.sin(p),1.5),l=d/(.9996*i);var v=p-i*Math.tan(p)/u*(l*l/2-(5+3*a+10*s-4*s*s-.06065547077041606)*l*l*l*l/24+(61+90*a+298*s+45*a*a-1.6983531815716497-3*s*s)*l*l*l*l*l*l/720);v=eH(v);var m,g=(l-(1+2*a+s)*l*l*l/6+(5-2*s+28*a-3*s*s+.05391597401814761+24*a*a)*l*l*l*l*l/120)/Math.cos(p);if(g=c+eH(g),t.accuracy){var S=rH({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});m={top:S.lat,right:S.lon,bottom:v,left:g}}else m={lat:v,lon:g};return m}function nH(t){var e=t%qq;return 0===e&&(e=qq),e}function oH(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,r=t.length,n=null,o="",i=0;!/[A-Z]/.test(e=t.charAt(i));){if(i>=2)throw"MGRSPoint bad conversion from: "+t;o+=e,i++}var a=parseInt(o,10);if(0===i||i+3>r)throw"MGRSPoint bad conversion from: "+t;var s=t.charAt(i++);if(s<="A"||"B"===s||"Y"===s||s>="Z"||"I"===s||"O"===s)throw"MGRSPoint zone letter "+s+" not handled: "+t;n=t.substring(i,i+=2);for(var u=nH(a),l=function(t,e){var r=Hq.charCodeAt(e-1),n=1e5,o=!1;for(;r!==t.charCodeAt(0);){if(++r===Wq&&r++,r===Kq&&r++,r>Yq){if(o)throw"Bad character: "+t;r=Jq,o=!0}n+=1e5}return n}(n.charAt(0),u),c=function(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;var r=zq.charCodeAt(e-1),n=0,o=!1;for(;r!==t.charCodeAt(0);){if(++r===Wq&&r++,r===Kq&&r++,r>Qq){if(o)throw"Bad character: "+t;r=Jq,o=!0}n+=1e5}return n}(n.charAt(1),u);c<iH(s);)c+=2e6;var f=r-i;if(f%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var p,h,y,d=f/2,b=0,v=0;return d>0&&(p=1e5/Math.pow(10,d),h=t.substring(i,i+d),b=parseFloat(h)*p,y=t.substring(i+d),v=parseFloat(y)*p),{easting:b+l,northing:v+c,zoneLetter:s,zoneNumber:a,accuracy:p}}function iH(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function aH(t,e,r){if(!(this instanceof aH))return new aH(t,e,r);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===e){var n=t.split(",");this.x=parseFloat(n[0],10),this.y=parseFloat(n[1],10),this.z=parseFloat(n[2],10)||0}else this.x=t,this.y=e,this.z=r||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}aH.fromMGRS=function(t){return new aH($q(t))},aH.prototype.toMGRS=function(t){return Zq([this.x,this.y],t)};var sH=aH,uH=1,lH=.25,cH=.046875,fH=.01953125,pH=.01068115234375,hH=.75,yH=.46875,dH=.013020833333333334,bH=.007120768229166667,vH=.3645833333333333,mH=.005696614583333333,gH=.3076171875;function SH(t){var e=[];e[0]=uH-t*(lH+t*(cH+t*(fH+t*pH))),e[1]=t*(hH-t*(cH+t*(fH+t*pH)));var r=t*t;return e[2]=r*(yH-t*(dH+t*bH)),r*=t,e[3]=r*(vH-t*mH),e[4]=r*t*gH,e}function wH(t,e,r,n){return r*=e,e*=e,n[0]*t-r*(n[1]+e*(n[2]+e*(n[3]+e*n[4])))}var OH=20;function _H(t,e,r){for(var n=1/(1-e),o=t,i=OH;i;--i){var a=Math.sin(o),s=1-e*a*a;if(o-=s=(wH(o,a,Math.cos(o),r)-t)*(s*Math.sqrt(s))*n,Math.abs(s)<TV)return o}return o}var PH={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=SH(this.es),this.ml0=wH(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(t){var e,r,n,o=t.x,i=t.y,a=aq(o-this.long0),s=Math.sin(i),u=Math.cos(i);if(this.es){var l=u*a,c=Math.pow(l,2),f=this.ep2*Math.pow(u,2),p=Math.pow(f,2),h=Math.abs(u)>TV?Math.tan(i):0,y=Math.pow(h,2),d=Math.pow(y,2);e=1-this.es*Math.pow(s,2),l/=Math.sqrt(e);var b=wH(i,s,u,this.en);r=this.a*(this.k0*l*(1+c/6*(1-y+f+c/20*(5-18*y+d+14*f-58*y*f+c/42*(61+179*d-d*y-479*y)))))+this.x0,n=this.a*(this.k0*(b-this.ml0+s*a*l/2*(1+c/12*(5-y+9*f+4*p+c/30*(61+d-58*y+270*f-330*y*f+c/56*(1385+543*d-d*y-3111*y))))))+this.y0}else{var v=u*Math.sin(a);if(Math.abs(Math.abs(v)-1)<TV)return 93;if(r=.5*this.a*this.k0*Math.log((1+v)/(1-v))+this.x0,n=u*Math.cos(a)/Math.sqrt(1-Math.pow(v,2)),(v=Math.abs(n))>=1){if(v-1>TV)return 93;n=0}else n=Math.acos(n);i<0&&(n=-n),n=this.a*this.k0*(n-this.lat0)+this.y0}return t.x=r,t.y=n,t},inverse:function(t){var e,r,n,o,i=(t.x-this.x0)*(1/this.a),a=(t.y-this.y0)*(1/this.a);if(this.es)if(r=_H(e=this.ml0+a/this.k0,this.es,this.en),Math.abs(r)<_V){var s=Math.sin(r),u=Math.cos(r),l=Math.abs(u)>TV?Math.tan(r):0,c=this.ep2*Math.pow(u,2),f=Math.pow(c,2),p=Math.pow(l,2),h=Math.pow(p,2);e=1-this.es*Math.pow(s,2);var y=i*Math.sqrt(e)/this.k0,d=Math.pow(y,2);n=r-(e*=l)*d/(1-this.es)*.5*(1-d/12*(5+3*p-9*c*p+c-4*f-d/30*(61+90*p-252*c*p+45*h+46*c-d/56*(1385+3633*p+4095*h+1574*h*p)))),o=aq(this.long0+y*(1-d/6*(1+2*p+c-d/20*(5+28*p+24*h+8*c*p+6*c-d/42*(61+662*p+1320*h+720*h*p))))/u)}else n=_V*iq(a),o=0;else{var b=Math.exp(i/this.k0),v=.5*(b-1/b),m=this.lat0+a/this.k0,g=Math.cos(m);e=Math.sqrt((1-Math.pow(g,2))/(1+Math.pow(v,2))),n=Math.asin(e),a<0&&(n=-n),o=0===v&&0===g?0:aq(Math.atan2(v,g)+this.long0)}return t.x=o,t.y=n,t},names:["Fast_Transverse_Mercator","Fast Transverse Mercator"]};function EH(t){var e=Math.exp(t);return e=(e-1/e)/2}function CH(t,e){t=Math.abs(t),e=Math.abs(e);var r=Math.max(t,e),n=Math.min(t,e)/(r||1);return r*Math.sqrt(1+Math.pow(n,2))}function TH(t){var e=Math.abs(t);return e=function(t){var e=1+t,r=e-1;return 0===r?t:t*Math.log(e)/r}(e*(1+e/(CH(1,e)+1))),t<0?-e:e}function jH(t,e){for(var r,n=2*Math.cos(2*e),o=t.length-1,i=t[o],a=0;--o>=0;)r=n*i-a+t[o],a=i,i=r;return e+r*Math.sin(2*e)}function kH(t,e,r){for(var n,o,i=Math.sin(e),a=Math.cos(e),s=EH(r),u=function(t){var e=Math.exp(t);return e=(e+1/e)/2}(r),l=2*a*u,c=-2*i*s,f=t.length-1,p=t[f],h=0,y=0,d=0;--f>=0;)n=y,o=h,p=l*(y=p)-n-c*(h=d)+t[f],d=c*y-o+l*h;return[(l=i*u)*p-(c=a*s)*d,l*d+c*p]}var xH={init:function(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(PH.init.apply(this),this.forward=PH.forward,this.inverse=PH.inverse),this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),r=e;this.cgb[0]=e*(2+e*(-2/3+e*(e*(116/45+e*(26/45+e*(-2854/675)))-2))),this.cbg[0]=e*(e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))-2),r*=e,this.cgb[1]=r*(7/3+e*(e*(-227/45+e*(2704/315+e*(2323/945)))-1.6)),this.cbg[1]=r*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),r*=e,this.cgb[2]=r*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=r*(-26/15+e*(34/21+e*(1.6+e*(-12686/2835)))),r*=e,this.cgb[3]=r*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=r*(1237/630+e*(e*(-24832/14175)-2.4)),r*=e,this.cgb[4]=r*(4174/315+e*(-144838/6237)),this.cbg[4]=r*(-734/315+e*(109598/31185)),r*=e,this.cgb[5]=r*(601676/22275),this.cbg[5]=r*(444337/155925),r=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+r*(.25+r*(1/64+r/256))),this.utg[0]=e*(e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))-.5),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=r*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=r*(13/48+e*(e*(557/1440+e*(281/630+e*(-1983433/1935360)))-.6)),r*=e,this.utg[2]=r*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=r*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),r*=e,this.utg[3]=r*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=r*(49561/161280+e*(-179/168+e*(6601661/7257600))),r*=e,this.utg[4]=r*(-4583/161280+e*(108847/3991680)),this.gtu[4]=r*(34729/80640+e*(-3418889/1995840)),r*=e,this.utg[5]=-.03233083094085698*r,this.gtu[5]=.6650675310896665*r;var n=jH(this.cbg,this.lat0);this.Zb=-this.Qn*(n+function(t,e){for(var r,n=2*Math.cos(e),o=t.length-1,i=t[o],a=0;--o>=0;)r=n*i-a+t[o],a=i,i=r;return Math.sin(e)*r}(this.gtu,2*n))},forward:function(t){var e=aq(t.x-this.long0),r=t.y;r=jH(this.cbg,r);var n=Math.sin(r),o=Math.cos(r),i=Math.sin(e),a=Math.cos(e);r=Math.atan2(n,a*o),e=Math.atan2(i*o,CH(n,o*a)),e=TH(Math.tan(e));var s,u,l=kH(this.gtu,2*r,2*e);return r+=l[0],e+=l[1],Math.abs(e)<=2.623395162778?(s=this.a*(this.Qn*e)+this.x0,u=this.a*(this.Qn*r+this.Zb)+this.y0):(s=1/0,u=1/0),t.x=s,t.y=u,t},inverse:function(t){var e,r,n=(t.x-this.x0)*(1/this.a),o=(t.y-this.y0)*(1/this.a);if(o=(o-this.Zb)/this.Qn,n/=this.Qn,Math.abs(n)<=2.623395162778){var i=kH(this.utg,2*o,2*n);o+=i[0],n+=i[1],n=Math.atan(EH(n));var a=Math.sin(o),s=Math.cos(o),u=Math.sin(n),l=Math.cos(n);o=Math.atan2(a*l,CH(u,l*s)),e=aq((n=Math.atan2(u,l*s))+this.long0),r=jH(this.cgb,o)}else e=1/0,r=1/0;return t.x=e,t.y=r,t},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"]};var AH={init:function(){var t=function(t,e){if(void 0===t){if((t=Math.floor(30*(aq(e)+Math.PI)/Math.PI)+1)<0)return 0;if(t>60)return 60}return t}(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*jV,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,xH.init.apply(this),this.forward=xH.forward,this.inverse=xH.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"};function IH(t,e){return Math.pow((1-t)/(1+t),e)}var NH=20;var RH={init:function(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+xV)/(Math.pow(Math.tan(.5*this.lat0+xV),this.C)*IH(this.e*t,this.ratexp))},forward:function(t){var e=t.x,r=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*r+xV),this.C)*IH(this.e*Math.sin(r),this.ratexp))-_V,t.x=this.C*e,t},inverse:function(t){for(var e=t.x/this.C,r=t.y,n=Math.pow(Math.tan(.5*r+xV)/this.K,1/this.C),o=NH;o>0&&(r=2*Math.atan(n*IH(this.e*Math.sin(t.y),-.5*this.e))-_V,!(Math.abs(r-t.y)<1e-14));--o)t.y=r;return o?(t.x=e,t.y=r,t):null},names:["gauss"]};var MH={init:function(){RH.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(t){var e,r,n,o;return t.x=aq(t.x-this.long0),RH.forward.apply(this,[t]),e=Math.sin(t.y),r=Math.cos(t.y),n=Math.cos(t.x),o=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*r*n),t.x=o*r*Math.sin(t.x),t.y=o*(this.cosc0*e-this.sinc0*r*n),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){var e,r,n,o,i;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,i=CH(t.x,t.y)){var a=2*Math.atan2(i,this.R2);e=Math.sin(a),r=Math.cos(a),o=Math.asin(r*this.sinc0+t.y*e*this.cosc0/i),n=Math.atan2(t.x*e,i*this.cosc0*r-t.y*this.sinc0*e)}else o=this.phic0,n=0;return t.x=n,t.y=o,RH.inverse.apply(this,[t]),t.x=aq(t.x+this.long0),t},names:["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]};var LH={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=TV&&(this.k0=.5*(1+iq(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=TV&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=TV&&Math.abs(Math.cos(this.lat_ts))>TV&&(this.k0=.5*this.cons*oq(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/sq(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=oq(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-_V,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(t){var e,r,n,o,i,a,s=t.x,u=t.y,l=Math.sin(u),c=Math.cos(u),f=aq(s-this.long0);return Math.abs(Math.abs(s-this.long0)-Math.PI)<=TV&&Math.abs(u+this.lat0)<=TV?(t.x=NaN,t.y=NaN,t):this.sphere?(e=2*this.k0/(1+this.sinlat0*l+this.coslat0*c*Math.cos(f)),t.x=this.a*e*c*Math.sin(f)+this.x0,t.y=this.a*e*(this.coslat0*l-this.sinlat0*c*Math.cos(f))+this.y0,t):(r=2*Math.atan(this.ssfn_(u,l,this.e))-_V,o=Math.cos(r),n=Math.sin(r),Math.abs(this.coslat0)<=TV?(i=sq(this.e,u*this.con,this.con*l),a=2*this.a*this.k0*i/this.cons,t.x=this.x0+a*Math.sin(s-this.long0),t.y=this.y0-this.con*a*Math.cos(s-this.long0),t):(Math.abs(this.sinlat0)<TV?(e=2*this.a*this.k0/(1+o*Math.cos(f)),t.y=e*n):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*n+this.cosX0*o*Math.cos(f))),t.y=e*(this.cosX0*n-this.sinX0*o*Math.cos(f))+this.y0),t.x=e*o*Math.sin(f)+this.x0,t))},inverse:function(t){var e,r,n,o,i;t.x-=this.x0,t.y-=this.y0;var a=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var s=2*Math.atan(a/(2*this.a*this.k0));return e=this.long0,r=this.lat0,a<=TV?(t.x=e,t.y=r,t):(r=Math.asin(Math.cos(s)*this.sinlat0+t.y*Math.sin(s)*this.coslat0/a),e=Math.abs(this.coslat0)<TV?this.lat0>0?aq(this.long0+Math.atan2(t.x,-1*t.y)):aq(this.long0+Math.atan2(t.x,t.y)):aq(this.long0+Math.atan2(t.x*Math.sin(s),a*this.coslat0*Math.cos(s)-t.y*this.sinlat0*Math.sin(s))),t.x=e,t.y=r,t)}if(Math.abs(this.coslat0)<=TV){if(a<=TV)return r=this.lat0,e=this.long0,t.x=e,t.y=r,t;t.x*=this.con,t.y*=this.con,n=a*this.cons/(2*this.a*this.k0),r=this.con*uq(this.e,n),e=this.con*aq(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else o=2*Math.atan(a*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,a<=TV?i=this.X0:(i=Math.asin(Math.cos(o)*this.sinX0+t.y*Math.sin(o)*this.cosX0/a),e=aq(this.long0+Math.atan2(t.x*Math.sin(o),a*this.cosX0*Math.cos(o)-t.y*this.sinX0*Math.sin(o)))),r=-1*uq(this.e,Math.tan(.5*(_V+i)));return t.x=e,t.y=r,t},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"],ssfn_:function(t,e,r){return e*=r,Math.tan(.5*(_V+t))*Math.pow((1-e)/(1+e),.5*r)}};var BH={init:function(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),r=this.a,n=1/this.rf,o=2*n-Math.pow(n,2),i=this.e=Math.sqrt(o);this.R=this.k0*r*Math.sqrt(1-o)/(1-o*Math.pow(e,2)),this.alpha=Math.sqrt(1+o/(1-o)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),s=Math.log(Math.tan(Math.PI/4+t/2)),u=Math.log((1+i*e)/(1-i*e));this.K=a-this.alpha*s+this.alpha*i/2*u},forward:function(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),r=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),n=-this.alpha*(e+r)+this.K,o=2*(Math.atan(Math.exp(n))-Math.PI/4),i=this.alpha*(t.x-this.lambda0),a=Math.atan(Math.sin(i)/(Math.sin(this.b0)*Math.tan(o)+Math.cos(this.b0)*Math.cos(i))),s=Math.asin(Math.cos(this.b0)*Math.sin(o)-Math.sin(this.b0)*Math.cos(o)*Math.cos(i));return t.y=this.R/2*Math.log((1+Math.sin(s))/(1-Math.sin(s)))+this.y0,t.x=this.R*a+this.x0,t},inverse:function(t){for(var e=t.x-this.x0,r=t.y-this.y0,n=e/this.R,o=2*(Math.atan(Math.exp(r/this.R))-Math.PI/4),i=Math.asin(Math.cos(this.b0)*Math.sin(o)+Math.sin(this.b0)*Math.cos(o)*Math.cos(n)),a=Math.atan(Math.sin(n)/(Math.cos(this.b0)*Math.cos(n)-Math.sin(this.b0)*Math.tan(o))),s=this.lambda0+a/this.alpha,u=0,l=i,c=-1e3,f=0;Math.abs(l-c)>1e-7;){if(++f>20)return;u=1/this.alpha*(Math.log(Math.tan(Math.PI/4+i/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(l))/2)),c=l,l=2*Math.atan(Math.exp(u))-Math.PI/2}return t.x=s,t.y=l,t},names:["somerc"]},DH=1e-7;var FH={init:function(){var t,e,r,n,o,i,a,s,u,l,c,f,p,h=0,y=0,d=0,b=0,v=0,m=0,g=0;this.no_off=(p="object"==typeof(f=this).PROJECTION?Object.keys(f.PROJECTION)[0]:f.PROJECTION,"no_uoff"in f||"no_off"in f||-1!==["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"].indexOf(p)),this.no_rot="no_rot"in this;var S=!1;"alpha"in this&&(S=!0);var w=!1;if("rectified_grid_angle"in this&&(w=!0),S&&(g=this.alpha),w&&(h=this.rectified_grid_angle*jV),S||w)y=this.longc;else if(d=this.long1,v=this.lat1,b=this.long2,m=this.lat2,Math.abs(v-m)<=DH||(t=Math.abs(v))<=DH||Math.abs(t-_V)<=DH||Math.abs(Math.abs(this.lat0)-_V)<=DH||Math.abs(Math.abs(m)-_V)<=DH)throw new Error;var O=1-this.es;e=Math.sqrt(O),Math.abs(this.lat0)>TV?(s=Math.sin(this.lat0),r=Math.cos(this.lat0),t=1-this.es*s*s,this.B=r*r,this.B=Math.sqrt(1+this.es*this.B*this.B/O),this.A=this.B*this.k0*e/t,(o=(n=this.B*e/(r*Math.sqrt(t)))*n-1)<=0?o=0:(o=Math.sqrt(o),this.lat0<0&&(o=-o)),this.E=o+=n,this.E*=Math.pow(sq(this.e,this.lat0,s),this.B)):(this.B=1/e,this.A=this.k0,this.E=n=o=1),S||w?(S?(c=Math.asin(Math.sin(g)/n),w||(h=g)):(c=h,g=Math.asin(n*Math.sin(c))),this.lam0=y-Math.asin(.5*(o-1/o)*Math.tan(c))/this.B):(i=Math.pow(sq(this.e,v,Math.sin(v)),this.B),a=Math.pow(sq(this.e,m,Math.sin(m)),this.B),o=this.E/i,u=(a-i)/(a+i),l=((l=this.E*this.E)-a*i)/(l+a*i),(t=d-b)<-Math.pi?b-=AV:t>Math.pi&&(b+=AV),this.lam0=aq(.5*(d+b)-Math.atan(l*Math.tan(.5*this.B*(d-b))/u)/this.B),c=Math.atan(2*Math.sin(this.B*aq(d-this.lam0))/(o-1/o)),h=g=Math.asin(n*Math.sin(c))),this.singam=Math.sin(c),this.cosgam=Math.cos(c),this.sinrot=Math.sin(h),this.cosrot=Math.cos(h),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A,this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(n*n-1)/Math.cos(g))),this.lat0<0&&(this.u_0=-this.u_0)),o=.5*c,this.v_pole_n=this.ArB*Math.log(Math.tan(xV-o)),this.v_pole_s=this.ArB*Math.log(Math.tan(xV+o))},forward:function(t){var e,r,n,o,i,a,s,u,l={};if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-_V)>TV){if(e=.5*((i=this.E/Math.pow(sq(this.e,t.y,Math.sin(t.y)),this.B))-(a=1/i)),r=.5*(i+a),o=Math.sin(this.B*t.x),n=(e*this.singam-o*this.cosgam)/r,Math.abs(Math.abs(n)-1)<TV)throw new Error;u=.5*this.ArB*Math.log((1-n)/(1+n)),a=Math.cos(this.B*t.x),s=Math.abs(a)<DH?this.A*t.x:this.ArB*Math.atan2(e*this.cosgam+o*this.singam,a)}else u=t.y>0?this.v_pole_n:this.v_pole_s,s=this.ArB*t.y;return this.no_rot?(l.x=s,l.y=u):(s-=this.u_0,l.x=u*this.cosrot+s*this.sinrot,l.y=s*this.cosrot-u*this.sinrot),l.x=this.a*l.x+this.x0,l.y=this.a*l.y+this.y0,l},inverse:function(t){var e,r,n,o,i,a,s,u={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(r=t.y,e=t.x):(r=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),o=.5*((n=Math.exp(-this.BrA*r))-1/n),i=.5*(n+1/n),s=((a=Math.sin(this.BrA*e))*this.cosgam+o*this.singam)/i,Math.abs(Math.abs(s)-1)<TV)u.x=0,u.y=s<0?-_V:_V;else{if(u.y=this.E/Math.sqrt((1+s)/(1-s)),u.y=uq(this.e,Math.pow(u.y,1/this.B)),u.y===1/0)throw new Error;u.x=-this.rB*Math.atan2(o*this.cosgam-a*this.singam,Math.cos(this.BrA*e))}return u.x+=this.lam0,u},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"]};var UH={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<TV)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),r=Math.cos(this.lat1),n=oq(this.e,e,r),o=sq(this.e,this.lat1,e),i=Math.sin(this.lat2),a=Math.cos(this.lat2),s=oq(this.e,i,a),u=sq(this.e,this.lat2,i),l=sq(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>TV?this.ns=Math.log(n/s)/Math.log(o/u):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=n/(this.ns*Math.pow(o,this.ns)),this.rh=this.a*this.f0*Math.pow(l,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(t){var e=t.x,r=t.y;Math.abs(2*Math.abs(r)-Math.PI)<=TV&&(r=iq(r)*(_V-2*TV));var n,o,i=Math.abs(Math.abs(r)-_V);if(i>TV)n=sq(this.e,r,Math.sin(r)),o=this.a*this.f0*Math.pow(n,this.ns);else{if((i=r*this.ns)<=0)return null;o=0}var a=this.ns*aq(e-this.long0);return t.x=this.k0*(o*Math.sin(a))+this.x0,t.y=this.k0*(this.rh-o*Math.cos(a))+this.y0,t},inverse:function(t){var e,r,n,o,i,a=(t.x-this.x0)/this.k0,s=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(a*a+s*s),r=1):(e=-Math.sqrt(a*a+s*s),r=-1);var u=0;if(0!==e&&(u=Math.atan2(r*a,r*s)),0!==e||this.ns>0){if(r=1/this.ns,n=Math.pow(e/(this.a*this.f0),r),-9999===(o=uq(this.e,n)))return null}else o=-_V;return i=aq(u/this.ns+this.long0),t.x=i,t.y=o,t},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"]};var GH={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(t){var e,r,n,o,i,a,s,u=t.x,l=t.y,c=aq(u-this.long0);return e=Math.pow((1+this.e*Math.sin(l))/(1-this.e*Math.sin(l)),this.alfa*this.e/2),r=2*(Math.atan(this.k*Math.pow(Math.tan(l/2+this.s45),this.alfa)/e)-this.s45),n=-c*this.alfa,o=Math.asin(Math.cos(this.ad)*Math.sin(r)+Math.sin(this.ad)*Math.cos(r)*Math.cos(n)),i=Math.asin(Math.cos(r)*Math.sin(n)/Math.cos(o)),a=this.n*i,s=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(o/2+this.s45),this.n),t.y=s*Math.cos(a)/1,t.x=s*Math.sin(a)/1,this.czech||(t.y*=-1,t.x*=-1),t},inverse:function(t){var e,r,n,o,i,a,s,u=t.x;t.x=t.y,t.y=u,this.czech||(t.y*=-1,t.x*=-1),i=Math.sqrt(t.x*t.x+t.y*t.y),o=Math.atan2(t.y,t.x)/Math.sin(this.s0),n=2*(Math.atan(Math.pow(this.ro0/i,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(n)-Math.sin(this.ad)*Math.cos(n)*Math.cos(o)),r=Math.asin(Math.cos(n)*Math.sin(o)/Math.cos(e)),t.x=this.long0-r/this.alfa,a=e,s=0;var l=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-t.y)<1e-10&&(s=1),a=t.y,l+=1}while(0===s&&l<15);return l>=15?null:t},names:["Krovak","krovak"]};function VH(t,e,r,n,o){return t*o-e*Math.sin(2*o)+r*Math.sin(4*o)-n*Math.sin(6*o)}function qH(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function HH(t){return.375*t*(1+.25*t*(1+.46875*t))}function zH(t){return.05859375*t*t*(1+.75*t)}function JH(t){return t*t*t*(35/3072)}function WH(t,e,r){var n=e*r;return t/Math.sqrt(1-n*n)}function KH(t){return Math.abs(t)<_V?t:t-iq(t)*Math.PI}function QH(t,e,r,n,o){var i,a;i=t/e;for(var s=0;s<15;s++)if(i+=a=(t-(e*i-r*Math.sin(2*i)+n*Math.sin(4*i)-o*Math.sin(6*i)))/(e-2*r*Math.cos(2*i)+4*n*Math.cos(4*i)-6*o*Math.cos(6*i)),Math.abs(a)<=1e-10)return i;return NaN}var YH={init:function(){this.sphere||(this.e0=qH(this.es),this.e1=HH(this.es),this.e2=zH(this.es),this.e3=JH(this.es),this.ml0=this.a*VH(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(t){var e,r,n=t.x,o=t.y;if(n=aq(n-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(o)*Math.sin(n)),r=this.a*(Math.atan2(Math.tan(o),Math.cos(n))-this.lat0);else{var i=Math.sin(o),a=Math.cos(o),s=WH(this.a,this.e,i),u=Math.tan(o)*Math.tan(o),l=n*Math.cos(o),c=l*l,f=this.es*a*a/(1-this.es);e=s*l*(1-c*u*(1/6-(8-u+8*f)*c/120)),r=this.a*VH(this.e0,this.e1,this.e2,this.e3,o)-this.ml0+s*i/a*c*(.5+(5-u+6*f)*c/24)}return t.x=e+this.x0,t.y=r+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,r,n=t.x/this.a,o=t.y/this.a;if(this.sphere){var i=o+this.lat0;e=Math.asin(Math.sin(i)*Math.cos(n)),r=Math.atan2(Math.tan(n),Math.cos(i))}else{var a=QH(this.ml0/this.a+o,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(a)-_V)<=TV)return t.x=this.long0,t.y=_V,o<0&&(t.y*=-1),t;var s=WH(this.a,this.e,Math.sin(a)),u=s*s*s/this.a/this.a*(1-this.es),l=Math.pow(Math.tan(a),2),c=n*this.a/s,f=c*c;e=a-s*Math.tan(a)/u*c*c*(.5-(1+3*l)*c*c/24),r=c*(1-f*(l/3+(1+3*l)*l*f/15))/Math.cos(a)}return t.x=aq(r+this.long0),t.y=KH(e),t},names:["Cassini","Cassini_Soldner","cass"]};function XH(t,e){var r;return t>1e-7?(1-t*t)*(e/(1-(r=t*e)*r)-.5/t*Math.log((1-r)/(1+r))):2*e}var ZH=.3333333333333333,$H=.17222222222222222,tz=.10257936507936508,ez=.06388888888888888,rz=.0664021164021164,nz=.016415012942191543;var oz={init:function(){var t,e=Math.abs(this.lat0);if(Math.abs(e-_V)<TV?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<TV?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=XH(this.e,1),this.mmf=.5/(1-this.es),this.apa=function(t){var e,r=[];return r[0]=t*ZH,e=t*t,r[0]+=e*$H,r[1]=e*ez,e*=t,r[0]+=e*tz,r[1]+=e*rz,r[2]=e*nz,r}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=XH(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(t){var e,r,n,o,i,a,s,u,l,c,f=t.x,p=t.y;if(f=aq(f-this.long0),this.sphere){if(i=Math.sin(p),c=Math.cos(p),n=Math.cos(f),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((r=this.mode===this.EQUIT?1+c*n:1+this.sinph0*i+this.cosph0*c*n)<=TV)return null;e=(r=Math.sqrt(2/r))*c*Math.sin(f),r*=this.mode===this.EQUIT?i:this.cosph0*i-this.sinph0*c*n}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),Math.abs(p+this.lat0)<TV)return null;r=xV-.5*p,e=(r=2*(this.mode===this.S_POLE?Math.cos(r):Math.sin(r)))*Math.sin(f),r*=n}}else{switch(s=0,u=0,l=0,n=Math.cos(f),o=Math.sin(f),i=Math.sin(p),a=XH(this.e,i),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(s=a/this.qp,u=Math.sqrt(1-s*s)),this.mode){case this.OBLIQ:l=1+this.sinb1*s+this.cosb1*u*n;break;case this.EQUIT:l=1+u*n;break;case this.N_POLE:l=_V+p,a=this.qp-a;break;case this.S_POLE:l=p-_V,a=this.qp+a}if(Math.abs(l)<TV)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:l=Math.sqrt(2/l),r=this.mode===this.OBLIQ?this.ymf*l*(this.cosb1*s-this.sinb1*u*n):(l=Math.sqrt(2/(1+u*n)))*s*this.ymf,e=this.xmf*l*u*o;break;case this.N_POLE:case this.S_POLE:a>=0?(e=(l=Math.sqrt(a))*o,r=n*(this.mode===this.S_POLE?l:-l)):e=r=0}}return t.x=this.a*e+this.x0,t.y=this.a*r+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,r,n,o,i,a,s,u,l,c,f=t.x/this.a,p=t.y/this.a;if(this.sphere){var h,y=0,d=0;if((r=.5*(h=Math.sqrt(f*f+p*p)))>1)return null;switch(r=2*Math.asin(r),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(d=Math.sin(r),y=Math.cos(r)),this.mode){case this.EQUIT:r=Math.abs(h)<=TV?0:Math.asin(p*d/h),f*=d,p=y*h;break;case this.OBLIQ:r=Math.abs(h)<=TV?this.lat0:Math.asin(y*this.sinph0+p*d*this.cosph0/h),f*=d*this.cosph0,p=(y-Math.sin(r)*this.sinph0)*h;break;case this.N_POLE:p=-p,r=_V-r;break;case this.S_POLE:r-=_V}e=0!==p||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(f,p):0}else{if(s=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(f/=this.dd,p*=this.dd,(a=Math.sqrt(f*f+p*p))<TV)return t.x=this.long0,t.y=this.lat0,t;o=2*Math.asin(.5*a/this.rq),n=Math.cos(o),f*=o=Math.sin(o),this.mode===this.OBLIQ?(s=n*this.sinb1+p*o*this.cosb1/a,i=this.qp*s,p=a*this.cosb1*n-p*this.sinb1*o):(s=p*o/a,i=this.qp*s,p=a*n)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(p=-p),!(i=f*f+p*p))return t.x=this.long0,t.y=this.lat0,t;s=1-i/this.qp,this.mode===this.S_POLE&&(s=-s)}e=Math.atan2(f,p),u=Math.asin(s),l=this.apa,c=u+u,r=u+l[0]*Math.sin(c)+l[1]*Math.sin(c+c)+l[2]*Math.sin(c+c+c)}return t.x=aq(this.long0+e),t.y=r,t},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4};function iz(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}var az={init:function(){Math.abs(this.lat1+this.lat2)<TV||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=oq(this.e3,this.sin_po,this.cos_po),this.qs1=XH(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=oq(this.e3,this.sin_po,this.cos_po),this.qs2=XH(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=XH(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>TV?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(t){var e=t.x,r=t.y;this.sin_phi=Math.sin(r),this.cos_phi=Math.cos(r);var n=XH(this.e3,this.sin_phi),o=this.a*Math.sqrt(this.c-this.ns0*n)/this.ns0,i=this.ns0*aq(e-this.long0),a=o*Math.sin(i)+this.x0,s=this.rh-o*Math.cos(i)+this.y0;return t.x=a,t.y=s,t},inverse:function(t){var e,r,n,o,i,a;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),n=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),n=-1),o=0,0!==e&&(o=Math.atan2(n*t.x,n*t.y)),n=e*this.ns0/this.a,this.sphere?a=Math.asin((this.c-n*n)/(2*this.ns0)):(r=(this.c-n*n)/this.ns0,a=this.phi1z(this.e3,r)),i=aq(o/this.ns0+this.long0),t.x=i,t.y=a,t},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(t,e){var r,n,o,i,a,s=iz(.5*e);if(t<TV)return s;for(var u=t*t,l=1;l<=25;l++)if(r=Math.sin(s),n=Math.cos(s),s+=a=.5*(i=1-(o=t*r)*o)*i/n*(e/(1-u)-r/i+.5/t*Math.log((1-o)/(1+o))),Math.abs(a)<=1e-7)return s;return null}};var sz={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(t){var e,r,n,o,i,a,s,u=t.x,l=t.y;return n=aq(u-this.long0),e=Math.sin(l),r=Math.cos(l),o=Math.cos(n),(i=this.sin_p14*e+this.cos_p14*r*o)>0||Math.abs(i)<=TV?(a=this.x0+1*this.a*r*Math.sin(n)/i,s=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*r*o)/i):(a=this.x0+this.infinity_dist*r*Math.sin(n),s=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*r*o)),t.x=a,t.y=s,t},inverse:function(t){var e,r,n,o,i,a;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(o=Math.atan2(e,this.rc),r=Math.sin(o),a=iz((n=Math.cos(o))*this.sin_p14+t.y*r*this.cos_p14/e),i=Math.atan2(t.x*r,e*this.cos_p14*n-t.y*this.sin_p14*r),i=aq(this.long0+i)):(a=this.phic0,i=0),t.x=i,t.y=a,t},names:["gnom"]};var uz={init:function(){this.sphere||(this.k0=oq(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(t){var e,r,n=t.x,o=t.y,i=aq(n-this.long0);if(this.sphere)e=this.x0+this.a*i*Math.cos(this.lat_ts),r=this.y0+this.a*Math.sin(o)/Math.cos(this.lat_ts);else{var a=XH(this.e,Math.sin(o));e=this.x0+this.a*this.k0*i,r=this.y0+this.a*a*.5/this.k0}return t.x=e,t.y=r,t},inverse:function(t){var e,r;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=aq(this.long0+t.x/this.a/Math.cos(this.lat_ts)),r=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(r=function(t,e){var r=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-r)<1e-6)return e<0?-1*_V:_V;for(var n,o,i,a,s=Math.asin(.5*e),u=0;u<30;u++)if(o=Math.sin(s),i=Math.cos(s),a=t*o,s+=n=Math.pow(1-a*a,2)/(2*i)*(e/(1-t*t)-o/(1-a*a)+.5/t*Math.log((1-a)/(1+a))),Math.abs(n)<=1e-10)return s;return NaN}(this.e,2*t.y*this.k0/this.a),e=aq(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=r,t},names:["cea"]};var lz={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(t){var e=t.x,r=t.y,n=aq(e-this.long0),o=KH(r-this.lat0);return t.x=this.x0+this.a*n*this.rc,t.y=this.y0+this.a*o,t},inverse:function(t){var e=t.x,r=t.y;return t.x=aq(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=KH(this.lat0+(r-this.y0)/this.a),t},names:["Equirectangular","Equidistant_Cylindrical","eqc"]},cz=20;var fz={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=qH(this.es),this.e1=HH(this.es),this.e2=zH(this.es),this.e3=JH(this.es),this.ml0=this.a*VH(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(t){var e,r,n,o=t.x,i=t.y,a=aq(o-this.long0);if(n=a*Math.sin(i),this.sphere)Math.abs(i)<=TV?(e=this.a*a,r=-1*this.a*this.lat0):(e=this.a*Math.sin(n)/Math.tan(i),r=this.a*(KH(i-this.lat0)+(1-Math.cos(n))/Math.tan(i)));else if(Math.abs(i)<=TV)e=this.a*a,r=-1*this.ml0;else{var s=WH(this.a,this.e,Math.sin(i))/Math.tan(i);e=s*Math.sin(n),r=this.a*VH(this.e0,this.e1,this.e2,this.e3,i)-this.ml0+s*(1-Math.cos(n))}return t.x=e+this.x0,t.y=r+this.y0,t},inverse:function(t){var e,r,n,o,i,a,s,u,l;if(n=t.x-this.x0,o=t.y-this.y0,this.sphere)if(Math.abs(o+this.a*this.lat0)<=TV)e=aq(n/this.a+this.long0),r=0;else{var c;for(a=this.lat0+o/this.a,s=n*n/this.a/this.a+a*a,u=a,i=cz;i;--i)if(u+=l=-1*(a*(u*(c=Math.tan(u))+1)-u-.5*(u*u+s)*c)/((u-a)/c-1),Math.abs(l)<=TV){r=u;break}e=aq(this.long0+Math.asin(n*Math.tan(u)/this.a)/Math.sin(r))}else if(Math.abs(o+this.ml0)<=TV)r=0,e=aq(this.long0+n/this.a);else{var f,p,h,y,d;for(a=(this.ml0+o)/this.a,s=n*n/this.a/this.a+a*a,u=a,i=cz;i;--i)if(d=this.e*Math.sin(u),f=Math.sqrt(1-d*d)*Math.tan(u),p=this.a*VH(this.e0,this.e1,this.e2,this.e3,u),h=this.e0-2*this.e1*Math.cos(2*u)+4*this.e2*Math.cos(4*u)-6*this.e3*Math.cos(6*u),u-=l=(a*(f*(y=p/this.a)+1)-y-.5*f*(y*y+s))/(this.es*Math.sin(2*u)*(y*y+s-2*a*y)/(4*f)+(a-y)*(f*h-2/Math.sin(2*u))-h),Math.abs(l)<=TV){r=u;break}f=Math.sqrt(1-this.es*Math.pow(Math.sin(r),2))*Math.tan(r),e=aq(this.long0+Math.asin(n*f/this.a)/Math.sin(r))}return t.x=e,t.y=r,t},names:["Polyconic","poly"]};var pz={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(t){var e,r=t.x,n=t.y-this.lat0,o=r-this.long0,i=n/OV*1e-5,a=o,s=1,u=0;for(e=1;e<=10;e++)s*=i,u+=this.A[e]*s;var l,c=u,f=a,p=1,h=0,y=0,d=0;for(e=1;e<=6;e++)l=h*c+p*f,p=p*c-h*f,h=l,y=y+this.B_re[e]*p-this.B_im[e]*h,d=d+this.B_im[e]*p+this.B_re[e]*h;return t.x=d*this.a+this.x0,t.y=y*this.a+this.y0,t},inverse:function(t){var e,r,n=t.x,o=t.y,i=n-this.x0,a=(o-this.y0)/this.a,s=i/this.a,u=1,l=0,c=0,f=0;for(e=1;e<=6;e++)r=l*a+u*s,u=u*a-l*s,l=r,c=c+this.C_re[e]*u-this.C_im[e]*l,f=f+this.C_im[e]*u+this.C_re[e]*l;for(var p=0;p<this.iterations;p++){var h,y=c,d=f,b=a,v=s;for(e=2;e<=6;e++)h=d*c+y*f,y=y*c-d*f,d=h,b+=(e-1)*(this.B_re[e]*y-this.B_im[e]*d),v+=(e-1)*(this.B_im[e]*y+this.B_re[e]*d);y=1,d=0;var m=this.B_re[1],g=this.B_im[1];for(e=2;e<=6;e++)h=d*c+y*f,y=y*c-d*f,d=h,m+=e*(this.B_re[e]*y-this.B_im[e]*d),g+=e*(this.B_im[e]*y+this.B_re[e]*d);var S=m*m+g*g;c=(b*m+v*g)/S,f=(v*m-b*g)/S}var w=c,O=f,_=1,P=0;for(e=1;e<=9;e++)_*=w,P+=this.D[e]*_;var E=this.lat0+P*OV*1e5,C=this.long0+O;return t.x=C,t.y=E,t},names:["New_Zealand_Map_Grid","nzmg"]};var hz={init:function(){},forward:function(t){var e=t.x,r=t.y,n=aq(e-this.long0),o=this.x0+this.a*n,i=this.y0+this.a*Math.log(Math.tan(Math.PI/4+r/2.5))*1.25;return t.x=o,t.y=i,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e=aq(this.long0+t.x/this.a),r=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=r,t},names:["Miller_Cylindrical","mill"]},yz=20;var dz={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=SH(this.es)},forward:function(t){var e,r,n=t.x,o=t.y;if(n=aq(n-this.long0),this.sphere){if(this.m)for(var i=this.n*Math.sin(o),a=yz;a;--a){var s=(this.m*o+Math.sin(o)-i)/(this.m+Math.cos(o));if(o-=s,Math.abs(s)<TV)break}else o=1!==this.n?Math.asin(this.n*Math.sin(o)):o;e=this.a*this.C_x*n*(this.m+Math.cos(o)),r=this.a*this.C_y*o}else{var u=Math.sin(o),l=Math.cos(o);r=this.a*wH(o,u,l,this.en),e=this.a*n*l/Math.sqrt(1-this.es*u*u)}return t.x=e,t.y=r,t},inverse:function(t){var e,r,n;return t.x-=this.x0,r=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,r/=this.C_x*(this.m+Math.cos(e)),this.m?e=iz((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=iz(Math.sin(e)/this.n)),r=aq(r+this.long0),e=KH(e)):(e=_H(t.y/this.a,this.es,this.en),(n=Math.abs(e))<_V?(n=Math.sin(e),r=aq(this.long0+t.x*Math.sqrt(1-this.es*n*n)/(this.a*Math.cos(e)))):n-TV<_V&&(r=this.long0)),t.x=r,t.y=e,t},names:["Sinusoidal","sinu"]};var bz={init:function(){},forward:function(t){for(var e=t.x,r=t.y,n=aq(e-this.long0),o=r,i=Math.PI*Math.sin(r);;){var a=-(o+Math.sin(o)-i)/(1+Math.cos(o));if(o+=a,Math.abs(a)<TV)break}o/=2,Math.PI/2-Math.abs(r)<TV&&(n=0);var s=.900316316158*this.a*n*Math.cos(o)+this.x0,u=1.4142135623731*this.a*Math.sin(o)+this.y0;return t.x=s,t.y=u,t},inverse:function(t){var e,r;t.x-=this.x0,t.y-=this.y0,r=t.y/(1.4142135623731*this.a),Math.abs(r)>.999999999999&&(r=.999999999999),e=Math.asin(r);var n=aq(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));n<-Math.PI&&(n=-Math.PI),n>Math.PI&&(n=Math.PI),r=(2*e+Math.sin(2*e))/Math.PI,Math.abs(r)>1&&(r=1);var o=Math.asin(r);return t.x=n,t.y=o,t},names:["Mollweide","moll"]};var vz={init:function(){Math.abs(this.lat1+this.lat2)<TV||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=qH(this.es),this.e1=HH(this.es),this.e2=zH(this.es),this.e3=JH(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=oq(this.e,this.sinphi,this.cosphi),this.ml1=VH(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<TV?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=oq(this.e,this.sinphi,this.cosphi),this.ml2=VH(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=VH(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(t){var e,r=t.x,n=t.y;if(this.sphere)e=this.a*(this.g-n);else{var o=VH(this.e0,this.e1,this.e2,this.e3,n);e=this.a*(this.g-o)}var i=this.ns*aq(r-this.long0),a=this.x0+e*Math.sin(i),s=this.y0+this.rh-e*Math.cos(i);return t.x=a,t.y=s,t},inverse:function(t){var e,r,n,o;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(r=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(r=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var i=0;return 0!==r&&(i=Math.atan2(e*t.x,e*t.y)),this.sphere?(o=aq(this.long0+i/this.ns),n=KH(this.g-r/this.a),t.x=o,t.y=n,t):(n=QH(this.g-r/this.a,this.e0,this.e1,this.e2,this.e3),o=aq(this.long0+i/this.ns),t.x=o,t.y=n,t)},names:["Equidistant_Conic","eqdc"]};var mz={init:function(){this.R=this.a},forward:function(t){var e,r,n=t.x,o=t.y,i=aq(n-this.long0);Math.abs(o)<=TV&&(e=this.x0+this.R*i,r=this.y0);var a=iz(2*Math.abs(o/Math.PI));(Math.abs(i)<=TV||Math.abs(Math.abs(o)-_V)<=TV)&&(e=this.x0,r=o>=0?this.y0+Math.PI*this.R*Math.tan(.5*a):this.y0+Math.PI*this.R*-Math.tan(.5*a));var s=.5*Math.abs(Math.PI/i-i/Math.PI),u=s*s,l=Math.sin(a),c=Math.cos(a),f=c/(l+c-1),p=f*f,h=f*(2/l-1),y=h*h,d=Math.PI*this.R*(s*(f-y)+Math.sqrt(u*(f-y)*(f-y)-(y+u)*(p-y)))/(y+u);i<0&&(d=-d),e=this.x0+d;var b=u+f;return d=Math.PI*this.R*(h*b-s*Math.sqrt((y+u)*(u+1)-b*b))/(y+u),r=o>=0?this.y0+d:this.y0-d,t.x=e,t.y=r,t},inverse:function(t){var e,r,n,o,i,a,s,u,l,c,f,p;return t.x-=this.x0,t.y-=this.y0,f=Math.PI*this.R,i=(n=t.x/f)*n+(o=t.y/f)*o,f=3*(o*o/(u=-2*(a=-Math.abs(o)*(1+i))+1+2*o*o+i*i)+(2*(s=a-2*o*o+n*n)*s*s/u/u/u-9*a*s/u/u)/27)/(l=(a-s*s/3/u)/u)/(c=2*Math.sqrt(-l/3)),Math.abs(f)>1&&(f=f>=0?1:-1),p=Math.acos(f)/3,r=t.y>=0?(-c*Math.cos(p+Math.PI/3)-s/3/u)*Math.PI:-(-c*Math.cos(p+Math.PI/3)-s/3/u)*Math.PI,e=Math.abs(n)<TV?this.long0:aq(this.long0+Math.PI*(i-1+Math.sqrt(1+2*(n*n-o*o)+i*i))/2/n),t.x=e,t.y=r,t},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]};var gz={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(t){var e,r,n,o,i,a,s,u,l,c,f,p,h,y,d,b,v,m,g,S,w,O,_=t.x,P=t.y,E=Math.sin(t.y),C=Math.cos(t.y),T=aq(_-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=TV?(t.x=this.x0+this.a*(_V-P)*Math.sin(T),t.y=this.y0-this.a*(_V-P)*Math.cos(T),t):Math.abs(this.sin_p12+1)<=TV?(t.x=this.x0+this.a*(_V+P)*Math.sin(T),t.y=this.y0+this.a*(_V+P)*Math.cos(T),t):(m=this.sin_p12*E+this.cos_p12*C*Math.cos(T),v=(b=Math.acos(m))?b/Math.sin(b):1,t.x=this.x0+this.a*v*C*Math.sin(T),t.y=this.y0+this.a*v*(this.cos_p12*E-this.sin_p12*C*Math.cos(T)),t):(e=qH(this.es),r=HH(this.es),n=zH(this.es),o=JH(this.es),Math.abs(this.sin_p12-1)<=TV?(i=this.a*VH(e,r,n,o,_V),a=this.a*VH(e,r,n,o,P),t.x=this.x0+(i-a)*Math.sin(T),t.y=this.y0-(i-a)*Math.cos(T),t):Math.abs(this.sin_p12+1)<=TV?(i=this.a*VH(e,r,n,o,_V),a=this.a*VH(e,r,n,o,P),t.x=this.x0+(i+a)*Math.sin(T),t.y=this.y0+(i+a)*Math.cos(T),t):(s=E/C,u=WH(this.a,this.e,this.sin_p12),l=WH(this.a,this.e,E),c=Math.atan((1-this.es)*s+this.es*u*this.sin_p12/(l*C)),g=0===(f=Math.atan2(Math.sin(T),this.cos_p12*Math.tan(c)-this.sin_p12*Math.cos(T)))?Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.abs(Math.abs(f)-Math.PI)<=TV?-Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.asin(Math.sin(T)*Math.cos(c)/Math.sin(f)),p=this.e*this.sin_p12/Math.sqrt(1-this.es),b=u*g*(1-(S=g*g)*(d=(h=this.e*this.cos_p12*Math.cos(f)/Math.sqrt(1-this.es))*h)*(1-d)/6+(w=S*g)/8*(y=p*h)*(1-2*d)+(O=w*g)/120*(d*(4-7*d)-3*p*p*(1-7*d))-O*g/48*y),t.x=this.x0+b*Math.sin(f),t.y=this.y0+b*Math.cos(f),t))},inverse:function(t){var e,r,n,o,i,a,s,u,l,c,f,p,h,y,d,b,v,m,g,S,w,O,_;if(t.x-=this.x0,t.y-=this.y0,this.sphere){if((e=Math.sqrt(t.x*t.x+t.y*t.y))>2*_V*this.a)return;return r=e/this.a,n=Math.sin(r),o=Math.cos(r),i=this.long0,Math.abs(e)<=TV?a=this.lat0:(a=iz(o*this.sin_p12+t.y*n*this.cos_p12/e),s=Math.abs(this.lat0)-_V,i=Math.abs(s)<=TV?this.lat0>=0?aq(this.long0+Math.atan2(t.x,-t.y)):aq(this.long0-Math.atan2(-t.x,t.y)):aq(this.long0+Math.atan2(t.x*n,e*this.cos_p12*o-t.y*this.sin_p12*n))),t.x=i,t.y=a,t}return u=qH(this.es),l=HH(this.es),c=zH(this.es),f=JH(this.es),Math.abs(this.sin_p12-1)<=TV?(a=QH(((p=this.a*VH(u,l,c,f,_V))-(e=Math.sqrt(t.x*t.x+t.y*t.y)))/this.a,u,l,c,f),i=aq(this.long0+Math.atan2(t.x,-1*t.y)),t.x=i,t.y=a,t):Math.abs(this.sin_p12+1)<=TV?(p=this.a*VH(u,l,c,f,_V),a=QH(((e=Math.sqrt(t.x*t.x+t.y*t.y))-p)/this.a,u,l,c,f),i=aq(this.long0+Math.atan2(t.x,t.y)),t.x=i,t.y=a,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),d=Math.atan2(t.x,t.y),h=WH(this.a,this.e,this.sin_p12),b=Math.cos(d),m=-(v=this.e*this.cos_p12*b)*v/(1-this.es),g=3*this.es*(1-m)*this.sin_p12*this.cos_p12*b/(1-this.es),O=1-m*(w=(S=e/h)-m*(1+m)*Math.pow(S,3)/6-g*(1+3*m)*Math.pow(S,4)/24)*w/2-S*w*w*w/6,y=Math.asin(this.sin_p12*Math.cos(w)+this.cos_p12*Math.sin(w)*b),i=aq(this.long0+Math.asin(Math.sin(d)*Math.sin(w)/Math.cos(y))),_=Math.sin(y),a=Math.atan2((_-this.es*O*this.sin_p12)*Math.tan(y),_*(1-this.es)),t.x=i,t.y=a,t)},names:["Azimuthal_Equidistant","aeqd"]};var Sz={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(t){var e,r,n,o,i,a,s,u=t.x,l=t.y;return n=aq(u-this.long0),e=Math.sin(l),r=Math.cos(l),o=Math.cos(n),((i=this.sin_p14*e+this.cos_p14*r*o)>0||Math.abs(i)<=TV)&&(a=1*this.a*r*Math.sin(n),s=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*r*o)),t.x=a,t.y=s,t},inverse:function(t){var e,r,n,o,i,a,s;return t.x-=this.x0,t.y-=this.y0,r=iz((e=Math.sqrt(t.x*t.x+t.y*t.y))/this.a),n=Math.sin(r),o=Math.cos(r),a=this.long0,Math.abs(e)<=TV?(s=this.lat0,t.x=a,t.y=s,t):(s=iz(o*this.sin_p14+t.y*n*this.cos_p14/e),i=Math.abs(this.lat0)-_V,Math.abs(i)<=TV?(a=this.lat0>=0?aq(this.long0+Math.atan2(t.x,-t.y)):aq(this.long0-Math.atan2(-t.x,t.y)),t.x=a,t.y=s,t):(a=aq(this.long0+Math.atan2(t.x*n,e*this.cos_p14*o-t.y*this.sin_p14*n)),t.x=a,t.y=s,t))},names:["ortho"]},wz={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},Oz={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function _z(t,e,r,n){var o;return t<TV?(n.value=Oz.AREA_0,o=0):(o=Math.atan2(e,r),Math.abs(o)<=xV?n.value=Oz.AREA_0:o>xV&&o<=_V+xV?(n.value=Oz.AREA_1,o-=_V):o>_V+xV||o<=-(_V+xV)?(n.value=Oz.AREA_2,o=o>=0?o-IV:o+IV):(n.value=Oz.AREA_3,o+=_V)),o}function Pz(t,e){var r=t+e;return r<-IV?r+=AV:r>+IV&&(r-=AV),r}var Ez={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=_V-xV/2?this.face=wz.TOP:this.lat0<=-(_V-xV/2)?this.face=wz.BOTTOM:Math.abs(this.long0)<=xV?this.face=wz.FRONT:Math.abs(this.long0)<=_V+xV?this.face=this.long0>0?wz.RIGHT:wz.LEFT:this.face=wz.BACK,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(t){var e,r,n,o,i,a,s={x:0,y:0},u={value:0};if(t.x-=this.long0,e=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,r=t.x,this.face===wz.TOP)o=_V-e,r>=xV&&r<=_V+xV?(u.value=Oz.AREA_0,n=r-_V):r>_V+xV||r<=-(_V+xV)?(u.value=Oz.AREA_1,n=r>0?r-IV:r+IV):r>-(_V+xV)&&r<=-xV?(u.value=Oz.AREA_2,n=r+_V):(u.value=Oz.AREA_3,n=r);else if(this.face===wz.BOTTOM)o=_V+e,r>=xV&&r<=_V+xV?(u.value=Oz.AREA_0,n=-r+_V):r<xV&&r>=-xV?(u.value=Oz.AREA_1,n=-r):r<-xV&&r>=-(_V+xV)?(u.value=Oz.AREA_2,n=-r-_V):(u.value=Oz.AREA_3,n=r>0?-r+IV:-r-IV);else{var l,c,f,p,h,y;this.face===wz.RIGHT?r=Pz(r,+_V):this.face===wz.BACK?r=Pz(r,+IV):this.face===wz.LEFT&&(r=Pz(r,-_V)),p=Math.sin(e),h=Math.cos(e),y=Math.sin(r),l=h*Math.cos(r),c=h*y,f=p,this.face===wz.FRONT?n=_z(o=Math.acos(l),f,c,u):this.face===wz.RIGHT?n=_z(o=Math.acos(c),f,-l,u):this.face===wz.BACK?n=_z(o=Math.acos(-l),f,-c,u):this.face===wz.LEFT?n=_z(o=Math.acos(-c),f,l,u):(o=n=0,u.value=Oz.AREA_0)}return a=Math.atan(12/IV*(n+Math.acos(Math.sin(n)*Math.cos(xV))-_V)),i=Math.sqrt((1-Math.cos(o))/(Math.cos(a)*Math.cos(a))/(1-Math.cos(Math.atan(1/Math.cos(n))))),u.value===Oz.AREA_1?a+=_V:u.value===Oz.AREA_2?a+=IV:u.value===Oz.AREA_3&&(a+=1.5*IV),s.x=i*Math.cos(a),s.y=i*Math.sin(a),s.x=s.x*this.a+this.x0,s.y=s.y*this.a+this.y0,t.x=s.x,t.y=s.y,t},inverse:function(t){var e,r,n,o,i,a,s,u,l,c,f,p,h={lam:0,phi:0},y={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,r=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),e=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?y.value=Oz.AREA_0:t.y>=0&&t.y>=Math.abs(t.x)?(y.value=Oz.AREA_1,e-=_V):t.x<0&&-t.x>=Math.abs(t.y)?(y.value=Oz.AREA_2,e=e<0?e+IV:e-IV):(y.value=Oz.AREA_3,e+=_V),l=IV/12*Math.tan(e),i=Math.sin(l)/(Math.cos(l)-1/Math.sqrt(2)),a=Math.atan(i),(s=1-(n=Math.cos(e))*n*(o=Math.tan(r))*o*(1-Math.cos(Math.atan(1/Math.cos(a)))))<-1?s=-1:s>1&&(s=1),this.face===wz.TOP)u=Math.acos(s),h.phi=_V-u,y.value===Oz.AREA_0?h.lam=a+_V:y.value===Oz.AREA_1?h.lam=a<0?a+IV:a-IV:y.value===Oz.AREA_2?h.lam=a-_V:h.lam=a;else if(this.face===wz.BOTTOM)u=Math.acos(s),h.phi=u-_V,y.value===Oz.AREA_0?h.lam=-a+_V:y.value===Oz.AREA_1?h.lam=-a:y.value===Oz.AREA_2?h.lam=-a-_V:h.lam=a<0?-a-IV:-a+IV;else{var d,b,v;l=(d=s)*d,b=(l+=(v=l>=1?0:Math.sqrt(1-l)*Math.sin(a))*v)>=1?0:Math.sqrt(1-l),y.value===Oz.AREA_1?(l=b,b=-v,v=l):y.value===Oz.AREA_2?(b=-b,v=-v):y.value===Oz.AREA_3&&(l=b,b=v,v=-l),this.face===wz.RIGHT?(l=d,d=-b,b=l):this.face===wz.BACK?(d=-d,b=-b):this.face===wz.LEFT&&(l=d,d=b,b=-l),h.phi=Math.acos(-v)-_V,h.lam=Math.atan2(b,d),this.face===wz.RIGHT?h.lam=Pz(h.lam,-_V):this.face===wz.BACK?h.lam=Pz(h.lam,-IV):this.face===wz.LEFT&&(h.lam=Pz(h.lam,+_V))}return 0!==this.es&&(c=h.phi<0?1:0,f=Math.tan(h.phi),p=this.b/Math.sqrt(f*f+this.one_minus_f_squared),h.phi=Math.atan(Math.sqrt(this.a*this.a-p*p)/(this.one_minus_f*p)),c&&(h.phi=-h.phi)),h.lam+=this.long0,t.x=h.lam,t.y=h.phi,t},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]},Cz=[[1,2.2199e-17,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Tz=[[-5.20417e-18,.0124,1.21431e-18,-8.45284e-11],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],jz=.8487,kz=1.3523,xz=kV/5,Az=1/xz,Iz=18,Nz=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))},Rz=function(t,e){return t[1]+e*(2*t[2]+3*e*t[3])};var Mz={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(t){var e=aq(t.x-this.long0),r=Math.abs(t.y),n=Math.floor(r*xz);n<0?n=0:n>=Iz&&(n=Iz-1),r=kV*(r-Az*n);var o={x:Nz(Cz[n],r)*e,y:Nz(Tz[n],r)};return t.y<0&&(o.y=-o.y),o.x=o.x*this.a*jz+this.x0,o.y=o.y*this.a*kz+this.y0,o},inverse:function(t){var e={x:(t.x-this.x0)/(this.a*jz),y:Math.abs(t.y-this.y0)/(this.a*kz)};if(e.y>=1)e.x/=Cz[Iz][0],e.y=t.y<0?-_V:_V;else{var r=Math.floor(e.y*Iz);for(r<0?r=0:r>=Iz&&(r=Iz-1);;)if(Tz[r][0]>e.y)--r;else{if(!(Tz[r+1][0]<=e.y))break;++r}var n=Tz[r],o=5*(e.y-n[0])/(Tz[r+1][0]-n[0]);o=function(t,e,r,n){for(var o=e;n;--n){var i=t(o);if(o-=i,Math.abs(i)<r)break}return o}(function(t){return(Nz(n,t)-e.y)/Rz(n,t)},o,TV,100),e.x/=Nz(Cz[r],o),e.y=(5*r+o)*jV,t.y<0&&(e.y=-e.y)}return e.x=aq(e.x+this.long0),e},names:["Robinson","robin"]};var Lz={init:function(){this.name="geocent"},forward:function(t){return jq(t,this.es,this.a)},inverse:function(t){return kq(t,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]},Bz={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},Dz={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};var Fz={init:function(){if(Object.keys(Dz).forEach(function(t){if(void 0===this[t])this[t]=Dz[t].def;else{if(Dz[t].num&&isNaN(this[t]))throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);Dz[t].num&&(this[t]=parseFloat(this[t]))}Dz[t].degrees&&(this[t]=this[t]*jV)}.bind(this)),Math.abs(Math.abs(this.lat0)-_V)<TV?this.mode=this.lat0<0?Bz.S_POLE:Bz.N_POLE:Math.abs(this.lat0)<TV?this.mode=Bz.EQUIT:(this.mode=Bz.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)},forward:function(t){t.x-=this.long0;var e,r,n,o,i=Math.sin(t.y),a=Math.cos(t.y),s=Math.cos(t.x);switch(this.mode){case Bz.OBLIQ:r=this.sinph0*i+this.cosph0*a*s;break;case Bz.EQUIT:r=a*s;break;case Bz.S_POLE:r=-i;break;case Bz.N_POLE:r=i}switch(e=(r=this.pn1/(this.p-r))*a*Math.sin(t.x),this.mode){case Bz.OBLIQ:r*=this.cosph0*i-this.sinph0*a*s;break;case Bz.EQUIT:r*=i;break;case Bz.N_POLE:r*=-a*s;break;case Bz.S_POLE:r*=a*s}return o=1/((n=r*this.cg+e*this.sg)*this.sw*this.h1+this.cw),e=(e*this.cg-r*this.sg)*this.cw*o,r=n*o,t.x=e*this.a,t.y=r*this.a,t},inverse:function(t){t.x/=this.a,t.y/=this.a;var e,r,n,o={x:t.x,y:t.y};n=1/(this.pn1-t.y*this.sw),e=this.pn1*t.x*n,r=this.pn1*t.y*this.cw*n,t.x=e*this.cg+r*this.sg,t.y=r*this.cg-e*this.sg;var i=CH(t.x,t.y);if(Math.abs(i)<TV)o.x=0,o.y=t.y;else{var a,s;switch(s=1-i*i*this.pfact,s=(this.p-Math.sqrt(s))/(this.pn1/i+i/this.pn1),a=Math.sqrt(1-s*s),this.mode){case Bz.OBLIQ:o.y=Math.asin(a*this.sinph0+t.y*s*this.cosph0/i),t.y=(a-this.sinph0*Math.sin(o.y))*i,t.x*=s*this.cosph0;break;case Bz.EQUIT:o.y=Math.asin(t.y*s/i),t.y=a*i,t.x*=s;break;case Bz.N_POLE:o.y=Math.asin(a),t.y=-t.y;break;case Bz.S_POLE:o.y=-Math.asin(a)}o.x=Math.atan2(t.x,t.y)}return t.x=o.x+this.long0,t.y=o.y,t},names:["Tilted_Perspective","tpers"]};var Uz={init:function(){if(this.flip_axis="x"===this.sweep?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,0!==this.es){var t=1-this.es,e=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")},forward:function(t){var e,r,n,o,i=t.x,a=t.y;if(i-=this.long0,"ellipse"===this.shape){a=Math.atan(this.radius_p2*Math.tan(a));var s=this.radius_p/CH(this.radius_p*Math.cos(a),Math.sin(a));if(r=s*Math.cos(i)*Math.cos(a),n=s*Math.sin(i)*Math.cos(a),o=s*Math.sin(a),(this.radius_g-r)*r-n*n-o*o*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;e=this.radius_g-r,this.flip_axis?(t.x=this.radius_g_1*Math.atan(n/CH(o,e)),t.y=this.radius_g_1*Math.atan(o/e)):(t.x=this.radius_g_1*Math.atan(n/e),t.y=this.radius_g_1*Math.atan(o/CH(n,e)))}else"sphere"===this.shape&&(e=Math.cos(a),r=Math.cos(i)*e,n=Math.sin(i)*e,o=Math.sin(a),e=this.radius_g-r,this.flip_axis?(t.x=this.radius_g_1*Math.atan(n/CH(o,e)),t.y=this.radius_g_1*Math.atan(o/e)):(t.x=this.radius_g_1*Math.atan(n/e),t.y=this.radius_g_1*Math.atan(o/CH(n,e))));return t.x=t.x*this.a,t.y=t.y*this.a,t},inverse:function(t){var e,r,n,o,i=-1,a=0,s=0;if(t.x=t.x/this.a,t.y=t.y/this.a,"ellipse"===this.shape){this.flip_axis?(s=Math.tan(t.y/this.radius_g_1),a=Math.tan(t.x/this.radius_g_1)*CH(1,s)):(a=Math.tan(t.x/this.radius_g_1),s=Math.tan(t.y/this.radius_g_1)*CH(1,a));var u=s/this.radius_p;if(e=a*a+u*u+i*i,(n=(r=2*this.radius_g*i)*r-4*e*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;o=(-r-Math.sqrt(n))/(2*e),i=this.radius_g+o*i,a*=o,s*=o,t.x=Math.atan2(a,i),t.y=Math.atan(s*Math.cos(t.x)/i),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if("sphere"===this.shape){if(this.flip_axis?(s=Math.tan(t.y/this.radius_g_1),a=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+s*s)):(a=Math.tan(t.x/this.radius_g_1),s=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+a*a)),e=a*a+s*s+i*i,(n=(r=2*this.radius_g*i)*r-4*e*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;o=(-r-Math.sqrt(n))/(2*e),i=this.radius_g+o*i,a*=o,s*=o,t.x=Math.atan2(a,i),t.y=Math.atan(s*Math.cos(t.x)/i)}return t.x=t.x+this.long0,t},names:["Geostationary Satellite View","Geostationary_Satellite","geos"]},Gz=1.340264,Vz=-.081106,qz=893e-6,Hz=.003796,zz=Math.sqrt(3)/2;var Jz={init:function(){this.es=0,this.long0=void 0!==this.long0?this.long0:0},forward:function(t){var e=aq(t.x-this.long0),r=t.y,n=Math.asin(zz*Math.sin(r)),o=n*n,i=o*o*o;return t.x=e*Math.cos(n)/(zz*(Gz+3*Vz*o+i*(7*qz+9*Hz*o))),t.y=n*(Gz+Vz*o+i*(qz+Hz*o)),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a;var e,r,n,o,i=t.y;for(o=0;o<12&&(i-=n=(i*(Gz+Vz*(e=i*i)+(r=e*e*e)*(qz+Hz*e))-t.y)/(Gz+3*Vz*e+r*(7*qz+9*Hz*e)),!(Math.abs(n)<1e-9));++o);return r=(e=i*i)*e*e,t.x=zz*t.x*(Gz+3*Vz*e+r*(7*qz+9*Hz*e))/Math.cos(i),t.y=Math.asin(Math.sin(i)/zz),t.x=aq(t.x+this.long0),t},names:["eqearth","Equal Earth","Equal_Earth"]};Vq.defaultDatum="WGS84",Vq.Proj=Tq,Vq.WGS84=new Vq.Proj("WGS84"),Vq.Point=sH,Vq.toPoint=Lq,Vq.defs=$V,Vq.nadgrid=function(t,e){var r=new DataView(e),n=function(t){var e=t.getInt32(8,!1);return 11!==e&&(11!==(e=t.getInt32(8,!0))&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}(r),o=function(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:Oq(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}(r,n),i={header:o,subgrids:function(t,e,r){for(var n=176,o=[],i=0;i<e.nSubgrids;i++){var a=Pq(t,n,r),s=Eq(t,n,a,r),u=Math.round(1+(a.upperLongitude-a.lowerLongitude)/a.longitudeInterval),l=Math.round(1+(a.upperLatitude-a.lowerLatitude)/a.latitudeInterval);o.push({ll:[wq(a.lowerLongitude),wq(a.lowerLatitude)],del:[wq(a.longitudeInterval),wq(a.latitudeInterval)],lim:[u,l],count:a.gridNodeCount,cvs:_q(s)}),n+=176+16*a.gridNodeCount}return o}(r,o,n)};return gq[t]=i,i},Vq.transform=Dq,Vq.mgrs=Xq,Vq.version="__VERSION__",function(t){t.Proj.projections.add(PH),t.Proj.projections.add(xH),t.Proj.projections.add(AH),t.Proj.projections.add(MH),t.Proj.projections.add(LH),t.Proj.projections.add(BH),t.Proj.projections.add(FH),t.Proj.projections.add(UH),t.Proj.projections.add(GH),t.Proj.projections.add(YH),t.Proj.projections.add(oz),t.Proj.projections.add(az),t.Proj.projections.add(sz),t.Proj.projections.add(uz),t.Proj.projections.add(lz),t.Proj.projections.add(fz),t.Proj.projections.add(pz),t.Proj.projections.add(hz),t.Proj.projections.add(dz),t.Proj.projections.add(bz),t.Proj.projections.add(vz),t.Proj.projections.add(mz),t.Proj.projections.add(gz),t.Proj.projections.add(Sz),t.Proj.projections.add(Ez),t.Proj.projections.add(Mz),t.Proj.projections.add(Lz),t.Proj.projections.add(Fz),t.Proj.projections.add(Uz),t.Proj.projections.add(Jz)}(Vq);var Wz=Vq;function Kz(t){"@babel/helpers - typeof";return(Kz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qz(){Qz=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new x(n||[]);return o(a,"_invoke",{value:C(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",b={};function v(){}function m(){}function g(){}var S={};l(S,a,function(){return this});var w=Object.getPrototypeOf,O=w&&w(w(A([])));O&&O!==r&&n.call(O,a)&&(S=O);var _=g.prototype=v.prototype=Object.create(S);function P(t){["next","throw","return"].forEach(function(e){l(t,e,function(t){return this._invoke(e,t)})})}function E(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==Kz(c)&&n.call(c,"__await")?e.resolve(c.__await).then(function(t){r("next",t,a,s)},function(t){r("throw",t,a,s)}):e.resolve(c).then(function(t){l.value=t,a(l)},function(t){return r("throw",t,a,s)})}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e(function(e,o){r(t,n,e,o)})}return i=i?i.then(o,o):o()}})}function C(e,r,n){var o=p;return function(i,a){if(o===y)throw new Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=T(s,n);if(u){if(u===b)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?d:h,l.arg===b)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=d,n.method="throw",n.arg=l.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,b;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,b):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function A(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Kz(e)+" is not iterable")}return m.prototype=g,o(_,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},P(E.prototype),l(E.prototype,s,function(){return this}),e.AsyncIterator=E,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new E(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},P(_),l(_,u,"Generator"),l(_,a,function(){return this}),l(_,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=A,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:A(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),b}},e}function Yz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function Xz(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Yz(Object(r),!0).forEach(function(e){Zz(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Yz(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Zz(t,e,r){var n;return(e="symbol"==Kz(n=function(t,e){if("object"!=Kz(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Kz(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $z(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function tJ(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){$z(i,n,o,a,s,"next",t)}function s(t){$z(i,n,o,a,s,"throw",t)}a(void 0)})}}function eJ(t,e,r){var n=function(t){return t instanceof Array?t:t.leftBottom&&t.rightTop?[t.leftBottom.x,t.leftBottom.y,t.rightTop.x,t.rightTop.y]:[t.left,t.bottom,t.right,t.top]}(r);return new(o().CRS)(t,e,n)}function rJ(t,e){var r=t;return"EPSG:3857"===e?Wz(e,"EPSG:4326",t):"EPSG:4326"!==e?o().proj4(e,"EPSG:4326",t):r}function nJ(t,e){return oJ.apply(this,arguments)}function oJ(){return(oJ=tJ(Qz().mark(function t(e,r){var n,o,i,a;return Qz().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Dn.get(e);case 3:return n=t.sent,t.next=6,n.json();case 6:if(!(o=t.sent).metadata||!o.metadata.indexbounds){t.next=9;break}return t.abrupt("return",{extent:o.metadata.indexbounds});case 9:return t.next=11,Dn.get("".concat(r,"/prjCoordSys/projection/extent.json"));case 11:return i=t.sent,t.next=14,i.json();case 14:return a=t.sent,t.abrupt("return",{extent:a,center:o.center});case 18:return t.prev=18,t.t0=t.catch(0),t.abrupt("return",{extent:[]});case 21:case"end":return t.stop()}},t,null,[[0,18]])}))).apply(this,arguments)}function iJ(t,e,r){return aJ.apply(this,arguments)}function aJ(){return(aJ=tJ(Qz().mark(function t(e,r,n){var i,a,s,u,l,c,f,p,h,y,d,b,v,m,g,S,w,O,_,P,E,C,T,j,k,x,A,I,N;return Qz().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.type||["raster","vector-tile"].includes(n.type)){t.next=2;break}return t.abrupt("return",Promise.reject(new Error('type must be "raster" or "vector-tile".')));case 2:if(i=n.type||"raster",a=n.mapOptions||{},s=r.prjCoordSys.epsgCode,u=r.bounds,l=r.center,c=r.dpi,f=r.coordUnit,p=r.scale,h=l?[l.x,l.y]:[0,0],y="EPSG:".concat(s),d=u,b="vector-tile"===i?e+"/tileFeature/vectorstyles.json?type=MapBox_GL&styleonly=true&tileURLTemplate=ZXY":e,v={},m={},S=512,w="png",!o().CRS){t.next=33;break}return O=y,t.next=17,n.initMapService.getWKT();case 17:if(_=t.sent,"vector-tile"!==i){t.next=23;break}return t.next=21,nJ(b,e);case 21:P=t.sent,d=P.extent;case 23:return y=eJ(O,_,d),"raster"===i&&(m.rasterSource="iserver"),h=P&&P.center?P.center:rJ(h,O),t.next=28,n.initMapService.getTilesets();case 28:E=t.sent,(C=pV(E.result,{prjCoordSys:r.prjCoordSys,tileType:"Image"}))&&(w=fV(C),T=Math.max(C.bounds.right-C.originalPoint.x,C.originalPoint.y-C.bounds.bottom),j=T/(256*C.resolutions[0]),g=Math.ceil(Math.log2(j)),k=Math.pow(2,g),x=256*k*C.resolutions[0],A=[C.originalPoint.x,C.originalPoint.y-x,C.originalPoint.x+x,C.originalPoint.y],y=new(o().CRS)(O,A),g-=1,S=C.tileWidth),t.next=36;break;case 33:h=rJ(h,y="EPSG:3857"),"raster"===i&&(I=256,v.tileSize=I,N=!1!==a.transparent,b+="/zxyTileImage.png?z={z}&x={x}&y={y}&width=".concat(I,"&height=").concat(I,"&transparent=").concat(N));case 36:return void 0===g&&(g=hV({scale:p,dpi:c,coordUnit:f},d)),t.abrupt("return",Xz({container:"map",crs:y,center:h,zoom:g,style:"raster"===i?{version:8,sources:{"smaples-source":Xz(Xz({format:w,tileSize:S,type:"raster",tiles:[b]},v),m)},layers:[{id:"sample-layer",type:"raster",source:"smaples-source",minzoom:0,maxzoom:22}]}:b},a));case 38:case"end":return t.stop()}},t)}))).apply(this,arguments)}var sJ=window.SuperMap=window.SuperMap||{};function uJ(t){"@babel/helpers - typeof";return(uJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lJ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,cJ(n.key),n)}}function cJ(t){var e=function(t,e){if("object"!=uJ(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=uJ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==uJ(e)?e:String(e)}function fJ(t,e,r){return e=pJ(e),function(t,e){if(e&&("object"===uJ(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],pJ(t).constructor):e.apply(t,r))}function pJ(t){return(pJ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function hJ(t,e){return(hJ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}sJ.Components=window.SuperMap.Components||{};var yJ=function(t){function e(t,r,n,o){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=fJ(this,e,[t,r,n,o])).x=t,i.y=r,i.width=n,i.height=o,i.CLASS_NAME="SuperMap.Geometry.Rectangle",i.geometryType="Rectangle",i}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hJ(t,e)}(e,j),r=e,(n=[{key:"calculateBounds",value:function(){this.bounds=new Z(this.x,this.y,this.x+this.width,this.y+this.height)}},{key:"getArea",value:function(){return this.width*this.height}}])&&lJ(r.prototype,n),o&&lJ(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}(),dJ={toISOString:function(){if("toISOString"in Date.prototype)return function(t){return t.toISOString()};var t=function(t,e){for(var r=t+"";r.length<e;)r="0"+r;return r};return function(e){return isNaN(e.getTime())?"Invalid Date":e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1,2)+"-"+t(e.getUTCDate(),2)+"T"+t(e.getUTCHours(),2)+":"+t(e.getUTCMinutes(),2)+":"+t(e.getUTCSeconds(),2)+"."+t(e.getUTCMilliseconds(),3)+"Z"}}(),parse:function(t){var e,r=t.match(/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:(?:T(\d{1,2}):(\d{2}):(\d{2}(?:\.\d+)?)(Z|(?:[+-]\d{1,2}(?::(\d{2}))?)))|Z)?$/);if(r&&(r[1]||r[7])){var n=parseInt(r[1],10)||0,o=parseInt(r[2],10)-1||0,i=parseInt(r[3],10)||1;e=new Date(Date.UTC(n,o,i));var a=r[7];if(a){var s=parseInt(r[4],10),u=parseInt(r[5],10),l=parseFloat(r[6]),c=0|l,f=Math.round(1e3*(l-c));if(e.setUTCHours(s,u,c,f),"Z"!==a){var p=-1e3*(60*parseInt(a,10)*60+60*(parseInt(r[8],10)||0));e=new Date(e.getTime()+p)}}}else e=new Date("invalid");return e}};function bJ(t){"@babel/helpers - typeof";return(bJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vJ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,mJ(n.key),n)}}function mJ(t){var e=function(t,e){if("object"!=bJ(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=bJ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==bJ(e)?e:String(e)}function gJ(t,e,r){return e=SJ(e),function(t,e){if(e&&("object"===bJ(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return wJ(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],SJ(t).constructor):e.apply(t,r))}function SJ(t){return(SJ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function wJ(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function OJ(t,e){return(OJ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var _J=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=gJ(this,e,[t])).CLASS_NAME="SuperMap.Geometry3D",r.position=null,r.rotationX=null,r.rotationY=null,r.rotationZ=null,r.scaleX=null,r.scaleY=null,r.scaleZ=null,V.extend(wJ(r),t),r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&OJ(t,e)}(e,en),r=e,(n=[{key:"destroy",value:function(){this.position=null,this.rotationX=null,this.rotationY=null,this.rotationZ=null,this.scaleX=null,this.scaleY=null,this.scaleZ=null}}])&&vJ(r.prototype,n),o&&vJ(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function PJ(t){"@babel/helpers - typeof";return(PJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function EJ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,CJ(n.key),n)}}function CJ(t){var e=function(t,e){if("object"!=PJ(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=PJ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==PJ(e)?e:String(e)}function TJ(t,e,r){return e=jJ(e),function(t,e){if(e&&("object"===PJ(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],jJ(t).constructor):e.apply(t,r))}function jJ(t){return(jJ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function kJ(t,e){return(kJ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var xJ=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=TJ(this,e,[t])).regExes={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},r.CLASS_NAME="SuperMap.Format.WKT",r.extract={point:function(t){return t.x+" "+t.y},multipoint:function(t){for(var e=[],r=0,n=t.components.length;r<n;++r)e.push("("+this.extract.point.apply(this,[t.components[r]])+")");return e.join(",")},linestring:function(t){for(var e=[],r=0,n=t.components.length;r<n;++r)e.push(this.extract.point.apply(this,[t.components[r]]));return e.join(",")},multilinestring:function(t){for(var e=[],r=0,n=t.components.length;r<n;++r)e.push("("+this.extract.linestring.apply(this,[t.components[r]])+")");return e.join(",")},polygon:function(t){for(var e=[],r=0,n=t.components.length;r<n;++r)e.push("("+this.extract.linestring.apply(this,[t.components[r]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],r=0,n=t.components.length;r<n;++r)e.push("("+this.extract.polygon.apply(this,[t.components[r]])+")");return e.join(",")},collection:function(t){for(var e=[],r=0,n=t.components.length;r<n;++r)e.push(this.extractGeometry.apply(this,[t.components[r]]));return e.join(",")}},r.parse={point:function(t){var e=w.trim(t).split(this.regExes.spaces);return new he(new at(e[0],e[1]))},multipoint:function(t){for(var e,r=w.trim(t).split(","),n=[],o=0,i=r.length;o<i;++o)e=r[o].replace(this.regExes.trimParens,"$1"),n.push(this.parse.point.apply(this,[e]).geometry);return new he(new wt(n))},linestring:function(t){for(var e=w.trim(t).split(","),r=[],n=0,o=e.length;n<o;++n)r.push(this.parse.point.apply(this,[e[n]]).geometry);return new he(new Lt(r))},multilinestring:function(t){for(var e,r=w.trim(t).split(this.regExes.parenComma),n=[],o=0,i=r.length;o<i;++o)e=r[o].replace(this.regExes.trimParens,"$1"),n.push(this.parse.linestring.apply(this,[e]).geometry);return new he(new Ae(n))},polygon:function(t){for(var e,r,n,o=w.trim(t).split(this.regExes.parenComma),i=[],a=0,s=o.length;a<s;++a)e=o[a].replace(this.regExes.trimParens,"$1"),r=this.parse.linestring.apply(this,[e]).geometry,n=new Ht(r.components),i.push(n);return new he(new Xt(i))},multipolygon:function(t){for(var e,r=w.trim(t).split(this.regExes.doubleParenComma),n=[],o=0,i=r.length;o<i;++o)e=r[o].replace(this.regExes.trimParens,"$1"),n.push(this.parse.polygon.apply(this,[e]).geometry);return new he(new De(n))},geometrycollection:function(t){t=t.replace(/,\s*([A-Za-z])/g,"|$1");for(var e=w.trim(t).split("|"),r=[],n=0,o=e.length;n<o;++n)r.push(this.read(e[n]));return r}},r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kJ(t,e)}(e,ve),r=e,(n=[{key:"read",value:function(t){var e,r,n;t=t.replace(/[\n\r]/g," ");var o=this.regExes.typeStr.exec(t);return o&&(r=o[1].toLowerCase(),n=o[2],this.parse[r]&&(e=this.parse[r].apply(this,[n]))),e}},{key:"write",value:function(t){var e,r,n;t.constructor===Array?(e=t,n=!0):(e=[t],n=!1);var o=[];n&&o.push("GEOMETRYCOLLECTION(");for(var i=0,a=e.length;i<a;++i)n&&i>0&&o.push(","),r=e[i].geometry,o.push(this.extractGeometry(r));return n&&o.push(")"),o.join("")}},{key:"extractGeometry",value:function(t){var e=t.CLASS_NAME.split(".")[2].toLowerCase();return this.extract[e]?("collection"===e?"GEOMETRYCOLLECTION":e.toUpperCase())+"("+this.extract[e].apply(this,[t])+")":null}}])&&EJ(r.prototype,n),o&&EJ(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function AJ(t){"@babel/helpers - typeof";return(AJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function IJ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,NJ(n.key),n)}}function NJ(t){var e=function(t,e){if("object"!=AJ(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=AJ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==AJ(e)?e:String(e)}var RJ=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var r=this;e=e||{},this.speed=e.speed&&e.speed>=0?e.speed:1,this.frequency=e.speed&&e.frequency>=0?e.frequency:1e3,this.startTime=e.startTime&&null!=e.startTime?e.startTime:0,this.endTime=e.endTime&&null!=e.endTime&&e.endTime>=r.startTime?e.endTime:+new Date,this.repeat=void 0===e.repeat||e.repeat,this.reverse=void 0!==e.reverse&&e.reverse,this.currentTime=null,this.oldTime=null,this.running=!1,this.EVENT_TYPES=["start","pause","stop"],r.events=new qn(this,null,this.EVENT_TYPES),r.speed=Number(r.speed),r.frequency=Number(r.frequency),r.startTime=Number(r.startTime),r.endTime=Number(r.endTime),r.startTime=Date.parse(new Date(r.startTime)),r.endTime=Date.parse(new Date(r.endTime)),r.currentTime=r.startTime,this.CLASS_NAME="SuperMap.TimeControlBase"}var e,r,n;return e=t,(r=[{key:"updateOptions",value:function(t){var e=this;(t=t||{}).speed&&t.speed>=0&&(e.speed=t.speed,e.speed=Number(e.speed)),t.speed&&t.frequency>=0&&(e.frequency=t.frequency,e.frequency=Number(e.frequency)),t.startTime&&null!=t.startTime&&(e.startTime=t.startTime,e.startTime=Date.parse(new Date(e.startTime))),t.endTime&&null!=t.endTime&&t.endTime>=e.startTime&&(e.endTime=t.endTime,e.endTime=Date.parse(new Date(e.endTime))),null!=t.repeat&&(e.repeat=t.repeat),null!=t.reverse&&(e.reverse=t.reverse)}},{key:"start",value:function(){var t=this;t.running||(t.running=!0,t.tick(),t.events.triggerEvent("start",t.currentTime))}},{key:"pause",value:function(){this.running=!1,this.events.triggerEvent("pause",this.currentTime)}},{key:"stop",value:function(){var t=this;t.currentTime=t.startTime,t.running&&(t.running=!1),t.events.triggerEvent("stop",t.currentTime)}},{key:"toggle",value:function(){this.running?this.pause():this.start()}},{key:"setSpeed",value:function(t){return t>=0&&(this.speed=t,!0)}},{key:"getSpeed",value:function(){return this.speed}},{key:"setFrequency",value:function(t){return t>=0&&(this.frequency=t,!0)}},{key:"getFrequency",value:function(){return this.frequency}},{key:"setStartTime",value:function(t){var e=this;return!((t=Date.parse(new Date(t)))>e.endTime)&&(e.startTime=t,e.currentTime<e.startTime&&(e.currentTime=e.startTime,e.tick()),!0)}},{key:"getStartTime",value:function(){return this.startTime}},{key:"setEndTime",value:function(t){var e=this;return e.endTime=Date.parse(new Date(e.endTime)),!(t<e.startTime)&&(e.endTime=t,e.currentTime>=e.endTime&&(e.currentTime=e.startTime,e.tick()),!0)}},{key:"getEndTime",value:function(){return this.endTime}},{key:"setCurrentTime",value:function(t){var e=this;return e.currentTime=Date.parse(new Date(e.currentTime)),t>=e.startTime&&t<=e.endTime&&(e.currentTime=t,e.startTime=e.currentTime,e.tick(),!0)}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"setRepeat",value:function(t){this.repeat=t}},{key:"getRepeat",value:function(){return this.repeat}},{key:"setReverse",value:function(t){this.reverse=t}},{key:"getReverse",value:function(){return this.reverse}},{key:"getRunning",value:function(){return this.running}},{key:"destroy",value:function(){var t=this;t.speed=null,t.frequency=null,t.startTime=null,t.endTime=null,t.currentTime=null,t.repeat=null,t.running=!1,t.reverse=null}},{key:"tick",value:function(){}}])&&IJ(e.prototype,r),n&&IJ(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function MJ(t){"@babel/helpers - typeof";return(MJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function LJ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,BJ(n.key),n)}}function BJ(t){var e=function(t,e){if("object"!=MJ(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=MJ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==MJ(e)?e:String(e)}function DJ(t,e,r){return e=GJ(e),function(t,e){if(e&&("object"===MJ(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return FJ(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],GJ(t).constructor):e.apply(t,r))}function FJ(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function UJ(){return(UJ="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=GJ(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function GJ(t){return(GJ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function VJ(t,e){return(VJ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var qJ=function(t){function e(t,r){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=FJ(n=DJ(this,e,[r]));return o.callback=t,Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),r=this,n=function(){},o=function(){return r.apply(this instanceof n&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return n.prototype=this.prototype,o.prototype=new n,o}),o.update=o.update.bind(o),o.oldTime=o.currentTime,o.CLASS_NAME="SuperMap.TimeFlowControl",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&VJ(t,e)}(e,RJ),r=e,(n=[{key:"updateOptions",value:function(t){t=t||{},UJ(GJ(e.prototype),"updateOptions",this).call(this,t)}},{key:"start",value:function(){var t=this;t.running||(t.running=!0,t.reverse?t.currentTime===t.startTime&&(t.oldTime=t.endTime,t.currentTime=t.oldTime):t.oldTime===t.endTime&&(t.currentTime=t.startTime,t.oldTime=t.currentTime),t.tick())}},{key:"stop",value:function(){UJ(GJ(e.prototype),"stop",this).call(this);var t=this;t.oldTime=t.currentTime,t.running&&(t.running=!1),t.intervalId&&window.clearTimeout(t.intervalId)}},{key:"destroy",value:function(){UJ(GJ(e.prototype),"destroy",this).call(this);this.oldTime=null,this.callback=null}},{key:"tick",value:function(){var t=this;t.intervalId&&window.clearInterval(t.intervalId),t.intervalId=null,t.update(),t.intervalId=window.setInterval(t.update,t.frequency)}},{key:"update",value:function(){var t=this;if(t.running)if(t.callback&&t.callback(t.currentTime),t.reverse){if(t.currentTime===t.startTime){if(!t.repeat)return t.running=!1,null;t.oldTime=t.endTime,t.currentTime=t.oldTime}else t.currentTime=t.oldTime,t.oldTime-=t.speed;t.oldTime<=t.startTime&&(t.oldTime=t.startTime)}else{if(t.currentTime===t.endTime){if(!t.repeat)return t.running=!1,t.stop(),null;t.stop(),t.currentTime=t.startTime,t.oldTime=t.currentTime,t.start()}else t.oldTime=t.currentTime,t.currentTime+=t.speed;t.currentTime>=t.endTime&&(t.currentTime=t.endTime)}}}])&&LJ(r.prototype,n),o&&LJ(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function HJ(t){"@babel/helpers - typeof";return(HJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zJ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,JJ(n.key),n)}}function JJ(t){var e=function(t,e){if("object"!=HJ(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=HJ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==HJ(e)?e:String(e)}var WJ=function(){function t(e,r){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e){var n=e.substr(e.length-1,1);this.serviceUrl="/"===n?e.substr(0,e.length-2):e}this.options=r||{},this.CLASS_NAME="SuperMap.iManagerServiceBase"}var e,r,n;return e=t,(r=[{key:"request",value:function(t,e,r,n){(n=n||{headers:{Accept:"*/*","Content-Type":"application/json"}}).crossOrigin=this.options.crossOrigin,n.headers=this.options.headers;var o=Xn.imanagerToken;return o&&(n.headers||(n.headers={}),n.headers["X-Auth-Token"]=o),r&&(r=JSON.stringify(r)),Dn.commit(t,e,r,n).then(function(t){return t.json()})}}])&&zJ(e.prototype,r),n&&zJ(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function KJ(t){"@babel/helpers - typeof";return(KJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function QJ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,YJ(n.key),n)}}function YJ(t){var e=function(t,e){if("object"!=KJ(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=KJ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==KJ(e)?e:String(e)}var XJ=function(t,e,r){return e&&QJ(t.prototype,e),r&&QJ(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.nodeSpec="SMALL",this.nodeCount=1,this.nodeName="",this.password="",this.description="",this.physicalMachineName="",this.ips=[],this.userName="",V.extend(this,e)});function ZJ(t){"@babel/helpers - typeof";return(ZJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $J(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,tW(n.key),n)}}function tW(t){var e=function(t,e){if("object"!=ZJ(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ZJ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ZJ(e)?e:String(e)}function eW(t,e,r){return e=rW(e),function(t,e){if(e&&("object"===ZJ(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],rW(t).constructor):e.apply(t,r))}function rW(t){return(rW=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function nW(t,e){return(nW=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var oW=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),eW(this,e,[t])}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nW(t,e)}(e,WJ),r=e,(n=[{key:"load",value:function(){return this.request("GET",this.serviceUrl+"/web/api/service.json")}},{key:"createIServer",value:function(t){return this.request("POST",this.serviceUrl+"/cloud/web/nodes/server.json",new XJ(t))}},{key:"createIPortal",value:function(t){return this.request("POST",this.serviceUrl+"/icloud/web/nodes/portal.json",new XJ(t))}},{key:"iServerList",value:function(){return this.request("GET",this.serviceUrl+"/cloud/web/nodes/server.json")}},{key:"iPortalList",value:function(){return this.request("GET",this.serviceUrl+"/icloud/web/nodes/portal.json")}},{key:"startNodes",value:function(t){return this.request("POST",this.serviceUrl+"/cloud/web/nodes/started.json",t)}},{key:"stopNodes",value:function(t){return this.request("POST",this.serviceUrl+"/cloud/web/nodes/stopped.json",t)}}])&&$J(r.prototype,n),o&&$J(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function iW(t){"@babel/helpers - typeof";return(iW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function aW(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,sW(n.key),n)}}function sW(t){var e=function(t,e){if("object"!=iW(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=iW(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==iW(e)?e:String(e)}var uW=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r=r||{},this.serviceUrl=e,this.CLASS_NAME="SuperMap.iPortalServiceBase",this.withCredentials=r.withCredentials||!1,this.crossOrigin=r.crossOrigin,this.headers=r.headers}var e,r,n;return e=t,(r=[{key:"request",value:function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{headers:this.headers,crossOrigin:this.crossOrigin,withCredentials:this.withCredentials};return e=Xn.appendCredential(e),Dn.commit(t,e,r,n).then(function(t){return t.json()})}}])&&aW(e.prototype,r),n&&aW(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function lW(t){"@babel/helpers - typeof";return(lW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cW(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,fW(n.key),n)}}function fW(t){var e=function(t,e){if("object"!=lW(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=lW(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==lW(e)?e:String(e)}var pW=function(t,e,r){return e&&cW(t.prototype,e),r&&cW(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.resourceType="",this.pageSize=12,this.currentPage=1,this.orderBy="UPDATETIME",this.orderType="DESC",this.searchType="PUBLIC",this.tags=[],this.dirIds=[],this.resourceSubTypes=[],this.aggregationTypes=[],this.text="",this.groupIds=[],this.departmentIds=[],V.extend(this,e)});function hW(t){"@babel/helpers - typeof";return(hW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yW(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,dW(n.key),n)}}function dW(t){var e=function(t,e){if("object"!=hW(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=hW(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==hW(e)?e:String(e)}var bW=function(t,e,r){return e&&yW(t.prototype,e),r&&yW(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.content=[],this.total=0,this.currentPage=1,this.pageSize=12,this.aggregations=null,V.extend(this,e)});function vW(t){"@babel/helpers - typeof";return(vW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mW(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,gW(n.key),n)}}function gW(t){var e=function(t,e){if("object"!=vW(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=vW(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==vW(e)?e:String(e)}function SW(t,e,r){return e=wW(e),function(t,e){if(e&&("object"===vW(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return OW(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],wW(t).constructor):e.apply(t,r))}function wW(t){return(wW=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function OW(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _W(t,e){return(_W=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var PW=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=SW(this,e,[t]),r=r||{},n.authorizeSetting=[],n.bounds="",n.bounds4326="",n.checkStatus="",n.createTime=0,n.description=null,n.dirId=null,n.epsgCode=0,n.heatLevel=0,n.id=0,n.name="",n.personalDirId=null,n.resourceId=0,n.resourceSubType=null,n.resourceType=null,n.serviceRootUrlId=null,n.tags=null,n.thumbnail=null,n.updateTime=0,n.userName="",n.sourceJSON={},V.extend(OW(n),r),n.resourceUrl=t+"/web/"+n.resourceType.replace("_","").toLowerCase()+"s/"+n.resourceId,n.withCredentials&&(n.resourceUrl=t+"/web/mycontent/"+n.resourceType.replace("_","").toLowerCase()+"s/"+n.resourceId),n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_W(t,e)}(e,uW),r=e,(n=[{key:"load",value:function(){var t=this;return t.request("GET",t.resourceUrl+".json").then(function(e){if(e.error)return e;t.sourceJSON=e})}},{key:"update",value:function(){var t=this.resourceType.replace("_","").toLowerCase();"data"===t&&(this.resourceUrl=this.resourceUrl+"/attributes.json");var e=JSON.stringify(this.sourceJSON);if("service"===t){var r={authorizeSetting:this.sourceJSON.authorizeSetting,metadata:this.sourceJSON.metadata,tags:this.sourceJSON.tags,thumbnail:this.sourceJSON.thumbnail,tokenRefreshUrl:this.sourceJSON.tokenRefreshUrl};e=JSON.stringify(r)}return this.request("PUT",this.resourceUrl,e,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})}}])&&mW(r.prototype,n),o&&mW(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function EW(t){"@babel/helpers - typeof";return(EW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function CW(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,TW(n.key),n)}}function TW(t){var e=function(t,e){if("object"!=EW(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=EW(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==EW(e)?e:String(e)}var jW=function(t,e,r){return e&&CW(t.prototype,e),r&&CW(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.ids=[],this.entities=[],this.resourceType="",V.extend(this,e)});function kW(t){"@babel/helpers - typeof";return(kW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xW(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,AW(n.key),n)}}function AW(t){var e=function(t,e){if("object"!=kW(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=kW(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==kW(e)?e:String(e)}function IW(t,e,r){return e=NW(e),function(t,e){if(e&&("object"===kW(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],NW(t).constructor):e.apply(t,r))}function NW(t){return(NW=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function RW(t,e){return(RW=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var MW=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=IW(this,e,[t,r])).iportalUrl=t,r=r||{},n.withCredentials=r.withCredentials||!1,n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&RW(t,e)}(e,uW),r=e,(n=[{key:"load",value:function(){return Dn.get(this.iportalUrl+"/web")}},{key:"queryResources",value:function(t){if(!(t instanceof pW))return new Promise(function(t){t("queryParams is not instanceof iPortalQueryParam !")});var e=this,r=this.iportalUrl+"/gateway/catalog/resource/search.json";return t.t=(new Date).getTime(),this.request("GET",r,t).then(function(t){var r=[];(t.content||[]).forEach(function(t){r.push(new PW(e.iportalUrl,t))});var n=new bW;return n.content=r,n.total=t.total,n.currentPage=t.currentPage,n.pageSize=t.pageSize,n.aggregations=t.aggregations,n})}},{key:"updateResourcesShareSetting",value:function(t){if(!(t instanceof jW))return new Promise(function(t){t("shareParams is not instanceof iPortalShareParam !")});var e=t.resourceType.replace("_","").toLowerCase()+"s";"datas"===e&&(e="mycontent/"+e);var r={ids:t.ids,entities:t.entities},n=this.iportalUrl+"/web/"+e+"/sharesetting.json";return this.request("PUT",n,JSON.stringify(r)).then(function(t){return t})}}])&&xW(r.prototype,n),o&&xW(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function LW(t){"@babel/helpers - typeof";return(LW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function BW(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,DW(n.key),n)}}function DW(t){var e=function(t,e){if("object"!=LW(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=LW(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==LW(e)?e:String(e)}var FW=function(t,e,r){return e&&BW(t.prototype,e),r&&BW(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.permissionType="",this.entityType="",this.entityName="GUEST",this.entityId=null,V.extend(this,e)});function UW(t){"@babel/helpers - typeof";return(UW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function GW(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,VW(n.key),n)}}function VW(t){var e=function(t,e){if("object"!=UW(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=UW(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==UW(e)?e:String(e)}var qW=function(t,e,r){return e&&GW(t.prototype,e),r&&GW(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.rootUrl="",this.tags=[],this.entities=[],V.extend(this,e)});function HW(t){"@babel/helpers - typeof";return(HW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zW(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,JW(n.key),n)}}function JW(t){var e=function(t,e){if("object"!=HW(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=HW(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==HW(e)?e:String(e)}var WW=function(t,e,r){return e&&zW(t.prototype,e),r&&zW(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.type="",this.tags=[],this.entities=[],this.metadata={},this.addedMapNames=[],this.addedSceneNames=[],V.extend(this,e)});function KW(t){"@babel/helpers - typeof";return(KW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function QW(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,YW(n.key),n)}}function YW(t){var e=function(t,e){if("object"!=KW(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=KW(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==KW(e)?e:String(e)}var XW=function(t,e,r){return e&&QW(t.prototype,e),r&&QW(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.fileName="",this.type="",this.tags=[],this.dataMetaInfo={},V.extend(this,e)});function ZW(t){"@babel/helpers - typeof";return(ZW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $W(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,tK(n.key),n)}}function tK(t){var e=function(t,e){if("object"!=ZW(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ZW(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ZW(e)?e:String(e)}var eK=function(t,e,r){return e&&$W(t.prototype,e),r&&$W(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.xField="",this.yField="",this.fileEncoding="UTF-8",this.xIndex=1,this.yIndex=1,this.fieldTypes=[],this.separator="",this.firstRowIsHead=!0,this.url="",this.dataStoreInfo={},V.extend(this,e)});function rK(t){"@babel/helpers - typeof";return(rK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nK(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,oK(n.key),n)}}function oK(t){var e=function(t,e){if("object"!=rK(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=rK(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==rK(e)?e:String(e)}var iK=function(t,e,r){return e&&nK(t.prototype,e),r&&nK(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.type="",this.url="",this.connectionInfo={},V.extend(this,e)});function aK(t){"@babel/helpers - typeof";return(aK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sK(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,uK(n.key),n)}}function uK(t){var e=function(t,e){if("object"!=aK(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=aK(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==aK(e)?e:String(e)}var lK=function(t,e,r){return e&&sK(t.prototype,e),r&&sK(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.dataBase="",this.server="",V.extend(this,e)});function cK(t){"@babel/helpers - typeof";return(cK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fK(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,pK(n.key),n)}}function pK(t){var e=function(t,e){if("object"!=cK(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=cK(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==cK(e)?e:String(e)}function hK(t,e,r){return e=yK(e),function(t,e){if(e&&("object"===cK(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],yK(t).constructor):e.apply(t,r))}function yK(t){return(yK=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function dK(t,e){return(dK=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var bK=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=hK(this,e,[t])).iportalUrl=t,r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dK(t,e)}(e,uW),r=e,(n=[{key:"deleteResources",value:function(t){var e=t.resourceType.replace("_","").toLowerCase(),r=this.iportalUrl+"/web/"+e+"s.json?ids="+encodeURI(JSON.stringify(t.ids));return"data"===e?(r=this.iportalUrl+"/web/mycontent/datas/delete.json",this.request("POST",r,JSON.stringify(t.ids))):this.request("DELETE",r)}},{key:"addMap",value:function(t){if(!(t instanceof qW))return this.getErrMsgPromise("addMapParams is not instanceof IPortalAddResourceParam !");var e={rootUrl:t.rootUrl,tags:t.tags,authorizeSetting:t.entities},r=this.iportalUrl+"/web/maps/batchaddmaps.json";return this.request("POST",r,JSON.stringify(e)).then(function(t){return t})}},{key:"addScene",value:function(t){if(!(t instanceof qW))return this.getErrMsgPromise("addSceneParams is not instanceof IPortalAddResourceParam !");var e={rootUrl:t.rootUrl,tags:t.tags,authorizeSetting:t.entities},r=this.iportalUrl+"/web/scenes/batchaddscenes.json";return this.request("POST",r,JSON.stringify(e)).then(function(t){return t})}},{key:"registerService",value:function(t){if(!(t instanceof WW))return this.getErrMsgPromise("registerParams is not instanceof IPortalRegisterServiceParam !");var e={type:t.type,tags:t.tags,authorizeSetting:t.entities,metadata:t.metadata,addedMapNames:t.addedMapNames,addedSceneNames:t.addedSceneNames},r=this.iportalUrl+"/web/services.json";return this.request("POST",r,JSON.stringify(e)).then(function(t){return t})}},{key:"getErrMsgPromise",value:function(t){return new Promise(function(e){e(t)})}},{key:"uploadDataRequest",value:function(t,e){var r=this.iportalUrl+"/web/mycontent/datas/"+t+"/upload.json";return this.request("POST",r,e)}},{key:"addData",value:function(t,e){var r=this;if(!(t instanceof XW))return this.getErrMsgPromise("params is not instanceof iPortalAddDataParam !");var n,o=this.iportalUrl+"/web/mycontent/datas.json",i={fileName:t.fileName,tags:t.tags,type:t.type},a=t.type.toLowerCase();if("excel"===a||"csv"===a){if(!(t.dataMetaInfo instanceof eK))return this.getErrMsgPromise("params.dataMetaInfo is not instanceof iPortalDataMetaInfoParam !");n={xField:t.dataMetaInfo.xField,yField:t.dataMetaInfo.yField},"csv"===a&&(n.fileEncoding=t.dataMetaInfo.fileEncoding),i.coordType="WGS84",i.dataMetaInfo=n}else if("hdfs"===a||"hbase"===a){if(!(t.dataMetaInfo instanceof eK))return this.getErrMsgPromise("params.dataMetaInfo is not instanceof iPortalDataMetaInfoParam !");if(!(t.dataMetaInfo.dataStoreInfo instanceof iK))return this.getErrMsgPromise("params.dataMetaInfo.dataStoreInfo is not instanceof iPortalDataStoreInfoParam !");var s={type:t.dataMetaInfo.dataStoreInfo.type};switch(a){case"hdfs":s.url=t.dataMetaInfo.dataStoreInfo.url,n={url:t.dataMetaInfo.url,dataStoreInfo:s};break;case"hbase":if(!(t.dataMetaInfo.dataStoreInfo.connectionInfo instanceof lK))return this.getErrMsgPromise("params.dataMetaInfo.dataStoreInfo.connectionInfo is not instanceof iPortalDataConnectionInfoParam !");s.connectionInfo={dataBase:t.dataMetaInfo.dataStoreInfo.connectionInfo.dataBase,server:t.dataMetaInfo.dataStoreInfo.connectionInfo.server,engineType:"HBASE"},s.datastoreType="SPATIAL",n={dataStoreInfo:s}}i.dataMetaInfo=n}return this.request("POST",o,JSON.stringify(i)).then(function(t){return"hdfs"===a||"hbase"===a?t:t.childID?r.uploadDataRequest(t.childID,e):t.customResult})}},{key:"publishOrUnpublish",value:function(t,e){if(!t.dataId||!t.serviceType)return this.getErrMsgPromise("option.dataID and option.serviceType are Required!");var r=t.dataId,n=t.dataServiceId,o=t.serviceType,i=this.iportalUrl+"/web/mycontent/datas/"+r+"/publishstatus.json?serviceType="+o;return n&&(i+="&dataServiceId="+n),this.request("PUT",i,JSON.stringify(e)).then(function(t){return e?(n||(n=t.customResult),n):t})}},{key:"getDataPublishedStatus",value:function(t,e){var r=this.iportalUrl+"/web/mycontent/datas/"+t+"/publishstatus.json?dataServiceId="+e+"&forPublish=true";return this.request("GET",r)}},{key:"unPublishDataService",value:function(t){return this.publishOrUnpublish(t,!1)}},{key:"publishDataService",value:function(t){return this.publishOrUnpublish(t,!0)}}])&&fK(r.prototype,n),o&&fK(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function vK(t){"@babel/helpers - typeof";return(vK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mK(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,gK(n.key),n)}}function gK(t){var e=function(t,e){if("object"!=vK(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=vK(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==vK(e)?e:String(e)}var SK=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.aggName=null,this.aggFieldName=null,this.CLASS_NAME="SuperMap.AggregationParameter",V.extend(this,e)}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.aggName=null,this.aggFieldName=null,this.aggType=null}}])&&mK(e.prototype,r),n&&mK(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function wK(t){"@babel/helpers - typeof";return(wK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function OK(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_K(n.key),n)}}function _K(t){var e=function(t,e){if("object"!=wK(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=wK(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==wK(e)?e:String(e)}function PK(t,e,r){return e=EK(e),function(t,e){if(e&&("object"===wK(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return CK(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],EK(t).constructor):e.apply(t,r))}function EK(t){return(EK=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function CK(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function TK(t,e){return(TK=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var jK=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=PK(this,e)).subAggs=null,r.aggType=null,r.CLASS_NAME="SuperMap.BucketAggParameter",V.extend(CK(r),t),r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&TK(t,e)}(e,SK),r=e,(n=[{key:"destroy",value:function(){this.subAggs&&(this.subAggs=null)}}])&&OK(r.prototype,n),o&&OK(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function kK(t){"@babel/helpers - typeof";return(kK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xK(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,AK(n.key),n)}}function AK(t){var e=function(t,e){if("object"!=kK(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=kK(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==kK(e)?e:String(e)}function IK(t,e,r){return e=MK(e),function(t,e){if(e&&("object"===kK(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return NK(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],MK(t).constructor):e.apply(t,r))}function NK(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function RK(){return(RK="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=MK(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function MK(t){return(MK=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function LK(t,e){return(LK=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var BK=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=IK(this,e)).aggType=Jr.AVG,V.extend(NK(r),t),r.CLASS_NAME="SuperMap.MetricsAggParameter",r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&LK(t,e)}(e,SK),r=e,(n=[{key:"destroy",value:function(){RK(MK(e.prototype),"destroy",this).call(this);this.aggType=null}}])&&xK(r.prototype,n),o&&xK(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function DK(t){"@babel/helpers - typeof";return(DK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function FK(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,UK(n.key),n)}}function UK(t){var e=function(t,e){if("object"!=DK(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=DK(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==DK(e)?e:String(e)}var GK=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.displayModeChart=Xr.STANDARD,this.colourModeChart=Yr.DAY_BRIGHT,this.displayTypeName="S52",this.fontName="Arial",this.simplifiedMarker=!0,this.symbolizedAreaBoundary=!1,this.displayTextMessage=!1,this.displaySounding=!1,this.minVisibleScaleEnabled=!0,this.localizationDisplayText=!1,this.displayMetaObject=!1,this.displayCellName=!1,this.displaySafetyContourLabel=!1,this.displayBorder=!1,this.safetyContour=30,this.shallowContour=2,this.deepContour=30,this.safetyDepth=30,this.displayOtherContourLabel=!1,this.displayTwoShades=!1,this.depthUnit=dr.METER,this.fontSize=10,this.displayableFeature=null,this.selectableFeature=null,this.textClipRegionEnabled=!1,this.displayLowAccurateMarker=!0,this.displayScaleFactor=.05,this.displayableAcronymClassify=null,e&&V.extend(this,e),this.CLASS_NAME="SuperMap.ChartSetting"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.displayModeChart=null,this.colourModeChart=null,this.displayTypeName=null,this.fontName=null,this.simplifiedMarker=null,this.symbolizedAreaBoundary=null,this.displayTextMessage=null,this.displaySounding=null,this.minVisibleScaleEnabled=null,this.localizationDisplayText=null,this.displayMetaObject=null,this.displayCellName=null,this.displaySafetyContourLabel=null,this.displayBorder=null,this.safetyContour=null,this.shallowContour=null,this.deepContour=null,this.safetyDepth=null,this.displayOtherContourLabel=null,this.displayTwoShades=null,this.depthUnit=null,this.fontSize=null,this.displayableFeature=null,this.selectableFeature=null,this.textClipRegionEnabled=null,this.displayLowAccurateMarker=null,this.displayScaleFactor=null,this.displayableAcronymClassify=null}}])&&FK(e.prototype,r),n&&FK(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function VK(t){"@babel/helpers - typeof";return(VK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qK(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,HK(n.key),n)}}function HK(t){var e=function(t,e){if("object"!=VK(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=VK(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==VK(e)?e:String(e)}var zK=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.clipDatasetName=null,this.clipDatasourceName=null,this.clipRegion=null,this.isClipInRegion=!0,this.isExactClip=null,e&&V.extend(this,e),this.CLASS_NAME="SuperMap.ClipParameter"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.clipDatasetName=null,t.clipDatasourceName=null,t.clipRegion=null,t.isClipInRegion=null,t.isExactClip=null}},{key:"toJSON",value:function(){return V.toJSON({isClipInRegion:this.isClipInRegion,clipDatasetName:this.clipDatasetName,clipDatasourceName:this.clipDatasourceName,isExactClip:this.isExactClip,clipRegion:en.fromGeometry(this.clipRegion)})}}])&&qK(e.prototype,r),n&&qK(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function JK(t){"@babel/helpers - typeof";return(JK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function WK(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,KK(n.key),n)}}function KK(t){var e=function(t,e){if("object"!=JK(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=JK(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==JK(e)?e:String(e)}function QK(t,e,r){return e=ZK(e),function(t,e){if(e&&("object"===JK(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return YK(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],ZK(t).constructor):e.apply(t,r))}function YK(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function XK(){return(XK="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ZK(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function ZK(t){return(ZK=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function $K(t,e){return($K=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var tQ=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=QK(this,e)).precision=5,V.extend(YK(r),t),r.aggType=zr.GEOHASH_GRID,r.CLASS_NAME="SuperMap.GeoHashGridAggParameter",r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$K(t,e)}(e,jK),r=e,o=[{key:"toJsonParameters",value:function(t){var e={aggName:t.aggName,aggFieldName:t.aggFieldName,aggType:t.aggType,precision:t.precision};return V.toJson(e)}}],(n=[{key:"destroy",value:function(){XK(ZK(e.prototype),"destroy",this).call(this),this.aggType=null,this.precision=null}}])&&WK(r.prototype,n),o&&WK(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function eQ(t){"@babel/helpers - typeof";return(eQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rQ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,nQ(n.key),n)}}function nQ(t){var e=function(t,e){if("object"!=eQ(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=eQ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==eQ(e)?e:String(e)}var oQ=function(t,e,r){return e&&rQ(t.prototype,e),r&&rQ(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.CLASS_NAME="LabelMatrixCell"});function iQ(t){"@babel/helpers - typeof";return(iQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function aQ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,sQ(n.key),n)}}function sQ(t){var e=function(t,e){if("object"!=iQ(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=iQ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==iQ(e)?e:String(e)}function uQ(t,e,r){return e=lQ(e),function(t,e){if(e&&("object"===iQ(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return cQ(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],lQ(t).constructor):e.apply(t,r))}function lQ(t){return(lQ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function cQ(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fQ(t,e){return(fQ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var pQ=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=uQ(this,e,[t])).height=0,r.pathField=null,r.rotation=0,r.width=0,r.sizeFixed=!1,r.type="IMAGE",t&&V.extend(cQ(r),t),r.CLASS_NAME="SuperMap.LabelImageCell",r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fQ(t,e)}(e,oQ),r=e,(n=[{key:"destroy",value:function(){var t=this;t.height=null,t.pathField=null,t.rotation=null,t.width=null,t.sizeFixed=null}}])&&aQ(r.prototype,n),o&&aQ(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function hQ(t){"@babel/helpers - typeof";return(hQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yQ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,dQ(n.key),n)}}function dQ(t){var e=function(t,e){if("object"!=hQ(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=hQ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==hQ(e)?e:String(e)}function bQ(t,e,r){return e=vQ(e),function(t,e){if(e&&("object"===hQ(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return mQ(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],vQ(t).constructor):e.apply(t,r))}function vQ(t){return(vQ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function mQ(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gQ(t,e){return(gQ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var SQ=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=bQ(this,e,[t])).style=new Je,r.symbolIDField=null,r.type="SYMBOL",t&&V.extend(mQ(r),t),r.CLASS_NAME="SuperMap.LabelSymbolCell",r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gQ(t,e)}(e,oQ),r=e,(n=[{key:"destroy",value:function(){this.style&&(this.style.destroy(),this.style=null),this.symbolIDField=null}}])&&yQ(r.prototype,n),o&&yQ(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function wQ(t){"@babel/helpers - typeof";return(wQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function OQ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_Q(n.key),n)}}function _Q(t){var e=function(t,e){if("object"!=wQ(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=wQ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==wQ(e)?e:String(e)}function PQ(t,e,r){return e=EQ(e),function(t,e){if(e&&("object"===wQ(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return CQ(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],EQ(t).constructor):e.apply(t,r))}function EQ(t){return(EQ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function CQ(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function TQ(t,e){return(TQ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var jQ=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=PQ(this,e,[t])).themeLabel=new If,r.type="THEME",t&&V.extend(CQ(r),t),r.CLASS_NAME=" SuperMap.LabelThemeCell",r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&TQ(t,e)}(e,oQ),r=e,(n=[{key:"destroy",value:function(){this.themeLabel&&(this.themeLabel.destroy(),this.themeLabel=null)}}])&&OQ(r.prototype,n),o&&OQ(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function kQ(t){"@babel/helpers - typeof";return(kQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xQ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,AQ(n.key),n)}}function AQ(t){var e=function(t,e){if("object"!=kQ(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=kQ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==kQ(e)?e:String(e)}var IQ=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.layerName=null,this.isVisible=null,this.displayFilter=null,this.fieldValuesDisplayFilter=null,e&&V.extend(this,e),this.CLASS_NAME="SuperMap.LayerStatus"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.layerName=null,this.isVisible=null,this.displayFilter=null}},{key:"toJSON",value:function(){var t="{";t+='"type":"UGC",';var e=[];return this.layerName&&(e.push('"name":"'+this.layerName+'"'),e.push('"visible":'+this.isVisible)),this.displayFilter&&e.push('"displayFilter":"'+this.displayFilter+'"'),(this.minScale||0==this.minScale)&&e.push('"minScale":'+this.minScale),(this.maxScale||0==this.maxScale)&&e.push('"maxScale":'+this.maxScale),this.fieldValuesDisplayFilter&&e.push('"fieldValuesDisplayFilter":'+V.toJSON(this.fieldValuesDisplayFilter)),t+=e,t+="}"}}])&&xQ(e.prototype,r),n&&xQ(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function NQ(t){"@babel/helpers - typeof";return(NQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function RQ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,MQ(n.key),n)}}function MQ(t){var e=function(t,e){if("object"!=NQ(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=NQ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==NQ(e)?e:String(e)}var LQ=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.datasourceConnectionInfo=null,this.foreignKeys=null,this.foreignTable=null,this.linkFields=null,this.linkFilter=null,this.name=null,this.primaryKeys=null,e&&V.extend(this,e),this.CLASS_NAME="SuperMap.LinkItem"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.datasourceConnectionInfo instanceof mw&&(t.datasourceConnectionInfo.destroy(),t.datasourceConnectionInfo=null),t.foreignKeys=null,t.foreignTable=null,t.linkFields=null,t.linkFilter=null,t.name=null,t.primaryKeys=null}}])&&RQ(e.prototype,r),n&&RQ(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function BQ(t){"@babel/helpers - typeof";return(BQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function DQ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,FQ(n.key),n)}}function FQ(t){var e=function(t,e){if("object"!=BQ(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=BQ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==BQ(e)?e:String(e)}var UQ=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.allowPointOverlap=!0,this.allowPointWithTextDisplay=!0,this.allowTextOverlap=!1,this.allowTextAndPointOverlap=!0,this.allowThemeGraduatedSymbolOverlap=!1,this.allowThemeGraphOverlap=!1,this.horizontalOverlappedSpaceSize=0,this.verticalOverlappedSpaceSize=0,V.extend(this,e),this.ugcLayer=new Yp(e),this.CLASS_NAME="SuperMap.OverlapDisplayedOptions"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){V.reset(this)}},{key:"fromJson",value:function(t){this.ugcLayer.fromJson.apply(this,[t])}},{key:"toServerJSONObject",value:function(){return this.ugcLayer.toServerJSONObject.apply(this,arguments)}},{key:"toString",value:function(){var t=this.ugcLayer.toServerJSONObject.apply(this,arguments),e="{";for(var r in t)t.hasOwnProperty(r)&&(e+="'"+r+"':"+t[r]+",");return e=e.substr(0,e.length-1),e+="}"}}])&&DQ(e.prototype,r),n&&DQ(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function GQ(t){"@babel/helpers - typeof";return(GQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function VQ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,qQ(n.key),n)}}function qQ(t){var e=function(t,e){if("object"!=GQ(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=GQ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==GQ(e)?e:String(e)}var HQ=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.model=null,this.resultSetting=null,e&&V.extend(this,e),this.CLASS_NAME="SuperMap.ConvexHullAnalystParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.model=null,this.resultSetting=null}}])&&VQ(e.prototype,r),n&&VQ(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function zQ(t){"@babel/helpers - typeof";return(zQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function JQ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,WQ(n.key),n)}}function WQ(t){var e=function(t,e){if("object"!=zQ(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=zQ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==zQ(e)?e:String(e)}var KQ=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.bbox=null,this.layers=null,this.transparent=null,this.mapScale=null,this.returnVisibleOnly=null,this.width=null,this.height=null,V.extend(this,e),this.CLASS_NAME="SuperMap.GetLayersLegendInfoParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.bbox=null,t.layers=null,t.transparent=null,t.mapScale=null,t.returnVisibleOnly=null,t.width=null,t.height=null}}])&&JQ(e.prototype,r),n&&JQ(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function QQ(t){"@babel/helpers - typeof";return(QQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function YQ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,XQ(n.key),n)}}function XQ(t){var e=function(t,e){if("object"!=QQ(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=QQ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==QQ(e)?e:String(e)}var ZQ=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.resourceID=null,this.tempLayerName=null,this.layerInfo=null,V.extend(this,e),this.CLASS_NAME="SuperMap.SetLayerInfoParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.resourceID=null,this.tempLayerName=null,this.layerInfo=null}}])&&YQ(e.prototype,r),n&&YQ(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function $Q(t){"@babel/helpers - typeof";return($Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tY(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,eY(n.key),n)}}function eY(t){var e=function(t,e){if("object"!=$Q(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=$Q(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==$Q(e)?e:String(e)}var rY=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.isTempLayers=null,this.resourceID=null,this.layersInfo=null,V.extend(this,e),this.CLASS_NAME="SuperMap.SetLayersInfoParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.isTempLayers=null,this.resourceID=null,this.layersInfo=null}}])&&tY(e.prototype,r),n&&tY(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function nY(t){"@babel/helpers - typeof";return(nY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oY(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,iY(n.key),n)}}function iY(t){var e=function(t,e){if("object"!=nY(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=nY(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==nY(e)?e:String(e)}var aY=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.maxWeight=null,this.nodeID=null,this.resourceValue=null,this.type=null,e&&V.extend(this,e),this.CLASS_NAME="SuperMap.SupplyCenter"}var e,r,n;return e=t,n=[{key:"fromJson",value:function(e){if(e)return new t({maxWeight:e.maxWeight,nodeID:e.nodeID,resourceValue:e.resourceValue,type:e.type})}}],(r=[{key:"destroy",value:function(){this.maxWeight=null,this.nodeID=null,this.resourceValue=null,this.type=null}}])&&oY(e.prototype,r),n&&oY(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function sY(t){"@babel/helpers - typeof";return(sY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function uY(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,lY(n.key),n)}}function lY(t){var e=function(t,e){if("object"!=sY(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=sY(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==sY(e)?e:String(e)}var cY=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.bounds=null,this.boundsType=Kr.MAX,this.cellSize=null,this.cellSizeType=Qr.UNION,V.extend(this,e),this.CLASS_NAME="SuperMap.terrainAnalystSetting"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.bounds=null,this.boundsType=null,this.cellSize=null,this.cellSizeType=null}}])&&uY(e.prototype,r),n&&uY(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function fY(t){"@babel/helpers - typeof";return(fY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pY(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,hY(n.key),n)}}function hY(t){var e=function(t,e){if("object"!=fY(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=fY(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==fY(e)?e:String(e)}var yY=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.flowEnabled=!1,this.leaderLineDisplayed=!1,this.leaderLineStyle=new Je,e&&V.extend(this,e),this.CLASS_NAME="SuperMap.ThemeFlow"}var e,r,n;return e=t,n=[{key:"fromObj",value:function(e){if(e){var r=new t;return V.copy(r,e),r.leaderLineStyle=Je.fromJson(e.leaderLineStyle),r}}}],(r=[{key:"destroy",value:function(){var t=this;t.flowEnabled=null,t.leaderLineDisplayed=null,t.leaderLineStyle&&(t.leaderLineStyle.destroy(),t.leaderLineStyle=null)}}])&&pY(e.prototype,r),n&&pY(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function dY(t){"@babel/helpers - typeof";return(dY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bY(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,vY(n.key),n)}}function vY(t){var e=function(t,e){if("object"!=dY(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=dY(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==dY(e)?e:String(e)}var mY=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.caption=null,this.color=new Ve,this.end=0,this.start=0,this.visible=!0,e&&V.extend(this,e),this.CLASS_NAME="SuperMap.ThemeGridRangeItem"}var e,r,n;return e=t,n=[{key:"fromObj",value:function(e){if(e){var r=new t;return V.copy(r,e),r.color=Ve.fromJson(e.color),r}}}],(r=[{key:"destroy",value:function(){var t=this;t.caption=null,t.end=null,t.start=null,t.color&&(t.color.destroy(),t.color=null),t.visible=null}},{key:"toServerJSONObject",value:function(){var t={};return(t=V.copyAttributes(t,this)).color&&t.color.toServerJSONObject&&(t.color=t.color.toServerJSONObject()),t}}])&&bY(e.prototype,r),n&&bY(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function gY(t){"@babel/helpers - typeof";return(gY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function SY(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,wY(n.key),n)}}function wY(t){var e=function(t,e){if("object"!=gY(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=gY(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==gY(e)?e:String(e)}function OY(t,e,r){return e=EY(e),function(t,e){if(e&&("object"===gY(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _Y(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],EY(t).constructor):e.apply(t,r))}function _Y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function PY(){return(PY="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=EY(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function EY(t){return(EY=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function CY(t,e){return(CY=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var TY=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=OY(this,e,["GRIDRANGE",t])).items=null,r.rangeMode=wr.EQUALINTERVAL,r.rangeParameter=0,r.colorGradientType=Or.YELLOW_RED,r.reverseColor=!1,t&&V.extend(_Y(r),t),r.CLASS_NAME="SuperMap.ThemeGridRange",r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&CY(t,e)}(e,Hc),r=e,o=[{key:"fromObj",value:function(t){if(t){var r=new e;V.copy(r,t);var n=t.items,o=n?n.length:0;r.items=[];for(var i=0;i<o;i++)r.items.push(mY.fromObj(n[i]));return r}}}],(n=[{key:"destroy",value:function(){PY(EY(e.prototype),"destroy",this).call(this);var t=this;if(t.items){if(t.items.length>0)for(var r in t.items)t.items[r].destroy(),t.items[r]=null;t.items=null}t.reverseColor=null,t.rangeMode=null,t.rangeParameter=null,t.colorGradientType=null}}])&&SY(r.prototype,n),o&&SY(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function jY(t){"@babel/helpers - typeof";return(jY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kY(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,xY(n.key),n)}}function xY(t){var e=function(t,e){if("object"!=jY(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=jY(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==jY(e)?e:String(e)}var AY=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.caption=null,this.color=new Ve,this.unique=null,this.visible=!0,e&&V.extend(this,e),this.CLASS_NAME="SuperMap.ThemeGridUniqueItem"}var e,r,n;return e=t,n=[{key:"fromObj",value:function(e){var r=new t;return V.copy(r,e),r.color=Ve.fromJson(e.color),r}}],(r=[{key:"destroy",value:function(){var t=this;t.caption=null,t.unique=null,t.color&&(t.color.destroy(),t.color=null),t.visible=null}},{key:"toServerJSONObject",value:function(){var t={};return(t=V.copyAttributes(t,this)).color&&t.color.toServerJSONObject&&(t.color=t.color.toServerJSONObject()),t}}])&&kY(e.prototype,r),n&&kY(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function IY(t){"@babel/helpers - typeof";return(IY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function NY(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,RY(n.key),n)}}function RY(t){var e=function(t,e){if("object"!=IY(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=IY(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==IY(e)?e:String(e)}function MY(t,e,r){return e=DY(e),function(t,e){if(e&&("object"===IY(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return LY(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],DY(t).constructor):e.apply(t,r))}function LY(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function BY(){return(BY="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=DY(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function DY(t){return(DY=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function FY(t,e){return(FY=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var UY=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=MY(this,e,["GRIDUNIQUE",t])).defaultcolor=new Ve,r.items=null,t&&V.extend(LY(r),t),r.CLASS_NAME="SuperMap.ThemeGridUnique",r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&FY(t,e)}(e,Hc),r=e,o=[{key:"fromObj",value:function(t){var r=new e,n=t.items,o=n?n.length:0;V.extend(r,t),r.items=[],r.defaultcolor=Ve.fromJson(t.defaultcolor);for(var i=0;i<o;i++)r.items.push(AY.fromObj(n[i]));return r}}],(n=[{key:"destroy",value:function(){BY(DY(e.prototype),"destroy",this).call(this);var t=this;if(t.items){if(t.items.length>0)for(var r in t.items)t.items[r].destroy(),t.items[r]=null;t.items=null}t.defaultcolor&&(t.defaultcolor.destroy(),t.defaultcolor=null)}},{key:"toServerJSONObject",value:function(){var t={};if((t=V.copyAttributes(t,this)).defaultcolor&&t.defaultcolor.toServerJSONObject&&(t.defaultcolor=t.defaultcolor.toServerJSONObject()),t.items){for(var e=[],r=t.items.length,n=0;n<r;n++)e.push(t.items[n].toServerJSONObject());t.items=e}return t}}])&&NY(r.prototype,n),o&&NY(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function GY(t){"@babel/helpers - typeof";return(GY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function VY(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,qY(n.key),n)}}function qY(t){var e=function(t,e){if("object"!=GY(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=GY(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==GY(e)?e:String(e)}var HY=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.caption=null,this.unique=null,this.offsetX=0,this.offsetY=0,this.visible=!0,this.style=new Kc,e&&V.extend(this,e),this.CLASS_NAME="SuperMap.ThemeLabelUniqueItem"}var e,r,n;return e=t,n=[{key:"fromObj",value:function(e){if(e){var r=new t;return V.copy(r,e),r}}}],(r=[{key:"destroy",value:function(){var t=this;t.unique=null,t.caption=null,t.offsetX=null,t.offsetY=null,t.style&&(t.style.destroy(),t.style=null),t.visible=null}}])&&VY(e.prototype,r),n&&VY(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function zY(t){"@babel/helpers - typeof";return(zY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function JY(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,WY(n.key),n)}}function WY(t){var e=function(t,e){if("object"!=zY(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=zY(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==zY(e)?e:String(e)}var KY=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.srcData=e,this.targetData=r,this.CLASS_NAME="SuperMap.ThemeMemoryData"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.srcData=null,this.targetData=null}},{key:"toJSON",value:function(){if(this.srcData&&this.targetData){for(var t="",e=Math.min(this.srcData.length,this.targetData.length),r=0;r<e;r++)t+="'"+this.srcData[r]+"':'"+this.targetData[r]+"',";return r>0&&(t=t.substring(0,t.length-1)),"{"+t+"}"}return null}}])&&JY(e.prototype,r),n&&JY(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function QY(t){"@babel/helpers - typeof";return(QY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function YY(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,XY(n.key),n)}}function XY(t){var e=function(t,e){if("object"!=QY(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=QY(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==QY(e)?e:String(e)}var ZY=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.lineID=null,this.lineName=null,this.lineAliasName=null,this.startStopIndex=null,this.startStopName=null,this.startStopAliasName=null,this.endStopIndex=null,this.endStopName=null,this.endStopAliasName=null,V.extend(this,e),this.CLASS_NAME="SuperMap.TransferLine"}var e,r,n;return e=t,n=[{key:"fromJson",value:function(e){if(e)return new t({lineID:e.lineID,lineName:e.lineName,lineAliasName:e.lineAliasName,startStopIndex:e.startStopIndex,startStopName:e.startStopName,startStopAliasName:e.startStopAliasName,endStopIndex:e.endStopIndex,endStopName:e.endStopName,endStopAliasName:e.endStopAliasName})}}],(r=[{key:"destroy",value:function(){V.reset(this)}}])&&YY(e.prototype,r),n&&YY(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function $Y(t){"@babel/helpers - typeof";return($Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tX(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,eX(n.key),n)}}function eX(t){var e=function(t,e){if("object"!=$Y(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=$Y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==$Y(e)?e:String(e)}var rX=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.type=null,V.extend(this,e),this.CLASS_NAME="SuperMap.RasterFunctionParameter"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.type=null}}])&&tX(e.prototype,r),n&&tX(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function nX(t){"@babel/helpers - typeof";return(nX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oX(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,iX(n.key),n)}}function iX(t){var e=function(t,e){if("object"!=nX(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=nX(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==nX(e)?e:String(e)}function aX(t,e,r){return e=lX(e),function(t,e){if(e&&("object"===nX(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return sX(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],lX(t).constructor):e.apply(t,r))}function sX(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function uX(){return(uX="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=lX(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function lX(t){return(lX=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function cX(t,e){return(cX=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var fX=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=aX(this,e,[t])).redIndex=0,r.nirIndex=1,r.colorMap="0:ffffe5ff;0.1:f7fcb9ff;0.2:d9f0a3ff;0.3:addd8eff;0.4:78c679ff;0.5:41ab5dff;0.6:238443ff;0.7:006837ff;1:004529ff",r.type=Wr.NDVI,V.extend(sX(r),t),r.CLASS_NAME="SuperMap.NDVIParameter",r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cX(t,e)}(e,rX),r=e,(n=[{key:"destroy",value:function(){uX(lX(e.prototype),"destroy",this).call(this),this.redIndex=null,this.nirIndex=null,this.colorMap=null}},{key:"toJSON",value:function(){return{redIndex:this.redIndex,nirIndex:this.nirIndex,colorMap:this.colorMap,type:this.type}}}])&&oX(r.prototype,n),o&&oX(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function pX(t){"@babel/helpers - typeof";return(pX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hX(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,yX(n.key),n)}}function yX(t){var e=function(t,e){if("object"!=pX(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=pX(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==pX(e)?e:String(e)}function dX(t,e,r){return e=mX(e),function(t,e){if(e&&("object"===pX(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return bX(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],mX(t).constructor):e.apply(t,r))}function bX(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vX(){return(vX="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=mX(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function mX(t){return(mX=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function gX(t,e){return(gX=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var SX=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=dX(this,e,[t])).altitude=45,r.azimuth=315,r.zFactor=1,r.type=Wr.HILLSHADE,V.extend(bX(r),t),r.CLASS_NAME="SuperMap.HillshadeParameter",r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gX(t,e)}(e,rX),r=e,(n=[{key:"destroy",value:function(){vX(mX(e.prototype),"destroy",this).call(this),this.altitude=null,this.azimuth=null,this.zFactor=null}},{key:"toJSON",value:function(){return{altitude:this.altitude,azimuth:this.azimuth,zFactor:this.zFactor,type:this.type}}}])&&hX(r.prototype,n),o&&hX(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function wX(t){"@babel/helpers - typeof";return(wX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function OX(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_X(n.key),n)}}function _X(t){var e=function(t,e){if("object"!=wX(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=wX(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==wX(e)?e:String(e)}var PX=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=null,this.picAsUrl=null,this.picAsBase64=null,this.CLASS_NAME="SuperMap.WebPrintingJobCustomItems",V.extend(this,e)}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.name=null,this.picAsUrl=null,this.picAsBase64=null}},{key:"toJSON",value:function(){var t={name:this.name};return this.title&&(t.title=this.title),this.picAsUrl?t.picAsUrl=this.picAsUrl:this.picAsBase64&&(t.picAsBase64=this.picAsBase64.replace(/^data:.+;base64,/,"")),V.toJSON(t)}}])&&OX(e.prototype,r),n&&OX(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function EX(t){"@babel/helpers - typeof";return(EX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function CX(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,TX(n.key),n)}}function TX(t){var e=function(t,e){if("object"!=EX(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=EX(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==EX(e)?e:String(e)}var jX=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.picAsUrl=null,this.picAsBase64=null,this.CLASS_NAME="SuperMap.WebPrintingJobImage",V.extend(this,e)}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.picAsUrl=null,this.picAsBase64=null}},{key:"toJSON",value:function(){var t={};return this.picAsUrl&&(t.picAsUrl=this.picAsUrl),this.picAsBase64&&(t.picAsBase64=this.picAsBase64.replace(/^data:.+;base64,/,"")),V.toJSON(t)}}])&&CX(e.prototype,r),n&&CX(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function kX(t){"@babel/helpers - typeof";return(kX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xX(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,AX(n.key),n)}}function AX(t){var e=function(t,e){if("object"!=kX(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=kX(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==kX(e)?e:String(e)}var IX=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=null,this.layerType=null,this.url=null,this.CLASS_NAME="SuperMap.WebPrintingJobLayers",V.extend(this,e)}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.name=null,this.layerType=null,this.url=null}}])&&xX(e.prototype,r),n&&xX(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function NX(t){"@babel/helpers - typeof";return(NX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function RX(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,MX(n.key),n)}}function MX(t){var e=function(t,e){if("object"!=NX(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=NX(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==NX(e)?e:String(e)}var LX=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.title=null,this.picAsUrl=null,this.picAsBase64=null,this.layers=null,this.customItems=null,this.CLASS_NAME="SuperMap.WebPrintingJobLegendOptions",V.extend(this,e)}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.title=null,this.picAsUrl=null,this.picAsBase64=null,this.layers instanceof IX&&(this.layers.destroy(),this.layers=null),this.customItems instanceof PX&&(this.customItems.destroy(),this.customItems=null)}},{key:"toJSON",value:function(){var t={title:this.title||""};return this.picAsUrl?t.picAsUrl=this.picAsUrl:this.picAsBase64?t.picAsBase64=this.picAsBase64.replace(/^data:.+;base64,/,""):this.customItems&&(t.customItems=this.customItems),V.toJSON(t)}}])&&RX(e.prototype,r),n&&RX(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function BX(t){"@babel/helpers - typeof";return(BX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function DX(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,FX(n.key),n)}}function FX(t){var e=function(t,e){if("object"!=BX(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=BX(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==BX(e)?e:String(e)}var UX=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.center=null,this.scale=null,this.layerNames=null,this.image=null,this.layers=null,this.CLASS_NAME="SuperMap.WebPrintingJobLittleMapOptions",V.extend(this,e)}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.center=null,this.scale=null,this.layerNames=null,this.image instanceof jX&&(this.image.destroy(),this.image=null),this.layers instanceof IX&&(this.layers.destroy(),this.layers=null)}},{key:"toJSON",value:function(){var t={scale:this.scale,center:this.center};return this.layerNames?t.layerNames=this.layerNames:this.layers&&(t.layers=this.layers),this.image&&(t.image=this.image),V.toJSON(t)}}])&&DX(e.prototype,r),n&&DX(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function GX(t){"@babel/helpers - typeof";return(GX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function VX(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,qX(n.key),n)}}function qX(t){var e=function(t,e){if("object"!=GX(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=GX(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==GX(e)?e:String(e)}var HX=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.picAsUrl=null,this.picAsBase64=null,this.CLASS_NAME="SuperMap.WebPrintingJobNorthArrowOptions",V.extend(this,e)}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.picAsUrl=null,this.picAsBase64=null}},{key:"toJSON",value:function(){var t={};return this.picAsUrl?t.picAsUrl=this.picAsUrl:this.picAsBase64&&(t.picAsBase64=this.picAsBase64.replace(/^data:.+;base64,/,"")),V.toJSON(t)}}])&&VX(e.prototype,r),n&&VX(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function zX(t){"@babel/helpers - typeof";return(zX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function JX(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,WX(n.key),n)}}function WX(t){var e=function(t,e){if("object"!=zX(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=zX(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==zX(e)?e:String(e)}var KX=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.scaleText=null,this.orientation=null,this.type=null,this.intervals=null,this.unit=null,this.CLASS_NAME="SuperMap.WebPrintingJobScaleBarOptions",V.extend(this,e)}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.scaleText=null,this.orientation=null,this.type=null,this.intervals=null,this.unit=null}},{key:"toJSON",value:function(){var t={scaleText:this.scaleText||"",type:this.type||"BAR",intervals:this.intervals||"",unit:this.unit||"METER"};return this.orientation&&(t.orientation=this.orientation),V.toJSON(t)}}])&&JX(e.prototype,r),n&&JX(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function QX(t){"@babel/helpers - typeof";return(QX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function YX(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,XX(n.key),n)}}function XX(t){var e=function(t,e){if("object"!=QX(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=QX(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==QX(e)?e:String(e)}var ZX=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.type=null,this.url=null,this.token=null,this.value=null,this.CLASS_NAME="SuperMap.WebPrintingJobContent",V.extend(this,e)}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.type="WEBMAP",this.url=null,this.token=null,this.value=null}},{key:"toJSON",value:function(){var t={type:this.type};return this.token&&(t.token=this.token),this.url?t.url=this.url:this.value&&(t.value=this.value),V.toJSON(t)}}])&&YX(e.prototype,r),n&&YX(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function $X(t){"@babel/helpers - typeof";return($X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tZ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,eZ(n.key),n)}}function eZ(t){var e=function(t,e){if("object"!=$X(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=$X(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==$X(e)?e:String(e)}var rZ=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.templateName=null,this.title=null,this.subTitle=null,this.author=null,this.copyright=null,this.summaryText=null,this.time=null,this.scaleBarOptions=null,this.northArrowOptions=null,this.littleMapOptions=null,this.legendOptions=null,this.CLASS_NAME="SuperMap.WebPrintingJobLayoutOptions",V.extend(this,e)}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.templateName=null,this.title=null,this.subTitle=null,this.author=null,this.copyright=null,this.summaryText=null,this.time=null,this.scaleBarOptions instanceof KX&&(this.scaleBarOptions.destroy(),this.scaleBarOptions=null),this.northArrowOptions instanceof HX&&(this.northArrowOptions.destroy(),this.northArrowOptions=null),this.littleMapOptions instanceof UX&&(this.littleMapOptions.destroy(),this.littleMapOptions=null),this.legendOptions instanceof LX&&(this.legendOptions.destroy(),this.legendOptions=null)}}])&&tZ(e.prototype,r),n&&tZ(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function nZ(t){"@babel/helpers - typeof";return(nZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oZ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,iZ(n.key),n)}}function iZ(t){var e=function(t,e){if("object"!=nZ(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=nZ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==nZ(e)?e:String(e)}var aZ=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.format=null,this.dpi=96,this.scale=null,this.rotation=null,this.center=null,this.CLASS_NAME="SuperMap.WebPrintingJobExportOptions",V.extend(this,e)}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.format=null,this.dpi=null,this.scale=null,this.rotation=null,this.center=null,this.outputSize=null}},{key:"toJSON",value:function(){var t={format:this.format||"PDF",dpi:this.dpi,scale:this.scale,center:this.center};return this.rotation&&(t.rotation=this.rotation),this.outputSize&&(t.outputSize=this.outputSize),V.toJSON(t)}}])&&oZ(e.prototype,r),n&&oZ(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function sZ(t){"@babel/helpers - typeof";return(sZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function uZ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,lZ(n.key),n)}}function lZ(t){var e=function(t,e){if("object"!=sZ(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=sZ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==sZ(e)?e:String(e)}var cZ=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.content=null,this.layoutOptions=null,this.exportOptions=null,V.extend(this,e),this.CLASS_NAME="SuperMap.WebPrintingJobParameters")}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.content instanceof ZX&&(this.content.destroy(),this.content=null),this.layoutOptions instanceof rZ&&(this.layoutOptions.destroy(),this.layoutOptions=null),this.exportOptions instanceof aZ&&(this.exportOptions.destroy(),this.exportOptions=null)}}])&&uZ(e.prototype,r),n&&uZ(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function fZ(t){"@babel/helpers - typeof";return(fZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pZ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,hZ(n.key),n)}}function hZ(t){var e=function(t,e){if("object"!=fZ(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=fZ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==fZ(e)?e:String(e)}var yZ=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.include=void 0,this.exclude=void 0,this.CLASS_NAME="SuperMap.FieldsFilter",V.extend(this,e)}var e,r,n;return e=t,n=[{key:"constructFromObject",value:function(e,r){return e&&(r=r||new t,e.hasOwnProperty("include")&&(r.include=e.include),e.hasOwnProperty("exclude")&&(r.exclude=e.exclude)),r}}],(r=[{key:"destroy",value:function(){this.include=void 0,this.exclude=void 0}}])&&pZ(e.prototype,r),n&&pZ(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function dZ(t){"@babel/helpers - typeof";return(dZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bZ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,vZ(n.key),n)}}function vZ(t){var e=function(t,e){if("object"!=dZ(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=dZ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==dZ(e)?e:String(e)}var mZ=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.field=void 0,this.direction=t.Direction.ASC,this.CLASS_NAME="SuperMap.Sortby",V.extend(this,e)}var e,r,n;return e=t,n=[{key:"constructFromObject",value:function(e,r){return e&&(r=r||new t,e.hasOwnProperty("field")&&(r.field=e.field),e.hasOwnProperty("direction")&&(r.direction=e.direction)),r}}],(r=[{key:"destroy",value:function(){this.field=void 0,this.direction="ASC"}}])&&bZ(e.prototype,r),n&&bZ(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function gZ(t){"@babel/helpers - typeof";return(gZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function SZ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,wZ(n.key),n)}}function wZ(t){var e=function(t,e){if("object"!=gZ(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=gZ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==gZ(e)?e:String(e)}mZ.Direction={ASC:"ASC",DESC:"DESC"};var OZ=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.bbox=void 0,this.collections=void 0,this.ids=void 0,this.limit=void 0,this.fields=void 0,this.query=void 0,this.sortby=void 0,this.CLASS_NAME="SuperMap.ImageSearchParameter",V.extend(this,e)}var e,r,n;return e=t,n=[{key:"constructFromObject",value:function(e,r){return e&&(r=r||new t,e.hasOwnProperty("bbox")&&(r.bbox=e.bbox),e.hasOwnProperty("collections")&&(r.collections=e.collections),e.hasOwnProperty("ids")&&(r.ids=e.ids),e.hasOwnProperty("limit")&&(r.limit=e.limit),e.hasOwnProperty("fields")&&(r.fields=yZ.constructFromObject&&yZ.constructFromObject(e.fields,{})||e.fields),e.hasOwnProperty("query")&&(r.query=e.query),e.hasOwnProperty("sortby")&&(r.sortby=e.sortby,e.sortby&&(r.sortby=e.sortby.map(function(t){return mZ.constructFromObject&&mZ.constructFromObject(t,{})||t})))),r}}],(r=[{key:"destroy",value:function(){var t=this;t.bbox=void 0,t.collections=void 0,t.ids=void 0,t.limit=void 0,t.fields=void 0,t.query=void 0,t.sortby=void 0}}])&&SZ(e.prototype,r),n&&SZ(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function _Z(t){"@babel/helpers - typeof";return(_Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function PZ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,EZ(n.key),n)}}function EZ(t){var e=function(t,e){if("object"!=_Z(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=_Z(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==_Z(e)?e:String(e)}var CZ=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.stretchType=void 0,this.stdevCoefficient=void 0,this.gaussianCoefficient=void 0,this.useMedianValue=void 0,this.minPercent=void 0,this.maxPercent=void 0,this.CLASS_NAME="SuperMap.ImageStretchOption",V.extend(this,e)}var e,r,n;return e=t,n=[{key:"constructFromObject",value:function(e,r){return e&&(r=r||new t,e.hasOwnProperty("stretchType")&&(r.stretchType=e.stretchType),e.hasOwnProperty("stdevCoefficient")&&(r.stdevCoefficient=e.stdevCoefficient),e.hasOwnProperty("gaussianCoefficient")&&(r.gaussianCoefficient=e.gaussianCoefficient),e.hasOwnProperty("useMedianValue")&&(r.useMedianValue=e.useMedianValue),e.hasOwnProperty("minPercent")&&(r.minPercent=e.minPercent),e.hasOwnProperty("maxPercent")&&(r.maxPercent=e.maxPercent)),r}}],(r=[{key:"destroy",value:function(){var t=this;t.stretchType=void 0,t.stdevCoefficient=void 0,t.gaussianCoefficient=void 0,t.useMedianValue=void 0,t.minPercent=void 0,t.maxPercent=void 0}}])&&PZ(e.prototype,r),n&&PZ(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function TZ(t){"@babel/helpers - typeof";return(TZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jZ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,kZ(n.key),n)}}function kZ(t){var e=function(t,e){if("object"!=TZ(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=TZ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==TZ(e)?e:String(e)}CZ.StretchType={NONE:"NONE",GAUSSIAN:"GAUSSIAN",PERCENTCLIP:"PERCENTCLIP",MINIMUMMAXIMUM:"MINIMUMMAXIMUM",STANDARDDEVIATION:"STANDARDDEVIATION"};var xZ=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.displayMode=void 0,this.displayBands=void 0,this.stretchOption=void 0,this.interpolationMode=void 0,this.colorScheme=void 0,this.colorTable=void 0,this.brightness=void 0,this.contrast=void 0,this.noData=void 0,this.noDataColor=void 0,this.noDataTransparent=void 0,this.backgroundValue=void 0,this.backgroundColor=void 0,this.backgroundTransparent=void 0,this.gridFunctions=void 0,this.CLASS_NAME="SuperMap.ImageRenderingRule",V.extend(this,e)}var e,r,n;return e=t,n=[{key:"constructFromObject",value:function(e,r){return e&&(r=r||new t,e.hasOwnProperty("displayMode")&&(r.displayMode=e.displayMode),e.hasOwnProperty("displayBands")&&(r.displayBands=e.displayBands),e.hasOwnProperty("stretchOption")&&(r.stretchOption=CZ.constructFromObject&&CZ.constructFromObject(e.stretchOption,{})||e.stretchOption),e.hasOwnProperty("interpolationMode")&&(r.interpolationMode=e.interpolationMode),e.hasOwnProperty("colorScheme")&&(r.colorScheme=e.colorScheme),e.hasOwnProperty("colorTable")&&(r.colorTable=e.colorTable),e.hasOwnProperty("brightness")&&(r.brightness=e.brightness),e.hasOwnProperty("contrast")&&(r.contrast=e.contrast),e.hasOwnProperty("noData")&&(r.noData=e.noData),e.hasOwnProperty("noDataColor")&&(r.noDataColor=e.noDataColor),e.hasOwnProperty("backgroundValue")&&(r.backgroundValue=e.backgroundValue),e.hasOwnProperty("noDataTransparent")&&(r.noDataTransparent=e.noDataTransparent),e.hasOwnProperty("backgroundColor")&&(r.backgroundColor=e.backgroundColor),e.hasOwnProperty("backgroundTransparent")&&(r.backgroundTransparent=e.backgroundTransparent),e.hasOwnProperty("gridFunctions")&&(r.gridFunctions=e.gridFunctions)),r}}],(r=[{key:"destroy",value:function(){var t=this;t.displayMode=void 0,t.displayBands=void 0,t.stretchOption=void 0,t.interpolationMode=void 0,t.colorScheme=void 0,t.colorTable=void 0,t.brightness=void 0,t.contrast=void 0,t.noData=void 0,t.noDataColor=void 0,t.noDataTransparent=void 0,t.backgroundValue=void 0,t.backgroundColor=void 0,t.backgroundTransparent=void 0,t.gridFuncOptions=void 0}}])&&jZ(e.prototype,r),n&&jZ(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function AZ(t){"@babel/helpers - typeof";return(AZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function IZ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,NZ(n.key),n)}}function NZ(t){var e=function(t,e){if("object"!=AZ(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=AZ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==AZ(e)?e:String(e)}xZ.DisplayMode={COMPOSITE:"COMPOSITE",STRETCHED:"Stretched"},xZ.InterpolationMode={NEARESTNEIGHBOR:"NEARESTNEIGHBOR",HIGHQUALITYBILINEAR:"HIGHQUALITYBILINEAR",DEFAULT:"DEFAULT"};var RZ=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.girdFuncName="GFHillShade",this.Azimuth=315,this.Altitude=45,this.ZFactor=1,this.CLASS_NAME="SuperMap.ImageGFHillShade",V.extend(this,e)}var e,r,n;return e=t,n=[{key:"constructFromObject",value:function(e,r){return e&&(r=r||new t,e.hasOwnProperty("girdFuncName")&&(r.girdFuncName=e.girdFuncName),e.hasOwnProperty("Azimuth")&&(r.Azimuth=e.Azimuth),e.hasOwnProperty("Altitude")&&(r.Altitude=e.Altitude),e.hasOwnProperty("ZFactor")&&(r.ZFactor=e.ZFactor)),r}}],(r=[{key:"destroy",value:function(){this.girdFuncName="GFHillShade",this.Azimuth=315,this.Altitude=45,this.ZFactor=1}}])&&IZ(e.prototype,r),n&&IZ(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function MZ(t){"@babel/helpers - typeof";return(MZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function LZ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,BZ(n.key),n)}}function BZ(t){var e=function(t,e){if("object"!=MZ(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=MZ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==MZ(e)?e:String(e)}var DZ=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.girdFuncName="GFAspect",this.Azimuth=void 0,this.CLASS_NAME="SuperMap.ImageGFAspect",V.extend(this,e)}var e,r,n;return e=t,n=[{key:"constructFromObject",value:function(e,r){return e&&(r=r||new t,e.hasOwnProperty("girdFuncName")&&(r.girdFuncName=e.girdFuncName),e.hasOwnProperty("Azimuth")&&(r.Azimuth=e.Azimuth)),r}}],(r=[{key:"destroy",value:function(){this.girdFuncName="GFAspect",this.Azimuth=void 0}}])&&LZ(e.prototype,r),n&&LZ(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function FZ(t){"@babel/helpers - typeof";return(FZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function UZ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,GZ(n.key),n)}}function GZ(t){var e=function(t,e){if("object"!=FZ(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=FZ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==FZ(e)?e:String(e)}var VZ=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.girdFuncName="GFOrtho",this.CLASS_NAME="SuperMap.ImageGFOrtho",V.extend(this,e)}var e,r,n;return e=t,n=[{key:"constructFromObject",value:function(e,r){return e&&(r=r||new t,e.hasOwnProperty("girdFuncName")&&(r.girdFuncName=e.girdFuncName)),r}}],(r=[{key:"destroy",value:function(){this.girdFuncName="GFOrtho"}}])&&UZ(e.prototype,r),n&&UZ(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function qZ(t){"@babel/helpers - typeof";return(qZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function HZ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,zZ(n.key),n)}}function zZ(t){var e=function(t,e){if("object"!=qZ(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=qZ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==qZ(e)?e:String(e)}var JZ=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.girdFuncName="GFSlope",this.Altitude=45,this.ZFactor=1,this.CLASS_NAME="SuperMap.ImageGFSlope",V.extend(this,e)}var e,r,n;return e=t,n=[{key:"constructFromObject",value:function(e,r){return e&&(r=r||new t,e.hasOwnProperty("girdFuncName")&&(r.girdFuncName=e.girdFuncName),e.hasOwnProperty("Altitude")&&(r.Altitude=e.Altitude),e.hasOwnProperty("ZFactor")&&(r.ZFactor=e.ZFactor)),r}}],(r=[{key:"destroy",value:function(){this.girdFuncName="GFSlope",this.Altitude=45,this.ZFactor=1}}])&&HZ(e.prototype,r),n&&HZ(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function WZ(t){"@babel/helpers - typeof";return(WZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function KZ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,QZ(n.key),n)}}function QZ(t){var e=function(t,e){if("object"!=WZ(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=WZ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==WZ(e)?e:String(e)}var YZ=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=null,this.name=null,this.geometry=null,this.address=null,this.attributes={},this.videoParameters=null,this.cameraLocation=null,V.extend(this,e),this.CLASS_NAME="SuperMap.VideoFeature"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.geometry&&this.geometry.destroy&&this.geometry.destroy(),this.geometry=null,this.name=null,this.videoParameters=null,this.cameraLocation=null,this.address=null,this.attributes=null}},{key:"toGeoJSONFeature",value:function(t){return{type:"Feature",geometry:t?t(this.geometry):this.geometry,properties:this.attributes,name:this.name,address:this.address,id:this.id}}},{key:"toServerFeature",value:function(t){var e=t.geometryFunction,r={type:"VideoFeature",geometry:e&&this.geometry?e(this.geometry):this.geometry,name:this.name,address:this.address,id:this.id},n=[],o=[];for(var i in this.attributes)n.push(i),o.push(this.attributes[i]);return r.fieldNames=n,r.fieldValues=o,r}}])&&KZ(e.prototype,r),n&&KZ(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function XZ(t){"@babel/helpers - typeof";return(XZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ZZ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,$Z(n.key),n)}}function $Z(t){var e=function(t,e){if("object"!=XZ(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=XZ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==XZ(e)?e:String(e)}var t$=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},V.extend(this,e),this.CLASS_NAME="SuperMap.OnlineServiceBase"}var e,r,n;return e=t,(r=[{key:"request",value:function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return e=Xn.appendCredential(e),n.crossOrigin=this.options.crossOrigin,n.headers=this.options.headers,Dn.commit(t,e,r,n).then(function(t){return t.json()})}}])&&ZZ(e.prototype,r),n&&ZZ(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function e$(t){"@babel/helpers - typeof";return(e$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r$(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n$(n.key),n)}}function n$(t){var e=function(t,e){if("object"!=e$(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=e$(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==e$(e)?e:String(e)}function o$(t,e,r){return e=i$(e),function(t,e){if(e&&("object"===e$(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return a$(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],i$(t).constructor):e.apply(t,r))}function i$(t){return(i$=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a$(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s$(t,e){return(s$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var u$=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=o$(this,e,[t]),r=r||{},n.MD5=null,n.type=null,n.userName=null,n.fileName=null,n.size=null,n.serviceStatus=null,n.serviceId=null,n.id=null,n.lastModfiedTime=null,n.status=null,n.storageId=null,n.publishInfo=null,n.authorizeSetting=null,n.nickname=null,n.tags=[],n.description=null,n.dataItemServices=null,n.coordType=null,n.dataCheckResult=null,n.dataMetaInfo=null,n.thumbnail=null,V.extend(a$(n),r),n.id&&(n.serviceUrl=t+"/"+n.id),n.CLASS_NAME="SuperMap.OnlineData",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s$(t,e)}(e,t$),r=e,(n=[{key:"load",value:function(){if(this.serviceUrl){var t=this;return t.request("GET",this.serviceUrl).then(function(e){V.extend(t,e)})}}},{key:"getPublishedServices",value:function(){return this.dataItemServices}},{key:"getAuthorizeSetting",value:function(){return this.authorizeSetting}}])&&r$(r.prototype,n),o&&r$(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function l$(t){"@babel/helpers - typeof";return(l$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c$(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f$(n.key),n)}}function f$(t){var e=function(t,e){if("object"!=l$(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=l$(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==l$(e)?e:String(e)}var p$=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.rootUrl="https://www.supermapol.com",this.webUrl=this.rootUrl+"/web";var e=this.webUrl+"/mycontent";this.mDatasUrl=e+"/datas",this.CLASS_NAME="SuperMap.Online"}var e,r,n;return e=t,(r=[{key:"load",value:function(){return Dn.get(this.rootUrl).then(function(t){return t})}},{key:"login",value:function(){Xn.loginOnline(this.rootUrl,!0)}},{key:"queryDatas",value:function(t){var e=this,r=e.mDatasUrl;return t&&(t=t.toJSON()),Dn.get(r,t).then(function(t){if(t&&t.content&&!(t.content.length<1)){for(var r=[],n=t.content,o=n.length,i=0;i<o;i++){var a=n[i],s=new u$(e.mDatasUrl,a);r.push(s)}return r}})}}])&&c$(e.prototype,r),n&&c$(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function h$(t){"@babel/helpers - typeof";return(h$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function y$(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,d$(n.key),n)}}function d$(t){var e=function(t,e){if("object"!=h$(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=h$(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==h$(e)?e:String(e)}var b$=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.userNames=null,this.types=null,this.fileName=null,this.serviceStatuses=null,this.serviceId=null,this.ids=null,this.keywords=null,this.orderBy=null,this.tags=null,this.filterFields=null,V.extend(this,e),this.CLASS_NAME="SuperMap.OnlineQueryDatasParameter"}var e,r,n;return e=t,(r=[{key:"toJSON",value:function(){var t=this,e={types:t.types,fileName:t.fileName,serviceStatuses:t.serviceStatuses,serviceId:t.serviceId,ids:t.ids,keywords:t.keywords,orderBy:t.orderBy,tags:t.tags,filterFields:t.filterFields};for(var r in e)null==e[r]&&delete e[r];return e}}])&&y$(e.prototype,r),n&&y$(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function v$(t){"@babel/helpers - typeof";return(v$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function m$(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,g$(n.key),n)}}function g$(t){var e=function(t,e){if("object"!=v$(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=v$(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==v$(e)?e:String(e)}var S$=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=null,this.serviceIds=null,this.clientType=Dr.SERVER,this.limitation=null,V.extend(this,e),this.CLASS_NAME="SuperMap.KeyServiceParameter"}var e,r,n;return e=t,(r=[{key:"toJSON",value:function(){return{name:this.name,serviceIds:this.serviceIds,clientType:this.clientType,limitation:this.limitation}}}])&&m$(e.prototype,r),n&&m$(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function w$(t){"@babel/helpers - typeof";return(w$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function O$(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_$(n.key),n)}}function _$(t){var e=function(t,e){if("object"!=w$(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=w$(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==w$(e)?e:String(e)}var P$=function(t,e,r){return e&&O$(t.prototype,e),r&&O$(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.type=e,this.server=null,this.tokenServiceUrl=null,this.keyServiceUrl=null,V.extend(this,r),this.CLASS_NAME="SuperMap.ServerInfo",this.type=this.type||cr.ISERVER,this.server||console.error("server url require is not  undefined");var n="/services/security/tokens";this.type===cr.ISERVER&&this.server.indexOf("iserver")<0&&(n="/iserver"+n),this.tokenServiceUrl||(this.tokenServiceUrl=V.urlPathAppend(this.server,n)),this.keyServiceUrl||(this.type===cr.IPORTAL?this.keyServiceUrl=V.urlPathAppend(this.server,"/web/mycontent/keys/register"):this.type===cr.ONLINE&&(this.keyServiceUrl=V.urlPathAppend(this.server,"/web/mycontent/keys")))});function E$(t){"@babel/helpers - typeof";return(E$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function C$(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,T$(n.key),n)}}function T$(t){var e=function(t,e){if("object"!=E$(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=E$(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==E$(e)?e:String(e)}var j$=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.userName=null,this.password=null,this.clientType=Dr.NONE,this.ip=null,this.referer=null,this.expiration=60,V.extend(this,e),this.CLASS_NAME="SuperMap.TokenServiceParameter"}var e,r,n;return e=t,(r=[{key:"toJSON",value:function(){return{userName:this.userName,password:this.password,clientType:this.clientType,ip:this.ip,referer:this.referer,expiration:this.expiration}}}])&&C$(e.prototype,r),n&&C$(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function k$(t){return function(t){if(Array.isArray(t))return x$(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return x$(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return x$(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x$(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function A$(t){"@babel/helpers - typeof";return(A$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function I$(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,N$(n.key),n)}}function N$(t){var e=function(t,e){if("object"!=A$(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=A$(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==A$(e)?e:String(e)}var R$=function(){function t(e,r,n){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!r||"function"!=typeof r&&"object"!==A$(r)||"function"!=typeof r.Client)throw Error("Please enter the global variable of @elastic/elasticsearch@5.6.22 or elasticsearch@16.7.3 for the second parameter!");n=n||{},this.url=e;try{this.client=new r.Client({host:this.url})}catch(t){this.client=new r.Client({node:{url:new URL(this.url)}})}this.change=null,this.openGeoFence=!1,this.outOfGeoFence=null,this.geoFence=null,this.EVENT_TYPES=["change","error","outOfGeoFence"],this.events=new qn(this,null,this.EVENT_TYPES),this.eventListeners=null,V.extend(this,n),this.eventListeners instanceof Object&&this.events.on(this.eventListeners)}var e,r,n;return e=t,(r=[{key:"setGeoFence",value:function(t){this.geoFence=t}},{key:"bulk",value:function(t,e){return this.client.bulk(t,this._handleCallback(e))}},{key:"clearScroll",value:function(t,e){return this.client.clearScroll(t,this._handleCallback(e))}},{key:"count",value:function(t,e){return this.client.count(t,this._handleCallback(e))}},{key:"create",value:function(t,e){return this.client.create(t,this._handleCallback(e))}},{key:"delete",value:function(t,e){return this.client.delete(t,this._handleCallback(e))}},{key:"deleteByQuery",value:function(t,e){return this.client.deleteByQuery(t,this._handleCallback(e))}},{key:"deleteScript",value:function(t,e){return this.client.deleteScript(t,this._handleCallback(e))}},{key:"deleteTemplate",value:function(t,e){return this.client.deleteTemplate(t,this._handleCallback(e))}},{key:"exists",value:function(t,e){return this.client.exists(t,this._handleCallback(e))}},{key:"existsSource",value:function(t,e){return this.client.existsSource(t,this._handleCallback(e))}},{key:"explain",value:function(t,e){return this.client.explain(t,this._handleCallback(e))}},{key:"fieldCaps",value:function(t,e){return this.client.fieldCaps(t,this._handleCallback(e))}},{key:"get",value:function(t,e){return this.client.get(t,this._handleCallback(e))}},{key:"getScript",value:function(t,e){return this.client.getScript(t,this._handleCallback(e))}},{key:"getSource",value:function(t,e){return this.client.getSource(t,this._handleCallback(e))}},{key:"getTemplate",value:function(t,e){return this.client.getTemplate(t,this._handleCallback(e))}},{key:"index",value:function(t,e){return this.client.index(t,this._handleCallback(e))}},{key:"info",value:function(t,e){return this.client.info(t,this._handleCallback(e))}},{key:"mget",value:function(t,e){return this.client.mget(t,this._handleCallback(e))}},{key:"msearch",value:function(t,e){var r=this;return r.client.msearch(t).then(function(t){return t=t.body||t,r._update(t.responses,e),t},function(t){return e(t),r.events.triggerEvent("error",{error:t}),t})}},{key:"msearchTemplate",value:function(t,e){return this.client.msearchTemplate(t,this._handleCallback(e))}},{key:"mtermvectors",value:function(t,e){return this.client.mtermvectors(t,this._handleCallback(e))}},{key:"ping",value:function(t,e){return this.client.ping(t,this._handleCallback(e))}},{key:"putScript",value:function(t,e){return this.client.putScript(t,this._handleCallback(e))}},{key:"putTemplate",value:function(t,e){return this.client.putTemplate(t,this._handleCallback(e))}},{key:"reindex",value:function(t,e){return this.client.reindex(t,this._handleCallback(e))}},{key:"reindexRessrottle",value:function(t,e){return this.client.reindexRessrottle(t,this._handleCallback(e))}},{key:"renderSearchTemplate",value:function(t,e){return this.client.renderSearchTemplate(t,this._handleCallback(e))}},{key:"scroll",value:function(t,e){return this.client.scroll(t,this._handleCallback(e))}},{key:"search",value:function(t,e){var r=this;return r.client.search(t).then(function(t){return t=t.body||t,r._update(t,e),t},function(t){return e&&e(t),r.events.triggerEvent("error",{error:t}),t})}},{key:"searchShards",value:function(t,e){return this.client.searchShards(t,this._handleCallback(e))}},{key:"searchTemplate",value:function(t,e){return this.client.searchTemplate(t,this._handleCallback(e))}},{key:"suggest",value:function(t,e){return this.client.suggest(t,this._handleCallback(e))}},{key:"termvectors",value:function(t,e){return this.client.termvectors(t,this._handleCallback(e))}},{key:"update",value:function(t,e){return this.client.update(t,this._handleCallback(e))}},{key:"updateByQuery",value:function(t,e){return this.client.updateByQuery(t,this._handleCallback(e))}},{key:"_handleCallback",value:function(t){return function(){var e=Array.from(arguments),r=e.shift(),n=e.shift(),o=n&&n.body;if(o){var i=n;e=[i.statusCode,i.headers],n=o}t.call.apply(t,[this,r,n].concat(k$(e)))}}},{key:"_update",value:function(t,e){var r=this;t&&(r.data=t,r.openGeoFence&&r.geoFence&&r._validateDatas(t),r.events.triggerEvent("change",{data:r.data}),r.change?r.change&&r.change(t):e&&e(void 0,{responses:t}))}},{key:"_validateDatas",value:function(t){if(t){t instanceof Array||(t=[t]);var e,r=t.length;for(e=0;e<r;e++)this._validateData(t[e])}}},{key:"_validateData",value:function(t){var e=this;t.hits.hits.map(function(r){var n=r._source,o=e._getMeterPerMapUnit(e.geoFence.unit),i=e.geoFence.center[0]*o,a=e.geoFence.center[1]*o,s=n.x*o,u=n.y*o;return e._distance(s,u,i,a)>e.geoFence.radius&&(e.outOfGeoFence&&e.outOfGeoFence(t),e.events.triggerEvent("outOfGeoFence",{data:t})),r})}},{key:"_distance",value:function(t,e,r,n){return Math.sqrt((t-r)*(t-r)+(e-n)*(e-n))}},{key:"_getMeterPerMapUnit",value:function(t){var e;return"meter"===t?e=1:"degree"===t&&(e=2*Math.PI*6378137/360),e}}])&&I$(e.prototype,r),n&&I$(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function M$(t){"@babel/helpers - typeof";return(M$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function L$(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,B$(n.key),n)}}function B$(t){var e=function(t,e){if("object"!=M$(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=M$(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==M$(e)?e:String(e)}var D$=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.BUILTIN_OBJECT={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1},this._ctx=null,this._canvas=null,this._pixelCtx=null,this._width=null,this._height=null,this._offsetX=0,this._offsetY=0,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Util"}var e,r,n;return e=t,(r=[{key:"clone",value:function(t){var e=this.BUILTIN_OBJECT;if("object"==M$(t)&&null!==t){var r=t;if(t instanceof Array){r=[];for(var n=0,o=t.length;n<o;n++)r[n]=this.clone(t[n])}else if(!e[Object.prototype.toString.call(t)])for(var i in r={},t)t.hasOwnProperty(i)&&(r[i]=this.clone(t[i]));return r}return t}},{key:"mergeItem",value:function(t,e,r,n){var o=this.BUILTIN_OBJECT;e.hasOwnProperty(r)&&("object"!=M$(t[r])||o[Object.prototype.toString.call(t[r])]?!n&&r in t||(t[r]=e[r]):this.merge(t[r],e[r],n))}},{key:"merge",value:function(t,e,r){for(var n in e)this.mergeItem(t,e,n,r);return t}},{key:"getContext",value:function(){return this._ctx||(this._ctx=document.createElement("canvas").getContext("2d")),this._ctx}},{key:"getPixelContext",value:function(){return this._pixelCtx||(this._canvas=document.createElement("canvas"),this._width=this._canvas.width,this._height=this._canvas.height,this._pixelCtx=this._canvas.getContext("2d")),this._pixelCtx}},{key:"adjustCanvasSize",value:function(t,e){var r,n=this._canvas,o=this._pixelCtx,i=this._width,a=this._height,s=this._offsetX,u=this._offsetY;t+s>i&&(i=t+s+100,n.width=i,r=!0),e+u>a&&(a=e+u+100,n.height=a,r=!0),t<-s&&(i+=s=100*Math.ceil(-t/100),n.width=i,r=!0),e<-u&&(a+=u=100*Math.ceil(-e/100),n.height=a,r=!0),r&&o.translate(s,u)}},{key:"getPixelOffset",value:function(){return{x:this._offsetX,y:this._offsetY}}},{key:"indexOf",value:function(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}},{key:"inherits",value:function(t,e){var r=t.prototype;function n(){}for(var o in n.prototype=e.prototype,t.prototype=new n,r)t.prototype[o]=r[o];t.constructor=t}}])&&L$(e.prototype,r),n&&L$(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function F$(t){"@babel/helpers - typeof";return(F$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function U$(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,G$(n.key),n)}}function G$(t){var e=function(t,e){if("object"!=F$(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=F$(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==F$(e)?e:String(e)}var V$=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.util=new D$,this._ctx=null,this.palette=["#ff9277"," #dddd00"," #ffc877"," #bbe3ff"," #d5ffbb","#bbbbff"," #ddb000"," #b0dd00"," #e2bbff"," #ffbbe3","#ff7777"," #ff9900"," #83dd00"," #77e3ff"," #778fff","#c877ff"," #ff77ab"," #ff6600"," #aa8800"," #77c7ff","#ad77ff"," #ff77ff"," #dd0083"," #777700"," #00aa00","#0088aa"," #8400dd"," #aa0088"," #dd0000"," #772e00"],this._palette=this.palette,this.highlightColor="rgba(0,0,255,1)",this._highlightColor=this.highlightColor,this.colorRegExp=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,this._nameColors={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#0ff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000",blanchedalmond:"#ffebcd",blue:"#00f",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#f0f",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#0f0",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#f0f",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#f00",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#fff",whitesmoke:"#f5f5f5",yellow:"#ff0",yellowgreen:"#9acd32"},this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Color"}var e,r,n;return e=t,(r=[{key:"customPalette",value:function(t){this.palette=t}},{key:"resetPalette",value:function(){this.palette=this._palette}},{key:"getColor",value:function(t,e){return t|=0,(e=e||this.palette)[t%e.length]}},{key:"customHighlight",value:function(t){this.highlightColor=t}},{key:"resetHighlight",value:function(){this.highlightColor=this._highlightColor}},{key:"getHighlightColor",value:function(){return this.highlightColor}},{key:"getRadialGradient",value:function(t,e,r,n,o,i,a){var s=this.util;this._ctx||(this._ctx=s.getContext());for(var u=this._ctx.createRadialGradient(t,e,r,n,o,i),l=0,c=a.length;l<c;l++)u.addColorStop(a[l][0],a[l][1]);return u.__nonRecursion=!0,u}},{key:"getLinearGradient",value:function(t,e,r,n,o){var i=this.util;this._ctx||(this._ctx=i.getContext());for(var a=this._ctx.createLinearGradient(t,e,r,n),s=0,u=o.length;s<u;s++)a.addColorStop(o[s][0],o[s][1]);return a.__nonRecursion=!0,a}},{key:"getStepColors",value:function(t,e,r){t=this.toRGBA(t),e=this.toRGBA(e),t=this.getData(t);for(var n=[],o=((e=this.getData(e))[0]-t[0])/r,i=(e[1]-t[1])/r,a=(e[2]-t[2])/r,s=(e[3]-t[3])/r,u=0,l=t[0],c=t[1],f=t[2],p=t[3];u<r;u++)n[u]=this.toColor([this.adjust(Math.floor(l),[0,255]),this.adjust(Math.floor(c),[0,255]),this.adjust(Math.floor(f),[0,255]),p.toFixed(4)-0],"rgba"),l+=o,c+=i,f+=a,p+=s;return l=e[0],c=e[1],f=e[2],p=e[3],n[u]=this.toColor([l,c,f,p],"rgba"),n}},{key:"getGradientColors",value:function(t,e){var r=[],n=t.length;if(void 0===e&&(e=20),1===n)r=this.getStepColors(t[0],t[0],e);else if(n>1)for(var o=0,i=n-1;o<i;o++){var a=this.getStepColors(t[o],t[o+1],e);o<i-1&&a.pop(),r=r.concat(a)}return r}},{key:"toColor",value:function(t,e){if(e=e||"rgb",t&&(3===t.length||4===t.length)){if(t=this.map(t,function(t){return t>1?Math.ceil(t):t}),e.indexOf("hex")>-1)return"#"+((1<<24)+(t[0]<<16)+(t[1]<<8)+ +t[2]).toString(16).slice(1);if(e.indexOf("hs")>-1){var r=this.map(t.slice(1,3),function(t){return t+"%"});t[1]=r[0],t[2]=r[1]}return e.indexOf("a")>-1?(3===t.length&&t.push(1),t[3]=this.adjust(t[3],[0,1]),e+"("+t.slice(0,4).join(",")+")"):e+"("+t.slice(0,3).join(",")+")"}}},{key:"toArray",value:function(t){(t=this.trim(t)).indexOf("rgba")<0&&(t=this.toRGBA(t));var e=[],r=0;return t.replace(/[\d.]+/g,function(t){r<3?t|=0:t=+t,e[r++]=t}),e}},{key:"convert",value:function(t,e){if(!this.isCalculableColor(t))return t;var r=this.getData(t),n=r[3];return void 0===n&&(n=1),t.indexOf("hsb")>-1?r=this._HSV_2_RGB(r):t.indexOf("hsl")>-1&&(r=this._HSL_2_RGB(r)),e.indexOf("hsb")>-1||e.indexOf("hsv")>-1?r=this._RGB_2_HSB(r):e.indexOf("hsl")>-1&&(r=this._RGB_2_HSL(r)),r[3]=n,this.toColor(r,e)}},{key:"toRGBA",value:function(t){return this.convert(t,"rgba")}},{key:"toRGB",value:function(t){return this.convert(t,"rgb")}},{key:"toHex",value:function(t){return this.convert(t,"hex")}},{key:"toHSVA",value:function(t){return this.convert(t,"hsva")}},{key:"toHSV",value:function(t){return this.convert(t,"hsv")}},{key:"toHSBA",value:function(t){return this.convert(t,"hsba")}},{key:"toHSB",value:function(t){return this.convert(t,"hsb")}},{key:"toHSLA",value:function(t){return this.convert(t,"hsla")}},{key:"toHSL",value:function(t){return this.convert(t,"hsl")}},{key:"toName",value:function(t){for(var e in this._nameColors)if(this.toHex(this._nameColors[e])===this.toHex(t))return e;return null}},{key:"trim",value:function(t){return String(t).replace(/\s+/g,"")}},{key:"normalize",value:function(t){if(this._nameColors[t]&&(t=this._nameColors[t]),t=(t=this.trim(t)).replace(/hsv/i,"hsb"),/^#[\da-f]{3}$/i.test(t)){var e=(3840&(t=parseInt(t.slice(1),16)))<<8,r=(240&t)<<4,n=15&t;t="#"+((1<<24)+(e<<4)+e+(r<<4)+r+(n<<4)+n).toString(16).slice(1)}return t}},{key:"lift",value:function(t,e){if(!this.isCalculableColor(t))return t;var r=e>0?1:-1;void 0===e&&(e=0),e=Math.abs(e)>1?1:Math.abs(e),t=this.toRGB(t);for(var n=this.getData(t),o=0;o<3;o++)n[o]=1===r?n[o]*(1-e)|0:(255-n[o])*e+n[o]|0;return"rgb("+n.join(",")+")"}},{key:"reverse",value:function(t){if(!this.isCalculableColor(t))return t;var e=this.getData(this.toRGBA(t));return e=this.map(e,function(t){return 255-t}),this.toColor(e,"rgb")}},{key:"mix",value:function(t,e,r){if(!this.isCalculableColor(t)||!this.isCalculableColor(e))return t;void 0===r&&(r=.5);for(var n=2*(r=1-this.adjust(r,[0,1]))-1,o=this.getData(this.toRGBA(t)),i=this.getData(this.toRGBA(e)),a=o[3]-i[3],s=((n*a==-1?n:(n+a)/(1+n*a))+1)/2,u=1-s,l=[],c=0;c<3;c++)l[c]=o[c]*s+i[c]*u;var f=o[3]*r+i[3]*(1-r);return f=Math.max(0,Math.min(1,f)),1===o[3]&&1===i[3]?this.toColor(l,"rgb"):(l[3]=f,this.toColor(l,"rgba"))}},{key:"random",value:function(){return"#"+Math.random().toString(16).slice(2,8)}},{key:"getData",value:function(e){var r,n,o=(e=this.normalize(e)).match(this.colorRegExp);if(null===o)throw new Error("The color format error");var i,a=[];if(o[2])i=[(r=o[2].replace("#","").split(""))[0]+r[1],r[2]+r[3],r[4]+r[5]],a=this.map(i,function(e){return t.prototype.adjust.call(this,parseInt(e,16),[0,255])});else if(o[4]){var s=o[4].split(",");n=s[3],i=s.slice(0,3),a=this.map(i,function(e){return e=Math.floor(e.indexOf("%")>0?2.55*parseInt(e,0):e),t.prototype.adjust.call(this,e,[0,255])}),void 0!==n&&a.push(this.adjust(parseFloat(n),[0,1]))}else if(o[5]||o[6]){var u=(o[5]||o[6]).split(","),l=parseInt(u[0],0)/360,c=u[1],f=u[2];n=u[3],(a=this.map([c,f],function(e){return t.prototype.adjust.call(this,parseFloat(e)/100,[0,1])})).unshift(l),void 0!==n&&a.push(this.adjust(parseFloat(n),[0,1]))}return a}},{key:"alpha",value:function(t,e){if(!this.isCalculableColor(t))return t;null===e&&(e=1);var r=this.getData(this.toRGBA(t));return r[3]=this.adjust(Number(e).toFixed(4),[0,1]),this.toColor(r,"rgba")}},{key:"map",value:function(t,e){if("function"!=typeof e)throw new TypeError;for(var r=t?t.length:0,n=0;n<r;n++)t[n]=e(t[n]);return t}},{key:"adjust",value:function(t,e){return t<=e[0]?t=e[0]:t>=e[1]&&(t=e[1]),t}},{key:"isCalculableColor",value:function(t){return t instanceof Array||"string"==typeof t}},{key:"_HSV_2_RGB",value:function(t){var e,r,n,o=t[0],i=t[1],a=t[2];if(0===i)e=255*a,r=255*a,n=255*a;else{var s=6*o;6===s&&(s=0);var u=0|s,l=a*(1-i),c=a*(1-i*(s-u)),f=a*(1-i*(1-(s-u))),p=0,h=0,y=0;0===u?(p=a,h=f,y=l):1===u?(p=c,h=a,y=l):2===u?(p=l,h=a,y=f):3===u?(p=l,h=c,y=a):4===u?(p=f,h=l,y=a):(p=a,h=l,y=c),e=255*p,r=255*h,n=255*y}return[e,r,n]}},{key:"_HSL_2_RGB",value:function(t){var e,r,n,o=t[0],i=t[1],a=t[2];if(0===i)e=255*a,r=255*a,n=255*a;else{var s,u=2*a-(s=a<.5?a*(1+i):a+i-i*a);e=255*this._HUE_2_RGB(u,s,o+1/3),r=255*this._HUE_2_RGB(u,s,o),n=255*this._HUE_2_RGB(u,s,o-1/3)}return[e,r,n]}},{key:"_HUE_2_RGB",value:function(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),6*r<1?t+6*(e-t)*r:2*r<1?e:3*r<2?t+(e-t)*(2/3-r)*6:t}},{key:"_RGB_2_HSB",value:function(t){var e,r,n=t[0]/255,o=t[1]/255,i=t[2]/255,a=Math.min(n,o,i),s=Math.max(n,o,i),u=s-a,l=s;if(0===u)e=0,r=0;else{r=u/s;var c=((s-n)/6+u/2)/u,f=((s-o)/6+u/2)/u,p=((s-i)/6+u/2)/u;n===s?e=p-f:o===s?e=1/3+c-p:i===s&&(e=2/3+f-c),e<0&&(e+=1),e>1&&(e-=1)}return[e*=360,r*=100,l*=100]}},{key:"_RGB_2_HSL",value:function(t){var e,r,n=t[0]/255,o=t[1]/255,i=t[2]/255,a=Math.min(n,o,i),s=Math.max(n,o,i),u=s-a,l=(s+a)/2;if(0===u)e=0,r=0;else{r=l<.5?u/(s+a):u/(2-s-a);var c=((s-n)/6+u/2)/u,f=((s-o)/6+u/2)/u,p=((s-i)/6+u/2)/u;n===s?e=p-f:o===s?e=1/3+c-p:i===s&&(e=2/3+f-c),e<0&&(e+=1),e>1&&(e-=1)}return[e*=360,r*=100,l*=100]}}])&&U$(e.prototype,r),n&&U$(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function q$(t){"@babel/helpers - typeof";return(q$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function H$(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,z$(n.key),n)}}function z$(t){var e=function(t,e){if("object"!=q$(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=q$(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==q$(e)?e:String(e)}var J$=new V$,W$=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n;return e=t,n=[{key:"createCanvas",value:function(t,e){var r=document.createElement("canvas");return r.height=t,r.width=e,r.getContext("2d")}},{key:"getLinearGradient",value:function(t,e,r,n,o){this._ctx||(this._ctx=this.getContext());for(var i=this._ctx.createLinearGradient(t,e,r,n),a=o.length,s=1/(a-1),u=0,l=0;l<a;l++)i.addColorStop(u,o[l]),u+=s;return i.__nonRecursion=!0,i}},{key:"getContext",value:function(){return this._ctx||(this._ctx=document.createElement("canvas").getContext("2d")),this._ctx}},{key:"getStepColors",value:function(t,e,r){t=J$.toRGBA(t),e=J$.toRGBA(e),t=J$.getData(t);for(var n=[],o=((e=J$.getData(e))[0]-t[0])/r,i=(e[1]-t[1])/r,a=(e[2]-t[2])/r,s=(e[3]-t[3])/r,u=0,l=t[0],c=t[1],f=t[2],p=t[3];u<r;u++)n[u]=J$.toColor([J$.adjust(Math.floor(l),[0,255]),J$.adjust(Math.floor(c),[0,255]),J$.adjust(Math.floor(f),[0,255]),p.toFixed(4)-0],"hex"),l+=o,c+=i,f+=a,p+=s;return l=e[0],c=e[1],f=e[2],p=e[3],n[u]=J$.toColor([l,c,f,p],"hex"),n}},{key:"getGradientColors",value:function(t,e,r){var n,o,i,a=[],s=t.length;if(void 0!==e){if(s>=e)if("RANGE"===r)for(o=0;o<e;o++)a.push(t[o]);else for(o=0;o<e;o++){var u=Math.floor(o/2);if(o%2==0)a.push(t[u]);else{var l=t.length-1-u;a.push(t[l])}}else{for(n=Math.ceil(e/(s-1)),o=0,i=s-1;o<i;o++){var c=this.getStepColors(t[o],t[o+1],n);o<i-1&&c.pop(),a=a.concat(c)}for(var f=a.length-e,p=0;p<f;p++)a.splice(2,1)}return a}}}],(r=null)&&H$(e.prototype,r),n&&H$(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),K$=r(7915);function Q$(t,e){t&&-1===t.indexOf("BEGIN PUBLIC KEY")&&(t="-----BEGIN PUBLIC KEY-----\n".concat(t,"\n-----END PUBLIC KEY-----"));var r=K$.pki.publicKeyFromPem(t),n={md:K$.md.sha256.create(),mgf1:{md:K$.md.sha1.create()}},o=r.encrypt(e,"RSA-OAEP",n);return!!o&&window.btoa(o)}function Y$(t,e,r){r=K$.util.encodeUtf8(r);var n=K$.cipher.createCipher("AES-GCM",t);if(n.start({iv:e,additionalData:"",tagLength:128}),n.update(K$.util.createBuffer(r)),n.finish()){var o=n.output,i=n.mode.tag;return window.btoa(o.data+i.data)}return!1}function X$(t){for(var e="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r="",n=t;n>0;--n)r+=e[Math.floor(Math.random()*e.length)];return r}function Z$(t){"@babel/helpers - typeof";return(Z$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $$(){$$=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new x(n||[]);return o(a,"_invoke",{value:C(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var p="suspendedStart",h="suspendedYield",y="executing",d="completed",b={};function v(){}function m(){}function g(){}var S={};l(S,a,function(){return this});var w=Object.getPrototypeOf,O=w&&w(w(A([])));O&&O!==r&&n.call(O,a)&&(S=O);var _=g.prototype=v.prototype=Object.create(S);function P(t){["next","throw","return"].forEach(function(e){l(t,e,function(t){return this._invoke(e,t)})})}function E(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==Z$(c)&&n.call(c,"__await")?e.resolve(c.__await).then(function(t){r("next",t,a,s)},function(t){r("throw",t,a,s)}):e.resolve(c).then(function(t){l.value=t,a(l)},function(t){return r("throw",t,a,s)})}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e(function(e,o){r(t,n,e,o)})}return i=i?i.then(o,o):o()}})}function C(e,r,n){var o=p;return function(i,a){if(o===y)throw new Error("Generator is already running");if(o===d){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=T(s,n);if(u){if(u===b)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=f(e,r,n);if("normal"===l.type){if(o=n.done?d:h,l.arg===b)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=d,n.method="throw",n.arg=l.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,b;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,b):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function A(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Z$(e)+" is not iterable")}return m.prototype=g,o(_,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,u,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},P(E.prototype),l(E.prototype,s,function(){return this}),e.AsyncIterator=E,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new E(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},P(_),l(_,u,"Generator"),l(_,a,function(){return this}),l(_,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=A,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:A(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),b}},e}function t0(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return e0(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return e0(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function e0(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function r0(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function n0(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){r0(i,n,o,a,s,"next",t)}function s(t){r0(i,n,o,a,s,"throw",t)}a(void 0)})}}function o0(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,i0(n.key),n)}}function i0(t){var e=function(t,e){if("object"!=Z$(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Z$(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Z$(e)?e:String(e)}var a0=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.serverUrl=e,this.tunnelUrl=void 0,this.blockedUrlRegex={HEAD:[],POST:[],GET:[],PUT:[],DELETE:[]},this.encryptAESKey=X$(16),this.encryptAESIV=X$(12)}var e,r,n;return e=t,(r=[{key:"request",value:function(){var t=n0($$().mark(function t(e){var r,n,o,i,a,s,u,l,c,f;return $$().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.serverUrl){t.next=2;break}throw"serverUrl can not be empty.";case 2:return r=Object.assign({baseURL:""},e),t.next=5,this._createTunnel();case 5:if(t.sent){t.next=8;break}return t.abrupt("return");case 8:n=t0(this.blockedUrlRegex[r.method.toUpperCase()]),t.prev=9,n.s();case 11:if((o=n.n()).done){t.next=24;break}if(i=o.value,!new RegExp(i).test(r.baseURL+r.url)){t.next=22;break}if(a={url:r.baseURL+(r.url.startsWith("/")?r.url.substring(1,r.url.length):r.url),method:r.method,timeout:r.timeout,headers:r.headers,body:r.data},r.method="post",r.data=Y$(this.encryptAESKey,this.encryptAESIV,JSON.stringify(a)),r.data){t.next=20;break}throw"encrypt failed";case 20:return r.url=this.tunnelUrl,t.abrupt("break",24);case 22:t.next=11;break;case 24:t.next=29;break;case 26:t.prev=26,t.t0=t.catch(9),n.e(t.t0);case 29:return t.prev=29,n.f(),t.finish(29);case 32:return t.next=34,Dn.commit(r.method,r.url,r.data,r.options);case 34:if(s=t.sent,r.url!==this.tunnelUrl){t.next=46;break}return t.next=38,s.text();case 38:if(u=t.sent,p=this.encryptAESKey,h=this.encryptAESIV,y=u,d=void 0,void 0,void 0,m=void 0,d=window.atob(y),b=d.substring(0,d.length-16),v=d.substring(d.length-16),(m=K$.cipher.createDecipher("AES-GCM",K$.util.createBuffer(p))).start({iv:K$.util.createBuffer(h),additionalData:"",tagLength:128,tag:v}),m.update(K$.util.createBuffer(b)),l=!!m.finish()&&K$.util.decodeUtf8(m.output.data)){t.next=43;break}return console.debug("è§£å¯è¯·æ±ååºå¤±è´¥"),t.abrupt("return");case 43:return c=JSON.parse(l),f=Object.create({json:function(){return Promise.resolve(c.data)}}),t.abrupt("return",Object.assign(f,c));case 46:return t.abrupt("return",s);case 47:case"end":return t.stop()}var p,h,y,d,b,v,m},t,this,[[9,26,29,32]])}));return function(e){return t.apply(this,arguments)}}()},{key:"_getRSAPublicKey",value:function(){var t=n0($$().mark(function t(){var e,r,n,o;return $$().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Dn.get(x()(this.serverUrl).segment("services/security/tunnel/v1/publickey").toString());case 3:return e=t.sent,t.next=6,e.json();case 6:return r=t.sent,n={key:this.encryptAESKey,iv:this.encryptAESIV,mode:"GCM",padding:"NoPadding"},o=Q$(r.publicKey,n.key+n.iv),t.abrupt("return",o);case 12:t.prev=12,t.t0=t.catch(0),console.debug("RSAå¬é¥è·åå¤±è´¥ï¼éè¯¯è¯¦æï¼"+t.t0);case 15:case"end":return t.stop()}},t,this,[[0,12]])}));return function(){return t.apply(this,arguments)}}()},{key:"_createTunnel",value:function(){var t=n0($$().mark(function t(){var e,r,n;return $$().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.tunnelUrl){t.next=19;break}return t.prev=1,t.next=4,this._getRSAPublicKey();case 4:if(e=t.sent){t.next=7;break}throw"fetch RSA publicKey failed";case 7:return t.next=9,Dn.post(x()(this.serverUrl).segment("services/security/tunnel/v1/tunnels").toString(),e);case 9:return r=t.sent,t.next=12,r.json();case 12:n=t.sent,Object.assign(this,{tunnelUrl:n.tunnelUrl,blockedUrlRegex:Object.assign({},this.blockedUrlRegex,n.blockedUrlRegex)}),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(1),console.debug("å®å¨é§éåå»ºå¤±è´¥ï¼éè¯¯è¯¦æï¼"+t.t0);case 19:return t.abrupt("return",this.tunnelUrl);case 20:case"end":return t.stop()}},t,this,[[1,16]])}));return function(){return t.apply(this,arguments)}}()}])&&o0(e.prototype,r),n&&o0(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function s0(){return(s0=n0($$().mark(function t(e){var r,n,o,i,a,s,u,l,c;return $$().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,r=(e&&e.match(/.+(?=(\/restjsr\/v1\/vectortile\/|\/rest\/maps\/|\/rest\/data\/))/)||[])[0]){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,Dn.get(r);case 6:return n=t.sent,t.next=9,n.json();case 9:if(o=t.sent,i=(o||[]).find(function(t){return e.includes(t.name)&&t.serviceEncryptInfo})){t.next=13;break}return t.abrupt("return");case 13:return a=r.split("/services/")[0],s=new a0(a),u=i&&"".concat(a,"/services/security/svckeys/").concat(i.serviceEncryptInfo.encrptKeyID,".json"),t.next=18,s.request({method:"get",url:u});case 18:return l=t.sent,t.next=21,l.json();case 21:if(c=t.sent){t.next=24;break}return t.abrupt("return");case 24:return t.abrupt("return",{serviceKey:c,algorithm:i.serviceEncryptInfo.encrptSpec.algorithm});case 27:t.prev=27,t.t0=t.catch(0),console.error(t.t0);case 30:case"end":return t.stop()}},t,null,[[0,27]])}))).apply(this,arguments)}function u0(t){"@babel/helpers - typeof";return(u0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l0(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,c0(n.key),n)}}function c0(t){var e=function(t,e){if("object"!=u0(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=u0(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==u0(e)?e:String(e)}var f0=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n;return e=t,n=[{key:"newInstance",value:function(){return this.geostatsInstance||(this.geostatsInstance=new window.geostats),this.geostatsInstance}},{key:"getInstance",value:function(t){var e=this.newInstance();return e.setSerie(t),e}},{key:"getArrayStatistic",value:function(t,e){return t.length?"Sum"===e||"æ±å"===e?this.getSum(t):"Maximum"===e||"æå¤§å¼"===e?this.getMax(t):"Minimum"===e||"æå°å¼"===e?this.getMin(t):"Average"===e||"å¹³åå¼"===e?this.getMean(t):"Median"===e||"ä¸­ä½æ°"===e?this.getMedian(t):"times"===e||"è®¡æ°"===e?this.getTimes(t):void 0:0}},{key:"getArraySegments",value:function(t,e,r){return"offset"===e?this.getEqInterval(t,r):"jenks"===e?this.getJenks(t,r):"square"===e?this.getMin(t)>=0&&this.getSqrtInterval(t,r):"logarithm"===e?this.getMin(t)>0&&this.getGeometricProgression(t,r):void 0}},{key:"getSum",value:function(t){return this.getInstance(t).sum()}},{key:"getMax",value:function(t){return this.getInstance(t).max()}},{key:"getMin",value:function(t){return this.getInstance(t).min()}},{key:"getMean",value:function(t){return this.getInstance(t).mean()}},{key:"getMedian",value:function(t){return this.getInstance(t).median()}},{key:"getTimes",value:function(t){return t.length}},{key:"getEqInterval",value:function(t,e){return this.getInstance(t).getClassEqInterval(e)}},{key:"getJenks",value:function(t,e){return this.getInstance(t).getClassJenks(e)}},{key:"getSqrtInterval",value:function(t,e){return t=t.map(function(t){return Math.sqrt(t)}),this.getInstance(t).getClassEqInterval(e).map(function(t){return t*t})}},{key:"getGeometricProgression",value:function(t,e){return this.getInstance(t).getClassGeometricProgression(e)}}],(r=null)&&l0(e.prototype,r),n&&l0(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function p0(t){if(!t)throw new Error("No GeoJSON coords provided");if(!t||0===t.length)return null;var e=t.length,r=new Float64Array(t.flat()),n=window.Module._malloc(2*e*8);window.Module.HEAPF64.set(r,n/8);var o=window.Module._UGCWasm_Geometry_CreatePoint2DsFromBuffer(n,e);return window.Module._free(n),o}function h0(t){if(!t)throw new Error("No GeoJSON coords provided");if(!t||0===t.length)return null;var e=t.length,r=new Float64Array(t),n=window.Module._malloc(8*e);window.Module.HEAPF64.set(r,n/8);var o=window.Module._UGCWasm_Helper_CreateDoubleArray(n,e);return window.Module._free(n),o}function y0(t){var e=window.Module._UGCWasm_Helper_GetDoubleArrayLength(t),r=window.Module._malloc(8*e);window.Module._UGCWasm_Helper_GetBufferFromDoubleArray(t,r);for(var n=new Float64Array(window.Module.HEAPF64.buffer,r,e),o=[],i=0;i<e;i++)o.push(n[i]);return window.Module._free(r),o}function d0(t){if(!t)return null;switch(window.Module._UGCWasm_Geometry_GetType(t)){case 1:var e=[],r=window.Module._UGCWasm_GeoPoint_GetX(t),n=window.Module._UGCWasm_GeoPoint_GetY(t);return e.push(r,n),{type:"Point",coordinates:e};case 3:for(var o=[],i=window.Module._UGCWasm_GeoLine_GetPartCount(t),a=0;a<i;a++){var s=window.Module._UGCWasm_GeoLine_GetPartPointCount(t,a),u=window.Module._malloc(2*s*8);window.Module._UGCWasm_GeoLine_GetPart2(t,u,a);for(var l=new Float64Array(window.Module.HEAPF64.buffer,u,2*s),c=[],f=0;f<2*s;f+=2)c.push([l[f],l[f+1]]);window.Module._free(u),o.push(c)}return{type:"LineString",coordinates:o[0]};case 5:for(var p=[],h=window.Module._UGCWasm_GeoRegion_GetPartCount(t),y=0;y<h;y++){var d=window.Module._UGCWasm_GeoRegion_GetPartPointCount(t,y),b=window.Module._malloc(2*d*8);window.Module._UGCWasm_GeoRegion_GetPart2(t,b,y);for(var v=new Float64Array(window.Module.HEAPF64.buffer,b,2*d),m=[],g=0;g<2*d;g+=2)m.push([v[g],v[g+1]]);window.Module._free(b),p.push(m)}return{type:"Polygon",coordinates:p};default:return null}}function b0(t){if(!t)throw new Error("No GeoJSON object provided");switch(t.type){case"Feature":return b0(t.geometry);case"FeatureCollection":return 0===t.features.length?null:b0(t.features[0].geometry);case"Point":return 0===t.coordinates.length?window.Module._UGCWasm_GeoPoint_New():window.Module._UGCWasm_GeoPoint_New2(t.coordinates[0],t.coordinates[1]);case"LineString":if(0===t.coordinates.length)return window.Module._UGCWasm_GeoLine_New();var e=window.Module._UGCWasm_GeoLine_New(),r=p0(t.coordinates);return window.Module._UGCWasm_GeoLine_AddPart2(e,r,t.coordinates.length),e;case"Polygon":if(0===t.coordinates.length)return window.Module._UGCWasm_GeoRegion_New();var n=window.Module._UGCWasm_GeoRegion_New(),o=p0(t.coordinates[0]);if(window.Module._UGCWasm_GeoRegion_AddPart2(n,o,t.coordinates[0].length),t.coordinates.length>1)for(var i=1;i<t.coordinates.length;i++){var a=p0(t.coordinates[i]);window.Module._UGCWasm_GeoRegion_AddPart2(n,a,t.coordinates[i].length)}return n;case"MultiLineString":if(0===t.coordinates.length)return window.Module._UGCWasm_GeoLine_New();var s=window.Module._UGCWasm_GeoLine_New(),u=p0(t.coordinates[0]);if(window.Module._UGCWasm_GeoLine_AddPart2(s,u,t.coordinates[0].length),t.coordinates.length>1)for(var l=1;l<t.coordinates.length;l++){var c=p0(t.coordinates[l]);window.Module._UGCWasm_GeoLine_AddPart2(s,c,t.coordinates[l].length)}return s;default:throw new Error("Unsupported GeoJSON type: "+t.type+". Are you sure this is valid GeoJSON?")}}var v0=function(){try{return Module}catch(t){return{}}}();function m0(t){"@babel/helpers - typeof";return(m0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g0(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,S0(n.key),n)}}function S0(t){var e=function(t,e){if("object"!=m0(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=m0(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==m0(e)?e:String(e)}function w0(t,e,r){return e=O0(e),function(t,e){if(e&&("object"===m0(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],O0(t).constructor):e.apply(t,r))}function O0(t){return(O0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _0(t,e){return(_0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var P0=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=w0(this,e),t&&(window.Module=t),window.Module||(window.Module=v0),r.module=window.Module,r.addEventType("loaded"),r.module.calledRun?r.triggerEvent("loaded",{}):r.module.onRuntimeInitialized=function(){r.triggerEvent("loaded",{})},r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_0(t,e)}(e,qn),r=e,(n=[{key:"buffer",value:function(t,e){var r=b0(t),n=this.module._UGCWasm_Geometrist_Buffer(r,e);return{type:"Feature",geometry:d0(n)}}},{key:"computeConvexHull",value:function(t){var e=t.length,r=p0(t);return{type:"Feature",geometry:d0(this.module._UGCWasm_Geometrist_ComputeConvexHull(r,e))}}},{key:"isIdentical",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-6,n=b0(t),o=b0(e);return 1===this.module._UGCWasm_Geometrist_IsIdentical(n,o,r)}},{key:"hasIntersection",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-6,n=b0(t),o=b0(e);return 1===this.module._UGCWasm_Geometrist_HasIntersection(n,o,r)}},{key:"hasTouch",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-6,n=b0(t),o=b0(e);return 1===this.module._UGCWasm_Geometrist_HasTouch(n,o,r)}},{key:"resample",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e-6,r=b0(t);return{type:"Feature",geometry:d0(this.module._UGCWasm_Geometrist_Resample(r,e))}}},{key:"isParallel",value:function(t,e,r,n,o,i,a,s){return 1===this.module._UGCWasm_Geometrist_IsParallel(t,e,r,n,o,i,a,s)}},{key:"computePerpendicularPosition",value:function(t,e,r,n,o,i){var a=this.module._UGCWasm_Helper_CreateDoubleArray(0,2);return this.module._UGCWasm_Geometrist_ComputePerpendicularPosition(t,e,r,n,o,i,a),a=y0(a)}},{key:"isPointOnLine",value:function(t,e,r,n,o,i,a){return 1===this.module._UGCWasm_Geometrist_IsPointOnLine(t,e,r,n,o,i,a)}},{key:"isProjectOnLineSegment",value:function(t,e,r,n,o,i){return 1===this.module._UGCWasm_Geometrist_IsProjectOnLineSegment(t,e,r,n,o,i)}},{key:"distanceToLineSegment",value:function(t,e,r,n,o,i){return this.module._UGCWasm_Geometrist_DistanceToLineSegment(t,e,r,n,o,i)}},{key:"nearestPointToVertex",value:function(t,e,r){var n=this.module._UGCWasm_Helper_CreateDoubleArray(0,2),o=b0(r);return this.module._UGCWasm_Geometrist_NearestPointToVertex(t,e,o,n),n=y0(n)}},{key:"computeConcaveHullPoints",value:function(t,e,r){var n=h0(t),o=h0(e);return{type:"Feature",geometry:d0(this.module._UGCWasm_Geometrist_ComputeConcaveHullPoints(n,o,t.length,r))}}},{key:"isSegmentIntersect",value:function(t,e,r,n,o,i,a,s){return 1===this.module._UGCWasm_Geometrist_IsSegmentIntersect(t,e,r,n,o,i,a,s)}},{key:"isIntersectRegionWithRect",value:function(t,e,r,n,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1e-6,a=b0(t);return 0!==this.module._UGCWasm_Geometrist_isIntersectRegionWithRect(a,e,r,n,o,i)}},{key:"isOnSameSide",value:function(t,e,r,n,o,i,a,s){return 1===this.module._UGCWasm_Geometrist_IsOnSameSide(t,e,r,n,o,i,a,s)}},{key:"isRight",value:function(t,e,r,n,o,i){return 1===this.module._UGCWasm_Geometrist_IsRight(t,e,r,n,o,i)}},{key:"isLeft",value:function(t,e,r,n,o,i){return 1===this.module._UGCWasm_Geometrist_IsLeft(t,e,r,n,o,i)}},{key:"computeGeodesicArea",value:function(t){var e=b0(t),r=this.module._UGCWasm_Geometry_NewUGPrjCoordSys(4326);return this.module._UGCWasm_Geometrist_ComputeGeodesicArea(e,r)}},{key:"smooth",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,r=b0(t);return{type:"Feature",geometry:d0(this.module._UGCWasm_Geometrist_Smooth(r,e))}}},{key:"computeGeodesicDistance",value:function(t,e,r,n){var o=h0(t),i=h0(e);return this.module._UGCWasm_Geometrist_ComputeGeodesicDistance(o,i,r,n)}},{key:"computeParallel",value:function(t,e){var r=b0(t);return{type:"Feature",geometry:d0(this.module._UGCWasm_Geometrist_ComputeParallel(r,e))}}},{key:"computeConvexHullPoints",value:function(t,e){var r=h0(t),n=h0(e);return{type:"Feature",geometry:d0(this.module._UGCWasm_Geometrist_ComputeConvexHullPoints(r,n,t.length))}}}])&&g0(r.prototype,n),o&&g0(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();var E0=r(8518),C0=r.n(E0);function T0(t){"@babel/helpers - typeof";return(T0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function j0(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function k0(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,A0(n.key),n)}}function x0(t,e,r){return e&&k0(t.prototype,e),r&&k0(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function A0(t){var e=function(t,e){if("object"!=T0(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=T0(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==T0(e)?e:String(e)}var I0=function(){function t(e){j0(this,t),this.env=null,this.parser=null,this.ruleSet=null,this.cartoStr="",this.shaders=null,"string"==typeof e&&(this.cartoStr=e,this.env={frames:[],errors:[],error:function(t){this.errors.push(t)}},this.parser=this.getParser(this.env),this.parse(e),this.shaders=this.toShaders())}return x0(t,[{key:"getParser",value:function(e){var r,n,o,i,a,s,u,l,c,f=this;function p(){i=u[o],a=n,l=n}function h(){u[o]=i,l=n=a}function y(){n>l&&(u[o]=u[o].slice(n-l),l=n)}function d(t){var e,i,a,s;if(t instanceof Function)return t.call(c.parsers);if("string"==typeof t)e=r.charAt(n)===t?t:null,i=1,y();else{if(y(),!(e=t.exec(u[o])))return null;i=e[0].length}if(e){var f=n+=i;for(s=n+u[o].length-i;n<s&&(32===(a=r.charCodeAt(n))||10===a||9===a);)n++;return u[o]=u[o].slice(i+(n-f)),l=n,0===u[o].length&&o<u.length-1&&o++,"string"==typeof e?e:1===e.length?e[0]:e}}function b(t){var n,o={index:s,filename:e.filename,message:"Parse error.",line:0,column:-1};for(var i in o)0===t[i]&&(t[i]=o[i]);n=t.filename&&f.env.inputs&&f.env.inputs[t.filename]?f.env.inputs[t.filename]:r,t.line=(n.slice(0,t.index).match(/\n/g)||"").length+1;for(var a=t.index;a>=0&&"\n"!==n.charAt(a);a--)t.column++;return new Error([t.filename,t.line,t.column,t.message].join(";"))}return this.env=e=e||{},this.env.filename=this.env.filename||null,this.env.inputs=this.env.inputs||{},c={parse:function(i){var a,c=null;if(n=o=l=s=0,u=[],r=i.replace(/\r\n/g,"\n"),e.filename&&(f.env.inputs[e.filename]=r),u=function(t){for(var e,n,o,i,a=0,s=/(?:@\{[\w-]+\}|[^"'`\{\}\/\(\)\\])+/g,u=/\/\*(?:[^*]|\*+[^\/*])*\*+\/|\/\/.*/g,l=/"((?:[^"\\\r\n]|\\.)*)"|'((?:[^'\\\r\n]|\\.)*)'|`((?:[^`]|\\.)*)`/g,f=0,p=t[0],h=0;h<r.length;)if(s.lastIndex=h,(e=s.exec(r))&&e.index===h&&(h+=e[0].length,p.push(e[0])),o=r.charAt(h),u.lastIndex=l.lastIndex=h,(e=l.exec(r))&&e.index===h)h+=e[0].length,p.push(e[0]);else if(n||"/"!==o||"/"!==(i=r.charAt(h+1))&&"*"!==i||!(e=u.exec(r))||e.index!==h){switch(o){case"{":if(!n){f++,p.push(o);break}case"}":if(!n){f--,p.push(o),t[++a]=p=[];break}case"(":if(!n){n=!0,p.push(o);break}case")":if(n){n=!1,p.push(o);break}default:p.push(o)}h++}else h+=e[0].length,p.push(e[0]);return 0!==f&&(c={index:h-1,type:"Parse",message:f>0?"missing closing `}`":"missing opening `{`"}),t.map(function(t){return t.join("")})}([[]]),c)throw b(c);var p=function(t,e){var r=t.specificity,n=e.specificity;return r[0]!=n[0]?n[0]-r[0]:r[1]!=n[1]?n[1]-r[1]:r[2]!=n[2]?n[2]-r[2]:n[3]-r[3]};return(a=new t.Tree.Ruleset([],d(this.parsers.primary))).root=!0,a.toList=function(t){t.error=function(e){t.errors||(t.errors=new Error("")),t.errors.message?t.errors.message+="\n"+b(e).message:t.errors.message=b(e).message},t.frames=t.frames||[];var e=this.flatten([],[],t);return e.sort(p),e},a},parsers:{primary:function(){for(var t,e=[];(t=d(this.rule)||d(this.ruleset)||d(this.comment))||d(/^[\s\n]+/)||(t=d(this.invalid));)t&&e.push(t);return e},invalid:function(){var e=d(/^[^;\n]*[;\n]/);if(e)return new t.Tree.Invalid(e,a)},comment:function(){var e;if("/"===r.charAt(n))return"/"===r.charAt(n+1)?new t.Tree.Comment(d(/^\/\/.*/),!0):(e=d(/^\/\*(?:[^*]|\*+[^\/*])*\*+\/\n?/))?new t.Tree.Comment(e):void 0},entities:{quoted:function(){if('"'===r.charAt(n)||"'"===r.charAt(n)){var e=d(/^"((?:[^"\\\r\n]|\\.)*)"|'((?:[^'\\\r\n]|\\.)*)'/);return e?new t.Tree.Quoted(e[1]||e[2]):void 0}},field:function(){if(d("[")){var e=d(/(^[^\]]+)/);if(d("]"))return e?new t.Tree.Field(e[1]):void 0}},comparison:function(){var t=d(/^=~|=|!=|<=|>=|<|>/);if(t)return t},keyword:function(){var e=d(/^[A-Za-z\u4e00-\u9fa5-]+[A-Za-z-0-9\u4e00-\u9fa5_]*/);if(e)return new t.Tree.Keyword(e)},call:function(){var e,r;if(e=/^([\w\-]+|%)\(/.exec(u[o])){if("url"===(e=e[1]))return null;n+=e.length;if(d("("),r=d(this.entities.arguments),d(")"))return e?new t.Tree.Call(e,r,n):void 0}},arguments:function(){for(var t,e=[];t=d(this.expression);){e.push(t);if(!d(","))break}return e},literal:function(){return d(this.entities.dimension)||d(this.entities.keywordcolor)||d(this.entities.hexcolor)||d(this.entities.quoted)},url:function(){var e;if("u"===r.charAt(n)&&d(/^url\(/)){e=d(this.entities.quoted)||d(this.entities.variable)||d(/^[\-\w%@_match\/.&=:;#+?~]+/)||"";return d(")")?new t.Tree.URL(void 0!==e.value||e instanceof t.Tree.Variable?e:new t.Tree.Quoted(e)):new t.Tree.Invalid(e,a,"Missing closing ) in URL.")}},variable:function(){var o,i=n;if("@"===r.charAt(n)&&(o=d(/^@[\w-]+/)))return new t.Tree.Variable(o,i,e.filename)},hexcolor:function(){var e;if("#"===r.charAt(n)&&(e=d(/^#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})/)))return new t.Tree.Color(e[1])},keywordcolor:function(){var e=u[o].match(/^[a-z]+/);if(e&&e[0]in t.Tree.Reference.data.colors)return new t.Tree.Color(t.Tree.Reference.data.colors[d(/^[a-z]+/)])},dimension:function(){var e=r.charCodeAt(n);if(!(e>57||e<45||47===e)){var o=d(/^(-?\d*\.?\d+(?:[eE][-+]?\d+)?)(\%|\w+)?/);return o?new t.Tree.Dimension(o[1],o[2],a):void 0}}},variable:function(){var t;if("@"===r.charAt(n)&&(t=d(/^(@[\w-]+)\s*:/)))return t[1]},entity:function(){var t=d(this.entities.call)||d(this.entities.literal),e=d(this.entities.field)||d(this.entities.variable),r=d(this.entities.url)||d(this.entities.keyword);return t||e||r},end:function(){var t;return d(";")||("string"==typeof(t="}")?r.charAt(n)===t:!!t.test(u[o]))},element:function(){var e=d(/^(?:[.#][\w\u4e00-\u9fa5\-]+|\*|Map)/);if(e)return new t.Tree.Element(e)},attachment:function(){var t=d(/^::([\w\-]+(?:\/[\w\-]+)*)/);if(t)return t[1]},selector:function(){for(var e,o,i,s,u,l=[],c=new t.Tree.Filterset,f=[],p=0,h=0;(i=d(this.element))||(u=d(this.zoom))||(s=d(this.filter))||(e=d(this.attachment));){if(p++,i)l.push(i);else if(u)f.push(u),h++;else if(s){var y=c.add(s);if(y)throw b({message:y,index:n-1});h++}else{if(o)throw b({message:"Encountered second attachment name.",index:n-1});o=e}var v=r.charAt(n);if("{"===v||"}"===v||";"===v||","===v)break}if(p)return new t.Tree.Selector(c,f,l,o,h,a)},filter:function(){p();var r,n,o;if(d("[")&&(r=d(/^[a-zA-Z0-9\-_]+/)||d(this.entities.quoted)||d(this.entities.variable)||d(this.entities.keyword)||d(this.entities.field))&&(r instanceof t.Tree.Quoted&&(r=new t.Tree.Field(r.toString())),(n=d(this.entities.comparison))&&(o=d(this.entities.quoted)||d(this.entities.variable)||d(this.entities.dimension)||d(this.entities.keyword)||d(this.entities.field)))){if(!d("]"))throw b({message:"Missing closing ] of filter.",index:a-1});return r.is||(r=new t.Tree.Field(r)),new t.Tree.Filter(r,n,o,a,e.filename)}},zoom:function(){p();var e,r;if(d(/^\[\s*zoom/g)&&(e=d(this.entities.comparison))&&(r=d(this.entities.variable)||d(this.entities.dimension))&&d("]"))return new t.Tree.Zoom(e,r,a);h()},block:function(){var t;if(d("{")&&(t=d(this.primary))&&d("}"))return t},ruleset:function(){var e,r,n=[];for(p();e=d(this.selector);){for(n.push(e);d(this.comment););if(!d(","))break;for(;d(this.comment););}if(e)for(;d(this.comment););if(n.length>0&&(r=d(this.block))){if(1===n.length&&n[0].elements.length&&"Map"===n[0].elements[0].value){var o=new t.Tree.Ruleset(n,r);return o.isMap=!0,o}return new t.Tree.Ruleset(n,r)}h()},rule:function(){var o,i,u=r.charAt(n);if(p(),"."!==u&&"#"!==u&&(o=d(this.variable)||d(this.property))){if((i=d(this.value))&&d(this.end))return new t.Tree.Rule(o,i,a,e.filename);s=n,h()}},font:function(){for(var e,r=[],n=[];e=d(this.entity);)n.push(e);if(r.push(new t.Tree.Expression(n)),d(","))for(;(e=d(this.expression))&&(r.push(e),d(",")););return new t.Tree.Value(r)},value:function(){for(var e,r=[];(e=d(this.expression))&&(r.push(e),d(",")););return r.length>1?new t.Tree.Value(r.map(function(t){return t.value[0]})):1===r.length?new t.Tree.Value(r):void 0},sub:function(){var t;if(d("(")&&(t=d(this.expression))&&d(")"))return t},multiplication:function(){var e,r,n,o;if(e=d(this.operand)){for(;(n=d("/")||d("*")||d("%"))&&(r=d(this.operand));)o=new t.Tree.Operation(n,[o||e,r],a);return o||e}},addition:function(){var e,o,i,s;if(e=d(this.multiplication)){for(;(i=d(/^[-+]\s+/)||" "!=r.charAt(n-1)&&(d("+")||d("-")))&&(o=d(this.multiplication));)s=new t.Tree.Operation(i,[s||e,o],a);return s||e}},operand:function(){return d(this.sub)||d(this.entity)},expression:function(){for(var e,r=[];e=d(this.addition)||d(this.entity);)r.push(e);if(r.length>0)return new t.Tree.Expression(r)},property:function(){var t=d(/^(([a-z][-a-z_0-9]*\/)?\*?-?[-a-z_0-9]+)\s*:/);if(t)return t[1]}}}}},{key:"parse",value:function(t){var e=this.parser;return this.ruleSet=e.parse(t)}},{key:"toShaders",value:function(){if(this.ruleSet){var t=this.ruleSet;if(t){var e=t.toList(this.env);e.reverse();var r={},n=[];this._toShaders(r,n,e);for(var o=[],i={},a=0,s=e.length;a<s;++a){var u=e[a],l=u.attachment,c=r[n[a]],f=[];if(!i[l]){var p=0;for(var h in c)if("zoom"!==h&&"frames"!==h&&"attachment"!==h&&"elements"!=h)if("layer-index"===h){var y=(c[h].join("\n"),null);Object.defineProperty(f,"layerIndex",{configurable:!0,enumerable:!1,value:y})}else f[p++]=function(t,e){if(!Array.isArray(t))return t;var r=t.join("\n"),n='attributes["FEATUREID"]&&attributes["FEATUREID"]',o=r.indexOf(n);if(o>=0){if(!e.featureFilter){var i=o+n.length,a=r.indexOf(")",i+1),s="featureId&&(featureId"+r.substring(i,a)+")";Object.defineProperty(e,"featureFilter",{configurable:!0,enumerable:!1,value:function(t){return!!s}})}return{property:h,getValue:Function("attributes","zoom","seftFilter","var _value = null; var isExcute=typeof seftFilter=='function'?sefgFilter():seftFilter;if(isExcute){"+r+";} return _value; ")}}return{property:h,getValue:Function("attributes","zoom","var _value = null;"+r+"; return _value; ")}}(c[h],f);Object.defineProperty(f,"attachment",{configurable:!0,enumerable:!1,value:l}),Object.defineProperty(f,"elements",{configurable:!0,enumerable:!1,value:u.elements}),o.push(f),i[n[a]]=!0}Object.defineProperty(f,"zoom",{configurable:!0,enumerable:!1,value:u.zoom})}return o}}return null}},{key:"_toShaders",value:function(e,r,n){for(var o=0,i=n.length;o<i;++o){for(var a=n[o],s=[],u=0,l=a.elements.length;u<l;u++)s.push(a.elements[u]);var c=a.filters.filters,f=[];for(var p in c)f.push(c[p].id);var h=s.join("/")+"::"+a.attachment+"_"+f.join("_");r.push(h);var y=e[h]=e[h]||{};y.zoom=t.Tree.Zoom.all;var d=a.toJS(this.env);for(var b in d)(y[b]=y[b]||[]).push(d[b].join("\n"))}}},{key:"getShaders",value:function(){return this.shaders}},{key:"destroy",value:function(){this.cartoStr=null,this.env=null,this.ruleSet=null,this.parser=null,this.shaders=null}}]),t}(),N0={version:"2.1.1",style:{"filter-mode":{type:["all","first"],doc:"Control the processing behavior of Rule filters within a Style. If 'all' is used then all Rules are processed sequentially independent of whether any previous filters matched. If 'first' is used then it means processing ends after the first match (a positive filter evaluation) and no further Rules in the Style are processed ('first' is usually the default for CSS implementations on top of Mapnik to simplify translation from CSS to Mapnik XML)","default-value":"all","default-meaning":"All Rules in a Style are processed whether they have filters or not and whether or not the filter conditions evaluate to true."},"image-filters":{css:"image-filters","default-value":"none","default-meaning":"no filters",type:"functions",functions:[["agg-stack-blur",2],["emboss",0],["blur",0],["gray",0],["sobel",0],["edge-detect",0],["x-gradient",0],["y-gradient",0],["invert",0],["sharpen",0]],doc:"A list of image filters."},"comp-op":{css:"comp-op","default-value":"src-over","default-meaning":"add the current layer on top of other layers",doc:"Composite operation. This defines how this layer should behave relative to layers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]},opacity:{css:"opacity",type:"float",doc:"An alpha value for the style (which means an alpha applied to all features in separate buffer and then composited back to main buffer)","default-value":1,"default-meaning":"no separate buffer will be used and no alpha will be applied to the style after rendering"}},layer:{name:{"default-value":"",type:"string",required:!0,"default-meaning":"No layer name has been provided",doc:"The name of a layer. Can be anything you wish and is not strictly validated, but ideally unique  in the map"},srs:{"default-value":"",type:"string","default-meaning":"No srs value is provided and the value will be inherited from the Map's srs",doc:"The spatial reference system definition for the layer, aka the projection. Can either be a proj4 literal string like '+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs' or, if the proper proj4 epsg/nad/etc identifier files are installed, a string that uses an id like: '+init=epsg:4326'"},status:{"default-value":!0,type:"boolean","default-meaning":"This layer will be marked as active and available for processing",doc:"A property that can be set to false to disable this layer from being processed"},minzoom:{"default-value":"0",type:"float","default-meaning":"The layer will be visible at the minimum possible scale",doc:"The minimum scale denominator that this layer will be visible at. A layer's visibility is determined by whether its status is true and if the Map scale >= minzoom - 1e-6 and scale < maxzoom + 1e-6"},maxzoom:{"default-value":"1.79769e+308",type:"float","default-meaning":"The layer will be visible at the maximum possible scale",doc:"The maximum scale denominator that this layer will be visible at. The default is the numeric limit of the C++ double type, which may vary slightly by system, but is likely a massive number like 1.79769e+308 and ensures that this layer will always be visible unless the value is reduced. A layer's visibility is determined by whether its status is true and if the Map scale >= minzoom - 1e-6 and scale < maxzoom + 1e-6"},queryable:{"default-value":!1,type:"boolean","default-meaning":"The layer will not be available for the direct querying of data values",doc:"This property was added for GetFeatureInfo/WMS compatibility and is rarely used. It is off by default meaning that in a WMS context the layer will not be able to be queried unless the property is explicitly set to true"},"clear-label-cache":{"default-value":!1,type:"boolean","default-meaning":"The renderer's collision detector cache (used for avoiding duplicate labels and overlapping markers) will not be cleared immediately before processing this layer",doc:"This property, by default off, can be enabled to allow a user to clear the collision detector cache before a given layer is processed. This may be desirable to ensure that a given layers data shows up on the map even if it normally would not because of collisions with previously rendered labels or markers"},"group-by":{"default-value":"",type:"string","default-meaning":"No special layer grouping will be used during rendering",doc:"https://github.com/mapnik/mapnik/wiki/Grouped-rendering"},"buffer-size":{"default-value":"0",type:"float","default-meaning":"No buffer will be used",doc:"Extra tolerance around the Layer extent (in pixels) used to when querying and (potentially) clipping the layer data during rendering"},"maximum-extent":{"default-value":"none",type:"bbox","default-meaning":"No clipping extent will be used",doc:"An extent to be used to limit the bounds used to query this specific layer data during rendering. Should be minx, miny, maxx, maxy in the coordinates of the Layer."}},symbolizers:{"*":{"image-filters":{css:"image-filters","default-value":"none","default-meaning":"no filters",type:"functions",functions:[["agg-stack-blur",2],["emboss",0],["blur",0],["gray",0],["sobel",0],["edge-detect",0],["x-gradient",0],["y-gradient",0],["invert",0],["sharpen",0]],doc:"A list of image filters."},"comp-op":{css:"comp-op","default-value":"src-over","default-meaning":"add the current layer on top of other layers",doc:"Composite operation. This defines how this layer should behave relative to layers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]},opacity:{css:"opacity",type:"float",doc:"An alpha value for the style (which means an alpha applied to all features in separate buffer and then composited back to main buffer)","default-value":1,"default-meaning":"no separate buffer will be used and no alpha will be applied to the style after rendering"}},map:{"background-color":{css:"background-color","default-value":"none","default-meaning":"transparent",type:"color",doc:"Map Background color"},"background-image":{css:"background-image",type:"uri","default-value":"","default-meaning":"transparent",doc:"An image that is repeated below all features on a map as a background.",description:"Map Background image"},srs:{css:"srs",type:"string","default-value":"+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs","default-meaning":"The proj4 literal of EPSG:4326 is assumed to be the Map's spatial reference and all data from layers within this map will be plotted using this coordinate system. If any layers do not declare an srs value then they will be assumed to be in the same srs as the Map and not transformations will be needed to plot them in the Map's coordinate space",doc:"Map spatial reference (proj4 string)"},"buffer-size":{css:"buffer-size","default-value":"0",type:"float","default-meaning":"No buffer will be used",doc:'Extra tolerance around the map (in pixels) used to ensure labels crossing tile boundaries are equally rendered in each tile (e.g. cut in each tile). Not intended to be used in combination with "avoid-edges".'},"maximum-extent":{css:"","default-value":"none",type:"bbox","default-meaning":"No clipping extent will be used",doc:"An extent to be used to limit the bounds used to query all layers during rendering. Should be minx, miny, maxx, maxy in the coordinates of the Map."},base:{css:"base","default-value":"","default-meaning":"This base path defaults to an empty string meaning that any relative paths to files referenced in styles or layers will be interpreted relative to the application process.",type:"string",doc:"Any relative paths used to reference files will be understood as relative to this directory path if the map is loaded from an in memory object rather than from the filesystem. If the map is loaded from the filesystem and this option is not provided it will be set to the directory of the stylesheet."},"paths-from-xml":{css:"","default-value":!0,"default-meaning":"Paths read from XML will be interpreted from the location of the XML",type:"boolean",doc:"value to control whether paths in the XML will be interpreted from the location of the XML or from the working directory of the program that calls load_map()"},"minimum-version":{css:"","default-value":"none","default-meaning":"Mapnik version will not be detected and no error will be thrown about compatibility",type:"string",doc:"The minumum Mapnik version (e.g. 0.7.2) needed to use certain functionality in the stylesheet"},"font-directory":{css:"font-directory",type:"uri","default-value":"none","default-meaning":"No map-specific fonts will be registered",doc:"Path to a directory which holds fonts which should be registered when the Map is loaded (in addition to any fonts that may be automatically registered)."}},polygon:{fill:{css:"polygon-fill",type:"color","default-value":"rgba(128,128,128,1)","default-meaning":"gray and fully opaque (alpha = 1), same as rgb(128,128,128)",doc:"Fill color to assign to a polygon"},"fill-opacity":{css:"polygon-opacity",type:"float",doc:"The opacity of the polygon","default-value":1,"default-meaning":"opaque"},gamma:{css:"polygon-gamma",type:"float","default-value":1,"default-meaning":"fully antialiased",range:"0-1",doc:"Level of antialiasing of polygon edges"},"gamma-method":{css:"polygon-gamma-method",type:["power","linear","none","threshold","multiply"],"default-value":"power","default-meaning":"pow(x,gamma) is used to calculate pixel gamma, which produces slightly smoother line and polygon antialiasing than the 'linear' method, while other methods are usually only used to disable AA",doc:"An Antigrain Geometry specific rendering hint to control the quality of antialiasing. Under the hood in Mapnik this method is used in combination with the 'gamma' value (which defaults to 1). The methods are in the AGG source at https://github.com/mapnik/mapnik/blob/master/deps/agg/include/agg_gamma_functions.h"},clip:{css:"polygon-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"polygon-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"polygon-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"polygon-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},line:{stroke:{css:"line-color","default-value":"rgba(0,0,0,1)",type:"color","default-meaning":"black and fully opaque (alpha = 1), same as rgb(0,0,0)",doc:"The color of a drawn line"},"stroke-width":{css:"line-width","default-value":1,type:"float",doc:"The width of a line in pixels"},"stroke-opacity":{css:"line-opacity","default-value":1,type:"float","default-meaning":"opaque",doc:"The opacity of a line"},"stroke-linejoin":{css:"line-join","default-value":"miter",type:["miter","round","bevel"],doc:"The behavior of lines when joining"},"stroke-linecap":{css:"line-cap","default-value":"butt",type:["butt","round","square"],doc:"The display of line endings"},"stroke-gamma":{css:"line-gamma",type:"float","default-value":1,"default-meaning":"fully antialiased",range:"0-1",doc:"Level of antialiasing of stroke line"},"stroke-gamma-method":{css:"line-gamma-method",type:["power","linear","none","threshold","multiply"],"default-value":"power","default-meaning":"pow(x,gamma) is used to calculate pixel gamma, which produces slightly smoother line and polygon antialiasing than the 'linear' method, while other methods are usually only used to disable AA",doc:"An Antigrain Geometry specific rendering hint to control the quality of antialiasing. Under the hood in Mapnik this method is used in combination with the 'gamma' value (which defaults to 1). The methods are in the AGG source at https://github.com/mapnik/mapnik/blob/master/deps/agg/include/agg_gamma_functions.h"},"stroke-dasharray":{css:"line-dasharray",type:"numbers",doc:"A pair of length values [a,b], where (a) is the dash length and (b) is the gap length respectively. More than two values are supported for more complex patterns.","default-value":"none","default-meaning":"solid line"},"stroke-dashoffset":{css:"line-dash-offset",type:"numbers",doc:"valid parameter but not currently used in renderers (only exists for experimental svg support in Mapnik which is not yet enabled)","default-value":"none","default-meaning":"solid line"},"stroke-miterlimit":{css:"line-miterlimit",type:"float",doc:"The limit on the ratio of the miter length to the stroke-width. Used to automatically convert miter joins to bevel joins for sharp angles to avoid the miter extending beyond the thickness of the stroking path. Normally will not need to be set, but a larger value can sometimes help avoid jaggy artifacts.","default-value":4,"default-meaning":"Will auto-convert miters to bevel line joins when theta is less than 29 degrees as per the SVG spec: 'miterLength / stroke-width = 1 / sin ( theta / 2 )'"},clip:{css:"line-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"line-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},offset:{css:"line-offset",type:"float","default-value":0,"default-meaning":"no offset",doc:"Offsets a line a number of pixels parallel to its actual path. Postive values move the line left, negative values move it right (relative to the directionality of the line)."},rasterizer:{css:"line-rasterizer",type:["full","fast"],"default-value":"full",doc:"Exposes an alternate AGG rendering method that sacrifices some accuracy for speed."},"geometry-transform":{css:"line-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"line-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},markers:{file:{css:"marker-file",doc:"An SVG file that this marker shows at each placement. If no file is given, the marker will show an ellipse.","default-value":"","default-meaning":"An ellipse or circle, if width equals height",type:"uri"},opacity:{css:"marker-opacity",doc:"The overall opacity of the marker, if set, overrides both the opacity of both the fill and stroke","default-value":1,"default-meaning":"The stroke-opacity and fill-opacity will be used",type:"float"},"fill-opacity":{css:"marker-fill-opacity",doc:"The fill opacity of the marker","default-value":1,"default-meaning":"opaque",type:"float"},stroke:{css:"marker-line-color",doc:"The color of the stroke around a marker shape.","default-value":"black",type:"color"},"stroke-width":{css:"marker-line-width",doc:"The width of the stroke around a marker shape, in pixels. This is positioned on the boundary, so high values can cover the area itself.",type:"float"},"stroke-opacity":{css:"marker-line-opacity","default-value":1,"default-meaning":"opaque",doc:"The opacity of a line",type:"float"},placement:{css:"marker-placement",type:["point","line","interior"],"default-value":"point","default-meaning":"Place markers at the center point (centroid) of the geometry",doc:"Attempt to place markers on a point, in the center of a polygon, or if markers-placement:line, then multiple times along a line. 'interior' placement can be used to ensure that points placed on polygons are forced to be inside the polygon interior"},"multi-policy":{css:"marker-multi-policy",type:["each","whole","largest"],"default-value":"each","default-meaning":"If a feature contains multiple geometries and the placement type is either point or interior then a marker will be rendered for each",doc:"A special setting to allow the user to control rendering behavior for 'multi-geometries' (when a feature contains multiple geometries). This setting does not apply to markers placed along lines. The 'each' policy is default and means all geometries will get a marker. The 'whole' policy means that the aggregate centroid between all geometries will be used. The 'largest' policy means that only the largest (by bounding box areas) feature will get a rendered marker (this is how text labeling behaves by default)."},"marker-type":{css:"marker-type",type:["arrow","ellipse"],"default-value":"ellipse",doc:"The default marker-type. If a SVG file is not given as the marker-file parameter, the renderer provides either an arrow or an ellipse (a circle if height is equal to width)"},width:{css:"marker-width","default-value":10,doc:"The width of the marker, if using one of the default types.",type:"expression"},height:{css:"marker-height","default-value":10,doc:"The height of the marker, if using one of the default types.",type:"expression"},fill:{css:"marker-fill","default-value":"blue",doc:"The color of the area of the marker.",type:"color"},"allow-overlap":{css:"marker-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping markers are shown or hidden.","default-meaning":"Do not allow makers to overlap with each other - overlapping markers will not be shown."},"ignore-placement":{css:"marker-ignore-placement",type:"boolean","default-value":!1,"default-meaning":"do not store the bbox of this geometry in the collision detector cache",doc:"value to control whether the placement of the feature will prevent the placement of other features"},spacing:{css:"marker-spacing",doc:"Space between repeated labels","default-value":100,type:"float"},"max-error":{css:"marker-max-error",type:"float","default-value":.2,doc:"The maximum difference between actual marker placement and the marker-spacing parameter. Setting a high value can allow the renderer to try to resolve placement conflicts with other symbolizers."},transform:{css:"marker-transform",type:"functions",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]],"default-value":"","default-meaning":"No transformation",doc:"SVG transformation definition"},clip:{css:"marker-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"marker-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"marker-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"marker-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},shield:{name:{css:"shield-name",type:"expression",serialization:"content",doc:'Value to use for a shield"s text label. Data columns are specified using brackets like [column_name]'},file:{css:"shield-file",required:!0,type:"uri","default-value":"none",doc:"Image file to render behind the shield text"},"face-name":{css:"shield-face-name",type:"string",validate:"font",doc:"Font name and style to use for the shield text","default-value":"",required:!0},"unlock-image":{css:"shield-unlock-image",type:"boolean",doc:"This parameter should be set to true if you are trying to position text beside rather than on top of the shield image","default-value":!1,"default-meaning":"text alignment relative to the shield image uses the center of the image as the anchor for text positioning."},size:{css:"shield-size",type:"float",doc:"The size of the shield text in pixels"},fill:{css:"shield-fill",type:"color",doc:"The color of the shield text"},placement:{css:"shield-placement",type:["point","line","vertex","interior"],"default-value":"point",doc:"How this shield should be placed. Point placement attempts to place it on top of points, line places along lines multiple times per feature, vertex places on the vertexes of polygons, and interior attempts to place inside of polygons."},"avoid-edges":{css:"shield-avoid-edges",doc:"Tell positioning algorithm to avoid labeling near intersection edges.",type:"boolean","default-value":!1},"allow-overlap":{css:"shield-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping shields are shown or hidden.","default-meaning":"Do not allow shields to overlap with other map elements already placed."},"minimum-distance":{css:"shield-min-distance",type:"float","default-value":0,doc:"Minimum distance to the next shield symbol, not necessarily the same shield."},spacing:{css:"shield-spacing",type:"float","default-value":0,doc:"The spacing between repeated occurrences of the same shield on a line"},"minimum-padding":{css:"shield-min-padding","default-value":0,doc:"Determines the minimum amount of padding that a shield gets relative to other shields",type:"float"},"wrap-width":{css:"shield-wrap-width",type:"unsigned","default-value":0,doc:"Length of a chunk of text in characters before wrapping text"},"wrap-before":{css:"shield-wrap-before",type:"boolean","default-value":!1,doc:"Wrap text before wrap-width is reached. If false, wrapped lines will be a bit longer than wrap-width."},"wrap-character":{css:"shield-wrap-character",type:"string","default-value":" ",doc:"Use this character instead of a space to wrap long names."},"halo-fill":{css:"shield-halo-fill",type:"color","default-value":"#FFFFFF","default-meaning":"white",doc:"Specifies the color of the halo around the text."},"halo-radius":{css:"shield-halo-radius",doc:"Specify the radius of the halo in pixels","default-value":0,"default-meaning":"no halo",type:"float"},"character-spacing":{css:"shield-character-spacing",type:"unsigned","default-value":0,doc:"Horizontal spacing between characters (in pixels). Currently works for point placement only, not line placement."},"line-spacing":{css:"shield-line-spacing",doc:"Vertical spacing between lines of multiline labels (in pixels)",type:"unsigned"},dx:{css:"shield-text-dx",type:"float",doc:"Displace text within shield by fixed amount, in pixels, +/- along the X axis.  A positive value will shift the text right","default-value":0},dy:{css:"shield-text-dy",type:"float",doc:"Displace text within shield by fixed amount, in pixels, +/- along the Y axis.  A positive value will shift the text down","default-value":0},"shield-dx":{css:"shield-dx",type:"float",doc:"Displace shield by fixed amount, in pixels, +/- along the X axis.  A positive value will shift the text right","default-value":0},"shield-dy":{css:"shield-dy",type:"float",doc:"Displace shield by fixed amount, in pixels, +/- along the Y axis.  A positive value will shift the text down","default-value":0},opacity:{css:"shield-opacity",type:"float",doc:"(Default 1.0) - opacity of the image used for the shield","default-value":1},"text-opacity":{css:"shield-text-opacity",type:"float",doc:"(Default 1.0) - opacity of the text placed on top of the shield","default-value":1},"horizontal-alignment":{css:"shield-horizontal-alignment",type:["left","middle","right","auto"],doc:"The shield's horizontal alignment from its centerpoint","default-value":"auto"},"vertical-alignment":{css:"shield-vertical-alignment",type:["top","middle","bottom","auto"],doc:"The shield's vertical alignment from its centerpoint","default-value":"middle"},"text-transform":{css:"shield-text-transform",type:["none","uppercase","lowercase","capitalize"],doc:"Transform the case of the characters","default-value":"none"},"justify-alignment":{css:"shield-justify-alignment",type:["left","center","right","auto"],doc:"Define how text in a shield's label is justified","default-value":"auto"},clip:{css:"shield-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},"comp-op":{css:"shield-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},"line-pattern":{file:{css:"line-pattern-file",type:"uri","default-value":"none",required:!0,doc:"An image file to be repeated and warped along a line"},clip:{css:"line-pattern-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"line-pattern-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"line-pattern-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"line-pattern-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},"polygon-pattern":{file:{css:"polygon-pattern-file",type:"uri","default-value":"none",required:!0,doc:"Image to use as a repeated pattern fill within a polygon"},alignment:{css:"polygon-pattern-alignment",type:["local","global"],"default-value":"local",doc:"Specify whether to align pattern fills to the layer or to the map."},gamma:{css:"polygon-pattern-gamma",type:"float","default-value":1,"default-meaning":"fully antialiased",range:"0-1",doc:"Level of antialiasing of polygon pattern edges"},opacity:{css:"polygon-pattern-opacity",type:"float",doc:"(Default 1.0) - Apply an opacity level to the image used for the pattern","default-value":1,"default-meaning":"The image is rendered without modifications"},clip:{css:"polygon-pattern-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"polygon-pattern-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"polygon-pattern-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"polygon-pattern-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},raster:{opacity:{css:"raster-opacity","default-value":1,"default-meaning":"opaque",type:"float",doc:"The opacity of the raster symbolizer on top of other symbolizers."},"filter-factor":{css:"raster-filter-factor","default-value":-1,"default-meaning":"Allow the datasource to choose appropriate downscaling.",type:"float",doc:"This is used by the Raster or Gdal datasources to pre-downscale images using overviews. Higher numbers can sometimes cause much better scaled image output, at the cost of speed."},scaling:{css:"raster-scaling",type:["near","fast","bilinear","bilinear8","bicubic","spline16","spline36","hanning","hamming","hermite","kaiser","quadric","catrom","gaussian","bessel","mitchell","sinc","lanczos","blackman"],"default-value":"near",doc:"The scaling algorithm used to making different resolution versions of this raster layer. Bilinear is a good compromise between speed and accuracy, while lanczos gives the highest quality."},"mesh-size":{css:"raster-mesh-size","default-value":16,"default-meaning":"Reprojection mesh will be 1/16 of the resolution of the source image",type:"unsigned",doc:"A reduced resolution mesh is used for raster reprojection, and the total image size is divided by the mesh-size to determine the quality of that mesh. Values for mesh-size larger than the default will result in faster reprojection but might lead to distortion."},"comp-op":{css:"raster-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},point:{file:{css:"point-file",type:"uri",required:!1,"default-value":"none",doc:"Image file to represent a point"},"allow-overlap":{css:"point-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping points are shown or hidden.","default-meaning":"Do not allow points to overlap with each other - overlapping markers will not be shown."},"ignore-placement":{css:"point-ignore-placement",type:"boolean","default-value":!1,"default-meaning":"do not store the bbox of this geometry in the collision detector cache",doc:"value to control whether the placement of the feature will prevent the placement of other features"},opacity:{css:"point-opacity",type:"float","default-value":1,"default-meaning":"Fully opaque",doc:"A value from 0 to 1 to control the opacity of the point"},placement:{css:"point-placement",type:["centroid","interior"],doc:"How this point should be placed. Centroid calculates the geometric center of a polygon, which can be outside of it, while interior always places inside of a polygon.","default-value":"centroid"},transform:{css:"point-transform",type:"functions",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]],"default-value":"","default-meaning":"No transformation",doc:"SVG transformation definition"},"comp-op":{css:"point-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},text:{name:{css:"text-name",type:"expression",required:!0,"default-value":"",serialization:"content",doc:"Value to use for a text label. Data columns are specified using brackets like [column_name]"},"face-name":{css:"text-face-name",type:"string",validate:"font",doc:"Font name and style to render a label in",required:!0},size:{css:"text-size",type:"float","default-value":10,doc:"Text size in pixels"},"text-ratio":{css:"text-ratio",doc:"Define the amount of text (of the total) present on successive lines when wrapping occurs","default-value":0,type:"unsigned"},"wrap-width":{css:"text-wrap-width",doc:"Length of a chunk of text in characters before wrapping text","default-value":0,type:"unsigned"},"wrap-before":{css:"text-wrap-before",type:"boolean","default-value":!1,doc:"Wrap text before wrap-width is reached. If false, wrapped lines will be a bit longer than wrap-width."},"wrap-character":{css:"text-wrap-character",type:"string","default-value":" ",doc:"Use this character instead of a space to wrap long text."},spacing:{css:"text-spacing",type:"unsigned",doc:"Distance between repeated text labels on a line (aka. label-spacing)"},"character-spacing":{css:"text-character-spacing",type:"float","default-value":0,doc:"Horizontal spacing adjustment between characters in pixels"},"line-spacing":{css:"text-line-spacing","default-value":0,type:"unsigned",doc:"Vertical spacing adjustment between lines in pixels"},"label-position-tolerance":{css:"text-label-position-tolerance","default-value":0,type:"unsigned",doc:"Allows the label to be displaced from its ideal position by a number of pixels (only works with placement:line)"},"max-char-angle-delta":{css:"text-max-char-angle-delta",type:"float","default-value":"22.5",doc:"The maximum angle change, in degrees, allowed between adjacent characters in a label. This value internally is converted to radians to the default is 22.5*math.pi/180.0. The higher the value the fewer labels will be placed around around sharp corners."},fill:{css:"text-fill",doc:"Specifies the color for the text","default-value":"#000000",type:"color"},opacity:{css:"text-opacity",doc:"A number from 0 to 1 specifying the opacity for the text","default-value":1,"default-meaning":"Fully opaque",type:"float"},"halo-fill":{css:"text-halo-fill",type:"color","default-value":"#FFFFFF","default-meaning":"white",doc:"Specifies the color of the halo around the text."},"halo-radius":{css:"text-halo-radius",doc:"Specify the radius of the halo in pixels","default-value":0,"default-meaning":"no halo",type:"float"},dx:{css:"text-dx",type:"float",doc:"Displace text by fixed amount, in pixels, +/- along the X axis.  A positive value will shift the text right","default-value":0},dy:{css:"text-dy",type:"float",doc:"Displace text by fixed amount, in pixels, +/- along the Y axis.  A positive value will shift the text down","default-value":0},"vertical-alignment":{css:"text-vertical-alignment",type:["top","middle","bottom","auto"],doc:"Position of label relative to point position.","default-value":"auto","default-meaning":'Default affected by value of dy; "bottom" for dy>0, "top" for dy<0.'},"avoid-edges":{css:"text-avoid-edges",doc:"Tell positioning algorithm to avoid labeling near intersection edges.","default-value":!1,type:"boolean"},"minimum-distance":{css:"text-min-distance",doc:"Minimum permitted distance to the next text symbolizer.",type:"float"},"minimum-padding":{css:"text-min-padding",doc:"Determines the minimum amount of padding that a text symbolizer gets relative to other text",type:"float"},"minimum-path-length":{css:"text-min-path-length",type:"float","default-value":0,"default-meaning":"place labels on all paths",doc:"Place labels only on paths longer than this value."},"allow-overlap":{css:"text-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping text is shown or hidden.","default-meaning":"Do not allow text to overlap with other text - overlapping markers will not be shown."},orientation:{css:"text-orientation",type:"expression",doc:"Rotate the text."},placement:{css:"text-placement",type:["point","line","vertex","interior"],"default-value":"point",doc:"Control the style of placement of a point versus the geometry it is attached to."},"placement-type":{css:"text-placement-type",doc:'Re-position and/or re-size text to avoid overlaps. "simple" for basic algorithm (using text-placements string,) "dummy" to turn this feature off.',type:["dummy","simple"],"default-value":"dummy"},placements:{css:"text-placements",type:"string","default-value":"",doc:'If "placement-type" is set to "simple", use this "POSITIONS,[SIZES]" string. An example is `text-placements: "E,NE,SE,W,NW,SW";` '},"text-transform":{css:"text-transform",type:["none","uppercase","lowercase","capitalize"],doc:"Transform the case of the characters","default-value":"none"},"horizontal-alignment":{css:"text-horizontal-alignment",type:["left","middle","right","auto"],doc:"The text's horizontal alignment from its centerpoint","default-value":"auto"},"justify-alignment":{css:"text-align",type:["left","right","center","auto"],doc:"Define how text is justified","default-value":"auto","default-meaning":"Auto alignment means that text will be centered by default except when using the `placement-type` parameter - in that case either right or left justification will be used automatically depending on where the text could be fit given the `text-placements` directives"},clip:{css:"text-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},"comp-op":{css:"text-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},building:{fill:{css:"building-fill","default-value":"#FFFFFF",doc:"The color of the buildings walls.",type:"color"},"fill-opacity":{css:"building-fill-opacity",type:"float",doc:"The opacity of the building as a whole, including all walls.","default-value":1},height:{css:"building-height",doc:"The height of the building in pixels.",type:"expression","default-value":"0"}}},colors:{aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50],transparent:[0,0,0,0]},filter:{value:["true","false","null","point","linestring","polygon","collection"]}};function R0(t){"@babel/helpers - typeof";return(R0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function M0(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,L0(n.key),n)}}function L0(t){var e=function(t,e){if("object"!=R0(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=R0(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==R0(e)?e:String(e)}I0.mapnik_reference={version:{latest:N0,"2.1.1":N0}},I0.Tree={},I0.Tree.operate=function(t,e,r){switch(t){case"+":return e+r;case"-":return e-r;case"*":return e*r;case"%":return e%r;case"/":return e/r}},I0.Tree.functions={rgb:function(t,e,r){return this.rgba(t,e,r,1)},rgba:function(t,e,r,n){var o=this,i=[t,e,r].map(function(t){return o.number(t)});return n=o.number(n),i.some(isNaN)||isNaN(n)?null:new I0.Tree.Color(i,n)},stop:function(t){var e,r;return arguments.length>1&&(e=arguments[1]),arguments.length>2&&(r=arguments[2]),{is:"tag",val:t,color:e,mode:r,toString:function(n){return'\n\t<stop value="'+t.ev(n)+'"'+(e?' color="'+e.ev(n)+'" ':"")+(r?' mode="'+r.ev(n)+'" ':"")+"/>"}}},hsl:function(t,e,r){return this.hsla(t,e,r,1)},hsla:function(t,e,r,n){if([t=this.number(t)%360/360,e=this.number(e),r=this.number(r),n=this.number(n)].some(isNaN))return null;var o=r<=.5?r*(e+1):r+e-r*e,i=2*r-o;return this.rgba(255*a(t+1/3),255*a(t),255*a(t-1/3),n);function a(t){return 6*(t=t<0?t+1:t>1?t-1:t)<1?i+(o-i)*t*6:2*t<1?o:3*t<2?i+(o-i)*(2/3-t)*6:i}},hue:function(t){return"toHSL"in t?new I0.Tree.Dimension(Math.round(t.toHSL().h)):null},saturation:function(t){return"toHSL"in t?new I0.Tree.Dimension(Math.round(100*t.toHSL().s),"%"):null},lightness:function(t){return"toHSL"in t?new I0.Tree.Dimension(Math.round(100*t.toHSL().l),"%"):null},alpha:function(t){return"toHSL"in t?new I0.Tree.Dimension(t.toHSL().a):null},saturate:function(t,e){if(!("toHSL"in t))return null;var r=t.toHSL();return r.s+=e.value/100,r.s=this.clamp(r.s),this.hsla_simple(r)},desaturate:function(t,e){if(!("toHSL"in t))return null;var r=t.toHSL();return r.s-=e.value/100,r.s=this.clamp(r.s),this.hsla_simple(r)},lighten:function(t,e){if(!("toHSL"in t))return null;var r=t.toHSL();return r.l+=e.value/100,r.l=this.clamp(r.l),this.hsla_simple(r)},darken:function(t,e){if(!("toHSL"in t))return null;var r=t.toHSL();return r.l-=e.value/100,r.l=this.clamp(r.l),this.hsla_simple(r)},fadein:function(t,e){if(!("toHSL"in t))return null;var r=t.toHSL();return r.a+=e.value/100,r.a=this.clamp(r.a),this.hsla_simple(r)},fadeout:function(t,e){if(!("toHSL"in t))return null;var r=t.toHSL();return r.a-=e.value/100,r.a=this.clamp(r.a),this.hsla_simple(r)},spin:function(t,e){if(!("toHSL"in t))return null;var r=t.toHSL(),n=(r.h+e.value)%360;return r.h=n<0?360+n:n,this.hsla_simple(r)},replace:function(t,e,r){return"field"===t.is?t.toString+".replace("+e.toString()+", "+r.toString()+")":t.replace(e,r)},mix:function(t,e,r){var n=r.value/100,o=2*n-1,i=t.toHSL().a-e.toHSL().a,a=((o*i==-1?o:(o+i)/(1+o*i))+1)/2,s=1-a,u=[t.rgb[0]*a+e.rgb[0]*s,t.rgb[1]*a+e.rgb[1]*s,t.rgb[2]*a+e.rgb[2]*s],l=t.alpha*n+e.alpha*(1-n);return new I0.Tree.Color(u,l)},greyscale:function(t){return this.desaturate(t,new I0.Tree.Dimension(100))},"%":function(t){for(var e=Array.prototype.slice.call(arguments,1),r=t.value,n=0;n<e.length;n++)r=r.replace(/%s/,e[n].value).replace(/%[da]/,e[n].toString());return r=r.replace(/%%/g,"%"),new I0.Tree.Quoted(r)},hsla_simple:function(t){return this.hsla(t.h,t.s,t.l,t.a)},number:function(t){return t instanceof I0.Tree.Dimension?parseFloat("%"===t.unit?t.value/100:t.value):"number"==typeof t?t:NaN},clamp:function(t){return Math.min(1,Math.max(0,t))}},I0.Tree.Call=function(){function t(e,r,n){j0(this,t),this.is="call",this.name=e,this.args=r,this.index=n}return x0(t,[{key:"ev",value:function(t){for(var e=this.args.map(function(e){return e.ev(t)}),r=0;r<e.length;r++)if("undefined"===e[r].is)return{is:"undefined",value:"undefined"};if(this.name in I0.Tree.functions){if(I0.Tree.functions[this.name].length<=e.length){var n=I0.Tree.functions[this.name].apply(I0.Tree.functions,e);return null===n?(t.error({message:"incorrect arguments given to "+this.name+"()",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):n}return t.error({message:"incorrect number of arguments for "+this.name+"(). "+I0.Tree.functions[this.name].length+" expected.",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}}var o=I0.Tree.Reference.mapnikFunctions[this.name];if(void 0===o){var i=C0()(I0.Tree.Reference.mapnikFunctions),a=this.name,s=i.map(function(t){return[t[0],I0.Tree.Reference.editDistance(a,t[0]),t[1]]}).sort(function(t,e){return t[1]-e[1]});return t.error({message:"unknown function "+this.name+"(), did you mean "+s[0][0]+"("+s[0][2]+")",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}}return o!==e.length&&-1!==o?(t.error({message:"function "+this.name+"() takes "+o+" arguments and was given "+e.length,index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):(this.args=e,this)}},{key:"toString",value:function(t,e){return this.args.length?this.name+"("+this.args.join(",")+")":this.name}}]),t}(),I0.Tree.Color=function(){function t(e,r){j0(this,t),this.is="color",Array.isArray(e)?this.rgb=e.slice(0,3):6==e.length?this.rgb=e.match(/.{2}/g).map(function(t){return parseInt(t,16)}):this.rgb=e.split("").map(function(t){return parseInt(t+t,16)}),"number"==typeof r?this.alpha=r:4===e.length?this.alpha=e[3]:this.alpha=1}return x0(t,[{key:"ev",value:function(){return this}},{key:"toString",value:function(){return"rgba("+this.rgb.map(function(t){return Math.round(t)}).concat(this.alpha).join(", ")+")"}},{key:"operate",value:function(t,e,r){var n=[];r instanceof I0.Tree.Color||(r=r.toColor());for(var o=0;o<3;o++)n[o]=I0.Tree.operate(e,this.rgb[o],r.rgb[o]);return new I0.Tree.Color(n)}},{key:"toHSL",value:function(){var t,e,r=this.rgb[0]/255,n=this.rgb[1]/255,o=this.rgb[2]/255,i=this.alpha,a=Math.max(r,n,o),s=Math.min(r,n,o),u=(a+s)/2,l=a-s;if(a===s)t=e=0;else{switch(e=u>.5?l/(2-a-s):l/(a+s),a){case r:t=(n-o)/l+(n<o?6:0);break;case n:t=(o-r)/l+2;break;case o:t=(r-n)/l+4}t/=6}return{h:360*t,s:e,l:u,a:i}}}]),t}(),I0.Tree.Comment=function(){function t(e,r){j0(this,t),this.value=e,this.silent=!!r}return x0(t,[{key:"toString",value:function(t){return"\x3c!--"+this.value+"--\x3e"}},{key:"ev",value:function(){return this}}]),t}(),I0.Tree.Definition=function(){function t(e,r){j0(this,t),this.elements=e.elements,this.rules=r,this.ruleIndex={};for(var n=0;n<this.rules.length;n++)"zoom"in this.rules[n]&&(this.rules[n]=this.rules[n].clone()),this.rules[n].zoom=e.zoom,this.ruleIndex[this.rules[n].updateID()]=!0;this.filters=e.filters,this.zoom=e.zoom,this.attachment=e.attachment||"__default__",this.specificity=e.specificity()}return x0(t,[{key:"toString",value:function(){for(var t=this.filters.toString(),e=0;e<this.rules.length;e++)t+="\n    "+this.rules[e];return t}},{key:"toJS",value:function(t){var e={},r=this.zoom,n=this.filters.toJS(t),o=[r];function i(r){if(r instanceof I0.Tree.Rule)e[r.name]=e[r.name]||[],n?e[r.name].push("if("+n+"){"+r.value.toJS(t)+"}"):e[r.name].push(r.value.toJS(t));else if(r instanceof I0.Tree.Ruleset){var o=r.toJS(t);for(var i in o)for(var a in e[i]=e[i]||[],o[i])e[i].push(o[i][a])}}for(var a in n&&o.push(n),n=o.join(" && "),this.rules)i(this.rules[a]);return e}}]),t}(),I0.Tree.Dimension=function(){function t(e,r,n){j0(this,t),this.is="float",this.physical_units=["m","cm","in","mm","pt","pc"],this.screen_units=["px","%"],this.all_units=["m","cm","in","mm","pt","pc","px","%"],this.densities={m:.0254,mm:25.4,cm:2.54,pt:72,pc:6},this.value=parseFloat(e),this.unit=r||null,this.index=n}return x0(t,[{key:"ev",value:function(t){if(this.unit&&this.all_units.indexOf(this.unit)<0)return t.error({message:"Invalid unit: '"+this.unit+"'",index:this.index}),{is:"undefined",value:"undefined"};if(this.unit&&this.physical_units.indexOf(this.unit)>=0){if(!t.ppi)return t.error({message:"ppi is not set, so metric units can't be used",index:this.index}),{is:"undefined",value:"undefined"};this.value=this.value/this.densities[this.unit]*t.ppi,this.unit="px"}return this}},{key:"toColor",value:function(){return new I0.Tree.Color([this.value,this.value,this.value])}},{key:"round",value:function(){return this.value=Math.round(this.value),this}},{key:"toString",value:function(){return this.value.toString()}},{key:"operate",value:function(t,e,r){return"%"===this.unit&&"%"!==r.unit?(t.error({message:"If two operands differ, the first must not be %",index:this.index}),{is:"undefined",value:"undefined"}):"%"!==this.unit&&"%"===r.unit?"*"===e||"/"===e||"%"===e?(t.error({message:"Percent values can only be added or subtracted from other values",index:this.index}),{is:"undefined",value:"undefined"}):new I0.Tree.Dimension(I0.Tree.operate(e,this.value,this.value*r.value*.01),this.unit):new I0.Tree.Dimension(I0.Tree.operate(e,this.value,r.value),this.unit||r.unit)}}]),t}(),I0.Tree.Element=function(){function t(e){j0(this,t),this.value=e.trim(),"#"===this.value[0]&&(this.type="id",this.clean=this.value.replace(/^#/,"")),"."===this.value[0]&&(this.type="class",this.clean=this.value.replace(/^\./,"")),-1!==this.value.indexOf("*")&&(this.type="wildcard")}return x0(t,[{key:"specificity",value:function(){return["id"===this.type?1:0,"class"===this.type?1:0]}},{key:"toString",value:function(){return this.value}}]),t}(),I0.Tree.Expression=function(){function t(e){j0(this,t),this.is="expression",this.value=e}return x0(t,[{key:"ev",value:function(t){return this.value.length>1?new I0.Tree.Expression(this.value.map(function(e){return e.ev(t)})):this.value[0].ev(t)}},{key:"toString",value:function(t){return this.value.map(function(e){return e.toString(t)}).join(" ")}}]),t}(),I0.Tree.Field=function(){function t(e){j0(this,t),this.is="field",this.value=e||""}return x0(t,[{key:"toString",value:function(){return'["'+this.value.toUpperCase()+'"]'}},{key:"ev",value:function(){return this}}]),t}(),I0.Tree.Filter=function(){function t(e,r,n,o,i){j0(this,t),this.ops={"<":[" &lt; ","numeric"],">":[" &gt; ","numeric"],"=":[" = ","both"],"!=":[" != ","both"],"<=":[" &lt;= ","numeric"],">=":[" &gt;= ","numeric"],"=~":[".match(","string",")"]},this.key=e,this.op=r,this.val=n,this.index=o,this.filename=i,this.id=this.key+this.op+this.val}return x0(t,[{key:"ev",value:function(t){return this.key=this.key.ev(t),this.val=this.val.ev(t),this}},{key:"toString",value:function(){return"["+this.id+"]"}}]),t}(),I0.Tree.Filterset=function(){function t(){j0(this,t),this.filters={}}return x0(t,[{key:"toJS",value:function(t){function e(t){var e=t.op;"="===e&&(e="==");var r=t.val;void 0!==t._val&&(r=t._val.toString(!0)),t.key&&"scale"===t.key.value?r=+r:"string"!=typeof r&&"object"!==T0(r)||(r="'"+r+"'");var n="attributes";return n+"&&"+n+t.key+"&&"+n+t.key+" "+e+r}var r=[];for(var n in this.filters)r.push(e(this.filters[n]));return r.join(" && ")}},{key:"toString",value:function(){var t=[];for(var e in this.filters)t.push(this.filters[e].id);return t.sort().join("\t")}},{key:"ev",value:function(t){for(var e in this.filters)this.filters[e].ev(t);return this}},{key:"clone",value:function(){var t=new I0.Tree.Filterset;for(var e in this.filters)t.filters[e]=this.filters[e];return t}},{key:"cloneWith",value:function(t){var e=[];for(var r in t.filters){var n=this.addable(t.filters[r]);if(!1===n)return!1;!0===n&&e.push(t.filters[r])}if(!e.length)return null;var o=new I0.Tree.Filterset;for(r in this.filters)o.filters[r]=this.filters[r];for(;r=e.shift();)o.add(r);return o}},{key:"addable",value:function(t){var e=t.key.toString(),r=t.val.toString();switch(r.match(/^[0-9]+(\.[0-9]*)?_match/)&&(r=parseFloat(r)),t.op){case"=":return void 0!==this.filters[e+"="]?this.filters[e+"="].val.toString()==r&&null:void 0===this.filters[e+"!="+r]&&(!(void 0!==this.filters[e+">"]&&this.filters[e+">"].val>=r)&&(!(void 0!==this.filters[e+"<"]&&this.filters[e+"<"].val<=r)&&(!(void 0!==this.filters[e+">="]&&this.filters[e+">="].val>r)&&!(void 0!==this.filters[e+"<="]&&this.filters[e+"<="].val<r))));case"=~":return!0;case"!=":return void 0!==this.filters[e+"="]?this.filters[e+"="].val!==r&&null:void 0!==this.filters[e+"!="+r]?null:void 0!==this.filters[e+">"]&&this.filters[e+">"].val>=r?null:void 0!==this.filters[e+"<"]&&this.filters[e+"<"].val<=r?null:void 0!==this.filters[e+">="]&&this.filters[e+">="].val>r?null:!(void 0!==this.filters[e+"<="]&&this.filters[e+"<="].val<r)||null;case">":return e+"="in this.filters?!(this.filters[e+"="].val<=r)&&null:!(void 0!==this.filters[e+"<"]&&this.filters[e+"<"].val<=r)&&(!(void 0!==this.filters[e+"<="]&&this.filters[e+"<="].val<=r)&&(void 0!==this.filters[e+">"]&&this.filters[e+">"].val>=r?null:!(void 0!==this.filters[e+">="]&&this.filters[e+">="].val>r)||null));case">=":return void 0!==this.filters[e+"="]?!(this.filters[e+"="].val<r)&&null:!(void 0!==this.filters[e+"<"]&&this.filters[e+"<"].val<=r)&&(!(void 0!==this.filters[e+"<="]&&this.filters[e+"<="].val<r)&&(void 0!==this.filters[e+">"]&&this.filters[e+">"].val>=r?null:!(void 0!==this.filters[e+">="]&&this.filters[e+">="].val>=r)||null));case"<":return void 0!==this.filters[e+"="]?!(this.filters[e+"="].val>=r)&&null:!(void 0!==this.filters[e+">"]&&this.filters[e+">"].val>=r)&&(!(void 0!==this.filters[e+">="]&&this.filters[e+">="].val>=r)&&(void 0!==this.filters[e+"<"]&&this.filters[e+"<"].val<=r?null:!(void 0!==this.filters[e+"<="]&&this.filters[e+"<="].val<r)||null));case"<=":return void 0!==this.filters[e+"="]?!(this.filters[e+"="].val>r)&&null:!(void 0!==this.filters[e+">"]&&this.filters[e+">"].val>=r)&&(!(void 0!==this.filters[e+">="]&&this.filters[e+">="].val>r)&&(void 0!==this.filters[e+"<"]&&this.filters[e+"<"].val<=r?null:!(void 0!==this.filters[e+"<="]&&this.filters[e+"<="].val<=r)||null))}}},{key:"conflict",value:function(t){var e=t.key.toString(),r=t.val.toString();return isNaN(parseFloat(r))||(r=parseFloat(r)),("="===t.op&&void 0!==this.filters[e+"="]&&r!=this.filters[e+"="].val.toString()||"!="===t.op&&void 0!==this.filters[e+"="]&&r==this.filters[e+"="].val.toString()||"="===t.op&&void 0!==this.filters[e+"!="]&&r===this.filters[e+"!="].val.toString())&&t.toString()+" added to "+this.toString()+" produces an invalid filter"}},{key:"add",value:function(t,e){var r,n=t.key.toString(),o=t.op,i=this.conflict(t);if(i)return i;if("="===o){for(var a in this.filters)this.filters[a].key===n&&delete this.filters[a];this.filters[n+"="]=t}else if("!="===o)this.filters[n+"!="+t.val]=t;else if("=~"===o)this.filters[n+"=~"+t.val]=t;else if(">"===o){for(var s in this.filters)this.filters[s].key===n&&this.filters[s].val<=t.val&&delete this.filters[s];this.filters[n+">"]=t}else if(">="===o){for(var u in this.filters)r=+this.filters[u].val.toString(),this.filters[u].key===n&&r<t.val&&delete this.filters[u];void 0!==this.filters[n+"!="+t.val]?(delete this.filters[n+"!="+t.val],t.op=">",this.filters[n+">"]=t):this.filters[n+">="]=t}else if("<"===o){for(var l in this.filters)r=+this.filters[l].val.toString(),this.filters[l].key===n&&r>=t.val&&delete this.filters[l];this.filters[n+"<"]=t}else if("<="===o){for(var c in this.filters)r=+this.filters[c].val.toString(),this.filters[c].key===n&&r>t.val&&delete this.filters[c];void 0!==this.filters[n+"!="+t.val]?(delete this.filters[n+"!="+t.val],t.op="<",this.filters[n+"<"]=t):this.filters[n+"<="]=t}}}]),t}(),I0.Tree.Fontset=x0(function t(e,r){j0(this,t),this.fonts=r,this.name="fontset-"+e.effects.length}),I0.Tree.Invalid=function(){function t(e,r,n){j0(this,t),this.is="invalid",this.chunk=e,this.index=r,this.type="syntax",this.message=n||"Invalid code: "+this.chunk}return x0(t,[{key:"ev",value:function(t){return t.error({chunk:this.chunk,index:this.index,type:"syntax",message:this.message||"Invalid code: "+this.chunk}),{is:"undefined"}}}]),t}(),I0.Tree.Keyword=function(){function t(e){j0(this,t),this.value=e;var r={transparent:"color",true:"boolean",false:"boolean"};this.is=r[e]?r[e]:"keyword"}return x0(t,[{key:"ev",value:function(){return this}},{key:"toString",value:function(){return this.value}}]),t}(),I0.Tree.Literal=function(){function t(e){j0(this,t),this.value=e||"",this.is="field"}return x0(t,[{key:"toString",value:function(){return this.value}},{key:"ev",value:function(){return this}}]),t}(),I0.Tree.Operation=function(){function t(e,r,n){j0(this,t),this.is="operation",this.op=e.trim(),this.operands=r,this.index=n}return x0(t,[{key:"ev",value:function(t){var e,r=this.operands[0].ev(t),n=this.operands[1].ev(t);return"undefined"===r.is||"undefined"===n.is?{is:"undefined",value:"undefined"}:(r instanceof I0.Tree.Dimension&&n instanceof I0.Tree.Color&&("*"===this.op||"+"===this.op?(e=n,n=r,r=e):t.error({name:"OperationError",message:"Can't substract or divide a color from a number",index:this.index})),r instanceof I0.Tree.Quoted&&n instanceof I0.Tree.Quoted&&"+"!==this.op?(t.error({message:"Can't subtract, divide, or multiply strings.",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):r instanceof I0.Tree.Field||n instanceof I0.Tree.Field||r instanceof I0.Tree.Literal||n instanceof I0.Tree.Literal?"color"===r.is||"color"===n.is?(t.error({message:"Can't subtract, divide, or multiply colors in expressions.",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):new I0.Tree.Literal(r.ev(t).toString(!0)+this.op+n.ev(t).toString(!0)):void 0===r.operate?(t.error({message:"Cannot do math with type "+r.is+".",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):r.operate(t,this.op,n))}}]),t}(),I0.Tree.Quoted=function(){function t(e){j0(this,t),this.is="string",this.value=e||""}return x0(t,[{key:"toString",value:function(t){var e=this.value.replace(/&/g,"&amp;"),r=e.replace(/\'/g,"\\'").replace(/\"/g,"&quot;").replace(/</g,"&lt;").replace(/\>/g,"&gt;");return!0===t?"'"+r+"'":e}},{key:"ev",value:function(){return this}},{key:"operate",value:function(t,e,r){return new I0.Tree.Quoted(I0.Tree.operate(e,this.toString(),r.toString(this.contains_field)))}}]),t}(),I0.Tree.Reference={_validateValue:{font:function(t,e){return!t.validation_data||!t.validation_data.fonts||-1!=t.validation_data.fonts.indexOf(e)}},setData:function(t){this.data=t,this.selector_cache=function(t){var e={};for(var r in t.symbolizers)for(var n in t.symbolizers[r])t.symbolizers[r][n].hasOwnProperty("css")&&(e[t.symbolizers[r][n].css]=[t.symbolizers[r][n],r,n]);return e}(t),this.mapnikFunctions=function(t){var e={};for(var r in t.symbolizers)for(var n in t.symbolizers[r])if("functions"===t.symbolizers[r][n].type)for(var o=0;o<t.symbolizers[r][n].functions.length;o++){var i=t.symbolizers[r][n].functions[o];e[i[0]]=i[1]}return e}(t),this.required_cache=function(t){var e={};for(var r in t.symbolizers)for(var n in e[r]=[],t.symbolizers[r])t.symbolizers[r][n].required&&e[r].push(t.symbolizers[r][n].css);return e}(t)},setVersion:function(t){return!!I0.mapnik_reference.version.hasOwnProperty(t)&&(this.setData(I0.mapnik_reference.version[t]),!0)},selectorData:function(t,e){if(this.selector_cache&&this.selector_cache[t])return this.selector_cache[t][e]},validSelector:function(t){return!!this.selector_cache[t]},selectorName:function(t){return this.selectorData(t,2)},selector:function(t){return this.selectorData(t,0)},symbolizer:function(t){return this.selectorData(t,1)},requiredProperties:function(t,e){var r=this.required_cache[t];for(var n in r)if(!(r[n]in e))return"Property "+r[n]+" required for defining "+t+" styles."},isFont:function(t){return"font"===this.selector(t).validate},editDistance:function(t,e){if(0===t.length)return e.length;if(0===e.length)return t.length;for(var r=[],n=0;n<=e.length;n++)r[n]=[n];for(var o=0;o<=t.length;o++)r[0][o]=o;for(n=1;n<=e.length;n++)for(o=1;o<=t.length;o++)e.charAt(n-1)===t.charAt(o-1)?r[n][o]=r[n-1][o-1]:r[n][o]=Math.min(r[n-1][o-1]+1,Math.min(r[n][o-1]+1,r[n-1][o]+1));return r[e.length][t.length]},validValue:function(t,e,r){var n;if(this.selector(e)){if("keyword"===r.value[0].is)return function(t,e){return"object"===T0(this.selector(e).type)?-1!==this.selector(e).type.indexOf(t.value[0].value):"string"===this.selector(e).type}(r,e);if("undefined"===r.value[0].is)return!0;if("numbers"===this.selector(e).type){for(n in r.value)if("float"!==r.value[n].is)return!1;return!0}if("tags"===this.selector(e).type){if(!r.value)return!1;if(!r.value[0].value)return"tag"===r.value[0].is;for(n=0;n<r.value[0].value.length;n++)if("tag"!==r.value[0].value[n].is)return!1;return!0}if("functions"==this.selector(e).type)return function(t,e){if("string"===t.value[0].is)return!0;for(var r in t.value)for(var n in t.value[r].value){if("call"!==t.value[r].value[n].is)return!1;var o=find(this.selector(e).functions,function(e){return e[0]===t.value[r].value[n].name});if(!(o&&-1===o[1]||o&&o[1]===t.value[r].value[n].args.length))return!1}return!0}(r,e);if("expression"===this.selector(e).type)return!0;if("unsigned"===this.selector(e).type)return"float"===r.value[0].is&&(r.value[0].round(),!0);if(this.selector(e).validate){for(n=0;n<r.value.length;n++)if(this.selector(e).type===r.value[n].is&&this._validateValue[this.selector(e).validate](t,r.value[n].value))return!0;return!1}return this.selector(e).type===r.value[0].is}return!1}},I0.Tree.Reference.setVersion("latest"),I0.Tree.Rule=function(){function t(e,r,n,o){j0(this,t),this.is="rule";var i=e.split("/");this.name=i.pop(),this.instance=i.length?i[0]:"__default__",this.value=r instanceof I0.Tree.Value?r:new I0.Tree.Value([r]),this.index=n,this.symbolizer=I0.Tree.Reference.symbolizer(this.name),this.filename=o,this.variable="@"===e.charAt(0)}return x0(t,[{key:"clone",value:function(){var t=Object.create(I0.Tree.Rule.prototype);return t.name=this.name,t.value=this.value,t.index=this.index,t.instance=this.instance,t.symbolizer=this.symbolizer,t.filename=this.filename,t.variable=this.variable,t}},{key:"updateID",value:function(){return this.id=this.zoom+"#"+this.instance+"#"+this.name}},{key:"toString",value:function(){return"["+I0.Tree.Zoom.toString(this.zoom)+"] "+this.name+": "+this.value}},{key:"ev",value:function(t){return new I0.Tree.Rule(this.name,this.value.ev(t),this.index,this.filename)}}]),t}(),I0.Tree.Ruleset=function(){function t(e,r){j0(this,t),this.is="ruleset",this.selectors=e,this.rules=r,this._lookups={}}return x0(t,[{key:"ev",value:function(t){var e,r,n=new I0.Tree.Ruleset(this.selectors,this.rules.slice(0));for(n.root=this.root,t.frames.unshift(n),e=0;e<n.rules.length;e++)r=n.rules[e],n.rules[e]=r.ev?r.ev(t):r;return t.frames.shift(),n}},{key:"match",value:function(t){return!t||0===t.length}},{key:"variables",value:function(){return this._variables?this._variables:this._variables=this.rules.reduce(function(t,e){return e instanceof I0.Tree.Rule&&!0===e.variable&&(t[e.name]=e),t},{})}},{key:"variable",value:function(t){return this.variables()[t]}},{key:"rulesets",value:function(){return this._rulesets?this._rulesets:this._rulesets=this.rules.filter(function(t){return t instanceof I0.Tree.Ruleset})}},{key:"find",value:function(t,e){e=e||this;var r=[],n=t.toString();return n in this._lookups?this._lookups[n]:(this.rulesets().forEach(function(n){if(n!==e)for(var o=0;o<n.selectors.length;o++)if(t.match(n.selectors[o])){t.elements.length>1?Array.prototype.push.apply(r,n.find(new I0.Tree.Selector(null,null,t.elements.slice(1)),e)):r.push(n);break}}),this._lookups[n]=r)}},{key:"evZooms",value:function(t){for(var e=0;e<this.selectors.length;e++){for(var r=I0.Tree.Zoom.all,n=0;n<this.selectors[e].zoom.length;n++)r=this.selectors[e].zoom[n].ev(t).zoom;this.selectors[e].zoom=r}}},{key:"flatten",value:function(t,e,r){var n,o,i=[];for(0===this.selectors.length&&(r.frames=r.frames.concat(this.rules)),this.evZooms(r),n=0;n<this.selectors.length;n++){var a=this.selectors[n];if(a.filters)if(e.length)for(o=0;o<e.length;o++){var s=e[o],u=s.filters.cloneWith(a.filters);if(null===u){if(s.zoom===a.zoom&&s.attachment===a.attachment&&s.elements.join()===a.elements.join()){i.push(s);continue}u=s.filters}else if(!u)continue;var l=Object.create(I0.Tree.Selector.prototype);l.filters=u,l.zoom=a.zoom,l.elements=s.elements.concat(a.elements),s.attachment&&a.attachment?l.attachment=s.attachment+"/"+a.attachment:l.attachment=a.attachment||s.attachment,l.conditions=s.conditions+a.conditions,l.index=a.index,i.push(l)}else i.push(a)}var c=[];for(n=0;n<this.rules.length;n++){var f=this.rules[n];f instanceof I0.Tree.Ruleset?f.flatten(t,i,r):f instanceof I0.Tree.Rule?c.push(f):f instanceof I0.Tree.Invalid&&r.error(f)}var p=!!c.length&&c[0].index;for(n=0;n<i.length;n++)!1!==p&&(i[n].index=p),t.push(new I0.Tree.Definition(i[n],c.slice()));return t}}]),t}(),I0.Tree.Selector=function(){function t(e,r,n,o,i,a){j0(this,t),this.elements=n||[],this.attachment=o,this.filters=e||{},this.zoom=void 0!==r?r:I0.Tree.Zoom.all,this.conditions=i,this.index=a}return x0(t,[{key:"specificity",value:function(){return this.elements.reduce(function(t,e){var r=e.specificity();return t[0]+=r[0],t[1]+=r[1],t},[0,0,this.conditions,this.index])}}]),t}(),I0.Tree.URL=function(){function t(e,r){j0(this,t),this.is="uri",this.value=e,this.paths=r}return x0(t,[{key:"toString",value:function(){return this.value.toString()}},{key:"ev",value:function(t){return new I0.Tree.URL(this.value.ev(t),this.paths)}}]),t}(),I0.Tree.Value=function(){function t(e){j0(this,t),this.is="value",this.value=e}return x0(t,[{key:"ev",value:function(t){return 1===this.value.length?this.value[0].ev(t):new I0.Tree.Value(this.value.map(function(e){return e.ev(t)}))}},{key:"toJS",value:function(t){var e=this.ev(t),r=e.toString();return"color"===e.is||"uri"===e.is||"string"===e.is||"keyword"===e.is?r="'"+r+"'":"field"===e.is?r=r.replace(/\[(.*)\]/g,"attributes['_match1']"):e.value&&"object"===T0(e.value)&&(r="["+r+"]"),"_value = "+r+";"}},{key:"toString",value:function(t,e,r,n){return this.value.map(function(e){return e.toString(t,n)}).join(r||", ")}},{key:"clone",value:function(){var t=Object.create(I0.Tree.Value.prototype);return Array.isArray(t)?t.value=this.value.slice():t.value=this.value,t.is=this.is,t}}]),t}(),I0.Tree.Variable=function(){function t(e,r,n){j0(this,t),this.is="variable",this.name=e,this.index=r,this.filename=n}return x0(t,[{key:"toString",value:function(){return this.name}},{key:"ev",value:function(t){if(this._css)return this._css;var e=t.frames.filter(function(t){return t.name===this.name}.bind(this));return e.length?e[0].value.ev(t):(t.error({message:"variable "+this.name+" is undefined",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"})}}]),t}(),I0.Tree.Zoom=function(){function t(e,r,n){j0(this,t),this.op=e,this.value=r,this.index=n}return x0(t,[{key:"setZoom",value:function(t){return this.zoom=t,this}},{key:"ev",value:function(t){var e=parseInt(this.value.ev(t).toString(),10);switch((e>I0.Tree.Zoom.maxZoom||e<0)&&t.error({message:"Only zoom levels between 0 and "+I0.Tree.Zoom.maxZoom+" supported.",index:this.index}),this.op){case"=":return this.zoom="zoom && zoom === "+e,this;case">":this.zoom="zoom && zoom > "+e;break;case">=":this.zoom="zoom && zoom >= "+e;break;case"<":this.zoom="zoom && zoom < "+e;break;case"<=":this.zoom="zoom && zoom <= "+e}return this}},{key:"toString",value:function(){for(var t="",e=0;e<=I0.Tree.Zoom.maxZoom;e++)t+=this.zoom&1<<e?"X":".";return t}}]),t}(),I0.Tree.Zoom.all=23,I0.Tree.Zoom.maxZoom=22,I0.Tree.Zoom.ranges={0:1e9,1:5e8,2:2e8,3:1e8,4:5e7,5:25e6,6:125e5,7:65e5,8:3e6,9:15e5,10:75e4,11:4e5,12:2e5,13:1e5,14:5e4,15:25e3,16:12500,17:5e3,18:2500,19:1500,20:750,21:500,22:250,23:100};var B0=function(t,e,r){return e&&M0(t.prototype,e),r&&M0(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.fill=!0,this.fillColor="#000000",this.fillOpacity=1,this.stroke=!1,this.strokeColor="#000000",this.strokeOpacity=1,this.strokeWidth=1,this.strokeLinecap="butt",this.strokeLineJoin="miter",this.strokeDashstyle="solid",this.pointRadius=6,this.shadowBlur=0,this.shadowColor="#000000",this.shadowOffsetX=0,this.shadowOffsetY=0,this.label="",this.labelRect=!1,this.fontColor="",this.fontSize=12,this.fontStyle="normal",this.fontVariant="normal",this.fontWeight="normal",this.fontFamily="arial,sans-serif",this.labelPosition="top",this.labelAlign="center",this.labelBaseline="middle",this.labelXOffset=0,this.labelYOffset=0,V.extend(this,e)});function D0(t){"@babel/helpers - typeof";return(D0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function F0(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,U0(n.key),n)}}function U0(t){var e=function(t,e){if("object"!=D0(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=D0(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==D0(e)?e:String(e)}var G0=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.refOriginalPosition=[0,0],this.refDataID=null,this.isHoverByRefDataID=!1,this.refDataHoverGroup=null,this.dataInfo=null,this.clickable=!0,this.hoverable=!0,this.style=null,this.highlightStyle={},this.CLASS_NAME="SuperMap.Feature.ShapeParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.refOriginalPosition=null,this.refDataID=null,this.isHoverByRefDataID=null,this.refDataHoverGroup=null,this.dataInfo=null,this.clickable=null,this.hoverable=null,this.style=null,this.highlightStyle=null}}])&&F0(e.prototype,r),n&&F0(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function V0(t){"@babel/helpers - typeof";return(V0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function q0(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,H0(n.key),n)}}function H0(t){var e=function(t,e){if("object"!=V0(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=V0(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==V0(e)?e:String(e)}function z0(t,e,r){return e=W0(e),function(t,e){if(e&&("object"===V0(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],W0(t).constructor):e.apply(t,r))}function J0(){return(J0="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=W0(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function W0(t){return(W0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function K0(t,e){return(K0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Q0=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=z0(this,e,[t,r])).x=isNaN(t)?0:t,n.y=isNaN(r)?0:r,n.r=6,n.CLASS_NAME="SuperMap.Feature.ShapeParameters.Point",n}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&K0(t,e)}(e,G0),r=e,(n=[{key:"destroy",value:function(){this.x=null,this.y=null,this.r=null,J0(W0(e.prototype),"destroy",this).call(this)}}])&&q0(r.prototype,n),o&&q0(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function Y0(t){"@babel/helpers - typeof";return(Y0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function X0(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Z0(n.key),n)}}function Z0(t){var e=function(t,e){if("object"!=Y0(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Y0(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Y0(e)?e:String(e)}function $0(t,e,r){return e=e1(e),function(t,e){if(e&&("object"===Y0(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],e1(t).constructor):e.apply(t,r))}function t1(){return(t1="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=e1(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function e1(t){return(e1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function r1(t,e){return(r1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var n1=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=$0(this,e,[t])).pointList=t,r.CLASS_NAME="SuperMap.Feature.ShapeParameters.Line",r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&r1(t,e)}(e,G0),r=e,(n=[{key:"destroy",value:function(){this.pointList=null,t1(e1(e.prototype),"destroy",this).call(this)}}])&&X0(r.prototype,n),o&&X0(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function o1(t){"@babel/helpers - typeof";return(o1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i1(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,a1(n.key),n)}}function a1(t){var e=function(t,e){if("object"!=o1(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=o1(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o1(e)?e:String(e)}function s1(t,e,r){return e=l1(e),function(t,e){if(e&&("object"===o1(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],l1(t).constructor):e.apply(t,r))}function u1(){return(u1="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l1(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function l1(t){return(l1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c1(t,e){return(c1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var f1=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=s1(this,e,[t])).pointList=t,r.holePolygonPointLists=null,r.CLASS_NAME="SuperMap.Feature.ShapeParameters.Polygon",r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c1(t,e)}(e,G0),r=e,(n=[{key:"destroy",value:function(){this.pointList=null,this.holePolygonPointLists=null,u1(l1(e.prototype),"destroy",this).call(this)}}])&&i1(r.prototype,n),o&&i1(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function p1(t){"@babel/helpers - typeof";return(p1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h1(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,y1(n.key),n)}}function y1(t){var e=function(t,e){if("object"!=p1(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=p1(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==p1(e)?e:String(e)}function d1(t,e,r){return e=v1(e),function(t,e){if(e&&("object"===p1(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],v1(t).constructor):e.apply(t,r))}function b1(){return(b1="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=v1(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function v1(t){return(v1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function m1(t,e){return(m1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var g1=function(t){function e(t,r,n,o){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=d1(this,e,[t,r,n,o])).x=isNaN(t)?0:t,i.y=isNaN(t)?0:r,i.width=isNaN(n)?0:n,i.height=isNaN(o)?0:o,i.CLASS_NAME="SuperMap.Feature.ShapeParameters.Rectangle",i}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&m1(t,e)}(e,G0),r=e,(n=[{key:"destroy",value:function(){this.x=null,this.y=null,this.width=null,this.height=null,b1(v1(e.prototype),"destroy",this).call(this)}}])&&h1(r.prototype,n),o&&h1(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function S1(t){"@babel/helpers - typeof";return(S1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function w1(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,O1(n.key),n)}}function O1(t){var e=function(t,e){if("object"!=S1(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=S1(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==S1(e)?e:String(e)}function _1(t,e,r){return e=E1(e),function(t,e){if(e&&("object"===S1(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],E1(t).constructor):e.apply(t,r))}function P1(){return(P1="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=E1(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function E1(t){return(E1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function C1(t,e){return(C1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var T1=function(t){function e(t,r,n,o,i,a,s){var u;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(u=_1(this,e,[t,r,n,o,i,a,s])).x=isNaN(t)?0:t,u.y=isNaN(r)?0:r,u.r=isNaN(n)?0:n,u.startAngle=isNaN(o)?0:o,u.endAngle=isNaN(i)?0:i,u.r0=isNaN(a)?0:a,u.clockWise=s,u.CLASS_NAME="SuperMap.Feature.ShapeParameters.Sector",u}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&C1(t,e)}(e,G0),r=e,(n=[{key:"destroy",value:function(){this.x=null,this.y=null,this.r=null,this.startAngle=null,this.endAngle=null,this.r0=null,this.clockWise=null,P1(E1(e.prototype),"destroy",this).call(this)}}])&&w1(r.prototype,n),o&&w1(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function j1(t){"@babel/helpers - typeof";return(j1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function k1(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,x1(n.key),n)}}function x1(t){var e=function(t,e){if("object"!=j1(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=j1(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==j1(e)?e:String(e)}function A1(t,e,r){return e=N1(e),function(t,e){if(e&&("object"===j1(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],N1(t).constructor):e.apply(t,r))}function I1(){return(I1="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=N1(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function N1(t){return(N1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function R1(t,e){return(R1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var M1=function(t){function e(t,r,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=A1(this,e,[t,r,n])).x=t,o.y=r,o.text=n,o.CLASS_NAME="SuperMap.Feature.ShapeParameters.Label",o}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&R1(t,e)}(e,G0),r=e,(n=[{key:"destroy",value:function(){this.x=null,this.y=null,this.text=null,I1(N1(e.prototype),"destroy",this).call(this)}}])&&k1(r.prototype,n),o&&k1(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function L1(t){"@babel/helpers - typeof";return(L1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function B1(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,D1(n.key),n)}}function D1(t){var e=function(t,e){if("object"!=L1(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=L1(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==L1(e)?e:String(e)}function F1(t,e,r){return e=G1(e),function(t,e){if(e&&("object"===L1(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],G1(t).constructor):e.apply(t,r))}function U1(){return(U1="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=G1(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function G1(t){return(G1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function V1(t,e){return(V1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var q1=function(t){function e(t,r,n,o,i,a,s,u,l){var c;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(c=F1(this,e,[t,r,n,o,i,a,s,u,l])).x=t,c.y=r,c.image=n,c.width=o,c.height=i,c.sx=a,c.sy=s,c.sWidth=u,c.sHeight=l,c.CLASS_NAME="SuperMap.Feature.ShapeParameters.Image",c}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&V1(t,e)}(e,G0),r=e,(n=[{key:"destroy",value:function(){this.x=null,this.y=null,this.image=null,this.width=null,this.height=null,this.sx=null,this.sy=null,this.sWidth=null,this.sHeight=null,U1(G1(e.prototype),"destroy",this).call(this)}}])&&B1(r.prototype,n),o&&B1(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function H1(t){"@babel/helpers - typeof";return(H1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function z1(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,J1(n.key),n)}}function J1(t){var e=function(t,e){if("object"!=H1(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=H1(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==H1(e)?e:String(e)}function W1(t,e,r){return e=Q1(e),function(t,e){if(e&&("object"===H1(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Q1(t).constructor):e.apply(t,r))}function K1(){return(K1="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Q1(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Q1(t){return(Q1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Y1(t,e){return(Y1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var X1=function(t){function e(t,r,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=W1(this,e,[t,r,n])).x=isNaN(t)?0:t,o.y=isNaN(r)?0:r,o.r=isNaN(n)?0:n,o.CLASS_NAME="SuperMap.Feature.ShapeParameters.Circle",o}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Y1(t,e)}(e,G0),r=e,(n=[{key:"destroy",value:function(){this.x=null,this.y=null,this.r=null,K1(Q1(e.prototype),"destroy",this).call(this)}}])&&z1(r.prototype,n),o&&z1(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function Z1(t){"@babel/helpers - typeof";return(Z1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $1(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,t2(n.key),n)}}function t2(t){var e=function(t,e){if("object"!=Z1(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Z1(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Z1(e)?e:String(e)}var e2=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._handlers={},this.CLASS_NAME="SuperMap.LevelRenderer.Eventful"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this._handlers=null}},{key:"one",value:function(t,e,r){var n=this._handlers;return e&&t?(n[t]||(n[t]=[]),n[t].push({h:e,one:!0,ctx:r||this}),this):this}},{key:"bind",value:function(t,e,r){var n=this._handlers;return e&&t?(n[t]||(n[t]=[]),n[t].push({h:e,one:!1,ctx:r||this}),this):this}},{key:"unbind",value:function(t,e){var r=this._handlers;if(!t)return this._handlers={},this;if(e){if(r[t]){for(var n=[],o=0,i=r[t].length;o<i;o++)r[t][o].h!=e&&n.push(r[t][o]);r[t]=n}r[t]&&0===r[t].length&&delete r[t]}else delete r[t];return this}},{key:"dispatch",value:function(t){if(this._handlers[t]){var e=arguments,r=e.length;r>3&&(e=Array.prototype.slice.call(e,1));for(var n=this._handlers[t],o=n.length,i=0;i<o;){switch(r){case 1:n[i].h.call(n[i].ctx);break;case 2:n[i].h.call(n[i].ctx,e[1]);break;case 3:n[i].h.call(n[i].ctx,e[1],e[2]);break;default:n[i].h.apply(n[i].ctx,e)}n[i].one?(n.splice(i,1),o--):i++}}return this}},{key:"dispatchWithContext",value:function(t){if(this._handlers[t]){var e=arguments,r=e.length;r>4&&(e=Array.prototype.slice.call(e,1,e.length-1));for(var n=e[e.length-1],o=this._handlers[t],i=o.length,a=0;a<i;){switch(r){case 1:o[a].h.call(n);break;case 2:o[a].h.call(n,e[1]);break;case 3:o[a].h.call(n,e[1],e[2]);break;default:o[a].h.apply(n,e)}o[a].one?(o.splice(a,1),i--):a++}}return this}}])&&$1(e.prototype,r),n&&$1(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function r2(t){"@babel/helpers - typeof";return(r2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n2(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,o2(n.key),n)}}function o2(t){var e=function(t,e){if("object"!=r2(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=r2(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==r2(e)?e:String(e)}var i2=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ArrayCtor="undefined"==typeof Float32Array?Array:Float32Array,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Vector"}var e,r,n;return e=t,(r=[{key:"create",value:function(t,e){var r=new(0,this.ArrayCtor)(2);return r[0]=t||0,r[1]=e||0,r}},{key:"copy",value:function(t,e){return t[0]=e[0],t[1]=e[1],t}},{key:"set",value:function(t,e,r){return t[0]=e,t[1]=r,t}},{key:"add",value:function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t}},{key:"scaleAndAdd",value:function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t}},{key:"sub",value:function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t}},{key:"len",value:function(t){return Math.sqrt(this.lenSquare(t))}},{key:"lenSquare",value:function(t){return t[0]*t[0]+t[1]*t[1]}},{key:"mul",value:function(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t}},{key:"div",value:function(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t}},{key:"dot",value:function(t,e){return t[0]*e[0]+t[1]*e[1]}},{key:"scale",value:function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t}},{key:"normalize",value:function(t,e){var r=this.len(e);return 0===r?(t[0]=0,t[1]=0):(t[0]=e[0]/r,t[1]=e[1]/r),t}},{key:"distance",value:function(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}},{key:"distanceSquare",value:function(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])}},{key:"negate",value:function(t,e){return t[0]=-e[0],t[1]=-e[1],t}},{key:"lerp",value:function(t,e,r,n){return t[0]=e[0]+n*(r[0]-e[0]),t[1]=e[1]+n*(r[1]-e[1]),t}},{key:"applyTransform",value:function(t,e,r){var n=e[0],o=e[1];return t[0]=r[0]*n+r[2]*o+r[4],t[1]=r[1]*n+r[3]*o+r[5],t}},{key:"min",value:function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t}},{key:"max",value:function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t}},{key:"length",value:function(t){return this.len(t)}},{key:"lengthSquare",value:function(t){return this.lenSquare(t)}},{key:"dist",value:function(t,e){return this.distance(t,e)}},{key:"distSquare",value:function(t,e){return this.distanceSquare(t,e)}}])&&n2(e.prototype,r),n&&n2(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function a2(t){"@babel/helpers - typeof";return(a2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s2(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,u2(n.key),n)}}function u2(t){var e=function(t,e){if("object"!=a2(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=a2(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==a2(e)?e:String(e)}var l2=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.vector=new i2,this.EPSILON=1e-4,this.THREE_SQRT=Math.sqrt(3),this.ONE_THIRD=1/3,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Curve"}var e,r,n;return e=t,(r=[{key:"isAroundZero",value:function(t){return t>-this.EPSILON&&t<this.EPSILON}},{key:"isNotAroundZero",value:function(t){return t>this.EPSILON||t<-this.EPSILON}},{key:"cubicAt",value:function(t,e,r,n,o){var i=1-o;return i*i*(i*t+3*o*e)+o*o*(o*n+3*i*r)}},{key:"cubicDerivativeAt",value:function(t,e,r,n,o){var i=1-o;return 3*(((e-t)*i+2*(r-e)*o)*i+(n-r)*o*o)}},{key:"cubicRootAt",value:function(t,e,r,n,o,i){var a=n+3*(e-r)-t,s=3*(r-2*e+t),u=3*(e-t),l=t-o,c=s*s-3*a*u,f=s*u-9*a*l,p=u*u-3*s*l,h=0;if(this.isAroundZero(c)&&this.isAroundZero(f))if(this.isAroundZero(s))i[0]=0;else{var y=-u/s;y>=0&&y<=1&&(i[h++]=y)}else{var d=f*f-4*c*p;if(this.isAroundZero(d)){var b=f/c,v=-s/a+b,m=-b/2;v>=0&&v<=1&&(i[h++]=v),m>=0&&m<=1&&(i[h++]=m)}else if(d>0){var g=Math.sqrt(d),S=c*s+1.5*a*(-f+g),w=c*s+1.5*a*(-f-g),O=(-s-((S=S<0?-Math.pow(-S,this.ONE_THIRD):Math.pow(S,this.ONE_THIRD))+(w=w<0?-Math.pow(-w,this.ONE_THIRD):Math.pow(w,this.ONE_THIRD))))/(3*a);O>=0&&O<=1&&(i[h++]=O)}else{var _=(2*c*s-3*a*f)/(2*Math.sqrt(c*c*c)),P=Math.acos(_)/3,E=Math.sqrt(c),C=Math.cos(P),T=(-s-2*E*C)/(3*a),j=(-s+E*(C+this.THREE_SQRT*Math.sin(P)))/(3*a),k=(-s+E*(C-this.THREE_SQRT*Math.sin(P)))/(3*a);T>=0&&T<=1&&(i[h++]=T),j>=0&&j<=1&&(i[h++]=j),k>=0&&k<=1&&(i[h++]=k)}}return h}},{key:"cubicExtrema",value:function(t,e,r,n,o){var i=6*r-12*e+6*t,a=9*e+3*n-3*t-9*r,s=3*e-3*t,u=0;if(this.isAroundZero(a)){if(this.isNotAroundZero(i)){var l=-s/i;l>=0&&l<=1&&(o[u++]=l)}}else{var c=i*i-4*a*s;if(this.isAroundZero(c))o[0]=-i/(2*a);else if(c>0){var f=Math.sqrt(c),p=(-i+f)/(2*a),h=(-i-f)/(2*a);p>=0&&p<=1&&(o[u++]=p),h>=0&&h<=1&&(o[u++]=h)}}return u}},{key:"cubicSubdivide",value:function(t,e,r,n,o,i){var a=(e-t)*o+t,s=(r-e)*o+e,u=(n-r)*o+r,l=(s-a)*o+a,c=(u-s)*o+s,f=(c-l)*o+l;i[0]=t,i[1]=a,i[2]=l,i[3]=f,i[4]=f,i[5]=c,i[6]=u,i[7]=n}},{key:"cubicProjectPoint",value:function(t,e,r,n,o,i,a,s,u,l,c){var f,p=this.vector.create(),h=this.vector.create(),y=this.vector.create(),d=.005,b=1/0;p[0]=u,p[1]=l;for(var v=0;v<1;v+=.05){h[0]=this.cubicAt(t,r,o,a,v),h[1]=this.cubicAt(e,n,i,s,v);var m=this.vector.distSquare(p,h);m<b&&(f=v,b=m)}b=1/0;for(var g=0;g<32&&!(d<this.EPSILON);g++){var S=f-d,w=f+d;h[0]=this.cubicAt(t,r,o,a,S),h[1]=this.cubicAt(e,n,i,s,S);var O=this.vector.distSquare(h,p);if(S>=0&&O<b)f=S,b=O;else{y[0]=this.cubicAt(t,r,o,a,w),y[1]=this.cubicAt(e,n,i,s,w);var _=this.vector.distSquare(y,p);w<=1&&_<b?(f=w,b=_):d*=.5}}return c&&(c[0]=this.cubicAt(t,r,o,a,f),c[1]=this.cubicAt(e,n,i,s,f)),Math.sqrt(b)}},{key:"quadraticAt",value:function(t,e,r,n){var o=1-n;return o*(o*t+2*n*e)+n*n*r}},{key:"quadraticDerivativeAt",value:function(t,e,r,n){return 2*((1-n)*(e-t)+n*(r-e))}},{key:"quadraticRootAt",value:function(t,e,r,n,o){var i=t-2*e+r,a=2*(e-t),s=t-n,u=0;if(this.isAroundZero(i)){if(this.isNotAroundZero(a)){var l=-s/a;l>=0&&l<=1&&(o[u++]=l)}}else{var c=a*a-4*i*s;if(this.isAroundZero(c)){var f=-a/(2*i);f>=0&&f<=1&&(o[u++]=f)}else if(c>0){var p=Math.sqrt(c),h=(-a+p)/(2*i),y=(-a-p)/(2*i);h>=0&&h<=1&&(o[u++]=h),y>=0&&y<=1&&(o[u++]=y)}}return u}},{key:"quadraticExtremum",value:function(t,e,r){var n=t+r-2*e;return 0===n?.5:(t-e)/n}},{key:"quadraticProjectPoint",value:function(t,e,r,n,o,i,a,s,u){var l,c=this.vector.create(),f=this.vector.create(),p=this.vector.create(),h=.005,y=1/0;c[0]=a,c[1]=s;for(var d=0;d<1;d+=.05){f[0]=this.quadraticAt(t,r,o,d),f[1]=this.quadraticAt(e,n,i,d);var b=this.vector.distSquare(c,f);b<y&&(l=d,y=b)}y=1/0;for(var v=0;v<32&&!(h<this.EPSILON);v++){var m=l-h,g=l+h;f[0]=this.quadraticAt(t,r,o,m),f[1]=this.quadraticAt(e,n,i,m);var S=this.vector.distSquare(f,c);if(m>=0&&S<y)l=m,y=S;else{p[0]=this.quadraticAt(t,r,o,g),p[1]=this.quadraticAt(e,n,i,g);var w=this.vector.distSquare(p,c);g<=1&&w<y?(l=g,y=w):h*=.5}}return u&&(u[0]=this.quadraticAt(t,r,o,l),u[1]=this.quadraticAt(e,n,i,l)),Math.sqrt(y)}}])&&s2(e.prototype,r),n&&s2(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function c2(t){"@babel/helpers - typeof";return(c2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f2(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,p2(n.key),n)}}function p2(t){var e=function(t,e){if("object"!=c2(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=c2(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==c2(e)?e:String(e)}var h2=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.util=new D$,this.curve=new l2,this._ctx=null,this._textWidthCache={},this._textHeightCache={},this._textWidthCacheCounter=0,this._textHeightCacheCounter=0,this.TEXT_CACHE_MAX=5e3,this.PI2=2*Math.PI,this.roots=[-1,-1,-1],this.extrema=[-1,-1],this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Area"}var e,r,n;return e=t,(r=[{key:"normalizeRadian",value:function(t){return(t%=this.PI2)<0&&(t+=this.PI2),t}},{key:"isInside",value:function(t,e,r,n){if(!e||!t)return!1;var o=t.type;this._ctx=this._ctx||this.util.getContext();var i=this._mathMethod(t,e,r,n);if(void 0!==i)return i;if(t.buildPath&&this._ctx.isPointInPath)return this._buildPathMethod(t,this._ctx,e,r,n);switch(o){case"ellipse":case"smicellipse":return!0;case"trochoid":var a="out"==e.location?e.r1+e.r2+e.d:e.r1-e.r2+e.d;return this.isInsideCircle(e,r,n,a);case"rose":return this.isInsideCircle(e,r,n,e.maxr);default:return!1}}},{key:"_mathMethod",value:function(t,e,r,n){switch(t.type){case"bezier-curve":return void 0===e.cpX2?this.isInsideQuadraticStroke(e.xStart,e.yStart,e.cpX1,e.cpY1,e.xEnd,e.yEnd,e.lineWidth,r,n):this.isInsideCubicStroke(e.xStart,e.yStart,e.cpX1,e.cpY1,e.cpX2,e.cpY2,e.xEnd,e.yEnd,e.lineWidth,r,n);case"line":return this.isInsideLine(e.xStart,e.yStart,e.xEnd,e.yEnd,e.lineWidth,r,n);case"broken-line":return this.isInsideBrokenLine(e.pointList,e.lineWidth,r,n);case"smicbroken-line":var o=r,i=n;return t.refOriginalPosition&&(o=r-t.refOriginalPosition[0],i=n-t.refOriginalPosition[1]),this.isInsideBrokenLine(e.pointList,e.lineWidth,o,i);case"ring":return this.isInsideRing(e.x,e.y,e.r0,e.r,r,n);case"smicring":var a=e.x,s=e.y;return t.refOriginalPosition&&(a=e.x+t.refOriginalPosition[0],s=e.y+t.refOriginalPosition[1]),this.isInsideRing(a,s,e.r0,e.r,r,n);case"circle":return this.isInsideCircle(e.x,e.y,e.r,r,n);case"smicpoint":var u=r,l=n;return t.refOriginalPosition&&(u=r-t.refOriginalPosition[0],l=n-t.refOriginalPosition[1]),this.isInsideCircle(e.x,e.y,e.r,u,l);case"sector":var c=e.startAngle*Math.PI/180,f=e.endAngle*Math.PI/180;return e.clockWise||(c=-c,f=-f),this.isInsideSector(e.x,e.y,e.r0,e.r,c,f,!e.clockWise,r,n);case"smicsector":var p=e.startAngle*Math.PI/180,h=e.endAngle*Math.PI/180;e.clockWise||(p=-p,h=-h);var y=e.x,d=e.y;return t.refOriginalPosition&&(y=e.x+t.refOriginalPosition[0],d=e.y+t.refOriginalPosition[1]),this.isInsideSector(y,d,e.r0,e.r,p,h,!e.clockWise,r,n);case"path":return this.isInsidePath(e.pathArray,Math.max(e.lineWidth,5),e.brushType,r,n);case"polygon":case"star":case"smicstar":case"isogon":case"smicisogon":return this.isInsidePolygon(e.pointList,r,n);case"smicpolygon":var b=r,v=n;if(t.refOriginalPosition&&(b=r-t.refOriginalPosition[0],v=n-t.refOriginalPosition[1]),t.holePolygonPointLists&&t.holePolygonPointLists.length>0){for(var m=this.isInsidePolygon(e.pointList,b,v),g=t.holePolygonPointLists,S=!1,w=0,O=g.length;w<O;w++){var _=g[w];!0===this.isInsidePolygon(_,b,v)&&(S=!0)}return!0===m&&!1===S}return this.isInsidePolygon(e.pointList,b,v);case"text":var P=e.__rect||t.getRect(e);return this.isInsideRect(P.x,P.y,P.width,P.height,r,n);case"smictext":var E=t.getTextBackground(e);return this.isInsidePolygon(E,r,n);case"rectangle":case"image":return this.isInsideRect(e.x,e.y,e.width,e.height,r,n);case"smicimage":var C=e.x,T=e.y;return t.refOriginalPosition&&(C=e.x+t.refOriginalPosition[0],T=e.y+t.refOriginalPosition[1]),this.isInsideRect(C,T,e.width,e.height,r,n)}}},{key:"_buildPathMethod",value:function(t,e,r,n,o){return e.beginPath(),t.buildPath(e,r),e.closePath(),e.isPointInPath(n,o)}},{key:"isOutside",value:function(t,e,r,n){return!this.isInside(t,e,r,n)}},{key:"isInsideLine",value:function(t,e,r,n,o,i,a){if(0===o)return!1;var s=Math.max(o,5),u=0;if(a>e+s&&a>n+s||a<e-s&&a<n-s||i>t+s&&i>r+s||i<t-s&&i<r-s)return!1;if(t===r)return Math.abs(i-t)<=s/2;var l=(u=(e-n)/(t-r))*i-a+(t*n-r*e)/(t-r);return l*l/(u*u+1)<=s/2*s/2}},{key:"isInsideCubicStroke",value:function(t,e,r,n,o,i,a,s,u,l,c){if(0===u)return!1;var f=Math.max(u,5);return!(c>e+f&&c>n+f&&c>i+f&&c>s+f||c<e-f&&c<n-f&&c<i-f&&c<s-f||l>t+f&&l>r+f&&l>o+f&&l>a+f||l<t-f&&l<r-f&&l<o-f&&l<a-f)&&this.curve.cubicProjectPoint(t,e,r,n,o,i,a,s,l,c,null)<=f/2}},{key:"isInsideQuadraticStroke",value:function(t,e,r,n,o,i,a,s,u){if(0===a)return!1;var l=Math.max(a,5);return!(u>e+l&&u>n+l&&u>i+l||u<e-l&&u<n-l&&u<i-l||s>t+l&&s>r+l&&s>o+l||s<t-l&&s<r-l&&s<o-l)&&this.curve.quadraticProjectPoint(t,e,r,n,o,i,s,u,null)<=l/2}},{key:"isInsideArcStroke",value:function(t,e,r,n,o,i,a,s,u){var l=this.PI2;if(0===a)return!1;var c=Math.max(a,5);s-=t,u-=e;var f=Math.sqrt(s*s+u*u);if(f-c>r||f+c<r)return!1;if(Math.abs(n-o)>=l)return!0;if(i){var p=n;n=this.normalizeRadian(o),o=this.normalizeRadian(p)}else n=this.normalizeRadian(n),o=this.normalizeRadian(o);n>o&&(o+=l);var h=Math.atan2(u,s);return h<0&&(h+=l),h>=n&&h<=o||h+l>=n&&h+l<=o}},{key:"isInsideBrokenLine",value:function(t,e,r,n){for(var o=Math.max(e,10),i=0,a=t.length-1;i<a;i++){var s=t[i][0],u=t[i][1],l=t[i+1][0],c=t[i+1][1];if(this.isInsideLine(s,u,l,c,o,r,n))return!0}return!1}},{key:"isInsideRing",value:function(t,e,r,n,o,i){var a=(o-t)*(o-t)+(i-e)*(i-e);return a<n*n&&a>r*r}},{key:"isInsideRect",value:function(t,e,r,n,o,i){return o>=t&&o<=t+r&&i>=e&&i<=e+n}},{key:"isInsideCircle",value:function(t,e,r,n,o){return(n-t)*(n-t)+(o-e)*(o-e)<r*r}},{key:"isInsideSector",value:function(t,e,r,n,o,i,a,s,u){return this.isInsideArcStroke(t,e,(r+n)/2,o,i,a,n-r,s,u)}},{key:"isInsidePolygon",value:function(t,e,r){for(var n=t.length,o=0,i=0,a=n-1;i<n;i++){var s=t[a][0],u=t[a][1],l=t[i][0],c=t[i][1];o+=this.windingLine(s,u,l,c,e,r),a=i}return 0!==o}},{key:"windingLine",value:function(t,e,r,n,o,i){return i>e&&i>n||i<e&&i<n?0:n==e?0:(i-e)/(n-e)*(r-t)+t>o?n<e?1:-1:0}},{key:"swapExtrema",value:function(){var t=this.extrema[0];this.extrema[0]=this.extrema[1],this.extrema[1]=t}},{key:"windingCubic",value:function(t,e,r,n,o,i,a,s,u,l){var c=this.curve,f=this.roots,p=this.extrema;if(l>e&&l>n&&l>i&&l>s||l<e&&l<n&&l<i&&l<s)return 0;var h=c.cubicRootAt(e,n,i,s,l,f);if(0===h)return 0;for(var y,d,b=0,v=-1,m=0;m<h;m++){var g=f[m];c.cubicAt(t,r,o,a,g)<u||(v<0&&(v=c.cubicExtrema(e,n,i,s,p),p[1]<p[0]&&v>1&&this.swapExtrema(),y=c.cubicAt(e,n,i,s,p[0]),v>1&&(d=c.cubicAt(e,n,i,s,p[1]))),2==v?g<p[0]?b+=y<e?1:-1:g<p[1]?b+=d<y?1:-1:b+=s<d?1:-1:g<p[0]?b+=y<e?1:-1:b+=s<y?1:-1)}return b}},{key:"windingQuadratic",value:function(t,e,r,n,o,i,a,s){var u=this.curve,l=this.roots;if(s>e&&s>n&&s>i||s<e&&s<n&&s<i)return 0;var c=u.quadraticRootAt(e,n,i,s,l);if(0===c)return 0;var f=u.quadraticExtremum(e,n,i);if(f>=0&&f<=1){for(var p=0,h=u.quadraticAt(e,n,i,f),y=0;y<c;y++){u.quadraticAt(t,r,o,l[y])>a||(l[y]<f?p+=h<e?1:-1:p+=i<h?1:-1)}return p}return u.quadraticAt(t,r,o,l[0])>a?0:i<e?1:-1}},{key:"windingArc",value:function(t,e,r,n,o,i,a,s){var u=this.roots,l=this.PI2;if((s-=e)>r||s<-r)return 0;var c=Math.sqrt(r*r-s*s);if(u[0]=-c,u[1]=c,Math.abs(n-o)>=l){n=0,o=l;var f=i?1:-1;return a>=u[0]+t&&a<=u[1]+t?f:0}if(i){var p=n;n=this.normalizeRadian(o),o=this.normalizeRadian(p)}else n=this.normalizeRadian(n),o=this.normalizeRadian(o);n>o&&(o+=l);for(var h=0,y=0;y<2;y++){var d=u[y];if(d+t>a){var b=Math.atan2(s,d),v=i?1:-1;b<0&&(b=l+b),(b>=n&&b<=o||b+l>=n&&b+l<=o)&&(b>Math.PI/2&&b<1.5*Math.PI&&(v=-v),h+=v)}}return h}},{key:"isInsidePath",value:function(t,e,r,n,o){for(var i=0,a=0,s=0,u=0,l=0,c=!0,f=!0,p="stroke"===(r=r||"fill")||"both"===r,h="fill"===r||"both"===r,y=0;y<t.length;y++){var d=t[y],b=d.points;if(c||"M"===d.command){if(y>0&&(h&&(i+=this.windingLine(a,s,u,l,n,o)),0!==i))return!0;u=b[b.length-2],l=b[b.length-1],c=!1,f&&"A"!==d.command&&(f=!1,a=u,s=l)}switch(d.command){case"M":a=b[0],s=b[1];break;case"L":if(p&&this.isInsideLine(a,s,b[0],b[1],e,n,o))return!0;h&&(i+=this.windingLine(a,s,b[0],b[1],n,o)),a=b[0],s=b[1];break;case"C":if(p&&this.isInsideCubicStroke(a,s,b[0],b[1],b[2],b[3],b[4],b[5],e,n,o))return!0;h&&(i+=this.windingCubic(a,s,b[0],b[1],b[2],b[3],b[4],b[5],n,o)),a=b[4],s=b[5];break;case"Q":if(p&&this.isInsideQuadraticStroke(a,s,b[0],b[1],b[2],b[3],e,n,o))return!0;h&&(i+=this.windingQuadratic(a,s,b[0],b[1],b[2],b[3],n,o)),a=b[2],s=b[3];break;case"A":var v=b[0],m=b[1],g=b[2],S=b[3],w=b[4],O=b[5],_=Math.cos(w)*g+v,P=Math.sin(w)*S+m;f?(f=!1,u=_,l=P):i+=this.windingLine(a,s,_,P);var E=(n-v)*S/g+v;if(p&&this.isInsideArcStroke(v,m,S,w,w+O,1-b[7],e,E,o))return!0;h&&(i+=this.windingArc(v,m,S,w,w+O,1-b[7],E,o)),a=Math.cos(w+O)*g+v,s=Math.sin(w+O)*S+m;break;case"z":if(p&&this.isInsideLine(a,s,u,l,e,n,o))return!0;c=!0}}return h&&(i+=this.windingLine(a,s,u,l,n,o)),0!==i}},{key:"getTextWidth",value:function(t,e){var r=t+":"+e;if(this._textWidthCache[r])return this._textWidthCache[r];this._ctx=this._ctx||this.util.getContext(),this._ctx.save(),e&&(this._ctx.font=e);for(var n=0,o=0,i=(t=(t+"").split("\n")).length;o<i;o++)n=Math.max(this._ctx.measureText(t[o]).width,n);return this._ctx.restore(),this._textWidthCache[r]=n,++this._textWidthCacheCounter>this.TEXT_CACHE_MAX&&(this._textWidthCacheCounter=0,this._textWidthCache={}),n}},{key:"getTextHeight",value:function(t,e){var r=t+":"+e;if(this._textHeightCache[r])return this._textHeightCache[r];this._ctx=this._ctx||this.util.getContext(),this._ctx.save(),e&&(this._ctx.font=e),t=(t+"").split("\n");var n=(this._ctx.measureText("ZH").width+2)*t.length;return this._ctx.restore(),this._textHeightCache[r]=n,++this._textHeightCacheCounter>this.TEXT_CACHE_MAX&&(this._textHeightCacheCounter=0,this._textHeightCache={}),n}}])&&f2(e.prototype,r),n&&f2(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function y2(t){"@babel/helpers - typeof";return(y2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d2(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,b2(n.key),n)}}function b2(t){var e=function(t,e){if("object"!=y2(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=y2(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==y2(e)?e:String(e)}var v2=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),3===arguments.length&&this.computeBoundingBox(arguments),this.CLASS_NAME="SuperMap.LevelRenderer.Tool.ComputeBoundingBox"}var e,r,n;return e=t,(r=[{key:"computeBoundingBox",value:function(t,e,r){if(0!==t.length){for(var n=t[0][0],o=t[0][0],i=t[0][1],a=t[0][1],s=1;s<t.length;s++){var u=t[s];u[0]<n&&(n=u[0]),u[0]>o&&(o=u[0]),u[1]<i&&(i=u[1]),u[1]>a&&(a=u[1])}e[0]=n,e[1]=i,r[0]=o,r[1]=a}}},{key:"cubeBezier",value:function(t,e,r,n,o,i){var a=new l2,s=[];a.cubicExtrema(t[0],e[0],r[0],n[0],s);for(var u=0;u<s.length;u++)s[u]=a.cubicAt(t[0],e[0],r[0],n[0],s[u]);var l=[];a.cubicExtrema(t[1],e[1],r[1],n[1],l);for(var c=0;c<l.length;c++)l[c]=a.cubicAt(t[1],e[1],r[1],n[1],l[c]);s.push(t[0],n[0]),l.push(t[1],n[1]);var f=Math.min.apply(null,s),p=Math.max.apply(null,s),h=Math.min.apply(null,l),y=Math.max.apply(null,l);o[0]=f,o[1]=h,i[0]=p,i[1]=y}},{key:"quadraticBezier",value:function(t,e,r,n,o){var i=new l2,a=i.quadraticExtremum(t[0],e[0],r[0]),s=i.quadraticExtremum(t[1],e[1],r[1]),u=1-(a=Math.max(Math.min(a,1),0)),l=1-(s=Math.max(Math.min(s,1),0)),c=u*u*t[0]+2*u*a*e[0]+a*a*r[0],f=u*u*t[1]+2*u*a*e[1]+a*a*r[1],p=l*l*t[0]+2*l*s*e[0]+s*s*r[0],h=l*l*t[1]+2*l*s*e[1]+s*s*r[1];n[0]=Math.min(t[0],r[0],c,p),n[1]=Math.min(t[1],r[1],f,h),o[0]=Math.max(t[0],r[0],c,p),o[1]=Math.max(t[1],r[1],f,h)}},{key:"arc",value:function(t,e,r,n,o,i,a,s){var u=new i2,l=u.create(),c=u.create(),f=u.create();if(l[0]=Math.cos(n)*r+t,l[1]=Math.sin(n)*r+e,c[0]=Math.cos(o)*r+t,c[1]=Math.sin(o)*r+e,u.min(a,l,c),u.max(s,l,c),(n%=2*Math.PI)<0&&(n+=2*Math.PI),(o%=2*Math.PI)<0&&(o+=2*Math.PI),n>o&&!i?o+=2*Math.PI:n<o&&i&&(n+=2*Math.PI),i){var p=o;o=n,n=p}for(var h=0;h<o;h+=Math.PI/2)h>n&&(f[0]=Math.cos(h)*r+t,f[1]=Math.sin(h)*r+e,u.min(a,f,a),u.max(s,f,s))}}])&&d2(e.prototype,r),n&&d2(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function m2(t){"@babel/helpers - typeof";return(m2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g2(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,S2(n.key),n)}}function S2(t){var e=function(t,e){if("object"!=m2(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=m2(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==m2(e)?e:String(e)}var w2=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Env";var e,r,n,o,i,a,s,u,l,c,f,p,h,y,d,b,v,m,g,S,w,O=this;return e=navigator.userAgent,r=O.os={},n=O.browser={},o=e.match(/Web[kK]it[\/]{0,1}([\d.]+)/),i=e.match(/(Android);?[\s\/]+([\d.]+)?/),a=e.match(/(iPad).*OS\s([\d_]+)/),s=e.match(/(iPod)(.*OS\s([\d_]+))?/),u=!a&&e.match(/(iPhone\sOS)\s([\d_]+)/),l=e.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),c=l&&e.match(/TouchPad/),f=e.match(/Kindle\/([\d.]+)/),p=e.match(/Silk\/([\d._]+)/),h=e.match(/(BlackBerry).*Version\/([\d.]+)/),y=e.match(/(BB10).*Version\/([\d.]+)/),d=e.match(/(RIM\sTablet\sOS)\s([\d.]+)/),b=e.match(/PlayBook/),v=e.match(/Chrome\/([\d.]+)/)||e.match(/CriOS\/([\d.]+)/),m=e.match(/Firefox\/([\d.]+)/),g=e.match(/MSIE ([\d.]+)/),S=o&&e.match(/Mobile\//)&&!v,w=e.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/)&&!v,(n.webkit=!!o)&&(n.version=o[1]),i&&(r.android=!0,r.version=i[2]),u&&!s&&(r.ios=r.iphone=!0,r.version=u[2].replace(/_/g,".")),a&&(r.ios=r.ipad=!0,r.version=a[2].replace(/_/g,".")),s&&(r.ios=r.ipod=!0,r.version=s[3]?s[3].replace(/_/g,"."):null),l&&(r.webos=!0,r.version=l[2]),c&&(r.touchpad=!0),h&&(r.blackberry=!0,r.version=h[2]),y&&(r.bb10=!0,r.version=y[2]),d&&(r.rimtabletos=!0,r.version=d[2]),b&&(n.playbook=!0),f&&(r.kindle=!0,r.version=f[1]),p&&(n.silk=!0,n.version=p[1]),!p&&r.android&&e.match(/Kindle Fire/)&&(n.silk=!0),v&&(n.chrome=!0,n.version=v[1]),m&&(n.firefox=!0,n.version=m[1]),g&&(n.ie=!0,n.version=g[1]),S&&(e.match(/Safari/)||r.ios)&&(n.safari=!0),w&&(n.webview=!0),g&&(n.ie=!0,n.version=g[1]),r.tablet=!!(a||b||i&&!e.match(/Mobile/)||m&&e.match(/Tablet/)||g&&!e.match(/Phone/)&&e.match(/Touch/)),r.phone=!(r.tablet||r.ipod||!(i||u||l||h||y||v&&e.match(/Android/)||v&&e.match(/CriOS\/([\d.]+)/)||m&&e.match(/Mobile/)||g&&e.match(/Touch/))),{browser:n,os:r,canvasSupported:!!document.createElement("canvas").getContext}}var e,r,n;return e=t,(r=[{key:"destory",value:function(){return!0}}])&&g2(e.prototype,r),n&&g2(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function O2(t){"@babel/helpers - typeof";return(O2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _2(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,P2(n.key),n)}}function P2(t){var e=function(t,e){if("object"!=O2(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=O2(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==O2(e)?e:String(e)}var E2=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.stop="function"==typeof window.addEventListener?function(t){t.preventDefault(),t.stopPropagation(),t.cancelBubble=!0}:function(t){t.returnValue=!1,t.cancelBubble=!0},this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Event"}var e,r,n;return e=t,(r=[{key:"getX",value:function(t){return void 0!==t.zrenderX&&t.zrenderX||void 0!==t.offsetX&&t.offsetX||void 0!==t.layerX&&t.layerX||void 0!==t.clientX&&t.clientX}},{key:"getY",value:function(t){return void 0!==t.zrenderY&&t.zrenderY||void 0!==t.offsetY&&t.offsetY||void 0!==t.layerY&&t.layerY||void 0!==t.clientY&&t.clientY}},{key:"getDelta",value:function(t){return void 0!==t.zrenderDelta&&t.zrenderDelta||void 0!==t.wheelDelta&&t.wheelDelta||void 0!==t.detail&&-t.detail}}])&&_2(e.prototype,r),n&&_2(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function C2(t){"@babel/helpers - typeof";return(C2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function T2(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,j2(n.key),n)}}function j2(t){var e=function(t,e){if("object"!=C2(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=C2(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==C2(e)?e:String(e)}var k2=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Http"}var e,r,n;return e=t,(r=[{key:"get",value:function(t,e,r){if("object"===C2(t)){var n=t;t=n.url,e=n.onsuccess,r=n.onerror}var o=window.XMLHttpRequest?new XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");o.open("GET",t,!0),o.onreadystatechange=function(){4==o.readyState&&(o.status>=200&&o.status<300||304===o.status?e&&e(o.responseText):r&&r(),o.onreadystatechange=new Function,o=null)},o.send(null)}}])&&T2(e.prototype,r),n&&T2(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function x2(t){"@babel/helpers - typeof";return(x2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function A2(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,I2(n.key),n)}}function I2(t){var e=function(t,e){if("object"!=x2(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=x2(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==x2(e)?e:String(e)}var N2=function(t,e,r){return e&&A2(t.prototype,e),r&&A2(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)});function R2(t){"@babel/helpers - typeof";return(R2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function M2(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,L2(n.key),n)}}function L2(t){var e=function(t,e){if("object"!=R2(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=R2(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==R2(e)?e:String(e)}N2.EVENT={RESIZE:"resize",CLICK:"click",DBLCLICK:"dblclick",MOUSEWHEEL:"mousewheel",MOUSEMOVE:"mousemove",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",GLOBALOUT:"globalout",DRAGSTART:"dragstart",DRAGEND:"dragend",DRAGENTER:"dragenter",DRAGOVER:"dragover",DRAGLEAVE:"dragleave",DROP:"drop",touchClickDelay:300},N2.catchBrushException=!1,N2.debugMode=0;var B2=function(){function t(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Log",function(){if(0!=+N2.debugMode)if(1==+N2.debugMode)for(var t in arguments)throw new Error(arguments[t]);else if(+N2.debugMode>1)for(var e in arguments)console.log(arguments[e])}}var e,r,n;return e=t,(r=[{key:"destory",value:function(){return!0}}])&&M2(e.prototype,r),n&&M2(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function D2(t){"@babel/helpers - typeof";return(D2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function F2(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,U2(n.key),n)}}function U2(t){var e=function(t,e){if("object"!=D2(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=D2(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==D2(e)?e:String(e)}var G2=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._radians=window.Math.PI/180,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Math"}var e,r,n;return e=t,(r=[{key:"sin",value:function(t,e){return window.Math.sin(e?t*this._radians:t)}},{key:"cos",value:function(t,e){return window.Math.cos(e?t*this._radians:t)}},{key:"degreeToRadian",value:function(t){return t*this._radians}},{key:"radianToDegree",value:function(t){return t/this._radians}}])&&F2(e.prototype,r),n&&F2(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function V2(t){"@babel/helpers - typeof";return(V2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function q2(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,H2(n.key),n)}}function H2(t){var e=function(t,e){if("object"!=V2(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=V2(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==V2(e)?e:String(e)}var z2=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ArrayCtor="undefined"==typeof Float32Array?Array:Float32Array,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Matrix"}var e,r,n;return e=t,(r=[{key:"create",value:function(){var t=new(0,this.ArrayCtor)(6);return this.identity(t),t}},{key:"identity",value:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}},{key:"copy",value:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}},{key:"mul",value:function(t,e,r){return t[0]=e[0]*r[0]+e[2]*r[1],t[1]=e[1]*r[0]+e[3]*r[1],t[2]=e[0]*r[2]+e[2]*r[3],t[3]=e[1]*r[2]+e[3]*r[3],t[4]=e[0]*r[4]+e[2]*r[5]+e[4],t[5]=e[1]*r[4]+e[3]*r[5]+e[5],t}},{key:"translate",value:function(t,e,r){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4]+r[0],t[5]=e[5]+r[1],t}},{key:"rotate",value:function(t,e,r){var n=e[0],o=e[2],i=e[4],a=e[1],s=e[3],u=e[5],l=Math.sin(r),c=Math.cos(r);return t[0]=n*c+a*l,t[1]=-n*l+a*c,t[2]=o*c+s*l,t[3]=-o*l+c*s,t[4]=c*i+l*u,t[5]=c*u-l*i,t}},{key:"scale",value:function(t,e,r){var n=r[0],o=r[1];return t[0]=e[0]*n,t[1]=e[1]*o,t[2]=e[2]*n,t[3]=e[3]*o,t[4]=e[4]*n,t[5]=e[5]*o,t}},{key:"invert",value:function(t,e){var r=e[0],n=e[2],o=e[4],i=e[1],a=e[3],s=e[5],u=r*a-i*n;return u?(u=1/u,t[0]=a*u,t[1]=-i*u,t[2]=-n*u,t[3]=r*u,t[4]=(n*s-a*o)*u,t[5]=(i*o-r*s)*u,t):null}},{key:"mulVector",value:function(t,e,r){var n=e[0],o=e[2],i=e[4],a=e[1],s=e[3],u=e[5];return t[0]=r[0]*n+r[1]*o+i,t[1]=r[0]*a+r[1]*s+u,t}}])&&q2(e.prototype,r),n&&q2(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function J2(t){"@babel/helpers - typeof";return(J2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function W2(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,K2(n.key),n)}}function K2(t){var e=function(t,e){if("object"!=J2(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=J2(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==J2(e)?e:String(e)}var Q2=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n;return e=t,n=[{key:"SUtil_smoothBezier",value:function(e,r,n,o,i){i&&2===i.length||(i=[0,0]);var a,s,u=i,l=[],c=[],f=[],p=[],h=!!o;if(h){a=[1/0,1/0],s=[-1/0,-1/0];for(var y=e.length,d=0;d<y;d++)t.Util_vector.min(a,a,[e[d][0]+u[0],e[d][1]+u[1]]),t.Util_vector.max(s,s,[e[d][0]+u[0],e[d][1]+u[1]]);t.Util_vector.min(a,a,o[0]),t.Util_vector.max(s,s,o[1])}for(var b=e.length,v=0;v<b;v++){var m=[e[v][0]+u[0],e[v][1]+u[1]],g=void 0,S=void 0;if(n)g=[e[v?v-1:b-1][0]+u[0],e[v?v-1:b-1][1]+u[1]],S=[e[(v+1)%b][0]+u[0],e[(v+1)%b][1]+u[1]];else{if(0===v||v===b-1){l.push([e[v][0]+u[0],e[v][1]+u[1]]);continue}g=[e[v-1][0]+u[0],e[v-1][1]+u[1]],S=[e[v+1][0]+u[0],e[v+1][1]+u[1]]}t.Util_vector.sub(c,S,g),t.Util_vector.scale(c,c,r);var w=t.Util_vector.distance(m,g),O=t.Util_vector.distance(m,S),_=w+O;0!==_&&(w/=_,O/=_),t.Util_vector.scale(f,c,-w),t.Util_vector.scale(p,c,O);var P=t.Util_vector.add([],m,f),E=t.Util_vector.add([],m,p);h&&(t.Util_vector.max(P,P,a),t.Util_vector.min(P,P,s),t.Util_vector.max(E,E,a),t.Util_vector.min(E,E,s)),l.push(P),l.push(E)}return n&&l.push(l.shift()),l}},{key:"SUtil_smoothSpline",value:function(e,r,n,o){o&&2===o.length||(o=[0,0]);for(var i=o,a=e.length,s=[],u=0,l=1;l<a;l++)u+=t.Util_vector.distance([e[l-1][0]+i[0],e[l-1][1]+i[1]],[e[l][0]+i[0],e[l][1]+i[1]]);var c=u/5;c=c<a?a:c;for(var f=0;f<c;f++){var p=f/(c-1)*(r?a:a-1),h=Math.floor(p),y=p-h,d=void 0,b=[e[h%a][0]+i[0],e[h%a][1]+i[1]],v=void 0,m=void 0;r?(d=[e[(h-1+a)%a][0]+i[0],e[(h-1+a)%a][1]+i[1]],v=[e[(h+1)%a][0]+i[0],e[(h+1)%a][1]+i[1]],m=[e[(h+2)%a][0]+i[0],e[(h+2)%a][1]+i[1]]):(d=[e[0===h?h:h-1][0]+i[0],e[0===h?h:h-1][1]+i[1]],v=[e[h>a-2?a-1:h+1][0]+i[0],e[h>a-2?a-1:h+1][1]+i[1]],m=[e[h>a-3?a-1:h+2][0]+i[0],e[h>a-3?a-1:h+2][1]+i[1]]);var g=y*y,S=y*g;s.push([w(d[0],b[0],v[0],m[0],y,g,S),w(d[1],b[1],v[1],m[1],y,g,S)])}return s;function w(t,e,r,n,o,i,a){var s=.5*(r-t),u=.5*(n-e);return(2*(e-r)+s+u)*a+(-3*(e-r)-2*s-u)*i+s*o+e}}},{key:"SUtil_dashedLineTo",value:function(t,e,r,n,o,i,a){var s=[5,5];if(i="number"!=typeof i?5:i,t.setLineDash)return s[0]=i,s[1]=i,a&&a instanceof Array?t.setLineDash(a):t.setLineDash(s),t.moveTo(e,r),void t.lineTo(n,o);var u=n-e,l=o-r,c=Math.floor(Math.sqrt(u*u+l*l)/i);u/=c,l/=c;for(var f=!0,p=0;p<c;++p)f?t.moveTo(e,r):t.lineTo(e,r),f=!f,e+=u,r+=l;t.lineTo(n,o)}}],(r=null)&&W2(e.prototype,r),n&&W2(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Y2(t){"@babel/helpers - typeof";return(Y2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function X2(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Z2(n.key),n)}}function Z2(t){var e=function(t,e){if("object"!=Y2(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Y2(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Y2(e)?e:String(e)}Q2.Util_area=new h2,Q2.Util_color=new V$,Q2.Util_computeBoundingBox=new v2,Q2.Util_curve=new l2,Q2.Util_env=new w2,Q2.Util_event=new E2,Q2.Util_http=new k2,Q2.Util_log=new B2,Q2.Util_math=new G2,Q2.Util_matrix=new z2,Q2.Util=new D$,Q2.Util_vector=new i2;var $2=function(){function t(){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.position=[0,0],this.rotation=[0,0,0],this.scale=[1,1,0,0],this.needLocalTransform=!1,this.needTransform=!1,this.CLASS_NAME="SuperMap.LevelRenderer.Transformable",this.lookAt=(e=Q2.Util_vector.create(),function(t){this.transform||(this.transform=Q2.Util_matrix.create());var r=this.transform;function n(t){return t>-5e-5&&t<5e-5}Q2.Util_vector.sub(e,t,this.position),n(e[0])&&n(e[1])||(Q2.Util_vector.normalize(e,e),r[2]=e[0]*this.scale[1],r[3]=e[1]*this.scale[1],r[0]=e[1]*this.scale[0],r[1]=-e[0]*this.scale[0],r[4]=this.position[0],r[5]=this.position[1],this.decomposeTransform())})}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.position=null,this.rotation=null,this.scale=null,this.needLocalTransform=null,this.needTransform=null}},{key:"updateNeedTransform",value:function(){function t(t){return t>5e-5||t<-5e-5}this.needLocalTransform=t(this.rotation[0])||t(this.position[0])||t(this.position[1])||t(this.scale[0]-1)||t(this.scale[1]-1)}},{key:"updateTransform",value:function(){if(this.updateNeedTransform(),this.parent?this.needTransform=this.needLocalTransform||this.parent.needTransform:this.needTransform=this.needLocalTransform,this.needTransform){var t=[0,0],e=this.transform||Q2.Util_matrix.create();if(Q2.Util_matrix.identity(e),this.needLocalTransform){if(o(this.scale[0])||o(this.scale[1])){t[0]=-this.scale[2]||0,t[1]=-this.scale[3]||0;var r=o(t[0])||o(t[1]);r&&Q2.Util_matrix.translate(e,e,t),Q2.Util_matrix.scale(e,e,this.scale),r&&(t[0]=-t[0],t[1]=-t[1],Q2.Util_matrix.translate(e,e,t))}if(this.rotation instanceof Array){if(0!==this.rotation[0]){t[0]=-this.rotation[1]||0,t[1]=-this.rotation[2]||0;var n=o(t[0])||o(t[1]);n&&Q2.Util_matrix.translate(e,e,t),Q2.Util_matrix.rotate(e,e,this.rotation[0]),n&&(t[0]=-t[0],t[1]=-t[1],Q2.Util_matrix.translate(e,e,t))}}else 0!=+this.rotation&&Q2.Util_matrix.rotate(e,e,this.rotation);(o(this.position[0])||o(this.position[1]))&&Q2.Util_matrix.translate(e,e,this.position)}this.transform=e,this.parent&&this.parent.needTransform&&(this.needLocalTransform?Q2.Util_matrix.mul(this.transform,this.parent.transform,this.transform):Q2.Util_matrix.copy(this.transform,this.parent.transform))}function o(t){return t>5e-5||t<-5e-5}}},{key:"setTransform",value:function(t){if(this.needTransform){var e=this.transform;t.transform(e[0],e[1],e[2],e[3],e[4],e[5])}}},{key:"decomposeTransform",value:function(){if(this.transform){var t=this.transform,e=t[0]*t[0]+t[1]*t[1],r=this.position,n=this.scale,o=this.rotation;a(e-1)&&(e=Math.sqrt(e));var i=t[2]*t[2]+t[3]*t[3];a(i-1)&&(i=Math.sqrt(i)),r[0]=t[4],r[1]=t[5],n[0]=e,n[1]=i,n[2]=n[3]=0,o[0]=Math.atan2(-t[1]/i,t[0]/e),o[1]=o[2]=0}function a(t){return t>5e-5||t<-5e-5}}}])&&X2(e.prototype,r),n&&X2(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function t3(t){"@babel/helpers - typeof";return(t3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function e3(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,r3(n.key),n)}}function r3(t){var e=function(t,e){if("object"!=t3(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=t3(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==t3(e)?e:String(e)}function n3(t,e,r){return e=a3(e),function(t,e){if(e&&("object"===t3(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return o3(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],a3(t).constructor):e.apply(t,r))}function o3(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i3(){return(i3="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=a3(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function a3(t){return(a3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s3(t,e){return(s3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var u3=function(t){function e(t){var r,n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=n3(this,e,[t]),t=t||{},r.id=null,r.style={},r.highlightStyle=null,r.parent=null,r.__dirty=!0,r.__clipShapes=[],r.invisible=!1,r.ignore=!1,r.zlevel=0,r.draggable=!1,r.clickable=!1,r.hoverable=!0,r.z=0,r.refOriginalPosition=[0,0],r.refDataID=null,r.isHoverByRefDataID=!1,r.refDataHoverGroup=null,r.dataInfo=null,V.extend(o3(r),t),r.id=r.id||V.createUniqueID("smShape_"),r.CLASS_NAME="SuperMap.LevelRenderer.Shape",r.getTansform=(n=[],function(t,e){var r=[t,e];return this.needTransform&&this.transform&&(Q2.Util_matrix.invert(n,this.transform),Q2.Util_matrix.mulVector(r,n,[t,e,1]),t==r[0]&&e==r[1]&&this.updateNeedTransform()),r}),r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s3(t,e)}(e,S(e2,$2)),r=e,o=[{key:"_fillText",value:function(t,r,n,o,i,a,s){i&&(t.font=i),t.textAlign=a,t.textBaseline=s;var u=e._getTextRect(r,n,o,i,a,s);r=(r+"").split("\n");var l=Q2.Util_area.getTextHeight("ZH",i);switch(s){case"top":o=u.y;break;case"bottom":o=u.y+l;break;default:o=u.y+l/2}for(var c=0,f=r.length;c<f;c++)t.fillText(r[c],n,o),o+=l}},{key:"_getTextRect",value:function(t,e,r,n,o,i){var a=Q2.Util_area.getTextWidth(t,n),s=Q2.Util_area.getTextHeight("ZH",n);switch(t=(t+"").split("\n"),o){case"end":case"right":e-=a;break;case"center":e-=a/2}switch(i){case"top":break;case"bottom":r-=s*t.length;break;default:r-=s*t.length/2}return{x:e,y:r,width:a,height:s*t.length}}}],(n=[{key:"destroy",value:function(){this.id=null,this.style=null,this.highlightStyle=null,this.parent=null,this.__dirty=null,this.__clipShapes=null,this.invisible=null,this.ignore=null,this.zlevel=null,this.draggable=null,this.clickable=null,this.hoverable=null,this.z=null,this.refOriginalPosition=null,this.refDataID=null,this.refDataHoverGroup=null,this.isHoverByRefDataID=null,this.dataInfo=null,i3(a3(e.prototype),"destroy",this).call(this)}},{key:"brush",value:function(t,e){var r=this.beforeBrush(t,e);switch(t.beginPath(),this.buildPath(t,r),r.brushType){case"both":this.setCtxGlobalAlpha(t,"fill",r),t.fill(),r.lineWidth>0&&(this.setCtxGlobalAlpha(t,"stroke",r),t.stroke()),this.setCtxGlobalAlpha(t,"reset",r);break;case"stroke":this.setCtxGlobalAlpha(t,"stroke",r),r.lineWidth>0&&t.stroke(),this.setCtxGlobalAlpha(t,"reset",r);break;default:this.setCtxGlobalAlpha(t,"fill",r),t.fill(),this.setCtxGlobalAlpha(t,"reset",r)}this.drawText(t,r,this.style),this.afterBrush(t)}},{key:"beforeBrush",value:function(t,e){var r=this.style;return this.brushTypeOnly&&(r.brushType=this.brushTypeOnly),e&&(r=this.getHighlightStyle(r,this.highlightStyle||{},this.brushTypeOnly)),"stroke"==this.brushTypeOnly&&(r.strokeColor=r.strokeColor||r.color),t.save(),this.doClip(t),this.setContext(t,r),this.setTransform(t),r}},{key:"afterBrush",value:function(t){t.restore()}},{key:"setContext",value:function(t,e){for(var r=[["color","fillStyle"],["strokeColor","strokeStyle"],["opacity","globalAlpha"],["lineCap","lineCap"],["lineJoin","lineJoin"],["miterLimit","miterLimit"],["lineWidth","lineWidth"],["shadowBlur","shadowBlur"],["shadowColor","shadowColor"],["shadowOffsetX","shadowOffsetX"],["shadowOffsetY","shadowOffsetY"]],n=0,o=r.length;n<o;n++){var i=e[r[n][0]],a=r[n][1];void 0!==i&&(t[a]=i)}}},{key:"doClip",value:function(t){var e=Q2.Util_matrix.create();if(this.__clipShapes)for(var r=0;r<this.__clipShapes.length;r++){var n=this.__clipShapes[r];if(n.needTransform){var o=n.transform;Q2.Util_matrix.invert(e,o),t.transform(o[0],o[1],o[2],o[3],o[4],o[5])}if(t.beginPath(),n.buildPath(t,n.style),t.clip(),n.needTransform){var i=e;t.transform(i[0],i[1],i[2],i[3],i[4],i[5])}}}},{key:"getHighlightStyle",value:function(t,e,r){var n={};for(var o in t)n[o]=t[o];var i=Q2.Util_color.getHighlightColor();for(var a in"stroke"!=t.brushType?(n.strokeColor=i,n.lineWidth=t.lineWidth||1,n.brushType="both"):"stroke"!=r?(n.strokeColor=i,n.lineWidth=t.lineWidth||1):n.strokeColor=e.strokeColor||Q2.Util_color.mix(t.strokeColor,Q2.Util_color.toRGB(i)),e)void 0!==e[a]&&(n[a]=e[a]);return n}},{key:"getHighlightZoom",value:function(){return"text"!=this.type?6:2}},{key:"drift",value:function(t,e){this.position[0]+=t,this.position[1]+=e}},{key:"buildPath",value:function(t,e){Q2.Util_log("buildPath not implemented in "+this.type)}},{key:"getRect",value:function(t){Q2.Util_log("getRect not implemented in "+this.type)}},{key:"isCover",value:function(t,e){var r=this.getTansform(t,e);t=r[0],e=r[1];var n=this.style.__rect;return n||(n=this.style.__rect=this.getRect(this.style)),t>=n.x&&t<=n.x+n.width&&e>=n.y&&e<=n.y+n.height&&Q2.Util_area.isInside(this,this.style,t,e)}},{key:"drawText",value:function(t,r,n){if(void 0!==r.text&&!1!==r.text){var o=r.textColor||r.color||r.strokeColor;t.fillStyle=o;var i,a,s,u,l=10,c=r.textPosition||this.textPosition||"top",f=[];switch(f=this.refOriginalPosition&&2===this.refOriginalPosition.length?this.refOriginalPosition:[0,0],c){case"inside":case"top":case"bottom":case"left":case"right":if(this.getRect){var p=(n||r).__rect||this.getRect(n||r);switch(c){case"inside":s=p.x+p.width/2,u=p.y+p.height/2,i="center",a="middle","stroke"!=r.brushType&&o==r.color&&(t.fillStyle="#fff");break;case"left":s=p.x-l,u=p.y+p.height/2,i="end",a="middle";break;case"right":s=p.x+p.width+l,u=p.y+p.height/2,i="start",a="middle";break;case"top":s=p.x+p.width/2,u=p.y-l,i="center",a="bottom";break;case"bottom":s=p.x+p.width/2,u=p.y+p.height+l,i="center",a="top"}}break;case"start":case"end":var h=0,y=0,d=0,b=0;if(void 0!==r.pointList){var v=r.pointList;if(v.length<2)return;var m=v.length;switch(c){case"start":h=v[0][0]+f[0],y=v[1][0]+f[0],d=v[0][1]+f[1],b=v[1][1]+f[1];break;case"end":h=v[m-2][0]+f[0],y=v[m-1][0]+f[0],d=v[m-2][1]+f[1],b=v[m-1][1]+f[1]}}else h=r.xStart+f[0]||0,y=r.xEnd+f[0]||0,d=r.yStart+f[1]||0,b=r.yEnd+f[1]||0;switch(c){case"start":i=h<y?"end":"start",a=d<b?"bottom":"top",s=h,u=d;break;case"end":i=h<y?"start":"end",a=d<b?"top":"bottom",s=y,u=b}l-=4,h&&y&&h!=y?s-="end"==i?l:-l:i="center",d!=b?u-="bottom"==a?l:-l:a="middle";break;case"specific":s=r.textX||0,u=r.textY||0,i="start",a="middle"}r.labelXOffset&&!isNaN(r.labelXOffset)&&(s+=r.labelXOffset),r.labelYOffset&&!isNaN(r.labelYOffset)&&(u+=r.labelYOffset),null!=s&&null!=u&&e._fillText(t,r.text,s,u,r.textFont,r.textAlign||i,r.textBaseline||a)}}},{key:"modSelf",value:function(){this.__dirty=!0,this.style&&(this.style.__rect=null),this.highlightStyle&&(this.highlightStyle.__rect=null)}},{key:"isSilent",value:function(){return!(this.hoverable||this.draggable||this.clickable||this.onmousemove||this.onmouseover||this.onmouseout||this.onmousedown||this.onmouseup||this.onclick||this.ondragenter||this.ondragover||this.ondragleave||this.ondrop)}},{key:"setCtxGlobalAlpha",value:function(t,e,r){t.globalAlpha="fill"===e?void 0===r.fillOpacity?void 0===r.opacity?1:r.opacity:r.fillOpacity:"stroke"===e?void 0===r.strokeOpacity?void 0===r.opacity?1:r.opacity:r.strokeOpacity:void 0===r.opacity?1:r.opacity}}])&&e3(r.prototype,n),o&&e3(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function l3(t){"@babel/helpers - typeof";return(l3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c3(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f3(n.key),n)}}function f3(t){var e=function(t,e){if("object"!=l3(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=l3(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==l3(e)?e:String(e)}function p3(t,e,r){return e=y3(e),function(t,e){if(e&&("object"===l3(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],y3(t).constructor):e.apply(t,r))}function h3(){return(h3="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=y3(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function y3(t){return(y3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d3(t,e){return(d3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var b3=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=p3(this,e,[t])).type="smicpoint",r.refOriginalPosition&&2===r.refOriginalPosition.length||(r.refOriginalPosition=[0,0]),r.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicPoint",r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d3(t,e)}(e,u3),r=e,(n=[{key:"destroy",value:function(){this.type=null,h3(y3(e.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition;t.arc(e.x+r[0],e.y+r[1],e.r,0,2*Math.PI,!0)}},{key:"getRect",value:function(t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e,r=this.refOriginalPosition;return t.__rect?t.__rect:(e="stroke"==t.brushType||"fill"==t.brushType?t.lineWidth||1:0,t.__rect={x:Math.round(t.x+r[0]-t.r-e/2),y:Math.round(t.y+r[1]-t.r-e/2),width:2*t.r+e,height:2*t.r+e},t.__rect)}}])&&c3(r.prototype,n),o&&c3(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function v3(t){"@babel/helpers - typeof";return(v3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function m3(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,g3(n.key),n)}}function g3(t){var e=function(t,e){if("object"!=v3(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=v3(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==v3(e)?e:String(e)}function S3(t,e,r){return e=O3(e),function(t,e){if(e&&("object"===v3(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],O3(t).constructor):e.apply(t,r))}function w3(){return(w3="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=O3(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function O3(t){return(O3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _3(t,e){return(_3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var P3=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=S3(this,e,[t])).type="smictext",r.refOriginalPosition&&2===r.refOriginalPosition.length||(r.refOriginalPosition=[0,0]),r.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicText",r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_3(t,e)}(e,u3),r=e,(n=[{key:"destroy",value:function(){this.type=null,w3(O3(e.prototype),"destroy",this).call(this)}},{key:"brush",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,n=this.style;if(e&&(n=this.getHighlightStyle(n,this.highlightStyle||{})),void 0!==n.text&&!1!==n.text){t.save(),this.doClip(t),this.setContext(t,n),this.setTransform(t),n.textFont&&(t.font=n.textFont),t.textAlign=n.textAlign||"start",t.textBaseline=n.textBaseline||"middle";var o,i=(n.text+"").split("\n"),a=Q2.Util_area.getTextHeight("ZH",n.textFont),s=this.getRectNoRotation(n),u=n.x+r[0];o="top"==n.textBaseline?s.y:"bottom"==n.textBaseline?s.y+a:s.y+a/2;for(var l=n.x+r[0],c=n.y+r[1],f=0,p=i.length;f<p;f++){switch(n.labelRect&&(t.fillRect(s.x-2,s.y,s.width+4,s.height),t.fillStyle=n.strokeColor,t.strokeRect(s.x-2,s.y,s.width+4,s.height),t.fillStyle=n.textColor),n.brushType){case"stroke":this.setCtxGlobalAlpha(t,"stroke",n),n.textRotation&&0!==n.textRotation?(t.save(),t.translate(l,c),t.rotate(n.textRotation*Math.PI/180),"top"==n.textBaseline?n.maxWidth?t.strokeText(i[f],0,a*f,n.maxWidth):t.strokeText(i[f],0,a*f):"bottom"==n.textBaseline?n.maxWidth?t.strokeText(i[f],0,a*(f+1)-s.height,n.maxWidth):t.strokeText(i[f],0,a*(f+1)-s.height):n.maxWidth?t.strokeText(i[f],0,a*(f+1)-s.height/2-a/2,n.maxWidth):t.strokeText(i[f],0,a*(f+1)-s.height/2-a/2),t.restore()):n.maxWidth?t.strokeText(i[f],u,o,n.maxWidth):t.strokeText(i[f],u,o),this.setCtxGlobalAlpha(t,"reset",n);break;case"both":n.textRotation&&0!==n.textRotation?(t.save(),t.translate(l,c),t.rotate(n.textRotation*Math.PI/180),"top"==n.textBaseline?n.maxWidth?(this.setCtxGlobalAlpha(t,"fill",n),t.fillText(i[f],0,a*f,n.maxWidth),this.setCtxGlobalAlpha(t,"reset",n),this.setCtxGlobalAlpha(t,"stroke",n),t.strokeText(i[f],0,a*f,n.maxWidth),this.setCtxGlobalAlpha(t,"reset",n)):(this.setCtxGlobalAlpha(t,"fill",n),t.fillText(i[f],0,a*f),this.setCtxGlobalAlpha(t,"reset",n),this.setCtxGlobalAlpha(t,"stroke",n),t.strokeText(i[f],0,a*f),this.setCtxGlobalAlpha(t,"reset",n)):"bottom"==n.textBaseline?n.maxWidth?(this.setCtxGlobalAlpha(t,"fill",n),t.fillText(i[f],0,a*(f+1)-s.height,n.maxWidth),this.setCtxGlobalAlpha(t,"reset",n),this.setCtxGlobalAlpha(t,"stroke",n),t.strokeText(i[f],0,a*(f+1)-s.height,n.maxWidth),this.setCtxGlobalAlpha(t,"reset",n)):(this.setCtxGlobalAlpha(t,"fill",n),t.fillText(i[f],0,a*(f+1)-s.height),this.setCtxGlobalAlpha(t,"reset",n),this.setCtxGlobalAlpha(t,"stroke",n),t.strokeText(i[f],0,a*(f+1)-s.height),this.setCtxGlobalAlpha(t,"reset",n)):n.maxWidth?(this.setCtxGlobalAlpha(t,"fill",n),t.fillText(i[f],0,a*(f+1)-s.height/2-a/2,n.maxWidth),this.setCtxGlobalAlpha(t,"reset",n),this.setCtxGlobalAlpha(t,"stroke",n),t.strokeText(i[f],0,a*(f+1)-s.height/2-a/2,n.maxWidth),this.setCtxGlobalAlpha(t,"reset",n)):(this.setCtxGlobalAlpha(t,"fill",n),t.fillText(i[f],0,a*(f+1)-s.height/2-a/2),this.setCtxGlobalAlpha(t,"reset",n),this.setCtxGlobalAlpha(t,"stroke",n),t.strokeText(i[f],0,a*(f+1)-s.height/2-a/2),this.setCtxGlobalAlpha(t,"reset",n)),t.restore()):n.maxWidth?(this.setCtxGlobalAlpha(t,"fill",n),t.fillText(i[f],u,o,n.maxWidth),this.setCtxGlobalAlpha(t,"reset",n),this.setCtxGlobalAlpha(t,"stroke",n),t.strokeText(i[f],u,o,n.maxWidth),this.setCtxGlobalAlpha(t,"reset",n)):(this.setCtxGlobalAlpha(t,"fill",n),t.fillText(i[f],u,o),this.setCtxGlobalAlpha(t,"reset",n),this.setCtxGlobalAlpha(t,"stroke",n),t.strokeText(i[f],u,o),this.setCtxGlobalAlpha(t,"reset",n));break;default:this.setCtxGlobalAlpha(t,"fill",n),n.textRotation&&0!==n.textRotation?(t.save(),t.translate(l,c),t.rotate(n.textRotation*Math.PI/180),"top"==n.textBaseline?n.maxWidth?t.fillText(i[f],0,a*f,n.maxWidth):t.fillText(i[f],0,a*f):"bottom"==n.textBaseline?n.maxWidth?t.fillText(i[f],0,a*(f+1)-s.height,n.maxWidth):t.fillText(i[f],0,a*(f+1)-s.height):n.maxWidth?t.fillText(i[f],0,a*(f+1)-s.height/2-a/2,n.maxWidth):t.fillText(i[f],0,a*(f+1)-s.height/2-a/2),t.restore()):n.maxWidth?t.fillText(i[f],u,o,n.maxWidth):t.fillText(i[f],u,o),this.setCtxGlobalAlpha(t,"reset",n)}o+=a}t.restore()}}},{key:"getRect",value:function(t){if(t.__rect)return t.__rect;for(var e,r,n,o,i=this.getTextBackground(t,!0),a=0,s=i.length;a<s;a++){var u=i[a];0==a?(e=u[0],n=u[0],r=u[1],o=u[1]):(u[0]<e&&(e=u[0]),u[0]>n&&(n=u[0]),u[1]<r&&(r=u[1]),u[1]>o&&(o=u[1]))}return t.__rect={x:e,y:r,width:n-e,height:o-r},t.__rect}},{key:"getRectNoRotation",value:function(t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e,r=this.refOriginalPosition,n=Q2.Util_area.getTextHeight("ZH",t.textFont),o=Q2.Util_area.getTextWidth(t.text,t.textFont),i=Q2.Util_area.getTextHeight(t.text,t.textFont),a=t.x+r[0];"end"==t.textAlign||"right"==t.textAlign?a-=o:"center"==t.textAlign&&(a-=o/2),e="top"==t.textBaseline?t.y+r[1]:"bottom"==t.textBaseline?t.y+r[1]-i:t.y+r[1]-i/2;var s,u=!1;if(t.maxWidth){var l=parseInt(t.maxWidth);l<o&&(s=o,u=!0,o=l),a=t.x+r[0],"end"==t.textAlign||"right"==t.textAlign?a-=o:"center"==t.textAlign&&(a-=o/2)}t.textFont&&(t.textFont.toLowerCase().indexOf("italic")>-1&&(o+=!0===u?n/3*(o/s):n/3));return{x:a,y:e,width:o,height:i}}},{key:"getTextBackground",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition;if(!e&&t.__textBackground)return t.__textBackground;var n=this.getRectNoRotation(t),o=t.x+r[0],i=t.y+r[1],a=[];if(t.textRotation&&0!==t.textRotation){var s=t.textRotation,u=this.getRotatedLocation(n.x,n.y,o,i,s),l=this.getRotatedLocation(n.x+n.width,n.y,o,i,s),c=this.getRotatedLocation(n.x+n.width,n.y+n.height,o,i,s),f=this.getRotatedLocation(n.x,n.y+n.height,o,i,s);a.push(u),a.push(l),a.push(c),a.push(f)}else{var p=[n.x,n.y],h=[n.x+n.width,n.y],y=[n.x+n.width,n.y+n.height],d=[n.x,n.y+n.height];a.push(p),a.push(h),a.push(y),a.push(d)}return t.__textBackground=a,t.__textBackground}},{key:"getRotatedLocation",value:function(t,e,r,n,o){var i,a,s=new Array;return e=-e,n=-n,o=-o,i=(t-r)*Math.cos(o/180*Math.PI)-(e-n)*Math.sin(o/180*Math.PI)+r,a=(t-r)*Math.sin(o/180*Math.PI)+(e-n)*Math.cos(o/180*Math.PI)+n,s[0]=i,s[1]=-a,s}}])&&m3(r.prototype,n),o&&m3(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function E3(t){"@babel/helpers - typeof";return(E3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function C3(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,T3(n.key),n)}}function T3(t){var e=function(t,e){if("object"!=E3(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=E3(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==E3(e)?e:String(e)}function j3(t,e,r){return e=x3(e),function(t,e){if(e&&("object"===E3(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],x3(t).constructor):e.apply(t,r))}function k3(){return(k3="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=x3(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function x3(t){return(x3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function A3(t,e){return(A3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var I3=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=j3(this,e,[t])).type="smiccircle",r.refOriginalPosition&&2===r.refOriginalPosition.length||(r.refOriginalPosition=[0,0]),r.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicCircle",r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&A3(t,e)}(e,u3),r=e,(n=[{key:"destroy",value:function(){this.type=null,k3(x3(e.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,n=e.x+r[0],o=e.y+r[1];return t.moveTo(n+e.r,o),t.arc(n,o,e.r,0,2*Math.PI,!0),!0}},{key:"getRect",value:function(t){if(t.__rect)return t.__rect;this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e,r=this.refOriginalPosition,n=t.x+r[0],o=t.y+r[1],i=t.r;return e="stroke"==t.brushType||"fill"==t.brushType?t.lineWidth||1:0,t.__rect={x:Math.round(n-i-e/2),y:Math.round(o-i-e/2),width:2*i+e,height:2*i+e},t.__rect}}])&&C3(r.prototype,n),o&&C3(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function N3(t){"@babel/helpers - typeof";return(N3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function R3(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,M3(n.key),n)}}function M3(t){var e=function(t,e){if("object"!=N3(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=N3(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==N3(e)?e:String(e)}function L3(t,e,r){return e=D3(e),function(t,e){if(e&&("object"===N3(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],D3(t).constructor):e.apply(t,r))}function B3(){return(B3="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=D3(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function D3(t){return(D3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function F3(t,e){return(F3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var U3=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=L3(this,e,[t])).type="smicpolygon",r.holePolygonPointLists=null,r.refOriginalPosition&&2===r.refOriginalPosition.length||(r.refOriginalPosition=[0,0]),r.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicPolygon",r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&F3(t,e)}(e,u3),r=e,(n=[{key:"destroy",value:function(){this.type=null,this.holePolygonPointLists=null,B3(D3(e.prototype),"destroy",this).call(this)}},{key:"brush",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.style;e&&(r=this.getHighlightStyle(r,this.highlightStyle||{})),t.save(),this.setContext(t,r),this.setTransform(t);var n=!1;"fill"!=r.brushType&&"both"!=r.brushType&&void 0!==r.brushType||(t.beginPath(),"dashed"==r.lineType||"dotted"==r.lineType||"dot"==r.lineType||"dash"==r.lineType||"dashdot"==r.lineType||"longdash"==r.lineType||"longdashdot"==r.lineType?this.buildPath(t,{lineType:"solid",lineWidth:r.lineWidth,pointList:r.pointList}):(this.buildPath(t,r),n=!0),t.closePath(),this.setCtxGlobalAlpha(t,"fill",r),t.fill(),this.setCtxGlobalAlpha(t,"reset",r)),r.lineWidth>0&&("stroke"==r.brushType||"both"==r.brushType)&&(n||(t.beginPath(),this.buildPath(t,r)),this.setCtxGlobalAlpha(t,"stroke",r),t.stroke(),this.setCtxGlobalAlpha(t,"reset",r)),this.drawText(t,r,this.style);var o=V.cloneObject(r);if(o.pointList&&this.holePolygonPointLists&&this.holePolygonPointLists.length>0)for(var i=this.holePolygonPointLists,a=i.length,s=0;s<a;s++){var u=i[s];o.pointList=u,t.globalCompositeOperation="destination-out",n=!1,"fill"!=o.brushType&&"both"!=o.brushType&&void 0!==o.brushType||(t.beginPath(),"dashed"==o.lineType||"dotted"==o.lineType||"dot"==o.lineType||"dash"==o.lineType||"dashdot"==o.lineType||"longdash"==o.lineType||"longdashdot"==o.lineType?this.buildPath(t,{lineType:"solid",lineWidth:o.lineWidth,pointList:o.pointList}):(this.buildPath(t,o),n=!0),t.closePath(),this.setCtxGlobalAlpha(t,"fill",o),t.fill(),this.setCtxGlobalAlpha(t,"reset",o)),o.lineWidth>0&&("stroke"==o.brushType||"both"==o.brushType)?(n||(t.beginPath(),this.buildPath(t,o)),t.globalCompositeOperation="source-over",this.setCtxGlobalAlpha(t,"stroke",o),t.stroke(),this.setCtxGlobalAlpha(t,"reset",o)):t.globalCompositeOperation="source-over"}t.restore()}},{key:"buildPath",value:function(t,e){e.showShadow&&(t.shadowBlur=e.shadowBlur,t.shadowColor=e.shadowColor,t.shadowOffsetX=e.shadowOffsetX,t.shadowOffsetY=e.shadowOffsetY),this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,n=e.pointList;if(!(n.length<2))if(e.smooth&&"spline"!==e.smooth){var o,i,a,s=Q2.SUtil_smoothBezier(n,e.smooth,!0,e.smoothConstraint,r);t.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var u=n.length,l=0;l<u;l++)o=s[2*l],i=s[2*l+1],a=[n[(l+1)%u][0]+r[0],n[(l+1)%u][1]+r[1]],t.bezierCurveTo(o[0],o[1],i[0],i[1],a[0],a[1])}else if("spline"===e.smooth&&(n=Q2.SUtil_smoothSpline(n,!0,null,r)),e.lineType&&"solid"!=e.lineType){if("dashed"===e.lineType||"dotted"===e.lineType||"dot"===e.lineType||"dash"===e.lineType||"longdash"===e.lineType){var c=e._dashLength||(e.lineWidth||1)*("dashed"==e.lineType?5:1);e._dashLength=c;var f=e.lineWidth||1,p=f,h=f;"dashed"===e.lineType&&(p*=5,h*=5,e.lineCap&&"butt"!==e.lineCap&&(p-=f,h+=f)),"dotted"===e.lineType&&e.lineCap&&"butt"!==e.lineCap&&(p=1,h+=f),"dot"===e.lineType&&(h*=4,e.lineCap&&"butt"!==e.lineCap&&(p=1,h+=f)),"dash"===e.lineType&&(p*=4,h*=4,e.lineCap&&"butt"!==e.lineCap&&(p-=f,h+=f)),"longdash"===e.lineType&&(p*=8,h*=4,e.lineCap&&"butt"!==e.lineCap&&(p-=f,h+=f)),t.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var y=1;y<n.length;y++)Q2.SUtil_dashedLineTo(t,n[y-1][0]+r[0],n[y-1][1]+r[1],n[y][0]+r[0],n[y][1]+r[1],f,[p,h]);Q2.SUtil_dashedLineTo(t,n[n.length-1][0]+r[0],n[n.length-1][1]+r[1],n[0][0]+r[0],n[0][1]+r[1],f,[p,h])}else if("dashdot"===e.lineType||"longdashdot"===e.lineType){var d=e._dashLength||(e.lineWidth||1)*("dashed"==e.lineType?5:1);e._dashLength=d;var b=e.lineWidth||1,v=b,m=b,g=b,S=b;"dashdot"===e.lineType&&(v*=4,m*=4,S*=4,e.lineCap&&"butt"!==e.lineCap&&(v-=b,m+=b,g=1,S+=b)),"longdashdot"===e.lineType&&(v*=8,m*=4,S*=4,e.lineCap&&"butt"!==e.lineCap&&(v-=b,m+=b,g=1,S+=b)),t.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var w=1;w<n.length;w++)Q2.SUtil_dashedLineTo(t,n[w-1][0]+r[0],n[w-1][1]+r[1],n[w][0]+r[0],n[w][1]+r[1],b,[v,m,g,S]);Q2.SUtil_dashedLineTo(t,n[n.length-1][0]+r[0],n[n.length-1][1]+r[1],n[0][0]+r[0],n[0][1]+r[1],b,[v,m,g,S])}}else{t.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var O=1;O<n.length;O++)t.lineTo(n[O][0]+r[0],n[O][1]+r[1]);t.lineTo(n[0][0]+r[0],n[0][1]+r[1])}}},{key:"getRect",value:function(t,e){var r;if(e?r=e:(this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]),r=this.refOriginalPosition),t.__rect)return t.__rect;for(var n,o=Number.MAX_VALUE,i=Number.MIN_VALUE,a=Number.MAX_VALUE,s=Number.MIN_VALUE,u=t.pointList,l=0,c=u.length;l<c;l++)u[l][0]+r[0]<o&&(o=u[l][0]+r[0]),u[l][0]+r[0]>i&&(i=u[l][0]+r[0]),u[l][1]+r[1]<a&&(a=u[l][1]+r[1]),u[l][1]+r[1]>s&&(s=u[l][1]+r[1]);return n="stroke"==t.brushType||"fill"==t.brushType?t.lineWidth||1:0,t.__rect={x:Math.round(o-n/2),y:Math.round(a-n/2),width:i-o+n,height:s-a+n},t.__rect}}])&&R3(r.prototype,n),o&&R3(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function G3(t){"@babel/helpers - typeof";return(G3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function V3(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,q3(n.key),n)}}function q3(t){var e=function(t,e){if("object"!=G3(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=G3(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==G3(e)?e:String(e)}function H3(t,e,r){return e=J3(e),function(t,e){if(e&&("object"===G3(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],J3(t).constructor):e.apply(t,r))}function z3(){return(z3="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=J3(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function J3(t){return(J3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function W3(t,e){return(W3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var K3=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=H3(this,e,[t])).brushTypeOnly="stroke",r.textPosition="end",r.type="smicbroken-line",r.refOriginalPosition&&2===r.refOriginalPosition.length||(r.refOriginalPosition=[0,0]),r.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicBrokenLine",r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&W3(t,e)}(e,u3),r=e,(n=[{key:"destroy",value:function(){this.brushTypeOnly=null,this.textPosition=null,this.type=null,z3(J3(e.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,n=e.pointList;if(!(n.length<2)){var o=Math.min(e.pointList.length,Math.round(e.pointListLength||e.pointList.length));if(e.smooth&&"spline"!==e.smooth){var i,a,s,u=Q2.SUtil_smoothBezier(n,e.smooth,!1,e.smoothConstraint,r);t.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var l=0;l<o-1;l++)i=u[2*l],a=u[2*l+1],s=[n[l+1][0]+r[0],n[l+1][1]+r[1]],t.bezierCurveTo(i[0],i[1],a[0],a[1],s[0],s[1])}else if("spline"===e.smooth&&(o=(n=Q2.SUtil_smoothSpline(n,null,null,r)).length),e.lineType&&"solid"!==e.lineType){if("dashed"===e.lineType||"dotted"===e.lineType||"dot"===e.lineType||"dash"===e.lineType||"longdash"===e.lineType){var c=e.lineWidth||1,f=c,p=c;"dashed"===e.lineType&&(f*=5,p*=5,e.lineCap&&"butt"!==e.lineCap&&(f-=c,p+=c)),"dotted"===e.lineType&&e.lineCap&&"butt"!==e.lineCap&&(f=1,p+=c),"dot"===e.lineType&&(p*=4,e.lineCap&&"butt"!==e.lineCap&&(f=1,p+=c)),"dash"===e.lineType&&(f*=4,p*=4,e.lineCap&&"butt"!==e.lineCap&&(f-=c,p+=c)),"longdash"===e.lineType&&(f*=8,p*=4,e.lineCap&&"butt"!==e.lineCap&&(f-=c,p+=c)),t.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var h=1;h<o;h++)Q2.SUtil_dashedLineTo(t,n[h-1][0]+r[0],n[h-1][1]+r[1],n[h][0]+r[0],n[h][1]+r[1],c,[f,p])}else if("dashdot"===e.lineType||"longdashdot"===e.lineType){var y=e.lineWidth||1,d=y,b=y,v=y,m=y;"dashdot"===e.lineType&&(d*=4,b*=4,m*=4,e.lineCap&&"butt"!==e.lineCap&&(d-=y,b+=y,v=1,m+=y)),"longdashdot"===e.lineType&&(d*=8,b*=4,m*=4,e.lineCap&&"butt"!==e.lineCap&&(d-=y,b+=y,v=1,m+=y)),y=(e.lineWidth||1)*("dashed"===e.lineType?5:1),t.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var g=1;g<o;g++)Q2.SUtil_dashedLineTo(t,n[g-1][0]+r[0],n[g-1][1]+r[1],n[g][0]+r[0],n[g][1]+r[1],y,[d,b,v,m])}}else{t.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var S=1;S<o;S++)t.lineTo(n[S][0]+r[0],n[S][1]+r[1])}}}},{key:"getRect",value:function(t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e=this.refOriginalPosition;return U3.prototype.getRect.apply(this,[t,e])}}])&&V3(r.prototype,n),o&&V3(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function Q3(t){"@babel/helpers - typeof";return(Q3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Y3(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,X3(n.key),n)}}function X3(t){var e=function(t,e){if("object"!=Q3(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Q3(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Q3(e)?e:String(e)}function Z3(t,e,r){return e=t5(e),function(t,e){if(e&&("object"===Q3(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],t5(t).constructor):e.apply(t,r))}function $3(){return($3="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=t5(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function t5(t){return(t5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function e5(t,e){return(e5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var r5=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Z3(this,e,[t])).type="smicimage",r._imageCache={},r.refOriginalPosition&&2===r.refOriginalPosition.length||(r.refOriginalPosition=[0,0]),r.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicImage",r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&e5(t,e)}(e,u3),r=e,(n=[{key:"destroy",value:function(){this.type=null,this._imageCache=null,$3(t5(e.prototype),"destroy",this).call(this)}},{key:"brush",value:function(t,r,n){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var o=this.refOriginalPosition,i=this.style||{};r&&(i=this.getHighlightStyle(i,this.highlightStyle||{}));var a=i.image,s=this;if("string"==typeof a){var u=a;this._imageCache[u]?a=this._imageCache[u]:((a=new Image).onload=function(){a.onload=null,clearTimeout(e._refreshTimeout),e._needsRefresh.push(s),e._refreshTimeout=setTimeout(function(){n&&n(e._needsRefresh),e._needsRefresh=[]},10)},a.src=u,this._imageCache[u]=a)}if(a){if("IMG"==a.nodeName.toUpperCase())if(window.ActiveXObject){if("complete"!=a.readyState)return}else if(!a.complete)return;var l=i.width||a.width,c=i.height||a.height,f=i.x+o[0],p=i.y+o[1];if(!a.width||!a.height)return;if(t.save(),this.doClip(t),this.setContext(t,i),this.setTransform(t),i.sWidth&&i.sHeight){var h=i.sx+o[0]||0,y=i.sy+o[1]||0;t.drawImage(a,h,y,i.sWidth,i.sHeight,f,p,l,c)}else if(i.sx&&i.sy){var d=i.sx+o[0],b=i.sy+o[1],v=l-d,m=c-b;t.drawImage(a,d,b,v,m,f,p,l,c)}else t.drawImage(a,f,p,l,c);i.width||(i.width=l),i.height||(i.height=c),this.style.width||(this.style.width=l),this.style.height||(this.style.height=c),this.drawText(t,i,this.style),t.restore()}}},{key:"getRect",value:function(t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e=this.refOriginalPosition;return{x:t.x+e[0],y:t.y+e[1],width:t.width,height:t.height}}},{key:"clearCache",value:function(){this._imageCache={}}}])&&Y3(r.prototype,n),o&&Y3(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function n5(t){"@babel/helpers - typeof";return(n5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o5(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,i5(n.key),n)}}function i5(t){var e=function(t,e){if("object"!=n5(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=n5(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==n5(e)?e:String(e)}function a5(t,e,r){return e=u5(e),function(t,e){if(e&&("object"===n5(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],u5(t).constructor):e.apply(t,r))}function s5(){return(s5="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u5(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function u5(t){return(u5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l5(t,e){return(l5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}r5._needsRefresh=[],r5._refreshTimeout=null;var c5=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=a5(this,e,[t])).type="smicrectangle",r.refOriginalPosition&&2===r.refOriginalPosition.length||(r.refOriginalPosition=[0,0]),r.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicRectangle",r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l5(t,e)}(e,u3),r=e,(n=[{key:"destroy",value:function(){this.type=null,s5(u5(e.prototype),"destroy",this).call(this)}},{key:"_buildRadiusPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r,n,o,i,a,s=this.refOriginalPosition,u=e.x+s[0],l=e.y+s[1],c=e.width,f=e.height,p=e.radius;"number"==typeof p?r=n=o=i=p:p instanceof Array?1===p.length?r=n=o=i=p[0]:2===p.length?(r=o=p[0],n=i=p[1]):3===p.length?(r=p[0],n=i=p[1],o=p[2]):(r=p[0],n=p[1],o=p[2],i=p[3]):r=n=o=i=0,r+n>c&&(r*=c/(a=r+n),n*=c/a),o+i>c&&(o*=c/(a=o+i),i*=c/a),n+o>f&&(n*=f/(a=n+o),o*=f/a),r+i>f&&(r*=f/(a=r+i),i*=f/a),t.moveTo(u+r,l),t.lineTo(u+c-n,l),0!==n&&t.quadraticCurveTo(u+c,l,u+c,l+n),t.lineTo(u+c,l+f-o),0!==o&&t.quadraticCurveTo(u+c,l+f,u+c-o,l+f),t.lineTo(u+i,l+f),0!==i&&t.quadraticCurveTo(u,l+f,u,l+f-i),t.lineTo(u,l+r),0!==r&&t.quadraticCurveTo(u,l,u+r,l)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition;e.radius?this._buildRadiusPath(t,e):(t.moveTo(e.x+r[0],e.y+r[1]),t.lineTo(e.x+r[0]+e.width,e.y+r[1]),t.lineTo(e.x+r[0]+e.width,e.y+r[1]+e.height),t.lineTo(e.x+r[0],e.y+r[1]+e.height),t.lineTo(e.x+r[0],e.y+r[1])),t.closePath()}},{key:"getRect",value:function(t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e,r=this.refOriginalPosition;return t.__rect?t.__rect:(e="stroke"==t.brushType||"fill"==t.brushType?t.lineWidth||1:0,t.__rect={x:Math.round(t.x+r[0]-e/2),y:Math.round(t.y+r[1]-e/2),width:t.width+e,height:t.height+e},t.__rect)}}])&&o5(r.prototype,n),o&&o5(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function f5(t){"@babel/helpers - typeof";return(f5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function p5(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,h5(n.key),n)}}function h5(t){var e=function(t,e){if("object"!=f5(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=f5(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==f5(e)?e:String(e)}function y5(t,e,r){return e=b5(e),function(t,e){if(e&&("object"===f5(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],b5(t).constructor):e.apply(t,r))}function d5(){return(d5="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=b5(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function b5(t){return(b5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function v5(t,e){return(v5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var m5=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=y5(this,e,[t])).type="smicsector",r.refOriginalPosition&&2===r.refOriginalPosition.length||(r.refOriginalPosition=[0,0]),r.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicSector",r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&v5(t,e)}(e,u3),r=e,(n=[{key:"destroy",value:function(){this.type=null,d5(b5(e.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,n=e.x+r[0],o=e.y+r[1],i=e.r0||0,a=e.r,s=e.startAngle,u=e.endAngle,l=e.clockWise||!1;s=Q2.Util_math.degreeToRadian(s),u=Q2.Util_math.degreeToRadian(u),l||(s=-s,u=-u);var c=Q2.Util_math.cos(s),f=Q2.Util_math.sin(s);t.moveTo(c*i+n,f*i+o),t.lineTo(c*a+n,f*a+o),t.arc(n,o,a,s,u,!l),t.lineTo(Q2.Util_math.cos(u)*i+n,Q2.Util_math.sin(u)*i+o),0!==i&&t.arc(n,o,i,u,s,l),t.closePath()}},{key:"getRect",value:function(t){if(t.__rect)return t.__rect;this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e=this.refOriginalPosition,r=Q2.Util_vector.create(),n=Q2.Util_vector.create(),o=Q2.Util_vector.create(),i=Q2.Util_vector.create(),a=t.x+e[0],s=t.y+e[1],u=t.r0||0,l=t.r,c=Q2.Util_math.degreeToRadian(t.startAngle),f=Q2.Util_math.degreeToRadian(t.endAngle),p=t.clockWise;return p||(c=-c,f=-f),u>1?Q2.Util_computeBoundingBox.arc(a,s,u,c,f,!p,r,o):(r[0]=o[0]=a,r[1]=o[1]=s),Q2.Util_computeBoundingBox.arc(a,s,l,c,f,!p,n,i),Q2.Util_vector.min(r,r,n),Q2.Util_vector.max(o,o,i),t.__rect={x:r[0],y:r[1],width:o[0]-r[0],height:o[1]-r[1]},t.__rect}}])&&p5(r.prototype,n),o&&p5(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function g5(t){"@babel/helpers - typeof";return(g5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function S5(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,w5(n.key),n)}}function w5(t){var e=function(t,e){if("object"!=g5(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=g5(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==g5(e)?e:String(e)}var O5=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.shapeParameters=e,this.CLASS_NAME="SuperMap.Feature.ShapeFactory"}var e,r,n;return e=t,n=[{key:"transformStyle",value:function(t){var e={},r=["normal","normal","normal","12","arial,sans-serif"],n=[!0,!1];for(var o in t)switch(o){case"fill":n[0]=t[o];break;case"fillColor":e.color=t[o];break;case"stroke":n[1]=t[o];break;case"strokeWidth":e.lineWidth=t[o];break;case"strokeLinecap":e.lineCap=t[o];break;case"strokeLineJoin":e.lineJoin=t[o];break;case"strokeDashstyle":e.lineType=t[o];break;case"pointRadius":e.r=t[o];break;case"label":e.text=t[o];break;case"labelRect":e.labelRect=t[o];break;case"fontColor":e.textColor=t[o];break;case"fontStyle":r[0]=t[o];break;case"fontVariant":r[1]=t[o];break;case"fontWeight":r[2]=t[o];break;case"fontSize":var i="";t[o]&&t[o].toString().indexOf("px")<0&&(i="px"),r[3]=t[o]+i;break;case"fontFamily":r[4]=t[o];break;case"fontOpacity":e.opacity=t[o];break;case"labelPosition":e.textPosition=t[o];break;case"labelAlign":e.textAlign=t[o];break;case"labelBaseline":e.textBaseline=t[o];break;case"labelRotation":e.textRotation=t[o];break;default:e[o]=t[o]}return e.textFont=r.join(" "),!0===n[0]&&!1===n[1]?e.brushType="fill":!1===n[0]&&!0===n[1]?e.brushType="stroke":!0===n[0]&&!0===n[1]?e.brushType="both":e.brushType="fill",null==e.lineWidth&&(e.lineWidth=1),e}},{key:"Background",value:function(t,e,r){var n=r||{},o=new g1(e[0],e[3],Math.abs(e[2]-e[0]),Math.abs(e[3]-e[1]));return o.style={fillColor:"#f3f3f3"},n.backgroundStyle&&V.copyAttributesWithClip(o.style,n.backgroundStyle),n.backgroundRadius&&(o.style.radius=n.backgroundRadius),o.clickable=!1,o.hoverable=!1,t.createShape(o)}},{key:"GraphAxis",value:function(t,e,r,n){var o=e,i=r||{},a=[],s=[],u=!!i.useXReferenceLine&&i.useXReferenceLine,l=i.axisYTick&&!isNaN(i.axisYTick)?i.axisYTick:0,c=[],f=[];if(0==l){if(f.push([o[0],o[3]-5]),f.push([o[0],o[1]]),i.axis3DParameter&&!isNaN(i.axis3DParameter)&&i.axis3DParameter>=15){var p=parseInt(i.axis3DParameter),h=[o[0]-p,o[1]+p];i.axisUseArrow?(c.push([h[0]+1.5,h[1]-7.5]),c.push([h[0]-1,h[1]+1]),c.push([h[0]+7.5,h[1]-1.5]),f.push([h[0],h[1]])):f.push([h[0],h[1]]),f.push([o[0],o[1]])}f.push([o[2]+5,o[1]])}else{var y=Math.abs(o[1]-o[3])/l,d=o[3];f.push([o[0],d-5]);for(var b=0;b<l;b++){if(f.push([o[0],d]),f.push([o[0]-5,d]),f.push([o[0],d]),u){var v=new n1([[o[0],d],[o[2],d]]);v.style={strokeColor:"#cfcfcf",strokeLinecap:"butt",strokeLineJoin:"round",strokeWidth:1},v.clickable=!1,v.hoverable=!1,i.xReferenceLineStyle&&V.copyAttributesWithClip(v.style,i.xReferenceLineStyle),a.push(t.createShape(v))}d+=y}if(f.push([o[0],o[1]]),i.axis3DParameter&&!isNaN(i.axis3DParameter)&&i.axis3DParameter>=15){var m=parseInt(i.axis3DParameter),g=[o[0]-m,o[1]+m];i.axisUseArrow?(c.push([g[0]+1.5,g[1]-7.5]),c.push([g[0]-1,g[1]+1]),c.push([g[0]+7.5,g[1]-1.5]),f.push([g[0],g[1]])):f.push([g[0],g[1]]),f.push([o[0],o[1]])}f.push([o[2]+5,o[1]])}if(i.axisUseArrow){var S=[[o[2]+5,o[1]+4],[o[2]+13,o[1]],[o[2]+5,o[1]-4]],w=[[o[0]-4,o[3]-5],[o[0],o[3]-13],[o[0]+4,o[3]-5]],O=new f1(S);O.style={fillColor:"#008acd"},V.copyAttributesWithClip(O.style,i.axisStyle),s.push(t.createShape(O));var _=new f1(w);if(_.style={fillColor:"#008acd"},V.copyAttributesWithClip(_.style,i.axisStyle),s.push(t.createShape(_)),i.axis3DParameter&&!isNaN(i.axis3DParameter)&&i.axis3DParameter>=15){var P=new f1(c);P.style={fillColor:"#008acd"},V.copyAttributesWithClip(P.style,i.axisStyle),s.push(t.createShape(P))}}var E=new n1(f);E.style={strokeLinecap:"butt",strokeLineJoin:"round",strokeColor:"#008acd",strokeWidth:1},i.axisStyle&&V.copyAttributesWithClip(E.style,i.axisStyle),E.clickable=!1,E.hoverable=!1;var C=[t.createShape(E)],T=[];if(i.axisYLabels&&i.axisYLabels.length&&i.axisYLabels.length>0){var j=i.axisYLabels,k=j.length,x=[0,0];if(i.axisYLabelsOffset&&i.axisYLabelsOffset.length&&(x=i.axisYLabelsOffset),1==k){var A=new M1(o[0]-5+x[0],o[3]+x[1],j[0]);A.style={labelAlign:"right"},i.axisYLabelsStyle&&V.copyAttributesWithClip(A.style,i.axisYLabelsStyle),A.clickable=!1,A.hoverable=!1,T.push(t.createShape(A))}else for(var I=o[3],N=Math.abs(o[1]-o[3])/(k-1),R=0;R<k;R++){var M=new M1(o[0]-5+x[0],I+x[1],j[R]);M.style={labelAlign:"right"},i.axisYLabelsStyle&&V.copyAttributesWithClip(M.style,i.axisYLabelsStyle),M.clickable=!1,M.hoverable=!1,T.push(t.createShape(M)),I+=N}}var L=[];if(i.axisXLabels&&i.axisXLabels.length&&i.axisXLabels.length>0){var B=i.axisXLabels,D=B.length,F=[0,0];if(i.axisXLabelsOffset&&i.axisXLabelsOffset.length&&(F=i.axisXLabelsOffset),n&&n.xPositions&&n.xPositions.length&&n.xPositions.length==D)for(var U=n.xPositions,G=0;G<D;G++){var q=new M1(U[G]+F[0],o[1]+F[1],B[G]);q.style={labelAlign:"center",labelBaseline:"top"},i.axisXLabelsStyle&&V.copyAttributesWithClip(q.style,i.axisXLabelsStyle),q.clickable=!1,q.hoverable=!1,L.push(t.createShape(q))}else if(1==D){var H=new M1(o[0]-5+F[0],o[1]+F[0],B[0]);H.style={labelAlign:"center",labelBaseline:"top"},i.axisXLabelsStyle&&V.copyAttributesWithClip(H.style,i.axisXLabelsStyle),H.clickable=!1,H.hoverable=!1,L.push(t.createShape(H))}else for(var z=o[0],J=Math.abs(o[2]-o[0])/(D-1),W=0;W<D;W++){var K=new M1(z+F[0],o[1]+F[1],B[W]);K.style={labelAlign:"center",labelBaseline:"top"},i.axisXLabelsStyle&&V.copyAttributesWithClip(K.style,i.axisXLabelsStyle),K.clickable=!1,K.hoverable=!1,L.push(t.createShape(K)),z+=J}}return a.concat(C).concat(T).concat(L).concat(s)}},{key:"ShapeStyleTool",value:function(t,e,r,n,o,i){var a=t||{};if(e&&V.copyAttributesWithClip(a,e),r&&r.length&&void 0!==o&&!isNaN(o)&&o>=0&&r[o]&&V.copyAttributesWithClip(a,r[o]),n&&n.length&&void 0!==i)for(var s=n,u=s.length,l=parseFloat(i),c=0;c<u;c++)if(s[c].start<=l&&l<s[c].end){V.copyAttributesWithClip(a,s[c].style);break}return a}}],(r=[{key:"destroy",value:function(){this.shapeParameters=null}},{key:"createShape",value:function(e){if(e&&(this.shapeParameters=e),!this.shapeParameters)return null;var r=this.shapeParameters;if(r instanceof Q0){var n=new Object;n.x=r.x,n.y=r.y,n.r=r.r,n=V.copyAttributesWithClip(n,r.style,["x","y"]);var o=new b3;return o.style=t.transformStyle(n),o.highlightStyle=t.transformStyle(r.highlightStyle),V.copyAttributesWithClip(o,r,["x","y","style","highlightStyle"]),o}if(r instanceof n1){if(!r.pointList)return null;var i=new Object;i.pointList=r.pointList,i=V.copyAttributesWithClip(i,r.style,["pointList"]);var a=new K3;return a.style=t.transformStyle(i),a.highlightStyle=t.transformStyle(r.highlightStyle),V.copyAttributesWithClip(a,r,["pointList","style","highlightStyle"]),a}if(r instanceof f1){if(!r.pointList)return null;var s=new Object;s.pointList=r.pointList,s=V.copyAttributesWithClip(s,r.style,["pointList"]);var u=new U3;return u.style=t.transformStyle(s),u.highlightStyle=t.transformStyle(r.highlightStyle),V.copyAttributesWithClip(u,r,["pointList","style","highlightStyle"]),u}if(r instanceof g1){if(!r.x&&!r.y&!r.width&!r.height)return null;var l=new Object;l.x=r.x,l.y=r.y,l.width=r.width,l.height=r.height,l=V.copyAttributesWithClip(l,r.style,["x","y","width","height"]);var c=new c5;return c.style=t.transformStyle(l),c.highlightStyle=t.transformStyle(r.highlightStyle),V.copyAttributesWithClip(c,r,["x","y","width","height","style","highlightStyle"]),c}if(r instanceof T1){var f=new Object;f.x=r.x,f.y=r.y,f.r=r.r,f.startAngle=r.startAngle,f.endAngle=r.endAngle,r.r0&&(f.r0=r.r0),r.clockWise&&(f.clockWise=r.clockWise),f=V.copyAttributesWithClip(f,r.style,["x","y","r","startAngle","endAngle","r0","endAngle"]);var p=new m5;return p.style=t.transformStyle(f),p.highlightStyle=t.transformStyle(r.highlightStyle),V.copyAttributesWithClip(p,r,["x","y","r","startAngle","endAngle","r0","endAngle","style","highlightStyle"]),p}if(r instanceof M1){var h=new Object;h.x=r.x,h.y=r.y,h.text=r.text,h=V.copyAttributesWithClip(h,r.style,["x","y","text"]);var y=new P3;return y.style=t.transformStyle(h),y.highlightStyle=t.transformStyle(r.highlightStyle),V.copyAttributesWithClip(y,r,["x","y","text","style","highlightStyle"]),y}if(r instanceof q1){var d=new Object;d.x=r.x,d.y=r.y,r.image&&(d.image=r.image),r.width&&(d.width=r.width),r.height&&(d.height=r.height),r.sx&&(d.sx=r.sx),r.sy&&(d.sy=r.sy),r.sWidth&&(d.sWidth=r.sWidth),r.sHeight&&(d.sHeight=r.sHeight),d=V.copyAttributesWithClip(d,r.style,["x","y","image","width","height","sx","sy","sWidth","sHeight"]);var b=new r5;return b.style=t.transformStyle(d),b.highlightStyle=t.transformStyle(r.highlightStyle),V.copyAttributesWithClip(b,r,["x","y","image","width","height","style","highlightStyle"]),b}if(r instanceof X1){var v=new Object;v.x=r.x,v.r=r.r,v.y=r.y,v=V.copyAttributesWithClip(v,r.style,["x","y","r"]);var m=new I3;return m.style=t.transformStyle(v),m.highlightStyle=t.transformStyle(r.highlightStyle),V.copyAttributesWithClip(m,r,["x","y","r","style","highlightStyle","lineWidth","text","textPosition"]),m}return null}}])&&S5(e.prototype,r),n&&S5(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function _5(t){"@babel/helpers - typeof";return(_5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function P5(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,E5(n.key),n)}}function E5(t){var e=function(t,e){if("object"!=_5(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=_5(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==_5(e)?e:String(e)}var C5=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&r&&r.map&&r.renderer&&(this.id=V.createUniqueID(this.CLASS_NAME+"_"),this.lonlat=null,this.location=[],this.data=e,this.shapes=[],this.layer=r,this.CLASS_NAME="SuperMap.Feature.Theme")}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.data=null,this.id=null,this.lonlat=null,this.location=null,this.shapes=null,this.layer=null}},{key:"getLocalXY",value:function(t){var e=this.layer.map.getResolution(),r=this.layer.map.getExtent();return t instanceof at||t instanceof yB?[t.x/e+-r.left/e,r.top/e-t.y/e]:t instanceof K?[t.lon/e+-r.left/e,r.top/e-t.lat/e]:null}}])&&P5(e.prototype,r),n&&P5(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function T5(t){"@babel/helpers - typeof";return(T5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function j5(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,k5(n.key),n)}}function k5(t){var e=function(t,e){if("object"!=T5(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=T5(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==T5(e)?e:String(e)}function x5(t,e,r){return e=I5(e),function(t,e){if(e&&("object"===T5(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],I5(t).constructor):e.apply(t,r))}function A5(){return(A5="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=I5(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function I5(t){return(I5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function N5(t,e){return(N5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var R5=function(t){function e(t,r,n,o,i,a){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(s=x5(this,e,[t,r,n,o,i,a])).shapeFactory=new O5,s.shapeParameters=null,s.RelativeCoordinate=!1,s.setting=null,s.origonPoint=null,s.chartBox=null,s.chartBounds=null,s.width=null,s.height=null,s.XOffset=0,s.YOffset=0,s.DVBParameter=null,s.dataViewBox=null,s.DVBCodomain=null,s.DVBCenterPoint=null,s.DVBUnitValue=null,s.DVBOrigonPoint=null,s.DVBWidth=null,s.DVBHeight=null,s.origonPointOffset=null,s.fields=n||[],s.dataValues=null,s.lonlat=i||s.data.geometry.getBounds().getCenterLonLat(),o&&o.width&&o.height&&o.codomain&&(s.setting=o),s.CLASS_NAME="SuperMap.Feature.Theme.Graph",s}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&N5(t,e)}(e,C5),r=e,(n=[{key:"destroy",value:function(){this.shapeFactory=null,this.shapeParameters=null,this.width=null,this.height=null,this.origonPoint=null,this.chartBox=null,this.dataViewBox=null,this.chartBounds=null,this.DVBParameter=null,this.DVBOrigonPoint=null,this.DVBCenterPoint=null,this.DVBWidth=null,this.DVBHeight=null,this.DVBCodomain=null,this.DVBUnitValue=null,this.origonPointOffset=null,this.XOffset=null,this.YOffset=null,this.fields=null,this.dataValues=null,this.setting=null,A5(I5(e.prototype),"destroy",this).call(this)}},{key:"initBaseParameter",value:function(){if(!this.setting)return!1;var t=this.setting;if(!(t.width&&t.height&&t.codomain))return!1;var e=void 0===t.decimalNumber||isNaN(t.decimalNumber)?-1:t.decimalNumber,r=C5.getDataValues(this.data,this.fields,e);this.dataValues=r||[],this.width=parseFloat(t.width),this.height=parseFloat(t.height),this.DVBCodomain=t.codomain,this.XOffset=t.XOffset?t.XOffset:0,this.YOffset=t.YOffset?t.YOffset:0,this.origonPoint=[],this.chartBox=[],this.dataViewBox=[],this.DVBParameter=t.dataViewBoxParameter?t.dataViewBoxParameter:[0,0,0,0],this.DVBOrigonPoint=[],this.DVBCenterPoint=[],this.origonPointOffset=[],this.resetLocation();var n=this.width,o=this.height,i=this.location;this.origonPoint=[i[0]-n/2,i[1]-o/2];var a=this.origonPoint;this.chartBox=[a[0],a[1]+o,a[0]+n,a[1]];var s=this.chartBox,u=this.DVBParameter;this.dataViewBox=[s[0]+u[0],s[1]-u[1],s[2]-u[2],s[3]+u[3]];var l=this.dataViewBox;return!(l[0]>=l[2]||l[1]<=l[3])&&(this.DVBOrigonPoint=[l[0],l[3]],this.DVBWidth=Math.abs(l[2]-l[0]),this.DVBHeight=Math.abs(l[1]-l[3]),this.DVBCenterPoint=[this.DVBOrigonPoint[0]+this.DVBWidth/2,this.DVBOrigonPoint[1]+this.DVBHeight/2],this.origonPointOffset=[this.DVBOrigonPoint[0]-a[0],this.DVBOrigonPoint[1]-a[1]],!0)}},{key:"resetLocation",value:function(t){t&&(this.lonlat=t);var e=this.getLocalXY(this.lonlat);e[0]+=this.XOffset,e[1]+=this.YOffset,this.location=e;var r=this.width,n=this.height,o=this.location;return this.chartBounds=new Z(o[0]-r/2,o[1]+n/2,o[0]+r/2,o[1]-n/2),this.resetLinearGradient(),o}},{key:"resetLinearGradient",value:function(){}},{key:"shapesConvertToRelativeCoordinate",value:function(){for(var t=this.shapes,e=this.location,r=0,n=t.length;r<n;r++){t[r].refOriginalPosition=e;var o=t[r].style;for(var i in o)switch(i){case"pointList":for(var a=o[i],s=0,u=a.length;s<u;s++)a[s][0]-=e[0],a[s][1]-=e[1];break;case"x":o[i]-=e[0];break;case"y":o[i]-=e[1]}}this.RelativeCoordinate=!0}},{key:"assembleShapes",value:function(){}},{key:"getLocalXY",value:function(t){return this.layer.getLocalXY(t)}}])&&j5(r.prototype,n),o&&j5(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function M5(t){"@babel/helpers - typeof";return(M5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function L5(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,B5(n.key),n)}}function B5(t){var e=function(t,e){if("object"!=M5(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=M5(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==M5(e)?e:String(e)}function D5(t,e,r){return e=U5(e),function(t,e){if(e&&("object"===M5(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],U5(t).constructor):e.apply(t,r))}function F5(){return(F5="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=U5(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function U5(t){return(U5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function G5(t,e){return(G5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}C5.getDataValues=function(t,e,r){if(!t.attributes)return!1;for(var n=[],o=t.attributes,i=0;i<e.length;i++)for(var a in o)if(a===e[i])try{!isNaN(r)&&r>=0?n.push(parseFloat(o[a].toString()).toFixed(r)):n.push(parseFloat(o[a].toString()))}catch(t){throw new Error("not a number")}return n.length===e.length&&n};var V5=function(t){function e(t,r,n,o,i){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(a=D5(this,e,[t,r,n,o,i])).CLASS_NAME="SuperMap.Feature.Theme.Bar",a}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&G5(t,e)}(e,R5),r=e,(n=[{key:"destroy",value:function(){F5(U5(e.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var t={showShadow:!0,shadowBlur:8,shadowColor:"rgba(100,100,100,0.8)",shadowOffsetX:2,shadowOffsetY:2},e=this.setting;if(e.barLinearGradient||(e.barLinearGradient=[["#00FF00","#00CD00"],["#00CCFF","#5E87A2"],["#00FF66","#669985"],["#CCFF00","#94A25E"],["#FF9900","#A2945E"]]),e.dataViewBoxParameter||(void 0===e.useAxis||e.useAxis?e.dataViewBoxParameter=[45,15,15,15]:e.dataViewBoxParameter=[5,5,5,5]),this.initBaseParameter()){var r=this.DVBCodomain;this.DVBUnitValue=(r[1]-r[0])/this.DVBHeight;var n=this.dataViewBox,o=this.dataValues;if(!(o.length<1)){for(var i=0,a=o.length;i<a;i++)if(o[i]<r[0]||o[i]>r[1])return;var s=this.calculateXShapeInfo();if(s){var u=s.xPositions,l=s.width;(void 0===e.useBackground||e.useBackground)&&this.shapes.push(O5.Background(this.shapeFactory,this.chartBox,e)),(void 0===e.useAxis||e.useAxis)&&(this.shapes=this.shapes.concat(O5.GraphAxis(this.shapeFactory,n,e,s)));for(var c=0;c<o.length;c++){var f=n[1]-(o[c]-r[0])/this.DVBUnitValue,p=[[u[c]-l/2,n[1]-1],[u[c]+l/2,n[1]-1],[u[c]+l/2,f],[u[c]-l/2,f]],h=new f1(p);if(void 0===e.showShadow||e.showShadow){if(e.barShadowStyle){var y=e.barShadowStyle;y.shadowBlur&&(t.shadowBlur=y.shadowBlur),y.shadowColor&&(t.shadowColor=y.shadowColor),y.shadowOffsetX&&(t.shadowOffsetX=y.shadowOffsetX),y.shadowOffsetY&&(t.shadowOffsetY=y.shadowOffsetY)}h.style={},V.copyAttributesWithClip(h.style,t)}h.refDataID=this.data.id,h.dataInfo={field:this.fields[c],value:o[c]},void 0!==e.barHoverAble&&(h.hoverable=e.barHoverAble),void 0!==e.barClickAble&&(h.clickable=e.barClickAble),this.shapes.push(this.shapeFactory.createShape(h))}this.shapesConvertToRelativeCoordinate()}}}}},{key:"calculateXShapeInfo",value:function(){var t,e=this.dataViewBox,r=this.setting,n=this.dataValues.length;if(n<1)return null;var o=[],i=0,a=this.DVBWidth;if(r.xShapeBlank&&r.xShapeBlank.length&&3==r.xShapeBlank.length){var s=a-((t=r.xShapeBlank)[0]+t[2]+(n-1)*t[1]);if(s<=n)return null;i=s/n}else t=[i=a/(2*n+1),i,i];for(var u=0,l=0;l<n;l++)0==l?u=t[0]+i/2:u+=i+t[1],o.push(e[0]+u);return{xPositions:o,width:i}}},{key:"resetLinearGradient",value:function(){if(this.RelativeCoordinate)for(var t=this.shapes.length,e=this.setting.barLinearGradient,r=-1,n=0;n<t;n++){var o=this.shapes[n];if("SuperMap.LevelRenderer.Shape.SmicPolygon"===o.CLASS_NAME){var i=o.style,a=this.location[0]+i.pointList[0][0],s=this.location[0]+i.pointList[1][0];++r>=e.length&&(r%=e.length);var u=e[r][0],l=e[r][1],c=(new V$).getLinearGradient(a,0,s,0,[[0,u],[1,l]]);o.style.color=c}}}}])&&L5(r.prototype,n),o&&L5(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function q5(t){"@babel/helpers - typeof";return(q5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function H5(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,z5(n.key),n)}}function z5(t){var e=function(t,e){if("object"!=q5(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=q5(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==q5(e)?e:String(e)}function J5(t,e,r){return e=K5(e),function(t,e){if(e&&("object"===q5(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],K5(t).constructor):e.apply(t,r))}function W5(){return(W5="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=K5(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function K5(t){return(K5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Q5(t,e){return(Q5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Y5=function(t){function e(t,r,n,o,i){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(a=J5(this,e,[t,r,n,o,i])).CLASS_NAME="SuperMap.Feature.Theme.Bar3D",a}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Q5(t,e)}(e,R5),r=e,(n=[{key:"destroy",value:function(){W5(K5(e.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var t=this.setting;if(t.dataViewBoxParameter||(void 0===t.useAxis||t.useAxis?t.dataViewBoxParameter=[45,25,20,20]:t.dataViewBoxParameter=[5,5,5,5]),t.axisUseArrow=void 0===t.axisUseArrow||t.axisUseArrow,t.axisXLabelsOffset=void 0!==t.axisXLabelsOffset?t.axisXLabelsOffset:[-10,10],this.initBaseParameter()){var e=this.DVBCodomain;this.DVBUnitValue=(e[1]-e[0])/this.DVBHeight;var r=this.dataViewBox,n=this.dataValues;if(!(n.length<1)){for(var o=0,i=n.length;o<i;o++)if(n[o]<e[0]||n[o]>e[1])return;var a=this.calculateXShapeInfo();if(a){var s=a.xPositions,u=a.width;(void 0===t.useBackground||t.useBackground)&&this.shapes.push(O5.Background(this.shapeFactory,this.chartBox,t)),(!t.axis3DParameter||isNaN(t.axis3DParameter)||t.axis3DParameter<15)&&(t.axis3DParameter=20),(void 0===t.useAxis||t.useAxis)&&(this.shapes=this.shapes.concat(O5.GraphAxis(this.shapeFactory,r,t,a)));for(var l=t.bar3DParameter&&!isNaN(t.bar3DParameter)?t.bar3DParameter:10,c=0;c<n.length;c++){var f=r[1]-(n[c]-e[0])/this.DVBUnitValue,p=s[c]-u/2,h=s[c]+u/2,y=[[p,f],[h,f],[h-l,f+l],[p-l,f+l]],d=[[h,f],[h-l,f+l],[h-l,r[1]+l],[h,r[1]]],b=[[p-l,r[1]+l],[h-l,r[1]+l],[h-l,f+l],[p-l,f+l]];l<=0&&(b=[[p,r[1]],[h,r[1]],[h,f],[p,f]]);var v=new f1(y),m=new f1(d),g=new f1(b);t.barSideStyle=t.barSideStyle?t.barSideStyle:t.barFaceStyle,t.barSideStyleByFields=t.barSideStyleByFields?t.barSideStyleByFields:t.barFaceStyleByFields,t.barSideStyleByCodomain=t.barSideStyleByCodomain?t.barSideStyleByCodomain:t.barFaceStyleByCodomain,t.barTopStyle=t.barTopStyle?t.barTopStyle:t.barFaceStyle,t.barTopStyleByFields=t.barTopStyleByFields?t.barTopStyleByFields:t.barFaceStyleByFields,t.barTopStyleByCodomain=t.barTopStyleByCodomain?t.barTopStyleByCodomain:t.barFaceStyleByCodomain,g.style=O5.ShapeStyleTool({stroke:!0,strokeColor:"#ffffff",fillColor:"#ee9900"},t.barFaceStyle,t.barFaceStyleByFields,t.barFaceStyleByCodomain,c,n[c]),m.style=O5.ShapeStyleTool({stroke:!0,strokeColor:"#ffffff",fillColor:"#ee9900"},t.barSideStyle,t.barSideStyleByFields,t.barSideStyleByCodomain,c,n[c]),v.style=O5.ShapeStyleTool({stroke:!0,strokeColor:"#ffffff",fillColor:"#ee9900"},t.barTopStyle,t.barTopStyleByFields,t.barTopStyleByCodomain,c,n[c]),t.barSideHoverStyle=t.barSideHoverStyle?t.barSideHoverStyle:t.barFaceHoverStyle,t.barTopHoverStyle=t.barTopHoverStyle?t.barTopHoverStyle:t.barFaceHoverStyle,g.highlightStyle=O5.ShapeStyleTool({stroke:!0},t.barFaceHoverStyle),m.highlightStyle=O5.ShapeStyleTool({stroke:!0},t.barSideHoverStyle),v.highlightStyle=O5.ShapeStyleTool({stroke:!0},t.barTopHoverStyle),v.refDataID=m.refDataID=g.refDataID=this.data.id,v.isHoverByRefDataID=m.isHoverByRefDataID=g.isHoverByRefDataID=!0,v.refDataHoverGroup=m.refDataHoverGroup=g.refDataHoverGroup=V.createUniqueID("lr_shg"),v.dataInfo=m.dataInfo=g.dataInfo={field:this.fields[c],value:n[c]},void 0!==t.barHoverAble&&(v.hoverable=m.hoverable=g.hoverable=t.barHoverAble),void 0!==t.barClickAble&&(v.clickable=m.clickable=g.clickable=t.barClickAble),this.shapes.push(this.shapeFactory.createShape(m)),this.shapes.push(this.shapeFactory.createShape(v)),this.shapes.push(this.shapeFactory.createShape(g))}this.shapesConvertToRelativeCoordinate()}}}}},{key:"calculateXShapeInfo",value:function(){var t,e=this.dataViewBox,r=this.setting,n=this.dataValues.length;if(n<1)return null;var o=[],i=0,a=this.DVBWidth;if(r.xShapeBlank&&r.xShapeBlank.length&&3==r.xShapeBlank.length){var s=a-((t=r.xShapeBlank)[0]+t[2]+(n-1)*t[1]);if(s<=n)return null;i=s/n}else t=[i=a/(2*n+1),i,i];for(var u=0,l=0;l<n;l++)0==l?u=t[0]+i/2:u+=i+t[1],o.push(e[0]+u);return{xPositions:o,width:i}}}])&&H5(r.prototype,n),o&&H5(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function X5(t){"@babel/helpers - typeof";return(X5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Z5(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,$5(n.key),n)}}function $5(t){var e=function(t,e){if("object"!=X5(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=X5(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==X5(e)?e:String(e)}function t4(t,e,r){return e=r4(e),function(t,e){if(e&&("object"===X5(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],r4(t).constructor):e.apply(t,r))}function e4(){return(e4="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=r4(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function r4(t){return(r4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function n4(t,e){return(n4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var o4=function(t){function e(t,r,n,o,i,a){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(s=t4(this,e,[t,r,n,o,i,a])).setting=null,o&&o.codomain&&(s.setting=o,s.DVBCodomain=s.setting.codomain),s.CLASS_NAME="SuperMap.Feature.Theme.RankSymbol",s}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&n4(t,e)}(e,R5),r=e,(n=[{key:"destroy",value:function(){this.setting=null,e4(r4(e.prototype),"destroy",this).call(this)}},{key:"initBaseParameter",value:function(){if(!this.setting)return!1;var t=this.setting;t.XOffset&&(this.XOffset=t.XOffset),t.YOffset&&(this.YOffset=t.YOffset),this.XOffset=t.XOffset?t.XOffset:0,this.YOffset=t.YOffset?t.YOffset:0,this.origonPoint=[],this.chartBox=[],this.dataViewBox=[],this.DVBParameter=t.dataViewBoxParameter?t.dataViewBoxParameter:[0,0,0,0],this.DVBOrigonPoint=[],this.DVBCenterPoint=[],this.origonPointOffset=[],this.resetLocation();var e=this.width,r=this.height,n=this.location;this.origonPoint=[n[0]-e/2,n[1]-r/2];var o=this.origonPoint;this.chartBox=[o[0],o[1]+r,o[0]+e,o[1]];var i=this.chartBox,a=this.DVBParameter;this.dataViewBox=[i[0]+a[0],i[1]-a[1],i[2]-a[2],i[3]+a[3]];var s=this.dataViewBox;return!(s[0]>=s[2]||s[1]<=s[3])&&(this.DVBOrigonPoint=[s[0],s[3]],this.DVBWidth=Math.abs(s[2]-s[0]),this.DVBHeight=Math.abs(s[1]-s[3]),this.DVBCenterPoint=[this.DVBOrigonPoint[0]+this.DVBWidth/2,this.DVBOrigonPoint[1]+this.DVBHeight/2],this.origonPointOffset=[this.DVBOrigonPoint[0]-o[0],this.DVBOrigonPoint[1]-o[1]],!0)}}])&&Z5(r.prototype,n),o&&Z5(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function i4(t){"@babel/helpers - typeof";return(i4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a4(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,s4(n.key),n)}}function s4(t){var e=function(t,e){if("object"!=i4(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=i4(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==i4(e)?e:String(e)}function u4(t,e,r){return e=c4(e),function(t,e){if(e&&("object"===i4(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],c4(t).constructor):e.apply(t,r))}function l4(){return(l4="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=c4(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function c4(t){return(c4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f4(t,e){return(f4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var p4=function(t){function e(t,r,n,o,i){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(a=u4(this,e,[t,r,n,o,i])).CLASS_NAME="SuperMap.Feature.Theme.Circle",a}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f4(t,e)}(e,o4),r=e,(n=[{key:"destroy",value:function(){l4(c4(e.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){if(!this.setting)return!1;var t=this.setting;if(!t.codomain)return!1;var e=void 0===t.decimalNumber||isNaN(t.decimalNumber)?-1:t.decimalNumber,r=C5.getDataValues(this.data,this.fields,e);this.dataValues=r||[];var n=this.dataValues;t.maxR||(t.maxR=100),t.minR||(t.minR=0);var o=this.DVBCodomain;o&&o[1]-o[0]>0?this.DVBUnitValue=t.maxR/(o[1]-o[0]):this.DVBUnitValue=t.maxR;var i=this.DVBUnitValue,a=n[0]*i+t.minR;if(this.width=2*a,this.height=2*a,this.initBaseParameter()&&(!o||!(n[0]<o[0]||n[0]>o[1]))){var s=this.DVBCenterPoint,u=new X1(s[0],s[1],a);u.style=O5.ShapeStyleTool(null,t.circleStyle,null,null,0),void 0!==t.fillColor?u.style.fillColor=t.fillColor:u.style.fillColor="#ff9277",u.highlightStyle=O5.ShapeStyleTool(null,t.circleHoverStyle),void 0!==t.circleHoverAble&&(u.hoverable=t.circleHoverAble),void 0!==t.circleClickAble&&(u.clickable=t.circleClickAble),u.refDataID=this.data.id,u.dataInfo={field:this.fields[0],r:a,value:n[0]},this.shapes.push(this.shapeFactory.createShape(u)),this.shapesConvertToRelativeCoordinate()}}}])&&a4(r.prototype,n),o&&a4(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function h4(t){"@babel/helpers - typeof";return(h4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function y4(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,d4(n.key),n)}}function d4(t){var e=function(t,e){if("object"!=h4(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=h4(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==h4(e)?e:String(e)}function b4(t,e,r){return e=m4(e),function(t,e){if(e&&("object"===h4(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],m4(t).constructor):e.apply(t,r))}function v4(){return(v4="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=m4(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function m4(t){return(m4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function g4(t,e){return(g4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var S4=function(t){function e(t,r,n,o,i,a){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(s=b4(this,e,[t,r,n,o,i,a])).CLASS_NAME="SuperMap.Feature.Theme.Line",s}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&g4(t,e)}(e,R5),r=e,(n=[{key:"destroy",value:function(){v4(m4(e.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var t=this.setting;if(t.dataViewBoxParameter||(void 0===t.useAxis||t.useAxis?t.dataViewBoxParameter=[45,15,15,15]:t.dataViewBoxParameter=[5,5,5,5]),this.initBaseParameter()){var e=this.dataViewBox,r=this.DVBCodomain;this.DVBUnitValue=(r[1]-r[0])/this.DVBHeight;var n=this.DVBUnitValue,o=this.dataValues;if(!(o.length<1)){var i=this.calculateXShapeInfo();if(i){var a,s,u=i.xPositions;(void 0===t.useBackground||t.useBackground)&&this.shapes.push(O5.Background(this.shapeFactory,this.chartBox,t)),this.shapes=this.shapes.concat(O5.GraphAxis(this.shapeFactory,e,t,i));for(var l=[],c=[],f=0,p=o.length;f<p;f++){if(o[f]<r[0]||o[f]>r[1])return null;a=u[f],s=e[1]-(o[f]-r[0])/n;var h=new Q0(a,s);h.style=O5.ShapeStyleTool({fillColor:"#ee9900"},t.pointStyle,t.pointStyleByFields,t.pointStyleByCodomain,f,o[f]),h.highlightStyle=O5.ShapeStyleTool(null,t.pointHoverStyle),void 0!==t.pointHoverAble&&(h.hoverable=t.pointHoverAble),void 0!==t.pointClickAble&&(h.clickable=t.pointClickAble),h.refDataID=this.data.id,h.dataInfo={field:this.fields[f],value:o[f]},c.push(this.shapeFactory.createShape(h));var y=[a,s];l.push(y)}var d=new n1(l);d.style=O5.ShapeStyleTool({strokeColor:"#ee9900"},t.lineStyle),d.clickable=!1,d.hoverable=!1;var b=this.shapeFactory.createShape(d);this.shapes.push(b),this.shapes=this.shapes.concat(c),this.shapesConvertToRelativeCoordinate()}}}}},{key:"calculateXShapeInfo",value:function(){var t,e=this.dataViewBox,r=this.setting,n=this.dataValues.length;if(n<1)return null;var o=[],i=this.DVBWidth,a=0;if(r.xShapeBlank&&r.xShapeBlank.length&&2==r.xShapeBlank.length){var s=i-((t=r.xShapeBlank)[0]+t[1]);if(s<=n)return null;a=s/(n-1)}else t=[a=i/(n+1),a,a];for(var u=0,l=0;l<n;l++)0==l?u=t[0]:u+=a,o.push(e[0]+u);return{xPositions:o,width:0}}}])&&y4(r.prototype,n),o&&y4(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function w4(t){"@babel/helpers - typeof";return(w4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function O4(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_4(n.key),n)}}function _4(t){var e=function(t,e){if("object"!=w4(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=w4(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==w4(e)?e:String(e)}function P4(t,e,r){return e=C4(e),function(t,e){if(e&&("object"===w4(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],C4(t).constructor):e.apply(t,r))}function E4(){return(E4="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=C4(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function C4(t){return(C4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function T4(t,e){return(T4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var j4=function(t){function e(t,r,n,o,i){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(a=P4(this,e,[t,r,n,o,i])).CLASS_NAME="SuperMap.Feature.Theme.Pie",a}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&T4(t,e)}(e,R5),r=e,(n=[{key:"destroy",value:function(){E4(C4(e.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var t=this.setting,e=[{fillColor:"#ff9277"},{fillColor:"#dddd00"},{fillColor:"#ffc877"},{fillColor:"#bbe3ff"},{fillColor:"#d5ffbb"},{fillColor:"#bbbbff"},{fillColor:"#ddb000"},{fillColor:"#b0dd00"},{fillColor:"#e2bbff"},{fillColor:"#ffbbe3"},{fillColor:"#ff7777"},{fillColor:"#ff9900"},{fillColor:"#83dd00"},{fillColor:"#77e3ff"},{fillColor:"#778fff"},{fillColor:"#c877ff"},{fillColor:"#ff77ab"},{fillColor:"#ff6600"},{fillColor:"#aa8800"},{fillColor:"#77c7ff"},{fillColor:"#ad77ff"},{fillColor:"#ff77ff"},{fillColor:"#dd0083"},{fillColor:"#777700"},{fillColor:"#00aa00"},{fillColor:"#0088aa"},{fillColor:"#8400dd"},{fillColor:"#aa0088"},{fillColor:"#dd0000"},{fillColor:"#772e00"}];if(this.initBaseParameter()){t.useBackground&&this.shapes.push(O5.Background(this.shapeFactory,this.chartBox,t));var r=this.dataValues;if(!(r.length<1)){for(var n=this.DVBCodomain,o=0;o<r.length;o++)if(r[o]<n[0]||r[o]>n[1])return;for(var i=0,a=0;a<r.length;a++)i+=Math.abs(r[a]);this.DVBUnitValue=360/i;for(var s=this.DVBUnitValue,u=this.DVBCenterPoint,l=0,c=0,f=l,p=this.DVBHeight<this.DVBWidth?this.DVBHeight/2:this.DVBWidth/2,h=0;h<r.length;h++){var y=Math.abs(r[h]);(c=0===h?l+y*s:h===y.length-1?f:l+y*s)-l>=360&&(c=359.9999999);var d=new T1(u[0],u[1],p,l,c);if(void 0===t.sectorStyleByFields){var b=h%e.length;d.style=O5.ShapeStyleTool(null,t.sectorStyle,e,null,b)}else d.style=O5.ShapeStyleTool(null,t.sectorStyle,t.sectorStyleByFields,t.sectorStyleByCodomain,h,r[h]);d.highlightStyle=O5.ShapeStyleTool(null,t.sectorHoverStyle),void 0!==t.sectorHoverAble&&(d.hoverable=t.sectorHoverAble),void 0!==t.sectorClickAble&&(d.clickable=t.sectorClickAble),d.refDataID=this.data.id,d.dataInfo={field:this.fields[h],value:r[h]},this.shapes.push(this.shapeFactory.createShape(d)),l=c}this.shapesConvertToRelativeCoordinate()}}}}])&&O4(r.prototype,n),o&&O4(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function k4(t){"@babel/helpers - typeof";return(k4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function x4(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,A4(n.key),n)}}function A4(t){var e=function(t,e){if("object"!=k4(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=k4(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==k4(e)?e:String(e)}function I4(t,e,r){return e=R4(e),function(t,e){if(e&&("object"===k4(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],R4(t).constructor):e.apply(t,r))}function N4(){return(N4="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=R4(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function R4(t){return(R4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function M4(t,e){return(M4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var L4=function(t){function e(t,r,n,o,i,a){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(s=I4(this,e,[t,r,n,o,i,a])).CLASS_NAME="SuperMap.Feature.Theme.Point",s}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&M4(t,e)}(e,R5),r=e,(n=[{key:"destroy",value:function(){N4(R4(e.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var t=this.setting;if(t.dataViewBoxParameter||(void 0===t.useAxis||t.useAxis?t.dataViewBoxParameter=[45,15,15,15]:t.dataViewBoxParameter=[5,5,5,5]),this.initBaseParameter()){var e=this.dataViewBox,r=this.DVBCodomain;this.DVBUnitValue=(r[1]-r[0])/this.DVBHeight;var n=this.DVBUnitValue,o=this.dataValues,i=this.calculateXShapeInfo();if(i){var a,s,u=i.xPositions;(void 0===t.useBackground||t.useBackground)&&this.shapes.push(O5.Background(this.shapeFactory,this.chartBox,t)),this.shapes=this.shapes.concat(O5.GraphAxis(this.shapeFactory,e,t,i));for(var l=0,c=o.length;l<c;l++){if(o[l]<r[0]||o[l]>r[1])return null;a=u[l],s=e[1]-(o[l]-r[0])/n;var f=new Q0(a,s);f.style=O5.ShapeStyleTool({fillColor:"#ee9900"},t.pointStyle,t.pointStyleByFields,t.pointStyleByCodomain,l,o[l]),f.highlightStyle=O5.ShapeStyleTool(null,t.pointHoverStyle),void 0!==t.pointHoverAble&&(f.hoverable=t.pointHoverAble),void 0!==t.pointClickAble&&(f.clickable=t.pointClickAble),f.refDataID=this.data.id,f.dataInfo={field:this.fields[l],value:o[l]},this.shapes.push(this.shapeFactory.createShape(f))}this.shapesConvertToRelativeCoordinate()}}}},{key:"calculateXShapeInfo",value:function(){var t,e=this.dataViewBox,r=this.setting,n=this.dataValues.length;if(n<1)return null;var o=[],i=this.DVBWidth,a=0;if(r.xShapeBlank&&r.xShapeBlank.length&&2==r.xShapeBlank.length){var s=i-((t=r.xShapeBlank)[0]+t[1]);if(s<=n)return null;a=s/(n-1)}else t=[a=i/(n+1),a,a];for(var u=0,l=0;l<n;l++)0==l?u=t[0]:u+=a,o.push(e[0]+u);return{xPositions:o,width:0}}}])&&x4(r.prototype,n),o&&x4(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function B4(t){"@babel/helpers - typeof";return(B4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function D4(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,F4(n.key),n)}}function F4(t){var e=function(t,e){if("object"!=B4(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=B4(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==B4(e)?e:String(e)}function U4(t,e,r){return e=V4(e),function(t,e){if(e&&("object"===B4(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],V4(t).constructor):e.apply(t,r))}function G4(){return(G4="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=V4(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function V4(t){return(V4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function q4(t,e){return(q4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var H4=function(t){function e(t,r,n,o,i){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(a=U4(this,e,[t,r,n,o,i])).CLASS_NAME="SuperMap.Feature.Theme.Ring",a}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&q4(t,e)}(e,R5),r=e,(n=[{key:"destroy",value:function(){G4(V4(e.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){if(this.initBaseParameter()){var t=[{fillColor:"#ff9277"},{fillColor:"#dddd00"},{fillColor:"#ffc877"},{fillColor:"#bbe3ff"},{fillColor:"#d5ffbb"},{fillColor:"#bbbbff"},{fillColor:"#ddb000"},{fillColor:"#b0dd00"},{fillColor:"#e2bbff"},{fillColor:"#ffbbe3"},{fillColor:"#ff7777"},{fillColor:"#ff9900"},{fillColor:"#83dd00"},{fillColor:"#77e3ff"},{fillColor:"#778fff"},{fillColor:"#c877ff"},{fillColor:"#ff77ab"},{fillColor:"#ff6600"},{fillColor:"#aa8800"},{fillColor:"#77c7ff"},{fillColor:"#ad77ff"},{fillColor:"#ff77ff"},{fillColor:"#dd0083"},{fillColor:"#777700"},{fillColor:"#00aa00"},{fillColor:"#0088aa"},{fillColor:"#8400dd"},{fillColor:"#aa0088"},{fillColor:"#dd0000"},{fillColor:"#772e00"}],e=this.setting;e.useBackground&&this.shapes.push(O5.Background(this.shapeFactory,this.chartBox,e));var r=this.dataValues;if(!(r.length<1)){for(var n=this.DVBCodomain,o=0;o<r.length;o++)if(r[o]<n[0]||r[o]>n[1])return;for(var i=0,a=0;a<r.length;a++)i+=Math.abs(r[a]);this.DVBUnitValue=360/i;for(var s=this.DVBUnitValue,u=this.DVBCenterPoint,l=0,c=0,f=l,p=this.DVBHeight<this.DVBWidth?this.DVBHeight/2:this.DVBWidth/2,h=e.innerRingRadius>=0&&e.innerRingRadius<p,y=void 0!==e.innerRingRadius&&!isNaN(e.innerRingRadius)&&h?e.innerRingRadius:0,d=0;d<r.length;d++){var b=Math.abs(r[d]);c=0===d?l+b*s:d===b.length-1?f:l+b*s;var v=new T1(u[0],u[1],p,l,c,y);if(void 0===e.sectorStyleByFields){var m=d%t.length;v.style=O5.ShapeStyleTool(null,e.sectorStyle,t,null,m)}else v.style=O5.ShapeStyleTool(null,e.sectorStyle,e.sectorStyleByFields,e.sectorStyleByCodomain,d,r[d]);v.highlightStyle=O5.ShapeStyleTool(null,e.sectorHoverStyle),void 0!==e.sectorHoverAble&&(v.hoverable=e.sectorHoverAble),void 0!==e.sectorClickAble&&(v.clickable=e.sectorClickAble),v.refDataID=this.data.id,v.dataInfo={field:this.fields[d],value:r[d]},this.shapes.push(this.shapeFactory.createShape(v)),l=c}this.shapesConvertToRelativeCoordinate()}}}}])&&D4(r.prototype,n),o&&D4(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function z4(t){"@babel/helpers - typeof";return(z4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function J4(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,W4(n.key),n)}}function W4(t){var e=function(t,e){if("object"!=z4(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=z4(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==z4(e)?e:String(e)}function K4(t,e,r){return e=Z4(e),Q4(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],Z4(t).constructor):e.apply(t,r))}function Q4(t,e){if(e&&("object"===z4(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Y4(t)}function Y4(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function X4(){return(X4="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Z4(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Z4(t){return(Z4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function $4(t,e){return($4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var t6=function(t){function e(t,r,n,o,i){var a;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),a=K4(this,e,[t,r]),!t.geometry)return Q4(a);if(!(t.geometry instanceof j))return Q4(a);a.dataBounds=t.geometry.getBounds(),a.nodesClipPixel=2,a.isHoverAble=!0,a.isMultiHover=!0,a.isClickAble=!0,a.highlightStyle=null,a.shapeOptions={},a.style=n||{},a.CLASS_NAME="SuperMap.Feature.Theme.Vector",a.style=n||{},o&&V.copyAttributesWithClip(Y4(a),o,["shapeOptions","dataBounds"]),i&&V.copyAttributesWithClip(a.shapeOptions,i);var s=t.geometry;return a.lonlat=a.dataBounds.getCenterLonLat(),a.location=a.getLocalXY(a.lonlat),s instanceof Ht?a.lineToTF(s):s instanceof Lt?a.lineToTF(s):s instanceof jt||(s instanceof wt?a.multiPointToTF(s):s instanceof Ae?a.multiLineStringToTF(s):s instanceof De?a.multiPolygonToTF(s):s instanceof Xt?a.polygonToTF(s):s instanceof yt||(s instanceof at?a.pointToTF(s):s instanceof yJ?a.rectangleToTF(s):s instanceof yB&&a.geoTextToTF(s))),a}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$4(t,e)}(e,C5),r=e,(n=[{key:"destroy",value:function(){this.style=null,this.dataBounds=null,this.nodesClipPixel=null,this.isHoverAble=null,this.isMultiHover=null,this.isClickAble=null,this.highlightStyle=null,this.shapeOptions=null,X4(Z4(e.prototype),"destroy",this).call(this)}},{key:"lineToTF",value:function(t){for(var e=t.components,r=[],n=[],o=this.location,i=[],a=this.nodesClipPixel,s=0;s<e.length;s++){var u=e[s];if(n=[],r=this.getLocalXY(u),n[0]=r[0]-o[0],n[1]=r[1]-o[1],i.length>0){var l=i[i.length-1];if(Math.abs(l[0]-n[0])<=a&&Math.abs(l[1]-n[1])<=a)continue}i.push(n)}if(i.length<2)return null;var c=new Object;(c=V.copyAttributesWithClip(c,this.style,["pointList"])).pointList=i;var f=new K3({style:c,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(f.highlightStyle=this.highlightStyle),f.refOriginalPosition=this.location,f.refDataID=this.data.id,f.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&V.copyAttributesWithClip(f,this.shapeOptions),this.shapes.push(f)}},{key:"multiPointToTF",value:function(t){for(var e=t.components,r=[],n=[],o=this.location,i=[],a=this.nodesClipPixel,s=0;s<e.length;s++){var u=e[s];if(n=[],r=this.getLocalXY(u),n[0]=r[0]-o[0],n[1]=r[1]-o[1],i.length>0){var l=i[i.length-1];if(Math.abs(l[0]-n[0])<=a&&Math.abs(l[1]-n[1])<=a)continue}i.push(n);var c=new Object;c.r=6,(c=V.copyAttributesWithClip(c,this.style)).x=n[0],c.y=n[1];var f=new b3({style:c,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(f.highlightStyle=this.highlightStyle),f.refOriginalPosition=o,f.refDataID=this.data.id,f.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&V.copyAttributesWithClip(f,this.shapeOptions),this.shapes.push(f)}}},{key:"multiLineStringToTF",value:function(t){for(var e=t.components,r=0;r<e.length;r++){var n=e[r];this.lineToTF(n)}}},{key:"multiPolygonToTF",value:function(t){for(var e=t.components,r=0;r<e.length;r++){var n=e[r];this.polygonToTF(n)}}},{key:"pointToTF",value:function(t){var e=this.location,r=this.getLocalXY(t),n=new Object;n.r=6,(n=V.copyAttributesWithClip(n,this.style)).x=r[0]-e[0],n.y=r[1]-e[1];var o=new b3({style:n,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(o.highlightStyle=this.highlightStyle),o.refOriginalPosition=e,o.refDataID=this.data.id,o.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&V.copyAttributesWithClip(o,this.shapeOptions),this.shapes.push(o)}},{key:"polygonToTF",value:function(t){for(var e=t.components,r=[],n=[],o=this.location,i=[],a=[],s=[],u=this.nodesClipPixel,l=0;l<e.length;l++){var c=e[l].components;if(0===l){i=[];for(var f=0;f<c.length;f++){if(n=[],r=this.getLocalXY(c[f]),n[0]=r[0]-o[0],n[1]=r[1]-o[1],i.length>0){var p=i[i.length-1];if(Math.abs(p[0]-n[0])<=u&&Math.abs(p[1]-n[1])<=u)continue}i.push(n)}}else{a=[];for(var h=0;h<c.length;h++){if(n=[],r=this.getLocalXY(c[h]),n[0]=r[0]-o[0],n[1]=r[1]-o[1],a.length>0){var y=a[a.length-1];if(Math.abs(y[0]-n[0])<=u&&Math.abs(y[1]-n[1])<=u)continue}a.push(n)}}a.length<2||s.push(a)}if(!(i.length<2)){var d={};(d=V.copyAttributesWithClip(d,this.style,["pointList"])).pointList=i;var b=new U3({style:d,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(b.highlightStyle=this.highlightStyle),b.refOriginalPosition=this.location,b.refDataID=this.data.id,b.isHoverByRefDataID=this.isMultiHover,s.length>0&&(b.holePolygonPointLists=s),this.shapeOptions&&V.copyAttributesWithClip(b,this.shapeOptions),this.shapes.push(b)}}},{key:"rectangleToTF",value:function(t){var e=this.location,r=new K(t.x,t.y),n=this.layer.map.getResolution(),o=this.getLocalXY(r),i=new Object;i.r=6,(i=V.copyAttributesWithClip(i,this.style)).x=o[0]-e[0],i.y=o[1]-e[1]-2*t.width/n,i.width=t.width/n,i.height=t.height/n;var a=new c5({style:i,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(a.highlightStyle=this.highlightStyle),a.refOriginalPosition=e,a.refDataID=this.data.id,a.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&V.copyAttributesWithClip(a,this.shapeOptions),this.shapes.push(a)}},{key:"geoTextToTF",value:function(t){var e=this.location,r=this.getLocalXY(t),n=new Object;n.r=6,(n=V.copyAttributesWithClip(n,this.style,["x","y","text"])).x=r[0]-e[0],n.y=r[1]-e[1],n.text=t.text;var o=new P3({style:n,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(o.highlightStyle=this.highlightStyle),o.refOriginalPosition=e,o.refDataID=this.data.id,o.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&V.copyAttributesWithClip(o,this.shapeOptions),this.shapes.push(o)}},{key:"updateAndAddShapes",value:function(){var t=this.getLocalXY(this.lonlat);this.location=t;for(var e=this.layer.renderer,r=0,n=this.shapes.length;r<n;r++){var o=this.shapes[r];o.refOriginalPosition=t,e.addShape(o)}}},{key:"getShapesCount",value:function(){return this.shapes.length}},{key:"getLocalXY",value:function(t){return this.layer.getLocalXY(t)}}])&&J4(r.prototype,n),o&&J4(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function e6(t){"@babel/helpers - typeof";return(e6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r6(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n6(n.key),n)}}function n6(t){var e=function(t,e){if("object"!=e6(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=e6(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==e6(e)?e:String(e)}function o6(t,e,r){return e=s6(e),function(t,e){if(e&&("object"===e6(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return i6(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],s6(t).constructor):e.apply(t,r))}function i6(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function a6(){return(a6="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=s6(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function s6(t){return(s6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u6(t,e){return(u6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var l6=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=o6(this,e,[t]),t=t||{},r.id=null,r.type="group",r.clipShape=null,r._children=[],r._storage=null,r.__dirty=!0,r.ignore=!1,V.extend(i6(r),t),r.id=r.id||V.createUniqueID("smShapeGroup_"),r.CLASS_NAME="SuperMap.LevelRenderer.Group",r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u6(t,e)}(e,S(e2,$2)),r=e,(n=[{key:"destroy",value:function(){this.id=null,this.type=null,this.clipShape=null,this._children=null,this._storage=null,this.__dirty=null,this.ignore=null,a6(s6(e.prototype),"destroy",this).call(this)}},{key:"children",value:function(){return this._children.slice()}},{key:"childAt",value:function(t){return this._children[t]}},{key:"addChild",value:function(t){t!=this&&t.parent!=this&&(t.parent&&t.parent.removeChild(t),this._children.push(t),t.parent=this,this._storage&&this._storage!==t._storage&&(this._storage.addToMap(t),t instanceof e&&t.addChildrenToStorage(this._storage)))}},{key:"removeChild",value:function(t){var r=V.indexOf(this._children,t);this._children.splice(r,1),t.parent=null,this._storage&&(this._storage.delFromMap(t.id),t instanceof e&&t.delChildrenFromStorage(this._storage))}},{key:"eachChild",value:function(t,e){for(var r=!!e,n=0;n<this._children.length;n++){var o=this._children[n];r?t.call(e,o):t(o)}}},{key:"traverse",value:function(t,e){for(var r=!!e,n=0;n<this._children.length;n++){var o=this._children[n];r?t.call(e,o):t(o),"group"===o.type&&o.traverse(t,e)}}},{key:"addChildrenToStorage",value:function(t){for(var e=0;e<this._children.length;e++){var r=this._children[e];t.addToMap(r),"group"===r.type&&r.addChildrenToStorage(t)}}},{key:"delChildrenFromStorage",value:function(t){for(var e=0;e<this._children.length;e++){var r=this._children[e];t.delFromMap(r.id),"group"===r.type&&r.delChildrenFromStorage(t)}}},{key:"modSelf",value:function(){this.__dirty=!0}}])&&r6(r.prototype,n),o&&r6(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function c6(t){"@babel/helpers - typeof";return(c6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f6(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,p6(n.key),n)}}function p6(t){var e=function(t,e){if("object"!=c6(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=c6(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==c6(e)?e:String(e)}var h6=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._elements={},this._hoverElements=[],this._roots=[],this._shapeList=[],this._shapeListOffset=0,this.CLASS_NAME="SuperMap.LevelRenderer.Storage"}var e,r,n;return e=t,n=[{key:"shapeCompareFunc",value:function(t,e){return t.zlevel==e.zlevel?t.z==e.z?t.__renderidx-e.__renderidx:t.z-e.z:t.zlevel-e.zlevel}}],(r=[{key:"destroy",value:function(){this.dispose(),this._shapeList=null,this._shapeListOffset=null}},{key:"iterShape",value:function(t,e){if(!e){e={hover:!1,normal:"down",update:!1}}if(e.hover)for(var r=0,n=this._hoverElements.length;r<n;r++){var o=this._hoverElements[r];if(o.updateTransform(),t(o))return this}switch(e.update&&this.updateShapeList(),e.normal){case"down":for(var i=this._shapeList.length;i--;)if(t(this._shapeList[i]))return this;break;default:for(var a=0,s=this._shapeList.length;a<s;a++)if(t(this._shapeList[a]))return this}return this}},{key:"getHoverShapes",value:function(e){for(var r=[],n=this._hoverElements.length,o=0;o<n;o++){r.push(this._hoverElements[o]);var i=this._hoverElements[o].hoverConnect;if(i)for(var a,s=0,u=(i=i instanceof Array?i:[i]).length;s<u;s++)(a=i[s].id?i[s]:this.get(i[s]))&&r.push(a)}if(r.sort(t.shapeCompareFunc),e)for(var l=0,c=r.length;l<c;l++)r[l].updateTransform();return r}},{key:"getShapeList",value:function(t){return t&&this.updateShapeList(),this._shapeList}},{key:"updateShapeList",value:function(){this._shapeListOffset=0;for(var e=this._roots.length,r=0;r<e;r++){var n=this._roots[r];this._updateAndAddShape(n)}this._shapeList.length=this._shapeListOffset;for(var o=this._shapeList.length,i=0;i<o;i++)this._shapeList[i].__renderidx=i;this._shapeList.sort(t.shapeCompareFunc)}},{key:"_updateAndAddShape",value:function(t,e){if(!t.ignore)if(t.updateTransform(),"group"==t.type){t.clipShape&&(t.clipShape.parent=t,t.clipShape.updateTransform(),e?(e=e.slice()).push(t.clipShape):e=[t.clipShape]);for(var r=0;r<t._children.length;r++){var n=t._children[r];n.__dirty=t.__dirty||n.__dirty,this._updateAndAddShape(n,e)}t.__dirty=!1}else t.__clipShapes=e,this._shapeList[this._shapeListOffset++]=t}},{key:"mod",value:function(t,e){var r=this._elements[t];if(r&&(r.modSelf(),e))if(e.parent||e._storage||e.__startClip){var n={};for(var o in e)"parent"!=o&&"_storage"!=o&&"__startClip"!=o&&e.hasOwnProperty(o)&&(n[o]=e[o]);(new D$).merge(r,n,!0)}else(new D$).merge(r,e,!0);return this}},{key:"drift",value:function(t,e,r){var n=this._elements[t];return n&&(n.needTransform=!0,"horizontal"===n.draggable?r=0:"vertical"===n.draggable&&(e=0),(!n.ondrift||n.ondrift&&!n.ondrift(e,r))&&n.drift(e,r)),this}},{key:"addHover",value:function(t){return t.updateNeedTransform(),this._hoverElements.push(t),this}},{key:"delHover",value:function(){return this._hoverElements=[],this}},{key:"hasHoverShape",value:function(){return this._hoverElements.length>0}},{key:"addRoot",value:function(t){t instanceof l6&&t.addChildrenToStorage(this),this.addToMap(t),this._roots.push(t)}},{key:"delRoot",value:function(t){if(void 0===t){for(var e=0;e<this._roots.length;e++){var r=this._roots[e];r instanceof l6&&r.delChildrenFromStorage(this)}return this._elements={},this._hoverElements=[],void(this._roots=[])}if(t instanceof Array)for(var n=t.length,o=0;o<n;o++)this.delRoot(t[o]);else{var i;i="string"==typeof t?this._elements[t]:t;var a=(new D$).indexOf(this._roots,i);a>=0&&(this.delFromMap(i.id),this._roots.splice(a,1),i instanceof l6&&i.delChildrenFromStorage(this))}}},{key:"addToMap",value:function(t){return t instanceof l6&&(t._storage=this),t.modSelf(),this._elements[t.id]=t,this}},{key:"get",value:function(t){return this._elements[t]}},{key:"delFromMap",value:function(t){var e=this._elements[t];return e&&(delete this._elements[t],e instanceof l6&&(e._storage=null)),this}},{key:"dispose",value:function(){this._elements=null,this._roots=null,this._hoverElements=null}}])&&f6(e.prototype,r),n&&f6(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function y6(t){"@babel/helpers - typeof";return(y6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d6(t,e,r){return e=b6(e),function(t,e){if(e&&("object"===y6(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],b6(t).constructor):e.apply(t,r))}function b6(t){return(b6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function v6(t,e){return(v6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function m6(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g6(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,w6(n.key),n)}}function S6(t,e,r){return e&&g6(t.prototype,e),r&&g6(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function w6(t){var e=function(t,e){if("object"!=y6(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=y6(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==y6(e)?e:String(e)}var O6=function(){function t(e,r){m6(this,t),this.root=e,this.storage=r,this._domRoot=null,this._layers={},this._zlevelList=[],this._layerConfig={},this._bgDom=null,this.shapeToImage=null,t.devicePixelRatio=Math.max(window.devicePixelRatio||1,1),this.CLASS_NAME="SuperMap.LevelRenderer.Painter",this.root.innerHTML="",this._width=this._getWidth(),this._height=this._getHeight();var n=document.createElement("div");this._domRoot=n,n.style.position="relative",n.style.overflow="hidden",n.style.width=this._width+"px",n.style.height=this._height+"px",this.root.appendChild(n),this.shapeToImage=this._createShapeToImageProcessor(),this._bgDom=t.createDom(V.createUniqueID("SuperMap.Theme_background_"),"div",this),n.appendChild(this._bgDom),this._bgDom.onselectstart=a,this._bgDom.style["-webkit-user-select"]="none",this._bgDom.style["user-select"]="none",this._bgDom.style["-webkit-touch-callout"]="none";var o=new _6(V.createUniqueID("_highLightLayer_"),this);this._layers.hover=o,n.appendChild(o.dom),o.initContext(),o.dom.onselectstart=a,o.dom.style["-webkit-user-select"]="none",o.dom.style["user-select"]="none",o.dom.style["-webkit-touch-callout"]="none";var i=this;function a(){return!1}this.updatePainter=function(t,e){i.refreshShapes(t,e)}}return S6(t,[{key:"destroy",value:function(){this.dispose(),this._zlevelList=null,this._layerConfig=null,this._bgDom=null,this.shapeToImage=null}},{key:"render",value:function(t){return this.refresh(t,!0),this}},{key:"refresh",value:function(t,e){var r=this.storage.getShapeList(!0);return this._paintList(r,e),"function"==typeof t&&t(),this}},{key:"_paintList",value:function(t,e){var r,n,o;for(var i in void 0===e&&(e=!1),this._updateLayerStatus(t),this._layers)"hover"!==i&&(this._layers[i].unusedCount++,this._layers[i].updateTransform());for(var a=[],s=0,u=t.length;s<u;s++){var l=t[s];if(n!==l.zlevel&&(r&&r.needTransform&&o.restore(),o=(r=this.getLayer(l.zlevel)).ctx,n=l.zlevel,r.unusedCount=0,(r.dirty||e)&&r.clear(),r.needTransform&&(o.save(),r.setTransform(o))),o&&l.__startClip){var c=l.__startClip;if(o.save(),c.needTransform){var f=c.transform;Q2.Util_matrix.invert(a,f),o.transform(f[0],f[1],f[2],f[3],f[4],f[5])}if(o.beginPath(),c.buildPath(o,c.style),o.clip(),c.needTransform){var p=a;o.transform(p[0],p[1],p[2],p[3],p[4],p[5])}}if((r&&r.dirty||e)&&!l.invisible&&(!l.onbrush||l.onbrush&&!l.onbrush(o,!1)))if(N2.catchBrushException)try{l.brush(o,!1,this.updatePainter)}catch(t){Q2.Util_log(t,"brush error of "+l.type,l)}else l.brush(o,!1,this.updatePainter);o&&l.__stopClip&&o.restore(),l.__dirty=!1}for(var h in o&&r&&r.needTransform&&o.restore(),this._layers)if("hover"!==h){var y=this._layers[h];y.dirty=!1,1==y.unusedCount&&y.clear()}}},{key:"getLayer",value:function(t){var e=this._layers[t];if(!e){var r=this._zlevelList.length,n=null,o=-1;if(r>0&&t>this._zlevelList[0]){for(o=0;o<r-1&&!(this._zlevelList[o]<t&&this._zlevelList[o+1]>t);o++);n=this._layers[this._zlevelList[o]]}this._zlevelList.splice(o+1,0,t),e=new _6(V.createUniqueID("_levelLayer_"+t),this);var i=n?n.dom:this._bgDom;i.nextSibling?i.parentNode.insertBefore(e.dom,i.nextSibling):i.parentNode.appendChild(e.dom),e.initContext(),this._layers[t]=e,this._layerConfig[t]&&(new D$).merge(e,this._layerConfig[t],!0),e.updateTransform()}return e}},{key:"getLayers",value:function(){return this._layers}},{key:"_updateLayerStatus",value:function(t){var e=this._layers,r={};for(var n in e)"hover"!==n&&(r[n]=e[n].elCount,e[n].elCount=0);for(var o=0;o<t.length;o++){var i=t[o],a=e[i.zlevel];if(a){if(a.elCount++,a.dirty)continue;a.dirty=i.__dirty}}for(var s in e)"hover"!==s&&r[s]!==e[s].elCount&&(e[s].dirty=!0)}},{key:"refreshShapes",value:function(t,e){for(var r=0,n=t.length;r<n;r++){var o=t[r];this.storage.mod(o.id)}return this.refresh(e),this}},{key:"clear",value:function(){for(var t in this._layers)"hover"!=t&&this._layers[t].clear();return this}},{key:"modLayer",value:function(t,e){if(e){this._layerConfig[t]?(new D$).merge(this._layerConfig[t],e,!0):this._layerConfig[t]=e;var r=this._layers[t];r&&(new D$).merge(r,this._layerConfig[t],!0)}}},{key:"delLayer",value:function(t){var e=this._layers[t];e&&(this.modLayer(t,{position:e.position,rotation:e.rotation,scale:e.scale}),e.dom.parentNode.removeChild(e.dom),delete this._layers[t],this._zlevelList.splice((new D$).indexOf(this._zlevelList,t),1))}},{key:"refreshHover",value:function(){this.clearHover();for(var t=this.storage.getHoverShapes(!0),e=0,r=t.length;e<r;e++)this._brushHover(t[e]);return this.storage.delHover(),this}},{key:"clearHover",value:function(){var t=this._layers.hover;return t&&t.clear(),this}},{key:"resize",value:function(){var t=this._domRoot;t.style.display="none";var e=this._getWidth(),r=this._getHeight();if(t.style.display="",this._width!=e||r!=this._height){for(var n in this._width=e,this._height=r,t.style.width=e+"px",t.style.height=r+"px",this._layers)this._layers[n].resize(e,r);this.refresh(null,!0)}return this}},{key:"clearLayer",value:function(t){var e=this._layers[t];e&&e.clear()}},{key:"dispose",value:function(){this.root.innerHTML="",this.root=null,this.storage=null,this._domRoot=null,this._layers=null}},{key:"getDomHover",value:function(){return this._layers.hover.dom}},{key:"toDataURL",value:function(e,r,n){var o=t.createDom(V.createUniqueID("SuperMap.Theme.image_"),"canvas",this);this._bgDom.appendChild(o);var i=o.getContext("2d");1!=t.devicePixelRatio&&i.scale(t.devicePixelRatio,t.devicePixelRatio),i.fillStyle=r||"#fff",i.rect(0,0,this._width*t.devicePixelRatio,this._height*t.devicePixelRatio),i.fill();var a=this;this.storage.iterShape(function(t){if(!t.invisible&&(!t.onbrush||t.onbrush&&!t.onbrush(i,!1)))if(N2.catchBrushException)try{t.brush(i,!1,a.updatePainter)}catch(e){Q2.Util_log(e,"brush error of "+t.type,t)}else t.brush(i,!1,a.updatePainter)},{normal:"up",update:!0});var s=o.toDataURL(e,n);return i=null,this._bgDom.removeChild(o),s}},{key:"getWidth",value:function(){return this._width}},{key:"getHeight",value:function(){return this._height}},{key:"_getWidth",value:function(){var t=this.root,e=t.currentStyle||document.defaultView.getComputedStyle(t);return((t.clientWidth||parseInt(e.width,10))-parseInt(e.paddingLeft,10)-parseInt(e.paddingRight,10)).toFixed(0)-0}},{key:"_getHeight",value:function(){var t=this.root,e=t.currentStyle||document.defaultView.getComputedStyle(t);return((t.clientHeight||parseInt(e.height,10))-parseInt(e.paddingTop,10)-parseInt(e.paddingBottom,10)).toFixed(0)-0}},{key:"_brushHover",value:function(t){var e=this._layers.hover.ctx;if(!t.onbrush||t.onbrush&&!t.onbrush(e,!0)){var r=this.getLayer(t.zlevel);if(r.needTransform&&(e.save(),r.setTransform(e)),N2.catchBrushException)try{t.brush(e,!0,this.updatePainter)}catch(e){Q2.Util_log(e,"hoverBrush error of "+t.type,t)}else t.brush(e,!0,this.updatePainter);r.needTransform&&e.restore()}}},{key:"_shapeToImage",value:function(t,e,r,n,o){var i=document.createElement("canvas"),a=i.getContext("2d"),s=o||window.devicePixelRatio||1;i.style.width=r+"px",i.style.height=n+"px",i.setAttribute("width",r*s),i.setAttribute("height",n*s),a.clearRect(0,0,r*s,n*s);var u={position:e.position,rotation:e.rotation,scale:e.scale};e.position=[0,0,0],e.rotation=0,e.scale=[1,1],e&&e.brush(a,!1);var l=new r5({id:t,style:{x:0,y:0,image:i}});return null!=u.position&&(l.position=e.position=u.position),null!=u.rotation&&(l.rotation=e.rotation=u.rotation),null!=u.scale&&(l.scale=e.scale=u.scale),l}},{key:"_createShapeToImageProcessor",value:function(){var e=this;return function(r,n,o,i){return e._shapeToImage(r,n,o,i,t.devicePixelRatio)}}},{key:"updateHoverLayer",value:function(t){if(!(t instanceof Array))return this;this.clearHover(),this.storage.delHover();for(var e=0;e<t.length;e++)this.storage.addHover(t[e]),this._brushHover(t[e])}}],[{key:"createDom",value:function(e,r,n){var o=document.createElement(r),i=n._width,a=n._height;return o.style.position="absolute",o.style.left=0,o.style.top=0,o.style.width=i+"px",o.style.height=a+"px",o.setAttribute("width",i*t.devicePixelRatio),o.setAttribute("height",a*t.devicePixelRatio),o.setAttribute("id",e),o}}]),t}(),_6=function(t){function e(t,r){var n;return m6(this,e),(n=d6(this,e,[t,r])).dom=null,n.domBack=null,n.ctxBack=null,n.painter=r,n.unusedCount=0,n.config=null,n.dirty=!0,n.elCount=0,n.clearColor=0,n.motionBlur=!1,n.lastFrameAlpha=.7,n.zoomable=!1,n.panable=!1,n.maxZoom=1/0,n.minZoom=0,n.ctx=null,n.dom=O6.createDom(V.createUniqueID("SuperMap.Theme"+t),"canvas",r),n.dom.onselectstart=function(){return!1},n.dom.style["-webkit-user-select"]="none",n.dom.style["user-select"]="none",n.dom.style["-webkit-touch-callout"]="none",n.CLASS_NAME="SuperMap.LevelRenderer.Painter.Layer",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&v6(t,e)}(e,$2),S6(e,[{key:"destroy",value:function(){this.dom=null,this.domBack=null,this.ctxBack=null,this.painter=null,this.unusedCount=null,this.config=null,this.dirty=null,this.elCount=null,this.clearColor=null,this.motionBlur=null,this.lastFrameAlpha=null,this.zoomable=null,this.panable=null,this.maxZoom=null,this.minZoom=null,this.ctx=null,$2.destroy.apply(this,arguments)}},{key:"initContext",value:function(){this.ctx=this.dom.getContext("2d"),1!=O6.devicePixelRatio&&this.ctx.scale(O6.devicePixelRatio,O6.devicePixelRatio)}},{key:"createBackBuffer",value:function(){this.domBack=O6.createDom(V.createUniqueID("SuperMap.Theme.back-"+this.id),"canvas",this.painter),this.ctxBack=this.domBack.getContext("2d"),1!=O6.devicePixelRatio&&this.ctxBack.scale(O6.devicePixelRatio,O6.devicePixelRatio)}},{key:"resize",value:function(t,e){this.dom.style.width=t+"px",this.dom.style.height=e+"px",this.dom.setAttribute("width",t*O6.devicePixelRatio),this.dom.setAttribute("height",e*O6.devicePixelRatio),1!=O6.devicePixelRatio&&this.ctx.scale(O6.devicePixelRatio,O6.devicePixelRatio),this.domBack&&(this.domBack.setAttribute("width",t*O6.devicePixelRatio),this.domBack.setAttribute("height",e*O6.devicePixelRatio),1!=O6.devicePixelRatio&&this.ctxBack.scale(O6.devicePixelRatio,O6.devicePixelRatio))}},{key:"clear",value:function(){var t=this.dom,e=this.ctx,r=t.width,n=t.height,o=this.clearColor,i=this.motionBlur,a=this.lastFrameAlpha;if(i&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(t,0,0,r/O6.devicePixelRatio,n/O6.devicePixelRatio)),o?(e.save(),e.fillStyle=this.config.clearColor,e.fillRect(0,0,r/O6.devicePixelRatio,n/O6.devicePixelRatio),e.restore()):e.clearRect(0,0,r/O6.devicePixelRatio,n/O6.devicePixelRatio),i){var s=this.domBack;e.save(),e.globalAlpha=a,e.drawImage(s,0,0,r/O6.devicePixelRatio,n/O6.devicePixelRatio),e.restore()}}}]),e}();function P6(t){"@babel/helpers - typeof";return(P6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function E6(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,C6(n.key),n)}}function C6(t){var e=function(t,e){if("object"!=P6(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=P6(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==P6(e)?e:String(e)}function T6(t,e,r){return e=j6(e),function(t,e){if(e&&("object"===P6(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return k6(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],j6(t).constructor):e.apply(t,r))}function j6(t){return(j6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function k6(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function x6(t,e){return(x6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var A6=function(t){function e(t,r,n){var o,i,a;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=T6(this,e,[t,r,n])).root=t,o.storage=r,o.painter=n,o._lastX=0,o._lastY=0,o._mouseX=0,o._mouseY=0,o._findHover=null,o._domHover=null,o._findHover=(i=function(t,e,r){var n=this;if(n._draggingTarget&&n._draggingTarget.id==t.id||t.isSilent())return!1;var o=n._event;if(t.isCover(e,r)){if(t.hoverable)if(t.isHoverByRefDataID&&!0===t.isHoverByRefDataID){if(t.refDataID){var i=t.refDataID,a=null;t.refDataHoverGroup&&(a=t.refDataHoverGroup);for(var s=n.storage._shapeList,u=0,l=s.length;u<l;u++){var c=s[u];c.refDataID&&i===c.refDataID&&(a?c.refDataHoverGroup&&a===c.refDataHoverGroup&&n.storage.addHover(c):n.storage.addHover(c))}}}else n.storage.addHover(t);for(var f=t.parent;f;){if(f.clipShape&&!f.clipShape.isCover(n._mouseX,n._mouseY))return!1;f=f.parent}return n._lastHover!=t&&(n._processOutShape(o),n._processDragLeave(o),n._lastHover=t,n._processDragEnter(o)),n._processOverShape(o),n._processDragOver(o),n._hasfound=1,!0}return!1},a=k6(o),function(t,e,r){return i.call(a,t,e,r)}),o._domHover=n.getDomHover(),o.CLASS_NAME="SuperMap.LevelRenderer.Handler";var s={resize:function(t){t=t||window.event,this._lastHover=null,this._isMouseDown=0,this.dispatch(N2.EVENT.RESIZE,t)},click:function(t){t=this._zrenderEventFixed(t);var e=this._lastHover;(e&&e.clickable||!e)&&this._clickThreshold<10&&this._dispatchAgency(e,N2.EVENT.CLICK,t),this._mousemoveHandler(t)},dblclick:function(t){t=t||window.event,t=this._zrenderEventFixed(t);var e=this._lastHover;(e&&e.clickable||!e)&&this._clickThreshold<5&&this._dispatchAgency(e,N2.EVENT.DBLCLICK,t),this._mousemoveHandler(t)},mousewheel:function(t){var e=((t=this._zrenderEventFixed(t)).wheelDelta||-t.detail)>0?1.1:1/1.1,r=this.painter.getLayers(),n=!1;for(var o in r)if("hover"!==o){var i=r[o],a=i.position;if(i.zoomable){i.__zoom=i.__zoom||1;var s=i.__zoom;s*=e,e=(s=Math.max(Math.min(i.maxZoom,s),i.minZoom))/i.__zoom,i.__zoom=s,a[0]-=(this._mouseX-a[0])*(e-1),a[1]-=(this._mouseY-a[1])*(e-1),i.scale[0]*=e,i.scale[1]*=e,i.dirty=!0,n=!0}}n&&this.painter.refresh(),this._dispatchAgency(this._lastHover,N2.EVENT.MOUSEWHEEL,t),this._mousemoveHandler(t)},mousemove:function(t){this._clickThreshold++,t=this._zrenderEventFixed(t),this._lastX=this._mouseX,this._lastY=this._mouseY,this._mouseX=Q2.Util_event.getX(t),this._mouseY=Q2.Util_event.getY(t);var e=this._mouseX-this._lastX,r=this._mouseY-this._lastY;this._processDragStart(t),this._hasfound=0,this._event=t,this._iterateAndFindHover(),this._hasfound||((!this._draggingTarget||this._lastHover&&this._lastHover!=this._draggingTarget)&&(this._processOutShape(t),this._processDragLeave(t)),this._lastHover=null,this.storage.delHover(),this.painter.clearHover());var n="";if(this._draggingTarget)this.storage.drift(this._draggingTarget.id,e,r),this._draggingTarget.modSelf(),this.storage.addHover(this._draggingTarget);else if(this._isMouseDown){var o=this.painter.getLayers(),i=!1;for(var a in o)if("hover"!==a){var s=o[a];s.panable&&(n="move",s.position[0]+=e,s.position[1]+=r,i=!0,s.dirty=!0)}i&&this.painter.refresh()}this._draggingTarget||this._hasfound&&this._lastHover.draggable?n="move":this._hasfound&&this._lastHover.clickable&&(n="pointer"),this.root.style.cursor=n,this._dispatchAgency(this._lastHover,N2.EVENT.MOUSEMOVE,t),(this._draggingTarget||this._hasfound||this.storage.hasHoverShape())&&this.painter.refreshHover()},mouseout:function(t){var e=(t=this._zrenderEventFixed(t)).toElement||t.relatedTarget;if(e!=this.root)for(;e&&9!=e.nodeType;){if(e==this.root)return void this._mousemoveHandler(t);e=e.parentNode}t.zrenderX=this._lastX,t.zrenderY=this._lastY,this.root.style.cursor="",this._isMouseDown=0,this._processOutShape(t),this._processDrop(t),this._processDragEnd(t),this.painter.refreshHover(),this.dispatch(N2.EVENT.GLOBALOUT,t)},mousedown:function(t){if(this._clickThreshold=0,2==this._lastDownButton)return this._lastDownButton=t.button,void(this._mouseDownTarget=null);this._lastMouseDownMoment=new Date,t=this._zrenderEventFixed(t),this._isMouseDown=1,this._mouseDownTarget=this._lastHover,this._dispatchAgency(this._lastHover,N2.EVENT.MOUSEDOWN,t),this._lastDownButton=t.button},mouseup:function(t){t=this._zrenderEventFixed(t),this.root.style.cursor="",this._isMouseDown=0,this._mouseDownTarget=null,this._dispatchAgency(this._lastHover,N2.EVENT.MOUSEUP,t),this._processDrop(t),this._processDragEnd(t)},touchstart:function(t){t=this._zrenderEventFixed(t,!0),this._lastTouchMoment=new Date,this._mobildFindFixed(t),this._mousedownHandler(t)},touchmove:function(t){t=this._zrenderEventFixed(t,!0),this._mousemoveHandler(t),this._isDragging&&Q2.Util_event.stop(t)},touchend:function(t){t=this._zrenderEventFixed(t,!0),this._mouseupHandler(t);var e=new Date;e-this._lastTouchMoment<N2.EVENT.touchClickDelay&&(this._mobildFindFixed(t),this._clickHandler(t),e-this._lastClickMoment<N2.EVENT.touchClickDelay/2&&(this._dblclickHandler(t),this._lastHover&&this._lastHover.clickable&&Q2.Util_event.stop(t)),this._lastClickMoment=e),this.painter.clearHover()}};function u(t,e){return function(r){return t.call(e,r)}}return function(t){var e=["resize","click","dblclick","mousewheel","mousemove","mouseout","mouseup","mousedown","touchstart","touchend","touchmove"],r=e.length;for(;r--;){var n=e[r];t["_"+n+"Handler"]=u(s[n],t)}}(k6(o)),window.addEventListener?(window.addEventListener("resize",o._resizeHandler),Q2.Util_env.os.tablet||Q2.Util_env.os.phone?(t.addEventListener("touchstart",o._touchstartHandler),t.addEventListener("touchmove",o._touchmoveHandler),t.addEventListener("touchend",o._touchendHandler)):(t.addEventListener("click",o._clickHandler),t.addEventListener("dblclick",o._dblclickHandler),t.addEventListener("mousewheel",o._mousewheelHandler),t.addEventListener("mousemove",o._mousemoveHandler),t.addEventListener("mousedown",o._mousedownHandler),t.addEventListener("mouseup",o._mouseupHandler)),t.addEventListener("DOMMouseScroll",o._mousewheelHandler),t.addEventListener("mouseout",o._mouseoutHandler)):(window.attachEvent("onresize",o._resizeHandler),t.attachEvent("onclick",o._clickHandler),t.ondblclick=o._dblclickHandler,t.attachEvent("onmousewheel",o._mousewheelHandler),t.attachEvent("onmousemove",o._mousemoveHandler),t.attachEvent("onmouseout",o._mouseoutHandler),t.attachEvent("onmousedown",o._mousedownHandler),t.attachEvent("onmouseup",o._mouseupHandler)),o}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&x6(t,e)}(e,e2),r=e,(n=[{key:"destroy",value:function(){this.dispose(),this._lastX=null,this._lastY=null,this._mouseX=null,this._mouseY=null,this._findHover=null,e2.prototype.destroy.apply(this,arguments)}},{key:"on",value:function(t,e){return this.bind(t,e),this}},{key:"un",value:function(t,e){return this.unbind(t,e),this}},{key:"trigger",value:function(t,e){var r=N2.EVENT;switch(t){case r.RESIZE:case r.CLICK:case r.DBLCLICK:case r.MOUSEWHEEL:case r.MOUSEMOVE:case r.MOUSEDOWN:case r.MOUSEUP:case r.MOUSEOUT:this["_"+t+"Handler"](e)}}},{key:"dispose",value:function(){var t=this.root;window.removeEventListener?(window.removeEventListener("resize",this._resizeHandler),Q2.Util_env.os.tablet||Q2.Util_env.os.phone?(t.removeEventListener("touchstart",this._touchstartHandler),t.removeEventListener("touchmove",this._touchmoveHandler),t.removeEventListener("touchend",this._touchendHandler)):(t.removeEventListener("click",this._clickHandler),t.removeEventListener("dblclick",this._dblclickHandler),t.removeEventListener("mousewheel",this._mousewheelHandler),t.removeEventListener("mousemove",this._mousemoveHandler),t.removeEventListener("mousedown",this._mousedownHandler),t.removeEventListener("mouseup",this._mouseupHandler)),t.removeEventListener("DOMMouseScroll",this._mousewheelHandler),t.removeEventListener("mouseout",this._mouseoutHandler)):(window.detachEvent("onresize",this._resizeHandler),t.detachEvent("onclick",this._clickHandler),t.detachEvent("dblclick",this._dblclickHandler),t.detachEvent("onmousewheel",this._mousewheelHandler),t.detachEvent("onmousemove",this._mousemoveHandler),t.detachEvent("onmouseout",this._mouseoutHandler),t.detachEvent("onmousedown",this._mousedownHandler),t.detachEvent("onmouseup",this._mouseupHandler)),this.root=null,this._domHover=null,this.storage=null,this.painter=null,this.un()}},{key:"_processDragStart",value:function(t){var e=this._lastHover;if(this._isMouseDown&&e&&e.draggable&&!this._draggingTarget&&this._mouseDownTarget==e){if(e.dragEnableTime&&new Date-this._lastMouseDownMoment<e.dragEnableTime)return;var r=e;this._draggingTarget=r,this._isDragging=1,r.invisible=!0,this.storage.mod(r.id),this._dispatchAgency(r,N2.EVENT.DRAGSTART,t),this.painter.refresh()}}},{key:"_processDragEnter",value:function(t){this._draggingTarget&&this._dispatchAgency(this._lastHover,N2.EVENT.DRAGENTER,t,this._draggingTarget)}},{key:"_processDragOver",value:function(t){this._draggingTarget&&this._dispatchAgency(this._lastHover,N2.EVENT.DRAGOVER,t,this._draggingTarget)}},{key:"_processDragLeave",value:function(t){this._draggingTarget&&this._dispatchAgency(this._lastHover,N2.EVENT.DRAGLEAVE,t,this._draggingTarget)}},{key:"_processDrop",value:function(t){this._draggingTarget&&(this._draggingTarget.invisible=!1,this.storage.mod(this._draggingTarget.id),this.painter.refresh(),this._dispatchAgency(this._lastHover,N2.EVENT.DROP,t,this._draggingTarget))}},{key:"_processDragEnd",value:function(t){this._draggingTarget&&(this._dispatchAgency(this._draggingTarget,N2.EVENT.DRAGEND,t),this._lastHover=null),this._isDragging=0,this._draggingTarget=null}},{key:"_processOverShape",value:function(t){this._dispatchAgency(this._lastHover,N2.EVENT.MOUSEOVER,t)}},{key:"_processOutShape",value:function(t){this._dispatchAgency(this._lastHover,N2.EVENT.MOUSEOUT,t)}},{key:"_dispatchAgency",value:function(t,e,r,n){var o="on"+e,i={type:e,event:r,target:t,cancelBubble:!1},a=t;for(n&&(i.dragged=n);a&&(a[o]&&(i.cancelBubble=a[o](i)),a.dispatch(e,i),a=a.parent,!i.cancelBubble););t?i.cancelBubble||this.dispatch(e,i):n||this.dispatch(e,{type:e,event:r})}},{key:"_iterateAndFindHover",value:function(){for(var t,e=Q2.Util_matrix.create(),r=this.storage.getShapeList(),n=[0,0],o=r.length-1;o>=0;o--){var i=r[o];if(void 0!==i.zlevel&&(t=this.painter.getLayer(i.zlevel,t),n[0]=this._mouseX,n[1]=this._mouseY,t.needTransform&&(Q2.Util_matrix.invert(e,t.transform),Q2.Util_vector.applyTransform(n,n,e))),this._findHover(i,n[0],n[1]))break}}},{key:"_mobildFindFixed",value:function(t){var e=[{x:10},{x:-20},{x:10,y:10},{y:-20}];this._lastHover=null,this._mouseX=t.zrenderX,this._mouseY=t.zrenderY,this._event=t,this._iterateAndFindHover();for(var r=0;!this._lastHover&&r<e.length;r++){var n=e[r];n.x&&(this._mouseX+=n.x),n.y&&(this._mouseX+=n.y),this._iterateAndFindHover()}this._lastHover&&(t.zrenderX=this._mouseX,t.zrenderY=this._mouseY)}},{key:"_zrenderEventFixed",value:function(t,e){if(t.zrenderFixed)return t;if(e){var r="touchend"!=t.type?t.targetTouches[0]:t.changedTouches[0];if(r){var n=this.root.getBoundingClientRect();t.zrenderX=r.clientX-n.left,t.zrenderY=r.clientY-n.top}}else{var o=(t=t||window.event).toElement||t.relatedTarget||t.srcElement||t.target;o&&o!=this._domHover&&(t.zrenderX=(void 0!==t.offsetX?t.offsetX:t.layerX)+o.offsetLeft,t.zrenderY=(void 0!==t.offsetY?t.offsetY:t.layerY)+o.offsetTop)}return t.zrenderFixed=1,t}},{key:"getLastHoverOne",value:function(){return this._lastHover?this._lastHover:null}}])&&E6(r.prototype,n),o&&E6(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function I6(t){"@babel/helpers - typeof";return(I6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function N6(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,R6(n.key),n)}}function R6(t){var e=function(t,e){if("object"!=I6(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=I6(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==I6(e)?e:String(e)}var M6=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.CLASS_NAME="SuperMap.LevelRenderer.Animation.easing"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){}},{key:"Linear",value:function(t){return t}},{key:"QuadraticIn",value:function(t){return t*t}},{key:"QuadraticOut",value:function(t){return t*(2-t)}},{key:"QuadraticInOut",value:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},{key:"CubicIn",value:function(t){return t*t*t}},{key:"CubicOut",value:function(t){return--t*t*t+1}},{key:"CubicInOut",value:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},{key:"QuarticIn",value:function(t){return t*t*t*t}},{key:"QuarticOut",value:function(t){return 1- --t*t*t*t}},{key:"QuarticInOut",value:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},{key:"QuinticIn",value:function(t){return t*t*t*t*t}},{key:"QuinticOut",value:function(t){return--t*t*t*t*t+1}},{key:"QuinticInOut",value:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},{key:"SinusoidalIn",value:function(t){return 1-Math.cos(t*Math.PI/2)}},{key:"SinusoidalOut",value:function(t){return Math.sin(t*Math.PI/2)}},{key:"SinusoidalInOut",value:function(t){return.5*(1-Math.cos(Math.PI*t))}},{key:"ExponentialIn",value:function(t){return 0===t?0:Math.pow(1024,t-1)}},{key:"ExponentialOut",value:function(t){return 1===t?1:1-Math.pow(2,-10*t)}},{key:"ExponentialInOut",value:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},{key:"CircularIn",value:function(t){return 1-Math.sqrt(1-t*t)}},{key:"CircularOut",value:function(t){return Math.sqrt(1- --t*t)}},{key:"CircularInOut",value:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},{key:"ElasticIn",value:function(t){var e,r=.1;return 0===t?0:1===t?1:(r<1?(r=1,e=.1):e=.4*Math.asin(1/r)/(2*Math.PI),-r*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4))}},{key:"ElasticOut",value:function(t){var e,r=.1;return 0===t?0:1===t?1:(r<1?(r=1,e=.1):e=.4*Math.asin(1/r)/(2*Math.PI),r*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/.4)+1)}},{key:"ElasticInOut",value:function(t){var e,r=.1;return 0===t?0:1===t?1:(r<1?(r=1,e=.1):e=.4*Math.asin(1/r)/(2*Math.PI),(t*=2)<1?r*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4)*-.5:r*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4)*.5+1)}},{key:"BackIn",value:function(t){var e=1.70158;return t*t*((e+1)*t-e)}},{key:"BackOut",value:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1}},{key:"BackInOut",value:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}},{key:"BounceIn",value:function(t){return 1-this.BounceOut(1-t)}},{key:"BounceOut",value:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}},{key:"BounceInOut",value:function(t){return t<.5?.5*this.BounceIn(2*t):.5*this.BounceOut(2*t-1)+.5}}])&&N6(e.prototype,r),n&&N6(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function L6(t){"@babel/helpers - typeof";return(L6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function B6(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,D6(n.key),n)}}function D6(t){var e=function(t,e){if("object"!=L6(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=L6(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==L6(e)?e:String(e)}var F6=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._targetPool=e.target||{},this._targetPool instanceof Array||(this._targetPool=[this._targetPool]),this._life=e.life||1e3,this._delay=e.delay||0,this._startTime=(new Date).getTime()+this._delay,this._endTime=this._startTime+1e3*this._life,this.loop=void 0!==e.loop&&e.loop,this.gap=e.gap||0,this.easing=e.easing||"Linear",this.onframe=e.onframe,this.ondestroy=e.ondestroy,this.onrestart=e.onrestart,this.CLASS_NAME="SuperMap.LevelRenderer.Animation.Clip"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){}},{key:"step",value:function(t){var e=new M6,r=(t-this._startTime)/this._life;if(!(r<0)){r=Math.min(r,1);var n="string"==typeof this.easing?e[this.easing]:this.easing,o="function"==typeof n?n(r):r;return this.fire("frame",o),1==r?this.loop?(this.restart(),"restart"):(this._needsRemove=!0,"destroy"):null}}},{key:"restart",value:function(){var t=((new Date).getTime()-this._startTime)%this._life;this._startTime=(new Date).getTime()-t+this.gap}},{key:"fire",value:function(t,e){for(var r=0,n=this._targetPool.length;r<n;r++)this["on"+t]&&this["on"+t](this._targetPool[r],e)}}])&&B6(e.prototype,r),n&&B6(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function U6(t){"@babel/helpers - typeof";return(U6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function V6(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function q6(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,z6(n.key),n)}}function H6(t,e,r){return e&&q6(t.prototype,e),r&&q6(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function z6(t){var e=function(t,e){if("object"!=U6(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=U6(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==U6(e)?e:String(e)}function J6(t,e,r){return e=W6(e),function(t,e){if(e&&("object"===U6(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return K6(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],W6(t).constructor):e.apply(t,r))}function W6(t){return(W6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function K6(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Q6(t,e){return(Q6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Y6=function(t){function e(t){var r;return V6(this,e),r=J6(this,e,[t]),t=t||{},r.stage={},r.onframe=function(){},r._clips=[],r._running=!1,r._time=0,V.extend(K6(r),t),r.CLASS_NAME="SuperMap.LevelRenderer.Animation",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Q6(t,e)}(e,e2),H6(e,[{key:"add",value:function(t){this._clips.push(t)}},{key:"remove",value:function(t){var e=(new D$).indexOf(this._clips,t);e>=0&&this._clips.splice(e,1)}},{key:"_update",value:function(){for(var t=(new Date).getTime(),e=t-this._time,r=this._clips,n=r.length,o=[],i=[],a=0;a<n;a++){var s=r[a],u=s.step(t);u&&(o.push(u),i.push(s))}this.stage.update&&this.stage.update();for(var l=0;l<n;)r[l]._needsRemove?(r[l]=r[n-1],r.pop(),n--):l++;n=o.length;for(var c=0;c<n;c++)i[c].fire(o[c]);this._time=t,this.onframe(e),this.dispatch("frame",e)}},{key:"start",value:function(){var t=window.requestAnimationFrame||window.msRequestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(t){setTimeout(t,16)},e=this;this._running=!0,this._time=(new Date).getTime(),t(function r(){e._running&&(e._update(),t(r))})}},{key:"stop",value:function(){this._running=!1}},{key:"clear",value:function(){this._clips=[]}},{key:"animate",value:function(t,e){var r=new X6(t,(e=e||{}).loop,e.getter,e.setter);return r.animation=this,r}}],[{key:"_interpolateNumber",value:function(t,e,r){return(e-t)*r+t}},{key:"_interpolateArray",value:function(t,r,n,o,i){var a=t.length;if(1==i)for(var s=0;s<a;s++)o[s]=e._interpolateNumber(t[s],r[s],n);else for(var u=t[0].length,l=0;l<a;l++)for(var c=0;c<u;c++)o[l][c]=e._interpolateNumber(t[l][c],r[l][c],n)}},{key:"_isArrayLike",value:function(t){switch(U6(t)){case"undefined":case"string":return!1}return void 0!==t.length}},{key:"_catmullRomInterpolateArray",value:function(t,r,n,o,i,a,s,u,l){var c=t.length;if(1==l)for(var f=0;f<c;f++)u[f]=e._catmullRomInterpolate(t[f],r[f],n[f],o[f],i,a,s);else for(var p=t[0].length,h=0;h<c;h++)for(var y=0;y<p;y++)u[h][y]=e._catmullRomInterpolate(t[h][y],r[h][y],n[h][y],o[h][y],i,a,s)}},{key:"_catmullRomInterpolate",value:function(t,e,r,n,o,i,a){var s=.5*(r-t),u=.5*(n-e);return(2*(e-r)+s+u)*a+(-3*(e-r)-2*s-u)*i+s*o+e}},{key:"_cloneValue",value:function(t){var r=Array.prototype.slice;if(e._isArrayLike(t)){var n=t.length;if(e._isArrayLike(t[0])){for(var o=[],i=0;i<n;i++)o.push(r.call(t[i]));return o}return r.call(t)}return t}},{key:"rgba2String",value:function(t){return t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.floor(t[2]),"rgba("+t.join(",")+")"}}]),e}(),X6=function(){function t(e,r,n,o){V6(this,t),this._tracks={},this._target=e,this._loop=r||!1,this._getter=n||function(t,e){return t[e]},this._setter=o||function(t,e,r){t[e]=r},this._clipCount=0,this._delay=0,this._doneList=[],this._onframeList=[],this._clipList=[],this.CLASS_NAME="SuperMap.LevelRenderer.Animation.Animator"}return H6(t,[{key:"when",value:function(t,e){for(var r in e)this._tracks[r]||(this._tracks[r]=[],0!==t&&this._tracks[r].push({time:0,value:Y6._cloneValue(this._getter(this._target,r))})),this._tracks[r].push({time:parseInt(t,10),value:e[r]});return this}},{key:"during",value:function(t){return this._onframeList.push(t),this}},{key:"start",value:function(t){var e=this,r=this._setter,n=this._getter,o=e._onframeList.length,i="spline"===t,a=function(){if(e._clipCount--,0===e._clipCount){e._tracks={};for(var t=e._doneList.length,r=0;r<t;r++)e._doneList[r].call(e)}},s=function(s,u){var l=s.length;if(l){var c=s[0].value,f=Y6._isArrayLike(c),p=!1,h=f&&Y6._isArrayLike(c[0])?2:1;s.sort(function(t,e){return t.time-e.time});for(var y=s[l-1].time,d=[],b=[],v=0;v<l;v++){d.push(s[v].time/y);var m=s[v].value;"string"==typeof m&&(0===(m=Q2.Util_color.toArray(m)).length&&(m[0]=m[1]=m[2]=0,m[3]=1),p=!0),b.push(m)}var g,S,w,O,_,P,E,C=0,T=0;if(p)var j=[0,0,0,0];var k=new F6({target:e._target,life:y,loop:e._loop,delay:e._delay,onframe:function(t,a){if(a<T){for(g=Math.min(C+1,l-1),S=g;S>=0&&!(d[S]<=a);S--);S=Math.min(S,l-2)}else{for(S=C;S<l&&!(d[S]>a);S++);S=Math.min(S-1,l-2)}C=S,T=a;var s=d[S+1]-d[S];if(0!==s){var c,y;for(w=(a-d[S])/s,i?(_=b[S],O=b[0===S?S:S-1],P=b[S>l-2?l-1:S+1],E=b[S>l-3?l-1:S+2],f?Y6._catmullRomInterpolateArray(O,_,P,E,w,w*w,w*w*w,n(t,u),h):(c=p?Y6.rgba2String(j):Y6._catmullRomInterpolate(O,_,P,E,w,w*w,w*w*w),r(t,u,c))):f?Y6._interpolateArray(b[S],b[S+1],w,n(t,u),h):(p?(Y6._interpolateArray(b[S],b[S+1],w,j,1),y=Y6.rgba2String(j)):y=Y6._interpolateNumber(b[S],b[S+1],w),r(t,u,y)),S=0;S<o;S++)e._onframeList[S](t,a)}},ondestroy:a});t&&"spline"!==t&&(k.easing=t),e._clipList.push(k),e._clipCount++,e.animation.add(k)}};for(var u in this._tracks)s(this._tracks[u],u);return this}},{key:"stop",value:function(){for(var t=0;t<this._clipList.length;t++){var e=this._clipList[t];this.animation.remove(e)}this._clipList=[]}},{key:"delay",value:function(t){return this._delay=t,this}},{key:"done",value:function(t){return t&&this._doneList.push(t),this}}]),t}();function Z6(t){"@babel/helpers - typeof";return(Z6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $6(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,t8(n.key),n)}}function t8(t){var e=function(t,e){if("object"!=Z6(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Z6(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Z6(e)?e:String(e)}var e8=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.storage=new h6,this.painter=new O6(r,this.storage),this.handler=new A6(r,this.storage,this.painter),this.animatingElements=[],this.animation=new Y6({stage:{update:t.getFrameCallback(this)}}),this._needsRefreshNextFrame=!1,this.animation.start(),this.CLASS_NAME="SuperMap.LevelRenderer.Render"}var e,r,n;return e=t,n=[{key:"getFrameCallback",value:function(t){return function(){var e=t.animatingElements;if(e instanceof Array){for(var r=0,n=e.length;r<n;r++)t.storage.mod(e[r].id);(e.length||t._needsRefreshNextFrame)&&t.refresh()}}}}],(r=[{key:"destroy",value:function(){this.id=null,this.storage=null,this.painter=null,this.handler=null,this.animatingElements=null,this.animation=null,this._needsRefreshNextFrame=null}},{key:"getId",value:function(){return this.id}},{key:"addShape",value:function(t){return this.storage.addRoot(t),this}},{key:"addGroup",value:function(t){return this.storage.addRoot(t),this}},{key:"delShape",value:function(t){return this.storage.delRoot(t),this}},{key:"delGroup",value:function(t){return this.storage.delRoot(t),this}},{key:"modShape",value:function(t,e){return this.storage.mod(t,e),this}},{key:"modGroup",value:function(t,e){return this.storage.mod(t,e),this}},{key:"modLayer",value:function(t,e){return this.painter.modLayer(t,e),this}},{key:"addHoverShape",value:function(t){return this.storage.addHover(t),this}},{key:"render",value:function(t){return this.painter.render(t),this._needsRefreshNextFrame=!1,this}},{key:"refresh",value:function(t){return this.painter.refresh(t),this._needsRefreshNextFrame=!1,this}},{key:"refreshNextFrame",value:function(){return this._needsRefreshNextFrame=!0,this}},{key:"refreshHover",value:function(t){return this.painter.refreshHover(t),this}},{key:"refreshShapes",value:function(t,e){return this.painter.refreshShapes(t,e),this}},{key:"resize",value:function(){return this.painter.resize(),this}},{key:"animate",value:function(t,e,r){if("string"==typeof t&&(t=this.storage.get(t)),t){var n;if(e){for(var o=e.split("."),i=t,a=0,s=o.length;a<s;a++)i&&(i=i[o[a]]);i&&(n=i)}else n=t;if(!n)return void Q2.Util_log('Property "'+e+'" is not existed in element '+t.id);var u=this.animatingElements;return void 0===t.__aniCount&&(t.__aniCount=0),0===t.__aniCount&&u.push(t),t.__aniCount++,this.animation.animate(n,{loop:r}).done(function(){if(t.__aniCount--,0===t.__aniCount){var e=(new D$).indexOf(u,t);u.splice(e,1)}})}Q2.Util_log("Element not existed")}},{key:"clearAnimation",value:function(){this.animation.clear()}},{key:"getWidth",value:function(){return this.painter.getWidth()}},{key:"getHeight",value:function(){return this.painter.getHeight()}},{key:"toDataURL",value:function(t,e,r){return this.painter.toDataURL(t,e,r)}},{key:"shapeToImage",value:function(t,e,r){var n=V.createUniqueID("SuperMap.LevelRenderer.ToImage_");return this.painter.shapeToImage(n,t,e,r)}},{key:"on",value:function(t,e){return this.handler.on(t,e),this}},{key:"un",value:function(t,e){return this.handler.un(t,e),this}},{key:"trigger",value:function(t,e){return this.handler.trigger(t,e),this.handler.dispatch(t,e),this}},{key:"clear",value:function(){return this.storage.delRoot(),this.painter.clear(),this}},{key:"dispose",value:function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=null,this.animatingElements=null,this.storage=null,this.painter=null,this.handler=null}},{key:"updateHoverShapes",value:function(t){return this.painter.updateHoverLayer(t),this}},{key:"getAllShapes",value:function(){return this.storage._shapeList}},{key:"clearAll",value:function(){return this.clear(),this.painter.clearHover(),this}},{key:"getHoverOne",value:function(){return this.handler.getLastHoverOne()}}])&&$6(e.prototype,r),n&&$6(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function r8(t){"@babel/helpers - typeof";return(r8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n8(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,o8(n.key),n)}}function o8(t){var e=function(t,e){if("object"!=r8(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=r8(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==r8(e)?e:String(e)}var i8=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),t._instances={},t.Tool={},this.version="2.0.4",this.CLASS_NAME="SuperMap.LevelRenderer"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.dispose(),this.version=null}},{key:"init",value:function(e){var r=new e8(V.createUniqueID("LRenderer_"),e);return t._instances[r.id]=r,r}},{key:"dispose",value:function(e){if(e)e.dispose(),this.delInstance(e.id);else{for(var r in t._instances)t._instances[r].dispose();t._instances={}}return this}},{key:"getInstance",value:function(e){return t._instances[e]}},{key:"delInstance",value:function(e){return delete t._instances[e],this}}])&&n8(e.prototype,r),n&&n8(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();var a8="EXCEL",s8="CSV",u8="GEOJSON",l8="JSON";function c8(t){"@babel/helpers - typeof";return(c8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f8(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,p8(n.key),n)}}function p8(t){var e=function(t,e){if("object"!=c8(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=c8(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==c8(e)?e:String(e)}var h8=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._initView()}var e,r,n;return e=t,(r=[{key:"_initView",value:function(){var t=document.createElement("div");t.hidden=!0,t.setAttribute("class","component-messageboxcontainer component-border-bottom-orange");var e=document.createElement("div");e.setAttribute("class","icon"),this.icon=document.createElement("span"),this.icon.setAttribute("class","supermapol-icons-message-warning"),e.appendChild(this.icon),t.appendChild(e);var r=document.createElement("div");r.setAttribute("class","component-messagebox"),r.innerHTML="",t.appendChild(r),this.messageBox=r;var n=document.createElement("div");n.setAttribute("class","component-messagebox__cancelbtncontainer");var o=document.createElement("button");o.setAttribute("class","component-messagebox__cancelBtn"),o.innerHTML="x",o.onclick=this.closeView.bind(this),n.appendChild(o),t.appendChild(n),this.messageBoxContainer=t,document.body.appendChild(this.messageBoxContainer)}},{key:"closeView",value:function(){this.messageBoxContainer.hidden=!0}},{key:"showView",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warring";"success"===e?(this.icon.setAttribute("class","supermapol-icons-message-success"),this.messageBoxContainer.setAttribute("class","component-messageboxcontainer component-border-bottom-green")):"failure"===e?(this.icon.setAttribute("class","supermapol-icons-message-failure"),this.messageBoxContainer.setAttribute("class","component-messageboxcontainer component-border-bottom-red")):"warring"===e&&(this.icon.setAttribute("class","supermapol-icons-message-warning"),this.messageBoxContainer.setAttribute("class","component-messageboxcontainer component-border-bottom-orange")),this.messageBox.innerHTML=t,this.messageBoxContainer.hidden=!1}}])&&f8(e.prototype,r),n&&f8(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),y8=function(){try{return echarts}catch(t){return{}}}(),d8={"en-US":{title_dataFlowService:"Data Flow Service",title_distributedAnalysis:"Distributed Analysis",title_clientComputing:"Client Computing",title_dataServiceQuery:"Data Service Query",title_searchCity:"Search city",title_searchLayer:" Search layer",text_input_value_inputDataFlowUrl:"Please enter the data stream service address such as: ws://{serviceRoot}/{dataFlowName}/dataflow/subscribe",text_displayFeaturesInfo:"Display feature information",text_subscribe:"subscribe",text_cancelSubscribe:"unsubscribe",text_densityAnalysis:"Density Analysis",text_CalculateTheValuePerUnitArea:"Calculate the value per unit area within the neighborhood shape",text_option_selectDataset:"Please select a dataset",text_label_dataset:"Dataset",text_option_simplePointDensityAnalysis:"Simple point density analysis",text_option_nuclearDensityAnalysis:"Nuclear density analysis",text_label_analyticalMethod:"Analytical method",text_option_quadrilateral:"Quadrilateral",text_option_hexagon:"hexagon",text_label_meshType:"Mesh type",text_option_notSet:"Not set",text_label_weightField:"Weight field",text_label_gridSizeInMeters:"Grid size",text_label_searchRadius:"Search radius",text_label_queryRange:"Scope of analysis",text_label_areaUnit:"Area unit",text_option_equidistantSegmentation:"Equidistant segmentation",text_option_logarithm:"Logarithm",text_option_equalCountingSegment:"Equal counting segment",text_option_squareRootSegmentation:"Square root segmentation",text_label_thematicMapSegmentationMode:"Thematic map segmentation mode",text_label_thematicMapSegmentationParameters:"Thematic map segmentation parameters",text_option_greenOrangePurpleGradient:"Green orange purple gradient",text_option_greenOrangeRedGradient:"Green orange red gradient",text_option_rainbowGradient:"Rainbow gradient",text_option_spectralGradient:"Spectral gradient",text_option_terrainGradient:"Terrain gradient",text_label_thematicMapColorGradientMode:"Thematic map color gradient mode",text_label_resultLayerName:"Result layer name",text_chooseFile:"Open File",text_isoline:"Isoline",text_extractDiscreteValue:"Extract discrete value generation curve",text_buffer:"Buffer",text_specifyTheDistance:"Specify the distance to create the surrounding area",text_label_analysisLayer:"Analysis layer",text_label_extractField:"Extract field",text_label_extractedValue:"Extracted value",text_label_distanceAttenuation:"Distance attenuation",text_label_gridSize:"gridSize",text_label_bufferRadius:"Buffer radius",text_label_defaultkilometers:"Default 10 kilometers",text_label_kilometer:"kilometer",text_label_unit:"unit",text_retainOriginal:"Retain original object field",text_mergeBuffer:"Merge buffer",text_label_color:"Color",text_label_buffer:"[Buffer]",text_label_isolines:"[Isolines]",text_label_queryRangeTips:"The default is the full range of input data. Example: -74.050, 40.650, -73.850, 40.850",text_label_queryModel:"Query mode",text_label_IDArrayOfFeatures:"ID array of features",text_label_maxFeatures:"The maximum number of features that can be returned",text_label_bufferDistance:"Buffer distance",text_label_queryRange1:"Query range",text_label_spatialQueryMode:"Spatial query mode",text_label_featureFilter:"Feature filter",text_label_geometricObject:"Geometric object",text_label_queryMode:"Query mode",text_label_searchTips:"Search for city locations or layer features",text_label_chooseSearchLayers:"Select a query layer",text_loadSearchCriteria:"Load search criteria",text_saveSearchCriteria:"Save search criteria",btn_analyze:"Analyze",btn_analyzing:"Analyzing",btn_emptyTheAnalysisLayer:"Empty the analysis layer",btn_cancelAnalysis:"Cancel",btn_query:"Query",btn_querying:"Querying",btn_emptyTheRresultLayer:"Clear all result layers","msg_dataReturnedIsEmpty.":"The request is successful and the data returned by the query is empty.",msg_dataFlowServiceHasBeenSubscribed:"The data stream service has been subscribed to.",msg_inputDataFlowUrlFirst:"Please enter the data stream service address first.",msg_datasetOrMethodUnsupport:"This dataset does not support this analysis type. Please reselect the dataset.",msg_selectDataset:"Please select a data set!",msg_setTheWeightField:"Please set the weight field!",msg_theFieldNotSupportAnalysis:"The field you currently select does not support analysis!",msg_resultIsEmpty:"The result of the analysis is empty!",msg_openFileFail:"Failed to open file!",msg_fileTypeUnsupported:"File format is not supported!",msg_fileSizeExceeded:"File size exceeded! The file size should not exceed 10M!",msg_dataInWrongGeoJSONFormat:"Wrong data format! Non standard GEOJSON format data!",msg_dataInWrongFormat:"Wrong data format! Non standard EXCEL, CSV or GEOJSON format data!",msg_searchKeywords:"Search keywords cannot be empty. Please enter your search criteria.",msg_searchGeocodeField:"Did not match the address matching service data!",msg_cityGeocodeField:"The address matching service of the current city is not configured.",msg_getFeatureField:"No related vector features found!",msg_dataflowservicesubscribed:"The data stream service has been subscribed to.",msg_subscribesucceeded:"The data stream service subscription was successful.",msg_crsunsupport:"Does not support the coordinate system of the current map",msg_tilematrixsetunsupport:"Incoming TileMatrixSet is not supported",msg_jsonResolveFiled:"JSON format parsing failureï¼",msg_requestContentFiled:"Failed to request data through iportal!",msg_getdatafailed:"Failed to get data!"},"zh-CN":{title_dataFlowService:"æ°æ®æµæå¡",title_distributedAnalysis:"åå¸å¼åæ",title_clientComputing:"å®¢æ·ç«¯è®¡ç®",title_dataServiceQuery:"æ°æ®æå¡æ¥è¯¢",title_searchCity:"æç´¢åå¸",title_searchLayer:"æç´¢å¾å±",text_input_value_inputDataFlowUrl:"è¯·è¾å¥æ°æ®æµæå¡å°åå¦:ws://{serviceRoot}/{dataFlowName}/dataflow/subscribe",text_displayFeaturesInfo:"æ¾ç¤ºè¦ç´ ä¿¡æ¯",text_subscribe:"è®¢é",text_cancelSubscribe:"åæ¶è®¢é",text_densityAnalysis:"å¯åº¦åæ",text_CalculateTheValuePerUnitArea:"è®¡ç®ç¹æå®é»åå½¢ç¶åçæ¯åä½é¢ç§¯éå¼",text_option_selectDataset:"è¯·éæ©æ°æ®é",text_label_dataset:"æ°æ®é",text_option_simplePointDensityAnalysis:"ç®åç¹å¯åº¦åæ",text_option_nuclearDensityAnalysis:"æ ¸å¯åº¦åæ",text_label_analyticalMethod:"åææ¹æ³",text_option_quadrilateral:"åè¾¹å½¢",text_option_hexagon:"å­è¾¹å½¢",text_label_meshType:"ç½æ ¼é¢ç±»å",text_option_notSet:"æªè®¾ç½®",text_label_weightField:"æéå­æ®µ",text_label_gridSizeInMeters:"ç½æ ¼å¤§å°",text_label_searchRadius:"æç´¢åå¾",text_label_queryRange:"åæèå´",text_label_areaUnit:"é¢ç§¯åä½",text_option_equidistantSegmentation:"ç­è·ç¦»åæ®µ",text_option_logarithm:"å¯¹æ°",text_option_equalCountingSegment:"ç­è®¡æ°åæ®µ",text_option_squareRootSegmentation:"å¹³æ¹æ ¹åæ®µ",text_label_thematicMapSegmentationMode:"ä¸é¢å¾åæ®µæ¨¡å¼",text_label_thematicMapSegmentationParameters:"ä¸é¢å¾åæ®µåæ°",text_option_greenOrangePurpleGradient:"ç»¿æ©ç´«æ¸å",text_option_greenOrangeRedGradient:"ç»¿æ©çº¢æ¸å",text_option_rainbowGradient:"å½©è¹æ¸å",text_option_spectralGradient:"åè°±æ¸å",text_option_terrainGradient:"å°å½¢æ¸å",text_label_thematicMapColorGradientMode:"ä¸é¢å¾é¢è²æ¸åæ¨¡å¼",text_label_resultLayerName:"ç»æå¾å±åç§°",text_chooseFile:"éæ©æä»¶",text_isoline:"ç­å¼çº¿",text_extractDiscreteValue:"æåç¦»æ£å¼çææ²çº¿",text_buffer:"ç¼å²åº",text_specifyTheDistance:"æå®è·ç¦»åå»ºå¨è¾¹åºå",text_label_analysisLayer:"åæå¾å±",text_label_extractField:"æåå­æ®µ",text_label_extractedValue:"æåå¼",text_label_distanceAttenuation:"è·ç¦»è¡°å",text_label_gridSize:"æ æ ¼å¤§å°",text_label_bufferRadius:"ç¼å²åå¾",text_label_defaultkilometers:"é»è®¤10åç±³",text_option_kilometer:"åç±³",text_label_unit:"åä½",text_retainOriginal:"ä¿çåå¯¹è±¡å­æ®µå±æ§",text_mergeBuffer:"åå¹¶ç¼å²åº",text_label_color:"é¢è²",text_label_buffer:"[ç¼å²åº]",text_label_isolines:"[ç­å¼çº¿]",text_label_queryRangeTips:"é»è®¤ä¸ºè¾å¥æ°æ®çå¨å¹èå´ãèä¾ï¼-74.050,40.650,-73.850,40.850",text_label_IDArrayOfFeatures:"è¦ç´  ID æ°ç»",text_label_maxFeatures:"æå¤å¯è¿åçè¦ç´ æ°é",text_label_bufferDistance:"ç¼å²åºè·ç¦»",text_label_queryRange1:"æ¥è¯¢èå´",text_label_spatialQueryMode:"ç©ºé´æ¥è¯¢æ¨¡å¼",text_label_featureFilter:"è¦ç´ è¿æ»¤å¨",text_label_geometricObject:"å ä½å¯¹è±¡",text_label_queryMode:"æ¥è¯¢æ¨¡å¼",text_label_searchTips:"æç´¢åå¸å°ç¹æå¾å±è¦ç´ ",text_label_chooseSearchLayers:"éæ©æ¥è¯¢å¾å±",text_loadSearchCriteria:"å è½½æç´¢æ¡ä»¶",text_saveSearchCriteria:"ä¿å­æç´¢æ¡ä»¶",btn_analyze:"åæ",btn_analyzing:"åæä¸­",btn_emptyTheAnalysisLayer:"æ¸ç©ºåæå¾å±",btn_cancelAnalysis:"åæ¶",btn_query:"æ¥è¯¢",btn_querying:"æ¥è¯¢ä¸­",btn_emptyTheRresultLayer:"æ¸é¤ææç»æå¾å±",msg_dataFlowServiceHasBeenSubscribed:"å·²è®¢éè¯¥æ°æ®æµæå¡ã",msg_inputDataFlowUrlFirst:"è¯·åè¾å¥æ°æ®æµæå¡å°åã",msg_datasetOrMethodUnsupport:"è¯¥æ°æ®éä¸æ¯ææ¬åæç±»åï¼è¯·éæ°éæ©æ°æ®é",msg_selectDataset:"è¯·éæ©æ°æ®éï¼",msg_setTheWeightField:"è¯·è®¾ç½®æéå­æ®µï¼",msg_theFieldNotSupportAnalysis:"æ¨å½åéæ©çå­æ®µä¸æ¯æåæï¼",msg_resultIsEmpty:"åæçç»æä¸ºç©ºï¼",msg_dataReturnedIsEmpty:"è¯·æ±æåï¼æ¥è¯¢è¿åçæ°æ®ä¸ºç©ºã",msg_openFileFail:"æå¼æä»¶å¤±è´¥ï¼",msg_fileTypeUnsupported:"ä¸æ¯æè¯¥æä»¶æ ¼å¼ï¼",msg_fileSizeExceeded:"æä»¶å¤§å°è¶éï¼æä»¶å¤§å°ä¸å¾è¶è¿ 10Mï¼",msg_dataInWrongGeoJSONFormat:"æ°æ®æ ¼å¼éè¯¯ï¼éæ åç GEOJSON æ ¼å¼æ°æ®ï¼",msg_dataInWrongFormat:"æ°æ®æ ¼å¼éè¯¯ï¼éæ åç EXCEL, CSV æ GEOJSON æ ¼å¼æ°æ®ï¼",msg_searchKeywords:"æç´¢å³é®å­ä¸è½ä¸ºç©ºï¼è¯·è¾å¥æç´¢æ¡ä»¶ã",msg_searchGeocodeField:"æªå¹éå°å°åå¹éæå¡æ°æ®ï¼",msg_cityGeocodeField:"æªéç½®å½ååå¸çå°åå¹éæå¡ã",msg_getFeatureField:"æªæ¥æ¾å°ç¸å³ç¢éè¦ç´ ï¼",msg_dataflowservicesubscribed:"å·²è®¢éè¯¥æ°æ®æµæå¡ã",msg_subscribesucceeded:"æ°æ®æµæå¡è®¢éæåã",msg_crsunsupport:"ä¸æ¯æå½åå°å¾çåæ ç³»",msg_tilematrixsetunsupport:"ä¸æ¯æä¼ å¥çTileMatrixSet",msg_jsonResolveFiled:"jsonæ ¼å¼è§£æå¤±è´¥ï¼",msg_requestContentFiled:"éè¿iportalè¯·æ±æ°æ®å¤±è´¥ï¼",msg_getdatafailed:"è·åæ°æ®å¤±è´¥ï¼"},code:null,defaultCode:"en-US",getCode:function(){return d8.code||d8.setCode(),d8.code},setCode:function(){var t=this.getLanguageFromCookie();t||(t=d8.defaultCode,t="Netscape"===navigator.appName?navigator.language:navigator.browserLanguage),0===t.indexOf("zh")&&(t="zh-CN"),0===t.indexOf("en")&&(t="en-US"),d8.code=t},getLanguageFromCookie:function(){for(var t=document.cookie.split(";"),e=0;e<t.length;e++){for(var r=t[e];" "===r.charAt(0);)r=r.substring(1);if(-1!==r.indexOf("language="))return r.substring("language=".length,r.length)}return""},i18n:function(t){var e=d8[d8.getCode()],r=e&&e[t];return r||(r=t),r}},b8=function(){try{return XLSX}catch(t){return{}}}(),v8={rABS:"undefined"!=typeof FileReader&&FileReader.prototype&&FileReader.prototype.readAsBinaryString,rABF:"undefined"!=typeof FileReader&&FileReader.prototype&&FileReader.prototype.readAsArrayBuffer,rAT:"undefined"!=typeof FileReader&&FileReader.prototype&&FileReader.prototype.readAsText,readFile:function(t,e,r,n,o){l8===t||u8===t?this.readTextFile(e,r,n,o):a8!==t&&s8!==t||this.readXLSXFile(e,r,n,o)},readTextFile:function(t,e,r,n){var o=new FileReader;o.onloadend=function(t){e&&e.call(n,t.target.result)},o.onerror=function(t){r&&r.call(n,t)},this.rAT?o.readAsText(t.file,"utf-8"):o.readAsBinaryString(t.file)},readXLSXFile:function(t,e,r,n){var o=new FileReader;o.onloadend=function(t){var o=new Uint8Array(t.target.result),i=b8.read(o,{type:"array"});try{if(i&&i.SheetNames&&i.SheetNames.length>0){var a=i.SheetNames[0],s=b8.utils.sheet_to_csv(i.Sheets[a]);e&&e.call(n,s)}}catch(t){r&&r.call(n,t)}},o.onerror=function(t){r&&r.call(n,t)},this.rABF&&o.readAsArrayBuffer(t.file)},processDataToGeoJson:function(t,e,r,n,o){var i=null;if("EXCEL"===t||"CSV"===t)i=this.processExcelDataToGeoJson(e),r&&r.call(o,i);else if("JSON"===t||"GEOJSON"===t){var a=e;"string"==typeof a&&(a=JSON.parse(a)),"ISERVER"===a.type?i=a.data.recordsets[0].features:"FeatureCollection"===a.type?i=a:n&&n.call(o,d8.i18n("msg_dataInWrongGeoJSONFormat")),r&&r.call(o,i)}else n&&n.call(o,d8.i18n("msg_dataInWrongFormat"))},processExcelDataToGeoJson:function(t){for(var e=this.string2Csv(t),r=e.colTitles,n=-1,o=-1,i=0,a=r.length;i<a;i++)this.isXField(r[i])&&(n=i),this.isYField(r[i])&&(o=i);for(var s=[],u=0,l=e.rows.length;u<l;u++){var c=e.rows[u],f=Number(c[n]),p=Number(c[o]),h={};for(var y in e.colTitles){h[e.colTitles[y]]=e.rows[u][y]}var d={type:"Feature",geometry:{type:"Point",coordinates:[f,p]},properties:h};s.push(d)}return s},isXField:function(t){var e=t.toLowerCase();return"x"===e||"smx"===e||"jd"===e||"ç»åº¦"===e||"ä¸ç»"===e||"longitude"===e||"lot"===e||"lon"===e||"lng"===e||"xåæ "===e},isYField:function(t){var e=t.toLowerCase();return"y"===e||"smy"===e||"wd"===e||"çº¬åº¦"===e||"åçº¬"===e||"latitude"===e||"lat"===e||"yåæ "===e},string2Csv:function(t,e){var r=t.split("\n"),n={};n.colTitles=e?[]:r[0].split(","),n.rows=[];for(var o=e?0:1;o<r.length;o++)r[o]&&n.rows.push(r[o].split(","));return n}};function m8(t){"@babel/helpers - typeof";return(m8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g8(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,S8(n.key),n)}}function S8(t){var e=function(t,e){if("object"!=m8(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=m8(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==m8(e)?e:String(e)}var w8=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.datasets=e,this.EVENT_TYPES=["getdatafailed"],this.events=new qn(this,null,this.EVENT_TYPES)}var e,r,n;return e=t,(r=[{key:"getDatasetInfo",value:function(t){var e=this.datasets.url,r=this;Dn.get(e).then(function(t){return t.json()}).then(function(e){if(e.datasetInfo){var n=e.datasetInfo;r.datasetsInfo={dataSourceName:n.dataSourceName,datasetName:n.name,mapName:e.name},t({result:r.datasetsInfo})}}).catch(function(t){console.log(t),r._fireFailedEvent(t)})}},{key:"getDataFeatures",value:function(t,e){var r,n,o=t.result,i={name:o.datasetName+"@"+o.dataSourceName};Object.assign(i,this.datasets.queryInfo),r=new rs(i),n=new Is({queryParameter:r,datasetNames:[o.dataSourceName+":"+o.datasetName],fromIndex:0,toIndex:1e5}),new Us(o.dataUrl).processAsync(n,e)}},{key:"getLayerFeatures",value:function(t,e){var r,n,o=t.result,i={name:o.mapName};Object.assign(i,this.datasets.queryInfo),r=new rs(i),n=new LP({queryParams:[r],expectCount:1e5}),new HP(o.dataUrl).processAsync(n,e)}},{key:"getDataInfoByIptl",value:function(t){this.getServiceInfo(this.datasets.url,t)}},{key:"getServiceInfo",value:function(t,e){var r=this;Dn.get(t,null,{withCredentials:this.datasets.withCredentials}).then(function(t){return t.json()}).then(function(n){var o;!1!==n.succeed?n.dataItemServices&&n.dataItemServices.length>0?(n.dataItemServices.forEach(function(n){if("RESTDATA"===n.serviceType&&"PUBLISHED"===n.serviceStatus)o=n;else{if("RESTMAP"!==n.serviceType||"PUBLISHED"!==n.serviceStatus)return void r.getDatafromContent(t,e);o=n}}),o&&r.getDatafromRest(o.serviceType,o.address,e)):r.getDatafromContent(t,e):r._fireFailedEvent(n)}).catch(function(t){console.log(t),r._fireFailedEvent(t)})}},{key:"getDatafromContent",value:function(t,e){var r=this,n={result:{}},o=this;t+="/content.json?pageSize=9999999&currentPage=1",Dn.get(t,null,{withCredentials:this.datasets.withCredentials}).then(function(t){return t.json()}).then(function(t){if(!1!==t.succeed){if(t.type){if("JSON"===t.type||"GEOJSON"===t.type){if(t.content=JSON.parse(t.content.trim()),!t.content.features)return void console.log(d8.i18n("msg_jsonResolveFiled"));var i=r._formatGeoJSON(t.content);n.result.features={type:t.content.type,features:i}}else if("EXCEL"===t.type||"CSV"===t.type){var a=r._excelData2Feature(t.content);n.result.features={type:"FeatureCollection",features:a}}e(n,"content")}}else o._fireFailedEvent(t)},this).catch(function(t){console.log(t),o._fireFailedEvent(t)})}},{key:"getDatafromRest",value:function(t,e,r){var n=this,o=this.datasets.withCredentials;if("RESTDATA"===t){var i,a,s="".concat(e,"/data/datasources");Dn.get(s,null,{withCredentials:o}).then(function(t){return t.json()}).then(function(t){i=t.datasourceNames[0],s="".concat(e,"/data/datasources/").concat(i,"/datasets"),Dn.get(s,null,{withCredentials:o}).then(function(t){return t.json()}).then(function(t){return a=t.datasetNames[0],n.getDatafromRestData("".concat(e,"/data"),[i+":"+a],r),[i+":"+a]}).catch(function(t){n._fireFailedEvent(t)})}).catch(function(t){n._fireFailedEvent(t)})}else{var u,l,c,f="".concat(e,"/maps");Dn.get(f,null,{withCredentials:o}).then(function(t){return t.json()}).then(function(t){u=t[0].name,c=t[0].path,f=f="".concat(e,"/maps/").concat(u,"/layers"),Dn.get(f,null,{withCredentials:o}).then(function(t){return t.json()}).then(function(t){return l=t[0].subLayers.layers[0].caption,n.getDatafromRestMap(l,c,r),l}).catch(function(t){n._fireFailedEvent(t)})}).catch(function(t){n._fireFailedEvent(t)})}}},{key:"getDatafromRestData",value:function(t,e,r){var n=this;this.datasets.queryInfo.attributeFilter=this.datasets.queryInfo.attributeFilter||"SmID>0",this._getFeatureBySQL(t,e,this.datasets.queryInfo,function(t){r(t,"RESTDATA")},function(t){console.log(t),n._fireFailedEvent(t)})}},{key:"getDatafromRestMap",value:function(t,e,r){var n=this;this.datasets.queryInfo.attributeFilter=this.datasets.queryInfo.attributeFilter||"smid=1",this._queryFeatureBySQL(e,t,this.datasets.queryInfo,null,null,function(t){r(t,"RESTMAP")},function(t){console.log(t),n._fireFailedEvent(t)})}},{key:"_getFeatureBySQL",value:function(t,e,r,n,o){var i,a,s={name:e.join().replace(":","@")};Object.assign(s,r),i=new rs(s),a=new Is({queryParameter:i,datasetNames:e,fromIndex:0,toIndex:1e5,returnContent:!0}),new Us(t).processAsync(a,function(t){"processCompleted"===t.type?n&&n(t):o&&o(t)})}},{key:"_queryFeatureBySQL",value:function(t,e,r,n,o,i,a,s,u,l){var c,f,p={name:e};Object.assign(p,r),c=new rs(p),n&&(c.fields=n);var h={queryParams:[c]};l&&(h.queryOption=pr.ATTRIBUTE),s&&(h.startRecord=s),u&&(h.expectCount=u),o&&(h.prjCoordSys={epsgCode:o}),f=new LP(h),this._queryBySQL(t,f,function(t){"processCompleted"===t.type?i(t):a(t)})}},{key:"_queryBySQL",value:function(t,e,r,n){new HP(t,{format:this._processFormat(n)}).processAsync(e,r)}},{key:"_processFormat",value:function(t){return t||lr.GEOJSON}},{key:"_formatGeoJSON",value:function(t){var e=t.features;return e.forEach(function(t,e){t.properties.index=e}),e}},{key:"_excelData2Feature",value:function(t){for(var e=t.colTitles,r=-1,n=-1,o=0,i=e.length;o<i;o++)v8.isXField(e[o])&&(r=o),v8.isYField(e[o])&&(n=o);for(var a=[],s=0,u=t.rows.length;s<u;s++){var l=t.rows[s],c=Number(l[r]),f=Number(l[n]),p={};for(var h in t.colTitles){p[t.colTitles[h]]=t.rows[s][h]}p.index=s+"";var y={type:"Feature",geometry:{type:"Point",coordinates:[c,f]},properties:p};a.push(y)}return a}},{key:"_fireFailedEvent",value:function(t){var e=t?{error:t,message:d8.i18n("msg_getdatafailed")}:{message:d8.i18n("msg_getdatafailed")};this.events.triggerEvent("getdatafailed",e)}}])&&g8(e.prototype,r),n&&g8(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function O8(t){"@babel/helpers - typeof";return(O8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _8(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return P8(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return P8(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function P8(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function E8(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,C8(n.key),n)}}function C8(t){var e=function(t,e){if("object"!=O8(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=O8(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==O8(e)?e:String(e)}var T8=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.datasets=e.datasets,this.xField=[],this.yField=[],this.grid={top:"50px",bottom:"50px",left:"50px",right:"60px"},this.chartType=e.type||"bar",this._initXYField(e.chartOptions),this.EVENT_TYPES=["getdatafailed"],this.events=new qn(this,null,this.EVENT_TYPES)}var e,r,n;return e=t,(r=[{key:"_initXYField",value:function(t){var e=this;t&&t.length>0&&t.forEach(function(t){t.xAxis&&e.xField.push({field:t.xAxis.field,name:t.xAxis.name}),t.yAxis&&e.yField.push({field:t.yAxis.field,name:t.yAxis.name})})}},{key:"getDatasetInfo",value:function(t){var e=this;this.createChart=t,this.datasets&&this._checkUrl(this.datasets.url)&&(this.chartModel=new w8(this.datasets),"iServer"===this.datasets.type?this.chartModel.getDatasetInfo(this._getDatasetInfoSuccess.bind(this)):"iPortal"===this.datasets.type&&this.chartModel.getDataInfoByIptl(this._getDataInfoSuccess.bind(this)),this.chartModel.events.on({getdatafailed:function(t){e.events.triggerEvent("getdatafailed",t)}}))}},{key:"_getDatasetInfoSuccess",value:function(t){var e=this.datasets.url,r=e.indexOf("rest");if(r>0){var n=e.indexOf("/",r+5),o=e.substring(r+5,n),i=e.substring(0,r+4)+"/data";if("maps"===o){var a=e.indexOf("/",n+1),s=e.substring(n+1,a);i=e.substring(0,r+4)+"/maps/"+s,t.result.dataUrl=i,this._getLayerFeatures(t)}else"data"===o&&(t.result.dataUrl=i,this._getDataFeatures(t))}}},{key:"_getDataInfoSuccess",value:function(t,e){"RESTMAP"===e?this._getChartDatasFromLayer(t):this._getChartDatas(t)}},{key:"_getDataFeatures",value:function(t){this.chartModel.getDataFeatures(t,this._getChartDatas.bind(this))}},{key:"_getLayerFeatures",value:function(t){this.chartModel.getLayerFeatures(t,this._getChartDatasFromLayer.bind(this))}},{key:"_getChartDatas",value:function(t){if(t){this.features=t.result.features;var e=this.features.features,r={};if(e.length){var n=e[0],o=[],i=[];for(var a in n.properties)o.push(a),i.push(this._getDataType(n.properties[a]));for(var s in r={features:e,fieldCaptions:o,fieldTypes:i,fieldValues:[]},i){var u=[];for(var l in e){var c=e[l],f=r.fieldCaptions[s],p=c.properties[f];u.push(p)}r.fieldValues.push(u)}this.createChart(r)}}}},{key:"_getChartDatasFromLayer",value:function(t){if(t.result.recordsets){var e=t.result.recordsets[0],r=e.features.features;this.features=e.features;var n={};if(r.length){for(var o in(n={features:e.features,fieldCaptions:e.fieldCaptions,fieldTypes:e.fieldTypes,fieldValues:[]}).fieldCaptions){var i=[];for(var a in r){var s=r[a],u=n.fieldCaptions[o],l=s.properties[u];i.push(l)}n.fieldValues.push(i)}this.createChart(n)}}}},{key:"_createChartOptions",value:function(t){return this.calculatedData=this._createChartDatas(t),this.updateChartOptions(this.chartType)}},{key:"changeType",value:function(t){if(t!==this.chartType)return this.chartType=t,this.updateChartOptions(this.chartType)}},{key:"updateData",value:function(t,e,r){this.updateChart=r,this.xField=[],this.yField=[],this._initXYField(e),t.type=t.type||"iServer",t.withCredentials=t.withCredentials||!1,this.datasets=t,this.getDatasetInfo(this._updateDataSuccess.bind(this))}},{key:"_updateDataSuccess",value:function(t){var e=this._createChartOptions(t);this.updateChart(e)}},{key:"updateChartOptions",value:function(t,e){if(this.calculatedData){var r=this.grid,n=this._createChartSeries(this.calculatedData,t),o=[];for(var i in this.calculatedData.XData)o.push({value:this.calculatedData.XData[i].fieldsData});var a={type:"category",name:this.xField[0].name||"X",data:o,nameTextStyle:{color:"#fff",fontSize:14},splitLine:{show:!1},axisLine:{lineStyle:{color:"#eee"}}},s={type:"value",name:this.yFieldName||"Y",data:{},nameTextStyle:{color:"#fff",fontSize:14},splitLine:{show:!1},axisLine:{lineStyle:{color:"#eee"}}},u={formatter:"{b0}: {c0}"},l="#404a59";return e&&(e.grid&&(r=e.grid),e.tooltip&&(u=e.tooltip),e.backgroundColor&&(l=e.backgroundColor)),{backgroundColor:l,grid:r,series:n,xAxis:a,yAxis:s,tooltip:u}}}},{key:"_createChartDatas",value:function(t){var e=0,r=[],n=t.fieldCaptions,o=this;n.forEach(function(t,r){o.xField[0]&&t===o.xField[0].field&&(e=r)}),this.yFieldName="",this.yField.forEach(function(t,e){0!==e&&(o.yFieldName=o.yFieldName+","),o.yFieldName=o.yFieldName+t.name,n.forEach(function(e,n){e===t.field&&r.push(n)})});var i=this._getAttrData(t,e),a=[];if(r.length>0)r.forEach(function(e){var r=[];for(var n in t.fieldValues[e])r.push({value:t.fieldValues[e][n]});a.push(r)});else{for(var s=[],u=[],l=i.length,c=0;c<l;c++){for(var f=!1,p=0,h=u.length;p<h;p++)if(i[c].fieldsData===u[p].fieldsData){s[p].value++,u[p].recordIndexs.push(c),f=!0;break}f||i[c].fieldsData&&(u.push({fieldsData:i[c].fieldsData,recordIndexs:[c]}),s.push({value:1}))}i=u,a=[s]}return{XData:i,YData:a}}},{key:"_getAttrData",value:function(t,e){0===e&&(this.xField=[{field:t.fieldCaptions[e],name:t.fieldCaptions[e]}]);for(var r=[],n=0,o=t.fieldValues[e].length;n<o;n++){var i=t.fieldValues[e][n];r.push({recordIndexs:n,fieldsData:i})}return r}},{key:"_createChartSeries",value:function(t,e){var r=[];return t.YData.forEach(function(t){var n,o=0,i=[],a=_8(t);try{for(a.s();!(n=a.n()).done;){o=n.value.value,i.push({value:o})}}catch(t){a.e(t)}finally{a.f()}var s={type:e,data:i,name:"y"};r.push(s)}),r}},{key:"_isDate",value:function(t){return/((^((1[8-9]\d{2})|([2-9]\d{3}))([-\/\._])(10|12|0?[13578])([-\/\._])(3[01]|[12][0-9]|0?[1-9])$)|(^((1[8-9]\d{2})|([2-9]\d{3}))([-\/\._])(11|0?[469])([-\/\._])(30|[12][0-9]|0?[1-9])$)|(^((1[8-9]\d{2})|([2-9]\d{3}))([-\/\._])(0?2)([-\/\._])(2[0-8]|1[0-9]|0?[1-9])$)|(^([2468][048]00)([-\/\._])(0?2)([-\/\._])(29)$)|(^([3579][26]00)([-\/\._])(0?2)([-\/\._])(29)$)|(^([1][89][0][48])([-\/\._])(0?2)([-\/\._])(29)$)|(^([2-9][0-9][0][48])([-\/\._])(0?2)([-\/\._])(29)$)|(^([1][89][2468][048])([-\/\._])(0?2)([-\/\._])(29)$)|(^([2-9][0-9][2468][048])([-\/\._])(0?2)([-\/\._])(29)$)|(^([1][89][13579][26])([-\/\._])(0?2)([-\/\._])(29)$)|(^([2-9][0-9][13579][26])([-\/\._])(0?2)([-\/\._])(29)$))/gi.test(t)}},{key:"_isNumber",value:function(t){var e=Number(t);return 0===e||!isNaN(e)}},{key:"_getDataType",value:function(t){if(null!==t&&void 0!==t&&""!==t){if(this._isDate(t))return"DATE";if(this._isNumber(t))return"NUMBER"}return"STRING"}},{key:"_checkUrl",value:function(t){return!(""===t||!this._isMatchUrl(t))&&(!/^http[s]?:\/\/localhost/.test(t)&&!/^http[s]?:\/\/127.0.0.1/.test(t))}},{key:"_isMatchUrl",value:function(t){return new RegExp("(https?|http|file|ftp)://[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]").test(t)}},{key:"getStyle",value:function(){return{grid:this.grid,tooltip:this.tooltip,backgroundColor:this.backgroundColor}}},{key:"getFeatures",value:function(){return this.features}},{key:"setStyle",value:function(t){return this.updateChartOptions(this.chartType,t)}}])&&E8(e.prototype,r),n&&E8(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function j8(t){"@babel/helpers - typeof";return(j8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function k8(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,x8(n.key),n)}}function x8(t){var e=function(t,e){if("object"!=j8(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=j8(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==j8(e)?e:String(e)}var A8=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.domID=e,this.chartType=r.type||"bar",r.datasets.type=r.datasets.type||"iServer",r.datasets.withCredentials=r.datasets.withCredentials||!1,this.viewModel=new T8(r),this._fillDataToView()}var e,r,n;return e=t,(r=[{key:"onAdd",value:function(t){this.addChart=t}},{key:"_fillDataToView",value:function(){var t=new h8;this.viewModel.getDatasetInfo(this._createChart.bind(this)),this.viewModel.events.on({getdatafailed:function(e){t.showView(e.message)}})}},{key:"getStyle",value:function(){return this.viewModel.getStyle()}},{key:"getFeatures",value:function(){return this.viewModel.getFeatures()}},{key:"setStyle",value:function(t){var e=this.viewModel.setStyle(t);this._updateChart(e)}},{key:"changeType",value:function(t){if(this.chartType!==t){this.chartType=t;var e=this.viewModel.changeType(t);this._updateChart(e)}}},{key:"updateData",value:function(t,e){var r=this;this.viewModel.updateData(t,e,function(t){r._updateChart(t),r.addChart&&r.addChart()})}},{key:"_createChart",value:function(t){this.echart=y8.init(document.getElementById(this.domID),null,{renderer:"canvas"});var e=this.viewModel._createChartOptions(t);this.echart.setOption(e),this.addChart&&this.addChart()}},{key:"_updateChart",value:function(t){this.echart&&(this.echart.clear(),this.echart.setOption(t))}}])&&k8(e.prototype,r),n&&k8(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function I8(t){"@babel/helpers - typeof";return(I8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function N8(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,R8(n.key),n)}}function R8(t){var e=function(t,e){if("object"!=I8(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=I8(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==I8(e)?e:String(e)}var M8=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.id=e.id?e.id:null,this.rootContainer=null}var e,r,n;return e=t,(r=[{key:"getElement",value:function(){return this.id&&(this.rootContainer.id=this.id),this.rootContainer}},{key:"_initView",value:function(){}},{key:"showView",value:function(){this.rootContainer.hidden=!1}},{key:"closeView",value:function(){this.rootContainer.hidden=!0}}])&&N8(e.prototype,r),n&&N8(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function L8(t){"@babel/helpers - typeof";return(L8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function B8(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,D8(n.key),n)}}function D8(t){var e=function(t,e){if("object"!=L8(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=L8(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==L8(e)?e:String(e)}function F8(t,e,r){return e=U8(e),function(t,e){if(e&&("object"===L8(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],U8(t).constructor):e.apply(t,r))}function U8(t){return(U8=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function G8(t,e){return(G8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var V8=function(t){function e(t){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=F8(this,e,[t]);var n=t.title?t.title:"";return r._initView(n),r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&G8(t,e)}(e,M8),r=e,(n=[{key:"_initView",value:function(t){var e=document.createElement("div");e.setAttribute("class","component-container");var r=document.createElement("div");r.setAttribute("class","component-title");var n=document.createElement("div");n.innerHTML=t,r.appendChild(n),e.appendChild(r);var o=document.createElement("div");return o.setAttribute("class","component-content"),e.appendChild(o),this.content=o,this.rootContainer=e,e}},{key:"getContentElement",value:function(){return this.content}},{key:"appendContent",value:function(t){this.content.appendChild(t)}}])&&B8(r.prototype,n),o&&B8(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function q8(t){"@babel/helpers - typeof";return(q8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function H8(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,z8(n.key),n)}}function z8(t){var e=function(t,e){if("object"!=q8(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=q8(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==q8(e)?e:String(e)}function J8(t,e,r){return e=W8(e),function(t,e){if(e&&("object"===q8(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],W8(t).constructor):e.apply(t,r))}function W8(t){return(W8=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function K8(t,e){return(K8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Q8=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=J8(this,e,[t]))._initView(t),r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&K8(t,e)}(e,M8),r=e,(n=[{key:"_initView",value:function(t){var e=this._createElement("div","component-selecttool");t.labelName&&(this._createElement("label","component-selecttool__lable--describe",e).innerHTML=t.labelName);var r=this._createElement("div","component-selecttool--chart",e);r.setAttribute("tabindex","1");var n=this._createElement("div","component-selecttool__name",r);n.title=t.optionsArr[0],n.innerHTML=t.optionsArr[0];var o=this._createElement("div","component-selecttool__trianglebtn--chart",r),i=this._createElement("div","component-triangle-down-img",o),a=this._createElement("div","component-selecttool__content",r),s=this._createElement("div","component-selecttool__content--chart",a),u=this._createElement("div","component-selecttool__scrollarea__content",s);u.setAttribute("tabindex","1"),this.createOptions(u,t.optionsArr),this.optionClickEvent(u,n,t.optionsClickCb),this._selectClickEvent(r,a,i),this.rootContainer=e}},{key:"createOptions",value:function(t,e){for(var r in e){var n=this._createElement("div","component-selecttool__option",t);n.title=e[r],n.innerHTML=e[r]}}},{key:"_selectClickEvent",value:function(t,e,r){t.onclick=function(t){"block"===e.style.display?(e.style.display="none",r.className="component-triangle-down-img"):(e.style.display="block",r.className="triangle-up-img"),t.preventDefault(),t.stopPropagation()},t.onmousedown=function(t){t.target!==this&&(this.focus(),t.preventDefault(),t.stopPropagation())},t.onblur=function(){e.style.display="none",r.className="component-triangle-down-img"}}},{key:"_createElement",value:function(t,e,r){var n=document.createElement(t||"div");return e&&(n.className=e),r&&r.appendChild(n),n}},{key:"optionClickEvent",value:function(t,e,r){for(var n=function(){var n=t.children[o];n.onclick=function(){e.innerHTML=n.innerHTML,e.title=n.title,n.getAttribute("data-value")&&e.setAttribute("data-value",n.getAttribute("data-value")),r&&r(n)}},o=0;o<t.children.length;o++)n()}}])&&H8(r.prototype,n),o&&H8(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function Y8(t){"@babel/helpers - typeof";return(Y8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function X8(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Z8(n.key),n)}}function Z8(t){var e=function(t,e){if("object"!=Y8(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Y8(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Y8(e)?e:String(e)}function $8(t,e,r){return e=t9(e),function(t,e){if(e&&("object"===Y8(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],t9(t).constructor):e.apply(t,r))}function t9(t){return(t9=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function e9(t,e){return(e9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var r9=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=$8(this,e,[t]))._initView(t),r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&e9(t,e)}(e,M8),r=e,(n=[{key:"_initView",value:function(t){var e=document.createElement("div");e.className="component-dropdownbox--container";var r=document.createElement("div");r.setAttribute("tabindex","1"),r.className="component-dropdownbox",e.appendChild(r);var n=document.createElement("div");r.appendChild(n),this._createDropDownOption(t[0],n);var o=document.createElement("div");o.className="component-dropdownbox__triangle-btn",r.appendChild(o);var i=document.createElement("div");i.className="component-triangle-down-img",o.appendChild(i);var a={parentEle:r,dropDownContent:["component-dropdownbox__content component-dropdownbox__content--chart","dropDownContent"],scrollareaContent:"component-selecttool__scrollarea__content",optionsArr:t,triangleBtn:i,dropDownTopContainer:n};this._createDropDownBox(a),this.rootContainer=e}},{key:"_createDropDownBox",value:function(t){var e=t.parentEle,r=t.dropDownTopContainer,n=document.createElement("div");n.className=t.dropDownContent[0],e.appendChild(n);var o=document.createElement("div");o.className=t.scrollareaContent,n.appendChild(o);for(var i=t.optionsArr,a=0;a<i.length;a++)this._createDropDownOption(i[a],o);var s=t.triangleBtn;this._dropDownClickEvent(e,n,s),this._eleOnblur(e,n,s);for(var u=o.children,l=function(t){u[t].onclick=function(){r.innerHTML=u[t].outerHTML}},c=0;c<u.length;c++)l(c)}},{key:"_createDropDownOption",value:function(t,e){var r=document.createElement("div");r.className="component-dropdownbox__item";var n=t;n.dataValue&&r.setAttribute("data-value",n.dataValue),e.appendChild(r);var o=document.createElement("div");o.className="component-dropdownbox__item__img",r.appendChild(o);var i=document.createElement("div");n.icon.className&&(i.className=n.icon.className),n.icon.background&&(i.style.background=n.icon.background),o.appendChild(i);var a=document.createElement("div");a.className="component-dropdownbox__item__title",a.title=n.title,a.innerHTML=n.title,r.appendChild(a);var s=document.createElement("div");s.className="component-dropdownbox__item__remark",s.title=n.remark,s.innerHTML=n.remark,r.appendChild(s)}},{key:"_dropDownClickEvent",value:function(t,e,r){t.onclick=function(t){"block"===e.style.display?(e.style.display="none",r.className="component-triangle-down-img"):(e.style.display="block",r.className="triangle-up-img"),t.preventDefault(),t.stopPropagation()},t.onmousedown=function(t){t.target!==this&&(this.focus(),t.preventDefault(),t.stopPropagation())}}},{key:"_eleOnblur",value:function(t,e,r){t.onblur=function(){e.style.display="none",r.className="component-triangle-down-img"}}},{key:"_createElement",value:function(t,e,r){var n=document.createElement(t||"div");return e&&(n.className=e),r&&r.appendChild(n),n}}])&&X8(r.prototype,n),o&&X8(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function n9(t){"@babel/helpers - typeof";return(n9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o9(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,i9(n.key),n)}}function i9(t){var e=function(t,e){if("object"!=n9(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=n9(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==n9(e)?e:String(e)}function a9(t,e,r){return e=s9(e),function(t,e){if(e&&("object"===n9(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],s9(t).constructor):e.apply(t,r))}function s9(t){return(s9=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u9(t,e){return(u9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var l9=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=a9(this,e,[t=t||{}]),t.title=t.title?t.title:"",r._initView(t.title),r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u9(t,e)}(e,M8),r=e,(n=[{key:"_initView",value:function(t){var e=document.createElement("div");e.setAttribute("class","component-popcontainer");var r=document.createElement("div");r.setAttribute("class","component-popcontainer__header");var n=document.createElement("label");n.setAttribute("class","component-popcontainer__header__title"),n.innerHTML=t,r.appendChild(n);var o=document.createElement("span");o.setAttribute("class","supermapol-icons-clear component-popcontainer__header__close"),o.onclick=this.closeView.bind(this),e.appendChild(o),e.appendChild(r);var i=document.createElement("div");i.setAttribute("class","component-popcontainer__content"),this.content=i,e.appendChild(i),this.rootContainer=e}},{key:"appendContent",value:function(t){this.content.appendChild(t)}}])&&o9(r.prototype,n),o&&o9(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function c9(t){"@babel/helpers - typeof";return(c9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f9(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,p9(n.key),n)}}function p9(t){var e=function(t,e){if("object"!=c9(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=c9(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==c9(e)?e:String(e)}function h9(t,e,r){return e=y9(e),function(t,e){if(e&&("object"===c9(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],y9(t).constructor):e.apply(t,r))}function y9(t){return(y9=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d9(t,e){return(d9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var b9=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t.title=t.title?t.title:"å±æ§",(r=h9(this,e,[t])).rootContainer.firstChild.hidden=!0,t.attributes=t.attributes?t.attributes:[],r._createAttributesTable(t.attributes),r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d9(t,e)}(e,l9),r=e,(n=[{key:"_createAttributesTable",value:function(t){var e=document.createElement("table");e.setAttribute("class","component-popcontainer__content__table");var r=document.createElement("tbody"),n=!0;for(var o in t){var i=document.createElement("tr");n&&i.setAttribute("class","component-popcontainer__content__td--color");var a=document.createElement("td"),s=document.createElement("Span");s.innerHTML=o,a.appendChild(s);var u=document.createElement("td");u.innerHTML=t[o],i.appendChild(a),i.appendChild(u),r.appendChild(i),n=!n}e.appendChild(r),this.appendContent(e)}}])&&f9(r.prototype,n),o&&f9(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function v9(t){"@babel/helpers - typeof";return(v9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function m9(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,g9(n.key),n)}}function g9(t){var e=function(t,e){if("object"!=v9(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=v9(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==v9(e)?e:String(e)}function S9(t,e,r){return e=w9(e),function(t,e){if(e&&("object"===v9(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],w9(t).constructor):e.apply(t,r))}function w9(t){return(w9=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function O9(t,e){return(O9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var _9=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=S9(this,e,[t]))._initView(),r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&O9(t,e)}(e,M8),r=e,(n=[{key:"_initView",value:function(){var t=document.createElement("div");t.setAttribute("class","component-tabpage");var e=document.createElement("ul");this.header=e;var r=document.createElement("div");r.setAttribute("class","component-tabpage__content"),this.content=r,t.appendChild(e),t.appendChild(r),this.rootContainer=t}},{key:"setTabs",value:function(t){this.removeAllTabs(),this.appendTabs(t)}},{key:"appendTabs",value:function(t){for(var e=0;e<t.length;e++){var r=document.createElement("span");r.index=e,r.appendChild(document.createTextNode(t[e].title)),r.onclick=this._changeTabsPage.bind(this);var n=t[e].content;n.index=e,n.hidden=!0,this.header.appendChild(r),this.content.appendChild(n)}this.header.firstChild.setAttribute("class","on"),this.content.firstChild.hidden=!1}},{key:"removeTab",value:function(t){this.header.removeChild(this.header.children[t]),this.content.removeChild(this.content.children[t])}},{key:"removeAllTabs",value:function(){for(var t=this.header.children.length;t>0;t--)this.header.removeChild(this.header.children[t]),this.content.removeChild(this.content.children[t])}},{key:"_changeTabsPage",value:function(t){for(var e=t.target.index,r=0;r<this.header.children.length;r++)this.header.children[r].setAttribute("class",""),this.content.children[r].hidden=!0,r===e&&(this.header.children[r].setAttribute("class","on"),this.content.children[r].hidden=!1)}}])&&m9(r.prototype,n),o&&m9(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function P9(t){"@babel/helpers - typeof";return(P9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function E9(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,C9(n.key),n)}}function C9(t){var e=function(t,e){if("object"!=P9(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=P9(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==P9(e)?e:String(e)}function T9(t,e,r){return e=j9(e),function(t,e){if(e&&("object"===P9(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],j9(t).constructor):e.apply(t,r))}function j9(t){return(j9=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function k9(t,e){return(k9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var x9=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=T9(this,e,[t])).rootContainer.classList.add("component-citytabpage--noneBoxShadow"),r.config=t.config,V.isArray(r.config)?(r.header.hidden=!0,r._createCityItem("åå¸",r.config),r.content.style.border="none"):(r._createTabs(),r.header.onclick=function(t){for(var e=0;e<r.header.children.length;e++)r.header.children[e].setAttribute("class","");t.target.setAttribute("class","on"),r._createCityContent(t.target.innerHTML)}),r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&k9(t,e)}(e,_9),r=e,(n=[{key:"_createTabs",value:function(){if(V.isArray(this.config))for(var t=0;t<this.config.length;t++){var e="";for(var r in this.config[t])e+=r;var n=document.createElement("li");n.innerHTML=e,this.header.appendChild(n)}else for(var o in this.config){var i=document.createElement("li");i.innerHTML=o,this.header.appendChild(i)}this.header.firstChild.setAttribute("class","on"),this._createCityContent(this.header.firstChild.innerHTML)}},{key:"_createCityContent",value:function(t){for(var e=this.content.children.length;e>0;e--)this.content.removeChild(this.content.children[e-1]);var r=this.config[t];for(var n in r)this._createCityItem(n,r[n])}},{key:"_createCityItem",value:function(t,e){var r=document.createElement("div"),n=document.createElement("div");n.setAttribute("class","component-citytabpag__py-key"),n.innerHTML=t,r.appendChild(n);var o=document.createElement("div");o.setAttribute("class","component-citytabpag__content");for(var i=0;i<e.length;i++){var a=document.createElement("span");a.innerHTML=e[i],o.appendChild(a)}"HOT"===t&&(o.style.width="428px"),r.appendChild(o),this.content.appendChild(r)}}])&&E9(r.prototype,n),o&&E9(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function A9(t){"@babel/helpers - typeof";return(A9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function I9(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,N9(n.key),n)}}function N9(t){var e=function(t,e){if("object"!=A9(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=A9(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==A9(e)?e:String(e)}function R9(t,e,r){return e=M9(e),function(t,e){if(e&&("object"===A9(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],M9(t).constructor):e.apply(t,r))}function M9(t){return(M9=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function L9(t,e){return(L9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var B9=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=R9(this,e,[t])).navTabsTitle=null,r.navTabsContent=null,t.tabs=t.tabs?t.tabs:[],r._initView(t.tabs),r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&L9(t,e)}(e,M8),r=e,(n=[{key:"_initView",value:function(t){var e=document.createElement("div");e.setAttribute("class","component-navtabspage");var r=document.createElement("span");r.setAttribute("class","supermapol-icons-close"),r.onclick=this.closeView.bind(this),e.appendChild(r);var n=document.createElement("div");this.navTabsTitle=n,n.setAttribute("class","component-navtabspage__title"),e.appendChild(n);var o=document.createElement("div");this.navTabsContent=o,o.setAttribute("class","component-navtabspage__content"),e.appendChild(o),t.length>0&&this.appendTabs(t),this.rootContainer=e}},{key:"setTabs",value:function(t){this.removeAllTabs(),this.appendTabs(t)}},{key:"appendTabs",value:function(t){for(var e=0;e<t.length;e++){var r=document.createElement("span");r.index=e,r.appendChild(document.createTextNode(t[e].title)),r.onclick=this._changeTabsPage.bind(this);var n=t[e].content;n.index=e,n.hidden=!0,this.navTabsTitle.appendChild(r),this.navTabsContent.appendChild(n)}this.navTabsTitle.firstChild.setAttribute("class","component-navtabspage__tabs--select"),this.navTabsContent.firstChild.hidden=!1}},{key:"removeTab",value:function(t){this.navTabsTitle.removeChild(this.navTabsTitle.children[t]),this.navTabsContent.removeChild(this.navTabsContent.children[t])}},{key:"removeAllTabs",value:function(){for(var t=this.navTabsTitle.children.length;t>0;t--)this.navTabsTitle.removeChild(this.navTabsTitle.children[t]),this.navTabsContent.removeChild(this.navTabsContent.children[t])}},{key:"_changeTabsPage",value:function(t){for(var e=t.target.index,r=0;r<this.navTabsTitle.children.length;r++)this.navTabsTitle.children[r].setAttribute("class",""),this.navTabsContent.children[r].hidden=!0,r===e&&(this.navTabsTitle.children[r].setAttribute("class","component-navtabspage__tabs--select"),this.navTabsContent.children[r].hidden=!1)}}])&&I9(r.prototype,n),o&&I9(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function D9(t){"@babel/helpers - typeof";return(D9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function F9(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,U9(n.key),n)}}function U9(t){var e=function(t,e){if("object"!=D9(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=D9(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==D9(e)?e:String(e)}function G9(t,e,r){return e=V9(e),function(t,e){if(e&&("object"===D9(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,r||[],V9(t).constructor):e.apply(t,r))}function V9(t){return(V9=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function q9(t,e){return(q9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var H9=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=G9(this,e,[t=t||{}])).currentPage=0,r.pageNumberLis=[],r.currentPageNumberLis=[],r.linkageEvent=null,t.contents=t.contents?t.contents:null,t.pageCounts=t.pageCounts?t.pageCounts:0,r._initView(t.contents,t.pageCounts),r}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&q9(t,e)}(e,M8),r=e,(n=[{key:"setLinkageEvent",value:function(t){this.linkageEvent=t}},{key:"_initView",value:function(t,e){var r=document.createElement("div");r.setAttribute("class","component-pagination");var n=document.createElement("div");n.setAttribute("class","component-pagination__content"),r.appendChild(n),this.content=n;var o=document.createElement("ul");o.setAttribute("class","component-pagination__link"),o.onclick=this._changePageEvent.bind(this),r.appendChild(o),this._createLink(o),this.link=o,t&&this.setContent(t),0!==e&&this.setPageLink(e),this.rootContainer=r}},{key:"setContent",value:function(t){this.clearContent(),this.appendContent(t)}},{key:"appendContent",value:function(t){this.content.appendChild(t)}},{key:"clearContent",value:function(){for(var t=this.content.children.length-1;t>=0;t--)this.content.removeChild(this.content.children[t])}},{key:"setPageLink",value:function(t){this.pageNumberLis=[],this.currentPageNumberLis=[],this.clearPageLink(),this._createPageLi(t),this._appendPageLink()}},{key:"_createPageLi",value:function(t){for(var e=0;e<t;e++){var r=document.createElement("li");r.innerHTML=e+1,this.pageNumberLis.push(r)}if(this.pageNumberLis[0].setAttribute("class","active"),this.currentPage=1,t<5)this.currentPageNumberLis=this.pageNumberLis;else for(var n=0;n<5;n++)this.currentPageNumberLis.push(this.pageNumberLis[n])}},{key:"_appendPageLink",value:function(){for(var t=0;t<this.currentPageNumberLis.length;t++)this.link.insertBefore(this.currentPageNumberLis[t],this.link.childNodes[this.link.children.length-2]);for(var e=0;e<this.currentPageNumberLis.length;e++)this.currentPageNumberLis[e].setAttribute("class",""),Number(this.currentPageNumberLis[e].innerHTML)===this.currentPage&&this.currentPageNumberLis[e].setAttribute("class","active");this._changeDisableState(),this.linkageEvent&&this.linkageEvent(this.currentPage)}},{key:"clearPageLink",value:function(){for(var t=this.link.children.length-3;t>1;t--)this.link.removeChild(this.link.children[t])}},{key:"_createLink",value:function(t){for(var e=0;e<4;e++){var r=document.createElement("li");r.setAttribute("class","disable");var n=document.createElement("span");r.appendChild(n),0===e?(n.id="first",n.setAttribute("class","supermapol-icons-first")):1===e?(n.id="prev",n.setAttribute("class","supermapol-icons-prev")):2===e?(n.id="next",n.setAttribute("class","supermapol-icons-next")):3===e&&(n.id="last",n.setAttribute("class","supermapol-icons-last")),t.appendChild(r)}}},{key:"_changePageEvent",value:function(t){var e=t.target;if("disable"!==e.parentElement.classList[0]){var r;if(e.id)r=e.id;else{if(!Number(e.innerHTML))return;r=Number(e.innerHTML)}this._prePageNum(r),this.clearPageLink(),this._appendPageLink()}}},{key:"_changeDisableState",value:function(){this.link.children[0].setAttribute("class",""),this.link.children[1].setAttribute("class",""),this.link.children[this.link.children.length-1].setAttribute("class",""),this.link.children[this.link.children.length-2].setAttribute("class",""),1===this.currentPage&&(this.link.children[0].setAttribute("class","disable"),this.link.children[1].setAttribute("class","disable")),this.currentPage===this.pageNumberLis.length&&(this.link.children[this.link.children.length-1].setAttribute("class","disable"),this.link.children[this.link.children.length-2].setAttribute("class","disable"))}},{key:"_prePageNum",value:function(t){var e=[];if(this.currentPage="first"===t?1:"last"===t?this.pageNumberLis.length:"prev"===t?this.currentPage-1:"next"===t?this.currentPage+1:t,this.pageNumberLis.length<=5)for(var r=0;r<this.pageNumberLis.length;r++)e.push(this.pageNumberLis[r]);else if(this.currentPage<=3)for(var n=0;n<5;n++)e.push(this.pageNumberLis[n]);else if(this.currentPage>=this.pageNumberLis.length-3)for(var o=this.pageNumberLis.length-5;o<this.pageNumberLis.length;o++)e.push(this.pageNumberLis[o]);else for(var i=this.currentPage-3;i<=this.currentPage+1;i++)e.push(this.pageNumberLis[i]);e.length>0&&(this.currentPageNumberLis=e)}}])&&F9(r.prototype,n),o&&F9(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}();function z9(t){"@babel/helpers - typeof";return(z9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function J9(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function W9(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?J9(Object(r),!0).forEach(function(e){K9(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):J9(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function K9(t,e,r){var n;return(e="symbol"==z9(n=function(t,e){if("object"!=z9(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=z9(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Q9(t){"@babel/helpers - typeof";return(Q9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Y9(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function X9(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Y9(Object(r),!0).forEach(function(e){Z9(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Y9(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Z9(t,e,r){var n;return(e="symbol"==Q9(n=function(t,e){if("object"!=Q9(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Q9(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"))?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}sJ.Lang=d8,sJ.i18n=sJ.Lang.i18n,sJ.Util=W9(W9({},sJ.Util),V),sJ.Browser=F,sJ.INCHES_PER_UNIT=q,sJ.METERS_PER_INCH=H,sJ.DOTS_PER_INCH=96,sJ.IS_GECKO=G,sJ.setCORS=function(t){kn=t},sJ.isCORS=Ln,sJ.setRequestTimeout=function(t){return xn=t},sJ.getRequestTimeout=Bn,sJ.FetchRequest=Dn,sJ.EncryptRequest=a0,sJ.getServiceKey=function(t){return s0.apply(this,arguments)},sJ.GeometryAnalysis=P0,sJ.inherit=function(t,e){var r,n,o,i=function(){};for(i.prototype=e.prototype,t.prototype=new i,r=2,n=arguments.length;r<n;r++)"function"==typeof(o=arguments[r])&&(o=o.prototype),V.extend(t.prototype,o)},sJ.mixin=S,sJ.String=w,sJ.Number=O,sJ.Function=_,sJ.Array=P,sJ.Date=dJ,sJ.Event=Fn,sJ.Bounds=Z,sJ.Credential=Wn,sJ.Events=qn,sJ.Feature=ee,sJ.Geometry=j,sJ.Geometry3D=_J,sJ.Pixel=b,sJ.Size=p,sJ.Feature.Vector=he,sJ.Geometry.Collection=yt,sJ.Geometry.Curve=jt,sJ.Geometry.GeoText=yB,sJ.Geometry.LinearRing=Ht,sJ.Geometry.LineString=Lt,sJ.Geometry.MultiLineString=Ae,sJ.Geometry.MultiPoint=wt,sJ.Geometry.MultiPolygon=De,sJ.Geometry.Point=at,sJ.Geometry.Polygon=Xt,sJ.Geometry.Rectangle=yJ,sJ.Components.Chart=A8,sJ.Components.ChartViewModel=T8,sJ.Components.MessageBox=h8,sJ.Components.AttributesPopContainer=b9,sJ.Components.CityTabsPage=x9,sJ.Components.CommonContainer=V8,sJ.Components.DropDownBox=r9,sJ.Components.IndexTabsPageContainer=_9,sJ.Components.NavTabsPage=B9,sJ.Components.PaginationContainer=H9,sJ.Components.PopContainer=l9,sJ.Components.Select=Q8,sJ.Components.TemplateBase=M8,sJ.Components.FileReaderUtil=v8,sJ.TimeControlBase=RJ,sJ.TimeFlowControl=qJ,sJ.Format=sJ.Format||ve,sJ.Format.GeoJSON=cn,sJ.Format.JSON=Pe,sJ.Format.WKT=xJ,sJ.iManager=oW,sJ.iManagerCreateNodeParam=XJ,sJ.iManagerServiceBase=WJ,sJ.iPortal=MW,sJ.iPortalAddDataParam=XW,sJ.iPortalAddResourceParam=qW,sJ.iPortalDataConnectionInfoParam=lK,sJ.iPortalDataMetaInfoParam=eK,sJ.iPortalDataStoreInfoParam=iK,sJ.iPortalQueryParam=pW,sJ.iPortalQueryResult=bW,sJ.iPortalRegisterServiceParam=WW,sJ.iPortalResource=PW,sJ.iPortalServiceBase=uW,sJ.iPortalShareEntity=FW,sJ.iPortalShareParam=jW,sJ.iPortalUser=bK,sJ.AddressMatchService=wo,sJ.AggregationParameter=SK,sJ.AreaSolarRadiationParameters=xE,sJ.AreaSolarRadiationService=DE,sJ.AttachmentsParameters=Gu,sJ.BucketAggParameter=jK,sJ.BufferAnalystParameters=YE,sJ.BufferAnalystService=TC,sJ.BufferDistance=VE,sJ.BuffersAnalystJobsParameter=KO,sJ.BuffersAnalystJobsService=r_,sJ.BufferSetting=JE,sJ.BurstPipelineAnalystParameters=cb,sJ.BurstPipelineAnalystService=mb,sJ.ChartFeatureInfoSpecsService=oi,sJ.ChartAcronymClassifyService=pi,sJ.ChartQueryFilterParameter=Lo,sJ.ChartQueryParameters=Uo,sJ.ChartQueryService=Yo,sJ.ChartSetting=GK,sJ.ClipParameter=zK,sJ.ColorDictionary=Ih,sJ.CommonServiceBase=oo,sJ.ComputeWeightMatrixParameters=xb,sJ.ComputeWeightMatrixService=Db,sJ.CreateDatasetParameters=$i,sJ.DataFlowService=Ai,sJ.DataReturnOption=tC,sJ.DatasetBufferAnalystParameters=lC,sJ.DatasetInfo=ph,sJ.DatasetOverlayAnalystParameters=Rj,sJ.DatasetService=Qi,sJ.DatasetSurfaceAnalystParameters=Fk,sJ.DatasetThiessenAnalystParameters=iA,sJ.DatasourceConnectionInfo=mw,sJ.DatasourceService=_a,sJ.DensityAnalystService=UC,sJ.DensityKernelAnalystParameters=AC,sJ.EditAttachmentsParameters=Qu,sJ.FeatureAttachmentsService=ol,sJ.EditFeaturesParameters=Ra,sJ.EditFeaturesService=qa,sJ.FacilityAnalyst3DParameters=_g,sJ.FacilityAnalystSinks3DParameters=Ag,sJ.FacilityAnalystSinks3DService=Dg,sJ.FacilityAnalystSources3DParameters=Jg,sJ.FacilityAnalystSources3DService=tS,sJ.FacilityAnalystStreamParameters=Vb,sJ.FacilityAnalystStreamService=Yb,sJ.FacilityAnalystTracedown3DParameters=PS,sJ.FacilityAnalystTracedown3DService=IS,sJ.FacilityAnalystTraceup3DParameters=uS,sJ.FacilityAnalystTraceup3DService=bS,sJ.FacilityAnalystUpstream3DParameters=GS,sJ.FacilityAnalystUpstream3DService=QS,sJ.FieldParameters=Il,sJ.FieldsFilter=yZ,sJ.FieldStatisticService=Ql,sJ.FieldStatisticsParameters=Ul,sJ.FilterParameter=rs,sJ.FindClosestFacilitiesParameters=Pv,sJ.FindClosestFacilitiesService=Iv,sJ.FindLocationParameters=Lv,sJ.FindLocationService=Hv,sJ.FindMTSPPathsParameters=Kv,sJ.FindMTSPPathsService=rm,sJ.FindPathParameters=am,sJ.FindPathService=ym,sJ.FindServiceAreasParameters=mm,sJ.FindServiceAreasService=Cm,sJ.FindTSPPathsParameters=xm,sJ.FindTSPPathsService=Dm,sJ.GenerateSpatialDataParameters=HC,sJ.GenerateSpatialDataService=ZC,sJ.GeoCodingParameter=uo,sJ.GeoDecodingParameter=po,sJ.GeoHashGridAggParameter=tQ,sJ.GeometryBatchAnalystService=mI,sJ.GeometryBufferAnalystParameters=mC,sJ.GeometryOverlayAnalystParameters=qj,sJ.GeometrySurfaceAnalystParameters=Kk,sJ.GeometryThiessenAnalystParameters=yA,sJ.GeoprocessingService=Nc,sJ.GeoRelationAnalystParameters=rT,sJ.GeoRelationAnalystService=cT,sJ.GetFeaturesByBoundsParameters=Qs,sJ.GetFeaturesByBoundsService=nu,sJ.GetFeaturesByBufferParameters=pu,sJ.GetFeaturesByBufferService=Su,sJ.GetFeaturesByGeometryParameters=ku,sJ.GetFeaturesByGeometryService=Bu,sJ.GetFeaturesByIDsParameters=ds,sJ.GetFeaturesByIDsService=_s,sJ.GetFeaturesBySQLParameters=Is,sJ.GetFeaturesBySQLService=Us,sJ.GetFeaturesParametersBase=as,sJ.GetFeaturesServiceBase=Za,sJ.GetFieldsService=jl,sJ.GetGridCellInfosParameters=cc,sJ.GetGridCellInfosService=gc,sJ.GetLayersInfoService=fy,sJ.Grid=Uh,sJ.HillshadeParameter=SX,sJ.Image=Kh,sJ.ImageCollectionService=MR,sJ.ImageGFAspect=DZ,sJ.ImageGFHillShade=RZ,sJ.ImageGFOrtho=VZ,sJ.ImageGFSlope=JZ,sJ.ImageRenderingRule=xZ,sJ.ImageSearchParameter=OZ,sJ.ImageService=gR,sJ.ImageStretchOption=CZ,sJ.InterpolationAnalystParameters=yT,sJ.InterpolationAnalystService=lj,sJ.InterpolationDensityAnalystParameters=IT,sJ.InterpolationIDWAnalystParameters=GT,sJ.InterpolationKrigingAnalystParameters=tj,sJ.InterpolationRBFAnalystParameters=_T,sJ.JoinItem=uh,sJ.KernelDensityJobParameter=xw,sJ.KernelDensityJobsService=Dw,sJ.LabelImageCell=pQ,sJ.LabelMatrixCell=oQ,sJ.LabelMixedTextStyle=ff,sJ.LabelSymbolCell=SQ,sJ.LabelThemeCell=jQ,sJ.LayerStatus=IQ,sJ.LinkItem=LQ,sJ.MappingParameters=Cw,sJ.MapService=vd,sJ.MathExpressionAnalysisParameters=hj,sJ.MathExpressionAnalysisService=wj,sJ.MeasureParameters=Ld,sJ.MeasureService=zd,sJ.MetricsAggParameter=BK,sJ.NDVIParameter=fX,sJ.NetworkAnalystServiceBase=ab,sJ.OutputSetting=Ow,sJ.OverlapDisplayedOptions=UQ,sJ.OverlayAnalystParameters=Ej,sJ.OverlayAnalystService=Zj,sJ.OverlayGeoJobParameter=PO,sJ.OverlayGeoJobsService=IO,sJ.PointWithMeasure=tr,sJ.ProcessingServiceBase=yw,sJ.QueryByBoundsParameters=rP,sJ.QueryByBoundsService=cP,sJ.QueryByDistanceParameters=gP,sJ.QueryByDistanceService=TP,sJ.QueryByGeometryParameters=$P,sJ.QueryByGeometryService=sE,sJ.QueryBySQLParameters=LP,sJ.QueryBySQLService=HP,sJ.DatasetMinDistanceAnalystParameters=LA,sJ.MinDistanceAnalystService=tI,sJ.TerrainCutFillCalculationParameters=mx,sJ.TerrainCutFillCalculationService=Cx,sJ.terrainAnalystSetting=cY,sJ.TerrainAspectCalculationParameters=xx,sJ.TerrainAspectCalculationService=Dx,sJ.TerrainSlopeCalculationParameters=Vx,sJ.TerrainSlopeCalculationService=Yx,sJ.GeometryMinDistanceAnalystParameters=zA,sJ.ConvexHullAnalystParameters=HQ,sJ.ConvexHullAnalystService=lI,sJ.TraceAnalystParameters=tv,sJ.TraceAnalystService=uv,sJ.ConnectedEdgesAnalystParameters=pv,sJ.ConnectedEdgesAnalystService=Sv,sJ.GetLayersLegendInfoParameters=KQ,sJ.GetLayersLegendInfoService=Sy,sJ.QueryParameters=Io,sJ.QueryService=fE,sJ.RasterFunctionParameter=rX,sJ.Route=ur,sJ.RouteCalculateMeasureParameters=rk,sJ.RouteCalculateMeasureService=ck,sJ.RouteLocatorParameters=yk,sJ.RouteLocatorService=Ok,sJ.ServerColor=Ve,sJ.ServerFeature=mB,sJ.ServerGeometry=en,sJ.ServerStyle=Je,sJ.ServerTextStyle=Kc,sJ.ServerTheme=jh,sJ.SetDatasourceParameters=ya,sJ.SetLayerInfoParameters=ZQ,sJ.SetLayerInfoService=ky,sJ.SetLayersInfoParameters=rY,sJ.SetLayersInfoService=Dy,sJ.SetLayerStatusParameters=Vy,sJ.SetLayerStatusService=Xy,sJ.SingleObjectQueryJobsParameter=Vw,sJ.SingleObjectQueryJobsService=Yw,sJ.Sortby=mZ,sJ.SpatialAnalystBase=CE,sJ.StopQueryParameters=$I,sJ.StopQueryService=uN,sJ.SummaryAttributesJobsParameter=m_,sJ.SummaryAttributesJobsService=C_,sJ.SummaryMeshJobParameter=tO,sJ.SummaryMeshJobsService=uO,sJ.SummaryRegionJobParameter=LO,sJ.SummaryRegionJobsService=HO,sJ.SupplyCenter=aY,sJ.SurfaceAnalystParameters=xk,sJ.SurfaceAnalystParametersSetting=Ck,sJ.SurfaceAnalystService=rx,sJ.TerrainCurvatureCalculationParameters=ax,sJ.TerrainCurvatureCalculationService=yx,sJ.Theme=Hc,sJ.ThemeDotDensity=Sp,sJ.ThemeFlow=yY,sJ.ThemeGraduatedSymbol=Np,sJ.ThemeGraduatedSymbolStyle=Pp,sJ.ThemeGraph=pp,sJ.ThemeGraphAxes=zf,sJ.ThemeGraphItem=np,sJ.ThemeGraphSize=Qf,sJ.ThemeGraphText=$f,sJ.ThemeGridRange=TY,sJ.ThemeGridRangeItem=mY,sJ.ThemeGridUnique=UY,sJ.ThemeGridUniqueItem=AY,sJ.ThemeLabel=If,sJ.ThemeLabelAlongLine=gf,sJ.ThemeLabelBackground=_f,sJ.ThemeLabelItem=Zc,sJ.ThemeLabelText=df,sJ.ThemeLabelUniqueItem=HY,sJ.ThemeMemoryData=KY,sJ.ThemeOffset=sf,sJ.ThemeParameters=NI,sJ.ThemeRange=Jp,sJ.ThemeRangeItem=Bp,sJ.ThemeService=VI,sJ.ThemeUnique=Gf,sJ.ThemeUniqueItem=rf,sJ.ThiessenAnalystParameters=zT,sJ.ThiessenAnalystService=_A,sJ.TilesetsService=Ed,sJ.TopologyValidatorJobsParameter=a_,sJ.TopologyValidatorJobsService=y_,sJ.TransferLine=ZY,sJ.TransferPathParameters=pN,sJ.TransferPathService=SN,sJ.TransferSolutionParameters=PN,sJ.TransferSolutionService=IN,sJ.TransportationAnalystParameter=Cb,sJ.TransportationAnalystResultSetting=Ob,sJ.UGCLayer=Yp,sJ.UGCMapLayer=oh,sJ.UGCSubLayer=Sh,sJ.UpdateDatasetParameters=na,sJ.UpdateEdgeWeightParameters=Vm,sJ.UpdateEdgeWeightService=Ym,sJ.UpdateTurnNodeWeightParameters=tg,sJ.UpdateTurnNodeWeightService=ug,sJ.Vector=ry,sJ.VectorClipJobsParameter=pO,sJ.VectorClipJobsService=SO,sJ.WebPrintingJobContent=ZX,sJ.WebPrintingJobCustomItems=PX,sJ.WebPrintingJobExportOptions=aZ,sJ.WebPrintingJobImage=jX,sJ.WebPrintingJobLayers=IX,sJ.WebPrintingJobLayoutOptions=rZ,sJ.WebPrintingJobLegendOptions=LX,sJ.WebPrintingJobLittleMapOptions=UX,sJ.WebPrintingJobNorthArrowOptions=HX,sJ.WebPrintingJobParameters=cZ,sJ.WebPrintingJobScaleBarOptions=KX,sJ.WebPrintingService=rR,sJ.Online=p$,sJ.OnlineData=u$,sJ.OnlineQueryDatasParameter=b$,sJ.ServiceStatus={DOES_NOT_INVOLVE:"DOES_NOT_INVOLVE",PUBLISH_FAILED:"PUBLISH_FAILED",PUBLISHED:"PUBLISHED",PUBLISHING:"PUBLISHING",UNPUBLISHED:"UNPUBLISHED",UNPUBLISHED_FAILED:"UNPUBLISHED_FAILED"},sJ.DataItemType={GEOJSON:"GEOJSON",UGCV5_MVT:"UGCV5_MVT",JSON:"JSON",AUDIO:"AUDIO",COLOR:"COLOR",COLORSCHEME:"COLORSCHEME",CSV:"CSV",EXCEL:"EXCEL",FILLSYMBOL:"FILLSYMBOL",IMAGE:"IMAGE",LAYERTEMPLATE:"LAYERTEMPLATE",LAYOUTTEMPLATE:"LAYOUTTEMPLATE",LINESYMBOL:"LINESYMBOL",MAPTEMPLATE:"MAPTEMPLATE",MARKERSYMBOL:"MARKERSYMBOL",MBTILES:"MBTILES",PHOTOS:"PHOTOS",SHP:"SHP",SMTILES:"SMTILES",SVTILES:"SVTILES",THEMETEMPLATE:"THEMETEMPLATE",TPK:"TPK",UDB:"UDB",UGCV5:"UGCV5",UNKNOWN:"UNKNOWN",VIDEO:"VIDEO",WORKENVIRONMENT:"WORKENVIRONMENT",WORKSPACE:"WORKSPACE"},sJ.DataItemOrderBy={FILENAME:"FILENAME",ID:"ID",LASTMODIFIEDTIME:"LASTMODIFIEDTIME",NICKNAME:"NICKNAME",SERVICESTATUS:"SERVICESTATUS",SIZE:"SIZE",STATUS:"STATUS",TYPE:"TYPE",UPDATETIME:"UPDATETIME",USERNAME:"USERNAME"},sJ.FilterField={LINKPAGE:"LINKPAGE",MAPTITLE:"MAPTITLE",NICKNAME:"NICKNAME",RESTITLE:"RESTITLE",USERNAME:"USERNAME"},sJ.OnlineServiceBase=t$,sJ.Feature=sJ.Feature||{},sJ.Feature.Theme=C5,sJ.Feature.Theme.Bar=V5,sJ.Feature.Theme.Bar3D=Y5,sJ.Feature.Theme.Circle=p4,sJ.Feature.Theme.Graph=R5,sJ.Feature.Theme.Line=S4,sJ.Feature.Theme.Pie=j4,sJ.Feature.Theme.Point=L4,sJ.Feature.Theme.RankSymbol=o4,sJ.Feature.Theme.Ring=H4,sJ.Feature.Theme.ThemeVector=t6,sJ.Feature.ShapeParameters=G0,sJ.Feature.ShapeParameters.Circle=X1,sJ.Feature.ShapeParameters.Image=q1,sJ.Feature.ShapeParameters.Label=M1,sJ.Feature.ShapeParameters.Line=n1,sJ.Feature.ShapeParameters.Point=Q0,sJ.Feature.ShapeParameters.Polygon=f1,sJ.Feature.ShapeParameters.Rectangle=g1,sJ.Feature.ShapeParameters.Sector=T1,sJ.Feature.ShapeFactory=O5,sJ.LevelRenderer=i8,sJ.KeyServiceParameter=S$,sJ.SecurityManager=Xn,sJ.ServerInfo=P$,sJ.TokenServiceParameter=j$,sJ.ThemeStyle=B0,sJ.CartoCSS=I0,sJ.ElasticSearch=R$,sJ.ArrayStatistic=f0,sJ.ColorsPickerUtil=W$,sJ.DataFormat=lr,sJ.ServerType=cr,sJ.GeometryType=fr,sJ.QueryOption=pr,sJ.JoinType={INNERJOIN:"INNERJOIN",LEFTJOIN:"LEFTJOIN"},sJ.SpatialQueryMode=hr,sJ.SpatialRelationType={CONTAIN:"CONTAIN",INTERSECT:"INTERSECT",WITHIN:"WITHIN"},sJ.MeasureMode=yr,sJ.Unit=dr,sJ.BufferRadiusUnit=br,sJ.EngineType={IMAGEPLUGINS:"IMAGEPLUGINS",OGC:"OGC",ORACLEPLUS:"ORACLEPLUS",SDBPLUS:"SDBPLUS",SQLPLUS:"SQLPLUS",UDB:"UDB"},sJ.ThemeGraphTextFormat=vr,sJ.ThemeGraphType=mr,sJ.GraphAxesTextDisplayMode=gr,sJ.GraduatedMode=Sr,sJ.RangeMode=wr,sJ.ThemeType={DOTDENSITY:"DOTDENSITY",GRADUATEDSYMBOL:"GRADUATEDSYMBOL",GRAPH:"GRAPH",LABEL:"LABEL",RANGE:"RANGE",UNIQUE:"UNIQUE"},sJ.ColorGradientType=Or,sJ.TextAlignment=_r,sJ.FillGradientMode={NONE:"NONE",LINEAR:"LINEAR",RADIAL:"RADIAL",CONICAL:"CONICAL",SQUARE:"SQUARE"},sJ.AlongLineDirection=Pr,sJ.LabelBackShape=Er,sJ.LabelOverLengthMode=Cr,sJ.DirectionType={EAST:"EAST",NONE:"NONE",NORTH:"NORTH",SOURTH:"SOURTH",WEST:"WEST"},sJ.OverlayOperationType=jr,sJ.OutputType=kr,sJ.SideType={LEFT:"LEFT",MIDDLE:"MIDDLE",NONE:"NONE",RIGHT:"RIGHT"},sJ.SupplyCenterType={FIXEDCENTER:"FIXEDCENTER",NULL:"NULL",OPTIONALCENTER:"OPTIONALCENTER"},sJ.TurnType={AHEAD:"AHEAD",BACK:"BACK",END:"END",LEFT:"LEFT",NONE:"NONE",RIGHT:"RIGHT"},sJ.BufferEndType=Tr,sJ.SmoothMethod=xr,sJ.SurfaceAnalystMethod=Ar,sJ.DataReturnMode=Ir,sJ.EditType=Nr,sJ.TransferTactic=Rr,sJ.TransferPreference=Mr,sJ.GridType={CROSS:"CROSS",GRID:"GRID",POINT:"POINT"},sJ.ColorSpaceType={CMYK:"CMYK",RGB:"RGB"},sJ.LayerType={UGC:"UGC",WMS:"WMS",WFS:"WFS",CUSTOM:"CUSTOM"},sJ.UGCLayerType={THEME:"THEME",VECTOR:"VECTOR",GRID:"GRID",IMAGE:"IMAGE"},sJ.StatisticMode={AVERAGE:"AVERAGE",MAX:"MAX",MIN:"MIN",STDDEVIATION:"STDDEVIATION",SUM:"SUM",VARIANCE:"VARIANCE"},sJ.PixelFormat={BIT16:"BIT16",BIT32:"BIT32",BIT64:"BIT64",SINGLE:"SINGLE",DOUBLE:"DOUBLE",UBIT1:"UBIT1",UBIT4:"UBIT4",UBIT8:"UBIT8",UBIT24:"UBIT24",UBIT32:"UBIT32"},sJ.SearchMode={KDTREE_FIXED_COUNT:"KDTREE_FIXED_COUNT",KDTREE_FIXED_RADIUS:"KDTREE_FIXED_RADIUS",NONE:"NONE",QUADTREE:"QUADTREE"},sJ.InterpolationAlgorithmType={KRIGING:"KRIGING",SimpleKriging:"SimpleKriging",UniversalKriging:"UniversalKriging"},sJ.VariogramMode=Lr,sJ.Exponent=Br,sJ.ClientType=Dr,sJ.ChartType={BAR:"Bar",BAR3D:"Bar3D",CIRCLE:"Circle",PIE:"Pie",POINT:"Point",LINE:"Line",RING:"Ring"},sJ.ClipAnalystMode=Fr,sJ.AnalystAreaUnit=Ur,sJ.AnalystSizeUnit=Gr,sJ.StatisticAnalystMode=Vr,sJ.SummaryType=qr,sJ.TopologyValidatorRule=Hr,sJ.BucketAggType=zr,sJ.MetricsAggType=Jr,sJ.GetFeatureMode={BOUNDS:"BOUNDS",BUFFER:"BUFFER",ID:"ID",SPATIAL:"SPATIAL",SQL:"SQL"},sJ.RasterFunctionType=Wr,sJ.ResourceType={MAP:"MAP",SERVICE:"SERVICE",SCENE:"SCENE",DATA:"DATA",INSIGHTS_WORKSPACE:"INSIGHTS_WORKSPACE",MAP_DASHBOARD:"MAP_DASHBOARD"},sJ.OrderBy={UPDATETIME:"UPDATETIME",HEATLEVEL:"HEATLEVEL",RELEVANCE:"RELEVANCE"},sJ.OrderType={ASC:"ASC",DESC:"DESC"},sJ.SearchType={PUBLIC:"PUBLIC",MY_RES:"MY_RES",MYGROUP_RES:"MYGROUP_RES",MYDEPARTMENT_RES:"MYDEPARTMENT_RES",SHARETOME_RES:"SHARETOME_RES"},sJ.AggregationTypes={TAG:"TAG",TYPE:"TYPE"},sJ.PermissionType={SEARCH:"SEARCH",READ:"READ",READWRITE:"READWRITE",DELETE:"DELETE",DOWNLOAD:"DOWNLOAD"},sJ.EntityType={DEPARTMENT:"DEPARTMENT",GROUP:"GROUP",IPORTALGROUP:"IPORTALGROUP",ROLE:"ROLE",USER:"USER"},sJ.WebExportFormatType={PNG:"PNG",PDF:"PDF"},sJ.WebScaleOrientationType={HORIZONTALLABELSBELOW:"HORIZONTALLABELSBELOW",HORIZONTALLABELSABOVE:"HORIZONTALLABELSABOVE",VERTICALLABELSLEFT:"VERTICALLABELSLEFT",VERTICALLABELSRIGHT:"VERTICALLABELSRIGHT"},sJ.WebScaleType={LINE:"LINE",BAR:"BAR",BAR_SUB:"BAR_SUB"},sJ.WebScaleUnit={METER:"METER",FOOT:"FOOT",DEGREES:"DEGREES"},sJ.KnowledgeGraph=HM,sJ.BoundsType=Kr,sJ.CellSizeType=Qr,sJ.ColourModeChart=Yr,sJ.DisplayModeChart=Xr,sJ.VideoFeature=YZ,o().supermap=X9(X9({},sJ),o().supermap),o().supermap.Graphic=oV,o().supermap.Transform=PL,o().supermap.AddressMatchService=jo,o().supermap.ChartService=_i,o().supermap.DataFlowService=Fi,o().supermap.DatasetService=ca,o().supermap.DatasourceService=xa,o().supermap.FeatureService=gl,o().supermap.FieldService=ac,o().supermap.GeoprocessingService=Uc,o().supermap.GridCellInfosService=Cc,o().supermap.ImageCollectionService=VR,o().supermap.ImageService=CR,o().supermap.LayerInfoService=ud,o().supermap.MapService=Id,o().supermap.MeasureService=Zd,o().supermap.NetworkAnalyst3DService=aw,o().supermap.NetworkAnalystService=gg,o().supermap.ProcessingService=B_,o().supermap.QueryService=mE,o().supermap.ServiceBase=An,o().supermap.SpatialAnalystService=kI,o().supermap.ThemeService=QI,o().supermap.TrafficTransferAnalystService=qN,o().supermap.WebPrintingJobService=lR,o().supermap.KnowledgeGraphService=lM,o().supermap.CommonUtil=V,o().supermap.Util=hn,o().supermap.LogoControl=u,o().supermap.Logo=u,o().supermap.GraphMap=tL,o().supermap.MapvLayer=SL,o().supermap.ThreeLayer=KL,o().supermap.DeckglLayer=aB,o().supermap.HeatMapLayer=IB,o().supermap.GraphicLayer=VB,o().supermap.GraticuleLayer=iD,o().supermap.FGBLayer=XU,o().supermap.L7Layer=tV,o().supermap.initMap=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new uV(Id,t,e);return r.getMapInfo((n=tJ(Qz().mark(function n(i,a,s){var u,l,c,f,p,h;return Qz().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,"processCompleted"!==i.type){n.next=15;break}if(u=i.result,l=u.dynamicProjection,c=u.prjCoordSys,f=c.epsgCode,!lV(c.type)){n.next=6;break}return s(new Error("maplibre-gl cannot support plane coordinate system.")),n.abrupt("return");case 6:if(3857===f||l||o().CRS){n.next=9;break}return s(new Error("The EPSG code ".concat(f," needs to include maplibre-gl-enhance.js. Refer to the example: https://iclient.supermap.io/examples/maplibregl/editor.html#mvtVectorTile_2362"))),n.abrupt("return");case 9:return n.next=11,iJ(t,i.result,Xz(Xz({},e),{},{initMapService:r}));case 11:return p=n.sent,h=new(o().Map)(p),a({map:h}),n.abrupt("return");case 15:s(new Error("Fetch mapService is failed.")),n.next=21;break;case 18:n.prev=18,n.t0=n.catch(0),s(n.t0);case 21:case"end":return n.stop()}},n,null,[[0,18]])})),function(t,e,r){return n.apply(this,arguments)}));var n},o().supermap.WebSymbol=zG},961:function(t,e,r){"use strict";var n=r(3712);t.exports=n},9784:function(t,e,r){"use strict";var n=r(6433);t.exports=n},9435:function(t,e,r){"use strict";r(7851);var n=r(5329);t.exports=n.Object.assign},8142:function(t,e,r){"use strict";r(494);var n=r(9385);t.exports=n.f("asyncIterator")},7644:function(t,e,r){"use strict";var n=r(2631),o=r(4861),i=TypeError;t.exports=function(t){if(n(t))return t;throw new i(o(t)+" is not a function")}},9809:function(t,e,r){"use strict";var n=r(6220),o=String,i=TypeError;t.exports=function(t){if(n(t))return t;throw new i(o(t)+" is not an object")}},7943:function(t,e,r){"use strict";var n=r(1059),o=r(7636),i=r(428),a=function(t){return function(e,r,a){var s=n(e),u=i(s);if(0===u)return!t&&-1;var l,c=o(a,u);if(t&&r!=r){for(;u>c;)if((l=s[c++])!=l)return!0}else for(;u>c;c++)if((t||c in s)&&s[c]===r)return t||c||0;return!t&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}},4538:function(t,e,r){"use strict";var n=r(398),o=n({}.toString),i=n("".slice);t.exports=function(t){return i(o(t),8,-1)}},578:function(t,e,r){"use strict";var n=r(2791),o=r(7197),i=r(1805),a=r(1807);t.exports=function(t,e,r){for(var s=o(e),u=a.f,l=i.f,c=0;c<s.length;c++){var f=s[c];n(t,f)||r&&n(r,f)||u(t,f,l(e,f))}}},5233:function(t,e,r){"use strict";var n=r(9234),o=r(1807),i=r(1718);t.exports=n?function(t,e,r){return o.f(t,e,i(1,r))}:function(t,e,r){return t[e]=r,t}},1718:function(t){"use strict";t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},5414:function(t,e,r){"use strict";var n=r(2631),o=r(1807),i=r(7773),a=r(6507);t.exports=function(t,e,r,s){s||(s={});var u=s.enumerable,l=void 0!==s.name?s.name:e;if(n(r)&&i(r,l,s),s.global)u?t[e]=r:a(e,r);else{try{s.unsafe?t[e]&&(u=!0):delete t[e]}catch(t){}u?t[e]=r:o.f(t,e,{value:r,enumerable:!1,configurable:!s.nonConfigurable,writable:!s.nonWritable})}return t}},6507:function(t,e,r){"use strict";var n=r(1697),o=Object.defineProperty;t.exports=function(t,e){try{o(n,t,{value:e,configurable:!0,writable:!0})}catch(r){n[t]=e}return e}},9234:function(t,e,r){"use strict";var n=r(4877);t.exports=!n(function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]})},2533:function(t,e,r){"use strict";var n=r(1697),o=r(6220),i=n.document,a=o(i)&&o(i.createElement);t.exports=function(t){return a?i.createElement(t):{}}},8762:function(t){"use strict";t.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},5950:function(t,e,r){"use strict";var n,o,i=r(1697),a=r(8762),s=i.process,u=i.Deno,l=s&&s.versions||u&&u.version,c=l&&l.v8;c&&(o=(n=c.split("."))[0]>0&&n[0]<4?1:+(n[0]+n[1])),!o&&a&&(!(n=a.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=a.match(/Chrome\/(\d+)/))&&(o=+n[1]),t.exports=o},1009:function(t){"use strict";t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},3768:function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=r(1697),i=r(1805).f,a=r(5233),s=r(5414),u=r(6507),l=r(578),c=r(3670);t.exports=function(t,e){var r,f,p,h,y,d=t.target,b=t.global,v=t.stat;if(r=b?o:v?o[d]||u(d,{}):o[d]&&o[d].prototype)for(f in e){if(h=e[f],p=t.dontCallGetSet?(y=i(r,f))&&y.value:r[f],!c(b?f:d+(v?".":"#")+f,t.forced)&&void 0!==p){if(n(h)==n(p))continue;l(h,p)}(t.sham||p&&p.sham)&&a(h,"sham",!0),s(r,f,h,t)}}},4877:function(t){"use strict";t.exports=function(t){try{return!!t()}catch(t){return!0}}},8574:function(t,e,r){"use strict";var n=r(4877);t.exports=!n(function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")})},9707:function(t,e,r){"use strict";var n=r(8574),o=Function.prototype.call;t.exports=n?o.bind(o):function(){return o.apply(o,arguments)}},2756:function(t,e,r){"use strict";var n=r(9234),o=r(2791),i=Function.prototype,a=n&&Object.getOwnPropertyDescriptor,s=o(i,"name"),u=s&&"something"===function(){}.name,l=s&&(!n||n&&a(i,"name").configurable);t.exports={EXISTS:s,PROPER:u,CONFIGURABLE:l}},398:function(t,e,r){"use strict";var n=r(8574),o=Function.prototype,i=o.call,a=n&&o.bind.bind(i,i);t.exports=n?a:function(t){return function(){return i.apply(t,arguments)}}},5189:function(t,e,r){"use strict";var n=r(1697),o=r(2631);t.exports=function(t,e){return arguments.length<2?(r=n[t],o(r)?r:void 0):n[t]&&n[t][e];var r}},2968:function(t,e,r){"use strict";var n=r(7644),o=r(155);t.exports=function(t,e){var r=t[e];return o(r)?void 0:n(r)}},1697:function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=function(t){return t&&t.Math===Math&&t};t.exports=o("object"==("undefined"==typeof globalThis?"undefined":n(globalThis))&&globalThis)||o("object"==("undefined"==typeof window?"undefined":n(window))&&window)||o("object"==("undefined"==typeof self?"undefined":n(self))&&self)||o("object"==(void 0===r.g?"undefined":n(r.g))&&r.g)||o("object"==n(this)&&this)||function(){return this}()||Function("return this")()},2791:function(t,e,r){"use strict";var n=r(398),o=r(6079),i=n({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return i(o(t),e)}},8551:function(t){"use strict";t.exports={}},107:function(t,e,r){"use strict";var n=r(9234),o=r(4877),i=r(2533);t.exports=!n&&!o(function(){return 7!==Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a})},9213:function(t,e,r){"use strict";var n=r(398),o=r(4877),i=r(4538),a=Object,s=n("".split);t.exports=o(function(){return!a("z").propertyIsEnumerable(0)})?function(t){return"String"===i(t)?s(t,""):a(t)}:a},3128:function(t,e,r){"use strict";var n=r(398),o=r(2631),i=r(4243),a=n(Function.toString);o(i.inspectSource)||(i.inspectSource=function(t){return a(t)}),t.exports=i.inspectSource},7863:function(t,e,r){"use strict";var n,o,i,a=r(5032),s=r(1697),u=r(6220),l=r(5233),c=r(2791),f=r(4243),p=r(109),h=r(8551),y=s.TypeError,d=s.WeakMap;if(a||f.state){var b=f.state||(f.state=new d);b.get=b.get,b.has=b.has,b.set=b.set,n=function(t,e){if(b.has(t))throw new y("Object already initialized");return e.facade=t,b.set(t,e),e},o=function(t){return b.get(t)||{}},i=function(t){return b.has(t)}}else{var v=p("state");h[v]=!0,n=function(t,e){if(c(t,v))throw new y("Object already initialized");return e.facade=t,l(t,v,e),e},o=function(t){return c(t,v)?t[v]:{}},i=function(t){return c(t,v)}}t.exports={set:n,get:o,has:i,enforce:function(t){return i(t)?o(t):n(t,{})},getterFor:function(t){return function(e){var r;if(!u(e)||(r=o(e)).type!==t)throw new y("Incompatible receiver, "+t+" required");return r}}}},2631:function(t){"use strict";function e(t){"@babel/helpers - typeof";return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r="object"==("undefined"==typeof document?"undefined":e(document))&&document.all;t.exports=void 0===r&&void 0!==r?function(t){return"function"==typeof t||t===r}:function(t){return"function"==typeof t}},3670:function(t,e,r){"use strict";var n=r(4877),o=r(2631),i=/#|\.prototype\./,a=function(t,e){var r=u[s(t)];return r===c||r!==l&&(o(e)?n(e):!!e)},s=a.normalize=function(t){return String(t).replace(i,".").toLowerCase()},u=a.data={},l=a.NATIVE="N",c=a.POLYFILL="P";t.exports=a},155:function(t){"use strict";t.exports=function(t){return null===t||void 0===t}},6220:function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=r(2631);t.exports=function(t){return"object"==n(t)?null!==t:o(t)}},497:function(t){"use strict";t.exports=!1},3443:function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=r(5189),i=r(2631),a=r(7123),s=r(5970),u=Object;t.exports=s?function(t){return"symbol"==n(t)}:function(t){var e=o("Symbol");return i(e)&&a(e.prototype,u(t))}},428:function(t,e,r){"use strict";var n=r(9800);t.exports=function(t){return n(t.length)}},7773:function(t,e,r){"use strict";var n=r(398),o=r(4877),i=r(2631),a=r(2791),s=r(9234),u=r(2756).CONFIGURABLE,l=r(3128),c=r(7863),f=c.enforce,p=c.get,h=String,y=Object.defineProperty,d=n("".slice),b=n("".replace),v=n([].join),m=s&&!o(function(){return 8!==y(function(){},"length",{value:8}).length}),g=String(String).split("String"),S=t.exports=function(t,e,r){"Symbol("===d(h(e),0,7)&&(e="["+b(h(e),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),r&&r.getter&&(e="get "+e),r&&r.setter&&(e="set "+e),(!a(t,"name")||u&&t.name!==e)&&(s?y(t,"name",{value:e,configurable:!0}):t.name=e),m&&r&&a(r,"arity")&&t.length!==r.arity&&y(t,"length",{value:r.arity});try{r&&a(r,"constructor")&&r.constructor?s&&y(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var n=f(t);return a(n,"source")||(n.source=v(g,"string"==typeof e?e:"")),t};Function.prototype.toString=S(function(){return i(this)&&p(this).source||l(this)},"toString")},7443:function(t){"use strict";var e=Math.ceil,r=Math.floor;t.exports=Math.trunc||function(t){var n=+t;return(n>0?r:e)(n)}},6355:function(t,e,r){"use strict";var n=r(9234),o=r(398),i=r(9707),a=r(4877),s=r(3334),u=r(791),l=r(15),c=r(6079),f=r(9213),p=Object.assign,h=Object.defineProperty,y=o([].concat);t.exports=!p||a(function(){if(n&&1!==p({b:1},p(h({},"a",{enumerable:!0,get:function(){h(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},r=Symbol("assign detection");return t[r]=7,"abcdefghijklmnopqrst".split("").forEach(function(t){e[t]=t}),7!==p({},t)[r]||"abcdefghijklmnopqrst"!==s(p({},e)).join("")})?function(t,e){for(var r=c(t),o=arguments.length,a=1,p=u.f,h=l.f;o>a;)for(var d,b=f(arguments[a++]),v=p?y(s(b),p(b)):s(b),m=v.length,g=0;m>g;)d=v[g++],n&&!i(h,b,d)||(r[d]=b[d]);return r}:p},1807:function(t,e,r){"use strict";var n=r(9234),o=r(107),i=r(4796),a=r(9809),s=r(6779),u=TypeError,l=Object.defineProperty,c=Object.getOwnPropertyDescriptor;e.f=n?i?function(t,e,r){if(a(t),e=s(e),a(r),"function"==typeof t&&"prototype"===e&&"value"in r&&"writable"in r&&!r.writable){var n=c(t,e);n&&n.writable&&(t[e]=r.value,r={configurable:"configurable"in r?r.configurable:n.configurable,enumerable:"enumerable"in r?r.enumerable:n.enumerable,writable:!1})}return l(t,e,r)}:l:function(t,e,r){if(a(t),e=s(e),a(r),o)try{return l(t,e,r)}catch(t){}if("get"in r||"set"in r)throw new u("Accessors not supported");return"value"in r&&(t[e]=r.value),t}},1805:function(t,e,r){"use strict";var n=r(9234),o=r(9707),i=r(15),a=r(1718),s=r(1059),u=r(6779),l=r(2791),c=r(107),f=Object.getOwnPropertyDescriptor;e.f=n?f:function(t,e){if(t=s(t),e=u(e),c)try{return f(t,e)}catch(t){}if(l(t,e))return a(!o(i.f,t,e),t[e])}},3602:function(t,e,r){"use strict";var n=r(7386),o=r(1009).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,o)}},791:function(t,e){"use strict";e.f=Object.getOwnPropertySymbols},7123:function(t,e,r){"use strict";var n=r(398);t.exports=n({}.isPrototypeOf)},7386:function(t,e,r){"use strict";var n=r(398),o=r(2791),i=r(1059),a=r(7943).indexOf,s=r(8551),u=n([].push);t.exports=function(t,e){var r,n=i(t),l=0,c=[];for(r in n)!o(s,r)&&o(n,r)&&u(c,r);for(;e.length>l;)o(n,r=e[l++])&&(~a(c,r)||u(c,r));return c}},3334:function(t,e,r){"use strict";var n=r(7386),o=r(1009);t.exports=Object.keys||function(t){return n(t,o)}},15:function(t,e){"use strict";var r={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,o=n&&!r.call({1:2},1);e.f=o?function(t){var e=n(this,t);return!!e&&e.enumerable}:r},5720:function(t,e,r){"use strict";var n=r(9707),o=r(2631),i=r(6220),a=TypeError;t.exports=function(t,e){var r,s;if("string"===e&&o(r=t.toString)&&!i(s=n(r,t)))return s;if(o(r=t.valueOf)&&!i(s=n(r,t)))return s;if("string"!==e&&o(r=t.toString)&&!i(s=n(r,t)))return s;throw new a("Can't convert object to primitive value")}},7197:function(t,e,r){"use strict";var n=r(5189),o=r(398),i=r(3602),a=r(791),s=r(9809),u=o([].concat);t.exports=n("Reflect","ownKeys")||function(t){var e=i.f(s(t)),r=a.f;return r?u(e,r(t)):e}},5329:function(t,e,r){"use strict";var n=r(1697);t.exports=n},1308:function(t,e,r){"use strict";var n=r(155),o=TypeError;t.exports=function(t){if(n(t))throw new o("Can't call method on "+t);return t}},109:function(t,e,r){"use strict";var n=r(4499),o=r(606),i=n("keys");t.exports=function(t){return i[t]||(i[t]=o(t))}},4243:function(t,e,r){"use strict";var n=r(497),o=r(1697),i=r(6507),a=t.exports=o["__core-js_shared__"]||i("__core-js_shared__",{});(a.versions||(a.versions=[])).push({version:"3.36.0",mode:n?"pure":"global",copyright:"Â© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.36.0/LICENSE",source:"https://github.com/zloirock/core-js"})},4499:function(t,e,r){"use strict";var n=r(4243);t.exports=function(t,e){return n[t]||(n[t]=e||{})}},7161:function(t,e,r){"use strict";var n=r(5950),o=r(4877),i=r(1697).String;t.exports=!!Object.getOwnPropertySymbols&&!o(function(){var t=Symbol("symbol detection");return!i(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&n&&n<41})},7636:function(t,e,r){"use strict";var n=r(7105),o=Math.max,i=Math.min;t.exports=function(t,e){var r=n(t);return r<0?o(r+e,0):i(r,e)}},1059:function(t,e,r){"use strict";var n=r(9213),o=r(1308);t.exports=function(t){return n(o(t))}},7105:function(t,e,r){"use strict";var n=r(7443);t.exports=function(t){var e=+t;return e!=e||0===e?0:n(e)}},9800:function(t,e,r){"use strict";var n=r(7105),o=Math.min;t.exports=function(t){var e=n(t);return e>0?o(e,9007199254740991):0}},6079:function(t,e,r){"use strict";var n=r(1308),o=Object;t.exports=function(t){return o(n(t))}},8167:function(t,e,r){"use strict";var n=r(9707),o=r(6220),i=r(3443),a=r(2968),s=r(5720),u=r(7709),l=TypeError,c=u("toPrimitive");t.exports=function(t,e){if(!o(t)||i(t))return t;var r,u=a(t,c);if(u){if(void 0===e&&(e="default"),r=n(u,t,e),!o(r)||i(r))return r;throw new l("Can't convert object to primitive value")}return void 0===e&&(e="number"),s(t,e)}},6779:function(t,e,r){"use strict";var n=r(8167),o=r(3443);t.exports=function(t){var e=n(t,"string");return o(e)?e:e+""}},4861:function(t){"use strict";var e=String;t.exports=function(t){try{return e(t)}catch(t){return"Object"}}},606:function(t,e,r){"use strict";var n=r(398),o=0,i=Math.random(),a=n(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+a(++o+i,36)}},5970:function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=r(7161);t.exports=o&&!Symbol.sham&&"symbol"==n(Symbol.iterator)},4796:function(t,e,r){"use strict";var n=r(9234),o=r(4877);t.exports=n&&o(function(){return 42!==Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})},5032:function(t,e,r){"use strict";var n=r(1697),o=r(2631),i=n.WeakMap;t.exports=o(i)&&/native code/.test(String(i))},2461:function(t,e,r){"use strict";var n=r(5329),o=r(2791),i=r(9385),a=r(1807).f;t.exports=function(t){var e=n.Symbol||(n.Symbol={});o(e,t)||a(e,t,{value:i.f(t)})}},9385:function(t,e,r){"use strict";var n=r(7709);e.f=n},7709:function(t,e,r){"use strict";var n=r(1697),o=r(4499),i=r(2791),a=r(606),s=r(7161),u=r(5970),l=n.Symbol,c=o("wks"),f=u?l.for||l:l&&l.withoutSetter||a;t.exports=function(t){return i(c,t)||(c[t]=s&&i(l,t)?l[t]:f("Symbol."+t)),c[t]}},7851:function(t,e,r){"use strict";var n=r(3768),o=r(6355);n({target:"Object",stat:!0,arity:2,forced:Object.assign!==o},{assign:o})},494:function(t,e,r){"use strict";r(2461)("asyncIterator")},3712:function(t,e,r){"use strict";var n=r(9435);t.exports=n},6433:function(t,e,r){"use strict";var n=r(8142);t.exports=n}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={id:n,loaded:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}r.amdO={},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,{a:e}),e},r.d=function(t,e){for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t},r(9784),r(961);r(6894)}();