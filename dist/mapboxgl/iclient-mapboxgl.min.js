/*!
 * 
 *          iclient-mapboxgl
 *          CopyrightÂ© 2000 - 2025 SuperMap Software Co.Ltd
 *          license: Apache-2.0
 *          version: v12.0.0-r
 *
 */!function(){var e={15:function(e,t){"use strict";var r={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,o=n&&!r.call({1:2},1);t.f=o?function(e){var t=n(this,e);return!!t&&t.enumerable}:r},44:function(e,t,r){function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e=r.nmd(e);var o=200,i="Expected a function",a="__lodash_hash_undefined__",s=1,u=2,l=1/0,c=9007199254740991,f="[object Arguments]",p="[object Array]",h="[object Boolean]",y="[object Date]",d="[object Error]",m="[object Function]",g="[object GeneratorFunction]",v="[object Map]",b="[object Number]",A="[object Object]",w="[object RegExp]",S="[object Set]",C="[object String]",E="[object Symbol]",_="[object ArrayBuffer]",I="[object DataView]",O=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,x=/^\w*$/,P=/^\./,k=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,T=/\\(\\)?/g,j=/^\[object .+?Constructor\]$/,M=/^(?:0|[1-9]\d*)$/,B={};B["[object Float32Array]"]=B["[object Float64Array]"]=B["[object Int8Array]"]=B["[object Int16Array]"]=B["[object Int32Array]"]=B["[object Uint8Array]"]=B["[object Uint8ClampedArray]"]=B["[object Uint16Array]"]=B["[object Uint32Array]"]=!0,B[f]=B[p]=B[_]=B[h]=B[I]=B[y]=B[d]=B[m]=B[v]=B[b]=B[A]=B[w]=B[S]=B[C]=B["[object WeakMap]"]=!1;var N="object"==(void 0===r.g?"undefined":n(r.g))&&r.g&&r.g.Object===Object&&r.g,R="object"==("undefined"==typeof self?"undefined":n(self))&&self&&self.Object===Object&&self,L=N||R||Function("return this")(),D="object"==n(t)&&t&&!t.nodeType&&t,F=D&&"object"==n(e)&&e&&!e.nodeType&&e,Q=F&&F.exports===D&&N.process,G=function(){try{return Q&&Q.binding("util")}catch(e){}}(),U=G&&G.isTypedArray;function z(e,t){return!!(e?e.length:0)&&function(e,t,r){if(t!=t)return function(e,t,r,n){var o=e.length,i=r+(n?1:-1);for(;n?i--:++i<o;)if(t(e[i],i,e))return i;return-1}(e,V,r);var n=r-1,o=e.length;for(;++n<o;)if(e[n]===t)return n;return-1}(e,t,0)>-1}function H(e,t,r){for(var n=-1,o=e?e.length:0;++n<o;)if(r(t,e[n]))return!0;return!1}function q(e,t){for(var r=-1,n=e?e.length:0;++r<n;)if(t(e[r],r,e))return!0;return!1}function V(e){return e!=e}function K(e,t){return e.has(t)}function Y(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function J(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}function W(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}var X,Z,$,ee=Array.prototype,te=Function.prototype,re=Object.prototype,ne=L["__core-js_shared__"],oe=(X=/[^.]+$/.exec(ne&&ne.keys&&ne.keys.IE_PROTO||""))?"Symbol(src)_1."+X:"",ie=te.toString,ae=re.hasOwnProperty,se=re.toString,ue=RegExp("^"+ie.call(ae).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),le=L.Symbol,ce=L.Uint8Array,fe=re.propertyIsEnumerable,pe=ee.splice,he=(Z=Object.keys,$=Object,function(e){return Z($(e))}),ye=qe(L,"DataView"),de=qe(L,"Map"),me=qe(L,"Promise"),ge=qe(L,"Set"),ve=qe(L,"WeakMap"),be=qe(Object,"create"),Ae=$e(ye),we=$e(de),Se=$e(me),Ce=$e(ge),Ee=$e(ve),_e=le?le.prototype:void 0,Ie=_e?_e.valueOf:void 0,Oe=_e?_e.toString:void 0;function xe(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Pe(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function ke(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Te(e){var t=-1,r=e?e.length:0;for(this.__data__=new ke;++t<r;)this.add(e[t])}function je(e){this.__data__=new Pe(e)}function Me(e,t){var r=nt(e)||rt(e)?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],n=r.length,o=!!n;for(var i in e)!t&&!ae.call(e,i)||o&&("length"==i||Ke(i,n))||r.push(i);return r}function Be(e,t){for(var r=e.length;r--;)if(tt(e[r][0],t))return r;return-1}function Ne(e,t){for(var r=0,n=(t=Ye(t,e)?[t]:Ge(t)).length;null!=e&&r<n;)e=e[Ze(t[r++])];return r&&r==n?e:void 0}function Re(e,t){return null!=e&&t in Object(e)}function Le(e,t,r,n,o){return e===t||(null==e||null==t||!st(e)&&!ut(t)?e!=e&&t!=t:function(e,t,r,n,o,i){var a=nt(e),l=nt(t),c=p,m=p;a||(c=(c=Ve(e))==f?A:c);l||(m=(m=Ve(t))==f?A:m);var g=c==A&&!Y(e),O=m==A&&!Y(t),x=c==m;if(x&&!g)return i||(i=new je),a||ct(e)?ze(e,t,r,n,o,i):function(e,t,r,n,o,i,a){switch(r){case I:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case _:return!(e.byteLength!=t.byteLength||!n(new ce(e),new ce(t)));case h:case y:case b:return tt(+e,+t);case d:return e.name==t.name&&e.message==t.message;case w:case C:return e==t+"";case v:var l=J;case S:var c=i&u;if(l||(l=W),e.size!=t.size&&!c)return!1;var f=a.get(e);if(f)return f==t;i|=s,a.set(e,t);var p=ze(l(e),l(t),n,o,i,a);return a.delete(e),p;case E:if(Ie)return Ie.call(e)==Ie.call(t)}return!1}(e,t,c,r,n,o,i);if(!(o&u)){var P=g&&ae.call(e,"__wrapped__"),k=O&&ae.call(t,"__wrapped__");if(P||k){var T=P?e.value():e,j=k?t.value():t;return i||(i=new je),r(T,j,n,o,i)}}if(!x)return!1;return i||(i=new je),function(e,t,r,n,o,i){var a=o&u,s=ft(e),l=s.length,c=ft(t).length;if(l!=c&&!a)return!1;for(var f=l;f--;){var p=s[f];if(!(a?p in t:ae.call(t,p)))return!1}var h=i.get(e);if(h&&i.get(t))return h==t;var y=!0;i.set(e,t),i.set(t,e);for(var d=a;++f<l;){p=s[f];var m=e[p],g=t[p];if(n)var v=a?n(g,m,p,t,e,i):n(m,g,p,e,t,i);if(!(void 0===v?m===g||r(m,g,n,o,i):v)){y=!1;break}d||(d="constructor"==p)}if(y&&!d){var b=e.constructor,A=t.constructor;b!=A&&"constructor"in e&&"constructor"in t&&!("function"==typeof b&&b instanceof b&&"function"==typeof A&&A instanceof A)&&(y=!1)}return i.delete(e),i.delete(t),y}(e,t,r,n,o,i)}(e,t,Le,r,n,o))}function De(e){return!(!st(e)||oe&&oe in e)&&(it(e)||Y(e)?ue:j).test($e(e))}function Fe(e){return"function"==typeof e?e:null==e?pt:"object"==n(e)?nt(e)?function(e,t){if(Ye(e)&&Je(t))return We(Ze(e),t);return function(r){var n=function(e,t,r){var n=null==e?void 0:Ne(e,t);return void 0===n?r:n}(r,e);return void 0===n&&n===t?function(e,t){return null!=e&&function(e,t,r){var n,o=-1,i=(t=Ye(t,e)?[t]:Ge(t)).length;for(;++o<i;){var a=Ze(t[o]);if(!(n=null!=e&&r(e,a)))break;e=e[a]}if(n)return n;return!!(i=e?e.length:0)&&at(i)&&Ke(a,i)&&(nt(e)||rt(e))}(e,t,Re)}(r,e):Le(t,n,void 0,s|u)}}(e[0],e[1]):function(e){var t=function(e){var t=ft(e),r=t.length;for(;r--;){var n=t[r],o=e[n];t[r]=[n,o,Je(o)]}return t}(e);if(1==t.length&&t[0][2])return We(t[0][0],t[0][1]);return function(r){return r===e||function(e,t,r,n){var o=r.length,i=o,a=!n;if(null==e)return!i;for(e=Object(e);o--;){var l=r[o];if(a&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++o<i;){var c=(l=r[o])[0],f=e[c],p=l[1];if(a&&l[2]){if(void 0===f&&!(c in e))return!1}else{var h=new je;if(n)var y=n(f,p,c,e,t,h);if(!(void 0===y?Le(p,f,n,s|u,h):y))return!1}}return!0}(r,e,t)}}(e):Ye(t=e)?(r=Ze(t),function(e){return null==e?void 0:e[r]}):function(e){return function(t){return Ne(t,e)}}(t);var t,r}function Qe(e){if(r=(t=e)&&t.constructor,n="function"==typeof r&&r.prototype||re,t!==n)return he(e);var t,r,n,o=[];for(var i in Object(e))ae.call(e,i)&&"constructor"!=i&&o.push(i);return o}function Ge(e){return nt(e)?e:Xe(e)}xe.prototype.clear=function(){this.__data__=be?be(null):{}},xe.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},xe.prototype.get=function(e){var t=this.__data__;if(be){var r=t[e];return r===a?void 0:r}return ae.call(t,e)?t[e]:void 0},xe.prototype.has=function(e){var t=this.__data__;return be?void 0!==t[e]:ae.call(t,e)},xe.prototype.set=function(e,t){return this.__data__[e]=be&&void 0===t?a:t,this},Pe.prototype.clear=function(){this.__data__=[]},Pe.prototype.delete=function(e){var t=this.__data__,r=Be(t,e);return!(r<0||(r==t.length-1?t.pop():pe.call(t,r,1),0))},Pe.prototype.get=function(e){var t=this.__data__,r=Be(t,e);return r<0?void 0:t[r][1]},Pe.prototype.has=function(e){return Be(this.__data__,e)>-1},Pe.prototype.set=function(e,t){var r=this.__data__,n=Be(r,e);return n<0?r.push([e,t]):r[n][1]=t,this},ke.prototype.clear=function(){this.__data__={hash:new xe,map:new(de||Pe),string:new xe}},ke.prototype.delete=function(e){return He(this,e).delete(e)},ke.prototype.get=function(e){return He(this,e).get(e)},ke.prototype.has=function(e){return He(this,e).has(e)},ke.prototype.set=function(e,t){return He(this,e).set(e,t),this},Te.prototype.add=Te.prototype.push=function(e){return this.__data__.set(e,a),this},Te.prototype.has=function(e){return this.__data__.has(e)},je.prototype.clear=function(){this.__data__=new Pe},je.prototype.delete=function(e){return this.__data__.delete(e)},je.prototype.get=function(e){return this.__data__.get(e)},je.prototype.has=function(e){return this.__data__.has(e)},je.prototype.set=function(e,t){var r=this.__data__;if(r instanceof Pe){var n=r.__data__;if(!de||n.length<o-1)return n.push([e,t]),this;r=this.__data__=new ke(n)}return r.set(e,t),this};var Ue=ge&&1/W(new ge([,-0]))[1]==l?function(e){return new ge(e)}:function(){};function ze(e,t,r,n,o,i){var a=o&u,l=e.length,c=t.length;if(l!=c&&!(a&&c>l))return!1;var f=i.get(e);if(f&&i.get(t))return f==t;var p=-1,h=!0,y=o&s?new Te:void 0;for(i.set(e,t),i.set(t,e);++p<l;){var d=e[p],m=t[p];if(n)var g=a?n(m,d,p,t,e,i):n(d,m,p,e,t,i);if(void 0!==g){if(g)continue;h=!1;break}if(y){if(!q(t,function(e,t){if(!y.has(t)&&(d===e||r(d,e,n,o,i)))return y.add(t)})){h=!1;break}}else if(d!==m&&!r(d,m,n,o,i)){h=!1;break}}return i.delete(e),i.delete(t),h}function He(e,t){var r,o,i=e.__data__;return("string"==(o=n(r=t))||"number"==o||"symbol"==o||"boolean"==o?"__proto__"!==r:null===r)?i["string"==typeof t?"string":"hash"]:i.map}function qe(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return De(r)?r:void 0}var Ve=function(e){return se.call(e)};function Ke(e,t){return!!(t=null==t?c:t)&&("number"==typeof e||M.test(e))&&e>-1&&e%1==0&&e<t}function Ye(e,t){if(nt(e))return!1;var r=n(e);return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!lt(e))||(x.test(e)||!O.test(e)||null!=t&&e in Object(t))}function Je(e){return e==e&&!st(e)}function We(e,t){return function(r){return null!=r&&(r[e]===t&&(void 0!==t||e in Object(r)))}}(ye&&Ve(new ye(new ArrayBuffer(1)))!=I||de&&Ve(new de)!=v||me&&"[object Promise]"!=Ve(me.resolve())||ge&&Ve(new ge)!=S||ve&&"[object WeakMap]"!=Ve(new ve))&&(Ve=function(e){var t=se.call(e),r=t==A?e.constructor:void 0,n=r?$e(r):void 0;if(n)switch(n){case Ae:return I;case we:return v;case Se:return"[object Promise]";case Ce:return S;case Ee:return"[object WeakMap]"}return t});var Xe=et(function(e){var t;e=null==(t=e)?"":function(e){if("string"==typeof e)return e;if(lt(e))return Oe?Oe.call(e):"";var t=e+"";return"0"==t&&1/e==-l?"-0":t}(t);var r=[];return P.test(e)&&r.push(""),e.replace(k,function(e,t,n,o){r.push(n?o.replace(T,"$1"):t||e)}),r});function Ze(e){if("string"==typeof e||lt(e))return e;var t=e+"";return"0"==t&&1/e==-l?"-0":t}function $e(e){if(null!=e){try{return ie.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function et(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError(i);var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=e.apply(this,n);return r.cache=i.set(o,a),a};return r.cache=new(et.Cache||ke),r}function tt(e,t){return e===t||e!=e&&t!=t}function rt(e){return function(e){return ut(e)&&ot(e)}(e)&&ae.call(e,"callee")&&(!fe.call(e,"callee")||se.call(e)==f)}et.Cache=ke;var nt=Array.isArray;function ot(e){return null!=e&&at(e.length)&&!it(e)}function it(e){var t=st(e)?se.call(e):"";return t==m||t==g}function at(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=c}function st(e){var t=n(e);return!!e&&("object"==t||"function"==t)}function ut(e){return!!e&&"object"==n(e)}function lt(e){return"symbol"==n(e)||ut(e)&&se.call(e)==E}var ct=U?function(e){return function(t){return e(t)}}(U):function(e){return ut(e)&&at(e.length)&&!!B[se.call(e)]};function ft(e){return ot(e)?Me(e):Qe(e)}function pt(e){return e}e.exports=function(e,t){return e&&e.length?function(e,t,r){var n=-1,i=z,a=e.length,s=!0,u=[],l=u;if(r)s=!1,i=H;else if(a>=o){var c=t?null:Ue(e);if(c)return W(c);s=!1,i=K,l=new Te}else l=t?[]:u;e:for(;++n<a;){var f=e[n],p=t?t(f):f;if(f=r||0!==f?f:0,s&&p==p){for(var h=l.length;h--;)if(l[h]===p)continue e;t&&l.push(p),u.push(f)}else i(l,p,r)||(l!==u&&l.push(p),u.push(f))}return u}(e,Fe(t)):[]}},107:function(e,t,r){"use strict";var n=r(9234),o=r(4877),i=r(2533);e.exports=!n&&!o(function(){return 7!==Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a})},109:function(e,t,r){"use strict";var n=r(4499),o=r(606),i=n("keys");e.exports=function(e){return i[e]||(i[e]=o(e))}},155:function(e){"use strict";e.exports=function(e){return null===e||void 0===e}},304:function(e,t,r){"use strict";var n=r(2651),o=r(5045),i=r(3174);e.exports={XMLParser:o,XMLValidator:n,XMLBuilder:i}},311:function(e,t,r){function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=200,i="__lodash_hash_undefined__",a=9007199254740991,s="[object Arguments]",u="[object Function]",l="[object GeneratorFunction]",c=/^\[object .+?Constructor\]$/,f="object"==(void 0===r.g?"undefined":n(r.g))&&r.g&&r.g.Object===Object&&r.g,p="object"==("undefined"==typeof self?"undefined":n(self))&&self&&self.Object===Object&&self,h=f||p||Function("return this")();function y(e,t){return!!(e?e.length:0)&&function(e,t,r){if(t!=t)return function(e,t,r,n){var o=e.length,i=r+(n?1:-1);for(;n?i--:++i<o;)if(t(e[i],i,e))return i;return-1}(e,g,r);var n=r-1,o=e.length;for(;++n<o;)if(e[n]===t)return n;return-1}(e,t,0)>-1}function d(e,t,r){for(var n=-1,o=e?e.length:0;++n<o;)if(r(t,e[n]))return!0;return!1}function m(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}function g(e){return e!=e}function v(e,t){return e.has(t)}var b,A=Array.prototype,w=Function.prototype,S=Object.prototype,C=h["__core-js_shared__"],E=(b=/[^.]+$/.exec(C&&C.keys&&C.keys.IE_PROTO||""))?"Symbol(src)_1."+b:"",_=w.toString,I=S.hasOwnProperty,O=S.toString,x=RegExp("^"+_.call(I).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),P=h.Symbol,k=S.propertyIsEnumerable,T=A.splice,j=P?P.isConcatSpreadable:void 0,M=Math.max,B=H(h,"Map"),N=H(Object,"create");function R(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function L(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function D(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function F(e){var t=-1,r=e?e.length:0;for(this.__data__=new D;++t<r;)this.add(e[t])}function Q(e,t){for(var r,n,o=e.length;o--;)if((r=e[o][0])===(n=t)||r!=r&&n!=n)return o;return-1}function G(e,t,r,n){var i,a=-1,s=y,u=!0,l=e.length,c=[],f=t.length;if(!l)return c;r&&(t=function(e,t){for(var r=-1,n=e?e.length:0,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}(t,(i=r,function(e){return i(e)}))),n?(s=d,u=!1):t.length>=o&&(s=v,u=!1,t=new F(t));e:for(;++a<l;){var p=e[a],h=r?r(p):p;if(p=n||0!==p?p:0,u&&h==h){for(var m=f;m--;)if(t[m]===h)continue e;c.push(p)}else s(t,h,n)||c.push(p)}return c}function U(e){return!(!$(e)||E&&E in e)&&(Z(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?x:c).test(function(e){if(null!=e){try{return _.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}function z(e,t){var r,o,i=e.__data__;return("string"==(o=n(r=t))||"number"==o||"symbol"==o||"boolean"==o?"__proto__"!==r:null===r)?i["string"==typeof t?"string":"hash"]:i.map}function H(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return U(r)?r:void 0}function q(e){return J(e)||function(e){return X(e)&&I.call(e,"callee")&&(!k.call(e,"callee")||O.call(e)==s)}(e)||!!(j&&e&&e[j])}R.prototype.clear=function(){this.__data__=N?N(null):{}},R.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},R.prototype.get=function(e){var t=this.__data__;if(N){var r=t[e];return r===i?void 0:r}return I.call(t,e)?t[e]:void 0},R.prototype.has=function(e){var t=this.__data__;return N?void 0!==t[e]:I.call(t,e)},R.prototype.set=function(e,t){return this.__data__[e]=N&&void 0===t?i:t,this},L.prototype.clear=function(){this.__data__=[]},L.prototype.delete=function(e){var t=this.__data__,r=Q(t,e);return!(r<0||(r==t.length-1?t.pop():T.call(t,r,1),0))},L.prototype.get=function(e){var t=this.__data__,r=Q(t,e);return r<0?void 0:t[r][1]},L.prototype.has=function(e){return Q(this.__data__,e)>-1},L.prototype.set=function(e,t){var r=this.__data__,n=Q(r,e);return n<0?r.push([e,t]):r[n][1]=t,this},D.prototype.clear=function(){this.__data__={hash:new R,map:new(B||L),string:new R}},D.prototype.delete=function(e){return z(this,e).delete(e)},D.prototype.get=function(e){return z(this,e).get(e)},D.prototype.has=function(e){return z(this,e).has(e)},D.prototype.set=function(e,t){return z(this,e).set(e,t),this},F.prototype.add=F.prototype.push=function(e){return this.__data__.set(e,i),this},F.prototype.has=function(e){return this.__data__.has(e)};var V,K,Y=(V=function(e,t){return X(e)?G(e,function e(t,r,n,o,i){var a=-1,s=t.length;for(n||(n=q),i||(i=[]);++a<s;){var u=t[a];r>0&&n(u)?r>1?e(u,r-1,n,o,i):m(i,u):o||(i[i.length]=u)}return i}(t,1,X,!0)):[]},K=M(void 0===K?V.length-1:K,0),function(){for(var e=arguments,t=-1,r=M(e.length-K,0),n=Array(r);++t<r;)n[t]=e[K+t];t=-1;for(var o=Array(K+1);++t<K;)o[t]=e[t];return o[K]=n,function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}(V,this,o)});var J=Array.isArray;function W(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=a}(e.length)&&!Z(e)}function X(e){return function(e){return!!e&&"object"==n(e)}(e)&&W(e)}function Z(e){var t=$(e)?O.call(e):"";return t==u||t==l}function $(e){var t=n(e);return!!e&&("object"==t||"function"==t)}e.exports=Y},368:function(e,t,r){for(var n=r(4186),o="undefined"==typeof window?r.g:window,i=["moz","webkit"],a="AnimationFrame",s=o["request"+a],u=o["cancel"+a]||o["cancelRequest"+a],l=0;!s&&l<i.length;l++)s=o[i[l]+"Request"+a],u=o[i[l]+"Cancel"+a]||o[i[l]+"CancelRequest"+a];if(!s||!u){var c=0,f=0,p=[];s=function(e){if(0===p.length){var t=n(),r=Math.max(0,1e3/60-(t-c));c=r+t,setTimeout(function(){var e=p.slice(0);p.length=0;for(var t=function(){if(!e[r].cancelled)try{e[r].callback(c)}catch(e){setTimeout(function(){throw e},0)}},r=0;r<e.length;r++)t()},Math.round(r))}return p.push({handle:++f,callback:e,cancelled:!1}),f},u=function(e){for(var t=0;t<p.length;t++)p[t].handle===e&&(p[t].cancelled=!0)}}e.exports=function(e){return s.call(o,e)},e.exports.cancel=function(){u.apply(o,arguments)},e.exports.polyfill=function(e){e||(e=o),e.requestAnimationFrame=s,e.cancelAnimationFrame=u}},398:function(e,t,r){"use strict";var n=r(8574),o=Function.prototype,i=o.call,a=n&&o.bind.bind(i,i);e.exports=n?a:function(e){return function(){return i.apply(e,arguments)}}},428:function(e,t,r){"use strict";var n=r(9800);e.exports=function(e){return n(e.length)}},494:function(e,t,r){"use strict";r(2461)("asyncIterator")},497:function(e){"use strict";e.exports=!1},578:function(e,t,r){"use strict";var n=r(2791),o=r(7197),i=r(1805),a=r(1807);e.exports=function(e,t,r){for(var s=o(t),u=a.f,l=i.f,c=0;c<s.length;c++){var f=s[c];n(e,f)||r&&n(r,f)||u(e,f,l(t,f))}}},606:function(e,t,r){"use strict";var n=r(398),o=0,i=Math.random(),a=n(1.1.toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+a(++o+i,36)}},791:function(e,t){"use strict";t.f=Object.getOwnPropertySymbols},833:function(e,t,r){"use strict";e.exports=o,e.exports.default=o;var n=r(2299);function o(e,t){if(!(this instanceof o))return new o(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&this._initFormat(t),this.clear()}function i(e,t,r){if(!r)return t.indexOf(e);for(var n=0;n<t.length;n++)if(r(e,t[n]))return n;return-1}function a(e,t){s(e,0,e.children.length,t,e)}function s(e,t,r,n,o){o||(o=d(null)),o.minX=1/0,o.minY=1/0,o.maxX=-1/0,o.maxY=-1/0;for(var i,a=t;a<r;a++)i=e.children[a],u(o,e.leaf?n(i):i);return o}function u(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function l(e,t){return e.minX-t.minX}function c(e,t){return e.minY-t.minY}function f(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function p(e){return e.maxX-e.minX+(e.maxY-e.minY)}function h(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function y(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function d(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function m(e,t,r,o,i){for(var a,s=[t,r];s.length;)(r=s.pop())-(t=s.pop())<=o||(a=t+Math.ceil((r-t)/o/2)*o,n(e,a,t,r,i),s.push(t,a,a,r))}o.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,r=[],n=this.toBBox;if(!y(e,t))return r;for(var o,i,a,s,u=[];t;){for(o=0,i=t.children.length;o<i;o++)a=t.children[o],y(e,s=t.leaf?n(a):a)&&(t.leaf?r.push(a):h(e,s)?this._all(a,r):u.push(a));t=u.pop()}return r},collides:function(e){var t=this.data,r=this.toBBox;if(!y(e,t))return!1;for(var n,o,i,a,s=[];t;){for(n=0,o=t.children.length;n<o;n++)if(i=t.children[n],y(e,a=t.leaf?r(i):i)){if(t.leaf||h(e,a))return!0;s.push(i)}t=s.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0,r=e.length;t<r;t++)this.insert(e[t]);return this}var n=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var o=this.data;this.data=n,n=o}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},insert:function(e){return e&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=d([]),this},remove:function(e,t){if(!e)return this;for(var r,n,o,a,s=this.data,u=this.toBBox(e),l=[],c=[];s||l.length;){if(s||(s=l.pop(),n=l[l.length-1],r=c.pop(),a=!0),s.leaf&&-1!==(o=i(e,s.children,t)))return s.children.splice(o,1),l.push(s),this._condense(l),this;a||s.leaf||!h(s,u)?n?(r++,s=n.children[r],a=!1):s=null:(l.push(s),c.push(r),r=0,n=s,s=s.children[0])}return this},toBBox:function(e){return e},compareMinX:l,compareMinY:c,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var r=[];e;)e.leaf?t.push.apply(t,e.children):r.push.apply(r,e.children),e=r.pop();return t},_build:function(e,t,r,n){var o,i=r-t+1,s=this._maxEntries;if(i<=s)return a(o=d(e.slice(t,r+1)),this.toBBox),o;n||(n=Math.ceil(Math.log(i)/Math.log(s)),s=Math.ceil(i/Math.pow(s,n-1))),(o=d([])).leaf=!1,o.height=n;var u,l,c,f,p=Math.ceil(i/s),h=p*Math.ceil(Math.sqrt(s));for(m(e,t,r,h,this.compareMinX),u=t;u<=r;u+=h)for(m(e,u,c=Math.min(u+h-1,r),p,this.compareMinY),l=u;l<=c;l+=p)f=Math.min(l+p-1,c),o.children.push(this._build(e,l,f,n-1));return a(o,this.toBBox),o},_chooseSubtree:function(e,t,r,n){for(var o,i,a,s,u,l,c,p,h,y;n.push(t),!t.leaf&&n.length-1!==r;){for(c=p=1/0,o=0,i=t.children.length;o<i;o++)u=f(a=t.children[o]),h=e,y=a,(l=(Math.max(y.maxX,h.maxX)-Math.min(y.minX,h.minX))*(Math.max(y.maxY,h.maxY)-Math.min(y.minY,h.minY))-u)<p?(p=l,c=u<c?u:c,s=a):l===p&&u<c&&(c=u,s=a);t=s||t.children[0]}return t},_insert:function(e,t,r){var n=this.toBBox,o=r?e:n(e),i=[],a=this._chooseSubtree(o,this.data,t,i);for(a.children.push(e),u(a,o);t>=0&&i[t].children.length>this._maxEntries;)this._split(i,t),t--;this._adjustParentBBoxes(o,i,t)},_split:function(e,t){var r=e[t],n=r.children.length,o=this._minEntries;this._chooseSplitAxis(r,o,n);var i=this._chooseSplitIndex(r,o,n),s=d(r.children.splice(i,r.children.length-i));s.height=r.height,s.leaf=r.leaf,a(r,this.toBBox),a(s,this.toBBox),t?e[t-1].children.push(s):this._splitRoot(r,s)},_splitRoot:function(e,t){this.data=d([e,t]),this.data.height=e.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,r){var n,o,i,a,u,l,c,p,h,y,d,m,g,v;for(l=c=1/0,n=t;n<=r-t;n++)o=s(e,0,n,this.toBBox),i=s(e,n,r,this.toBBox),h=o,y=i,void 0,void 0,void 0,void 0,d=Math.max(h.minX,y.minX),m=Math.max(h.minY,y.minY),g=Math.min(h.maxX,y.maxX),v=Math.min(h.maxY,y.maxY),a=Math.max(0,g-d)*Math.max(0,v-m),u=f(o)+f(i),a<l?(l=a,p=n,c=u<c?u:c):a===l&&u<c&&(c=u,p=n);return p},_chooseSplitAxis:function(e,t,r){var n=e.leaf?this.compareMinX:l,o=e.leaf?this.compareMinY:c;this._allDistMargin(e,t,r,n)<this._allDistMargin(e,t,r,o)&&e.children.sort(n)},_allDistMargin:function(e,t,r,n){e.children.sort(n);var o,i,a=this.toBBox,l=s(e,0,t,a),c=s(e,r-t,r,a),f=p(l)+p(c);for(o=t;o<r-t;o++)i=e.children[o],u(l,e.leaf?a(i):i),f+=p(l);for(o=r-t-1;o>=t;o--)i=e.children[o],u(c,e.leaf?a(i):i),f+=p(c);return f},_adjustParentBBoxes:function(e,t,r){for(var n=r;n>=0;n--)u(t[n],e)},_condense:function(e){for(var t,r=e.length-1;r>=0;r--)0===e[r].children.length?r>0?(t=e[r-1].children).splice(t.indexOf(e[r]),1):this.clear():a(e[r],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}}},961:function(e,t,r){"use strict";var n=r(3712);e.exports=n},1009:function(e){"use strict";e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},1059:function(e,t,r){"use strict";var n=r(9213),o=r(1308);e.exports=function(e){return n(o(e))}},1097:function(e){var t=/^[-+]?0x[a-fA-F0-9]+$/,r=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,n={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};e.exports=function(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(o=Object.assign({},n,o),!e||"string"!=typeof e)return e;var i=e.trim();if(void 0!==o.skipLike&&o.skipLike.test(i))return e;if("0"===e)return 0;if(o.hex&&t.test(i))return function(e,t){if(parseInt)return parseInt(e,t);if(Number.parseInt)return Number.parseInt(e,t);if(window&&window.parseInt)return window.parseInt(e,t);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")}(i,16);if(-1!==i.search(/[eE]/)){var a=i.match(/^([-\+])?(0*)([0-9]*(\.[0-9]*)?[eE][-\+]?[0-9]+)$/);if(a){if(o.leadingZeros)i=(a[1]||"")+a[3];else if("0"!==a[2]||"."!==a[3][0])return e;return o.eNotation?Number(i):e}return e}var s=r.exec(i);if(s){var u=s[1],l=s[2],c=function(e){return e&&-1!==e.indexOf(".")?("."===(e=e.replace(/0+$/,""))?e="0":"."===e[0]?e="0"+e:"."===e[e.length-1]&&(e=e.substr(0,e.length-1)),e):e}(s[3]);if(!o.leadingZeros&&l.length>0&&u&&"."!==i[2])return e;if(!o.leadingZeros&&l.length>0&&!u&&"."!==i[1])return e;if(o.leadingZeros&&l===e)return 0;var f=Number(i),p=""+f;return-1!==p.search(/[eE]/)?o.eNotation?f:e:-1!==i.indexOf(".")?"0"===p&&""===c?f:p===c?f:u&&p==="-"+c?f:e:l?c===p||u+c===p?f:e:i===p||i===u+p?f:e}return e}},1289:function(e,t,r){"use strict";var n=r(4638).navigator,o=n&&n.userAgent;e.exports=o?String(o):""},1308:function(e,t,r){"use strict";var n=r(155),o=TypeError;e.exports=function(e){if(n(e))throw new o("Can't call method on "+e);return e}},1358:function(e){!function(t){"use strict";if(t.__disableNativeFetch||!t.fetch){s.prototype.append=function(e,t){e=i(e),t=a(t);var r=this.map[e];r||(r=[],this.map[e]=r),r.push(t)},s.prototype.delete=function(e){delete this.map[i(e)]},s.prototype.get=function(e){var t=this.map[i(e)];return t?t[0]:null},s.prototype.getAll=function(e){return this.map[i(e)]||[]},s.prototype.has=function(e){return this.map.hasOwnProperty(i(e))},s.prototype.set=function(e,t){this.map[i(e)]=[a(t)]},s.prototype.forEach=function(e,t){Object.getOwnPropertyNames(this.map).forEach(function(r){this.map[r].forEach(function(n){e.call(t,n,r,this)},this)},this)};var r={blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t},n=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];p.prototype.clone=function(){return new p(this)},f.call(p.prototype),f.call(y.prototype),y.prototype.clone=function(){return new y(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new s(this.headers),url:this.url})},y.error=function(){var e=new y(null,{status:0,statusText:""});return e.type="error",e};var o=[301,302,303,307,308];y.redirect=function(e,t){if(-1===o.indexOf(t))throw new RangeError("Invalid status code");return new y(null,{status:t,headers:{location:e}})},t.Headers=s,t.Request=p,t.Response=y,t.fetch=function(e,t){return new Promise(function(n,o){var i;i=p.prototype.isPrototypeOf(e)&&!t?e:new p(e,t);var a=new XMLHttpRequest;var u=!1;function l(){if(4===a.readyState){var e=1223===a.status?204:a.status;if(e<100||e>599){if(u)return;return u=!0,void o(new TypeError("Network request failed"))}var t={status:e,statusText:a.statusText,headers:function(e){var t=new s;return e.getAllResponseHeaders().trim().split("\n").forEach(function(e){var r=e.trim().split(":"),n=r.shift().trim(),o=r.join(":").trim();t.append(n,o)}),t}(a),url:"responseURL"in a?a.responseURL:/^X-Request-URL:/m.test(a.getAllResponseHeaders())?a.getResponseHeader("X-Request-URL"):void 0},r="response"in a?a.response:a.responseText;u||(u=!0,n(new y(r,t)))}}a.onreadystatechange=l,a.onload=l,a.onerror=function(){u||(u=!0,o(new TypeError("Network request failed")))},a.open(i.method,i.url,!0);try{"include"===i.credentials&&("withCredentials"in a?a.withCredentials=!0:console&&console.warn&&console.warn("withCredentials is not supported, you can ignore this warning"))}catch(e){console&&console.warn&&console.warn("set withCredentials error:"+e)}"responseType"in a&&r.blob&&(a.responseType="blob"),i.headers.forEach(function(e,t){a.setRequestHeader(t,e)}),a.send(void 0===i._bodyInit?null:i._bodyInit)})},t.fetch.polyfill=!0,e.exports&&(e.exports=t.fetch)}function i(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function a(e){return"string"!=typeof e&&(e=String(e)),e}function s(e){this.map={},e instanceof s?e.forEach(function(e,t){this.append(t,e)},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function u(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function l(e){return new Promise(function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}})}function c(e){var t=new FileReader;return t.readAsArrayBuffer(e),l(t)}function f(){return this.bodyUsed=!1,this._initBody=function(e,t){if(this._bodyInit=e,"string"==typeof e)this._bodyText=e;else if(r.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e,this._options=t;else if(r.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(e){if(!r.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e))throw new Error("unsupported BodyInit type")}else this._bodyText=""},r.blob?(this.blob=function(){var e=u(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(c)},this.text=function(){var e,t,r,n,o,i,a,s=u(this);if(s)return s;if(this._bodyBlob)return e=this._bodyBlob,t=this._options,r=new FileReader,n=t.headers.map["content-type"]?t.headers.map["content-type"].toString():"",o=/charset\=[0-9a-zA-Z\-\_]*;?/,i=e.type.match(o)||n.match(o),a=[e],i&&a.push(i[0].replace(/^charset\=/,"").replace(/;$/,"")),r.readAsText.apply(r,a),l(r);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var e=u(this);return e||Promise.resolve(this._bodyText)},r.formData&&(this.formData=function(){return this.text().then(h)}),this.json=function(){return this.text().then(JSON.parse)},this}function p(e,t){var r,o,i=(t=t||{}).body;if(p.prototype.isPrototypeOf(e)){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new s(e.headers)),this.method=e.method,this.mode=e.mode,i||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=e;if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new s(t.headers)),this.method=(r=t.method||this.method||"GET",o=r.toUpperCase(),n.indexOf(o)>-1?o:r),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i,t)}function h(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(o))}}),t}function y(e,t){t||(t={}),this._initBody(e,t),this.type="default",this.status=t.status,this.ok=this.status>=200&&this.status<300,this.statusText=t.statusText,this.headers=t.headers instanceof s?t.headers:new s(t.headers),this.url=t.url||""}}("undefined"!=typeof self?self:this)},1718:function(e){"use strict";e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},1805:function(e,t,r){"use strict";var n=r(9234),o=r(9707),i=r(15),a=r(1718),s=r(1059),u=r(6779),l=r(2791),c=r(107),f=Object.getOwnPropertyDescriptor;t.f=n?f:function(e,t){if(e=s(e),t=u(t),c)try{return f(e,t)}catch(e){}if(l(e,t))return a(!o(i.f,e,t),e[t])}},1807:function(e,t,r){"use strict";var n=r(9234),o=r(107),i=r(4796),a=r(9809),s=r(6779),u=TypeError,l=Object.defineProperty,c=Object.getOwnPropertyDescriptor;t.f=n?i?function(e,t,r){if(a(e),t=s(t),a(r),"function"==typeof e&&"prototype"===t&&"value"in r&&"writable"in r&&!r.writable){var n=c(e,t);n&&n.writable&&(e[t]=r.value,r={configurable:"configurable"in r?r.configurable:n.configurable,enumerable:"enumerable"in r?r.enumerable:n.enumerable,writable:!1})}return l(e,t,r)}:l:function(e,t,r){if(a(e),t=s(t),a(r),o)try{return l(e,t,r)}catch(e){}if("get"in r||"set"in r)throw new u("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},1855:function(e,t,r){function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o="Expected a function",i=NaN,a="[object Symbol]",s=/^\s+|\s+$/g,u=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,c=/^0o[0-7]+$/i,f=parseInt,p="object"==(void 0===r.g?"undefined":n(r.g))&&r.g&&r.g.Object===Object&&r.g,h="object"==("undefined"==typeof self?"undefined":n(self))&&self&&self.Object===Object&&self,y=p||h||Function("return this")(),d=Object.prototype.toString,m=Math.max,g=Math.min,v=function(){return y.Date.now()};function b(e){var t=n(e);return!!e&&("object"==t||"function"==t)}function A(e){return"symbol"==n(e)||function(e){return!!e&&"object"==n(e)}(e)&&d.call(e)==a}function w(e){if("number"==typeof e)return e;if(A(e))return i;if(b(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=b(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(s,"");var r=l.test(e);return r||c.test(e)?f(e.slice(2),r?2:8):u.test(e)?i:+e}e.exports=function(e,t,r){var n,i,a,s,u,l,c=0,f=!1,p=!1,h=!0;if("function"!=typeof e)throw new TypeError(o);function y(t){var r=n,o=i;return n=i=void 0,c=t,s=e.apply(o,r)}function d(e){var r=e-l;return void 0===l||r>=t||r<0||p&&e-c>=a}function A(){var e=v();if(d(e))return S(e);u=setTimeout(A,function(e){var r=t-(e-l);return p?g(r,a-(e-c)):r}(e))}function S(e){return u=void 0,h&&n?y(e):(n=i=void 0,s)}function C(){var e=v(),r=d(e);if(n=arguments,i=this,l=e,r){if(void 0===u)return function(e){return c=e,u=setTimeout(A,t),f?y(e):s}(l);if(p)return u=setTimeout(A,t),y(l)}return void 0===u&&(u=setTimeout(A,t)),s}return t=w(t)||0,b(r)&&(f=!!r.leading,a=(p="maxWait"in r)?m(w(r.maxWait)||0,t):a,h="trailing"in r?!!r.trailing:h),C.cancel=function(){void 0!==u&&clearTimeout(u),c=0,n=l=i=u=void 0},C.flush=function(){return void 0===u?s:S(v())},C}},2035:function(e){function t(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}e.exports=function(e){return"function"==typeof e?e:Array.isArray(e)?function(r){var n,o=t(e);try{for(o.s();!(n=o.n()).done;){var i=n.value;if("string"==typeof i&&r===i)return!0;if(i instanceof RegExp&&i.test(r))return!0}}catch(e){o.e(e)}finally{o.f()}}:function(){return!1}}},2039:function(e,t,r){"use strict";var n=mapboxgl,o=r.n(n),i={values:[],set:function(e){return this.values=e,this.values},add:function(e){return this.values.push(e),this.values}},a=(r(5246),r(1358),r(3678)),s=r.n(a);function u(e){"@babel/helpers - typeof";return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,c(n.key),n)}}function c(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==u(t)?t:t+""}var f=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];for(var n=function(e,t,r){return t&&l(e.prototype,t),r&&l(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=0;n<t.length;n++)a(this,new t[n](r))}),o=0;o<t.length;o++){var i=t[o];a(n,i),a(n.prototype,i.prototype),a(n.prototype,new i)}return n;function a(e,t){var r=Object.getOwnPropertyNames(t);Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t)));for(var n=0;n<r.length;n++){var o=r[n];if("constructor"!==o&&"prototype"!==o&&"name"!==o&&"length"!==o){var i=Object.getOwnPropertyDescriptor(t,o);window.ActiveXObject?Object.defineProperty(e,o,i||{}):Object.defineProperty(e,o,i)}}}},p={startsWith:function(e,t){return 0==e.indexOf(t)},contains:function(e,t){return-1!=e.indexOf(t)},trim:function(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},camelize:function(e){for(var t=e.split("-"),r=t[0],n=1,o=t.length;n<o;n++){var i=t[n];r+=i.charAt(0).toUpperCase()+i.substring(1)}return r},format:function(e,t,r){t||(t=window);return e.replace(p.tokenRegEx,function(e,n){for(var o,i=n.split(/\.+/),a=0;a<i.length;a++)0==a&&(o=t),o=o[i[a]];return"function"==typeof o&&(o=r?o.apply(null,r):o()),void 0===o?"undefined":o})},tokenRegEx:/\$\{([\w.]+?)\}/g,numberRegEx:/^([+-]?)(?=\d|\.\d)\d*(\.\d*)?([Ee]([+-]?\d+))?$/,isNumeric:function(e){return p.numberRegEx.test(e)},numericIf:function(e){return p.isNumeric(e)?parseFloat(e):e}},h={decimalSeparator:".",thousandsSeparator:",",limitSigDigs:function(e,t){var r=0;return t>0&&(r=parseFloat(e.toPrecision(t))),r},format:function(e,t,r,n){t=void 0!==t?t:0,r=void 0!==r?r:h.thousandsSeparator,n=void 0!==n?n:h.decimalSeparator,null!=t&&(e=parseFloat(e.toFixed(t)));var o=e.toString().split(".");1===o.length&&null==t&&(t=0);var i,a=o[0];if(r)for(var s=/(-?[0-9]+)([0-9]{3})/;s.test(a);)a=a.replace(s,"$1"+r+"$2");if(0==t)i=a;else{var u=o.length>1?o[1]:"0";null!=t&&(u+=new Array(t-u.length+1).join("0")),i=a+n+u}return i}};Number.prototype.limitSigDigs||(Number.prototype.limitSigDigs=function(e){return h.limitSigDigs(this,e)});var y={bind:function(e,t){var r=Array.prototype.slice.apply(arguments,[2]);return function(){var n=r.concat(Array.prototype.slice.apply(arguments,[0]));return e.apply(t,n)}},bindAsEventListener:function(e,t){return function(r){return e.call(t,r||window.event)}},False:function(){return!1},True:function(){return!0},Void:function(){}},d={filter:function(e,t,r){var n=[];if(Array.prototype.filter)n=e.filter(t,r);else{var o=e.length;if("function"!=typeof t)throw new TypeError;for(var i=0;i<o;i++)if(i in e){var a=e[i];t.call(r,a,i,e)&&n.push(a)}}return n}};function m(e){"@babel/helpers - typeof";return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,v(n.key),n)}}function v(e){var t=function(e,t){if("object"!=m(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==m(t)?t:t+""}var b=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.CLASS_NAME="SuperMap.Geometry",this.id=M.createUniqueID(this.CLASS_NAME+"_"),this.parent=null,this.bounds=null,this.SRID=null}return t=e,(r=[{key:"destroy",value:function(){this.id=null,this.bounds=null,this.SRID=null}},{key:"clone",value:function(){return new e}},{key:"setBounds",value:function(e){e&&(this.bounds=e.clone())}},{key:"clearBounds",value:function(){this.bounds=null,this.parent&&this.parent.clearBounds()}},{key:"extendBounds",value:function(e){this.getBounds()?this.bounds.extend(e):this.setBounds(e)}},{key:"getBounds",value:function(){return null==this.bounds&&this.calculateBounds(),this.bounds}},{key:"calculateBounds",value:function(){}},{key:"getVertices",value:function(e){}},{key:"getArea",value:function(){return 0}}])&&g(t.prototype,r),n&&g(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}(),A=r(7411),w=r.n(A);function S(e){"@babel/helpers - typeof";return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var C,E,_,I,O,x,P,k=(E="",_="",I="pc",(O=navigator.userAgent.toLowerCase()).indexOf("msie")>-1||O.indexOf("trident")>-1&&O.indexOf("rv")>-1?(E="msie",C=O.match(/msie ([\d.]+)/)||O.match(/rv:([\d.]+)/)):O.indexOf("chrome")>-1?(E="chrome",C=O.match(/chrome\/([\d.]+)/)):O.indexOf("firefox")>-1?(E="firefox",C=O.match(/firefox\/([\d.]+)/)):O.indexOf("opera")>-1?(E="opera",C=O.match(/version\/([\d.]+)/)):O.indexOf("safari")>-1&&(E="safari",C=O.match(/version\/([\d.]+)/)),_=C?C[1]:"",O.indexOf("ipad")>-1||O.indexOf("ipod")>-1||O.indexOf("iphone")>-1?I="apple":O.indexOf("android")>-1&&(_=(C=O.match(/version\/([\d.]+)/))?C[1]:"",I="android"),{name:E,version:_,device:I}),T=(x=!0,P=k,document.createElement("canvas").getContext?("firefox"===P.name&&parseFloat(P.version)<5&&(x=!1),"safari"===P.name&&parseFloat(P.version)<4&&(x=!1),"opera"===P.name&&parseFloat(P.version)<10&&(x=!1),"msie"===P.name&&parseFloat(P.version)<9&&(x=!1)):x=!1,x),j=function(){var e=navigator.userAgent.toLowerCase();return-1===e.indexOf("webkit")&&-1!==e.indexOf("gecko")}(),M={assign:function(e){for(var t=0;t<Object.getOwnPropertyNames(arguments).length;t++){var r=Object.getOwnPropertyNames(arguments)[t];if("caller"!=r&&"callee"!=r&&"length"!=r&&"arguments"!=r){var n=arguments[r];if(n)for(var o=0;o<Object.getOwnPropertyNames(n).length;o++){var i=Object.getOwnPropertyNames(n)[o];"caller"!=r&&"callee"!=r&&"length"!=r&&"arguments"!=r&&(e[i]=n[i])}}}return e},extend:function(e,t){if(e=e||{},t){for(var r in t){var n=t[r];void 0!==n&&(e[r]=n)}!("function"==typeof window.Event&&t instanceof window.Event)&&t.hasOwnProperty&&t.hasOwnProperty("toString")&&(e.toString=t.toString)}return e},copy:function(e,t){var r;if(e=e||{},t)for(var n in e)void 0!==(r=t[n])&&(e[n]=r)},reset:function(e){for(var t in e=e||{})if(e.hasOwnProperty(t)){if("object"===S(e[t])&&e[t]instanceof Array){for(var r in e[t])e[t][r].destroy&&e[t][r].destroy();e[t].length=0}else"object"===S(e[t])&&e[t]instanceof Object&&e[t].destroy&&e[t].destroy();e[t]=null}},getElement:function(){for(var e=[],t=0,r=arguments.length;t<r;t++){var n=arguments[t];if("string"==typeof n&&(n=document.getElementById(n)),1===arguments.length)return n;e.push(n)}return e},isElement:function(e){return!(!e||1!==e.nodeType)},isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},removeItem:function(e,t){for(var r=e.length-1;r>=0;r--)e[r]===t&&e.splice(r,1);return e},indexOf:function(e,t){if(null==e)return-1;if("function"==typeof e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1},modifyDOMElement:function(e,t,r,n,o,i,a,s){t&&(e.id=t),r&&(e.style.left=r.x+"px",e.style.top=r.y+"px"),n&&(e.style.width=n.w+"px",e.style.height=n.h+"px"),o&&(e.style.position=o),i&&(e.style.border=i),a&&(e.style.overflow=a),parseFloat(s)>=0&&parseFloat(s)<1?(e.style.filter="alpha(opacity="+100*s+")",e.style.opacity=s):1===parseFloat(s)&&(e.style.filter="",e.style.opacity="")},applyDefaults:function(e,t){e=e||{};var r="function"==typeof window.Event&&t instanceof window.Event;for(var n in t)(void 0===e[n]||!r&&t.hasOwnProperty&&t.hasOwnProperty(n)&&!e.hasOwnProperty(n))&&(e[n]=t[n]);return!r&&t&&t.hasOwnProperty&&t.hasOwnProperty("toString")&&!e.hasOwnProperty("toString")&&(e.toString=t.toString),e},getParameterString:function(e){var t=[];for(var r in e){var n,o=e[r];if(null!=o&&"function"!=typeof o)n=Array.isArray(o)||"[object Object]"===o.toString()?encodeURIComponent(JSON.stringify(o)):encodeURIComponent(o),t.push(encodeURIComponent(r)+"="+n)}return t.join("&")},urlAppend:function(e,t){var r=e;if(t){0===t.indexOf("?")&&(t=t.substring(1));var n=(e+" ").split(/[?&]/);r+=" "===n.pop()?t:n.length?"&"+t:"?"+t}return r},urlPathAppend:function(e,t){var r=e;if(!t)return r;0===t.indexOf("/")&&(t=t.substring(1));var n=e.split("?");return n[0].indexOf("/",n[0].length-1)<0&&(n[0]+="/"),r="".concat(n[0]).concat(t).concat(n.length>1?"?".concat(n[1]):"")},DEFAULT_PRECISION:14,toFloat:function(e,t){return null==t&&(t=M.DEFAULT_PRECISION),"number"!=typeof e&&(e=parseFloat(e)),0===t?e:parseFloat(e.toPrecision(t))},rad:function(e){return e*Math.PI/180},getParameters:function(e){e=null===e||void 0===e?window.location.href:e;var t="";if(p.contains(e,"?")){var r=e.indexOf("?")+1,n=p.contains(e,"#")?e.indexOf("#"):e.length;t=e.substring(r,n)}for(var o={},i=t.split(/[&;]/),a=0,s=i.length;a<s;++a){var u=i[a].split("=");if(u[0]){var l=u[0];try{l=decodeURIComponent(l)}catch(e){l=unescape(l)}var c=(u[1]||"").replace(/\+/g," ");try{c=decodeURIComponent(c)}catch(e){c=unescape(c)}1==(c=c.split(",")).length&&(c=c[0]),o[l]=c}}return o},lastSeqID:0,createUniqueID:function(e){return null==e&&(e="id_"),M.lastSeqID+=1,e+M.lastSeqID},normalizeScale:function(e){return e>1?1/e:e},getResolutionFromScale:function(e,t){var r;e&&(null==t&&(t="degrees"),r=1/(M.normalizeScale(e)*B[t]*96));return r},getScaleFromResolution:function(e,t){return null==t&&(t="degrees"),e*B[t]*96},getBrowser:function(){return k},isSupportCanvas:T,supportCanvas:function(){return M.isSupportCanvas},isInTheSameDomain:function(e){return!e||(-1===e.indexOf("//")||M.isSameDomain(e,document.location.toString()))},isSameDomain:function(e,t){return new(w())(e).normalize().origin()===new(w())(t).normalize().origin()},calculateDpi:function(e,t,r,n,o){if(e&&t&&r){var i,a=e.getWidth(),s=e.getHeight(),u=t.w,l=t.h;if(o=o||6378137,"degree"===(n=n||"degrees").toLowerCase()||"degrees"===n.toLowerCase()||"dd"===n.toLowerCase()){var c=a/u,f=s/l;i=254/(c>f?c:f)/r/(2*Math.PI*o/360)/1e4}else{i=254/(a/u)/r/1e4}return i}},toJSON:function(e){var t=e;if(null==t)return null;switch(t.constructor){case String:return t=(t=(t=(t=(t=(t=(t='"'+t.replace(/(["\\])/g,"\\$1")+'"').replace(/\n/g,"\\n")).replace(/\r/g,"\\r")).replace("<","&lt;")).replace(">","&gt;")).replace(/%/g,"%25")).replace(/&/g,"%26");case Array:for(var r="",n=0,o=t.length;n<o;n++)r+=M.toJSON(t[n]),n!==t.length-1&&(r+=",");return"["+r+"]";case Number:return isFinite(t)?String(t):null;case Boolean:return String(t);case Date:return"{'__type':\"System.DateTime\",'Year':"+t.getFullYear()+",'Month':"+(t.getMonth()+1)+",'Day':"+t.getDate()+",'Hour':"+t.getHours()+",'Minute':"+t.getMinutes()+",'Second':"+t.getSeconds()+",'Millisecond':"+t.getMilliseconds()+",'TimezoneOffset':"+t.getTimezoneOffset()+"}";default:if(null!=t.toJSON&&"function"==typeof t.toJSON)return t.toJSON();if("object"===S(t)){if(t.length){for(var i=[],a=0,s=t.length;a<s;a++)i.push(M.toJSON(t[a]));return"["+i.join(",")+"]"}var u=[];for(var l in t)"function"!=typeof t[l]&&"CLASS_NAME"!==l&&"parent"!==l&&u.push("'"+l+"':"+M.toJSON(t[l]));return u.length>0?"{"+u.join(",")+"}":"{}"}return t.toString()}},getResolutionFromScaleDpi:function(e,t,r,n){return n=n||6378137,r=r||"",e>0&&t>0?(e=M.normalizeScale(e),"degree"===r.toLowerCase()||"degrees"===r.toLowerCase()||"dd"===r.toLowerCase()?254/t/e/(2*Math.PI*n/360)/1e4:254/t/e/1e4):-1},getScaleFromResolutionDpi:function(e,t,r,n){return n=n||6378137,r=r||"",e>0&&t>0?"degree"===r.toLowerCase()||"degrees"===r.toLowerCase()||"dd"===r.toLowerCase()?254/t/e/(2*Math.PI*n/360)/1e4:254/t/e/1e4:-1},transformResult:function(e){return e.responseText&&"string"==typeof e.responseText&&(e=JSON.parse(e.responseText)),e},copyAttributes:function(e,t){if(e=e||{},t)for(var r in t){var n=t[r];void 0!==n&&"CLASS_NAME"!==r&&"function"!=typeof n&&(e[r]=n)}return e},copyAttributesWithClip:function(e,t,r){if(e=e||{},t)for(var n in t){var o=!1;if(r&&r.length)for(var i=0,a=r.length;i<a;i++)if(n===r[i]){o=!0;break}if(!0!==o){var s=t[n];void 0!==s&&"CLASS_NAME"!==n&&"function"!=typeof s&&(e[n]=s)}}return e},cloneObject:function(e){if(null===e||"object"!==S(e))return e;if(e instanceof Date){var t=new Date;return t.setTime(e.getTime()),t}if(e instanceof Array)return e.slice(0);if(e instanceof Object){var r={};for(var n in e)e.hasOwnProperty(n)&&(r[n]=M.cloneObject(e[n]));return r}throw new Error("Unable to copy obj! Its type isn't supported.")},lineIntersection:function(e,t,r,n){var o,i,a=null,s=(n.x-r.x)*(e.y-r.y)-(n.y-r.y)*(e.x-r.x),u=(t.x-e.x)*(e.y-r.y)-(t.y-e.y)*(e.x-r.x),l=(n.y-r.y)*(t.x-e.x)-(n.x-r.x)*(t.y-e.y);if(0!=l)i=u/l,a=(o=s/l)>=0&&i<=1&&o<=1&&i>=0?new b.Point(e.x+o*(t.x-e.x),e.y+o*(t.y-e.y)):"No Intersection";else if(0==s&&0==u){var c=Math.max(e.y,t.y),f=Math.min(e.y,t.y),p=Math.max(e.x,t.x),h=Math.min(e.x,t.x);a=(r.y>=f&&r.y<=c||n.y>=f&&n.y<=c)&&r.x>=h&&r.x<=p||n.x>=h&&n.x<=p?"Coincident":"Parallel"}else a="Parallel";return a},getTextBounds:function(e,t,r){document.body.appendChild(r),r.style.width="auto",r.style.height="auto",e.fontSize&&(r.style.fontSize=e.fontSize),e.fontFamily&&(r.style.fontFamily=e.fontFamily),e.fontWeight&&(r.style.fontWeight=e.fontWeight),r.style.position="relative",r.style.visibility="hidden",r.style.display="inline-block",r.innerHTML=t;var n=r.clientWidth,o=r.clientHeight;return document.body.removeChild(r),{textWidth:n,textHeight:o}},convertPath:function(e,t){return t?e.replace(/\{([\w-\.]+)\}/g,function(e,r){var n;return n=t.hasOwnProperty(r)?function(e){if(void 0==e||null==e)return"";if(e instanceof Date)return e.toJSON();if(function(e){if("string"!=typeof e&&"object"!==S(e))return!1;try{var t=e.toString();return"[object Object]"===t||"[object Array]"===t}catch(e){return!1}}(e))return JSON.stringify(e);return e.toString()}(t[r]):e,encodeURIComponent(n)}):e},hexToRgba:function(e,t){var r=[],n=[];if(3==(e=e.replace(/#/,"")).length){for(var o=[],i=0;i<3;i++)o.push(e.charAt(i)+e.charAt(i));e=o.join("")}for(var a=0;a<6;a+=2)r[a]="0x"+e.substr(a,2),n.push(parseInt(Number(r[a])));return n.push(t),"rgba("+n.join(",")+")"},isAbsoluteURL:function(e){try{return!!new URL(e)}catch(e){return!1}},relative2absolute:function(e,t){var r=new URL(e,t);if(r&&r.href)return decodeURIComponent(r.href)}},B={inches:1,ft:12,mi:63360,m:39.3701,km:39370.1,dd:4374754,yd:36};B.in=B.inches,B.degrees=B.dd,B.nmi=1852*B.m;var N=.0254000508001016;M.extend(B,{Inch:B.inches,Meter:39.37,Foot:12,IFoot:11.999976,ClarkeFoot:11.999868327581488,SearsFoot:11.999955194477684,GoldCoastFoot:11.999964589846002,IInch:.9999979999999999,MicroInch:999998e-9,Mil:9.99998e-7,Centimeter:.3937,Kilometer:39370,Yard:36,SearsYard:35.99986558343306,IndianYard:35.99987015540864,IndianYd37:35.999740205100004,IndianYd62:35.999880755999996,IndianYd75:35.999868945,IndianFoot:11.9999567087,IndianFt37:11.9999134017,IndianFt62:11.999960252000001,IndianFt75:11.999956315,Mile:63360,IYard:35.999928,IMile:63359.87328,NautM:72913.24,"Lat-66":4367838.370169282,"Lat-83":4367954.152606599,Decimeter:3.9370000000000003,Millimeter:.03937,Dekameter:393.7,Decameter:393.7,Hectometer:3937,GermanMeter:39.370535294205006,CaGrid:39.359685060000004,ClarkeChain:791.991309620512,GunterChain:792.0000000000001,BenoitChain:791.9977268035781,SearsChain:791.9970428354235,ClarkeLink:7.91991309620512,GunterLink:7.920000000000001,BenoitLink:7.919977268035781,SearsLink:7.919970428354236,Rod:198.00000000000014,IntnlChain:791.998416,IntnlLink:7.91998416,Perch:198.00000000000014,Pole:198.00000000000014,Furlong:7919.999999999997,Rood:148.75036777426,CapeFoot:11.999868185255002,Brealey:14763.75,ModAmFt:12.000458400000001,Fathom:71.999856,"NautM-UK":72959.85408,"50kilometers":1968500,"150kilometers":5905500}),M.extend(B,{mm:B.Meter/1e3,cm:B.Meter/100,dm:100*B.Meter,km:1e3*B.Meter,kmi:B.nmi,fath:B.Fathom,ch:B.IntnlChain,link:B.IntnlLink,"us-in":B.inches,"us-ft":B.Foot,"us-yd":B.Yard,"us-ch":B.GunterChain,"us-mi":B.Mile,"ind-yd":B.IndianYd37,"ind-ft":B.IndianFt37,"ind-ch":791.9942845122}),B.degree=B.dd,B.meter=B.m,B.foot=B.ft,B.inch=B.inches,B.mile=B.mi,B.kilometer=B.km,B.yard=B.yd;var R,L,D,F=window.fetch,Q={limitLength:1500,queryKeys:[],queryValues:[],supermap_callbacks:{},addQueryStrings:function(e){for(var t in e){this.queryKeys.push(t),"string"!=typeof e[t]&&(e[t]=M.toJSON(e[t]));var r=encodeURIComponent(e[t]);this.queryValues.push(r)}},issue:function(e){for(var t=this,r=t.getUid(),n=e.url,o=[],i=n,a=0,s=t.queryKeys?t.queryKeys.length:0,u=0;u<s;u++)if(i.length+t.queryKeys[u].length+2>=t.limitLength){if(0==a)return!1;o.push(i),i=n,a=0,u--}else if(i.length+t.queryKeys[u].length+2+t.queryValues[u].length>t.limitLength)for(var l=t.queryValues[u];l.length>0;){var c=t.limitLength-i.length-t.queryKeys[u].length-2;i.indexOf("?")>-1?i+="&":i+="?";var f=l.substring(0,c);"%"===f.substring(c-1,c)?(c-=1,f=l.substring(0,c)):"%"===f.substring(c-2,c-1)&&(c-=2,f=l.substring(0,c)),i+=t.queryKeys[u]+"="+f,l=l.substring(c),f.length>0&&(o.push(i),i=n,a=0)}else a++,i.indexOf("?")>-1?i+="&":i+="?",i+=t.queryKeys[u]+"="+t.queryValues[u];return o.push(i),t.send(o,"SuperMapJSONPCallbacks_"+r,e&&e.proxy)},getUid:function(){return 1e3*(new Date).getTime()+Math.floor(1e17*Math.random())},send:function(e,t,r){var n=e.length;if(n>0)return new Promise(function(o){for(var i=(new Date).getTime(),a=0;a<n;a++){var u=e[a];u.indexOf("?")>-1?u+="&":u+="?",u+="sectionCount="+n,u+="&sectionIndex="+a,u+="&jsonpUserID="+i,r&&(u=decodeURIComponent(u),u=r+encodeURIComponent(u)),s()(u,{jsonpCallbackFunction:t,timeout:3e4}).then(function(e){o(e.json())})}})},GET:function(e){return this.queryKeys.length=0,this.queryValues.length=0,this.addQueryStrings(e.params),this.issue(e)},POST:function(e){return this.queryKeys.length=0,this.queryValues.length=0,this.addQueryStrings({requestEntity:e.data}),this.issue(e)},PUT:function(e){return this.queryKeys.length=0,this.queryValues.length=0,this.addQueryStrings({requestEntity:e.data}),this.issue(e)},DELETE:function(e){return this.queryKeys.length=0,this.queryValues.length=0,this.addQueryStrings({requestEntity:e.data}),this.issue(e)}},G=function(){return void 0!=R?R:window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest},U=function(){return L||45e3},z={commit:function(e,t,r,n){switch(e=e?e.toUpperCase():e){case"GET":return this.get(t,r,n);case"POST":return this.post(t,r,n);case"PUT":return this.put(t,r,n);case"DELETE":return this.delete(t,r,n);default:return this.get(t,r,n)}},supportDirectRequest:function(e,t){return!!M.isInTheSameDomain(e)||(void 0!=t.crossOrigin?t.crossOrigin:G()||t.proxy)},get:function(e,t,r){r=r||{};if(e=M.urlAppend(e,this._getParameterString(t||{})),e=this._processUrl(e,r),!this.supportDirectRequest(e,r)){var n={url:e=e.replace(".json",".jsonp"),data:t};return Q.GET(n)}return this.urlIsLong(e)?this._postSimulatie("GET",e.substring(0,e.indexOf("?")),t,r):this._fetch(e,t,r,"GET")},delete:function(e,t,r){r=r||{};if(e=M.urlAppend(e,this._getParameterString(t||{})),e=this._processUrl(e,r),!this.supportDirectRequest(e,r)){e=e.replace(".json",".jsonp");var n={url:e+="&_method=DELETE",data:t};return Q.DELETE(n)}return this.urlIsLong(e)?this._postSimulatie("DELETE",e.substring(0,e.indexOf("?")),t,r):this._fetch(e,t,r,"DELETE")},post:function(e,t,r){if(r=r||{},e=this._processUrl(e,r),!this.supportDirectRequest(e,r)){e=e.replace(".json",".jsonp");var n={url:M.urlAppend(e,"_method=POST"),data:t};return Q.POST(n)}return this._fetch(e,t,r,"POST")},put:function(e,t,r){if(r=r||{},e=this._processUrl(e,r),!this.supportDirectRequest(e,r)){e=e.replace(".json",".jsonp");var n={url:e+="&_method=PUT",data:t};return Q.PUT(n)}return this._fetch(e,t,r,"PUT")},urlIsLong:function(e){for(var t=0,r=null,n=0,o=e.length;n<o;n++)(r=e.charCodeAt(n))<127?t++:128<=r&&r<=2047?t+=2:2048<=r&&r<=65535&&(t+=3);return!(t<2e3)},_postSimulatie:function(e,t,r,n){return t+=(t.indexOf("?")>-1?"&":"?")+"_method="+e,"string"!=typeof r&&(r=JSON.stringify(r)),this.post(t,r,n)},_processUrl:function(e,t){if(this._isMVTRequest(e))return e;if(-1===e.indexOf(".json")&&!t.withoutFormatSuffix)if(e.indexOf("?")<0)e+=".json";else{var r=e.split("?");2===r.length&&(e=r[0]+".json?"+r[1])}return t&&t.proxy&&("function"==typeof t.proxy?e=t.proxy(e):(e=decodeURIComponent(e),e=t.proxy+encodeURIComponent(e))),e},_fetch:function(e,t,r,n){(r=r||{}).headers=r.headers||{},r.headers["Content-Type"]||FormData.prototype.isPrototypeOf(t)||(r.headers["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8");var o=D&&D(e);return o&&(r.headers=M.extend(r.headers,o)),r.timeout?this._timeout(r.timeout,F(e,{method:n,headers:r.headers,body:"PUT"===n||"POST"===n?t:void 0,credentials:this._getWithCredentials(r),mode:"cors",timeout:U()}).then(function(e){return e})):F(e,{method:n,body:"PUT"===n||"POST"===n?t:void 0,headers:r.headers,credentials:this._getWithCredentials(r),mode:"cors",timeout:U()}).then(function(e){return e})},_getWithCredentials:function(e){return!0===e.withCredentials?"include":!1===e.withCredentials?"omit":"same-origin"},_fetchJsonp:function(e,t){return t=t||{},s()(e,{method:"GET",timeout:t.timeout}).then(function(e){return e})},_timeout:function(e,t){return new Promise(function(r,n){setTimeout(function(){n(new Error("timeout"))},e),t.then(r,n)})},_getParameterString:function(e){var t=[];for(var r in e){var n,o=e[r];if(null!=o&&"function"!=typeof o)n=Array.isArray(o)||"[object Object]"===o.toString()?encodeURIComponent(JSON.stringify(o)):encodeURIComponent(o),t.push(encodeURIComponent(r)+"="+n)}return t.join("&")},_isMVTRequest:function(e){return e.indexOf(".mvt")>-1||e.indexOf(".pbf")>-1}},H=r(7915);function q(e,t){e&&-1===e.indexOf("BEGIN PUBLIC KEY")&&(e="-----BEGIN PUBLIC KEY-----\n".concat(e,"\n-----END PUBLIC KEY-----"));var r=H.pki.publicKeyFromPem(e),n={md:H.md.sha256.create(),mgf1:{md:H.md.sha1.create()}},o=r.encrypt(t,"RSA-OAEP",n);return!!o&&window.btoa(o)}function V(e,t,r){r=H.util.encodeUtf8(r);var n=H.cipher.createCipher("AES-GCM",e);if(n.start({iv:t,additionalData:"",tagLength:128}),n.update(H.util.createBuffer(r)),n.finish()){var o=n.output,i=n.mode.tag;return window.btoa(o.data+i.data)}return!1}function K(e){for(var t="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r="",n=e;n>0;--n)r+=t[Math.floor(Math.random()*t.length)];return r}function Y(e){"@babel/helpers - typeof";return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function J(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof s?n:s,l=Object.create(u.prototype);return W(l,"_invoke",function(r,n,o){var i,s,u,l=0,c=o||[],f=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,r){return i=t,s=0,u=e,p.n=r,a}};function h(r,n){for(s=r,u=n,t=0;!f&&l&&!o&&t<c.length;t++){var o,i=c[t],h=p.p,y=i[2];r>3?(o=y===n)&&(u=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=r<2&&h<i[1])?(s=0,p.v=n,p.n=i[1]):h<y&&(o=r<3||i[0]>n||n>y)&&(i[4]=r,i[5]=n,p.n=y,s=0))}if(o||r>1)return a;throw f=!0,n}return function(o,c,y){if(l>1)throw TypeError("Generator is already running");for(f&&1===c&&h(c,y),s=c,u=y;(t=s<2?e:u)||!f;){i||(s?s<3?(s>1&&(p.n=-1),h(s,u)):p.n=u:p.v=u);try{if(l=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(f=p.n<0)?u:r.call(n,p))!==a)break}catch(t){i=e,s=1,u=t}finally{l=1}}return{value:t,done:f}}}(r,o,i),!0),l}var a={};function s(){}function u(){}function l(){}t=Object.getPrototypeOf;var c=[][n]?t(t([][n]())):(W(t={},n,function(){return this}),t),f=l.prototype=s.prototype=Object.create(c);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,W(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=l,W(f,"constructor",l),W(l,"constructor",u),u.displayName="GeneratorFunction",W(l,o,"GeneratorFunction"),W(f),W(f,o,"Generator"),W(f,n,function(){return this}),W(f,"toString",function(){return"[object Generator]"}),(J=function(){return{w:i,m:p}})()}function W(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}(W=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){W(e,t,function(e){return this._invoke(t,r,e)})};i("next",0),i("throw",1),i("return",2)}})(e,t,r,n)}function X(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return Z(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Z(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function $(e,t,r,n,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function ee(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){$(i,n,o,a,s,"next",e)}function s(e){$(i,n,o,a,s,"throw",e)}a(void 0)})}}function te(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,re(n.key),n)}}function re(e){var t=function(e,t){if("object"!=Y(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Y(t)?t:t+""}var ne=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.serverUrl=t,this.tunnelUrl=void 0,this.blockedUrlRegex={HEAD:[],POST:[],GET:[],PUT:[],DELETE:[]},this.encryptAESKey=K(16),this.encryptAESIV=K(12)},(t=[{key:"request",value:function(){var e=ee(J().m(function e(t){var r,n,o,i,a,s,u,l,c,f,p;return J().w(function(e){for(;;)switch(e.n){case 0:if(this.serverUrl){e.n=1;break}throw"serverUrl can not be empty.";case 1:return r=Object.assign({baseURL:""},t),e.n=2,this._createTunnel();case 2:if(e.v){e.n=3;break}return e.a(2);case 3:n=X(this.blockedUrlRegex[r.method.toUpperCase()]),e.p=4,n.s();case 5:if((o=n.n()).done){e.n=8;break}if(i=o.value,!new RegExp(i).test(r.baseURL+r.url)){e.n=7;break}if(a={url:r.baseURL+(r.url.startsWith("/")?r.url.substring(1,r.url.length):r.url),method:r.method,timeout:r.timeout,headers:r.headers,body:r.data},r.method="post",r.data=V(this.encryptAESKey,this.encryptAESIV,JSON.stringify(a)),r.data){e.n=6;break}throw"encrypt failed";case 6:return r.url=this.tunnelUrl,e.a(3,8);case 7:e.n=5;break;case 8:e.n=10;break;case 9:e.p=9,p=e.v,n.e(p);case 10:return e.p=10,n.f(),e.f(10);case 11:return e.n=12,z.commit(r.method,r.url,r.data,r.options);case 12:if(s=e.v,r.url!==this.tunnelUrl){e.n=15;break}return e.n=13,s.text();case 13:if(u=e.v,h=this.encryptAESKey,y=this.encryptAESIV,d=u,m=void 0,void 0,void 0,b=void 0,m=window.atob(d),g=m.substring(0,m.length-16),v=m.substring(m.length-16),(b=H.cipher.createDecipher("AES-GCM",H.util.createBuffer(h))).start({iv:H.util.createBuffer(y),additionalData:"",tagLength:128,tag:v}),b.update(H.util.createBuffer(g)),l=!!b.finish()&&H.util.decodeUtf8(b.output.data)){e.n=14;break}return console.debug("è§£å¯è¯·æ±ååºå¤±è´¥"),e.a(2);case 14:return c=JSON.parse(l),f=Object.create({json:function(){return Promise.resolve(c.data)}}),e.a(2,Object.assign(f,c));case 15:return e.a(2,s)}var h,y,d,m,g,v,b},e,this,[[4,9,10,11]])}));return function(t){return e.apply(this,arguments)}}()},{key:"_getRSAPublicKey",value:function(){var e=ee(J().m(function e(){var t,r,n,o,i;return J().w(function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,z.get(w()(this.serverUrl).segment("services/security/tunnel/v1/publickey").toString());case 1:return t=e.v,e.n=2,t.json();case 2:return r=e.v,n={key:this.encryptAESKey,iv:this.encryptAESIV,mode:"GCM",padding:"NoPadding"},o=q(r.publicKey,n.key+n.iv),e.a(2,o);case 3:e.p=3,i=e.v,console.debug("RSAå¬é¥è·åå¤±è´¥ï¼éè¯¯è¯¦æï¼"+i);case 4:return e.a(2)}},e,this,[[0,3]])}));return function(){return e.apply(this,arguments)}}()},{key:"_createTunnel",value:function(){var e=ee(J().m(function e(){var t,r,n,o;return J().w(function(e){for(;;)switch(e.n){case 0:if(this.tunnelUrl){e.n=7;break}return e.p=1,e.n=2,this._getRSAPublicKey();case 2:if(t=e.v){e.n=3;break}throw"fetch RSA publicKey failed";case 3:return e.n=4,z.post(w()(this.serverUrl).segment("services/security/tunnel/v1/tunnels").toString(),t);case 4:return r=e.v,e.n=5,r.json();case 5:n=e.v,Object.assign(this,{tunnelUrl:n.tunnelUrl,blockedUrlRegex:Object.assign({},this.blockedUrlRegex,n.blockedUrlRegex)}),e.n=7;break;case 6:e.p=6,o=e.v,console.debug("å®å¨é§éåå»ºå¤±è´¥ï¼éè¯¯è¯¦æï¼"+o);case 7:return e.a(2,this.tunnelUrl)}},e,this,[[1,6]])}));return function(){return e.apply(this,arguments)}}()}])&&te(e.prototype,t),r&&te(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function oe(e){return ie.apply(this,arguments)}function ie(){return(ie=ee(J().m(function e(t){var r,n,o,i,a,s,u,l,c,f;return J().w(function(e){for(;;)switch(e.n){case 0:if(e.p=0,r=(t&&t.match(/.+(?=(\/restjsr\/v1\/vectortile\/|\/rest\/maps\/|\/rest\/data\/))/)||[])[0]){e.n=1;break}return e.a(2);case 1:return e.n=2,z.get(r);case 2:return n=e.v,e.n=3,n.json();case 3:if(o=e.v,i=(o||[]).find(function(e){return t.includes(e.name)&&e.serviceEncryptInfo})){e.n=4;break}return e.a(2);case 4:return a=r.split("/services/")[0],s=new ne(a),u=i&&"".concat(a,"/services/security/svckeys/").concat(i.serviceEncryptInfo.encrptKeyID,".json"),e.n=5,s.request({method:"get",url:u});case 5:return l=e.v,e.n=6,l.json();case 6:if(c=e.v){e.n=7;break}return e.a(2);case 7:return e.a(2,{serviceKey:c,algorithm:i.serviceEncryptInfo.encrptSpec.algorithm});case 8:e.p=8,f=e.v,console.error(f);case 9:return e.a(2)}},e,null,[[0,8]])}))).apply(this,arguments)}function ae(e){"@babel/helpers - typeof";return(ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function se(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ue(n.key),n)}}function ue(e){var t=function(e,t){if("object"!=ae(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ae(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ae(t)?t:t+""}var le=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type="custom",this.overlay=!0,this.sourceId=t.sourceId,this.interaction=t.interaction||!1,this.query=t.query||!1,this.events=t.events||[]},(t=[{key:"getLayer",value:function(){}},{key:"moveLayer",value:function(){}},{key:"getSource",value:function(){}},{key:"removeSource",value:function(){}},{key:"isSourceLoaded",value:function(){return!0}},{key:"getPaintProperty",value:function(){}},{key:"getLayoutProperty",value:function(){}},{key:"setLayoutProperty",value:function(){}},{key:"getFilter",value:function(){}},{key:"setFilter",value:function(){}},{key:"onAdd",value:function(){}},{key:"onRemove",value:function(){}},{key:"render",value:function(){}},{key:"on",value:function(){}},{key:"once",value:function(){}},{key:"off",value:function(){}},{key:"queryRenderedFeatures",value:function(){}},{key:"querySourceFeatures",value:function(){}}])&&se(e.prototype,t),r&&se(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function ce(e){"@babel/helpers - typeof";return(ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function pe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(r),!0).forEach(function(t){he(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fe(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function he(e,t,r){return(t=ge(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ye(e){return function(e){if(Array.isArray(e))return de(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return de(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?de(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function de(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function me(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ge(n.key),n)}}function ge(e){var t=function(e,t){if("object"!=ce(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ce(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ce(t)?t:t+""}function ve(e,t,r){return t=be(t),function(e,t){if(t&&("object"==ce(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],be(e).constructor):t.apply(e,r))}function be(e){return(be=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ae(e,t){return(Ae=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function we(e){var t=e.Map.prototype;return function(r){function n(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(t=ve(this,n,[e])).overlayLayersManager={},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ae(e,t)}(n,e.Map),o=n,(i=[{key:"addLayer",value:function(e,r){return e.source||"custom"===e.type||"background"===e.type?(t.addLayer.call(this,e,r),e.overlay&&!this.overlayLayersManager[e.id]&&(this.overlayLayersManager[e.id]=e),this):this.overlayLayersManager[e.id]||this.style._layers[e.id]?void this.fire("error",{error:new Error("A layer with this id already exists.")}):(e.onAdd&&e.onAdd(this),this.overlayLayersManager[e.id]=e,this)}},{key:"listLayers",value:function(){var e=[],t=this.style._order||[];for(var r in e.push.apply(e,ye(t)),this.overlayLayersManager){var n=this.overlayLayersManager[r].id;e.includes(n)||e.push(n)}return e}},{key:"getLayer",value:function(e){var t=this.overlayLayersManager[e];return t?t.getLayer?t.getLayer():t:this.style.getLayer(e)}},{key:"moveLayer",value:function(t,r){return this.overlayLayersManager[t]?(this.overlayLayersManager[t].moveLayer?this.overlayLayersManager[t].moveLayer(t,r):this._moveToHandler(t,r,e),this):(this.style._layers[t]&&(this.style.moveLayer(t,r),this._update(!0)),this)}},{key:"removeLayer",value:function(e){if(this.overlayLayersManager[e]){var t=this.overlayLayersManager[e];if(delete this.overlayLayersManager[e],"custom"!==t.type)return t.removeFromMap&&t.removeFromMap(),this}return this.style.removeLayer(e),this._update(!0),this}},{key:"setLayoutProperty",value:function(e,t,r){var n=this.overlayLayersManager[e];return n?(n.setLayoutProperty?(n.setLayoutProperty(t,r),this.style.fire("data",{dataType:"style"})):"visibility"===t&&n.setVisibility&&(n.setVisibility("visible"===r),this.style.fire("data",{dataType:"style"})),this):(this.style.setLayoutProperty(e,t,r),this._update(!0),this)}},{key:"updateTransform",value:function(t,r,n,o,i,a,s){this.transform.units=t;var u=this.mercatorZfromAltitude;e.MercatorCoordinate.fromLngLat=function(t,o){o=o||0;var i=e.LngLat.convert(t);return new e.MercatorCoordinate((i.lng-r)/a,(n-i.lat)/s,u(o,i.lat))},e.MercatorCoordinate.prototype.toLngLat=function(){return new e.LngLat(this.x*a+r,n-this.y*s)},this.customConvertPoint=window.URL.createObjectURL(new Blob(["customConvertPoint = {projectX:function(x){return (x - "+o+") / "+a+" + 0.5},projectY:function(y){y = 0.5 - ((y - "+i+") / "+s+");return y < 0 ? 0 : y > 1 ? 1 : y;},toY:function(y){return (0.5-y)*"+s+"+"+i+";}}"],{type:"text/javascript"}))}},{key:"getPaintProperty",value:function(e,r){var n=this.overlayLayersManager[e];return n?n.getPaintProperty?n.getPaintProperty(r):void 0:t.getPaintProperty.call(this,e,r)}},{key:"getLayoutProperty",value:function(e,r){var n=this.overlayLayersManager[e];return n?n.getLayoutProperty?n.getLayoutProperty(r):void 0:t.getLayoutProperty.call(this,e,r)}},{key:"getFilter",value:function(e,r,n){var o=this.overlayLayersManager[e];return o?o.getFilter?o.getFilter(r,n):void 0:t.getFilter.call(this,e,r,n)}},{key:"setFilter",value:function(e,r,n){var o=this.overlayLayersManager[e];return o?(o.setFilter&&o.setFilter(r,n),this):t.setFilter.call(this,e,r,n)}},{key:"on",value:function(e,t,r){return this._eventsModeHandler({type:e,layerId:t,listener:r,mode:"on"})}},{key:"once",value:function(e,t,r){return this._eventsModeHandler({type:e,layerId:t,listener:r,mode:"once"})}},{key:"off",value:function(e,t,r){return this._eventsModeHandler({type:e,layerId:t,listener:r,mode:"off"})}},{key:"queryRenderedFeatures",value:function(e,r){var n,o=this,i=Object.keys(this.overlayLayersManager);r&&r.layers&&(i=r.layers.filter(function(e){return o.overlayLayersManager[e]}),n=r.layers.filter(function(e){return!o.overlayLayersManager[e]}));var a=e||[[0,0],[this.transform.width,this.transform.height]],s=r||{};delete s.layers;var u=i.reduce(function(e,t){var r=o.overlayLayersManager[t];return r.query&&r.queryRenderedFeatures&&r.queryRenderedFeatures(a,s,function(t){e=e.concat(t)}),e},[]);return t.queryRenderedFeatures.call(this,e,pe(pe({},r),{},{layers:n})).concat(u)}},{key:"querySourceFeatures",value:function(e,r){var n=Object.values(this.overlayLayersManager).find(function(t){return t.sourceId===e&&t instanceof le});return n?n.query?n.querySourceFeatures(r):void 0:t.querySourceFeatures.call(this,e,r)}},{key:"getSource",value:function(e){var r=Object.values(this.overlayLayersManager).find(function(t){return t.sourceId===e&&t instanceof le});return r?r.getSource():t.getSource.call(this,e)}},{key:"removeSource",value:function(e){var r=Object.values(this.overlayLayersManager).find(function(t){return t.sourceId===e&&t instanceof le});return r?r.removeSource():t.removeSource.call(this,e)}},{key:"isSourceLoaded",value:function(e){var r=Object.values(this.overlayLayersManager).find(function(t){return t.sourceId===e&&t instanceof le});return r?r.isSourceLoaded():t.isSourceLoaded.call(this,e)}},{key:"_eventsModeHandler",value:function(e){var r=this,n=e.type,o=e.layerId,i=e.listener,a=e.mode,s=[];i&&(s=s.concat(o)),s.forEach(function(e){var t=r.overlayLayersManager[e]||{};t.interaction&&t[a]&&("all"===t.events||t.events.includes(n))&&t[a](n,i||o)});var u=i&&s.filter(function(e){return!r.overlayLayersManager[e]});if(u&&!u.length)return this;var l=u&&"string"!=typeof o?u:o;return t[a].call(this,n,l,i)}},{key:"_moveToHandler",value:function(t,r){var n,o=document.getElementById(t);r&&((n=document.getElementById(r))||e.Evented.prototype.fire("error",{error:new Error('Layer with id "'.concat(r,'" does not exist on this document.'))})),o&&(n?n.parentNode.insertBefore(o,n):o.parentNode.appendChild(o))}}])&&me(o.prototype,i),a&&me(o,a),Object.defineProperty(o,"prototype",{writable:!1}),o;var o,i,a}()}function Se(e){"@babel/helpers - typeof";return(Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ce(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ee(n.key),n)}}function Ee(e){var t=function(e,t){if("object"!=Se(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Se(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Se(t)?t:t+""}function _e(e,t,r){return t=Ie(t),function(e,t){if(t&&("object"==Se(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],Ie(e).constructor):t.apply(e,r))}function Ie(e){return(Ie=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Oe(e,t){return(Oe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function xe(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof s?n:s,l=Object.create(u.prototype);return Pe(l,"_invoke",function(r,n,o){var i,s,u,l=0,c=o||[],f=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,r){return i=t,s=0,u=e,p.n=r,a}};function h(r,n){for(s=r,u=n,t=0;!f&&l&&!o&&t<c.length;t++){var o,i=c[t],h=p.p,y=i[2];r>3?(o=y===n)&&(u=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=r<2&&h<i[1])?(s=0,p.v=n,p.n=i[1]):h<y&&(o=r<3||i[0]>n||n>y)&&(i[4]=r,i[5]=n,p.n=y,s=0))}if(o||r>1)return a;throw f=!0,n}return function(o,c,y){if(l>1)throw TypeError("Generator is already running");for(f&&1===c&&h(c,y),s=c,u=y;(t=s<2?e:u)||!f;){i||(s?s<3?(s>1&&(p.n=-1),h(s,u)):p.n=u:p.v=u);try{if(l=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(f=p.n<0)?u:r.call(n,p))!==a)break}catch(t){i=e,s=1,u=t}finally{l=1}}return{value:t,done:f}}}(r,o,i),!0),l}var a={};function s(){}function u(){}function l(){}t=Object.getPrototypeOf;var c=[][n]?t(t([][n]())):(Pe(t={},n,function(){return this}),t),f=l.prototype=s.prototype=Object.create(c);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,Pe(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=l,Pe(f,"constructor",l),Pe(l,"constructor",u),u.displayName="GeneratorFunction",Pe(l,o,"GeneratorFunction"),Pe(f),Pe(f,o,"Generator"),Pe(f,n,function(){return this}),Pe(f,"toString",function(){return"[object Generator]"}),(xe=function(){return{w:i,m:p}})()}function Pe(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}(Pe=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){Pe(e,t,function(e){return this._invoke(t,r,e)})};i("next",0),i("throw",1),i("return",2)}})(e,t,r,n)}function ke(e,t,r,n,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}o().VectorTileSource&&void 0===o().VectorTileSource.prototype.beforeLoadBak&&(o().VectorTileSource.prototype.beforeLoadBak=o().VectorTileSource.prototype.beforeLoad,o().VectorTileSource.prototype.beforeLoad=function(){var e,t=(e=xe().m(function e(t,r){var n,o;return xe().w(function(e){for(;;)switch(e.n){case 0:if(n=r&&r.tiles&&r.tiles[0],!i.values.includes(t)||!n){e.n=2;break}return e.n=1,oe(n);case 1:(o=e.v)&&(this.decryptOptions={key:o.serviceKey,algorithm:o.algorithm});case 2:this.beforeLoadBak(t,r);case 3:return e.a(2)}},e,this)}),function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){ke(i,n,o,a,s,"next",e)}function s(e){ke(i,n,o,a,s,"throw",e)}a(void 0)})});return function(e,r){return t.apply(this,arguments)}}()),o().Map.prototype._inherit||(o().Map=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),_e(this,t,[e])}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Oe(e,t)}(t,we(o())),r=t,n&&Ce(r.prototype,n),i&&Ce(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,i}(),o().Map.prototype._inherit=!0);function Te(e){"@babel/helpers - typeof";return(Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function je(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Me(n.key),n)}}function Me(e){var t=function(e,t){if("object"!=Te(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Te(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Te(t)?t:t+""}var Be=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.imageUrl=null,this.link=null,this.width=null,this.height=null,this.alt="SuperMap iClient",this._extend(this,t)},(t=[{key:"onAdd",value:function(e){this._map=e,this._container=document.createElement("div"),this._container.className="mapboxgl-ctrl iclient-logo",this._container.style.marginTop=0,this._container.style.marginBottom=0,this._container.style.marginLeft=0,this._container.style.marginRight=0;var t="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAF4AAAAdCAYAAAAjHtusAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA4ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDozYWZlOGIwMi01MWE3LTRiZjYtYWVkYS05MGQ2ZTQ4YjZiMmUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6ODg0NkFBQUE3RjEzMTFFNzhFRjJFQkY4RjcxQjc1NjIiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6ODg0NkFBQTk3RjEzMTFFNzhFRjJFQkY4RjcxQjc1NjIiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4MWI3NzdhNC1lZmEyLTQ1MzUtOGQzNi03MmRjNDkyODMzN2UiIHN0UmVmOmRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDpjYTYzODVjMi1jNDQ1LTExN2EtYTc0ZC1lM2I5MzJlMGE4Y2QiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5q1HM0AAAF/ElEQVR42tSabYhUVRjHZ7W01C1uaCRW4F3oi9SXCUnwQ9gsGUFvOEtQH1bLu5VS9sbYh5KicjYt29qiGQwVg2xWWKgocob91AvC+CWsoJqB3qHMSdTMpZyeU/+Df07n3pk7997Z6cBv99z7nHvOvf/z/pxJNZvNVI/jCKXmv6EquAmVkxPSlvtp2GItr0/96fFQForChJAWDiVYTkMYMu4XBFcYjLOwWS3sNwmn8NGzZ0h4Flv/zwIdchAnh/slCGmmKUNIBzYPaXOUr0vPuEjD71JAPh7l61embzinhV3V8nnCGmGT8LwlzSL8/yUh4Tfjo9T/CgnCIYNKycA2Qq21AcHU/VHE80Idoo3Qs0W6p0UtUnkZvEMDeVcCyqxEafF7hL8Qf0oYsIj+lfC9cH1CwhchWAGCtZO+AooQOkdC1Km1VtCb63StW73uFSzgKFUkNwBbmZGGmqowhvg8ZNpH9oXChcIcYRdeNomgxLkaH+S1SGubAxyIpFv+Zp+0DYjrAS00j/dem2VGEl6FJ4Qa4quEu8j2hTCJ+GJhe4JjfQMf6JCYPPbysMPxBlp0BUKOogEF9Rg9/heNvNKYfM0KsZUZaYxX4STGrzJa+zbhPeFH2DcK10KItcI+pI0rVElwXl1ULaKnIJhDw0oRQpTQc1zcbwRU8ATy4DR6yMlTzwkqMziEWHvubJ4Nk4ZtHdnqwvwY17xq3Z4FjrG+z2Kdrdf2ZSGD+xlLPh6t1R0jP9fI22ZzKI92yvQl7EbmBxI4S7Y+vIAOL87QZqsc5uNnssxZIcfYjXT9snCR7jjobidp+FkxA2v+Cq1QervMDmp4P7Xs3YZtE9kOC3P/By6JGaETl8ElwueYTNTDq4UDsKnd7YfCNbT239LF1udS72xYJt1UWxNfN4IIP4bWuTpEja01JtMFZFsm/AHbtHBlDE6yasA4moYTrUbvdBTXHqUrAH4uSadbyzF+vbBM2IsNkS3MNa5305JxqfA02T4TnkX8XOH1mPw8ruVejpxbI9hZD2Cz1U7LdrrUvjP/WfZinNZhr6V27hP+FPZh9aLvLxVO4DllX0G2OcKnlO/DCblxaz6uXBtmi+8mBaP3/SP8IuEIiTRoPPQm2TaEmEyXo0JU+F0YiPFD0hhOsiE/vqeEVwyTgF8L51OilcIZ2I4Ll5NttvAJPfukUeB2sk0ZPSbKIUUJpCII7+DasWy08uhNNazT0wGHI7mAtB7KqMKm38HhDdAUibTVKGicbB8YAqrJ9DRsp43JdB4qUof1HQrPE6XTQWu3Ce/inVzjXhXpMiTwUYugNVQ+p80jrUsV5EH0POKeuXO9QjhFq5GryNYvfEMCDhsftYVsB9ETtG0V9ZjfhCURhbcJFpfwVZ9jvhxsLHwTYtp2svlWQw3vXL8UnqHVSIG8l8ex+tHhBXgjddgqHEZ8ufAA2aaEnYgrF/KrPXrEmMUqZ9THLW06xhoBaVueQpkug+ewOUphE3Qv2Q5gGamXYa+QbVq4O+DQ5FHyZqrjxNt7UHh9uuRa0F7HjCF8o9PCTOGnscM7g2u1Hl9C9oeEnxC/1ajZg8JLiM9Hj9GHJseMShwL2DO0G5yEWn3Zh1QUods5CPkIoqlwAZxhXMsb6HrcEPBxchhdJ6wj29vCW4hfLOzo8J3rltYX50nXQAATSf/K4DEaGlTLvplsk/QCpoD60EQ7gLYZc8H9wq+I3yncEOEcNhuz6HWf3XEiwU/4Y8YEqVp2P10rt+8REvBGw026i4aDcbL9jF8r8Blmf4fCOzhViiscskygXRdehf3CO4hfigmTBXyQrl8TFtD1IzQX3CbcQrY3hPcRv4z8OmHPXwchVNln2MmE7BX6VwIFi/he6uxvb6JM3m0fdqvx/ATidxg2JeC7VDErAw5NzGfvwRJVheEIQ8Mg/pdwIM+UOmi9Q8ivCsrIy0tF+wVbEcLrd3Pb2XisEb4Tdlhsi4WP4RBbaLGrHfC3PrvMIezy9rTpGm5lz9LOMG15xvFxD/j5gjzjjDbMOzk+9zzt3v5bgAEAibzFeFHVgYkAAAAASUVORK5CYII=";this.imageUrl&&(t=this.imageUrl);var r=this.alt,n="94px",o="29px",i="width:"+n+";height:"+o+";";this.imageUrl&&(i="width:"+(n=this.width)+";height:"+(o=this.height)+";",n&&o||(i=""));var a=this.link,s="<img src="+t+" alt='"+r+"' style='"+i+"margin-bottom: 2px'>";return this._container.innerHTML=a?"<a href='"+a+"' target='_blank'>"+s+"</a>":s,this._createStyleSheet(),this._container}},{key:"_createStyleSheet",value:function(){var e=document.createElement("style");e.type="text/css",e.innerHTML=".iclient-logo{margin:0 !important;}.iclient-logo a{border: none;display: block;height:31px;}.iclient-logo img{border: none;white-space: nowrap}",document.getElementsByTagName("head")[0].appendChild(e)}},{key:"_extend",value:function(e){for(var t=0;t<Object.getOwnPropertyNames(arguments).length;t++){var r=Object.getOwnPropertyNames(arguments)[t];if("caller"!=r&&"callee"!=r&&"length"!=r&&"arguments"!=r){var n=arguments[r];if(n)for(var o=0;o<Object.getOwnPropertyNames(n).length;o++){var i=Object.getOwnPropertyNames(n)[o];"caller"!=r&&"callee"!=r&&"length"!=r&&"arguments"!=r&&(e[i]=n[i])}}}return e}}])&&je(e.prototype,t),r&&je(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function Ne(e){"@babel/helpers - typeof";return(Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Re(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Le(n.key),n)}}function Le(e){var t=function(e,t){if("object"!=Ne(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Ne(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ne(t)?t:t+""}var De=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.w=t?parseFloat(t):0,this.h=t?parseFloat(r):0,this.CLASS_NAME="SuperMap.Size"}return t=e,(r=[{key:"toString",value:function(){return"w="+this.w+",h="+this.h}},{key:"clone",value:function(){return new e(this.w,this.h)}},{key:"equals",value:function(e){var t=!1;return null!=e&&(t=this.w===e.w&&this.h===e.h||isNaN(this.w)&&isNaN(this.h)&&isNaN(e.w)&&isNaN(e.h)),t}},{key:"destroy",value:function(){this.w=null,this.h=null}}])&&Re(t.prototype,r),n&&Re(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function Fe(e){"@babel/helpers - typeof";return(Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ge(n.key),n)}}function Ge(e){var t=function(e,t){if("object"!=Fe(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Fe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Fe(t)?t:t+""}var Ue=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x=t?parseFloat(t):0,this.y=r?parseFloat(r):0,this.mode=n,this.CLASS_NAME="SuperMap.Pixel"}return t=e,(r=[{key:"toString",value:function(){return"x="+this.x+",y="+this.y}},{key:"clone",value:function(){return new e(this.x,this.y,this.mode)}},{key:"equals",value:function(e){var t=!1;return null!=e&&(t=this.x==e.x&&this.y==e.y||isNaN(this.x)&&isNaN(this.y)&&isNaN(e.x)&&isNaN(e.y)),t}},{key:"distanceTo",value:function(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))}},{key:"add",value:function(t,r){if(null==t||null==r)throw new TypeError("Pixel.add cannot receive null values");return new e(this.x+t,this.y+r)}},{key:"offset",value:function(e){var t=this.clone();return e&&(t=this.add(e.x,e.y)),t}},{key:"destroy",value:function(){this.x=null,this.y=null,this.mode=null}}])&&Qe(t.prototype,r),n&&Qe(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function ze(e){"@babel/helpers - typeof";return(ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function He(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,qe(n.key),n)}}function qe(e){var t=function(e,t){if("object"!=ze(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ze(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ze(t)?t:t+""}Ue.Mode={LeftTop:"lefttop",RightTop:"righttop",RightBottom:"rightbottom",LeftBottom:"leftbottom"};var Ve=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),M.isArray(t)&&(r=t[1],t=t[0]),this.lon=t?M.toFloat(t):0,this.lat=r?M.toFloat(r):0,this.CLASS_NAME="SuperMap.LonLat"}return t=e,n=[{key:"fromString",value:function(t){var r=t.split(",");return new e(r[0],r[1])}},{key:"fromArray",value:function(t){var r=M.isArray(t);return new e(r&&t[0],r&&t[1])}}],(r=[{key:"toString",value:function(){return"lon="+this.lon+",lat="+this.lat}},{key:"toShortString",value:function(){return this.lon+","+this.lat}},{key:"clone",value:function(){return new e(this.lon,this.lat)}},{key:"add",value:function(t,r){if(null==t||null==r)throw new TypeError("LonLat.add cannot receive null values");return new e(this.lon+M.toFloat(t),this.lat+M.toFloat(r))}},{key:"equals",value:function(e){var t=!1;return null!=e&&(t=this.lon===e.lon&&this.lat===e.lat||isNaN(this.lon)&&isNaN(this.lat)&&isNaN(e.lon)&&isNaN(e.lat)),t}},{key:"wrapDateLine",value:function(e){var t=this.clone();if(e){for(;t.lon<e.left;)t.lon+=e.getWidth();for(;t.lon>e.right;)t.lon-=e.getWidth()}return t}},{key:"destroy",value:function(){this.lon=null,this.lat=null}}])&&He(t.prototype,r),n&&He(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function Ke(e){"@babel/helpers - typeof";return(Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ye(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Je(n.key),n)}}function Je(e){var t=function(e,t){if("object"!=Ke(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Ke(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ke(t)?t:t+""}var We=function(){function e(t,r,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),M.isArray(t)&&(o=t[3],n=t[2],r=t[1],t=t[0]),this.left=null!=t?M.toFloat(t):this.left,this.bottom=null!=r?M.toFloat(r):this.bottom,this.right=null!=n?M.toFloat(n):this.right,this.top=null!=o?M.toFloat(o):this.top,this.centerLonLat=null,this.CLASS_NAME="SuperMap.Bounds"}return t=e,n=[{key:"fromString",value:function(t,r){var n=t.split(",");return e.fromArray(n,r)}},{key:"fromArray",value:function(t,r){return!0===r?new e(t[1],t[0],t[3],t[2]):new e(t[0],t[1],t[2],t[3])}},{key:"fromSize",value:function(t){return new e(0,t.h,t.w,0)}},{key:"oppositeQuadrant",value:function(e){var t="";return t+="t"===e.charAt(0)?"b":"t",t+="l"===e.charAt(1)?"r":"l"}}],(r=[{key:"clone",value:function(){return new e(this.left,this.bottom,this.right,this.top)}},{key:"equals",value:function(e){var t=!1;return null!=e&&(t=this.left===e.left&&this.right===e.right&&this.top===e.top&&this.bottom===e.bottom),t}},{key:"toString",value:function(){return[this.left,this.bottom,this.right,this.top].join(",")}},{key:"toArray",value:function(e){return!0===e?[this.bottom,this.left,this.top,this.right]:[this.left,this.bottom,this.right,this.top]}},{key:"toBBOX",value:function(e,t){null==e&&(e=6);var r=Math.pow(10,e),n=Math.round(this.left*r)/r,o=Math.round(this.bottom*r)/r,i=Math.round(this.right*r)/r,a=Math.round(this.top*r)/r;return!0===t?o+","+n+","+a+","+i:n+","+o+","+i+","+a}},{key:"getWidth",value:function(){return this.right-this.left}},{key:"getHeight",value:function(){return this.top-this.bottom}},{key:"getSize",value:function(){return new De(this.getWidth(),this.getHeight())}},{key:"getCenterPixel",value:function(){return new Ue((this.left+this.right)/2,(this.bottom+this.top)/2)}},{key:"getCenterLonLat",value:function(){return this.centerLonLat||(this.centerLonLat=new Ve((this.left+this.right)/2,(this.bottom+this.top)/2)),this.centerLonLat}},{key:"scale",value:function(t,r){var n,o;return t=t||1,null==r&&(r=this.getCenterLonLat()),"SuperMap.LonLat"===r.CLASS_NAME?(n=r.lon,o=r.lat):(n=r.x,o=r.y),new e((this.left-n)*t+n,(this.bottom-o)*t+o,(this.right-n)*t+n,(this.top-o)*t+o)}},{key:"add",value:function(t,r){if(null==t||null==r)throw new TypeError("Bounds.add cannot receive null values");return new e(this.left+t,this.bottom+r,this.right+t,this.top+r)}},{key:"extend",value:function(t){var r=null;if(t){switch(t.CLASS_NAME){case"SuperMap.LonLat":r=new e(t.lon,t.lat,t.lon,t.lat);break;case"SuperMap.Geometry.Point":r=new e(t.x,t.y,t.x,t.y);break;case"SuperMap.Bounds":r=t}r&&(this.centerLonLat=null,(null==this.left||r.left<this.left)&&(this.left=r.left),(null==this.bottom||r.bottom<this.bottom)&&(this.bottom=r.bottom),(null==this.right||r.right>this.right)&&(this.right=r.right),(null==this.top||r.top>this.top)&&(this.top=r.top))}}},{key:"containsLonLat",value:function(e,t){"boolean"==typeof t&&(t={inclusive:t}),t=t||{};var r=this.contains(e.lon,e.lat,t.inclusive),n=t.worldBounds;if(n&&!r){var o=n.getWidth(),i=(n.left+n.right)/2,a=Math.round((e.lon-i)/o);r=this.containsLonLat({lon:e.lon-a*o,lat:e.lat},{inclusive:t.inclusive})}return r}},{key:"containsPixel",value:function(e,t){return this.contains(e.x,e.y,t)}},{key:"contains",value:function(e,t,r){if(null==r&&(r=!0),null==e||null==t)return!1;var n=!1;return n=r?e>=this.left&&e<=this.right&&t>=this.bottom&&t<=this.top:e>this.left&&e<this.right&&t>this.bottom&&t<this.top,n}},{key:"intersectsBounds",value:function(e,t){if("boolean"==typeof t&&(t={inclusive:t}),(t=t||{}).worldBounds){var r=this.wrapDateLine(t.worldBounds);e=e.wrapDateLine(t.worldBounds)}else r=this;null==t.inclusive&&(t.inclusive=!0);var n=!1,o=r.left===e.right||r.right===e.left||r.top===e.bottom||r.bottom===e.top;if(t.inclusive||!o){var i=e.bottom>=r.bottom&&e.bottom<=r.top||r.bottom>=e.bottom&&r.bottom<=e.top,a=e.top>=r.bottom&&e.top<=r.top||r.top>e.bottom&&r.top<e.top,s=e.left>=r.left&&e.left<=r.right||r.left>=e.left&&r.left<=e.right,u=e.right>=r.left&&e.right<=r.right||r.right>=e.left&&r.right<=e.right;n=(i||a)&&(s||u)}if(t.worldBounds&&!n){var l=t.worldBounds,c=l.getWidth(),f=!l.containsBounds(r),p=!l.containsBounds(e);f&&!p?(e=e.add(-c,0),n=r.intersectsBounds(e,{inclusive:t.inclusive})):p&&!f&&(r=r.add(-c,0),n=e.intersectsBounds(r,{inclusive:t.inclusive}))}return n}},{key:"containsBounds",value:function(e,t,r){null==t&&(t=!1),null==r&&(r=!0);var n=this.contains(e.left,e.bottom,r),o=this.contains(e.right,e.bottom,r),i=this.contains(e.left,e.top,r),a=this.contains(e.right,e.top,r);return t?n||o||i||a:n&&o&&i&&a}},{key:"determineQuadrant",value:function(e){var t="",r=this.getCenterLonLat();return t+=e.lat<r.lat?"b":"t",t+=e.lon<r.lon?"l":"r"}},{key:"wrapDateLine",value:function(e,t){var r=(t=t||{}).leftTolerance||0,n=t.rightTolerance||0,o=this.clone();if(e){for(var i=e.getWidth();o.left<e.left&&o.right-n<=e.left;)o=o.add(i,0);for(;o.left+r>=e.right&&o.right>e.right;)o=o.add(-i,0);var a=o.left+r;a<e.right&&a>e.left&&o.right-n>e.right&&(o=o.add(-i,0))}return o}},{key:"toServerJSONObject",value:function(){return{rightTop:{x:this.right,y:this.top},leftBottom:{x:this.left,y:this.bottom},left:this.left,right:this.right,top:this.top,bottom:this.bottom}}},{key:"destroy",value:function(){this.left=null,this.right=null,this.top=null,this.bottom=null,this.centerLonLat=null}}])&&Ye(t.prototype,r),n&&Ye(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function Xe(e){"@babel/helpers - typeof";return(Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ze(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,$e(n.key),n)}}function $e(e){var t=function(e,t){if("object"!=Xe(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Xe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Xe(t)?t:t+""}function et(e,t,r){return t=rt(t),function(e,t){if(t&&("object"==Xe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],rt(e).constructor):t.apply(e,r))}function tt(){return(tt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=rt(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function rt(e){return(rt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nt(e,t){return(nt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var ot=function(e){function t(e,r,n,o){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=et(this,t,[e,r,n,o])).x=parseFloat(e),i.y=parseFloat(r),i.tag=o||0==o?parseFloat(o):null,i.type=n||"Point",i.CLASS_NAME="SuperMap.Geometry.Point",i.geometryType="Point",i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nt(e,t)}(t,b),r=t,(n=[{key:"clone",value:function(e){return null==e&&(e=new t(this.x,this.y)),M.applyDefaults(e,this),e}},{key:"calculateBounds",value:function(){this.bounds=new We(this.x,this.y,this.x,this.y)}},{key:"equals",value:function(e){var t=!1;return null!=e&&(t=this.x===e.x&&this.y===e.y||isNaN(this.x)&&isNaN(this.y)&&isNaN(e.x)&&isNaN(e.y)),t}},{key:"move",value:function(e,t){this.x=this.x+e,this.y=this.y+t,this.clearBounds()}},{key:"toShortString",value:function(){return this.x+", "+this.y}},{key:"destroy",value:function(){var e,r,n,o,i;this.x=null,this.y=null,this.tag=null,(e=t,r="destroy",n=this,i=tt(rt(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"getVertices",value:function(){return[this]}}])&&Ze(r.prototype,n),o&&Ze(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function it(e){"@babel/helpers - typeof";return(it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function at(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,st(n.key),n)}}function st(e){var t=function(e,t){if("object"!=it(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=it(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==it(t)?t:t+""}function ut(e,t,r){return t=ct(t),function(e,t){if(t&&("object"==it(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],ct(e).constructor):t.apply(e,r))}function lt(){return(lt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=ct(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function ct(e){return(ct=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ft(e,t){return(ft=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var pt=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=ut(this,t)).components=[],r.componentTypes=null,null!=e&&r.addComponents(e),r.CLASS_NAME="SuperMap.Geometry.Collection",r.geometryType="Collection",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ft(e,t)}(t,b),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;this.components.length=0,this.components=null,(e=t,r="destroy",n=this,i=lt(ct(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"clone",value:function(){for(var e=new t,r=0,n=this.components.length;r<n;r++)e.addComponent(this.components[r].clone());return M.applyDefaults(e,this),e}},{key:"getComponentsString",value:function(){for(var e=[],t=0,r=this.components.length;t<r;t++)e.push(this.components[t].toShortString());return e.join(",")}},{key:"calculateBounds",value:function(){this.bounds=null;var e=new We,t=this.components;if(t)for(var r=0,n=t.length;r<n;r++)e.extend(t[r].getBounds());null!=e.left&&null!=e.bottom&&null!=e.right&&null!=e.top&&this.setBounds(e)}},{key:"addComponents",value:function(e){M.isArray(e)||(e=[e]);for(var t=0,r=e.length;t<r;t++)this.addComponent(e[t])}},{key:"addComponent",value:function(e,t){var r=!1;if(e&&(null==this.componentTypes||M.indexOf(this.componentTypes,e.CLASS_NAME)>-1)){if(null!=t&&t<this.components.length){var n=this.components.slice(0,t),o=this.components.slice(t,this.components.length);n.push(e),this.components=n.concat(o)}else this.components.push(e);e.parent=this,this.clearBounds(),r=!0}return r}},{key:"removeComponents",value:function(e){var t=!1;M.isArray(e)||(e=[e]);for(var r=e.length-1;r>=0;--r)t=this.removeComponent(e[r])||t;return t}},{key:"removeComponent",value:function(e){return M.removeItem(this.components,e),this.clearBounds(),!0}},{key:"getArea",value:function(){for(var e=0,t=0,r=this.components.length;t<r;t++)e+=this.components[t].getArea();return e}},{key:"equals",value:function(e){var t=!0;if(e&&e.CLASS_NAME&&this.CLASS_NAME===e.CLASS_NAME)if(M.isArray(e.components)&&e.components.length===this.components.length){for(var r=0,n=this.components.length;r<n;++r)if(!this.components[r].equals(e.components[r])){t=!1;break}}else t=!1;else t=!1;return t}},{key:"getVertices",value:function(e){for(var t=[],r=0,n=this.components.length;r<n;++r)Array.prototype.push.apply(t,this.components[r].getVertices(e));return t}}])&&at(r.prototype,n),o&&at(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function ht(e){"@babel/helpers - typeof";return(ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,dt(n.key),n)}}function dt(e){var t=function(e,t){if("object"!=ht(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ht(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ht(t)?t:t+""}function mt(e,t,r){return t=gt(t),function(e,t){if(t&&("object"==ht(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],gt(e).constructor):t.apply(e,r))}function gt(e){return(gt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vt(e,t){return(vt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var bt=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=mt(this,t,[e])).componentTypes=["SuperMap.Geometry.Point"],r.CLASS_NAME="SuperMap.Geometry.MultiPoint",r.geometryType="MultiPoint",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vt(e,t)}(t,pt),r=t,(n=[{key:"addPoint",value:function(e,t){this.addComponent(e,t)}},{key:"removePoint",value:function(e){this.removeComponent(e)}}])&&yt(r.prototype,n),o&&yt(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function At(e){"@babel/helpers - typeof";return(At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,St(n.key),n)}}function St(e){var t=function(e,t){if("object"!=At(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=At(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==At(t)?t:t+""}function Ct(e,t,r){return t=Et(t),function(e,t){if(t&&("object"==At(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],Et(e).constructor):t.apply(e,r))}function Et(e){return(Et=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _t(e,t){return(_t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var It=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Ct(this,t,[e])).componentTypes=["SuperMap.Geometry.Point","SuperMap.PointWithMeasure"],r.CLASS_NAME="SuperMap.Geometry.Curve",r.geometryType="Curve",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_t(e,t)}(t,bt),r=t,n&&wt(r.prototype,n),o&&wt(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Ot(e){"@babel/helpers - typeof";return(Ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Pt(n.key),n)}}function Pt(e){var t=function(e,t){if("object"!=Ot(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Ot(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ot(t)?t:t+""}function kt(e,t,r){return t=jt(t),function(e,t){if(t&&("object"==Ot(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],jt(e).constructor):t.apply(e,r))}function Tt(){return(Tt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=jt(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function jt(e){return(jt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Mt(e,t){return(Mt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Bt=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=kt(this,t,[e])).CLASS_NAME="SuperMap.Geometry.LineString",r.geometryType="LineString",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Mt(e,t)}(t,It),r=t,n=[{key:"removeComponent",value:function(e){var r,n,o,i,a,s=this.components&&this.components.length>2;return s&&(r=t,n="removeComponent",o=this,i=1,a=Tt(jt(1&i?r.prototype:r),n,o),2&i&&"function"==typeof a?function(e){return a.apply(o,e)}:a).apply(this,arguments),s}},{key:"getSortedSegments",value:function(){for(var e,t,r=this.components.length-1,n=new Array(r),o=0;o<r;++o)e=this.components[o],t=this.components[o+1],e.x<t.x?n[o]={x1:e.x,y1:e.y,x2:t.x,y2:t.y}:n[o]={x1:t.x,y1:t.y,x2:e.x,y2:e.y};return n.sort(function(e,t){return e.x1-t.x1})}},{key:"getVertices",value:function(e){return!0===e?[this.components[0],this.components[this.components.length-1]]:!1===e?this.components.slice(1,this.components.length-1):this.components.slice()}}],o=[{key:"calculateCircle",value:function(e){if(e.length<3)return e;var t={},r=e[0],n=e[1],o=e[2],i=0,a=0,s=!0,u=0,l=0,c=0,f=[],p=(o.y-r.y)/(o.x-r.x),h=o.y-p*o.x;if(o.x!=r.x&&o.y!=r.y&&n.y==p*n.x+h||o.x==r.x&&n.x==r.x||o.y==r.y&&n.y==r.y||o.x==r.x&&o.y==r.y||o.x==n.x&&o.y==n.y||r.x==n.x&&r.y==n.y)f.push(r),f.push(n),f.push(o);else{var y=(n.x*n.x+n.y*n.y-(r.x*r.x+r.y*r.y))*(2*(o.y-r.y))-(o.x*o.x+o.y*o.y-(r.x*r.x+r.y*r.y))*(2*(n.y-r.y)),d=2*(n.x-r.x)*(o.x*o.x+o.y*o.y-(r.x*r.x+r.y*r.y))-2*(o.x-r.x)*(n.x*n.x+n.y*n.y-(r.x*r.x+r.y*r.y)),m=4*((n.x-r.x)*(o.y-r.y)-(o.x-r.x)*(n.y-r.y));t.x=y/m,t.y=d/m;var g=(2*(i=Math.sqrt((r.x-t.x)*(r.x-t.x)+(r.y-t.y)*(r.y-t.y)))*i-((r.x-o.x)*(r.x-o.x)+(r.y-o.y)*(r.y-o.y)))/(2*i*i);g=(g=g>=1?1:g)<=-1?-1:g,c=180*Math.acos(g)/Math.PI,a=(c=o.x==r.x?t.x>r.x&&n.x>r.x||t.x<r.x&&n.x<r.x?360-c:c:t.y>p*t.x+h&&n.y>p*n.x+h||t.y<p*t.x+h&&n.y<p*n.x+h?360-c:c)/72,o.y!=r.y?o.x==r.x?o.y>r.y?n.x<r.x&&(s=!1):n.x>r.x&&(s=!1):o.x<r.x?n.y<p*n.x+h&&(s=!1):n.y>p*n.x+h&&(s=!1):o.x>r.x?n.y>r.y&&(s=!1):n.y<r.y&&(s=!1);var v=(r.y-t.y)/(r.x-t.x),b=v>=0?180*Math.atan(v)/Math.PI:Math.abs(180*Math.atan(v)/Math.PI)+90,A=Math.abs(t.y);r.y==A&&A==o.y&&r.x<o.x&&(b+=180);var w=r.y-t.y;f.push(r);for(var S=1;S<72;S++){u=a*S,l=b,s?w>=0?v>=0?l+=u:l=180-(l-90)+u:l=v>0?l-180+u:90-l+u:w>=0?v>=0?l-=u:l=180-(l-90)-u:l=v>=0?l-180-u:90-l-u,l=l*Math.PI/180;var C=t.x+i*Math.cos(l),E=t.y+i*Math.sin(l);f.push(new ot(C,E))}f.push(o)}return f}},{key:"createLineEPS",value:function(e){var r=[],n=e.length;if(n<2)return e;for(var o=0;o<n;){if("LTypeArc"==e[o].type){var i=t.createLineArc(r,o,n,e);r=i[0],o=i[1]}else r.push(e[o]),o++}return r}},{key:"createLineArc",value:function(e,r,n,o){if(0==r){var i=t.addPointEPS(o,r,n,"LTypeArc");Array.prototype.push.apply(e,i[0]),r=i[1]+1}else if(r==n-1){var a=[o[r-1],o[r]],s=t.calculateCircle(a);Array.prototype.push.apply(e,s),r++}else{var u=t.addPointEPS(o,r,n,"LTypeArc");e.pop(),Array.prototype.push.apply(e,u[0]),r=u[1]+1}return[e,r]}},{key:"addPointEPS",value:function(e,r,n,o){var i,a=[],s=r+1;return 0==r?Array.prototype.push.apply(a,[e[r],e[r+1]]):r==n-1?Array.prototype.push.apply(a,[e[r-1],e[r]]):Array.prototype.push.apply(a,[e[r-1],e[r],e[r+1]]),"LTypeCurve"==o?i=t.calculatePointsFBZN(a):"LTypeArc"==o&&(i=t.calculateCircle(a)),[i,s]}}],n&&xt(r.prototype,n),o&&xt(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Nt(e){"@babel/helpers - typeof";return(Nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Lt(n.key),n)}}function Lt(e){var t=function(e,t){if("object"!=Nt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Nt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Nt(t)?t:t+""}function Dt(e,t,r){return t=Gt(t),function(e,t){if(t&&("object"==Nt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],Gt(e).constructor):t.apply(e,r))}function Ft(e,t,r,n){var o=Qt(Gt(1&n?e.prototype:e),t,r);return 2&n&&"function"==typeof o?function(e){return o.apply(r,e)}:o}function Qt(){return(Qt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=Gt(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function Gt(e){return(Gt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ut(e,t){return(Ut=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var zt=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Dt(this,t,[e])).componentTypes=["SuperMap.Geometry.Point"],r.CLASS_NAME="SuperMap.Geometry.LinearRing",r.geometryType="LinearRing",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ut(e,t)}(t,Bt),r=t,(n=[{key:"addComponents",value:function(e){M.isArray(e)||(e=[e]);var t=e.length;t>1&&e[0].equals(e[e.length-1])&&(t=e.length-1);for(var r=0;r<t;r++)this.addComponent(e[r])}},{key:"addComponent",value:function(e,r){var n=!1;this.components.pop(),null==r&&e.equals(this.components[this.components.length-1])||(n=Ft(t,"addComponent",this,1).apply(this,arguments));var o=this.components[0];return Ft(t,"addComponent",this,1).apply(this,[o]),n}},{key:"removeComponent",value:function(e){var r=this.components&&this.components.length>3;if(r){this.components.pop(),Ft(t,"removeComponent",this,1).apply(this,arguments);var n=this.components[0];Ft(t,"addComponent",this,1).apply(this,[n])}return r}},{key:"getArea",value:function(){var e=0;if(this.components&&this.components.length>2){for(var t=0,r=0,n=this.components.length;r<n-1;r++){var o=this.components[r],i=this.components[r+1];t+=(o.x+i.x)*(i.y-o.y)}e=-t/2}return e}},{key:"getVertices",value:function(e){return!0===e?[]:this.components.slice(0,this.components.length-1)}}])&&Rt(r.prototype,n),o&&Rt(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Ht(e){"@babel/helpers - typeof";return(Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Vt(n.key),n)}}function Vt(e){var t=function(e,t){if("object"!=Ht(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Ht(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ht(t)?t:t+""}function Kt(e,t,r){return t=Yt(t),function(e,t){if(t&&("object"==Ht(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],Yt(e).constructor):t.apply(e,r))}function Yt(e){return(Yt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Jt(e,t){return(Jt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Wt=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Kt(this,t,[e])).componentTypes=["SuperMap.Geometry.LinearRing"],r.CLASS_NAME="SuperMap.Geometry.Polygon",r.geometryType="Polygon",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jt(e,t)}(t,pt),r=t,(n=[{key:"getArea",value:function(){var e=0;if(this.components&&this.components.length>0){e+=Math.abs(this.components[0].getArea());for(var t=1,r=this.components.length;t<r;t++)e-=Math.abs(this.components[t].getArea())}return e}}])&&qt(r.prototype,n),o&&qt(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Xt(e){"@babel/helpers - typeof";return(Xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,$t(n.key),n)}}function $t(e){var t=function(e,t){if("object"!=Xt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Xt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Xt(t)?t:t+""}var er=function(){return e=function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.CLASS_NAME="SuperMap.Feature",this.layer=t,this.id=M.createUniqueID(this.CLASS_NAME+"_"),this.lonlat=r,this.data=null!=n?n:{}},(t=[{key:"destroy",value:function(){this.id=null,this.lonlat=null,this.data=null}}])&&Zt(e.prototype,t),r&&Zt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function tr(e){"@babel/helpers - typeof";return(tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,nr(n.key),n)}}function nr(e){var t=function(e,t){if("object"!=tr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=tr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==tr(t)?t:t+""}function or(e,t,r){return t=ar(t),function(e,t){if(t&&("object"==tr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],ar(e).constructor):t.apply(e,r))}function ir(){return(ir="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=ar(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function ar(e){return(ar=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sr(e,t){return(sr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var ur="Unknown",lr="Insert",cr="Update",fr="Delete",pr=function(e){function t(e,r,n){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=or(this,t,[null,null,r])).fid=null,o.geometry=e||null,o.attributes={},r&&(o.attributes=M.extend(o.attributes,r)),o.bounds=null,o.state=null,o.style=n||null,o.url=null,o.lonlat=null,o.CLASS_NAME="SuperMap.Feature.Vector",t.style={default:{fillColor:"#ee9900",fillOpacity:.4,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"#ee9900",strokeOpacity:1,strokeWidth:1,strokeLinecap:"round",strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"inherit",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},select:{fillColor:"blue",fillOpacity:.4,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"blue",strokeOpacity:1,strokeWidth:2,strokeLinecap:"round",strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"pointer",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},temporary:{fillColor:"#66cccc",fillOpacity:.2,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"#66cccc",strokeOpacity:1,strokeLinecap:"round",strokeWidth:2,strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"default",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},delete:{display:"none"}},o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sr(e,t)}(t,er),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;this.layer&&(this.layer.removeFeatures(this),this.layer=null),this.geometry=null,(e=t,r="destroy",n=this,i=ir(ar(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"clone",value:function(){return new t(this.geometry?this.geometry.clone():null,this.attributes,this.style)}},{key:"toState",value:function(e){if(e===cr)switch(this.state){case ur:case fr:this.state=e}else if(e===lr)switch(this.state){case ur:break;default:this.state=e}else if(e===fr)switch(this.state){case lr:case fr:break;case ur:case cr:this.state=e}else e===ur&&(this.state=e)}}])&&rr(r.prototype,n),o&&rr(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function hr(e){"@babel/helpers - typeof";return(hr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,dr(n.key),n)}}function dr(e){var t=function(e,t){if("object"!=hr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=hr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==hr(t)?t:t+""}var mr=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=null,this.keepData=!1,M.extend(this,t),this.options=t,this.CLASS_NAME="SuperMap.Format"},(t=[{key:"destroy",value:function(){}},{key:"read",value:function(e){}},{key:"write",value:function(e){}}])&&yr(e.prototype,t),r&&yr(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function gr(e){"@babel/helpers - typeof";return(gr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,br(n.key),n)}}function br(e){var t=function(e,t){if("object"!=gr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=gr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==gr(t)?t:t+""}function Ar(e,t,r){return t=wr(t),function(e,t){if(t&&("object"==gr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],wr(e).constructor):t.apply(e,r))}function wr(e){return(wr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Sr(e,t){return(Sr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Cr=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Ar(this,t,[e])).indent="    ",r.space=" ",r.newline="\n",r.level=0,r.pretty=!1,r.nativeJSON=!(!window.JSON||"function"!=typeof JSON.parse||"function"!=typeof JSON.stringify),r.CLASS_NAME="SuperMap.Format.JSON",r.serialize={object:function(e){if(null==e)return"null";if(e.constructor===Date)return this.serialize.date.apply(this,[e]);if(e.constructor===Array)return this.serialize.array.apply(this,[e]);var t,r,n,o=["{"];this.level+=1;var i=!1;for(t in e)e.hasOwnProperty(t)&&(r=this.write.apply(this,[t,this.pretty]),n=this.write.apply(this,[e[t],this.pretty]),null!=r&&null!=n&&(i&&o.push(","),o.push(this.writeNewline(),this.writeIndent(),r,":",this.writeSpace(),n),i=!0));return this.level-=1,o.push(this.writeNewline(),this.writeIndent(),"}"),o.join("")},array:function(e){var t,r=["["];this.level+=1;for(var n=0,o=e.length;n<o;++n)null!=(t=this.write.apply(this,[e[n],this.pretty]))&&(n>0&&r.push(","),r.push(this.writeNewline(),this.writeIndent(),t));return this.level-=1,r.push(this.writeNewline(),this.writeIndent(),"]"),r.join("")},string:function(e){var t={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return/["\\\x00-\x1f]/.test(e)?'"'+e.replace(/([\x00-\x1f\\"])/g,function(e,r){var n=t[r];return n||(n=r.charCodeAt(),"\\u00"+Math.floor(n/16).toString(16)+(n%16).toString(16))})+'"':'"'+e+'"'},number:function(e){return isFinite(e)?String(e):"null"},boolean:function(e){return String(e)},date:function(e){function t(e){return e<10?"0"+e:e}return'"'+e.getFullYear()+"-"+t(e.getMonth()+1)+"-"+t(e.getDate())+"T"+t(e.getHours())+":"+t(e.getMinutes())+":"+t(e.getSeconds())+'"'}},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Sr(e,t)}(t,mr),r=t,(n=[{key:"read",value:function(e,t){var r;if(this.nativeJSON)try{r=JSON.parse(e,t)}catch(t){return{data:e}}return this.keepData&&(this.data=r),r}},{key:"write",value:function(e,t){this.pretty=!!t;var r=null,n=gr(e);if(this.serialize[n])try{r=!this.pretty&&this.nativeJSON?JSON.stringify(e):this.serialize[n].apply(this,[e])}catch(e){}return r}},{key:"writeIndent",value:function(){var e=[];if(this.pretty)for(var t=0;t<this.level;++t)e.push(this.indent);return e.join("")}},{key:"writeNewline",value:function(){return this.pretty?this.newline:""}},{key:"writeSpace",value:function(){return this.pretty?this.space:""}}])&&vr(r.prototype,n),o&&vr(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Er(e){"@babel/helpers - typeof";return(Er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ir(n.key),n)}}function Ir(e){var t=function(e,t){if("object"!=Er(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Er(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Er(t)?t:t+""}function Or(e,t,r){return t=xr(t),function(e,t){if(t&&("object"==Er(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],xr(e).constructor):t.apply(e,r))}function xr(e){return(xr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pr(e,t){return(Pr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var kr=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Or(this,t,[e])).componentTypes=["SuperMap.Geometry.LineString"],r.CLASS_NAME="SuperMap.Geometry.MultiLineString",r.geometryType="MultiLineString",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pr(e,t)}(t,pt),r=t,n&&_r(r.prototype,n),o&&_r(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Tr(e){"@babel/helpers - typeof";return(Tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Mr(n.key),n)}}function Mr(e){var t=function(e,t){if("object"!=Tr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Tr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Tr(t)?t:t+""}function Br(e,t,r){return t=Nr(t),function(e,t){if(t&&("object"==Tr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],Nr(e).constructor):t.apply(e,r))}function Nr(e){return(Nr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rr(e,t){return(Rr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Lr=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Br(this,t,[e])).componentTypes=["SuperMap.Geometry.Polygon"],r.CLASS_NAME="SuperMap.Geometry.MultiPolygon",r.geometryType="MultiPolygon",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Rr(e,t)}(t,pt),r=t,n&&jr(r.prototype,n),o&&jr(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Dr(e){"@babel/helpers - typeof";return(Dr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Qr(n.key),n)}}function Qr(e){var t=function(e,t){if("object"!=Dr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Dr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Dr(t)?t:t+""}var Gr=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.red=t||0==t?t:255,this.green=r||0,this.blue=n||0,this.CLASS_NAME="SuperMap.ServerColor"}return t=e,n=[{key:"fromJson",value:function(t){if(t){var r=new e,n=255;null!==t.red&&(n=Number(t.red)),r.red=n;var o=0;null!==t.green&&(o=Number(t.green)),r.green=o;var i=0;return null!==t.blue&&(i=Number(t.blue)),r.blue=i,r}}}],(r=[{key:"destroy",value:function(){this.red=null,this.green=null,this.blue=null}}])&&Fr(t.prototype,r),n&&Fr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function Ur(e){"@babel/helpers - typeof";return(Ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Hr(n.key),n)}}function Hr(e){var t=function(e,t){if("object"!=Ur(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Ur(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ur(t)?t:t+""}var qr=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.fillBackColor=new Gr(255,255,255),this.fillBackOpaque=!1,this.fillForeColor=new Gr(255,0,0),this.fillGradientMode=null,this.fillGradientAngle=0,this.fillGradientOffsetRatioX=0,this.fillGradientOffsetRatioY=0,this.fillOpaqueRate=100,this.fillSymbolID=0,this.lineColor=new Gr(0,0,0),this.lineSymbolID=0,this.lineWidth=1,this.markerAngle=0,this.markerSize=1,this.markerSymbolID=-1,t&&M.extend(this,t),this.CLASS_NAME="SuperMap.ServerStyle"}return t=e,n=[{key:"fromJson",value:function(t){if(t)return new e({fillBackColor:Gr.fromJson(t.fillBackColor),fillBackOpaque:t.fillBackOpaque,fillForeColor:Gr.fromJson(t.fillForeColor),fillGradientMode:t.fillGradientMode,fillGradientAngle:t.fillGradientAngle,fillGradientOffsetRatioX:t.fillGradientOffsetRatioX,fillGradientOffsetRatioY:t.fillGradientOffsetRatioY,fillOpaqueRate:t.fillOpaqueRate,fillSymbolID:t.fillSymbolID,lineColor:Gr.fromJson(t.lineColor),lineSymbolID:t.lineSymbolID,lineWidth:t.lineWidth,markerAngle:t.markerAngle,markerSize:t.markerSize,markerSymbolID:t.markerSymbolID})}}],(r=[{key:"destroy",value:function(){var e=this;e.fillBackColor&&(e.fillBackColor.destroy(),e.fillBackColor=null),e.fillBackOpaque=null,e.fillForeColor&&(e.fillForeColor.destroy(),e.fillForeColor=null),e.fillGradientMode=null,e.fillGradientAngle=null,e.fillGradientOffsetRatioX=null,e.fillGradientOffsetRatioY=null,e.fillOpaqueRate=null,e.fillSymbolID=null,e.lineColor&&(e.lineColor.destroy(),e.lineColor=null),e.lineSymbolID=null,e.lineWidth=null,e.markerAngle=null,e.markerSize=null,e.markerSymbolID=null}},{key:"toServerJSONObject",value:function(){var e={};return e=M.copyAttributes(e,this)}}])&&zr(t.prototype,r),n&&zr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function Vr(e){"@babel/helpers - typeof";return(Vr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Yr(n.key),n)}}function Yr(e){var t=function(e,t){if("object"!=Vr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Vr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Vr(t)?t:t+""}function Jr(e,t,r){return t=Wr(t),function(e,t){if(t&&("object"==Vr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],Wr(e).constructor):t.apply(e,r))}function Wr(e){return(Wr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xr(e,t){return(Xr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Zr=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Jr(this,t,[e])).measure=null,e&&M.extend(r,e),r.CLASS_NAME="SuperMap.PointWithMeasure",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xr(e,t)}(t,ot),r=t,o=[{key:"fromJson",value:function(e){if(e)return new t({x:e.x,y:e.y,measure:e.measure})}}],(n=[{key:"equals",value:function(e){var t=!1;if(null!=e){var r=this.x===e.x&&this.y===e.y&&this.measure===e.measure,n=isNaN(this.x)&&isNaN(this.y)&&isNaN(this.measure),o=isNaN(e.x)&&isNaN(e.y)&&isNaN(e.measure);t=r||n&&o}return t}},{key:"toJson",value:function(){var e="{";return null!=this.measure&&void 0!=this.measure&&(e+='"measure":'+this.measure+","),e+='"x":'+this.x+",",e+='"y":'+this.y,e+="}"}},{key:"destroy",value:function(){this.measure=null,this.x=null,this.y=null}}])&&Kr(r.prototype,n),o&&Kr(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function $r(e){"@babel/helpers - typeof";return($r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function en(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,tn(n.key),n)}}function tn(e){var t=function(e,t){if("object"!=$r(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=$r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==$r(t)?t:t+""}function rn(e,t,r){return t=nn(t),function(e,t){if(t&&("object"==$r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],nn(e).constructor):t.apply(e,r))}function nn(e){return(nn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function on(e,t){return(on=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var an=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=rn(this,t,[e,r])).id=null,n.center=null,n.style=null,n.length=null,n.maxM=null,n.minM=null,n.parts=null,n.points=null,n.type=null,n.componentTypes=["SuperMap.Geometry.LinearRing","SuperMap.Geometry.LineString"],r&&M.extend(n,r),n.CLASS_NAME="SuperMap.Route",n.geometryType="LINEM",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&on(e,t)}(t,pt),r=t,o=[{key:"fromJson",value:function(e){if(e){var r=e.parts||[],n=e.points||[],o=r.length,i=[];if(!(o>0))return null;for(var a=0,s=0,u=[];a<o;a++){for(var l=0;l<r[a];l++)u.push(Zr.fromJson(n[s+l]));s+=r[a],u[0].equals(u[r[a]-1])?i.push(new zt(u)):i.push(new Bt(u)),u=[]}return new t(i,{id:e.id,center:e.center,style:e.style,length:e.length,maxM:e.maxM,minM:e.minM,type:e.type,parts:e.parts})}}}],(n=[{key:"toJson",value:function(){var e="{";if(null!=this.id&&void 0!=this.id&&(e+='"id":'+this.id+","),null!=this.center&&void 0!=this.center&&(e+='"center":'+this.center+","),null!=this.style&&void 0!=this.style&&(e+='"style":'+this.style+","),null!=this.length&&void 0!=this.length&&(e+='"length":'+this.length+","),null!=this.maxM&&void 0!=this.maxM&&(e+='"maxM":'+this.maxM+","),null!=this.minM&&void 0!=this.minM&&(e+='"minM":'+this.minM+","),null!=this.type&&void 0!=this.type&&(e+='"type":"'+this.type+'",'),null!=this.parts&&void 0!=this.parts){e+='"parts":['+this.parts[0];for(var t=1;t<this.parts.length;t++)e+=","+this.parts[t];e+="],"}if(null!=this.components&&this.components.length>0){e+='"points":[';for(var r=0,n=this.components.length;r<n;r++)for(var o=0,i=this.components[r].components.length;o<i;o++)e+=this.components[r].components[o].toJson()+",";e=e.replace(/,$/g,""),e+="]"}return e=e.replace(/,$/g,""),e+="}"}},{key:"destroy",value:function(){var e=this;e.id=null,e.center=null,e.style=null,e.length=null,e.maxM=null,e.minM=null,e.type=null,e.parts=null,e.components.length=0,e.components=null,e.componentTypes=null}}])&&en(r.prototype,n),o&&en(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(),sn={GEOJSON:"GEOJSON",ISERVER:"ISERVER",FGB:"FGB"},un={ISERVER:"ISERVER",IPORTAL:"IPORTAL",ONLINE:"ONLINE"},ln={LINE:"LINE",LINEM:"LINEM",POINT:"POINT",REGION:"REGION",POINTEPS:"POINTEPS",LINEEPS:"LINEEPS",REGIONEPS:"REGIONEPS",ELLIPSE:"ELLIPSE",CIRCLE:"CIRCLE",TEXT:"TEXT",RECTANGLE:"RECTANGLE",UNKNOWN:"UNKNOWN",GEOCOMPOUND:"GEOCOMPOUND"},cn={ATTRIBUTE:"ATTRIBUTE",ATTRIBUTEANDGEOMETRY:"ATTRIBUTEANDGEOMETRY",GEOMETRY:"GEOMETRY"},fn={CONTAIN:"CONTAIN",CROSS:"CROSS",DISJOINT:"DISJOINT",IDENTITY:"IDENTITY",INTERSECT:"INTERSECT",NONE:"NONE",OVERLAP:"OVERLAP",TOUCH:"TOUCH",WITHIN:"WITHIN"},pn={DISTANCE:"DISTANCE",AREA:"AREA"},hn={METER:"METER",KILOMETER:"KILOMETER",MILE:"MILE",YARD:"YARD",DEGREE:"DEGREE",MILLIMETER:"MILLIMETER",CENTIMETER:"CENTIMETER",INCH:"INCH",DECIMETER:"DECIMETER",FOOT:"FOOT",SECOND:"SECOND",MINUTE:"MINUTE",RADIAN:"RADIAN"},yn={CENTIMETER:"CENTIMETER",DECIMETER:"DECIMETER",FOOT:"FOOT",INCH:"INCH",KILOMETER:"KILOMETER",METER:"METER",MILE:"MILE",MILLIMETER:"MILLIMETER",YARD:"YARD"},dn={CAPTION:"CAPTION",CAPTION_PERCENT:"CAPTION_PERCENT",CAPTION_VALUE:"CAPTION_VALUE",PERCENT:"PERCENT",VALUE:"VALUE"},mn={AREA:"AREA",BAR:"BAR",BAR3D:"BAR3D",LINE:"LINE",PIE:"PIE",PIE3D:"PIE3D",POINT:"POINT",RING:"RING",ROSE:"ROSE",ROSE3D:"ROSE3D",STACK_BAR:"STACK_BAR",STACK_BAR3D:"STACK_BAR3D",STEP:"STEP"},gn={ALL:"ALL",NONE:"NONE",YAXES:"YAXES"},vn={CONSTANT:"CONSTANT",LOGARITHM:"LOGARITHM",SQUAREROOT:"SQUAREROOT"},bn={CUSTOMINTERVAL:"CUSTOMINTERVAL",EQUALINTERVAL:"EQUALINTERVAL",LOGARITHM:"LOGARITHM",QUANTILE:"QUANTILE",SQUAREROOT:"SQUAREROOT",STDDEVIATION:"STDDEVIATION"},An={BLACK_WHITE:"BLACKWHITE",BLUE_BLACK:"BLUEBLACK",BLUE_RED:"BLUERED",BLUE_WHITE:"BLUEWHITE",CYAN_BLACK:"CYANBLACK",CYAN_BLUE:"CYANBLUE",CYAN_GREEN:"CYANGREEN",CYAN_WHITE:"CYANWHITE",GREEN_BLACK:"GREENBLACK",GREEN_BLUE:"GREENBLUE",GREEN_ORANGE_VIOLET:"GREENORANGEVIOLET",GREEN_RED:"GREENRED",GREEN_WHITE:"GREENWHITE",PINK_BLACK:"PINKBLACK",PINK_BLUE:"PINKBLUE",PINK_RED:"PINKRED",PINK_WHITE:"PINKWHITE",RAIN_BOW:"RAINBOW",RED_BLACK:"REDBLACK",RED_WHITE:"REDWHITE",SPECTRUM:"SPECTRUM",TERRAIN:"TERRAIN",YELLOW_BLACK:"YELLOWBLACK",YELLOW_BLUE:"YELLOWBLUE",YELLOW_GREEN:"YELLOWGREEN",YELLOW_RED:"YELLOWRED",YELLOW_WHITE:"YELLOWWHITE"},wn={TOPLEFT:"TOPLEFT",TOPCENTER:"TOPCENTER",TOPRIGHT:"TOPRIGHT",BASELINELEFT:"BASELINELEFT",BASELINECENTER:"BASELINECENTER",BASELINERIGHT:"BASELINERIGHT",BOTTOMLEFT:"BOTTOMLEFT",BOTTOMCENTER:"BOTTOMCENTER",BOTTOMRIGHT:"BOTTOMRIGHT",MIDDLELEFT:"MIDDLELEFT",MIDDLECENTER:"MIDDLECENTER",MIDDLERIGHT:"MIDDLERIGHT"},Sn={NORMAL:"ALONG_LINE_NORMAL",LB_TO_RT:"LEFT_BOTTOM_TO_RIGHT_TOP",LT_TO_RB:"LEFT_TOP_TO_RIGHT_BOTTOM",RB_TO_LT:"RIGHT_BOTTOM_TO_LEFT_TOP",RT_TO_LB:"RIGHT_TOP_TO_LEFT_BOTTOM"},Cn={DIAMOND:"DIAMOND",ELLIPSE:"ELLIPSE",MARKER:"MARKER",NONE:"NONE",RECT:"RECT",ROUNDRECT:"ROUNDRECT",TRIANGLE:"TRIANGLE"},En={NEWLINE:"NEWLINE",NONE:"NONE",OMIT:"OMIT"},_n={FLAT:"FLAT",ROUND:"ROUND"},In={CLIP:"CLIP",ERASE:"ERASE",IDENTITY:"IDENTITY",INTERSECT:"INTERSECT",UNION:"UNION",UPDATE:"UPDATE",XOR:"XOR"},On={INDEXEDHDFS:"INDEXEDHDFS",UDB:"UDB",MONGODB:"MONGODB",PG:"PG"},xn={BSPLINE:"BSPLINE",POLISH:"POLISH"},Pn={ISOLINE:"ISOLINE",ISOREGION:"ISOREGION"},kn={DATASET_AND_RECORDSET:"DATASET_AND_RECORDSET",DATASET_ONLY:"DATASET_ONLY",RECORDSET_ONLY:"RECORDSET_ONLY"},Tn={ADD:"add",UPDATE:"update",DELETE:"delete"},jn={LESS_TIME:"LESS_TIME",LESS_TRANSFER:"LESS_TRANSFER",LESS_WALK:"LESS_WALK",MIN_DISTANCE:"MIN_DISTANCE"},Mn={BUS:"BUS",SUBWAY:"SUBWAY",NO_SUBWAY:"NO_SUBWAY",NONE:"NONE"},Bn={EXPONENTIAL:"EXPONENTIAL",GAUSSIAN:"GAUSSIAN",SPHERICAL:"SPHERICAL"},Nn={EXP1:"EXP1",EXP2:"EXP2"},Rn={IP:"IP",REFERER:"Referer",REQUESTIP:"RequestIP",NONE:"NONE",SERVER:"SERVER",WEB:"WEB"},Ln={CLIP:"clip",INTERSECT:"intersect"},Dn={SQUAREMETER:"SquareMeter",SQUAREKILOMETER:"SquareKiloMeter",HECTARE:"Hectare",ARE:"Are",ACRE:"Acre",SQUAREFOOT:"SquareFoot",SQUAREYARD:"SquareYard",SQUAREMILE:"SquareMile"},Fn={METER:"Meter",KILOMETER:"Kilometer",YARD:"Yard",FOOT:"Foot",MILE:"Mile"},Qn={MAX:"max",MIN:"min",AVERAGE:"average",SUM:"sum",VARIANCE:"variance",STDDEVIATION:"stdDeviation"},Gn={SUMMARYMESH:"SUMMARYMESH",SUMMARYREGION:"SUMMARYREGION"},Un={REGIONNOOVERLAP:"REGIONNOOVERLAP",REGIONNOOVERLAPWITH:"REGIONNOOVERLAPWITH",REGIONCONTAINEDBYREGION:"REGIONCONTAINEDBYREGION",REGIONCOVEREDBYREGION:"REGIONCOVEREDBYREGION",LINENOOVERLAP:"LINENOOVERLAP",LINENOOVERLAPWITH:"LINENOOVERLAPWITH",POINTNOIDENTICAL:"POINTNOIDENTICAL"},zn={GEOHASH_GRID:"geohash_grid"},Hn={AVG:"avg",MAX:"max",MIN:"min",SUM:"sum"},qn={NDVI:"NDVI",HILLSHADE:"HILLSHADE"},Vn={CUSTOM:"CUSTOM",INTERSECTION:"INTERSECTION",UNION:"UNION"},Kn={CUSTOM:"CUSTOM",MAX:"MAX",MIN:"MIN"},Yn={DAY_BRIGHT:"DAY_BRIGHT",DUSK:"DUSK",NIGHT:"NIGHT"},Jn={BASIC:"BASIC",STANDARD:"STANDARD",OTHER:"OTHER"};function Wn(e){"@babel/helpers - typeof";return(Wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Zn(n.key),n)}}function Zn(e){var t=function(e,t){if("object"!=Wn(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Wn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Wn(t)?t:t+""}var $n=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=0,this.style=null,this.parts=null,this.points=null,this.type=null,this.prjCoordSys=null,t&&M.extend(this,t),this.CLASS_NAME="SuperMap.ServerGeometry"}return t=e,n=[{key:"fromJson",value:function(t){if(t)return new e({id:t.id,style:qr.fromJson(t.style),parts:t.parts,partTopo:t.partTopo,points:t.points,center:t.center,length:t.length,maxM:t.maxM,minM:t.minM,type:t.type})}},{key:"fromGeometry",value:function(t){if(t){var r=0,n=[],o=[],i=null,a=t.components,s=t.CLASS_NAME,u={epsgCode:t.SRID};if(isNaN(t.id)||(r=t.id),"SuperMap.Geometry.LinearRing"!=s&&"SuperMap.Geometry.LineString"!=s&&(t instanceof bt||t instanceof kr)){for(var l=a.length,c=0;c<l;c++){var f=a[c].getVertices(),p=f.length;n.push(p);for(var h=0;h<p;h++)o.push(new ot(f[h].x,f[h].y))}i="SuperMap.Geometry.MultiPoint"==s?ln.POINT:ln.LINE}else if(t instanceof Lr){for(var y=a.length,d=0;d<y;d++)for(var m=a[d].components,g=m.length,v=0;v<g;v++){var b=m[v].getVertices(),A=b.length+1;n.push(A);for(var w=0;w<A-1;w++)o.push(new ot(b[w].x,b[w].y));o.push(new ot(b[0].x,b[0].y))}i=ln.REGION}else if(t instanceof Wt){for(var S=a.length,C=0;C<S;C++){var E=a[C].getVertices(),_=E.length+1;n.push(_);for(var I=0;I<_-1;I++)o.push(new ot(E[I].x,E[I].y));o.push(new ot(E[0].x,E[0].y))}i=ln.REGION}else{for(var O=t.getVertices(),x=O.length,P=0;P<x;P++)o.push(new ot(O[P].x,O[P].y));t instanceof zt&&(o.push(new ot(O[0].x,O[0].y)),x++),n.push(x),i=t instanceof ot?ln.POINT:ln.LINE}return new e({id:r,style:null,parts:n,points:o,type:i,prjCoordSys:u})}}},{key:"IsClockWise",value:function(e){var t=e.length;if(t<3)return 0;var r=e[0].y*(e[t-1].x-e[1].x);e.push(e[0]);for(var n=1;n<t;n++)r+=e[n].y*(e[n-1].x-e[n+1].x);return.5*r}},{key:"bubbleSort",value:function(e,t,r,n){for(var o=0;o<e.length;o++)for(var i=0;i<e.length;i++)if(e[o]>e[i]){var a=e[i];e[i]=e[o],e[o]=a;var s=t[i];if(t[i]=t[o],t[o]=s,r&&r.length>0){var u=r[i];r[i]=r[o],r[o]=u}if(n&&n.length>0){var l=n[i];n[i]=n[o],n[o]=l}}}}],(r=[{key:"destroy",value:function(){var e=this;e.id=null,e.style=null,e.parts=null,e.partTopo=null,e.points=null,e.type=null,e.prjCoordSys=null}},{key:"toGeometry",value:function(){var e=this;switch(e.type.toUpperCase()){case ln.POINT:return e.toGeoPoint();case ln.LINE:return e.toGeoLine();case ln.LINEM:return e.toGeoLinem();case ln.REGION:return e.toGeoRegion();case ln.POINTEPS:return e.toGeoPoint();case ln.LINEEPS:return e.toGeoLineEPS();case ln.REGIONEPS:return e.toGeoRegionEPS();case ln.GEOCOMPOUND:return e.transformGeoCompound()}}},{key:"toGeoPoint",value:function(){var e=this.parts||[],t=this.points||[],r=e.length;if(r>0){if(1===r)return new ot(t[0].x,t[0].y);for(var n=[],o=0;o<r;o++)n.push(new ot(t[o].x,t[o].y));return new bt(n)}return null}},{key:"toGeoLine",value:function(){var e=this.parts||[],t=this.points||[],r=e.length;if(r>0){if(1===r){for(var n=[],o=0;o<e[0];o++)n.push(new ot(t[o].x,t[o].y));return n[0].equals(n[e[0]-1])?new zt(n):new Bt(n)}for(var i=[],a=0;a<r;a++){for(var s=[],u=0;u<e[a];u++)s.push(new ot(t[u].x,t[u].y));i.push(new Bt(s)),t.splice(0,e[a])}return new kr(i)}return null}},{key:"toGeoLineEPS",value:function(){var e,t,r,n,o,i=this.parts||[],a=this.points||[],s=i.length;if(s>0){if(1===s){for(e=0,r=[];e<i[0];e++)r.push(new ot(a[e].x,a[e].y,a[e].type));return r[0].equals(r[i[0]-1])?(o=Bt.createLineEPS(r),new zt(o)):(o=Bt.createLineEPS(r),new Bt(o))}for(e=0,n=[];e<s;e++){for(t=0,r=[];t<i[e];t++)r.push(new ot(a[t].x,a[t].y));o=Bt.createLineEPS(r),n.push(new Bt(o)),a.splice(0,i[e])}return new kr(n)}return null}},{key:"toGeoLinem",value:function(){return an.fromJson(this)}},{key:"toGeoRegion",value:function(){var t=this.parts||[],r=this.partTopo||[],n=this.points||[],o=t.length;if(o<=0)return null;var i=[],a=[];if(1==o){for(var s=0;s<n.length;s++)a.push(new ot(n[s].x,n[s].y));return i.push(new Wt([new zt(a)])),new Lr(i)}for(var u=[],l=[],c=[],f=[],p=[],h=0,y=0;h<o;h++){for(var d=0;d<t[h];d++)a.push(new ot(n[y+d].x,n[y+d].y));y+=t[h];var m=new Wt([new zt(a)]);a=[],c.push(m),0===r.length&&f.push(m.getBounds()),p.push(1),l.push(m.getArea())}if(0===r.length){e.bubbleSort(l,c,r,f);for(var g=[],v=1;v<c.length;v++)for(var b=v-1;b>=0;b--)if(g[v]=-1,f[b].containsBounds(f[v])){p[v]=-1*p[b],p[v]<0&&(g[v]=b);break}for(var A=0;A<c.length;A++)p[A]>0?i.push(c[A]):(i[g[A]].components=i[g[A]].components.concat(c[A].components),i.push(""))}else{i=new Array;for(var w=0;w<c.length;w++)if(r[w]&&-1==r[w]?u=u.concat(c[w].components):(u.length>0&&i.length>0&&(i[i.length-1].components=i[i.length-1].components.concat(u),u=[]),i.push(c[w])),w==o-1){var S=i.length;if(S)i[S-1].components=i[S-1].components.concat(u);else for(var C=0,E=u.length;C<E;C++)i.push(new Wt(u))}}return new Lr(i)}},{key:"toGeoRegionEPS",value:function(){var t=this.parts||[],r=this.partTopo||[],n=this.points||[],o=t.length;if(o<=0)return null;var i,a=[],s=[];if(1==o){for(var u=0;u<n.length;u++)s.push(new ot(n[u].x,n[u].y));return i=Bt.createLineEPS(s),a.push(new Wt([new zt(i)])),new Lr(a)}for(var l=[],c=[],f=[],p=[],h=[],y=0,d=0;y<o;y++){for(var m=0;m<t[y];m++)s.push(new ot(n[d+m].x,n[d+m].y));d+=t[y],i=Bt.createLineEPS(s);var g=new Wt([new zt(i)]);s=[],f.push(g),0===r.length&&p.push(g.getBounds()),h.push(1),c.push(g.getArea())}if(0===r.length){e.bubbleSort(c,f,r,p);for(var v=[],b=1;b<f.length;b++)for(var A=b-1;A>=0;A--)if(v[b]=-1,p[A].containsBounds(p[b])){h[b]=-1*h[A],h[b]<0&&(v[b]=A);break}for(var w=0;w<f.length;w++)h[w]>0?a.push(f[w]):(a[v[w]].components=a[v[w]].components.concat(f[w].components),a.push(""))}else{a=new Array;for(var S=0;S<f.length;S++)if(r[S]&&-1==r[S]?l=l.concat(f[S].components):(l.length>0&&a.length>0&&(a[a.length-1].components=a[a.length-1].components.concat(l),l=[]),a.push(f[S])),S==o-1){var C=a.length;if(C)a[C-1].components=a[C-1].components.concat(l);else for(var E=0,_=l.length;E<_;E++)a.push(new Wt(l))}}return new Lr(a)}},{key:"transformGeoCompound",value:function(){var t=this.geoParts||[],r=t.length;if(r<=0)return null;for(var n=[],o=0;o<r;o++){var i=t[o];n.push(new e(i).toGeometry())}return new pt(n)}}])&&Xn(t.prototype,r),n&&Xn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function eo(e){"@babel/helpers - typeof";return(eo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function to(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ro(n.key),n)}}function ro(e){var t=function(e,t){if("object"!=eo(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=eo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==eo(t)?t:t+""}function no(e,t,r){return t=ao(t),function(e,t){if(t&&("object"==eo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],ao(e).constructor):t.apply(e,r))}function oo(e,t,r,n){var o=io(ao(1&n?e.prototype:e),t,r);return 2&n&&"function"==typeof o?function(e){return o.apply(r,e)}:o}function io(){return(io="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=ao(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function ao(e){return(ao=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function so(e,t){return(so=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var uo=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=no(this,t,[e])).ignoreExtraDims=!0,r.CLASS_NAME="SuperMap.Format.GeoJSON",r.parseCoords={point:function(e){if(!1===this.ignoreExtraDims&&2!=e.length)throw"Only 2D points are supported: "+e;return new ot(e[0],e[1])},multipoint:function(e){for(var t=[],r=null,n=0,o=e.length;n<o;++n){try{r=this.parseCoords.point.apply(this,[e[n]])}catch(e){throw e}t.push(r)}return new bt(t)},linestring:function(e){for(var t=[],r=null,n=0,o=e.length;n<o;++n){try{r=this.parseCoords.point.apply(this,[e[n]])}catch(e){throw e}t.push(r)}return new Bt(t)},multilinestring:function(e){for(var t=[],r=null,n=0,o=e.length;n<o;++n){try{r=this.parseCoords.linestring.apply(this,[e[n]])}catch(e){throw e}t.push(r)}return new kr(t)},polygon:function(e){for(var t,r,n=[],o=0,i=e.length;o<i;++o){try{r=this.parseCoords.linestring.apply(this,[e[o]])}catch(e){throw e}t=new zt(r.components),n.push(t)}return new Wt(n)},multipolygon:function(e){for(var t=[],r=null,n=0,o=e.length;n<o;++n){try{r=this.parseCoords.polygon.apply(this,[e[n]])}catch(e){throw e}t.push(r)}return new Lr(t)},box:function(e){if(2!=e.length)throw"GeoJSON box coordinates must have 2 elements";return new Wt([new zt([new ot(e[0][0],e[0][1]),new ot(e[1][0],e[0][1]),new ot(e[1][0],e[1][1]),new ot(e[0][0],e[1][1]),new ot(e[0][0],e[0][1])])])}},r.extract={feature:function(e){var t=this.extract.geometry.apply(this,[e.geometry]),r={type:"Feature",properties:this.createAttributes(e),geometry:t};return e.geometry&&"TEXT"===e.geometry.type&&(r.properties.texts=e.geometry.texts,r.properties.textStyle=e.geometry.textStyle),e.fid&&(r.id=e.fid),e.ID&&(r.id=e.ID),r},geometry:function(e){if(null==e)return null;!e.parts&&e.points&&(e.parts=[e.points.length]);var t,r=e.hasOwnProperty("geometryType")?e:new $n(e).toGeometry()||e,n=r.geometryType||r.type;return"LinearRing"===n&&(n="LineString"),"LINEM"===n&&(n="MultiLineString"),t=this.extract[n.toLowerCase()].apply(this,[r]),"Collection"===(n="TEXT"===n?"Point":n)?{type:"GeometryCollection",geometries:t}:{type:n,coordinates:t}},point:function(e){var t=[e.x,e.y];for(var r in e)"x"===r||"y"===r||null===e[r]||isNaN(e[r])||t.push(e[r]);return t},text:function(e){return[e.points[0].x,e.points[0].y]},multipoint:function(e){for(var t=[],r=0,n=e.components.length;r<n;++r)t.push(this.extract.point.apply(this,[e.components[r]]));return t},linestring:function(e){for(var t=[],r=0,n=e.components.length;r<n;++r)t.push(this.extract.point.apply(this,[e.components[r]]));return t},multilinestring:function(e){for(var t=[],r=0,n=e.components.length;r<n;++r)t.push(this.extract.linestring.apply(this,[e.components[r]]));return t},polygon:function(e){for(var t=[],r=0,n=e.components.length;r<n;++r)t.push(this.extract.linestring.apply(this,[e.components[r]]));return t},multipolygon:function(e){for(var t=[],r=0,n=e.components.length;r<n;++r)t.push(this.extract.polygon.apply(this,[e.components[r]]));return t},collection:function(e){for(var t=e.components.length,r=new Array(t),n=0;n<t;++n)r[n]=this.extract.geometry.apply(this,[e.components[n]]);return r}},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&so(e,t)}(t,Cr),r=t,(n=[{key:"read",value:function(e,r,n){r=r||"FeatureCollection";var o=null,i=null;if(i="string"==typeof e?oo(t,"read",this,3)([e,n]):e){if("string"!=typeof i.type);else if(this.isValidType(i,r))switch(r){case"Geometry":try{o=this.parseGeometry(i)}catch(e){}break;case"Feature":try{(o=this.parseFeature(i)).type="Feature"}catch(e){}break;case"FeatureCollection":switch(o=[],i.type){case"Feature":try{o.push(this.parseFeature(i))}catch(e){o=null}break;case"FeatureCollection":for(var a=0,s=i.features.length;a<s;++a)try{o.push(this.parseFeature(i.features[a]))}catch(e){o=null}break;default:try{var u=this.parseGeometry(i);o.push(new pr(u))}catch(e){o=null}}}}else;return o}},{key:"write",value:function(e,r){return oo(t,"write",this,3)([this.toGeoJSON(e),r])}},{key:"fromGeoJSON",value:function(e,t,r){var n=this,o=this.read(e,t,r);return M.isArray(o)?o.map(function(e){return n._toiSevrerFeature(e)}):this._toiSevrerFeature(o)}},{key:"toGeoJSON",value:function(e){var t={type:null};if(M.isArray(e)){t.type="FeatureCollection";var r=e.length;t.features=new Array(r);for(var n=0;n<r;++n){var o=e[n];if(s(o)){var i={};i.geometry=o,t.features[n]=this.extract.feature.apply(this,[i])}else t.features[n]=this.extract.feature.apply(this,[o])}}else if(s(e)){var a={};a.geometry=e,t=this.extract.feature.apply(this,[a])}else t=this.extract.feature.apply(this,[e]);function s(e){return e.hasOwnProperty("parts")&&e.hasOwnProperty("points")||e.hasOwnProperty("geoParts")}return t}},{key:"isValidType",value:function(e,t){var r=!1;switch(t){case"Geometry":-1==M.indexOf(["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon","Box","GeometryCollection"],e.type)||(r=!0);break;case"FeatureCollection":r=!0;break;default:e.type==t&&(r=!0)}return r}},{key:"parseFeature",value:function(e){var t,r,n,o;n=e.properties?e.properties:{},o=e.geometry&&e.geometry.bbox||e.bbox;try{r=this.parseGeometry(e.geometry)}catch(e){throw e}return t=new pr(r,n),o&&(t.bounds=We.fromArray(o)),e.id&&(t.geometry.id=e.id,t.fid=e.id),t}},{key:"parseGeometry",value:function(e){if(null==e)return null;var t;if("GeometryCollection"==e.type){if(!M.isArray(e.geometries))throw"GeometryCollection must have geometries array: "+e;for(var r=e.geometries.length,n=new Array(r),o=0;o<r;++o)n[o]=this.parseGeometry.apply(this,[e.geometries[o]]);t=new pt(n)}else{if(!M.isArray(e.coordinates))throw"Geometry must have coordinates array: "+e;if(!this.parseCoords[e.type.toLowerCase()])throw"Unsupported geometry type: "+e.type;try{t=this.parseCoords[e.type.toLowerCase()].apply(this,[e.coordinates])}catch(e){throw e}}return t}},{key:"createCRSObject",value:function(e){var t=e.layer.projection.toString(),r={};if(t.match(/epsg:/i)){var n=parseInt(t.substring(t.indexOf(":")+1));r=4326==n?{type:"name",properties:{name:"urn:ogc:def:crs:OGC:1.3:CRS84"}}:{type:"name",properties:{name:"EPSG:"+n}}}return r}},{key:"_toiSevrerFeature",value:function(e){var t=e.attributes,r=[],n=[];for(var o in t)r.push(o),n.push(t[o]);var i={fieldNames:r,fieldValues:n,geometry:$n.fromGeometry(e.geometry)};return i.geometry.id=e.fid,i}},{key:"createAttributes",value:function(e){if(!e)return null;var t={};!function(e,t){if(!e.hasOwnProperty("fieldNames")||!e.hasOwnProperty("fieldValues"))return;var r=e.fieldNames,n=e.fieldValues;for(var o in r)t[r[o]]=n[o]}(e,t);var r=["fieldNames","fieldValues","geometry","stringID","ID"];for(var n in e)r.indexOf(n)>-1||(t[n]=e[n]);return t}}])&&to(r.prototype,n),o&&to(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function lo(e){return"string"==typeof e&&e.constructor===String}function co(e){return"[object Array]"===Object.prototype.toString.call(e)}function fo(e){return"[object Object]"===Object.prototype.toString.call(e)}function po(e){return co(e)&&2===e.length&&e[0]>=-180&&e[0]<=180&&e[1]>=-90&&e[1]<=90}var ho=JSON.parse('[{"name":"åæçä¾å¸","coord":[85.01486759299489,45.406422237230046]},{"name":"æååæèªæ²»å·","coord":[88.7154624754753,44.26991024636568]},{"name":"ç³æ²³å­å¸","coord":[86.0208600035924,44.239045558096805]},{"name":"éæé­åå¸","coord":[114.73479243733115,44.16058374713977]},{"name":"æ¬æºªå¸","coord":[124.64357865201586,41.177197783134275]},{"name":"åå³ªå³å¸","coord":[98.16891560537093,39.76279786284264]},{"name":"è±èå¸","coord":[117.65723565456207,36.27916499211527]},{"name":"ç¥åæ¶æåº","coord":[110.48296222218153,31.581260143666697]},{"name":"å¤©é¨å¸","coord":[113.00615321481195,30.64105781887143]},{"name":"éå·å¸","coord":[114.94764081970385,30.325634953844585]},{"name":"æ½æ±å¸","coord":[112.70703817700621,30.349210666019893]},{"name":"ä»æ¡å¸","coord":[113.34688900729822,30.315951161935402]},{"name":"èä¹¡å¸","coord":[113.88072263074415,27.47193090553213]},{"name":"å°æ¹¾ç","coord":[120.14338943402045,23.596002465926095]},{"name":"ä¸èå¸","coord":[113.89443658529342,22.897826158636448]},{"name":"ä¸­å±±å¸","coord":[113.37118387764659,22.501478858616522]},{"name":"ç æµ·å¸","coord":[113.21799258934986,22.23782602992192]},{"name":"åæµ·å¸","coord":[109.18248083043899,21.695773689750148]},{"name":"é¦æ¸¯","coord":[114.20689279508653,22.36016760139811]},{"name":"èå±±å¸","coord":[122.22514712841459,30.338633120695956]},{"name":"åå­åèæ¯å°åå­","coord":[74.62910472637343,39.59886016069875]},{"name":"åä»å°åº","coord":[77.19899922143753,37.85462871211595]},{"name":"é¿åèå°åº","coord":[81.43930290016381,41.067304799230456]},{"name":"åç°å°åº","coord":[80.69780509160952,36.95287032287055]},{"name":"é¿éå°åº","coord":[82.536487505389,32.69566569631762]},{"name":"æ¥ååå°åº","coord":[86.5996831353606,29.54861754814263]},{"name":"é£æ²å°åº","coord":[88.32523292667608,33.20600450932715]},{"name":"çæ èæèªæ²»å·","coord":[95.2107128446203,33.90320387919257]},{"name":"è¿ªåºèæèªæ²»å·","coord":[99.42465312188943,28.052797714348895]},{"name":"ææ±ååæèªæ²»å·","coord":[98.85737910439825,26.98345757528851]},{"name":"å¤§çç½æèªæ²»å·","coord":[99.93934374816013,25.684737357453045]},{"name":"å¾·å®å£ææ¯é¢æèª","coord":[98.13830877778075,24.593421919561205]},{"name":"ä¿å±±å¸","coord":[99.19031013453166,24.979380341662]},{"name":"ä¸´æ²§å¸","coord":[99.62483778975081,24.058807858948214]},{"name":"æ®æ´±å¸","coord":[100.94440267992684,23.44121660743221]},{"name":"è¥¿åççº³å£æèªæ²»","coord":[100.86105801845994,21.882475641324206]},{"name":"æè¨å¸","coord":[91.3684790613129,30.14176592960237]},{"name":"å±±åå°åº","coord":[92.11665242621062,28.33000201578789]},{"name":"æèå°åº","coord":[94.9307847458166,29.125110156601963]},{"name":"æé½å°åº","coord":[97.33912235873476,30.48520825551814]},{"name":"ä¸½æ±å¸","coord":[100.65713436205135,26.96190318191959]},{"name":"ææè±å¸","coord":[101.73355913301131,26.714486678752795]},{"name":"åå±±å½æèªæ²»å·","coord":[102.08678551422615,27.683020519860396]},{"name":"æ¥éå½æèªæ²»å·","coord":[101.68264761198458,25.369603845264024]},{"name":"çº¢æ²³åå°¼æå½æèª","coord":[102.95101719613119,23.624860095239875]},{"name":"æå±±å£®æèæèªæ²»","coord":[104.8708359910614,23.579587266862504]},{"name":"ç¾è²å¸","coord":[106.69546907589859,23.98220841166522]},{"name":"å´å·¦å¸","coord":[107.3277087317123,22.49769755349952]},{"name":"é²åæ¸¯å¸","coord":[107.88939931155171,21.94550204069006]},{"name":"åå®å¸","coord":[108.67078983716917,23.12207641861882]},{"name":"é¦å·å¸","coord":[108.8532307305186,22.157690108421384]},{"name":"çæå¸","coord":[110.26918466489103,22.391823643610415]},{"name":"æ¹æ±å¸","coord":[109.93033457863683,21.086751055633457]},{"name":"èåå¸","coord":[110.80336192333934,22.069184739040775]},{"name":"é³æ±å¸","coord":[111.70471342186183,22.108751366417575]},{"name":"æ±é¨å¸","coord":[112.53715618649149,22.297368082806777]},{"name":"å¹¿å·å¸","coord":[113.4949302208309,23.28359314707863]},{"name":"æ¸è¿å¸","coord":[113.10957368131268,24.334444053233856]},{"name":"èåºå¸","coord":[112.11117530204233,23.60241158796112]},{"name":"æ¢§å·å¸","coord":[111.01709510772797,23.518132876753846]},{"name":"è´ºå·å¸","coord":[111.50423061842756,24.4095096817199]},{"name":"æ¡æå¸","coord":[110.44046163393094,25.353966673735407]},{"name":"æ³å·å¸","coord":[109.34854449214147,24.972408051485047]},{"name":"æ²³æ± å¸","coord":[107.81191841865586,24.649291651298164]},{"name":"é»ä¸åèæä¾æèª","coord":[108.39952601614591,26.429286420465576]},{"name":"è´µé³å¸","coord":[106.59784062851153,26.797907456479816]},{"name":"å®é¡ºå¸","coord":[105.76161265300635,25.988644902171018]},{"name":"é»è¥¿åå¸ä¾æèæ","coord":[105.5954078788574,25.404850939549405]},{"name":"æ²éå¸","coord":[103.9164335632742,25.697243690315265]},{"name":"å­çæ°´å¸","coord":[104.77723228072432,26.15402255629164]},{"name":"æ¯èå°åº","coord":[105.03867422931839,27.077913968069666]},{"name":"æ­éå¸","coord":[104.29730513046874,27.62418247971078]},{"name":"å®å®¾å¸","coord":[104.76748901448207,28.553501804266475]},{"name":"ä¹å±±å¸","coord":[103.56027669102787,29.160754519210577]},{"name":"èªè´¡å¸","coord":[104.63272827056402,29.273152614922402]},{"name":"åæ±å¸","coord":[104.82644562304716,29.61272653799929]},{"name":"éµä¹å¸","coord":[106.82413636302059,28.191847588570702]},{"name":"è¾¾å·å¸","coord":[107.59704170009518,31.32138258839703]},{"name":"éå®å¸","coord":[105.48979445433736,30.677687821242678]},{"name":"å¹¿å®å¸","coord":[106.56708164098042,30.43500706741521]},{"name":"æ³¸å·å¸","coord":[105.42591761727707,28.50277238478137]},{"name":"èµé³å¸","coord":[104.97995126874034,30.154251886139654]},{"name":"éå®å¸","coord":[102.69931299964517,29.892630706195035]},{"name":"çå±±å¸","coord":[104.07052881858888,29.894202166560405]},{"name":"çå­èæèªæ²»å·","coord":[100.50721042614238,30.975216556269658]},{"name":"ææ´èæèªæ²»å·","coord":[99.30775565051923,34.03539865224808]},{"name":"æµ·åèæèªæ²»å·","coord":[100.39969108016373,35.90048272566899]},{"name":"é»åèæèªæ²»å·","coord":[101.5360706381689,35.10286360841902]},{"name":"èµ£åèæèªæ²»å·","coord":[102.97083885806067,34.326752803339026]},{"name":"éåå¸","coord":[105.24780098912132,33.57031117443431]},{"name":"å¤©æ°´å¸","coord":[105.53503634660417,34.62320421368087]},{"name":"å®è¥¿å¸","coord":[104.58787768541339,35.08900966621695]},{"name":"ä¸´å¤åæèªæ²»å·","coord":[103.2612870434902,35.591577124455235]},{"name":"è¥¿å®å¸","coord":[101.57680657999033,36.84800271717157]},{"name":"æµ·ä¸å°åº","coord":[102.30909850729282,36.287400615025646]},{"name":"æµ·åèæèªæ²»å·","coord":[100.27122484450717,37.892557516083826]},{"name":"éæå¸","coord":[102.02244049169511,38.497330414886164]},{"name":"éæ³å¸","coord":[95.94486678270127,40.56891536586272]},{"name":"æµ·è¥¿èå¤æèæèª","coord":[94.67143298050689,36.022725148503724]},{"name":"å·´é³é­æ¥èå¤èªæ²»","coord":[88.18116214759745,39.556478810319916]},{"name":"åå¯å°åº","coord":[93.84302392518026,42.95015211178875]},{"name":"å¶é²çªå°åº","coord":[89.82035217277885,42.399368632283505]},{"name":"ä¹é²æ¨é½å¸","coord":[88.00048109561487,43.549986370786]},{"name":"é¿åæ³°å°åº","coord":[88.11213933257655,47.05593413019629]},{"name":"åå°å¡æèå¤èªæ²»","coord":[82.26402238163408,44.671135542630864]},{"name":"ä¼çåè¨åèªæ²»å·","coord":[82.80778717477179,43.53783381365267]},{"name":"é¿æåç","coord":[103.29923966842289,40.10955801781495]},{"name":"æ­¦å¨å¸","coord":[102.73362058791429,37.94211141321436]},{"name":"å°å·å¸","coord":[103.73793563506032,36.27379827886003]},{"name":"ä¸­å«å¸","coord":[105.6943786030716,37.20654236148948]},{"name":"é¶å·å¸","coord":[106.20022174140034,38.52103167597483]},{"name":"ç³å´å±±å¸","coord":[106.41544011793628,38.84054137571417]},{"name":"ä¹æµ·å¸","coord":[106.8984175998405,39.54616572239788]},{"name":"éå°å¤æ¯å¸","coord":[108.43285571424619,39.24036799350715]},{"name":"å·´å½¦æ·å°å¸","coord":[107.45840392808307,41.30159860424196]},{"name":"åå¤´å¸","coord":[110.46472193224272,41.48017783644221]},{"name":"å¼åæµ©ç¹å¸","coord":[111.48365173603975,40.498363056149884]},{"name":"ä¹å°å¯å¸å¸","coord":[112.61568977597707,41.75789561273154]},{"name":"å¤§åå¸","coord":[113.7107192749083,39.898956799744184]},{"name":"æå·å¸","coord":[112.65428748167508,39.681772914701924]},{"name":"å¿»å·å¸","coord":[112.36127575589583,38.88990233614568]},{"name":"æ¦æå¸","coord":[109.68473112169593,38.19921027134876]},{"name":"å»¶å®å¸","coord":[109.52425222161318,36.406522726136814]},{"name":"åºé³å¸","coord":[107.73052193155061,36.183821532624464]},{"name":"åºåå¸","coord":[106.20191575442442,36.11634909496382]},{"name":"ç½é¶å¸","coord":[104.68634478137065,36.51582865625868]},{"name":"å®é¸¡å¸","coord":[107.33534779230747,34.3387216485855]},{"name":"æ±ä¸­å¸","coord":[107.03534754266246,33.00142998064871]},{"name":"å¹¿åå¸","coord":[105.92928137563939,32.21872447205537]},{"name":"å·´ä¸­å¸","coord":[107.03422410306194,31.99874720836291]},{"name":"ååå¸","coord":[106.32964805032347,31.156657700184095]},{"name":"ç»µé³å¸","coord":[104.58949560201106,31.88628780630976]},{"name":"å¾·é³å¸","coord":[104.41542984932845,31.110558133718676]},{"name":"æé½å¸","coord":[103.8852290010473,30.777258040348634]},{"name":"é¿åèæç¾æèªæ²»","coord":[102.26209319552814,32.45725845387284]},{"name":"å®åº·å¸","coord":[109.14236501848015,32.77467694678074]},{"name":"åå °å¸","coord":[110.39934083416314,32.376209039347906]},{"name":"è¥é³å¸","coord":[111.97539147094662,31.93399822417465]},{"name":"å®æå¸","coord":[111.22204852395754,30.772457669035354]},{"name":"æ©æ½å¸","coord":[109.42158366502872,30.260366574390105]},{"name":"å¼ å®¶çå¸","coord":[110.59760006538717,29.330107409240718]},{"name":"åé¦å¸","coord":[109.72176899848378,28.681903937242495]},{"name":"éä»å°åº","coord":[108.54247523485463,28.11736237519646]},{"name":"éåºå¸","coord":[107.86007108564992,30.186253395053196]},{"name":"æåå¸","coord":[109.94325166787243,27.43919084801186]},{"name":"çé³å¸","coord":[112.43060358108062,28.75127294553697]},{"name":"å¨åºå¸","coord":[111.41891416951897,27.696312460064604]},{"name":"å¸¸å¾·å¸","coord":[111.72571610131646,29.27189463838195]},{"name":"èå·å¸","coord":[112.65896596965268,30.05161542755362]},{"name":"èé¨å¸","coord":[112.6586855902184,31.01267124474617]},{"name":"å²³é³å¸","coord":[113.2595036144316,29.106247116930163]},{"name":"é¿æ²å¸","coord":[113.15415586456598,28.222934680488425]},{"name":"æ¹æ½­å¸","coord":[112.51092596317824,27.69881544105668]},{"name":"æ ªå·å¸","coord":[113.49665538546823,27.03993794610501]},{"name":"è¡¡é³å¸","coord":[112.48849636578527,26.783613569970782]},{"name":"éµé³å¸","coord":[110.6723832117475,26.81652287086792]},{"name":"æ°¸å·å¸","coord":[111.8565364154186,25.768488267811968]},{"name":"é¶å³å¸","coord":[113.53420325850979,24.69848878771937]},{"name":"æ å·å¸","coord":[114.32029589634925,23.25504544231892]},{"name":"ä½å±±å¸","coord":[112.95925897403649,23.10116677189257]},{"name":"äºæµ®å¸","coord":[111.78042514904234,22.840400494105687]},{"name":"æ·±å³å¸","coord":[114.13138648919008,22.649563063468342]},{"name":"æ±å°¾å¸","coord":[115.57412892884373,23.06989642104901]},{"name":"æ²³æºå¸","coord":[114.89746229844398,23.97971937124767]},{"name":"æ­é³å¸","coord":[116.04290004239446,23.304802704715357]},{"name":"æ±å¤´å¸","coord":[116.7008461897183,23.35898625947344]},{"name":"æ½®å·å¸","coord":[116.75405548481658,23.854381508863064]},{"name":"æ¢å·å¸","coord":[116.13719397345734,24.15633544812716]},{"name":"æ¼³å·å¸","coord":[117.38279760543345,24.41111215459575]},{"name":"å¦é¨å¸","coord":[118.04275971554665,24.675908246507944]},{"name":"é¾å²©å¸","coord":[116.69341144552507,25.20284542644492]},{"name":"æ³å·å¸","coord":[118.12035864630246,25.22984144365049]},{"name":"èç°å¸","coord":[118.82439690138142,25.439653480972687]},{"name":"ç¦å·å¸","coord":[119.1608285845262,25.99117532466728]},{"name":"ä¸æå¸","coord":[117.51188176216434,26.318292906961602]},{"name":"åå¹³å¸","coord":[118.16153136678187,27.306303151805437]},{"name":"æå·å¸","coord":[116.3455359885574,27.487043655935366]},{"name":"é¹°æ½­å¸","coord":[117.01082360702333,28.241253742969946]},{"name":"åå®å¸","coord":[114.91377151807418,26.957486660664525]},{"name":"èµ£å·å¸","coord":[115.046455717572,25.81565075681663]},{"name":"é´å·å¸","coord":[113.1544526703492,25.871927095452524]},{"name":"æ°ä½å¸","coord":[114.94161795877827,27.79044654578371]},{"name":"å®æ¥å¸","coord":[115.04574494880995,28.306428044943356]},{"name":"åæå¸","coord":[115.9963824234495,28.664803351584705]},{"name":"ä¹æ±å¸","coord":[115.53225905704193,29.362905920276297]},{"name":"ä¸é¥¶å¸","coord":[117.8595355766598,28.765755150094634]},{"name":"æ¯å¾·éå¸","coord":[117.25387030721845,29.33426823662448]},{"name":"é»å±±å¸","coord":[117.85476357809696,29.969632034273722]},{"name":"æ± å·å¸","coord":[117.34517113140791,30.208089337922335]},{"name":"ééµå¸","coord":[117.93160431300694,30.926442655001676]},{"name":"å®åºå¸","coord":[116.54307680610799,30.524265461641296]},{"name":"é»ç³å¸","coord":[115.02354597728443,29.924060229331015]},{"name":"å¸å®å¸","coord":[114.26967602231792,29.652174021136048]},{"name":"é»åå¸","coord":[115.2859016705373,30.65856897065683]},{"name":"æ­¦æ±å¸","coord":[114.34552076948799,30.68836237966767]},{"name":"éå·å¸","coord":[113.3850627838818,31.87891659924412]},{"name":"ä¿¡é³å¸","coord":[114.81374730587638,32.0309685135914]},{"name":"é©»é©¬åºå¸","coord":[114.07756451509235,32.896720987266114]},{"name":"åæ´å¸","coord":[109.82044421310393,33.77403373563189]},{"name":"è¥¿å®å¸","coord":[109.11839808451401,34.225257215515896]},{"name":"æ¸­åå¸","coord":[109.75732444226935,35.025913644359306]},{"name":"éå·å¸","coord":[108.98695328111377,35.19235092947735]},{"name":"å¸é³å¸","coord":[108.36398776446165,34.84311348287181]},{"name":"ä¸é¨å³¡å¸","coord":[110.80049688104964,34.31818709571671]},{"name":"è¿åå¸","coord":[111.1736679525165,35.19010372283576]},{"name":"æ´é³å¸","coord":[111.87577573098216,34.33379926109848]},{"name":"å¹³é¡¶å±±å¸","coord":[112.80931281928427,33.759895800153096]},{"name":"æ¼¯æ²³å¸","coord":[113.83505724178012,33.70034266174508]},{"name":"è®¸æå¸","coord":[113.78762484088509,34.051835688452435]},{"name":"éå·å¸","coord":[113.49619951867594,34.61181797865449]},{"name":"ç¦ä½å¸","coord":[113.13404280173008,35.134167097471625]},{"name":"æåå¸","coord":[112.7495732073233,35.63186423091449]},{"name":"é¿æ²»å¸","coord":[112.85900842873183,36.45872910742828]},{"name":"ä¸´æ±¾å¸","coord":[111.49379787924448,36.22810800777857]},{"name":"å¤ªåå¸","coord":[112.15628804033796,37.91704444063036]},{"name":"åæ¢å¸","coord":[111.31901105774872,37.712740463356496]},{"name":"æä¸­å¸","coord":[113.08199599739676,37.36532613794343]},{"name":"é¯é¸å¸","coord":[114.41824047234618,36.530119932543315]},{"name":"å®é³å¸","coord":[113.88883283163116,35.7797611183252]},{"name":"é¹¤å£å¸","coord":[114.3654094911545,35.75770487428472]},{"name":"æ°ä¹¡å¸","coord":[113.9184107718167,35.348471214026716]},{"name":"å¼å°å¸","coord":[114.52801677500626,34.61371216679872]},{"name":"å¨å£å¸","coord":[114.88509782391864,33.69999759722657]},{"name":"éé³å¸","coord":[115.44595951398213,32.98060371610532]},{"name":"æ·®åå¸","coord":[116.68941991880993,32.79972275772595]},{"name":"èå å¸","coord":[117.38594715783302,33.106729536033896]},{"name":"æ·®åå¸","coord":[116.69651711889378,33.69527529383458]},{"name":"å®¿å·å¸","coord":[117.30175405886838,33.943330421260015]},{"name":"äº³å·å¸","coord":[116.12410804185097,33.46769392946132]},{"name":"åä¸å¸","coord":[115.59575176872548,34.28339840831147]},{"name":"èæ³½å¸","coord":[115.53631974831816,35.197319393220624]},{"name":"æ¿®é³å¸","coord":[115.3070485514902,35.775883510964334]},{"name":"èåå¸","coord":[115.8870069012884,36.40529594548765]},{"name":"é¢å°å¸","coord":[114.74259008644859,37.251396750084155]},{"name":"ç³å®¶åºå¸","coord":[114.56923838363613,38.13141710980106]},{"name":"é³æ³å¸","coord":[113.39216149668508,38.09075470547468]},{"name":"ä¿å®å¸","coord":[115.261524468934,39.09118520781398]},{"name":"è¡¡æ°´å¸","coord":[115.8182936677897,37.715661598187154]},{"name":"å¾·å·å¸","coord":[116.4582273790399,37.19372347888644]},{"name":"æ²§å·å¸","coord":[116.76192710911863,38.20240042039232]},{"name":"å»åå¸","coord":[116.50410772133856,39.27896741763884]},{"name":"å¤©æ´¥å¸","coord":[117.31988934444873,39.37154482470619]},{"name":"åäº¬å¸","coord":[116.59734730757869,40.237112944270976]},{"name":"å¼ å®¶å£å¸","coord":[115.1823606483226,40.83732566607167]},{"name":"åå±±å¸","coord":[117.8693184261954,39.71862889477249]},{"name":"ç§¦çå²å¸","coord":[119.30467355367742,39.990574652162564]},{"name":"æ¿å¾·å¸","coord":[117.16275671911026,41.36623845548547]},{"name":"è«è¦å²å¸","coord":[119.9342336210531,40.5628822626519]},{"name":"æé³å¸","coord":[120.11853493535794,41.471852354885755]},{"name":"èµ¤å³°å¸","coord":[118.50943546234379,43.25452976059767]},{"name":"é¦å·å¸","coord":[121.5167549323861,41.45933087433065]},{"name":"è¥å£å¸","coord":[122.58571915054674,40.42093503997384]},{"name":"ä¸¹ä¸å¸","coord":[124.33549382902183,40.46369290272115]},{"name":"è¾½é³å¸","coord":[123.34064798039414,41.152331397771356]},{"name":"çé¦å¸","coord":[122.06718005354679,41.05573599862555]},{"name":"éæ°å¸","coord":[121.93889757908204,42.27641773244204]},{"name":"éå±±å¸","coord":[122.78904432242356,40.77781183142038]},{"name":"æ²é³å¸","coord":[122.99508899709724,42.1162195010079]},{"name":"éå²­å¸","coord":[124.23100515588399,42.72666083611828]},{"name":"æ¶é¡ºå¸","coord":[124.46027188217573,41.82955407638859]},{"name":"éè¾½å¸","coord":[122.0729370657937,43.90889130864869]},{"name":"å´å®ç","coord":[120.79456431092532,45.92003249442161]},{"name":"ç½åå¸","coord":[123.10619907715235,45.25475749267784]},{"name":"é½é½åå°å¸","coord":[124.5462214659102,47.55395009317394]},{"name":"å¤§å´å®å²­å°åº","coord":[124.50992855161529,52.18438447846694]},{"name":"é»æ²³å¸","coord":[127.14721400335922,49.25080134026901]},{"name":"å¤§åºå¸","coord":[124.40329830095243,46.401048760966745]},{"name":"ç»¥åå¸","coord":[126.5214484055605,46.76992452194825]},{"name":"æ¾åå¸","coord":[124.21244334807682,44.75779381338502]},{"name":"åå¹³å¸","coord":[124.27839350328821,43.52139065090318]},{"name":"éåå¸","coord":[125.67392830706305,41.91771808663852]},{"name":"è¾½æºå¸","coord":[125.33529527643432,42.758340204944986]},{"name":"åæå¸","coord":[126.83350281902375,43.60730120049175]},{"name":"é¿æ¥å¸","coord":[125.53597875970374,44.24624314701737]},{"name":"ç½å±±å¸","coord":[127.16780160322108,42.093893880305075]},{"name":"åå°æ»¨å¸","coord":[127.39125008786029,45.36200668820575]},{"name":"é¹¤å²å¸","coord":[130.4703811258197,47.66520688940109]},{"name":"ä¼æ¥å¸","coord":[128.91240831703635,47.93833794565277]},{"name":"ä¸å°æ²³å¸","coord":[131.2677920224311,45.945099776108584]},{"name":"é¸¡è¥¿å¸","coord":[132.38059153660274,45.722934218318535]},{"name":"åé¸­å±±å¸","coord":[132.3184817002743,46.65813679030265]},{"name":"ä½³æ¨æ¯å¸","coord":[132.26174446608726,47.17569713691394]},{"name":"å¼ä¼¦è´å°å¸","coord":[122.3210739998419,50.18176996070858]},{"name":"å­æå¸","coord":[113.83749892135485,31.11757234692128]},{"name":"è´µæ¸¯å¸","coord":[110.07354588052804,23.380735604767374]},{"name":"é»åå¸ä¾æèæèª","coord":[107.30931767543106,26.2976919432269]},{"name":"å®å¾·å¸","coord":[119.52482556634342,27.013151692716413]},{"name":"æ¸©å·å¸","coord":[120.30037042732202,27.8699145504001]},{"name":"å°å·å¸","coord":[120.88886782713843,28.670799172772313]},{"name":"ä¸½æ°´å¸","coord":[119.56796851966463,28.170268394477755]},{"name":"è¡¢å·å¸","coord":[118.79479802644406,28.865874397158763]},{"name":"éåå¸","coord":[119.99381920686633,29.093455548185744]},{"name":"ç»å´å¸","coord":[120.46546691682343,29.69382513836818]},{"name":"å®æ³¢å¸","coord":[121.42142987830871,29.70001162878972]},{"name":"æ­å·å¸","coord":[119.4405685790891,29.87218307296989]},{"name":"å®£åå¸","coord":[118.68748382914703,30.628143499626418]},{"name":"æ¹å·å¸","coord":[119.98261306633574,30.7945175862809]},{"name":"åå´å¸","coord":[120.83889215988998,30.67538495499343]},{"name":"ä¸æµ·å¸","coord":[121.37534147322967,31.25628247908459]},{"name":"èå·å¸","coord":[120.6906182622391,31.381280695137775]},{"name":"æ é¡å¸","coord":[120.32182300914366,31.54113306724517]},{"name":"å¸¸å·å¸","coord":[119.61953292830165,31.611878565375576]},{"name":"åäº¬å¸","coord":[118.71890548838064,31.910863187910323]},{"name":"éæ±å¸","coord":[119.42349332902813,31.97942313430778]},{"name":"åè¥å¸","coord":[117.30651975617157,31.79407863049138]},{"name":"å­å®å¸","coord":[116.24668220575353,31.820846193819513]},{"name":"æ»å·å¸","coord":[117.88422385307969,32.51792621904418]},{"name":"æ³°å·å¸","coord":[120.03124303305091,32.56503102346783]},{"name":"åéå¸","coord":[120.85599446760912,32.18496706099728]},{"name":"çåå¸","coord":[120.01812490612667,33.54219948734023]},{"name":"æ·®å®å¸","coord":[119.0749424205415,33.39203631772854]},{"name":"å®¿è¿å¸","coord":[118.45404943216346,33.666258719120265]},{"name":"å¾å·å¸","coord":[117.77482249295966,34.30847766157078]},{"name":"æµå®å¸","coord":[116.74147276546373,35.27488504351119]},{"name":"æ£åºå¸","coord":[117.43359942491492,34.884162021736]},{"name":"è¿äºæ¸¯å¸","coord":[119.01553213785074,34.54316517587849]},{"name":"ä¸´æ²å¸","coord":[118.31478835349617,35.28173079028279]},{"name":"æ¥ç§å¸","coord":[119.14265350444272,35.54479073199592]},{"name":"éå²å¸","coord":[120.27779044405756,36.3464117375903]},{"name":"å¨æµ·å¸","coord":[122.12963327195605,37.13879077904251]},{"name":"çå°å¸","coord":[120.7689567423966,37.19772002195597]},{"name":"æ½åå¸","coord":[119.02178548592039,36.49292234053931]},{"name":"æ·åå¸","coord":[117.92936024367185,36.60871347163638]},{"name":"æ³°å®å¸","coord":[116.93810893944303,36.0423330118612]},{"name":"æµåå¸","coord":[117.34560282551296,36.769574973846304]},{"name":"ä¸è¥å¸","coord":[118.4915054457184,37.52194690335787]},{"name":"æ»¨å·å¸","coord":[117.67610299757533,37.4439597758601]},{"name":"ææå¸","coord":[102.93100245594789,25.481300763922075]},{"name":"çæºªå¸","coord":[102.23080854291823,24.156168324611663]},{"name":"å¡åå°åº","coord":[83.60908162840168,45.3721852373893]},{"name":"å¼ æå¸","coord":[100.47710030600572,38.704239320458385]},{"name":"åé³å¸","coord":[112.1400670951149,33.03033276715801]},{"name":"æ¬å·å¸","coord":[119.48949608990988,32.80956776339646]},{"name":"å»¶è¾¹æé²æèªæ²»å·","coord":[129.3577692895626,43.24968794080283]},{"name":"ç¡ä¸¹æ±å¸","coord":[129.87240796405672,44.7073040108322]},{"name":"æ¾³é¨","coord":[113.56289691515346,22.14602596262204]},{"name":"å´å¿ å¸","coord":[106.76894508116403,37.72566765880316]},{"name":"æ¥å®¾å¸","coord":[109.25592217010114,23.86346274681084]},{"name":"å¹³åå¸","coord":[107.0708132782897,35.30329631658711]},{"name":"é©¬éå±±å¸","coord":[118.27245878467022,31.657727937739004]},{"name":"èæ¹å¸","coord":[118.32992684415504,31.081688223101658]},{"name":"æ¾è¿å¿","coord":[110.04198076060266,19.694955078668105]},{"name":"ä¿äº­é»æèæèªæ²»","coord":[109.6055304964257,18.6101488675304]},{"name":"ä¹ä¸é»æèªæ²»å¿","coord":[109.04051999525574,18.643137437909203]},{"name":"åå·å¸","coord":[109.3431358337404,19.550974957403195]},{"name":"å®å®å¿","coord":[110.38744429685676,19.47557074114284]},{"name":"å±¯æå¿","coord":[110.00574767630334,19.367175093044388]},{"name":"ç½æ²é»æèªæ²»å¿","coord":[109.36860737761768,19.214416393082217]},{"name":"ç¼ä¸­é»æèæèªæ²»","coord":[109.86691465937548,19.073671135862682]},{"name":"ä¸æ¹å¸","coord":[108.86903802405428,19.017352815445214]},{"name":"ææ±é»æèªæ²»å¿","coord":[108.9686431884767,19.182594167127824]},{"name":"æµ·å£å¸","coord":[110.420654296875,19.806565564640795]},{"name":"æµæºå¸","coord":[112.38051465474433,35.07958362422394]},{"name":"äºæå±±å¸","coord":[109.53595187364496,18.832908264613966]},{"name":"å¤§è¿å¸","coord":[121.96662235866603,39.444150542439914]},{"name":"ææå¸ä¸æ²å¸","coord":[110.81828537536748,19.756501444162936]},{"name":"ä¸äºå¸","coord":[109.38424600793707,18.39186315877128]},{"name":"ä¸å®å¸","coord":[110.28485046979574,18.860240588635115]},{"name":"éµæ°´é»æèªæ²»å¿","coord":[109.95577603229562,18.594712684620465]},{"name":"ä¸´é«å¿","coord":[109.71915395436967,19.79420403032508]},{"name":"ç¼æµ·å¸","coord":[110.41650700703043,19.22315873149372]}]'),yo=JSON.parse('[{"name":"é»é¾æ±ç","coord":[127.64559817675396,48.48668098449708]},{"name":"åèå¤èªæ²»åº","coord":[118.34519572208615,45.370218276977525]},{"name":"æ°çç»´å¾å°èªæ²»åº","coord":[87.13479065593184,41.75497055053711]},{"name":"åæç","coord":[126.12985278813787,43.57983207702637]},{"name":"è¾½å®ç","coord":[124.02494773936439,41.105743408203125]},{"name":"çèç","coord":[102.87785725633012,37.69582366943361]},{"name":"æ²³åç","coord":[115.66327227481898,39.33383178710938]},{"name":"åäº¬å¸","coord":[116.62199343603638,40.25053787231445]},{"name":"å±±è¥¿ç","coord":[112.45180235808988,37.666561126708984]},{"name":"å¤©æ´¥å¸","coord":[117.35711842642581,39.406789779663086]},{"name":"éè¥¿ç","coord":[109.56294003056632,35.64754199981689]},{"name":"å®å¤åæèªæ²»åº","coord":[105.96110877640074,37.3081169128418]},{"name":"éæµ·ç","coord":[96.07301048277901,35.44417190551758]},{"name":"å±±ä¸ç","coord":[118.03833752951093,36.29800605773925]},{"name":"è¥¿èèªæ²»åº","coord":[87.47361520439412,31.6703872680664]},{"name":"æ²³åç","coord":[113.07832397097275,33.87751102447509]},{"name":"æ±èç","coord":[119.93926538201052,32.945452690124505]},{"name":"å®å¾½ç","coord":[117.15146765881019,32.024482727050774]},{"name":"åå·ç","coord":[102.28998890142759,30.182161331176758]},{"name":"æ¹åç","coord":[112.87798261431585,31.157071113586426]},{"name":"éåºå¸","coord":[107.870126637831,30.188085556030266]},{"name":"ä¸æµ·å¸","coord":[121.42561166015514,31.276043891906745]},{"name":"æµæ±ç","coord":[119.75337092707514,29.175934791564945]},{"name":"æ¹åç","coord":[111.52770282777405,27.38110256195069]},{"name":"æ±è¥¿ç","coord":[115.51091280655628,27.283511161804206]},{"name":"äºåç","coord":[101.27053825991308,25.19783210754396]},{"name":"è´µå·ç","coord":[106.49672346773299,26.92267990112305]},{"name":"ç¦å»ºç","coord":[117.9976766946587,25.939599990844727]},{"name":"å¹¿è¥¿å£®æèªæ²»åº","coord":[108.98706831086302,23.891559600830078]},{"name":"å°æ¹¾ç","coord":[120.82468432537434,23.602651596069336]},{"name":"é¦æ¸¯ç¹å«è¡æ¿åº","coord":[114.21036850371561,22.374858856201172]},{"name":"æµ·åç","coord":[109.62792940960824,19.163116455078125]},{"name":"å¹¿ä¸ç","coord":[113.32127888266032,22.873867034912106]},{"name":"æ¾³é¨ç¹å«è¡æ¿åº","coord":[113.56819996291901,22.160347992976]}]');function mo(e){"@babel/helpers - typeof";return(mo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function go(e){return function(e){if(Array.isArray(e))return vo(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return vo(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?vo(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function bo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Ao(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bo(Object(r),!0).forEach(function(t){wo(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bo(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function wo(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=mo(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=mo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==mo(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function So(e,t){if(lo(t)){var r=e.substr(0,2);return"å¼ å®¶"===r&&(r=e.substr(0,3)),!!t.match(new RegExp(r))}return!1}function Co(e){return e&&"/"!==e.slice(-1)?"".concat(e,"/"):e}function Eo(e){if(""===e)return!1;var t=Number(e);return 0===t||!isNaN(t)}function _o(e){var t=e.sourceId,r=e.features,n=e.mergeByField,o=e.map;if(!(r instanceof Array))return r;if(!(r=r.map(function(e,t){return Object.prototype.hasOwnProperty.call(e.properties,"index")||(e.properties.index=t),e})).length||!n&&r[0].geometry)return r;var i=o.getSource(t);if((!i||!i._data.features)&&r[0].geometry)return r;var a=i&&i._data&&i._data.features,s=[];return!n&&a?a:(r.forEach(function(e){var t=a.find(function(t){return isNaN(+t.properties[n])&&isNaN(+e.properties[n])?JSON.stringify(t.properties[n]||"")===JSON.stringify(e.properties[n]||""):+t.properties[n]==+e.properties[n]});t?s.push(Ao(Ao({},t),e)):e.geometry&&s.push(e)}),s)}function Io(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"type",r=[],n=0;n<e.length;n++){if("group"===e[n][t]){var o=e[n].children;if(o&&o.length>0){var i=Io(o,t);r.push.apply(r,go(i))}}else r.push(e[n])}return r}function Oo(e,t){var r=e.type,n=e.tiles;return"raster"===r&&(r===t.type&&n&&t.tiles&&function(e,t){if(e===t)return!0;var r=new URL(e),n=new URL(t);if(r.origin!==n.origin)return!1;var o=/\/([^/?#]+\.\w+)$/,i=r.pathname.replace(o,""),a=n.pathname.replace(o,"");return i===a||i.startsWith(a+(a.endsWith("/")?"":"/"))}(n[0],t.tiles[0]))}function xo(e){return e.layerInfo&&e.layerInfo.id?e.layerInfo.id:e.metadata&&e.metadata.SM_Layer_Id?e.metadata.SM_Layer_Id:e.sourceLayer||e.source||e.id}function Po(e,t,r){var n=r.some(function(e){return e.id===t})?[t]:[];return e&&n.push.apply(n,go(e)),Array.from(new Set(n)).filter(function(e){return!!e})}function ko(e,t,r){var n=Po(e,t,r);return r.find(function(e){return e.id===n[0]})}var To={toSuperMapGeometry:function(e){if(e&&e.type){var t=(new uo).read(e,"FeatureCollection");return t&&t[0].geometry}},toSuperMapBounds:function(e){return co(e)?new We(e[0],e[1],e[2],e[3]):e instanceof o().LngLatBounds?new We(e.getWest(),e.getSouth(),e.getEast(),e.getNorth()):e},toSuperMapPoint:function(e){return co(e)?new ot(e[0],e[1]):e.lng&&e.lat?new ot(e.lng,e.lat):new ot(e.geometry.coordinates[0],e.geometry.coordinates[1])},toSuperMapPolygon:function(e){var t=e.getWest(),r=e.getEast(),n=e.getSouth(),o=e.getNorth();return new Wt([new zt([new ot(t,n),new ot(r,n),new ot(r,o),new ot(t,o)])])},isArray:co,toGeoJSON:function(e){if(e)return(new uo).toGeoJSON(e)},toProcessingParam:function(e){var t={};if(e.length<1)t="";else{for(var r=[],n=0;n<e.length;n++){var o={};o.x=e[n][0],o.y=e[n][1],r.push(o)}t.type="REGION",t.points=r}return t},extend:function(e){for(var t=0;t<Object.getOwnPropertyNames(arguments).length;t++){var r=Object.getOwnPropertyNames(arguments)[t];if("caller"!=r&&"callee"!=r&&"length"!=r&&"arguments"!=r){var n=arguments[r];if(n)for(var o=0;o<Object.getOwnPropertyNames(n).length;o++){var i=Object.getOwnPropertyNames(n)[o];"caller"!=r&&"callee"!=r&&"length"!=r&&"arguments"!=r&&(e[i]=n[i])}}}return e},isNumber:function(e){if(""===e)return!1;var t=Number(e);return 0===t||!isNaN(t)},isString:lo,newGuid:function(e){for(var t=e||32,r="",n=1;n<t;n++){r+=Math.floor(16*Math.random()).toString(16)}return r},hexToRgba:function(e,t){var r=[],n=[];if(3==(e=e.replace(/#/,"")).length){for(var o=[],i=0;i<3;i++)o.push(e.charAt(i)+e.charAt(i));e=o.join("")}for(var a=0;a<6;a+=2)r[a]="0x"+e.substr(a,2),n.push(parseInt(Number(r[a])));return n.push(t),"rgba("+n.join(",")+")"},isMatchAdministrativeName:So,unproject:function(e){for(var t,r=180/Math.PI,n=6378137,i=Math.exp(-e[1]/n),a=Math.PI/2-2*Math.atan(i),s=0,u=.1;s<15&&Math.abs(u)>1e-7;s++)t=1,a+=u=Math.PI/2-2*Math.atan(i*t)-a;return new(o().LngLat)(e[0]*r/n,a*r)},transformUrl:function(e){var t=e.url,r=e.server,n=e.excludePortalProxyUrl,o=e.credentialValue,i=e.credentialKey,a=-1===t.indexOf(".json")?"".concat(t,".json"):t,s="getUrlResource.json?url=";if(n&&r.indexOf(s)>-1){var u=r.split(s);u.length>1&&(a=u[0]+s+a)}return o&&i&&(a+="?"+i+"="+o),a}};function jo(e){"@babel/helpers - typeof";return(jo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Bo(n.key),n)}}function Bo(e){var t=function(e,t){if("object"!=jo(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=jo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==jo(t)?t:t+""}function No(e,t,r){return t=Lo(t),function(e,t){if(t&&("object"==jo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],Lo(e).constructor):t.apply(e,r))}function Ro(){return(Ro="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=Lo(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function Lo(e){return(Lo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Do(e,t){return(Do=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Fo=function(e){function t(e,r,n){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=No(this,t,[e,r,n])).x=parseFloat(e),o.y=parseFloat(r),o.text=n.toString(),o.bsInfo={h:null,w:null},o.element=document.createElement("span"),o.CLASS_NAME="SuperMap.Geometry.GeoText",o.geometryType="GeoText",o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Do(e,t)}(t,b),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=Ro(Lo(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([]),this.x=null,this.y=null,this.text=null}},{key:"getCentroid",value:function(){return new ot(this.x,this.y)}},{key:"clone",value:function(e){return null==e&&(e=new t(this.x,this.y,this.text)),M.applyDefaults(e,this),e}},{key:"calculateBounds",value:function(){this.bounds=new We(this.x,this.y,this.x,this.y)}},{key:"getLabelPxBoundsByLabel",value:function(e,t,r,n){var o,i,a,s,u=M.cloneObject(e),l=(n.label||this.text).split("\n").length;if(t=parseFloat(t),r=parseFloat(r),l>1&&(r=parseFloat(r)*l),n.labelAlign&&"cm"!==n.labelAlign)switch(n.labelAlign){case"lt":u.x+=t/2,u.y+=r/2;break;case"lm":u.x+=t/2;break;case"lb":u.x+=t/2,u.y-=r/2;break;case"ct":u.y+=r/2;break;case"cb":u.y-=r/2;break;case"rt":u.x-=t/2,u.y+=r/2;break;case"rm":u.x-=t/2;break;case"rb":u.x-=t/2,u.y-=r/2}return this.bsInfo.h=r,this.bsInfo.w=t,o=u.x-parseFloat(t)/2,i=u.y+parseFloat(r)/2,s=u.x+parseFloat(t)/2,a=u.y-parseFloat(r)/2,new We(o,i,s,a)}},{key:"getLabelPxBoundsByText",value:function(e,t){var r,n,o,i,a=this.getLabelPxSize(t),s=M.cloneObject(e);if(t.labelAlign&&"cm"!==t.labelAlign)switch(t.labelAlign){case"lt":s.x+=a.w/2,s.y+=a.h/2;break;case"lm":s.x+=a.w/2;break;case"lb":s.x+=a.w/2,s.y-=a.h/2;break;case"ct":s.y+=a.h/2;break;case"cb":s.y-=a.h/2;break;case"rt":s.x-=a.w/2,s.y+=a.h/2;break;case"rm":s.x-=a.w/2;break;case"rb":s.x-=a.w/2,s.y-=a.h/2}return this.bsInfo.h=a.h,this.bsInfo.w=a.w,r=s.x-a.w/2,n=s.y+a.h/2,i=t.fontStyle&&"italic"===t.fontStyle?s.x+a.w/2+parseInt(parseFloat(t.fontSize)/2):s.x+a.w/2,o=s.y-a.h/2,new We(r,n,i,o)}},{key:"getLabelPxSize",value:function(e){var t,r,n,o,i=parseFloat(e.strokeWidth);t=e.label||this.text,r=e.fontSize?parseFloat(e.fontSize):parseFloat("12px");var a=t.split("\n"),s=a.length;o=s>1?r*s+s+i+.2*r:r+i+.2*r+1,n=0,this.labelWTmp&&n<this.labelWTmp&&(n=this.labelWTmp);for(var u=0;u<s;u++){var l=this.getTextCount(a[u]),c=this.labelWTmp=M.getTextBounds(e,a[u],this.element).textWidth+1*l.textC+i;n<c&&(n=c)}var f=new Object;return f.h=o,f.w=n,f}},{key:"getTextCount",value:function(e){for(var t={},r=0,n=0,o=0;o<e.length;o++)e.charCodeAt(o)>255?r++:n++;return t.cnC=r,t.enC=n,t.textC=e.length,t}}])&&Mo(r.prototype,n),o&&Mo(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Qo(e){"@babel/helpers - typeof";return(Qo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Go(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Uo(n.key),n)}}function Uo(e){var t=function(e,t){if("object"!=Qo(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Qo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Qo(t)?t:t+""}var zo=function(){return e=function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&r&&r.map&&r.renderer&&(this.id=M.createUniqueID(this.CLASS_NAME+"_"),this.lonlat=null,this.location=[],this.data=t,this.shapes=[],this.layer=r,this.CLASS_NAME="SuperMap.Feature.Theme")},(t=[{key:"destroy",value:function(){this.data=null,this.id=null,this.lonlat=null,this.location=null,this.shapes=null,this.layer=null}},{key:"getLocalXY",value:function(e){var t=this.layer.map.getResolution(),r=this.layer.map.getExtent();return e instanceof ot||e instanceof Fo?[e.x/t+-r.left/t,r.top/t-e.y/t]:e instanceof Ve?[e.lon/t+-r.left/t,r.top/t-e.lat/t]:null}}])&&Go(e.prototype,t),r&&Go(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function Ho(e){"@babel/helpers - typeof";return(Ho="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Vo(n.key),n)}}function Vo(e){var t=function(e,t){if("object"!=Ho(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Ho(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ho(t)?t:t+""}var Ko=function(){return e=function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.geometry=t,this.attributes=r},(t=[{key:"toFeature",value:function(){var e=To.toSuperMapGeometry(this.geometry),t=[];return this.geometry instanceof o().LngLat?t=[this.geometry.lng,this.geometry.lat]:this.geometry instanceof o().Point?t=[this.geometry.x,this.geometry.y]:3===this.geometry.length&&(e=new Fo(this.geometry[0],this.geometry[1],this.geometry[2])),t.length>1&&(e=new ot(t[0],t[1])),new pr(e,this.attributes)}}])&&qo(e.prototype,t),r&&qo(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function Yo(e){"@babel/helpers - typeof";return(Yo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Wo(n.key),n)}}function Wo(e){var t=function(e,t){if("object"!=Yo(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Yo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Yo(t)?t:t+""}var Xo=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.BUILTIN_OBJECT={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1},this._ctx=null,this._canvas=null,this._pixelCtx=null,this._width=null,this._height=null,this._offsetX=0,this._offsetY=0,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Util"},(t=[{key:"clone",value:function(e){var t=this.BUILTIN_OBJECT;if("object"==Yo(e)&&null!==e){var r=e;if(e instanceof Array){r=[];for(var n=0,o=e.length;n<o;n++)r[n]=this.clone(e[n])}else if(!t[Object.prototype.toString.call(e)])for(var i in r={},e)e.hasOwnProperty(i)&&(r[i]=this.clone(e[i]));return r}return e}},{key:"mergeItem",value:function(e,t,r,n){var o=this.BUILTIN_OBJECT;t.hasOwnProperty(r)&&("object"!=Yo(e[r])||o[Object.prototype.toString.call(e[r])]?!n&&r in e||(e[r]=t[r]):this.merge(e[r],t[r],n))}},{key:"merge",value:function(e,t,r){for(var n in t)this.mergeItem(e,t,n,r);return e}},{key:"getContext",value:function(){return this._ctx||(this._ctx=document.createElement("canvas").getContext("2d")),this._ctx}},{key:"getPixelContext",value:function(){return this._pixelCtx||(this._canvas=document.createElement("canvas"),this._width=this._canvas.width,this._height=this._canvas.height,this._pixelCtx=this._canvas.getContext("2d")),this._pixelCtx}},{key:"adjustCanvasSize",value:function(e,t){var r,n=this._canvas,o=this._pixelCtx,i=this._width,a=this._height,s=this._offsetX,u=this._offsetY;e+s>i&&(i=e+s+100,n.width=i,r=!0),t+u>a&&(a=t+u+100,n.height=a,r=!0),e<-s&&(i+=s=100*Math.ceil(-e/100),n.width=i,r=!0),t<-u&&(a+=u=100*Math.ceil(-t/100),n.height=a,r=!0),r&&o.translate(s,u)}},{key:"getPixelOffset",value:function(){return{x:this._offsetX,y:this._offsetY}}},{key:"indexOf",value:function(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}},{key:"inherits",value:function(e,t){var r=e.prototype;function n(){}for(var o in n.prototype=t.prototype,e.prototype=new n,r)e.prototype[o]=r[o];e.constructor=e}}])&&Jo(e.prototype,t),r&&Jo(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function Zo(e){"@babel/helpers - typeof";return(Zo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ei(n.key),n)}}function ei(e){var t=function(e,t){if("object"!=Zo(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Zo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Zo(t)?t:t+""}var ti=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._handlers={},this.CLASS_NAME="SuperMap.LevelRenderer.Eventful"},(t=[{key:"destroy",value:function(){this._handlers=null}},{key:"one",value:function(e,t,r){var n=this._handlers;return t&&e?(n[e]||(n[e]=[]),n[e].push({h:t,one:!0,ctx:r||this}),this):this}},{key:"bind",value:function(e,t,r){var n=this._handlers;return t&&e?(n[e]||(n[e]=[]),n[e].push({h:t,one:!1,ctx:r||this}),this):this}},{key:"unbind",value:function(e,t){var r=this._handlers;if(!e)return this._handlers={},this;if(t){if(r[e]){for(var n=[],o=0,i=r[e].length;o<i;o++)r[e][o].h!=t&&n.push(r[e][o]);r[e]=n}r[e]&&0===r[e].length&&delete r[e]}else delete r[e];return this}},{key:"dispatch",value:function(e){if(this._handlers[e]){var t=arguments,r=t.length;r>3&&(t=Array.prototype.slice.call(t,1));for(var n=this._handlers[e],o=n.length,i=0;i<o;){switch(r){case 1:n[i].h.call(n[i].ctx);break;case 2:n[i].h.call(n[i].ctx,t[1]);break;case 3:n[i].h.call(n[i].ctx,t[1],t[2]);break;default:n[i].h.apply(n[i].ctx,t)}n[i].one?(n.splice(i,1),o--):i++}}return this}},{key:"dispatchWithContext",value:function(e){if(this._handlers[e]){var t=arguments,r=t.length;r>4&&(t=Array.prototype.slice.call(t,1,t.length-1));for(var n=t[t.length-1],o=this._handlers[e],i=o.length,a=0;a<i;){switch(r){case 1:o[a].h.call(n);break;case 2:o[a].h.call(n,t[1]);break;case 3:o[a].h.call(n,t[1],t[2]);break;default:o[a].h.apply(n,t)}o[a].one?(o.splice(a,1),i--):a++}}return this}}])&&$o(e.prototype,t),r&&$o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function ri(e){"@babel/helpers - typeof";return(ri="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ni(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,oi(n.key),n)}}function oi(e){var t=function(e,t){if("object"!=ri(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ri(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ri(t)?t:t+""}var ii=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ArrayCtor="undefined"==typeof Float32Array?Array:Float32Array,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Vector"},(t=[{key:"create",value:function(e,t){var r=new(0,this.ArrayCtor)(2);return r[0]=e||0,r[1]=t||0,r}},{key:"copy",value:function(e,t){return e[0]=t[0],e[1]=t[1],e}},{key:"set",value:function(e,t,r){return e[0]=t,e[1]=r,e}},{key:"add",value:function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}},{key:"scaleAndAdd",value:function(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e}},{key:"sub",value:function(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e}},{key:"len",value:function(e){return Math.sqrt(this.lenSquare(e))}},{key:"lenSquare",value:function(e){return e[0]*e[0]+e[1]*e[1]}},{key:"mul",value:function(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e}},{key:"div",value:function(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e}},{key:"dot",value:function(e,t){return e[0]*t[0]+e[1]*t[1]}},{key:"scale",value:function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e}},{key:"normalize",value:function(e,t){var r=this.len(t);return 0===r?(e[0]=0,e[1]=0):(e[0]=t[0]/r,e[1]=t[1]/r),e}},{key:"distance",value:function(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}},{key:"distanceSquare",value:function(e,t){return(e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])}},{key:"negate",value:function(e,t){return e[0]=-t[0],e[1]=-t[1],e}},{key:"lerp",value:function(e,t,r,n){return e[0]=t[0]+n*(r[0]-t[0]),e[1]=t[1]+n*(r[1]-t[1]),e}},{key:"applyTransform",value:function(e,t,r){var n=t[0],o=t[1];return e[0]=r[0]*n+r[2]*o+r[4],e[1]=r[1]*n+r[3]*o+r[5],e}},{key:"min",value:function(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e}},{key:"max",value:function(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e}},{key:"length",value:function(e){return this.len(e)}},{key:"lengthSquare",value:function(e){return this.lenSquare(e)}},{key:"dist",value:function(e,t){return this.distance(e,t)}},{key:"distSquare",value:function(e,t){return this.distanceSquare(e,t)}}])&&ni(e.prototype,t),r&&ni(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function ai(e){"@babel/helpers - typeof";return(ai="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function si(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ui(n.key),n)}}function ui(e){var t=function(e,t){if("object"!=ai(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ai(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ai(t)?t:t+""}var li=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.vector=new ii,this.EPSILON=1e-4,this.THREE_SQRT=Math.sqrt(3),this.ONE_THIRD=1/3,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Curve"},(t=[{key:"isAroundZero",value:function(e){return e>-this.EPSILON&&e<this.EPSILON}},{key:"isNotAroundZero",value:function(e){return e>this.EPSILON||e<-this.EPSILON}},{key:"cubicAt",value:function(e,t,r,n,o){var i=1-o;return i*i*(i*e+3*o*t)+o*o*(o*n+3*i*r)}},{key:"cubicDerivativeAt",value:function(e,t,r,n,o){var i=1-o;return 3*(((t-e)*i+2*(r-t)*o)*i+(n-r)*o*o)}},{key:"cubicRootAt",value:function(e,t,r,n,o,i){var a=n+3*(t-r)-e,s=3*(r-2*t+e),u=3*(t-e),l=e-o,c=s*s-3*a*u,f=s*u-9*a*l,p=u*u-3*s*l,h=0;if(this.isAroundZero(c)&&this.isAroundZero(f))if(this.isAroundZero(s))i[0]=0;else{var y=-u/s;y>=0&&y<=1&&(i[h++]=y)}else{var d=f*f-4*c*p;if(this.isAroundZero(d)){var m=f/c,g=-s/a+m,v=-m/2;g>=0&&g<=1&&(i[h++]=g),v>=0&&v<=1&&(i[h++]=v)}else if(d>0){var b=Math.sqrt(d),A=c*s+1.5*a*(-f+b),w=c*s+1.5*a*(-f-b),S=(-s-((A=A<0?-Math.pow(-A,this.ONE_THIRD):Math.pow(A,this.ONE_THIRD))+(w=w<0?-Math.pow(-w,this.ONE_THIRD):Math.pow(w,this.ONE_THIRD))))/(3*a);S>=0&&S<=1&&(i[h++]=S)}else{var C=(2*c*s-3*a*f)/(2*Math.sqrt(c*c*c)),E=Math.acos(C)/3,_=Math.sqrt(c),I=Math.cos(E),O=(-s-2*_*I)/(3*a),x=(-s+_*(I+this.THREE_SQRT*Math.sin(E)))/(3*a),P=(-s+_*(I-this.THREE_SQRT*Math.sin(E)))/(3*a);O>=0&&O<=1&&(i[h++]=O),x>=0&&x<=1&&(i[h++]=x),P>=0&&P<=1&&(i[h++]=P)}}return h}},{key:"cubicExtrema",value:function(e,t,r,n,o){var i=6*r-12*t+6*e,a=9*t+3*n-3*e-9*r,s=3*t-3*e,u=0;if(this.isAroundZero(a)){if(this.isNotAroundZero(i)){var l=-s/i;l>=0&&l<=1&&(o[u++]=l)}}else{var c=i*i-4*a*s;if(this.isAroundZero(c))o[0]=-i/(2*a);else if(c>0){var f=Math.sqrt(c),p=(-i+f)/(2*a),h=(-i-f)/(2*a);p>=0&&p<=1&&(o[u++]=p),h>=0&&h<=1&&(o[u++]=h)}}return u}},{key:"cubicSubdivide",value:function(e,t,r,n,o,i){var a=(t-e)*o+e,s=(r-t)*o+t,u=(n-r)*o+r,l=(s-a)*o+a,c=(u-s)*o+s,f=(c-l)*o+l;i[0]=e,i[1]=a,i[2]=l,i[3]=f,i[4]=f,i[5]=c,i[6]=u,i[7]=n}},{key:"cubicProjectPoint",value:function(e,t,r,n,o,i,a,s,u,l,c){var f,p=this.vector.create(),h=this.vector.create(),y=this.vector.create(),d=.005,m=1/0;p[0]=u,p[1]=l;for(var g=0;g<1;g+=.05){h[0]=this.cubicAt(e,r,o,a,g),h[1]=this.cubicAt(t,n,i,s,g);var v=this.vector.distSquare(p,h);v<m&&(f=g,m=v)}m=1/0;for(var b=0;b<32&&!(d<this.EPSILON);b++){var A=f-d,w=f+d;h[0]=this.cubicAt(e,r,o,a,A),h[1]=this.cubicAt(t,n,i,s,A);var S=this.vector.distSquare(h,p);if(A>=0&&S<m)f=A,m=S;else{y[0]=this.cubicAt(e,r,o,a,w),y[1]=this.cubicAt(t,n,i,s,w);var C=this.vector.distSquare(y,p);w<=1&&C<m?(f=w,m=C):d*=.5}}return c&&(c[0]=this.cubicAt(e,r,o,a,f),c[1]=this.cubicAt(t,n,i,s,f)),Math.sqrt(m)}},{key:"quadraticAt",value:function(e,t,r,n){var o=1-n;return o*(o*e+2*n*t)+n*n*r}},{key:"quadraticDerivativeAt",value:function(e,t,r,n){return 2*((1-n)*(t-e)+n*(r-t))}},{key:"quadraticRootAt",value:function(e,t,r,n,o){var i=e-2*t+r,a=2*(t-e),s=e-n,u=0;if(this.isAroundZero(i)){if(this.isNotAroundZero(a)){var l=-s/a;l>=0&&l<=1&&(o[u++]=l)}}else{var c=a*a-4*i*s;if(this.isAroundZero(c)){var f=-a/(2*i);f>=0&&f<=1&&(o[u++]=f)}else if(c>0){var p=Math.sqrt(c),h=(-a+p)/(2*i),y=(-a-p)/(2*i);h>=0&&h<=1&&(o[u++]=h),y>=0&&y<=1&&(o[u++]=y)}}return u}},{key:"quadraticExtremum",value:function(e,t,r){var n=e+r-2*t;return 0===n?.5:(e-t)/n}},{key:"quadraticProjectPoint",value:function(e,t,r,n,o,i,a,s,u){var l,c=this.vector.create(),f=this.vector.create(),p=this.vector.create(),h=.005,y=1/0;c[0]=a,c[1]=s;for(var d=0;d<1;d+=.05){f[0]=this.quadraticAt(e,r,o,d),f[1]=this.quadraticAt(t,n,i,d);var m=this.vector.distSquare(c,f);m<y&&(l=d,y=m)}y=1/0;for(var g=0;g<32&&!(h<this.EPSILON);g++){var v=l-h,b=l+h;f[0]=this.quadraticAt(e,r,o,v),f[1]=this.quadraticAt(t,n,i,v);var A=this.vector.distSquare(f,c);if(v>=0&&A<y)l=v,y=A;else{p[0]=this.quadraticAt(e,r,o,b),p[1]=this.quadraticAt(t,n,i,b);var w=this.vector.distSquare(p,c);b<=1&&w<y?(l=b,y=w):h*=.5}}return u&&(u[0]=this.quadraticAt(e,r,o,l),u[1]=this.quadraticAt(t,n,i,l)),Math.sqrt(y)}}])&&si(e.prototype,t),r&&si(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function ci(e){"@babel/helpers - typeof";return(ci="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,pi(n.key),n)}}function pi(e){var t=function(e,t){if("object"!=ci(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ci(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ci(t)?t:t+""}var hi=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.util=new Xo,this.curve=new li,this._ctx=null,this._textWidthCache={},this._textHeightCache={},this._textWidthCacheCounter=0,this._textHeightCacheCounter=0,this.TEXT_CACHE_MAX=5e3,this.PI2=2*Math.PI,this.roots=[-1,-1,-1],this.extrema=[-1,-1],this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Area"},(t=[{key:"normalizeRadian",value:function(e){return(e%=this.PI2)<0&&(e+=this.PI2),e}},{key:"isInside",value:function(e,t,r,n){if(!t||!e)return!1;var o=e.type;this._ctx=this._ctx||this.util.getContext();var i=this._mathMethod(e,t,r,n);if(void 0!==i)return i;if(e.buildPath&&this._ctx.isPointInPath)return this._buildPathMethod(e,this._ctx,t,r,n);switch(o){case"ellipse":case"smicellipse":return!0;case"trochoid":var a="out"==t.location?t.r1+t.r2+t.d:t.r1-t.r2+t.d;return this.isInsideCircle(t,r,n,a);case"rose":return this.isInsideCircle(t,r,n,t.maxr);default:return!1}}},{key:"_mathMethod",value:function(e,t,r,n){switch(e.type){case"bezier-curve":return void 0===t.cpX2?this.isInsideQuadraticStroke(t.xStart,t.yStart,t.cpX1,t.cpY1,t.xEnd,t.yEnd,t.lineWidth,r,n):this.isInsideCubicStroke(t.xStart,t.yStart,t.cpX1,t.cpY1,t.cpX2,t.cpY2,t.xEnd,t.yEnd,t.lineWidth,r,n);case"line":return this.isInsideLine(t.xStart,t.yStart,t.xEnd,t.yEnd,t.lineWidth,r,n);case"broken-line":return this.isInsideBrokenLine(t.pointList,t.lineWidth,r,n);case"smicbroken-line":var o=r,i=n;return e.refOriginalPosition&&(o=r-e.refOriginalPosition[0],i=n-e.refOriginalPosition[1]),this.isInsideBrokenLine(t.pointList,t.lineWidth,o,i);case"ring":return this.isInsideRing(t.x,t.y,t.r0,t.r,r,n);case"smicring":var a=t.x,s=t.y;return e.refOriginalPosition&&(a=t.x+e.refOriginalPosition[0],s=t.y+e.refOriginalPosition[1]),this.isInsideRing(a,s,t.r0,t.r,r,n);case"circle":return this.isInsideCircle(t.x,t.y,t.r,r,n);case"smicpoint":var u=r,l=n;return e.refOriginalPosition&&(u=r-e.refOriginalPosition[0],l=n-e.refOriginalPosition[1]),this.isInsideCircle(t.x,t.y,t.r,u,l);case"sector":var c=t.startAngle*Math.PI/180,f=t.endAngle*Math.PI/180;return t.clockWise||(c=-c,f=-f),this.isInsideSector(t.x,t.y,t.r0,t.r,c,f,!t.clockWise,r,n);case"smicsector":var p=t.startAngle*Math.PI/180,h=t.endAngle*Math.PI/180;t.clockWise||(p=-p,h=-h);var y=t.x,d=t.y;return e.refOriginalPosition&&(y=t.x+e.refOriginalPosition[0],d=t.y+e.refOriginalPosition[1]),this.isInsideSector(y,d,t.r0,t.r,p,h,!t.clockWise,r,n);case"path":return this.isInsidePath(t.pathArray,Math.max(t.lineWidth,5),t.brushType,r,n);case"polygon":case"star":case"smicstar":case"isogon":case"smicisogon":return this.isInsidePolygon(t.pointList,r,n);case"smicpolygon":var m=r,g=n;if(e.refOriginalPosition&&(m=r-e.refOriginalPosition[0],g=n-e.refOriginalPosition[1]),e.holePolygonPointLists&&e.holePolygonPointLists.length>0){for(var v=this.isInsidePolygon(t.pointList,m,g),b=e.holePolygonPointLists,A=!1,w=0,S=b.length;w<S;w++){var C=b[w];!0===this.isInsidePolygon(C,m,g)&&(A=!0)}return!0===v&&!1===A}return this.isInsidePolygon(t.pointList,m,g);case"text":var E=t.__rect||e.getRect(t);return this.isInsideRect(E.x,E.y,E.width,E.height,r,n);case"smictext":var _=e.getTextBackground(t);return this.isInsidePolygon(_,r,n);case"rectangle":case"image":return this.isInsideRect(t.x,t.y,t.width,t.height,r,n);case"smicimage":var I=t.x,O=t.y;return e.refOriginalPosition&&(I=t.x+e.refOriginalPosition[0],O=t.y+e.refOriginalPosition[1]),this.isInsideRect(I,O,t.width,t.height,r,n)}}},{key:"_buildPathMethod",value:function(e,t,r,n,o){return t.beginPath(),e.buildPath(t,r),t.closePath(),t.isPointInPath(n,o)}},{key:"isOutside",value:function(e,t,r,n){return!this.isInside(e,t,r,n)}},{key:"isInsideLine",value:function(e,t,r,n,o,i,a){if(0===o)return!1;var s=Math.max(o,5),u=0;if(a>t+s&&a>n+s||a<t-s&&a<n-s||i>e+s&&i>r+s||i<e-s&&i<r-s)return!1;if(e===r)return Math.abs(i-e)<=s/2;var l=(u=(t-n)/(e-r))*i-a+(e*n-r*t)/(e-r);return l*l/(u*u+1)<=s/2*s/2}},{key:"isInsideCubicStroke",value:function(e,t,r,n,o,i,a,s,u,l,c){if(0===u)return!1;var f=Math.max(u,5);return!(c>t+f&&c>n+f&&c>i+f&&c>s+f||c<t-f&&c<n-f&&c<i-f&&c<s-f||l>e+f&&l>r+f&&l>o+f&&l>a+f||l<e-f&&l<r-f&&l<o-f&&l<a-f)&&this.curve.cubicProjectPoint(e,t,r,n,o,i,a,s,l,c,null)<=f/2}},{key:"isInsideQuadraticStroke",value:function(e,t,r,n,o,i,a,s,u){if(0===a)return!1;var l=Math.max(a,5);return!(u>t+l&&u>n+l&&u>i+l||u<t-l&&u<n-l&&u<i-l||s>e+l&&s>r+l&&s>o+l||s<e-l&&s<r-l&&s<o-l)&&this.curve.quadraticProjectPoint(e,t,r,n,o,i,s,u,null)<=l/2}},{key:"isInsideArcStroke",value:function(e,t,r,n,o,i,a,s,u){var l=this.PI2;if(0===a)return!1;var c=Math.max(a,5);s-=e,u-=t;var f=Math.sqrt(s*s+u*u);if(f-c>r||f+c<r)return!1;if(Math.abs(n-o)>=l)return!0;if(i){var p=n;n=this.normalizeRadian(o),o=this.normalizeRadian(p)}else n=this.normalizeRadian(n),o=this.normalizeRadian(o);n>o&&(o+=l);var h=Math.atan2(u,s);return h<0&&(h+=l),h>=n&&h<=o||h+l>=n&&h+l<=o}},{key:"isInsideBrokenLine",value:function(e,t,r,n){for(var o=Math.max(t,10),i=0,a=e.length-1;i<a;i++){var s=e[i][0],u=e[i][1],l=e[i+1][0],c=e[i+1][1];if(this.isInsideLine(s,u,l,c,o,r,n))return!0}return!1}},{key:"isInsideRing",value:function(e,t,r,n,o,i){var a=(o-e)*(o-e)+(i-t)*(i-t);return a<n*n&&a>r*r}},{key:"isInsideRect",value:function(e,t,r,n,o,i){return o>=e&&o<=e+r&&i>=t&&i<=t+n}},{key:"isInsideCircle",value:function(e,t,r,n,o){return(n-e)*(n-e)+(o-t)*(o-t)<r*r}},{key:"isInsideSector",value:function(e,t,r,n,o,i,a,s,u){return this.isInsideArcStroke(e,t,(r+n)/2,o,i,a,n-r,s,u)}},{key:"isInsidePolygon",value:function(e,t,r){for(var n=e.length,o=0,i=0,a=n-1;i<n;i++){var s=e[a][0],u=e[a][1],l=e[i][0],c=e[i][1];o+=this.windingLine(s,u,l,c,t,r),a=i}return 0!==o}},{key:"windingLine",value:function(e,t,r,n,o,i){return i>t&&i>n||i<t&&i<n?0:n==t?0:(i-t)/(n-t)*(r-e)+e>o?n<t?1:-1:0}},{key:"swapExtrema",value:function(){var e=this.extrema[0];this.extrema[0]=this.extrema[1],this.extrema[1]=e}},{key:"windingCubic",value:function(e,t,r,n,o,i,a,s,u,l){var c=this.curve,f=this.roots,p=this.extrema;if(l>t&&l>n&&l>i&&l>s||l<t&&l<n&&l<i&&l<s)return 0;var h=c.cubicRootAt(t,n,i,s,l,f);if(0===h)return 0;for(var y,d,m=0,g=-1,v=0;v<h;v++){var b=f[v];c.cubicAt(e,r,o,a,b)<u||(g<0&&(g=c.cubicExtrema(t,n,i,s,p),p[1]<p[0]&&g>1&&this.swapExtrema(),y=c.cubicAt(t,n,i,s,p[0]),g>1&&(d=c.cubicAt(t,n,i,s,p[1]))),2==g?b<p[0]?m+=y<t?1:-1:b<p[1]?m+=d<y?1:-1:m+=s<d?1:-1:b<p[0]?m+=y<t?1:-1:m+=s<y?1:-1)}return m}},{key:"windingQuadratic",value:function(e,t,r,n,o,i,a,s){var u=this.curve,l=this.roots;if(s>t&&s>n&&s>i||s<t&&s<n&&s<i)return 0;var c=u.quadraticRootAt(t,n,i,s,l);if(0===c)return 0;var f=u.quadraticExtremum(t,n,i);if(f>=0&&f<=1){for(var p=0,h=u.quadraticAt(t,n,i,f),y=0;y<c;y++){u.quadraticAt(e,r,o,l[y])>a||(l[y]<f?p+=h<t?1:-1:p+=i<h?1:-1)}return p}return u.quadraticAt(e,r,o,l[0])>a?0:i<t?1:-1}},{key:"windingArc",value:function(e,t,r,n,o,i,a,s){var u=this.roots,l=this.PI2;if((s-=t)>r||s<-r)return 0;var c=Math.sqrt(r*r-s*s);if(u[0]=-c,u[1]=c,Math.abs(n-o)>=l){n=0,o=l;var f=i?1:-1;return a>=u[0]+e&&a<=u[1]+e?f:0}if(i){var p=n;n=this.normalizeRadian(o),o=this.normalizeRadian(p)}else n=this.normalizeRadian(n),o=this.normalizeRadian(o);n>o&&(o+=l);for(var h=0,y=0;y<2;y++){var d=u[y];if(d+e>a){var m=Math.atan2(s,d),g=i?1:-1;m<0&&(m=l+m),(m>=n&&m<=o||m+l>=n&&m+l<=o)&&(m>Math.PI/2&&m<1.5*Math.PI&&(g=-g),h+=g)}}return h}},{key:"isInsidePath",value:function(e,t,r,n,o){for(var i=0,a=0,s=0,u=0,l=0,c=!0,f=!0,p="stroke"===(r=r||"fill")||"both"===r,h="fill"===r||"both"===r,y=0;y<e.length;y++){var d=e[y],m=d.points;if(c||"M"===d.command){if(y>0&&(h&&(i+=this.windingLine(a,s,u,l,n,o)),0!==i))return!0;u=m[m.length-2],l=m[m.length-1],c=!1,f&&"A"!==d.command&&(f=!1,a=u,s=l)}switch(d.command){case"M":a=m[0],s=m[1];break;case"L":if(p&&this.isInsideLine(a,s,m[0],m[1],t,n,o))return!0;h&&(i+=this.windingLine(a,s,m[0],m[1],n,o)),a=m[0],s=m[1];break;case"C":if(p&&this.isInsideCubicStroke(a,s,m[0],m[1],m[2],m[3],m[4],m[5],t,n,o))return!0;h&&(i+=this.windingCubic(a,s,m[0],m[1],m[2],m[3],m[4],m[5],n,o)),a=m[4],s=m[5];break;case"Q":if(p&&this.isInsideQuadraticStroke(a,s,m[0],m[1],m[2],m[3],t,n,o))return!0;h&&(i+=this.windingQuadratic(a,s,m[0],m[1],m[2],m[3],n,o)),a=m[2],s=m[3];break;case"A":var g=m[0],v=m[1],b=m[2],A=m[3],w=m[4],S=m[5],C=Math.cos(w)*b+g,E=Math.sin(w)*A+v;f?(f=!1,u=C,l=E):i+=this.windingLine(a,s,C,E);var _=(n-g)*A/b+g;if(p&&this.isInsideArcStroke(g,v,A,w,w+S,1-m[7],t,_,o))return!0;h&&(i+=this.windingArc(g,v,A,w,w+S,1-m[7],_,o)),a=Math.cos(w+S)*b+g,s=Math.sin(w+S)*A+v;break;case"z":if(p&&this.isInsideLine(a,s,u,l,t,n,o))return!0;c=!0}}return h&&(i+=this.windingLine(a,s,u,l,n,o)),0!==i}},{key:"getTextWidth",value:function(e,t){var r=e+":"+t;if(this._textWidthCache[r])return this._textWidthCache[r];this._ctx=this._ctx||this.util.getContext(),this._ctx.save(),t&&(this._ctx.font=t);for(var n=0,o=0,i=(e=(e+"").split("\n")).length;o<i;o++)n=Math.max(this._ctx.measureText(e[o]).width,n);return this._ctx.restore(),this._textWidthCache[r]=n,++this._textWidthCacheCounter>this.TEXT_CACHE_MAX&&(this._textWidthCacheCounter=0,this._textWidthCache={}),n}},{key:"getTextHeight",value:function(e,t){var r=e+":"+t;if(this._textHeightCache[r])return this._textHeightCache[r];this._ctx=this._ctx||this.util.getContext(),this._ctx.save(),t&&(this._ctx.font=t),e=(e+"").split("\n");var n=(this._ctx.measureText("ZH").width+2)*e.length;return this._ctx.restore(),this._textHeightCache[r]=n,++this._textHeightCacheCounter>this.TEXT_CACHE_MAX&&(this._textHeightCacheCounter=0,this._textHeightCache={}),n}}])&&fi(e.prototype,t),r&&fi(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function yi(e){"@babel/helpers - typeof";return(yi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function di(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,mi(n.key),n)}}function mi(e){var t=function(e,t){if("object"!=yi(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=yi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==yi(t)?t:t+""}var gi=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.util=new Xo,this._ctx=null,this.palette=["#ff9277"," #dddd00"," #ffc877"," #bbe3ff"," #d5ffbb","#bbbbff"," #ddb000"," #b0dd00"," #e2bbff"," #ffbbe3","#ff7777"," #ff9900"," #83dd00"," #77e3ff"," #778fff","#c877ff"," #ff77ab"," #ff6600"," #aa8800"," #77c7ff","#ad77ff"," #ff77ff"," #dd0083"," #777700"," #00aa00","#0088aa"," #8400dd"," #aa0088"," #dd0000"," #772e00"],this._palette=this.palette,this.highlightColor="rgba(0,0,255,1)",this._highlightColor=this.highlightColor,this.colorRegExp=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,this._nameColors={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#0ff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000",blanchedalmond:"#ffebcd",blue:"#00f",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#f0f",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#0f0",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#f0f",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#f00",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#fff",whitesmoke:"#f5f5f5",yellow:"#ff0",yellowgreen:"#9acd32"},this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Color"}return t=e,(r=[{key:"customPalette",value:function(e){this.palette=e}},{key:"resetPalette",value:function(){this.palette=this._palette}},{key:"getColor",value:function(e,t){return e|=0,(t=t||this.palette)[e%t.length]}},{key:"customHighlight",value:function(e){this.highlightColor=e}},{key:"resetHighlight",value:function(){this.highlightColor=this._highlightColor}},{key:"getHighlightColor",value:function(){return this.highlightColor}},{key:"getRadialGradient",value:function(e,t,r,n,o,i,a){var s=this.util;this._ctx||(this._ctx=s.getContext());for(var u=this._ctx.createRadialGradient(e,t,r,n,o,i),l=0,c=a.length;l<c;l++)u.addColorStop(a[l][0],a[l][1]);return u.__nonRecursion=!0,u}},{key:"getLinearGradient",value:function(e,t,r,n,o){var i=this.util;this._ctx||(this._ctx=i.getContext());for(var a=this._ctx.createLinearGradient(e,t,r,n),s=0,u=o.length;s<u;s++)a.addColorStop(o[s][0],o[s][1]);return a.__nonRecursion=!0,a}},{key:"getStepColors",value:function(e,t,r){e=this.toRGBA(e),t=this.toRGBA(t),e=this.getData(e);for(var n=[],o=((t=this.getData(t))[0]-e[0])/r,i=(t[1]-e[1])/r,a=(t[2]-e[2])/r,s=(t[3]-e[3])/r,u=0,l=e[0],c=e[1],f=e[2],p=e[3];u<r;u++)n[u]=this.toColor([this.adjust(Math.floor(l),[0,255]),this.adjust(Math.floor(c),[0,255]),this.adjust(Math.floor(f),[0,255]),p.toFixed(4)-0],"rgba"),l+=o,c+=i,f+=a,p+=s;return l=t[0],c=t[1],f=t[2],p=t[3],n[u]=this.toColor([l,c,f,p],"rgba"),n}},{key:"getGradientColors",value:function(e,t){var r=[],n=e.length;if(void 0===t&&(t=20),1===n)r=this.getStepColors(e[0],e[0],t);else if(n>1)for(var o=0,i=n-1;o<i;o++){var a=this.getStepColors(e[o],e[o+1],t);o<i-1&&a.pop(),r=r.concat(a)}return r}},{key:"toColor",value:function(e,t){if(t=t||"rgb",e&&(3===e.length||4===e.length)){if(e=this.map(e,function(e){return e>1?Math.ceil(e):e}),t.indexOf("hex")>-1)return"#"+((1<<24)+(e[0]<<16)+(e[1]<<8)+ +e[2]).toString(16).slice(1);if(t.indexOf("hs")>-1){var r=this.map(e.slice(1,3),function(e){return e+"%"});e[1]=r[0],e[2]=r[1]}return t.indexOf("a")>-1?(3===e.length&&e.push(1),e[3]=this.adjust(e[3],[0,1]),t+"("+e.slice(0,4).join(",")+")"):t+"("+e.slice(0,3).join(",")+")"}}},{key:"toArray",value:function(e){(e=this.trim(e)).indexOf("rgba")<0&&(e=this.toRGBA(e));var t=[],r=0;return e.replace(/[\d.]+/g,function(e){r<3?e|=0:e=+e,t[r++]=e}),t}},{key:"convert",value:function(e,t){if(!this.isCalculableColor(e))return e;var r=this.getData(e),n=r[3];return void 0===n&&(n=1),e.indexOf("hsb")>-1?r=this._HSV_2_RGB(r):e.indexOf("hsl")>-1&&(r=this._HSL_2_RGB(r)),t.indexOf("hsb")>-1||t.indexOf("hsv")>-1?r=this._RGB_2_HSB(r):t.indexOf("hsl")>-1&&(r=this._RGB_2_HSL(r)),r[3]=n,this.toColor(r,t)}},{key:"toRGBA",value:function(e){return this.convert(e,"rgba")}},{key:"toRGB",value:function(e){return this.convert(e,"rgb")}},{key:"toHex",value:function(e){return this.convert(e,"hex")}},{key:"toHSVA",value:function(e){return this.convert(e,"hsva")}},{key:"toHSV",value:function(e){return this.convert(e,"hsv")}},{key:"toHSBA",value:function(e){return this.convert(e,"hsba")}},{key:"toHSB",value:function(e){return this.convert(e,"hsb")}},{key:"toHSLA",value:function(e){return this.convert(e,"hsla")}},{key:"toHSL",value:function(e){return this.convert(e,"hsl")}},{key:"toName",value:function(e){for(var t in this._nameColors)if(this.toHex(this._nameColors[t])===this.toHex(e))return t;return null}},{key:"trim",value:function(e){return String(e).replace(/\s+/g,"")}},{key:"normalize",value:function(e){if(this._nameColors[e]&&(e=this._nameColors[e]),e=(e=this.trim(e)).replace(/hsv/i,"hsb"),/^#[\da-f]{3}$/i.test(e)){var t=(3840&(e=parseInt(e.slice(1),16)))<<8,r=(240&e)<<4,n=15&e;e="#"+((1<<24)+(t<<4)+t+(r<<4)+r+(n<<4)+n).toString(16).slice(1)}return e}},{key:"lift",value:function(e,t){if(!this.isCalculableColor(e))return e;var r=t>0?1:-1;void 0===t&&(t=0),t=Math.abs(t)>1?1:Math.abs(t),e=this.toRGB(e);for(var n=this.getData(e),o=0;o<3;o++)n[o]=1===r?n[o]*(1-t)|0:(255-n[o])*t+n[o]|0;return"rgb("+n.join(",")+")"}},{key:"reverse",value:function(e){if(!this.isCalculableColor(e))return e;var t=this.getData(this.toRGBA(e));return t=this.map(t,function(e){return 255-e}),this.toColor(t,"rgb")}},{key:"mix",value:function(e,t,r){if(!this.isCalculableColor(e)||!this.isCalculableColor(t))return e;void 0===r&&(r=.5);for(var n=2*(r=1-this.adjust(r,[0,1]))-1,o=this.getData(this.toRGBA(e)),i=this.getData(this.toRGBA(t)),a=o[3]-i[3],s=((n*a==-1?n:(n+a)/(1+n*a))+1)/2,u=1-s,l=[],c=0;c<3;c++)l[c]=o[c]*s+i[c]*u;var f=o[3]*r+i[3]*(1-r);return f=Math.max(0,Math.min(1,f)),1===o[3]&&1===i[3]?this.toColor(l,"rgb"):(l[3]=f,this.toColor(l,"rgba"))}},{key:"random",value:function(){return"#"+Math.random().toString(16).slice(2,8)}},{key:"getData",value:function(t){var r,n,o=(t=this.normalize(t)).match(this.colorRegExp);if(null===o)throw new Error("The color format error");var i,a=[];if(o[2])i=[(r=o[2].replace("#","").split(""))[0]+r[1],r[2]+r[3],r[4]+r[5]],a=this.map(i,function(t){return e.prototype.adjust.call(this,parseInt(t,16),[0,255])});else if(o[4]){var s=o[4].split(",");n=s[3],i=s.slice(0,3),a=this.map(i,function(t){return t=Math.floor(t.indexOf("%")>0?2.55*parseInt(t,0):t),e.prototype.adjust.call(this,t,[0,255])}),void 0!==n&&a.push(this.adjust(parseFloat(n),[0,1]))}else if(o[5]||o[6]){var u=(o[5]||o[6]).split(","),l=parseInt(u[0],0)/360,c=u[1],f=u[2];n=u[3],(a=this.map([c,f],function(t){return e.prototype.adjust.call(this,parseFloat(t)/100,[0,1])})).unshift(l),void 0!==n&&a.push(this.adjust(parseFloat(n),[0,1]))}return a}},{key:"alpha",value:function(e,t){if(!this.isCalculableColor(e))return e;null===t&&(t=1);var r=this.getData(this.toRGBA(e));return r[3]=this.adjust(Number(t).toFixed(4),[0,1]),this.toColor(r,"rgba")}},{key:"map",value:function(e,t){if("function"!=typeof t)throw new TypeError;for(var r=e?e.length:0,n=0;n<r;n++)e[n]=t(e[n]);return e}},{key:"adjust",value:function(e,t){return e<=t[0]?e=t[0]:e>=t[1]&&(e=t[1]),e}},{key:"isCalculableColor",value:function(e){return e instanceof Array||"string"==typeof e}},{key:"_HSV_2_RGB",value:function(e){var t,r,n,o=e[0],i=e[1],a=e[2];if(0===i)t=255*a,r=255*a,n=255*a;else{var s=6*o;6===s&&(s=0);var u=0|s,l=a*(1-i),c=a*(1-i*(s-u)),f=a*(1-i*(1-(s-u))),p=0,h=0,y=0;0===u?(p=a,h=f,y=l):1===u?(p=c,h=a,y=l):2===u?(p=l,h=a,y=f):3===u?(p=l,h=c,y=a):4===u?(p=f,h=l,y=a):(p=a,h=l,y=c),t=255*p,r=255*h,n=255*y}return[t,r,n]}},{key:"_HSL_2_RGB",value:function(e){var t,r,n,o=e[0],i=e[1],a=e[2];if(0===i)t=255*a,r=255*a,n=255*a;else{var s,u=2*a-(s=a<.5?a*(1+i):a+i-i*a);t=255*this._HUE_2_RGB(u,s,o+1/3),r=255*this._HUE_2_RGB(u,s,o),n=255*this._HUE_2_RGB(u,s,o-1/3)}return[t,r,n]}},{key:"_HUE_2_RGB",value:function(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),6*r<1?e+6*(t-e)*r:2*r<1?t:3*r<2?e+(t-e)*(2/3-r)*6:e}},{key:"_RGB_2_HSB",value:function(e){var t,r,n=e[0]/255,o=e[1]/255,i=e[2]/255,a=Math.min(n,o,i),s=Math.max(n,o,i),u=s-a,l=s;if(0===u)t=0,r=0;else{r=u/s;var c=((s-n)/6+u/2)/u,f=((s-o)/6+u/2)/u,p=((s-i)/6+u/2)/u;n===s?t=p-f:o===s?t=1/3+c-p:i===s&&(t=2/3+f-c),t<0&&(t+=1),t>1&&(t-=1)}return[t*=360,r*=100,l*=100]}},{key:"_RGB_2_HSL",value:function(e){var t,r,n=e[0]/255,o=e[1]/255,i=e[2]/255,a=Math.min(n,o,i),s=Math.max(n,o,i),u=s-a,l=(s+a)/2;if(0===u)t=0,r=0;else{r=l<.5?u/(s+a):u/(2-s-a);var c=((s-n)/6+u/2)/u,f=((s-o)/6+u/2)/u,p=((s-i)/6+u/2)/u;n===s?t=p-f:o===s?t=1/3+c-p:i===s&&(t=2/3+f-c),t<0&&(t+=1),t>1&&(t-=1)}return[t*=360,r*=100,l*=100]}}])&&di(t.prototype,r),n&&di(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function vi(e){"@babel/helpers - typeof";return(vi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ai(n.key),n)}}function Ai(e){var t=function(e,t){if("object"!=vi(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=vi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==vi(t)?t:t+""}var wi=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),3===arguments.length&&this.computeBoundingBox(arguments),this.CLASS_NAME="SuperMap.LevelRenderer.Tool.ComputeBoundingBox"},(t=[{key:"computeBoundingBox",value:function(e,t,r){if(0!==e.length){for(var n=e[0][0],o=e[0][0],i=e[0][1],a=e[0][1],s=1;s<e.length;s++){var u=e[s];u[0]<n&&(n=u[0]),u[0]>o&&(o=u[0]),u[1]<i&&(i=u[1]),u[1]>a&&(a=u[1])}t[0]=n,t[1]=i,r[0]=o,r[1]=a}}},{key:"cubeBezier",value:function(e,t,r,n,o,i){var a=new li,s=[];a.cubicExtrema(e[0],t[0],r[0],n[0],s);for(var u=0;u<s.length;u++)s[u]=a.cubicAt(e[0],t[0],r[0],n[0],s[u]);var l=[];a.cubicExtrema(e[1],t[1],r[1],n[1],l);for(var c=0;c<l.length;c++)l[c]=a.cubicAt(e[1],t[1],r[1],n[1],l[c]);s.push(e[0],n[0]),l.push(e[1],n[1]);var f=Math.min.apply(null,s),p=Math.max.apply(null,s),h=Math.min.apply(null,l),y=Math.max.apply(null,l);o[0]=f,o[1]=h,i[0]=p,i[1]=y}},{key:"quadraticBezier",value:function(e,t,r,n,o){var i=new li,a=i.quadraticExtremum(e[0],t[0],r[0]),s=i.quadraticExtremum(e[1],t[1],r[1]),u=1-(a=Math.max(Math.min(a,1),0)),l=1-(s=Math.max(Math.min(s,1),0)),c=u*u*e[0]+2*u*a*t[0]+a*a*r[0],f=u*u*e[1]+2*u*a*t[1]+a*a*r[1],p=l*l*e[0]+2*l*s*t[0]+s*s*r[0],h=l*l*e[1]+2*l*s*t[1]+s*s*r[1];n[0]=Math.min(e[0],r[0],c,p),n[1]=Math.min(e[1],r[1],f,h),o[0]=Math.max(e[0],r[0],c,p),o[1]=Math.max(e[1],r[1],f,h)}},{key:"arc",value:function(e,t,r,n,o,i,a,s){var u=new ii,l=u.create(),c=u.create(),f=u.create();if(l[0]=Math.cos(n)*r+e,l[1]=Math.sin(n)*r+t,c[0]=Math.cos(o)*r+e,c[1]=Math.sin(o)*r+t,u.min(a,l,c),u.max(s,l,c),(n%=2*Math.PI)<0&&(n+=2*Math.PI),(o%=2*Math.PI)<0&&(o+=2*Math.PI),n>o&&!i?o+=2*Math.PI:n<o&&i&&(n+=2*Math.PI),i){var p=o;o=n,n=p}for(var h=0;h<o;h+=Math.PI/2)h>n&&(f[0]=Math.cos(h)*r+e,f[1]=Math.sin(h)*r+t,u.min(a,f,a),u.max(s,f,s))}}])&&bi(e.prototype,t),r&&bi(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function Si(e){"@babel/helpers - typeof";return(Si="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ci(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ei(n.key),n)}}function Ei(e){var t=function(e,t){if("object"!=Si(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Si(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Si(t)?t:t+""}var _i=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Env";var t,r,n,o,i,a,s,u,l,c,f,p,h,y,d,m,g,v,b,A,w,S=this;return t=navigator.userAgent,r=S.os={},n=S.browser={},o=t.match(/Web[kK]it[\/]{0,1}([\d.]+)/),i=t.match(/(Android);?[\s\/]+([\d.]+)?/),a=t.match(/(iPad).*OS\s([\d_]+)/),s=t.match(/(iPod)(.*OS\s([\d_]+))?/),u=!a&&t.match(/(iPhone\sOS)\s([\d_]+)/),l=t.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),c=l&&t.match(/TouchPad/),f=t.match(/Kindle\/([\d.]+)/),p=t.match(/Silk\/([\d._]+)/),h=t.match(/(BlackBerry).*Version\/([\d.]+)/),y=t.match(/(BB10).*Version\/([\d.]+)/),d=t.match(/(RIM\sTablet\sOS)\s([\d.]+)/),m=t.match(/PlayBook/),g=t.match(/Chrome\/([\d.]+)/)||t.match(/CriOS\/([\d.]+)/),v=t.match(/Firefox\/([\d.]+)/),b=t.match(/MSIE ([\d.]+)/),A=o&&t.match(/Mobile\//)&&!g,w=t.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/)&&!g,(n.webkit=!!o)&&(n.version=o[1]),i&&(r.android=!0,r.version=i[2]),u&&!s&&(r.ios=r.iphone=!0,r.version=u[2].replace(/_/g,".")),a&&(r.ios=r.ipad=!0,r.version=a[2].replace(/_/g,".")),s&&(r.ios=r.ipod=!0,r.version=s[3]?s[3].replace(/_/g,"."):null),l&&(r.webos=!0,r.version=l[2]),c&&(r.touchpad=!0),h&&(r.blackberry=!0,r.version=h[2]),y&&(r.bb10=!0,r.version=y[2]),d&&(r.rimtabletos=!0,r.version=d[2]),m&&(n.playbook=!0),f&&(r.kindle=!0,r.version=f[1]),p&&(n.silk=!0,n.version=p[1]),!p&&r.android&&t.match(/Kindle Fire/)&&(n.silk=!0),g&&(n.chrome=!0,n.version=g[1]),v&&(n.firefox=!0,n.version=v[1]),b&&(n.ie=!0,n.version=b[1]),A&&(t.match(/Safari/)||r.ios)&&(n.safari=!0),w&&(n.webview=!0),b&&(n.ie=!0,n.version=b[1]),r.tablet=!!(a||m||i&&!t.match(/Mobile/)||v&&t.match(/Tablet/)||b&&!t.match(/Phone/)&&t.match(/Touch/)),r.phone=!(r.tablet||r.ipod||!(i||u||l||h||y||g&&t.match(/Android/)||g&&t.match(/CriOS\/([\d.]+)/)||v&&t.match(/Mobile/)||b&&t.match(/Touch/))),{browser:n,os:r,canvasSupported:!!document.createElement("canvas").getContext}},(t=[{key:"destory",value:function(){return!0}}])&&Ci(e.prototype,t),r&&Ci(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function Ii(e){"@babel/helpers - typeof";return(Ii="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,xi(n.key),n)}}function xi(e){var t=function(e,t){if("object"!=Ii(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Ii(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ii(t)?t:t+""}var Pi=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.stop="function"==typeof window.addEventListener?function(e){e.preventDefault(),e.stopPropagation(),e.cancelBubble=!0}:function(e){e.returnValue=!1,e.cancelBubble=!0},this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Event"},(t=[{key:"getX",value:function(e){return void 0!==e.zrenderX&&e.zrenderX||void 0!==e.offsetX&&e.offsetX||void 0!==e.layerX&&e.layerX||void 0!==e.clientX&&e.clientX}},{key:"getY",value:function(e){return void 0!==e.zrenderY&&e.zrenderY||void 0!==e.offsetY&&e.offsetY||void 0!==e.layerY&&e.layerY||void 0!==e.clientY&&e.clientY}},{key:"getDelta",value:function(e){return void 0!==e.zrenderDelta&&e.zrenderDelta||void 0!==e.wheelDelta&&e.wheelDelta||void 0!==e.detail&&-e.detail}}])&&Oi(e.prototype,t),r&&Oi(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function ki(e){"@babel/helpers - typeof";return(ki="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ti(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ji(n.key),n)}}function ji(e){var t=function(e,t){if("object"!=ki(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ki(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ki(t)?t:t+""}var Mi=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Http"},(t=[{key:"get",value:function(e,t,r){if("object"===ki(e)){var n=e;e=n.url,t=n.onsuccess,r=n.onerror}var o=window.XMLHttpRequest?new XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");o.open("GET",e,!0),o.onreadystatechange=function(){4==o.readyState&&(o.status>=200&&o.status<300||304===o.status?t&&t(o.responseText):r&&r(),o.onreadystatechange=new Function,o=null)},o.send(null)}}])&&Ti(e.prototype,t),r&&Ti(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function Bi(e){"@babel/helpers - typeof";return(Bi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ni(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ri(n.key),n)}}function Ri(e){var t=function(e,t){if("object"!=Bi(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Bi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Bi(t)?t:t+""}var Li=function(e,t,r){return t&&Ni(e.prototype,t),r&&Ni(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)});function Di(e){"@babel/helpers - typeof";return(Di="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Qi(n.key),n)}}function Qi(e){var t=function(e,t){if("object"!=Di(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Di(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Di(t)?t:t+""}Li.EVENT={RESIZE:"resize",CLICK:"click",DBLCLICK:"dblclick",MOUSEWHEEL:"mousewheel",MOUSEMOVE:"mousemove",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",GLOBALOUT:"globalout",DRAGSTART:"dragstart",DRAGEND:"dragend",DRAGENTER:"dragenter",DRAGOVER:"dragover",DRAGLEAVE:"dragleave",DROP:"drop",touchClickDelay:300},Li.catchBrushException=!1,Li.debugMode=0;var Gi=function(){return e=function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Log",function(){if(0!=+Li.debugMode)if(1==+Li.debugMode)for(var e in arguments)throw new Error(arguments[e]);else if(+Li.debugMode>1)for(var t in arguments)console.log(arguments[t])}},(t=[{key:"destory",value:function(){return!0}}])&&Fi(e.prototype,t),r&&Fi(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function Ui(e){"@babel/helpers - typeof";return(Ui="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Hi(n.key),n)}}function Hi(e){var t=function(e,t){if("object"!=Ui(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Ui(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ui(t)?t:t+""}var qi=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._radians=window.Math.PI/180,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Math"},(t=[{key:"sin",value:function(e,t){return window.Math.sin(t?e*this._radians:e)}},{key:"cos",value:function(e,t){return window.Math.cos(t?e*this._radians:e)}},{key:"degreeToRadian",value:function(e){return e*this._radians}},{key:"radianToDegree",value:function(e){return e/this._radians}}])&&zi(e.prototype,t),r&&zi(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function Vi(e){"@babel/helpers - typeof";return(Vi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ki(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Yi(n.key),n)}}function Yi(e){var t=function(e,t){if("object"!=Vi(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Vi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Vi(t)?t:t+""}var Ji=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ArrayCtor="undefined"==typeof Float32Array?Array:Float32Array,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Matrix"},(t=[{key:"create",value:function(){var e=new(0,this.ArrayCtor)(6);return this.identity(e),e}},{key:"identity",value:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}},{key:"copy",value:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}},{key:"mul",value:function(e,t,r){return e[0]=t[0]*r[0]+t[2]*r[1],e[1]=t[1]*r[0]+t[3]*r[1],e[2]=t[0]*r[2]+t[2]*r[3],e[3]=t[1]*r[2]+t[3]*r[3],e[4]=t[0]*r[4]+t[2]*r[5]+t[4],e[5]=t[1]*r[4]+t[3]*r[5]+t[5],e}},{key:"translate",value:function(e,t,r){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4]+r[0],e[5]=t[5]+r[1],e}},{key:"rotate",value:function(e,t,r){var n=t[0],o=t[2],i=t[4],a=t[1],s=t[3],u=t[5],l=Math.sin(r),c=Math.cos(r);return e[0]=n*c+a*l,e[1]=-n*l+a*c,e[2]=o*c+s*l,e[3]=-o*l+c*s,e[4]=c*i+l*u,e[5]=c*u-l*i,e}},{key:"scale",value:function(e,t,r){var n=r[0],o=r[1];return e[0]=t[0]*n,e[1]=t[1]*o,e[2]=t[2]*n,e[3]=t[3]*o,e[4]=t[4]*n,e[5]=t[5]*o,e}},{key:"invert",value:function(e,t){var r=t[0],n=t[2],o=t[4],i=t[1],a=t[3],s=t[5],u=r*a-i*n;return u?(u=1/u,e[0]=a*u,e[1]=-i*u,e[2]=-n*u,e[3]=r*u,e[4]=(n*s-a*o)*u,e[5]=(i*o-r*s)*u,e):null}},{key:"mulVector",value:function(e,t,r){var n=t[0],o=t[2],i=t[4],a=t[1],s=t[3],u=t[5];return e[0]=r[0]*n+r[1]*o+i,e[1]=r[0]*a+r[1]*s+u,e}}])&&Ki(e.prototype,t),r&&Ki(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function Wi(e){"@babel/helpers - typeof";return(Wi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Zi(n.key),n)}}function Zi(e){var t=function(e,t){if("object"!=Wi(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Wi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Wi(t)?t:t+""}var $i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return t=e,n=[{key:"SUtil_smoothBezier",value:function(t,r,n,o,i){i&&2===i.length||(i=[0,0]);var a,s,u=i,l=[],c=[],f=[],p=[],h=!!o;if(h){a=[1/0,1/0],s=[-1/0,-1/0];for(var y=t.length,d=0;d<y;d++)e.Util_vector.min(a,a,[t[d][0]+u[0],t[d][1]+u[1]]),e.Util_vector.max(s,s,[t[d][0]+u[0],t[d][1]+u[1]]);e.Util_vector.min(a,a,o[0]),e.Util_vector.max(s,s,o[1])}for(var m=t.length,g=0;g<m;g++){var v=[t[g][0]+u[0],t[g][1]+u[1]],b=void 0,A=void 0;if(n)b=[t[g?g-1:m-1][0]+u[0],t[g?g-1:m-1][1]+u[1]],A=[t[(g+1)%m][0]+u[0],t[(g+1)%m][1]+u[1]];else{if(0===g||g===m-1){l.push([t[g][0]+u[0],t[g][1]+u[1]]);continue}b=[t[g-1][0]+u[0],t[g-1][1]+u[1]],A=[t[g+1][0]+u[0],t[g+1][1]+u[1]]}e.Util_vector.sub(c,A,b),e.Util_vector.scale(c,c,r);var w=e.Util_vector.distance(v,b),S=e.Util_vector.distance(v,A),C=w+S;0!==C&&(w/=C,S/=C),e.Util_vector.scale(f,c,-w),e.Util_vector.scale(p,c,S);var E=e.Util_vector.add([],v,f),_=e.Util_vector.add([],v,p);h&&(e.Util_vector.max(E,E,a),e.Util_vector.min(E,E,s),e.Util_vector.max(_,_,a),e.Util_vector.min(_,_,s)),l.push(E),l.push(_)}return n&&l.push(l.shift()),l}},{key:"SUtil_smoothSpline",value:function(t,r,n,o){o&&2===o.length||(o=[0,0]);for(var i=o,a=t.length,s=[],u=0,l=1;l<a;l++)u+=e.Util_vector.distance([t[l-1][0]+i[0],t[l-1][1]+i[1]],[t[l][0]+i[0],t[l][1]+i[1]]);var c=u/5;c=c<a?a:c;for(var f=0;f<c;f++){var p=f/(c-1)*(r?a:a-1),h=Math.floor(p),y=p-h,d=void 0,m=[t[h%a][0]+i[0],t[h%a][1]+i[1]],g=void 0,v=void 0;r?(d=[t[(h-1+a)%a][0]+i[0],t[(h-1+a)%a][1]+i[1]],g=[t[(h+1)%a][0]+i[0],t[(h+1)%a][1]+i[1]],v=[t[(h+2)%a][0]+i[0],t[(h+2)%a][1]+i[1]]):(d=[t[0===h?h:h-1][0]+i[0],t[0===h?h:h-1][1]+i[1]],g=[t[h>a-2?a-1:h+1][0]+i[0],t[h>a-2?a-1:h+1][1]+i[1]],v=[t[h>a-3?a-1:h+2][0]+i[0],t[h>a-3?a-1:h+2][1]+i[1]]);var b=y*y,A=y*b;s.push([w(d[0],m[0],g[0],v[0],y,b,A),w(d[1],m[1],g[1],v[1],y,b,A)])}return s;function w(e,t,r,n,o,i,a){var s=.5*(r-e),u=.5*(n-t);return(2*(t-r)+s+u)*a+(-3*(t-r)-2*s-u)*i+s*o+t}}},{key:"SUtil_dashedLineTo",value:function(e,t,r,n,o,i,a){var s=[5,5];if(i="number"!=typeof i?5:i,e.setLineDash)return s[0]=i,s[1]=i,a&&a instanceof Array?e.setLineDash(a):e.setLineDash(s),e.moveTo(t,r),void e.lineTo(n,o);var u=n-t,l=o-r,c=Math.floor(Math.sqrt(u*u+l*l)/i);u/=c,l/=c;for(var f=!0,p=0;p<c;++p)f?e.moveTo(t,r):e.lineTo(t,r),f=!f,t+=u,r+=l;e.lineTo(n,o)}}],(r=null)&&Xi(t.prototype,r),n&&Xi(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function ea(e){"@babel/helpers - typeof";return(ea="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ta(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ra(n.key),n)}}function ra(e){var t=function(e,t){if("object"!=ea(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ea(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ea(t)?t:t+""}$i.Util_area=new hi,$i.Util_color=new gi,$i.Util_computeBoundingBox=new wi,$i.Util_curve=new li,$i.Util_env=new _i,$i.Util_event=new Pi,$i.Util_http=new Mi,$i.Util_log=new Gi,$i.Util_math=new qi,$i.Util_matrix=new Ji,$i.Util=new Xo,$i.Util_vector=new ii;var na=function(){return e=function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.position=[0,0],this.rotation=[0,0,0],this.scale=[1,1,0,0],this.needLocalTransform=!1,this.needTransform=!1,this.CLASS_NAME="SuperMap.LevelRenderer.Transformable",this.lookAt=(t=$i.Util_vector.create(),function(e){this.transform||(this.transform=$i.Util_matrix.create());var r=this.transform;function n(e){return e>-5e-5&&e<5e-5}$i.Util_vector.sub(t,e,this.position),n(t[0])&&n(t[1])||($i.Util_vector.normalize(t,t),r[2]=t[0]*this.scale[1],r[3]=t[1]*this.scale[1],r[0]=t[1]*this.scale[0],r[1]=-t[0]*this.scale[0],r[4]=this.position[0],r[5]=this.position[1],this.decomposeTransform())})},(t=[{key:"destroy",value:function(){this.position=null,this.rotation=null,this.scale=null,this.needLocalTransform=null,this.needTransform=null}},{key:"updateNeedTransform",value:function(){function e(e){return e>5e-5||e<-5e-5}this.needLocalTransform=e(this.rotation[0])||e(this.position[0])||e(this.position[1])||e(this.scale[0]-1)||e(this.scale[1]-1)}},{key:"updateTransform",value:function(){if(this.updateNeedTransform(),this.parent?this.needTransform=this.needLocalTransform||this.parent.needTransform:this.needTransform=this.needLocalTransform,this.needTransform){var e=[0,0],t=this.transform||$i.Util_matrix.create();if($i.Util_matrix.identity(t),this.needLocalTransform){if(o(this.scale[0])||o(this.scale[1])){e[0]=-this.scale[2]||0,e[1]=-this.scale[3]||0;var r=o(e[0])||o(e[1]);r&&$i.Util_matrix.translate(t,t,e),$i.Util_matrix.scale(t,t,this.scale),r&&(e[0]=-e[0],e[1]=-e[1],$i.Util_matrix.translate(t,t,e))}if(this.rotation instanceof Array){if(0!==this.rotation[0]){e[0]=-this.rotation[1]||0,e[1]=-this.rotation[2]||0;var n=o(e[0])||o(e[1]);n&&$i.Util_matrix.translate(t,t,e),$i.Util_matrix.rotate(t,t,this.rotation[0]),n&&(e[0]=-e[0],e[1]=-e[1],$i.Util_matrix.translate(t,t,e))}}else 0!=+this.rotation&&$i.Util_matrix.rotate(t,t,this.rotation);(o(this.position[0])||o(this.position[1]))&&$i.Util_matrix.translate(t,t,this.position)}this.transform=t,this.parent&&this.parent.needTransform&&(this.needLocalTransform?$i.Util_matrix.mul(this.transform,this.parent.transform,this.transform):$i.Util_matrix.copy(this.transform,this.parent.transform))}function o(e){return e>5e-5||e<-5e-5}}},{key:"setTransform",value:function(e){if(this.needTransform){var t=this.transform;e.transform(t[0],t[1],t[2],t[3],t[4],t[5])}}},{key:"decomposeTransform",value:function(){if(this.transform){var e=this.transform,t=e[0]*e[0]+e[1]*e[1],r=this.position,n=this.scale,o=this.rotation;a(t-1)&&(t=Math.sqrt(t));var i=e[2]*e[2]+e[3]*e[3];a(i-1)&&(i=Math.sqrt(i)),r[0]=e[4],r[1]=e[5],n[0]=t,n[1]=i,n[2]=n[3]=0,o[0]=Math.atan2(-e[1]/i,e[0]/t),o[1]=o[2]=0}function a(e){return e>5e-5||e<-5e-5}}}])&&ta(e.prototype,t),r&&ta(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function oa(e){"@babel/helpers - typeof";return(oa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ia(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,aa(n.key),n)}}function aa(e){var t=function(e,t){if("object"!=oa(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=oa(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==oa(t)?t:t+""}function sa(e,t,r){return t=la(t),function(e,t){if(t&&("object"==oa(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],la(e).constructor):t.apply(e,r))}function ua(){return(ua="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=la(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function la(e){return(la=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ca(e,t){return(ca=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var fa=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=sa(this,t,[e]),e=e||{},r.id=null,r.type="group",r.clipShape=null,r._children=[],r._storage=null,r.__dirty=!0,r.ignore=!1,M.extend(r,e),r.id=r.id||M.createUniqueID("smShapeGroup_"),r.CLASS_NAME="SuperMap.LevelRenderer.Group",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ca(e,t)}(t,f(ti,na)),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;this.id=null,this.type=null,this.clipShape=null,this._children=null,this._storage=null,this.__dirty=null,this.ignore=null,(e=t,r="destroy",n=this,i=ua(la(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"children",value:function(){return this._children.slice()}},{key:"childAt",value:function(e){return this._children[e]}},{key:"addChild",value:function(e){e!=this&&e.parent!=this&&(e.parent&&e.parent.removeChild(e),this._children.push(e),e.parent=this,this._storage&&this._storage!==e._storage&&(this._storage.addToMap(e),e instanceof t&&e.addChildrenToStorage(this._storage)))}},{key:"removeChild",value:function(e){var r=M.indexOf(this._children,e);this._children.splice(r,1),e.parent=null,this._storage&&(this._storage.delFromMap(e.id),e instanceof t&&e.delChildrenFromStorage(this._storage))}},{key:"eachChild",value:function(e,t){for(var r=!!t,n=0;n<this._children.length;n++){var o=this._children[n];r?e.call(t,o):e(o)}}},{key:"traverse",value:function(e,t){for(var r=!!t,n=0;n<this._children.length;n++){var o=this._children[n];r?e.call(t,o):e(o),"group"===o.type&&o.traverse(e,t)}}},{key:"addChildrenToStorage",value:function(e){for(var t=0;t<this._children.length;t++){var r=this._children[t];e.addToMap(r),"group"===r.type&&r.addChildrenToStorage(e)}}},{key:"delChildrenFromStorage",value:function(e){for(var t=0;t<this._children.length;t++){var r=this._children[t];e.delFromMap(r.id),"group"===r.type&&r.delChildrenFromStorage(e)}}},{key:"modSelf",value:function(){this.__dirty=!0}}])&&ia(r.prototype,n),o&&ia(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function pa(e){"@babel/helpers - typeof";return(pa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ha(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ya(n.key),n)}}function ya(e){var t=function(e,t){if("object"!=pa(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=pa(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==pa(t)?t:t+""}var da=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._elements={},this._hoverElements=[],this._roots=[],this._shapeList=[],this._shapeListOffset=0,this.CLASS_NAME="SuperMap.LevelRenderer.Storage"}return t=e,n=[{key:"shapeCompareFunc",value:function(e,t){return e.zlevel==t.zlevel?e.z==t.z?e.__renderidx-t.__renderidx:e.z-t.z:e.zlevel-t.zlevel}}],(r=[{key:"destroy",value:function(){this.dispose(),this._shapeList=null,this._shapeListOffset=null}},{key:"iterShape",value:function(e,t){if(!t){t={hover:!1,normal:"down",update:!1}}if(t.hover)for(var r=0,n=this._hoverElements.length;r<n;r++){var o=this._hoverElements[r];if(o.updateTransform(),e(o))return this}switch(t.update&&this.updateShapeList(),t.normal){case"down":for(var i=this._shapeList.length;i--;)if(e(this._shapeList[i]))return this;break;default:for(var a=0,s=this._shapeList.length;a<s;a++)if(e(this._shapeList[a]))return this}return this}},{key:"getHoverShapes",value:function(t){for(var r=[],n=this._hoverElements.length,o=0;o<n;o++){r.push(this._hoverElements[o]);var i=this._hoverElements[o].hoverConnect;if(i)for(var a,s=0,u=(i=i instanceof Array?i:[i]).length;s<u;s++)(a=i[s].id?i[s]:this.get(i[s]))&&r.push(a)}if(r.sort(e.shapeCompareFunc),t)for(var l=0,c=r.length;l<c;l++)r[l].updateTransform();return r}},{key:"getShapeList",value:function(e){return e&&this.updateShapeList(),this._shapeList}},{key:"updateShapeList",value:function(){this._shapeListOffset=0;for(var t=this._roots.length,r=0;r<t;r++){var n=this._roots[r];this._updateAndAddShape(n)}this._shapeList.length=this._shapeListOffset;for(var o=this._shapeList.length,i=0;i<o;i++)this._shapeList[i].__renderidx=i;this._shapeList.sort(e.shapeCompareFunc)}},{key:"_updateAndAddShape",value:function(e,t){if(!e.ignore)if(e.updateTransform(),"group"==e.type){e.clipShape&&(e.clipShape.parent=e,e.clipShape.updateTransform(),t?(t=t.slice()).push(e.clipShape):t=[e.clipShape]);for(var r=0;r<e._children.length;r++){var n=e._children[r];n.__dirty=e.__dirty||n.__dirty,this._updateAndAddShape(n,t)}e.__dirty=!1}else e.__clipShapes=t,this._shapeList[this._shapeListOffset++]=e}},{key:"mod",value:function(e,t){var r=this._elements[e];if(r&&(r.modSelf(),t))if(t.parent||t._storage||t.__startClip){var n={};for(var o in t)"parent"!=o&&"_storage"!=o&&"__startClip"!=o&&t.hasOwnProperty(o)&&(n[o]=t[o]);(new Xo).merge(r,n,!0)}else(new Xo).merge(r,t,!0);return this}},{key:"drift",value:function(e,t,r){var n=this._elements[e];return n&&(n.needTransform=!0,"horizontal"===n.draggable?r=0:"vertical"===n.draggable&&(t=0),(!n.ondrift||n.ondrift&&!n.ondrift(t,r))&&n.drift(t,r)),this}},{key:"addHover",value:function(e){return e.updateNeedTransform(),this._hoverElements.push(e),this}},{key:"delHover",value:function(){return this._hoverElements=[],this}},{key:"hasHoverShape",value:function(){return this._hoverElements.length>0}},{key:"addRoot",value:function(e){e instanceof fa&&e.addChildrenToStorage(this),this.addToMap(e),this._roots.push(e)}},{key:"delRoot",value:function(e){if(void 0===e){for(var t=0;t<this._roots.length;t++){var r=this._roots[t];r instanceof fa&&r.delChildrenFromStorage(this)}return this._elements={},this._hoverElements=[],void(this._roots=[])}if(e instanceof Array)for(var n=e.length,o=0;o<n;o++)this.delRoot(e[o]);else{var i;i="string"==typeof e?this._elements[e]:e;var a=(new Xo).indexOf(this._roots,i);a>=0&&(this.delFromMap(i.id),this._roots.splice(a,1),i instanceof fa&&i.delChildrenFromStorage(this))}}},{key:"addToMap",value:function(e){return e instanceof fa&&(e._storage=this),e.modSelf(),this._elements[e.id]=e,this}},{key:"get",value:function(e){return this._elements[e]}},{key:"delFromMap",value:function(e){var t=this._elements[e];return t&&(delete this._elements[e],t instanceof fa&&(t._storage=null)),this}},{key:"dispose",value:function(){this._elements=null,this._roots=null,this._hoverElements=null}}])&&ha(t.prototype,r),n&&ha(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function ma(e){"@babel/helpers - typeof";return(ma="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ga(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,va(n.key),n)}}function va(e){var t=function(e,t){if("object"!=ma(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ma(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ma(t)?t:t+""}function ba(e,t,r){return t=Aa(t),function(e,t){if(t&&("object"==ma(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],Aa(e).constructor):t.apply(e,r))}function Aa(e){return(Aa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wa(e,t){return(wa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Sa=function(e){function t(e,r,n,o){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=ba(this,t,[e,r,n,o])).x=e,i.y=r,i.width=n,i.height=o,i.CLASS_NAME="SuperMap.Geometry.Rectangle",i.geometryType="Rectangle",i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wa(e,t)}(t,b),r=t,(n=[{key:"calculateBounds",value:function(){this.bounds=new We(this.x,this.y,this.x+this.width,this.y+this.height)}},{key:"getArea",value:function(){return this.width*this.height}}])&&ga(r.prototype,n),o&&ga(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Ca(e){"@babel/helpers - typeof";return(Ca="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ea(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_a(n.key),n)}}function _a(e){var t=function(e,t){if("object"!=Ca(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Ca(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ca(t)?t:t+""}var Ia=function(){return e=function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.value=t||"",this.name=r||"token",this.CLASS_NAME="SuperMap.Credential"},(t=[{key:"getUrlParameters",value:function(){return this.name+"="+this.value}},{key:"getValue",value:function(){return this.value}},{key:"destroy",value:function(){this.value=null,this.name=null}}])&&Ea(e.prototype,t),r&&Ea(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();Ia.CREDENTIAL=null;var Oa={toISOString:function(){if("toISOString"in Date.prototype)return function(e){return e.toISOString()};var e=function(e,t){for(var r=e+"";r.length<t;)r="0"+r;return r};return function(t){return isNaN(t.getTime())?"Invalid Date":t.getUTCFullYear()+"-"+e(t.getUTCMonth()+1,2)+"-"+e(t.getUTCDate(),2)+"T"+e(t.getUTCHours(),2)+":"+e(t.getUTCMinutes(),2)+":"+e(t.getUTCSeconds(),2)+"."+e(t.getUTCMilliseconds(),3)+"Z"}}(),parse:function(e){var t,r=e.match(/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:(?:T(\d{1,2}):(\d{2}):(\d{2}(?:\.\d+)?)(Z|(?:[+-]\d{1,2}(?::(\d{2}))?)))|Z)?$/);if(r&&(r[1]||r[7])){var n=parseInt(r[1],10)||0,o=parseInt(r[2],10)-1||0,i=parseInt(r[3],10)||1;t=new Date(Date.UTC(n,o,i));var a=r[7];if(a){var s=parseInt(r[4],10),u=parseInt(r[5],10),l=parseFloat(r[6]),c=0|l,f=Math.round(1e3*(l-c));if(t.setUTCHours(s,u,c,f),"Z"!==a){var p=-1e3*(60*parseInt(a,10)*60+60*(parseInt(r[8],10)||0));t=new Date(t.getTime()+p)}}}else t=new Date("invalid");return t}},xa={observers:!1,KEY_SPACE:32,KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,element:function(e){return e.target||e.srcElement},isSingleTouch:function(e){return e.touches&&1===e.touches.length},isMultiTouch:function(e){return e.touches&&e.touches.length>1},isLeftClick:function(e){return e.which&&1===e.which||e.button&&1===e.button},isRightClick:function(e){return e.which&&3===e.which||e.button&&2===e.button},stop:function(e,t){t||(e.preventDefault?e.preventDefault():e.returnValue=!1),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},findElement:function(e,t){for(var r=xa.element(e);r.parentNode&&(!r.tagName||r.tagName.toUpperCase()!=t.toUpperCase());)r=r.parentNode;return r},observe:function(e,t,r,n){var o=M.getElement(e);if(n=n||!1,"keypress"===t&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||o.attachEvent)&&(t="keydown"),this.observers||(this.observers={}),!o._eventCacheID){var i="eventCacheID_";o.id&&(i=o.id+"_"+i),o._eventCacheID=M.createUniqueID(i)}var a=o._eventCacheID;this.observers[a]||(this.observers[a]=[]),this.observers[a].push({element:o,name:t,observer:r,useCapture:n}),o.addEventListener?"mousewheel"===t?o.addEventListener(t,r,{useCapture:n,passive:!1}):o.addEventListener(t,r,n):o.attachEvent&&o.attachEvent("on"+t,r)},stopObservingElement:function(e){var t=M.getElement(e)._eventCacheID;this._removeElementObservers(xa.observers[t])},_removeElementObservers:function(e){if(e)for(var t=e.length-1;t>=0;t--){var r=e[t],n=new Array(r.element,r.name,r.observer,r.useCapture);xa.stopObserving.apply(this,n)}},stopObserving:function(e,t,r,n){n=n||!1;var o=M.getElement(e),i=o._eventCacheID;"keypress"===t&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||o.detachEvent)&&(t="keydown");var a=!1,s=xa.observers[i];if(s)for(var u=0;!a&&u<s.length;){var l=s[u];if(l.name===t&&l.observer===r&&l.useCapture===n){s.splice(u,1),0==s.length&&delete xa.observers[i],a=!0;break}u++}return a&&(o.removeEventListener?o.removeEventListener(t,r,n):o&&o.detachEvent&&o.detachEvent("on"+t,r)),a},unloadCache:function(){if(xa&&xa.observers){for(var e in xa.observers){var t=xa.observers[e];xa._removeElementObservers.apply(this,[t])}xa.observers=!1}},CLASS_NAME:"SuperMap.Event"};function Pa(e){"@babel/helpers - typeof";return(Pa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ka(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ta(n.key),n)}}function Ta(e){var t=function(e,t){if("object"!=Pa(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Pa(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Pa(t)?t:t+""}xa.observe(window,"resize",xa.unloadCache,!1);var ja=function(){function e(t,r,n,o,i){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.BROWSER_EVENTS=["mouseover","mouseout","mousedown","mouseup","mousemove","click","dblclick","rightclick","dblrightclick","resize","focus","blur","touchstart","touchmove","touchend","keydown","MSPointerDown","MSPointerUp","pointerdown","pointerup","MSGestureStart","MSGestureChange","MSGestureEnd","contextmenu"],this.listeners={},this.object=t,this.element=null,this.eventTypes=[],this.eventHandler=null,this.fallThrough=o,this.includeXY=!1,this.extensions={},this.extensionCount={},this.clearMouseListener=null,M.extend(this,i),null!=n)for(var a=0,s=n.length;a<s;a++)this.addEventType(n[a]);null!=r&&this.attachToElement(r),this.CLASS_NAME="SuperMap.Events"}return t=e,(r=[{key:"destroy",value:function(){for(var e in this.extensions)"boolean"!=typeof this.extensions[e]&&this.extensions[e].destroy();this.extensions=null,this.element&&(xa.stopObservingElement(this.element),this.element.hasScrollEvent&&xa.stopObserving(window,"scroll",this.clearMouseListener)),this.element=null,this.listeners=null,this.object=null,this.eventTypes=null,this.fallThrough=null,this.eventHandler=null}},{key:"addEventType",value:function(e){this.listeners[e]||(this.eventTypes.push(e),this.listeners[e]=[])}},{key:"attachToElement",value:function(e){this.element?xa.stopObservingElement(this.element):(this.eventHandler=y.bindAsEventListener(this.handleBrowserEvent,this),this.clearMouseListener=y.bind(this.clearMouseCache,this)),this.element=e;for(var t=0,r=this.BROWSER_EVENTS.length;t<r;t++){var n=this.BROWSER_EVENTS[t];this.addEventType(n),xa.observe(e,n,this.eventHandler)}xa.observe(e,"dragstart",xa.stop)}},{key:"on",value:function(e){for(var t in e)"scope"!==t&&e.hasOwnProperty(t)&&this.register(t,e.scope,e[t])}},{key:"register",value:function(t,r,n,o){if(t in e&&!this.extensions[t]&&(this.extensions[t]=new e[t](this)),null!=n&&-1!==M.indexOf(this.eventTypes,t)){null==r&&(r=this.object);var i=this.listeners[t];i||(i=[],this.listeners[t]=i,this.extensionCount[t]=0);var a={obj:r,func:n};o?(i.splice(this.extensionCount[t],0,a),"object"===Pa(o)&&o.extension&&this.extensionCount[t]++):i.push(a)}}},{key:"registerPriority",value:function(e,t,r){this.register(e,t,r,!0)}},{key:"un",value:function(e){for(var t in e)"scope"!==t&&e.hasOwnProperty(t)&&this.unregister(t,e.scope,e[t])}},{key:"unregister",value:function(e,t,r){null==t&&(t=this.object);var n=this.listeners[e];if(null!=n)for(var o=0,i=n.length;o<i;o++)if(n[o].obj===t&&n[o].func===r){n.splice(o,1);break}}},{key:"remove",value:function(e){null!=this.listeners[e]&&(this.listeners[e]=[])}},{key:"triggerEvent",value:function(e,t){var r=this.listeners[e];if(r&&0!=r.length){var n;null==t&&(t={}),t.object=this.object,t.element=this.element,t.type||(t.type=e);for(var o=0,i=(r=r.slice()).length;o<i;o++){var a=r[o];if(void 0!=(n=a.func.apply(a.obj,[t]))&&!1===n)break}return this.fallThrough||xa.stop(t,!0),n}}},{key:"handleBrowserEvent",value:function(e){var t=e.type,r=this.listeners[t];if(r&&0!=r.length){var n=e.touches;if(n&&n[0]){for(var o,i=0,a=0,s=n.length,u=0;u<s;++u)i+=(o=n[u]).clientX,a+=o.clientY;e.clientX=i/s,e.clientY=a/s}this.includeXY&&(e.xy=this.getMousePosition(e)),this.triggerEvent(t,e)}}},{key:"clearMouseCache",value:function(){this.element.scrolls=null,this.element.lefttop=null;var e=document.body;e&&(0==e.scrollTop&&0==e.scrollLeft||!navigator.userAgent.match(/iPhone/i))&&(this.element.offsets=null)}},{key:"getMousePosition",value:function(e){if(this.includeXY?this.element.hasScrollEvent||(xa.observe(window,"scroll",this.clearMouseListener),this.element.hasScrollEvent=!0):this.clearMouseCache(),!this.element.scrolls){var t=M.getViewportElement();this.element.scrolls=[t.scrollLeft,t.scrollTop]}return this.element.lefttop||(this.element.lefttop=[document.documentElement.clientLeft||0,document.documentElement.clientTop||0]),this.element.offsets||(this.element.offsets=M.pagePosition(this.element)),new Ue(e.clientX+this.element.scrolls[0]-this.element.offsets[0]-this.element.lefttop[0],e.clientY+this.element.scrolls[1]-this.element.offsets[1]-this.element.lefttop[1])}}])&&ka(t.prototype,r),n&&ka(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function Ma(e){"@babel/helpers - typeof";return(Ma="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ba(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Na(n.key),n)}}function Na(e){var t=function(e,t){if("object"!=Ma(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Ma(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ma(t)?t:t+""}function Ra(e,t,r){return t=La(t),function(e,t){if(t&&("object"==Ma(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],La(e).constructor):t.apply(e,r))}function La(e){return(La=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Da(e,t){return(Da=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}ja.prototype.BROWSER_EVENTS=["mouseover","mouseout","mousedown","mouseup","mousemove","click","dblclick","rightclick","dblrightclick","resize","focus","blur","touchstart","touchmove","touchend","keydown","MSPointerDown","MSPointerUp","pointerdown","pointerup","MSGestureStart","MSGestureChange","MSGestureEnd","contextmenu"];var Fa=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Ra(this,t,[e])).CLASS_NAME="SuperMap.Geometry3D",r.position=null,r.rotationX=null,r.rotationY=null,r.rotationZ=null,r.scaleX=null,r.scaleY=null,r.scaleZ=null,M.extend(r,e),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Da(e,t)}(t,$n),r=t,(n=[{key:"destroy",value:function(){this.position=null,this.rotationX=null,this.rotationY=null,this.rotationZ=null,this.scaleX=null,this.scaleY=null,this.scaleZ=null}}])&&Ba(r.prototype,n),o&&Ba(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Qa(e){"@babel/helpers - typeof";return(Qa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ga(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ua(n.key),n)}}function Ua(e){var t=function(e,t){if("object"!=Qa(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Qa(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Qa(t)?t:t+""}function za(e,t,r){return t=qa(t),function(e,t){if(t&&("object"==Qa(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],qa(e).constructor):t.apply(e,r))}function Ha(){return(Ha="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=qa(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function qa(e){return(qa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Va(e,t){return(Va=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Ka=function(e){function t(e){var r,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=za(this,t,[e]),e=e||{},r.id=null,r.style={},r.highlightStyle=null,r.parent=null,r.__dirty=!0,r.__clipShapes=[],r.invisible=!1,r.ignore=!1,r.zlevel=0,r.draggable=!1,r.clickable=!1,r.hoverable=!0,r.z=0,r.refOriginalPosition=[0,0],r.refDataID=null,r.isHoverByRefDataID=!1,r.refDataHoverGroup=null,r.dataInfo=null,M.extend(r,e),r.id=r.id||M.createUniqueID("smShape_"),r.CLASS_NAME="SuperMap.LevelRenderer.Shape",r.getTansform=(n=[],function(e,t){var r=[e,t];return this.needTransform&&this.transform&&($i.Util_matrix.invert(n,this.transform),$i.Util_matrix.mulVector(r,n,[e,t,1]),e==r[0]&&t==r[1]&&this.updateNeedTransform()),r}),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Va(e,t)}(t,f(ti,na)),r=t,n=[{key:"destroy",value:function(){var e,r,n,o,i;this.id=null,this.style=null,this.highlightStyle=null,this.parent=null,this.__dirty=null,this.__clipShapes=null,this.invisible=null,this.ignore=null,this.zlevel=null,this.draggable=null,this.clickable=null,this.hoverable=null,this.z=null,this.refOriginalPosition=null,this.refDataID=null,this.refDataHoverGroup=null,this.isHoverByRefDataID=null,this.dataInfo=null,(e=t,r="destroy",n=this,i=Ha(qa(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"brush",value:function(e,t){var r=this.beforeBrush(e,t);switch(e.beginPath(),this.buildPath(e,r),r.brushType){case"both":this.setCtxGlobalAlpha(e,"fill",r),e.fill(),r.lineWidth>0&&(this.setCtxGlobalAlpha(e,"stroke",r),e.stroke()),this.setCtxGlobalAlpha(e,"reset",r);break;case"stroke":this.setCtxGlobalAlpha(e,"stroke",r),r.lineWidth>0&&e.stroke(),this.setCtxGlobalAlpha(e,"reset",r);break;default:this.setCtxGlobalAlpha(e,"fill",r),e.fill(),this.setCtxGlobalAlpha(e,"reset",r)}this.drawText(e,r,this.style),this.afterBrush(e)}},{key:"beforeBrush",value:function(e,t){var r=this.style;return this.brushTypeOnly&&(r.brushType=this.brushTypeOnly),t&&(r=this.getHighlightStyle(r,this.highlightStyle||{},this.brushTypeOnly)),"stroke"==this.brushTypeOnly&&(r.strokeColor=r.strokeColor||r.color),e.save(),this.doClip(e),this.setContext(e,r),this.setTransform(e),r}},{key:"afterBrush",value:function(e){e.restore()}},{key:"setContext",value:function(e,t){for(var r=[["color","fillStyle"],["strokeColor","strokeStyle"],["opacity","globalAlpha"],["lineCap","lineCap"],["lineJoin","lineJoin"],["miterLimit","miterLimit"],["lineWidth","lineWidth"],["shadowBlur","shadowBlur"],["shadowColor","shadowColor"],["shadowOffsetX","shadowOffsetX"],["shadowOffsetY","shadowOffsetY"]],n=0,o=r.length;n<o;n++){var i=t[r[n][0]],a=r[n][1];void 0!==i&&(e[a]=i)}}},{key:"doClip",value:function(e){var t=$i.Util_matrix.create();if(this.__clipShapes)for(var r=0;r<this.__clipShapes.length;r++){var n=this.__clipShapes[r];if(n.needTransform){var o=n.transform;$i.Util_matrix.invert(t,o),e.transform(o[0],o[1],o[2],o[3],o[4],o[5])}if(e.beginPath(),n.buildPath(e,n.style),e.clip(),n.needTransform){var i=t;e.transform(i[0],i[1],i[2],i[3],i[4],i[5])}}}},{key:"getHighlightStyle",value:function(e,t,r){var n={};for(var o in e)n[o]=e[o];var i=$i.Util_color.getHighlightColor();for(var a in"stroke"!=e.brushType?(n.strokeColor=i,n.lineWidth=e.lineWidth||1,n.brushType="both"):"stroke"!=r?(n.strokeColor=i,n.lineWidth=e.lineWidth||1):n.strokeColor=t.strokeColor||$i.Util_color.mix(e.strokeColor,$i.Util_color.toRGB(i)),t)void 0!==t[a]&&(n[a]=t[a]);return n}},{key:"getHighlightZoom",value:function(){return"text"!=this.type?6:2}},{key:"drift",value:function(e,t){this.position[0]+=e,this.position[1]+=t}},{key:"buildPath",value:function(e,t){$i.Util_log("buildPath not implemented in "+this.type)}},{key:"getRect",value:function(e){$i.Util_log("getRect not implemented in "+this.type)}},{key:"isCover",value:function(e,t){var r=this.getTansform(e,t);e=r[0],t=r[1];var n=this.style.__rect;return n||(n=this.style.__rect=this.getRect(this.style)),e>=n.x&&e<=n.x+n.width&&t>=n.y&&t<=n.y+n.height&&$i.Util_area.isInside(this,this.style,e,t)}},{key:"drawText",value:function(e,r,n){if(void 0!==r.text&&!1!==r.text){var o=r.textColor||r.color||r.strokeColor;e.fillStyle=o;var i,a,s,u,l=10,c=r.textPosition||this.textPosition||"top",f=[];switch(f=this.refOriginalPosition&&2===this.refOriginalPosition.length?this.refOriginalPosition:[0,0],c){case"inside":case"top":case"bottom":case"left":case"right":if(this.getRect){var p=(n||r).__rect||this.getRect(n||r);switch(c){case"inside":s=p.x+p.width/2,u=p.y+p.height/2,i="center",a="middle","stroke"!=r.brushType&&o==r.color&&(e.fillStyle="#fff");break;case"left":s=p.x-l,u=p.y+p.height/2,i="end",a="middle";break;case"right":s=p.x+p.width+l,u=p.y+p.height/2,i="start",a="middle";break;case"top":s=p.x+p.width/2,u=p.y-l,i="center",a="bottom";break;case"bottom":s=p.x+p.width/2,u=p.y+p.height+l,i="center",a="top"}}break;case"start":case"end":var h=0,y=0,d=0,m=0;if(void 0!==r.pointList){var g=r.pointList;if(g.length<2)return;var v=g.length;switch(c){case"start":h=g[0][0]+f[0],y=g[1][0]+f[0],d=g[0][1]+f[1],m=g[1][1]+f[1];break;case"end":h=g[v-2][0]+f[0],y=g[v-1][0]+f[0],d=g[v-2][1]+f[1],m=g[v-1][1]+f[1]}}else h=r.xStart+f[0]||0,y=r.xEnd+f[0]||0,d=r.yStart+f[1]||0,m=r.yEnd+f[1]||0;switch(c){case"start":i=h<y?"end":"start",a=d<m?"bottom":"top",s=h,u=d;break;case"end":i=h<y?"start":"end",a=d<m?"top":"bottom",s=y,u=m}l-=4,h&&y&&h!=y?s-="end"==i?l:-l:i="center",d!=m?u-="bottom"==a?l:-l:a="middle";break;case"specific":s=r.textX||0,u=r.textY||0,i="start",a="middle"}r.labelXOffset&&!isNaN(r.labelXOffset)&&(s+=r.labelXOffset),r.labelYOffset&&!isNaN(r.labelYOffset)&&(u+=r.labelYOffset),null!=s&&null!=u&&t._fillText(e,r.text,s,u,r.textFont,r.textAlign||i,r.textBaseline||a)}}},{key:"modSelf",value:function(){this.__dirty=!0,this.style&&(this.style.__rect=null),this.highlightStyle&&(this.highlightStyle.__rect=null)}},{key:"isSilent",value:function(){return!(this.hoverable||this.draggable||this.clickable||this.onmousemove||this.onmouseover||this.onmouseout||this.onmousedown||this.onmouseup||this.onclick||this.ondragenter||this.ondragover||this.ondragleave||this.ondrop)}},{key:"setCtxGlobalAlpha",value:function(e,t,r){e.globalAlpha="fill"===t?void 0===r.fillOpacity?void 0===r.opacity?1:r.opacity:r.fillOpacity:"stroke"===t?void 0===r.strokeOpacity?void 0===r.opacity?1:r.opacity:r.strokeOpacity:void 0===r.opacity?1:r.opacity}}],o=[{key:"_fillText",value:function(e,r,n,o,i,a,s){i&&(e.font=i),e.textAlign=a,e.textBaseline=s;var u=t._getTextRect(r,n,o,i,a,s);r=(r+"").split("\n");var l=$i.Util_area.getTextHeight("ZH",i);switch(s){case"top":o=u.y;break;case"bottom":o=u.y+l;break;default:o=u.y+l/2}for(var c=0,f=r.length;c<f;c++)e.fillText(r[c],n,o),o+=l}},{key:"_getTextRect",value:function(e,t,r,n,o,i){var a=$i.Util_area.getTextWidth(e,n),s=$i.Util_area.getTextHeight("ZH",n);switch(e=(e+"").split("\n"),o){case"end":case"right":t-=a;break;case"center":t-=a/2}switch(i){case"top":break;case"bottom":r-=s*e.length;break;default:r-=s*e.length/2}return{x:t,y:r,width:a,height:s*e.length}}}],n&&Ga(r.prototype,n),o&&Ga(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Ya(e){"@babel/helpers - typeof";return(Ya="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ja(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Wa(n.key),n)}}function Wa(e){var t=function(e,t){if("object"!=Ya(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Ya(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ya(t)?t:t+""}function Xa(e,t,r){return t=$a(t),function(e,t){if(t&&("object"==Ya(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],$a(e).constructor):t.apply(e,r))}function Za(){return(Za="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=$a(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function $a(e){return($a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function es(e,t){return(es=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var ts=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Xa(this,t,[e])).type="smicimage",r._imageCache={},r.refOriginalPosition&&2===r.refOriginalPosition.length||(r.refOriginalPosition=[0,0]),r.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicImage",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&es(e,t)}(t,Ka),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;this.type=null,this._imageCache=null,(e=t,r="destroy",n=this,i=Za($a(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"brush",value:function(e,r,n){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var o=this.refOriginalPosition,i=this.style||{};r&&(i=this.getHighlightStyle(i,this.highlightStyle||{}));var a=i.image,s=this;if("string"==typeof a){var u=a;this._imageCache[u]?a=this._imageCache[u]:((a=new Image).onload=function(){a.onload=null,clearTimeout(t._refreshTimeout),t._needsRefresh.push(s),t._refreshTimeout=setTimeout(function(){n&&n(t._needsRefresh),t._needsRefresh=[]},10)},a.src=u,this._imageCache[u]=a)}if(a){if("IMG"==a.nodeName.toUpperCase())if(window.ActiveXObject){if("complete"!=a.readyState)return}else if(!a.complete)return;var l=i.width||a.width,c=i.height||a.height,f=i.x+o[0],p=i.y+o[1];if(!a.width||!a.height)return;if(e.save(),this.doClip(e),this.setContext(e,i),this.setTransform(e),i.sWidth&&i.sHeight){var h=i.sx+o[0]||0,y=i.sy+o[1]||0;e.drawImage(a,h,y,i.sWidth,i.sHeight,f,p,l,c)}else if(i.sx&&i.sy){var d=i.sx+o[0],m=i.sy+o[1],g=l-d,v=c-m;e.drawImage(a,d,m,g,v,f,p,l,c)}else e.drawImage(a,f,p,l,c);i.width||(i.width=l),i.height||(i.height=c),this.style.width||(this.style.width=l),this.style.height||(this.style.height=c),this.drawText(e,i,this.style),e.restore()}}},{key:"getRect",value:function(e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t=this.refOriginalPosition;return{x:e.x+t[0],y:e.y+t[1],width:e.width,height:e.height}}},{key:"clearCache",value:function(){this._imageCache={}}}])&&Ja(r.prototype,n),o&&Ja(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function rs(e){"@babel/helpers - typeof";return(rs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ns(e,t,r){return t=os(t),function(e,t){if(t&&("object"==rs(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],os(e).constructor):t.apply(e,r))}function os(e){return(os=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function is(e,t){return(is=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function as(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ss(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ls(n.key),n)}}function us(e,t,r){return t&&ss(e.prototype,t),r&&ss(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function ls(e){var t=function(e,t){if("object"!=rs(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=rs(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==rs(t)?t:t+""}ts._needsRefresh=[],ts._refreshTimeout=null;var cs=function(){function e(t,r){as(this,e),this.root=t,this.storage=r,this._domRoot=null,this._layers={},this._zlevelList=[],this._layerConfig={},this._bgDom=null,this.shapeToImage=null,e.devicePixelRatio=Math.max(window.devicePixelRatio||1,1),this.CLASS_NAME="SuperMap.LevelRenderer.Painter",this.root.innerHTML="",this._width=this._getWidth(),this._height=this._getHeight();var n=document.createElement("div");this._domRoot=n,n.style.position="relative",n.style.overflow="hidden",n.style.width=this._width+"px",n.style.height=this._height+"px",this.root.appendChild(n),this.shapeToImage=this._createShapeToImageProcessor(),this._bgDom=e.createDom(M.createUniqueID("SuperMap.Theme_background_"),"div",this),n.appendChild(this._bgDom),this._bgDom.onselectstart=a,this._bgDom.style["-webkit-user-select"]="none",this._bgDom.style["user-select"]="none",this._bgDom.style["-webkit-touch-callout"]="none";var o=new fs(M.createUniqueID("_highLightLayer_"),this);this._layers.hover=o,n.appendChild(o.dom),o.initContext(),o.dom.onselectstart=a,o.dom.style["-webkit-user-select"]="none",o.dom.style["user-select"]="none",o.dom.style["-webkit-touch-callout"]="none";var i=this;function a(){return!1}this.updatePainter=function(e,t){i.refreshShapes(e,t)}}return us(e,[{key:"destroy",value:function(){this.dispose(),this._zlevelList=null,this._layerConfig=null,this._bgDom=null,this.shapeToImage=null}},{key:"render",value:function(e){return this.refresh(e,!0),this}},{key:"refresh",value:function(e,t){var r=this.storage.getShapeList(!0);return this._paintList(r,t),"function"==typeof e&&e(),this}},{key:"_paintList",value:function(e,t){var r,n,o;for(var i in void 0===t&&(t=!1),this._updateLayerStatus(e),this._layers)"hover"!==i&&(this._layers[i].unusedCount++,this._layers[i].updateTransform());for(var a=[],s=0,u=e.length;s<u;s++){var l=e[s];if(n!==l.zlevel&&(r&&r.needTransform&&o.restore(),o=(r=this.getLayer(l.zlevel)).ctx,n=l.zlevel,r.unusedCount=0,(r.dirty||t)&&r.clear(),r.needTransform&&(o.save(),r.setTransform(o))),o&&l.__startClip){var c=l.__startClip;if(o.save(),c.needTransform){var f=c.transform;$i.Util_matrix.invert(a,f),o.transform(f[0],f[1],f[2],f[3],f[4],f[5])}if(o.beginPath(),c.buildPath(o,c.style),o.clip(),c.needTransform){var p=a;o.transform(p[0],p[1],p[2],p[3],p[4],p[5])}}if((r&&r.dirty||t)&&!l.invisible&&(!l.onbrush||l.onbrush&&!l.onbrush(o,!1)))if(Li.catchBrushException)try{l.brush(o,!1,this.updatePainter)}catch(e){$i.Util_log(e,"brush error of "+l.type,l)}else l.brush(o,!1,this.updatePainter);o&&l.__stopClip&&o.restore(),l.__dirty=!1}for(var h in o&&r&&r.needTransform&&o.restore(),this._layers)if("hover"!==h){var y=this._layers[h];y.dirty=!1,1==y.unusedCount&&y.clear()}}},{key:"getLayer",value:function(e){var t=this._layers[e];if(!t){var r=this._zlevelList.length,n=null,o=-1;if(r>0&&e>this._zlevelList[0]){for(o=0;o<r-1&&!(this._zlevelList[o]<e&&this._zlevelList[o+1]>e);o++);n=this._layers[this._zlevelList[o]]}this._zlevelList.splice(o+1,0,e),t=new fs(M.createUniqueID("_levelLayer_"+e),this);var i=n?n.dom:this._bgDom;i.nextSibling?i.parentNode.insertBefore(t.dom,i.nextSibling):i.parentNode.appendChild(t.dom),t.initContext(),this._layers[e]=t,this._layerConfig[e]&&(new Xo).merge(t,this._layerConfig[e],!0),t.updateTransform()}return t}},{key:"getLayers",value:function(){return this._layers}},{key:"_updateLayerStatus",value:function(e){var t=this._layers,r={};for(var n in t)"hover"!==n&&(r[n]=t[n].elCount,t[n].elCount=0);for(var o=0;o<e.length;o++){var i=e[o],a=t[i.zlevel];if(a){if(a.elCount++,a.dirty)continue;a.dirty=i.__dirty}}for(var s in t)"hover"!==s&&r[s]!==t[s].elCount&&(t[s].dirty=!0)}},{key:"refreshShapes",value:function(e,t){for(var r=0,n=e.length;r<n;r++){var o=e[r];this.storage.mod(o.id)}return this.refresh(t),this}},{key:"clear",value:function(){for(var e in this._layers)"hover"!=e&&this._layers[e].clear();return this}},{key:"modLayer",value:function(e,t){if(t){this._layerConfig[e]?(new Xo).merge(this._layerConfig[e],t,!0):this._layerConfig[e]=t;var r=this._layers[e];r&&(new Xo).merge(r,this._layerConfig[e],!0)}}},{key:"delLayer",value:function(e){var t=this._layers[e];t&&(this.modLayer(e,{position:t.position,rotation:t.rotation,scale:t.scale}),t.dom.parentNode.removeChild(t.dom),delete this._layers[e],this._zlevelList.splice((new Xo).indexOf(this._zlevelList,e),1))}},{key:"refreshHover",value:function(){this.clearHover();for(var e=this.storage.getHoverShapes(!0),t=0,r=e.length;t<r;t++)this._brushHover(e[t]);return this.storage.delHover(),this}},{key:"clearHover",value:function(){var e=this._layers.hover;return e&&e.clear(),this}},{key:"resize",value:function(){var e=this._domRoot;e.style.display="none";var t=this._getWidth(),r=this._getHeight();if(e.style.display="",this._width!=t||r!=this._height){for(var n in this._width=t,this._height=r,e.style.width=t+"px",e.style.height=r+"px",this._layers)this._layers[n].resize(t,r);this.refresh(null,!0)}return this}},{key:"clearLayer",value:function(e){var t=this._layers[e];t&&t.clear()}},{key:"dispose",value:function(){this.root.innerHTML="",this.root=null,this.storage=null,this._domRoot=null,this._layers=null}},{key:"getDomHover",value:function(){return this._layers.hover.dom}},{key:"toDataURL",value:function(t,r,n){var o=e.createDom(M.createUniqueID("SuperMap.Theme.image_"),"canvas",this);this._bgDom.appendChild(o);var i=o.getContext("2d");1!=e.devicePixelRatio&&i.scale(e.devicePixelRatio,e.devicePixelRatio),i.fillStyle=r||"#fff",i.rect(0,0,this._width*e.devicePixelRatio,this._height*e.devicePixelRatio),i.fill();var a=this;this.storage.iterShape(function(e){if(!e.invisible&&(!e.onbrush||e.onbrush&&!e.onbrush(i,!1)))if(Li.catchBrushException)try{e.brush(i,!1,a.updatePainter)}catch(t){$i.Util_log(t,"brush error of "+e.type,e)}else e.brush(i,!1,a.updatePainter)},{normal:"up",update:!0});var s=o.toDataURL(t,n);return i=null,this._bgDom.removeChild(o),s}},{key:"getWidth",value:function(){return this._width}},{key:"getHeight",value:function(){return this._height}},{key:"_getWidth",value:function(){var e=this.root,t=e.currentStyle||document.defaultView.getComputedStyle(e);return((e.clientWidth||parseInt(t.width,10))-parseInt(t.paddingLeft,10)-parseInt(t.paddingRight,10)).toFixed(0)-0}},{key:"_getHeight",value:function(){var e=this.root,t=e.currentStyle||document.defaultView.getComputedStyle(e);return((e.clientHeight||parseInt(t.height,10))-parseInt(t.paddingTop,10)-parseInt(t.paddingBottom,10)).toFixed(0)-0}},{key:"_brushHover",value:function(e){var t=this._layers.hover.ctx;if(!e.onbrush||e.onbrush&&!e.onbrush(t,!0)){var r=this.getLayer(e.zlevel);if(r.needTransform&&(t.save(),r.setTransform(t)),Li.catchBrushException)try{e.brush(t,!0,this.updatePainter)}catch(t){$i.Util_log(t,"hoverBrush error of "+e.type,e)}else e.brush(t,!0,this.updatePainter);r.needTransform&&t.restore()}}},{key:"_shapeToImage",value:function(e,t,r,n,o){var i=document.createElement("canvas"),a=i.getContext("2d"),s=o||window.devicePixelRatio||1;i.style.width=r+"px",i.style.height=n+"px",i.setAttribute("width",r*s),i.setAttribute("height",n*s),a.clearRect(0,0,r*s,n*s);var u={position:t.position,rotation:t.rotation,scale:t.scale};t.position=[0,0,0],t.rotation=0,t.scale=[1,1],t&&t.brush(a,!1);var l=new ts({id:e,style:{x:0,y:0,image:i}});return null!=u.position&&(l.position=t.position=u.position),null!=u.rotation&&(l.rotation=t.rotation=u.rotation),null!=u.scale&&(l.scale=t.scale=u.scale),l}},{key:"_createShapeToImageProcessor",value:function(){var t=this;return function(r,n,o,i){return t._shapeToImage(r,n,o,i,e.devicePixelRatio)}}},{key:"updateHoverLayer",value:function(e){if(!(e instanceof Array))return this;this.clearHover(),this.storage.delHover();for(var t=0;t<e.length;t++)this.storage.addHover(e[t]),this._brushHover(e[t])}}],[{key:"createDom",value:function(t,r,n){var o=document.createElement(r),i=n._width,a=n._height;return o.style.position="absolute",o.style.left=0,o.style.top=0,o.style.width=i+"px",o.style.height=a+"px",o.setAttribute("width",i*e.devicePixelRatio),o.setAttribute("height",a*e.devicePixelRatio),o.setAttribute("id",t),o}}])}(),fs=function(e){function t(e,r){var n;return as(this,t),(n=ns(this,t,[e,r])).dom=null,n.domBack=null,n.ctxBack=null,n.painter=r,n.unusedCount=0,n.config=null,n.dirty=!0,n.elCount=0,n.clearColor=0,n.motionBlur=!1,n.lastFrameAlpha=.7,n.zoomable=!1,n.panable=!1,n.maxZoom=1/0,n.minZoom=0,n.ctx=null,n.dom=cs.createDom(M.createUniqueID("SuperMap.Theme"+e),"canvas",r),n.dom.onselectstart=function(){return!1},n.dom.style["-webkit-user-select"]="none",n.dom.style["user-select"]="none",n.dom.style["-webkit-touch-callout"]="none",n.CLASS_NAME="SuperMap.LevelRenderer.Painter.Layer",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&is(e,t)}(t,na),us(t,[{key:"destroy",value:function(){this.dom=null,this.domBack=null,this.ctxBack=null,this.painter=null,this.unusedCount=null,this.config=null,this.dirty=null,this.elCount=null,this.clearColor=null,this.motionBlur=null,this.lastFrameAlpha=null,this.zoomable=null,this.panable=null,this.maxZoom=null,this.minZoom=null,this.ctx=null,na.destroy.apply(this,arguments)}},{key:"initContext",value:function(){this.ctx=this.dom.getContext("2d"),1!=cs.devicePixelRatio&&this.ctx.scale(cs.devicePixelRatio,cs.devicePixelRatio)}},{key:"createBackBuffer",value:function(){this.domBack=cs.createDom(M.createUniqueID("SuperMap.Theme.back-"+this.id),"canvas",this.painter),this.ctxBack=this.domBack.getContext("2d"),1!=cs.devicePixelRatio&&this.ctxBack.scale(cs.devicePixelRatio,cs.devicePixelRatio)}},{key:"resize",value:function(e,t){this.dom.style.width=e+"px",this.dom.style.height=t+"px",this.dom.setAttribute("width",e*cs.devicePixelRatio),this.dom.setAttribute("height",t*cs.devicePixelRatio),1!=cs.devicePixelRatio&&this.ctx.scale(cs.devicePixelRatio,cs.devicePixelRatio),this.domBack&&(this.domBack.setAttribute("width",e*cs.devicePixelRatio),this.domBack.setAttribute("height",t*cs.devicePixelRatio),1!=cs.devicePixelRatio&&this.ctxBack.scale(cs.devicePixelRatio,cs.devicePixelRatio))}},{key:"clear",value:function(){var e=this.dom,t=this.ctx,r=e.width,n=e.height,o=this.clearColor,i=this.motionBlur,a=this.lastFrameAlpha;if(i&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(e,0,0,r/cs.devicePixelRatio,n/cs.devicePixelRatio)),o?(t.save(),t.fillStyle=this.config.clearColor,t.fillRect(0,0,r/cs.devicePixelRatio,n/cs.devicePixelRatio),t.restore()):t.clearRect(0,0,r/cs.devicePixelRatio,n/cs.devicePixelRatio),i){var s=this.domBack;t.save(),t.globalAlpha=a,t.drawImage(s,0,0,r/cs.devicePixelRatio,n/cs.devicePixelRatio),t.restore()}}}])}();function ps(e){"@babel/helpers - typeof";return(ps="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hs(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ys(n.key),n)}}function ys(e){var t=function(e,t){if("object"!=ps(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ps(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ps(t)?t:t+""}function ds(e,t,r){return t=ms(t),function(e,t){if(t&&("object"==ps(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],ms(e).constructor):t.apply(e,r))}function ms(e){return(ms=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gs(e,t){return(gs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var vs=function(e){function t(e,r,n){var o,i,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=ds(this,t,[e,r,n])).root=e,o.storage=r,o.painter=n,o._lastX=0,o._lastY=0,o._mouseX=0,o._mouseY=0,o._findHover=null,o._domHover=null,o._findHover=(i=function(e,t,r){var n=this;if(n._draggingTarget&&n._draggingTarget.id==e.id||e.isSilent())return!1;var o=n._event;if(e.isCover(t,r)){if(e.hoverable)if(e.isHoverByRefDataID&&!0===e.isHoverByRefDataID){if(e.refDataID){var i=e.refDataID,a=null;e.refDataHoverGroup&&(a=e.refDataHoverGroup);for(var s=n.storage._shapeList,u=0,l=s.length;u<l;u++){var c=s[u];c.refDataID&&i===c.refDataID&&(a?c.refDataHoverGroup&&a===c.refDataHoverGroup&&n.storage.addHover(c):n.storage.addHover(c))}}}else n.storage.addHover(e);for(var f=e.parent;f;){if(f.clipShape&&!f.clipShape.isCover(n._mouseX,n._mouseY))return!1;f=f.parent}return n._lastHover!=e&&(n._processOutShape(o),n._processDragLeave(o),n._lastHover=e,n._processDragEnter(o)),n._processOverShape(o),n._processDragOver(o),n._hasfound=1,!0}return!1},a=o,function(e,t,r){return i.call(a,e,t,r)}),o._domHover=n.getDomHover(),o.CLASS_NAME="SuperMap.LevelRenderer.Handler";var s={resize:function(e){e=e||window.event,this._lastHover=null,this._isMouseDown=0,this.dispatch(Li.EVENT.RESIZE,e)},click:function(e){e=this._zrenderEventFixed(e);var t=this._lastHover;(t&&t.clickable||!t)&&this._clickThreshold<10&&this._dispatchAgency(t,Li.EVENT.CLICK,e),this._mousemoveHandler(e)},dblclick:function(e){e=e||window.event,e=this._zrenderEventFixed(e);var t=this._lastHover;(t&&t.clickable||!t)&&this._clickThreshold<5&&this._dispatchAgency(t,Li.EVENT.DBLCLICK,e),this._mousemoveHandler(e)},mousewheel:function(e){var t=((e=this._zrenderEventFixed(e)).wheelDelta||-e.detail)>0?1.1:1/1.1,r=this.painter.getLayers(),n=!1;for(var o in r)if("hover"!==o){var i=r[o],a=i.position;if(i.zoomable){i.__zoom=i.__zoom||1;var s=i.__zoom;s*=t,t=(s=Math.max(Math.min(i.maxZoom,s),i.minZoom))/i.__zoom,i.__zoom=s,a[0]-=(this._mouseX-a[0])*(t-1),a[1]-=(this._mouseY-a[1])*(t-1),i.scale[0]*=t,i.scale[1]*=t,i.dirty=!0,n=!0}}n&&this.painter.refresh(),this._dispatchAgency(this._lastHover,Li.EVENT.MOUSEWHEEL,e),this._mousemoveHandler(e)},mousemove:function(e){this._clickThreshold++,e=this._zrenderEventFixed(e),this._lastX=this._mouseX,this._lastY=this._mouseY,this._mouseX=$i.Util_event.getX(e),this._mouseY=$i.Util_event.getY(e);var t=this._mouseX-this._lastX,r=this._mouseY-this._lastY;this._processDragStart(e),this._hasfound=0,this._event=e,this._iterateAndFindHover(),this._hasfound||((!this._draggingTarget||this._lastHover&&this._lastHover!=this._draggingTarget)&&(this._processOutShape(e),this._processDragLeave(e)),this._lastHover=null,this.storage.delHover(),this.painter.clearHover());var n="";if(this._draggingTarget)this.storage.drift(this._draggingTarget.id,t,r),this._draggingTarget.modSelf(),this.storage.addHover(this._draggingTarget);else if(this._isMouseDown){var o=this.painter.getLayers(),i=!1;for(var a in o)if("hover"!==a){var s=o[a];s.panable&&(n="move",s.position[0]+=t,s.position[1]+=r,i=!0,s.dirty=!0)}i&&this.painter.refresh()}this._draggingTarget||this._hasfound&&this._lastHover.draggable?n="move":this._hasfound&&this._lastHover.clickable&&(n="pointer"),this.root.style.cursor=n,this._dispatchAgency(this._lastHover,Li.EVENT.MOUSEMOVE,e),(this._draggingTarget||this._hasfound||this.storage.hasHoverShape())&&this.painter.refreshHover()},mouseout:function(e){var t=(e=this._zrenderEventFixed(e)).toElement||e.relatedTarget;if(t!=this.root)for(;t&&9!=t.nodeType;){if(t==this.root)return void this._mousemoveHandler(e);t=t.parentNode}e.zrenderX=this._lastX,e.zrenderY=this._lastY,this.root.style.cursor="",this._isMouseDown=0,this._processOutShape(e),this._processDrop(e),this._processDragEnd(e),this.painter.refreshHover(),this.dispatch(Li.EVENT.GLOBALOUT,e)},mousedown:function(e){if(this._clickThreshold=0,2==this._lastDownButton)return this._lastDownButton=e.button,void(this._mouseDownTarget=null);this._lastMouseDownMoment=new Date,e=this._zrenderEventFixed(e),this._isMouseDown=1,this._mouseDownTarget=this._lastHover,this._dispatchAgency(this._lastHover,Li.EVENT.MOUSEDOWN,e),this._lastDownButton=e.button},mouseup:function(e){e=this._zrenderEventFixed(e),this.root.style.cursor="",this._isMouseDown=0,this._mouseDownTarget=null,this._dispatchAgency(this._lastHover,Li.EVENT.MOUSEUP,e),this._processDrop(e),this._processDragEnd(e)},touchstart:function(e){e=this._zrenderEventFixed(e,!0),this._lastTouchMoment=new Date,this._mobildFindFixed(e),this._mousedownHandler(e)},touchmove:function(e){e=this._zrenderEventFixed(e,!0),this._mousemoveHandler(e),this._isDragging&&$i.Util_event.stop(e)},touchend:function(e){e=this._zrenderEventFixed(e,!0),this._mouseupHandler(e);var t=new Date;t-this._lastTouchMoment<Li.EVENT.touchClickDelay&&(this._mobildFindFixed(e),this._clickHandler(e),t-this._lastClickMoment<Li.EVENT.touchClickDelay/2&&(this._dblclickHandler(e),this._lastHover&&this._lastHover.clickable&&$i.Util_event.stop(e)),this._lastClickMoment=t),this.painter.clearHover()}};function u(e,t){return function(r){return e.call(t,r)}}return function(e){var t=["resize","click","dblclick","mousewheel","mousemove","mouseout","mouseup","mousedown","touchstart","touchend","touchmove"],r=t.length;for(;r--;){var n=t[r];e["_"+n+"Handler"]=u(s[n],e)}}(o),window.addEventListener?(window.addEventListener("resize",o._resizeHandler),$i.Util_env.os.tablet||$i.Util_env.os.phone?(e.addEventListener("touchstart",o._touchstartHandler),e.addEventListener("touchmove",o._touchmoveHandler),e.addEventListener("touchend",o._touchendHandler)):(e.addEventListener("click",o._clickHandler),e.addEventListener("dblclick",o._dblclickHandler),e.addEventListener("mousewheel",o._mousewheelHandler),e.addEventListener("mousemove",o._mousemoveHandler),e.addEventListener("mousedown",o._mousedownHandler),e.addEventListener("mouseup",o._mouseupHandler)),e.addEventListener("DOMMouseScroll",o._mousewheelHandler),e.addEventListener("mouseout",o._mouseoutHandler)):(window.attachEvent("onresize",o._resizeHandler),e.attachEvent("onclick",o._clickHandler),e.ondblclick=o._dblclickHandler,e.attachEvent("onmousewheel",o._mousewheelHandler),e.attachEvent("onmousemove",o._mousemoveHandler),e.attachEvent("onmouseout",o._mouseoutHandler),e.attachEvent("onmousedown",o._mousedownHandler),e.attachEvent("onmouseup",o._mouseupHandler)),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gs(e,t)}(t,ti),r=t,(n=[{key:"destroy",value:function(){this.dispose(),this._lastX=null,this._lastY=null,this._mouseX=null,this._mouseY=null,this._findHover=null,ti.prototype.destroy.apply(this,arguments)}},{key:"on",value:function(e,t){return this.bind(e,t),this}},{key:"un",value:function(e,t){return this.unbind(e,t),this}},{key:"trigger",value:function(e,t){var r=Li.EVENT;switch(e){case r.RESIZE:case r.CLICK:case r.DBLCLICK:case r.MOUSEWHEEL:case r.MOUSEMOVE:case r.MOUSEDOWN:case r.MOUSEUP:case r.MOUSEOUT:this["_"+e+"Handler"](t)}}},{key:"dispose",value:function(){var e=this.root;window.removeEventListener?(window.removeEventListener("resize",this._resizeHandler),$i.Util_env.os.tablet||$i.Util_env.os.phone?(e.removeEventListener("touchstart",this._touchstartHandler),e.removeEventListener("touchmove",this._touchmoveHandler),e.removeEventListener("touchend",this._touchendHandler)):(e.removeEventListener("click",this._clickHandler),e.removeEventListener("dblclick",this._dblclickHandler),e.removeEventListener("mousewheel",this._mousewheelHandler),e.removeEventListener("mousemove",this._mousemoveHandler),e.removeEventListener("mousedown",this._mousedownHandler),e.removeEventListener("mouseup",this._mouseupHandler)),e.removeEventListener("DOMMouseScroll",this._mousewheelHandler),e.removeEventListener("mouseout",this._mouseoutHandler)):(window.detachEvent("onresize",this._resizeHandler),e.detachEvent("onclick",this._clickHandler),e.detachEvent("dblclick",this._dblclickHandler),e.detachEvent("onmousewheel",this._mousewheelHandler),e.detachEvent("onmousemove",this._mousemoveHandler),e.detachEvent("onmouseout",this._mouseoutHandler),e.detachEvent("onmousedown",this._mousedownHandler),e.detachEvent("onmouseup",this._mouseupHandler)),this.root=null,this._domHover=null,this.storage=null,this.painter=null,this.un()}},{key:"_processDragStart",value:function(e){var t=this._lastHover;if(this._isMouseDown&&t&&t.draggable&&!this._draggingTarget&&this._mouseDownTarget==t){if(t.dragEnableTime&&new Date-this._lastMouseDownMoment<t.dragEnableTime)return;var r=t;this._draggingTarget=r,this._isDragging=1,r.invisible=!0,this.storage.mod(r.id),this._dispatchAgency(r,Li.EVENT.DRAGSTART,e),this.painter.refresh()}}},{key:"_processDragEnter",value:function(e){this._draggingTarget&&this._dispatchAgency(this._lastHover,Li.EVENT.DRAGENTER,e,this._draggingTarget)}},{key:"_processDragOver",value:function(e){this._draggingTarget&&this._dispatchAgency(this._lastHover,Li.EVENT.DRAGOVER,e,this._draggingTarget)}},{key:"_processDragLeave",value:function(e){this._draggingTarget&&this._dispatchAgency(this._lastHover,Li.EVENT.DRAGLEAVE,e,this._draggingTarget)}},{key:"_processDrop",value:function(e){this._draggingTarget&&(this._draggingTarget.invisible=!1,this.storage.mod(this._draggingTarget.id),this.painter.refresh(),this._dispatchAgency(this._lastHover,Li.EVENT.DROP,e,this._draggingTarget))}},{key:"_processDragEnd",value:function(e){this._draggingTarget&&(this._dispatchAgency(this._draggingTarget,Li.EVENT.DRAGEND,e),this._lastHover=null),this._isDragging=0,this._draggingTarget=null}},{key:"_processOverShape",value:function(e){this._dispatchAgency(this._lastHover,Li.EVENT.MOUSEOVER,e)}},{key:"_processOutShape",value:function(e){this._dispatchAgency(this._lastHover,Li.EVENT.MOUSEOUT,e)}},{key:"_dispatchAgency",value:function(e,t,r,n){var o="on"+t,i={type:t,event:r,target:e,cancelBubble:!1},a=e;for(n&&(i.dragged=n);a&&(a[o]&&(i.cancelBubble=a[o](i)),a.dispatch(t,i),a=a.parent,!i.cancelBubble););e?i.cancelBubble||this.dispatch(t,i):n||this.dispatch(t,{type:t,event:r})}},{key:"_iterateAndFindHover",value:function(){for(var e,t=$i.Util_matrix.create(),r=this.storage.getShapeList(),n=[0,0],o=r.length-1;o>=0;o--){var i=r[o];if(void 0!==i.zlevel&&(e=this.painter.getLayer(i.zlevel,e),n[0]=this._mouseX,n[1]=this._mouseY,e.needTransform&&($i.Util_matrix.invert(t,e.transform),$i.Util_vector.applyTransform(n,n,t))),this._findHover(i,n[0],n[1]))break}}},{key:"_mobildFindFixed",value:function(e){var t=[{x:10},{x:-20},{x:10,y:10},{y:-20}];this._lastHover=null,this._mouseX=e.zrenderX,this._mouseY=e.zrenderY,this._event=e,this._iterateAndFindHover();for(var r=0;!this._lastHover&&r<t.length;r++){var n=t[r];n.x&&(this._mouseX+=n.x),n.y&&(this._mouseX+=n.y),this._iterateAndFindHover()}this._lastHover&&(e.zrenderX=this._mouseX,e.zrenderY=this._mouseY)}},{key:"_zrenderEventFixed",value:function(e,t){if(e.zrenderFixed)return e;if(t){var r="touchend"!=e.type?e.targetTouches[0]:e.changedTouches[0];if(r){var n=this.root.getBoundingClientRect();e.zrenderX=r.clientX-n.left,e.zrenderY=r.clientY-n.top}}else{var o=(e=e||window.event).toElement||e.relatedTarget||e.srcElement||e.target;o&&o!=this._domHover&&(e.zrenderX=(void 0!==e.offsetX?e.offsetX:e.layerX)+o.offsetLeft,e.zrenderY=(void 0!==e.offsetY?e.offsetY:e.layerY)+o.offsetTop)}return e.zrenderFixed=1,e}},{key:"getLastHoverOne",value:function(){return this._lastHover?this._lastHover:null}}])&&hs(r.prototype,n),o&&hs(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function bs(e){"@babel/helpers - typeof";return(bs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function As(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ws(n.key),n)}}function ws(e){var t=function(e,t){if("object"!=bs(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=bs(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==bs(t)?t:t+""}var Ss=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.CLASS_NAME="SuperMap.LevelRenderer.Animation.easing"},(t=[{key:"destroy",value:function(){}},{key:"Linear",value:function(e){return e}},{key:"QuadraticIn",value:function(e){return e*e}},{key:"QuadraticOut",value:function(e){return e*(2-e)}},{key:"QuadraticInOut",value:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},{key:"CubicIn",value:function(e){return e*e*e}},{key:"CubicOut",value:function(e){return--e*e*e+1}},{key:"CubicInOut",value:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},{key:"QuarticIn",value:function(e){return e*e*e*e}},{key:"QuarticOut",value:function(e){return 1- --e*e*e*e}},{key:"QuarticInOut",value:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},{key:"QuinticIn",value:function(e){return e*e*e*e*e}},{key:"QuinticOut",value:function(e){return--e*e*e*e*e+1}},{key:"QuinticInOut",value:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},{key:"SinusoidalIn",value:function(e){return 1-Math.cos(e*Math.PI/2)}},{key:"SinusoidalOut",value:function(e){return Math.sin(e*Math.PI/2)}},{key:"SinusoidalInOut",value:function(e){return.5*(1-Math.cos(Math.PI*e))}},{key:"ExponentialIn",value:function(e){return 0===e?0:Math.pow(1024,e-1)}},{key:"ExponentialOut",value:function(e){return 1===e?1:1-Math.pow(2,-10*e)}},{key:"ExponentialInOut",value:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}},{key:"CircularIn",value:function(e){return 1-Math.sqrt(1-e*e)}},{key:"CircularOut",value:function(e){return Math.sqrt(1- --e*e)}},{key:"CircularInOut",value:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},{key:"ElasticIn",value:function(e){var t,r=.1;return 0===e?0:1===e?1:(r<1?(r=1,t=.1):t=.4*Math.asin(1/r)/(2*Math.PI),-r*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4))}},{key:"ElasticOut",value:function(e){var t,r=.1;return 0===e?0:1===e?1:(r<1?(r=1,t=.1):t=.4*Math.asin(1/r)/(2*Math.PI),r*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/.4)+1)}},{key:"ElasticInOut",value:function(e){var t,r=.1;return 0===e?0:1===e?1:(r<1?(r=1,t=.1):t=.4*Math.asin(1/r)/(2*Math.PI),(e*=2)<1?r*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4)*-.5:r*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4)*.5+1)}},{key:"BackIn",value:function(e){var t=1.70158;return e*e*((t+1)*e-t)}},{key:"BackOut",value:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1}},{key:"BackInOut",value:function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}},{key:"BounceIn",value:function(e){return 1-this.BounceOut(1-e)}},{key:"BounceOut",value:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}},{key:"BounceInOut",value:function(e){return e<.5?.5*this.BounceIn(2*e):.5*this.BounceOut(2*e-1)+.5}}])&&As(e.prototype,t),r&&As(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function Cs(e){"@babel/helpers - typeof";return(Cs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Es(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_s(n.key),n)}}function _s(e){var t=function(e,t){if("object"!=Cs(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Cs(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Cs(t)?t:t+""}var Is=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._targetPool=t.target||{},this._targetPool instanceof Array||(this._targetPool=[this._targetPool]),this._life=t.life||1e3,this._delay=t.delay||0,this._startTime=(new Date).getTime()+this._delay,this._endTime=this._startTime+1e3*this._life,this.loop=void 0!==t.loop&&t.loop,this.gap=t.gap||0,this.easing=t.easing||"Linear",this.onframe=t.onframe,this.ondestroy=t.ondestroy,this.onrestart=t.onrestart,this.CLASS_NAME="SuperMap.LevelRenderer.Animation.Clip"},(t=[{key:"destroy",value:function(){}},{key:"step",value:function(e){var t=new Ss,r=(e-this._startTime)/this._life;if(!(r<0)){r=Math.min(r,1);var n="string"==typeof this.easing?t[this.easing]:this.easing,o="function"==typeof n?n(r):r;return this.fire("frame",o),1==r?this.loop?(this.restart(),"restart"):(this._needsRemove=!0,"destroy"):null}}},{key:"restart",value:function(){var e=((new Date).getTime()-this._startTime)%this._life;this._startTime=(new Date).getTime()-e+this.gap}},{key:"fire",value:function(e,t){for(var r=0,n=this._targetPool.length;r<n;r++)this["on"+e]&&this["on"+e](this._targetPool[r],t)}}])&&Es(e.prototype,t),r&&Es(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function Os(e){"@babel/helpers - typeof";return(Os="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xs(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ps(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ts(n.key),n)}}function ks(e,t,r){return t&&Ps(e.prototype,t),r&&Ps(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ts(e){var t=function(e,t){if("object"!=Os(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Os(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Os(t)?t:t+""}function js(e,t,r){return t=Ms(t),function(e,t){if(t&&("object"==Os(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],Ms(e).constructor):t.apply(e,r))}function Ms(e){return(Ms=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Bs(e,t){return(Bs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Ns=function(e){function t(e){var r;return xs(this,t),r=js(this,t,[e]),e=e||{},r.stage={},r.onframe=function(){},r._clips=[],r._running=!1,r._time=0,M.extend(r,e),r.CLASS_NAME="SuperMap.LevelRenderer.Animation",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bs(e,t)}(t,ti),ks(t,[{key:"add",value:function(e){this._clips.push(e)}},{key:"remove",value:function(e){var t=(new Xo).indexOf(this._clips,e);t>=0&&this._clips.splice(t,1)}},{key:"_update",value:function(){for(var e=(new Date).getTime(),t=e-this._time,r=this._clips,n=r.length,o=[],i=[],a=0;a<n;a++){var s=r[a],u=s.step(e);u&&(o.push(u),i.push(s))}this.stage.update&&this.stage.update();for(var l=0;l<n;)r[l]._needsRemove?(r[l]=r[n-1],r.pop(),n--):l++;n=o.length;for(var c=0;c<n;c++)i[c].fire(o[c]);this._time=e,this.onframe(t),this.dispatch("frame",t)}},{key:"start",value:function(){var e=window.requestAnimationFrame||window.msRequestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){setTimeout(e,16)},t=this;this._running=!0,this._time=(new Date).getTime(),e(function r(){t._running&&(t._update(),e(r))})}},{key:"stop",value:function(){this._running=!1}},{key:"clear",value:function(){this._clips=[]}},{key:"animate",value:function(e,t){var r=new Rs(e,(t=t||{}).loop,t.getter,t.setter);return r.animation=this,r}}],[{key:"_interpolateNumber",value:function(e,t,r){return(t-e)*r+e}},{key:"_interpolateArray",value:function(e,r,n,o,i){var a=e.length;if(1==i)for(var s=0;s<a;s++)o[s]=t._interpolateNumber(e[s],r[s],n);else for(var u=e[0].length,l=0;l<a;l++)for(var c=0;c<u;c++)o[l][c]=t._interpolateNumber(e[l][c],r[l][c],n)}},{key:"_isArrayLike",value:function(e){switch(Os(e)){case"undefined":case"string":return!1}return void 0!==e.length}},{key:"_catmullRomInterpolateArray",value:function(e,r,n,o,i,a,s,u,l){var c=e.length;if(1==l)for(var f=0;f<c;f++)u[f]=t._catmullRomInterpolate(e[f],r[f],n[f],o[f],i,a,s);else for(var p=e[0].length,h=0;h<c;h++)for(var y=0;y<p;y++)u[h][y]=t._catmullRomInterpolate(e[h][y],r[h][y],n[h][y],o[h][y],i,a,s)}},{key:"_catmullRomInterpolate",value:function(e,t,r,n,o,i,a){var s=.5*(r-e),u=.5*(n-t);return(2*(t-r)+s+u)*a+(-3*(t-r)-2*s-u)*i+s*o+t}},{key:"_cloneValue",value:function(e){var r=Array.prototype.slice;if(t._isArrayLike(e)){var n=e.length;if(t._isArrayLike(e[0])){for(var o=[],i=0;i<n;i++)o.push(r.call(e[i]));return o}return r.call(e)}return e}},{key:"rgba2String",value:function(e){return e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.floor(e[2]),"rgba("+e.join(",")+")"}}])}(),Rs=function(){return ks(function e(t,r,n,o){xs(this,e),this._tracks={},this._target=t,this._loop=r||!1,this._getter=n||function(e,t){return e[t]},this._setter=o||function(e,t,r){e[t]=r},this._clipCount=0,this._delay=0,this._doneList=[],this._onframeList=[],this._clipList=[],this.CLASS_NAME="SuperMap.LevelRenderer.Animation.Animator"},[{key:"when",value:function(e,t){for(var r in t)this._tracks[r]||(this._tracks[r]=[],0!==e&&this._tracks[r].push({time:0,value:Ns._cloneValue(this._getter(this._target,r))})),this._tracks[r].push({time:parseInt(e,10),value:t[r]});return this}},{key:"during",value:function(e){return this._onframeList.push(e),this}},{key:"start",value:function(e){var t=this,r=this._setter,n=this._getter,o=t._onframeList.length,i="spline"===e,a=function(){if(t._clipCount--,0===t._clipCount){t._tracks={};for(var e=t._doneList.length,r=0;r<e;r++)t._doneList[r].call(t)}},s=function(s,u){var l=s.length;if(l){var c=s[0].value,f=Ns._isArrayLike(c),p=!1,h=f&&Ns._isArrayLike(c[0])?2:1;s.sort(function(e,t){return e.time-t.time});for(var y=s[l-1].time,d=[],m=[],g=0;g<l;g++){d.push(s[g].time/y);var v=s[g].value;"string"==typeof v&&(0===(v=$i.Util_color.toArray(v)).length&&(v[0]=v[1]=v[2]=0,v[3]=1),p=!0),m.push(v)}var b,A,w,S,C,E,_,I=0,O=0;if(p)var x=[0,0,0,0];var P=new Is({target:t._target,life:y,loop:t._loop,delay:t._delay,onframe:function(e,a){if(a<O){for(b=Math.min(I+1,l-1),A=b;A>=0&&!(d[A]<=a);A--);A=Math.min(A,l-2)}else{for(A=I;A<l&&!(d[A]>a);A++);A=Math.min(A-1,l-2)}I=A,O=a;var s=d[A+1]-d[A];if(0!==s){var c,y;for(w=(a-d[A])/s,i?(C=m[A],S=m[0===A?A:A-1],E=m[A>l-2?l-1:A+1],_=m[A>l-3?l-1:A+2],f?Ns._catmullRomInterpolateArray(S,C,E,_,w,w*w,w*w*w,n(e,u),h):(c=p?Ns.rgba2String(x):Ns._catmullRomInterpolate(S,C,E,_,w,w*w,w*w*w),r(e,u,c))):f?Ns._interpolateArray(m[A],m[A+1],w,n(e,u),h):(p?(Ns._interpolateArray(m[A],m[A+1],w,x,1),y=Ns.rgba2String(x)):y=Ns._interpolateNumber(m[A],m[A+1],w),r(e,u,y)),A=0;A<o;A++)t._onframeList[A](e,a)}},ondestroy:a});e&&"spline"!==e&&(P.easing=e),t._clipList.push(P),t._clipCount++,t.animation.add(P)}};for(var u in this._tracks)s(this._tracks[u],u);return this}},{key:"stop",value:function(){for(var e=0;e<this._clipList.length;e++){var t=this._clipList[e];this.animation.remove(t)}this._clipList=[]}},{key:"delay",value:function(e){return this._delay=e,this}},{key:"done",value:function(e){return e&&this._doneList.push(e),this}}])}();function Ls(e){"@babel/helpers - typeof";return(Ls="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ds(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Fs(n.key),n)}}function Fs(e){var t=function(e,t){if("object"!=Ls(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Ls(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ls(t)?t:t+""}var Qs=function(){return e=function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.storage=new da,this.painter=new cs(r,this.storage),this.handler=new vs(r,this.storage,this.painter),this.animatingElements=[],this.animation=new Ns({stage:{update:e.getFrameCallback(this)}}),this._needsRefreshNextFrame=!1,this.animation.start(),this.CLASS_NAME="SuperMap.LevelRenderer.Render"},r=[{key:"getFrameCallback",value:function(e){return function(){var t=e.animatingElements;if(t instanceof Array){for(var r=0,n=t.length;r<n;r++)e.storage.mod(t[r].id);(t.length||e._needsRefreshNextFrame)&&e.refresh()}}}}],(t=[{key:"destroy",value:function(){this.id=null,this.storage=null,this.painter=null,this.handler=null,this.animatingElements=null,this.animation=null,this._needsRefreshNextFrame=null}},{key:"getId",value:function(){return this.id}},{key:"addShape",value:function(e){return this.storage.addRoot(e),this}},{key:"addGroup",value:function(e){return this.storage.addRoot(e),this}},{key:"delShape",value:function(e){return this.storage.delRoot(e),this}},{key:"delGroup",value:function(e){return this.storage.delRoot(e),this}},{key:"modShape",value:function(e,t){return this.storage.mod(e,t),this}},{key:"modGroup",value:function(e,t){return this.storage.mod(e,t),this}},{key:"modLayer",value:function(e,t){return this.painter.modLayer(e,t),this}},{key:"addHoverShape",value:function(e){return this.storage.addHover(e),this}},{key:"render",value:function(e){return this.painter.render(e),this._needsRefreshNextFrame=!1,this}},{key:"refresh",value:function(e){return this.painter.refresh(e),this._needsRefreshNextFrame=!1,this}},{key:"refreshNextFrame",value:function(){return this._needsRefreshNextFrame=!0,this}},{key:"refreshHover",value:function(e){return this.painter.refreshHover(e),this}},{key:"refreshShapes",value:function(e,t){return this.painter.refreshShapes(e,t),this}},{key:"resize",value:function(){return this.painter.resize(),this}},{key:"animate",value:function(e,t,r){if("string"==typeof e&&(e=this.storage.get(e)),e){var n;if(t){for(var o=t.split("."),i=e,a=0,s=o.length;a<s;a++)i&&(i=i[o[a]]);i&&(n=i)}else n=e;if(!n)return void $i.Util_log('Property "'+t+'" is not existed in element '+e.id);var u=this.animatingElements;return void 0===e.__aniCount&&(e.__aniCount=0),0===e.__aniCount&&u.push(e),e.__aniCount++,this.animation.animate(n,{loop:r}).done(function(){if(e.__aniCount--,0===e.__aniCount){var t=(new Xo).indexOf(u,e);u.splice(t,1)}})}$i.Util_log("Element not existed")}},{key:"clearAnimation",value:function(){this.animation.clear()}},{key:"getWidth",value:function(){return this.painter.getWidth()}},{key:"getHeight",value:function(){return this.painter.getHeight()}},{key:"toDataURL",value:function(e,t,r){return this.painter.toDataURL(e,t,r)}},{key:"shapeToImage",value:function(e,t,r){var n=M.createUniqueID("SuperMap.LevelRenderer.ToImage_");return this.painter.shapeToImage(n,e,t,r)}},{key:"on",value:function(e,t){return this.handler.on(e,t),this}},{key:"un",value:function(e,t){return this.handler.un(e,t),this}},{key:"trigger",value:function(e,t){return this.handler.trigger(e,t),this.handler.dispatch(e,t),this}},{key:"clear",value:function(){return this.storage.delRoot(),this.painter.clear(),this}},{key:"dispose",value:function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=null,this.animatingElements=null,this.storage=null,this.painter=null,this.handler=null}},{key:"updateHoverShapes",value:function(e){return this.painter.updateHoverLayer(e),this}},{key:"getAllShapes",value:function(){return this.storage._shapeList}},{key:"clearAll",value:function(){return this.clear(),this.painter.clearHover(),this}},{key:"getHoverOne",value:function(){return this.handler.getLastHoverOne()}}])&&Ds(e.prototype,t),r&&Ds(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function Gs(e){"@babel/helpers - typeof";return(Gs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Us(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,zs(n.key),n)}}function zs(e){var t=function(e,t){if("object"!=Gs(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Gs(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Gs(t)?t:t+""}var Hs=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e._instances={},e.Tool={},this.version="2.0.4",this.CLASS_NAME="SuperMap.LevelRenderer"}return t=e,(r=[{key:"destroy",value:function(){this.dispose(),this.version=null}},{key:"init",value:function(t){var r=new Qs(M.createUniqueID("LRenderer_"),t);return e._instances[r.id]=r,r}},{key:"dispose",value:function(t){if(t)t.dispose(),this.delInstance(t.id);else{for(var r in e._instances)e._instances[r].dispose();e._instances={}}return this}},{key:"getInstance",value:function(t){return e._instances[t]}},{key:"delInstance",value:function(t){return delete e._instances[t],this}}])&&Us(t.prototype,r),n&&Us(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function qs(e){"@babel/helpers - typeof";return(qs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vs(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ks(n.key),n)}}function Ks(e){var t=function(e,t){if("object"!=qs(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=qs(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==qs(t)?t:t+""}var Ys=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.fieldNames=null,this.fieldValues=null,this.geometry=null,t&&M.extend(this,t),this.CLASS_NAME="SuperMap.ServerFeature"}return t=e,n=[{key:"fromJson",value:function(t){var r=null;if(t)return(r=t.geometry)&&(r=$n.fromJson(r)),new e({fieldNames:t.fieldNames,fieldValues:t.fieldValues,geometry:r})}}],(r=[{key:"destroy",value:function(){var e=this;e.fieldNames=null,e.fieldValues=null,e.geometry&&(e.geometry.destroy(),e.geometry=null)}},{key:"toFeature",value:function(){var e,t,r,n,o={},i=this;for(var a in e=i.fieldNames,t=i.fieldValues,e)o[e[a]]=t[a];return i.geometry&&(r=i.geometry.toGeometry()),n=new pr(r,o),i.geometry&&i.geometry.id&&(n.fid=i.geometry.id),n}}])&&Vs(t.prototype,r),n&&Vs(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function Js(e){"@babel/helpers - typeof";return(Js="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ws(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Xs(n.key),n)}}function Xs(e){var t=function(e,t){if("object"!=Js(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Js(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Js(t)?t:t+""}var Zs=function(){return e=function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=r||{};this.name=t,this.id=n.id?n.id:M.createUniqueID("themeLayer_"),this.opacity=n.opacity?n.opacity:1,this.visibility=!0,this.loadWhileAnimating=void 0===n.loadWhileAnimating||n.loadWhileAnimating,this.map=n.map?n.map:null,this.features=[],this.TFEvents=[],this.map&&this.map.addLayer(this)},(t=[{key:"onAdd",value:function(e){this.map=e,this._createCanvasContainer(),this.addTFEvents(),this.map.on("resize",this.resizeEvent.bind(this)),this.map.on("zoomstart",this.zoomStartEvent.bind(this)),this.map.on("zoomend",this.zoomEndEvent.bind(this)),this.map.on("rotatestart",this.rotateStartEvent.bind(this)),this.map.on("rotate",this.rotateEvent.bind(this)),this.map.on("rotateend",this.rotateEndEvent.bind(this)),this.map.on("dragend",this.dragEndEvent.bind(this)),this.map.on("movestart",this.moveStartEvent.bind(this)),this.map.on("move",this.moveEvent.bind(this)),this.map.on("moveend",this.moveEndEvent.bind(this)),this.map.on("remove",this.removeFromMap.bind(this)),this.refresh()}},{key:"refresh",value:function(){0!==this.features.length&&this.map&&this.redrawThematicFeatures(this.map.getBounds())}},{key:"_createCanvasContainer",value:function(){this.movingOffset=[0,0],this.mapContainer=this.map.getCanvasContainer(),this.div=document.createElement("div"),this.div.id=this.id,this.div.style.position="absolute";var e=this.map.getCanvasContainer(),t=this.map.getCanvas();this.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px",this.div.style.width=t.style.width,this.div.style.height=t.style.height,this.div.className="themeLayer",this.div.width=parseInt(t.width),this.div.height=parseInt(t.height),e.appendChild(this.div),this.setOpacity(this.opacity),this.levelRenderer=new Hs,this.renderer=this.levelRenderer.init(this.div),this.renderer.clear()}},{key:"destroyFeatures",value:function(e){if(void 0===e&&(e=this.features),e){this.removeFeatures(e),Array.isArray(e)||(e=[e]);for(var t=e.length-1;t>=0;t--)e[t].destroy()}}},{key:"setVisibility",value:function(e){e!==this.visibility&&(this.visibility=e,this.display(e),this.redrawThematicFeatures(this.map.getBounds()))}},{key:"display",value:function(e){this.div.style.display=e?"block":"none"}},{key:"setOpacity",value:function(e){if(e!==this.opacity){this.opacity=e;var t=this.div;M.modifyDOMElement(t,null,null,null,null,null,null,e),null!==this.map&&o().Evented.prototype.fire("changelayer",{layer:this,property:"opacity"})}}},{key:"addFeatures",value:function(e){}},{key:"removeFeatures",value:function(e){var t=this;if(e){if(e===t.features)return t.removeAllFeatures();M.isArray(e)||"function"==typeof e||(e=[e]);for(var r=[],n=0;n<t.features.length;n++){var i=t.features[n];if(e&&"function"==typeof e)e(i)&&t.features.splice(n--,1);else-1===M.indexOf(e,i)?r.push(i):t.features.splice(n--,1)}for(var a=[],s=0,u=this.features.length;s<u;s++)i=this.features[s],a.push(i);this.features=[],this.addFeatures(a),this.renderer&&this.redrawThematicFeatures(this.map.getBounds());var l=0==r.length;o().Evented.prototype.fire("featuresremoved",{features:r,succeed:l})}}},{key:"removeAllFeatures",value:function(){this.renderer&&this.renderer.clear(),this.features=[],o().Evented.prototype.fire("featuresremoved",{features:[],succeed:!0})}},{key:"getFeatures",value:function(e){for(var t=this.features.length,r=[],n=0;n<t;++n)(!e||e&&"function"==typeof e&&e(this.features[n]))&&r.push(this.features[n]);return r}},{key:"getFeatureBy",value:function(e,t){var r=null;for(var n in this.features)if(this.features[n][e]===t){r=this.features[n];break}return r}},{key:"getFeatureById",value:function(e){return this.getFeatureBy("id",e)}},{key:"getFeaturesByAttribute",value:function(e,t){var r,n=[];for(var o in this.features)(r=this.features[o])&&r.attributes&&r.attributes[e]===t&&n.push(r);return n}},{key:"redrawThematicFeatures",value:function(e){}},{key:"on",value:function(e,t,r){return this.renderer?this.renderer.on(e,t):this.map.on(e,t),this}},{key:"off",value:function(e,t,r){return this.renderer?this.renderer.un(e,t):this.map.off(e,t),this}},{key:"addTFEvents",value:function(){for(var e=this.TFEvents,t=e.length,r=0;r<t;r++)this.renderer.on(e[r][0],e[r][1])}},{key:"getLocalXY",value:function(e){var t,r=this.map;if(e instanceof ot||e instanceof Fo){var n=r.project(new(o().LngLat)(e.x,e.y));t=[n.x,n.y]}if(e instanceof Ve){var i=r.project(new(o().LngLat)(e.lon,e.lat));t=[i.x,i.y]}return t}},{key:"toiClientFeature",value:function(e){M.isArray(e)||(e=[e]);for(var t=[],r=0;r<e.length;r++)if(e[r]instanceof Ko)t.push(e[r].toFeature());else if(e[r]instanceof pr)t.push(e[r]);else if(-1!=["FeatureCollection","Feature","Geometry"].indexOf(e[r].type)){var n=new uo;t=t.concat(n.read(e[r]))}else{if(!e[r].geometry||!e[r].geometry.parts)throw new Error("features's type is not be supported.");t.push(Ys.fromJson(e[r]).toFeature())}return t}},{key:"toFeature",value:function(e){return this.toiClientFeature(e)}},{key:"moveEndEvent",value:function(){!this.loadWhileAnimating&&this.visibility&&(this.div.style.transform="",this.redrawThematicFeatures(this.map.getBounds()),this._show())}},{key:"moveStartEvent",value:function(){if(!this.loadWhileAnimating&&this.visibility){this.startPitch=this.map.getPitch(),this.startBearing=this.map.getBearing();var e=this.map.project(new(o().LngLat)(0,0));this.startMoveX=e.x,this.startMoveY=e.y}}},{key:"moveEvent",value:function(){if(!this.loadWhileAnimating&&this.visibility){if(!this.rotating&&!this.zooming){0!==this.map.getPitch()&&this._hide(),this.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px";var e=this.map.getPitch()-this.startPitch,t=-this.map.getBearing()+this.startBearing,r=this.map.project(new(o().LngLat)(0,0)),n=r.x-this.startMoveX,i=r.y-this.startMoveY;this.div.style.transform="rotateX("+e+"deg) rotateZ("+t+"deg) translate3d("+n+"px, "+i+"px, 0px)"}}else this.redrawThematicFeatures(this.map.getBounds())}},{key:"zoomStartEvent",value:function(){!this.loadWhileAnimating&&this.visibility&&(this.zooming=!0,this._hide())}},{key:"zoomEndEvent",value:function(){!this.loadWhileAnimating&&this.visibility&&(this.zooming=!1,this._show())}},{key:"rotateStartEvent",value:function(){!this.loadWhileAnimating&&this.visibility&&(this.rotating=!0)}},{key:"rotateEvent",value:function(){if(!this.loadWhileAnimating&&this.visibility){0!==this.map.getPitch()&&this._hide(),this.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px";var e=this.map.getPitch()-this.startPitch,t=-this.map.getBearing()+this.startBearing;this.div.style.transform="rotateX("+e+"deg) rotateZ("+t+"deg)"}}},{key:"rotateEndEvent",value:function(){!this.loadWhileAnimating&&this.visibility&&(this.rotating=!1,this._show())}},{key:"dragEndEvent",value:function(){!this.loadWhileAnimating&&this.visibility&&this._hide()}},{key:"resizeEvent",value:function(){this.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px";var e=this.map.getCanvas();this.div.style.width=e.style.width,this.div.style.height=e.style.height,this.div.width=parseInt(e.width),this.div.height=parseInt(e.height),this.renderer.resize()}},{key:"removeFromMap",value:function(){this.mapContainer.removeChild(this.div),this.removeAllFeatures()}},{key:"moveTo",value:function(e,t){var r=document.getElementById(this.div.id);if(t=void 0===t||t){var n=document.getElementById(e);r&&n&&n.parentNode.insertBefore(r,n)}else{var o=document.getElementById(e);if(r){if(o.nextSibling)return void o.parentNode.insertBefore(r,o.nextSibling);o.parentNode.appendChild(r)}}}},{key:"_hide",value:function(){this.renderer.painter.root.style.display="none"}},{key:"_show",value:function(){this.renderer.painter.root.style.display="block"}}])&&Ws(e.prototype,t),r&&Ws(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function $s(e){"@babel/helpers - typeof";return($s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,tu(n.key),n)}}function tu(e){var t=function(e,t){if("object"!=$s(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=$s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==$s(t)?t:t+""}function ru(e,t,r){return t=iu(t),function(e,t){if(t&&("object"==$s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],iu(e).constructor):t.apply(e,r))}function nu(e,t,r,n){var o=ou(iu(1&n?e.prototype:e),t,r);return 2&n&&"function"==typeof o?function(e){return o.apply(r,e)}:o}function ou(){return(ou="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=iu(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function iu(e){return(iu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function au(e,t){return(au=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var su=function(e){function t(e,r,n){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=ru(this,t,[e,n])).chartsSetting=n.chartsSetting||{},o.themeFields=n.themeFields||null,o.overlayWeightField=n.overlayWeightField||null,o.isOverLay=void 0===n.isOverLay||n.isOverLay,o.charts=n.charts||[],o.cache=n.cache||{},o.chartsType=r,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&au(e,t)}(t,Zs),r=t,(n=[{key:"setChartsType",value:function(e){this.chartsType=e,this.redraw()}},{key:"addFeatures",value:function(e){!1!==o().Evented.prototype.fire("beforefeaturesadded",{features:e})&&(this.features=this.toiClientFeature(e),this.renderer&&this.redrawThematicFeatures(this.map.getBounds()))}},{key:"redrawThematicFeatures",value:function(){this.clearCache(),this.renderer.clearAll();for(var e=this.features,t=0,r=e.length;t<r;t++){var n=e[t],o=this.cache,i=n.id;if(!o[i]){o[i]=i;var a=this.createThematicFeature(n);a&&this.overlayWeightField&&n.attributes[this.overlayWeightField]&&!isNaN(n.attributes[this.overlayWeightField])&&(a.__overlayWeight=n.attributes[this.overlayWeightField]),a&&this.charts.push(a)}}this.drawCharts()}},{key:"createThematicFeature",value:function(e){var t;return zo[this.chartsType]&&this.themeFields&&this.chartsSetting&&(t=new zo[this.chartsType](e,this,this.themeFields,this.chartsSetting)),!!t&&(t.assembleShapes(),t)}},{key:"drawCharts",value:function(){if(this.renderer){var e=this.charts;if(this.overlayWeightField&&e.sort(function(e,t){return void 0===e.__overlayWeight&&void 0===t.__overlayWeight?0:void 0!==e.__overlayWeight&&void 0===t.__overlayWeight?-1:void 0===e.__overlayWeight&&void 0!==t.__overlayWeight?1:void 0!==e.__overlayWeight&&void 0!==t.__overlayWeight?parseFloat(e.__overlayWeight)<parseFloat(t.__overlayWeight)?1:-1:0}),this.isOverLay)for(var t=[],r=0,n=e.length;r<n;r++){var o=e[r],i=o.resetLocation(),a=o.chartBounds,s=[{x:a.left,y:a.top},{x:a.left,y:a.bottom},{x:a.right,y:a.bottom},{x:a.right,y:a.top},{x:a.left,y:a.top}],u=!1;if(0!==r)for(var l=0;l<t.length;l++)if(this.isQuadrilateralOverLap(s,t[l])){u=!0;break}if(!u){t.push(s);for(var c=o.shapes,f=0,p=c.length;f<p;f++)c[f].refOriginalPosition=i,this.renderer.addShape(c[f])}}else for(var h=0,y=e.length;h<y;h++)for(var d=e[h],m=d.resetLocation(),g=d.shapes,v=0,b=g.length;v<b;v++)g[v].refOriginalPosition=m,this.renderer.addShape(g[v]);this.renderer.render()}}},{key:"getShapesByFeatureID",value:function(e){var t=[],r=this.renderer.getAllShapes();if(!e)return r;for(var n=0,o=r.length;n<o;n++){var i=r[n];i.refDataID&&e===i.refDataID&&t.push(i)}return t}},{key:"isQuadrilateralOverLap",value:function(e,t){var r=e.length,n=t.length;if(5!==r||5!==n)return null;for(var o=!1,i=0;i<r;i++)if(this.isPointInPoly(e[i],t)){o=!0;break}for(var a=0;a<n;a++)if(this.isPointInPoly(t[a],e)){o=!0;break}for(var s=0;s<r-1&&!o;s++)for(var u=0;u<n-1;u++){if("SuperMap.Geometry.Point"===M.lineIntersection(e[s],e[s+1],t[u],t[u+1]).CLASS_NAME){o=!0;break}}return o}},{key:"isPointInPoly",value:function(e,t){for(var r=!1,n=-1,o=t.length,i=o-1;++n<o;i=n)(t[n].y<=e.y&&e.y<t[i].y||t[i].y<=e.y&&e.y<t[n].y)&&e.x<(t[i].x-t[n].x)*(e.y-t[n].y)/(t[i].y-t[n].y)+t[n].x&&(r=!r);return r}},{key:"isChartInMap",value:function(e,t){for(var r=e,n=!1,o=0,i=t.length;o<i;o++){var a=t[o];if(a.x>=r.left&&a.x<=r.right&&a.y>=r.top&&a.y<=r.bottom){n=!0;break}}return n}},{key:"clearCache",value:function(){this.cache={},this.charts=[]}},{key:"removeFeatures",value:function(e){this.clearCache(),nu(t,"removeFeatures",this,3)([e])}},{key:"removeAllFeatures",value:function(){this.clearCache(),nu(t,"removeAllFeatures",this,3)([])}},{key:"redraw",value:function(){return this.clearCache(),!!this.renderer&&(this.redrawThematicFeatures(this.map.getBounds()),!0)}},{key:"clear",value:function(){this.renderer&&(this.renderer.clearAll(),this.renderer.refresh()),this.removeAllFeatures(),this.clearCache()}}])&&eu(r.prototype,n),i&&eu(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,i}();function uu(e){"@babel/helpers - typeof";return(uu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,cu(n.key),n)}}function cu(e){var t=function(e,t){if("object"!=uu(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=uu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==uu(t)?t:t+""}var fu=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.refOriginalPosition=[0,0],this.refDataID=null,this.isHoverByRefDataID=!1,this.refDataHoverGroup=null,this.dataInfo=null,this.clickable=!0,this.hoverable=!0,this.style=null,this.highlightStyle={},this.CLASS_NAME="SuperMap.Feature.ShapeParameters"},(t=[{key:"destroy",value:function(){this.refOriginalPosition=null,this.refDataID=null,this.isHoverByRefDataID=null,this.refDataHoverGroup=null,this.dataInfo=null,this.clickable=null,this.hoverable=null,this.style=null,this.highlightStyle=null}}])&&lu(e.prototype,t),r&&lu(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function pu(e){"@babel/helpers - typeof";return(pu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,yu(n.key),n)}}function yu(e){var t=function(e,t){if("object"!=pu(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=pu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==pu(t)?t:t+""}function du(e,t,r){return t=gu(t),function(e,t){if(t&&("object"==pu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],gu(e).constructor):t.apply(e,r))}function mu(){return(mu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=gu(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function gu(e){return(gu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vu(e,t){return(vu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var bu=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=du(this,t,[e,r])).x=isNaN(e)?0:e,n.y=isNaN(r)?0:r,n.r=6,n.CLASS_NAME="SuperMap.Feature.ShapeParameters.Point",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vu(e,t)}(t,fu),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;this.x=null,this.y=null,this.r=null,(e=t,r="destroy",n=this,i=mu(gu(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}}])&&hu(r.prototype,n),o&&hu(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Au(e){"@babel/helpers - typeof";return(Au="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Su(n.key),n)}}function Su(e){var t=function(e,t){if("object"!=Au(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Au(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Au(t)?t:t+""}function Cu(e,t,r){return t=_u(t),function(e,t){if(t&&("object"==Au(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],_u(e).constructor):t.apply(e,r))}function Eu(){return(Eu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=_u(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function _u(e){return(_u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Iu(e,t){return(Iu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Ou=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Cu(this,t,[e])).pointList=e,r.CLASS_NAME="SuperMap.Feature.ShapeParameters.Line",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Iu(e,t)}(t,fu),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;this.pointList=null,(e=t,r="destroy",n=this,i=Eu(_u(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}}])&&wu(r.prototype,n),o&&wu(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function xu(e){"@babel/helpers - typeof";return(xu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ku(n.key),n)}}function ku(e){var t=function(e,t){if("object"!=xu(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=xu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==xu(t)?t:t+""}function Tu(e,t,r){return t=Mu(t),function(e,t){if(t&&("object"==xu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],Mu(e).constructor):t.apply(e,r))}function ju(){return(ju="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=Mu(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function Mu(e){return(Mu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Bu(e,t){return(Bu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Nu=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Tu(this,t,[e])).pointList=e,r.holePolygonPointLists=null,r.CLASS_NAME="SuperMap.Feature.ShapeParameters.Polygon",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bu(e,t)}(t,fu),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;this.pointList=null,this.holePolygonPointLists=null,(e=t,r="destroy",n=this,i=ju(Mu(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}}])&&Pu(r.prototype,n),o&&Pu(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Ru(e){"@babel/helpers - typeof";return(Ru="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Du(n.key),n)}}function Du(e){var t=function(e,t){if("object"!=Ru(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Ru(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ru(t)?t:t+""}function Fu(e,t,r){return t=Gu(t),function(e,t){if(t&&("object"==Ru(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],Gu(e).constructor):t.apply(e,r))}function Qu(){return(Qu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=Gu(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function Gu(e){return(Gu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Uu(e,t){return(Uu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var zu=function(e){function t(e,r,n,o){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=Fu(this,t,[e,r,n,o])).x=isNaN(e)?0:e,i.y=isNaN(e)?0:r,i.width=isNaN(n)?0:n,i.height=isNaN(o)?0:o,i.CLASS_NAME="SuperMap.Feature.ShapeParameters.Rectangle",i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Uu(e,t)}(t,fu),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;this.x=null,this.y=null,this.width=null,this.height=null,(e=t,r="destroy",n=this,i=Qu(Gu(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}}])&&Lu(r.prototype,n),o&&Lu(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Hu(e){"@babel/helpers - typeof";return(Hu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Vu(n.key),n)}}function Vu(e){var t=function(e,t){if("object"!=Hu(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Hu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Hu(t)?t:t+""}function Ku(e,t,r){return t=Ju(t),function(e,t){if(t&&("object"==Hu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],Ju(e).constructor):t.apply(e,r))}function Yu(){return(Yu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=Ju(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function Ju(e){return(Ju=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Wu(e,t){return(Wu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Xu=function(e){function t(e,r,n,o,i,a,s){var u;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(u=Ku(this,t,[e,r,n,o,i,a,s])).x=isNaN(e)?0:e,u.y=isNaN(r)?0:r,u.r=isNaN(n)?0:n,u.startAngle=isNaN(o)?0:o,u.endAngle=isNaN(i)?0:i,u.r0=isNaN(a)?0:a,u.clockWise=s,u.CLASS_NAME="SuperMap.Feature.ShapeParameters.Sector",u}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wu(e,t)}(t,fu),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;this.x=null,this.y=null,this.r=null,this.startAngle=null,this.endAngle=null,this.r0=null,this.clockWise=null,(e=t,r="destroy",n=this,i=Yu(Ju(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}}])&&qu(r.prototype,n),o&&qu(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Zu(e){"@babel/helpers - typeof";return(Zu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,el(n.key),n)}}function el(e){var t=function(e,t){if("object"!=Zu(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Zu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Zu(t)?t:t+""}function tl(e,t,r){return t=nl(t),function(e,t){if(t&&("object"==Zu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],nl(e).constructor):t.apply(e,r))}function rl(){return(rl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=nl(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function nl(e){return(nl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ol(e,t){return(ol=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var il=function(e){function t(e,r,n){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=tl(this,t,[e,r,n])).x=e,o.y=r,o.text=n,o.CLASS_NAME="SuperMap.Feature.ShapeParameters.Label",o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ol(e,t)}(t,fu),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;this.x=null,this.y=null,this.text=null,(e=t,r="destroy",n=this,i=rl(nl(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}}])&&$u(r.prototype,n),o&&$u(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function al(e){"@babel/helpers - typeof";return(al="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sl(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ul(n.key),n)}}function ul(e){var t=function(e,t){if("object"!=al(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=al(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==al(t)?t:t+""}function ll(e,t,r){return t=fl(t),function(e,t){if(t&&("object"==al(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],fl(e).constructor):t.apply(e,r))}function cl(){return(cl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=fl(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function fl(e){return(fl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pl(e,t){return(pl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var hl=function(e){function t(e,r,n,o,i,a,s,u,l){var c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(c=ll(this,t,[e,r,n,o,i,a,s,u,l])).x=e,c.y=r,c.image=n,c.width=o,c.height=i,c.sx=a,c.sy=s,c.sWidth=u,c.sHeight=l,c.CLASS_NAME="SuperMap.Feature.ShapeParameters.Image",c}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pl(e,t)}(t,fu),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;this.x=null,this.y=null,this.image=null,this.width=null,this.height=null,this.sx=null,this.sy=null,this.sWidth=null,this.sHeight=null,(e=t,r="destroy",n=this,i=cl(fl(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}}])&&sl(r.prototype,n),o&&sl(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function yl(e){"@babel/helpers - typeof";return(yl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dl(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ml(n.key),n)}}function ml(e){var t=function(e,t){if("object"!=yl(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=yl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==yl(t)?t:t+""}function gl(e,t,r){return t=bl(t),function(e,t){if(t&&("object"==yl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],bl(e).constructor):t.apply(e,r))}function vl(){return(vl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=bl(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function bl(e){return(bl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Al(e,t){return(Al=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var wl=function(e){function t(e,r,n){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=gl(this,t,[e,r,n])).x=isNaN(e)?0:e,o.y=isNaN(r)?0:r,o.r=isNaN(n)?0:n,o.CLASS_NAME="SuperMap.Feature.ShapeParameters.Circle",o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Al(e,t)}(t,fu),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;this.x=null,this.y=null,this.r=null,(e=t,r="destroy",n=this,i=vl(bl(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}}])&&dl(r.prototype,n),o&&dl(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Sl(e){"@babel/helpers - typeof";return(Sl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Cl(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,El(n.key),n)}}function El(e){var t=function(e,t){if("object"!=Sl(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Sl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Sl(t)?t:t+""}function _l(e,t,r){return t=Ol(t),function(e,t){if(t&&("object"==Sl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],Ol(e).constructor):t.apply(e,r))}function Il(){return(Il="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=Ol(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function Ol(e){return(Ol=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xl(e,t){return(xl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Pl=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=_l(this,t,[e])).type="smicpoint",r.refOriginalPosition&&2===r.refOriginalPosition.length||(r.refOriginalPosition=[0,0]),r.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicPoint",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xl(e,t)}(t,Ka),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;this.type=null,(e=t,r="destroy",n=this,i=Il(Ol(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"buildPath",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition;e.arc(t.x+r[0],t.y+r[1],t.r,0,2*Math.PI,!0)}},{key:"getRect",value:function(e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t,r=this.refOriginalPosition;return e.__rect?e.__rect:(t="stroke"==e.brushType||"fill"==e.brushType?e.lineWidth||1:0,e.__rect={x:Math.round(e.x+r[0]-e.r-t/2),y:Math.round(e.y+r[1]-e.r-t/2),width:2*e.r+t,height:2*e.r+t},e.__rect)}}])&&Cl(r.prototype,n),o&&Cl(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function kl(e){"@babel/helpers - typeof";return(kl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Tl(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,jl(n.key),n)}}function jl(e){var t=function(e,t){if("object"!=kl(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=kl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==kl(t)?t:t+""}function Ml(e,t,r){return t=Nl(t),function(e,t){if(t&&("object"==kl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],Nl(e).constructor):t.apply(e,r))}function Bl(){return(Bl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=Nl(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function Nl(e){return(Nl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rl(e,t){return(Rl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Ll=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Ml(this,t,[e])).type="smictext",r.refOriginalPosition&&2===r.refOriginalPosition.length||(r.refOriginalPosition=[0,0]),r.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicText",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Rl(e,t)}(t,Ka),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;this.type=null,(e=t,r="destroy",n=this,i=Bl(Nl(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"brush",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,n=this.style;if(t&&(n=this.getHighlightStyle(n,this.highlightStyle||{})),void 0!==n.text&&!1!==n.text){e.save(),this.doClip(e),this.setContext(e,n),this.setTransform(e),n.textFont&&(e.font=n.textFont),e.textAlign=n.textAlign||"start",e.textBaseline=n.textBaseline||"middle";var o,i=(n.text+"").split("\n"),a=$i.Util_area.getTextHeight("ZH",n.textFont),s=this.getRectNoRotation(n),u=n.x+r[0];o="top"==n.textBaseline?s.y:"bottom"==n.textBaseline?s.y+a:s.y+a/2;for(var l=n.x+r[0],c=n.y+r[1],f=0,p=i.length;f<p;f++){switch(n.labelRect&&(e.fillRect(s.x-2,s.y,s.width+4,s.height),e.fillStyle=n.strokeColor,e.strokeRect(s.x-2,s.y,s.width+4,s.height),e.fillStyle=n.textColor),n.brushType){case"stroke":this.setCtxGlobalAlpha(e,"stroke",n),n.textRotation&&0!==n.textRotation?(e.save(),e.translate(l,c),e.rotate(n.textRotation*Math.PI/180),"top"==n.textBaseline?n.maxWidth?e.strokeText(i[f],0,a*f,n.maxWidth):e.strokeText(i[f],0,a*f):"bottom"==n.textBaseline?n.maxWidth?e.strokeText(i[f],0,a*(f+1)-s.height,n.maxWidth):e.strokeText(i[f],0,a*(f+1)-s.height):n.maxWidth?e.strokeText(i[f],0,a*(f+1)-s.height/2-a/2,n.maxWidth):e.strokeText(i[f],0,a*(f+1)-s.height/2-a/2),e.restore()):n.maxWidth?e.strokeText(i[f],u,o,n.maxWidth):e.strokeText(i[f],u,o),this.setCtxGlobalAlpha(e,"reset",n);break;case"both":n.textRotation&&0!==n.textRotation?(e.save(),e.translate(l,c),e.rotate(n.textRotation*Math.PI/180),"top"==n.textBaseline?n.maxWidth?(this.setCtxGlobalAlpha(e,"fill",n),e.fillText(i[f],0,a*f,n.maxWidth),this.setCtxGlobalAlpha(e,"reset",n),this.setCtxGlobalAlpha(e,"stroke",n),e.strokeText(i[f],0,a*f,n.maxWidth),this.setCtxGlobalAlpha(e,"reset",n)):(this.setCtxGlobalAlpha(e,"fill",n),e.fillText(i[f],0,a*f),this.setCtxGlobalAlpha(e,"reset",n),this.setCtxGlobalAlpha(e,"stroke",n),e.strokeText(i[f],0,a*f),this.setCtxGlobalAlpha(e,"reset",n)):"bottom"==n.textBaseline?n.maxWidth?(this.setCtxGlobalAlpha(e,"fill",n),e.fillText(i[f],0,a*(f+1)-s.height,n.maxWidth),this.setCtxGlobalAlpha(e,"reset",n),this.setCtxGlobalAlpha(e,"stroke",n),e.strokeText(i[f],0,a*(f+1)-s.height,n.maxWidth),this.setCtxGlobalAlpha(e,"reset",n)):(this.setCtxGlobalAlpha(e,"fill",n),e.fillText(i[f],0,a*(f+1)-s.height),this.setCtxGlobalAlpha(e,"reset",n),this.setCtxGlobalAlpha(e,"stroke",n),e.strokeText(i[f],0,a*(f+1)-s.height),this.setCtxGlobalAlpha(e,"reset",n)):n.maxWidth?(this.setCtxGlobalAlpha(e,"fill",n),e.fillText(i[f],0,a*(f+1)-s.height/2-a/2,n.maxWidth),this.setCtxGlobalAlpha(e,"reset",n),this.setCtxGlobalAlpha(e,"stroke",n),e.strokeText(i[f],0,a*(f+1)-s.height/2-a/2,n.maxWidth),this.setCtxGlobalAlpha(e,"reset",n)):(this.setCtxGlobalAlpha(e,"fill",n),e.fillText(i[f],0,a*(f+1)-s.height/2-a/2),this.setCtxGlobalAlpha(e,"reset",n),this.setCtxGlobalAlpha(e,"stroke",n),e.strokeText(i[f],0,a*(f+1)-s.height/2-a/2),this.setCtxGlobalAlpha(e,"reset",n)),e.restore()):n.maxWidth?(this.setCtxGlobalAlpha(e,"fill",n),e.fillText(i[f],u,o,n.maxWidth),this.setCtxGlobalAlpha(e,"reset",n),this.setCtxGlobalAlpha(e,"stroke",n),e.strokeText(i[f],u,o,n.maxWidth),this.setCtxGlobalAlpha(e,"reset",n)):(this.setCtxGlobalAlpha(e,"fill",n),e.fillText(i[f],u,o),this.setCtxGlobalAlpha(e,"reset",n),this.setCtxGlobalAlpha(e,"stroke",n),e.strokeText(i[f],u,o),this.setCtxGlobalAlpha(e,"reset",n));break;default:this.setCtxGlobalAlpha(e,"fill",n),n.textRotation&&0!==n.textRotation?(e.save(),e.translate(l,c),e.rotate(n.textRotation*Math.PI/180),"top"==n.textBaseline?n.maxWidth?e.fillText(i[f],0,a*f,n.maxWidth):e.fillText(i[f],0,a*f):"bottom"==n.textBaseline?n.maxWidth?e.fillText(i[f],0,a*(f+1)-s.height,n.maxWidth):e.fillText(i[f],0,a*(f+1)-s.height):n.maxWidth?e.fillText(i[f],0,a*(f+1)-s.height/2-a/2,n.maxWidth):e.fillText(i[f],0,a*(f+1)-s.height/2-a/2),e.restore()):n.maxWidth?e.fillText(i[f],u,o,n.maxWidth):e.fillText(i[f],u,o),this.setCtxGlobalAlpha(e,"reset",n)}o+=a}e.restore()}}},{key:"getRect",value:function(e){if(e.__rect)return e.__rect;for(var t,r,n,o,i=this.getTextBackground(e,!0),a=0,s=i.length;a<s;a++){var u=i[a];0==a?(t=u[0],n=u[0],r=u[1],o=u[1]):(u[0]<t&&(t=u[0]),u[0]>n&&(n=u[0]),u[1]<r&&(r=u[1]),u[1]>o&&(o=u[1]))}return e.__rect={x:t,y:r,width:n-t,height:o-r},e.__rect}},{key:"getRectNoRotation",value:function(e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t,r=this.refOriginalPosition,n=$i.Util_area.getTextHeight("ZH",e.textFont),o=$i.Util_area.getTextWidth(e.text,e.textFont),i=$i.Util_area.getTextHeight(e.text,e.textFont),a=e.x+r[0];"end"==e.textAlign||"right"==e.textAlign?a-=o:"center"==e.textAlign&&(a-=o/2),t="top"==e.textBaseline?e.y+r[1]:"bottom"==e.textBaseline?e.y+r[1]-i:e.y+r[1]-i/2;var s,u=!1;if(e.maxWidth){var l=parseInt(e.maxWidth);l<o&&(s=o,u=!0,o=l),a=e.x+r[0],"end"==e.textAlign||"right"==e.textAlign?a-=o:"center"==e.textAlign&&(a-=o/2)}e.textFont&&(e.textFont.toLowerCase().indexOf("italic")>-1&&(o+=!0===u?n/3*(o/s):n/3));return{x:a,y:t,width:o,height:i}}},{key:"getTextBackground",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition;if(!t&&e.__textBackground)return e.__textBackground;var n=this.getRectNoRotation(e),o=e.x+r[0],i=e.y+r[1],a=[];if(e.textRotation&&0!==e.textRotation){var s=e.textRotation,u=this.getRotatedLocation(n.x,n.y,o,i,s),l=this.getRotatedLocation(n.x+n.width,n.y,o,i,s),c=this.getRotatedLocation(n.x+n.width,n.y+n.height,o,i,s),f=this.getRotatedLocation(n.x,n.y+n.height,o,i,s);a.push(u),a.push(l),a.push(c),a.push(f)}else{var p=[n.x,n.y],h=[n.x+n.width,n.y],y=[n.x+n.width,n.y+n.height],d=[n.x,n.y+n.height];a.push(p),a.push(h),a.push(y),a.push(d)}return e.__textBackground=a,e.__textBackground}},{key:"getRotatedLocation",value:function(e,t,r,n,o){var i,a,s=new Array;return t=-t,n=-n,o=-o,i=(e-r)*Math.cos(o/180*Math.PI)-(t-n)*Math.sin(o/180*Math.PI)+r,a=(e-r)*Math.sin(o/180*Math.PI)+(t-n)*Math.cos(o/180*Math.PI)+n,s[0]=i,s[1]=-a,s}}])&&Tl(r.prototype,n),o&&Tl(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Dl(e){"@babel/helpers - typeof";return(Dl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fl(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ql(n.key),n)}}function Ql(e){var t=function(e,t){if("object"!=Dl(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Dl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Dl(t)?t:t+""}function Gl(e,t,r){return t=zl(t),function(e,t){if(t&&("object"==Dl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],zl(e).constructor):t.apply(e,r))}function Ul(){return(Ul="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=zl(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function zl(e){return(zl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Hl(e,t){return(Hl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var ql=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Gl(this,t,[e])).type="smiccircle",r.refOriginalPosition&&2===r.refOriginalPosition.length||(r.refOriginalPosition=[0,0]),r.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicCircle",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Hl(e,t)}(t,Ka),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;this.type=null,(e=t,r="destroy",n=this,i=Ul(zl(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"buildPath",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,n=t.x+r[0],o=t.y+r[1];return e.moveTo(n+t.r,o),e.arc(n,o,t.r,0,2*Math.PI,!0),!0}},{key:"getRect",value:function(e){if(e.__rect)return e.__rect;this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t,r=this.refOriginalPosition,n=e.x+r[0],o=e.y+r[1],i=e.r;return t="stroke"==e.brushType||"fill"==e.brushType?e.lineWidth||1:0,e.__rect={x:Math.round(n-i-t/2),y:Math.round(o-i-t/2),width:2*i+t,height:2*i+t},e.__rect}}])&&Fl(r.prototype,n),o&&Fl(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Vl(e){"@babel/helpers - typeof";return(Vl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kl(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Yl(n.key),n)}}function Yl(e){var t=function(e,t){if("object"!=Vl(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Vl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Vl(t)?t:t+""}function Jl(e,t,r){return t=Xl(t),function(e,t){if(t&&("object"==Vl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],Xl(e).constructor):t.apply(e,r))}function Wl(){return(Wl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=Xl(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function Xl(e){return(Xl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Zl(e,t){return(Zl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var $l=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Jl(this,t,[e])).type="smicpolygon",r.holePolygonPointLists=null,r.refOriginalPosition&&2===r.refOriginalPosition.length||(r.refOriginalPosition=[0,0]),r.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicPolygon",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zl(e,t)}(t,Ka),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;this.type=null,this.holePolygonPointLists=null,(e=t,r="destroy",n=this,i=Wl(Xl(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"brush",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.style;t&&(r=this.getHighlightStyle(r,this.highlightStyle||{})),e.save(),this.setContext(e,r),this.setTransform(e);var n=!1;"fill"!=r.brushType&&"both"!=r.brushType&&void 0!==r.brushType||(e.beginPath(),"dashed"==r.lineType||"dotted"==r.lineType||"dot"==r.lineType||"dash"==r.lineType||"dashdot"==r.lineType||"longdash"==r.lineType||"longdashdot"==r.lineType?this.buildPath(e,{lineType:"solid",lineWidth:r.lineWidth,pointList:r.pointList}):(this.buildPath(e,r),n=!0),e.closePath(),this.setCtxGlobalAlpha(e,"fill",r),e.fill(),this.setCtxGlobalAlpha(e,"reset",r)),r.lineWidth>0&&("stroke"==r.brushType||"both"==r.brushType)&&(n||(e.beginPath(),this.buildPath(e,r)),this.setCtxGlobalAlpha(e,"stroke",r),e.stroke(),this.setCtxGlobalAlpha(e,"reset",r)),this.drawText(e,r,this.style);var o=M.cloneObject(r);if(o.pointList&&this.holePolygonPointLists&&this.holePolygonPointLists.length>0)for(var i=this.holePolygonPointLists,a=i.length,s=0;s<a;s++){var u=i[s];o.pointList=u,e.globalCompositeOperation="destination-out",n=!1,"fill"!=o.brushType&&"both"!=o.brushType&&void 0!==o.brushType||(e.beginPath(),"dashed"==o.lineType||"dotted"==o.lineType||"dot"==o.lineType||"dash"==o.lineType||"dashdot"==o.lineType||"longdash"==o.lineType||"longdashdot"==o.lineType?this.buildPath(e,{lineType:"solid",lineWidth:o.lineWidth,pointList:o.pointList}):(this.buildPath(e,o),n=!0),e.closePath(),this.setCtxGlobalAlpha(e,"fill",o),e.fill(),this.setCtxGlobalAlpha(e,"reset",o)),o.lineWidth>0&&("stroke"==o.brushType||"both"==o.brushType)?(n||(e.beginPath(),this.buildPath(e,o)),e.globalCompositeOperation="source-over",this.setCtxGlobalAlpha(e,"stroke",o),e.stroke(),this.setCtxGlobalAlpha(e,"reset",o)):e.globalCompositeOperation="source-over"}e.restore()}},{key:"buildPath",value:function(e,t){t.showShadow&&(e.shadowBlur=t.shadowBlur,e.shadowColor=t.shadowColor,e.shadowOffsetX=t.shadowOffsetX,e.shadowOffsetY=t.shadowOffsetY),this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,n=t.pointList;if(!(n.length<2))if(t.smooth&&"spline"!==t.smooth){var o,i,a,s=$i.SUtil_smoothBezier(n,t.smooth,!0,t.smoothConstraint,r);e.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var u=n.length,l=0;l<u;l++)o=s[2*l],i=s[2*l+1],a=[n[(l+1)%u][0]+r[0],n[(l+1)%u][1]+r[1]],e.bezierCurveTo(o[0],o[1],i[0],i[1],a[0],a[1])}else if("spline"===t.smooth&&(n=$i.SUtil_smoothSpline(n,!0,null,r)),t.lineType&&"solid"!=t.lineType){if("dashed"===t.lineType||"dotted"===t.lineType||"dot"===t.lineType||"dash"===t.lineType||"longdash"===t.lineType){var c=t._dashLength||(t.lineWidth||1)*("dashed"==t.lineType?5:1);t._dashLength=c;var f=t.lineWidth||1,p=f,h=f;"dashed"===t.lineType&&(p*=5,h*=5,t.lineCap&&"butt"!==t.lineCap&&(p-=f,h+=f)),"dotted"===t.lineType&&t.lineCap&&"butt"!==t.lineCap&&(p=1,h+=f),"dot"===t.lineType&&(h*=4,t.lineCap&&"butt"!==t.lineCap&&(p=1,h+=f)),"dash"===t.lineType&&(p*=4,h*=4,t.lineCap&&"butt"!==t.lineCap&&(p-=f,h+=f)),"longdash"===t.lineType&&(p*=8,h*=4,t.lineCap&&"butt"!==t.lineCap&&(p-=f,h+=f)),e.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var y=1;y<n.length;y++)$i.SUtil_dashedLineTo(e,n[y-1][0]+r[0],n[y-1][1]+r[1],n[y][0]+r[0],n[y][1]+r[1],f,[p,h]);$i.SUtil_dashedLineTo(e,n[n.length-1][0]+r[0],n[n.length-1][1]+r[1],n[0][0]+r[0],n[0][1]+r[1],f,[p,h])}else if("dashdot"===t.lineType||"longdashdot"===t.lineType){var d=t._dashLength||(t.lineWidth||1)*("dashed"==t.lineType?5:1);t._dashLength=d;var m=t.lineWidth||1,g=m,v=m,b=m,A=m;"dashdot"===t.lineType&&(g*=4,v*=4,A*=4,t.lineCap&&"butt"!==t.lineCap&&(g-=m,v+=m,b=1,A+=m)),"longdashdot"===t.lineType&&(g*=8,v*=4,A*=4,t.lineCap&&"butt"!==t.lineCap&&(g-=m,v+=m,b=1,A+=m)),e.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var w=1;w<n.length;w++)$i.SUtil_dashedLineTo(e,n[w-1][0]+r[0],n[w-1][1]+r[1],n[w][0]+r[0],n[w][1]+r[1],m,[g,v,b,A]);$i.SUtil_dashedLineTo(e,n[n.length-1][0]+r[0],n[n.length-1][1]+r[1],n[0][0]+r[0],n[0][1]+r[1],m,[g,v,b,A])}}else{e.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var S=1;S<n.length;S++)e.lineTo(n[S][0]+r[0],n[S][1]+r[1]);e.lineTo(n[0][0]+r[0],n[0][1]+r[1])}}},{key:"getRect",value:function(e,t){var r;if(t?r=t:(this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]),r=this.refOriginalPosition),e.__rect)return e.__rect;for(var n,o=Number.MAX_VALUE,i=Number.MIN_VALUE,a=Number.MAX_VALUE,s=Number.MIN_VALUE,u=e.pointList,l=0,c=u.length;l<c;l++)u[l][0]+r[0]<o&&(o=u[l][0]+r[0]),u[l][0]+r[0]>i&&(i=u[l][0]+r[0]),u[l][1]+r[1]<a&&(a=u[l][1]+r[1]),u[l][1]+r[1]>s&&(s=u[l][1]+r[1]);return n="stroke"==e.brushType||"fill"==e.brushType?e.lineWidth||1:0,e.__rect={x:Math.round(o-n/2),y:Math.round(a-n/2),width:i-o+n,height:s-a+n},e.__rect}}])&&Kl(r.prototype,n),o&&Kl(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function ec(e){"@babel/helpers - typeof";return(ec="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,rc(n.key),n)}}function rc(e){var t=function(e,t){if("object"!=ec(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ec(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ec(t)?t:t+""}function nc(e,t,r){return t=ic(t),function(e,t){if(t&&("object"==ec(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],ic(e).constructor):t.apply(e,r))}function oc(){return(oc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=ic(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function ic(e){return(ic=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ac(e,t){return(ac=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var sc=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=nc(this,t,[e])).brushTypeOnly="stroke",r.textPosition="end",r.type="smicbroken-line",r.refOriginalPosition&&2===r.refOriginalPosition.length||(r.refOriginalPosition=[0,0]),r.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicBrokenLine",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ac(e,t)}(t,Ka),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;this.brushTypeOnly=null,this.textPosition=null,this.type=null,(e=t,r="destroy",n=this,i=oc(ic(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"buildPath",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,n=t.pointList;if(!(n.length<2)){var o=Math.min(t.pointList.length,Math.round(t.pointListLength||t.pointList.length));if(t.smooth&&"spline"!==t.smooth){var i,a,s,u=$i.SUtil_smoothBezier(n,t.smooth,!1,t.smoothConstraint,r);e.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var l=0;l<o-1;l++)i=u[2*l],a=u[2*l+1],s=[n[l+1][0]+r[0],n[l+1][1]+r[1]],e.bezierCurveTo(i[0],i[1],a[0],a[1],s[0],s[1])}else if("spline"===t.smooth&&(o=(n=$i.SUtil_smoothSpline(n,null,null,r)).length),t.lineType&&"solid"!==t.lineType){if("dashed"===t.lineType||"dotted"===t.lineType||"dot"===t.lineType||"dash"===t.lineType||"longdash"===t.lineType){var c=t.lineWidth||1,f=c,p=c;"dashed"===t.lineType&&(f*=5,p*=5,t.lineCap&&"butt"!==t.lineCap&&(f-=c,p+=c)),"dotted"===t.lineType&&t.lineCap&&"butt"!==t.lineCap&&(f=1,p+=c),"dot"===t.lineType&&(p*=4,t.lineCap&&"butt"!==t.lineCap&&(f=1,p+=c)),"dash"===t.lineType&&(f*=4,p*=4,t.lineCap&&"butt"!==t.lineCap&&(f-=c,p+=c)),"longdash"===t.lineType&&(f*=8,p*=4,t.lineCap&&"butt"!==t.lineCap&&(f-=c,p+=c)),e.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var h=1;h<o;h++)$i.SUtil_dashedLineTo(e,n[h-1][0]+r[0],n[h-1][1]+r[1],n[h][0]+r[0],n[h][1]+r[1],c,[f,p])}else if("dashdot"===t.lineType||"longdashdot"===t.lineType){var y=t.lineWidth||1,d=y,m=y,g=y,v=y;"dashdot"===t.lineType&&(d*=4,m*=4,v*=4,t.lineCap&&"butt"!==t.lineCap&&(d-=y,m+=y,g=1,v+=y)),"longdashdot"===t.lineType&&(d*=8,m*=4,v*=4,t.lineCap&&"butt"!==t.lineCap&&(d-=y,m+=y,g=1,v+=y)),y=(t.lineWidth||1)*("dashed"===t.lineType?5:1),e.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var b=1;b<o;b++)$i.SUtil_dashedLineTo(e,n[b-1][0]+r[0],n[b-1][1]+r[1],n[b][0]+r[0],n[b][1]+r[1],y,[d,m,g,v])}}else{e.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var A=1;A<o;A++)e.lineTo(n[A][0]+r[0],n[A][1]+r[1])}}}},{key:"getRect",value:function(e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t=this.refOriginalPosition;return $l.prototype.getRect.apply(this,[e,t])}}])&&tc(r.prototype,n),o&&tc(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function uc(e){"@babel/helpers - typeof";return(uc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,cc(n.key),n)}}function cc(e){var t=function(e,t){if("object"!=uc(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=uc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==uc(t)?t:t+""}function fc(e,t,r){return t=hc(t),function(e,t){if(t&&("object"==uc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],hc(e).constructor):t.apply(e,r))}function pc(){return(pc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=hc(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function hc(e){return(hc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yc(e,t){return(yc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var dc=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=fc(this,t,[e])).type="smicrectangle",r.refOriginalPosition&&2===r.refOriginalPosition.length||(r.refOriginalPosition=[0,0]),r.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicRectangle",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yc(e,t)}(t,Ka),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;this.type=null,(e=t,r="destroy",n=this,i=pc(hc(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"_buildRadiusPath",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r,n,o,i,a,s=this.refOriginalPosition,u=t.x+s[0],l=t.y+s[1],c=t.width,f=t.height,p=t.radius;"number"==typeof p?r=n=o=i=p:p instanceof Array?1===p.length?r=n=o=i=p[0]:2===p.length?(r=o=p[0],n=i=p[1]):3===p.length?(r=p[0],n=i=p[1],o=p[2]):(r=p[0],n=p[1],o=p[2],i=p[3]):r=n=o=i=0,r+n>c&&(r*=c/(a=r+n),n*=c/a),o+i>c&&(o*=c/(a=o+i),i*=c/a),n+o>f&&(n*=f/(a=n+o),o*=f/a),r+i>f&&(r*=f/(a=r+i),i*=f/a),e.moveTo(u+r,l),e.lineTo(u+c-n,l),0!==n&&e.quadraticCurveTo(u+c,l,u+c,l+n),e.lineTo(u+c,l+f-o),0!==o&&e.quadraticCurveTo(u+c,l+f,u+c-o,l+f),e.lineTo(u+i,l+f),0!==i&&e.quadraticCurveTo(u,l+f,u,l+f-i),e.lineTo(u,l+r),0!==r&&e.quadraticCurveTo(u,l,u+r,l)}},{key:"buildPath",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition;t.radius?this._buildRadiusPath(e,t):(e.moveTo(t.x+r[0],t.y+r[1]),e.lineTo(t.x+r[0]+t.width,t.y+r[1]),e.lineTo(t.x+r[0]+t.width,t.y+r[1]+t.height),e.lineTo(t.x+r[0],t.y+r[1]+t.height),e.lineTo(t.x+r[0],t.y+r[1])),e.closePath()}},{key:"getRect",value:function(e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t,r=this.refOriginalPosition;return e.__rect?e.__rect:(t="stroke"==e.brushType||"fill"==e.brushType?e.lineWidth||1:0,e.__rect={x:Math.round(e.x+r[0]-t/2),y:Math.round(e.y+r[1]-t/2),width:e.width+t,height:e.height+t},e.__rect)}}])&&lc(r.prototype,n),o&&lc(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function mc(e){"@babel/helpers - typeof";return(mc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,vc(n.key),n)}}function vc(e){var t=function(e,t){if("object"!=mc(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=mc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==mc(t)?t:t+""}function bc(e,t,r){return t=wc(t),function(e,t){if(t&&("object"==mc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],wc(e).constructor):t.apply(e,r))}function Ac(){return(Ac="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=wc(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function wc(e){return(wc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Sc(e,t){return(Sc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Cc=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=bc(this,t,[e])).type="smicsector",r.refOriginalPosition&&2===r.refOriginalPosition.length||(r.refOriginalPosition=[0,0]),r.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicSector",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Sc(e,t)}(t,Ka),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;this.type=null,(e=t,r="destroy",n=this,i=Ac(wc(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"buildPath",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,n=t.x+r[0],o=t.y+r[1],i=t.r0||0,a=t.r,s=t.startAngle,u=t.endAngle,l=t.clockWise||!1;s=$i.Util_math.degreeToRadian(s),u=$i.Util_math.degreeToRadian(u),l||(s=-s,u=-u);var c=$i.Util_math.cos(s),f=$i.Util_math.sin(s);e.moveTo(c*i+n,f*i+o),e.lineTo(c*a+n,f*a+o),e.arc(n,o,a,s,u,!l),e.lineTo($i.Util_math.cos(u)*i+n,$i.Util_math.sin(u)*i+o),0!==i&&e.arc(n,o,i,u,s,l),e.closePath()}},{key:"getRect",value:function(e){if(e.__rect)return e.__rect;this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t=this.refOriginalPosition,r=$i.Util_vector.create(),n=$i.Util_vector.create(),o=$i.Util_vector.create(),i=$i.Util_vector.create(),a=e.x+t[0],s=e.y+t[1],u=e.r0||0,l=e.r,c=$i.Util_math.degreeToRadian(e.startAngle),f=$i.Util_math.degreeToRadian(e.endAngle),p=e.clockWise;return p||(c=-c,f=-f),u>1?$i.Util_computeBoundingBox.arc(a,s,u,c,f,!p,r,o):(r[0]=o[0]=a,r[1]=o[1]=s),$i.Util_computeBoundingBox.arc(a,s,l,c,f,!p,n,i),$i.Util_vector.min(r,r,n),$i.Util_vector.max(o,o,i),e.__rect={x:r[0],y:r[1],width:o[0]-r[0],height:o[1]-r[1]},e.__rect}}])&&gc(r.prototype,n),o&&gc(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Ec(e){"@babel/helpers - typeof";return(Ec="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ic(n.key),n)}}function Ic(e){var t=function(e,t){if("object"!=Ec(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Ec(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ec(t)?t:t+""}var Oc=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.shapeParameters=t,this.CLASS_NAME="SuperMap.Feature.ShapeFactory"}return t=e,n=[{key:"transformStyle",value:function(e){var t={},r=["normal","normal","normal","12","arial,sans-serif"],n=[!0,!1];for(var o in e)switch(o){case"fill":n[0]=e[o];break;case"fillColor":t.color=e[o];break;case"stroke":n[1]=e[o];break;case"strokeWidth":t.lineWidth=e[o];break;case"strokeLinecap":t.lineCap=e[o];break;case"strokeLineJoin":t.lineJoin=e[o];break;case"strokeDashstyle":t.lineType=e[o];break;case"pointRadius":t.r=e[o];break;case"label":t.text=e[o];break;case"labelRect":t.labelRect=e[o];break;case"fontColor":t.textColor=e[o];break;case"fontStyle":r[0]=e[o];break;case"fontVariant":r[1]=e[o];break;case"fontWeight":r[2]=e[o];break;case"fontSize":var i="";e[o]&&e[o].toString().indexOf("px")<0&&(i="px"),r[3]=e[o]+i;break;case"fontFamily":r[4]=e[o];break;case"fontOpacity":t.opacity=e[o];break;case"labelPosition":t.textPosition=e[o];break;case"labelAlign":t.textAlign=e[o];break;case"labelBaseline":t.textBaseline=e[o];break;case"labelRotation":t.textRotation=e[o];break;default:t[o]=e[o]}return t.textFont=r.join(" "),!0===n[0]&&!1===n[1]?t.brushType="fill":!1===n[0]&&!0===n[1]?t.brushType="stroke":!0===n[0]&&!0===n[1]?t.brushType="both":t.brushType="fill",null==t.lineWidth&&(t.lineWidth=1),t}},{key:"Background",value:function(e,t,r){var n=r||{},o=new zu(t[0],t[3],Math.abs(t[2]-t[0]),Math.abs(t[3]-t[1]));return o.style={fillColor:"#f3f3f3"},n.backgroundStyle&&M.copyAttributesWithClip(o.style,n.backgroundStyle),n.backgroundRadius&&(o.style.radius=n.backgroundRadius),o.clickable=!1,o.hoverable=!1,e.createShape(o)}},{key:"GraphAxis",value:function(e,t,r,n){var o=t,i=r||{},a=[],s=[],u=!!i.useXReferenceLine&&i.useXReferenceLine,l=i.axisYTick&&!isNaN(i.axisYTick)?i.axisYTick:0,c=[],f=[];if(0==l){if(f.push([o[0],o[3]-5]),f.push([o[0],o[1]]),i.axis3DParameter&&!isNaN(i.axis3DParameter)&&i.axis3DParameter>=15){var p=parseInt(i.axis3DParameter),h=[o[0]-p,o[1]+p];i.axisUseArrow?(c.push([h[0]+1.5,h[1]-7.5]),c.push([h[0]-1,h[1]+1]),c.push([h[0]+7.5,h[1]-1.5]),f.push([h[0],h[1]])):f.push([h[0],h[1]]),f.push([o[0],o[1]])}f.push([o[2]+5,o[1]])}else{var y=Math.abs(o[1]-o[3])/l,d=o[3];f.push([o[0],d-5]);for(var m=0;m<l;m++){if(f.push([o[0],d]),f.push([o[0]-5,d]),f.push([o[0],d]),u){var g=new Ou([[o[0],d],[o[2],d]]);g.style={strokeColor:"#cfcfcf",strokeLinecap:"butt",strokeLineJoin:"round",strokeWidth:1},g.clickable=!1,g.hoverable=!1,i.xReferenceLineStyle&&M.copyAttributesWithClip(g.style,i.xReferenceLineStyle),a.push(e.createShape(g))}d+=y}if(f.push([o[0],o[1]]),i.axis3DParameter&&!isNaN(i.axis3DParameter)&&i.axis3DParameter>=15){var v=parseInt(i.axis3DParameter),b=[o[0]-v,o[1]+v];i.axisUseArrow?(c.push([b[0]+1.5,b[1]-7.5]),c.push([b[0]-1,b[1]+1]),c.push([b[0]+7.5,b[1]-1.5]),f.push([b[0],b[1]])):f.push([b[0],b[1]]),f.push([o[0],o[1]])}f.push([o[2]+5,o[1]])}if(i.axisUseArrow){var A=[[o[2]+5,o[1]+4],[o[2]+13,o[1]],[o[2]+5,o[1]-4]],w=[[o[0]-4,o[3]-5],[o[0],o[3]-13],[o[0]+4,o[3]-5]],S=new Nu(A);S.style={fillColor:"#008acd"},M.copyAttributesWithClip(S.style,i.axisStyle),s.push(e.createShape(S));var C=new Nu(w);if(C.style={fillColor:"#008acd"},M.copyAttributesWithClip(C.style,i.axisStyle),s.push(e.createShape(C)),i.axis3DParameter&&!isNaN(i.axis3DParameter)&&i.axis3DParameter>=15){var E=new Nu(c);E.style={fillColor:"#008acd"},M.copyAttributesWithClip(E.style,i.axisStyle),s.push(e.createShape(E))}}var _=new Ou(f);_.style={strokeLinecap:"butt",strokeLineJoin:"round",strokeColor:"#008acd",strokeWidth:1},i.axisStyle&&M.copyAttributesWithClip(_.style,i.axisStyle),_.clickable=!1,_.hoverable=!1;var I=[e.createShape(_)],O=[];if(i.axisYLabels&&i.axisYLabels.length&&i.axisYLabels.length>0){var x=i.axisYLabels,P=x.length,k=[0,0];if(i.axisYLabelsOffset&&i.axisYLabelsOffset.length&&(k=i.axisYLabelsOffset),1==P){var T=new il(o[0]-5+k[0],o[3]+k[1],x[0]);T.style={labelAlign:"right"},i.axisYLabelsStyle&&M.copyAttributesWithClip(T.style,i.axisYLabelsStyle),T.clickable=!1,T.hoverable=!1,O.push(e.createShape(T))}else for(var j=o[3],B=Math.abs(o[1]-o[3])/(P-1),N=0;N<P;N++){var R=new il(o[0]-5+k[0],j+k[1],x[N]);R.style={labelAlign:"right"},i.axisYLabelsStyle&&M.copyAttributesWithClip(R.style,i.axisYLabelsStyle),R.clickable=!1,R.hoverable=!1,O.push(e.createShape(R)),j+=B}}var L=[];if(i.axisXLabels&&i.axisXLabels.length&&i.axisXLabels.length>0){var D=i.axisXLabels,F=D.length,Q=[0,0];if(i.axisXLabelsOffset&&i.axisXLabelsOffset.length&&(Q=i.axisXLabelsOffset),n&&n.xPositions&&n.xPositions.length&&n.xPositions.length==F)for(var G=n.xPositions,U=0;U<F;U++){var z=new il(G[U]+Q[0],o[1]+Q[1],D[U]);z.style={labelAlign:"center",labelBaseline:"top"},i.axisXLabelsStyle&&M.copyAttributesWithClip(z.style,i.axisXLabelsStyle),z.clickable=!1,z.hoverable=!1,L.push(e.createShape(z))}else if(1==F){var H=new il(o[0]-5+Q[0],o[1]+Q[0],D[0]);H.style={labelAlign:"center",labelBaseline:"top"},i.axisXLabelsStyle&&M.copyAttributesWithClip(H.style,i.axisXLabelsStyle),H.clickable=!1,H.hoverable=!1,L.push(e.createShape(H))}else for(var q=o[0],V=Math.abs(o[2]-o[0])/(F-1),K=0;K<F;K++){var Y=new il(q+Q[0],o[1]+Q[1],D[K]);Y.style={labelAlign:"center",labelBaseline:"top"},i.axisXLabelsStyle&&M.copyAttributesWithClip(Y.style,i.axisXLabelsStyle),Y.clickable=!1,Y.hoverable=!1,L.push(e.createShape(Y)),q+=V}}return a.concat(I).concat(O).concat(L).concat(s)}},{key:"ShapeStyleTool",value:function(e,t,r,n,o,i){var a=e||{};if(t&&M.copyAttributesWithClip(a,t),r&&r.length&&void 0!==o&&!isNaN(o)&&o>=0&&r[o]&&M.copyAttributesWithClip(a,r[o]),n&&n.length&&void 0!==i)for(var s=n,u=s.length,l=parseFloat(i),c=0;c<u;c++)if(s[c].start<=l&&l<s[c].end){M.copyAttributesWithClip(a,s[c].style);break}return a}}],(r=[{key:"destroy",value:function(){this.shapeParameters=null}},{key:"createShape",value:function(t){if(t&&(this.shapeParameters=t),!this.shapeParameters)return null;var r=this.shapeParameters;if(r instanceof bu){var n=new Object;n.x=r.x,n.y=r.y,n.r=r.r,n=M.copyAttributesWithClip(n,r.style,["x","y"]);var o=new Pl;return o.style=e.transformStyle(n),o.highlightStyle=e.transformStyle(r.highlightStyle),M.copyAttributesWithClip(o,r,["x","y","style","highlightStyle"]),o}if(r instanceof Ou){if(!r.pointList)return null;var i=new Object;i.pointList=r.pointList,i=M.copyAttributesWithClip(i,r.style,["pointList"]);var a=new sc;return a.style=e.transformStyle(i),a.highlightStyle=e.transformStyle(r.highlightStyle),M.copyAttributesWithClip(a,r,["pointList","style","highlightStyle"]),a}if(r instanceof Nu){if(!r.pointList)return null;var s=new Object;s.pointList=r.pointList,s=M.copyAttributesWithClip(s,r.style,["pointList"]);var u=new $l;return u.style=e.transformStyle(s),u.highlightStyle=e.transformStyle(r.highlightStyle),M.copyAttributesWithClip(u,r,["pointList","style","highlightStyle"]),u}if(r instanceof zu){if(!r.x&&!r.y&!r.width&!r.height)return null;var l=new Object;l.x=r.x,l.y=r.y,l.width=r.width,l.height=r.height,l=M.copyAttributesWithClip(l,r.style,["x","y","width","height"]);var c=new dc;return c.style=e.transformStyle(l),c.highlightStyle=e.transformStyle(r.highlightStyle),M.copyAttributesWithClip(c,r,["x","y","width","height","style","highlightStyle"]),c}if(r instanceof Xu){var f=new Object;f.x=r.x,f.y=r.y,f.r=r.r,f.startAngle=r.startAngle,f.endAngle=r.endAngle,r.r0&&(f.r0=r.r0),r.clockWise&&(f.clockWise=r.clockWise),f=M.copyAttributesWithClip(f,r.style,["x","y","r","startAngle","endAngle","r0","endAngle"]);var p=new Cc;return p.style=e.transformStyle(f),p.highlightStyle=e.transformStyle(r.highlightStyle),M.copyAttributesWithClip(p,r,["x","y","r","startAngle","endAngle","r0","endAngle","style","highlightStyle"]),p}if(r instanceof il){var h=new Object;h.x=r.x,h.y=r.y,h.text=r.text,h=M.copyAttributesWithClip(h,r.style,["x","y","text"]);var y=new Ll;return y.style=e.transformStyle(h),y.highlightStyle=e.transformStyle(r.highlightStyle),M.copyAttributesWithClip(y,r,["x","y","text","style","highlightStyle"]),y}if(r instanceof hl){var d=new Object;d.x=r.x,d.y=r.y,r.image&&(d.image=r.image),r.width&&(d.width=r.width),r.height&&(d.height=r.height),r.sx&&(d.sx=r.sx),r.sy&&(d.sy=r.sy),r.sWidth&&(d.sWidth=r.sWidth),r.sHeight&&(d.sHeight=r.sHeight),d=M.copyAttributesWithClip(d,r.style,["x","y","image","width","height","sx","sy","sWidth","sHeight"]);var m=new ts;return m.style=e.transformStyle(d),m.highlightStyle=e.transformStyle(r.highlightStyle),M.copyAttributesWithClip(m,r,["x","y","image","width","height","style","highlightStyle"]),m}if(r instanceof wl){var g=new Object;g.x=r.x,g.r=r.r,g.y=r.y,g=M.copyAttributesWithClip(g,r.style,["x","y","r"]);var v=new ql;return v.style=e.transformStyle(g),v.highlightStyle=e.transformStyle(r.highlightStyle),M.copyAttributesWithClip(v,r,["x","y","r","style","highlightStyle","lineWidth","text","textPosition"]),v}return null}}])&&_c(t.prototype,r),n&&_c(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function xc(e){"@babel/helpers - typeof";return(xc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,kc(n.key),n)}}function kc(e){var t=function(e,t){if("object"!=xc(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=xc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==xc(t)?t:t+""}function Tc(e,t,r){return t=Bc(t),jc(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],Bc(e).constructor):t.apply(e,r))}function jc(e,t){if(t&&("object"==xc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Mc(){return(Mc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=Bc(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function Bc(e){return(Bc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Nc(e,t){return(Nc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Rc=function(e){function t(e,r,n,o,i){var a;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=Tc(this,t,[e,r]),!e.geometry)return jc(a);if(!(e.geometry instanceof b))return jc(a);a.dataBounds=e.geometry.getBounds(),a.nodesClipPixel=2,a.isHoverAble=!0,a.isMultiHover=!0,a.isClickAble=!0,a.highlightStyle=null,a.shapeOptions={},a.style=n||{},a.CLASS_NAME="SuperMap.Feature.Theme.Vector",a.style=n||{},o&&M.copyAttributesWithClip(a,o,["shapeOptions","dataBounds"]),i&&M.copyAttributesWithClip(a.shapeOptions,i);var s=e.geometry;return a.lonlat=a.dataBounds.getCenterLonLat(),a.location=a.getLocalXY(a.lonlat),s instanceof zt?a.lineToTF(s):s instanceof Bt?a.lineToTF(s):s instanceof It||(s instanceof bt?a.multiPointToTF(s):s instanceof kr?a.multiLineStringToTF(s):s instanceof Lr?a.multiPolygonToTF(s):s instanceof Wt?a.polygonToTF(s):s instanceof pt||(s instanceof ot?a.pointToTF(s):s instanceof Sa?a.rectangleToTF(s):s instanceof Fo&&a.geoTextToTF(s))),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Nc(e,t)}(t,zo),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;this.style=null,this.dataBounds=null,this.nodesClipPixel=null,this.isHoverAble=null,this.isMultiHover=null,this.isClickAble=null,this.highlightStyle=null,this.shapeOptions=null,(e=t,r="destroy",n=this,i=Mc(Bc(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"lineToTF",value:function(e){for(var t=e.components,r=[],n=[],o=this.location,i=[],a=this.nodesClipPixel,s=0;s<t.length;s++){var u=t[s];if(n=[],r=this.getLocalXY(u),n[0]=r[0]-o[0],n[1]=r[1]-o[1],i.length>0){var l=i[i.length-1];if(Math.abs(l[0]-n[0])<=a&&Math.abs(l[1]-n[1])<=a)continue}i.push(n)}if(i.length<2)return null;var c=new Object;(c=M.copyAttributesWithClip(c,this.style,["pointList"])).pointList=i;var f=new sc({style:c,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(f.highlightStyle=this.highlightStyle),f.refOriginalPosition=this.location,f.refDataID=this.data.id,f.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&M.copyAttributesWithClip(f,this.shapeOptions),this.shapes.push(f)}},{key:"multiPointToTF",value:function(e){for(var t=e.components,r=[],n=[],o=this.location,i=[],a=this.nodesClipPixel,s=0;s<t.length;s++){var u=t[s];if(n=[],r=this.getLocalXY(u),n[0]=r[0]-o[0],n[1]=r[1]-o[1],i.length>0){var l=i[i.length-1];if(Math.abs(l[0]-n[0])<=a&&Math.abs(l[1]-n[1])<=a)continue}i.push(n);var c=new Object;c.r=6,(c=M.copyAttributesWithClip(c,this.style)).x=n[0],c.y=n[1];var f=new Pl({style:c,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(f.highlightStyle=this.highlightStyle),f.refOriginalPosition=o,f.refDataID=this.data.id,f.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&M.copyAttributesWithClip(f,this.shapeOptions),this.shapes.push(f)}}},{key:"multiLineStringToTF",value:function(e){for(var t=e.components,r=0;r<t.length;r++){var n=t[r];this.lineToTF(n)}}},{key:"multiPolygonToTF",value:function(e){for(var t=e.components,r=0;r<t.length;r++){var n=t[r];this.polygonToTF(n)}}},{key:"pointToTF",value:function(e){var t=this.location,r=this.getLocalXY(e),n=new Object;n.r=6,(n=M.copyAttributesWithClip(n,this.style)).x=r[0]-t[0],n.y=r[1]-t[1];var o=new Pl({style:n,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(o.highlightStyle=this.highlightStyle),o.refOriginalPosition=t,o.refDataID=this.data.id,o.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&M.copyAttributesWithClip(o,this.shapeOptions),this.shapes.push(o)}},{key:"polygonToTF",value:function(e){for(var t=e.components,r=[],n=[],o=this.location,i=[],a=[],s=[],u=this.nodesClipPixel,l=0;l<t.length;l++){var c=t[l].components;if(0===l){i=[];for(var f=0;f<c.length;f++){if(n=[],r=this.getLocalXY(c[f]),n[0]=r[0]-o[0],n[1]=r[1]-o[1],i.length>0){var p=i[i.length-1];if(Math.abs(p[0]-n[0])<=u&&Math.abs(p[1]-n[1])<=u)continue}i.push(n)}}else{a=[];for(var h=0;h<c.length;h++){if(n=[],r=this.getLocalXY(c[h]),n[0]=r[0]-o[0],n[1]=r[1]-o[1],a.length>0){var y=a[a.length-1];if(Math.abs(y[0]-n[0])<=u&&Math.abs(y[1]-n[1])<=u)continue}a.push(n)}}a.length<2||s.push(a)}if(!(i.length<2)){var d={};(d=M.copyAttributesWithClip(d,this.style,["pointList"])).pointList=i;var m=new $l({style:d,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(m.highlightStyle=this.highlightStyle),m.refOriginalPosition=this.location,m.refDataID=this.data.id,m.isHoverByRefDataID=this.isMultiHover,s.length>0&&(m.holePolygonPointLists=s),this.shapeOptions&&M.copyAttributesWithClip(m,this.shapeOptions),this.shapes.push(m)}}},{key:"rectangleToTF",value:function(e){var t=this.location,r=new Ve(e.x,e.y),n=this.layer.map.getResolution(),o=this.getLocalXY(r),i=new Object;i.r=6,(i=M.copyAttributesWithClip(i,this.style)).x=o[0]-t[0],i.y=o[1]-t[1]-2*e.width/n,i.width=e.width/n,i.height=e.height/n;var a=new dc({style:i,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(a.highlightStyle=this.highlightStyle),a.refOriginalPosition=t,a.refDataID=this.data.id,a.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&M.copyAttributesWithClip(a,this.shapeOptions),this.shapes.push(a)}},{key:"geoTextToTF",value:function(e){var t=this.location,r=this.getLocalXY(e),n=new Object;n.r=6,(n=M.copyAttributesWithClip(n,this.style,["x","y","text"])).x=r[0]-t[0],n.y=r[1]-t[1],n.text=e.text;var o=new Ll({style:n,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(o.highlightStyle=this.highlightStyle),o.refOriginalPosition=t,o.refDataID=this.data.id,o.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&M.copyAttributesWithClip(o,this.shapeOptions),this.shapes.push(o)}},{key:"updateAndAddShapes",value:function(){var e=this.getLocalXY(this.lonlat);this.location=e;for(var t=this.layer.renderer,r=0,n=this.shapes.length;r<n;r++){var o=this.shapes[r];o.refOriginalPosition=e,t.addShape(o)}}},{key:"getShapesCount",value:function(){return this.shapes.length}},{key:"getLocalXY",value:function(e){return this.layer.getLocalXY(e)}}])&&Pc(r.prototype,n),o&&Pc(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Lc(e){"@babel/helpers - typeof";return(Lc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Fc(n.key),n)}}function Fc(e){var t=function(e,t){if("object"!=Lc(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Lc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Lc(t)?t:t+""}function Qc(e,t,r){return t=Gc(t),function(e,t){if(t&&("object"==Lc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],Gc(e).constructor):t.apply(e,r))}function Gc(e){return(Gc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Uc(e,t){return(Uc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var zc=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Qc(this,t,[e,r])).name=null,n.style=null,n.highlightStyle=null,n.nodesClipPixel=2,n.isHoverAble=!1,n.isMultiHover=!1,n.isClickAble=!0,n.isAllowFeatureStyle=!1,M.extend(n,r),n.cache=r.cache||{},n.cacheFields=r.cacheFields||[],n.maxCacheCount=r.maxCacheCount||0,n.isCustomSetMaxCacheCount=void 0!==r.isCustomSetMaxCacheCount&&r.isCustomSetMaxCacheCount,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Uc(e,t)}(t,Zs),r=t,(n=[{key:"addFeatures",value:function(e){o().Evented.prototype.fire("beforefeaturesadded",{features:e}),this.features=this.toiClientFeature(e),this.isCustomSetMaxCacheCount||(this.maxCacheCount=5*this.features.length),this.renderer&&this.redrawThematicFeatures(this.map.getBounds())}},{key:"removeFeatures",value:function(e){this.clearCache(),Zs.prototype.removeFeatures.call(this,e)}},{key:"removeAllFeatures",value:function(){this.clearCache(),Zs.prototype.removeAllFeatures.apply(this,arguments)}},{key:"redrawThematicFeatures",value:function(e){this.clearCache();var t=this.renderer.getHoverOne(),r=null;t&&t.refDataID&&(r=t.refDataID),this.renderer.clearAll();for(var n=this.features,o=this.cache,i=this.cacheFields,a=this.map.getZoom(),s=this.maxCacheCount,u=0,l=n.length;u<l;u++){var c,f=n[u].id+"_zoom_"+a.toString();if(o[f])o[f].updateAndAddShapes();else{if((c=this.createThematicFeature(n[u])).getShapesCount()<1)continue;if(o[f]=c,i.push(f),i.length>s){var p=i[0];i.splice(0,1),delete o[p]}}}if(this.renderer.render(),r&&this.isHoverAble&&this.isMultiHover){var h=this.getShapesByFeatureID(r);this.renderer.updateHoverShapes(h)}}},{key:"createThematicFeature",value:function(e){var t=M.copyAttributesWithClip(this.style);e.style&&!0===this.isAllowFeatureStyle&&(t=M.copyAttributesWithClip(e.style));var r={};r.nodesClipPixel=this.nodesClipPixel,r.isHoverAble=this.isHoverAble,r.isMultiHover=this.isMultiHover,r.isClickAble=this.isClickAble,r.highlightStyle=Oc.transformStyle(this.highlightStyle);for(var n=new Rc(e,this,Oc.transformStyle(t),r),o=0;o<n.shapes.length;o++)this.renderer.addShape(n.shapes[o]);return n}},{key:"clearCache",value:function(){this.cache={},this.cacheFields=[]}},{key:"clear",value:function(){this.renderer.clearAll(),this.renderer.refresh(),this.removeAllFeatures(),this.clearCache()}},{key:"getCacheCount",value:function(){return this.cacheFields.length}},{key:"setMaxCacheCount",value:function(e){isNaN(e)||(this.maxCacheCount=e,this.isCustomSetMaxCacheCount=!0)}},{key:"getShapesByFeatureID",value:function(e){var t=[],r=this.renderer.getAllShapes();if(!e)return r;for(var n=0,o=r.length;n<o;n++){var i=r[n];i.refDataID&&e===i.refDataID&&t.push(i)}return t}}])&&Dc(r.prototype,n),i&&Dc(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,i}();function Hc(e){"@babel/helpers - typeof";return(Hc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Vc(n.key),n)}}function Vc(e){var t=function(e,t){if("object"!=Hc(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Hc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Hc(t)?t:t+""}function Kc(e,t,r){return t=Wc(t),function(e,t){if(t&&("object"==Hc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],Wc(e).constructor):t.apply(e,r))}function Yc(e,t,r,n){var o=Jc(Wc(1&n?e.prototype:e),t,r);return 2&n&&"function"==typeof o?function(e){return o.apply(r,e)}:o}function Jc(){return(Jc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=Wc(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function Wc(e){return(Wc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xc(e,t){return(Xc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Zc=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Kc(this,t,[e,r])).isOverLay=!0,n.isAvoid=!0,n.themeField=null,n.styleGroups=null,M.extend(n,r),n.defaultStyle={fontColor:"#000000",fontOpacity:1,fontSize:"12px",fontStyle:"normal",fontWeight:"normal",labelAlign:"cm",labelXOffset:0,labelYOffset:0,labelRotation:0,fill:!1,fillColor:"#ee9900",fillOpacity:.4,stroke:!1,strokeColor:"#ee9900",strokeOpacity:1,strokeWidth:1,strokeLinecap:"round",strokeDashstyle:"solid",labelRect:!0,labelSelect:!0,_isGeoTextStrategyStyle:!0},n.getPxBoundsMode=0,n.labelFeatures=[],n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xc(e,t)}(t,zc),r=t,(n=[{key:"redrawThematicFeatures",value:function(e){if(this.features.length>0&&0==this.labelFeatures.length)for(var r=this.setLabelsStyle(this.features),n=0,o=r.length;n<o;n++)this.labelFeatures.push(r[n]);this.features=this.getDrawnLabels(this.labelFeatures),Yc(t,"redrawThematicFeatures",this,1).call(this,e)}},{key:"removeFeatures",value:function(e){this.labelFeatures=[],Yc(t,"removeFeatures",this,1).call(this,e)}},{key:"removeAllFeatures",value:function(){this.labelFeatures=[],Yc(t,"removeAllFeatures",this,1).call(this,arguments)}},{key:"createThematicFeature",value:function(e){var t=this.getStyleByData(e),r={};r.nodesClipPixel=this.nodesClipPixel,r.isHoverAble=this.isHoverAble,r.isMultiHover=this.isMultiHover,r.isClickAble=this.isClickAble,r.highlightStyle=Oc.transformStyle(this.highlightStyle);for(var n=new Rc(e,this,Oc.transformStyle(t),r),o=0;o<n.shapes.length;o++)this.renderer.addShape(n.shapes[o]);return n}},{key:"getDrawnLabels",value:function(e){for(var t,r,n,o,i=[],a=[],s={labelAlign:"cm",labelXOffset:0,labelYOffset:0},u=this.map,l=u.getZoom(),c=u.getCanvas(),f={x:parseFloat(c.style.width),y:parseFloat(c.style.height)},p=0,h=e.length;p<h;p++){((r=e[p]).isStyleChange||void 0===r.isStyleChange)&&(r=this.setStyle(r));var y=this.getLabelPxLocation(r);if(y.x>=0&&y.x<=f.x&&y.y>=0&&y.y<=f.y){if(r.style.minZoomLevel>-1&&l<=r.style.minZoomLevel)continue;if(r.style.maxZoomLevel>-1&&l>r.style.maxZoomLevel)continue;var d=null;r.isStyleChange?(r.isStyleChange=null,d=this.calculateLabelBounds(r,y)):d=r.geometry.bsInfo.w&&r.geometry.bsInfo.h?this.calculateLabelBounds2(r,y):this.calculateLabelBounds(r,y);var m=new We(0,f.y,f.x,0),g=d.length;if(this.isAvoid){var v=this.getAvoidInfo(m,d);if(v){if("left"===v.aspectW){r.style.labelXOffset+=v.offsetX;for(var b=0;b<g;b++)d[b].x+=v.offsetX}else if("right"===v.aspectW){r.style.labelXOffset+=-v.offsetX;for(var A=0;A<g;A++)d[A].x+=-v.offsetX}if("top"===v.aspectH){r.style.labelYOffset+=v.offsetY;for(var w=0;w<g;w++)d[w].y+=v.offsetY}else if("bottom"===v.aspectH){r.style.labelYOffset+=-v.offsetY;for(var S=0;S<g;S++)d[S].y+=-v.offsetY}r.isStyleChange=!0}}if(this.isOverLay){var C=!1;if(0!=p)for(var E=0;E<a.length;E++)if(this.isQuadrilateralOverLap(d,a[E])){C=!0;break}if(C)continue;a.push(d)}for(var _=[],I=0;I<g-1;I++)_.push(u.unproject(d[I]));var O=_[3],x=_[1],P=new We(O.lng,O.lat,x.lng,x.lat).getCenterLonLat(),k=new Fo(P.lon,P.lat,r.attributes[this.themeField]);k.calculateBounds(),n=M.cloneObject(r.style),o=M.cloneObject(M.copyAttributes(n,s)),(t=new pr(k,r.attributes,o)).id=r.id,t.fid=r.fid,i.push(t)}}return i}},{key:"getStyleByData",value:function(e){var t=e;if(t.style=M.copyAttributes(t.style,this.defaultStyle),this.style&&this.style.fontSize&&parseFloat(this.style.fontSize)<12&&(this.style.fontSize="12px"),t.style=M.copyAttributes(t.style,this.style),this.themeField&&this.styleGroups&&t.attributes){var r=this.themeField,n=t.attributes,o=this.styleGroups,i=!1,a=null;for(var s in n)if(r===s){i=!0,a=n[s];break}if(i)for(var u=0,l=o.length;u<l;u++)if(a>=o[u].start&&a<o[u].end){var c=o[u].style;c&&c.fontSize&&parseFloat(c.fontSize)<12&&(c.fontSize="12px"),t.style=M.copyAttributes(t.style,c)}t.style.label=t.attributes[this.themeField]}return t.style}},{key:"setLabelsStyle",value:function(e){for(var t,r=[],n=0,o=e.length;n<o;n++){var i=e[n];if("SuperMap.Geometry.GeoText"!==i.geometry.CLASS_NAME)return e;(i.geometry.bsInfo.w||i.geometry.bsInfo.h)&&(i.geometry.bsInfo.w=null,i.geometry.bsInfo.h=null,i.geometry.labelWTmp=null),(t=this.setStyle(i)).layer=this.layer,r.push(t)}return r}},{key:"setStyle",value:function(e){var t=e;if(t.style=M.copyAttributes(t.style,this.defaultStyle),this.style&&this.style.fontSize&&parseFloat(this.style.fontSize)<12&&(this.style.fontSize="12px"),t.style=M.copyAttributes(t.style,this.style),this.groupField&&this.styleGroups&&t.attributes){var r=this.groupField,n=t.attributes,o=this.styleGroups,i=!1,a=null;for(var s in n)if(r===s){i=!0,a=n[s];break}if(i)for(var u=0,l=o.length;u<l;u++)if(a>=o[u].start&&a<o[u].end){var c=o[u].style;c&&c.fontSize&&parseFloat(c.fontSize)<12&&(c.fontSize="12px"),t.style=M.copyAttributes(t.style,c)}}return t.style.label=t.geometry.text,t}},{key:"getLabelPxLocation",value:function(e){var t=e.geometry,r=e.style,n=t.getCentroid(),i=this.map.project(new(o().LngLat)(n.x,n.y)),a=new(o().Point)(i.x,i.y);if(r.labelXOffset||r.labelYOffset){var s=isNaN(r.labelXOffset)?0:r.labelXOffset,u=isNaN(r.labelYOffset)?0:r.labelYOffset,l=a.add(new(o().Point)(s,-u));return new(o().Point)(l.x,l.y)}return new(o().Point)(a.x,a.y)}},{key:"calculateLabelBounds",value:function(e,t){var r=e.geometry,n=null,o=null;if(0==this.getPxBoundsMode)n=r.getLabelPxBoundsByText(t,e.style);else{if(1!==this.getPxBoundsMode)return null;o=this.getLabelInfo(e.geometry.getCentroid(),e.style),n=r.getLabelPxBoundsByLabel(t,o.w,o.h,e.style)}var i=[];return i=e.style.labelRotation%180==0?[{x:n.left,y:n.top},{x:n.right,y:n.top},{x:n.right,y:n.bottom},{x:n.left,y:n.bottom},{x:n.left,y:n.top}]:this.rotationBounds(n,t,e.style.labelRotation),r.bounds=new We(i[1].x,i[3].y,i[2].x,i[4].y),i}},{key:"calculateLabelBounds2",value:function(e,t){var r,n,o,i,a,s=e.geometry.bsInfo,u=e.style,l=M.cloneObject(t);if(u.labelAlign&&"cm"!==u.labelAlign)switch(u.labelAlign){case"lt":l.x+=s.w/2,l.y+=s.h/2;break;case"lm":l.x+=s.w/2;break;case"lb":l.x+=s.w/2,l.y-=s.h/2;break;case"ct":l.y+=s.h/2;break;case"cb":l.y-=s.h/2;break;case"rt":l.x-=s.w/2,l.y+=s.h/2;break;case"rm":l.x-=s.w/2;break;case"rb":l.x-=s.w/2,l.y-=s.h/2}n=l.x-s.w/2,o=l.y+s.h/2,a=u.fontStyle&&"italic"===u.fontStyle?l.x+s.w/2+parseInt(parseFloat(u.fontSize)/2):l.x+s.w/2,i=l.y-s.h/2,r=new We(n,o,a,i);var c=[];return c=u.labelRotation%180==0?[{x:r.left,y:r.top},{x:r.right,y:r.top},{x:r.right,y:r.bottom},{x:r.left,y:r.bottom},{x:r.left,y:r.top}]:this.rotationBounds(r,t,u.labelRotation),e.geometry.bounds=new We(c[1].x,c[3].y,c[2].x,c[4].y),c}},{key:"getLabelInfo",value:function(e,t){var r={l:"left",r:"right",t:"top",b:"bottom"},n={l:0,r:-1,t:0,b:-1};t=M.extend({fontColor:"#000000",labelAlign:"cm"},t);var o=this.getLocalXY(e),i=0;if(t.labelXOffset||t.labelYOffset){var a=isNaN(t.labelXOffset)?0:t.labelXOffset,s=isNaN(t.labelYOffset)?0:t.labelYOffset;o[0]+=a,o[1]-=s}var u=document.createElement("canvas");u.globalAlpha=0,u.lineWidth=1;var l=u.getContext("2d");l.fillStyle=t.fontColor,l.globalAlpha=t.fontOpacity||1;var c,f,p,h=[t.fontStyle?t.fontStyle:"normal","normal",t.fontWeight?t.fontWeight:"normal",t.fontSize?t.fontSize:"1em",t.fontFamily?t.fontFamily:"sans-serif"].join(" "),y=t.label.split("\n"),d=y.length;if(l.fillText){l.font=h,l.textAlign=r[t.labelAlign[0]]||"center",l.textBaseline=r[t.labelAlign[1]]||"middle",null==(c=n[t.labelAlign[1]])&&(c=-.5),f=l.measureText("Mg").height||l.measureText("xx").width,o[1]+=f*c*(d-1);for(var m=0;m<d;m++)i<(p=l.measureText(y[m]).width)&&(i=p)}else if(l.mozDrawText){l.mozTextStyle=h,null==(c=n[t.labelAlign[1]])&&(c=-.5),f=l.mozMeasureText("xx"),o[1]+=f*(1+c*d);for(var g=0;g<d;g++)i<(p=l.measureText(y[g]).width)&&(i=p)}var v={};return i?(v.w=i,v.h=t.fontSize,v.rows=y.length,v):null}},{key:"rotationBounds",value:function(e,t,r){var n=new(o().Point)(e.left,e.top),i=new(o().Point)(e.right,e.top),a=new(o().Point)(e.right,e.bottom),s=new(o().Point)(e.left,e.bottom),u=[];u.push(this.getRotatedLocation(n.x,n.y,t.x,t.y,r)),u.push(this.getRotatedLocation(i.x,i.y,t.x,t.y,r)),u.push(this.getRotatedLocation(a.x,a.y,t.x,t.y,r)),u.push(this.getRotatedLocation(s.x,s.y,t.x,t.y,r));for(var l=[],c=0;c<u.length;c++)l.push({x:u[c].x,y:u[c].y});return l.push({x:u[0].x,y:u[0].y}),l}},{key:"getRotatedLocation",value:function(e,t,r,n,o){var i,a,s={};return t=-t,n=-n,o=-o,i=(e-r)*Math.cos(o/180*Math.PI)-(t-n)*Math.sin(o/180*Math.PI)+r,a=(e-r)*Math.sin(o/180*Math.PI)+(t-n)*Math.cos(o/180*Math.PI)+n,s.x=i,s.y=-a,s}},{key:"getAvoidInfo",value:function(e,t){if(5!==t.length)return null;for(var r=[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.right,y:e.bottom},{x:e.left,y:e.bottom},{x:e.left,y:e.top}],n=!1,o=r.length,i=t.length,a=0,s=0,u="",l="",c=0;c<o-1;c++)for(var f=0;f<i-1;f++){"SuperMap.Geometry.Point"===M.lineIntersection(r[c],r[c+1],t[f],t[f+1]).CLASS_NAME&&(p(t[f]),p(t[f+1]),n=!0)}return n?{aspectW:l,aspectH:u,offsetX:a,offsetY:s}:null;function p(t){if(!e.contains(t.x,t.y)){if(t.y<e.top){var r=Math.abs(e.top-t.y);r>s&&(s=r,u="top")}if(t.y>e.bottom){var n=Math.abs(t.y-e.bottom);n>s&&(s=n,u="bottom")}if(t.x<e.left){var o=Math.abs(e.left-t.x);o>a&&(a=o,l="left")}if(t.x>e.right){var i=Math.abs(t.x-e.right);i>a&&(a=i,l="right")}}}}},{key:"isQuadrilateralOverLap",value:function(e,t){var r=e.length,n=t.length;if(5!==r||5!==n)return null;for(var o=!1,i=0;i<r;i++)if(this.isPointInPoly(e[i],t)){o=!0;break}for(var a=0;a<n;a++)if(this.isPointInPoly(t[a],e)){o=!0;break}for(var s=0;s<r-1&&!o;s++)for(var u=0;u<n-1;u++){if("SuperMap.Geometry.Point"===M.lineIntersection(e[s],e[s+1],t[u],t[u+1]).CLASS_NAME){o=!0;break}}return o}},{key:"isPointInPoly",value:function(e,t){for(var r=!1,n=-1,o=t.length,i=o-1;++n<o;i=n)(t[n].y<=e.y&&e.y<t[i].y||t[i].y<=e.y&&e.y<t[n].y)&&e.x<(t[i].x-t[n].x)*(e.y-t[n].y)/(t[i].y-t[n].y)+t[n].x&&(r=!r);return r}}])&&qc(r.prototype,n),i&&qc(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,i}(),$c=function(){try{return mapv}catch(e){return{}}}();function ef(e){"@babel/helpers - typeof";return(ef="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tf(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,rf(n.key),n)}}function rf(e){var t=function(e,t){if("object"!=ef(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ef(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ef(t)?t:t+""}function nf(e,t,r){return t=uf(t),of(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],uf(e).constructor):t.apply(e,r))}function of(e,t){if(t&&("object"==ef(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function af(e,t,r,n){var o=sf(uf(1&n?e.prototype:e),t,r);return 2&n&&"function"==typeof o?function(e){return o.apply(r,e)}:o}function sf(){return(sf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=uf(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function uf(e){return(uf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lf(e,t){return(lf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var cf=$c.baiduMapLayer?$c.baiduMapLayer.__proto__:Function,ff=function(e){function t(e,r,n,o,i){var a;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=nf(this,t,[e,r,n]),!cf)return of(a);a.options=n||{},a.transferCoordinate=o.transferCoordinate,a.getCenterPixel=o.getCenterPixel,a.getResolution=o.getResolution,a.validZoom=o.validZoom;var s=i.mapElement,u=i.targetElement,l=i.id;return a.targetElement=u,a.canvas=a._createCanvas(l,s),a.canvasLayer={canvas:a.canvas,devicePixelRatio:a.devicePixelRatio},a.init(n),a.argCheck(n),a.stopAniamation=!1,a.animation=n.animation,a.clickEvent=a.clickEvent.bind(a),a.mousemoveEvent=a.mousemoveEvent.bind(a),a._canvasUpdate(),a.targetElement.appendChild(a.canvas),a._expectShow=!0,a.isShow=!0,a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lf(e,t)}(t,cf),r=t,(n=[{key:"clickEvent",value:function(e){var r=e.point;af(t,"clickEvent",this,3)([r,e])}},{key:"mousemoveEvent",value:function(e){var r=e.point;af(t,"mousemoveEvent",this,3)([r,e])}},{key:"getContext",value:function(){return this.canvas.getContext(this.context)}},{key:"addData",value:function(e,t){var r=e;e&&e.get&&(r=e.get()),this.dataSet.add(r),this.update({options:t})}},{key:"update",value:function(e){var r=e||{},n=r.data;n&&n.get&&(n=n.get()),void 0!=n&&this.dataSet.set(n),af(t,"update",this,3)([{options:r.options}])}},{key:"getData",value:function(){return this.dataSet}},{key:"removeData",value:function(e){if(this.dataSet){var t=this.dataSet.get({filter:function(t){return null==e||"function"!=typeof e||!e(t)}});this.dataSet.set(t),this.update({options:null})}}},{key:"clearData",value:function(){this.dataSet&&this.dataSet.clear(),this.update({options:null})}},{key:"updateData",value:function(e,t){e&&e.get&&this.dataSet.set(e.get()),this.update({options:t})}},{key:"_createCanvas",value:function(e,t){var r=t.style,n=r.width,o=r.height,i=document.createElement("canvas");i.style.position="absolute",i.style.top="0px",i.style.left="0px",i.id=e;var a="undefined"==typeof window?{}:window,s=this.devicePixelRatio=a.devicePixelRatio||1;return i.width=parseInt(n)*s,i.height=parseInt(o)*s,this.options.context&&"2d"!=this.options.context||i.getContext("2d").scale(s,s),i.style.width=n,i.style.height=o,i}},{key:"_canvasUpdate",value:function(e){if(!this.stopAniamation){var t=this.options.animation,r=this.getContext();if(this.isEnabledTime()){if(void 0===e)return void this.clear(r);"2d"===this.context&&(r.save(),r.globalCompositeOperation="destination-out",r.fillStyle="rgba(0, 0, 0, .1)",r.fillRect(0,0,r.canvas.width,r.canvas.height),r.restore())}else this.clear(r);if("2d"===this.context)for(var n in this.options)r[n]=this.options[n];else r.clear(r.COLOR_BUFFER_BIT);if(this.validZoom()){var o={transferCoordinate:this.transferCoordinate()},i=this.getResolution();void 0!==e&&(o.filter=function(r){var n=t.trails||10;return e&&r.time>e-n&&r.time<e});var a=this.dataSet.get(o);this.processData(a),"m"===this.options.unit?(this.options.size&&(this.options._size=this.options.size/i),this.options.width&&(this.options._width=this.options.width/i),this.options.height&&(this.options._height=this.options.height/i)):(this.options._size=this.options.size,this.options._height=this.options.height,this.options._width=this.options.width);var s=this.getCenterPixel();this.drawContext(r,a,this.options,s),this.options.updateCallback&&this.options.updateCallback(e)}}}},{key:"init",value:function(e){this.options=e,this.initDataRange(e),this.context=this.options.context||"2d",this.options.zIndex&&this.setZIndex(this.options.zIndex),this.initAnimator()}},{key:"destroy",value:function(){this.targetElement.removeChild(this.canvas),this.clearData(),this.animator&&this.animator.stop(),this.animator=null}},{key:"addAnimatorEvent",value:function(){}},{key:"moveEndEvent",value:function(){this.stopAniamation=!1,this._canvasUpdate()}},{key:"draw",value:function(){this._canvasUpdate()}},{key:"visible",value:function(){return this.isShow}},{key:"hide",value:function(){this.isShow=!1,this.canvas.style.display="none"}},{key:"show",value:function(){this.isShow=!0,this.canvas.style.display="block"}},{key:"setZIndex",value:function(e){this.canvas.style.zIndex=e}},{key:"clear",value:function(e){e&&e.clearRect&&e.clearRect(0,0,parseInt(this.map.getCanvas().style.width),parseInt(this.map.getCanvas().style.height))}}])&&tf(r.prototype,n),o&&tf(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(),pf=function(e){var t;if(!e)return t;return["m","meter","meters"].indexOf(e.toLocaleLowerCase())>-1?t=1:["degrees","deg","degree","dd"].indexOf(e.toLocaleLowerCase())>-1?t=2*Math.PI*6378137/360:e===hn.KILOMETER?t=1e3:e===hn.INCH?t=.025399999918:e===hn.FOOT&&(t=.3048),t},hf={SquareFoot:10.763910417,SquareKiloMeter:1e-6,SquareMeter:1,SquareMile:3.86e-7,SquareYard:1.195990046};function yf(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[-180,180],o=n[1],i=n[0],a=o-i;return e===o&&t?e:e===i&&r?e:0===((e-i)%a+a)%a&&t?o:((e-i)%a+a)%a+i}function df(e){var t=parseInt(e),r=parseInt(60*(e-t)),n=parseInt(60*(60*(e-t)-r));return r=0===parseInt(r/10)?"0".concat(r):r,n=0===parseInt(n/10)?"0".concat(n):n,"".concat(t,"Â°").concat(r,"'").concat(n)}function mf(e,t,r){return 1/(e*t*(1/.0254)*pf(r))}function gf(e){"@babel/helpers - typeof";return(gf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vf(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,bf(n.key),n)}}function bf(e){var t=function(e,t){if("object"!=gf(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=gf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==gf(t)?t:t+""}var Af=function(){return e=function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),3===arguments.length?(this.map=t,delete n.layerID,this.mapVOptions=n,this.dataSet=r):(this.dataSet=t,delete r.layerID,this.mapVOptions=r),this.id=this.mapVOptions.layerID?this.mapVOptions.layerID:M.createUniqueID("mapvLayer_"),this.type="custom",this.visibility=!0,this.renderingMode="3d",this.overlay=!0,this.context=this.mapVOptions.context||"2d",this.map&&this.map.addLayer(this)},(t=[{key:"onAdd",value:function(e){this.map=e,this.mapContainer=e.getCanvasContainer(),this.renderer=new ff(e,this.dataSet,this.mapVOptions,{transferCoordinate:this._transferCoordinate,getCenterPixel:this._getCenterPixel,getResolution:this._getResolution,validZoom:this._validZoom.bind(this)},{mapElement:this.map.getCanvas(),targetElement:this.mapContainer,id:this.id}),this.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px",this.bindEvent()}},{key:"onRemove",value:function(){this.renderer.destroy(),this.unbindEvent()}},{key:"render",value:function(){this.renderer&&this.renderer.draw()}},{key:"_transferCoordinate",value:function(){var e=this.map,t=e.getBounds(),r=t.getEast()-t.getWest(),n=t.getNorth()-t.getSouth(),i=e.getCanvas().getBoundingClientRect(),a=r/i.width,s=n/i.height,u=e.getCenter(),l=e.project(u),c=this;return function(t){if(e.transform.rotationMatrix||"2d"===c.context){var r=e.project(new(o().LngLat)(t[0],t[1]));return[r.x,r.y]}var n=[(t[0]-u.lng)/a,(u.lat-t[1])/s];return[n[0]+l.x,n[1]+l.y]}}},{key:"_validZoom",value:function(){return!(this.mapVOptions.minZoom&&this.map.getZoom()<this.mapVOptions.minZoom||this.mapVOptions.maxZoom&&this.map.getZoom()>this.mapVOptions.maxZoom)}},{key:"_getResolution",value:function(){var e=this.map.getBounds(),t=(e.getEast()-e.getWest())/this.map.getCanvas().getBoundingClientRect().width;return pf("DEGREE")*t}},{key:"_getCenterPixel",value:function(){return this.map.project(new(o().LngLat)(0,0))}},{key:"addData",value:function(e,t){this.renderer.addData(e,t)}},{key:"update",value:function(e){this.renderer.update(e)}},{key:"getData",value:function(){return this.renderer&&(this.dataSet=this.renderer.getData()),this.dataSet}},{key:"removeData",value:function(e){this.renderer&&this.renderer.removeData(e)}},{key:"clearData",value:function(){this.renderer.clearData()}},{key:"show",value:function(){return this.renderer&&this.renderer.show(),this}},{key:"hide",value:function(){return this.renderer&&this.renderer.hide(),this}},{key:"getTopLeft",value:function(){var e,t=this.map;t&&(e=t.getBounds().getNorthWest());return e}},{key:"bindEvent",value:function(){var e=this.map;this.mapVOptions.methods&&(this.mapVOptions.methods.click&&e.on("click",this.renderer.clickEvent),this.mapVOptions.methods.mousemove&&e.on("mousemove",this.renderer.mousemoveEvent))}},{key:"unbindEvent",value:function(){var e=this.map;this.mapvOptions.methods&&(this.mapvOptions.methods.click&&e.off("click",this.clickEvent),this.mapvOptions.methods.mousemove&&e.off("mousemove",this.mousemoveEvent))}},{key:"setVisibility",value:function(e){e!==this.visibility&&(this.visibility=e,e?this.show():this.hide())}},{key:"setZIndex",value:function(e){this.renderer.setZIndex(e)}}])&&vf(e.prototype,t),r&&vf(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function wf(e){"@babel/helpers - typeof";return(wf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sf(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Cf(n.key),n)}}function Cf(e){var t=function(e,t){if("object"!=wf(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=wf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==wf(t)?t:t+""}var Ef=function(){return e=function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.map=null,this.opacity=1,this.parseNumber=!1,this.enableHighlight=!1,this.highlight={color:"#ADA91E"},this.baseHeightField=null,this.height=null,this.heightField="height",this.themeField=this.heightField,this.showLegend=!0,this.legendTitle=null,this.legendTheme="light",this.legendOrientation="horizontal",this.legendPosition="bottom-right",this._highlightLayerId="".concat(this.id,"-highlightLayer"),this._extend(this,r)},(t=[{key:"setLayerOptions",value:function(e){return this._extend(this,e),this}},{key:"setHighlightStyleOptions",value:function(e){return this._extend(this.highlight,e),this}},{key:"setData",value:function(e,t){var r=this;return r.data=e,null!=t&&(r.parseNumber=t),r.parseNumber&&r.data&&r.data.features&&r.data.features.map(function(e){return r.baseHeightField&&e.properties[r.baseHeightField]&&(e.properties[r.baseHeightField]=parseFloat(e.properties[r.baseHeightField])),r.heightField&&e.properties[r.heightField]&&(e.properties[r.heightField]=parseFloat(e.properties[r.heightField])),e}),this}},{key:"getData",value:function(){return this.data}},{key:"addTo",value:function(e){return this.map=e,this.map?(this.show(),this):this}},{key:"show",value:function(e){return this._extend(this,e),this._addLayer(),this.enableHighlight&&this._addHighLightLayer(),this.showLegend&&(this.legend||(this.legend=this._createLegendControl()),this.map.addControl(this.legend,this.legendPosition)),this}},{key:"remove",value:function(){if(!this.map)return this;var e=this.id?this.id:"theme3DLayer";return this.map.getLayer(e)&&(this.map.off("mousemove",e,this._onMouseMove.bind(this)),this.map.on("mouseout",e,this._onMouseMove.bind(this)),this.map.removeLayer(e)),this.map.getLayer(this._highlightLayerId)&&(this._selectFeatureId=null,this.map.removeLayer(this._highlightLayerId)),this.legend&&this.map.removeControl(this.legend),this}},{key:"getLayerStyleOptions",value:function(){}},{key:"getHighlightStyleOptions",value:function(){}},{key:"_createLegendControl",value:function(e){var t=this;function r(){}return r.prototype.onAdd=function(r){this._map=r,this._container=document.createElement("div");var n="legend-light";"dark"===t.legendTheme&&(n="legend-dark");var o=" legend-horizontal";if("vertical"===t.legendOrientation&&(o=" legend-vertical"),this._container.className="mapboxgl-ctrl legend "+n+o,e)this._container.innerHTML=e;else{var i=" <div class='legend-title'>"+(t.legendTitle||"")+"</div>",a="<div class='legend-content'>"+(t._createLegendElement.call(t)||"")+"</div>";this._container.innerHTML=i+a}return t._appendLegendCSSStyle(),this._container},r.prototype.onRemove=function(){this._container.parentNode.removeChild(this._container),this._map=void 0},new r}},{key:"_createLegendElement",value:function(){}},{key:"_addLayer",value:function(){var e=this.getLayerStyleOptions(),t=this.id?this.id:"theme3DLayer",r=this.sourceId=t+"Source";this.map.getSource(r)?(this.map.removeSource(r),this.map.addSource(r,{type:"geojson",data:this.data})):this.map.addSource(r,{type:"geojson",data:this.data}),this.map.addLayer({id:t,type:"fill-extrusion",source:r,paint:e}),this.map.moveLayer(t)}},{key:"_addHighLightLayer",value:function(){if(this.map){var e=this.map;e.addLayer({id:this._highlightLayerId,type:"fill-extrusion",source:this.sourceId,paint:this.getHighlightStyleOptions(),filter:["in","$id",""]}),this._selectFeatureId=null,e.on("mousemove",this.id,this._onMouseMove.bind(this)),e.on("mouseout",this.id,this._onMouseMove.bind(this))}}},{key:"_onMouseMove",value:function(e){var t=this,r=this.map,n=r.queryRenderedFeatures(e.point,{layers:[t.id]});if(t.highlight&&t.highlight.callback&&t.highlight.callback(n,e),!n||n.length<1)return t._clearHighlight.call(t),void(t._selectFeatureId=null);var o=n[0].id;t._selectFeatureId!==o&&(t._selectFeatureId=o,r.setFilter(t._highlightLayerId,["==","$id",t._selectFeatureId]))}},{key:"_clearHighlight",value:function(){this.map&&this.map.setFilter(this._highlightLayerId,["in","$id",""])}},{key:"_appendLegendCSSStyle",value:function(){var e=document.createElement("style");e.type="text/css";e.innerHTML="\n        .legend {\n            display: inline-block;\n            border-radius: 2px;\n            -moz-border-radius: 2px;\n            -webkit-border-radius: 2px;\n            font-size: 12px;\n            color: rgba(0, 0, 0, 0.8);\n            background-color: rgb(255, 255, 255);\n        }\n        .legend-light {\n            color: rgba(0, 0, 0, 0.8);\n            background-color: rgb(255, 255, 255);\n            box-shadow: 0px 0px 6px #bbbbbb;\n            -moz-box-shadow: 0px 6px 10px #bbbbbb;\n            -webkit-box-shadow: 0px 0px 6px #bbbbbb;\n        }\n        .legend-dark {\n            color: rgba(255, 255, 255, 0.8);\n            background-color: rgb(64, 64, 64);\n        }\n        .legend .legend-title {\n            min-height: 14px;\n            max-width: 500px;\n            padding:6px 10px;\n        }\n        .legend-light .legend-title {\n            color: rgba(0, 0, 0, 0.8);\n        }\n        .legend-dark .legend-title {\n            color: rgba(255, 255, 255, 0.8);\n        }\n        .legend-content{\n            padding:6px 10px;\n        }\n        "+this._legendCSSStyle(),document.getElementsByTagName("head")[0].appendChild(e)}},{key:"_legendCSSStyle",value:function(){return"\n        .legend ul {\n            padding: 0;\n            margin: 0 16px;\n            height: 100%;\n            display: block;\n            list-style: none;\n        }\n\n        .legend li {\n            vertical-align: middle;\n        }\n\n        .legend li span:first-child {\n            vertical-align: middle;\n        }\n\n        .legend li span:last-child {\n            line-height: 28px;\n            max-width: 200px;\n            vertical-align: middle;\n            white-space: nowrap;\n            overflow: hidden;\n            text-overflow: ellipsis;\n            -ms-text-overflow: ellipsis;\n        }\n\n        .legend-vertical li {\n            height: 28px;\n        }\n\n        .legend-vertical li span:first-child {\n            display: inline-block;\n            width: 60px;\n            height: 100%;\n        }\n\n        .legend-vertical li span:last-child {\n            display: inline-block;\n            margin-left: 16px;\n            height: 100%;\n        }\n\n        .legend-horizontal li {\n            height: 56px;\n            float: left;\n        }\n\n        .legend-horizontal li span:first-child {\n            display: block;\n            width: 100%;\n            height: 50%;\n        }\n\n        .legend-horizontal li span:last-child {\n            display: block;\n            vertical-align: middle;\n            width: 60px;\n            height: 50%;\n            text-align: center;\n        }\n        "}},{key:"_extend",value:function(e){for(var t=0;t<Object.getOwnPropertyNames(arguments).length;t++){var r=Object.getOwnPropertyNames(arguments)[t];if("caller"!=r&&"callee"!=r&&"length"!=r&&"arguments"!=r){var n=arguments[r];if(n)for(var o=0;o<Object.getOwnPropertyNames(n).length;o++){var i=Object.getOwnPropertyNames(n)[o];"caller"!=r&&"callee"!=r&&"length"!=r&&"arguments"!=r&&(e[i]=n[i])}}}return e}}])&&Sf(e.prototype,t),r&&Sf(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function _f(e){"@babel/helpers - typeof";return(_f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function If(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Of(n.key),n)}}function Of(e){var t=function(e,t){if("object"!=_f(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=_f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==_f(t)?t:t+""}function xf(e,t,r){return t=Pf(t),function(e,t){if(t&&("object"==_f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],Pf(e).constructor):t.apply(e,r))}function Pf(e){return(Pf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kf(e,t){return(kf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Tf=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=xf(this,t,[e,r])).heightStops=null,n.colorStops=null,n.base=null,n.legendRatio=1,n._extend(n,r),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kf(e,t)}(t,Ef),r=t,(n=[{key:"getLayerStyleOptions",value:function(){var e=null==this.opacity?1:this.opacity;e=isNaN(parseFloat(e))?1:parseFloat(e);var t=/^[0-9]+.?[0-9]*$/,r={"fill-extrusion-color":{stops:this.colorStops,property:this.themeField||this.heightField,type:"interval",base:t.test(this.base)?this.base:1},"fill-extrusion-opacity":e};return this.heightStops?r["fill-extrusion-height"]={stops:this.heightStops,property:this.heightField||"height",base:t.test(this.base)?this.base:1}:this.height?r["fill-extrusion-height"]=this.height:r["fill-extrusion-height"]={property:this.heightField||"height",type:"identity"},this.baseHeightField&&(r["fill-extrusion-base"]={property:this.baseHeightField,type:"identity"}),r}},{key:"getHighlightStyleOptions",value:function(){return{"fill-extrusion-color":this.highlight&&null!=this.highlight.color?this.highlight.color:"#ADA91E","fill-extrusion-height":{stops:this.heightStops,property:this.heightField},"fill-extrusion-opacity":this.highlight&&this.highlight.opacity||.6}}},{key:"_createLegendElement",value:function(){var e,t=this.colorStops&&this.colorStops.length||0,r="<ul>";for(e=0;e<t;e++){var n=this.colorStops[e][0],o=this._getWrapperText(n);if(e===t-1)o="> "+o;else o=o+"-"+this._getWrapperText(this.colorStops[e+1][0]);r+="<li><span style='background-color:"+this.colorStops[e][1]+";'></span><span>"+o+"</span></li>"}return r+="</ul>"}},{key:"_getWrapperText",value:function(e){var t=e*(null==this.legendRatio?1:parseFloat(this.legendRatio)),r=parseFloat(t);return r%1e6<=1e6?r.toString():parseInt(r/1e3)+"k"}}])&&If(r.prototype,n),o&&If(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function jf(e){"@babel/helpers - typeof";return(jf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mf(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Bf(n.key),n)}}function Bf(e){var t=function(e,t){if("object"!=jf(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=jf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==jf(t)?t:t+""}function Nf(e,t,r){return t=Rf(t),function(e,t){if(t&&("object"==jf(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],Rf(e).constructor):t.apply(e,r))}function Rf(e){return(Rf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Lf(e,t){return(Lf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Df=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Nf(this,t,[e,r])).style=r.style,n.isHoverAble=r.isHoverAble,n.highlightStyle=r.highlightStyle,n.themeField=r.themeField,n.styleGroups=r.styleGroups,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Lf(e,t)}(t,zc),r=t,(n=[{key:"createThematicFeature",value:function(e){var t=this.getStyleByData(e),r={};r.nodesClipPixel=this.nodesClipPixel,r.isHoverAble=this.isHoverAble,r.isMultiHover=this.isMultiHover,r.isClickAble=this.isClickAble,r.highlightStyle=Oc.transformStyle(this.highlightStyle);for(var n=new Rc(e,this,Oc.transformStyle(t),r),o=0;o<n.shapes.length;o++)this.renderer.addShape(n.shapes[o]);return n}},{key:"getStyleByData",value:function(e){var t={},r=e;if(t=M.copyAttributesWithClip(t,this.style),this.themeField&&this.styleGroups&&this.styleGroups.length>0&&r.attributes){var n=this.themeField,o=r.attributes,i=this.styleGroups,a=!1,s=null;for(var u in o)if(n===u){a=!0,s=o[u];break}if(a)for(var l=0,c=i.length;l<c;l++)if(s>=i[l].start&&s<i[l].end){var f=i[l].style;t=M.copyAttributesWithClip(t,f)}}return r.style&&!0===this.isAllowFeatureStyle&&(t=M.copyAttributesWithClip(r.style)),t}}])&&Mf(r.prototype,n),o&&Mf(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Ff(e){"@babel/helpers - typeof";return(Ff="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qf(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Gf(n.key),n)}}function Gf(e){var t=function(e,t){if("object"!=Ff(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Ff(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ff(t)?t:t+""}function Uf(e,t,r){return t=zf(t),function(e,t){if(t&&("object"==Ff(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],zf(e).constructor):t.apply(e,r))}function zf(e){return(zf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Hf(e,t){return(Hf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var qf=function(e){function t(e,r,n){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=Uf(this,t,[e,r,n])).symbolType=r,o.symbolSetting=n.symbolSetting,o.themeField=n.themeField,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Hf(e,t)}(t,su),r=t,(n=[{key:"setSymbolType",value:function(e){this.symbolType=e,this.redraw()}},{key:"createThematicFeature",value:function(e){var t;return zo[this.symbolType]&&this.themeField&&this.symbolSetting&&(t=new zo[this.symbolType](e,this,[this.themeField],this.symbolSetting)),!!t&&(t.assembleShapes(),t)}}])&&Qf(r.prototype,n),o&&Qf(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Vf(e){"@babel/helpers - typeof";return(Vf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kf(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Yf(n.key),n)}}function Yf(e){var t=function(e,t){if("object"!=Vf(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Vf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Vf(t)?t:t+""}function Jf(e,t,r){return t=Wf(t),function(e,t){if(t&&("object"==Vf(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],Wf(e).constructor):t.apply(e,r))}function Wf(e){return(Wf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xf(e,t){return(Xf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Zf=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Jf(this,t,[e,r])).colorStops=null,n._extend(n,r),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xf(e,t)}(t,Ef),r=t,(n=[{key:"getLayerStyleOptions",value:function(){var e=null==this.opacity?1:this.opacity;e=isNaN(parseFloat(e))?1:parseFloat(e);var t={"fill-extrusion-color":{stops:this.colorStops,property:this.themeField,type:"categorical"},"fill-extrusion-opacity":e};return null!=this.height?t["fill-extrusion-height"]=this.height:t["fill-extrusion-height"]={property:this.heightField||"height",type:"categorical"},this.baseHeightField&&(t["fill-extrusion-base"]={property:this.baseHeightField,type:"identity"}),t}},{key:"getHighlightStyleOptions",value:function(){var e={"fill-extrusion-color":this.highlight&&null!=this.highlight.color?this.highlight.color:"#ADA91E","fill-extrusion-height":{stops:this.heightStops,property:this.heightField,type:"categorical"},"fill-extrusion-opacity":this.highlight&&this.highlight.opacity||.6};return null!=this.height&&(e["fill-extrusion-height"]=this.height||0),e}},{key:"_createLegendElement",value:function(){for(var e="<ul>",t=this.colorStops&&this.colorStops.length||0,r=0;r<t;r++){var n=this.colorStops[r][0];e+="<li><span style='background-color:"+this.colorStops[r][1]+";'></span><span>"+n+"</span></li>"}return e+="</ul>"}}])&&Kf(r.prototype,n),o&&Kf(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function $f(e){"@babel/helpers - typeof";return($f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ep(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,tp(n.key),n)}}function tp(e){var t=function(e,t){if("object"!=$f(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=$f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==$f(t)?t:t+""}function rp(e,t,r){return t=np(t),function(e,t){if(t&&("object"==$f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],np(e).constructor):t.apply(e,r))}function np(e){return(np=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function op(e,t){return(op=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var ip=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=rp(this,t,[e,r])).themeField=r.themeField,n.style=r.style,n.styleGroups=r.styleGroups,n.isHoverAble=r.isHoverAble,n.highlightStyle=r.highlightStyle,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&op(e,t)}(t,zc),r=t,(n=[{key:"createThematicFeature",value:function(e){var t=this.getStyleByData(e),r={};r.nodesClipPixel=this.nodesClipPixel,r.isHoverAble=this.isHoverAble,r.isMultiHover=this.isMultiHover,r.isClickAble=this.isClickAble,r.highlightStyle=Oc.transformStyle(this.highlightStyle);for(var n=new Rc(e,this,Oc.transformStyle(t),r),o=0;o<n.shapes.length;o++)this.renderer.addShape(n.shapes[o]);return n}},{key:"getStyleByData",value:function(e){var t={},r=e;if(t=M.copyAttributesWithClip(t,this.style),this.themeField&&this.styleGroups&&this.styleGroups.length>0&&r.attributes){var n=this.themeField,o=r.attributes,i=this.styleGroups,a=!1,s=null;for(var u in o)if(n===u){a=!0,s=o[u];break}if(a)for(var l=0,c=i.length;l<c;l++)if(s.toString()===i[l].value.toString()){var f=i[l].style;t=M.copyAttributesWithClip(t,f)}}return r.style&&!0===this.isAllowFeatureStyle&&(t=M.copyAttributesWithClip(r.style)),t}}])&&ep(r.prototype,n),o&&ep(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function ap(e){"@babel/helpers - typeof";return(ap="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function up(e,t,r){return(t=cp(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,cp(n.key),n)}}function cp(e){var t=function(e,t){if("object"!=ap(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ap(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ap(t)?t:t+""}var fp={color:[0,0,0,255],opacity:.8,radius:10,radiusScale:1,radiusMinPixels:0,radiusMaxPixels:Number.MAX_SAFE_INTEGER,strokeWidth:1,outline:!1},pp=function(){return e=function e(t,r,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var i=M.assign(this,fp,r);this.id=t,this.graphics=[].concat(i.graphics),this.mapOptions=o,this.functions=n,this.visibility=!0,this.init()},(t=[{key:"init",value:function(){this.canvas&&this.mapOptions.targetElement.appendChild(this.canvas),this._initContainer();var e=this.getState(),t=e.data,r=e.color,n=e.radius,o=e.opacity,i=e.highlightColor,a=e.radiusScale,s=e.radiusMinPixels,u=e.radiusMaxPixels,l=e.strokeWidth,c=e.outline,f=this,p={id:"scatter-plot",data:t,pickable:Boolean(this.onClick)||Boolean(this.onHover),autoHighlight:!0,color:r,opacity:o,radius:n,radiusScale:a,highlightColor:i,radiusMinPixels:s,radiusMaxPixels:u,strokeWidth:l,outline:c,isGeographicCoordinateSystem:this.isGeographicCoordinateSystem,coordinateSystem:this.coordinateSystem,getPosition:function(e){if(!e)return[0,0,0];var t=e.getLngLat();return t&&[t.lng,t.lat,0]},getColor:function(e){var t=e&&e.getStyle();return t&&t.color||f.color},getRadius:function(e){var t=e&&e.getStyle();return t&&t.radius||f.radius},updateTriggers:{getColor:[r],getRadius:[n]}};this.onClick&&(p.onClick=this.onClick),this.onHover&&(p.onHover=this.onHover),this.layer=new window.DeckGL.ScatterplotLayer(p);var h={};for(var y in e)h[y]=e[y];var d=parseInt(this.canvas.style.width),m=parseInt(this.canvas.style.height);h.width=d,h.height=m,h.layers=[this.layer],h.canvas=this.canvas,this.deckGL=new window.DeckGL.experimental.DeckGLJS(h),this.draw()}},{key:"setStyle",value:function(e){var t={color:this.color,radius:this.radius,opacity:this.opacity,highlightColor:this.highlightColor,radiusScale:this.radiusScale,radiusMinPixels:this.radiusMinPixels,radiusMaxPixels:this.radiusMaxPixels,strokeWidth:this.strokeWidth,outline:this.outline};M.assign(this,t,e),this.update()}},{key:"setGraphics",value:function(e){this.graphics=this.graphics||[],this.graphics.length=0;var t=M.isArray(e)?[].concat(e):[e];this.layer.props.data||(this.layer.props.data=[]),this.layer.props.data.length=0;for(var r=0;r<t.length;r++)this.layer.props.data.push(t[r]);this.update()}},{key:"addGraphics",value:function(e){this.graphics=this.graphics||[];var t=M.isArray(e)?[].concat(e):[e];this.layer.props.data||(this.layer.props.data=[]);for(var r=0;r<t.length;r++)this.layer.props.data.push(t[r]);this.update()}},{key:"getGraphicBy",value:function(e,t){var r=null;for(var n in this.graphics)if(this.graphics[n][e]===t){r=this.graphics[n];break}return r}},{key:"getGraphicById",value:function(e){return this.getGraphicBy("id",e)}},{key:"getGraphicsByAttribute",value:function(e,t){var r,n=[];for(var o in this.graphics)(r=this.graphics[o])&&r.attributes&&r.attributes[e]===t&&n.push(r);return n}},{key:"removeGraphics",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!e||0===e.length||e===this.graphics)return this.graphics.length=0,this.layer.props.data&&(this.layer.props.data.length=0),void this.update();M.isArray(e)||(e=[e]);for(var t=e.length-1;t>=0;t--){var r=e[t],n=M.indexOf(this.graphics,r);-1!==n&&this.graphics.splice(n,1)}this.update()}},{key:"update",value:function(){if("Awaiting state"!==this.layer.lifecycle){this.layer.setChangeFlags({dataChanged:!0,propsChanged:!0,viewportChanged:!0,updateTriggersChanged:!0});var e=this.getState(),t=parseInt(this.canvas.style.width),r=parseInt(this.canvas.style.height);e.width=t,e.height=r,this.layer.setState(e)}}},{key:"clear",value:function(){this.removeGraphics(),this.deckGL.finalize()}},{key:"remove",value:function(){this.mapOptions.targetElement.removeChild(this.canvas)}},{key:"destroy",value:function(){this.remove(),this.clear()}},{key:"moveTo",value:function(e,t){var r=document.getElementById(this.id);if(t=void 0===t||t){var n=document.getElementById(e);r&&n&&n.parentNode.insertBefore(r,n)}else{var o=document.getElementById(e);if(r){if(o.nextSibling)return void o.parentNode.insertBefore(r,o.nextSibling);o.parentNode.appendChild(r)}}}},{key:"setVisibility",value:function(e){this.canvas&&e!==this.visibility&&(this.visibility=e,this.canvas.style.display=e?"block":"none")}},{key:"draw",value:function(){var e=this.getState(),t={};for(var r in e)t[r]=e[r];var n=parseInt(this.canvas.style.width),o=parseInt(this.canvas.style.height);t.width=n,t.height=o,t.layers=[this.layer],t.canvas=this.canvas,this.deckGL.setProps(t)}},{key:"_initContainer",value:function(){this.canvas=this._createCanvas(this.mapOptions.mapElement),this.mapOptions.targetElement.appendChild(this.canvas)}},{key:"_createCanvas",value:function(e){var t=document.createElement("canvas");return this.id&&(t.id=this.id),t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.cursor="",t.width=parseInt(e.style.width),t.height=parseInt(e.style.height),t.style.width=e.style.width,t.style.height=e.style.height,t}},{key:"getState",value:function(){var e=this.functions.getMapState();return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?sp(Object(r),!0).forEach(function(t){up(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sp(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({data:this.graphics,color:this.color,radius:this.radius,opacity:this.opacity,highlightColor:this.highlightColor,radiusScale:this.radiusScale,radiusMinPixels:this.radiusMinPixels,radiusMaxPixels:this.radiusMaxPixels,strokeWidth:this.strokeWidth,outline:this.outline},e)}}])&&lp(e.prototype,t),r&&lp(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function hp(e){"@babel/helpers - typeof";return(hp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,dp(n.key),n)}}function dp(e){var t=function(e,t){if("object"!=hp(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=hp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==hp(t)?t:t+""}var mp=function(){return e=function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=r,this.id=t||M.createUniqueID("graphicLayer_"),this.type="custom",this.renderingMode="3d",this.overlay=!0},(t=[{key:"addTo",value:function(e){return this.onAdd(e),this}},{key:"onAdd",value:function(e){this.map=e,this.renderer=new pp(this.id,this.options,{getMapState:this.getMapState.bind(this)},{targetElement:this.map.getCanvasContainer(),mapElement:this.map.getCanvas()})}},{key:"onRemove",value:function(){this.remove(),this.clear()}},{key:"render",value:function(){this.renderer.draw()}},{key:"setStyle",value:function(e){this.renderer&&this.renderer.setStyle(e)}},{key:"setGraphics",value:function(e){this.renderer&&this.renderer.setGraphics(e)}},{key:"addGraphics",value:function(e){this.renderer&&this.renderer.addGraphics(e)}},{key:"getGraphicBy",value:function(e,t){return this.renderer&&this.renderer.getGraphicBy(e,t)}},{key:"getGraphicById",value:function(e){return this.getGraphicBy("id",e)}},{key:"getGraphicsByAttribute",value:function(e,t){return this.renderer&&this.renderer.getGraphicsByAttribute(e,t)}},{key:"removeGraphics",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.renderer&&this.renderer.removeGraphics(e)}},{key:"clear",value:function(){this.renderer&&this.renderer.clear()}},{key:"remove",value:function(){this.renderer&&this.renderer.remove()}},{key:"moveTo",value:function(e,t){this.renderer.moveTo(e,t)}},{key:"setVisibility",value:function(e){this.renderer.setVisibility(e)}},{key:"getState",value:function(){return this.renderer.getState()}},{key:"getMapState",value:function(){var e={},t=this.map.getCenter(),r={longitude:t.lng,latitude:t.lat,zoom:this.map.getZoom(),maxZoom:this.map.getMaxZoom(),pitch:this.map.getPitch(),bearing:this.map.getBearing()};for(var n in r)e[n]=r[n];return this.map.getCRS&&this.map.getCRS()!==o().CRS.EPSG3857&&(e.coordinateSystem=this.coordinateSystem,e.isGeographicCoordinateSystem=this.isGeographicCoordinateSystem),e}}])&&yp(e.prototype,t),r&&yp(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}(),gp=function(){try{return THREE}catch(e){return{}}}();function vp(e,t,r){if(e===r||e===t)return e;var n=r-t;return((e-t)%n+n)%n+t}function bp(e){return e*Math.PI/180}var Ap={matrix:[1,-1,0,0],projection:{R:6378137,minZoom:0,maxZoom:22,nativeMaxZoom:19,RAD:Math.PI/180,METERS_PER_DEGREE:6378137*Math.PI/180,MAX_LATITUDE:85.0511287798,project:function(e){var t=this.RAD,r=this.METERS_PER_DEGREE,n=this.MAX_LATITUDE,o=e instanceof Array?{lng:e[0],lat:e[1]}:{lng:e.lng,lat:e.lat},i=o.lng,a=Math.max(Math.min(n,o.lat),-n);return{x:i*r,y:(0===a?0:Math.log(Math.tan((90+a)*t/2))/t)*r}},unproject:function(e){var t,r=e.x,n=e.y,o=this.RAD,i=this.METERS_PER_DEGREE;return 0===n?t=0:(t=n/i,t=(2*Math.atan(Math.exp(t*o))-Math.PI/2)/o),{lng:vp(r/i,-180,180),lat:vp(t,-this.MAX_LATITUDE,this.MAX_LATITUDE)}},locate:function(e,t,r){if(!e)return null;if(t=t||0,r=r||0,!t&&!r)return e;var n=e.lng;if(0!==t){var o=Math.abs(t),i=bp(e.lng);n=vp(180*(i+=2*Math.sqrt(Math.pow(Math.sin(o/(2*this.R)),2)/Math.pow(Math.cos(i),2))*(o>0?1:-1))/Math.PI,-180,180)}var a=e.lat;if(0!==r){var s=Math.abs(r),u=bp(e.lat);a=vp(180*(u+=2*Math.sin(s/(2*this.R))*(s>0?1:-1))/Math.PI,-90,90)}return{lng:n,lat:a}},getResolution:function(e){if(!this.resolutions){for(var t=[],r=12756274*Math.PI,n=0;n<=this.maxZoom;n++)t[n]=r/(256*Math.pow(2,n));this.resolutions=t}var o=0|e,i=this.resolutions.length;o=o<0?0:o>i-1?i-1:o;var a=this.resolutions[o];return(0|e)!==e&&o!==i-1?a+(this.resolutions[o+1]-a)*(e-o):a}},project:function(e){return this.projection.project(e)},unproject:function(e){return this.projection.unproject(e)},lngLatToPoint:function(e,t){var r=this.project(e);return this.transform(r,this.projection.getResolution(t))},locate:function(e,t,r){return this.projection.locate(e,t,r)},transform:function(e,t){return{x:this.matrix[0]*(e.x-this.matrix[2])/t,y:this.matrix[1]*(e.y-this.matrix[3])/t}}};function wp(e){"@babel/helpers - typeof";return(wp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Cp(n.key),n)}}function Cp(e){var t=function(e,t){if("object"!=wp(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=wp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==wp(t)?t:t+""}var Ep=Ap.projection,_p=gp.Color,Ip=gp.Scene,Op=gp.WebGLRenderer,xp=gp.PerspectiveCamera,Pp=gp.Vector3,kp=gp.Shape,Tp=gp.Mesh,jp=gp.ExtrudeGeometry,Mp=Math.PI/180,Bp=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,Np=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame,Rp=function(){return e=function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._layer=t,this.renderer=r||"gl",this.options=n},(t=[{key:"setMap",value:function(e){this.map=e}},{key:"render",value:function(){this._layer&&(this.prepare(),this._layer.fire("initialized"),this._layer&&this._layer.draw(this.context,this.scene,this.camera),this._layer.fire("draw"),this.renderScene())}},{key:"update",value:function(){this.remove(),this.render()}},{key:"renderScene",value:function(){this.locationCamera(),this.animationFrame=this.renderFrame(function(){this.animationFrame=null,this.context&&this.context.render(this.scene,this.camera)}.bind(this))}},{key:"renderFrame",value:function(e){return Bp(function(){e&&"function"==typeof e&&e()})}},{key:"resize",value:function(){this._resetElementSize(this.container),this._resetElementSize(this.canvas);var e=this.canvas.width,t=this.canvas.height,r=this.getMapSize();this.camera.aspect=e/t,this.camera.updateProjectionMatrix(),this.context.setSize(r.width,r.height),this.renderScene()}},{key:"prepare",value:function(){if(!this.map)return new Error("map object is necessary");this.canvas?this.clear(this.context):(this._initContainer(),this._initThreeRenderer(),this._layer.fire("rendererinitialized"))}},{key:"getMapSize",value:function(){var e=this.map.getContainer();return{width:e.clientWidth,height:e.clientHeight}}},{key:"cancelFrame",value:function(){null!=this.animationFrame&&Np(this.animationFrame)}},{key:"remove",value:function(){null!=this.animationFrame&&Np(this.animationFrame),this.container.removeChild(this.canvas),this.container.parentNode.removeChild(this.container),this.context=null,this.canvas=null,this.container=null}},{key:"clear",value:function(e){e&&e.clear&&e.clear(),e&&e.clearRect&&e.clearRect(0,0,e.canvas.width,e.canvas.height)}},{key:"getScale",value:function(e){var t=this.map,r=null==e?t.getZoom():e,n=Ep.getResolution(Ep.nativeMaxZoom);return Ep.getResolution(r)/n}},{key:"getCanvasContainer",value:function(){return this.container}},{key:"getCanvas",value:function(){return this.canvas}},{key:"locationCamera",value:function(){var e=this.map,t=this.getMapSize(),r=Math.pow(2,Ep.nativeMaxZoom-e.getZoom()-1),n=Math.tan(e.transform.fov/2*Mp),o=this.camera,i=e.getPitch()*Mp,a=-r*t.height/2/n;o.position.z=a*Math.cos(i);var s=Ap.lngLatToPoint(e.getCenter(),Ep.nativeMaxZoom),u=Math.sin(i)*a,l=e.getBearing()*Mp;o.position.x=s.x+u*Math.sin(l),o.position.y=s.y-u*Math.cos(l),o.up.set(Math.sin(l),-Math.cos(l),0),o.lookAt(new gp.Vector3(s.x,s.y,0)),o.updateProjectionMatrix()}},{key:"toThreeShape",value:function(e){var t=this;if(!e)return null;var r=this.getCoordinatesCenter(e),n=this.lngLatToPosition(r),o=e.map(function(e){return t.lngLatToPosition({lng:e[0],lat:e[1]}).sub(n)});return new kp(o)}},{key:"toThreeMesh",value:function(e,t,r,n){if(!e)return null;var o=e;n&&(o=this.removeDuplicatedCoordinates(e));var i=this.distanceToThreeVector3(t,t).x,a=this.toThreeShape(o),s=new jp(a,{amount:i,bevelEnabled:!0}),u=new Tp(s,r),l=this.lngLatToPosition(this.getCoordinatesCenter(o));return u.position.set(l.x,l.y,-i),u}},{key:"addObject",value:function(e,t){t&&e&&this.setPosition(e,t),this.scene.add(e)}},{key:"clearMesh",value:function(){var e=this.scene;if(!e)return this;for(var t=e.children.length-1;t>=0;t--)e.children[t]instanceof gp.Mesh&&e.remove(e.children[t]);return this}},{key:"clearAll",value:function(e){var t=this.scene;if(!t)return this;for(var r=t.children.length-1;r>=0;r--)!e&&t.children[r]instanceof gp.Camera||t.remove(t.children[r]);return this}},{key:"setPosition",value:function(e,t){if(!e||!t)return this;var r=this.lngLatToPosition(t);return e.position.set(r.x,r.y,r.z),this}},{key:"lngLatToPosition",value:function(e){var t=Ap.projection.nativeMaxZoom,r=Ap.lngLatToPoint(e,t);return new Pp(r.x,r.y,-0)}},{key:"distanceToThreeVector3",value:function(e,t,r){var n=this.map,o=r||n.getCenter(),i=Ap.projection.nativeMaxZoom,a=Ap.locate(o,e,t),s=Ap.lngLatToPoint(o,i),u=Ap.lngLatToPoint(a,i),l=Math.abs(u.x-s.x)*Math.sign(e),c=Math.abs(u.y-s.y)*Math.sign(t);return new Pp(l,c,0)}},{key:"removeDuplicatedCoordinates",value:function(e){function t(e,t){return e[0]===t[0]&&e[1]===t[1]}for(var r=[].concat(e),n=r.length-1;n>=1;n--)t(r[n],r[n-1])&&r.splice(n,1);return t(r[0],r[r.length-1])&&r.splice(r.length-1,1),r}},{key:"getCoordinatesCenter",value:function(e){for(var t=0,r=0,n=0,o=0,i=e.length;o<i;o++)e[o]&&(t+=e[o][0],r+=e[o][1],n++);return{lng:t/n,lat:r/n}}},{key:"_initContainer",value:function(){var e=this._createCanvas(),t=this.container=document.createElement("div");t.id=this._layer.id,t.className="threejs-wrapper",t.style.position="absolute",t.style.left="0px",t.style.top="0px",t.style.overflow="hidden",this._resetElementSize(t),t.appendChild(e),this.map.getCanvasContainer().appendChild(t)}},{key:"_createCanvas",value:function(){if(!this.canvas){var e=this.canvas=document.createElement("canvas");return e.className="threejs-overlay",e.style.outline="none",this._resetElementSize(e),e}}},{key:"_resetElementSize",value:function(e){if(e){var t=this.getMapSize(),r=window.devicePixelRatio?window.devicePixelRatio:1,n=r*t.width,o=r*t.height;e.width=n,e.height=o,e.style.width=t.width+"px",e.style.height=t.height+"px"}}},{key:"_initThreeRenderer",value:function(){var e,t=this.map,r=this.getMapSize();"gl"===(this.renderer||"gl")&&((e=new Op({canvas:this.canvas,alpha:!0,antialias:!0,preserveDrawingBuffer:!0},this.options)).autoClear=!0,e.clear()),e.setClearColor(new _p(1,1,1),0),e.canvas=this.canvas,this.context=e;var n=t.transform.fov,o=Math.tan(n/2*Mp),i=this.getScale(Ep.minZoom)/this.getScale(Ep.nativeMaxZoom)*r.height/2/o;this.camera=new xp(n,r.width/r.height,1,i),this.scene=new Ip,this.scene.add(this.camera)}}])&&Sp(e.prototype,t),r&&Sp(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function Lp(e){"@babel/helpers - typeof";return(Lp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Fp(n.key),n)}}function Fp(e){var t=function(e,t){if("object"!=Lp(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Lp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Lp(t)?t:t+""}function Qp(e,t,r){return t=Gp(t),function(e,t){if(t&&("object"==Lp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],Gp(e).constructor):t.apply(e,r))}function Gp(e){return(Gp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Up(e,t){return(Up=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var zp=function(e){function t(e,r,n){var o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=Qp(this,t)).id=e,o.type="custom",o.renderingMode="3d",o.overlay=!0,o.options=n;var i=n&&n.threeOptions;return o.renderer=new Rp(o,r,i),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Up(e,t)}(t,o().Evented),r=t,(n=[{key:"onAdd",value:function(e){var t=this;return t._map=e,t.renderer.setMap(e),t.renderer.render(),t.on("render",function(){this.context&&this.context.render(this.scene,this.camera)}.bind(t.renderer)),this}},{key:"addTo",value:function(e){return e.addLayer(this),this}},{key:"toThreeShape",value:function(e){return this.renderer.toThreeShape(e)}},{key:"toThreeMesh",value:function(e,t,r,n){return this.renderer.toThreeMesh(e,t,r,n)}},{key:"addObject",value:function(e,t){this.renderer&&this.renderer.addObject(e,t)}},{key:"getScene",value:function(){return this.renderer.scene}},{key:"getCamera",value:function(){return this.renderer.camera}},{key:"getThreeRenderer",value:function(){return this.renderer.context}},{key:"clearMesh",value:function(){return this.renderer.clearMesh(),this}},{key:"clearAll",value:function(e){return this.renderer.clearAll(e),this}},{key:"setPosition",value:function(e,t){return this.renderer.setPosition(e,t)}},{key:"lngLatToPosition",value:function(e){return this.renderer.lngLatToPosition(e)}},{key:"distanceToThreeVector3",value:function(e,t,r){var n=this._map,o=r||n.getCenter();return this.renderer.distanceToThreeVector3(e,t,o)}},{key:"removeDuplicatedCoordinates",value:function(e){this.renderer.removeDuplicatedCoordinates(e)}},{key:"getCoordinatesCenter",value:function(e){return this.renderer.getCoordinatesCenter(e)}},{key:"render",value:function(){this._update()}},{key:"getCanvasContainer",value:function(){return this.renderer.getCanvasContainer()}},{key:"getCanvas",value:function(){return this.renderer.getCanvas()}},{key:"remove",value:function(){this.renderer.remove(),this._map=null}},{key:"draw",value:function(){return this}},{key:"renderScene",value:function(){return this.renderer.renderScene(),this.fire("renderscene"),this}},{key:"_update",value:function(){return this.renderScene(),this.fire("render"),this}}])&&Dp(r.prototype,n),i&&Dp(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,i}();function Hp(e){"@babel/helpers - typeof";return(Hp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Vp(n.key),n)}}function Vp(e){var t=function(e,t){if("object"!=Hp(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Hp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Hp(t)?t:t+""}var Kp=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=t,this.rootCanvas=null,this.features=[],this.visibility=!0,this.opacity=t.opacity?t.opacity:1,this.colors=t.colors?t.colors:["blue","cyan","lime","yellow","red"],this.useGeoUnit=!!t.useGeoUnit&&t.useGeoUnit,this.radius=t.radius?t.radius:50,this.featureWeight=t.featureWeight?t.featureWeight:null,this.maxWeight=null,this.minWeight=null,this.canvasContext=null,this.maxWidth=null,this.maxHeight=null,this.extent={},this.mapElement=t.mapElement,this._createCanvasContainer(t.targetElement,t.size)},(t=[{key:"addFeatures",value:function(e){this.features=this.toiClientFeature(e),this.refresh()}},{key:"refresh",value:function(){0!==this.features.length&&this.updateHeatPoints(this.extent)}},{key:"setOpacity",value:function(e){e!==this.opacity&&(this.opacity=e,M.modifyDOMElement(this.rootCanvas,null,null,null,null,null,null,e))}},{key:"updateHeatPoints",value:function(e){this.features&&this.features.length>0?this.convertFastToPixelPoints(e):this.canvasContext.clearRect(0,0,this.maxWidth,this.maxWidth)}},{key:"convertFastToPixelPoints",value:function(e){var t,r,n,o,i,a,s,u=[],l=e.getEast()-e.getWest(),c=e.getNorth()-e.getSouth(),f=this.mapElement;o=l/f.width>c/f.height?l/f.width:c/f.height,this.useRadius=this.useGeoUnit?parseInt(this.radius/o):this.radius;for(var p=0;p<this.features.length;p++){var h=this.features[p],y=h.geometry,d=this.getPixelXY(new Ve(y.x,y.y));this.featureWeight?(d.weight=h.attributes[this.featureWeight],this.maxWeight||(i=i||d.weight,a=a||d.weight,i=Math.max(i,d.weight),a=Math.min(a,d.weight))):d.weight=1,t=Math.floor(d.x),r=Math.floor(d.y),n=d.weight,u.push([t,r,n])}this.maxWeight?this.draw(u,this.maxWeight):(s=i&&a?(i+a)/2:1,this.draw(u,s))}},{key:"draw",value:function(e,t){if(!(this.maxHeight>0&&this.maxWidth>0))return!1;var r=this.canvasContext;r.setTransform(1,0,0,1,0,0),this.canvasContext.clearRect(0,0,this.maxWidth,this.maxHeight),this.drawCircle(this.useRadius),this.createGradient();for(var n=0;n<e.length;n++){var o=e[n];this.canvasContext.globalAlpha=Math.max(o[2]/t,.05),this.canvasContext.drawImage(this.circle,o[0]-this.useRadius,o[1]-this.useRadius)}var i=r.getImageData(0,0,this.maxWidth,this.maxHeight);this.colorize(i.data,this.grad),r.putImageData(i,0,0)}},{key:"colorize",value:function(e,t){for(var r,n=0;n<e.length;n+=4)(r=4*e[n+3])&&(e[n]=t[r],e[n+1]=t[r+1],e[n+2]=t[r+2])}},{key:"drawCircle",value:function(e){var t=e/2,r=this.circle=document.createElement("canvas"),n=r.getContext("2d");r.height=2*e,r.width=2*e,n.shadowOffsetX=n.shadowOffsetY=2*e,n.shadowBlur=t,n.shadowColor="#000000",n.beginPath(),n.arc(-e,-e,e/2,0,2*Math.PI,!0),n.closePath(),n.fill()}},{key:"createGradient",value:function(){var e=this.colors,t=document.createElement("canvas"),r=t.getContext("2d"),n=r.createLinearGradient(0,0,0,256);t.height=256,t.width=1;for(var o=1,i=0,a=e.length;i<a;i++)n.addColorStop(o/a,e[i]),o++;r.fillStyle=n,r.fillRect(0,0,1,256),this.grad=r.getImageData(0,0,1,256).data}},{key:"getPixelXY",value:function(e){var t;if(e instanceof ot||e instanceof Fo){var r=this.options.convertLatlonToPixel({lon:e.x,lat:e.y});t={x:parseInt(r.x),y:parseInt(r.y)}}if(e instanceof Ve){var n=this.options.convertLatlonToPixel(e);t={x:parseInt(n.x),y:parseInt(n.y)}}return t}},{key:"_createCanvasContainer",value:function(e){this.rootCanvas=document.createElement("canvas"),this.rootCanvas.id=this.options.id,this.rootCanvas.width=this.maxWidth=parseInt(this.mapElement.style.width),this.rootCanvas.height=this.maxHeight=parseInt(this.mapElement.style.height),this.canvasContext=this.rootCanvas.getContext("2d");var t=window.devicePixelRatio||1;1!==t&&this.canvasContext&&this.canvasContext.scale(t,t),M.modifyDOMElement(this.rootCanvas,null,{x:0,y:0},{w:this.maxWidth,h:this.maxHeight},"absolute",null,null,this.opacity),e.appendChild(this.rootCanvas)}},{key:"toiClientFeature",value:function(e){M.isArray(e)||(e=[e]);for(var t=[],r=0;r<e.length;r++)if(e[r]instanceof pr)t.push(e[r]);else if(-1!=["FeatureCollection","Feature","Geometry"].indexOf(e[r].type)){var n=new uo;t=t.concat(n.read(e[r]))}else{if(!e[r].geometry||!e[r].geometry.parts)throw new Error("Features[".concat(r,"]'s type does not match, please check."));t.push(Ys.fromJson(e[r]).toFeature())}return t}},{key:"removeFeatures",value:function(e){if(e&&0!==e.length&&this.features&&0!==this.features.length){if(e===this.features)return this.removeAllFeatures();M.isArray(e)||(e=[e]);for(var t,r,n=[],o=0,i=e.length;o<i;o++)t=e[o],-1!==(r=M.indexOf(this.features,t))?this.features.splice(r,1):n.push(t);var a=0==n.length;return this.refresh(),{succeed:a,heatPointsFailedRemoved:n}}}},{key:"removeAllFeatures",value:function(){this.features=[],this.refresh()}},{key:"removeFromMap",value:function(){this.removeAllFeatures(),this.options.targetElement.removeChild(this.rootCanvas)}},{key:"setVisibility",value:function(e){this.rootCanvas&&e!==this.visibility&&(this.visibility=e,this.rootCanvas.style.display=e?"block":"none")}},{key:"setExtent",value:function(e){this.extent=e}},{key:"_hide",value:function(){this.rootCanvas.style.display="none"}},{key:"_show",value:function(){this.rootCanvas.style.display="block"}}])&&qp(e.prototype,t),r&&qp(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function Yp(e){"@babel/helpers - typeof";return(Yp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Wp(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Jp(Object(r),!0).forEach(function(t){Xp(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jp(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Xp(e,t,r){return(t=$p(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,$p(n.key),n)}}function $p(e){var t=function(e,t){if("object"!=Yp(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Yp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Yp(t)?t:t+""}function eh(e,t,r){return t=th(t),function(e,t){if(t&&("object"==Yp(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],th(e).constructor):t.apply(e,r))}function th(e){return(th=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rh(e,t){return(rh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var nh=function(e){function t(e,r){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=eh(this,t);var o=r||{};return n.options=o,n.name=e,n.id=o.id?o.id:M.createUniqueID("HeatMapLayer_"),n.loadWhileAnimating=void 0===o.loadWhileAnimating||o.loadWhileAnimating,n.features={},n.EVENT_TYPES=["featuresadded","featuresremoved","featuresdrawcompleted"],n.type="custom",n.renderingMode="3d",n.overlay=!0,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rh(e,t)}(t,o().Evented),r=t,(n=[{key:"onAdd",value:function(e){this.map=e;var t=this.map.getCanvasContainer(),r=this.map.getCanvas();this.renderer=new Kp(Wp(Wp({id:this.id},this.options),{},{convertLatlonToPixel:this._convertLatlonToPixel.bind(this),targetElement:t,mapElement:r})),this.features.features&&this.features.features.length&&(this.renderer.setExtent(this.map.getBounds()),this.renderer.addFeatures(this.features))}},{key:"onRemove",value:function(){this.removeAllFeatures(),this.renderer.removeFromMap(),this.features={},this.renderer=null}},{key:"render",value:function(){this.refresh()}},{key:"addFeatures",value:function(e){this.renderer?this.renderer.addFeatures(e):this.features=e,this.fire(this.EVENT_TYPES[0],{features:e,succeed:!0})}},{key:"refresh",value:function(){this.map&&(this.renderer.setExtent(this.map.getBounds()),this.renderer.refresh())}},{key:"setOpacity",value:function(e){e!==this.opacity&&(this.renderer.setOpacity(e),null!==this.map&&this.fire("changelayer",{layer:this,property:"opacity"}))}},{key:"updateHeatPoints",value:function(e){this.renderer.updateHeatPoints(e)}},{key:"getPixelXY",value:function(e){return this.renderer.getPixelXY(e)}},{key:"removeFeatures",value:function(e){var t=this.renderer.removeFeatures(e);if(t){var r=t.heatPointsFailedRemoved,n=t.succeed;this.fire(this.EVENT_TYPES[1],{features:r,succeed:n})}}},{key:"removeAllFeatures",value:function(){this.renderer.removeAllFeatures()}},{key:"moveTo",value:function(e,t){var r=document.getElementById(this.renderer.rootCanvas.id);if(t=void 0===t||t){var n=document.getElementById(e);r&&n&&n.parentNode.insertBefore(r,n)}else{var o=document.getElementById(e);if(r){if(o.nextSibling)return void o.parentNode.insertBefore(r,o.nextSibling);o.parentNode.appendChild(r)}}}},{key:"setVisibility",value:function(e){this.renderer.setVisibility(e)}},{key:"_convertLatlonToPixel",value:function(e){return this.map.project(new(o().LngLat)(e.lon,e.lat))}}])&&Zp(r.prototype,n),i&&Zp(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,i}();function oh(e){"@babel/helpers - typeof";return(oh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ih(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ah(e,t,r){return(t=uh(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sh(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,uh(n.key),n)}}function uh(e){var t=function(e,t){if("object"!=oh(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=oh(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==oh(t)?t:t+""}var lh=function(){return e=function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.layerTypeID=t,this.data=[].concat(r.data),this.props=r.props?r.props:{},this.callback=r.callback?r.callback:{},this.id=r.layerId?r.layerId:M.createUniqueID("graphicLayer_"+this.layerTypeID+"_")},(t=[{key:"onAdd",value:function(){}},{key:"render",value:function(){}},{key:"setStyle",value:function(e){M.extend(this.props,e),this._createLayerByLayerTypeID(),this.update()}},{key:"setData",value:function(e){this.data=this.data||[],this.data.length=0;var t=M.isArray(e)?[].concat(e):[e];this.layer.props.data||(this.layer.props.data=[]),this.layer.props.data.length=0;for(var r=0;r<t.length;r++)this.layer.props.data.push(t[r]);this.data=this.layer.props.data,this.update()}},{key:"addData",value:function(e){this.data=this.data||[];var t=M.isArray(e)?[].concat(e):[e];this.layer.props.data||(this.layer.props.data=[]);for(var r=0;r<t.length;r++)this.layer.props.data.push(t[r]);this.update()}},{key:"update",value:function(){if("Awaiting state"!==this.layer.lifecycle){this.layer.setChangeFlags({dataChanged:!0,propsChanged:!0,viewportChanged:!0,updateTriggersChanged:!0})}this._draw()}},{key:"clear",value:function(){this.removeData(),this.deckGL.finalize()}},{key:"removeData",value:function(){this.data.length=0,this.layer.props.data&&(this.layer.props.data.length=0),this.update()}},{key:"moveTo",value:function(e,t){var r=document.getElementById(this.id);if(t=void 0===t||t){var n=document.getElementById(e);r&&n&&n.parentNode.insertBefore(r,n)}else{var o=document.getElementById(e);if(r){if(o.nextSibling)return void o.parentNode.insertBefore(r,o.nextSibling);o.parentNode.appendChild(r)}}}},{key:"setVisibility",value:function(e){this.canvas&&e!==this.visibility&&(this.visibility=e,this.canvas.style.display=e?"block":"none")}},{key:"_draw",value:function(){var e=this._getState();e.layers=[this.layer],e.canvas=this.canvas,this.deckGL.setProps(e)}},{key:"_getState",value:function(){var e=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ih(Object(r),!0).forEach(function(t){ah(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ih(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({width:parseInt(this.canvas.style.width),height:parseInt(this.canvas.style.height)},this.getMapInfo()),t={};for(var r in e)t[r]=e[r];for(var n in this.props)t[n]=this.props[n];return this._isEPSG3857&&this._isEPSG3857()?(t.coordinateSystem=this.coordinateSystem,t.isGeographicCoordinateSystem=this.isGeographicCoordinateSystem):(t.coordinateSystem=1,t.isGeographicCoordinateSystem=!1),t.data=this.data,t}},{key:"_createLayerByLayerTypeID",value:function(){if(this.props.data=this.data,this.props.isGeographicCoordinateSystem=this.isGeographicCoordinateSystem,this.props.coordinateSystem=this.coordinateSystem,this.props.pickable=Boolean(this.props.onClick)||Boolean(this.props.onHover),"scatter-plot"===this.layerTypeID)this.props.id="scatter-plot",this._createScatterPlotLayer();else if("path-layer"===this.layerTypeID)this.props.id="path-layer",this._createPathLayer();else if("polygon-layer"===this.layerTypeID)this.props.id="polygon-layer",this._createPolygonLayer();else if("arc-layer"===this.layerTypeID)this.props.id="arc-layer",this._createArcLineLayer();else{if("hexagon-layer"!==this.layerTypeID)throw new Error(this.layerTypeID+" does not support");this.props.id="hexagon-layer",this._createHexagonLayer()}}},{key:"_createScatterPlotLayer",value:function(){var e=this;this.props.getPosition=this.callback.getPosition?this.callback.getPosition:function(e){if(!e)return[0,0,0];var t=e.getLngLat();return t&&[t.lng,t.lat,0]},this.callback.getColor&&(this.props.getColor=this.callback.getColor?this.callback.getColor:function(t){var r=t&&t.getStyle();return r&&r.color||e.props.color}),this.callback.getRadius&&(this.props.getRadius=this.callback.getRadius?this.callback.getRadius:function(t){var r=t&&t.getStyle();return r&&r.radius||e.props.radius}),(this.props.color||this.props.radius)&&(this.props.updateTriggers={},this.props.radius&&(this.props.updateTriggers.getRadius=[this.props.radius]),this.props.color&&(this.props.updateTriggers.getColor=[this.props.color])),this.layer=new window.DeckGL.ScatterplotLayer(this.props)}},{key:"_createPathLayer",value:function(){this.props.getPath=this.callback.getPath?this.callback.getPath:function(e){return e.geometry.coordinates},this.callback.getColor&&(this.props.getColor=this.callback.getColor),this.callback.getWidth&&(this.props.getWidth=this.callback.getWidth),this.callback.getDashArray&&(this.props.getDashArray=this.callback.getDashArray),this.layer=new window.DeckGL.PathLayer(this.props)}},{key:"_createPolygonLayer",value:function(){this.props.getPolygon=this.callback.getPolygon?this.callback.getPolygon:function(e){return e.geometry.coordinates},this.callback.getElevation&&(this.props.getElevation=this.callback.getElevation),this.callback.getFillColor&&(this.props.getFillColor=this.callback.getFillColor),this.callback.getLineColor&&(this.props.getLineColor=this.callback.getLineColor),this.callback.getLineWidth&&(this.props.getLineWidth=this.callback.getLineWidth),this.props.updateTriggers={},this.props.updateTriggers.getColor=this.props.color?this.props.color:[0,0,128,128],this.layer=new window.DeckGL.PolygonLayer(this.props)}},{key:"_createArcLineLayer",value:function(){this.props.getSourcePosition=this.callback.getSourcePosition?this.callback.getSourcePosition:function(e){return e?e.geometry.coordinates[0]:[0,0,0]},this.props.getTargetPosition=this.callback.getTargetPosition?this.callback.getTargetPosition:function(e){return e?e.geometry.coordinates[1]:[0,0,0]},this.callback.getStrokeWidth&&(this.props.getStrokeWidth=this.callback.getStrokeWidth),this.callback.getSourceColor&&(this.props.getSourceColor=this.callback.getSourceColor),this.callback.getTargetColor&&(this.props.getTargetColor=this.callback.getTargetColor),this.layer=new window.DeckGL.ArcLayer(this.props)}},{key:"_createHexagonLayer",value:function(){this.props.getPosition=this.callback.getPosition?this.callback.getPosition:function(e){return e?e.geometry.coordinates:[0,0,0]},this.callback.getColorValue&&(this.props.getColorValue=this.callback.getColorValue),this.callback.getElevationValue&&(this.props.getElevationValue=this.callback.getElevationValue),this.layer=new window.DeckGL.HexagonLayer(this.props)}},{key:"_initContainer",value:function(e,t){var r=t.style,n=r.width,o=r.height;this.canvas=this._createCanvas(n,o),e.appendChild(this.canvas)}},{key:"_createCanvas",value:function(e,t){var r=document.createElement("canvas");return r.id=this.id,r.style.position="absolute",r.style.top="0px",r.style.left="0px",r.style.cursor="",r.width=parseInt(e),r.height=parseInt(t),r.style.width=e,r.style.height=t,r}}])&&sh(e.prototype,t),r&&sh(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function ch(e){"@babel/helpers - typeof";return(ch="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fh(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ph(n.key),n)}}function ph(e){var t=function(e,t){if("object"!=ch(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ch(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ch(t)?t:t+""}function hh(e,t,r){return t=yh(t),function(e,t){if(t&&("object"==ch(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],yh(e).constructor):t.apply(e,r))}function yh(e){return(yh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dh(e,t){return(dh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var mh=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=hh(this,t,[e,r])).type="custom",n.renderingMode="3d",n.overlay=!0,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dh(e,t)}(t,lh),r=t,(n=[{key:"onAdd",value:function(e){if(this.map=e,this.canvas)return this.mapContainer=this.map.getCanvasContainer(),this;this._isEPSG3857()?(this.coordinateSystem=3,this.isGeographicCoordinateSystem=!0):(this.coordinateSystem=1,this.isGeographicCoordinateSystem=!1),this._initContainer(this.map.getCanvasContainer(),this.map.getCanvas()),this._createLayerByLayerTypeID();var t=this._getState(),r={};for(var n in t)r[n]=t[n];return r.layers=[this.layer],r.canvas=this.canvas,this.deckGL=new window.DeckGL.experimental.DeckGLJS(r),this._draw(),this}},{key:"onRemove",value:function(){this.map.getCanvasContainer().removeChild(this.canvas),this.clear()}},{key:"getMapInfo",value:function(){var e=this.map.getCenter();return{center:e,zoom:this.map.getZoom(),maxZoom:this.map.getMaxZoom(),pitch:this.map.getPitch(),bearing:this.map.getBearing(),longitude:e.lng,latitude:e.lat}}},{key:"render",value:function(){this._draw()}},{key:"_isEPSG3857",value:function(){return this.map.getCRS&&this.map.getCRS()!==o().CRS.EPSG3857}}])&&fh(r.prototype,n),i&&fh(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,i}();function gh(e){"@babel/helpers - typeof";return(gh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vh(e){return function(e){if(Array.isArray(e))return bh(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return bh(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?bh(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bh(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Ah(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,wh(n.key),n)}}function wh(e){var t=function(e,t){if("object"!=gh(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=gh(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==gh(t)?t:t+""}var Sh={textSize:"12px",textFont:["12px Calibri","sans-serif"],textAnchor:"bottom",textColor:"rgba(0,0,0,1)",textHaloColor:"rgba(255,255,255,1)",textHaloWidth:1},Ch={lineColor:"red",lineCap:"round",lineJoin:"round",lindDasharray:[.4,5],lineDashOffset:0,lineWidth:1},Eh={showLabel:!0,opacity:1,visible:!0,interval:10,extent:null,minZoom:0,maxZoom:50,wrapX:!0,strokeStyle:Ch,lngLabelFormatter:null,latLabelFormatter:null,lngLabelStyle:Sh,latLabelStyle:Sh},_h=function(){return e=function e(t,r,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.map=t,this.id=o&&o.id,this.sourceId=this.id+"_line",this.canvasId=this.id,this.options=r,this.mapElement=o.mapElement,this.targetElement=o.targetElement,this.getMapStateByKey=n.getMapStateByKey,this.getDefaultExtent=n.getDefaultExtent,this.setVisibility=n.setVisibility,this.updateGraticuleLayer=n.updateGraticuleLayer,this.init()},(t=[{key:"init",value:function(){this._initialize(),this._createCanvas(),this._drawCanvas(),this.setVisibility(),this._drawLabel()}},{key:"onRemove",value:function(){this.targetElement.removeChild(this.canvas),this.canvas=null}},{key:"setMinZoom",value:function(e){this.options.minZoom=e,this.setVisibility()}},{key:"setMaxZoom",value:function(e){this.options.maxZoom=e,this.setVisibility()}},{key:"setShowLabel",value:function(e){this.options.showLabel=e,this._drawLabel()}},{key:"setExtent",value:function(e){this.options.extent=this.getDefaultExtent(e),this.features=this._getGraticuleFeatures(),this.updateGraticuleLayer(),this._drawLabel()}},{key:"setLngLabelStyle",value:function(e){this.options.lngLabelStyle=e,this._drawLabel()}},{key:"setLatLabelStyle",value:function(e){this.options.latLabelStyle=e,this._drawLabel()}},{key:"setIntervals",value:function(e){this.options.interval=e,this._calcInterval(),this.features=this._getGraticuleFeatures(),this.updateGraticuleLayer(),this._drawLabel()}},{key:"draw",value:function(){this._reset()}},{key:"_initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options;(e=e||{}).strokeStyle=Object.assign({},Ch,e.strokeStyle||{}),e.lngLabelStyle=Object.assign({},Sh,e.lngLabelStyle||{}),e.latLabelStyle=Object.assign({},Sh,e.latLabelStyle||{}),this.options=Object.assign({},Eh,e,{extent:this.getDefaultExtent(e.extent),wrapX:e.wrapX}),this.oldExtent=this.options.extent,this._calcInterval(),this.isRotate=!1,this.visible=this.options.visible,this.features=this._getGraticuleFeatures()}},{key:"_createCanvas",value:function(){if(!this.canvas){var e=this.mapElement;this.canvas=document.createElement("canvas"),this.canvas.id=this.canvasId,this.canvas.style.position="absolute",this.canvas.style.top="0px",this.canvas.style.left="0px";var t=("undefined"==typeof window?{}:window).devicePixelRatio||1;this.canvas.width=parseInt(e.style.width)*t,this.canvas.height=parseInt(e.style.height)*t,this.canvas.style.width=e.style.width,this.canvas.style.height=e.style.height,this.canvas.globalAlpha=this.options.opacity,this.targetElement.appendChild(this.canvas)}}},{key:"_drawCanvas",value:function(){this.canvas||this._createCanvas(),this.setVisibility(),this._reset()}},{key:"_resizeCallback",value:function(){this.targetElement&&this.targetElement.removeChild(this.canvas),this.canvas=null,this._drawCanvas()}},{key:"_reset",value:function(){this._updateRotate(),this._updateExtent(),this._calcInterval(),this._drawLabel()}},{key:"_updateRotate",value:function(){var e=this.getMapStateByKey("getBearing");this.isRotate=e>-180&&e<=-90||e>=90&&e<180}},{key:"_updateExtent",value:function(){if(this.options.wrapX&&!this.oldExtent){var e=this.getMapStateByKey("getBounds"),t=e._ne,r=e._sw;this.options.extent=[r.lng,r.lat,t.lng,t.lat]}}},{key:"_calcInterval",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.interval;"function"==typeof e?(e=e(this.map),this._currLngInterval=e,this._currLatInterval=e):(this._currLngInterval=e,this._currLatInterval=e)}},{key:"_formatLat",value:function(e){return this.options.latFormatTickLabel?this.options.latLabelFormatter(e):e<0?df(-1*e)+"S":e>0?df(e)+"N":""+df(e)}},{key:"_formatLng",value:function(e){return this.options.lngLabelFormatter?this.options.lngLabelFormatter(e):(e=yf(e))>0&&e<=180?df(e)+"E":e<0&&e>=-180?df(-1*e)+"W":""+df(e)}},{key:"_parsePxToInt",value:function(e){e.length>2&&"p"===e.charAt(e.length-2)&&(e=e.substr(0,e.length-2));try{return parseInt(e,10)}catch(e){console.log(e)}return 0}},{key:"_drawLabel",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.visible,r=this.canvas,n=r.getContext("2d");if(t&&this.options.showLabel){if(this.mapElement){this._currLngInterval&&this._currLatInterval||this._calcInterval(),n.clearRect(0,0,r.width,r.height);var o=this.options,i=o.lngLabelStyle,a=o.latLabelStyle,s=this._getGridiculePoints(),u=s.lngPoints,l=s.latPonits;u.forEach(function(t){e._drawLng(n,t[0],t[1],t[2],i)}),l.forEach(function(t){e._drawLat(n,t[0],t[1],t[2],a)})}}else n.clearRect(0,0,r.width,r.height)}},{key:"_drawLat",value:function(e,t,r,n,o){e=this._setLabelStyle(e,o);var i=this.canvas.width,a=12;try{var s=e.font.split(" ")[0];a=this._parsePxToInt(s)}catch(e){console.log(e)}if(!n){var u=t;t=r,r=this.getMapStateByKey("project",[u,t])}var l=this._formatLat(t),c=e.measureText(l).width;e.strokeText(l,(n?i:r.x)-c,(n?r:r.y)+a/2),e.fillText(l,(n?i:r.x)-c,(n?r:r.y)+a/2)}},{key:"_drawLng",value:function(e,t,r,n,o){e=this._setLabelStyle(e,o);var i=this.canvas.height;if(!n){var a=r;r=this.getMapStateByKey("project",[t,a])}var s=this._formatLng(t),u=e.measureText(s).width;e.strokeText(s,(n?r:r.x)-u/2,n?i:r.y),e.fillText(s,(n?r:r.x)-u/2,n?i:r.y)}},{key:"_getLatPoints",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-180,180],r=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.features;if(o){if(this.options.wrapX&&-180===t[0]&&180===t[1])return[];var i=[];return o.forEach(function(o){var a=o.geometry.coordinates[0][1];if(o.geometry.coordinates[1][1]===a){var s="number"==typeof n?n:t[1];e.isRotate&&(s="number"==typeof r?r:t[0]),e.options.wrapX&&(i=i.concat(e._getWrapPoints(s,a,[s,s]))),i.push([s,a])}}),i}}},{key:"_getLngPoints",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-90,90],r=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.features;if(o){var i="number"==typeof r?r:t[0];this.isRotate&&(i="number"==typeof n?n:t[1]);var a=[];return o.forEach(function(t){var r=t.geometry.coordinates[0][0];t.geometry.coordinates[1][0]===r&&(a.push([r,i]),e.options.wrapX&&(a=a.concat(e._getWrapPoints(r,i))))}),a}}},{key:"_getWrapPoints",value:function(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.oldExtent,n=[],o=this.getMapStateByKey("getBounds"),i=o._ne,a=o._sw,s=r.length>2?r[2]:r[1];e>=a.lng;){var u=yf(e,180===s,-180===r[0]);(!r||u>=r[0]&&u<=s)&&n.push([e,t]),e-=360}for(;e<=i.lng;){var l=yf(e,180===s,-180===r[0]);(!r||l>=r[0]&&l<=s)&&n.push([e,t]),e+=360}return n}},{key:"_getGridiculePoints",value:function(){var e=this._getEdgeLat(),t=this._getEdgeLng(),r=this._getRange(),n=r.latRange,o=r.lngRange,i=r.firstLat,a=r.firstLng,s=r.lastLat,u=r.lastLng;return{latPonits:this._getUniquePoint(this._getLatPoints(o,a,u),e,1),lngPoints:this._getUniquePoint(this._getLngPoints(n,i,s),t,0)}}},{key:"_getEdgeLat",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._currLatInterval,r=[],n=[],o=this.canvas.width,i=this.canvas.height,a=this._getRange().extent,s=this.getMapStateByKey("getBounds")._ne;if(this.options.wrapX&&yf(s.lng)>a[2])return[];for(var u=this._countDecimals(t),l=0;l<=i;l++){var c=this.getMapStateByKey("unproject",[o,l]),f=yf(c.lng);(this.options.wrapX?f>=a[0]&&f<=a[2]:c.lng>=a[0]&&c.lng<=a[2])&&c.lat>=a[1]&&c.lat<=a[3]&&(r.push([c.lat,l]),n.push(c.lat),void 0===e&&c.lat.toFixed(u)%t==0&&(e=Number(c.lat.toFixed(u))))}var p=this._getIntersectRange(e,n,r,t),h=p.first,y=p.last,d=p.coordinates,m=p.points;e=Math.min(Math.max(h,-90),90);var g=Math.max(Math.min(Math.round(y),90),-90);return-90!==e||-90!==g?this._getClosestCoordinate(e,g,d,m,t):[]}},{key:"_getEdgeLng",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._currLngInterval,r=[],n=[],o=this.canvas.width,i=this.canvas.height,a=this.options.extent,s=this._countDecimals(t),u=this.getMapStateByKey("getBounds")._sw;if(this.options.wrapX&&yf(u.lat)>a[3])return[];for(var l=0;l<=o;l++){var c=this.getMapStateByKey("unproject",[l,i]),f=yf(c.lng);(this.options.wrapX?f>=a[0]&&f<=a[2]:c.lng>=a[0]&&c.lng<=a[2])&&c.lat>=a[1]&&c.lat<=a[3]&&(r.push([c.lng,l]),n.push(c.lng),void 0===e&&c.lng.toFixed(s)%t==0&&(e=Number(c.lng.toFixed(s))))}var p=this._getIntersectRange(e,n,r,t),h=p.first,y=p.last,d=p.coordinates,m=p.points;return e=h,this._getClosestCoordinate(e,y,d,m,t)}},{key:"_getIntersectRange",value:function(e,t,r,n){var o=t[t.length-1];if(e>o){o=e,t.reverse(),r.reverse();for(var i=this._countDecimals(n),a=0;a<=t.length;a++){var s=t[a];if(s.toFixed(i)%n==0){e=Number(s.toFixed(i));break}}}return{first:e,last:o,coordinates:t,points:r}}},{key:"_getClosestCoordinate",value:function(e,t,r,n,o){for(var i=[],a=e;a<=t;){var s=this._getClosestNumberIndex(a,r),u=n[s];i.push([Math.round(u[0]),u[1],!0]),a+=o,r=r.slice(s),n=n.slice(s)}return i}},{key:"_getClosestNumberIndex",value:function(e,t){for(var r=0,n=Number.MAX_VALUE,o=0;o<t.length;o++){var i=Math.abs(t[o]-e);if(i<=n){if(i===n&&t[o]<t[r])continue;r=o,n=i}}return r}},{key:"_getUniquePoint",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(this.options.wrapX)return e.concat(t);if(!t||0===t.length)return e;var n=t,o=this.canvas.width,i=this.canvas.height;for(var a in e){var s=this.getMapStateByKey("project",e[a]),u=n.findIndex(function(t){return t[0]===e[a][r]});u<=-1?n.push(e[a]):s&&s.x>=0&&s.x<=o&&s.y>=0&&s.y<=i&&(n[u]=e[a])}return n}},{key:"_countDecimals",value:function(e){return Math.floor(e)!==e&&e.toString().split(".")[1].length||0}},{key:"_getGraticuleFeatures",value:function(){var e=this._currLngInterval||10,t=this._currLatInterval||10,r=[],n=this._getRange(),o=n.latRange,i=n.lngRange,a=n.firstLat,s=n.firstLng,u=n.lastLat,l=n.lastLng;this.options.wrapX&&!this.oldExtent&&(o=[-90,90],i=[-180,180],a=s=u=l=null),"number"==typeof s&&r.unshift(this._makeLineFeature(this._makeLineCoords(s,o,a,u))),"number"==typeof l&&r.unshift(this._makeLineFeature(this._makeLineCoords(l,o,a,u)));for(var c=i[0];c<=i[1];c+=e)r.unshift(this._makeLineFeature(this._makeLineCoords(c,o,a,u)));"number"==typeof a&&r.unshift(this._makeLineFeature(this._makeLineCoords(a,i,s,l,"lat"))),"number"==typeof u&&r.unshift(this._makeLineFeature(this._makeLineCoords(u,i,s,l,"lat")));for(var f=o[0];f<=o[1];f+=t)r.unshift(this._makeLineFeature(this._makeLineCoords(f,i,s,l,"lat")));return r}},{key:"_getRange",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.extent&&vh(this.options.extent);e&&0!==e.length||(e=this.getDefaultExtent());var t={};if((e=e.map(function(e){return Number(e.toFixed(6))}))[1]%this._currLatInterval!=0){t.firstLat=e[1];var r=Math.ceil(e[1]/this._currLatInterval);e[1]=r*this._currLatInterval}if(e[3]%this._currLatInterval!=0){t.lastLat=e[3];var n=Math.floor(e[3]/this._currLatInterval);e[3]=n*this._currLatInterval}if(e[0]%this._currLngInterval!=0){t.firstLng=e[0];var o=Math.ceil(e[0]/this._currLngInterval);e[0]=o*this._currLngInterval}if(e[2]%this._currLngInterval!=0){t.lastLng=e[2];var i=Math.floor(e[2]/this._currLngInterval);e[2]=i*this._currLngInterval}return Object.assign({latRange:[e[1],e[3]],lngRange:[e[0],e[2]],extent:e},t)}},{key:"_makeLineCoords",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[-90,90],r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"lng";e="lng"===o?this._lngFix(e):e,r="number"==typeof r?r:t[0],n="number"==typeof n?n:t[1];for(var i=Math.abs(r-n),a=[],s=r;s<=n;s+=i)"lng"===o?a.push([e,s]):a.push([s,e]);return a}},{key:"_makeLineFeature",value:function(e){return{type:"Feature",geometry:{type:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"LineString",coordinates:e}}}},{key:"_lngFix",value:function(e){return e>=180?180:e<=-180?-180:e}},{key:"_transformStrokeStyle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.strokeStyle;if(!e||"string"==typeof e)return{paint:{"line-color":e||"rgba(0,0,0,0.2)"}};var t={visibility:this.visible?"visible":"none","line-join":e.lineJoin||"round","line-cap":e.lineCap||"round"},r={"line-color":e.lineColor||"rgba(0,0,0,0.2)","line-width":e.lineWidth||1,"line-offset":e.lineDashOffset||0,"line-translate-anchor":"viewport","line-opacity":e.lineOpacity||1};return e.lineWidth&&("function"==typeof e.lineWidth?r["line-width"]=e.lineWidth(this.map):r["line-width"]=e.lineWidth),e.lindDasharray&&("function"==typeof e.lindDasharray?r["line-dasharray"]=e.lindDasharray(this.map):r["line-dasharray"]=e.lindDasharray),{layout:t,paint:r}}},{key:"_setLabelStyle",value:function(e,t){return t.textColor&&(e.fillStyle=t.textColor),t.textSize&&(e.font=t.textSize+" "+(t.textFont||["Calibri","sans-serif"]).join(",")),t.textHaloColor&&(e.strokeStyle=t.textHaloColor,e.lineWidth=t.textHaloWidth||1),t.textAnchor&&(e.textBaseline=this._getTxetBaseline(t.textAnchor),e.textAligin=this._getTxetAlign(t.textAligin)),e}},{key:"_getTxetBaseline",value:function(e){if(!e)return"bottom";var t=e.split("-");return t.includes("bottom")?"bottom":t.includes("top")?"top":t.includes("center")?"middle":void 0}},{key:"_getTxetAlign",value:function(e){if(!e)return"center";var t=e.split("-");return t.includes("left")?"left":t.includes("right")?"right":t.includes("center")?"center":void 0}}])&&Ah(e.prototype,t),r&&Ah(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function Ih(e){"@babel/helpers - typeof";return(Ih="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oh(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,xh(n.key),n)}}function xh(e){var t=function(e,t){if("object"!=Ih(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Ih(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ih(t)?t:t+""}var Ph,kh={textSize:"12px",textFont:["12px Calibri","sans-serif"],textAnchor:"bottom",textColor:"rgba(0,0,0,1)",textHaloColor:"rgba(255,255,255,1)",textHaloWidth:1},Th={lineColor:"red",lineCap:"round",lineJoin:"round",lindDasharray:[.4,5],lineDashOffset:0,lineWidth:1},jh={showLabel:!0,opacity:1,visible:!0,interval:10,extent:null,minZoom:0,maxZoom:50,wrapX:!0,strokeStyle:Th,lngLabelFormatter:null,latLabelFormatter:null,lngLabelStyle:kh,latLabelStyle:kh},Mh=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t&&t.layerID?t.layerID:M.createUniqueID("graticuleLayer_"),this.sourceId=this.id+"_line",(t=t||{}).strokeStyle=Object.assign({},Th,t.strokeStyle||{}),t.lngLabelStyle=Object.assign({},kh,t.lngLabelStyle||{}),t.latLabelStyle=Object.assign({},kh,t.latLabelStyle||{}),this.options=Object.assign({},jh,t),this.type="custom",this.renderingMode="3d",this.overlay=!0,this.styleDataEevent=this._setLayerTop.bind(this)},(t=[{key:"onAdd",value:function(e){this.map=e,this.renderer=new _h(this.map,this.options,{getMapStateByKey:this.getMapStateByKey,getDefaultExtent:this.getDefaultExtent,updateGraticuleLayer:this.updateGraticuleLayer.bind(this),setVisibility:this.setVisibility.bind(this)},{mapElement:this.map.getCanvas(),targetElement:this.map.getCanvasContainer(),id:this.id}),this.addGraticuleLayer(),this.resizeEvent=this.renderer._resizeCallback.bind(this.renderer),this.zoomendEvent=this.setVisibility.bind(this),this._bindEvent()}},{key:"onRemove",value:function(){this.renderer.onRemove(),this._unbindEvent()}},{key:"render",value:function(){this.renderer.draw()}},{key:"getMapStateByKey",value:function(e,t){return"getBearing"===e?this.map.getBearing():"getBounds"===e?this.map.getBounds():"project"===e?this.map.project(t):"unproject"===e?this.map.unproject(t):void 0}},{key:"setVisibility",value:function(e){var t=this.map&&this.map.getZoom();this.options.visible="boolean"==typeof e?e:this.options.visible,this.visible="boolean"==typeof e?e:this.options.visible&&t>=this.options.minZoom&&t<=this.options.maxZoom,this.renderer&&(this.renderer.visible=this.visible),this.map.getLayer(this.sourceId)&&this.map.setLayoutProperty(this.sourceId,"visibility",this.visible?"visible":"none"),this.renderer&&this.renderer._drawLabel()}},{key:"setMinZoom",value:function(e){this.options.minZoom=e,this.setVisibility()}},{key:"setMaxZoom",value:function(e){this.options.maxZoom=e,this.setVisibility()}},{key:"setShowLabel",value:function(e){this.options.showLabel=e,this.renderer._drawLabel()}},{key:"setExtent",value:function(e){this.options.extent=this.getDefaultExtent(e,this.map),this.renderer.setExtent(e)}},{key:"setStrokeStyle",value:function(e){if(this.map&&this.map.getLayer(this.sourceId)){this.options.strokeStyle=e;var t=this.renderer._transformStrokeStyle(e),r=t.layout,n=t.paint;for(var o in r)this.map.setLayoutProperty(this.sourceId,o,r[o]);for(var i in n)this.map.setPaintProperty(this.sourceId,i,n[i])}}},{key:"setLngLabelStyle",value:function(e){this.options.lngLabelStyle=e,this.renderer._drawLabel()}},{key:"setLatLabelStyle",value:function(e){this.options.latLabelStyle=e,this.renderer._drawLabel()}},{key:"setIntervals",value:function(e){this.renderer&&this.renderer.setIntervals(e)}},{key:"getDefaultExtent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.map,r=(t.getCRS&&t.getCRS()||{}).lngLatExtent;if(r||(r=[-180,-85.05119,180,85.05119]),!e||0===e.length)return r;var n=o().LngLatBounds.convert(e),i=n._sw,a=n._ne;return e=[i.lng,i.lat,a.lng,a.lat],e=[Math.max(r[0],e[0]),Math.max(r[1],e[1]),Math.min(r[2],e[2]),Math.min(r[3],e[3])]}},{key:"addGraticuleLayer",value:function(){if(!this.map.getSource(this.sourceId)){var e={type:"geojson",data:{type:"FeatureCollection",features:this.renderer.features}};this.map.addSource(this.sourceId,e)}if(!this.map.getLayer(this.sourceId)){var t=Object.assign({id:this.sourceId,type:"line",source:this.sourceId},this.renderer._transformStrokeStyle());this.map.addLayer(t)}}},{key:"_getLatPoints",value:function(e,t,r,n){return this.renderer._getLatPoints(e,t,r,n)}},{key:"_bindEvent",value:function(){this.map.on("styledata",this.styleDataEevent),this.map.on("resize",this.resizeEvent),this.map.on("zoomend",this.zoomendEvent)}},{key:"_unbindEvent",value:function(){this.map.off("styledata",this.styleDataEevent),this.map.off("resize",this.resizeEvent),this.map.off("zoomend",this.zoomendEvent)}},{key:"_setLayerTop",value:function(){var e=this,t=this.map;if(t){var r=t.getStyle&&t.getStyle().layers;r&&r.length&&r.findIndex(function(t){return t.id===e.sourceId})!==r.length-1&&t.getLayer(this.sourceId)&&(t.removeLayer(this.sourceId),this.addGraticuleLayer())}}},{key:"updateGraticuleLayer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.renderer.features;if(this.map.getSource(this.sourceId)){var t={type:"FeatureCollection",features:e};this.map.getSource(this.sourceId).setData(t)}this.addGraticuleLayer()}}])&&Oh(e.prototype,t),r&&Oh(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();!function(e){e[e.Unknown=0]="Unknown",e[e.Point=1]="Point",e[e.LineString=2]="LineString",e[e.Polygon=3]="Polygon",e[e.MultiPoint=4]="MultiPoint",e[e.MultiLineString=5]="MultiLineString",e[e.MultiPolygon=6]="MultiPolygon",e[e.GeometryCollection=7]="GeometryCollection",e[e.CircularString=8]="CircularString",e[e.CompoundCurve=9]="CompoundCurve",e[e.CurvePolygon=10]="CurvePolygon",e[e.MultiCurve=11]="MultiCurve",e[e.MultiSurface=12]="MultiSurface",e[e.Curve=13]="Curve",e[e.Surface=14]="Surface",e[e.PolyhedralSurface=15]="PolyhedralSurface",e[e.TIN=16]="TIN",e[e.Triangle=17]="Triangle"}(Ph||(Ph={}));var Bh,Nh=new Int32Array(2),Rh=new Float32Array(Nh.buffer),Lh=new Float64Array(Nh.buffer),Dh=1===new Uint16Array(new Uint8Array([1,0]).buffer)[0];function Fh(e){"@babel/helpers - typeof";return(Fh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qh(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Gh(n.key),n)}}function Gh(e){var t=function(e,t){if("object"!=Fh(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Fh(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Fh(t)?t:t+""}!function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"}(Bh||(Bh={}));var Uh=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.bytes_=t,this.position_=0,this.text_decoder_=new TextDecoder}return t=e,r=[{key:"clear",value:function(){this.position_=0}},{key:"bytes",value:function(){return this.bytes_}},{key:"position",value:function(){return this.position_}},{key:"setPosition",value:function(e){this.position_=e}},{key:"capacity",value:function(){return this.bytes_.length}},{key:"readInt8",value:function(e){return this.readUint8(e)<<24>>24}},{key:"readUint8",value:function(e){return this.bytes_[e]}},{key:"readInt16",value:function(e){return this.readUint16(e)<<16>>16}},{key:"readUint16",value:function(e){return this.bytes_[e]|this.bytes_[e+1]<<8}},{key:"readInt32",value:function(e){return this.bytes_[e]|this.bytes_[e+1]<<8|this.bytes_[e+2]<<16|this.bytes_[e+3]<<24}},{key:"readUint32",value:function(e){return this.readInt32(e)>>>0}},{key:"readInt64",value:function(e){return BigInt.asIntN(64,BigInt(this.readUint32(e))+(BigInt(this.readUint32(e+4))<<BigInt(32)))}},{key:"readUint64",value:function(e){return BigInt.asUintN(64,BigInt(this.readUint32(e))+(BigInt(this.readUint32(e+4))<<BigInt(32)))}},{key:"readFloat32",value:function(e){return Nh[0]=this.readInt32(e),Rh[0]}},{key:"readFloat64",value:function(e){return Nh[Dh?0:1]=this.readInt32(e),Nh[Dh?1:0]=this.readInt32(e+4),Lh[0]}},{key:"writeInt8",value:function(e,t){this.bytes_[e]=t}},{key:"writeUint8",value:function(e,t){this.bytes_[e]=t}},{key:"writeInt16",value:function(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8}},{key:"writeUint16",value:function(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8}},{key:"writeInt32",value:function(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8,this.bytes_[e+2]=t>>16,this.bytes_[e+3]=t>>24}},{key:"writeUint32",value:function(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8,this.bytes_[e+2]=t>>16,this.bytes_[e+3]=t>>24}},{key:"writeInt64",value:function(e,t){this.writeInt32(e,Number(BigInt.asIntN(32,t))),this.writeInt32(e+4,Number(BigInt.asIntN(32,t>>BigInt(32))))}},{key:"writeUint64",value:function(e,t){this.writeUint32(e,Number(BigInt.asUintN(32,t))),this.writeUint32(e+4,Number(BigInt.asUintN(32,t>>BigInt(32))))}},{key:"writeFloat32",value:function(e,t){Rh[0]=t,this.writeInt32(e,Nh[0])}},{key:"writeFloat64",value:function(e,t){Lh[0]=t,this.writeInt32(e,Nh[Dh?0:1]),this.writeInt32(e+4,Nh[Dh?1:0])}},{key:"getBufferIdentifier",value:function(){if(this.bytes_.length<this.position_+4+4)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var e="",t=0;t<4;t++)e+=String.fromCharCode(this.readInt8(this.position_+4+t));return e}},{key:"__offset",value:function(e,t){var r=e-this.readInt32(e);return t<this.readInt16(r)?this.readInt16(r+t):0}},{key:"__union",value:function(e,t){return e.bb_pos=t+this.readInt32(t),e.bb=this,e}},{key:"__string",value:function(e,t){e+=this.readInt32(e);var r=this.readInt32(e);e+=4;var n=this.bytes_.subarray(e,e+r);return t===Bh.UTF8_BYTES?n:this.text_decoder_.decode(n)}},{key:"__union_with_string",value:function(e,t){return"string"==typeof e?this.__string(t):this.__union(e,t)}},{key:"__indirect",value:function(e){return e+this.readInt32(e)}},{key:"__vector",value:function(e){return e+this.readInt32(e)+4}},{key:"__vector_len",value:function(e){return this.readInt32(e+this.readInt32(e))}},{key:"__has_identifier",value:function(e){if(4!=e.length)throw new Error("FlatBuffers: file identifier must be length 4");for(var t=0;t<4;t++)if(e.charCodeAt(t)!=this.readInt8(this.position()+4+t))return!1;return!0}},{key:"createScalarList",value:function(e,t){for(var r=[],n=0;n<t;++n){var o=e(n);null!==o&&r.push(o)}return r}},{key:"createObjList",value:function(e,t){for(var r=[],n=0;n<t;++n){var o=e(n);null!==o&&r.push(o.unpack())}return r}}],n=[{key:"allocate",value:function(t){return new e(new Uint8Array(t))}}],r&&Qh(t.prototype,r),n&&Qh(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function zh(e){"@babel/helpers - typeof";return(zh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hh(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,qh(n.key),n)}}function qh(e){var t=function(e,t){if("object"!=zh(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=zh(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==zh(t)?t:t+""}var Vh,Kh=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.bb=null,this.bb_pos=0}return t=e,n=[{key:"getRootAsGeometry",value:function(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}},{key:"getSizePrefixedRootAsGeometry",value:function(t,r){return t.setPosition(t.position()+4),(r||new e).__init(t.readInt32(t.position())+t.position(),t)}},{key:"startGeometry",value:function(e){e.startObject(8)}},{key:"addEnds",value:function(e,t){e.addFieldOffset(0,t,0)}},{key:"createEndsVector",value:function(e,t){e.startVector(4,t.length,4);for(var r=t.length-1;r>=0;r--)e.addInt32(t[r]);return e.endVector()}},{key:"startEndsVector",value:function(e,t){e.startVector(4,t,4)}},{key:"addXy",value:function(e,t){e.addFieldOffset(1,t,0)}},{key:"createXyVector",value:function(e,t){e.startVector(8,t.length,8);for(var r=t.length-1;r>=0;r--)e.addFloat64(t[r]);return e.endVector()}},{key:"startXyVector",value:function(e,t){e.startVector(8,t,8)}},{key:"addZ",value:function(e,t){e.addFieldOffset(2,t,0)}},{key:"createZVector",value:function(e,t){e.startVector(8,t.length,8);for(var r=t.length-1;r>=0;r--)e.addFloat64(t[r]);return e.endVector()}},{key:"startZVector",value:function(e,t){e.startVector(8,t,8)}},{key:"addM",value:function(e,t){e.addFieldOffset(3,t,0)}},{key:"createMVector",value:function(e,t){e.startVector(8,t.length,8);for(var r=t.length-1;r>=0;r--)e.addFloat64(t[r]);return e.endVector()}},{key:"startMVector",value:function(e,t){e.startVector(8,t,8)}},{key:"addT",value:function(e,t){e.addFieldOffset(4,t,0)}},{key:"createTVector",value:function(e,t){e.startVector(8,t.length,8);for(var r=t.length-1;r>=0;r--)e.addFloat64(t[r]);return e.endVector()}},{key:"startTVector",value:function(e,t){e.startVector(8,t,8)}},{key:"addTm",value:function(e,t){e.addFieldOffset(5,t,0)}},{key:"createTmVector",value:function(e,t){e.startVector(8,t.length,8);for(var r=t.length-1;r>=0;r--)e.addInt64(t[r]);return e.endVector()}},{key:"startTmVector",value:function(e,t){e.startVector(8,t,8)}},{key:"addType",value:function(e,t){e.addFieldInt8(6,t,Ph.Unknown)}},{key:"addParts",value:function(e,t){e.addFieldOffset(7,t,0)}},{key:"createPartsVector",value:function(e,t){e.startVector(4,t.length,4);for(var r=t.length-1;r>=0;r--)e.addOffset(t[r]);return e.endVector()}},{key:"startPartsVector",value:function(e,t){e.startVector(4,t,4)}},{key:"endGeometry",value:function(e){return e.endObject()}},{key:"createGeometry",value:function(t,r,n,o,i,a,s,u,l){return e.startGeometry(t),e.addEnds(t,r),e.addXy(t,n),e.addZ(t,o),e.addM(t,i),e.addT(t,a),e.addTm(t,s),e.addType(t,u),e.addParts(t,l),e.endGeometry(t)}}],(r=[{key:"__init",value:function(e,t){return this.bb_pos=e,this.bb=t,this}},{key:"ends",value:function(e){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readUint32(this.bb.__vector(this.bb_pos+t)+4*e):0}},{key:"endsLength",value:function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__vector_len(this.bb_pos+e):0}},{key:"endsArray",value:function(){var e=this.bb.__offset(this.bb_pos,4);return e?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}},{key:"xy",value:function(e){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readFloat64(this.bb.__vector(this.bb_pos+t)+8*e):0}},{key:"xyLength",value:function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}},{key:"xyArray",value:function(){var e=this.bb.__offset(this.bb_pos,6);return e?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}},{key:"z",value:function(e){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readFloat64(this.bb.__vector(this.bb_pos+t)+8*e):0}},{key:"zLength",value:function(){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}},{key:"zArray",value:function(){var e=this.bb.__offset(this.bb_pos,8);return e?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}},{key:"m",value:function(e){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readFloat64(this.bb.__vector(this.bb_pos+t)+8*e):0}},{key:"mLength",value:function(){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}},{key:"mArray",value:function(){var e=this.bb.__offset(this.bb_pos,10);return e?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}},{key:"t",value:function(e){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readFloat64(this.bb.__vector(this.bb_pos+t)+8*e):0}},{key:"tLength",value:function(){var e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}},{key:"tArray",value:function(){var e=this.bb.__offset(this.bb_pos,12);return e?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}},{key:"tm",value:function(e){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readUint64(this.bb.__vector(this.bb_pos+t)+8*e):BigInt(0)}},{key:"tmLength",value:function(){var e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__vector_len(this.bb_pos+e):0}},{key:"type",value:function(){var e=this.bb.__offset(this.bb_pos,16);return e?this.bb.readUint8(this.bb_pos+e):Ph.Unknown}},{key:"parts",value:function(t,r){var n=this.bb.__offset(this.bb_pos,18);return n?(r||new e).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}},{key:"partsLength",value:function(){var e=this.bb.__offset(this.bb_pos,18);return e?this.bb.__vector_len(this.bb_pos+e):0}}])&&Hh(t.prototype,r),n&&Hh(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function Yh(e,t){for(var r=[],n=0;n<e.length;n+=2){var o=[e[n],e[n+1]];t&&o.push(t[n>>1]),r.push(o)}return r}function Jh(e,t,r){if(!r||0===r.length)return[Yh(e,t)];var n,o=0,i=Array.from(r).map(function(t){return e.slice(o,o=t<<1)});return t&&(o=0,n=Array.from(r).map(function(e){return t.slice(o,o=e)})),i.map(function(e,t){return Yh(e,n?n[t]:void 0)})}function Wh(e,t){var r=t;if(r===Ph.Unknown&&(r=e.type()),r===Ph.GeometryCollection){for(var n=[],o=0;o<e.partsLength();o++){var i=e.parts(o),a=i.type();n.push(Wh(i,a))}return{type:Ph[r],geometries:n}}if(r===Ph.MultiPolygon){for(var s=[],u=0;u<e.partsLength();u++)s.push(Wh(e.parts(u),Ph.Polygon));return{type:Ph[r],coordinates:s.map(function(e){return e.coordinates})}}var l=function(e,t){var r=e.xyArray(),n=e.zArray();switch(t){case Ph.Point:var o=Array.from(r);return n&&o.push(n[0]),o;case Ph.MultiPoint:case Ph.LineString:return Yh(r,n);case Ph.MultiLineString:case Ph.Polygon:return Jh(r,n,e.endsArray())}}(e,r);return{type:Ph[r],coordinates:l}}function Xh(e){"@babel/helpers - typeof";return(Xh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zh(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,$h(n.key),n)}}function $h(e){var t=function(e,t){if("object"!=Xh(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Xh(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Xh(t)?t:t+""}!function(e){e[e.Byte=0]="Byte",e[e.UByte=1]="UByte",e[e.Bool=2]="Bool",e[e.Short=3]="Short",e[e.UShort=4]="UShort",e[e.Int=5]="Int",e[e.UInt=6]="UInt",e[e.Long=7]="Long",e[e.ULong=8]="ULong",e[e.Float=9]="Float",e[e.Double=10]="Double",e[e.String=11]="String",e[e.Json=12]="Json",e[e.DateTime=13]="DateTime",e[e.Binary=14]="Binary"}(Vh||(Vh={}));var ey=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.bb=null,this.bb_pos=0}return t=e,n=[{key:"getRootAsColumn",value:function(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}},{key:"getSizePrefixedRootAsColumn",value:function(t,r){return t.setPosition(t.position()+4),(r||new e).__init(t.readInt32(t.position())+t.position(),t)}},{key:"startColumn",value:function(e){e.startObject(11)}},{key:"addName",value:function(e,t){e.addFieldOffset(0,t,0)}},{key:"addType",value:function(e,t){e.addFieldInt8(1,t,Vh.Byte)}},{key:"addTitle",value:function(e,t){e.addFieldOffset(2,t,0)}},{key:"addDescription",value:function(e,t){e.addFieldOffset(3,t,0)}},{key:"addWidth",value:function(e,t){e.addFieldInt32(4,t,-1)}},{key:"addPrecision",value:function(e,t){e.addFieldInt32(5,t,-1)}},{key:"addScale",value:function(e,t){e.addFieldInt32(6,t,-1)}},{key:"addNullable",value:function(e,t){e.addFieldInt8(7,+t,1)}},{key:"addUnique",value:function(e,t){e.addFieldInt8(8,+t,0)}},{key:"addPrimaryKey",value:function(e,t){e.addFieldInt8(9,+t,0)}},{key:"addMetadata",value:function(e,t){e.addFieldOffset(10,t,0)}},{key:"endColumn",value:function(e){var t=e.endObject();return e.requiredField(t,4),t}},{key:"createColumn",value:function(t,r,n,o,i,a,s,u,l,c,f,p){return e.startColumn(t),e.addName(t,r),e.addType(t,n),e.addTitle(t,o),e.addDescription(t,i),e.addWidth(t,a),e.addPrecision(t,s),e.addScale(t,u),e.addNullable(t,l),e.addUnique(t,c),e.addPrimaryKey(t,f),e.addMetadata(t,p),e.endColumn(t)}}],(r=[{key:"__init",value:function(e,t){return this.bb_pos=e,this.bb=t,this}},{key:"name",value:function(e){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}},{key:"type",value:function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb_pos+e):Vh.Byte}},{key:"title",value:function(e){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__string(this.bb_pos+t,e):null}},{key:"description",value:function(e){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__string(this.bb_pos+t,e):null}},{key:"width",value:function(){var e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readInt32(this.bb_pos+e):-1}},{key:"precision",value:function(){var e=this.bb.__offset(this.bb_pos,14);return e?this.bb.readInt32(this.bb_pos+e):-1}},{key:"scale",value:function(){var e=this.bb.__offset(this.bb_pos,16);return e?this.bb.readInt32(this.bb_pos+e):-1}},{key:"nullable",value:function(){var e=this.bb.__offset(this.bb_pos,18);return!e||!!this.bb.readInt8(this.bb_pos+e)}},{key:"unique",value:function(){var e=this.bb.__offset(this.bb_pos,20);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}},{key:"primaryKey",value:function(){var e=this.bb.__offset(this.bb_pos,22);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}},{key:"metadata",value:function(e){var t=this.bb.__offset(this.bb_pos,24);return t?this.bb.__string(this.bb_pos+t,e):null}}])&&Zh(t.prototype,r),n&&Zh(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function ty(e){"@babel/helpers - typeof";return(ty="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ry(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ny(n.key),n)}}function ny(e){var t=function(e,t){if("object"!=ty(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ty(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ty(t)?t:t+""}var oy=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.bb=null,this.bb_pos=0}return t=e,n=[{key:"getRootAsFeature",value:function(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}},{key:"getSizePrefixedRootAsFeature",value:function(t,r){return t.setPosition(t.position()+4),(r||new e).__init(t.readInt32(t.position())+t.position(),t)}},{key:"startFeature",value:function(e){e.startObject(3)}},{key:"addGeometry",value:function(e,t){e.addFieldOffset(0,t,0)}},{key:"addProperties",value:function(e,t){e.addFieldOffset(1,t,0)}},{key:"createPropertiesVector",value:function(e,t){e.startVector(1,t.length,1);for(var r=t.length-1;r>=0;r--)e.addInt8(t[r]);return e.endVector()}},{key:"startPropertiesVector",value:function(e,t){e.startVector(1,t,1)}},{key:"addColumns",value:function(e,t){e.addFieldOffset(2,t,0)}},{key:"createColumnsVector",value:function(e,t){e.startVector(4,t.length,4);for(var r=t.length-1;r>=0;r--)e.addOffset(t[r]);return e.endVector()}},{key:"startColumnsVector",value:function(e,t){e.startVector(4,t,4)}},{key:"endFeature",value:function(e){return e.endObject()}},{key:"finishFeatureBuffer",value:function(e,t){e.finish(t)}},{key:"finishSizePrefixedFeatureBuffer",value:function(e,t){e.finish(t,void 0,!0)}},{key:"createFeature",value:function(t,r,n,o){return e.startFeature(t),e.addGeometry(t,r),e.addProperties(t,n),e.addColumns(t,o),e.endFeature(t)}}],(r=[{key:"__init",value:function(e,t){return this.bb_pos=e,this.bb=t,this}},{key:"geometry",value:function(e){var t=this.bb.__offset(this.bb_pos,4);return t?(e||new Kh).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}},{key:"properties",value:function(e){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb.__vector(this.bb_pos+t)+e):0}},{key:"propertiesLength",value:function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}},{key:"propertiesArray",value:function(){var e=this.bb.__offset(this.bb_pos,6);return e?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}},{key:"columns",value:function(e,t){var r=this.bb.__offset(this.bb_pos,8);return r?(t||new ey).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null}},{key:"columnsLength",value:function(){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}}])&&ry(t.prototype,r),n&&ry(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}(),iy=(new TextEncoder,new TextDecoder);function ay(e,t){var r={};if(!t||0===t.length)return r;var n=e.propertiesArray();if(!n)return r;for(var o=new DataView(n.buffer,n.byteOffset),i=e.propertiesLength(),a=0;a<i;){var s=o.getUint16(a,!0);a+=2;var u=t[s],l=u.name;switch(u.type){case Vh.Bool:r[l]=!!o.getUint8(a),a+=1;break;case Vh.Byte:r[l]=o.getInt8(a),a+=1;break;case Vh.UByte:r[l]=o.getUint8(a),a+=1;break;case Vh.Short:r[l]=o.getInt16(a,!0),a+=2;break;case Vh.UShort:r[l]=o.getUint16(a,!0),a+=2;break;case Vh.Int:r[l]=o.getInt32(a,!0),a+=4;break;case Vh.UInt:r[l]=o.getUint32(a,!0),a+=4;break;case Vh.Long:r[l]=Number(o.getBigInt64(a,!0)),a+=8;break;case Vh.ULong:r[l]=Number(o.getBigUint64(a,!0)),a+=8;break;case Vh.Float:r[l]=o.getFloat32(a,!0),a+=4;break;case Vh.Double:r[l]=o.getFloat64(a,!0),a+=8;break;case Vh.DateTime:case Vh.String:var c=o.getUint32(a,!0);a+=4,r[l]=iy.decode(n.subarray(a,a+c)),a+=c;break;case Vh.Json:var f=o.getUint32(a,!0);a+=4;var p=iy.decode(n.subarray(a,a+f));r[l]=JSON.parse(p),a+=f;break;default:throw new Error("Unknown type "+u.type)}}return r}function sy(e,t){var r=t.columns;return{type:"Feature",geometry:Wh(e.geometry(),t.geometryType),properties:ay(e,r)}}var uy=new Uint8Array(0);function ly(e){this._source=e,this._array=uy,this._index=0}function cy(e){"@babel/helpers - typeof";return(cy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fy(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,py(n.key),n)}}function py(e){var t=function(e,t){if("object"!=cy(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=cy(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==cy(t)?t:t+""}ly.prototype.read=function(){var e=this,t=e._array.subarray(e._index);return e._source.read().then(function(r){return e._array=uy,e._index=0,r.done?t.length>0?{done:!1,value:t}:{done:!0,value:void 0}:{done:!1,value:function(e,t){if(!e.length)return t;if(!t.length)return e;var r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r}(t,r.value)}})},ly.prototype.slice=function(e){if((e|=0)<0)throw new Error("invalid length");var t=this,r=this._array.length-this._index;if(this._index+e<=this._array.length)return Promise.resolve(this._array.subarray(this._index,this._index+=e));var n=new Uint8Array(e);return n.set(this._array.subarray(this._index)),function o(){return t._source.read().then(function(i){return i.done?(t._array=uy,t._index=0,r>0?n.subarray(0,r):null):r+i.value.length>=e?(t._array=i.value,t._index=e-r,n.set(i.value.subarray(0,e-r),r),n):(n.set(i.value,r),r+=i.value.length,o())})}()},ly.prototype.cancel=function(){return this._source.cancel()};var hy=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.bb=null,this.bb_pos=0}return t=e,n=[{key:"getRootAsCrs",value:function(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}},{key:"getSizePrefixedRootAsCrs",value:function(t,r){return t.setPosition(t.position()+4),(r||new e).__init(t.readInt32(t.position())+t.position(),t)}},{key:"startCrs",value:function(e){e.startObject(6)}},{key:"addOrg",value:function(e,t){e.addFieldOffset(0,t,0)}},{key:"addCode",value:function(e,t){e.addFieldInt32(1,t,0)}},{key:"addName",value:function(e,t){e.addFieldOffset(2,t,0)}},{key:"addDescription",value:function(e,t){e.addFieldOffset(3,t,0)}},{key:"addWkt",value:function(e,t){e.addFieldOffset(4,t,0)}},{key:"addCodeString",value:function(e,t){e.addFieldOffset(5,t,0)}},{key:"endCrs",value:function(e){return e.endObject()}},{key:"createCrs",value:function(t,r,n,o,i,a,s){return e.startCrs(t),e.addOrg(t,r),e.addCode(t,n),e.addName(t,o),e.addDescription(t,i),e.addWkt(t,a),e.addCodeString(t,s),e.endCrs(t)}}],(r=[{key:"__init",value:function(e,t){return this.bb_pos=e,this.bb=t,this}},{key:"org",value:function(e){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}},{key:"code",value:function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):0}},{key:"name",value:function(e){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__string(this.bb_pos+t,e):null}},{key:"description",value:function(e){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__string(this.bb_pos+t,e):null}},{key:"wkt",value:function(e){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__string(this.bb_pos+t,e):null}},{key:"codeString",value:function(e){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__string(this.bb_pos+t,e):null}}])&&fy(t.prototype,r),n&&fy(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function yy(e){"@babel/helpers - typeof";return(yy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dy(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,my(n.key),n)}}function my(e){var t=function(e,t){if("object"!=yy(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=yy(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==yy(t)?t:t+""}var gy=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.bb=null,this.bb_pos=0}return t=e,n=[{key:"getRootAsHeader",value:function(t,r){return(r||new e).__init(t.readInt32(t.position())+t.position(),t)}},{key:"getSizePrefixedRootAsHeader",value:function(t,r){return t.setPosition(t.position()+4),(r||new e).__init(t.readInt32(t.position())+t.position(),t)}},{key:"startHeader",value:function(e){e.startObject(14)}},{key:"addName",value:function(e,t){e.addFieldOffset(0,t,0)}},{key:"addEnvelope",value:function(e,t){e.addFieldOffset(1,t,0)}},{key:"createEnvelopeVector",value:function(e,t){e.startVector(8,t.length,8);for(var r=t.length-1;r>=0;r--)e.addFloat64(t[r]);return e.endVector()}},{key:"startEnvelopeVector",value:function(e,t){e.startVector(8,t,8)}},{key:"addGeometryType",value:function(e,t){e.addFieldInt8(2,t,Ph.Unknown)}},{key:"addHasZ",value:function(e,t){e.addFieldInt8(3,+t,0)}},{key:"addHasM",value:function(e,t){e.addFieldInt8(4,+t,0)}},{key:"addHasT",value:function(e,t){e.addFieldInt8(5,+t,0)}},{key:"addHasTm",value:function(e,t){e.addFieldInt8(6,+t,0)}},{key:"addColumns",value:function(e,t){e.addFieldOffset(7,t,0)}},{key:"createColumnsVector",value:function(e,t){e.startVector(4,t.length,4);for(var r=t.length-1;r>=0;r--)e.addOffset(t[r]);return e.endVector()}},{key:"startColumnsVector",value:function(e,t){e.startVector(4,t,4)}},{key:"addFeaturesCount",value:function(e,t){e.addFieldInt64(8,t,BigInt("0"))}},{key:"addIndexNodeSize",value:function(e,t){e.addFieldInt16(9,t,16)}},{key:"addCrs",value:function(e,t){e.addFieldOffset(10,t,0)}},{key:"addTitle",value:function(e,t){e.addFieldOffset(11,t,0)}},{key:"addDescription",value:function(e,t){e.addFieldOffset(12,t,0)}},{key:"addMetadata",value:function(e,t){e.addFieldOffset(13,t,0)}},{key:"endHeader",value:function(e){return e.endObject()}},{key:"finishHeaderBuffer",value:function(e,t){e.finish(t)}},{key:"finishSizePrefixedHeaderBuffer",value:function(e,t){e.finish(t,void 0,!0)}}],(r=[{key:"__init",value:function(e,t){return this.bb_pos=e,this.bb=t,this}},{key:"name",value:function(e){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}},{key:"envelope",value:function(e){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readFloat64(this.bb.__vector(this.bb_pos+t)+8*e):0}},{key:"envelopeLength",value:function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}},{key:"envelopeArray",value:function(){var e=this.bb.__offset(this.bb_pos,6);return e?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}},{key:"geometryType",value:function(){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint8(this.bb_pos+e):Ph.Unknown}},{key:"hasZ",value:function(){var e=this.bb.__offset(this.bb_pos,10);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}},{key:"hasM",value:function(){var e=this.bb.__offset(this.bb_pos,12);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}},{key:"hasT",value:function(){var e=this.bb.__offset(this.bb_pos,14);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}},{key:"hasTm",value:function(){var e=this.bb.__offset(this.bb_pos,16);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}},{key:"columns",value:function(e,t){var r=this.bb.__offset(this.bb_pos,18);return r?(t||new ey).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null}},{key:"columnsLength",value:function(){var e=this.bb.__offset(this.bb_pos,18);return e?this.bb.__vector_len(this.bb_pos+e):0}},{key:"featuresCount",value:function(){var e=this.bb.__offset(this.bb_pos,20);return e?this.bb.readUint64(this.bb_pos+e):BigInt("0")}},{key:"indexNodeSize",value:function(){var e=this.bb.__offset(this.bb_pos,22);return e?this.bb.readUint16(this.bb_pos+e):16}},{key:"crs",value:function(e){var t=this.bb.__offset(this.bb_pos,24);return t?(e||new hy).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}},{key:"title",value:function(e){var t=this.bb.__offset(this.bb_pos,26);return t?this.bb.__string(this.bb_pos+t,e):null}},{key:"description",value:function(e){var t=this.bb.__offset(this.bb_pos,28);return t?this.bb.__string(this.bb_pos+t,e):null}},{key:"metadata",value:function(e){var t=this.bb.__offset(this.bb_pos,30);return t?this.bb.__string(this.bb_pos+t,e):null}}])&&dy(t.prototype,r),n&&dy(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function vy(e){for(var t=gy.getRootAsHeader(e),r=t.featuresCount(),n=t.indexNodeSize(),o=[],i=0;i<t.columnsLength();i++){var a=t.columns(i);if(!a)throw new Error("Column unexpectedly missing");if(!a.name())throw new Error("Column name unexpectedly missing");o.push({name:a.name(),type:a.type(),title:a.title(),description:a.description(),width:a.width(),precision:a.precision(),scale:a.scale(),nullable:a.nullable(),unique:a.unique(),primary_key:a.primaryKey()})}var s=t.crs(),u=s?{org:s.org(),code:s.code(),name:s.name(),description:s.description(),wkt:s.wkt(),code_string:s.codeString()}:null;return{geometryType:t.geometryType(),columns:o,envelope:null,featuresCount:Number(r),indexNodeSize:n,crs:u,title:t.title(),description:t.description(),metadata:t.metadata()}}var by=function(e,t){return(by=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function Ay(e,t,r,n){return new(r||(r=Promise))(function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,s)}u((n=n.apply(e,t||[])).next())})}function wy(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function Sy(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Cy(e){return this instanceof Cy?(this.v=e,this):new Cy(e)}function Ey(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,o=r.apply(e,t||[]),i=[];return n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n;function a(e){o[e]&&(n[e]=function(t){return new Promise(function(r,n){i.push([e,t,r,n])>1||s(e,t)})})}function s(e,t){try{(r=o[e](t)).value instanceof Cy?Promise.resolve(r.value.v).then(u,l):c(i[0][2],r)}catch(e){c(i[0][3],e)}var r}function u(e){s("next",e)}function l(e){s("throw",e)}function c(e,t){e(t),i.shift(),i.length&&s(i[0][0],i[0][1])}}var _y=function(e){function t(t){var r=e.call(this,t)||this;return Object.defineProperty(r,"name",{value:"RepeaterOverflowError",enumerable:!1}),"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf(r,r.constructor.prototype):r.__proto__=r.constructor.prototype,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(r,r.constructor),r}return function(e,t){function r(){this.constructor=e}by(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(t,e),t}(Error);(function(){function e(e){if(e<0)throw new RangeError("Capacity may not be less than 0");this._c=e,this._q=[]}Object.defineProperty(e.prototype,"empty",{get:function(){return 0===this._q.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"full",{get:function(){return this._q.length>=this._c},enumerable:!1,configurable:!0}),e.prototype.add=function(e){if(this.full)throw new Error("Buffer full");this._q.push(e)},e.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()}})(),function(){function e(e){if(e<1)throw new RangeError("Capacity may not be less than 1");this._c=e,this._q=[]}Object.defineProperty(e.prototype,"empty",{get:function(){return 0===this._q.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"full",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.add=function(e){for(;this._q.length>=this._c;)this._q.shift();this._q.push(e)},e.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()}}(),function(){function e(e){if(e<1)throw new RangeError("Capacity may not be less than 1");this._c=e,this._q=[]}Object.defineProperty(e.prototype,"empty",{get:function(){return 0===this._q.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"full",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.add=function(e){this._q.length<this._c&&this._q.push(e)},e.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()}}();function Iy(e){null!=e&&"function"==typeof e.then&&e.then(My,My)}var Oy=0,xy=1,Py=2,ky=3,Ty=4,jy=1024,My=function(){};function By(e){var t=e.err,r=Promise.resolve(e.execution).then(function(e){if(null!=t)throw t;return e});return e.err=void 0,e.execution=r.then(function(){},function(){}),void 0===e.pending?r:e.pending.then(function(){return r})}function Ny(e,t){var r=e.state>=ky;return Promise.resolve(t).then(function(t){return!r&&e.state>=Ty?By(e).then(function(e){return{value:e,done:!0}}):{value:t,done:r}})}function Ry(e,t){var r,n;if(!(e.state>=Py))if(e.state=Py,e.onnext(),e.onstop(),null==e.err&&(e.err=t),0!==e.pushes.length||void 0!==e.buffer&&!e.buffer.empty)try{for(var o=Sy(e.pushes),i=o.next();!i.done;i=o.next()){i.value.resolve()}}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}else Ly(e)}function Ly(e){var t,r;if(!(e.state>=ky)){e.state<Py&&Ry(e),e.state=ky,e.buffer=void 0;try{for(var n=Sy(e.nexts),o=n.next();!o.done;o=n.next()){var i=o.value,a=void 0===e.pending?By(e):e.pending.then(function(){return By(e)});i.resolve(Ny(e,a))}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}e.pushes=[],e.nexts=[]}}function Dy(e){e.state>=Ty||(e.state<ky&&Ly(e),e.state=Ty)}function Fy(e){if(!(e.state>=xy)){e.state=xy;var t=function(e,t){if(Iy(t),e.pushes.length>=jy)throw new _y("No more than "+jy+" pending calls to push are allowed on a single repeater.");if(e.state>=Py)return Promise.resolve(void 0);var r,n=void 0===e.pending?Promise.resolve(t):e.pending.then(function(){return t});n=n.catch(function(t){e.state<Py&&(e.err=t),Dy(e)}),e.nexts.length?(e.nexts.shift().resolve(Ny(e,n)),r=e.nexts.length?Promise.resolve(e.nexts[0].value):new Promise(function(t){return e.onnext=t})):void 0===e.buffer||e.buffer.full?r=new Promise(function(t){return e.pushes.push({resolve:t,value:n})}):(e.buffer.add(n),r=Promise.resolve(void 0));var o=!0,i={},a=r.catch(function(e){if(o)throw e});return i.then=function(e,t){return o=!1,Promise.prototype.then.call(r,e,t)},i.catch=function(e){return o=!1,Promise.prototype.catch.call(r,e)},i.finally=r.finally.bind(r),e.pending=n.then(function(){return a}).catch(function(t){e.err=t,Dy(e)}),i}.bind(null,e),r=function(e){var t=Ry.bind(null,e),r=new Promise(function(t){return e.onstop=t});return t.then=r.then.bind(r),t.catch=r.catch.bind(r),t.finally=r.finally.bind(r),t}(e);e.execution=new Promise(function(n){return n(e.executor(t,r))}),e.execution.catch(function(){return Ry(e)})}}var Qy=new WeakMap,Gy=function(){function e(e,t){Qy.set(this,{executor:e,buffer:t,err:void 0,state:Oy,pushes:[],nexts:[],pending:void 0,execution:void 0,onnext:My,onstop:My})}return e.prototype.next=function(e){Iy(e);var t=Qy.get(this);if(void 0===t)throw new Error("WeakMap error");if(t.nexts.length>=jy)throw new _y("No more than "+jy+" pending calls to next are allowed on a single repeater.");if(t.state<=Oy&&Fy(t),t.onnext(e),void 0!==t.buffer&&!t.buffer.empty){var r=Ny(t,t.buffer.remove());if(t.pushes.length){var n=t.pushes.shift();t.buffer.add(n.value),t.onnext=n.resolve}return r}if(t.pushes.length){var o=t.pushes.shift();return t.onnext=o.resolve,Ny(t,o.value)}return t.state>=Py?(Ly(t),Ny(t,By(t))):new Promise(function(r){return t.nexts.push({resolve:r,value:e})})},e.prototype.return=function(e){Iy(e);var t=Qy.get(this);if(void 0===t)throw new Error("WeakMap error");return Ly(t),t.execution=Promise.resolve(t.execution).then(function(){return e}),Ny(t,By(t))},e.prototype.throw=function(e){var t=Qy.get(this);if(void 0===t)throw new Error("WeakMap error");return t.state<=Oy||t.state>=Py||void 0!==t.buffer&&!t.buffer.empty?(Ly(t),null==t.err&&(t.err=e),Ny(t,By(t))):this.next(Promise.reject(e))},e.prototype[Symbol.asyncIterator]=function(){return this},e.race=zy,e.merge=Hy,e.zip=qy,e.latest=Vy,e}();function Uy(e,t){var r,n,o=[],i=function(e){null!=e&&"function"==typeof e[Symbol.asyncIterator]?o.push(e[Symbol.asyncIterator]()):null!=e&&"function"==typeof e[Symbol.iterator]?o.push(e[Symbol.iterator]()):o.push(function(){return Ey(this,arguments,function(){return wy(this,function(r){switch(r.label){case 0:return t.yieldValues?[4,Cy(e)]:[3,3];case 1:return[4,r.sent()];case 2:r.sent(),r.label=3;case 3:return t.returnValues?[4,Cy(e)]:[3,5];case 4:return[2,r.sent()];case 5:return[2]}})})}())};try{for(var a=Sy(e),s=a.next();!s.done;s=a.next()){i(s.value)}}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return o}function zy(e){var t=this,r=Uy(e,{returnValues:!0});return new Gy(function(e,n){return Ay(t,void 0,void 0,function(){var t,o,i,a,s,u;return wy(this,function(l){switch(l.label){case 0:if(!r.length)return n(),[2];o=!1,n.then(function(){t(),o=!0}),l.label=1;case 1:l.trys.push([1,,5,7]),a=void 0,s=0,u=function(){var o,u,l,c,f,p;return wy(this,function(h){switch(h.label){case 0:o=s;try{for(f=void 0,u=Sy(r),l=u.next();!l.done;l=u.next())c=l.value,Promise.resolve(c.next()).then(function(e){e.done?(n(),void 0===i&&(i=e)):s===o&&(s++,t(e))},function(e){return n(e)})}catch(e){f={error:e}}finally{try{l&&!l.done&&(p=u.return)&&p.call(u)}finally{if(f)throw f.error}}return[4,new Promise(function(e){return t=e})];case 1:return void 0===(a=h.sent())?[3,3]:[4,e(a.value)];case 2:h.sent(),h.label=3;case 3:return[2]}})},l.label=2;case 2:return o?[3,4]:[5,u()];case 3:return l.sent(),[3,2];case 4:return[2,i&&i.value];case 5:return n(),[4,Promise.race(r.map(function(e){return e.return&&e.return()}))];case 6:return l.sent(),[7];case 7:return[2]}})})})}function Hy(e){var t=this,r=Uy(e,{yieldValues:!0});return new Gy(function(e,n){return Ay(t,void 0,void 0,function(){var t,o,i,a=this;return wy(this,function(s){switch(s.label){case 0:if(!r.length)return n(),[2];t=[],o=!1,n.then(function(){var e,r;o=!0;try{for(var n=Sy(t),i=n.next();!i.done;i=n.next()){(0,i.value)()}}catch(t){e={error:t}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}}),s.label=1;case 1:return s.trys.push([1,,3,4]),[4,Promise.all(r.map(function(r,s){return Ay(a,void 0,void 0,function(){var a;return wy(this,function(u){switch(u.label){case 0:u.trys.push([0,,6,9]),u.label=1;case 1:return o?[3,5]:(Promise.resolve(r.next()).then(function(e){return t[s](e)},function(e){return n(e)}),[4,new Promise(function(e){t[s]=e})]);case 2:return void 0===(a=u.sent())?[3,4]:a.done?(i=a,[2]):[4,e(a.value)];case 3:u.sent(),u.label=4;case 4:return[3,1];case 5:return[3,9];case 6:return r.return?[4,r.return()]:[3,8];case 7:u.sent(),u.label=8;case 8:return[7];case 9:return[2]}})})}))];case 2:return s.sent(),[2,i&&i.value];case 3:return n(),[7];case 4:return[2]}})})})}function qy(e){var t=this,r=Uy(e,{returnValues:!0});return new Gy(function(e,n){return Ay(t,void 0,void 0,function(){var t,o,i,a;return wy(this,function(s){switch(s.label){case 0:if(!r.length)return n(),[2,[]];o=!1,n.then(function(){t(),o=!0}),s.label=1;case 1:s.trys.push([1,,6,8]),s.label=2;case 2:return o?[3,5]:(Promise.all(r.map(function(e){return e.next()})).then(function(e){return t(e)},function(e){return n(e)}),[4,new Promise(function(e){return t=e})]);case 3:return void 0===(i=s.sent())?[2]:(a=i.map(function(e){return e.value}),i.some(function(e){return e.done})?[2,a]:[4,e(a)]);case 4:return s.sent(),[3,2];case 5:return[3,8];case 6:return n(),[4,Promise.all(r.map(function(e){return e.return&&e.return()}))];case 7:return s.sent(),[7];case 8:return[2]}})})})}function Vy(e){var t=this,r=Uy(e,{yieldValues:!0,returnValues:!0});return new Gy(function(e,n){return Ay(t,void 0,void 0,function(){var t,o,i,a,s,u=this;return wy(this,function(l){switch(l.label){case 0:if(!r.length)return n(),[2,[]];o=[],i=!1,n.then(function(){var e,r;t();try{for(var n=Sy(o),a=n.next();!a.done;a=n.next()){(0,a.value)()}}catch(t){e={error:t}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}i=!0}),l.label=1;case 1:return l.trys.push([1,,5,7]),Promise.all(r.map(function(e){return e.next()})).then(function(e){return t(e)},function(e){return n(e)}),[4,new Promise(function(e){return t=e})];case 2:return void 0===(a=l.sent())?[2]:(s=a.map(function(e){return e.value}),a.every(function(e){return e.done})?[2,s]:[4,e(s.slice())]);case 3:return l.sent(),[4,Promise.all(r.map(function(t,r){return Ay(u,void 0,void 0,function(){var u;return wy(this,function(l){switch(l.label){case 0:if(a[r].done)return[2,a[r].value];l.label=1;case 1:return i?[3,4]:(Promise.resolve(t.next()).then(function(e){return o[r](e)},function(e){return n(e)}),[4,new Promise(function(e){return o[r]=e})]);case 2:return void 0===(u=l.sent())?[2,a[r].value]:u.done?[2,u.value]:(s[r]=u.value,[4,e(s.slice())]);case 3:return l.sent(),[3,1];case 4:return[2]}})})}))];case 4:return[2,l.sent()];case 5:return n(),[4,Promise.all(r.map(function(e){return e.return&&e.return()}))];case 6:return l.sent(),[7];case 7:return[2]}})})})}function Ky(e){"@babel/helpers - typeof";return(Ky="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yy(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Jy(n.key),n)}}function Jy(e){var t=function(e,t){if("object"!=Ky(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Ky(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ky(t)?t:t+""}var Wy=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._extraRequestThreshold=262144},(t=[{key:"extraRequestThreshold",value:function(){return this._extraRequestThreshold}},{key:"setExtraRequestThreshold",value:function(e){if(e<0)throw new Error("extraRequestThreshold cannot be negative");this._extraRequestThreshold=e}}])&&Yy(e.prototype,t),r&&Yy(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();Wy.global=new Wy;var Xy,Zy=Wy;function $y(e){"@babel/helpers - typeof";return($y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ed(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,td(n.key),n)}}function td(e){var t=function(e,t){if("object"!=$y(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=$y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==$y(t)?t:t+""}!function(e){e[e.Debug=0]="Debug",e[e.Info=1]="Info",e[e.Warn=2]="Warn",e[e.Error=3]="Error"}(Xy||(Xy={}));var rd=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},r=[{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.log.apply(this,[Xy.Debug].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.log.apply(this,[Xy.Info].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.log.apply(this,[Xy.Warn].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.log.apply(this,[Xy.Error].concat(t))}},{key:"log",value:function(e){if(!(this.logLevel>e)){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];switch(e){case Xy.Debug:var o;(o=console).debug.apply(o,r);break;case Xy.Info:var i;(i=console).info.apply(i,r);break;case Xy.Warn:var a;(a=console).warn.apply(a,r);break;case Xy.Error:var s;(s=console).error.apply(s,r)}}}}],(t=null)&&ed(e.prototype,t),r&&ed(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();rd.logLevel=Xy.Warn;var nd=rd;function od(e){"@babel/helpers - typeof";return(od="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function id(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],r=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}throw new TypeError(od(e)+" is not iterable")}function ad(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof s?n:s,l=Object.create(u.prototype);return sd(l,"_invoke",function(r,n,o){var i,s,u,l=0,c=o||[],f=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,r){return i=t,s=0,u=e,p.n=r,a}};function h(r,n){for(s=r,u=n,t=0;!f&&l&&!o&&t<c.length;t++){var o,i=c[t],h=p.p,y=i[2];r>3?(o=y===n)&&(u=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=r<2&&h<i[1])?(s=0,p.v=n,p.n=i[1]):h<y&&(o=r<3||i[0]>n||n>y)&&(i[4]=r,i[5]=n,p.n=y,s=0))}if(o||r>1)return a;throw f=!0,n}return function(o,c,y){if(l>1)throw TypeError("Generator is already running");for(f&&1===c&&h(c,y),s=c,u=y;(t=s<2?e:u)||!f;){i||(s?s<3?(s>1&&(p.n=-1),h(s,u)):p.n=u:p.v=u);try{if(l=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(f=p.n<0)?u:r.call(n,p))!==a)break}catch(t){i=e,s=1,u=t}finally{l=1}}return{value:t,done:f}}}(r,o,i),!0),l}var a={};function s(){}function u(){}function l(){}t=Object.getPrototypeOf;var c=[][n]?t(t([][n]())):(sd(t={},n,function(){return this}),t),f=l.prototype=s.prototype=Object.create(c);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,sd(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=l,sd(f,"constructor",l),sd(l,"constructor",u),u.displayName="GeneratorFunction",sd(l,o,"GeneratorFunction"),sd(f),sd(f,o,"Generator"),sd(f,n,function(){return this}),sd(f,"toString",function(){return"[object Generator]"}),(ad=function(){return{w:i,m:p}})()}function sd(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}(sd=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){sd(e,t,function(e){return this._invoke(t,r,e)})};i("next",0),i("throw",1),i("return",2)}})(e,t,r,n)}function ud(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],u=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ld(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ld(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ld(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function cd(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fd(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,pd(n.key),n)}}function pd(e){var t=function(e,t){if("object"!=od(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=od(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==od(t)?t:t+""}function hd(e){var t,r;function n(t,r){try{var i=e[t](r),a=i.value,s=a instanceof yd;Promise.resolve(s?a.v:a).then(function(r){if(s){var u="return"===t?"return":"next";if(!a.k||r.done)return n(u,r);r=e[u](r).value}o(i.done?"return":"normal",r)},function(e){n("throw",e)})}catch(e){o("throw",e)}}function o(e,o){switch(e){case"return":t.resolve({value:o,done:!0});break;case"throw":t.reject(o);break;default:t.resolve({value:o,done:!1})}(t=t.next)?n(t.key,t.arg):r=null}this._invoke=function(e,o){return new Promise(function(i,a){var s={key:e,arg:o,resolve:i,reject:a,next:null};r?r=r.next=s:(t=r=s,n(e,o))})},"function"!=typeof e.return&&(this.return=void 0)}function yd(e,t){this.v=e,this.k=t}hd.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},hd.prototype.next=function(e){return this._invoke("next",e)},hd.prototype.throw=function(e){return this._invoke("throw",e)},hd.prototype.return=function(e){return this._invoke("return",e)};var dd=40;function md(e,t){t=Math.min(Math.max(+t,2),65535);var r=e,n=r;do{n+=r=Math.ceil(r/t)}while(1!==r);return n*dd}function gd(e,t){if(t<2)throw new Error("Node size must be at least 2");if(0===e)throw new Error("Number of items must be greater than 0");var r=e,n=r,o=[r];do{n+=r=Math.ceil(r/t),o.push(r)}while(1!==r);var i=[];r=n;for(var a=0,s=o;a<s.length;a++){var u=s[a];i.push(r-u),r-=u}for(var l=[],c=0;c<o.length;c++)l.push([i[c],i[c]+o[c]]);return l}function vd(e,t,r,n){return bd.apply(this,arguments)}function bd(){var e;return e=ad().m(function e(t,r,n,o){var i,a,s,u,l,c,f,p,h,y;return ad().w(function(e){for(;;)switch(e.n){case 0:i=function(){return e=function e(t,r){cd(this,e),this._level=r,this.nodes=t},(t=[{key:"level",value:function(){return this._level}},{key:"startNodeIdx",value:function(){return this.nodes[0]}},{key:"endNodeIdx",value:function(){return this.nodes[1]}},{key:"extendEndNodeIdx",value:function(e){console.assert(e>this.nodes[1]),this.nodes[1]=e}},{key:"toString",value:function(){return"[NodeRange level: ".concat(this._level,", nodes: ").concat(this.nodes[0],"-").concat(this.nodes[1],"]")}}])&&fd(e.prototype,t),r&&fd(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}(),a=n.minX,s=n.minY,u=n.maxX,l=n.maxY,nd.info("tree items: ".concat(t,", nodeSize: ").concat(r)),c=gd(t,r),f=c[0][0],void 0,d=c.length-1,p=new i([0,1],d),h=[p],nd.debug("starting stream search with queue: ".concat(h,", numItems: ").concat(t,", nodeSize: ").concat(r,", levelBounds: ").concat(c)),y=ad().m(function e(){var n,p,y,d,m,g,v,b,A;return ad().w(function(e){for(;;)switch(e.n){case 0:return n=h.shift(),nd.debug("popped node: ".concat(n,", queueLength: ").concat(h.length)),p=n.startNodeIdx(),y=p>=f,d=function(){var e=ud(c[n.level()],2)[1],t=Math.min(n.endNodeIdx()+r,e);return y&&t<e?t+1:t}(),m=d-p,e.n=1,new yd(o(p*dd,m*dd),0);case 1:g=e.v,v=new DataView(g),b=ad().m(function e(r){var o,c,d,m,g,b,A,w,S,C;return ad().w(function(e){for(;;)switch(e.n){case 0:if(c=(o=r-p)*dd,!(u<v.getFloat64(c+0,!0))){e.n=1;break}return e.a(2,0);case 1:if(!(l<v.getFloat64(c+8,!0))){e.n=2;break}return e.a(2,0);case 2:if(!(a>v.getFloat64(c+16,!0))){e.n=3;break}return e.a(2,0);case 3:if(!(s>v.getFloat64(c+24,!0))){e.n=4;break}return e.a(2,0);case 4:if(d=v.getBigUint64(c+32,!0),!y){e.n=6;break}return m=d,g=function(){if(r<t-1){var e=(o+1)*dd;return v.getBigUint64(e+32,!0)-m}return null}(),b=r-f,e.n=5,[Number(m),b,Number(g)];case 5:return e.a(2,0);case 6:if(A=d,w=Zy.global.extraRequestThreshold()/dd,!(void 0!==(S=h[h.length-1])&&S.level()==n.level()-1&&A<S.endNodeIdx()+w)){e.n=7;break}return nd.debug('Merging "nodeRange" request into existing range: '.concat(S,", newEndNodeIdx: ").concat(S.endNodeIdx()," -> ").concat(A)),S.extendEndNodeIdx(Number(A)),e.a(2,0);case 7:void 0,void 0,E=n.level()-1,_=[Number(A),Number(A)+1],C=new i(_,E),void 0!==S&&S.level()==C.level()?nd.info("Same level, but too far away. Pushing new request for nodeIdx: ".concat(A," rather than merging with distant ").concat(S)):nd.info("Pushing new level for ".concat(C," onto queue with nearestNodeRange: ").concat(S," since there's not already a range for this level.")),h.push(C);case 8:return e.a(2)}var E,_},e)}),A=p;case 2:if(!(A<d)){e.n=5;break}return e.d(id(b(A)),3);case 3:if(0!==e.v){e.n=4;break}return e.a(3,4);case 4:A++,e.n=2;break;case 5:return e.a(2)}},e)});case 1:if(0==h.length){e.n=3;break}return e.d(id(y()),2);case 2:e.n=1;break;case 3:return e.a(2)}var d},e)}),(bd=function(){return new hd(e.apply(this,arguments))}).apply(this,arguments)}var Ad=new Uint8Array([102,103,98,3,102,103,98,0]),wd=4;function Sd(e){"@babel/helpers - typeof";return(Sd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Cd(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Id(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function Ed(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],r=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}throw new TypeError(Sd(e)+" is not iterable")}function _d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],u=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||Id(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Id(e,t){if(e){if("string"==typeof e)return Od(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Od(e,t):void 0}}function Od(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function xd(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof s?n:s,l=Object.create(u.prototype);return Pd(l,"_invoke",function(r,n,o){var i,s,u,l=0,c=o||[],f=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,r){return i=t,s=0,u=e,p.n=r,a}};function h(r,n){for(s=r,u=n,t=0;!f&&l&&!o&&t<c.length;t++){var o,i=c[t],h=p.p,y=i[2];r>3?(o=y===n)&&(u=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=r<2&&h<i[1])?(s=0,p.v=n,p.n=i[1]):h<y&&(o=r<3||i[0]>n||n>y)&&(i[4]=r,i[5]=n,p.n=y,s=0))}if(o||r>1)return a;throw f=!0,n}return function(o,c,y){if(l>1)throw TypeError("Generator is already running");for(f&&1===c&&h(c,y),s=c,u=y;(t=s<2?e:u)||!f;){i||(s?s<3?(s>1&&(p.n=-1),h(s,u)):p.n=u:p.v=u);try{if(l=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(f=p.n<0)?u:r.call(n,p))!==a)break}catch(t){i=e,s=1,u=t}finally{l=1}}return{value:t,done:f}}}(r,o,i),!0),l}var a={};function s(){}function u(){}function l(){}t=Object.getPrototypeOf;var c=[][n]?t(t([][n]())):(Pd(t={},n,function(){return this}),t),f=l.prototype=s.prototype=Object.create(c);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,Pd(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=l,Pd(f,"constructor",l),Pd(l,"constructor",u),u.displayName="GeneratorFunction",Pd(l,o,"GeneratorFunction"),Pd(f),Pd(f,o,"Generator"),Pd(f,n,function(){return this}),Pd(f,"toString",function(){return"[object Generator]"}),(xd=function(){return{w:i,m:p}})()}function Pd(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}(Pd=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){Pd(e,t,function(e){return this._invoke(t,r,e)})};i("next",0),i("throw",1),i("return",2)}})(e,t,r,n)}function kd(e,t,r,n,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function Td(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){kd(i,n,o,a,s,"next",e)}function s(e){kd(i,n,o,a,s,"throw",e)}a(void 0)})}}function jd(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Md(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Nd(n.key),n)}}function Bd(e,t,r){return t&&Md(e.prototype,t),r&&Md(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Nd(e){var t=function(e,t){if("object"!=Sd(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Sd(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Sd(t)?t:t+""}function Rd(e){return function(){return new Ld(e.apply(this,arguments))}}function Ld(e){var t,r;function n(t,r){try{var i=e[t](r),a=i.value,s=a instanceof Qd;Promise.resolve(s?a.v:a).then(function(r){if(s){var u="return"===t?"return":"next";if(!a.k||r.done)return n(u,r);r=e[u](r).value}o(i.done?"return":"normal",r)},function(e){n("throw",e)})}catch(e){o("throw",e)}}function o(e,o){switch(e){case"return":t.resolve({value:o,done:!0});break;case"throw":t.reject(o);break;default:t.resolve({value:o,done:!1})}(t=t.next)?n(t.key,t.arg):r=null}this._invoke=function(e,o){return new Promise(function(i,a){var s={key:e,arg:o,resolve:i,reject:a,next:null};r?r=r.next=s:(t=r=s,n(e,o))})},"function"!=typeof e.return&&(this.return=void 0)}function Dd(e){return new Qd(e,0)}function Fd(e){var t={},r=!1;function n(t,n){return r=!0,{done:!1,value:new Qd(n=new Promise(function(r){r(e[t](n))}),1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return r?(r=!1,e):n("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(r)throw r=!1,e;return n("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return r?(r=!1,e):n("return",e)}),t}function Qd(e,t){this.v=e,this.k=t}function Gd(e){var t,r,n,o=2;for("undefined"!=typeof Symbol&&(r=Symbol.asyncIterator,n=Symbol.iterator);o--;){if(r&&null!=(t=e[r]))return t.call(e);if(n&&null!=(t=e[n]))return new Ud(t.call(e));r="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function Ud(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return(Ud=function(e){this.s=e,this.n=e.next}).prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var r=this.s.return;return void 0===r?Promise.resolve({value:e,done:!0}):t(r.apply(this.s,arguments))},throw:function(e){var r=this.s.return;return void 0===r?Promise.reject(e):t(r.apply(this.s,arguments))}},new Ud(e)}Ld.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},Ld.prototype.next=function(e){return this._invoke("next",e)},Ld.prototype.throw=function(e){return this._invoke("throw",e)},Ld.prototype.return=function(e){return this._invoke("return",e)};var zd=function(){function e(t,r,n,o,i){jd(this,e),this.headerClient=t,this.header=r,this.headerLength=n,this.indexLength=o,this.nocache=i}return Bd(e,[{key:"selectBbox",value:function(e){var t=this;return Rd(xd().m(function r(){var n,o,i,a,s,u,l,c,f,p,h,y,d,m,g,v,b,A,w;return xd().w(function(r){for(;;)switch(r.n){case 0:n=t.lengthBeforeTree(),o=t.headerClient,i=function(){var e=Td(xd().m(function e(t,r){var i;return xd().w(function(e){for(;;)switch(e.n){case 0:return i=0,e.a(2,o.getRange(n+t,r,i,"index"))}},e)}));return function(t,r){return e.apply(this,arguments)}}(),a=[],s=[],u=!1,l=!1,r.p=1,f=Gd(vd(t.header.featuresCount,t.header.indexNodeSize,e,i));case 2:return r.n=3,Dd(f.next());case 3:if(!(u=!(p=r.v).done)){r.n=6;break}if(h=p.value,y=_d(h,2),d=y[0],m=_d(h,3),(g=m[2])||(nd.info("final feature"),g=4),0!=s.length){r.n=4;break}return s.push([d,g]),r.a(3,5);case 4:v=s[s.length-1],(b=d-(v[0]+v[1]))>Zy.global.extraRequestThreshold()&&(nd.info("Pushing new feature batch, since gap ".concat(b," was too large")),a.push(s),s=[]),s.push([d,g]);case 5:u=!1,r.n=2;break;case 6:r.n=8;break;case 7:r.p=7,w=r.v,l=!0,c=w;case 8:if(r.p=8,r.p=9,!u||null==f.return){r.n=10;break}return r.n=10,Dd(f.return());case 10:if(r.p=10,!l){r.n=11;break}throw c;case 11:return r.f(10);case 12:return r.f(8);case 13:return t.headerClient.logUsage("header+index"),s.length>0&&a.push(s),A=a.flatMap(function(e){return t.readFeatureBatch(e,t.nocache)}),r.d(Ed(Fd(Gd(Gy.merge(A)))),14);case 14:return r.a(2)}},r,null,[[9,,10,12],[1,7,8,13]])}))()}},{key:"lengthBeforeTree",value:function(){return Ad.length+wd+this.headerLength}},{key:"lengthBeforeFeatures",value:function(){return this.lengthBeforeTree()+this.indexLength}},{key:"buildFeatureClient",value:function(e){return new Hd(this.headerClient.httpClient,e)}},{key:"readFeatureBatch",value:function(e,t){var r=this;return Rd(xd().m(function n(){var o,i,a,s,u,l,c,f,p,h,y,d,m;return xd().w(function(n){for(;;)switch(n.n){case 0:o=_d(e[0],1),i=o[0],a=_d(e[e.length-1],2),s=a[0],u=a[1],l=s+u-i,c=r.buildFeatureClient(t),f=l,p=Cd(e),n.p=1,p.s();case 2:if((h=p.n()).done){n.n=6;break}return y=_d(h.value,1),d=y[0],n.n=3,Dd(r.readFeature(c,d,f));case 3:return n.n=4,n.v;case 4:f=0;case 5:n.n=2;break;case 6:n.n=8;break;case 7:n.p=7,m=n.v,p.e(m);case 8:return n.p=8,p.f(),n.f(8);case 9:c.logUsage("feature");case 10:return n.a(2)}},n,null,[[1,7,8,9]])}))()}},{key:"readFeature",value:function(){var e=Td(xd().m(function e(t,r,n){var o,i,a,s,u,l,c;return xd().w(function(e){for(;;)switch(e.n){case 0:return o=r+this.lengthBeforeFeatures(),e.n=1,t.getRange(o,4,n,"feature length");case 1:return a=e.v,i=new DataView(a).getUint32(0,!0),e.n=2,t.getRange(o+4,i,n,"feature data");case 2:return s=e.v,u=new Uint8Array(s),(l=new Uint8Array(i+wd)).set(u,wd),(c=new Uh(l)).setPosition(wd),e.a(2,oy.getRootAsFeature(c))}},e,this)}));return function(t,r,n){return e.apply(this,arguments)}}()}],[{key:"open",value:function(){var t=Td(xd().m(function t(r,n){var o,i,a,s,u,l,c,f,p,h,y,d,m;return xd().w(function(t){for(;;)switch(t.n){case 0:return o=2024,i=new Hd(r,n),a=function(){var e,t=0;for(e=0;e<3;e++){t+=Math.pow(16,e)*dd}return t}(),s=o+a,nd.debug("fetching header. minReqLength: ".concat(s," (assumedHeaderLength: ").concat(o,", assumedIndexLength: ").concat(a,")")),d=Uint8Array,t.n=1,i.getRange(0,8,s,"header");case 1:if(m=t.v,(u=new d(m)).subarray(0,3).every(function(e,t){return Ad[t]===e})){t.n=2;break}throw nd.error("bytes: ".concat(u," != ").concat(Ad)),new Error("Not a FlatGeobuf file");case 2:return nd.debug("magic bytes look good"),t.n=3,i.getRange(8,4,s,"header");case 3:if(c=t.v,!((l=new DataView(c).getUint32(0,!0))>10485760||l<8)){t.n=4;break}throw new Error("Invalid header size");case 4:return nd.debug("headerLength: ".concat(l)),t.n=5,i.getRange(12,l,s,"header");case 5:return f=t.v,p=new Uh(new Uint8Array(f)),h=vy(p),y=md(h.featuresCount,h.indexNodeSize),nd.debug("completed: opening http reader"),t.a(2,new e(i,h,l,y,n))}},t)}));return function(e,r){return t.apply(this,arguments)}}()}])}(),Hd=function(){return Bd(function e(t,r){if(jd(this,e),this.bytesEverUsed=0,this.bytesEverFetched=0,this.buffer=new ArrayBuffer(0),this.head=0,"string"==typeof t)this.httpClient=new qd(t,r);else{if(!(t instanceof qd))throw new Error("Unknown source ");this.httpClient=t}},[{key:"getRange",value:function(){var e=Td(xd().m(function e(t,r,n,o){var i,a,s;return xd().w(function(e){for(;;)switch(e.n){case 0:if(this.bytesEverUsed+=r,i=t-this.head,a=i+r,!(i>=0&&a<=this.buffer.byteLength)){e.n=1;break}return e.a(2,this.buffer.slice(i,a));case 1:return s=Math.max(r,n),this.bytesEverFetched+=s,nd.debug("requesting for new Range: ".concat(t,"-").concat(t+s-1)),e.n=2,this.httpClient.getRange(t,s,o);case 2:return this.buffer=e.v,this.head=t,e.a(2,this.buffer.slice(0,r))}},e,this)}));return function(t,r,n,o){return e.apply(this,arguments)}}()},{key:"logUsage",value:function(e){var t=e.split(" ")[0],r=this.bytesEverUsed,n=this.bytesEverFetched,o=(100*r/n).toFixed(2);nd.info("".concat(t," bytes used/requested: ").concat(r," / ").concat(n," = ").concat(o,"%"))}}])}(),qd=function(){return Bd(function e(t,r){jd(this,e),this.requestsEverMade=0,this.bytesEverRequested=0,this.url=t,this.nocache=r},[{key:"getRange",value:function(){var e=Td(xd().m(function e(t,r,n){var o,i,a;return xd().w(function(e){for(;;)switch(e.n){case 0:return this.requestsEverMade+=1,this.bytesEverRequested+=r,o="bytes=".concat(t,"-").concat(t+r-1),nd.info("request: #".concat(this.requestsEverMade,", purpose: ").concat(n,"), bytes: (this_request: ").concat(r,", ever: ").concat(this.bytesEverRequested,"), Range: ").concat(o)),i={Range:o},this.nocache&&(i["Cache-Control"]="no-cache, no-store"),e.n=1,fetch(this.url,{headers:i});case 1:return a=e.v,e.a(2,a.arrayBuffer())}},e,this)}));return function(t,r,n){return e.apply(this,arguments)}}()}])}();function Vd(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof s?n:s,l=Object.create(u.prototype);return Kd(l,"_invoke",function(r,n,o){var i,s,u,l=0,c=o||[],f=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,r){return i=t,s=0,u=e,p.n=r,a}};function h(r,n){for(s=r,u=n,t=0;!f&&l&&!o&&t<c.length;t++){var o,i=c[t],h=p.p,y=i[2];r>3?(o=y===n)&&(u=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=r<2&&h<i[1])?(s=0,p.v=n,p.n=i[1]):h<y&&(o=r<3||i[0]>n||n>y)&&(i[4]=r,i[5]=n,p.n=y,s=0))}if(o||r>1)return a;throw f=!0,n}return function(o,c,y){if(l>1)throw TypeError("Generator is already running");for(f&&1===c&&h(c,y),s=c,u=y;(t=s<2?e:u)||!f;){i||(s?s<3?(s>1&&(p.n=-1),h(s,u)):p.n=u:p.v=u);try{if(l=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(f=p.n<0)?u:r.call(n,p))!==a)break}catch(t){i=e,s=1,u=t}finally{l=1}}return{value:t,done:f}}}(r,o,i),!0),l}var a={};function s(){}function u(){}function l(){}t=Object.getPrototypeOf;var c=[][n]?t(t([][n]())):(Kd(t={},n,function(){return this}),t),f=l.prototype=s.prototype=Object.create(c);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,Kd(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=l,Kd(f,"constructor",l),Kd(l,"constructor",u),u.displayName="GeneratorFunction",Kd(l,o,"GeneratorFunction"),Kd(f),Kd(f,o,"Generator"),Kd(f,n,function(){return this}),Kd(f,"toString",function(){return"[object Generator]"}),(Vd=function(){return{w:i,m:p}})()}function Kd(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}(Kd=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){Kd(e,t,function(e){return this._invoke(t,r,e)})};i("next",0),i("throw",1),i("return",2)}})(e,t,r,n)}function Yd(e,t,r,n,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function Jd(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){Yd(i,n,o,a,s,"next",e)}function s(e){Yd(i,n,o,a,s,"throw",e)}a(void 0)})}}function Wd(e){var t,r,n,o=2;for("undefined"!=typeof Symbol&&(r=Symbol.asyncIterator,n=Symbol.iterator);o--;){if(r&&null!=(t=e[r]))return t.call(e);if(n&&null!=(t=e[n]))return new Xd(t.call(e));r="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function Xd(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return(Xd=function(e){this.s=e,this.n=e.next}).prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var r=this.s.return;return void 0===r?Promise.resolve({value:e,done:!0}):t(r.apply(this.s,arguments))},throw:function(e){var r=this.s.return;return void 0===r?Promise.reject(e):t(r.apply(this.s,arguments))}},new Xd(e)}function Zd(e){return new tm(e,0)}function $d(e){return function(){return new em(e.apply(this,arguments))}}function em(e){var t,r;function n(t,r){try{var i=e[t](r),a=i.value,s=a instanceof tm;Promise.resolve(s?a.v:a).then(function(r){if(s){var u="return"===t?"return":"next";if(!a.k||r.done)return n(u,r);r=e[u](r).value}o(i.done?"return":"normal",r)},function(e){n("throw",e)})}catch(e){o("throw",e)}}function o(e,o){switch(e){case"return":t.resolve({value:o,done:!0});break;case"throw":t.reject(o);break;default:t.resolve({value:o,done:!1})}(t=t.next)?n(t.key,t.arg):r=null}this._invoke=function(e,o){return new Promise(function(i,a){var s={key:e,arg:o,resolve:i,reject:a,next:null};r?r=r.next=s:(t=r=s,n(e,o))})},"function"!=typeof e.return&&(this.return=void 0)}function tm(e,t){this.v=e,this.k=t}function rm(){return(rm=$d(Vd().m(function e(t,r,n){var o,i,a,s,u,l,c,f,p,h,y,d,m,g,v,b;return Vd().w(function(e){for(;;)switch(e.n){case 0:return o="function"==typeof(A=t).slice?A:new ly("function"==typeof A.read?A:A.getReader()),i=function(){var e=Jd(Vd().m(function e(t){return Vd().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,o.slice(t);case 1:return e.a(2,e.v)}},e)}));return function(t){return e.apply(this,arguments)}}(),y=Uint8Array,e.n=1,Zd(i(8,"magic bytes"));case 1:if(d=e.v,(a=new y(d)).subarray(0,3).every(function(e,t){return Ad[t]===e})){e.n=2;break}throw new Error("Not a FlatGeobuf file");case 2:return m=Uint8Array,e.n=3,Zd(i(4,"header length"));case 3:return g=e.v,a=new m(g),s=new Uh(a),u=s.readUint32(0),v=Uint8Array,e.n=4,Zd(i(u,"header data"));case 4:if(b=e.v,a=new v(b),s=new Uh(a),l=vy(s),n&&n(l),c=l.indexNodeSize,f=l.featuresCount,!(c>0)){e.n=5;break}return p=md(f,c),e.n=5,Zd(i(p,"entire index, w/o rect"));case 5:return e.n=6,Zd(om(i,l,r));case 6:if(!(h=e.v)){e.n=8;break}return e.n=7,h;case 7:e.n=5;break;case 8:return e.a(2)}var A},e)}))).apply(this,arguments)}function nm(){return(nm=$d(function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return Vd().m(function i(){var a,s,u,l,c,f,p,h;return Vd().w(function(i){for(;;)switch(i.n){case 0:return i.n=1,Zd(zd.open(e,o));case 1:a=i.v,nd.debug("opened reader"),n&&n(a.header),s=!1,u=!1,i.p=2,c=Wd(a.selectBbox(t));case 3:return i.n=4,Zd(c.next());case 4:if(!(s=!(f=i.v).done)){i.n=6;break}return p=f.value,i.n=5,r(p,a.header);case 5:s=!1,i.n=3;break;case 6:i.n=8;break;case 7:i.p=7,h=i.v,u=!0,l=h;case 8:if(i.p=8,i.p=9,!s||null==c.return){i.n=10;break}return i.n=10,Zd(c.return());case 10:if(i.p=10,!u){i.n=11;break}throw l;case 11:return i.f(10);case 12:return i.f(8);case 13:return i.a(2)}},i,null,[[9,,10,12],[2,7,8,13]])})()})).apply(this,arguments)}function om(e,t,r){return im.apply(this,arguments)}function im(){return(im=Jd(Vd().m(function e(t,r,n){var o,i,a,s,u,l,c,f,p;return Vd().w(function(e){for(;;)switch(e.n){case 0:return l=Uint8Array,e.n=1,t(4,"feature length");case 1:if(c=e.v,0!==(o=new l(c)).byteLength){e.n=2;break}return e.a(2);case 2:return i=new Uh(o),a=i.readUint32(0),f=Uint8Array,e.n=3,t(a,"feature data");case 3:return p=e.v,o=new f(p),(s=new Uint8Array(a+4)).set(o,4),(i=new Uh(s)).setPosition(wd),u=oy.getRootAsFeature(i),e.a(2,n(u,r))}},e)}))).apply(this,arguments)}function am(e,t){return{type:"FeatureCollection",features:function(e,t,r){if(!e.subarray(0,3).every(function(e,t){return Ad[t]===e}))throw new Error("Not a FlatGeobuf file");var n=new Uh(e),o=n.readUint32(Ad.length);n.setPosition(Ad.length+wd);var i=vy(n);r&&r(i);var a=Ad.length+wd+o,s=i.indexNodeSize,u=i.featuresCount;s>0&&(a+=md(u,s));for(var l=[];a<n.capacity();){var c=n.readUint32(a);n.setPosition(a+wd);var f=oy.getRootAsFeature(n);l.push(t(f,i)),a+=wd+c}return l}(e,sy,t)}}function sm(e,t){return function(e,t,r){return rm.apply(this,arguments)}(e,sy,t)}function um(e,t,r){return function(e,t,r,n){return nm.apply(this,arguments)}(e,t,sy,r,arguments.length>3&&void 0!==arguments[3]&&arguments[3])}function lm(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return e instanceof Uint8Array?am(e,r):e instanceof ReadableStream?sm(e,r):um(e,t,r,n)}em.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},em.prototype.next=function(e){return this._invoke("next",e)},em.prototype.throw=function(e){return this._invoke("throw",e)},em.prototype.return=function(e){return this._invoke("return",e)};var cm=r(833),fm=r.n(cm);function pm(e){"@babel/helpers - typeof";return(pm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hm(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof s?n:s,l=Object.create(u.prototype);return ym(l,"_invoke",function(r,n,o){var i,s,u,l=0,c=o||[],f=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,r){return i=t,s=0,u=e,p.n=r,a}};function h(r,n){for(s=r,u=n,t=0;!f&&l&&!o&&t<c.length;t++){var o,i=c[t],h=p.p,y=i[2];r>3?(o=y===n)&&(u=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=r<2&&h<i[1])?(s=0,p.v=n,p.n=i[1]):h<y&&(o=r<3||i[0]>n||n>y)&&(i[4]=r,i[5]=n,p.n=y,s=0))}if(o||r>1)return a;throw f=!0,n}return function(o,c,y){if(l>1)throw TypeError("Generator is already running");for(f&&1===c&&h(c,y),s=c,u=y;(t=s<2?e:u)||!f;){i||(s?s<3?(s>1&&(p.n=-1),h(s,u)):p.n=u:p.v=u);try{if(l=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(f=p.n<0)?u:r.call(n,p))!==a)break}catch(t){i=e,s=1,u=t}finally{l=1}}return{value:t,done:f}}}(r,o,i),!0),l}var a={};function s(){}function u(){}function l(){}t=Object.getPrototypeOf;var c=[][n]?t(t([][n]())):(ym(t={},n,function(){return this}),t),f=l.prototype=s.prototype=Object.create(c);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,ym(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=l,ym(f,"constructor",l),ym(l,"constructor",u),u.displayName="GeneratorFunction",ym(l,o,"GeneratorFunction"),ym(f),ym(f,o,"Generator"),ym(f,n,function(){return this}),ym(f,"toString",function(){return"[object Generator]"}),(hm=function(){return{w:i,m:p}})()}function ym(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}(ym=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){ym(e,t,function(e){return this._invoke(t,r,e)})};i("next",0),i("throw",1),i("return",2)}})(e,t,r,n)}function dm(e,t,r,n,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function mm(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){dm(i,n,o,a,s,"next",e)}function s(e){dm(i,n,o,a,s,"throw",e)}a(void 0)})}}function gm(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,vm(n.key),n)}}function vm(e){var t=function(e,t){if("object"!=pm(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=pm(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==pm(t)?t:t+""}function bm(e){var t,r,n,o=2;for("undefined"!=typeof Symbol&&(r=Symbol.asyncIterator,n=Symbol.iterator);o--;){if(r&&null!=(t=e[r]))return t.call(e);if(n&&null!=(t=e[n]))return new Am(t.call(e));r="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function Am(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return(Am=function(e){this.s=e,this.n=e.next}).prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var r=this.s.return;return void 0===r?Promise.resolve({value:e,done:!0}):t(r.apply(this.s,arguments))},throw:function(e){var r=this.s.return;return void 0===r?Promise.reject(e):t(r.apply(this.s,arguments))}},new Am(e)}var wm={1:"circle",2:"line",3:"fill",5:"line",4:"circle",6:"fill",MultiPolygon:"fill",Point:"circle",MultiLineString:"line",MultiPoint:"circle",LineString:"line",Polygon:"fill"},Sm=function(){return e=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t.layerID?t.layerID:M.createUniqueID("FGBLayer_"),this.layerId=this.id+"outer",this.sourceId=this.layerId,this.options=t,this.strategy=t.strategy||"bbox",this.url=t.url,this.layerType="",this.extent=t.extent,this.init()},(t=[{key:"init",value:function(){"bbox"===this.strategy&&(this.loadedExtentsRtree_=new(fm()))}},{key:"iterateFeatures",value:function(){var e=mm(hm().m(function e(t){var r,n,o,i,a,s,u,l;return hm().w(function(e){for(;;)switch(e.n){case 0:r={type:"FeatureCollection",features:[]},n=!1,o=!1,e.p=1,a=bm(t);case 2:return e.n=3,a.next();case 3:if(!(n=!(s=e.v).done)){e.n=5;break}u=s.value,this.options.featureLoader&&"function"==typeof this.options.featureLoader&&(u=this.options.featureLoader(u)),this.layerType||(this.layerType=wm[u.geometry.type]),r.features.push(u);case 4:n=!1,e.n=2;break;case 5:e.n=7;break;case 6:e.p=6,l=e.v,o=!0,i=l;case 7:if(e.p=7,e.p=8,!n||null==a.return){e.n=9;break}return e.n=9,a.return();case 9:if(e.p=9,!o){e.n=10;break}throw i;case 10:return e.f(9);case 11:return e.f(7);case 12:return e.a(2,r)}},e,this,[[8,,9,11],[1,6,7,12]])}));return function(t){return e.apply(this,arguments)}}()},{key:"_loadData",value:function(){var e=mm(hm().m(function e(t){var r,n,o=this;return hm().w(function(e){for(;;)switch(e.n){case 0:if(n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]},t.length){e.n=2;break}return e.n=1,this._getStream(this.url);case 1:r=e.v,e.n=3;break;case 2:n.value={extent:t.slice()},this.loadedExtentsRtree_.insert(n);case 3:return e.n=4,lm(r&&r.body||this.url,n,function(e){o.layerType=wm[e.geometryType]});case 4:return e.a(2,e.v)}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_getStream",value:function(){var e=mm(hm().m(function e(t){return hm().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,z.get(t,{},{withoutFormatSuffix:!0}).then(function(e){return e});case 1:return e.a(2,e.v)}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"_containsExtent",value:function(e,t){return e[0]<=t[0]&&t[2]<=e[2]&&e[1]<=t[1]&&t[3]<=e[3]}},{key:"_getInExtent",value:function(e){var t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.loadedExtentsRtree_.search(t).map(function(e){return e.value})}},{key:"_forEachInExtent",value:function(e,t){return this._forEach(this._getInExtent(e),t)}},{key:"_forEach",value:function(e,t){for(var r,n=0,o=e.length;n<o;n++)if(r=t(e[n]))return r;return r}}])&&gm(e.prototype,t),r&&gm(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function Cm(e){"@babel/helpers - typeof";return(Cm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Em(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof s?n:s,l=Object.create(u.prototype);return _m(l,"_invoke",function(r,n,o){var i,s,u,l=0,c=o||[],f=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,r){return i=t,s=0,u=e,p.n=r,a}};function h(r,n){for(s=r,u=n,t=0;!f&&l&&!o&&t<c.length;t++){var o,i=c[t],h=p.p,y=i[2];r>3?(o=y===n)&&(u=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=r<2&&h<i[1])?(s=0,p.v=n,p.n=i[1]):h<y&&(o=r<3||i[0]>n||n>y)&&(i[4]=r,i[5]=n,p.n=y,s=0))}if(o||r>1)return a;throw f=!0,n}return function(o,c,y){if(l>1)throw TypeError("Generator is already running");for(f&&1===c&&h(c,y),s=c,u=y;(t=s<2?e:u)||!f;){i||(s?s<3?(s>1&&(p.n=-1),h(s,u)):p.n=u:p.v=u);try{if(l=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(f=p.n<0)?u:r.call(n,p))!==a)break}catch(t){i=e,s=1,u=t}finally{l=1}}return{value:t,done:f}}}(r,o,i),!0),l}var a={};function s(){}function u(){}function l(){}t=Object.getPrototypeOf;var c=[][n]?t(t([][n]())):(_m(t={},n,function(){return this}),t),f=l.prototype=s.prototype=Object.create(c);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,_m(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=l,_m(f,"constructor",l),_m(l,"constructor",u),u.displayName="GeneratorFunction",_m(l,o,"GeneratorFunction"),_m(f),_m(f,o,"Generator"),_m(f,n,function(){return this}),_m(f,"toString",function(){return"[object Generator]"}),(Em=function(){return{w:i,m:p}})()}function _m(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}(_m=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){_m(e,t,function(e){return this._invoke(t,r,e)})};i("next",0),i("throw",1),i("return",2)}})(e,t,r,n)}function Im(e,t,r,n,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function Om(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){Im(i,n,o,a,s,"next",e)}function s(e){Im(i,n,o,a,s,"throw",e)}a(void 0)})}}function xm(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Pm(n.key),n)}}function Pm(e){var t=function(e,t){if("object"!=Cm(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Cm(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Cm(t)?t:t+""}var km={circle:{"circle-radius":6,"circle-color":"#3fb1e3","circle-opacity":1,"circle-blur":0,"circle-translate":[0,0],"circle-stroke-width":0,"circle-stroke-color":"#000","circle-stroke-opacity":1},line:{"line-opacity":1,"line-color":"#3fb1e3","line-width":3,"line-blur":1},fill:{"fill-opacity":.8,"fill-color":"#3fb1e3","fill-translate":[0,0],"fill-antialias":!0,"fill-outline-color":"#3fb1e3"}},Tm=function(){return e=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t.layerID?t.layerID:M.createUniqueID("FGBLayer_"),this.layerId=this.id+"outer",this._sourceId=this.layerId,this.options=t,this.strategy=t.strategy||"bbox",this.url=t.url,this.layerType="",this.extent=t.extent,this.overlay=!0,this.type="custom",this.renderingMode="3d",this._updateFeaturesFn=this._updateFeatures.bind(this),this.interaction=!0,this.events="all"},(t=[{key:"onAdd",value:function(e){this.map=e;var t,r,n,o=[];if("bbox"===this.strategy){var i=this.map.getBounds().toArray();o=[i[0][0],i[0][1],i[1][0],i[1][1]],this.map.on("moveend",this._updateFeaturesFn)}if(this.extent){var a=(t=this.extent,n=[],function(e,t){return e[0]<=t[2]&&e[2]>=t[0]&&e[1]<=t[3]&&e[3]>=t[1]}(t,r=o)&&(t[0]>r[0]?n[0]=t[0]:n[0]=r[0],t[1]>r[1]?n[1]=t[1]:n[1]=r[1],t[2]<r[2]?n[2]=t[2]:n[2]=r[2],t[3]<r[3]?n[3]=t[3]:n[3]=r[3]),n);o=a&&a.length?a:this.extent}this.renderer=new Sm(this.options),this._handleFeatures(o)}},{key:"onRemove",value:function(){this.map.getLayer(this.layerId)&&this.map.removeLayer(this.layerId),this.map.off("moveend",this._updateFeaturesFn)}},{key:"on",value:function(e,t){this.map.on(e,this.layerId,t)}},{key:"off",value:function(e,t){this.map.off(e,this.layerId,t)}},{key:"once",value:function(e,t){this.map.once(e,this.layerId,t)}},{key:"moveLayer",value:function(e){this.map.moveLayer(this.layerId,e)}},{key:"render",value:function(){}},{key:"setVisibility",value:function(e){var t=e?"visible":"none";this.map.setLayoutProperty(this.layerId,"visibility",t)}},{key:"_handleFeatures",value:function(){var e=Om(Em().m(function e(t){var r,n,o;return Em().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.renderer._loadData(t);case 1:return r=e.v,e.n=2,this.renderer.iterateFeatures(r);case 2:n=e.v,this.map.getSource(this._sourceId)?this.map.getSource(this._sourceId).setData(n):this.map.addSource(this._sourceId,{type:"geojson",data:n}),this.map.getLayer(this.layerId)||(this.layerType=this.renderer.layerType,o=Object.assign({id:this.layerId,type:this.layerType,source:this._sourceId,paint:Object.assign(km[this.layerType],this.options.paint)||{},layout:this.options.layout||{}}),this.map.addLayer(o));case 3:return e.a(2)}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_updateFeatures",value:function(){var e=Om(Em().m(function e(){var t,r,n,o,i=this;return Em().w(function(e){for(;;)switch(e.n){case 0:if(t=this.map.getBounds().toArray(),r=[t[0][0],t[0][1],t[1][0],t[1][1]],this.renderer._forEachInExtent(r,function(e){return i.renderer._containsExtent(e.extent,r)})){e.n=3;break}return e.n=1,this.renderer._loadData(r);case 1:return n=e.v,e.n=2,this.renderer.iterateFeatures(n);case 2:o=e.v,this.map.getSource(this._sourceId).setData(o);case 3:return e.a(2)}},e,this)}));return function(){return e.apply(this,arguments)}}()}])&&xm(e.prototype,t),r&&xm(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}(),jm=function(){try{return videojs}catch(e){return{}}}(),Mm=r.n(jm);(function(){try{flvjs}catch(e){return{}}})(),function(){try{}catch(e){return{}}}();function Bm(e){"@babel/helpers - typeof";return(Bm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nm(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Rm(n.key),n)}}function Rm(e){var t=function(e,t){if("object"!=Bm(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Bm(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Bm(t)?t:t+""}var Lm=function(){return e=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=t,this.url=t.url,this.layerId=t.id,this.autoplay=void 0===t.autoplay||t.autoplay,this.loop=void 0===t.loop||t.loop},(t=[{key:"_createVideoElement",value:function(){var e=document.createElement("video");e.id=this.layerId,e.className="video-js",e.style.position="fixed",e.style.left="-300%",e.setAttribute("crossorigin","anonymous"),document.body.appendChild(e)}},{key:"createVideo",value:function(){this._createVideoElement();var e=this._getVideoOptions();return this.video=Mm()(this.layerId,e,function(){}),this.video}},{key:"_getVideoOptions",value:function(){if(this.url){var e={autoplay:this.autoplay,muted:!0,loop:this.loop};return this.url.includes("mp4")||this.url.includes("MP4")?e.sources=[{src:this.url,type:"video/mp4"}]:this.url.includes("flv")||this.url.includes("FLV")?e={loop:this.loop,autoplay:this.autoplay,muted:!0,techOrder:["html5","flvjs"],flvjs:{mediaDataSource:{isLive:!0,cors:!0,withCredentials:!1}},sources:[{src:this.url,type:"video/x-flv"}]}:(this.url.includes("m3u8")||this.url.includes("M3U8"))&&(e.sources=[{src:this.url}]),e}}},{key:"getVideoDomId",value:function(){if(this.url){var e;if(this.url.includes("flv")){var t=document.querySelector("#".concat(this.layerId));e="".concat(this.layerId,"_flvjs_api"),t.style.position="fixed",t.style.left="-200%"}else e=this.video.el_.firstChild.id;return e}}}])&&Nm(e.prototype,t),r&&Nm(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}(),Dm=function(){try{return turf}catch(e){return{}}}();function Fm(e){"@babel/helpers - typeof";return(Fm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qm(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Gm(n.key),n)}}function Gm(e){var t=function(e,t){if("object"!=Fm(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Fm(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Fm(t)?t:t+""}var Um=function(){return e=function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.configs=r,this.cv=t},(t=[{key:"init",value:function(){var e=this;return new Promise(function(t){e.cv.then(function(){e.setCameraLocation(e.configs),t(e)})})}},{key:"setCameraLocation",value:function(e){var t=e.pitch,r=e.roll,n=e.yaw,o=e.x,i=e.y,a=e.z,s=e.fx,u=e.fy,l=e.centerX,c=e.centerY;this.cv&&(this.rotationMatrix=this.toRotationMatrix(t,r,n),this.translationMatrix=this.toTranslationMatrix(o,i,a),this.k=this.toCameraMatrix(s,u,l,c))}},{key:"toRotationMatrix",value:function(e,t,r){if(this.cv){var n=(e-90)*(Math.PI/180),o=t*(Math.PI/180),i=-1*r*(Math.PI/180),a=new this.cv.Mat(3,1,this.cv.CV_64FC1),s=this.cv.matFromArray(3,3,this.cv.CV_64FC1,[1,0,0,0,Math.cos(n),Math.sin(n),0,-Math.sin(n),Math.cos(n)]),u=this.cv.matFromArray(3,3,this.cv.CV_64FC1,[Math.cos(o),0,-Math.sin(o),0,1,0,Math.sin(o),0,Math.cos(o)]),l=this.cv.matFromArray(3,3,this.cv.CV_64FC1,[Math.cos(i),Math.sin(i),0,-Math.sin(i),Math.cos(i),0,0,0,1]),c=new this.cv.Mat(3,3,this.cv.CV_64FC1);return this.cv.gemm(s,u,1,new this.cv.Mat,0,c),this.cv.gemm(c,l,1,new this.cv.Mat,0,c),this.cv.Rodrigues(c,a),a}}},{key:"toTranslationMatrix",value:function(e,t,r){if(this.cv){var n=new this.cv.Mat,o=this.cv.matFromArray(3,1,this.cv.CV_64FC1,[-e,-t,-r]),i=new this.cv.Mat(3,3,this.cv.CV_64FC1);return this.cv.Rodrigues(this.rotationMatrix,i),this.cv.gemm(i,o,1,new this.cv.Mat,0,n),n}}},{key:"toCameraMatrix",value:function(e,t,r,n){return this.cv.matFromArray(3,3,this.cv.CV_64FC1,[e,0,r,0,t,n,0,0,1])}},{key:"toVideoCoordinate",value:function(e){if(!this.cv||!this.cv.Mat)return[];var t=new this.cv.Mat,r=this.cv.matFromArray(3,1,this.cv.CV_64FC1,[e[0],e[1],0]),n=new this.cv.Mat(2,1,this.cv.CV_64FC1);return this.cv.projectPoints(r,this.rotationMatrix,this.translationMatrix,this.k,t,n),n}},{key:"toSpatialCoordinate",value:function(e){if(!this.cv||!this.cv.Mat)return[];var t=new this.cv.matFromArray(3,1,this.cv.CV_64FC1,[e[0],e[1],1]),r=new this.cv.Mat(3,3,this.cv.CV_64FC1);this.cv.Rodrigues(this.rotationMatrix,r);var n=new this.cv.Mat;this.cv.gemm(r.inv(3),this.k.inv(3),1,new this.cv.Mat,0,n),this.cv.gemm(n,t,1,new this.cv.Mat,0,n);var o=new this.cv.Mat;this.cv.gemm(r.inv(3),this.translationMatrix,1,new this.cv.Mat,0,o);var i=0+o.data64F[2];i/=n.data64F[2];var a=new this.cv.Mat;return this.cv.gemm(this.k.inv(3),t,1,new this.cv.Mat,0,a),this.cv.multiply(a,new this.cv.matFromArray(4,1,this.cv.CV_64FC1,[i,0,0,0]),a),this.cv.subtract(a,this.translationMatrix,a),this.cv.gemm(r.inv(3),a,1,new this.cv.Mat,0,a),a.data64F}}])&&Qm(e.prototype,t),r&&Qm(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function zm(e){"@babel/helpers - typeof";return(zm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function qm(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Hm(Object(r),!0).forEach(function(t){Vm(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Hm(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Vm(e,t,r){return(t=Ym(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Km(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ym(n.key),n)}}function Ym(e){var t=function(e,t){if("object"!=zm(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=zm(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==zm(t)?t:t+""}var Jm=function(e){var t=e.videoPoint,r=e.originCoordsRightBottom,n=e.originCoordsLeftTop,o=e.videoHeight,i=e.videoWidth,a=Math.abs(r.lng-n.lng)/i,s=Math.abs(r.lat-n.lat)/o;return[t[0]*a+n.lng,n.lat-t[1]*s]},Wm=function(e,t){return t/(2*Math.tan(e/2*Math.PI/180))},Xm=function(e,t){return t/(2*Math.tan(e/2*Math.PI/180))},Zm=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=t.map(function(e){return Math.round(1e3*e)})},(t=[{key:"findNearest",value:function(e){for(var t=Math.round(1e3*e),r=t,n=t+3e3,o=-1,i=1/0,a=0;a<this.data.length;a++){var s=this.data[a];if(s>n)break;if(s>=r){var u=s-t;u<i&&(i=u,o=a)}}return-1!==o?{value:+(this.data[o]/1e3).toFixed(3)}:null}}])&&Km(e.prototype,t),r&&Km(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function $m(e){return qm(qm({},e),{},{time:+(e.time/1e3).toFixed(3)})}var eg=1,tg=2,rg=3,ng=4,og=5,ig=6378137,ag=6356752.314,sg=.0066943799901413165,ug=484813681109536e-20,lg=Math.PI/2,cg=.16666666666666666,fg=.04722222222222222,pg=.022156084656084655,hg=1e-10,yg=.017453292519943295,dg=57.29577951308232,mg=Math.PI/4,gg=2*Math.PI,vg=3.14159265359,bg={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},Ag={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.1},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}},wg=/[\s_\-\/\(\)]/g;function Sg(e,t){if(e[t])return e[t];for(var r,n=Object.keys(e),o=t.toLowerCase().replace(wg,""),i=-1;++i<n.length;)if((r=n[i]).toLowerCase().replace(wg,"")===o)return e[r]}function Cg(e){var t,r,n,o={},i=e.split("+").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,t){var r=t.split("=");return r.push(!0),e[r[0].toLowerCase()]=r[1],e},{}),a={proj:"projName",datum:"datumCode",rf:function(e){o.rf=parseFloat(e)},lat_0:function(e){o.lat0=e*yg},lat_1:function(e){o.lat1=e*yg},lat_2:function(e){o.lat2=e*yg},lat_ts:function(e){o.lat_ts=e*yg},lon_0:function(e){o.long0=e*yg},lon_1:function(e){o.long1=e*yg},lon_2:function(e){o.long2=e*yg},alpha:function(e){o.alpha=parseFloat(e)*yg},gamma:function(e){o.rectified_grid_angle=parseFloat(e)*yg},lonc:function(e){o.longc=e*yg},x_0:function(e){o.x0=parseFloat(e)},y_0:function(e){o.y0=parseFloat(e)},k_0:function(e){o.k0=parseFloat(e)},k:function(e){o.k0=parseFloat(e)},a:function(e){o.a=parseFloat(e)},b:function(e){o.b=parseFloat(e)},r:function(e){o.a=o.b=parseFloat(e)},r_a:function(){o.R_A=!0},zone:function(e){o.zone=parseInt(e,10)},south:function(){o.utmSouth=!0},towgs84:function(e){o.datum_params=e.split(",").map(function(e){return parseFloat(e)})},to_meter:function(e){o.to_meter=parseFloat(e)},units:function(e){o.units=e;var t=Sg(Ag,e);t&&(o.to_meter=t.to_meter)},from_greenwich:function(e){o.from_greenwich=e*yg},pm:function(e){var t=Sg(bg,e);o.from_greenwich=(t||parseFloat(e))*yg},nadgrids:function(e){"@null"===e?o.datumCode="none":o.nadgrids=e},axis:function(e){3===e.length&&-1!=="ewnsud".indexOf(e.substr(0,1))&&-1!=="ewnsud".indexOf(e.substr(1,1))&&-1!=="ewnsud".indexOf(e.substr(2,1))&&(o.axis=e)},approx:function(){o.approx=!0}};for(t in i)r=i[t],t in a?"function"==typeof(n=a[t])?n(r):o[n]=r:o[t]=r;return"string"==typeof o.datumCode&&"WGS84"!==o.datumCode&&(o.datumCode=o.datumCode.toLowerCase()),o}function Eg(e){"@babel/helpers - typeof";return(Eg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ig(n.key),n)}}function Ig(e){var t=function(e,t){if("object"!=Eg(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Eg(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Eg(t)?t:t+""}var Og=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},r=[{key:"getId",value:function(e){var t=e.find(function(e){return Array.isArray(e)&&"ID"===e[0]});return t&&t.length>=3?{authority:t[1],code:parseInt(t[2],10)}:null}},{key:"convertUnit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unit";if(!e||e.length<3)return{type:t,name:"unknown",conversion_factor:null};var r=e[1],n=parseFloat(e[2])||null,o=e.find(function(e){return Array.isArray(e)&&"ID"===e[0]});return{type:t,name:r,conversion_factor:n,id:o?{authority:o[1],code:parseInt(o[2],10)}:null}}},{key:"convertAxis",value:function(e){var t,r=e[1]||"Unknown",n=r.match(/^\((.)\)$/);if(n){var o=n[1].toUpperCase();if("E"===o)t="east";else if("N"===o)t="north";else{if("U"!==o)throw new Error("Unknown axis abbreviation: ".concat(o));t="up"}}else t=e[2]?e[2].toLowerCase():"unknown";var i=e.find(function(e){return Array.isArray(e)&&"ORDER"===e[0]}),a=i?parseInt(i[1],10):null,s=e.find(function(e){return Array.isArray(e)&&("LENGTHUNIT"===e[0]||"ANGLEUNIT"===e[0]||"SCALEUNIT"===e[0])});return{name:r,direction:t,unit:this.convertUnit(s),order:a}}},{key:"extractAxes",value:function(e){var t=this;return e.filter(function(e){return Array.isArray(e)&&"AXIS"===e[0]}).map(function(e){return t.convertAxis(e)}).sort(function(e,t){return(e.order||0)-(t.order||0)})}},{key:"convert",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(e[0]){case"PROJCRS":r.type="ProjectedCRS",r.name=e[1],r.base_crs=e.find(function(e){return Array.isArray(e)&&"BASEGEOGCRS"===e[0]})?this.convert(e.find(function(e){return Array.isArray(e)&&"BASEGEOGCRS"===e[0]})):null,r.conversion=e.find(function(e){return Array.isArray(e)&&"CONVERSION"===e[0]})?this.convert(e.find(function(e){return Array.isArray(e)&&"CONVERSION"===e[0]})):null;var n=e.find(function(e){return Array.isArray(e)&&"CS"===e[0]});n&&(r.coordinate_system={type:n[1],axis:this.extractAxes(e)});var o=e.find(function(e){return Array.isArray(e)&&"LENGTHUNIT"===e[0]});if(o){var i=this.convertUnit(o);r.coordinate_system.unit=i}r.id=this.getId(e);break;case"BASEGEOGCRS":case"GEOGCRS":r.type="GeographicCRS",r.name=e[1];var a=e.find(function(e){return Array.isArray(e)&&("DATUM"===e[0]||"ENSEMBLE"===e[0])});if(a){var s=this.convert(a);"ENSEMBLE"===a[0]?r.datum_ensemble=s:r.datum=s;var u=e.find(function(e){return Array.isArray(e)&&"PRIMEM"===e[0]});u&&"Greenwich"!==u[1]&&(s.prime_meridian={name:u[1],longitude:parseFloat(u[2])})}r.coordinate_system={type:"ellipsoidal",axis:this.extractAxes(e)},r.id=this.getId(e);break;case"DATUM":r.type="GeodeticReferenceFrame",r.name=e[1],r.ellipsoid=e.find(function(e){return Array.isArray(e)&&"ELLIPSOID"===e[0]})?this.convert(e.find(function(e){return Array.isArray(e)&&"ELLIPSOID"===e[0]})):null;break;case"ENSEMBLE":r.type="DatumEnsemble",r.name=e[1],r.members=e.filter(function(e){return Array.isArray(e)&&"MEMBER"===e[0]}).map(function(e){return{type:"DatumEnsembleMember",name:e[1],id:t.getId(e)}});var l=e.find(function(e){return Array.isArray(e)&&"ENSEMBLEACCURACY"===e[0]});l&&(r.accuracy=parseFloat(l[1]));var c=e.find(function(e){return Array.isArray(e)&&"ELLIPSOID"===e[0]});c&&(r.ellipsoid=this.convert(c)),r.id=this.getId(e);break;case"ELLIPSOID":r.type="Ellipsoid",r.name=e[1],r.semi_major_axis=parseFloat(e[2]),r.inverse_flattening=parseFloat(e[3]);e.find(function(e){return Array.isArray(e)&&"LENGTHUNIT"===e[0]})&&this.convert(e.find(function(e){return Array.isArray(e)&&"LENGTHUNIT"===e[0]}),r);break;case"CONVERSION":r.type="Conversion",r.name=e[1],r.method=e.find(function(e){return Array.isArray(e)&&"METHOD"===e[0]})?this.convert(e.find(function(e){return Array.isArray(e)&&"METHOD"===e[0]})):null,r.parameters=e.filter(function(e){return Array.isArray(e)&&"PARAMETER"===e[0]}).map(function(e){return t.convert(e)});break;case"METHOD":r.type="Method",r.name=e[1],r.id=this.getId(e);break;case"PARAMETER":r.type="Parameter",r.name=e[1],r.value=parseFloat(e[2]),r.unit=this.convertUnit(e.find(function(e){return Array.isArray(e)&&("LENGTHUNIT"===e[0]||"ANGLEUNIT"===e[0]||"SCALEUNIT"===e[0])})),r.id=this.getId(e);break;case"BOUNDCRS":r.type="BoundCRS";var f=e.find(function(e){return Array.isArray(e)&&"SOURCECRS"===e[0]});if(f){var p=f.find(function(e){return Array.isArray(e)});r.source_crs=p?this.convert(p):null}var h=e.find(function(e){return Array.isArray(e)&&"TARGETCRS"===e[0]});if(h){var y=h.find(function(e){return Array.isArray(e)});r.target_crs=y?this.convert(y):null}var d=e.find(function(e){return Array.isArray(e)&&"ABRIDGEDTRANSFORMATION"===e[0]});r.transformation=d?this.convert(d):null;break;case"ABRIDGEDTRANSFORMATION":if(r.type="Transformation",r.name=e[1],r.method=e.find(function(e){return Array.isArray(e)&&"METHOD"===e[0]})?this.convert(e.find(function(e){return Array.isArray(e)&&"METHOD"===e[0]})):null,r.parameters=e.filter(function(e){return Array.isArray(e)&&("PARAMETER"===e[0]||"PARAMETERFILE"===e[0])}).map(function(e){return"PARAMETER"===e[0]?t.convert(e):"PARAMETERFILE"===e[0]?{name:e[1],value:e[2],id:{authority:"EPSG",code:8656}}:void 0}),7===r.parameters.length){var m=r.parameters[6];"Scale difference"===m.name&&(m.value=Math.round(1e12*(m.value-1))/1e6)}r.id=this.getId(e);break;case"AXIS":r.coordinate_system||(r.coordinate_system={type:"unspecified",axis:[]}),r.coordinate_system.axis.push(this.convertAxis(e));break;case"LENGTHUNIT":var g=this.convertUnit(e,"LinearUnit");r.coordinate_system&&r.coordinate_system.axis&&r.coordinate_system.axis.forEach(function(e){e.unit||(e.unit=g)}),g.conversion_factor&&1!==g.conversion_factor&&r.semi_major_axis&&(r.semi_major_axis={value:r.semi_major_axis,unit:g});break;default:r.keyword=e[0]}return r}}],(t=null)&&_g(e.prototype,t),r&&_g(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function xg(e){"@babel/helpers - typeof";return(xg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pg(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,kg(n.key),n)}}function kg(e){var t=function(e,t){if("object"!=xg(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=xg(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==xg(t)?t:t+""}function Tg(e,t,r){return t=Mg(t),function(e,t){if(t&&("object"==xg(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],Mg(e).constructor):t.apply(e,r))}function jg(){return(jg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=Mg(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function Mg(e){return(Mg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Bg(e,t){return(Bg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Ng=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Tg(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bg(e,t)}(t,Og),r=t,o=[{key:"convert",value:function(e){var r,n,o,i,a,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(r=t,n="convert",o=this,a=jg(Mg(1&(i=2)?r.prototype:r),n,o),2&i&&"function"==typeof a?function(e){return a.apply(o,e)}:a)([e,s]),s.coordinate_system&&"Cartesian"===s.coordinate_system.subtype&&delete s.coordinate_system,s.usage&&delete s.usage,s}}],(n=null)&&Pg(r.prototype,n),o&&Pg(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Rg(e){"@babel/helpers - typeof";return(Rg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lg(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Dg(n.key),n)}}function Dg(e){var t=function(e,t){if("object"!=Rg(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Rg(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Rg(t)?t:t+""}function Fg(e,t,r){return t=Gg(t),function(e,t){if(t&&("object"==Rg(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],Gg(e).constructor):t.apply(e,r))}function Qg(){return(Qg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=Gg(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function Gg(e){return(Gg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ug(e,t){return(Ug=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var zg=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Fg(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ug(e,t)}(t,Og),r=t,o=[{key:"convert",value:function(e){var r,n,o,i,a,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(r=t,n="convert",o=this,a=Qg(Gg(1&(i=2)?r.prototype:r),n,o),2&i&&"function"==typeof a?function(e){return a.apply(o,e)}:a)([e,s]);var u=e.find(function(e){return Array.isArray(e)&&"CS"===e[0]});u&&(s.coordinate_system={subtype:u[1],axis:this.extractAxes(e)});var l=e.find(function(e){return Array.isArray(e)&&"USAGE"===e[0]});if(l){var c=l.find(function(e){return Array.isArray(e)&&"SCOPE"===e[0]}),f=l.find(function(e){return Array.isArray(e)&&"AREA"===e[0]}),p=l.find(function(e){return Array.isArray(e)&&"BBOX"===e[0]});s.usage={},c&&(s.usage.scope=c[1]),f&&(s.usage.area=f[1]),p&&(s.usage.bbox=p.slice(1))}return s}}],(n=null)&&Lg(r.prototype,n),o&&Lg(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Hg(e){return("2019"===function(e){return e.find(function(e){return Array.isArray(e)&&"USAGE"===e[0]})?"2019":e.find(function(e){return Array.isArray(e)&&"CS"===e[0]})?"2015":("BOUNDCRS"===e[0]||"PROJCRS"===e[0]||e[0],"2015")}(e)?zg:Ng).convert(e)}var qg=function(e){return new Zg(e).output()},Vg=1,Kg=/\s/,Yg=/[A-Za-z]/,Jg=/[A-Za-z84_]/,Wg=/[,\]]/,Xg=/[\d\.E\-\+]/;function Zg(e){if("string"!=typeof e)throw new Error("not a string");this.text=e.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=Vg}function $g(e,t,r){Array.isArray(t)&&(r.unshift(t),t=null);var n=t?{}:e,o=r.reduce(function(e,t){return ev(t,e),e},n);t&&(e[t]=o)}function ev(e,t){if(Array.isArray(e)){var r=e.shift();if("PARAMETER"===r&&(r=e.shift()),1===e.length)return Array.isArray(e[0])?(t[r]={},void ev(e[0],t[r])):void(t[r]=e[0]);if(e.length)if("TOWGS84"!==r){if("AXIS"===r)return r in t||(t[r]=[]),void t[r].push(e);var n;switch(Array.isArray(r)||(t[r]={}),r){case"UNIT":case"PRIMEM":case"VERT_DATUM":return t[r]={name:e[0].toLowerCase(),convert:e[1]},void(3===e.length&&ev(e[2],t[r]));case"SPHEROID":case"ELLIPSOID":return t[r]={name:e[0],a:e[1],rf:e[2]},void(4===e.length&&ev(e[3],t[r]));case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":return e[0]=["name",e[0]],void $g(t,r,e);case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":return e[0]=["name",e[0]],$g(t,r,e),void(t[r].type=r);default:for(n=-1;++n<e.length;)if(!Array.isArray(e[n]))return ev(e,t[r]);return $g(t,r,e)}}else t[r]=e;else t[r]=!0}else t[e]=!0}Zg.prototype.readCharicter=function(){var e=this.text[this.place++];if(4!==this.state)for(;Kg.test(e);){if(this.place>=this.text.length)return;e=this.text[this.place++]}switch(this.state){case Vg:return this.neutral(e);case 2:return this.keyword(e);case 4:return this.quoted(e);case 5:return this.afterquote(e);case 3:return this.number(e);case-1:return}},Zg.prototype.afterquote=function(e){if('"'===e)return this.word+='"',void(this.state=4);if(Wg.test(e))return this.word=this.word.trim(),void this.afterItem(e);throw new Error("havn't handled \""+e+'" in afterquote yet, index '+this.place)},Zg.prototype.afterItem=function(e){return","===e?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=Vg)):"]"===e?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=Vg,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},Zg.prototype.number=function(e){if(!Xg.test(e)){if(Wg.test(e))return this.word=parseFloat(this.word),void this.afterItem(e);throw new Error("havn't handled \""+e+'" in number yet, index '+this.place)}this.word+=e},Zg.prototype.quoted=function(e){'"'!==e?this.word+=e:this.state=5},Zg.prototype.keyword=function(e){if(Jg.test(e))this.word+=e;else{if("["===e){var t=[];return t.push(this.word),this.level++,null===this.root?this.root=t:this.currentObject.push(t),this.stack.push(this.currentObject),this.currentObject=t,void(this.state=Vg)}if(!Wg.test(e))throw new Error("havn't handled \""+e+'" in keyword yet, index '+this.place);this.afterItem(e)}},Zg.prototype.neutral=function(e){if(Yg.test(e))return this.word=e,void(this.state=2);if('"'===e)return this.word="",void(this.state=4);if(Xg.test(e))return this.word=e,void(this.state=3);if(!Wg.test(e))throw new Error("havn't handled \""+e+'" in neutral yet, index '+this.place);this.afterItem(e)},Zg.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var tv=.017453292519943295;function rv(e){return e*tv}function nv(e){var t=(e.projName||"").toLowerCase().replace(/_/g," ");e.long0||!e.longc||"albers conic equal area"!==t&&"lambert azimuthal equal area"!==t||(e.long0=e.longc),e.lat_ts||!e.lat1||"stereographic south pole"!==t&&"polar stereographic (variant b)"!==t?e.lat_ts||!e.lat0||"polar stereographic"!==t&&"polar stereographic (variant a)"!==t||(e.lat_ts=e.lat0,e.lat0=rv(e.lat0>0?90:-90),delete e.lat1):(e.lat0=rv(e.lat1>0?90:-90),e.lat_ts=e.lat1,delete e.lat1)}function ov(e){"@babel/helpers - typeof";return(ov="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function iv(e){var t={units:null,to_meter:void 0};return"string"==typeof e?(t.units=e.toLowerCase(),"metre"===t.units&&(t.units="meter"),"meter"===t.units&&(t.to_meter=1)):e&&e.name&&(t.units=e.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.to_meter=e.conversion_factor),t}function av(e){return"object"===ov(e)?e.value*e.unit.conversion_factor:e}function sv(e,t){e.ellipsoid.radius?(t.a=e.ellipsoid.radius,t.rf=0):(t.a=av(e.ellipsoid.semi_major_axis),void 0!==e.ellipsoid.inverse_flattening?t.rf=e.ellipsoid.inverse_flattening:void 0!==e.ellipsoid.semi_major_axis&&void 0!==e.ellipsoid.semi_minor_axis&&(t.rf=t.a/(t.a-av(e.ellipsoid.semi_minor_axis))))}function uv(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e&&"object"===ov(e)?"BoundCRS"===e.type?(uv(e.source_crs,t),e.transformation&&(e.transformation.method&&"NTv2"===e.transformation.method.name?t.nadgrids=e.transformation.parameters[0].value:t.datum_params=e.transformation.parameters.map(function(e){return e.value})),t):(Object.keys(e).forEach(function(r){var n=e[r];if(null!==n)switch(r){case"name":if(t.srsCode)break;t.name=n,t.srsCode=n;break;case"type":"GeographicCRS"===n?t.projName="longlat":"ProjectedCRS"===n&&e.conversion&&e.conversion.method&&(t.projName=e.conversion.method.name);break;case"datum":case"datum_ensemble":n.ellipsoid&&(t.ellps=n.ellipsoid.name,sv(n,t)),n.prime_meridian&&(t.from_greenwich=n.prime_meridian.longitude*Math.PI/180);break;case"ellipsoid":t.ellps=n.name,sv(n,t);break;case"prime_meridian":t.long0=(n.longitude||0)*Math.PI/180;break;case"coordinate_system":if(n.axis)if(t.axis=n.axis.map(function(e){var t=e.direction;if("east"===t)return"e";if("north"===t)return"n";if("west"===t)return"w";if("south"===t)return"s";throw new Error("Unknown axis direction: ".concat(t))}).join("")+"u",n.unit){var o=iv(n.unit),i=o.units,a=o.to_meter;t.units=i,t.to_meter=a}else if(n.axis[0]&&n.axis[0].unit){var s=iv(n.axis[0].unit),u=s.units,l=s.to_meter;t.units=u,t.to_meter=l}break;case"id":n.authority&&n.code&&(t.title=n.authority+":"+n.code);break;case"conversion":n.method&&n.method.name&&(t.projName=n.method.name),n.parameters&&n.parameters.forEach(function(e){var r=e.name.toLowerCase().replace(/\s+/g,"_"),n=e.value;e.unit&&e.unit.conversion_factor?t[r]=n*e.unit.conversion_factor:"degree"===e.unit?t[r]=n*Math.PI/180:t[r]=n});break;case"unit":n.name&&(t.units=n.name.toLowerCase(),"metre"===t.units&&(t.units="meter")),n.conversion_factor&&(t.to_meter=n.conversion_factor);break;case"base_crs":uv(n,t),t.datumCode=n.id?n.id.authority+"_"+n.id.code:n.name}}),void 0!==t.latitude_of_false_origin&&(t.lat0=t.latitude_of_false_origin),void 0!==t.longitude_of_false_origin&&(t.long0=t.longitude_of_false_origin),void 0!==t.latitude_of_standard_parallel&&(t.lat0=t.latitude_of_standard_parallel,t.lat1=t.latitude_of_standard_parallel),void 0!==t.latitude_of_1st_standard_parallel&&(t.lat1=t.latitude_of_1st_standard_parallel),void 0!==t.latitude_of_2nd_standard_parallel&&(t.lat2=t.latitude_of_2nd_standard_parallel),void 0!==t.latitude_of_projection_centre&&(t.lat0=t.latitude_of_projection_centre),void 0!==t.longitude_of_projection_centre&&(t.longc=t.longitude_of_projection_centre),void 0!==t.easting_at_false_origin&&(t.x0=t.easting_at_false_origin),void 0!==t.northing_at_false_origin&&(t.y0=t.northing_at_false_origin),void 0!==t.latitude_of_natural_origin&&(t.lat0=t.latitude_of_natural_origin),void 0!==t.longitude_of_natural_origin&&(t.long0=t.longitude_of_natural_origin),void 0!==t.longitude_of_origin&&(t.long0=t.longitude_of_origin),void 0!==t.false_easting&&(t.x0=t.false_easting),t.easting_at_projection_centre&&(t.x0=t.easting_at_projection_centre),void 0!==t.false_northing&&(t.y0=t.false_northing),t.northing_at_projection_centre&&(t.y0=t.northing_at_projection_centre),void 0!==t.standard_parallel_1&&(t.lat1=t.standard_parallel_1),void 0!==t.standard_parallel_2&&(t.lat2=t.standard_parallel_2),void 0!==t.scale_factor_at_natural_origin&&(t.k0=t.scale_factor_at_natural_origin),void 0!==t.scale_factor_at_projection_centre&&(t.k0=t.scale_factor_at_projection_centre),void 0!==t.scale_factor_on_pseudo_standard_parallel&&(t.k0=t.scale_factor_on_pseudo_standard_parallel),void 0!==t.azimuth&&(t.alpha=t.azimuth),void 0!==t.azimuth_at_projection_centre&&(t.alpha=t.azimuth_at_projection_centre),t.angle_from_rectified_to_skew_grid&&(t.rectified_grid_angle=t.angle_from_rectified_to_skew_grid),nv(t),t):e}function lv(e){"@babel/helpers - typeof";return(lv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var cv=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function fv(e){if(e.AUTHORITY){var t=Object.keys(e.AUTHORITY)[0];t&&t in e.AUTHORITY&&(e.title=t+":"+e.AUTHORITY[t])}if("GEOGCS"===e.type?e.projName="longlat":"LOCAL_CS"===e.type?(e.projName="identity",e.local=!0):"object"===lv(e.PROJECTION)?e.projName=Object.keys(e.PROJECTION)[0]:e.projName=e.PROJECTION,e.AXIS){for(var r="",n=0,o=e.AXIS.length;n<o;++n){var i=[e.AXIS[n][0].toLowerCase(),e.AXIS[n][1].toLowerCase()];-1!==i[0].indexOf("north")||("y"===i[0]||"lat"===i[0])&&"north"===i[1]?r+="n":-1!==i[0].indexOf("south")||("y"===i[0]||"lat"===i[0])&&"south"===i[1]?r+="s":-1!==i[0].indexOf("east")||("x"===i[0]||"lon"===i[0])&&"east"===i[1]?r+="e":-1===i[0].indexOf("west")&&("x"!==i[0]&&"lon"!==i[0]||"west"!==i[1])||(r+="w")}2===r.length&&(r+="u"),3===r.length&&(e.axis=r)}e.UNIT&&(e.units=e.UNIT.name.toLowerCase(),"metre"===e.units&&(e.units="meter"),e.UNIT.convert&&("GEOGCS"===e.type?e.DATUM&&e.DATUM.SPHEROID&&(e.to_meter=e.UNIT.convert*e.DATUM.SPHEROID.a):e.to_meter=e.UNIT.convert));var a=e.GEOGCS;function s(t){return t*(e.to_meter||1)}"GEOGCS"===e.type&&(a=e),a&&(a.DATUM?e.datumCode=a.DATUM.name.toLowerCase():e.datumCode=a.name.toLowerCase(),"d_"===e.datumCode.slice(0,2)&&(e.datumCode=e.datumCode.slice(2)),"new_zealand_1949"===e.datumCode&&(e.datumCode="nzgd49"),"wgs_1984"!==e.datumCode&&"world_geodetic_system_1984"!==e.datumCode||("Mercator_Auxiliary_Sphere"===e.PROJECTION&&(e.sphere=!0),e.datumCode="wgs84"),"belge_1972"===e.datumCode&&(e.datumCode="rnb72"),a.DATUM&&a.DATUM.SPHEROID&&(e.ellps=a.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===e.ellps.toLowerCase().slice(0,13)&&(e.ellps="intl"),e.a=a.DATUM.SPHEROID.a,e.rf=parseFloat(a.DATUM.SPHEROID.rf,10)),a.DATUM&&a.DATUM.TOWGS84&&(e.datum_params=a.DATUM.TOWGS84),~e.datumCode.indexOf("osgb_1936")&&(e.datumCode="osgb36"),~e.datumCode.indexOf("osni_1952")&&(e.datumCode="osni52"),(~e.datumCode.indexOf("tm65")||~e.datumCode.indexOf("geodetic_datum_of_1965"))&&(e.datumCode="ire65"),"ch1903+"===e.datumCode&&(e.datumCode="ch1903"),~e.datumCode.indexOf("israel")&&(e.datumCode="isr93")),e.b&&!isFinite(e.b)&&(e.b=e.a),e.rectified_grid_angle&&(e.rectified_grid_angle=rv(e.rectified_grid_angle));[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",rv],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",rv],["x0","false_easting",s],["y0","false_northing",s],["long0","central_meridian",rv],["lat0","latitude_of_origin",rv],["lat0","standard_parallel_1",rv],["lat1","standard_parallel_1",rv],["lat2","standard_parallel_2",rv],["azimuth","Azimuth"],["alpha","azimuth",rv],["srsCode","name"]].forEach(function(t){return r=e,o=(n=t)[0],i=n[1],void(!(o in r)&&i in r&&(r[o]=r[i],3===n.length&&(r[o]=n[2](r[o]))));var r,n,o,i}),nv(e)}function pv(e){if("object"===lv(e))return uv(e);var t=function(e){var t=e.toUpperCase();return t.includes("PROJCRS")||t.includes("GEOGCRS")||t.includes("BOUNDCRS")||t.includes("VERTCRS")||t.includes("LENGTHUNIT")||t.includes("ANGLEUNIT")||t.includes("SCALEUNIT")?"WKT2":(t.includes("PROJCS")||t.includes("GEOGCS")||t.includes("LOCAL_CS")||t.includes("VERT_CS")||t.includes("UNIT"),"WKT1")}(e),r=qg(e);if("WKT2"===t)return uv(Hg(r));var n=r[0],o={};return ev(r,o),function e(t){for(var r=Object.keys(t),n=0,o=r.length;n<o;++n){var i=r[n];-1!==cv.indexOf(i)&&fv(t[i]),"object"===lv(t[i])&&e(t[i])}}(o),o[n]}function hv(e){var t=this;if(2===arguments.length){var r=arguments[1];"string"==typeof r?"+"===r.charAt(0)?hv[e]=Cg(arguments[1]):hv[e]=pv(arguments[1]):hv[e]=r}else if(1===arguments.length){if(Array.isArray(e))return e.map(function(e){Array.isArray(e)?hv.apply(t,e):hv(e)});if("string"==typeof e){if(e in hv)return hv[e]}else"EPSG"in e?hv["EPSG:"+e.EPSG]=e:"ESRI"in e?hv["ESRI:"+e.ESRI]=e:"IAU2000"in e?hv["IAU2000:"+e.IAU2000]=e:console.log(e);return}}!function(e){e("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),e("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),e("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var t=1;t<=60;++t)e("EPSG:"+(32600+t),"+proj=utm +zone="+t+" +datum=WGS84 +units=m"),e("EPSG:"+(32700+t),"+proj=utm +zone="+t+" +south +datum=WGS84 +units=m");e.WGS84=e["EPSG:4326"],e["EPSG:3785"]=e["EPSG:3857"],e.GOOGLE=e["EPSG:3857"],e["EPSG:900913"]=e["EPSG:3857"],e["EPSG:102113"]=e["EPSG:3857"]}(hv);var yv=hv;var dv=["3857","900913","3785","102113"];var mv=function(e){if(!function(e){return"string"==typeof e}(e))return e.projName?e:pv(e);if(function(e){return e in yv}(e))return yv[e];if(function(e){return 0!==e.indexOf("+")&&-1!==e.indexOf("[")||"object"==typeof e&&!("srsCode"in e)}(e)){var t=pv(e);if(function(e){var t=Sg(e,"authority");if(t){var r=Sg(t,"epsg");return r&&dv.indexOf(r)>-1}}(t))return yv["EPSG:3857"];var r=function(e){var t=Sg(e,"extension");if(t)return Sg(t,"proj4")}(t);return r?Cg(r):t}return function(e){return"+"===e[0]}(e)?Cg(e):void 0};function gv(e,t){var r,n;if(e=e||{},!t)return e;for(n in t)void 0!==(r=t[n])&&(e[n]=r);return e}function vv(e,t,r){var n=e*t;return r/Math.sqrt(1-n*n)}function bv(e){return e<0?-1:1}function Av(e){return Math.abs(e)<=vg?e:e-bv(e)*gg}function wv(e,t,r){var n=e*r,o=.5*e;return n=Math.pow((1-n)/(1+n),o),Math.tan(.5*(lg-t))/n}function Sv(e,t){for(var r,n,o=.5*e,i=lg-2*Math.atan(t),a=0;a<=15;a++)if(r=e*Math.sin(i),i+=n=lg-2*Math.atan(t*Math.pow((1-r)/(1+r),o))-i,Math.abs(n)<=1e-10)return i;return-9999}function Cv(e){return e}var Ev=[{init:function(){var e=this.b/this.a;this.es=1-e*e,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=vv(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(e){var t,r,n=e.x,o=e.y;if(o*dg>90&&o*dg<-90&&n*dg>180&&n*dg<-180)return null;if(Math.abs(Math.abs(o)-lg)<=hg)return null;if(this.sphere)t=this.x0+this.a*this.k0*Av(n-this.long0),r=this.y0+this.a*this.k0*Math.log(Math.tan(mg+.5*o));else{var i=Math.sin(o),a=wv(this.e,o,i);t=this.x0+this.a*this.k0*Av(n-this.long0),r=this.y0-this.a*this.k0*Math.log(a)}return e.x=t,e.y=r,e},inverse:function(e){var t,r,n=e.x-this.x0,o=e.y-this.y0;if(this.sphere)r=lg-2*Math.atan(Math.exp(-o/(this.a*this.k0)));else{var i=Math.exp(-o/(this.a*this.k0));if(-9999===(r=Sv(this.e,i)))return null}return t=Av(this.long0+n/(this.a*this.k0)),e.x=t,e.y=r,e},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","Mercator_Variant_A","merc"]},{init:function(){},forward:Cv,inverse:Cv,names:["longlat","identity"]}],_v={},Iv=[];function Ov(e,t){var r=Iv.length;return e.names?(Iv[r]=e,e.names.forEach(function(e){_v[e.toLowerCase()]=r}),this):(console.log(t),!0)}function xv(e){return e.replace(/[-\(\)\s]+/g," ").trim().replace(/ /g,"_")}var Pv={start:function(){Ev.forEach(Ov)},add:Ov,get:function(e){if(!e)return!1;var t=e.toLowerCase();return void 0!==_v[t]&&Iv[_v[t]]?Iv[_v[t]]:(t=xv(t))in _v&&Iv[_v[t]]?Iv[_v[t]]:void 0}},kv={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:6378249.2,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"},WGS84:{a:6378137,rf:298.257223563,ellipseName:"WGS 84"},sphere:{a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}};const Tv=kv.WGS84;var jv={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"},EPSG_5451:{towgs84:"6.41,-49.05,-11.28,1.5657,0.5242,6.9718,-5.7649"},IGNF_LURESG:{towgs84:"-192.986,13.673,-39.309,-0.4099,-2.9332,2.6881,0.43"},EPSG_4614:{towgs84:"-119.4248,-303.65872,-11.00061,1.164298,0.174458,1.096259,3.657065"},EPSG_4615:{towgs84:"-494.088,-312.129,279.877,-1.423,-1.013,1.59,-0.748"},ESRI_37241:{towgs84:"-76.822,257.457,-12.817,2.136,-0.033,-2.392,-0.031"},ESRI_37249:{towgs84:"-440.296,58.548,296.265,1.128,10.202,4.559,-0.438"},ESRI_37245:{towgs84:"-511.151,-181.269,139.609,1.05,2.703,1.798,3.071"},EPSG_4178:{towgs84:"24.9,-126.4,-93.2,-0.063,-0.247,-0.041,1.01"},EPSG_4622:{towgs84:"-472.29,-5.63,-304.12,0.4362,-0.8374,0.2563,1.8984"},EPSG_4625:{towgs84:"126.93,547.94,130.41,-2.7867,5.1612,-0.8584,13.8227"},EPSG_5252:{towgs84:"0.023,0.036,-0.068,0.00176,0.00912,-0.01136,0.00439"},EPSG_4314:{towgs84:"597.1,71.4,412.1,0.894,0.068,-1.563,7.58"},EPSG_4282:{towgs84:"-178.3,-316.7,-131.5,5.278,6.077,10.979,19.166"},EPSG_4231:{towgs84:"-83.11,-97.38,-117.22,0.0276,-0.2167,0.2147,0.1218"},EPSG_4274:{towgs84:"-230.994,102.591,25.199,0.633,-0.239,0.9,1.95"},EPSG_4134:{towgs84:"-180.624,-225.516,173.919,-0.81,-1.898,8.336,16.71006"},EPSG_4254:{towgs84:"18.38,192.45,96.82,0.056,-0.142,-0.2,-0.0013"},EPSG_4159:{towgs84:"-194.513,-63.978,-25.759,-3.4027,3.756,-3.352,-0.9175"},EPSG_4687:{towgs84:"0.072,-0.507,-0.245,0.0183,-0.0003,0.007,-0.0093"},EPSG_4227:{towgs84:"-83.58,-397.54,458.78,-17.595,-2.847,4.256,3.225"},EPSG_4746:{towgs84:"599.4,72.4,419.2,-0.062,-0.022,-2.723,6.46"},EPSG_4745:{towgs84:"612.4,77,440.2,-0.054,0.057,-2.797,2.55"},EPSG_6311:{towgs84:"8.846,-4.394,-1.122,-0.00237,-0.146528,0.130428,0.783926"},EPSG_4289:{towgs84:"565.7381,50.4018,465.2904,-1.91514,1.60363,-9.09546,4.07244"},EPSG_4230:{towgs84:"-68.863,-134.888,-111.49,-0.53,-0.14,0.57,-3.4"},EPSG_4154:{towgs84:"-123.02,-158.95,-168.47"},EPSG_4156:{towgs84:"570.8,85.7,462.8,4.998,1.587,5.261,3.56"},EPSG_4299:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4179:{towgs84:"33.4,-146.6,-76.3,-0.359,-0.053,0.844,-0.84"},EPSG_4313:{towgs84:"-106.8686,52.2978,-103.7239,0.3366,-0.457,1.8422,-1.2747"},EPSG_4194:{towgs84:"163.511,127.533,-159.789"},EPSG_4195:{towgs84:"105,326,-102.5"},EPSG_4196:{towgs84:"-45,417,-3.5"},EPSG_4611:{towgs84:"-162.619,-276.959,-161.764,0.067753,-2.243649,-1.158827,-1.094246"},EPSG_4633:{towgs84:"137.092,131.66,91.475,-1.9436,-11.5993,-4.3321,-7.4824"},EPSG_4641:{towgs84:"-408.809,366.856,-412.987,1.8842,-0.5308,2.1655,-121.0993"},EPSG_4643:{towgs84:"-480.26,-438.32,-643.429,16.3119,20.1721,-4.0349,-111.7002"},EPSG_4300:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4188:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4660:{towgs84:"982.6087,552.753,-540.873,32.39344,-153.25684,-96.2266,16.805"},EPSG_4662:{towgs84:"97.295,-263.247,310.882,-1.5999,0.8386,3.1409,13.3259"},EPSG_3906:{towgs84:"577.88891,165.22205,391.18289,4.9145,-0.94729,-13.05098,7.78664"},EPSG_4307:{towgs84:"-209.3622,-87.8162,404.6198,0.0046,3.4784,0.5805,-1.4547"},EPSG_6892:{towgs84:"-76.269,-16.683,68.562,-6.275,10.536,-4.286,-13.686"},EPSG_4690:{towgs84:"221.597,152.441,176.523,2.403,1.3893,0.884,11.4648"},EPSG_4691:{towgs84:"218.769,150.75,176.75,3.5231,2.0037,1.288,10.9817"},EPSG_4629:{towgs84:"72.51,345.411,79.241,-1.5862,-0.8826,-0.5495,1.3653"},EPSG_4630:{towgs84:"165.804,216.213,180.26,-0.6251,-0.4515,-0.0721,7.4111"},EPSG_4692:{towgs84:"217.109,86.452,23.711,0.0183,-0.0003,0.007,-0.0093"},EPSG_9333:{towgs84:"0,0,0,-8.393,0.749,-10.276,0"},EPSG_9059:{towgs84:"0,0,0"},EPSG_4312:{towgs84:"601.705,84.263,485.227,4.7354,1.3145,5.393,-2.3887"},EPSG_4123:{towgs84:"-96.062,-82.428,-121.753,4.801,0.345,-1.376,1.496"},EPSG_4309:{towgs84:"-124.45,183.74,44.64,-0.4384,0.5446,-0.9706,-2.1365"},ESRI_104106:{towgs84:"-283.088,-70.693,117.445,-1.157,0.059,-0.652,-4.058"},EPSG_4281:{towgs84:"-219.247,-73.802,269.529"},EPSG_4322:{towgs84:"0,0,4.5"},EPSG_4324:{towgs84:"0,0,1.9"},EPSG_4284:{towgs84:"43.822,-108.842,-119.585,1.455,-0.761,0.737,0.549"},EPSG_4277:{towgs84:"446.448,-125.157,542.06,0.15,0.247,0.842,-20.489"},EPSG_4207:{towgs84:"-282.1,-72.2,120,-1.529,0.145,-0.89,-4.46"},EPSG_4688:{towgs84:"347.175,1077.618,2623.677,33.9058,-70.6776,9.4013,186.0647"},EPSG_4689:{towgs84:"410.793,54.542,80.501,-2.5596,-2.3517,-0.6594,17.3218"},EPSG_4720:{towgs84:"0,0,4.5"},EPSG_4273:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},EPSG_4240:{towgs84:"204.64,834.74,293.8"},EPSG_4817:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},ESRI_104131:{towgs84:"426.62,142.62,460.09,4.98,4.49,-12.42,-17.1"},EPSG_4265:{towgs84:"-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68"},EPSG_4263:{towgs84:"-111.92,-87.85,114.5,1.875,0.202,0.219,0.032"},EPSG_4298:{towgs84:"-689.5937,623.84046,-65.93566,-0.02331,1.17094,-0.80054,5.88536"},EPSG_4270:{towgs84:"-253.4392,-148.452,386.5267,0.15605,0.43,-0.1013,-0.0424"},EPSG_4229:{towgs84:"-121.8,98.1,-10.7"},EPSG_4220:{towgs84:"-55.5,-348,-229.2"},EPSG_4214:{towgs84:"12.646,-155.176,-80.863"},EPSG_4232:{towgs84:"-345,3,223"},EPSG_4238:{towgs84:"-1.977,-13.06,-9.993,0.364,0.254,0.689,-1.037"},EPSG_4168:{towgs84:"-170,33,326"},EPSG_4131:{towgs84:"199,931,318.9"},EPSG_4152:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_5228:{towgs84:"572.213,85.334,461.94,4.9732,1.529,5.2484,3.5378"},EPSG_8351:{towgs84:"485.021,169.465,483.839,7.786342,4.397554,4.102655,0"},EPSG_4683:{towgs84:"-127.62,-67.24,-47.04,-3.068,4.903,1.578,-1.06"},EPSG_4133:{towgs84:"0,0,0"},EPSG_7373:{towgs84:"0.819,-0.5762,-1.6446,-0.00378,-0.03317,0.00318,0.0693"},EPSG_9075:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9072:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9294:{towgs84:"1.16835,-1.42001,-2.24431,-0.00822,-0.05508,0.01818,0.23388"},EPSG_4212:{towgs84:"-267.434,173.496,181.814,-13.4704,8.7154,7.3926,14.7492"},EPSG_4191:{towgs84:"-44.183,-0.58,-38.489,2.3867,2.7072,-3.5196,-8.2703"},EPSG_4237:{towgs84:"52.684,-71.194,-13.975,-0.312,-0.1063,-0.3729,1.0191"},EPSG_4740:{towgs84:"-1.08,-0.27,-0.9"},EPSG_4124:{towgs84:"419.3836,99.3335,591.3451,0.850389,1.817277,-7.862238,-0.99496"},EPSG_5681:{towgs84:"584.9636,107.7175,413.8067,1.1155,0.2824,-3.1384,7.9922"},EPSG_4141:{towgs84:"23.772,17.49,17.859,-0.3132,-1.85274,1.67299,-5.4262"},EPSG_4204:{towgs84:"-85.645,-273.077,-79.708,2.289,-1.421,2.532,3.194"},EPSG_4319:{towgs84:"226.702,-193.337,-35.371,-2.229,-4.391,9.238,0.9798"},EPSG_4200:{towgs84:"24.82,-131.21,-82.66"},EPSG_4130:{towgs84:"0,0,0"},EPSG_4127:{towgs84:"-82.875,-57.097,-156.768,-2.158,1.524,-0.982,-0.359"},EPSG_4149:{towgs84:"674.374,15.056,405.346"},EPSG_4617:{towgs84:"-0.991,1.9072,0.5129,1.25033e-7,4.6785e-8,5.6529e-8,0"},EPSG_4663:{towgs84:"-210.502,-66.902,-48.476,2.094,-15.067,-5.817,0.485"},EPSG_4664:{towgs84:"-211.939,137.626,58.3,-0.089,0.251,0.079,0.384"},EPSG_4665:{towgs84:"-105.854,165.589,-38.312,-0.003,-0.026,0.024,-0.048"},EPSG_4666:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},EPSG_4756:{towgs84:"-192.873,-39.382,-111.202,-0.00205,-0.0005,0.00335,0.0188"},EPSG_4723:{towgs84:"-179.483,-69.379,-27.584,-7.862,8.163,6.042,-13.925"},EPSG_4726:{towgs84:"8.853,-52.644,180.304,-0.393,-2.323,2.96,-24.081"},EPSG_4267:{towgs84:"-8.0,160.0,176.0"},EPSG_5365:{towgs84:"-0.16959,0.35312,0.51846,0.03385,-0.16325,0.03446,0.03693"},EPSG_4218:{towgs84:"304.5,306.5,-318.1"},EPSG_4242:{towgs84:"-33.722,153.789,94.959,-8.581,-4.478,4.54,8.95"},EPSG_4216:{towgs84:"-292.295,248.758,429.447,4.9971,2.99,6.6906,1.0289"},ESRI_104105:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},ESRI_104129:{towgs84:"0,0,0"},EPSG_4673:{towgs84:"174.05,-25.49,112.57"},EPSG_4202:{towgs84:"-124,-60,154"},EPSG_4203:{towgs84:"-117.763,-51.51,139.061,0.292,0.443,0.277,-0.191"},EPSG_3819:{towgs84:"595.48,121.69,515.35,4.115,-2.9383,0.853,-3.408"},EPSG_8694:{towgs84:"-93.799,-132.737,-219.073,-1.844,0.648,-6.37,-0.169"},EPSG_4145:{towgs84:"275.57,676.78,229.6"},EPSG_4283:{towgs84:"61.55,-10.87,-40.19,39.4924,32.7221,32.8979,-9.994"},EPSG_4317:{towgs84:"2.3287,-147.0425,-92.0802,-0.3092483,0.32482185,0.49729934,5.68906266"},EPSG_4272:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993"},EPSG_4248:{towgs84:"-307.7,265.3,-363.5"},EPSG_5561:{towgs84:"24,-121,-76"},EPSG_5233:{towgs84:"-0.293,766.95,87.713,0.195704,1.695068,3.473016,-0.039338"},ESRI_104130:{towgs84:"-86,-98,-119"},ESRI_104102:{towgs84:"682,-203,480"},ESRI_37207:{towgs84:"7,-10,-26"},EPSG_4675:{towgs84:"59.935,118.4,-10.871"},ESRI_104109:{towgs84:"-89.121,-348.182,260.871"},ESRI_104112:{towgs84:"-185.583,-230.096,281.361"},ESRI_104113:{towgs84:"25.1,-275.6,222.6"},IGNF_WGS72G:{towgs84:"0,12,6"},IGNF_NTFG:{towgs84:"-168,-60,320"},IGNF_EFATE57G:{towgs84:"-127,-769,472"},IGNF_PGP50G:{towgs84:"324.8,153.6,172.1"},IGNF_REUN47G:{towgs84:"94,-948,-1262"},IGNF_CSG67G:{towgs84:"-186,230,110"},IGNF_GUAD48G:{towgs84:"-467,-16,-300"},IGNF_TAHI51G:{towgs84:"162,117,154"},IGNF_TAHAAG:{towgs84:"65,342,77"},IGNF_NUKU72G:{towgs84:"84,274,65"},IGNF_PETRELS72G:{towgs84:"365,194,166"},IGNF_WALL78G:{towgs84:"253,-133,-127"},IGNF_MAYO50G:{towgs84:"-382,-59,-262"},IGNF_TANNAG:{towgs84:"-139,-967,436"},IGNF_IGN72G:{towgs84:"-13,-348,292"},IGNF_ATIGG:{towgs84:"1118,23,66"},IGNF_FANGA84G:{towgs84:"150.57,158.33,118.32"},IGNF_RUSAT84G:{towgs84:"202.13,174.6,-15.74"},IGNF_KAUE70G:{towgs84:"126.74,300.1,-75.49"},IGNF_MOP90G:{towgs84:"-10.8,-1.8,12.77"},IGNF_MHPF67G:{towgs84:"338.08,212.58,-296.17"},IGNF_TAHI79G:{towgs84:"160.61,116.05,153.69"},IGNF_ANAA92G:{towgs84:"1.5,3.84,4.81"},IGNF_MARQUI72G:{towgs84:"330.91,-13.92,58.56"},IGNF_APAT86G:{towgs84:"143.6,197.82,74.05"},IGNF_TUBU69G:{towgs84:"237.17,171.61,-77.84"},IGNF_STPM50G:{towgs84:"11.363,424.148,373.13"},EPSG_4150:{towgs84:"674.374,15.056,405.346"},EPSG_4754:{towgs84:"-208.4058,-109.8777,-2.5764"},ESRI_104101:{towgs84:"374,150,588"},EPSG_4693:{towgs84:"0,-0.15,0.68"},EPSG_6207:{towgs84:"293.17,726.18,245.36"},EPSG_4153:{towgs84:"-133.63,-157.5,-158.62"},EPSG_4132:{towgs84:"-241.54,-163.64,396.06"},EPSG_4221:{towgs84:"-154.5,150.7,100.4"},EPSG_4266:{towgs84:"-80.7,-132.5,41.1"},EPSG_4193:{towgs84:"-70.9,-151.8,-41.4"},EPSG_5340:{towgs84:"-0.41,0.46,-0.35"},EPSG_4246:{towgs84:"-294.7,-200.1,525.5"},EPSG_4318:{towgs84:"-3.2,-5.7,2.8"},EPSG_4121:{towgs84:"-199.87,74.79,246.62"},EPSG_4223:{towgs84:"-260.1,5.5,432.2"},EPSG_4158:{towgs84:"-0.465,372.095,171.736"},EPSG_4285:{towgs84:"-128.16,-282.42,21.93"},EPSG_4613:{towgs84:"-404.78,685.68,45.47"},EPSG_4607:{towgs84:"195.671,332.517,274.607"},EPSG_4475:{towgs84:"-381.788,-57.501,-256.673"},EPSG_4208:{towgs84:"-157.84,308.54,-146.6"},EPSG_4743:{towgs84:"70.995,-335.916,262.898"},EPSG_4710:{towgs84:"-323.65,551.39,-491.22"},EPSG_7881:{towgs84:"-0.077,0.079,0.086"},EPSG_4682:{towgs84:"283.729,735.942,261.143"},EPSG_4739:{towgs84:"-156,-271,-189"},EPSG_4679:{towgs84:"-80.01,253.26,291.19"},EPSG_4750:{towgs84:"-56.263,16.136,-22.856"},EPSG_4644:{towgs84:"-10.18,-350.43,291.37"},EPSG_4695:{towgs84:"-103.746,-9.614,-255.95"},EPSG_4292:{towgs84:"-355,21,72"},EPSG_4302:{towgs84:"-61.702,284.488,472.052"},EPSG_4143:{towgs84:"-124.76,53,466.79"},EPSG_4606:{towgs84:"-153,153,307"},EPSG_4699:{towgs84:"-770.1,158.4,-498.2"},EPSG_4247:{towgs84:"-273.5,110.6,-357.9"},EPSG_4160:{towgs84:"8.88,184.86,106.69"},EPSG_4161:{towgs84:"-233.43,6.65,173.64"},EPSG_9251:{towgs84:"-9.5,122.9,138.2"},EPSG_9253:{towgs84:"-78.1,101.6,133.3"},EPSG_4297:{towgs84:"-198.383,-240.517,-107.909"},EPSG_4269:{towgs84:"0,0,0"},EPSG_4301:{towgs84:"-147,506,687"},EPSG_4618:{towgs84:"-59,-11,-52"},EPSG_4612:{towgs84:"0,0,0"},EPSG_4678:{towgs84:"44.585,-131.212,-39.544"},EPSG_4250:{towgs84:"-130,29,364"},EPSG_4144:{towgs84:"214,804,268"},EPSG_4147:{towgs84:"-17.51,-108.32,-62.39"},EPSG_4259:{towgs84:"-254.1,-5.36,-100.29"},EPSG_4164:{towgs84:"-76,-138,67"},EPSG_4211:{towgs84:"-378.873,676.002,-46.255"},EPSG_4182:{towgs84:"-422.651,-172.995,84.02"},EPSG_4224:{towgs84:"-143.87,243.37,-33.52"},EPSG_4225:{towgs84:"-205.57,168.77,-4.12"},EPSG_5527:{towgs84:"-67.35,3.88,-38.22"},EPSG_4752:{towgs84:"98,390,-22"},EPSG_4310:{towgs84:"-30,190,89"},EPSG_9248:{towgs84:"-192.26,65.72,132.08"},EPSG_4680:{towgs84:"124.5,-63.5,-281"},EPSG_4701:{towgs84:"-79.9,-158,-168.9"},EPSG_4706:{towgs84:"-146.21,112.63,4.05"},EPSG_4805:{towgs84:"682,-203,480"},EPSG_4201:{towgs84:"-165,-11,206"},EPSG_4210:{towgs84:"-157,-2,-299"},EPSG_4183:{towgs84:"-104,167,-38"},EPSG_4139:{towgs84:"11,72,-101"},EPSG_4668:{towgs84:"-86,-98,-119"},EPSG_4717:{towgs84:"-2,151,181"},EPSG_4732:{towgs84:"102,52,-38"},EPSG_4280:{towgs84:"-377,681,-50"},EPSG_4209:{towgs84:"-138,-105,-289"},EPSG_4261:{towgs84:"31,146,47"},EPSG_4658:{towgs84:"-73,46,-86"},EPSG_4721:{towgs84:"265.025,384.929,-194.046"},EPSG_4222:{towgs84:"-136,-108,-292"},EPSG_4601:{towgs84:"-255,-15,71"},EPSG_4602:{towgs84:"725,685,536"},EPSG_4603:{towgs84:"72,213.7,93"},EPSG_4605:{towgs84:"9,183,236"},EPSG_4621:{towgs84:"137,248,-430"},EPSG_4657:{towgs84:"-28,199,5"},EPSG_4316:{towgs84:"103.25,-100.4,-307.19"},EPSG_4642:{towgs84:"-13,-348,292"},EPSG_4698:{towgs84:"145,-187,103"},EPSG_4192:{towgs84:"-206.1,-174.7,-87.7"},EPSG_4311:{towgs84:"-265,120,-358"},EPSG_4135:{towgs84:"58,-283,-182"},ESRI_104138:{towgs84:"198,-226,-347"},EPSG_4245:{towgs84:"-11,851,5"},EPSG_4142:{towgs84:"-125,53,467"},EPSG_4213:{towgs84:"-106,-87,188"},EPSG_4253:{towgs84:"-133,-77,-51"},EPSG_4129:{towgs84:"-132,-110,-335"},EPSG_4713:{towgs84:"-77,-128,142"},EPSG_4239:{towgs84:"217,823,299"},EPSG_4146:{towgs84:"295,736,257"},EPSG_4155:{towgs84:"-83,37,124"},EPSG_4165:{towgs84:"-173,253,27"},EPSG_4672:{towgs84:"175,-38,113"},EPSG_4236:{towgs84:"-637,-549,-203"},EPSG_4251:{towgs84:"-90,40,88"},EPSG_4271:{towgs84:"-2,374,172"},EPSG_4175:{towgs84:"-88,4,101"},EPSG_4716:{towgs84:"298,-304,-375"},EPSG_4315:{towgs84:"-23,259,-9"},EPSG_4744:{towgs84:"-242.2,-144.9,370.3"},EPSG_4244:{towgs84:"-97,787,86"},EPSG_4293:{towgs84:"616,97,-251"},EPSG_4714:{towgs84:"-127,-769,472"},EPSG_4736:{towgs84:"260,12,-147"},EPSG_6883:{towgs84:"-235,-110,393"},EPSG_6894:{towgs84:"-63,176,185"},EPSG_4205:{towgs84:"-43,-163,45"},EPSG_4256:{towgs84:"41,-220,-134"},EPSG_4262:{towgs84:"639,405,60"},EPSG_4604:{towgs84:"174,359,365"},EPSG_4169:{towgs84:"-115,118,426"},EPSG_4620:{towgs84:"-106,-129,165"},EPSG_4184:{towgs84:"-203,141,53"},EPSG_4616:{towgs84:"-289,-124,60"},EPSG_9403:{towgs84:"-307,-92,127"},EPSG_4684:{towgs84:"-133,-321,50"},EPSG_4708:{towgs84:"-491,-22,435"},EPSG_4707:{towgs84:"114,-116,-333"},EPSG_4709:{towgs84:"145,75,-272"},EPSG_4712:{towgs84:"-205,107,53"},EPSG_4711:{towgs84:"124,-234,-25"},EPSG_4718:{towgs84:"230,-199,-752"},EPSG_4719:{towgs84:"211,147,111"},EPSG_4724:{towgs84:"208,-435,-229"},EPSG_4725:{towgs84:"189,-79,-202"},EPSG_4735:{towgs84:"647,1777,-1124"},EPSG_4722:{towgs84:"-794,119,-298"},EPSG_4728:{towgs84:"-307,-92,127"},EPSG_4734:{towgs84:"-632,438,-609"},EPSG_4727:{towgs84:"912,-58,1227"},EPSG_4729:{towgs84:"185,165,42"},EPSG_4730:{towgs84:"170,42,84"},EPSG_4733:{towgs84:"276,-57,149"},ESRI_37218:{towgs84:"230,-199,-752"},ESRI_37240:{towgs84:"-7,215,225"},ESRI_37221:{towgs84:"252,-209,-751"},ESRI_4305:{towgs84:"-123,-206,219"},ESRI_104139:{towgs84:"-73,-247,227"},EPSG_4748:{towgs84:"51,391,-36"},EPSG_4219:{towgs84:"-384,664,-48"},EPSG_4255:{towgs84:"-333,-222,114"},EPSG_4257:{towgs84:"-587.8,519.75,145.76"},EPSG_4646:{towgs84:"-963,510,-359"},EPSG_6881:{towgs84:"-24,-203,268"},EPSG_6882:{towgs84:"-183,-15,273"},EPSG_4715:{towgs84:"-104,-129,239"},IGNF_RGF93GDD:{towgs84:"0,0,0"},IGNF_RGM04GDD:{towgs84:"0,0,0"},IGNF_RGSPM06GDD:{towgs84:"0,0,0"},IGNF_RGTAAF07GDD:{towgs84:"0,0,0"},IGNF_RGFG95GDD:{towgs84:"0,0,0"},IGNF_RGNCG:{towgs84:"0,0,0"},IGNF_RGPFGDD:{towgs84:"0,0,0"},IGNF_ETRS89G:{towgs84:"0,0,0"},IGNF_RGR92GDD:{towgs84:"0,0,0"},EPSG_4173:{towgs84:"0,0,0"},EPSG_4180:{towgs84:"0,0,0"},EPSG_4619:{towgs84:"0,0,0"},EPSG_4667:{towgs84:"0,0,0"},EPSG_4075:{towgs84:"0,0,0"},EPSG_6706:{towgs84:"0,0,0"},EPSG_7798:{towgs84:"0,0,0"},EPSG_4661:{towgs84:"0,0,0"},EPSG_4669:{towgs84:"0,0,0"},EPSG_8685:{towgs84:"0,0,0"},EPSG_4151:{towgs84:"0,0,0"},EPSG_9702:{towgs84:"0,0,0"},EPSG_4758:{towgs84:"0,0,0"},EPSG_4761:{towgs84:"0,0,0"},EPSG_4765:{towgs84:"0,0,0"},EPSG_8997:{towgs84:"0,0,0"},EPSG_4023:{towgs84:"0,0,0"},EPSG_4670:{towgs84:"0,0,0"},EPSG_4694:{towgs84:"0,0,0"},EPSG_4148:{towgs84:"0,0,0"},EPSG_4163:{towgs84:"0,0,0"},EPSG_4167:{towgs84:"0,0,0"},EPSG_4189:{towgs84:"0,0,0"},EPSG_4190:{towgs84:"0,0,0"},EPSG_4176:{towgs84:"0,0,0"},EPSG_4659:{towgs84:"0,0,0"},EPSG_3824:{towgs84:"0,0,0"},EPSG_3889:{towgs84:"0,0,0"},EPSG_4046:{towgs84:"0,0,0"},EPSG_4081:{towgs84:"0,0,0"},EPSG_4558:{towgs84:"0,0,0"},EPSG_4483:{towgs84:"0,0,0"},EPSG_5013:{towgs84:"0,0,0"},EPSG_5264:{towgs84:"0,0,0"},EPSG_5324:{towgs84:"0,0,0"},EPSG_5354:{towgs84:"0,0,0"},EPSG_5371:{towgs84:"0,0,0"},EPSG_5373:{towgs84:"0,0,0"},EPSG_5381:{towgs84:"0,0,0"},EPSG_5393:{towgs84:"0,0,0"},EPSG_5489:{towgs84:"0,0,0"},EPSG_5593:{towgs84:"0,0,0"},EPSG_6135:{towgs84:"0,0,0"},EPSG_6365:{towgs84:"0,0,0"},EPSG_5246:{towgs84:"0,0,0"},EPSG_7886:{towgs84:"0,0,0"},EPSG_8431:{towgs84:"0,0,0"},EPSG_8427:{towgs84:"0,0,0"},EPSG_8699:{towgs84:"0,0,0"},EPSG_8818:{towgs84:"0,0,0"},EPSG_4757:{towgs84:"0,0,0"},EPSG_9140:{towgs84:"0,0,0"},EPSG_8086:{towgs84:"0,0,0"},EPSG_4686:{towgs84:"0,0,0"},EPSG_4737:{towgs84:"0,0,0"},EPSG_4702:{towgs84:"0,0,0"},EPSG_4747:{towgs84:"0,0,0"},EPSG_4749:{towgs84:"0,0,0"},EPSG_4674:{towgs84:"0,0,0"},EPSG_4755:{towgs84:"0,0,0"},EPSG_4759:{towgs84:"0,0,0"},EPSG_4762:{towgs84:"0,0,0"},EPSG_4763:{towgs84:"0,0,0"},EPSG_4764:{towgs84:"0,0,0"},EPSG_4166:{towgs84:"0,0,0"},EPSG_4170:{towgs84:"0,0,0"},EPSG_5546:{towgs84:"0,0,0"},EPSG_7844:{towgs84:"0,0,0"},EPSG_4818:{towgs84:"589,76,480"}};for(var Mv in jv){var Bv=jv[Mv];Bv.datumName&&(jv[Bv.datumName]=Bv)}var Nv=jv;var Rv=function(e,t,r,n,o,i,a){var s={};return s.datum_type=void 0===e||"none"===e?og:ng,t&&(s.datum_params=t.map(parseFloat),0===s.datum_params[0]&&0===s.datum_params[1]&&0===s.datum_params[2]||(s.datum_type=eg),s.datum_params.length>3&&(0===s.datum_params[3]&&0===s.datum_params[4]&&0===s.datum_params[5]&&0===s.datum_params[6]||(s.datum_type=tg,s.datum_params[3]*=ug,s.datum_params[4]*=ug,s.datum_params[5]*=ug,s.datum_params[6]=s.datum_params[6]/1e6+1))),a&&(s.datum_type=rg,s.grids=a),s.a=r,s.b=n,s.es=o,s.ep2=i,s},Lv={};function Dv(e){if(0===e.length)return null;var t="@"===e[0];return t&&(e=e.slice(1)),"null"===e?{name:"null",mandatory:!t,grid:null,isNull:!0}:{name:e,mandatory:!t,grid:Lv[e]||null,isNull:!1}}function Fv(e){return e*Math.PI/180}function Qv(e){return e/3600*Math.PI/180}function Gv(e,t,r){return String.fromCharCode.apply(null,new Uint8Array(e.buffer.slice(t,r)))}function Uv(e){return e.map(function(e){return[Qv(e.longitudeShift),Qv(e.latitudeShift)]})}function zv(e,t,r){return{name:Gv(e,t+8,t+16).trim(),parent:Gv(e,t+24,t+24+8).trim(),lowerLatitude:e.getFloat64(t+72,r),upperLatitude:e.getFloat64(t+88,r),lowerLongitude:e.getFloat64(t+104,r),upperLongitude:e.getFloat64(t+120,r),latitudeInterval:e.getFloat64(t+136,r),longitudeInterval:e.getFloat64(t+152,r),gridNodeCount:e.getInt32(t+168,r)}}function Hv(e,t,r,n,o){var i=t+176,a=16;!1===o&&(a=8);for(var s=[],u=0;u<r.gridNodeCount;u++){var l={latitudeShift:e.getFloat32(i+u*a,n),longitudeShift:e.getFloat32(i+u*a+4,n)};!1!==o&&(l.latitudeAccuracy=e.getFloat32(i+u*a+8,n),l.longitudeAccuracy=e.getFloat32(i+u*a+12,n)),s.push(l)}return s}function qv(e,t){if(!(this instanceof qv))return new qv(e);t=t||function(e){if(e)throw e};var r=mv(e);if("object"==typeof r){var n=qv.projections.get(r.projName);if(n){if(r.datumCode&&"none"!==r.datumCode){var o=Sg(Nv,r.datumCode);o&&(r.datum_params=r.datum_params||(o.towgs84?o.towgs84.split(","):null),r.ellps=o.ellipse,r.datumName=o.datumName?o.datumName:r.datumCode)}r.k0=r.k0||1,r.axis=r.axis||"enu",r.ellps=r.ellps||"wgs84",r.lat1=r.lat1||r.lat0;var i,a,s,u,l,c,f,p=function(e,t,r,n,o){if(!e){var i=Sg(kv,n);i||(i=Tv),e=i.a,t=i.b,r=i.rf}return r&&!t&&(t=(1-1/r)*e),(0===r||Math.abs(e-t)<hg)&&(o=!0,t=e),{a:e,b:t,rf:r,sphere:o}}(r.a,r.b,r.rf,r.ellps,r.sphere),h=(i=p.a,a=p.b,p.rf,s=r.R_A,c=((u=i*i)-(l=a*a))/u,f=0,s?(u=(i*=1-c*(cg+c*(fg+c*pg)))*i,c=0):f=Math.sqrt(c),{es:c,e:f,ep2:(u-l)/l}),y=function(e){return void 0===e?null:e.split(",").map(Dv)}(r.nadgrids),d=r.datum||Rv(r.datumCode,r.datum_params,p.a,p.b,h.es,h.ep2,y);gv(this,r),gv(this,n),this.a=p.a,this.b=p.b,this.rf=p.rf,this.sphere=p.sphere,this.es=h.es,this.e=h.e,this.ep2=h.ep2,this.datum=d,this.init(),t(null,this)}else t("Could not get projection name from: "+e)}else t("Could not parse to valid json: "+e)}qv.projections=Pv,qv.projections.start();var Vv=qv;function Kv(e,t,r){var n,o,i,a,s=e.x,u=e.y,l=e.z?e.z:0;if(u<-lg&&u>-1.001*lg)u=-lg;else if(u>lg&&u<1.001*lg)u=lg;else{if(u<-lg)return{x:-1/0,y:-1/0,z:e.z};if(u>lg)return{x:1/0,y:1/0,z:e.z}}return s>Math.PI&&(s-=2*Math.PI),o=Math.sin(u),a=Math.cos(u),i=o*o,{x:((n=r/Math.sqrt(1-t*i))+l)*a*Math.cos(s),y:(n+l)*a*Math.sin(s),z:(n*(1-t)+l)*o}}function Yv(e,t,r,n){var o,i,a,s,u,l,c,f,p,h,y,d,m,g,v,b=e.x,A=e.y,w=e.z?e.z:0;if(o=Math.sqrt(b*b+A*A),i=Math.sqrt(b*b+A*A+w*w),o/r<1e-12){if(g=0,i/r<1e-12)return lg,v=-n,{x:e.x,y:e.y,z:e.z}}else g=Math.atan2(A,b);a=w/i,f=(s=o/i)*(1-t)*(u=1/Math.sqrt(1-t*(2-t)*s*s)),p=a*u,m=0;do{m++,l=t*(c=r/Math.sqrt(1-t*p*p))/(c+(v=o*f+w*p-c*(1-t*p*p))),d=(y=a*(u=1/Math.sqrt(1-l*(2-l)*s*s)))*f-(h=s*(1-l)*u)*p,f=h,p=y}while(d*d>1e-24&&m<30);return{x:g,y:Math.atan(y/Math.abs(h)),z:v}}function Jv(e){return e===eg||e===tg}function Wv(e,t,r){if(function(e,t){return e.datum_type===t.datum_type&&!(e.a!==t.a||Math.abs(e.es-t.es)>5e-11)&&(e.datum_type===eg?e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]:e.datum_type!==tg||e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]&&e.datum_params[3]===t.datum_params[3]&&e.datum_params[4]===t.datum_params[4]&&e.datum_params[5]===t.datum_params[5]&&e.datum_params[6]===t.datum_params[6])}(e,t))return r;if(e.datum_type===og||t.datum_type===og)return r;var n=e.a,o=e.es;if(e.datum_type===rg){if(0!==Xv(e,!1,r))return;n=ig,o=sg}var i=t.a,a=t.b,s=t.es;if(t.datum_type===rg&&(i=ig,a=ag,s=sg),o===s&&n===i&&!Jv(e.datum_type)&&!Jv(t.datum_type))return r;if((r=Kv(r,o,n),Jv(e.datum_type)&&(r=function(e,t,r){if(t===eg)return{x:e.x+r[0],y:e.y+r[1],z:e.z+r[2]};if(t===tg){var n=r[0],o=r[1],i=r[2],a=r[3],s=r[4],u=r[5],l=r[6];return{x:l*(e.x-u*e.y+s*e.z)+n,y:l*(u*e.x+e.y-a*e.z)+o,z:l*(-s*e.x+a*e.y+e.z)+i}}}(r,e.datum_type,e.datum_params)),Jv(t.datum_type)&&(r=function(e,t,r){if(t===eg)return{x:e.x-r[0],y:e.y-r[1],z:e.z-r[2]};if(t===tg){var n=r[0],o=r[1],i=r[2],a=r[3],s=r[4],u=r[5],l=r[6],c=(e.x-n)/l,f=(e.y-o)/l,p=(e.z-i)/l;return{x:c+u*f-s*p,y:-u*c+f+a*p,z:s*c-a*f+p}}}(r,t.datum_type,t.datum_params)),r=Yv(r,s,i,a),t.datum_type===rg)&&0!==Xv(t,!0,r))return;return r}function Xv(e,t,r){if(null===e.grids||0===e.grids.length)return console.log("Grid shift grids not found"),-1;var n={x:-r.x,y:r.y},o={x:Number.NaN,y:Number.NaN},i=[];e:for(var a=0;a<e.grids.length;a++){var s=e.grids[a];if(i.push(s.name),s.isNull){o=n;break}if(null!==s.grid)for(var u=s.grid.subgrids,l=0,c=u.length;l<c;l++){var f=u[l],p=(Math.abs(f.del[1])+Math.abs(f.del[0]))/1e4,h=f.ll[0]-p,y=f.ll[1]-p,d=f.ll[0]+(f.lim[0]-1)*f.del[0]+p,m=f.ll[1]+(f.lim[1]-1)*f.del[1]+p;if(!(y>n.y||h>n.x||m<n.y||d<n.x)&&(o=Zv(n,t,f),!isNaN(o.x)))break e}else if(s.mandatory)return console.log("Unable to find mandatory grid '"+s.name+"'"),-1}return isNaN(o.x)?(console.log("Failed to find a grid shift table for location '"+-n.x*dg+" "+n.y*dg+" tried: '"+i+"'"),-1):(r.x=-o.x,r.y=o.y,0)}function Zv(e,t,r){var n={x:Number.NaN,y:Number.NaN};if(isNaN(e.x))return n;var o={x:e.x,y:e.y};o.x-=r.ll[0],o.y-=r.ll[1],o.x=Av(o.x-Math.PI)+Math.PI;var i=$v(o,r);if(t){if(isNaN(i.x))return n;i.x=o.x-i.x,i.y=o.y-i.y;var a,s,u=9;do{if(s=$v(i,r),isNaN(s.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}a={x:o.x-(s.x+i.x),y:o.y-(s.y+i.y)},i.x+=a.x,i.y+=a.y}while(u--&&Math.abs(a.x)>1e-12&&Math.abs(a.y)>1e-12);if(u<0)return console.log("Inverse grid shift iterator failed to converge."),n;n.x=Av(i.x+r.ll[0]),n.y=i.y+r.ll[1]}else isNaN(i.x)||(n.x=e.x+i.x,n.y=e.y+i.y);return n}function $v(e,t){var r,n={x:e.x/t.del[0],y:e.y/t.del[1]},o=Math.floor(n.x),i=Math.floor(n.y),a=n.x-1*o,s=n.y-1*i,u={x:Number.NaN,y:Number.NaN};if(o<0||o>=t.lim[0])return u;if(i<0||i>=t.lim[1])return u;r=i*t.lim[0]+o;var l=t.cvs[r][0],c=t.cvs[r][1];r++;var f=t.cvs[r][0],p=t.cvs[r][1];r+=t.lim[0];var h=t.cvs[r][0],y=t.cvs[r][1];r--;var d=t.cvs[r][0],m=t.cvs[r][1],g=a*s,v=a*(1-s),b=(1-a)*(1-s),A=(1-a)*s;return u.x=b*l+v*f+A*d+g*h,u.y=b*c+v*p+A*m+g*y,u}function eb(e,t,r){var n,o,i,a=r.x,s=r.y,u=r.z||0,l={};for(i=0;i<3;i++)if(!t||2!==i||void 0!==r.z)switch(0===i?(n=a,o=-1!=="ew".indexOf(e.axis[i])?"x":"y"):1===i?(n=s,o=-1!=="ns".indexOf(e.axis[i])?"y":"x"):(n=u,o="z"),e.axis[i]){case"e":l[o]=n;break;case"w":l[o]=-n;break;case"n":l[o]=n;break;case"s":l[o]=-n;break;case"u":void 0!==r[o]&&(l.z=n);break;case"d":void 0!==r[o]&&(l.z=-n);break;default:return null}return l}function tb(e){var t={x:e[0],y:e[1]};return e.length>2&&(t.z=e[2]),e.length>3&&(t.m=e[3]),t}function rb(e){if("function"==typeof Number.isFinite){if(Number.isFinite(e))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof e||e!=e||!isFinite(e))throw new TypeError("coordinates must be finite numbers")}function nb(e,t,r,n){var o,i=void 0!==(r=Array.isArray(r)?tb(r):{x:r.x,y:r.y,z:r.z,m:r.m}).z;if(function(e){rb(e.x),rb(e.y)}(r),e.datum&&t.datum&&function(e,t){return(e.datum.datum_type===eg||e.datum.datum_type===tg||e.datum.datum_type===rg)&&"WGS84"!==t.datumCode||(t.datum.datum_type===eg||t.datum.datum_type===tg||t.datum.datum_type===rg)&&"WGS84"!==e.datumCode}(e,t)&&(r=nb(e,o=new Vv("WGS84"),r,n),e=o),n&&"enu"!==e.axis&&(r=eb(e,!1,r)),"longlat"===e.projName)r={x:r.x*yg,y:r.y*yg,z:r.z||0};else if(e.to_meter&&(r={x:r.x*e.to_meter,y:r.y*e.to_meter,z:r.z||0}),!(r=e.inverse(r)))return;if(e.from_greenwich&&(r.x+=e.from_greenwich),r=Wv(e.datum,t.datum,r))return t.from_greenwich&&(r={x:r.x-t.from_greenwich,y:r.y,z:r.z||0}),"longlat"===t.projName?r={x:r.x*dg,y:r.y*dg,z:r.z||0}:(r=t.forward(r),t.to_meter&&(r={x:r.x/t.to_meter,y:r.y/t.to_meter,z:r.z||0})),n&&"enu"!==t.axis?eb(t,!0,r):(r&&!i&&delete r.z,r)}var ob=Vv("WGS84");function ib(e,t,r,n){var o,i,a;return Array.isArray(r)?(o=nb(e,t,r,n)||{x:NaN,y:NaN},r.length>2?void 0!==e.name&&"geocent"===e.name||void 0!==t.name&&"geocent"===t.name?"number"==typeof o.z?[o.x,o.y,o.z].concat(r.slice(3)):[o.x,o.y,r[2]].concat(r.slice(3)):[o.x,o.y].concat(r.slice(2)):[o.x,o.y]):(i=nb(e,t,r,n),2===(a=Object.keys(r)).length?i:(a.forEach(function(n){if(void 0!==e.name&&"geocent"===e.name||void 0!==t.name&&"geocent"===t.name){if("x"===n||"y"===n||"z"===n)return}else if("x"===n||"y"===n)return;i[n]=r[n]}),i))}function ab(e){return e instanceof Vv?e:e.oProj?e.oProj:Vv(e)}var sb=function(e,t,r){e=ab(e);var n,o=!1;return void 0===t?(t=e,e=ob,o=!0):(void 0!==t.x||Array.isArray(t))&&(r=t,t=e,e=ob,o=!0),t=ab(t),r?ib(e,t,r):(n={forward:function(r,n){return ib(e,t,r,n)},inverse:function(r,n){return ib(t,e,r,n)}},o&&(n.oProj=t),n)},ub=6,lb="AJSAJS",cb="AFAFAF",fb=65,pb=73,hb=79,yb=86,db=90,mb={forward:gb,inverse:function(e){var t=wb(Cb(e.toUpperCase()));if(t.lat&&t.lon)return[t.lon,t.lat,t.lon,t.lat];return[t.left,t.bottom,t.right,t.top]},toPoint:vb};function gb(e,t){return t=t||5,function(e,t){var r="00000"+e.easting,n="00000"+e.northing;return e.zoneNumber+e.zoneLetter+(h=e.easting,y=e.northing,d=e.zoneNumber,m=Sb(d),g=Math.floor(h/1e5),v=Math.floor(y/1e5)%20,o=g,i=v,a=m,s=a-1,u=lb.charCodeAt(s),l=cb.charCodeAt(s),c=u+o-1,f=l+i,p=!1,c>db&&(c=c-db+fb-1,p=!0),(c===pb||u<pb&&c>pb||(c>pb||u<pb)&&p)&&c++,(c===hb||u<hb&&c>hb||(c>hb||u<hb)&&p)&&++c===pb&&c++,c>db&&(c=c-db+fb-1),f>yb?(f=f-yb+fb-1,p=!0):p=!1,(f===pb||l<pb&&f>pb||(f>pb||l<pb)&&p)&&f++,(f===hb||l<hb&&f>hb||(f>hb||l<hb)&&p)&&++f===pb&&f++,f>yb&&(f=f-yb+fb-1),String.fromCharCode(c)+String.fromCharCode(f))+r.substr(r.length-5,t)+n.substr(n.length-5,t);var o,i,a,s,u,l,c,f,p;var h,y,d,m,g,v}(function(e){var t,r,n,o,i,a,s,u=e.lat,l=e.lon,c=6378137,f=bb(u),p=bb(l);s=Math.floor((l+180)/6)+1,180===l&&(s=60);u>=56&&u<64&&l>=3&&l<12&&(s=32);u>=72&&u<84&&(l>=0&&l<9?s=31:l>=9&&l<21?s=33:l>=21&&l<33?s=35:l>=33&&l<42&&(s=37));a=bb(6*(s-1)-180+3),.006739496752268451,t=c/Math.sqrt(1-.00669438*Math.sin(f)*Math.sin(f)),r=Math.tan(f)*Math.tan(f),n=.006739496752268451*Math.cos(f)*Math.cos(f),o=Math.cos(f)*(p-a),i=c*(.9983242984503243*f-.002514607064228144*Math.sin(2*f)+2639046602129982e-21*Math.sin(4*f)-3.418046101696858e-9*Math.sin(6*f));var h=.9996*t*(o+(1-r+n)*o*o*o/6+(5-18*r+r*r+72*n-.39089081163157013)*o*o*o*o*o/120)+5e5,y=.9996*(i+t*Math.tan(f)*(o*o/2+(5-r+9*n+4*n*n)*o*o*o*o/24+(61-58*r+r*r+600*n-2.2240339282485886)*o*o*o*o*o*o/720));u<0&&(y+=1e7);return{northing:Math.round(y),easting:Math.round(h),zoneNumber:s,zoneLetter:function(e){var t="Z";84>=e&&e>=72?t="X":72>e&&e>=64?t="W":64>e&&e>=56?t="V":56>e&&e>=48?t="U":48>e&&e>=40?t="T":40>e&&e>=32?t="S":32>e&&e>=24?t="R":24>e&&e>=16?t="Q":16>e&&e>=8?t="P":8>e&&e>=0?t="N":0>e&&e>=-8?t="M":-8>e&&e>=-16?t="L":-16>e&&e>=-24?t="K":-24>e&&e>=-32?t="J":-32>e&&e>=-40?t="H":-40>e&&e>=-48?t="G":-48>e&&e>=-56?t="F":-56>e&&e>=-64?t="E":-64>e&&e>=-72?t="D":-72>e&&e>=-80&&(t="C");return t}(u)}}({lat:e[1],lon:e[0]}),t)}function vb(e){var t=wb(Cb(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat]:[(t.left+t.right)/2,(t.top+t.bottom)/2]}function bb(e){return e*(Math.PI/180)}function Ab(e){return e/Math.PI*180}function wb(e){var t=e.northing,r=e.easting,n=e.zoneLetter,o=e.zoneNumber;if(o<0||o>60)return null;var i,a,s,u,l,c,f,p,h=6378137,y=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),d=r-5e5,m=t;n<"N"&&(m-=1e7),c=6*(o-1)-180+3,p=(f=m/.9996/6367449.145945056)+(3*y/2-27*y*y*y/32)*Math.sin(2*f)+(21*y*y/16-55*y*y*y*y/32)*Math.sin(4*f)+151*y*y*y/96*Math.sin(6*f),i=h/Math.sqrt(1-.00669438*Math.sin(p)*Math.sin(p)),a=Math.tan(p)*Math.tan(p),s=.006739496752268451*Math.cos(p)*Math.cos(p),u=.99330562*h/Math.pow(1-.00669438*Math.sin(p)*Math.sin(p),1.5),l=d/(.9996*i);var g=p-i*Math.tan(p)/u*(l*l/2-(5+3*a+10*s-4*s*s-.06065547077041606)*l*l*l*l/24+(61+90*a+298*s+45*a*a-1.6983531815716497-3*s*s)*l*l*l*l*l*l/720);g=Ab(g);var v,b=(l-(1+2*a+s)*l*l*l/6+(5-2*s+28*a-3*s*s+.05391597401814761+24*a*a)*l*l*l*l*l/120)/Math.cos(p);if(b=c+Ab(b),e.accuracy){var A=wb({northing:e.northing+e.accuracy,easting:e.easting+e.accuracy,zoneLetter:e.zoneLetter,zoneNumber:e.zoneNumber});v={top:A.lat,right:A.lon,bottom:g,left:b}}else v={lat:g,lon:b};return v}function Sb(e){var t=e%ub;return 0===t&&(t=ub),t}function Cb(e){if(e&&0===e.length)throw"MGRSPoint coverting from nothing";for(var t,r=e.length,n=null,o="",i=0;!/[A-Z]/.test(t=e.charAt(i));){if(i>=2)throw"MGRSPoint bad conversion from: "+e;o+=t,i++}var a=parseInt(o,10);if(0===i||i+3>r)throw"MGRSPoint bad conversion from: "+e;var s=e.charAt(i++);if(s<="A"||"B"===s||"Y"===s||s>="Z"||"I"===s||"O"===s)throw"MGRSPoint zone letter "+s+" not handled: "+e;n=e.substring(i,i+=2);for(var u=Sb(a),l=function(e,t){var r=lb.charCodeAt(t-1),n=1e5,o=!1;for(;r!==e.charCodeAt(0);){if(++r===pb&&r++,r===hb&&r++,r>db){if(o)throw"Bad character: "+e;r=fb,o=!0}n+=1e5}return n}(n.charAt(0),u),c=function(e,t){if(e>"V")throw"MGRSPoint given invalid Northing "+e;var r=cb.charCodeAt(t-1),n=0,o=!1;for(;r!==e.charCodeAt(0);){if(++r===pb&&r++,r===hb&&r++,r>yb){if(o)throw"Bad character: "+e;r=fb,o=!0}n+=1e5}return n}(n.charAt(1),u);c<Eb(s);)c+=2e6;var f=r-i;if(f%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+e;var p,h,y,d=f/2,m=0,g=0;return d>0&&(p=1e5/Math.pow(10,d),h=e.substring(i,i+d),m=parseFloat(h)*p,y=e.substring(i+d),g=parseFloat(y)*p),{easting:m+l,northing:g+c,zoneLetter:s,zoneNumber:a,accuracy:p}}function Eb(e){var t;switch(e){case"C":t=11e5;break;case"D":t=2e6;break;case"E":t=28e5;break;case"F":t=37e5;break;case"G":t=46e5;break;case"H":t=55e5;break;case"J":t=64e5;break;case"K":t=73e5;break;case"L":t=82e5;break;case"M":t=91e5;break;case"N":t=0;break;case"P":t=8e5;break;case"Q":t=17e5;break;case"R":t=26e5;break;case"S":t=35e5;break;case"T":t=44e5;break;case"U":t=53e5;break;case"V":t=62e5;break;case"W":t=7e6;break;case"X":t=79e5;break;default:t=-1}if(t>=0)return t;throw"Invalid zone letter: "+e}function _b(e,t,r){if(!(this instanceof _b))return new _b(e,t,r);if(Array.isArray(e))this.x=e[0],this.y=e[1],this.z=e[2]||0;else if("object"==typeof e)this.x=e.x,this.y=e.y,this.z=e.z||0;else if("string"==typeof e&&void 0===t){var n=e.split(",");this.x=parseFloat(n[0],10),this.y=parseFloat(n[1],10),this.z=parseFloat(n[2],10)||0}else this.x=e,this.y=t,this.z=r||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}_b.fromMGRS=function(e){return new _b(vb(e))},_b.prototype.toMGRS=function(e){return gb([this.x,this.y],e)};var Ib=_b,Ob=1,xb=.25,Pb=.046875,kb=.01953125,Tb=.01068115234375,jb=.75,Mb=.46875,Bb=.013020833333333334,Nb=.007120768229166667,Rb=.3645833333333333,Lb=.005696614583333333,Db=.3076171875;function Fb(e){var t=[];t[0]=Ob-e*(xb+e*(Pb+e*(kb+e*Tb))),t[1]=e*(jb-e*(Pb+e*(kb+e*Tb)));var r=e*e;return t[2]=r*(Mb-e*(Bb+e*Nb)),r*=e,t[3]=r*(Rb-e*Lb),t[4]=r*e*Db,t}function Qb(e,t,r,n){return r*=t,t*=t,n[0]*e-r*(n[1]+t*(n[2]+t*(n[3]+t*n[4])))}var Gb=20;function Ub(e,t,r){for(var n=1/(1-t),o=e,i=Gb;i;--i){var a=Math.sin(o),s=1-t*a*a;if(o-=s=(Qb(o,a,Math.cos(o),r)-e)*(s*Math.sqrt(s))*n,Math.abs(s)<hg)return o}return o}var zb={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=Fb(this.es),this.ml0=Qb(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(e){var t,r,n,o=e.x,i=e.y,a=Av(o-this.long0),s=Math.sin(i),u=Math.cos(i);if(this.es){var l=u*a,c=Math.pow(l,2),f=this.ep2*Math.pow(u,2),p=Math.pow(f,2),h=Math.abs(u)>hg?Math.tan(i):0,y=Math.pow(h,2),d=Math.pow(y,2);t=1-this.es*Math.pow(s,2),l/=Math.sqrt(t);var m=Qb(i,s,u,this.en);r=this.a*(this.k0*l*(1+c/6*(1-y+f+c/20*(5-18*y+d+14*f-58*y*f+c/42*(61+179*d-d*y-479*y)))))+this.x0,n=this.a*(this.k0*(m-this.ml0+s*a*l/2*(1+c/12*(5-y+9*f+4*p+c/30*(61+d-58*y+270*f-330*y*f+c/56*(1385+543*d-d*y-3111*y))))))+this.y0}else{var g=u*Math.sin(a);if(Math.abs(Math.abs(g)-1)<hg)return 93;if(r=.5*this.a*this.k0*Math.log((1+g)/(1-g))+this.x0,n=u*Math.cos(a)/Math.sqrt(1-Math.pow(g,2)),(g=Math.abs(n))>=1){if(g-1>hg)return 93;n=0}else n=Math.acos(n);i<0&&(n=-n),n=this.a*this.k0*(n-this.lat0)+this.y0}return e.x=r,e.y=n,e},inverse:function(e){var t,r,n,o,i=(e.x-this.x0)*(1/this.a),a=(e.y-this.y0)*(1/this.a);if(this.es)if(r=Ub(t=this.ml0+a/this.k0,this.es,this.en),Math.abs(r)<lg){var s=Math.sin(r),u=Math.cos(r),l=Math.abs(u)>hg?Math.tan(r):0,c=this.ep2*Math.pow(u,2),f=Math.pow(c,2),p=Math.pow(l,2),h=Math.pow(p,2);t=1-this.es*Math.pow(s,2);var y=i*Math.sqrt(t)/this.k0,d=Math.pow(y,2);n=r-(t*=l)*d/(1-this.es)*.5*(1-d/12*(5+3*p-9*c*p+c-4*f-d/30*(61+90*p-252*c*p+45*h+46*c-d/56*(1385+3633*p+4095*h+1574*h*p)))),o=Av(this.long0+y*(1-d/6*(1+2*p+c-d/20*(5+28*p+24*h+8*c*p+6*c-d/42*(61+662*p+1320*h+720*h*p))))/u)}else n=lg*bv(a),o=0;else{var m=Math.exp(i/this.k0),g=.5*(m-1/m),v=this.lat0+a/this.k0,b=Math.cos(v);t=Math.sqrt((1-Math.pow(b,2))/(1+Math.pow(g,2))),n=Math.asin(t),a<0&&(n=-n),o=0===g&&0===b?0:Av(Math.atan2(g,b)+this.long0)}return e.x=o,e.y=n,e},names:["Fast_Transverse_Mercator","Fast Transverse Mercator"]};function Hb(e){var t=Math.exp(e);return t=(t-1/t)/2}function qb(e,t){e=Math.abs(e),t=Math.abs(t);var r=Math.max(e,t),n=Math.min(e,t)/(r||1);return r*Math.sqrt(1+Math.pow(n,2))}function Vb(e){var t=Math.abs(e);return t=function(e){var t=1+e,r=t-1;return 0===r?e:e*Math.log(t)/r}(t*(1+t/(qb(1,t)+1))),e<0?-t:t}function Kb(e,t){for(var r,n=2*Math.cos(2*t),o=e.length-1,i=e[o],a=0;--o>=0;)r=n*i-a+e[o],a=i,i=r;return t+r*Math.sin(2*t)}function Yb(e,t,r){for(var n,o,i=Math.sin(t),a=Math.cos(t),s=Hb(r),u=function(e){var t=Math.exp(e);return t=(t+1/t)/2}(r),l=2*a*u,c=-2*i*s,f=e.length-1,p=e[f],h=0,y=0,d=0;--f>=0;)n=y,o=h,p=l*(y=p)-n-c*(h=d)+e[f],d=c*y-o+l*h;return[(l=i*u)*p-(c=a*s)*d,l*d+c*p]}var Jb={init:function(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(zb.init.apply(this),this.forward=zb.forward,this.inverse=zb.inverse),this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var e=this.es/(1+Math.sqrt(1-this.es)),t=e/(2-e),r=t;this.cgb[0]=t*(2+t*(-2/3+t*(t*(116/45+t*(26/45+t*(-2854/675)))-2))),this.cbg[0]=t*(t*(2/3+t*(4/3+t*(-82/45+t*(32/45+t*(4642/4725)))))-2),r*=t,this.cgb[1]=r*(7/3+t*(t*(-227/45+t*(2704/315+t*(2323/945)))-1.6)),this.cbg[1]=r*(5/3+t*(-16/15+t*(-13/9+t*(904/315+t*(-1522/945))))),r*=t,this.cgb[2]=r*(56/15+t*(-136/35+t*(-1262/105+t*(73814/2835)))),this.cbg[2]=r*(-26/15+t*(34/21+t*(1.6+t*(-12686/2835)))),r*=t,this.cgb[3]=r*(4279/630+t*(-332/35+t*(-399572/14175))),this.cbg[3]=r*(1237/630+t*(t*(-24832/14175)-2.4)),r*=t,this.cgb[4]=r*(4174/315+t*(-144838/6237)),this.cbg[4]=r*(-734/315+t*(109598/31185)),r*=t,this.cgb[5]=r*(601676/22275),this.cbg[5]=r*(444337/155925),r=Math.pow(t,2),this.Qn=this.k0/(1+t)*(1+r*(.25+r*(1/64+r/256))),this.utg[0]=t*(t*(2/3+t*(-37/96+t*(1/360+t*(81/512+t*(-96199/604800)))))-.5),this.gtu[0]=t*(.5+t*(-2/3+t*(5/16+t*(41/180+t*(-127/288+t*(7891/37800)))))),this.utg[1]=r*(-1/48+t*(-1/15+t*(437/1440+t*(-46/105+t*(1118711/3870720))))),this.gtu[1]=r*(13/48+t*(t*(557/1440+t*(281/630+t*(-1983433/1935360)))-.6)),r*=t,this.utg[2]=r*(-17/480+t*(37/840+t*(209/4480+t*(-5569/90720)))),this.gtu[2]=r*(61/240+t*(-103/140+t*(15061/26880+t*(167603/181440)))),r*=t,this.utg[3]=r*(-4397/161280+t*(11/504+t*(830251/7257600))),this.gtu[3]=r*(49561/161280+t*(-179/168+t*(6601661/7257600))),r*=t,this.utg[4]=r*(-4583/161280+t*(108847/3991680)),this.gtu[4]=r*(34729/80640+t*(-3418889/1995840)),r*=t,this.utg[5]=-.03233083094085698*r,this.gtu[5]=.6650675310896665*r;var n=Kb(this.cbg,this.lat0);this.Zb=-this.Qn*(n+function(e,t){for(var r,n=2*Math.cos(t),o=e.length-1,i=e[o],a=0;--o>=0;)r=n*i-a+e[o],a=i,i=r;return Math.sin(t)*r}(this.gtu,2*n))},forward:function(e){var t=Av(e.x-this.long0),r=e.y;r=Kb(this.cbg,r);var n=Math.sin(r),o=Math.cos(r),i=Math.sin(t),a=Math.cos(t);r=Math.atan2(n,a*o),t=Math.atan2(i*o,qb(n,o*a)),t=Vb(Math.tan(t));var s,u,l=Yb(this.gtu,2*r,2*t);return r+=l[0],t+=l[1],Math.abs(t)<=2.623395162778?(s=this.a*(this.Qn*t)+this.x0,u=this.a*(this.Qn*r+this.Zb)+this.y0):(s=1/0,u=1/0),e.x=s,e.y=u,e},inverse:function(e){var t,r,n=(e.x-this.x0)*(1/this.a),o=(e.y-this.y0)*(1/this.a);if(o=(o-this.Zb)/this.Qn,n/=this.Qn,Math.abs(n)<=2.623395162778){var i=Yb(this.utg,2*o,2*n);o+=i[0],n+=i[1],n=Math.atan(Hb(n));var a=Math.sin(o),s=Math.cos(o),u=Math.sin(n),l=Math.cos(n);o=Math.atan2(a*l,qb(u,l*s)),t=Av((n=Math.atan2(u,l*s))+this.long0),r=Kb(this.cgb,o)}else t=1/0,r=1/0;return e.x=t,e.y=r,e},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"]};var Wb={init:function(){var e=function(e,t){if(void 0===e){if((e=Math.floor(30*(Av(t)+Math.PI)/Math.PI)+1)<0)return 0;if(e>60)return 60}return e}(this.zone,this.long0);if(void 0===e)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(e)-183)*yg,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,Jb.init.apply(this),this.forward=Jb.forward,this.inverse=Jb.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"};function Xb(e,t){return Math.pow((1-e)/(1+e),t)}var Zb=20;var $b={init:function(){var e=Math.sin(this.lat0),t=Math.cos(this.lat0);t*=t,this.rc=Math.sqrt(1-this.es)/(1-this.es*e*e),this.C=Math.sqrt(1+this.es*t*t/(1-this.es)),this.phic0=Math.asin(e/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+mg)/(Math.pow(Math.tan(.5*this.lat0+mg),this.C)*Xb(this.e*e,this.ratexp))},forward:function(e){var t=e.x,r=e.y;return e.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*r+mg),this.C)*Xb(this.e*Math.sin(r),this.ratexp))-lg,e.x=this.C*t,e},inverse:function(e){for(var t=e.x/this.C,r=e.y,n=Math.pow(Math.tan(.5*r+mg)/this.K,1/this.C),o=Zb;o>0&&(r=2*Math.atan(n*Xb(this.e*Math.sin(e.y),-.5*this.e))-lg,!(Math.abs(r-e.y)<1e-14));--o)e.y=r;return o?(e.x=t,e.y=r,e):null},names:["gauss"]};var eA={init:function(){$b.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(e){var t,r,n,o;return e.x=Av(e.x-this.long0),$b.forward.apply(this,[e]),t=Math.sin(e.y),r=Math.cos(e.y),n=Math.cos(e.x),o=this.k0*this.R2/(1+this.sinc0*t+this.cosc0*r*n),e.x=o*r*Math.sin(e.x),e.y=o*(this.cosc0*t-this.sinc0*r*n),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e},inverse:function(e){var t,r,n,o,i;if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,i=qb(e.x,e.y)){var a=2*Math.atan2(i,this.R2);t=Math.sin(a),r=Math.cos(a),o=Math.asin(r*this.sinc0+e.y*t*this.cosc0/i),n=Math.atan2(e.x*t,i*this.cosc0*r-e.y*this.sinc0*t)}else o=this.phic0,n=0;return e.x=n,e.y=o,$b.inverse.apply(this,[e]),e.x=Av(e.x+this.long0),e},names:["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]};var tA={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=hg&&(this.k0=.5*(1+bv(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=hg&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=hg&&Math.abs(Math.cos(this.lat_ts))>hg&&(this.k0=.5*this.cons*vv(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/wv(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=vv(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-lg,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(e){var t,r,n,o,i,a,s=e.x,u=e.y,l=Math.sin(u),c=Math.cos(u),f=Av(s-this.long0);return Math.abs(Math.abs(s-this.long0)-Math.PI)<=hg&&Math.abs(u+this.lat0)<=hg?(e.x=NaN,e.y=NaN,e):this.sphere?(t=2*this.k0/(1+this.sinlat0*l+this.coslat0*c*Math.cos(f)),e.x=this.a*t*c*Math.sin(f)+this.x0,e.y=this.a*t*(this.coslat0*l-this.sinlat0*c*Math.cos(f))+this.y0,e):(r=2*Math.atan(this.ssfn_(u,l,this.e))-lg,o=Math.cos(r),n=Math.sin(r),Math.abs(this.coslat0)<=hg?(i=wv(this.e,u*this.con,this.con*l),a=2*this.a*this.k0*i/this.cons,e.x=this.x0+a*Math.sin(s-this.long0),e.y=this.y0-this.con*a*Math.cos(s-this.long0),e):(Math.abs(this.sinlat0)<hg?(t=2*this.a*this.k0/(1+o*Math.cos(f)),e.y=t*n):(t=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*n+this.cosX0*o*Math.cos(f))),e.y=t*(this.cosX0*n-this.sinX0*o*Math.cos(f))+this.y0),e.x=t*o*Math.sin(f)+this.x0,e))},inverse:function(e){var t,r,n,o,i;e.x-=this.x0,e.y-=this.y0;var a=Math.sqrt(e.x*e.x+e.y*e.y);if(this.sphere){var s=2*Math.atan(a/(2*this.a*this.k0));return t=this.long0,r=this.lat0,a<=hg?(e.x=t,e.y=r,e):(r=Math.asin(Math.cos(s)*this.sinlat0+e.y*Math.sin(s)*this.coslat0/a),t=Math.abs(this.coslat0)<hg?this.lat0>0?Av(this.long0+Math.atan2(e.x,-1*e.y)):Av(this.long0+Math.atan2(e.x,e.y)):Av(this.long0+Math.atan2(e.x*Math.sin(s),a*this.coslat0*Math.cos(s)-e.y*this.sinlat0*Math.sin(s))),e.x=t,e.y=r,e)}if(Math.abs(this.coslat0)<=hg){if(a<=hg)return r=this.lat0,t=this.long0,e.x=t,e.y=r,e;e.x*=this.con,e.y*=this.con,n=a*this.cons/(2*this.a*this.k0),r=this.con*Sv(this.e,n),t=this.con*Av(this.con*this.long0+Math.atan2(e.x,-1*e.y))}else o=2*Math.atan(a*this.cosX0/(2*this.a*this.k0*this.ms1)),t=this.long0,a<=hg?i=this.X0:(i=Math.asin(Math.cos(o)*this.sinX0+e.y*Math.sin(o)*this.cosX0/a),t=Av(this.long0+Math.atan2(e.x*Math.sin(o),a*this.cosX0*Math.cos(o)-e.y*this.sinX0*Math.sin(o)))),r=-1*Sv(this.e,Math.tan(.5*(lg+i)));return e.x=t,e.y=r,e},names:["stere","Stereographic_South_Pole","Polar_Stereographic_variant_A","Polar_Stereographic_variant_B","Polar_Stereographic"],ssfn_:function(e,t,r){return t*=r,Math.tan(.5*(lg+e))*Math.pow((1-t)/(1+t),.5*r)}};var rA={init:function(){var e=this.lat0;this.lambda0=this.long0;var t=Math.sin(e),r=this.a,n=1/this.rf,o=2*n-Math.pow(n,2),i=this.e=Math.sqrt(o);this.R=this.k0*r*Math.sqrt(1-o)/(1-o*Math.pow(t,2)),this.alpha=Math.sqrt(1+o/(1-o)*Math.pow(Math.cos(e),4)),this.b0=Math.asin(t/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),s=Math.log(Math.tan(Math.PI/4+e/2)),u=Math.log((1+i*t)/(1-i*t));this.K=a-this.alpha*s+this.alpha*i/2*u},forward:function(e){var t=Math.log(Math.tan(Math.PI/4-e.y/2)),r=this.e/2*Math.log((1+this.e*Math.sin(e.y))/(1-this.e*Math.sin(e.y))),n=-this.alpha*(t+r)+this.K,o=2*(Math.atan(Math.exp(n))-Math.PI/4),i=this.alpha*(e.x-this.lambda0),a=Math.atan(Math.sin(i)/(Math.sin(this.b0)*Math.tan(o)+Math.cos(this.b0)*Math.cos(i))),s=Math.asin(Math.cos(this.b0)*Math.sin(o)-Math.sin(this.b0)*Math.cos(o)*Math.cos(i));return e.y=this.R/2*Math.log((1+Math.sin(s))/(1-Math.sin(s)))+this.y0,e.x=this.R*a+this.x0,e},inverse:function(e){for(var t=e.x-this.x0,r=e.y-this.y0,n=t/this.R,o=2*(Math.atan(Math.exp(r/this.R))-Math.PI/4),i=Math.asin(Math.cos(this.b0)*Math.sin(o)+Math.sin(this.b0)*Math.cos(o)*Math.cos(n)),a=Math.atan(Math.sin(n)/(Math.cos(this.b0)*Math.cos(n)-Math.sin(this.b0)*Math.tan(o))),s=this.lambda0+a/this.alpha,u=0,l=i,c=-1e3,f=0;Math.abs(l-c)>1e-7;){if(++f>20)return;u=1/this.alpha*(Math.log(Math.tan(Math.PI/4+i/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(l))/2)),c=l,l=2*Math.atan(Math.exp(u))-Math.PI/2}return e.x=s,e.y=l,e},names:["somerc"]},nA=1e-7;var oA={init:function(){var e,t,r,n,o,i,a,s,u,l,c,f,p,h,y=0,d=0,m=0,g=0,v=0,b=0,A=0;this.no_off=(p=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],h="object"==typeof(f=this).projName?Object.keys(f.projName)[0]:f.projName,"no_uoff"in f||"no_off"in f||-1!==p.indexOf(h)||-1!==p.indexOf(xv(h))),this.no_rot="no_rot"in this;var w=!1;"alpha"in this&&(w=!0);var S=!1;if("rectified_grid_angle"in this&&(S=!0),w&&(A=this.alpha),S&&(y=this.rectified_grid_angle),w||S)d=this.longc;else if(m=this.long1,v=this.lat1,g=this.long2,b=this.lat2,Math.abs(v-b)<=nA||(e=Math.abs(v))<=nA||Math.abs(e-lg)<=nA||Math.abs(Math.abs(this.lat0)-lg)<=nA||Math.abs(Math.abs(b)-lg)<=nA)throw new Error;var C=1-this.es;t=Math.sqrt(C),Math.abs(this.lat0)>hg?(s=Math.sin(this.lat0),r=Math.cos(this.lat0),e=1-this.es*s*s,this.B=r*r,this.B=Math.sqrt(1+this.es*this.B*this.B/C),this.A=this.B*this.k0*t/e,(o=(n=this.B*t/(r*Math.sqrt(e)))*n-1)<=0?o=0:(o=Math.sqrt(o),this.lat0<0&&(o=-o)),this.E=o+=n,this.E*=Math.pow(wv(this.e,this.lat0,s),this.B)):(this.B=1/t,this.A=this.k0,this.E=n=o=1),w||S?(w?(c=Math.asin(Math.sin(A)/n),S||(y=A)):(c=y,A=Math.asin(n*Math.sin(c))),this.lam0=d-Math.asin(.5*(o-1/o)*Math.tan(c))/this.B):(i=Math.pow(wv(this.e,v,Math.sin(v)),this.B),a=Math.pow(wv(this.e,b,Math.sin(b)),this.B),o=this.E/i,u=(a-i)/(a+i),l=((l=this.E*this.E)-a*i)/(l+a*i),(e=m-g)<-Math.pi?g-=gg:e>Math.pi&&(g+=gg),this.lam0=Av(.5*(m+g)-Math.atan(l*Math.tan(.5*this.B*(m-g))/u)/this.B),c=Math.atan(2*Math.sin(this.B*Av(m-this.lam0))/(o-1/o)),y=A=Math.asin(n*Math.sin(c))),this.singam=Math.sin(c),this.cosgam=Math.cos(c),this.sinrot=Math.sin(y),this.cosrot=Math.cos(y),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(n*n-1)/Math.cos(A))),this.lat0<0&&(this.u_0=-this.u_0)),o=.5*c,this.v_pole_n=this.ArB*Math.log(Math.tan(mg-o)),this.v_pole_s=this.ArB*Math.log(Math.tan(mg+o))},forward:function(e){var t,r,n,o,i,a,s,u,l={};if(e.x=e.x-this.lam0,Math.abs(Math.abs(e.y)-lg)>hg){if(t=.5*((i=this.E/Math.pow(wv(this.e,e.y,Math.sin(e.y)),this.B))-(a=1/i)),r=.5*(i+a),o=Math.sin(this.B*e.x),n=(t*this.singam-o*this.cosgam)/r,Math.abs(Math.abs(n)-1)<hg)throw new Error;u=.5*this.ArB*Math.log((1-n)/(1+n)),a=Math.cos(this.B*e.x),s=Math.abs(a)<nA?this.A*e.x:this.ArB*Math.atan2(t*this.cosgam+o*this.singam,a)}else u=e.y>0?this.v_pole_n:this.v_pole_s,s=this.ArB*e.y;return this.no_rot?(l.x=s,l.y=u):(s-=this.u_0,l.x=u*this.cosrot+s*this.sinrot,l.y=s*this.cosrot-u*this.sinrot),l.x=this.a*l.x+this.x0,l.y=this.a*l.y+this.y0,l},inverse:function(e){var t,r,n,o,i,a,s,u={};if(e.x=(e.x-this.x0)*(1/this.a),e.y=(e.y-this.y0)*(1/this.a),this.no_rot?(r=e.y,t=e.x):(r=e.x*this.cosrot-e.y*this.sinrot,t=e.y*this.cosrot+e.x*this.sinrot+this.u_0),o=.5*((n=Math.exp(-this.BrA*r))-1/n),i=.5*(n+1/n),s=((a=Math.sin(this.BrA*t))*this.cosgam+o*this.singam)/i,Math.abs(Math.abs(s)-1)<hg)u.x=0,u.y=s<0?-lg:lg;else{if(u.y=this.E/Math.sqrt((1+s)/(1-s)),u.y=Sv(this.e,Math.pow(u.y,1/this.B)),u.y===1/0)throw new Error;u.x=-this.rB*Math.atan2(o*this.cosgam-a*this.singam,Math.cos(this.BrA*t))}return u.x+=this.lam0,u},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Variant_B","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"]};var iA={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<hg)){var e=this.b/this.a;this.e=Math.sqrt(1-e*e);var t=Math.sin(this.lat1),r=Math.cos(this.lat1),n=vv(this.e,t,r),o=wv(this.e,this.lat1,t),i=Math.sin(this.lat2),a=Math.cos(this.lat2),s=vv(this.e,i,a),u=wv(this.e,this.lat2,i),l=Math.abs(Math.abs(this.lat0)-lg)<hg?0:wv(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>hg?this.ns=Math.log(n/s)/Math.log(o/u):this.ns=t,isNaN(this.ns)&&(this.ns=t),this.f0=n/(this.ns*Math.pow(o,this.ns)),this.rh=this.a*this.f0*Math.pow(l,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(e){var t=e.x,r=e.y;Math.abs(2*Math.abs(r)-Math.PI)<=hg&&(r=bv(r)*(lg-2*hg));var n,o,i=Math.abs(Math.abs(r)-lg);if(i>hg)n=wv(this.e,r,Math.sin(r)),o=this.a*this.f0*Math.pow(n,this.ns);else{if((i=r*this.ns)<=0)return null;o=0}var a=this.ns*Av(t-this.long0);return e.x=this.k0*(o*Math.sin(a))+this.x0,e.y=this.k0*(this.rh-o*Math.cos(a))+this.y0,e},inverse:function(e){var t,r,n,o,i,a=(e.x-this.x0)/this.k0,s=this.rh-(e.y-this.y0)/this.k0;this.ns>0?(t=Math.sqrt(a*a+s*s),r=1):(t=-Math.sqrt(a*a+s*s),r=-1);var u=0;if(0!==t&&(u=Math.atan2(r*a,r*s)),0!==t||this.ns>0){if(r=1/this.ns,n=Math.pow(t/(this.a*this.f0),r),-9999===(o=Sv(this.e,n)))return null}else o=-lg;return i=Av(u/this.ns+this.long0),e.x=i,e.y=o,e},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"]};var aA={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(e){var t,r,n,o,i,a,s,u=e.x,l=e.y,c=Av(u-this.long0);return t=Math.pow((1+this.e*Math.sin(l))/(1-this.e*Math.sin(l)),this.alfa*this.e/2),r=2*(Math.atan(this.k*Math.pow(Math.tan(l/2+this.s45),this.alfa)/t)-this.s45),n=-c*this.alfa,o=Math.asin(Math.cos(this.ad)*Math.sin(r)+Math.sin(this.ad)*Math.cos(r)*Math.cos(n)),i=Math.asin(Math.cos(r)*Math.sin(n)/Math.cos(o)),a=this.n*i,s=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(o/2+this.s45),this.n),e.y=s*Math.cos(a)/1,e.x=s*Math.sin(a)/1,this.czech||(e.y*=-1,e.x*=-1),e},inverse:function(e){var t,r,n,o,i,a,s,u=e.x;e.x=e.y,e.y=u,this.czech||(e.y*=-1,e.x*=-1),i=Math.sqrt(e.x*e.x+e.y*e.y),o=Math.atan2(e.y,e.x)/Math.sin(this.s0),n=2*(Math.atan(Math.pow(this.ro0/i,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),t=Math.asin(Math.cos(this.ad)*Math.sin(n)-Math.sin(this.ad)*Math.cos(n)*Math.cos(o)),r=Math.asin(Math.cos(n)*Math.sin(o)/Math.cos(t)),e.x=this.long0-r/this.alfa,a=t,s=0;var l=0;do{e.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(t/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-e.y)<1e-10&&(s=1),a=e.y,l+=1}while(0===s&&l<15);return l>=15?null:e},names:["Krovak","krovak"]};function sA(e,t,r,n,o){return e*o-t*Math.sin(2*o)+r*Math.sin(4*o)-n*Math.sin(6*o)}function uA(e){return 1-.25*e*(1+e/16*(3+1.25*e))}function lA(e){return.375*e*(1+.25*e*(1+.46875*e))}function cA(e){return.05859375*e*e*(1+.75*e)}function fA(e){return e*e*e*(35/3072)}function pA(e,t,r){var n=t*r;return e/Math.sqrt(1-n*n)}function hA(e){return Math.abs(e)<lg?e:e-bv(e)*Math.PI}function yA(e,t,r,n,o){var i,a;i=e/t;for(var s=0;s<15;s++)if(i+=a=(e-(t*i-r*Math.sin(2*i)+n*Math.sin(4*i)-o*Math.sin(6*i)))/(t-2*r*Math.cos(2*i)+4*n*Math.cos(4*i)-6*o*Math.cos(6*i)),Math.abs(a)<=1e-10)return i;return NaN}var dA={init:function(){this.sphere||(this.e0=uA(this.es),this.e1=lA(this.es),this.e2=cA(this.es),this.e3=fA(this.es),this.ml0=this.a*sA(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(e){var t,r,n=e.x,o=e.y;if(n=Av(n-this.long0),this.sphere)t=this.a*Math.asin(Math.cos(o)*Math.sin(n)),r=this.a*(Math.atan2(Math.tan(o),Math.cos(n))-this.lat0);else{var i=Math.sin(o),a=Math.cos(o),s=pA(this.a,this.e,i),u=Math.tan(o)*Math.tan(o),l=n*Math.cos(o),c=l*l,f=this.es*a*a/(1-this.es);t=s*l*(1-c*u*(1/6-(8-u+8*f)*c/120)),r=this.a*sA(this.e0,this.e1,this.e2,this.e3,o)-this.ml0+s*i/a*c*(.5+(5-u+6*f)*c/24)}return e.x=t+this.x0,e.y=r+this.y0,e},inverse:function(e){e.x-=this.x0,e.y-=this.y0;var t,r,n=e.x/this.a,o=e.y/this.a;if(this.sphere){var i=o+this.lat0;t=Math.asin(Math.sin(i)*Math.cos(n)),r=Math.atan2(Math.tan(n),Math.cos(i))}else{var a=yA(this.ml0/this.a+o,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(a)-lg)<=hg)return e.x=this.long0,e.y=lg,o<0&&(e.y*=-1),e;var s=pA(this.a,this.e,Math.sin(a)),u=s*s*s/this.a/this.a*(1-this.es),l=Math.pow(Math.tan(a),2),c=n*this.a/s,f=c*c;t=a-s*Math.tan(a)/u*c*c*(.5-(1+3*l)*c*c/24),r=c*(1-f*(l/3+(1+3*l)*l*f/15))/Math.cos(a)}return e.x=Av(r+this.long0),e.y=hA(t),e},names:["Cassini","Cassini_Soldner","cass"]};function mA(e,t){var r;return e>1e-7?(1-e*e)*(t/(1-(r=e*t)*r)-.5/e*Math.log((1-r)/(1+r))):2*t}var gA=.3333333333333333,vA=.17222222222222222,bA=.10257936507936508,AA=.06388888888888888,wA=.0664021164021164,SA=.016415012942191543;var CA={init:function(){var e,t=Math.abs(this.lat0);if(Math.abs(t-lg)<hg?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(t)<hg?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=mA(this.e,1),this.mmf=.5/(1-this.es),this.apa=function(e){var t,r=[];return r[0]=e*gA,t=e*e,r[0]+=t*vA,r[1]=t*AA,t*=e,r[0]+=t*bA,r[1]+=t*wA,r[2]=t*SA,r}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=mA(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(e){var t,r,n,o,i,a,s,u,l,c,f=e.x,p=e.y;if(f=Av(f-this.long0),this.sphere){if(i=Math.sin(p),c=Math.cos(p),n=Math.cos(f),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((r=this.mode===this.EQUIT?1+c*n:1+this.sinph0*i+this.cosph0*c*n)<=hg)return null;t=(r=Math.sqrt(2/r))*c*Math.sin(f),r*=this.mode===this.EQUIT?i:this.cosph0*i-this.sinph0*c*n}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),Math.abs(p+this.lat0)<hg)return null;r=mg-.5*p,t=(r=2*(this.mode===this.S_POLE?Math.cos(r):Math.sin(r)))*Math.sin(f),r*=n}}else{switch(s=0,u=0,l=0,n=Math.cos(f),o=Math.sin(f),i=Math.sin(p),a=mA(this.e,i),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(s=a/this.qp,u=Math.sqrt(1-s*s)),this.mode){case this.OBLIQ:l=1+this.sinb1*s+this.cosb1*u*n;break;case this.EQUIT:l=1+u*n;break;case this.N_POLE:l=lg+p,a=this.qp-a;break;case this.S_POLE:l=p-lg,a=this.qp+a}if(Math.abs(l)<hg)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:l=Math.sqrt(2/l),r=this.mode===this.OBLIQ?this.ymf*l*(this.cosb1*s-this.sinb1*u*n):(l=Math.sqrt(2/(1+u*n)))*s*this.ymf,t=this.xmf*l*u*o;break;case this.N_POLE:case this.S_POLE:a>=0?(t=(l=Math.sqrt(a))*o,r=n*(this.mode===this.S_POLE?l:-l)):t=r=0}}return e.x=this.a*t+this.x0,e.y=this.a*r+this.y0,e},inverse:function(e){e.x-=this.x0,e.y-=this.y0;var t,r,n,o,i,a,s,u,l,c,f=e.x/this.a,p=e.y/this.a;if(this.sphere){var h,y=0,d=0;if((r=.5*(h=Math.sqrt(f*f+p*p)))>1)return null;switch(r=2*Math.asin(r),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(d=Math.sin(r),y=Math.cos(r)),this.mode){case this.EQUIT:r=Math.abs(h)<=hg?0:Math.asin(p*d/h),f*=d,p=y*h;break;case this.OBLIQ:r=Math.abs(h)<=hg?this.lat0:Math.asin(y*this.sinph0+p*d*this.cosph0/h),f*=d*this.cosph0,p=(y-Math.sin(r)*this.sinph0)*h;break;case this.N_POLE:p=-p,r=lg-r;break;case this.S_POLE:r-=lg}t=0!==p||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(f,p):0}else{if(s=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(f/=this.dd,p*=this.dd,(a=Math.sqrt(f*f+p*p))<hg)return e.x=this.long0,e.y=this.lat0,e;o=2*Math.asin(.5*a/this.rq),n=Math.cos(o),f*=o=Math.sin(o),this.mode===this.OBLIQ?(s=n*this.sinb1+p*o*this.cosb1/a,i=this.qp*s,p=a*this.cosb1*n-p*this.sinb1*o):(s=p*o/a,i=this.qp*s,p=a*n)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(p=-p),!(i=f*f+p*p))return e.x=this.long0,e.y=this.lat0,e;s=1-i/this.qp,this.mode===this.S_POLE&&(s=-s)}t=Math.atan2(f,p),u=Math.asin(s),l=this.apa,c=u+u,r=u+l[0]*Math.sin(c)+l[1]*Math.sin(c+c)+l[2]*Math.sin(c+c+c)}return e.x=Av(this.long0+t),e.y=r,e},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4};function EA(e){return Math.abs(e)>1&&(e=e>1?1:-1),Math.asin(e)}var _A={init:function(){Math.abs(this.lat1+this.lat2)<hg||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=vv(this.e3,this.sin_po,this.cos_po),this.qs1=mA(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=vv(this.e3,this.sin_po,this.cos_po),this.qs2=mA(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=mA(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>hg?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(e){var t=e.x,r=e.y;this.sin_phi=Math.sin(r),this.cos_phi=Math.cos(r);var n=mA(this.e3,this.sin_phi),o=this.a*Math.sqrt(this.c-this.ns0*n)/this.ns0,i=this.ns0*Av(t-this.long0),a=o*Math.sin(i)+this.x0,s=this.rh-o*Math.cos(i)+this.y0;return e.x=a,e.y=s,e},inverse:function(e){var t,r,n,o,i,a;return e.x-=this.x0,e.y=this.rh-e.y+this.y0,this.ns0>=0?(t=Math.sqrt(e.x*e.x+e.y*e.y),n=1):(t=-Math.sqrt(e.x*e.x+e.y*e.y),n=-1),o=0,0!==t&&(o=Math.atan2(n*e.x,n*e.y)),n=t*this.ns0/this.a,this.sphere?a=Math.asin((this.c-n*n)/(2*this.ns0)):(r=(this.c-n*n)/this.ns0,a=this.phi1z(this.e3,r)),i=Av(o/this.ns0+this.long0),e.x=i,e.y=a,e},names:["Albers_Conic_Equal_Area","Albers_Equal_Area","Albers","aea"],phi1z:function(e,t){var r,n,o,i,a,s=EA(.5*t);if(e<hg)return s;for(var u=e*e,l=1;l<=25;l++)if(r=Math.sin(s),n=Math.cos(s),s+=a=.5*(i=1-(o=e*r)*o)*i/n*(t/(1-u)-r/i+.5/e*Math.log((1-o)/(1+o))),Math.abs(a)<=1e-7)return s;return null}};var IA={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(e){var t,r,n,o,i,a,s,u=e.x,l=e.y;return n=Av(u-this.long0),t=Math.sin(l),r=Math.cos(l),o=Math.cos(n),(i=this.sin_p14*t+this.cos_p14*r*o)>0||Math.abs(i)<=hg?(a=this.x0+1*this.a*r*Math.sin(n)/i,s=this.y0+1*this.a*(this.cos_p14*t-this.sin_p14*r*o)/i):(a=this.x0+this.infinity_dist*r*Math.sin(n),s=this.y0+this.infinity_dist*(this.cos_p14*t-this.sin_p14*r*o)),e.x=a,e.y=s,e},inverse:function(e){var t,r,n,o,i,a;return e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,(t=Math.sqrt(e.x*e.x+e.y*e.y))?(o=Math.atan2(t,this.rc),r=Math.sin(o),a=EA((n=Math.cos(o))*this.sin_p14+e.y*r*this.cos_p14/t),i=Math.atan2(e.x*r,t*this.cos_p14*n-e.y*this.sin_p14*r),i=Av(this.long0+i)):(a=this.phic0,i=0),e.x=i,e.y=a,e},names:["gnom"]};var OA={init:function(){this.sphere||(this.k0=vv(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(e){var t,r,n=e.x,o=e.y,i=Av(n-this.long0);if(this.sphere)t=this.x0+this.a*i*Math.cos(this.lat_ts),r=this.y0+this.a*Math.sin(o)/Math.cos(this.lat_ts);else{var a=mA(this.e,Math.sin(o));t=this.x0+this.a*this.k0*i,r=this.y0+this.a*a*.5/this.k0}return e.x=t,e.y=r,e},inverse:function(e){var t,r;return e.x-=this.x0,e.y-=this.y0,this.sphere?(t=Av(this.long0+e.x/this.a/Math.cos(this.lat_ts)),r=Math.asin(e.y/this.a*Math.cos(this.lat_ts))):(r=function(e,t){var r=1-(1-e*e)/(2*e)*Math.log((1-e)/(1+e));if(Math.abs(Math.abs(t)-r)<1e-6)return t<0?-1*lg:lg;for(var n,o,i,a,s=Math.asin(.5*t),u=0;u<30;u++)if(o=Math.sin(s),i=Math.cos(s),a=e*o,s+=n=Math.pow(1-a*a,2)/(2*i)*(t/(1-e*e)-o/(1-a*a)+.5/e*Math.log((1-a)/(1+a))),Math.abs(n)<=1e-10)return s;return NaN}(this.e,2*e.y*this.k0/this.a),t=Av(this.long0+e.x/(this.a*this.k0))),e.x=t,e.y=r,e},names:["cea"]};var xA={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(e){var t=e.x,r=e.y,n=Av(t-this.long0),o=hA(r-this.lat0);return e.x=this.x0+this.a*n*this.rc,e.y=this.y0+this.a*o,e},inverse:function(e){var t=e.x,r=e.y;return e.x=Av(this.long0+(t-this.x0)/(this.a*this.rc)),e.y=hA(this.lat0+(r-this.y0)/this.a),e},names:["Equirectangular","Equidistant_Cylindrical","Equidistant_Cylindrical_Spherical","eqc"]},PA=20;var kA={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=uA(this.es),this.e1=lA(this.es),this.e2=cA(this.es),this.e3=fA(this.es),this.ml0=this.a*sA(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(e){var t,r,n,o=e.x,i=e.y,a=Av(o-this.long0);if(n=a*Math.sin(i),this.sphere)Math.abs(i)<=hg?(t=this.a*a,r=-1*this.a*this.lat0):(t=this.a*Math.sin(n)/Math.tan(i),r=this.a*(hA(i-this.lat0)+(1-Math.cos(n))/Math.tan(i)));else if(Math.abs(i)<=hg)t=this.a*a,r=-1*this.ml0;else{var s=pA(this.a,this.e,Math.sin(i))/Math.tan(i);t=s*Math.sin(n),r=this.a*sA(this.e0,this.e1,this.e2,this.e3,i)-this.ml0+s*(1-Math.cos(n))}return e.x=t+this.x0,e.y=r+this.y0,e},inverse:function(e){var t,r,n,o,i,a,s,u,l;if(n=e.x-this.x0,o=e.y-this.y0,this.sphere)if(Math.abs(o+this.a*this.lat0)<=hg)t=Av(n/this.a+this.long0),r=0;else{var c;for(a=this.lat0+o/this.a,s=n*n/this.a/this.a+a*a,u=a,i=PA;i;--i)if(u+=l=-1*(a*(u*(c=Math.tan(u))+1)-u-.5*(u*u+s)*c)/((u-a)/c-1),Math.abs(l)<=hg){r=u;break}t=Av(this.long0+Math.asin(n*Math.tan(u)/this.a)/Math.sin(r))}else if(Math.abs(o+this.ml0)<=hg)r=0,t=Av(this.long0+n/this.a);else{var f,p,h,y,d;for(a=(this.ml0+o)/this.a,s=n*n/this.a/this.a+a*a,u=a,i=PA;i;--i)if(d=this.e*Math.sin(u),f=Math.sqrt(1-d*d)*Math.tan(u),p=this.a*sA(this.e0,this.e1,this.e2,this.e3,u),h=this.e0-2*this.e1*Math.cos(2*u)+4*this.e2*Math.cos(4*u)-6*this.e3*Math.cos(6*u),u-=l=(a*(f*(y=p/this.a)+1)-y-.5*f*(y*y+s))/(this.es*Math.sin(2*u)*(y*y+s-2*a*y)/(4*f)+(a-y)*(f*h-2/Math.sin(2*u))-h),Math.abs(l)<=hg){r=u;break}f=Math.sqrt(1-this.es*Math.pow(Math.sin(r),2))*Math.tan(r),t=Av(this.long0+Math.asin(n*f/this.a)/Math.sin(r))}return e.x=t,e.y=r,e},names:["Polyconic","American_Polyconic","poly"]};var TA={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(e){var t,r=e.x,n=e.y-this.lat0,o=r-this.long0,i=n/ug*1e-5,a=o,s=1,u=0;for(t=1;t<=10;t++)s*=i,u+=this.A[t]*s;var l,c=u,f=a,p=1,h=0,y=0,d=0;for(t=1;t<=6;t++)l=h*c+p*f,p=p*c-h*f,h=l,y=y+this.B_re[t]*p-this.B_im[t]*h,d=d+this.B_im[t]*p+this.B_re[t]*h;return e.x=d*this.a+this.x0,e.y=y*this.a+this.y0,e},inverse:function(e){var t,r,n=e.x,o=e.y,i=n-this.x0,a=(o-this.y0)/this.a,s=i/this.a,u=1,l=0,c=0,f=0;for(t=1;t<=6;t++)r=l*a+u*s,u=u*a-l*s,l=r,c=c+this.C_re[t]*u-this.C_im[t]*l,f=f+this.C_im[t]*u+this.C_re[t]*l;for(var p=0;p<this.iterations;p++){var h,y=c,d=f,m=a,g=s;for(t=2;t<=6;t++)h=d*c+y*f,y=y*c-d*f,d=h,m+=(t-1)*(this.B_re[t]*y-this.B_im[t]*d),g+=(t-1)*(this.B_im[t]*y+this.B_re[t]*d);y=1,d=0;var v=this.B_re[1],b=this.B_im[1];for(t=2;t<=6;t++)h=d*c+y*f,y=y*c-d*f,d=h,v+=t*(this.B_re[t]*y-this.B_im[t]*d),b+=t*(this.B_im[t]*y+this.B_re[t]*d);var A=v*v+b*b;c=(m*v+g*b)/A,f=(g*v-m*b)/A}var w=c,S=f,C=1,E=0;for(t=1;t<=9;t++)C*=w,E+=this.D[t]*C;var _=this.lat0+E*ug*1e5,I=this.long0+S;return e.x=I,e.y=_,e},names:["New_Zealand_Map_Grid","nzmg"]};var jA={init:function(){},forward:function(e){var t=e.x,r=e.y,n=Av(t-this.long0),o=this.x0+this.a*n,i=this.y0+this.a*Math.log(Math.tan(Math.PI/4+r/2.5))*1.25;return e.x=o,e.y=i,e},inverse:function(e){e.x-=this.x0,e.y-=this.y0;var t=Av(this.long0+e.x/this.a),r=2.5*(Math.atan(Math.exp(.8*e.y/this.a))-Math.PI/4);return e.x=t,e.y=r,e},names:["Miller_Cylindrical","mill"]},MA=20;var BA={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Fb(this.es)},forward:function(e){var t,r,n=e.x,o=e.y;if(n=Av(n-this.long0),this.sphere){if(this.m)for(var i=this.n*Math.sin(o),a=MA;a;--a){var s=(this.m*o+Math.sin(o)-i)/(this.m+Math.cos(o));if(o-=s,Math.abs(s)<hg)break}else o=1!==this.n?Math.asin(this.n*Math.sin(o)):o;t=this.a*this.C_x*n*(this.m+Math.cos(o)),r=this.a*this.C_y*o}else{var u=Math.sin(o),l=Math.cos(o);r=this.a*Qb(o,u,l,this.en),t=this.a*n*l/Math.sqrt(1-this.es*u*u)}return e.x=t,e.y=r,e},inverse:function(e){var t,r,n;return e.x-=this.x0,r=e.x/this.a,e.y-=this.y0,t=e.y/this.a,this.sphere?(t/=this.C_y,r/=this.C_x*(this.m+Math.cos(t)),this.m?t=EA((this.m*t+Math.sin(t))/this.n):1!==this.n&&(t=EA(Math.sin(t)/this.n)),r=Av(r+this.long0),t=hA(t)):(t=Ub(e.y/this.a,this.es,this.en),(n=Math.abs(t))<lg?(n=Math.sin(t),r=Av(this.long0+e.x*Math.sqrt(1-this.es*n*n)/(this.a*Math.cos(t)))):n-hg<lg&&(r=this.long0)),e.x=r,e.y=t,e},names:["Sinusoidal","sinu"]};var NA={init:function(){},forward:function(e){for(var t=e.x,r=e.y,n=Av(t-this.long0),o=r,i=Math.PI*Math.sin(r);;){var a=-(o+Math.sin(o)-i)/(1+Math.cos(o));if(o+=a,Math.abs(a)<hg)break}o/=2,Math.PI/2-Math.abs(r)<hg&&(n=0);var s=.900316316158*this.a*n*Math.cos(o)+this.x0,u=1.4142135623731*this.a*Math.sin(o)+this.y0;return e.x=s,e.y=u,e},inverse:function(e){var t,r;e.x-=this.x0,e.y-=this.y0,r=e.y/(1.4142135623731*this.a),Math.abs(r)>.999999999999&&(r=.999999999999),t=Math.asin(r);var n=Av(this.long0+e.x/(.900316316158*this.a*Math.cos(t)));n<-Math.PI&&(n=-Math.PI),n>Math.PI&&(n=Math.PI),r=(2*t+Math.sin(2*t))/Math.PI,Math.abs(r)>1&&(r=1);var o=Math.asin(r);return e.x=n,e.y=o,e},names:["Mollweide","moll"]};var RA={init:function(){Math.abs(this.lat1+this.lat2)<hg||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=uA(this.es),this.e1=lA(this.es),this.e2=cA(this.es),this.e3=fA(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=vv(this.e,this.sinphi,this.cosphi),this.ml1=sA(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<hg?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=vv(this.e,this.sinphi,this.cosphi),this.ml2=sA(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=sA(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(e){var t,r=e.x,n=e.y;if(this.sphere)t=this.a*(this.g-n);else{var o=sA(this.e0,this.e1,this.e2,this.e3,n);t=this.a*(this.g-o)}var i=this.ns*Av(r-this.long0),a=this.x0+t*Math.sin(i),s=this.y0+this.rh-t*Math.cos(i);return e.x=a,e.y=s,e},inverse:function(e){var t,r,n,o;e.x-=this.x0,e.y=this.rh-e.y+this.y0,this.ns>=0?(r=Math.sqrt(e.x*e.x+e.y*e.y),t=1):(r=-Math.sqrt(e.x*e.x+e.y*e.y),t=-1);var i=0;return 0!==r&&(i=Math.atan2(t*e.x,t*e.y)),this.sphere?(o=Av(this.long0+i/this.ns),n=hA(this.g-r/this.a),e.x=o,e.y=n,e):(n=yA(this.g-r/this.a,this.e0,this.e1,this.e2,this.e3),o=Av(this.long0+i/this.ns),e.x=o,e.y=n,e)},names:["Equidistant_Conic","eqdc"]};var LA={init:function(){this.R=this.a},forward:function(e){var t,r,n=e.x,o=e.y,i=Av(n-this.long0);Math.abs(o)<=hg&&(t=this.x0+this.R*i,r=this.y0);var a=EA(2*Math.abs(o/Math.PI));(Math.abs(i)<=hg||Math.abs(Math.abs(o)-lg)<=hg)&&(t=this.x0,r=o>=0?this.y0+Math.PI*this.R*Math.tan(.5*a):this.y0+Math.PI*this.R*-Math.tan(.5*a));var s=.5*Math.abs(Math.PI/i-i/Math.PI),u=s*s,l=Math.sin(a),c=Math.cos(a),f=c/(l+c-1),p=f*f,h=f*(2/l-1),y=h*h,d=Math.PI*this.R*(s*(f-y)+Math.sqrt(u*(f-y)*(f-y)-(y+u)*(p-y)))/(y+u);i<0&&(d=-d),t=this.x0+d;var m=u+f;return d=Math.PI*this.R*(h*m-s*Math.sqrt((y+u)*(u+1)-m*m))/(y+u),r=o>=0?this.y0+d:this.y0-d,e.x=t,e.y=r,e},inverse:function(e){var t,r,n,o,i,a,s,u,l,c,f,p;return e.x-=this.x0,e.y-=this.y0,f=Math.PI*this.R,i=(n=e.x/f)*n+(o=e.y/f)*o,f=3*(o*o/(u=-2*(a=-Math.abs(o)*(1+i))+1+2*o*o+i*i)+(2*(s=a-2*o*o+n*n)*s*s/u/u/u-9*a*s/u/u)/27)/(l=(a-s*s/3/u)/u)/(c=2*Math.sqrt(-l/3)),Math.abs(f)>1&&(f=f>=0?1:-1),p=Math.acos(f)/3,r=e.y>=0?(-c*Math.cos(p+Math.PI/3)-s/3/u)*Math.PI:-(-c*Math.cos(p+Math.PI/3)-s/3/u)*Math.PI,t=Math.abs(n)<hg?this.long0:Av(this.long0+Math.PI*(i-1+Math.sqrt(1+2*(n*n-o*o)+i*i))/2/n),e.x=t,e.y=r,e},names:["Van_der_Grinten_I","VanDerGrinten","Van_der_Grinten","vandg"]},DA=r(8461);var FA={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0),this.g=new DA.Geodesic.Geodesic(this.a,this.es/(1+Math.sqrt(1-this.es)))},forward:function(e){var t,r,n,o,i,a,s,u,l,c,f,p,h,y,d,m=e.x,g=e.y,v=Math.sin(e.y),b=Math.cos(e.y),A=Av(m-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=hg?(e.x=this.x0+this.a*(lg-g)*Math.sin(A),e.y=this.y0-this.a*(lg-g)*Math.cos(A),e):Math.abs(this.sin_p12+1)<=hg?(e.x=this.x0+this.a*(lg+g)*Math.sin(A),e.y=this.y0+this.a*(lg+g)*Math.cos(A),e):(l=this.sin_p12*v+this.cos_p12*b*Math.cos(A),u=(s=Math.acos(l))?s/Math.sin(s):1,e.x=this.x0+this.a*u*b*Math.sin(A),e.y=this.y0+this.a*u*(this.cos_p12*v-this.sin_p12*b*Math.cos(A)),e):(t=uA(this.es),r=lA(this.es),n=cA(this.es),o=fA(this.es),Math.abs(this.sin_p12-1)<=hg?(i=this.a*sA(t,r,n,o,lg),a=this.a*sA(t,r,n,o,g),e.x=this.x0+(i-a)*Math.sin(A),e.y=this.y0-(i-a)*Math.cos(A),e):Math.abs(this.sin_p12+1)<=hg?(i=this.a*sA(t,r,n,o,lg),a=this.a*sA(t,r,n,o,g),e.x=this.x0+(i+a)*Math.sin(A),e.y=this.y0+(i+a)*Math.cos(A),e):Math.abs(m)<hg&&Math.abs(g-this.lat0)<hg?(e.x=e.y=0,e):(c=this.lat0/yg,f=this.long0/yg,p=g/yg,h=m/yg,d=(y=this.g.Inverse(c,f,p,h,this.g.AZIMUTH)).azi1*yg,e.x=y.s12*Math.sin(d),e.y=y.s12*Math.cos(d),e))},inverse:function(e){var t,r,n,o,i,a,s,u,l,c,f,p,h,y,d,m,g;if(e.x-=this.x0,e.y-=this.y0,this.sphere){if((t=Math.sqrt(e.x*e.x+e.y*e.y))>2*lg*this.a)return;return r=t/this.a,n=Math.sin(r),o=Math.cos(r),i=this.long0,Math.abs(t)<=hg?a=this.lat0:(a=EA(o*this.sin_p12+e.y*n*this.cos_p12/t),s=Math.abs(this.lat0)-lg,i=Math.abs(s)<=hg?this.lat0>=0?Av(this.long0+Math.atan2(e.x,-e.y)):Av(this.long0-Math.atan2(-e.x,e.y)):Av(this.long0+Math.atan2(e.x*n,t*this.cos_p12*o-e.y*this.sin_p12*n))),e.x=i,e.y=a,e}return u=uA(this.es),l=lA(this.es),c=cA(this.es),f=fA(this.es),Math.abs(this.sin_p12-1)<=hg?(a=yA(((p=this.a*sA(u,l,c,f,lg))-(t=Math.sqrt(e.x*e.x+e.y*e.y)))/this.a,u,l,c,f),i=Av(this.long0+Math.atan2(e.x,-1*e.y)),e.x=i,e.y=a,e):Math.abs(this.sin_p12+1)<=hg?(p=this.a*sA(u,l,c,f,lg),a=yA(((t=Math.sqrt(e.x*e.x+e.y*e.y))-p)/this.a,u,l,c,f),i=Av(this.long0+Math.atan2(e.x,e.y)),e.x=i,e.y=a,e):(h=this.lat0/yg,y=this.long0/yg,d=Math.atan2(e.x,e.y)/yg,m=Math.sqrt(e.x*e.x+e.y*e.y),g=this.g.Direct(h,y,d,m,this.g.STANDARD),e.x=g.lon2*yg,e.y=g.lat2*yg,e)},names:["Azimuthal_Equidistant","aeqd"]};var QA={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(e){var t,r,n,o,i,a,s,u=e.x,l=e.y;return n=Av(u-this.long0),t=Math.sin(l),r=Math.cos(l),o=Math.cos(n),((i=this.sin_p14*t+this.cos_p14*r*o)>0||Math.abs(i)<=hg)&&(a=1*this.a*r*Math.sin(n),s=this.y0+1*this.a*(this.cos_p14*t-this.sin_p14*r*o)),e.x=a,e.y=s,e},inverse:function(e){var t,r,n,o,i,a,s;return e.x-=this.x0,e.y-=this.y0,r=EA((t=Math.sqrt(e.x*e.x+e.y*e.y))/this.a),n=Math.sin(r),o=Math.cos(r),a=this.long0,Math.abs(t)<=hg?(s=this.lat0,e.x=a,e.y=s,e):(s=EA(o*this.sin_p14+e.y*n*this.cos_p14/t),i=Math.abs(this.lat0)-lg,Math.abs(i)<=hg?(a=this.lat0>=0?Av(this.long0+Math.atan2(e.x,-e.y)):Av(this.long0-Math.atan2(-e.x,e.y)),e.x=a,e.y=s,e):(a=Av(this.long0+Math.atan2(e.x*n,t*this.cos_p14*o-e.y*this.sin_p14*n)),e.x=a,e.y=s,e))},names:["ortho"]},GA={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},UA={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function zA(e,t,r,n){var o;return e<hg?(n.value=UA.AREA_0,o=0):(o=Math.atan2(t,r),Math.abs(o)<=mg?n.value=UA.AREA_0:o>mg&&o<=lg+mg?(n.value=UA.AREA_1,o-=lg):o>lg+mg||o<=-(lg+mg)?(n.value=UA.AREA_2,o=o>=0?o-vg:o+vg):(n.value=UA.AREA_3,o+=lg)),o}function HA(e,t){var r=e+t;return r<-vg?r+=gg:r>+vg&&(r-=gg),r}var qA={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=lg-mg/2?this.face=GA.TOP:this.lat0<=-(lg-mg/2)?this.face=GA.BOTTOM:Math.abs(this.long0)<=mg?this.face=GA.FRONT:Math.abs(this.long0)<=lg+mg?this.face=this.long0>0?GA.RIGHT:GA.LEFT:this.face=GA.BACK,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(e){var t,r,n,o,i,a,s={x:0,y:0},u={value:0};if(e.x-=this.long0,t=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(e.y)):e.y,r=e.x,this.face===GA.TOP)o=lg-t,r>=mg&&r<=lg+mg?(u.value=UA.AREA_0,n=r-lg):r>lg+mg||r<=-(lg+mg)?(u.value=UA.AREA_1,n=r>0?r-vg:r+vg):r>-(lg+mg)&&r<=-mg?(u.value=UA.AREA_2,n=r+lg):(u.value=UA.AREA_3,n=r);else if(this.face===GA.BOTTOM)o=lg+t,r>=mg&&r<=lg+mg?(u.value=UA.AREA_0,n=-r+lg):r<mg&&r>=-mg?(u.value=UA.AREA_1,n=-r):r<-mg&&r>=-(lg+mg)?(u.value=UA.AREA_2,n=-r-lg):(u.value=UA.AREA_3,n=r>0?-r+vg:-r-vg);else{var l,c,f,p,h,y;this.face===GA.RIGHT?r=HA(r,+lg):this.face===GA.BACK?r=HA(r,+vg):this.face===GA.LEFT&&(r=HA(r,-lg)),p=Math.sin(t),h=Math.cos(t),y=Math.sin(r),l=h*Math.cos(r),c=h*y,f=p,this.face===GA.FRONT?n=zA(o=Math.acos(l),f,c,u):this.face===GA.RIGHT?n=zA(o=Math.acos(c),f,-l,u):this.face===GA.BACK?n=zA(o=Math.acos(-l),f,-c,u):this.face===GA.LEFT?n=zA(o=Math.acos(-c),f,l,u):(o=n=0,u.value=UA.AREA_0)}return a=Math.atan(12/vg*(n+Math.acos(Math.sin(n)*Math.cos(mg))-lg)),i=Math.sqrt((1-Math.cos(o))/(Math.cos(a)*Math.cos(a))/(1-Math.cos(Math.atan(1/Math.cos(n))))),u.value===UA.AREA_1?a+=lg:u.value===UA.AREA_2?a+=vg:u.value===UA.AREA_3&&(a+=1.5*vg),s.x=i*Math.cos(a),s.y=i*Math.sin(a),s.x=s.x*this.a+this.x0,s.y=s.y*this.a+this.y0,e.x=s.x,e.y=s.y,e},inverse:function(e){var t,r,n,o,i,a,s,u,l,c,f,p,h={lam:0,phi:0},y={value:0};if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,r=Math.atan(Math.sqrt(e.x*e.x+e.y*e.y)),t=Math.atan2(e.y,e.x),e.x>=0&&e.x>=Math.abs(e.y)?y.value=UA.AREA_0:e.y>=0&&e.y>=Math.abs(e.x)?(y.value=UA.AREA_1,t-=lg):e.x<0&&-e.x>=Math.abs(e.y)?(y.value=UA.AREA_2,t=t<0?t+vg:t-vg):(y.value=UA.AREA_3,t+=lg),l=vg/12*Math.tan(t),i=Math.sin(l)/(Math.cos(l)-1/Math.sqrt(2)),a=Math.atan(i),(s=1-(n=Math.cos(t))*n*(o=Math.tan(r))*o*(1-Math.cos(Math.atan(1/Math.cos(a)))))<-1?s=-1:s>1&&(s=1),this.face===GA.TOP)u=Math.acos(s),h.phi=lg-u,y.value===UA.AREA_0?h.lam=a+lg:y.value===UA.AREA_1?h.lam=a<0?a+vg:a-vg:y.value===UA.AREA_2?h.lam=a-lg:h.lam=a;else if(this.face===GA.BOTTOM)u=Math.acos(s),h.phi=u-lg,y.value===UA.AREA_0?h.lam=-a+lg:y.value===UA.AREA_1?h.lam=-a:y.value===UA.AREA_2?h.lam=-a-lg:h.lam=a<0?-a-vg:-a+vg;else{var d,m,g;l=(d=s)*d,m=(l+=(g=l>=1?0:Math.sqrt(1-l)*Math.sin(a))*g)>=1?0:Math.sqrt(1-l),y.value===UA.AREA_1?(l=m,m=-g,g=l):y.value===UA.AREA_2?(m=-m,g=-g):y.value===UA.AREA_3&&(l=m,m=g,g=-l),this.face===GA.RIGHT?(l=d,d=-m,m=l):this.face===GA.BACK?(d=-d,m=-m):this.face===GA.LEFT&&(l=d,d=m,m=-l),h.phi=Math.acos(-g)-lg,h.lam=Math.atan2(m,d),this.face===GA.RIGHT?h.lam=HA(h.lam,-lg):this.face===GA.BACK?h.lam=HA(h.lam,-vg):this.face===GA.LEFT&&(h.lam=HA(h.lam,+lg))}return 0!==this.es&&(c=h.phi<0?1:0,f=Math.tan(h.phi),p=this.b/Math.sqrt(f*f+this.one_minus_f_squared),h.phi=Math.atan(Math.sqrt(this.a*this.a-p*p)/(this.one_minus_f*p)),c&&(h.phi=-h.phi)),h.lam+=this.long0,e.x=h.lam,e.y=h.phi,e},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]},VA=[[1,2.2199e-17,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],KA=[[-5.20417e-18,.0124,1.21431e-18,-8.45284e-11],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],YA=.8487,JA=1.3523,WA=dg/5,XA=1/WA,ZA=18,$A=function(e,t){return e[0]+t*(e[1]+t*(e[2]+t*e[3]))},ew=function(e,t){return e[1]+t*(2*e[2]+3*t*e[3])};var tw={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(e){var t=Av(e.x-this.long0),r=Math.abs(e.y),n=Math.floor(r*WA);n<0?n=0:n>=ZA&&(n=ZA-1),r=dg*(r-XA*n);var o={x:$A(VA[n],r)*t,y:$A(KA[n],r)};return e.y<0&&(o.y=-o.y),o.x=o.x*this.a*YA+this.x0,o.y=o.y*this.a*JA+this.y0,o},inverse:function(e){var t={x:(e.x-this.x0)/(this.a*YA),y:Math.abs(e.y-this.y0)/(this.a*JA)};if(t.y>=1)t.x/=VA[ZA][0],t.y=e.y<0?-lg:lg;else{var r=Math.floor(t.y*ZA);for(r<0?r=0:r>=ZA&&(r=ZA-1);;)if(KA[r][0]>t.y)--r;else{if(!(KA[r+1][0]<=t.y))break;++r}var n=KA[r],o=5*(t.y-n[0])/(KA[r+1][0]-n[0]);o=function(e,t,r,n){for(var o=t;n;--n){var i=e(o);if(o-=i,Math.abs(i)<r)break}return o}(function(e){return($A(n,e)-t.y)/ew(n,e)},o,hg,100),t.x/=$A(VA[r],o),t.y=(5*r+o)*yg,e.y<0&&(t.y=-t.y)}return t.x=Av(t.x+this.long0),t},names:["Robinson","robin"]};var rw={init:function(){this.name="geocent"},forward:function(e){return Kv(e,this.es,this.a)},inverse:function(e){return Yv(e,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]},nw={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},ow={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};var iw={init:function(){if(Object.keys(ow).forEach(function(e){if(void 0===this[e])this[e]=ow[e].def;else{if(ow[e].num&&isNaN(this[e]))throw new Error("Invalid parameter value, must be numeric "+e+" = "+this[e]);ow[e].num&&(this[e]=parseFloat(this[e]))}ow[e].degrees&&(this[e]=this[e]*yg)}.bind(this)),Math.abs(Math.abs(this.lat0)-lg)<hg?this.mode=this.lat0<0?nw.S_POLE:nw.N_POLE:Math.abs(this.lat0)<hg?this.mode=nw.EQUIT:(this.mode=nw.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var e=this.tilt,t=this.azi;this.cg=Math.cos(t),this.sg=Math.sin(t),this.cw=Math.cos(e),this.sw=Math.sin(e)},forward:function(e){e.x-=this.long0;var t,r,n,o,i=Math.sin(e.y),a=Math.cos(e.y),s=Math.cos(e.x);switch(this.mode){case nw.OBLIQ:r=this.sinph0*i+this.cosph0*a*s;break;case nw.EQUIT:r=a*s;break;case nw.S_POLE:r=-i;break;case nw.N_POLE:r=i}switch(t=(r=this.pn1/(this.p-r))*a*Math.sin(e.x),this.mode){case nw.OBLIQ:r*=this.cosph0*i-this.sinph0*a*s;break;case nw.EQUIT:r*=i;break;case nw.N_POLE:r*=-a*s;break;case nw.S_POLE:r*=a*s}return o=1/((n=r*this.cg+t*this.sg)*this.sw*this.h1+this.cw),t=(t*this.cg-r*this.sg)*this.cw*o,r=n*o,e.x=t*this.a,e.y=r*this.a,e},inverse:function(e){e.x/=this.a,e.y/=this.a;var t,r,n,o={x:e.x,y:e.y};n=1/(this.pn1-e.y*this.sw),t=this.pn1*e.x*n,r=this.pn1*e.y*this.cw*n,e.x=t*this.cg+r*this.sg,e.y=r*this.cg-t*this.sg;var i=qb(e.x,e.y);if(Math.abs(i)<hg)o.x=0,o.y=e.y;else{var a,s;switch(s=1-i*i*this.pfact,s=(this.p-Math.sqrt(s))/(this.pn1/i+i/this.pn1),a=Math.sqrt(1-s*s),this.mode){case nw.OBLIQ:o.y=Math.asin(a*this.sinph0+e.y*s*this.cosph0/i),e.y=(a-this.sinph0*Math.sin(o.y))*i,e.x*=s*this.cosph0;break;case nw.EQUIT:o.y=Math.asin(e.y*s/i),e.y=a*i,e.x*=s;break;case nw.N_POLE:o.y=Math.asin(a),e.y=-e.y;break;case nw.S_POLE:o.y=-Math.asin(a)}o.x=Math.atan2(e.x,e.y)}return e.x=o.x+this.long0,e.y=o.y,e},names:["Tilted_Perspective","tpers"]};var aw={init:function(){if(this.flip_axis="x"===this.sweep?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,0!==this.es){var e=1-this.es,t=1/e;this.radius_p=Math.sqrt(e),this.radius_p2=e,this.radius_p_inv2=t,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")},forward:function(e){var t,r,n,o,i=e.x,a=e.y;if(i-=this.long0,"ellipse"===this.shape){a=Math.atan(this.radius_p2*Math.tan(a));var s=this.radius_p/qb(this.radius_p*Math.cos(a),Math.sin(a));if(r=s*Math.cos(i)*Math.cos(a),n=s*Math.sin(i)*Math.cos(a),o=s*Math.sin(a),(this.radius_g-r)*r-n*n-o*o*this.radius_p_inv2<0)return e.x=Number.NaN,e.y=Number.NaN,e;t=this.radius_g-r,this.flip_axis?(e.x=this.radius_g_1*Math.atan(n/qb(o,t)),e.y=this.radius_g_1*Math.atan(o/t)):(e.x=this.radius_g_1*Math.atan(n/t),e.y=this.radius_g_1*Math.atan(o/qb(n,t)))}else"sphere"===this.shape&&(t=Math.cos(a),r=Math.cos(i)*t,n=Math.sin(i)*t,o=Math.sin(a),t=this.radius_g-r,this.flip_axis?(e.x=this.radius_g_1*Math.atan(n/qb(o,t)),e.y=this.radius_g_1*Math.atan(o/t)):(e.x=this.radius_g_1*Math.atan(n/t),e.y=this.radius_g_1*Math.atan(o/qb(n,t))));return e.x=e.x*this.a,e.y=e.y*this.a,e},inverse:function(e){var t,r,n,o,i=-1,a=0,s=0;if(e.x=e.x/this.a,e.y=e.y/this.a,"ellipse"===this.shape){this.flip_axis?(s=Math.tan(e.y/this.radius_g_1),a=Math.tan(e.x/this.radius_g_1)*qb(1,s)):(a=Math.tan(e.x/this.radius_g_1),s=Math.tan(e.y/this.radius_g_1)*qb(1,a));var u=s/this.radius_p;if(t=a*a+u*u+i*i,(n=(r=2*this.radius_g*i)*r-4*t*this.C)<0)return e.x=Number.NaN,e.y=Number.NaN,e;o=(-r-Math.sqrt(n))/(2*t),i=this.radius_g+o*i,a*=o,s*=o,e.x=Math.atan2(a,i),e.y=Math.atan(s*Math.cos(e.x)/i),e.y=Math.atan(this.radius_p_inv2*Math.tan(e.y))}else if("sphere"===this.shape){if(this.flip_axis?(s=Math.tan(e.y/this.radius_g_1),a=Math.tan(e.x/this.radius_g_1)*Math.sqrt(1+s*s)):(a=Math.tan(e.x/this.radius_g_1),s=Math.tan(e.y/this.radius_g_1)*Math.sqrt(1+a*a)),t=a*a+s*s+i*i,(n=(r=2*this.radius_g*i)*r-4*t*this.C)<0)return e.x=Number.NaN,e.y=Number.NaN,e;o=(-r-Math.sqrt(n))/(2*t),i=this.radius_g+o*i,a*=o,s*=o,e.x=Math.atan2(a,i),e.y=Math.atan(s*Math.cos(e.x)/i)}return e.x=e.x+this.long0,e},names:["Geostationary Satellite View","Geostationary_Satellite","geos"]},sw=1.340264,uw=-.081106,lw=893e-6,cw=.003796,fw=Math.sqrt(3)/2;var pw={init:function(){this.es=0,this.long0=void 0!==this.long0?this.long0:0},forward:function(e){var t=Av(e.x-this.long0),r=e.y,n=Math.asin(fw*Math.sin(r)),o=n*n,i=o*o*o;return e.x=t*Math.cos(n)/(fw*(sw+3*uw*o+i*(7*lw+9*cw*o))),e.y=n*(sw+uw*o+i*(lw+cw*o)),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e},inverse:function(e){e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a;var t,r,n,o,i=e.y;for(o=0;o<12&&(i-=n=(i*(sw+uw*(t=i*i)+(r=t*t*t)*(lw+cw*t))-e.y)/(sw+3*uw*t+r*(7*lw+9*cw*t)),!(Math.abs(n)<1e-9));++o);return r=(t=i*i)*t*t,e.x=fw*e.x*(sw+3*uw*t+r*(7*lw+9*cw*t))/Math.cos(i),e.y=Math.asin(Math.sin(i)/fw),e.x=Av(e.x+this.long0),e},names:["eqearth","Equal Earth","Equal_Earth"]},hw=1e-10;function yw(e){var t,r,n,o=Av(e.x-(this.long0||0)),i=e.y;return t=this.am1+this.m1-Qb(i,r=Math.sin(i),n=Math.cos(i),this.en),r=n*o/(t*Math.sqrt(1-this.es*r*r)),e.x=t*Math.sin(r),e.y=this.am1-t*Math.cos(r),e.x=this.a*e.x+(this.x0||0),e.y=this.a*e.y+(this.y0||0),e}function dw(e){var t,r,n,o;if(e.x=(e.x-(this.x0||0))/this.a,e.y=(e.y-(this.y0||0))/this.a,r=qb(e.x,e.y=this.am1-e.y),o=Ub(this.am1+this.m1-r,this.es,this.en),(t=Math.abs(o))<lg)t=Math.sin(o),n=r*Math.atan2(e.x,e.y)*Math.sqrt(1-this.es*t*t)/Math.cos(o);else{if(!(Math.abs(t-lg)<=hw))throw new Error;n=0}return e.x=Av(n+(this.long0||0)),e.y=hA(o),e}function mw(e){var t,r,n=Av(e.x-(this.long0||0)),o=e.y;return r=this.cphi1+this.phi1-o,Math.abs(r)>hw?(e.x=r*Math.sin(t=n*Math.cos(o)/r),e.y=this.cphi1-r*Math.cos(t)):e.x=e.y=0,e.x=this.a*e.x+(this.x0||0),e.y=this.a*e.y+(this.y0||0),e}function gw(e){var t,r;e.x=(e.x-(this.x0||0))/this.a,e.y=(e.y-(this.y0||0))/this.a;var n=qb(e.x,e.y=this.cphi1-e.y);if(r=this.cphi1+this.phi1-n,Math.abs(r)>lg)throw new Error;return t=Math.abs(Math.abs(r)-lg)<=hw?0:n*Math.atan2(e.x,e.y)/Math.cos(r),e.x=Av(t+(this.long0||0)),e.y=hA(r),e}var vw={init:function(){var e;if(this.phi1=this.lat1,Math.abs(this.phi1)<hw)throw new Error;this.es?(this.en=Fb(this.es),this.m1=Qb(this.phi1,this.am1=Math.sin(this.phi1),e=Math.cos(this.phi1),this.en),this.am1=e/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=dw,this.forward=yw):(Math.abs(this.phi1)+hw>=lg?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=gw,this.forward=mw)},names:["bonne","Bonne (Werner lat_1=90)"]};sb.defaultDatum="WGS84",sb.Proj=Vv,sb.WGS84=new sb.Proj("WGS84"),sb.Point=Ib,sb.toPoint=tb,sb.defs=yv,sb.nadgrid=function(e,t,r){return t instanceof ArrayBuffer?function(e,t,r){var n=!0;void 0!==r&&!1===r.includeErrorFields&&(n=!1);var o=new DataView(t),i=function(e){var t=e.getInt32(8,!1);return 11!==t&&(11!==(t=e.getInt32(8,!0))&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}(o),a=function(e,t){return{nFields:e.getInt32(8,t),nSubgridFields:e.getInt32(24,t),nSubgrids:e.getInt32(40,t),shiftType:Gv(e,56,64).trim(),fromSemiMajorAxis:e.getFloat64(120,t),fromSemiMinorAxis:e.getFloat64(136,t),toSemiMajorAxis:e.getFloat64(152,t),toSemiMinorAxis:e.getFloat64(168,t)}}(o,i),s=function(e,t,r,n){for(var o=176,i=[],a=0;a<t.nSubgrids;a++){var s=zv(e,o,r),u=Hv(e,o,s,r,n),l=Math.round(1+(s.upperLongitude-s.lowerLongitude)/s.longitudeInterval),c=Math.round(1+(s.upperLatitude-s.lowerLatitude)/s.latitudeInterval);i.push({ll:[Qv(s.lowerLongitude),Qv(s.lowerLatitude)],del:[Qv(s.longitudeInterval),Qv(s.latitudeInterval)],lim:[l,c],count:s.gridNodeCount,cvs:Uv(u)});var f=16;!1===n&&(f=8),o+=176+s.gridNodeCount*f}return i}(o,a,i,n),u={header:a,subgrids:s};return Lv[e]=u,u}(e,t,r):{ready:async function(e,t){for(var r=[],n=await t.getImageCount(),o=n-1;o>=0;o--){var i=await t.getImage(o),a=await i.readRasters(),s=a,u=[i.getWidth(),i.getHeight()],l=i.getBoundingBox().map(Fv),c=[i.fileDirectory.ModelPixelScale[0],i.fileDirectory.ModelPixelScale[1]].map(Fv),f=l[0]+(u[0]-1)*c[0],p=l[3]-(u[1]-1)*c[1],h=s[0],y=s[1],d=[];for(let e=u[1]-1;e>=0;e--)for(let t=u[0]-1;t>=0;t--){var m=e*u[0]+t;d.push([-Qv(y[m]),Qv(h[m])])}r.push({del:c,lim:u,ll:[-f,p],cvs:d})}var g={header:{nSubgrids:n},subgrids:r};return Lv[e]=g,g}(e,t)}},sb.transform=nb,sb.mgrs=mb,sb.version="__VERSION__",function(e){e.Proj.projections.add(zb),e.Proj.projections.add(Jb),e.Proj.projections.add(Wb),e.Proj.projections.add(eA),e.Proj.projections.add(tA),e.Proj.projections.add(rA),e.Proj.projections.add(oA),e.Proj.projections.add(iA),e.Proj.projections.add(aA),e.Proj.projections.add(dA),e.Proj.projections.add(CA),e.Proj.projections.add(_A),e.Proj.projections.add(IA),e.Proj.projections.add(OA),e.Proj.projections.add(xA),e.Proj.projections.add(kA),e.Proj.projections.add(TA),e.Proj.projections.add(jA),e.Proj.projections.add(BA),e.Proj.projections.add(NA),e.Proj.projections.add(RA),e.Proj.projections.add(LA),e.Proj.projections.add(FA),e.Proj.projections.add(QA),e.Proj.projections.add(qA),e.Proj.projections.add(tw),e.Proj.projections.add(rw),e.Proj.projections.add(iw),e.Proj.projections.add(aw),e.Proj.projections.add(pw),e.Proj.projections.add(vw)}(sb);var bw=sb;function Aw(e){"@babel/helpers - typeof";return(Aw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ww(e){return function(e){if(Array.isArray(e))return Sw(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Sw(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Sw(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sw(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Cw(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ew(n.key),n)}}function Ew(e){var t=function(e,t){if("object"!=Aw(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Aw(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Aw(t)?t:t+""}function _w(e,t,r){return t=Iw(t),function(e,t){if(t&&("object"==Aw(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],Iw(e).constructor):t.apply(e,r))}function Iw(e){return(Iw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ow(e,t){return(Ow=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var xw=function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=_w(this,t);var n=e||{};if(r.options=n,r.url=r.options.url,r.extent=r.options.extent,r.clipRegion=r.options.clipRegion||[],r.videoParameters=r.options.videoParameters,r.interval=r.options.interval||.1,r.cv=r.options.opencv||window.cv,!r.cv)throw new Error("opencv.js instance is not existed!");if(!r.videoParameters)throw new Error("videoParameters must be set!");if(r.id=n.id?n.id:M.createUniqueID("VideoLayer_"),r.layerId=r.id+"_outer",r.type="custom",r.renderingMode="3d",r.overlay=!0,r.beginIndex=0,Array.isArray(r.videoParameters)){r.videoParameters=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(e<.001)throw new Error("time interval can't' less than 0.001");if(!t||0===t.length)return[];for(var n=t.map(function(e){return qm(qm({},e),{},{time:Math.round(1e3*e.time)})}),o=1/0,i=1;i<n.length;i++)o=Math.min(o,n[i].time-n[i-1].time);var a=Math.round(1e3*e),s=[n[0].time,n[n.length-1].time],u=s[0],l=s[1];if(a===o)return t;for(var c=a<o,f=[],p=0,h=function(){for(;p<n.length-1&&n[p+1].time<y;)p++;var e=n[p],t=n[p+1]||e;if(c){var o=t.time===e.time?0:(y-e.time)/(t.time-e.time),i={};r.forEach(function(r){if("extent"===r)i[r]=e[r].map(function(n,i){return[e[r][i].x+(t[r][i].x-e[r][i].x)*o,e[r][i].y+(t[r][i].y-e[r][i].y)*o]});else{var n=e[r]+(t[r]-e[r])*o;i[r]=+n}}),f.push(qm(qm({},e),{},{time:+(y/1e3).toFixed(3)},i))}else e.time===y?(f.push($m(e)),p++):t.time===y&&(f.push($m(t)),p++)},y=u;y<=l;y+=a)h();return f}(r.interval,r.videoParameters,["yaw","pitch","roll","x","y","z","extent"]);var o=r.videoParameters.map(function(e){return e.time});r.beginIndex=o[0],r.finder=new Zm(o)}return r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ow(e,t)}(t,o().Evented),r=t,(n=[{key:"onAdd",value:function(e){var t=this;this.map=e,this.renderer=new Lm({url:this.url,id:this.layerId}),this.video=this.renderer.createVideo(),this.videoDomId=this.renderer.getVideoDomId(),this.video.one("firstplay",function(){t.video.play()}),this.video.one("canplay",function(){t.videoWidth=t.video.videoWidth(),t.videoHeight=t.video.videoHeight(),Array.isArray(t.videoParameters)||(t.videoParameters=[t.videoParameters]),t._initParameters(t.videoParameters[0]).then(function(r){t.coordTransfer=r,t.timeParams={},t.videoParameters.forEach(function(r){var n=r.pitch,o=r.roll,i=r.yaw,a=r.x,s=r.y,u=r.z,l=r.fovX,c=r.fovY,f=r.centerX,p=r.centerY,h=r.time||0;t.timeParams[h]={};var y=Wm(l,t.videoWidth),d=Xm(c,t.videoHeight);t.coordTransfer.setCameraLocation({pitch:n,roll:o,yaw:i,x:a,y:s,z:u,fx:y,fy:d,centerX:f,centerY:p});var m=(r.extent||t.extent).map(function(e){return Array.isArray(e)?e:[e.x,e.y]}),g=(0,Dm.polygon)([[].concat(ww(m),[m[0]])]),v=(0,Dm.bbox)(g);t.timeParams[h].result=v;var b=[];t.timeParams[h].allContained=!0;var A=t,w=[[0,0],[A.videoWidth,0],[A.videoWidth,A.videoHeight],[0,A.videoHeight]],S=t.videoHeight;t.clipRegion.length&&(w=t.clipRegion,S=t.clipRegion[2][1]-t.clipRegion[0][1]),t.timeParams[h].realHeight=S,w.forEach(function(e){var r=t.coordTransfer.toSpatialCoordinate(e),n=[r[0],r[1]],o=bw("EPSG:3857","EPSG:4326",n);t._contain(o,v)||(t.timeParams[h].allContained=!1),b.push(o)});var C=[];m.forEach(function(t){var r=e.project(t);C.push(r.x),C.push(r.y)}),t.timeParams[h].extent=m;var E=[];b.forEach(function(t){var r=e.project(t);E.push(r.x),E.push(r.y)});var _=e.project([v[2],v[3]]),I=e.project([v[0],v[1]]),O=[Math.abs(_.x-I.x),Math.abs(_.y-I.y)],x=O[0]/O[1];t.timeParams[h].ratio=x,t.timeParams[h].dsize=new t.cv.Size(S*x,S);var P=S*x/O[0],k=S/O[1],T=Math.min(P,k);E=(E=t._getPixelBbox(E,v,t.timeParams[h].allContained)).map(function(e){return e*T}),C=t._getPixelBbox(C),t.timeParams[h].originBounds=C.map(function(e){return e*T});var j=t.cv.matFromArray(4,1,t.cv.CV_32FC2,E);t.timeParams[h].dstTri=j}),t._addVideoLayer(t.map)})})}},{key:"render",value:function(){}},{key:"_getPixelBbox",value:function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=0,o=0;e.forEach(function(e,t){(!n||e<n)&&t%2==0&&(n=e),(!o||e<o)&&t%2!=0&&(o=e)});var i=0,a=0;if(t&&!r){var s=this.map.project([t[0],t[1]]),u=this.map.project([t[2],t[3]]);i=Math.min(Math.abs(n-s.x),Math.abs(n-u.x)),a=Math.max(Math.abs(o-s.y),Math.abs(o-u.y))}return e=e.map(function(e,t){return t%2==0?e-n-i:e-o+a})}},{key:"_initParameters",value:function(e){if(!e||Object.keys(e).length)return e.fx=Wm(e.fovX,this.videoWidth),e.fy=Xm(e.fovY,this.videoHeight),new Um(this.cv,e).init()}},{key:"_addVideoLayer",value:function(e){var t=this.videoDomId||this.url,r=this.extent||this.timeParams[0].extent,n=(0,Dm.polygon)([[].concat(ww(r),[r[0]])]),o=(0,Dm.bbox)(n),i=this,a=[0,0,i.videoWidth,0,i.videoWidth,i.videoHeight,0,i.videoHeight];this.clipRegion.length&&(a=[],this.clipRegion.forEach(function(e){a.push(e[0]),a.push(e[1])}));var s=this.cv.matFromArray(4,1,this.cv.CV_32FC2,a);i.dsize=i.timeParams[i.beginIndex].dsize;var u=i.timeParams[i.beginIndex].dstTri,l=document.createElement("canvas"),c=this._updateMask(l,i.timeParams[i.beginIndex].realHeight,i.timeParams[i.beginIndex].ratio),f=c.clipMat,p=c.dst1,h=0,y=this.video.tech().el(),d=0;if(this.videoParameters.length>1&&y&&y.requestVideoFrameCallback){var m=function(e,t){d=t.mediaTime,y.requestVideoFrameCallback(m)};y.requestVideoFrameCallback(m)}e.addSource(this.layerId,{type:"video",urls:[t],drawImageCallback:function(e){if(i.videoParameters.length>1){var t=d||i.video.currentTime(),r=i.finder.findNearest(t);if(r&&(h=r.value),h){var n=i.timeParams[h];h=0,n&&(i.dsize=n.dsize,u=n.dstTri,o=n.result,setTimeout(function(){i.map.getSource(i.layerId).setCoordinates([[o[0],o[3]],[o[2],o[3]],[o[2],o[1]],[o[0],o[1]]])},0))}}var a,c=i.cv.matFromImageData(e),y=new i.cv.Mat,m=i.cv.findHomography(s,u);if(i.cv.warpPerspective(c,y,m,i.dsize),i.timeParams[h].allContained)a=new ImageData(new Uint8ClampedArray(y.data),y.cols,y.rows);else{if(i.videoParameters.length>1){var g=i._updateMask(l,i.timeParams[i.beginIndex].realHeight,i.timeParams[i.beginIndex].ratio);f=g.clipMat,p=g.dst1}y.copyTo(p,f),a=new ImageData(new Uint8ClampedArray(p.data),p.cols,p.rows)}return c.delete(),y.delete(),m.delete(),a},coordinates:[[o[0],o[3]],[o[2],o[3]],[o[2],o[1]],[o[0],o[1]]]}),e.addLayer({id:this.layerId,type:"raster",source:this.layerId,paint:{"raster-fade-duration":0}});var g=e.getSource(this.layerId);g&&g.play()}},{key:"_updateMask",value:function(e,t,r){var n=this;e.width=t*r,e.height=t;var o=e.getContext("2d");o.beginPath(),this.timeParams[0].originBounds.forEach(function(e,t){0===t&&o.moveTo(e,n.timeParams[0].originBounds[t+1]),t%2==0&&o.lineTo(e,n.timeParams[0].originBounds[t+1])}),o.closePath(),o.fillStyle="#ffffff",o.fill();var i=o.getImageData(0,0,e.width,e.height);return{clipMat:this.cv.matFromImageData(i),dst1:new this.cv.Mat}}},{key:"_contain",value:function(e,t){return(e[0]>t[0]||Math.abs(e[0]-t[0])<1e-6)&&(e[0]<t[2]||Math.abs(e[0]-t[2])<1e-6)&&(e[1]>t[1]||Math.abs(e[1]-t[1])<1e-6)&&(e[1]<t[3]||Math.abs(e[1]-t[3])<1e-6)}},{key:"moveLayer",value:function(e){this.map.moveLayer(this.layerId,e)}},{key:"setVisibility",value:function(e){var t=e?"visible":"none";this.map.setLayoutProperty(this.layerId,"visibility",t)}}])&&Cw(r.prototype,n),i&&Cw(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,i}();function Pw(e){"@babel/helpers - typeof";return(Pw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kw(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Tw(n.key),n)}}function Tw(e){var t=function(e,t){if("object"!=Pw(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Pw(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Pw(t)?t:t+""}function jw(e,t,r){return t=Mw(t),function(e,t){if(t&&("object"==Pw(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],Mw(e).constructor):t.apply(e,r))}function Mw(e){return(Mw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Bw(e,t){return(Bw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Nw=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=jw(this,t)).options=r||{},n.url=e,n.fire("initialized",n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bw(e,t)}(t,o().Evented),r=t,n&&kw(r.prototype,n),i&&kw(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,i}();function Rw(e){"@babel/helpers - typeof";return(Rw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lw(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Dw(n.key),n)}}function Dw(e){var t=function(e,t){if("object"!=Rw(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Rw(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Rw(t)?t:t+""}var Fw=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return t=e,n=[{key:"generateToken",value:function(e,t){var r=this.servers[e];if(r)return z.post(r.tokenServiceUrl,JSON.stringify(t.toJSON())).then(function(e){return e.text()})}},{key:"registerServers",value:function(e){this.servers=this.servers||{},M.isArray(e)||(e=[e]);for(var t=0;t<e.length;t++){var r=e[t];this.servers[r.server]=r}}},{key:"registerToken",value:function(e,t){if(this.tokens=this.tokens||{},e&&t){var r=this._getTokenStorageKey(e);this.tokens[r]=t}}},{key:"registerKey",value:function(e,t){if(this.keys=this.keys||{},e&&!(e.length<1)&&t){e=M.isArray(e)?e:[e];for(var r=0;r<e.length;r++){var n=this._getUrlRestString(e[0])||e[0];this.keys[n]=t}}}},{key:"getServerInfo",value:function(e){return this.servers=this.servers||{},this.servers[e]}},{key:"getToken",value:function(e){if(e){this.tokens=this.tokens||{};var t=this._getTokenStorageKey(e);return this.tokens[t]}}},{key:"getKey",value:function(e){this.keys=this.keys||{};var t=this._getUrlRestString(e)||e;return this.keys[t]}},{key:"loginiServer",value:function(e,t,r,n){e=M.urlPathAppend(e,"services/security/login");var o={username:t&&t.toString(),password:r&&r.toString(),rememberme:n};o=JSON.stringify(o);return z.post(e,o,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).then(function(e){return e.json()})}},{key:"logoutiServer",value:function(e){e=M.urlPathAppend(e,"services/security/logout");return z.get(e,"",{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},withoutFormatSuffix:!0}).then(function(){return!0}).catch(function(){return!1})}},{key:"loginOnline",value:function(t,r){var n=e.SSO+"/login?service="+t;this._open(n,r)}},{key:"loginiPortal",value:function(e,t,r){e=M.urlPathAppend(e,"web/login");var n={username:t&&t.toString(),password:r&&r.toString()};n=JSON.stringify(n);return z.post(e,n,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},withCredentials:!1}).then(function(e){return e.json()})}},{key:"logoutiPortal",value:function(e){e=M.urlPathAppend(e,"services/security/logout");return z.get(e,"",{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},withCredentials:!0,withoutFormatSuffix:!0}).then(function(){return!0}).catch(function(){return!1})}},{key:"loginManager",value:function(e,t){var r=M.urlPathAppend(e,"/security/tokens"),n=t||{},o={username:n.userName&&n.userName.toString(),password:n.password&&n.password.toString()};o=JSON.stringify(o);var i=this;return z.post(r,o,{headers:{Accept:"*/*","Content-Type":"application/json; charset=UTF-8"}}).then(function(e){return e.text()}).then(function(e){return i.imanagerToken=e,e})}},{key:"destroyAllCredentials",value:function(){this.keys=null,this.tokens=null,this.servers=null}},{key:"destroyToken",value:function(e){if(e){var t=this._getTokenStorageKey(e);this.tokens=this.tokens||{},this.tokens[t]&&delete this.tokens[t]}}},{key:"destroyKey",value:function(e){if(e){this.keys=this.keys||{};var t=this._getUrlRestString(e)||e;this.keys[t]&&delete this.keys[t]}}},{key:"appendCredential",value:function(e){var t=e,r=this.getToken(e),n=r?new Ia(r,"token"):null;return n||(n=(r=this.getKey(e))?new Ia(r,"key"):null),n&&(t=M.urlAppend(t,n.getUrlParameters())),t}},{key:"_open",value:function(e,t){t=null==t||t;var r=window.screen.availWidth/2-this.INNER_WINDOW_WIDTH/2,n=window.screen.availHeight/2-this.INNER_WINDOW_HEIGHT/2,o="height="+this.INNER_WINDOW_HEIGHT+", width="+this.INNER_WINDOW_WIDTH+",top="+n+", left="+r+",toolbar=no, menubar=no, scrollbars=no, resizable=no, location=no, status=no";t?window.open(e,"login"):window.open(e,"login",o)}},{key:"_getTokenStorageKey",value:function(e){var t=e.match(/(.*?):\/\/([^\/]+)/i);return t?t[0]:e}},{key:"_getUrlRestString",value:function(e){if(!e)return e;var t=e.match(/(http|https):\/\/(.*\/rest)/i);return t?t[0]:e}}],(r=null)&&Lw(t.prototype,r),n&&Lw(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function Qw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Gw(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Qw(Object(r),!0).forEach(function(t){Uw(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qw(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Uw(e,t,r){return(t=qw(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zw(e){"@babel/helpers - typeof";return(zw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hw(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,qw(n.key),n)}}function qw(e){var t=function(e,t){if("object"!=zw(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=zw(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==zw(t)?t:t+""}Fw.INNER_WINDOW_WIDTH=600,Fw.INNER_WINDOW_HEIGHT=600,Fw.SSO="https://sso.supermap.com",Fw.ONLINE="https://www.supermapol.com";var Vw=function(){return e=function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=this;this.EVENT_TYPES=["processCompleted","processFailed"],this.events=null,this.eventListeners=null,this.url=null,this.urls=null,this.proxy=null,this.index=null,this.length=null,this.totalTimes=null,this.POLLING_TIMES=3,this.isInTheSameDomain=null,this.withCredentials=!1,M.isArray(t)?(n.urls=t,n.length=t.length,n.totalTimes=n.length,1===n.length?n.url=t[0]:(n.index=parseInt(Math.random()*n.length),n.url=t[n.index])):(n.totalTimes=1,n.url=t),M.isArray(t)&&!n.isServiceSupportPolling()&&(n.url=t[0],n.totalTimes=1),r=r||{},this.crossOrigin=r.crossOrigin,this.headers=r.headers,M.extend(this,r),n.isInTheSameDomain=M.isInTheSameDomain(n.url),n.events=new ja(n,null,n.EVENT_TYPES,!0),n.eventListeners instanceof Object&&n.events.on(n.eventListeners),this.CLASS_NAME="SuperMap.CommonServiceBase"},(t=[{key:"destroy",value:function(){var e=this;M.isArray(e.urls)&&(e.urls=null,e.index=null,e.length=null,e.totalTimes=null),e.url=null,e.isInTheSameDomain=null,e.EVENT_TYPES=null,e.events&&(e.events.destroy(),e.events=null),e.eventListeners&&(e.eventListeners=null)}},{key:"request",value:function(e){var t=e.scope.format;if("string"==typeof e.success&&(e.scope.format=e.success,t=e.success,e.success=null,e.failure=null),t&&!this.supportDataFormat(t))throw new Error("".concat(this.CLASS_NAME," is not surport ").concat(t," format!"));var r=this;return e.url=e.url||r.url,this._returnContent(e)&&!e.url.includes("returnContent=true")&&(e.url=M.urlAppend(e.url,"returnContent=true")),e.proxy=e.proxy||r.proxy,e.withCredentials=void 0!=e.withCredentials?e.withCredentials:r.withCredentials,e.crossOrigin=void 0!=e.crossOrigin?e.crossOrigin:r.crossOrigin,e.headers=e.headers||r.headers,e.isInTheSameDomain=r.isInTheSameDomain,e.withoutFormatSuffix=e.scope.withoutFormatSuffix||!1,e.url=Fw.appendCredential(e.url),r.calculatePollingTimes(),e.scope=r,r.totalTimes>0?(r.totalTimes--,r.ajaxPolling(e)):r._commit(e)}},{key:"ajaxPolling",value:function(e){var t=this,r=e.url,n=/^http:\/\/([a-z]{9}|(\d+\.){3}\d+):\d{0,4}/;return t.index=parseInt(Math.random()*t.length),t.url=t.urls[t.index],r=r.replace(n,n.exec(t.url)[0]),e.url=r,e.isInTheSameDomain=M.isInTheSameDomain(r),t._commit(e)}},{key:"calculatePollingTimes",value:function(){var e=this;e.times?e.totalTimes>e.POLLING_TIMES?e.times>e.POLLING_TIMES?e.totalTimes=e.POLLING_TIMES:e.totalTimes=e.times:e.times<e.totalTimes&&(e.totalTimes=e.times):e.totalTimes>e.POLLING_TIMES&&(e.totalTimes=e.POLLING_TIMES),e.totalTimes--}},{key:"isServiceSupportPolling",value:function(){return!("SuperMap.REST.ThemeService"===this.CLASS_NAME||"SuperMap.REST.EditFeaturesService"===this.CLASS_NAME)}},{key:"transformResult",value:function(e,t){return{result:e=M.transformResult(e),options:t}}},{key:"transformErrorResult",value:function(e,t){return{error:(e=M.transformResult(e)).error||e,options:t}}},{key:"serviceProcessCompleted",value:function(e,t){e=this.transformResult(e).result,this.events.triggerEvent("processCompleted",{result:e,options:t})}},{key:"serviceProcessFailed",value:function(e,t){var r=(e=this.transformErrorResult(e).error).error||e;this.events.triggerEvent("processFailed",{error:r,options:t})}},{key:"_returnContent",value:function(e){return e.scope.format!==sn.FGB&&!!e.scope.returnContent}},{key:"supportDataFormat",value:function(e){return this.dataFormat().includes(e)}},{key:"dataFormat",value:function(){return[sn.GEOJSON,sn.ISERVER]}},{key:"_commit",value:function(e){var t=this;if("POST"===e.method||"PUT"===e.method||"PATCH"===e.method)if(e.params&&(e.url=M.urlAppend(e.url,M.getParameterString(e.params||{}))),"object"!==zw(e.data)||e.data instanceof FormData)e.params=e.data;else try{e.params=M.toJSON(e.data)}catch(e){console.log("ä¸æ¯jsonå¯¹è±¡")}return z.commit(e.method,e.url,e.params,{headers:e.headers,withoutFormatSuffix:e.withoutFormatSuffix,withCredentials:e.withCredentials,crossOrigin:e.crossOrigin,timeout:e.async?0:null,proxy:e.proxy}).then(function(e){return e.text?e.text():e.json?e.json():e}).then(function(t){var r=t;return"string"==typeof t&&(r=(new Cr).read(t)),(!r||r.error||r.code>=300&&304!==r.code)&&(r=r&&r.error?{error:r.error}:{error:r}),r&&e.scope.format===sn.FGB&&(r.newResourceLocation=r.newResourceLocation.replace(".json","")+".fgb"),r}).catch(function(e){return{error:e}}).then(function(r){var n={object:t};if(r.error){var o="processFailed";if(t.events&&t.events.listeners[o]&&t.events.listeners[o].length){var i=e.failure&&(e.scope?y.bind(e.failure,e.scope):e.failure);i?i(r,e):t.serviceProcessFailed(r,e)}else(n=Gw(Gw({},n),t.transformErrorResult(r,e))).type=o,e.failure&&e.failure(n)}else{var a="processCompleted";if(t.events&&t.events.listeners[a]&&t.events.listeners[a].length){var s=e.success&&(e.scope?y.bind(e.success,e.scope):e.success);s?s(r,e):t.serviceProcessCompleted(r,e)}else r.succeed=void 0==r.succeed||r.succeed,(n=Gw(Gw({},n),t.transformResult(r,e))).type=a,e.success&&e.success(n)}return n})}}])&&Hw(e.prototype,t),r&&Hw(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function Kw(e){"@babel/helpers - typeof";return(Kw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yw(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof s?n:s,l=Object.create(u.prototype);return Jw(l,"_invoke",function(r,n,o){var i,s,u,l=0,c=o||[],f=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,r){return i=t,s=0,u=e,p.n=r,a}};function h(r,n){for(s=r,u=n,t=0;!f&&l&&!o&&t<c.length;t++){var o,i=c[t],h=p.p,y=i[2];r>3?(o=y===n)&&(u=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=r<2&&h<i[1])?(s=0,p.v=n,p.n=i[1]):h<y&&(o=r<3||i[0]>n||n>y)&&(i[4]=r,i[5]=n,p.n=y,s=0))}if(o||r>1)return a;throw f=!0,n}return function(o,c,y){if(l>1)throw TypeError("Generator is already running");for(f&&1===c&&h(c,y),s=c,u=y;(t=s<2?e:u)||!f;){i||(s?s<3?(s>1&&(p.n=-1),h(s,u)):p.n=u:p.v=u);try{if(l=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(f=p.n<0)?u:r.call(n,p))!==a)break}catch(t){i=e,s=1,u=t}finally{l=1}}return{value:t,done:f}}}(r,o,i),!0),l}var a={};function s(){}function u(){}function l(){}t=Object.getPrototypeOf;var c=[][n]?t(t([][n]())):(Jw(t={},n,function(){return this}),t),f=l.prototype=s.prototype=Object.create(c);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,Jw(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=l,Jw(f,"constructor",l),Jw(l,"constructor",u),u.displayName="GeneratorFunction",Jw(l,o,"GeneratorFunction"),Jw(f),Jw(f,o,"Generator"),Jw(f,n,function(){return this}),Jw(f,"toString",function(){return"[object Generator]"}),(Yw=function(){return{w:i,m:p}})()}function Jw(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}(Jw=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){Jw(e,t,function(e){return this._invoke(t,r,e)})};i("next",0),i("throw",1),i("return",2)}})(e,t,r,n)}function Ww(e){return function(e){if(Array.isArray(e))return Xw(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Xw(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Xw(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xw(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Zw(e,t,r,n,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function $w(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,eS(n.key),n)}}function eS(e){var t=function(e,t){if("object"!=Kw(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Kw(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Kw(t)?t:t+""}function tS(e,t,r){return t=nS(t),function(e,t){if(t&&("object"==Kw(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],nS(e).constructor):t.apply(e,r))}function rS(){return(rS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=nS(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function nS(e){return(nS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oS(e,t){return(oS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var iS=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=tS(this,t,[e,r])).options=r||{},n.CLASS_NAME="SuperMap.KnowledgeGraphService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oS(e,t)}(t,Vw),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=rS(nS(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"findShortestPath",value:function(e,t){var r=this.url+"/shortestPath.json?startID=".concat(e.startID,"&endID=").concat(e.endID);this.processAsync({url:r,method:"GET",callback:t})}},{key:"query",value:function(e,t){var r=M.urlAppend(this.url+"/query.json","".concat("cypherQuery","=").concat(encodeURI(e)));this.processAsync({url:r,method:"GET",callback:t})}},{key:"getGraphMaps",value:function(e){var t=this.url+"/graphmaps.json";this.processAsync({url:t,method:"GET",callback:e})}},{key:"getGraphMap",value:function(e,t){var r=this.url+"/graphmaps/".concat(e,".json");this.processAsync({url:r,method:"GET",callback:t})}},{key:"getGraphMapData",value:function(){var e,t=(e=Yw().m(function e(t){var r,n,o,i,a,s,u,l,c;return Yw().w(function(e){for(;;)switch(e.n){case 0:return r=[],e.n=1,this._getGraphMapData(t);case 1:if(n=e.v){e.n=2;break}return e.a(2);case 2:o=n.dataContent.queries&&n.dataContent.queries.query||[],i=[],i="string"==typeof o?[o]:o,(a=this._getGraphMapExpandQuery(n)).length&&(s=i).push.apply(s,Ww(a)),u=0;case 3:if(!(u<i.length)){e.n=6;break}return l=i[u],e.n=4,this._queryDataBySql(l);case 4:c=e.v,r=r.concat([],c);case 5:u++,e.n=3;break;case 6:return e.a(2,{data:r,graphMap:n})}},e,this)}),function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){Zw(i,n,o,a,s,"next",e)}function s(e){Zw(i,n,o,a,s,"throw",e)}a(void 0)})});return function(e){return t.apply(this,arguments)}}()},{key:"_getGraphMapExpandQuery",value:function(e){var t=[];return(e.dataContent.expand&&JSON.parse(e.dataContent.expand)||[]).forEach(function(e){t.push("match p=(n)-[]-(m) where id(n)=".concat(e," return p;"))}),t}},{key:"processAsync",value:function(e){var t=e.url,r=e.params,n=e.method,o=e.callback,i={method:n,url:t,scope:this,success:o,failure:o};return r&&(i.params=r),this.request(i)}},{key:"_getGraphMapData",value:function(e){var t=this;return new Promise(function(r,n){t.getGraphMap(e,function(e){"processFailed"===e.type?n(e.error):""===e.result.data?n("æ æ°æ®"):r(e.result.graphMap)})})}},{key:"_queryDataBySql",value:function(e){var t=this;return new Promise(function(r,n){t.query(e,function(e){"processFailed"===e.type?n(e.error):r(e.result)})})}}])&&$w(r.prototype,n),o&&$w(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function aS(e){"@babel/helpers - typeof";return(aS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sS(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof s?n:s,l=Object.create(u.prototype);return uS(l,"_invoke",function(r,n,o){var i,s,u,l=0,c=o||[],f=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,r){return i=t,s=0,u=e,p.n=r,a}};function h(r,n){for(s=r,u=n,t=0;!f&&l&&!o&&t<c.length;t++){var o,i=c[t],h=p.p,y=i[2];r>3?(o=y===n)&&(u=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=r<2&&h<i[1])?(s=0,p.v=n,p.n=i[1]):h<y&&(o=r<3||i[0]>n||n>y)&&(i[4]=r,i[5]=n,p.n=y,s=0))}if(o||r>1)return a;throw f=!0,n}return function(o,c,y){if(l>1)throw TypeError("Generator is already running");for(f&&1===c&&h(c,y),s=c,u=y;(t=s<2?e:u)||!f;){i||(s?s<3?(s>1&&(p.n=-1),h(s,u)):p.n=u:p.v=u);try{if(l=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(f=p.n<0)?u:r.call(n,p))!==a)break}catch(t){i=e,s=1,u=t}finally{l=1}}return{value:t,done:f}}}(r,o,i),!0),l}var a={};function s(){}function u(){}function l(){}t=Object.getPrototypeOf;var c=[][n]?t(t([][n]())):(uS(t={},n,function(){return this}),t),f=l.prototype=s.prototype=Object.create(c);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,uS(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=l,uS(f,"constructor",l),uS(l,"constructor",u),u.displayName="GeneratorFunction",uS(l,o,"GeneratorFunction"),uS(f),uS(f,o,"Generator"),uS(f,n,function(){return this}),uS(f,"toString",function(){return"[object Generator]"}),(sS=function(){return{w:i,m:p}})()}function uS(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}(uS=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){uS(e,t,function(e){return this._invoke(t,r,e)})};i("next",0),i("throw",1),i("return",2)}})(e,t,r,n)}function lS(e,t,r,n,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function cS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,fS(n.key),n)}}function fS(e){var t=function(e,t){if("object"!=aS(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=aS(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==aS(t)?t:t+""}function pS(e,t,r){return t=hS(t),function(e,t){if(t&&("object"==aS(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],hS(e).constructor):t.apply(e,r))}function hS(e){return(hS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yS(e,t){return(yS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var dS=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=pS(this,t,[e,r]))._knowledgeGraphService=new iS(e,r),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yS(e,t)}(t,Nw),r=t,(n=[{key:"findShortestPath",value:function(e,t){return this._knowledgeGraphService.findShortestPath(e,t)}},{key:"query",value:function(e,t){return this._knowledgeGraphService.query(e,t)}},{key:"getGraphMaps",value:function(e){return this._knowledgeGraphService.getGraphMaps(e)}},{key:"getGraphMap",value:function(e,t){return this._knowledgeGraphService.getGraphMap(e,t)}},{key:"getGraphMapData",value:function(){var e,t=(e=sS().m(function e(t){var r;return sS().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this._knowledgeGraphService.getGraphMapData(t);case 1:return r=e.v,e.a(2,r)}},e,this)}),function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){lS(i,n,o,a,s,"next",e)}function s(e){lS(i,n,o,a,s,"throw",e)}a(void 0)})});return function(e){return t.apply(this,arguments)}}()}])&&cS(r.prototype,n),o&&cS(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(),mS=r(44),gS=r.n(mS);function vS(e){"@babel/helpers - typeof";return(vS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function AS(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bS(Object(r),!0).forEach(function(t){wS(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bS(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function wS(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=vS(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=vS(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==vS(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SS(e){return function(e){if(Array.isArray(e))return CS(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return CS(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?CS(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function CS(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ES(e,t){var r=(t=t||{}).styles&&t.styles.style,n=t.captionFields&&t.captionFields.captionField,o=t.showRelationTypes,i={nodes:[],edges:[]};return e.forEach(function(e){var t=e.path;if(t){var a,s,u=function(e,t,r,n){var o={nodes:[],edges:[]};return e.forEach(function(e){if(IS(e)){var i=xS(e,t,n);o.edges.push(i)}else{var a=OS(e,t,r);o.nodes.push(a)}}),o}(t,r,n,o),l=u.nodes,c=u.edges;(a=i.nodes).push.apply(a,SS(l)),(s=i.edges).push.apply(s,SS(c))}else if(IS(e)){var f=xS(e,r,o);i.edges.push(f)}else{var p=OS(e,r,n);i.nodes.push(p)}}),{nodes:_S(i.nodes),edges:_S(i.edges,"edgeId")}}function _S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id";return gS()(e,t)}function IS(e){return e.hasOwnProperty("start")&&e.hasOwnProperty("end")}function OS(e,t,r){var n=e.id,o=e.properties,i=e.lables,a=t?function(e,t){if(!t)return{};for(var r=e.id,n=e.labels,o=t.filter(function(e){return"entity"===e.type}),i=0;i<o.length;i++){var a=o[i],s=a.color,u=a.textColor,l=a.font,c=a.size,f=a.entityTypes,p=a.entityIds,h=JSON.parse(p||"[]"),y=JSON.parse(f||"[]");if(h.includes(r)||y.includes(n[0]))return AS(AS({fillColor:s,fontSize:l.fontSize,fill:u,size:c},kS(l.fontName)),PS(l.fontStyle))}return{}}(e,t):{},s=function(e,t){var r=e.id,n=e.labels,o=e.properties;if(t)for(var i=t instanceof Array?t:[t],a=0;a<i.length;a++){var s=i[a],u=s.name,l=s.entityTypes,c=s.entityIds,f=JSON.parse(c||"[]"),p=JSON.parse(l||"[]"),h=n&&n.join("&");if(f.includes(r)||p.includes(h))return o[u]}return o[o._labelfieldname]}(e,r),u=a.fillColor||"",l={id:n+"",label:void 0===s?"":s+"",properties:o,lables:i};return a.size&&(l.size=a.size,delete a.size),a.fillColor&&(l.style={fill:u,stroke:u},delete a.fillColor),0!==Object.keys(a).length&&(l.labelCfg={style:a}),l}function xS(e,t,r){var n=e.start,o=e.end,i=e.id,a=e.type,s=e.properties,u=t?function(e,t){if(!t)return{};for(var r=e.id,n=e.type,o=t.filter(function(e){return"relationShip"===e.type}),i=0;i<o.length;i++){var a=o[i],s=a.color,u=a.width,l=a.textColor,c=a.font,f=a.relationTypes,p=a.relationIds,h=JSON.parse(p||"[]"),y=JSON.parse(f||"[]");if(h.includes(r)||y.includes(n))return AS(AS({stroke:s,lineWidth:1.4*Number(u),fontSize:c.fontSize,fill:l},kS(c.fontName)),PS(c.fontStyle))}return{}}(e,t):{},l={source:n+"",target:o+"",edgeId:i+"",label:a,style:{},labelCfg:{},properties:s};return!1===r&&delete l.label,u.stroke&&(l.style.stroke=u.stroke,l.style.endArrow={path:"M 0,0 L 4,2 L 4,-2 Z",fill:u.stroke},delete u.stroke),u.lineWidth&&(l.style.lineWidth=u.lineWidth,delete u.lineWidth),l.labelCfg={style:u},l}function PS(e){return 1===e||"bold"===e?{fontWeight:"bold"}:2===e||"italic"===e?{fontStyle:"italic"}:"bolditalic"===e?{fontWeight:"bold",fontStyle:"italic"}:{}}function kS(e){if(!e)return{};var t=e.split(".");return AS({fontFamily:t[0]},PS(t[1]))}var TS=function(){try{return G6}catch(e){return{}}}(),jS=r.n(TS),MS=r(3448),BS=r.n(MS),NS=r(8676),RS=r.n(NS);function LS(e){"@babel/helpers - typeof";return(LS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function DS(e){return function(e){if(Array.isArray(e))return FS(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return FS(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?FS(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function FS(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function QS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function GS(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?QS(Object(r),!0).forEach(function(t){US(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QS(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function US(e,t,r){return(t=HS(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,HS(n.key),n)}}function HS(e){var t=function(e,t){if("object"!=LS(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=LS(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==LS(t)?t:t+""}var qS=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config=null,this.graph=null,this.data=null,this.collpasedData={},this.importG6(),this.hoverColor="#b4d6ff",this.CLASS_NAME="SuperMap.G6Render"},(t=[{key:"importG6",value:function(){jS()||console.log("please import g6, egï¼https://gw.alipayobjects.com/os/lib/antv/g6/4.3.2/dist/g6.min.js")}},{key:"initGraph",value:function(e){var t=new(jS().Graph)(e);return this.graph=t,e&&!1===e.highlightNode||this.highlightNode(t),e&&!1===e.highlightEdge||this.highlightEdge(t),!1===e.dragCanvas&&!1===e.dragNode||this.stopDefaultEventPropagation(),t}},{key:"_getDefaultEdgeHighlightStyle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.hoverColor;return{stroke:e,shadowColor:e,shadowBlur:5,endArrow:{path:"M 0,0 L 4,2 L 4,-2 Z",fill:e}}}},{key:"_getDefaultNodeHighlightStyle",value:function(){return{lineWidth:3,stroke:arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.hoverColor}}},{key:"_getContextMenu",value:function(){var e=this;return new(jS().Menu)({shouldBegin:function(e){return!!(e.target&&e.target.isCanvas&&e.target.isCanvas())||!!e.item},getContent:function(t){var r=t.item;if(!(t.target&&t.target.isCanvas&&t.target.isCanvas())&&r){var n=r.getType(),o=r.getModel();return n&&o&&"node"===n?e.isCollpased(o.id)?"<ul>\n              <li id='expand'>å±å¼</li>\n            </ul>":"<ul>\n              <li id='collapse'>æå </li>\n            </ul>":void 0}},handleMenuClick:function(t,r){switch(t.id.split("-")[0]){case"hide":e.hideItem(r);break;case"expand":e.expandNode(r);break;case"collapse":e.collapseNode(r);break;case"show":e.showItem(r)}},offsetX:26,offsetY:0,itemTypes:["node"]})}},{key:"_getGraphConfig",value:function(e){var t=this,r={speed:150,maxIteration:30,tick:RS()(this.refreshPositions.bind(this),150)},n={type:"fruchterman",gravity:5},o={},i={type:"line",style:{endArrow:{path:"M 0,0 L 4,2 L 4,-2 Z",fill:"#e0e0e0"},lineWidth:.5},labelCfg:{autoRotate:!0,style:{fontSize:4,fill:"#333"}}},a={default:["drag-canvas","zoom-canvas","drag-node"]},s=this._getContextMenu(),u=[new(jS().ToolBar),s];if(!e)return this._setToolBarStyle(),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"knowledgeGraph",s=document.querySelector("#".concat(e));return{container:e,width:s.scrollWidth,height:s.scrollHeight,plugins:u,modes:a,layout:GS(GS({},n),r),defaultNode:o,defaultEdge:i,nodeStateStyles:{hover:t._getDefaultNodeHighlightStyle(),actived:t._getDefaultNodeHighlightStyle()},edgeStateStyles:{hover:t._getDefaultEdgeHighlightStyle(),actived:t._getDefaultEdgeHighlightStyle()}}}();e.container=e.container||"knowledgeGraph";var l="string"==typeof e.container?document.querySelector("#".concat(e.container)):e.container;e.width=e.width||l.scrollWidth,e.height=e.height||l.scrollHeight,e.layout=GS(GS(GS({},n),e.layout||{}),!1!==e.animate?r:{}),e.defaultNode=GS(GS({},o),e.defaultNode||{}),e.defaultEdge=GS(GS({},i),e.defaultEdge||{}),e.modes={default:[]},!1!==e.dragCanvas&&e.modes.default.push("drag-canvas"),!1!==e.zoomCanvas&&e.modes.default.push("zoom-canvas"),!1!==e.dragNode&&e.modes.default.push("drag-node");var c=GS(GS({},this._getDefaultNodeHighlightStyle()),e.nodeHighlightStyle||{}),f=GS(GS({},this._getDefaultEdgeHighlightStyle()),e.edgeHighlightStyle||{});return e.nodeStateStyles={hover:c,actived:c},e.edgeStateStyles={hover:f,actived:f},!1!==e.showToolBar&&(e.plugins=[new(jS().ToolBar)],this._setToolBarStyle()),!1!==e.showContextMenu&&(e.plugins=[].concat(DS(e.plugins||[]),[s]),this._setToolBarStyle()),e}},{key:"changeSize",value:function(e,t){return this.graph.changeSize(e,t)}},{key:"autoResize",value:function(){var e=this,t=this.getContainer();window.addEventListener("resize",function(){var r=t.scrollWidth,n=t.scrollHeight;e.graph.changeSize(r,n),e.graph.refresh()})}},{key:"zoom",value:function(e,t,r,n){this.graph.zoom(e,t,r,n)}},{key:"zoomTo",value:function(e,t,r,n){this.graph.zoomTo(e,t,r,n)}},{key:"fitView",value:function(e,t,r,n){this.graph.fitView(e,t,r,n)}},{key:"fitCenter",value:function(e,t){this.graph.fitCenter(e,t)}},{key:"getGraphCenterPoint",value:function(){return this.graph.getGraphCenterPoint()}},{key:"getViewPortCenterPoint",value:function(){return this.graph.getViewPortCenterPoint()}},{key:"getZoom",value:function(){return this.graph.getZoom()}},{key:"getMinZoom",value:function(){return this.graph.getMinZoom()}},{key:"setMinZoom",value:function(e){this.graph.setMinZoom(e)}},{key:"getMaxZoom",value:function(){return this.graph.getMaxZoom()}},{key:"setMaxZoom",value:function(e){this.graph.setMaxZoom(e)}},{key:"getWidth",value:function(){return this.graph.getWidth()}},{key:"getHeight",value:function(){return this.graph.getHeight()}},{key:"setCenter",value:function(e){var t=this.graph.getWidth()/2,r=this.graph.getHeight()/2,n=this.graph.getCanvasByPoint(e.x,e.y);this.graph.translate(t-n.x,r-n.y)}},{key:"_setToolBarStyle",value:function(){BS()("\n      .g6-component-toolbar li[code='redo'],\n      .g6-component-toolbar li[code='undo'],\n      .g6-component-toolbar li[code='realZoom'] {\n        display: none;\n      }\n      .g6-component-contextmenu {\n        position: absolute;\n        z-index: 2;\n        list-style-type: none;\n        border-radius: 6px;\n        font-size: 14px;\n        width: fit-content;\n        transition: opacity .2s;\n        text-align: center;\n        box-shadow: 0 5px 18px 0 rgba(0, 0, 0, 0.6);\n        border: 0px;\n      }\n      .g6-component-contextmenu ul {\n        padding-left: 0px;\n        margin: 0;\n      }\n      .g6-component-contextmenu li {\n        cursor: pointer;\n        list-style-type: none;\n        list-style: none;\n        margin-left: 0;\n        line-height: 38px;\n        padding: 0px 35px;\n      }\n      .g6-component-contextmenu li:hover {\n        color: #333;\n        background: #aaaaaa45;\n      }\n    ")}},{key:"highlightNode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph,t=null;e.on("node:mouseenter",function(r){var n=r.item;e.setAutoPaint(!1),t&&e.clearItemStates(t,"hover"),e.setItemState(n,"hover",!0),t=n,e.paint(),e.setAutoPaint(!0)}),e.on("node:mouseleave",function(){e.setAutoPaint(!1),t&&(e.clearItemStates(t,"hover"),t=null),e.paint(),e.setAutoPaint(!0)})}},{key:"highlightEdge",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph,t=null;e.on("edge:mouseenter",function(r){var n=r.item;e.setAutoPaint(!1),t&&e.clearItemStates(t,"hover"),e.setItemState(n,"hover",!0),t=n,e.paint(),e.setAutoPaint(!0)}),e.on("edge:mouseleave",function(){e.setAutoPaint(!1),t&&(e.clearItemStates(t,"hover"),t=null),e.paint(),e.setAutoPaint(!0)})}},{key:"setData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.graph;this.data?t.changeData(e):t.data(e),this.data=e}},{key:"render",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph).render()}},{key:"updateGraph",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.graph;this.data=e,t.changeData(e)}},{key:"refresh",value:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph).refresh()}},{key:"getContainer",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph).getContainer()}},{key:"getCanvas",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph).get("canvas")}},{key:"getNodes",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph).getNodes()}},{key:"getEdges",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph).getEdges()}},{key:"getNeighbors",value:function(e,t){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.graph).getNeighbors(e,t)}},{key:"findById",value:function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.graph).findById(e)}},{key:"find",value:function(e,t){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.graph).find(e,t)}},{key:"findAll",value:function(e,t){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.graph).findAll(e,t)}},{key:"getEdgesByNode",value:function(e){return e.getEdges()}},{key:"getInEdges",value:function(e){return e.getInEdges()}},{key:"getOutEdges",value:function(e){return e.getOutEdges()}},{key:"getSourceByEdge",value:function(e){return e.getSource()}},{key:"getTargetByEdge",value:function(e){return e.getTarget()}},{key:"expandNode",value:function(e){var t=e.getModel().id;this._expandCollapseNode(this.collpasedData[t],"show"),delete this.collpasedData[t]}},{key:"collapseNode",value:function(e){var t=e.getModel().id,r=[];this._collapseFunc(e,r),this.collpasedData[t]=r,this._expandCollapseNode(r)}},{key:"isCollpased",value:function(e){return!!this.collpasedData[e]}},{key:"_collapseFunc",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=this.getNeighbors(e,"target"),n=this.getNeighbors(e,"source"),o=0;o<r.length;o++){var i=r[o],a=i.getModel();1===this.getNeighbors(i).length&&t.push({id:a.id})}for(var s=0;s<n.length;s++){var u=n[s],l=u.getModel(),c=this.getNeighbors(u),f=this.getNeighbors(u,"source");if(1===c.length||0===f.length)t.push({id:l.id});else{var p=[];this._collapseFunc(u,p),t.push({id:l.id,children:p})}}return t}},{key:"_expandCollapseNode",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"hide";e&&e.forEach(function(e){"hide"===r?t.hideItem(e.id):(t.showItem(e.id),t.isCollpased(e.id)&&delete t.collpasedData[e.id]),e.children&&t._expandCollapseNode(e.children,r)})}},{key:"showItem",value:function(e,t){(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.graph).showItem(e,t)}},{key:"hideItem",value:function(e,t){(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.graph).hideItem(e,t)}},{key:"show",value:function(e){e.show()}},{key:"hide",value:function(e){e.hide()}},{key:"changeVisibility",value:function(e,t){e.changeVisibility(t)}},{key:"isVisible",value:function(e){return e.isVisible()}},{key:"getModel",value:function(e){return e.getModel()}},{key:"addItem",value:function(e,t){(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.graph).addItem(e,t)}},{key:"removeItem",value:function(e){(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.graph).removeItem(e)}},{key:"updateItem",value:function(e,t){(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.graph).updateItem(e,t)}},{key:"refreshItem",value:function(e){(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.graph).refreshItem(e)}},{key:"refreshPositions",value:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph).refreshPositions()}},{key:"on",value:function(e,t){(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.graph).on(e,t)}},{key:"off",value:function(e,t){(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.graph).off(e,t)}},{key:"toDataURL",value:function(e,t){(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.graph).toDataURL(e,t)}},{key:"bindNodeDefaultDragEvent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph;e.on("node:dragstart",function(e){VS(e)}),e.on("node:drag",function(e){VS(e)}),e.on("node:dragend",function(e){e.item.get("model").fx=null,e.item.get("model").fy=null})}},{key:"stopDefaultEventPropagation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph;e.on("click",function(e){e.stopPropagation()}),e.on("mousedown",function(e){e.stopPropagation()}),e.on("mouseover",function(e){e.stopPropagation()}),e.on("mouseout",function(e){e.stopPropagation()})}},{key:"clear",value:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph).clear()}},{key:"destroy",value:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph).destroy()}}])&&zS(e.prototype,t),r&&zS(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function VS(e){var t=e.item.get("model");return t.fx=e.x,t.fy=e.y,t.x=e.x,t.y=e.y,t}var KS=r(5611),YS=r.n(KS);function JS(e){"@babel/helpers - typeof";return(JS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function WS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,XS(n.key),n)}}function XS(e){var t=function(e,t){if("object"!=JS(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=JS(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==JS(t)?t:t+""}var ZS=function(){return e=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"G6";!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.graph=null,this.config=YS()(t),this.graphRender=null,this.type=r,this.createGraphRender(this.type),this.config=this.graphRender._getGraphConfig(this.config),this.createGraph(this.config),this.CLASS_NAME="SuperMap.KnowledgeGraph"},r=[{key:"dataFromGraphMap",value:function(e,t){return ES(e,t)}},{key:"dataFromKnowledgeGraphQuery",value:function(e){return ES(e)}}],(t=[{key:"_handleNodes",value:function(e,t){var r=this;e.filter(function(e){return""!==e}).forEach(function(e){var n=r.findById(e);t(n,"node")})}},{key:"_handleEdges",value:function(e,t){var r=this;e.filter(function(e){return""!==e}).forEach(function(e){var n=r.find("edge",function(t){return t.get("model").edgeId==e});t(n,"edge")})}},{key:"highlight",value:function(e){var t=e.nodeIDs,r=void 0===t?[]:t,n=e.edgeIDs,o=void 0===n?[]:n,i=this.graph,a=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"node";if(t){var n=e[r+"StateStyles"];n&&i.updateItem(t,{style:t.style,stateStyles:{actived:n}}),i.setItemState(t,"actived",!0),i.paint(),i.setAutoPaint(!0)}};this._handleNodes(r,a),this._handleEdges(o,a)}},{key:"clearHighlight",value:function(e){var t=this.graph,r=function(e){e&&(t.clearItemStates(e,"actived"),t.paint(),t.setAutoPaint(!0))};if(t.setAutoPaint(!1),!e)return t.getNodes().forEach(function(e){r(e)}),void t.getEdges().forEach(function(e){r(e)});var n=e.nodeIDs,o=void 0===n?[]:n,i=e.edgeIDs,a=void 0===i?[]:i;this._handleNodes(o,r),this._handleEdges(a,r)}},{key:"handleNodeStatus",value:function(e){var t=e.expand,r=e.collapse,n=e.hidden;this.expandNodes(t),this.collapseNodes(r),this.hideNodes(n)}},{key:"expandNodes",value:function(e){var t=this;e&&e.forEach(function(e){t.expandNode(e+"")})}},{key:"collapseNodes",value:function(e){var t=this;e&&e.forEach(function(e){t.collapseNode(e+"")})}},{key:"hideNodes",value:function(e){var t=this;e&&e.forEach(function(e){t.hideItem(e+"")})}},{key:"createGraphRender",value:function(e){"G6"===e&&(this.graphRender=new qS)}},{key:"createGraph",value:function(e){var t=this.initGraph(e);return this.graph=t,this.autoResize(),t}},{key:"getGraph",value:function(){return this.graph}},{key:"autoResize",value:function(){this.config&&!1!==this.config.autoResize&&this.graphRender.autoResize()}},{key:"zoom",value:function(e,t,r,n){this.graphRender.zoom(e,t,r,n)}},{key:"zoomTo",value:function(e,t,r,n){this.graphRender.zoomTo(e,t,r,n)}},{key:"fitView",value:function(e,t,r,n){this.graphRender.fitView(e,t,r,n)}},{key:"fitCenter",value:function(e,t){this.graphRender.fitCenter(e,t)}},{key:"getGraphCenterPoint",value:function(){return this.graphRender.getGraphCenterPoint()}},{key:"getViewPortCenterPoint",value:function(){return this.graphRender.getViewPortCenterPoint()}},{key:"getZoom",value:function(){return this.graphRender.getZoom()}},{key:"getMinZoom",value:function(){return this.graphRender.getMinZoom()}},{key:"setMinZoom",value:function(e){this.graphRender.setMinZoom(e)}},{key:"getMaxZoom",value:function(){return this.graphRender.getMaxZoom()}},{key:"setMaxZoom",value:function(e){this.graphRender.setMaxZoom(e)}},{key:"getWidth",value:function(){return this.graphRender.getWidth()}},{key:"getHeight",value:function(){return this.graphRender.getHeight()}},{key:"initGraph",value:function(e){var t=this,r=this.graphRender.initGraph(e);this.graph=r;return this.graph.on("afterlayout",function(){void 0!==t.config.zoom&&t.zoom(t.config.zoom),void 0!==t.config.center&&t.graphRender.setCenter({x:t.config.center[0],y:t.config.center[1]})}),r}},{key:"setData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.graph;e=e||{nodes:[],edges:[]},this.config&&this.config.nodeLabelMaxWidth&&(e.nodes=this.nodeLabelOpenEllipsis(this.config.nodeLabelMaxWidth,e.nodes)),this.graphRender.setData(e,t),this.render(t),this.data=e}},{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph;e&&this.graphRender.render(e)}},{key:"updateGraph",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.graph;t&&this.graphRender.updateGraph(e,t)}},{key:"refresh",value:function(){return this.graphRender.refresh()}},{key:"changeSize",value:function(e,t){return this.graphRender.changeSize(e,t)}},{key:"resize",value:function(e,t){this.graphRender.changeSize(e,t),this.graphRender.refresh()}},{key:"getContainer",value:function(){return this.graphRender.getContainer()}},{key:"getCanvas",value:function(){return this.graphRender.getCanvas()}},{key:"getNodes",value:function(){return this.graphRender.getNodes()}},{key:"getEdges",value:function(){return this.graphRender.getEdges()}},{key:"getNeighbors",value:function(e,t){return this.graphRender.getNeighbors(e,t)}},{key:"findById",value:function(e){return this.graphRender.findById(e)}},{key:"find",value:function(e,t){return this.graphRender.find(e,t)}},{key:"findAll",value:function(e,t){return this.graphRender.findAll(e,t)}},{key:"getEdgesByNode",value:function(e){return this.graphRender.getEdgesByNode(e)}},{key:"getInEdges",value:function(e){return this.graphRender.getInEdges(e)}},{key:"getOutEdges",value:function(e){return this.graphRender.getOutEdges(e)}},{key:"getSourceByEdge",value:function(e){return this.graphRender.getSourceByEdge(e)}},{key:"getTargetByEdge",value:function(e){return this.graphRender.getTargetByEdge(e)}},{key:"expandNode",value:function(e){var t=this.findById(e);t&&this.graphRender.expandNode(t)}},{key:"collapseNode",value:function(e){var t=this.findById(e);t&&this.graphRender.collapseNode(t)}},{key:"showItem",value:function(e,t){this.graphRender.showItem(e,t)}},{key:"hideItem",value:function(e,t){this.graphRender.hideItem(e,t)}},{key:"show",value:function(e){this.graphRender.show(e)}},{key:"hide",value:function(e){this.graphRender.hide(e)}},{key:"changeVisibility",value:function(e,t){this.graphRender.changeVisibility(e,t)}},{key:"isVisible",value:function(e){return this.graphRender.isVisible(e)}},{key:"getModel",value:function(e){return this.graphRender.getModel(e)}},{key:"addItem",value:function(e,t){return this.graphRender.addItem(e,t)}},{key:"removeItem",value:function(e){return this.graphRender.removeItem(e)}},{key:"updateItem",value:function(e,t){return this.graphRender.updateItem(e,t)}},{key:"refreshItem",value:function(e){return this.graphRender.refreshItem(e)}},{key:"refreshPositions",value:function(){return this.graphRender.refreshPositions()}},{key:"on",value:function(e,t){this.graphRender.on(e,t)}},{key:"off",value:function(e,t){this.graphRender.off(e,t)}},{key:"toDataURL",value:function(e,t){this.graphRender.toDataURL(e,t)}},{key:"nodeLabelOpenEllipsis",value:function(e,t){var r=this;return t?e?t.map(function(t){var n=t.labelCfg&&t.labelCfg.fontSize||r.defaultNode&&r.defaultNode.labelCfg&&r.defaultNode.labelCfg.fontSize||14;return t.label=function(e,t,r){var n=1*r;t*=1.6;if(function(e){for(var t=0,r=0;r<e.length;r++)e.charCodeAt(r)>0&&e.charCodeAt(r)<128?t++:t+=2;return t}(e)*n>t){var o=Math.floor((t-20)/n),i=e.substring(0,o);return(e.substring(o).length+"â¦".length)*n>t?i+"\n"+e.substring(o,o+o-2)+"â¦":0==e.substring(o).length?i:i+"\n"+e.substring(o)}return e}(t.label,e,n),t}):t:[]}},{key:"clear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph;e&&e.clear()}},{key:"destroy",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph;e&&e.destroy()}}])&&WS(e.prototype,t),r&&WS(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function $S(e){"@babel/helpers - typeof";return($S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function tC(e,t,r){return(t=aC(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rC(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof s?n:s,l=Object.create(u.prototype);return nC(l,"_invoke",function(r,n,o){var i,s,u,l=0,c=o||[],f=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,r){return i=t,s=0,u=e,p.n=r,a}};function h(r,n){for(s=r,u=n,t=0;!f&&l&&!o&&t<c.length;t++){var o,i=c[t],h=p.p,y=i[2];r>3?(o=y===n)&&(u=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=r<2&&h<i[1])?(s=0,p.v=n,p.n=i[1]):h<y&&(o=r<3||i[0]>n||n>y)&&(i[4]=r,i[5]=n,p.n=y,s=0))}if(o||r>1)return a;throw f=!0,n}return function(o,c,y){if(l>1)throw TypeError("Generator is already running");for(f&&1===c&&h(c,y),s=c,u=y;(t=s<2?e:u)||!f;){i||(s?s<3?(s>1&&(p.n=-1),h(s,u)):p.n=u:p.v=u);try{if(l=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(f=p.n<0)?u:r.call(n,p))!==a)break}catch(t){i=e,s=1,u=t}finally{l=1}}return{value:t,done:f}}}(r,o,i),!0),l}var a={};function s(){}function u(){}function l(){}t=Object.getPrototypeOf;var c=[][n]?t(t([][n]())):(nC(t={},n,function(){return this}),t),f=l.prototype=s.prototype=Object.create(c);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,nC(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=l,nC(f,"constructor",l),nC(l,"constructor",u),u.displayName="GeneratorFunction",nC(l,o,"GeneratorFunction"),nC(f),nC(f,o,"Generator"),nC(f,n,function(){return this}),nC(f,"toString",function(){return"[object Generator]"}),(rC=function(){return{w:i,m:p}})()}function nC(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}(nC=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){nC(e,t,function(e){return this._invoke(t,r,e)})};i("next",0),i("throw",1),i("return",2)}})(e,t,r,n)}function oC(e,t,r,n,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function iC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,aC(n.key),n)}}function aC(e){var t=function(e,t){if("object"!=$S(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=$S(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==$S(t)?t:t+""}function sC(e,t,r){return t=uC(t),function(e,t){if(t&&("object"==$S(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],uC(e).constructor):t.apply(e,r))}function uC(e){return(uC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lC(e,t){return(lC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var cC=function(e){function t(e,r){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=sC(this,t,[e,r])).graph=null,n.EVENT_TYPES=["loaded"];var o=e.split("/").pop();return n.url=e.replace("/graphmaps/".concat(o),""),n.createGraphMap(o,r),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lC(e,t)}(t,o().Evented),r=t,(n=[{key:"createGraphMap",value:function(){var e,t=(e=rC().m(function e(t,r){var n,o,i=this;return rC().w(function(e){for(;;)switch(e.n){case 0:return this.knowledgeGraphService=this.createKnowledgeGraphService(this.url,r),e.n=1,this.knowledgeGraphService.getGraphMapData(t);case 1:n=e.v,o=ZS.dataFromGraphMap(n.data,n.graphMap),this.graph=new ZS(r&&r.config),this.graph.on("afterlayout",function(){i.fire(i.EVENT_TYPES[0])}),this.graph.setData(o),this.graph.handleNodeStatus((a=n.graphMap,void 0,void 0,void 0,void 0,s=a.dataContent,u=s.expand,l=s.collapse,c=s.hidden,{expand:u&&JSON.parse(u),collapse:l&&JSON.parse(l),hidden:c&&JSON.parse(c)}));case 2:return e.a(2)}var a,s,u,l,c},e,this)}),function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){oC(i,n,o,a,s,"next",e)}function s(e){oC(i,n,o,a,s,"throw",e)}a(void 0)})});return function(e,r){return t.apply(this,arguments)}}()},{key:"createKnowledgeGraphService",value:function(e,t){return new dS(e,t)}},{key:"findShortestPath",value:function(e,t){var r=this,n=e.startID,o=e.endID,i=e.isHighlight,a=void 0===i||i,s=e.highlightStateStyles,u=void 0===s?{}:s;return this.knowledgeGraphService.findShortestPath({startID:n,endID:o},function(e){if(t&&t(e),a)if("processCompleted"===e.type&&e.result.succeed){var n=e.result,o=n.nodeIDs,i=n.edgeIDs;r.highlight(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eC(Object(r),!0).forEach(function(t){tC(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eC(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({nodeIDs:o,edgeIDs:i},u))}else alert(e.error.errorMsg,!1)})}},{key:"highlight",value:function(e){this.graph&&this.graph.highlight(e)}},{key:"clearHighlight",value:function(e){this.graph&&this.graph.clearHighlight(e)}}])&&iC(r.prototype,n),i&&iC(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,i}();function fC(e){"@babel/helpers - typeof";return(fC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pC(e){return function(e){if(Array.isArray(e))return hC(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return hC(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?hC(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hC(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function yC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function dC(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yC(Object(r),!0).forEach(function(t){mC(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yC(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function mC(e,t,r){return(t=vC(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,vC(n.key),n)}}function vC(e){var t=function(e,t){if("object"!=fC(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=fC(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==fC(t)?t:t+""}function bC(e,t,r){return t=AC(t),function(e,t){if(t&&("object"==fC(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],AC(e).constructor):t.apply(e,r))}function AC(e){return(AC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wC(e,t){return(wC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var SC=function(e){function t(e){var r,n=e.type,o=e.options,i=void 0===o?{}:o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=i.layerID?i.layerID:M.createUniqueID("l7_layer_");return(r=bC(this,t,[{type:n,sourceId:i.source||a,query:!0,interaction:!0,events:["inited","add","remove","legend:color","legend:size","click","dblclick","mousemove","mouseover","mouseout","mouseup","mousedown","mouseenter","mouseleave","contextmenu","dblclick","unclick","unmousemove","unmouseup","unmousedown","uncontextmenu","unpick","touchstart","touchend"]}])).id=a,r.eventListeners={},r.selectedDatas=[],r.setSelectedDatasFn=r.setSelectedDatas.bind(r),r.reRenderFn=r.reRender.bind(r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wC(e,t)}(t,le),r=t,(n=[{key:"getL7Layer",value:function(){return this.l7layer}},{key:"reRender",value:function(){this.scene&&this.scene.getLayer(this.l7layer.id)&&this.scene.layerService.renderLayer(this.l7layer.id),this.map&&this.map.triggerRepaint()}},{key:"moveLayer",value:function(e,t){this.map.style.moveLayer(e,t)}},{key:"setVisibility",value:function(e){this.animateStatus&&this.cancelAnimationFrame(),e?this.l7layer.show():this.l7layer.hide(),this.map.style.setLayoutProperty(this.id,"visibility",e?"visible":"none")}},{key:"addSceneLayer",value:function(e){this.scene=e,this.scene.addLayer(this.l7layer),this.updateSourceEffect()}},{key:"updateSourceEffect",value:function(){var e=this,t=this.l7layer.getSource();t&&t.on("update",function(){e.reRender()}),this.l7layer.on("re-render",function(){return e.reRender()})}},{key:"getLayer",value:function(){if(this.l7layer){var e=this.l7layer.rawConfig,t=this.l7layer.isVisible()?"visible":"none",r=dC(dC({},e),{},{layout:dC(dC({},e.layout),{},{visibility:t}),minzoom:this.l7layer.minZoom,maxzoom:this.l7layer.maxZoom,id:this.id,l7layer:this.l7layer,scene:this.scene,setSelectedDatas:this.setSelectedDatasFn,reRender:this.reRenderFn,visibility:t});return delete r.sourceId,delete r.layerID,delete r.minZoom,delete r.maxZoom,r}}},{key:"getFilter",value:function(){if(this.l7layer){var e=this.l7layer.rawConfig.filter,t=this._getL7Filter(e,this.id)||{},r=t.field,n=void 0===r?[]:r,o=t.values;!n.length&&this.selectedDatas[0]&&(n=Object.keys(this.selectedDatas[0].properties||{}));var i=n;return{field:i,values:this._transformFilterValues.bind(this,{fields:i,values:o,selectedDatas:this.selectedDatas})}}}},{key:"setFilter",value:function(e){if(this.l7layer)if(e)if(e instanceof Array){var t=this._getL7Filter(e),r=t.field,n=t.values;this.l7layer.filter(r,n)}else this.l7layer.filter(e.field,e.values);else this.l7layer.filter(!0)}},{key:"getPaintProperty",value:function(e){if(this.l7layer){var t=this.l7layer.rawConfig.paint;return(void 0===t?{}:t)[e]}}},{key:"getLayoutProperty",value:function(e){if(this.l7layer){var t=this.l7layer.rawConfig.layout;return(void 0===t?{}:t)[e]}}},{key:"setLayoutProperty",value:function(e,t){"visibility"===e&&this.setVisibility("visible"===t)}},{key:"getSource",value:function(){if(this.l7layer){var e=this.l7layer.layerSource,t=e.parser,r={id:this.sourceId,type:t.type,map:this.map};t.extent&&(r.bounds=t.extent);var n=[];switch(t.type){case"mvt":r.type="vector";break;case"geojson":r._data=e.originData,r.getData=function(){return e.originData},r.setData=this.setDataFn;break;case"json":n=(e.originData||[]).map(function(e){return{type:"Feature",geometry:{coordinates:[e[t.x],e[t.y]],type:"Point"},properties:dC({},e)}}),r.getData=function(){return{type:"FeatureCollection",features:n}}}return r}}},{key:"isSourceLoaded",value:function(){if(this.l7layer){var e=this.l7layer.layerSource;return!e.tileset||e.tileset.isLoaded}}},{key:"remove",value:function(){this.scene&&this.scene.removeLayer(this.l7layer)}},{key:"onRemove",value:function(){this.cancelAnimationFrame(),this.scene&&this.scene.removeLayer(this.l7layer)}},{key:"cancelAnimationFrame",value:function(){this.requestAnimationFrameId&&window.cancelAnimationFrame(this.requestAnimationFrameId),this.animateStatus=!1}},{key:"render",value:function(){var e=this;if(this.scene&&this.scene.getLayer(this.l7layer.id)){if(this.scene.layerService.renderLayer(this.l7layer.id),this.l7layer.animateStatus||this.l7layer.layerModel&&this.l7layer.layerModel.spriteAnimate){var t=function(){e.requestAnimationFrameId=window.requestAnimationFrame(t),e.map.triggerRepaint()};this.animateStatus||(t(),this.animateStatus=!0)}}else this.cancelAnimationFrame()}},{key:"on",value:function(e,t){if(this.l7layer){var r=this;this.eventListeners[t]=function(e){t(r._formateEvent(e))},this.l7layer.on(this._formatListenType(e),this.eventListeners[t])}}},{key:"once",value:function(e,t){if(this.l7layer){var r=this;this.eventListeners[t]=function(e){t(r._formateEvent(e))},this.l7layer.once(this._formatListenType(e),this.eventListeners[t])}}},{key:"off",value:function(e,t){this.l7layer&&this.l7layer.off(this._formatListenType(e),this.eventListeners[t])}},{key:"querySourceFeatures",value:function(){var e=this;if(!this.l7layer||!this.l7layer.isVisible())return[];var t=this.l7layer,r=t.layerSource,n=t.pickingService,o=n.handleRawFeature(r.data.dataArray,this.l7layer);if("mvt"===r.parser.type){var i=r.tileset,a=(void 0===i?{}:i).cacheTiles,s=void 0===a?[]:a,u=this.l7layer.rawConfig,l=u.sourceLayer,c=u.featureId,f=void 0===c?"id":c,p=[];s.forEach(function(t){var r=(t.data&&t.data.vectorLayerCache[l]||[]).filter(function(e){return!(e[f]&&p.some(function(t){return t[f]===e[f]})||(e.properties||{})[f]&&p.some(function(t){return t.properties[f]===e.properties[f]}))});p.push.apply(p,pC(n.handleRawFeature(r,e.l7layer)))}),o=o.length>p.length?o:p}if(!o.length){var h=[[0,0],[this.map.transform.width-1,this.map.transform.height-1]];this.queryRenderedFeatures(h,{layerCapture:!1},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];o=e})}return o}},{key:"setSelectedDatas",value:function(e){this.selectedDatas=e instanceof Array?e:[e]}},{key:"_formatListenType",value:function(e){switch(e){case"mouseover":return"mouseenter";case"mouseleave":return"mouseout";default:return e}}},{key:"_transformFilterValues",value:function(e){for(var t=e.fields,r=e.values,n=e.selectedDatas,o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];var s=i.filter(function(e){return void 0!==e}),u=n.map(function(e){return t.map(function(t){return(e.properties||{})[t]}).filter(function(e){return void 0!==e})});return(!r||r.apply(void 0,i))&&!u.some(function(e){return JSON.stringify(e)===JSON.stringify(s)})}}])&&gC(r.prototype,n),o&&gC(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function CC(e,t,r){return r?new e({id:r.getContainer().id,pickBufferScale:1,map:new t({mapInstance:r})}):null}var EC=function(){try{return L7}catch(e){return{}}}();function _C(e,t,r){if(null!==e)for(var n,o,i,a,s,u,l,c,f=0,p=0,h=e.type,y="FeatureCollection"===h,d="Feature"===h,m=y?e.features.length:1,g=0;g<m;g++){s=(c=!!(l=y?e.features[g].geometry:d?e.geometry:e)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var v=0;v<s;v++){var b=0,A=0;if(null!==(a=c?l.geometries[v]:l)){u=a.coordinates;var w=a.type;switch(f=!r||"Polygon"!==w&&"MultiPolygon"!==w?0:1,w){case null:break;case"Point":if(!1===t(u,p,g,b,A))return!1;p++,b++;break;case"LineString":case"MultiPoint":for(n=0;n<u.length;n++){if(!1===t(u[n],p,g,b,A))return!1;p++,"MultiPoint"===w&&b++}"LineString"===w&&b++;break;case"Polygon":case"MultiLineString":for(n=0;n<u.length;n++){for(o=0;o<u[n].length-f;o++){if(!1===t(u[n][o],p,g,b,A))return!1;p++}"MultiLineString"===w&&b++,"Polygon"===w&&A++}"Polygon"===w&&b++;break;case"MultiPolygon":for(n=0;n<u.length;n++){for(A=0,o=0;o<u[n].length;o++){for(i=0;i<u[n][o].length-f;i++){if(!1===t(u[n][o][i],p,g,b,A))return!1;p++}A++}b++}break;case"GeometryCollection":for(n=0;n<a.geometries.length;n++)if(!1===_C(a.geometries[n],t,r))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function IC(e,t){if("Feature"===e.type)t(e,0);else if("FeatureCollection"===e.type)for(var r=0;r<e.features.length&&!1!==t(e.features[r],r);r++);}function OC(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null!=e.bbox&&!0!==t.recompute)return e.bbox;var r=[1/0,1/0,-1/0,-1/0];return _C(e,function(e){r[0]>e[0]&&(r[0]=e[0]),r[1]>e[1]&&(r[1]=e[1]),r[2]<e[0]&&(r[2]=e[0]),r[3]<e[1]&&(r[3]=e[1])}),r}Math.PI;function xC(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n={type:"Feature"};return(0===r.id||r.id)&&(n.id=r.id),r.bbox&&(n.bbox=r.bbox),n.properties=t||{},n.geometry=e,n}function PC(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!kC(e[0])||!kC(e[1]))throw new Error("coordinates must contain numbers");return xC({type:"Point",coordinates:e},t,r)}function kC(e){return!isNaN(e)&&null!==e&&!Array.isArray(e)}var TC=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=OC(e);return PC([(r[0]+r[2])/2,(r[1]+r[3])/2],t.properties,t)},jC=function(){try{return G2}catch(e){return{}}}(),MC={colorRegExp:null,_nameColors:null,initialize:function(){this.colorRegExp=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,this._nameColors={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#0ff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000",blanchedalmond:"#ffebcd",blue:"#00f",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#f0f",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#0f0",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#f0f",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#f00",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#fff",whitesmoke:"#f5f5f5",yellow:"#ff0",yellowgreen:"#9acd32"}},toColor:function(e,t){if(t=t||"rgb",e&&(3===e.length||4===e.length)){if(e=this.map(e,function(e){return e>1?Math.ceil(e):e}),t.indexOf("hex")>-1)return"#"+((1<<24)+(e[0]<<16)+(e[1]<<8)+ +e[2]).toString(16).slice(1);if(t.indexOf("hs")>-1){var r=this.map(e.slice(1,3),function(e){return e+"%"});e[1]=r[0],e[2]=r[1]}return t.indexOf("a")>-1?(3===e.length&&e.push(1),e[3]=this.adjust(e[3],[0,1]),t+"("+e.slice(0,4).join(",")+")"):t+"("+e.slice(0,3).join(",")+")"}},convert:function(e,t){if(!this.isCalculableColor(e))return e;var r=this.getData(e),n=r[3];return void 0===n&&(n=1),e.indexOf("hsb")>-1?r=this._HSV_2_RGB(r):e.indexOf("hsl")>-1&&(r=this._HSL_2_RGB(r)),r[3]=n,this.toColor(r,t)},toRGBA:function(e){return this.convert(e,"rgba")},trim:function(e){return String(e).replace(/\s+/g,"")},normalize:function(e){if(this._nameColors[e]&&(e=this._nameColors[e]),e=(e=this.trim(e)).replace(/hsv/i,"hsb"),/^#[\da-f]{3}$/i.test(e)){var t=(3840&(e=parseInt(e.slice(1),16)))<<8,r=(240&e)<<4,n=15&e;e="#"+((1<<24)+(t<<4)+t+(r<<4)+r+(n<<4)+n).toString(16).slice(1)}return e},getData:function(e){var t,r,n=(e=this.normalize(e)).match(this.colorRegExp);if(null===n)throw new Error("The color format error");var o,i=[];if(n[2])o=[(t=n[2].replace("#","").split(""))[0]+t[1],t[2]+t[3],t[4]+t[5]],i=this.map(o,function(e){return MC.adjust.call(this,parseInt(e,16),[0,255])});else if(n[4]){var a=n[4].split(",");r=a[3],o=a.slice(0,3),i=this.map(o,function(e){return e=Math.floor(e.indexOf("%")>0?2.55*parseInt(e,0):e),MC.adjust.call(this,e,[0,255])}),void 0!==r&&i.push(this.adjust(parseFloat(r),[0,1]))}else if(n[5]||n[6]){var s=(n[5]||n[6]).split(","),u=parseInt(s[0],0)/360,l=s[1],c=s[2];r=s[3],(i=this.map([l,c],function(e){return MC.adjust.call(this,parseFloat(e)/100,[0,1])})).unshift(u),void 0!==r&&i.push(this.adjust(parseFloat(r),[0,1]))}return i},map:function(e,t){if("function"!=typeof t)throw new TypeError;for(var r=e?e.length:0,n=0;n<r;n++)e[n]=t(e[n]);return e},adjust:function(e,t){return e<=t[0]?e=t[0]:e>=t[1]&&(e=t[1]),e},isCalculableColor:function(e){return e instanceof Array||"string"==typeof e},_HSV_2_RGB:function(e){var t,r,n,o=e[0],i=e[1],a=e[2];if(0===i)t=255*a,r=255*a,n=255*a;else{var s=6*o;6===s&&(s=0);var u=0|s,l=a*(1-i),c=a*(1-i*(s-u)),f=a*(1-i*(1-(s-u))),p=0,h=0,y=0;0===u?(p=a,h=f,y=l):1===u?(p=c,h=a,y=l):2===u?(p=l,h=a,y=f):3===u?(p=l,h=c,y=a):4===u?(p=f,h=l,y=a):(p=a,h=l,y=c),t=255*p,r=255*h,n=255*y}return[t,r,n]},_HSL_2_RGB:function(e){var t,r,n,o=e[0],i=e[1],a=e[2];if(0===i)t=255*a,r=255*a,n=255*a;else{var s,u=2*a-(s=a<.5?a*(1+i):a+i-i*a);t=255*this._HUE_2_RGB(u,s,o+1/3),r=255*this._HUE_2_RGB(u,s,o),n=255*this._HUE_2_RGB(u,s,o-1/3)}return[t,r,n]},_HUE_2_RGB:function(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),6*r<1?e+6*(t-e)*r:2*r<1?t:3*r<2?e+(t-e)*(2/3-r)*6:e}};MC.initialize();var BC=MC,NC=r(1855),RC=r.n(NC);function LC(e,t,r){r.defs(e)||(t?r.defs(e,t):console.error("".concat(e," not define")))}function DC(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:bw;if("[object Object]"!==Object.prototype.toString.call(arguments[0]))LC(e,t,r);else{var n=arguments[0];for(var o in n)LC(o,n[o],r)}}function FC(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bw;if(!t.defs(e)){var r={"EPSG:3857":'PROJCS["WGS 84 / Pseudo-Mercator",GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AUTHORITY["EPSG","4326"]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["central_meridian",0],PARAMETER["scale_factor",1],PARAMETER["false_easting",0],PARAMETER["false_northing",0],UNIT["metre",1,AUTHORITY["EPSG","9001"]],AXIS["X",EAST],AXIS["Y",NORTH],EXTENSION["PROJ4","+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs"],AUTHORITY["EPSG","3857"]]',"EPSG:4326":'GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],AXIS["Easting", "EAST"],AXIS["Northing", "NORTH"],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AUTHORITY["EPSG","4326"]]',"EPSG:4490":'GEOGCS["China Geodetic Coordinate System 2000", DATUM["China 2000", SPHEROID["CGCS2000", 6378137.0, 298.257222101, AUTHORITY["EPSG","1024"]], AUTHORITY["EPSG","1043"]], PRIMEM["Greenwich", 0.0, AUTHORITY["EPSG","8901"]], UNIT["degree", 0.017453292519943295], AXIS["Geodetic latitude", NORTH], AXIS["Geodetic longitude", EAST], AUTHORITY["EPSG","4490"]]'};r[e]&&DC(e,r[e],t)}return t.defs(e)}function QC(e){if("string"!=typeof e)return"";if(0===e.indexOf("EPSG"))return e;var t=e.lastIndexOf("AUTHORITY")+10,r=e.indexOf("]",t)-1;return t>0&&r>0?"EPSG:".concat(e.substring(t,r).split(",")[1].substr(1)):""}function GC(e){var t=e.coordinates,r=e.sourceProjection,n=e.destProjection,o=void 0===n?"EPSG:4326":n,i=e.proj4,a=void 0===i?bw:i;try{return a(r,o,t)}catch(e){throw"".concat(e," is not defined")}}function UC(e,t){var r=e.replace(/^EPSG:/,""),n=Co(t);return z.get("".concat(n,"epsgcodes/").concat(r,".json"),null).then(function(e){return e.json()}).then(function(e){return e.wkt}).catch(function(e){console.error(e)})}function zC(e){"@babel/helpers - typeof";return(zC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function HC(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],r=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}throw new TypeError(zC(e)+" is not iterable")}function qC(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof s?n:s,l=Object.create(u.prototype);return VC(l,"_invoke",function(r,n,o){var i,s,u,l=0,c=o||[],f=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,r){return i=t,s=0,u=e,p.n=r,a}};function h(r,n){for(s=r,u=n,t=0;!f&&l&&!o&&t<c.length;t++){var o,i=c[t],h=p.p,y=i[2];r>3?(o=y===n)&&(u=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=r<2&&h<i[1])?(s=0,p.v=n,p.n=i[1]):h<y&&(o=r<3||i[0]>n||n>y)&&(i[4]=r,i[5]=n,p.n=y,s=0))}if(o||r>1)return a;throw f=!0,n}return function(o,c,y){if(l>1)throw TypeError("Generator is already running");for(f&&1===c&&h(c,y),s=c,u=y;(t=s<2?e:u)||!f;){i||(s?s<3?(s>1&&(p.n=-1),h(s,u)):p.n=u:p.v=u);try{if(l=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(f=p.n<0)?u:r.call(n,p))!==a)break}catch(t){i=e,s=1,u=t}finally{l=1}}return{value:t,done:f}}}(r,o,i),!0),l}var a={};function s(){}function u(){}function l(){}t=Object.getPrototypeOf;var c=[][n]?t(t([][n]())):(VC(t={},n,function(){return this}),t),f=l.prototype=s.prototype=Object.create(c);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,VC(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=l,VC(f,"constructor",l),VC(l,"constructor",u),u.displayName="GeneratorFunction",VC(l,o,"GeneratorFunction"),VC(f),VC(f,o,"Generator"),VC(f,n,function(){return this}),VC(f,"toString",function(){return"[object Generator]"}),(qC=function(){return{w:i,m:p}})()}function VC(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}(VC=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){VC(e,t,function(e){return this._invoke(t,r,e)})};i("next",0),i("throw",1),i("return",2)}})(e,t,r,n)}function KC(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=rE(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function YC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function JC(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?YC(Object(r),!0).forEach(function(t){WC(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YC(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function WC(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=zC(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=zC(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==zC(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XC(e,t,r,n,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function ZC(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){XC(i,n,o,a,s,"next",e)}function s(e){XC(i,n,o,a,s,"throw",e)}a(void 0)})}}function $C(e){return function(e){if(Array.isArray(e))return nE(e)}(e)||oE(e)||rE(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eE(e,t){return iE(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],u=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||rE(e,t)||tE()}function tE(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function rE(e,t){if(e){if("string"==typeof e)return nE(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?nE(e,t):void 0}}function nE(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function oE(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function iE(e){if(Array.isArray(e))return e}var aE={basic:"base",heat:"heat",heat3D:"heat3D",cluster:"cluster",heatGrid:"heatGrid",heatHexagon:"heatHexagon",heat3DHexagon:"heat3DHexagon",heat3DGrid:"heat3DGrid",od:"od",animateLine:"animateLine",column:"column",animatePoint:"animatePoint",radarPoint:"radarPoint",staticChart:"staticChart",bar:"bar",line:"line",pie:"pie",line3D:"line3D",isoline3D:"isoline3D",fillExtrusion:"fillExtrusion"},sE={point:"point",line:"line",polygon:"polygon",cluster:"cluster",heat3DHexagon:"heat3DHexagon",heat3DGrid:"heat3DGrid",heatmap:"heatmap",heatGrid:"heatGrid",heatHexagon:"heatHexagon",raster:"raster",image:"image",radar:"radar"},uE={"line-extrusion-dasharray":"dashArray","line-extrusion-opacity":"opacity","line-extrusion-pattern-interval":"iconStep","line-extrusion-pattern-blend":"textureBlend","line-extrusion-pattern-opacity":"opacity","line-extrusion-base-fixed":"heightfixed"},lE={"line-extrusion-animate-duration":"duration","line-extrusion-animate-interval":"interval","line-extrusion-animate-trailLength":"trailLength"},cE={MarkerLayer:"MarkerLayer"},fE={"text-color":"color","text-size":"size","text-opacity":"opacity","text-translate":"textOffset","text-z-offset":"raisingHeight","text-allow-overlap":"textAllowOverlap","text-anchor":"textAnchor","text-letter-spacing":"spacing","text-halo-color":"stroke","text-halo-width":"strokeWidth","text-halo-blur":"halo","text-font":"fontFamily","text-field":"shape"},pE=[].concat(["icon-allow-overlap","icon-image","icon-size","fill-sort-key","visibility","icon-anchor","icon-ignore-placement","icon-rotate","symbol-placement","text-justify","text-transform","text-field","text-allow-overlap","text-size","text-font","text-line-height","text-max-width","text-rotate","text-anchor","text-ignore-placement","text-letter-spacing","text-z-offset"],["line-join","line-cap","line-miter-limit","line-round-limit"]),hE={STRING:"STRING",INT:"INT",LONG:"LONG",DOUBLE:"DOUBLE",BOOLEAN:"BOOLEAN",TEXT:"TEXT",LONGTEXT:"LONGTEXT",POINT:"POINT",LINESTRING:"LINESTRING",POLYGON:"POLYGON",MULTIPOINT:"MULTIPOINT",MULTILINESTRING:"MULTILINESTRING",MULTIPOLYGON:"MULTIPOLYGON"},yE={BOOLEAN:"BOOLEAN",BYTE:"BYTE",CHAR:"CHAR",DATETIME:"DATETIME",DOUBLE:"DOUBLE",INT16:"INT16",INT32:"INT32",INT64:"INT64",LONGBINARY:"LONGBINARY",SINGLE:"SINGLE",WTEXT:"WTEXT",TEXT:"TEXT"},dE={NUMBER:"NUMBER",STRING:"STRING",BOOLEAN:"BOOLEAN"},mE={base:"base",heat:"heat",heat3D:"heat3D",cluster:"cluster",heatGrid:"heatGrid",heatHexagon:"heatHexagon",heat3DGrid:"heat3DGrid",heat3DHexagon:"heat3DHexagon",od:"od",animateLine:"animateLine",column:"column",animatePoint:"animatePoint",radarPoint:"radarPoint",staticChart:"staticChart",bar:"bar",line:"line",pie:"pie",isoline3D:"isoline3D",line3D:"line3D",fillExtrusion:"fillExtrusion"},gE=.5;function vE(e){var t=e.layout||{};return"circle"===e.type&&t["circle-animate-rings"]||"radar"===e.type||"point-extrusion"===e.type||"line-curve"===e.type||"line-curve-extrusion"===e.type||"line-extrusion"===e.type||"chart"===e.type||"heatmap"===e.type&&t["heatmap-shape"]||"heatmap-extrusion"===e.type||"symbol"===e.type&&t["text-z-offset"]>0}function bE(e,t){if(e){var r,n=iE(r=e)||oE(r)||rE(r)||tE(),o=n[0],i=n.slice(1).filter(function(e){var t=eE(e,2)[1];return!["$type","$id"].includes(t)}),a=Array.from(new Set(function e(t){var r=[];var n,o=KC(t);try{for(o.s();!(n=o.n()).done;){var i=n.value;if(i instanceof Array&&i[1]&&"string"==typeof i[1])r.push(i[1]);else if(i instanceof Array){var a=e(i);a&&a.length>0&&r.push.apply(r,$C(a))}}}catch(e){o.e(e)}finally{o.f()}return r}(i))),s=t([o].concat($C(i))),u=s.filter.bind(s);return{field:a,values:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n={};return a.forEach(function(e,r){n[e]=t[r]}),u({},{properties:n})}}}}function AE(e){var t=e.featureFilter,r=e.expression,n=e.spec,o=e.L7Layer,i=e.L7,a=e.proj4;function s(e,t){if(!t)return e;var r="".concat(t.key||t.name,"=").concat(t.value);return e.includes("?")?"".concat(e,"&").concat(r):"".concat(e,"?").concat(r)}function u(e,t,r){var n=s("".concat(e,"/fields.json?returnAll=true"),t);return z.get(n,null,r).then(function(e){return e.json()}).then(function(e){return e.map(function(e){var t=e.caption,r=e.name,n=e.isSystemField;return{name:r,type:e.type,title:t,visible:!0,isSystemField:n,maxLength:e.maxLength,isZeroLengthAllowed:e.isZeroLengthAllowed}})})}function l(e,t,r){var n=s("".concat(e,"/domain.json"),t);return z.get(n,null,r).then(function(e){return e.json()})}function c(e){var t=[],r=[];return e.forEach(function(e){e.isSystemField?t.push(e):r.push(e)}),t.concat(r)}function f(e,t,r){return p.apply(this,arguments)}function p(){return(p=ZC(qC().m(function e(t,r,n){var o,i,a;return qC().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,Promise.all([u(t,r,n),l(t,r,n)]);case 1:return o=e.v,i=eE(o,2),a=i[0],i[1].forEach(function(e){var t=e.fieldName,r=e.type,n=e.rangeInfos,o=e.codeInfos,i=a.find(function(e){return e.name===t});i&&(i.domain={type:r,infos:"RANGE"===r?n.map(function(e){return U(e,["max","min","type"])}):o.map(function(e){return e.value})})}),e.a(2,c(a))}},e)}))).apply(this,arguments)}function h(e,t,r){return y.apply(this,arguments)}function y(){return(y=ZC(qC().m(function e(t,r,n){var o;return qC().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,f(t,r,n);case 1:return o=e.v,e.a(2,{fieldNames:o.map(function(e){return e.name}),fieldTypes:o.map(function(e){return e.type})})}},e)}))).apply(this,arguments)}function d(e){return function(e){return[hE.INT,hE.LONG,hE.DOUBLE].includes(e)}(e)||function(e){return[yE.DOUBLE,yE.INT16,yE.INT32,yE.INT64,yE.SINGLE].includes(e)}(e)}function m(e,t,r){return function(e,t){return e.map(function(e){if(e)for(var r in e.properties)e.properties[r]=(n=(t||{})[r],o=(e.properties||{})[r],d(n)?Number(o):n===dE.BOOLEAN?Boolean(o):o);var n,o;return e})}(e.map(function(e){return JC(JC({},e),{},{properties:(r=e.properties||{},n=t,Object.keys(r).reduce(function(e,t){var o=n.find(function(e){return e.toUpperCase()===t.toUpperCase()});return o&&(e[o]=r[t]),e},{}))});var r,n}),function(e,t){return e&&e.reduce(function(e,r,n){return e[r]=t[n],e},{})}(t,r))}function g(e,t){return function(e,t){return t.iportalServiceProxyUrlPrefix&&e.indexOf(t.iportalServiceProxyUrlPrefix)>=0}(e,t)?JC(JC({},t),{},{withCredentials:!0}):JC(JC({},t),{},{withCredentials:void 0})}function v(e,t){return b.apply(this,arguments)}function b(){return(b=ZC(qC().m(function e(t,r){var n,o,i,a,u,l,c,f,p,y,d,v,b;return qC().w(function(e){for(;;)switch(e.n){case 0:return n=t.url,o=t.dataSourceName,i=t.datasetName,a=t.credential,u={datasetNames:[o+":"+i],getFeatureMode:"SQL",targetEpsgCode:"4326",queryParameter:{name:i+"@"+o}},l="".concat(n.split("featureResults")[0],"datasources/").concat(o,"/datasets/").concat(i),c=g(l,r),e.n=1,h(l,a,c);case 1:return f=e.v,p=f.fieldNames,y=f.fieldTypes,d=s(n,a),e.n=2,z.post(d,JSON.stringify(u),c);case 2:return v=e.v,e.n=3,v.json();case 3:return b=e.v,e.a(2,{type:"FeatureCollection",features:m((b||{}).features||[],p,y)})}},e)}))).apply(this,arguments)}function A(e,t){return z.get(e,null,t).then(function(e){return e.json()}).then(function(e){if(!1===e.succeed)throw e.error.errorMsg;return e})}function w(e,t){return S.apply(this,arguments)}function S(){return(S=ZC(qC().m(function e(t,r){var n,o,i,a,s,u,l;return qC().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,A(t,r);case 1:if(n=e.v,i=(o=n||{}).features,a=o.links,!(s=(void 0===a?[]:a).find(function(e){return"next"===e.rel}))){e.n=3;break}return u=i,e.n=2,w(s.href,r);case 2:return l=e.v,e.a(2,u.concat.call(u,l));case 3:return e.a(2,i);case 4:return e.a(2)}},e)}))).apply(this,arguments)}function C(e,t){return E.apply(this,arguments)}function E(){return(E=ZC(qC().m(function e(t,r){var n,o;return qC().w(function(e){for(;;)switch(e.n){case 0:return n="".concat(r.server,"web/datas/").concat(t,"/structureddata/ogc-features/collections/all/items.json?limit=10000&offset=0"),e.n=1,w(n,r);case 1:return o=e.v,e.a(2,{type:"FeatureCollection",features:o})}},e)}))).apply(this,arguments)}function _(e,t,r){if(e===t)return r;if("EPSG:4214"===e&&"EPSG:4326"===t&&180===r[0]){var n=GC({coordinates:r,sourceProjection:e,destProjection:t,proj4:a});return n[0]=180,n}return GC({coordinates:r,sourceProjection:e,destProjection:t,proj4:a})}function I(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"EPSG:4326";if(e&&e.length&&t)return t===r?e:e.map(function(e){var n=function(e,t,r){if("MultiPolygon"===r.type){var n=r.coordinates;return{type:r.type,coordinates:n.map(function(r){return r.map(function(r){return r.map(function(r){return _(e,t,r)})})})}}if("Polygon"===r.type||"MultiLineString"===r.type){var o=r.coordinates;return{type:r.type,coordinates:o.map(function(r){return r.map(function(r){return _(e,t,r)})})}}if("MultiPoint"===r.type||"LineString"===r.type){var i=r.coordinates;return{type:r.type,coordinates:i.map(function(r){return _(e,t,r)})}}if("Point"===r.type)return{type:r.type,coordinates:_(e,t,r.coordinates)}}(t,r,e.geometry),o=JC({},e);return n&&Object.assign(o,{geometry:n}),o})}function O(e,t){return x.apply(this,arguments)}function x(){return(x=ZC(qC().m(function e(t,r){var n,o,i,s,u,l;return qC().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,C(t.dataId,r);case 1:return n=e.v,e.n=2,z.get("".concat(r.server,"web/datas/").concat(t.dataId,"/structureddata.json"),null,r);case 2:return o=e.v,e.n=3,o.json();case 3:if(i=e.v,"EPSG:4326"===(s="EPSG:".concat(i.epsgCode))){e.n=6;break}if(FC(s,a)){e.n=5;break}return e.n=4,UC(s,r.server);case 4:u=e.v,DC(s,u,a);case 5:(l=I(n.features,s))&&(n.features=l);case 6:return e.a(2,n)}},e)}))).apply(this,arguments)}function P(e){return{type:"json",x:e.originX,y:e.originY,x1:e.destinationX,y1:e.destinationY}}function k(e){var t=e.clusterField,r=e.clusterMethod,n=e.clusterRadius;return[{type:e.clusterType,field:t,method:r&&{avg:"mean"}[r]||r,size:n}]}function T(e,t,r){return j.apply(this,arguments)}function j(){return(j=ZC(qC().m(function e(t,r,n){var o,i,a,s,u,l,c,f,p,h;return qC().w(function(e){for(;;)switch(e.n){case 0:if(o=t.data,i=t.od,a=t.cluster,!o||"FeatureCollection"!==o.type){e.n=1;break}return e.a(2,{data:o});case 1:if(s={"supermap-rest-data":v,"supermap-structured-data":O},u=i&&P(t),l=a&&k(t),!(c=s[o.type])){e.n=3;break}return e.n=2,s[o.type](t.data,n);case 2:c=e.v;case 3:return f=c,p=u,h=l,e.a(2,{data:f,parser:p,transforms:h})}},e)}))).apply(this,arguments)}function M(e,t,r){var n={data:((e||{}).tiles||[])[0],parser:{type:"mvt",extent:e.bounds,sourceLayer:t}},o=r.transformRequest(n.data,"Tile");return o&&(o.credentials&&(n.parser.requestParameters={credentials:o.credentials}),o.headers&&(n.parser.requestParameters=JC(JC({},n.parser.requestParameters),{},{headers:o.headers}))),n}function B(e,t,r){var n=e.type,o={vector:M,geojson:T};return o[n]&&o[n](e,t,r)}function N(e){var r=e.type,n=e.id,o=e.minzoom,i=e.maxzoom,a=e.layout,s=e.paint,u=e.filter,l=e.source;return{id:n,options:{type:r,name:e.id,sourceLayer:e["source-layer"],source:l,layout:a,paint:s,filter:u,minZoom:o,maxZoom:i,visible:"none"!==a.visibility},filter:bE(u,t)}}function R(e){var t=e.value,o=e.property,i=e.multiple,a=e.map;if(!r.isExpression(t))return{values:i?t*i:t};var s={interpolate:function(e){return e.value._styleExpression.expression.input.args[0].args[0].evaluate(e.value._styleExpression._evaluator)},match:function(e){return e.value._styleExpression.expression.input.args[0].evaluate(e.value._styleExpression._evaluator)},case:function(e){var t=e.value._styleExpression.expression.branches[0][0];return t&&t.args?t.args[0].lhs.args[0].args[0].evaluate(e.value._styleExpression._evaluator):t.lhs.args[0].evaluate()}},u=n[{size:"paint_circle",color:"paint_circle",shape:"layout_symbol"}[o]][{size:"circle-radius",color:"circle-color",shape:"icon-image"}[o]],l=r.createPropertyExpression(t,u),c=s[t[0]]&&s[t[0]](l),f=l.value.evaluate.bind(l.value);return{field:c,values:function(e){var t={properties:WC({},c,e),type:"point"},r=f({zoom:a.getZoom()},t);return"shape"===o?r.toString():i?r*i:r}}}function L(e,t){return WC(WC(WC(WC(WC(WC(WC(WC({},"".concat(e,"-dasharray"),"dashArray"),"".concat(e,"-opacity"),"opacity"),"".concat(e,"-pattern-color"),"textureColor"),"".concat(e,"-pattern-opacity"),"opacity"),"".concat(e,"-pattern-interval"),"iconStep"),"".concat(e,"-pattern-blend"),"textureBlend"),"".concat(e,"-segment"),"segmentNumber"),"".concat(e,"-pattern-rotate"),"textureRotate")[t]}function D(e,t){return WC(WC(WC({},"".concat(e,"-animate-duration"),"duration"),"".concat(e,"-animate-interval"),"interval"),"".concat(e,"-animate-trailLength"),"trailLength")[t]}function F(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var o,i=r.map(function(t){return R({value:t.value,property:"size",multiple:t.multiple,map:e})}),a=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(function(e){return e.field}).map(function(e){return e.field}).join("*")}.apply(void 0,$C(i));return o=""!==a?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e,t){var r=$C(e);return t.map(function(e){var t=e.multiple;if(e.field){var n=r[0];r.unshift();var o=e&&e.values?e.values(n):n;return t&&Eo(o)?o*t:o}return t&&Eo(e.values)?e.values*t:e.values})}(t,i)}:r.map(function(e,t){var n=r[t].multiple||1;return e.value*n}),{field:""!==a?a:void 0,values:o}}function Q(e){return e.reduce(function(e,t){var r=eE(t,2),n=r[0],o=r[1];return e[n]=o,e},{})}function G(e){var t=e.layout||{};return"heatmap"===e.type&&t["heatmap-shape"]&&["square","hexagon"].includes(t["heatmap-shape"])?aE.heatGrid:"heatmap-extrusion"===e.type&&t["heatmap-extrusion-shape"]&&["squareColumn","hexagonColumn"].includes(t["heatmap-extrusion-shape"])?aE.heat3DGrid:"heatmap-extrusion"===e.type?aE.heat3D:"chart"===e.type&&["bar","line"].includes(t["chart-type"])?aE.bar:"chart"===e.type&&"pie"===t["chart-type"]?aE.pie:"radar"===e.type?aE.radarPoint:"point-extrusion"===e.type?aE.column:["line-curve","line-curve-extrusion"].includes(e.type)?aE.od:"line-extrusion"===e.type?aE.line:void 0!==t["circle-animate-rings"]?aE.animatePoint:""}function U(e,t){var r={};for(var n in e)t.includes(n)&&(r[n]=e[n]);return e}function H(e){return e&&e.length>1&&!function(e){return 2===e.length&&1===e[0]&&0===e[1]}(e)?"dash":"solid"}function q(e,t,r){var n=e.paint,o=e.layout,i=n["circle-color"]||"#EE4D5A",a=n["circle-radius"]||30,s=n["circle-opacity"],u=o["circle-animate-speed"],l=o["circle-animate-rings"];return JC(JC({},N(e)),{},{type:sE.point,source:t,color:R({value:i,property:"color",map:r}),size:R({value:a,property:"size",multiple:2,map:r}),shape:{values:"circle"},style:{opacity:s},animate:{enable:!0,speed:u,rings:l}})}function V(e,t,r){var n=e.paint,o=e.layout,i=n["radar-color"]||"#EE4D5A",a=n["radar-radius"]||30,s=n["radar-opacity"],u=o["radar-animate-speed"];return JC(JC({},N(e)),{},{type:sE.point,source:t,color:R({value:i,property:"color",map:r}),size:R({value:a,property:"size",map:r}),shape:{values:"radar"},style:{opacity:s,speed:u},animate:{enable:!0}})}function K(e,t,r){var n=e.paint,o=e.layout,i=o["line-curve-shape"]||o["line-curve-extrusion-shape"],a="arc3d"===i?"line-curve-extrusion":"line-curve",s=n["".concat(a,"-color")]||"#ff6b34",u=n["".concat(a,"-width")]||1,l=n["".concat(a,"-dasharray")],c=n["".concat(a,"-pattern")],f=JC(JC({},N(e)),{},{type:sE.line,source:{data:t.data.features.map(function(e){return e.properties}),parser:t.parser},color:R({value:s,property:"color",map:r}),size:R({value:u,property:"size",map:r}),shape:{values:i},style:{lineType:H(l)}});for(var p in n){var h=L(a,p);h&&Object.assign(f.style||{},WC({},h,n[p]))}for(var y in o){var d=L(a,y);d&&Object.assign(f.style||{},WC({},d,o[y]));var m=D(a,y);m&&(f.animate||(f.animate={}),Object.assign(f.animate,WC({},m,o[y])))}return c&&(f.texture={values:c},Object.assign(f.style||{},{lineTexture:!0})),f}function Y(e,t,r){var n=e.paint,o=e.layout,i=n["point-extrusion-color"]||"#EE4D5A",a=n["point-extrusion-width"]||12,s=n["point-extrusion-length"]||12,u=n["point-extrusion-height"]||12,l=n["point-extrusion-opacity"],c=n["point-extrusion-source-color"],f=n["point-extrusion-target-color"],p=n["point-extrusion-opacity-linear-direction"],h=o["point-extrusion-shape"]||"cylinder";return JC(JC({},N(e)),{},{type:sE.point,source:t,color:R({value:i,property:"color",map:r}),size:F(r,{value:a,multiple:.5},{value:s,multiple:.5},{value:u}),shape:R({value:h,property:"shape",map:r}),style:{opacity:l,sourceColor:c,targetColor:f,opacityLinear:{enable:!!p,dir:p}}})}function J(e,t,r){var n=e.paint,o=e.layout,i=n["line-extrusion-color"]||"#ff6b34",a=n["line-extrusion-width"]||12,s=n["line-extrusion-base"]||0,u=n["line-extrusion-dasharray"],l=n["line-extrusion-pattern"],c=JC(JC({},N(e)),{},{type:sE.line,source:t,color:R({value:i,property:"color",map:r}),size:F(r,{value:a,multiple:gE},{value:s}),shape:{values:"line"},style:{lineType:H(u)}});for(var f in n){var p=uE[f];p&&Object.assign(c.style||{},WC({},p,n[f]))}for(var h in o){var y=uE[h];y&&Object.assign(c.style||{},WC({},y,o[h]));var d=lE[h];d&&(c.animate||(c.animate={}),Object.assign(c.animate,WC({},d,o[h])))}return l&&(c.texture={values:l},Object.assign(c.style||{},{lineTexture:!0})),c}function W(e,t){var r=e.paint,n=e.layout,o=r["chart-background-color"],i=r["chart-width"],a=r["chart-height"],s={grid:r["chart-xAxis-grid"],label:r["chart-xAxis-label"],line:r["chart-xAxis-line"]},u={grid:r["chart-yAxis-grid"],label:r["chart-yAxis-label"],line:r["chart-yAxis-line"]},l=n["chart-type"],c=n["chart-attribute-color"],f="line"===l&&c.length>0&&{values:c[0][1]};return JC(JC({},N(e)),{},{type:sE.point,id:e.id,source:t,layerType:cE.MarkerLayer,chartType:l,fields:{values:"bar"===l?Q(c):function(e){return e.map(function(e){return eE(e,1)[0]})}(c)},width:{values:i},height:{values:a},background:{values:o},xAxis:{values:s},yAxis:{values:u},color:f})}function X(e,t){var r=e.paint,n=e.layout,o=r["chart-radius"],i=r["chart-inner-radius"],a=n["chart-type"],s=n["chart-attribute-color"];return JC(JC({},N(e)),{},{type:sE.point,id:e.id,source:t,layerType:cE.MarkerLayer,chartType:a,fields:{values:Q(s)},radius:{values:o},innerRadius:{values:i}})}function Z(e,t,r){var n=e.paint,o=e.layout,i=n["heatmap-color"]||"#EE4D5A",a=n["heatmap-opacity"],s=o["heatmap-shape"],u=o["heatmap-rotate"],l=o["heatmap-coverage"];return JC(JC({},N(e)),{},{type:sE.heatmap,id:e.id,source:t,shape:{values:s},color:R({value:i,property:"color",map:r}),style:{opacity:a,coverage:l,angle:u}})}function $(e,t,r){var n=e.paint,o=e.layout,i=n["heatmap-extrusion-color"]||"#EE4D5A",a=n["heatmap-extrusion-opacity"],s=n["heatmap-extrusion-height"],u=o["heatmap-extrusion-shape"],l=o["heatmap-extrusion-rotate"],c=o["heatmap-extrusion-coverage"];return JC(JC({},N(e)),{},{type:sE.heatmap,id:e.id,source:t,shape:{values:u},size:R({value:s,property:"size",map:r}),color:R({value:i,property:"color",map:r}),style:{opacity:a,coverage:c,angle:l}})}function ee(e,t){var o=e.paint,i=o["heatmap-extrusion-color"],a=o["heatmap-extrusion-opacity"],s=o["heatmap-extrusion-intensity"],u=o["heatmap-extrusion-radius"],l=o["heatmap-extrusion-weight"];return JC(JC({},N(e)),{},{type:sE.heatmap,id:e.id,source:t,size:{field:l,values:[0,1]},shape:{values:"heatmap3D"},style:{rampColors:function(e){var t=n.paint_heatmap["heatmap-color"],o=r.createPropertyExpression(e,t);return{positions:o.value._styleExpression.expression.labels,colors:o.value._styleExpression.expression.outputs.map(function(e){return e.value})}}(i),opacity:a,intensity:s,radius:u}})}function te(e,t,r,n){var o=e.paint,i=e.layout,a=i["text-field"].split("{")[1].split("}")[0],s={};return Object.keys(function(e,t){var r={};for(var n in e)t.includes(n)||(r[n]=e[n]);return e}(fE,["text-color","text-size","text-field"])).forEach(function(t){var r,n=(e[(r=t,pE.includes(r)?"layout":"paint")]||{})[t];void 0!==n&&(s[fE[t]]=n)}),JC(JC({},N(e)),{},{type:sE.point,id:e.id,source:t,color:R({value:o["text-color"],property:"color",map:n}),size:R({value:i["text-size"],property:"size",map:n}),shape:{field:a,values:"text"},style:s})}function re(e){return ne.apply(this,arguments)}function ne(){return(ne=ZC(qC().m(function e(t){var r,n,o,i,a,s,u,l,c,f,p,h,y,d;return qC().w(function(e){for(;;)switch(e.n){case 0:r=t.layers,n=t.sources,o=t.map,i=t.options,a=[],s=KC(r),e.p=1,s.s();case 2:if((u=s.n()).done){e.n=7;break}return l=u.value,e.p=3,c=n[l.source],f=WC(WC(WC(WC(WC(WC(WC(WC(WC(WC({},aE.animatePoint,q),aE.radarPoint,V),aE.od,K),aE.column,Y),aE.line,J),aE.bar,W),aE.pie,X),aE.heatGrid,Z),aE.heat3DGrid,$),aE.heat3D,ee),e.n=4,B(c,l["source-layer"],i);case 4:p=e.v,h=G(l),a.push(f[h]&&f[h](l,p,o)||te(l,p,(l||{}).visible,o)),e.n=6;break;case 5:e.p=5,y=e.v,console.error(y),i.emitterEvent("layercreatefailed",{error:y,map:o,layer:l});case 6:e.n=2;break;case 7:e.n=9;break;case 8:e.p=8,d=e.v,s.e(d);case 9:return e.p=9,s.f(),e.f(9);case 10:return e.a(2,a)}},e,null,[[3,5],[1,8,9,10]])}))).apply(this,arguments)}function oe(e){return ie.apply(this,arguments)}function ie(){return(ie=ZC(qC().m(function e(t){return qC().w(function(e){for(;;)switch(e.n){case 0:return e.a(2,new Promise(function(e){t.getL7Scene().then(function(t){e(t)})}))}},e)}))).apply(this,arguments)}function ae(e,t){if(t){var r=document.createElement("canvas");r.width=t.width,r.height=t.height;var n=r.getContext("2d");if(n)return n.drawImage(t,0,0),n.getImageData(e.x,e.y,e.width,e.height)}}function se(e){var t=eE(BC.getData(BC.toRGBA(e)),4);return{r:t[0],g:t[1],b:t[2],a:t[3]}}function ue(e,t){return le.apply(this,arguments)}function le(){return(le=ZC(qC().m(function e(t,r){var n,o,i,a,s,u,l,c,f,p,h,y,d;return qC().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,ce(t);case 1:if(n=e.v,o=r.color,i=r.rotate,a=document.createElement("canvas"),s=a.getContext("2d"),a.width=n.width,a.height=n.height,s.translate(a.width/2,a.height/2),0!==i&&s.rotate(i*Math.PI/180),s.drawImage(n,-n.width/2,-n.height/2),o){for(u=s.getImageData(0,0,a.width,a.height),l=u.data,c=se(o),f=c.r,p=c.g,h=c.b,y=c.a,d=0;d<l.length;d+=4)l[d]=f,l[d+1]=p,l[d+2]=h,l[d+3]=Math.round(l[d+3]*y);s.putImageData(u,0,0)}return e.a(2,a.toDataURL())}},e)}))).apply(this,arguments)}function ce(e){return new Promise(function(t,r){var n=new Image;n.onload=function(){t(n)},n.onerror=function(){r()},n.src=e})}function fe(e,t){return pe.apply(this,arguments)}function pe(){return(pe=ZC(qC().m(function e(t,r){var n,o;return qC().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,ue(t,r);case 1:return n=e.v,e.n=2,ce(n);case 2:return o=e.v,e.a(2,o)}},e)}))).apply(this,arguments)}function he(e){var t=document.createElement("canvas"),r=t.getContext("2d");t.width=e.width,t.height=e.height,r&&r.putImageData(e,0,0);var n=new Image;return n.src=t.toDataURL(),n.src}function ye(e){var t=eE(e.split("?token="),2),r=t[0],n=t[1],o=function(e){return window.devicePixelRatio>1&&!e.includes("/sprite@2x")?function(e){var t=e.split("/"),r=t.slice(-1)[0];if(!r)return e;var n=r.replace("sprite","sprite@2x");return t.splice(t.length-1,1,n),t.join("/")}(e):e}(r)+".png";return n&&(o+="?token=".concat(n)),o}function de(e,t){return new Promise(function(r){var n=ye(e),o=new XMLHttpRequest,i=new Image;i.crossOrigin="",o.responseType="blob",o.open("get",n,!0),o.withCredentials=t.withCredentials,o.setRequestHeader("accept","image/webp,*/*"),o.onreadystatechange=function(){4===o.readyState&&200===o.status&&(i.src=URL.createObjectURL(o.response),i.onload=function(){r(i)},i.onerror=function(){r(null)})},o.send(null)})}function me(e,t,r){return ge.apply(this,arguments)}function ge(){return(ge=ZC(qC().m(function e(t,r,n){var o;return qC().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,de(t,n);case 1:if(o=e.v){e.n=2;break}return e.a(2);case 2:return e.a(2,ae(r,o))}},e)}))).apply(this,arguments)}function ve(e){return be.apply(this,arguments)}function be(){return(be=ZC(qC().m(function e(t){var r,n,o,i,a,s,u,l,c,f,p,h,y,d,m,g;return qC().w(function(e){for(;;)switch(e.n){case 0:r=t.layers,n=t.sprite,o=t.spriteJson,i=t.scene,a=t.options,s=+new Date,u=0;case 1:if(!(u<r.length)){e.n=6;break}if(l=r[u],c=(l.texture||{}).values,!(f=o[c])){e.n=5;break}return e.n=2,me(n,JC(JC({},f),{},{id:c}),a);case 2:if(p=e.v,h=l.style||{},y=h.textureColor,d=h.textureRotate,!y&&!d){e.n=4;break}return e.n=3,fe(he(p),{color:y,rotate:d});case 3:m=e.v,g="".concat(c,"_").concat(s,"_").concat(u),Object.assign(l.texture||{},{values:g}),i.addImage(g,m),e.n=5;break;case 4:i.hasImage(c)||i.addImage(c,he(p));case 5:u++,e.n=1;break;case 6:return e.a(2)}},e)}))).apply(this,arguments)}var Ae={sceneChartLayers:{},markerLayers:{},setSceneChartLayer:function(e,t){this.sceneChartLayers[e]=t},getSceneChartLayer:function(e){return this.sceneChartLayers[e]},setMarkerLayer:function(e,t){this.markerLayers[e]=t},getMarkerLayer:function(e){return this.markerLayers[e]},removeMarkerLayer:function(e){delete this.markerLayers[e]}};function we(e){var t={style:{lineWidth:1,stroke:"gray"}},r={grid:{line:t},line:t,label:{autoRotate:!0,autoEllipsis:!0}};for(var n in e)e[n]||(r[n]=null);return r}function Se(e){var t,r=((e||{}).geometry||{}).coordinates,n=e.geometry.type,o=Math.floor(r.length/2);if("LineString"===n)t=r[o];else if("MultiLineString"===n){var i=r[o];t=i[Math.floor(i.length/2)]}else t=((TC(e)||{}).geometry||{}).coordinates;var a=eE(t||[],2);return{lng:a[0],lat:a[1]}}function Ce(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=[],o=t.properties,i=0;return r&&e.forEach(function(e){var t=o?o[e]:0;i+=t}),e.forEach(function(e){var t=o?o[e]:0,a={x:e,y:t};r&&(a.percent=t/i),n.push(a)}),n}function Ee(e,t,r,n){if(!jC){throw console.error("G2 is not define"),new Error("G2 is not define")}var o=new jC.Chart({container:e,width:t,height:r,autoFit:!0});return o.legend(!1),o.data(n),o}function _e(e,t){return new i.Marker({element:e}).setLnglat(t)}function Ie(e,t){var r=Ae.getMarkerLayer(e);r&&(t.removeMarkerLayer(r),Ae.removeMarkerLayer(e))}function Oe(e,t){var r=e.source,n=e.id,o=e.chartType,a=r.data;e.filter&&(a=function(e,t){var r=e.features,n=t.field,o=t.values;return{type:"FeatureCollection",features:r.filter(function(e){var t=n.map(function(t){return(e.properties||{})[t]});return o.apply(void 0,$C(t))})}}(r.data,e.filter)),Ie(n,t);var s=[];if(o===mE.bar){var u=e.fields,l=e.width,c=e.height,f=e.background,p=e.xAxis,h=e.yAxis,y={width:l.values,height:c.values,background:f.values,xAxis:p.values,yAxis:h.values};s=function(e,t,r){var n=t.width,o=t.height,i=t.background,a=t.xAxis,s=t.yAxis,u=r.features,l=Object.keys(e),c=Object.values(e),f=we(a),p=we(s),h=document.createElement("div");return h.style.backgroundColor=i,u.map(function(e){var t=h.cloneNode(),r=Se(e),i=Ce(l,e),a=Ee(t,n,o,i);return a.axis("x",f),a.axis("y",p),a.interval().position("x*y").color("x",c),a.render(),_e(t,r)})}(u.values,y,a)}if(o===mE.line){var d=e.color,m=e.fields,g=e.width,v=e.height,b=e.background,A=e.xAxis,w=e.yAxis,S={width:g.values,height:v.values,background:b.values,xAxis:A.values,yAxis:w.values,color:d.values};s=function(e,t,r){var n=t.color,o=t.width,i=t.height,a=t.background,s=t.xAxis,u=t.yAxis,l=r.features,c=we(s),f=we(u),p=document.createElement("div");return p.style.background=a,l.map(function(t){var r=p.cloneNode(),a=Se(t),s=Ce(e,t),u=Ee(r,o,i,s);return u.axis("x",c),u.axis("y",f),u.line().position("x*y").color(n),u.render(),_e(r,a)})}(m.values,S,a)}if(o===mE.pie){var C=e.fields,E=e.radius,_=e.innerRadius,I={radius:E.values,innerRadius:_.values};s=function(e,t,r){var n=r.features,o=Object.keys(e),i=Object.values(e),a=t.radius,s=t.innerRadius,u=document.createElement("div");return n.map(function(e){var t=u.cloneNode(),r=Se(e),n=Ce(o,e,!0),l=Ee(t,a,a,n);return l.coord("theta",{innerRadius:s}),l.interval().adjust("stack").position("percent").color("x",i).shape("sliceShape"),l.render(),_e(t,r)})}(C.values,I,a)}var O=function(e){var t=new i.MarkerLayer;return e.forEach(function(e){t.addMarker(e)}),t}(s);return t.addMarkerLayer(O),Ae.setMarkerLayer(n,O),O}function xe(e,t){var r=WC(WC(WC(WC({},sE.line,"LineLayer"),sE.point,"PointLayer"),sE.polygon,"PolygonLayer"),sE.heatmap,"HeatmapLayer"),n=e.source||{},i=t.promoteId;i||(i=t.tiles&&t.tiles[0].includes("/structureddata/")?"smpid":void 0);var a=new o({type:r[e.type],options:JC(JC({},e.options),{},{layerID:(e.options||{}).name,featureId:i})}),s=a.getL7Layer(),u={},l=e.shape||{};if(n.parser&&(u.parser=e.source.parser),n.transforms&&(u.transforms=e.source.transforms),s.source(n.data,u),l.field?s.shape(l.field,l.values):s.shape(l.values),e.texture&&s.texture(e.texture.values),e.size&&(e.size.field?s.size(e.size.field,e.size.values):s.size(e.size.values)),e.color&&(e.color.field?s.color(e.color.field,e.color.values):s.color(e.color.values)),e.style&&s.style(e.style),e.animate&&s.animate(e.animate),e.filter){var c=RC()(function(){a.reRender()},500);s.filter(e.filter.field,function(){var t,r=(t=e.filter).values.apply(t,arguments);return r&&c(),r})}return a}return{addL7Layers:function(e){return ZC(qC().m(function t(){var r,n,o,i,a,s,u,l,c,f,p,h,y,d,m;return qC().w(function(t){for(;;)switch(t.n){case 0:return r=e.map,n=e.webMapInfo,o=e.l7Layers,i=e.spriteDatas,a=e.options,s=n.layers,u=n.sources,l=n.sprite,t.n=1,re({layers:o,sources:u,map:r,options:Object.assign({withoutFormatSuffix:!0},a)});case 1:return c=t.v,t.n=2,oe(r);case 2:if(f=t.v,!(Object.keys(i).length>0)){t.n=6;break}return t.p=3,t.n=4,ve({layers:c.filter(function(e){return!!e.texture}),spriteJson:i,sprite:l,scene:f,options:a});case 4:t.n=6;break;case 5:t.p=5,d=t.v,console.error(d),a.emitterEvent("layercreatefailed",{error:d,map:r});case 6:p=KC(c),t.p=7,y=qC().m(function e(){var t,n,o,i,a;return qC().w(function(e){for(;;)switch(e.n){case 0:t=h.value,n=s.findIndex(function(e){return e.id===t.id}),o=s.slice(n+1).find(function(e){return!vE(e)}),t.layerType===cE.MarkerLayer?(i=t,!1!==(t.options||{}).visible&&Oe(i,f),Ae.setSceneChartLayer(t.id,i)):(a=xe(t,u[s[n].source]),r.getLayer(a.id)||r.addLayer(a,o&&o.id));case 1:return e.a(2)}},e)}),p.s();case 8:if((h=p.n()).done){t.n=10;break}return t.d(HC(y()),9);case 9:t.n=8;break;case 10:t.n=12;break;case 11:t.p=11,m=t.v,p.e(m);case 12:return t.p=12,p.f(),t.f(12);case 13:return t.a(2)}},t,null,[[7,11,12,13],[3,5]])}))()},isL7Layer:vE,getL7MarkerLayers:function(){return Ae.markerLayers},removeL7MarkerLayer:Ie}}function wE(e){return function(e){if(Array.isArray(e))return DE(e)}(e)||SE(e)||LE(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function SE(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function CE(e,t){return _E(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],u=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||LE(e,t)||EE()}function EE(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _E(e){if(Array.isArray(e))return e}function IE(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,xE(n.key),n)}}function OE(e,t,r){return t&&IE(e.prototype,t),r&&IE(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function xE(e){var t=function(e,t){if("object"!=FE(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=FE(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==FE(t)?t:t+""}function PE(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kE(e,t,r){return t=NE(t),function(e,t){if(t&&("object"==FE(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ME()?Reflect.construct(t,r||[],NE(e).constructor):t.apply(e,r))}function TE(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&BE(e,t)}function jE(e){var t="function"==typeof Map?new Map:void 0;return(jE=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return function(e,t,r){if(ME())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,t);var o=new(e.bind.apply(e,n));return r&&BE(o,r.prototype),o}(e,arguments,NE(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),BE(r,e)})(e)}function ME(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(ME=function(){return!!e})()}function BE(e,t){return(BE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function NE(e){return(NE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function RE(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=LE(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function LE(e,t){if(e){if("string"==typeof e)return DE(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?DE(e,t):void 0}}function DE(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function FE(e){"@babel/helpers - typeof";return(FE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var QE={$version:8,$root:{version:{required:!0,type:"enum",values:[8],doc:"Style specification version number. Must be 8.",example:8},fragment:{type:"boolean",doc:"Indicates that a style is a fragment style.",example:!0},name:{type:"string",doc:"A human-readable name for the style.",example:"Bright"},metadata:{type:"*",doc:"Arbitrary properties useful to track with the stylesheet, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'mapbox:'."},center:{type:"array",value:"number",doc:"Default map center in longitude and latitude. The style center will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:[-73.9749,40.7736]},zoom:{type:"number",doc:"Default zoom level. The style zoom will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:12.5},bearing:{type:"number",default:0,period:360,units:"degrees",doc:'Default bearing, in degrees. The bearing is the compass direction that is "up"; for example, a bearing of 90Â° orients the map so that east is up. This value will be used only if the map has not been positioned by other means (e.g. map options or user interaction).',example:29},pitch:{type:"number",default:0,units:"degrees",doc:"Default pitch, in degrees. Zero is perpendicular to the surface, for a look straight down at the map, while a greater value like 60 looks ahead towards the horizon. The style pitch will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:50},light:{type:"light",doc:"The global light source. Note: This API is deprecated. Prefer using `flat` light type instead in the `lights` API.",example:{anchor:"viewport",color:"white",intensity:.4}},lights:{required:!1,type:"array",value:"light-3d",doc:"Array of light sources affecting the whole map and the default for 3D style, mutually exclusive with the light property",example:[{id:"environment",type:"ambient",properties:{color:"rgba(255.0, 0.0, 0.0, 1.0)",intensity:.4}},{id:"sun_light",type:"directional",properties:{color:"rgba(255.0, 0.0, 0.0, 1.0)",intensity:.4,direction:[200,40],"cast-shadows":!0,"shadow-intensity":.2}}],"sdk-support":{"basic functionality":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}}},terrain:{type:"terrain",optional:!0,doc:"A global modifier that elevates layers and markers based on a DEM data source."},fog:{type:"fog",doc:"A global effect that fades layers and markers based on their distance to the camera. The fog can be used to approximate the effect of atmosphere on distant objects and enhance the depth perception of the map when used with terrain or 3D features. Note: fog is renamed to atmosphere in the Android and iOS SDKs and planned to be changed in GL-JS v.3.0.0."},snow:{type:"snow",doc:"Global precipitation particle-based snow. Having snow present in the style forces constant map repaint mode",experimental:!0},rain:{type:"rain",doc:"Global precipitation particle-based rain effect. Having rain present in the style forces constant map repaint mode.",experimental:!0},camera:{type:"camera",doc:"Global setting to control additional camera intrinsics parameters, e.g. projection type (perspective / orthographic)."},"color-theme":{type:"colorTheme",doc:"A global modifier for the colors of the style."},indoor:{type:"indoor",experimental:!0,doc:"Controls the behaviour of indoor features."},imports:{type:"array",value:"import",doc:"Imports other styles into this style.","sdk-support":{"basic functionality":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}}},iconsets:{experimental:!0,type:"iconsets",doc:"A collection of icon sets","sdk-support":{"basic functionality":{js:"3.11.0",android:"11.11.0",ios:"11.11.0"}}},schema:{type:"schema",doc:"Definition of the schema for configuration options.","sdk-support":{"basic functionality":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}}},sources:{required:!0,type:"sources",doc:"Data source specifications.",example:{"mapbox-streets":{type:"vector",url:"mapbox://mapbox.mapbox-streets-v6"}}},sprite:{type:"string",doc:"A base URL for retrieving the sprite image and metadata. The extensions `.png`, `.json` and scale factor `@2x.png` will be automatically appended. This property is required if any layer uses the `background-pattern`, `fill-pattern`, `line-pattern`, `fill-extrusion-pattern`, or `icon-image` properties. The URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).",example:"mapbox://sprites/mapbox/bright-v8"},glyphs:{type:"string",doc:"A URL template for loading signed-distance-field glyph sets in PBF format. The URL must include `{fontstack}` and `{range}` tokens. This property is required if any layer uses the `text-field` layout property. The URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).",default:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf",example:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},transition:{type:"transition",doc:"A global transition definition to use as a default across properties, to be used for timing transitions between one value and the next when no property-specific transition is set. Collision-based symbol fading is controlled independently of the style's `transition` property.",example:{duration:300,delay:0}},projection:{type:"projection",doc:"The projection the map should be rendered in. Supported projections are Mercator, Globe, Albers, Equal Earth, Equirectangular (WGS84), Lambert conformal conic, Natural Earth, and Winkel Tripel. Terrain, sky and fog are supported by only Mercator and globe. CustomLayerInterface is not supported outside of Mercator.",example:{name:"albers",center:[-154,50],parallels:[55,65]}},layers:{required:!0,type:"array",value:"layer",doc:"Layers will be drawn in the order of this array.",example:[{id:"water",source:"mapbox-streets","source-layer":"water",type:"fill",paint:{"fill-color":"#00ffff"}}]},models:{type:"models",doc:"Specification of models used in the style.",example:{"spruce1-lod0":"asset://spruce1-lod0.glb","spruce1-lod1":"asset://spruce1-lod1.glb","spruce1-lod2":"asset://spruce1-lod2.glb"}},featuresets:{experimental:!0,type:"featuresets",doc:"Defines sets of features for querying, interaction, and state management on the map, referencing individual layers or subsets of layers within the map's style.","sdk-support":{"basic functionality":{js:"3.9.0",android:"11.9.0",ios:"11.9.0"}},example:{poi:{selectors:[{layer:"poi",properties:{type:["get","type"],name:["get","name"],brand:"ABC"}}]}}}},featuresets:{experimental:!0,"*":{type:"featureset",doc:"Defines a combined set of features from one or more underlying layers within the current style. Features in a style featureset can be queried, interacted with, and their states can be queried and updated."}},featureset:{experimental:!0,metadata:{experimental:!0,type:"*",doc:"Arbitrary properties useful to track with the stylesheet, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'mapbox:'."},selectors:{experimental:!0,type:"array",value:"selector",doc:"A collection of categorized selectors."}},selector:{experimental:!0,layer:{experimental:!0,type:"string",doc:"The ID of a layer that exists in the current style.",required:!0},properties:{experimental:!0,type:"selectorProperty",required:!1,doc:"Properties accessible to the end user through queried feautures. If properties are empty, no feature properties are exposed. If undefined, all original feature properties will be accessible."},featureNamespace:{experimental:!0,type:"string",required:!1,doc:"An optional field that represents the feature namespace defined by the selector within a featureset to which this feature belongs. If the underlying source is the same for multiple selectors within a featureset, the same featureNamespace should be used across those selectors."},_uniqueFeatureID:{experimental:!0,type:"boolean",private:!0,required:!1,doc:"Internal flag used for standard style, in case multiple features sharing the same featureId, only one feature will be returned for feature query."}},selectorProperty:{experimental:!0,"*":{experimental:!0,type:"*",doc:"The value of the property. It can be an expression that generates the returned value from the feature, or a constant value specifying the returned value."}},model:{type:"string",doc:"A URL to a model resource. Supported protocols are `http:`, `https:`, and `mapbox://<Model ID>`.",required:!0},import:{id:{type:"string",doc:"Unique import name.",required:!0},url:{type:"string",doc:"The URL of the style.",required:!0},config:{type:"config",doc:"Configuration values for the imported style's options."},data:{type:"$root",doc:"The inlined style that must correspond to the contents of the specified URL."},"color-theme":{type:"colorTheme",optional:!0,doc:"If specified, it overrides the color-theme of the imported style."}},config:{"*":{type:"*",doc:"Value of the imported style's configuration option."}},schema:{"*":{type:"option",doc:"Specification of a configuration option."}},option:{default:{type:"*",doc:"Default configuration value for this option.","property-type":"data-constant",expression:{interpolated:!1},required:!0},type:{type:"enum",doc:"The type this value is coerced to after evaluating the expression. If unspecified, the result is returned as is and is not validated.",values:{string:{doc:"The result will be coerced to a string."},number:{doc:"The result will be coerced to a number."},boolean:{doc:"The result will be coerced to a boolean."},color:{doc:"The result will be coerced to a color."}}},array:{type:"boolean",doc:"If true, this option is returned as an array"},minValue:{type:"number",doc:"If this option is a number, this specifies the minimum allowed value. Values lower than this will be clamped to the minimum value."},maxValue:{type:"number",doc:"If this option is a number, this specifies the maximum allowed value. Values higher than this will be clamped to the maximum value."},stepValue:{type:"number",doc:"If this option is a number, this specifies the increment between allowed values. Values will be rounded towards the nearest allowed value."},values:{type:"array",value:"*",doc:"If this option is specified, the result must be one of the given values. Otherwise, the default value is used instead."},metadata:{type:"*",doc:"Arbitrary properties useful to track with the layer, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'mapbox:'."}},models:{"*":{type:"model",doc:"A URL to a model resource. Supported protocols are `http:`, `https:`, and `mapbox://<Model ID>`."}},"light-3d":{id:{type:"string",doc:"Unique light name.",required:!0},properties:{type:"properties",doc:"Properties of the light."},type:{type:"enum",doc:"Type of the light to be added",values:{ambient:{doc:"An indirect light affecting all objects in the map adding a constant amount of light on them. It has no explicit direction and cannot cast shadows.","sdk-support":{"basic functionality":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}}},directional:{doc:"A light that has a direction and is located at infinite distance, so its rays are parallel. It simulates the sun light and can cast shadows.","sdk-support":{"basic functionality":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}}},flat:{doc:"A global directional light source which is only applied on 3D and hillshade layers. Using this type disables other light sources.","sdk-support":{"basic functionality":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}}}}}},properties:["properties_light_directional","properties_light_ambient","properties_light_flat"],properties_light_directional:{direction:{type:"array",default:[210,30],minimum:[0,0],maximum:[360,90],length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"Direction of the light source specified as [a azimuthal angle, p polar angle] where a indicates the azimuthal angle of the light relative to north (in degrees and proceeding clockwise), and p indicates polar angle of the light (from 0Â°, directly above, to 180Â°, directly below).",example:[90,40],"sdk-support":{"basic functionality":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},"use-theme":!0,transition:!0,doc:"Color of the directional light.","sdk-support":{"basic functionality":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}}},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"A multiplier for the color of the directional light.","sdk-support":{"basic functionality":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}}},"cast-shadows":{type:"boolean",default:!1,doc:"Enable/Disable shadow casting for this light",transition:!1,"property-type":"data-constant","sdk-support":{"basic functionality":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}}},"shadow-quality":{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1,expression:{interpolated:!1,parameters:["zoom"]},transition:!1,doc:"Determines the quality of the shadows on the map. A value of 1 ensures the highest quality and is the default value.","sdk-support":{"basic functionality":{android:"11.9.0",ios:"11.9.0"}},experimental:!0},"shadow-intensity":{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},doc:"Determines the shadow strength, affecting the shadow receiver surfaces final color. Values near 0.0 reduce the shadow contribution to the final color. Values near to 1.0 make occluded surfaces receive almost no directional light. Designed to be used mostly for transitioning between values 0 and 1.",transition:!0,"sdk-support":{"basic functionality":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}}}},properties_light_ambient:{color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},"use-theme":!0,transition:!0,doc:"Color of the ambient light.","sdk-support":{"basic functionality":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}}},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"A multiplier for the color of the ambient light.","sdk-support":{"basic functionality":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}}}},properties_light_flat:{anchor:{type:"enum",default:"viewport",values:{map:{doc:"The position of the light source is aligned to the rotation of the map."},viewport:{doc:"The position of the light source is aligned to the rotation of the viewport. If terrain is enabled, performance regressions may occur in certain scenarios, particularly on lower-end hardware. Ensure that you test your target scenarios on the appropriate hardware to verify performance."}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},doc:"Whether extruded geometries are lit relative to the map or viewport.",example:"map","sdk-support":{"basic functionality":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"Position of the light source relative to lit (extruded) geometries, in [r radial coordinate, a azimuthal angle, p polar angle] where r indicates the distance from the center of the base of an object to its light, a indicates the position of the light relative to 0Â° (0Â° when `light.anchor` is set to `viewport` corresponds to the top of the viewport, or 0Â° when `light.anchor` is set to `map` corresponds to due north, and degrees proceed clockwise), and p indicates the height of the light (from 0Â°, directly above, to 180Â°, directly below).",example:[1.5,90,80],"sdk-support":{"basic functionality":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},"use-theme":!0,transition:!0,doc:"Color tint for lighting extruded geometries.","sdk-support":{"basic functionality":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}}},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Intensity of lighting (on a scale from 0 to 1). Higher numbers will present as more extreme contrast.","sdk-support":{"basic functionality":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}}}},iconsets:{"*":{type:"iconset",doc:"Specification of an icon set. For sprite icon set, a URL must be provided. For `raster-array` source icon set, a source name must be provided."}},iconset:["iconset_sprite","iconset_source"],iconset_sprite:{type:{required:!0,type:"enum",values:{sprite:{doc:"A sprite icon set."}},doc:"The type of the icon set."},url:{required:!0,type:"string",doc:"A base URL for retrieving the icon set and metadata. The extension `.pbf` will be automatically appended. The URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).",example:"mapbox://sprites/mapbox/bright"}},iconset_source:{type:{required:!0,type:"enum",values:{source:{doc:"A source icon set."}},doc:"The type of the icon set."},source:{required:!0,type:"string",doc:"Name of a source of `raster-array` type to be used for the icon set."}},sources:{"*":{type:"source",doc:"Specification of a data source. For vector and raster sources, either TileJSON or a URL to a TileJSON must be provided. For image and video sources, a URL must be provided. For GeoJSON sources, a URL or inline GeoJSON must be provided."}},source:["source_vector","source_raster","source_raster_dem","source_raster_array","source_geojson","source_video","source_image","source_model"],source_vector:{type:{required:!0,type:"enum",values:{vector:{doc:"A vector tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`. Required if `tiles` is not provided."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec. Required if `url` is not provided."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},extra_bounds:{type:"array",value:{type:"array",value:"number",length:4,doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`."},experimental:!0,doc:"An array of additional discrete geographic regions where tiles are available. When used alongside the `bounds` property, these regions act as an additional filter - Mapbox GL will only request tiles that are both within the `bounds` and any of the regions defined in `extra_bounds`. When used independently (without `bounds`), Mapbox GL will request tiles that fall within any of the regions in `extra_bounds`. This allows for more fine-grained control over tile requests, particularly when dealing with sparse data coverage."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`. If specified as a string for a vector tile source, the same property is used across all its source layers. If specified as an object only specified source layers will have id overriden, others will fallback to original feature id"},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},source_raster:{type:{required:!0,type:"enum",values:{raster:{doc:"A raster tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`. Required if `tiles` is not provided."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec. Required if `url` is not provided."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},extra_bounds:{type:"array",value:{type:"array",value:"number",length:4,doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`."},experimental:!0,doc:"An array of additional discrete geographic regions where tiles are available. When used alongside the `bounds` property, these regions act as an additional filter - Mapbox GL will only request tiles that are both within the `bounds` and any of the regions defined in `extra_bounds`. When used independently (without `bounds`), Mapbox GL will request tiles that fall within any of the regions in `extra_bounds`. This allows for more fine-grained control over tile requests, particularly when dealing with sparse data coverage."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{doc:"A RGB-encoded raster DEM source"}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`. Required if `tiles` is not provided."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec. Required if `url` is not provided."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},extra_bounds:{type:"array",value:{type:"array",value:"number",length:4,doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`."},experimental:!0,doc:"An array of additional discrete geographic regions where tiles are available. When used alongside the `bounds` property, these regions act as an additional filter - Mapbox GL will only request tiles that are both within the `bounds` and any of the regions defined in `extra_bounds`. When used independently (without `bounds`), Mapbox GL will request tiles that fall within any of the regions in `extra_bounds`. This allows for more fine-grained control over tile requests, particularly when dealing with sparse data coverage."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},encoding:{type:"enum",values:{terrarium:{doc:"Terrarium format PNG tiles. See https://aws.amazon.com/es/public-datasets/terrain/ for more info."},mapbox:{doc:"Mapbox Terrain RGB tiles. See https://www.mapbox.com/help/access-elevation-data/#mapbox-terrain-rgb for more info."}},default:"mapbox",doc:"The encoding used by this source. Mapbox Terrain RGB is used by default"},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},source_raster_array:{experimental:!0,type:{required:!0,type:"enum",values:{"raster-array":{doc:"A raster array source"}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`. Required if `tiles` is not provided."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec. Required if `url` is not provided."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},extra_bounds:{type:"array",value:{type:"array",value:"number",length:4,doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`."},experimental:!0,doc:"An array of additional discrete geographic regions where tiles are available. When used alongside the `bounds` property, these regions act as an additional filter - Mapbox GL will only request tiles that are both within the `bounds` and any of the regions defined in `extra_bounds`. When used independently (without `bounds`), Mapbox GL will request tiles that fall within any of the regions in `extra_bounds`. This allows for more fine-grained control over tile requests, particularly when dealing with sparse data coverage."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},rasterLayers:{type:"*",doc:"Contains the description of the raster data layers and the bands contained within the tiles."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{doc:"A GeoJSON data source."}},doc:"The data type of the GeoJSON source."},data:{type:"*",doc:"A URL to a GeoJSON file, or inline GeoJSON."},maxzoom:{type:"number",default:18,doc:"Maximum zoom level at which to create vector tiles (higher means greater detail at high zoom levels)."},minzoom:{type:"number",default:0,doc:"Minimum zoom level at which to create vector tiles"},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},buffer:{type:"number",default:128,maximum:512,minimum:0,doc:"Size of the tile buffer on each side. A value of 0 produces no buffer. A value of 512 produces a buffer as wide as the tile itself. Larger values produce fewer rendering artifacts near tile edges and slower performance."},filter:{type:"*",doc:"An expression for filtering features prior to processing them for rendering."},tolerance:{type:"number",default:.375,doc:"Douglas-Peucker simplification tolerance (higher means simpler geometries and faster performance)."},cluster:{type:"boolean",default:!1,doc:"If the data is a collection of point features, setting this to true clusters the points by radius into groups. Cluster groups become new `Point` features in the source with additional properties:\n * `cluster` Is `true` if the point is a cluster \n * `cluster_id` A unqiue id for the cluster to be used in conjunction with the [cluster inspection methods](https://www.mapbox.com/mapbox-gl-js/api/#geojsonsource#getclusterexpansionzoom)\n * `point_count` Number of original points grouped into this cluster\n * `point_count_abbreviated` An abbreviated point count"},clusterRadius:{type:"number",default:50,minimum:0,doc:"Radius of each cluster if clustering is enabled. A value of 512 indicates a radius equal to the width of a tile."},clusterMaxZoom:{type:"number",doc:"Max zoom on which to cluster points if clustering is enabled. Defaults to one zoom less than maxzoom (so that last zoom features are not clustered). Clusters are re-evaluated at integer zoom levels so setting clusterMaxZoom to 14 means the clusters will be displayed until z15."},clusterMinPoints:{type:"number",doc:"Minimum number of points necessary to form a cluster if clustering is enabled. Defaults to `2`."},clusterProperties:{type:"*",doc:'An object defining custom properties on the generated clusters if clustering is enabled, aggregating values from clustered points. Has the form `{"property_name": [operator, map_expression]}`. `operator` is any expression function that accepts at least 2 operands (e.g. `"+"` or `"max"`) â it accumulates the property value from clusters/points the cluster contains; `map_expression` produces the value of a single point.\n\nExample: `{"sum": ["+", ["get", "scalerank"]]}`.\n\nFor more advanced use cases, in place of `operator`, you can use a custom reduce expression that references a special `["accumulated"]` value, e.g.:\n`{"sum": [["+", ["accumulated"], ["get", "sum"]], ["get", "scalerank"]]}`'},lineMetrics:{type:"boolean",default:!1,doc:"Whether to calculate line distance metrics. This is required for line layers that specify `line-gradient` values."},generateId:{type:"boolean",default:!1,doc:"Whether to generate ids for the GeoJSON features. When enabled, the `feature.id` property will be auto assigned based on its index in the `features` array, over-writing any previous values."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`."},dynamic:{type:"boolean",default:!1,doc:"Whether to optimize this source for frequent data updates (e.g. animating features).","sdk-support":{"basic functionality":{js:"3.4.0"}}}},source_video:{type:{required:!0,type:"enum",values:{video:{doc:"A video data source."}},doc:"The data type of the video source."},urls:{required:!0,type:"array",value:"string",doc:"URLs to video content in order of preferred format."},coordinates:{required:!0,doc:"Corners of video specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},source_image:{type:{required:!0,type:"enum",values:{image:{doc:"An image data source."}},doc:"The data type of the image source."},url:{required:!1,type:"string",doc:"URL that points to an image. If the URL is not specified, the image is expected to be loaded directly during runtime."},coordinates:{required:!0,doc:"Corners of image specified in longitude, latitude pairs. Note: When using globe projection, the image will be centered at the North or South Pole in the respective hemisphere if the average latitude value exceeds 85 degrees or falls below -85 degrees.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},source_model:{type:{required:!0,type:"enum",values:{model:{doc:"A collection of 3D models"},"batched-model":{doc:"A collection of 3D models with anchor data"}},doc:"Type of model source to be added. From single models to represent 2D layers to 3D tiled models covering a wide area."},maxzoom:{type:"number",default:18,doc:"Maximum zoom level at which to create batched model tiles. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which batched-model tiles are available"},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."}},layer:{id:{type:"string",doc:"Unique layer name.",required:!0},type:{type:"enum",values:{fill:{doc:"A filled polygon with an optional stroked border.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},line:{doc:"A stroked line.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},symbol:{doc:"An icon or a text label.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},circle:{doc:"A filled circle.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},heatmap:{doc:"A heatmap.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},"fill-extrusion":{doc:"An extruded (3D) polygon.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},building:{doc:"A procedural 3D building.","sdk-support":{},experimental:!0,private:!0},raster:{doc:"Raster map textures such as satellite imagery.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},"raster-particle":{experimental:!0,doc:"Particle animation driven by textures such as wind maps.","sdk-support":{"basic functionality":{js:"3.3.0",android:"11.4.0",ios:"11.4.0"}}},hillshade:{doc:"Client-side hillshading visualization based on DEM data. Currently, the implementation only supports Mapbox Terrain RGB and Mapzen Terrarium tiles.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}}},model:{doc:"A 3D model",experimental:!0,"sdk-support":{"basic functionality":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}}},background:{doc:"The background color or pattern of the map.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}}},sky:{doc:"A spherical dome around the map that is always rendered behind all other layers.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}}},slot:{doc:"Marks the position of a slot.","sdk-support":{"basic functionality":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}}},clip:{doc:"Layer that removes 3D content from map.","sdk-support":{"basic functionality":{js:"3.5.0",android:"11.6.0",ios:"11.6.0"}}}},doc:"Rendering type of this layer.",required:!0},metadata:{type:"*",doc:"Arbitrary properties useful to track with the layer, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'mapbox:'."},source:{type:"string",doc:"Name of a source description to be used for this layer. Required for all layer types except `background` and `slot`."},"source-layer":{type:"string",doc:"Layer to use from a vector tile source. Required for vector and raster-array sources; prohibited for all other source types, including GeoJSON sources."},slot:{type:"string",doc:"The slot this layer is assigned to. If specified, and a slot with that name exists, it will be placed at that position in the layer order.","sdk-support":{"basic functionality":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}}},minzoom:{type:"number",minimum:0,maximum:24,doc:"The minimum zoom level for the layer. At zoom levels less than the minzoom, the layer will be hidden."},maxzoom:{type:"number",minimum:0,maximum:24,doc:"The maximum zoom level for the layer. At zoom levels equal to or greater than the maxzoom, the layer will be hidden."},filter:{type:"filter",doc:'An expression specifying conditions on source features. Only features that match the filter are displayed. Zoom expressions in filters are only evaluated at integer zoom levels. The `["feature-state", ...]` expression is not supported in filter expressions. The `["pitch"]` and `["distance-from-center"]` expressions are supported only for filter expressions on the symbol layer.'},layout:{type:"layout",doc:"Layout properties for the layer."},paint:{type:"paint",doc:"Default paint properties for this layer."}},layout:["layout_clip","layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_building","layout_symbol","layout_raster","layout_raster-particle","layout_hillshade","layout_background","layout_sky","layout_model"],layout_background:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"expressions support":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}},expression:{interpolated:!1},"property-type":"constant"}},layout_sky:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"},"expressions support":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}},expression:{interpolated:!1},"property-type":"constant"}},layout_model:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}},expression:{interpolated:!1},"property-type":"constant"},"model-id":{type:"string",default:"",doc:"Model to render. It can be either a string referencing an element to the models root property or an internal or external URL","property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]},"sdk-support":{"basic functionality":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"},"data-driven styling":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}},transition:!1,requires:[{source:["geojson","vector"]}]}},layout_clip:{"clip-layer-types":{type:"array",value:"enum",values:{model:{doc:"If present the clip layer would remove all 3d model layers below it. Currently only instanced models (e.g. trees) are removed."},symbol:{doc:"If present the clip layer would remove all symbol layers below it."}},default:[],doc:"Layer types that will also be removed if fallen below this clip layer.","sdk-support":{"basic functionality":{js:"3.5.0",android:"11.6.0",ios:"11.6.0"}},expression:{interpolated:!1},"property-type":"data-constant"},"clip-layer-scope":{type:"array",value:"string",default:[],doc:"Removes content from layers with the specified scope. By default all layers are affected. For example specifying `basemap` will only remove content from the Mapbox Standard style layers which have the same scope","sdk-support":{"basic functionality":{js:"3.6.0",android:"11.7.0",ios:"11.7.0"}},expression:{interpolated:!1},"property-type":"data-constant"}},layout_fill:{"fill-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"expressions support":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}},expression:{interpolated:!1},"property-type":"constant"},"fill-elevation-reference":{type:"enum",doc:"Selects the base of fill-elevation. Some modes might require precomputed elevation data in the tileset.",values:{none:{doc:"Elevated rendering is disabled."},"hd-road-base":{doc:"Elevate geometry relative to HD roads. Use this mode to describe base polygons of the road networks."},"hd-road-markup":{doc:"Elevated rendering is enabled. Use this mode to describe additive and stackable features such as 'hatched areas' that should exist only on top of road polygons."}},default:"none",experimental:!0,private:!0,transition:!1,"sdk-support":{"basic functionality":{android:"11.9.0",ios:"11.9.0"}},expression:{interpolated:!1},"property-type":"data-constant"},"fill-construct-bridge-guard-rail":{type:"boolean",doc:"Determines whether bridge guard rails are added for elevated roads.",default:"true",transition:!1,experimental:!0,private:!0,"sdk-support":{"basic functionality":{android:"11.11.0",ios:"11.11.0",js:"3.14.0"},"data-driven styling":{android:"11.11.0",ios:"11.11.0",js:"3.14.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"}},layout_circle:{"circle-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.2.0",ios:"5.9.0"},"data-driven styling":{js:"1.2.0",android:"9.2.0",ios:"5.9.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"circle-elevation-reference":{type:"enum",doc:"Selects the base of circle-elevation. Some modes might require precomputed elevation data in the tileset.",values:{none:{doc:"Elevated rendering is disabled."},"hd-road-markup":{doc:"Elevated rendering is enabled. Use this mode to describe additive and stackable features that should exist only on top of road polygons."}},default:"none",experimental:!0,transition:!1,"sdk-support":{"basic functionality":{android:"11.11.0",ios:"11.11.0",js:"3.14.0"}},expression:{interpolated:!1},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"expressions support":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}},expression:{interpolated:!1},"property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"},"expressions support":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}},expression:{interpolated:!1},"property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"},"expressions support":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}},expression:{interpolated:!1},"property-type":"constant"},"fill-extrusion-edge-radius":{type:"number",experimental:!0,default:0,minimum:0,maximum:1,doc:"Radius of a fill extrusion edge in meters. If not zero, rounds extrusion edges for a smoother appearance.","sdk-support":{"basic functionality":{js:"3.0.0",android:"10.7.0",ios:"10.7.0"},"expressions support":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}},expression:{interpolated:!1},"property-type":"constant"}},layout_building:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{}},expression:{interpolated:!1},"property-type":"constant"},"building-roof-shape":{type:"enum",values:{flat:{doc:"Use regular extruded buildings with flat roofs."},hipped:{doc:"Use hipped roof for the procedurally generated buildings."},gabled:{doc:"Use gabled roof for the procedurally generated buildings."},parapet:{doc:"Use parapet roof for the procedurally generated buildings."},mansard:{doc:"Use mansard roof for the procedurally generated buildings."},skillion:{doc:"Use skillion roof for the procedurally generated buildings."},pyramidal:{doc:"Use pyramidal roof for the procedurally generated buildings."}},default:"flat",doc:"Roof type to use for the procedural buildings.",experimental:!0,private:!0,"sdk-support":{"basic functionality":{},"data-driven styling":{}},expression:{interpolated:!1,parameters:["feature"]},"property-type":"data-driven"},"building-height":{type:"number",default:0,minimum:0,units:"meters",doc:"The height of the procedural buildings.",transition:!0,experimental:!0,private:!0,"sdk-support":{"basic functionality":{},"data-driven styling":{}},expression:{interpolated:!1},"property-type":"data-driven"},"building-base":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude the base of this layer. Must be less than or equal to `building-height`.",transition:!0,requires:["building-height"],experimental:!0,private:!0,"sdk-support":{"basic functionality":{},"data-driven styling":{}},expression:{interpolated:!1},"property-type":"data-driven"}},layout_line:{"line-cap":{type:"enum",values:{butt:{doc:"A cap with a squared-off end which is drawn to the exact endpoint of the line."},round:{doc:"A cap with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},square:{doc:"A cap with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."}},default:"butt",doc:"The display of line endings.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"2.3.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{doc:"A join with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."},round:{doc:"A join with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},miter:{doc:"A join with a sharp, angled corner which is drawn with the outer sides beyond the endpoint of the path until they meet."},none:{doc:"Line segments are not joined together, each one creates a separate line. Useful in combination with line-pattern. Line-cap property is not respected. Can't be used with data-driven styling."}},default:"miter",doc:"The display of lines when joining.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0"},"`none` value":{js:"3.4.0",android:"11.5.0",ios:"11.5.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,doc:"Used to automatically convert miter joins to bevel joins for sharp angles.",requires:[{"line-join":"miter"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,doc:"Used to automatically convert round joins to miter joins for shallow angles.",requires:[{"line-join":"round"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-z-offset":{type:"number",experimental:!0,doc:"Vertical offset from ground, in meters. Defaults to 0. This is an experimental property with some known issues:\n * Not supported for globe projection at the moment \n * Elevated line discontinuity is possible on tile borders with terrain enabled \n * Rendering artifacts can happen near line joins and line caps depending on the line styling \n * Rendering artifacts relating to `line-opacity` and `line-blur` \n * Elevated line visibility is determined by layer order \n * Z-fighting issues can happen with intersecting elevated lines \n * Elevated lines don't cast shadows",default:0,requires:["line-elevation-reference"],"sdk-support":{"basic functionality":{js:"3.5.0",android:"11.5.0",ios:"11.5.0"},"data-driven styling":{js:"3.5.0",android:"11.5.0",ios:"11.5.0"}},expression:{interpolated:!1,parameters:["zoom","feature","line-progress"]},"property-type":"data-driven"},"line-elevation-reference":{type:"enum",doc:"Selects the base of line-elevation. Some modes might require precomputed elevation data in the tileset.",values:{none:{doc:"Elevated rendering is disabled."},sea:{doc:"Elevated rendering is enabled. Use this mode to elevate lines relative to the sea level."},ground:{doc:"Elevated rendering is enabled. Use this mode to elevate lines relative to the ground's height below them."},"hd-road-markup":{doc:"Elevated rendering is enabled. Use this mode to describe additive and stackable features that should exist only on top of road polygons."}},default:"none",experimental:!0,transition:!1,"sdk-support":{"basic functionality":{js:"3.8.0",android:"11.9.0",ios:"11.9.0"}},expression:{interpolated:!1},"property-type":"data-constant"},"line-cross-slope":{type:"number",experimental:!0,doc:"Defines the slope of an elevated line. A value of 0 creates a horizontal line. A value of 1 creates a vertical line. Other values are currently not supported. If undefined, the line follows the terrain slope. This is an experimental property with some known issues:\n * Vertical lines don't support line caps \n * `line-join: round` is not supported with this property",requires:["line-z-offset"],"sdk-support":{"basic functionality":{js:"3.8.0",android:"11.9.0",ios:"11.9.0"}},expression:{interpolated:!1},"property-type":"constant"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"expressions support":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}},expression:{interpolated:!1},"property-type":"constant"},"line-width-unit":{type:"enum",doc:"Selects the unit of line-width. The same unit is automatically used for line-blur and line-offset. Note: This is an experimental property and might be removed in a future release.",values:{pixels:{doc:"Width is rendered in pixels."},meters:{doc:"Width is rendered in meters."}},default:"pixels",experimental:!0,private:!0,transition:!1,"sdk-support":{"basic functionality":{js:"3.9.0",android:"11.9.0",ios:"11.9.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{doc:"The label is placed at the point where the geometry is located."},line:{doc:"The label is placed along the line of the geometry. Can only be used on `LineString` and `Polygon` geometries."},"line-center":{doc:"The label is placed at the center of the line of the geometry. Can only be used on `LineString` and `Polygon` geometries. Note that a single feature in a vector tile may contain multiple line geometries."}},default:"point",doc:"Label placement relative to its geometry.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"`line-center` value":{js:"0.47.0",android:"6.4.0",ios:"4.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",doc:"Distance between two symbol anchors.",requires:[{"symbol-placement":"line"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,doc:"If true, the symbols will not cross tile edges to avoid mutual collisions. Recommended in layers that don't have enough padding in the vector tile to prevent collisions, or if it is a point symbol layer placed after a line symbol layer. When using a client that supports global collision detection, like Mapbox GL JS version 0.42.0 or greater, enabling this property is not needed to prevent clipped labels at tile boundaries.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with lower sort keys are drawn and placed first. When `icon-allow-overlap` or `text-allow-overlap` is `false`, features with a lower sort key will have priority during placement. When `icon-allow-overlap` or `text-allow-overlap` is set to `true`, features with a higher sort key will overlap over features with a lower sort key.","sdk-support":{"basic functionality":{js:"0.53.0",android:"7.4.0",ios:"4.11.0"},"data-driven styling":{js:"0.53.0",android:"7.4.0",ios:"4.11.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{doc:"Sorts symbols by `symbol-sort-key` if set. Otherwise, sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},"viewport-y":{doc:"Sorts symbols by their y-position relative to the viewport if any of the following is set to `true`: `icon-allow-overlap`, `text-allow-overlap`, `icon-ignore-placement`, `text-ignore-placement`."},source:{doc:"Sorts symbols by `symbol-sort-key` if set. Otherwise, no sorting is applied; symbols are rendered in the same order as the source data."}},default:"auto",doc:"Determines whether overlapping symbols in the same layer are rendered in the order that they appear in the data source or by their y-position relative to the viewport. To control the order and prioritization of symbols otherwise, use `symbol-sort-key`.","sdk-support":{"basic functionality":{js:"0.49.0",android:"6.6.0",ios:"4.5.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-z-elevate":{type:"boolean",default:!1,doc:"Position symbol on buildings (both fill extrusions and models) rooftops. In order to have minimal impact on performance, this is supported only when `fill-extrusion-height` is not zoom-dependent and remains unchanged. For fading in buildings when zooming in, fill-extrusion-vertical-scale should be used and symbols would raise with building rooftops. Symbols are sorted by elevation, except in cases when `viewport-y` sorting or `symbol-sort-key` are applied.","sdk-support":{"basic functionality":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}},requires:[{"symbol-placement":["point"]},{"symbol-z-order":["auto"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-elevation-reference":{type:"enum",doc:"Selects the base of symbol-elevation.",values:{sea:{doc:"Elevate symbols relative to the sea level."},ground:{doc:"Elevate symbols relative to the ground's height below them."},"hd-road-markup":{doc:"Use this mode to enable elevated behavior for features that are rendered on top of 3D road polygons. The feature is currently being developed."}},default:"ground",experimental:!0,"sdk-support":{"basic functionality":{android:"11.9.0",ios:"11.9.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,doc:"If true, the icon will be visible even if it collides with other previously drawn symbols.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,doc:"If true, other symbols can be visible even if they collide with the icon.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,doc:"If true, text will display without their corresponding icons when the icon collides with other symbols and the text does not.",requires:["icon-image","text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{doc:"When `symbol-placement` is set to `point`, aligns icons east-west. When `symbol-placement` is set to `line` or `line-center`, aligns icon x-axes with the line."},viewport:{doc:"Produces icons whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},auto:{doc:"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},default:"auto",doc:"In combination with `symbol-placement`, determines the rotation behavior of icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",doc:"Scales the original size of the icon by the provided factor. The new pixel size of the image will be the original pixel size multiplied by `icon-size`. 1 is the original size; 3 triples the size of the image.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-size-scale-range":{type:"array",value:"number",length:2,default:[.8,2],doc:"Defines the minimum and maximum scaling factors for icon related properties like `icon-size`, `icon-halo-width`, `icon-halo-blur`",minimum:.1,maximum:10,experimental:!0,private:!0,expression:{interpolated:!1},"sdk-support":{"basic functionality":{js:"3.8.0"}},"property-type":"data-constant"},"icon-text-fit":{type:"enum",values:{none:{doc:"The icon is displayed at its intrinsic aspect ratio."},width:{doc:"The icon is scaled in the x-dimension to fit the width of the text."},height:{doc:"The icon is scaled in the y-dimension to fit the height of the text."},both:{doc:"The icon is scaled in both x- and y-dimensions."}},default:"none",doc:"Scales the icon to fit around the associated text.",requires:["icon-image","text-field"],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0"},"stretchable icons":{js:"1.6.0",android:"9.2.0",ios:"5.8.0"},"data-driven styling":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",doc:"Size of the additional area added to dimensions determined by `icon-text-fit`, in clockwise order: top, right, bottom, left.",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0"},"data-driven styling":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-image":{type:"resolvedImage",doc:"Name of image in sprite to use for drawing an image background.",tokens:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",doc:"Rotates the icon clockwise.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",doc:"Size of the additional area around the icon bounding box used for detecting symbol collisions.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,doc:"If true, the icon may be flipped to prevent it from being rendered upside-down.",requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],doc:"Offset distance of icon from its anchor. Positive values indicate right and down, while negative values indicate left and up. Each component is multiplied by the value of `icon-size` to obtain the final offset in pixels. When combined with `icon-rotate` the offset will be as if the rotated direction was up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{doc:"The center of the icon is placed closest to the anchor."},left:{doc:"The left side of the icon is placed closest to the anchor."},right:{doc:"The right side of the icon is placed closest to the anchor."},top:{doc:"The top of the icon is placed closest to the anchor."},bottom:{doc:"The bottom of the icon is placed closest to the anchor."},"top-left":{doc:"The top left corner of the icon is placed closest to the anchor."},"top-right":{doc:"The top right corner of the icon is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the icon is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the icon is placed closest to the anchor."}},default:"center",doc:"Part of the icon placed closest to the anchor.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.40.0",android:"5.2.0",ios:"3.7.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{doc:"The icon is aligned to the plane of the map."},viewport:{doc:"The icon is aligned to the plane of the viewport."},auto:{doc:"Automatically matches the value of `icon-rotation-alignment`."}},default:"auto",doc:"Orientation of icon when map is pitched.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{doc:"The text is aligned to the plane of the map."},viewport:{doc:"The text is aligned to the plane of the viewport."},auto:{doc:"Automatically matches the value of `text-rotation-alignment`."}},default:"auto",doc:"Orientation of text when map is pitched.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{doc:"When `symbol-placement` is set to `point`, aligns text east-west. When `symbol-placement` is set to `line` or `line-center`, aligns text x-axes with the line."},viewport:{doc:"Produces glyphs whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},auto:{doc:"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},default:"auto",doc:"In combination with `symbol-placement`, determines the rotation behavior of the individual glyphs forming the text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,doc:"Value to use for a text label. If a plain `string` is provided, it will be treated as a `formatted` with default/inherited formatting options. SDF images are not supported in formatted text and will be ignored.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],doc:"Font stack to use for displaying text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",doc:"Font size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size-scale-range":{type:"array",value:"number",length:2,default:[.8,2],doc:"Defines the minimum and maximum scaling factors for text related properties like `text-size`, `text-max-width`, `text-halo-width`, `font-size`",minimum:.1,maximum:10,experimental:!0,private:!0,expression:{interpolated:!1},"sdk-support":{"basic functionality":{js:"3.8.0"}},"property-type":"data-constant"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",doc:"The maximum line width for text wrapping.",requires:["text-field",{"symbol-placement":["point"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",doc:"Text leading value for multi-line text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"2.3.0",android:"10.0.0",ios:"10.0.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",doc:"Text tracking amount.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{doc:"The text is aligned towards the anchor position."},left:{doc:"The text is aligned to the left."},center:{doc:"The text is centered."},right:{doc:"The text is aligned to the right."}},default:"center",doc:"Text justification options.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0"},auto:{js:"0.54.0",android:"7.4.0",ios:"4.10.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,doc:"Radial offset of text, in the direction of the symbol's anchor. Useful in combination with `text-variable-anchor`, which defaults to using the two-dimensional `text-offset` if present.","sdk-support":{"basic functionality":{js:"0.54.0",android:"7.4.0",ios:"4.10.0"},"data-driven styling":{js:"0.54.0",android:"7.4.0",ios:"4.10.0"}},requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{doc:"The center of the text is placed closest to the anchor."},left:{doc:"The left side of the text is placed closest to the anchor."},right:{doc:"The right side of the text is placed closest to the anchor."},top:{doc:"The top of the text is placed closest to the anchor."},bottom:{doc:"The bottom of the text is placed closest to the anchor."},"top-left":{doc:"The top left corner of the text is placed closest to the anchor."},"top-right":{doc:"The top right corner of the text is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the text is placed closest to the anchor."}},requires:["text-field",{"symbol-placement":["point"]}],doc:"To increase the chance of placing high-priority labels on the map, you can provide an array of `text-anchor` locations: the renderer will attempt to place the label at each location, in order, before moving onto the next label. Use `text-justify: auto` to choose justification based on anchor position. To apply an offset, use the `text-radial-offset` or the two-dimensional `text-offset`.","sdk-support":{"basic functionality":{js:"0.54.0",android:"7.4.0",ios:"4.10.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{doc:"The center of the text is placed closest to the anchor."},left:{doc:"The left side of the text is placed closest to the anchor."},right:{doc:"The right side of the text is placed closest to the anchor."},top:{doc:"The top of the text is placed closest to the anchor."},bottom:{doc:"The bottom of the text is placed closest to the anchor."},"top-left":{doc:"The top left corner of the text is placed closest to the anchor."},"top-right":{doc:"The top right corner of the text is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the text is placed closest to the anchor."}},default:"center",doc:"Part of the text placed closest to the anchor.",requires:["text-field",{"!":"text-variable-anchor"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",doc:"Maximum angle change between adjacent characters.",requires:["text-field",{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{doc:"If a text's language supports horizontal writing mode, symbols would be laid out horizontally."},vertical:{doc:"If a text's language supports vertical writing mode, symbols would be laid out vertically."}},doc:"The property allows control over a symbol's orientation. Note that the property values act as a hint, so that a symbol whose language doesnât support the provided orientation will be laid out in its natural orientation. Example: English point symbol will be rendered horizontally even if array value contains single 'vertical' enum value. For symbol with point placement, the order of elements in an array define priority order for the placement of an orientation variant. For symbol with line placement, the default text writing mode is either ['horizontal', 'vertical'] or ['vertical', 'horizontal'], the order doesn't affect the placement.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"1.3.0",android:"8.3.0",ios:"5.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",doc:"Rotates the text clockwise.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",doc:"Size of the additional area around the text bounding box used for detecting symbol collisions.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,doc:"If true, the text may be flipped vertically to prevent it from being rendered upside-down.",requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{doc:"The text is not altered."},uppercase:{doc:"Forces all letters to be displayed in uppercase."},lowercase:{doc:"Forces all letters to be displayed in lowercase."}},default:"none",doc:"Specifies how to capitalize text, similar to the CSS `text-transform` property.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",doc:"Offset distance of text from its anchor. Positive values indicate right and down, while negative values indicate left and up. If used with text-variable-anchor, input values will be taken as absolute values. Offsets along the x- and y-axis will be applied automatically based on the anchor position.",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,doc:"If true, the text will be visible even if it collides with other previously drawn symbols.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,doc:"If true, other symbols can be visible even if they collide with the text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,doc:"If true, icons will display without their corresponding text when the text collides with other symbols and the icon does not.",requires:["text-field","icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"expressions support":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}},expression:{interpolated:!1},"property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"expressions support":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}},expression:{interpolated:!1},"property-type":"constant"}},"layout_raster-particle":{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"3.3.0",android:"11.4.0",ios:"11.4.0"},"expressions support":{js:"3.3.0",android:"11.4.0",ios:"11.4.0"}},expression:{interpolated:!1},"property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"},"expressions support":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}},expression:{interpolated:!1},"property-type":"constant"}},filter:{type:"array",value:"*",doc:"A filter selects specific features from a layer."},filter_symbol:{type:"boolean",doc:'Expression which determines whether or not to display a symbol. Symbols support dynamic filtering, meaning this expression can use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature","pitch","distance-from-center"]}},filter_fill:{type:"boolean",doc:'Expression which determines whether or not to display a polygon. Fill layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_hillshade:{type:"boolean",doc:'Expression which determines whether or not to enable the hillshade layer. Hillshade layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_raster:{type:"boolean",doc:'Expression which determines whether or not to enable the raster layer. Raster layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},"filter_raster-particle":{type:"boolean",doc:'Expression which determines whether or not to enable the raster particle layer. Raster particle layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_clip:{type:"boolean",doc:'Expression which determines whether or not to enable the clip layer. Clip layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_model:{type:"boolean",doc:'Expression which determines whether or not to display a model. Model layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_line:{type:"boolean",doc:'Expression which determines whether or not to display a Polygon or LineString. Line layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_circle:{type:"boolean",doc:'Expression which determines whether or not to display a circle. Circle layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},"filter_fill-extrusion":{type:"boolean",doc:'Expression which determines whether or not to display a Polygon. Fill-extrusion layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_building:{type:"boolean",doc:'Expression which determines whether or not to display a Polygon. Building layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_heatmap:{type:"boolean",doc:'Expression used to determine whether a point is being displayed or not. Heatmap layer does NOT support dynamic filtering, meaning this expression can NOT use the `["pitch"]` and `["distance-from-center"]` expressions to reference the current state of the view.',default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_operator:{type:"enum",values:{"==":{doc:'`["==", key, value]` equality: `feature[key] = value`'},"!=":{doc:'`["!=", key, value]` inequality: `feature[key] â  value`'},">":{doc:'`[">", key, value]` greater than: `feature[key] > value`'},">=":{doc:'`[">=", key, value]` greater than or equal: `feature[key] â¥ value`'},"<":{doc:'`["<", key, value]` less than: `feature[key] < value`'},"<=":{doc:'`["<=", key, value]` less than or equal: `feature[key] â¤ value`'},in:{doc:'`["in", key, v0, ..., vn]` set inclusion: `feature[key] â {v0, ..., vn}`'},"!in":{doc:'`["!in", key, v0, ..., vn]` set exclusion: `feature[key] â {v0, ..., vn}`'},all:{doc:'`["all", f0, ..., fn]` logical `AND`: `f0 â§ ... â§ fn`'},any:{doc:'`["any", f0, ..., fn]` logical `OR`: `f0 â¨ ... â¨ fn`'},none:{doc:'`["none", f0, ..., fn]` logical `NOR`: `Â¬f0 â§ ... â§ Â¬fn`'},has:{doc:'`["has", key]` `feature[key]` exists'},"!has":{doc:'`["!has", key]` `feature[key]` does not exist'}},doc:"The filter operator."},geometry_type:{type:"enum",values:{Point:{doc:"Filter to point geometries."},LineString:{doc:"Filter to line geometries."},Polygon:{doc:"Filter to polygon geometries."}},doc:"The geometry type for the filter to select."},function:{expression:{type:"expression",doc:"An expression."},stops:{type:"array",doc:"An array of stops.",value:"function_stop"},base:{type:"number",default:1,minimum:0,doc:"The exponential base of the interpolation curve. It controls the rate at which the result increases. Higher values make the result increase more towards the high end of the range. With `1` the stops are interpolated linearly."},property:{type:"string",doc:"The name of a feature property to use as the function input.",default:"$zoom"},type:{type:"enum",values:{identity:{doc:"Return the input value as the output value."},exponential:{doc:"Generate an output by interpolating between stops just less than and just greater than the function input."},interval:{doc:"Return the output value of the stop just less than the function input."},categorical:{doc:"Return the output value of the stop equal to the function input."}},doc:"The interpolation strategy to use in function evaluation.",default:"exponential"},colorSpace:{type:"enum",values:{rgb:{doc:"Use the RGB color space to interpolate color values"},lab:{doc:"Use the LAB color space to interpolate color values."},hcl:{doc:"Use the HCL color space to interpolate color values, interpolating the Hue, Chroma, and Luminance channels individually."}},doc:"The color space in which colors interpolated. Interpolating colors in perceptual color spaces like LAB and HCL tend to produce color ramps that look more consistent and produce colors that can be differentiated more easily than those interpolated in RGB space.",default:"rgb"},default:{type:"*",required:!1,doc:"A value to serve as a fallback function result when a value isn't otherwise available. It is used in the following circumstances:\n* In categorical functions, when the feature value does not match any of the stop domain values.\n* In property and zoom-and-property functions, when a feature does not contain a value for the specified property.\n* In identity functions, when the feature value is not valid for the style property (for example, if the function is being used for a `circle-color` property but the feature property value is not a string or not a valid color).\n* In interval or exponential property and zoom-and-property functions, when the feature value is not numeric.\nIf no default is provided, the style property's default is used in these circumstances."}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2,doc:"Zoom level and value pair."},expression:{type:"array",value:"*",minimum:1,doc:"An expression defines a function that can be used for data-driven style properties or feature filters."},expression_name:{doc:"",type:"enum",values:{let:{doc:'Binds expressions to named variables, which can then be referenced in the result expression using ["var", "variable_name"].',group:"Variable binding","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},var:{doc:'References variable bound using "let".',group:"Variable binding","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},config:{doc:"Retrieves the configuration value for the given option. Returns null if the requested option is missing.",group:"Lookup","sdk-support":{"basic functionality":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}}},literal:{doc:"Provides a literal array or object value.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},array:{doc:"Asserts that the input is an array (optionally with a specific item type and length). If, when the input expression is evaluated, it is not of the asserted type, then this assertion will cause the whole expression to be aborted.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},at:{doc:"Retrieves an item from an array.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},"at-interpolated":{doc:"Retrieves an item from an array. If the array contains numeric values and the provided index is non-integer, the expression returns an interpolated value between adjacent items.",group:"Lookup","sdk-support":{"basic functionality":{js:"3.11.0",android:"11.12.0",ios:"11.12.0"}}},in:{doc:"Determines whether an item exists in an array or a substring exists in a string. In the specific case when the second and third arguments are string literals, you must wrap at least one of them in a [`literal`](#types-literal) expression to hint correct interpretation to the [type system](#type-system).",group:"Lookup","sdk-support":{"basic functionality":{js:"1.6.0",android:"9.1.0",ios:"5.8.0"}}},"index-of":{doc:"Returns the first position at which an item can be found in an array or a substring can be found in a string, or `-1` if the input cannot be found. Accepts an optional index from where to begin the search.",group:"Lookup","sdk-support":{"basic functionality":{js:"1.10.0",android:"10.0.0",ios:"10.0.0"}}},slice:{doc:"Returns an item from an array or a substring from a string from a specified start index, or between a start index and an end index if set. The return value is inclusive of the start index but not of the end index.",group:"Lookup","sdk-support":{"basic functionality":{js:"1.10.0",android:"10.0.0",ios:"10.0.0"}}},case:{doc:"Selects the first output whose corresponding test condition evaluates to true, or the fallback value otherwise.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},match:{doc:'Selects the output for which the label value matches the input value, or the fallback value if no match is found. The input can be any expression (for example, `["get", "building_type"]`). Each label must be unique, and must be either:\n - a single literal value; or\n - an array of literal values, the values of which must be all strings or all numbers (for example `[100, 101]` or `["c", "b"]`).\n\nThe input matches if any of the values in the array matches using strict equality, similar to the `"in"` operator.\nIf the input type does not match the type of the labels, the result will be the fallback value.',group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},coalesce:{doc:"Evaluates each expression in turn until the first valid value is obtained. Invalid values are `null` and [`'image'`](#types-image) expressions that are unavailable in the style. If all values are invalid, `coalesce` returns the first value listed.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},step:{doc:'Produces discrete, stepped results by evaluating a piecewise-constant function defined by pairs of input and output values ("stops"). The `input` may be any numeric expression (e.g., `["get", "population"]`). Stop inputs must be numeric literals in strictly ascending order. Returns the output value of the stop just less than the input, or the first output if the input is less than the first stop.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0"}}},interpolate:{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). The `input` may be any numeric expression (e.g., `["get", "population"]`). Stop inputs must be numeric literals in strictly ascending order. The output type must be `number`, `array<number>`, or `color`.\n\nInterpolation types:\n- `["linear"]`: Interpolates linearly between the pair of stops just less than and just greater than the input.\n- `["exponential", base]`: Interpolates exponentially between the stops just less than and just greater than the input. `base` controls the rate at which the output increases: higher values make the output increase more towards the high end of the range. With values close to 1 the output increases linearly.\n- `["cubic-bezier", x1, y1, x2, y2]`: Interpolates using the cubic bezier curve defined by the given control points.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0"}}},"interpolate-hcl":{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the Hue-Chroma-Luminance color space.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.49.0"}}},"interpolate-lab":{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the CIELAB color space.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.49.0"}}},ln2:{doc:"Returns mathematical constant ln(2).",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},pi:{doc:"Returns the mathematical constant pi.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},e:{doc:"Returns the mathematical constant e.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},typeof:{doc:"Returns a string describing the type of the given value.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},string:{doc:"Asserts that the input value is a string. If multiple values are provided, each one is evaluated in order until a string is obtained. If none of the inputs are strings, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},number:{doc:"Asserts that the input value is a number. If multiple values are provided, each one is evaluated in order until a number is obtained. If none of the inputs are numbers, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},boolean:{doc:"Asserts that the input value is a boolean. If multiple values are provided, each one is evaluated in order until a boolean is obtained. If none of the inputs are booleans, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},object:{doc:"Asserts that the input value is an object. If multiple values are provided, each one is evaluated in order until an object is obtained. If none of the inputs are objects, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},collator:{doc:"Returns a `collator` for use in locale-dependent comparison operations. The `case-sensitive` and `diacritic-sensitive` options default to `false`. The `locale` argument specifies the IETF language tag of the locale to use. If none is provided, the default locale is used. If the requested locale is not available, the `collator` will use a system-defined fallback locale. Use `resolved-locale` to test the results of locale fallback behavior.",group:"Types","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.2.0"}}},format:{doc:'Returns a `formatted` string for displaying mixed-format text in the `text-field` property. The input may contain a string literal or expression, including an [`\'image\'`](#types-image) expression. Strings may be followed by a style override object that supports the following properties:\n- `"text-font"`: Overrides the font stack specified by the root layout property.\n- `"text-color"`: Overrides the color specified by the root paint property.\n- `"font-scale"`: Applies a scaling factor on `text-size` as specified by the root layout property.',group:"Types","sdk-support":{"basic functionality":{js:"0.48.0",android:"6.7.0",ios:"4.6.0"},"text-font":{js:"0.48.0",android:"6.7.0",ios:"4.6.0"},"font-scale":{js:"0.48.0",android:"6.7.0",ios:"4.6.0"},"text-color":{js:"1.3.0",android:"7.3.0",ios:"4.10.0"},image:{js:"1.6.0",android:"8.6.0",ios:"5.7.0"}}},image:{doc:"Returns a [`ResolvedImage`](/style-spec/reference/types/#resolvedimage) for use in [`icon-image`](/style-spec/reference/layers/#layout-symbol-icon-image), `*-pattern` entries, and as a section in the [`'format'`](#types-format) expression.\n\nA [`'coalesce'`](#coalesce) expression containing `image` expressions will evaluate to the first listed image that is currently in the style. This validation process is synchronous and requires the image to have been added to the style before requesting it in the `'image'` argument.\n\nEvery image name can be followed by an optional [`ImageOptions`](/style-spec/reference/types/#imageoptions) object, which will be used for vector images only.\n\nTo implement crossfading between two images within a symbol layer using the [`icon-image-cross-fade`](/style-spec/reference/layers/#paint-symbol-icon-image-cross-fade) attribute, include a second image as the second argument in the `'image'` expression.",group:"Types","sdk-support":{"basic functionality":{js:"1.4.0",android:"8.6.0",ios:"5.7.0"}}},"number-format":{doc:"Converts the input number into a string representation using the providing formatting rules. If set, the `locale` argument specifies the locale to use, as a BCP 47 language tag. If set, the `currency` argument specifies an ISO 4217 code to use for currency-style formatting. If set, the `unit` argument specifies a [simple ECMAScript unit](https://tc39.es/proposal-unified-intl-numberformat/section6/locales-currencies-tz_proposed_out.html#sec-issanctionedsimpleunitidentifier) to use for unit-style formatting. If set, the `min-fraction-digits` and `max-fraction-digits` arguments specify the minimum and maximum number of fractional digits to include.",group:"Types","sdk-support":{"basic functionality":{js:"0.54.0",android:"8.4.0",ios:"5.4.0"}}},"to-string":{doc:'Converts the input value to a string. If the input is `null`, the result is `""`. If the input is a [`boolean`](#types-boolean), the result is `"true"` or `"false"`. If the input is a number, it is converted to a string as specified by the ["NumberToString" algorithm](https://tc39.github.io/ecma262/#sec-tostring-applied-to-the-number-type) of the ECMAScript Language Specification. If the input is a [`color`](#color), it is converted to a string of the form `"rgba(r,g,b,a)"`, where `r`, `g`, and `b` are numerals ranging from 0 to 255, and `a` ranges from 0 to 1. If the input is an [`\'image\'`](#types-image) expression, `\'to-string\'` returns the image name. Otherwise, the input is converted to a string in the format specified by the [`JSON.stringify`](https://tc39.github.io/ecma262/#sec-json.stringify) function of the ECMAScript Language Specification.',group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},"to-number":{doc:'Converts the input value to a number, if possible. If the input is `null` or `false`, the result is 0. If the input is `true`, the result is 1. If the input is a string, it is converted to a number as specified by the ["ToNumber Applied to the String Type" algorithm](https://tc39.github.io/ecma262/#sec-tonumber-applied-to-the-string-type) of the ECMAScript Language Specification. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.',group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},"to-boolean":{doc:"Converts the input value to a boolean. The result is `false` when then input is an empty string, 0, `false`, `null`, or `NaN`; otherwise it is `true`.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},"to-rgba":{doc:"Returns a four-element array containing the input color's red, green, blue, and alpha components, in that order.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},"to-hsla":{doc:"Returns a four-element array containing the input color's Hue, Saturation, Luminance and alpha components, in that order.",group:"Color","sdk-support":{"basic functionality":{js:"3.9.0",android:"11.9.0",ios:"11.9.0"}}},"to-color":{doc:"Converts the input value to a color. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},rgb:{doc:"Creates a color value from red, green, and blue components, which must range between 0 and 255, and an alpha component of 1. If any component is out of range, the expression is an error.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},rgba:{doc:"Creates a color value from red, green, blue components, which must range between 0 and 255, and an alpha component which must range between 0 and 1. If any component is out of range, the expression is an error.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},hsl:{doc:"Creates a color value from hue (range 0-360), saturation and lightness components (range 0-100), and an alpha component of 1. If any component is out of range, the expression is an error.",group:"Color","sdk-support":{"basic functionality":{js:"2.12.1",android:"10.11.0",ios:"10.11.0"}}},hsla:{doc:"Creates a color value from hue (range 0-360), saturation and lightness components (range 0-100), and an alpha component (range 0-1). If any component is out of range, the expression is an error.",group:"Color","sdk-support":{"basic functionality":{js:"2.12.1",android:"10.11.0",ios:"10.11.0"}}},get:{doc:"Retrieves a property value from the current feature's properties, or from another object if a second argument is provided. Returns `null` if the requested property is missing.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},has:{doc:"Tests for the presence of an property value in the current feature's properties, or from another object if a second argument is provided.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},length:{doc:"Returns the length of an array or string.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},properties:{doc:'Returns the feature properties object. Note that in some cases, it may be more efficient to use `["get", "property_name"]` directly.',group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},"feature-state":{doc:"Retrieves a property value from the current feature's state. Returns `null` if the requested property is not present on the feature's state. A feature's state is not part of the GeoJSON or vector tile data, and must be set programmatically on each feature. Features are identified by their `id` attribute, which must be an integer or a string that can be cast to an integer. Note that [\"feature-state\"] can only be used with paint properties that support data-driven styling.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.46.0",android:"10.0.0",ios:"10.0.0"}}},"geometry-type":{doc:"Returns the feature's geometry type: `Point`, `LineString` or `Polygon`. `Multi*` feature types return the singular forms.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},worldview:{doc:"Returns the current worldview being used.",group:"Lookup",experimental:!0,"sdk-support":{"basic functionality":{js:"3.13.0",android:"11.13.0",ios:"11.13.0"}}},id:{doc:"Returns the feature's id, if it has one.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},zoom:{doc:'Returns the current zoom level. Note that in style layout and paint properties, ["zoom"] may only appear as the input to a top-level "step" or "interpolate" expression.',group:"Camera","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},pitch:{doc:'Returns the current pitch in degrees. `["pitch"]` may only be used in the `filter` expression for a `symbol` layer.',group:"Camera","sdk-support":{"basic functionality":{js:"2.6.0",android:"10.9.0",ios:"10.9.0"}}},"distance-from-center":{doc:'Returns the distance of a `symbol` instance from the center of the map. The distance is measured in pixels divided by the height of the map container. It measures 0 at the center, decreases towards the camera and increase away from the camera. For example, if the height of the map is 1000px, a value of -1 means 1000px away from the center towards the camera, and a value of 1 means a distance of 1000px away from the camera from the center. `["distance-from-center"]` may only be used in the `filter` expression for a `symbol` layer.',group:"Camera","sdk-support":{"basic functionality":{js:"2.6.0",android:"10.9.0",ios:"10.9.0"}}},"measure-light":{doc:"Returns a requested property of the light configuration based on the supplied options. Currently the only supported option is `brightness` which returns the global brightness value of the lights on a scale of 0 to 1, where 0 means total darkness and 1 means full brightness. This expression works only with 3D light, i.e. when `lights` root property is defined.",group:"Lookup","sdk-support":{"basic functionality":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}}},"heatmap-density":{doc:"Returns the kernel density estimation of a pixel in a heatmap layer, which is a relative measure of how many data points are crowded around a particular pixel. Can only be used in the `heatmap-color` property.",group:"Heatmap","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},"line-progress":{doc:"Returns the progress along a gradient line. Can only be used in the `line-gradient` and `line-z-offset` properties.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.6.0"}}},"sky-radial-progress":{doc:"Returns the distance of a point on the sky from the sun position. Returns 0 at sun position and 1 when the distance reaches `sky-gradient-radius`. Can only be used in the `sky-gradient` property.",group:"sky","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}}},accumulated:{doc:"Returns the value of a cluster property accumulated so far. Can only be used in the `clusterProperties` option of a clustered GeoJSON source.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.53.0",android:"8.4.0",ios:"5.5.0"}}},"+":{doc:"Returns the sum of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},"*":{doc:"Returns the product of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},"-":{doc:"For two inputs, returns the result of subtracting the second input from the first. For a single input, returns the result of subtracting it from 0.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},"/":{doc:"Returns the result of floating point division of the first input by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},"%":{doc:"Returns the remainder after integer division of the first input by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},"^":{doc:"Returns the result of raising the first input to the power specified by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},sqrt:{doc:"Returns the square root of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0"}}},log10:{doc:"Returns the base-ten logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},ln:{doc:"Returns the natural logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},log2:{doc:"Returns the base-two logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},sin:{doc:"Returns the sine of the input, interpreted as radians.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},cos:{doc:"Returns the cosine of the input, interpreted as radians.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},tan:{doc:"Returns the tangent of the input, interpreted as radians.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},asin:{doc:"Returns the arcsine of the input, in radians between âÏ/2 and Ï/2.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},acos:{doc:"Returns the arccosine of the input, in radians between âÏ/2 and Ï/2.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},atan:{doc:"Returns the arctangent of the input, in radians between âÏ/2 and Ï/2.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},min:{doc:"Returns the minimum value of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},max:{doc:"Returns the maximum value of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},round:{doc:'Rounds the input to the nearest integer. Halfway values are rounded away from zero. For example, `["round", -1.5]` evaluates to -2.',group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0"}}},abs:{doc:"Returns the absolute value of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0"}}},ceil:{doc:"Returns the smallest integer that is greater than or equal to the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0"}}},floor:{doc:"Returns the largest integer that is less than or equal to the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0"}}},distance:{doc:"Returns the shortest distance in meters between the evaluated feature and the input geometry. The input value can be a valid GeoJSON of type `Point`, `MultiPoint`, `LineString`, `MultiLineString`, `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Distance values returned may vary in precision due to loss in precision from encoding geometries, particularly below zoom level 13.",group:"Math","sdk-support":{"basic functionality":{js:"3.0.0",android:"9.2.0",ios:"5.9.0"}}},"==":{doc:"Returns `true` if the input values are equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0"}}},"!=":{doc:"Returns `true` if the input values are not equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0"}}},">":{doc:"Returns `true` if the first input is strictly greater than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0"}}},"<":{doc:"Returns `true` if the first input is strictly less than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0"}}},">=":{doc:"Returns `true` if the first input is greater than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0"}}},"<=":{doc:"Returns `true` if the first input is less than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0"}}},all:{doc:"Returns `true` if all the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `false`, the result is `false` and no further input expressions are evaluated.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},any:{doc:"Returns `true` if any of the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `true`, the result is `true` and no further input expressions are evaluated.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},"!":{doc:"Logical negation. Returns `true` if the input is `false`, and `false` if the input is `true`.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},within:{doc:"Returns `true` if the evaluated feature is fully contained inside a boundary of the input geometry, `false` otherwise. The input value can be a valid GeoJSON of type `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Supported features for evaluation:\n- `Point`: Returns `false` if a point is on the boundary or falls outside the boundary.\n- `LineString`: Returns `false` if any part of a line falls outside the boundary, the line intersects the boundary, or a line's endpoint is on the boundary.",group:"Decision","sdk-support":{"basic functionality":{js:"1.9.0",android:"9.1.0",ios:"5.8.0"}}},"is-supported-script":{doc:"Returns `true` if the input string is expected to render legibly. Returns `false` if the input string contains sections that cannot be rendered without potential loss of meaning (e.g. Indic scripts that require complex text shaping, or right-to-left scripts if the the `mapbox-gl-rtl-text` plugin is not in use in Mapbox GL JS).",group:"String","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.6.0",ios:"4.1.0"}}},upcase:{doc:"Returns the input string converted to uppercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},downcase:{doc:"Returns the input string converted to lowercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},concat:{doc:"Returns a `string` consisting of the concatenation of the inputs. Each input is converted to a string as if by `to-string`.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}}},"resolved-locale":{doc:"Returns the IETF language tag of the locale being used by the provided `collator`. This can be used to determine the default system locale, or to determine if a requested locale was successfully loaded.",group:"String","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.2.0"}}},"raster-value":{doc:"Returns the raster value of a pixel computed via `raster-color-mix`. Can only be used in the `raster-color` property.",group:"Raster Colorization","sdk-support":{"basic functionality":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}}},"raster-particle-speed":{doc:"Returns the length of the particle velocity vector. Can only be used in the `raster-particle-color` property.",group:"Raster Particle Animation","sdk-support":{"basic functionality":{js:"3.3.0",android:"11.4.0",ios:"11.4.0"}}},random:{doc:"Returns a random value in the specified range (first two input numbers) based on a supplied seed (third input). The seed can be an expression or a constant number or string value.",group:"Math","sdk-support":{"basic functionality":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}}}}},fog:{range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom","measure-light"],relaxZoomRestriction:!0},doc:"The start and end distance range in which fog fades from fully transparent to fully opaque. The distance to the point at the center of the map is defined as zero, so that negative range values are closer to the camera, and positive values are farther away.",example:[.5,10],"sdk-support":{"basic functionality":{js:"2.3.0",android:"10.6.0",ios:"10.6.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom","measure-light"],relaxZoomRestriction:!0},"use-theme":!0,transition:!0,doc:"The color of the atmosphere region immediately below the horizon and within the `range` and above the horizon and within `horizon-blend`. Using opacity is recommended only for smoothly transitioning fog on/off as anything less than 100% opacity results in more tiles loaded and drawn.","sdk-support":{"basic functionality":{js:"2.3.0",android:"10.6.0",ios:"10.6.0"}}},"high-color":{type:"color","property-type":"data-constant",default:"#245cdf",expression:{interpolated:!0,parameters:["zoom","measure-light"],relaxZoomRestriction:!0},"use-theme":!0,transition:!0,doc:"The color of the atmosphere region above the horizon, `high-color` extends further above the horizon than the `color` property and its spread can be controlled with `horizon-blend`. The opacity can be set to `0` to remove the high atmosphere color contribution.","sdk-support":{"basic functionality":{js:"2.9.0",android:"10.6.0",ios:"10.6.0"}}},"space-color":{type:"color","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],expression:{interpolated:!0,parameters:["zoom","measure-light"],relaxZoomRestriction:!0},"use-theme":!0,transition:!0,doc:"The color of the region above the horizon and after the end of the `horizon-blend` contribution. The opacity can be set to `0` to have a transparent background.","sdk-support":{"basic functionality":{js:"2.9.0",android:"10.6.0",ios:"10.6.0"}}},"horizon-blend":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,.2,7,.1],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom","measure-light"],relaxZoomRestriction:!0},transition:!0,doc:"Horizon blend applies a smooth fade from the color of the atmosphere to the color of space. A value of zero leaves a sharp transition from atmosphere to space. Increasing the value blends the color of atmosphere into increasingly high angles of the sky.","sdk-support":{"basic functionality":{js:"2.3.0",android:"10.6.0",ios:"10.6.0"}}},"star-intensity":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],5,.35,6,0],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom","measure-light"],relaxZoomRestriction:!0},transition:!0,doc:"A value controlling the star intensity where `0` will show no stars and `1` will show stars at their maximum intensity.","sdk-support":{"basic functionality":{js:"2.9.0",android:"10.6.0",ios:"10.6.0"}}},"vertical-range":{type:"array",default:[0,0],minimum:0,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom","measure-light"],relaxZoomRestriction:!0},doc:"An array of two number values, specifying the vertical range, measured in meters, over which the fog should gradually fade out. When both parameters are set to zero, the fog will be rendered without any vertical constraints.","sdk-support":{"basic functionality":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}}}},snow:{density:{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],11,0,13,.85],minimum:0,maximum:1,experimental:!0,expression:{interpolated:!0,parameters:["zoom","measure-light"],relaxZoomRestriction:!0},transition:!0,doc:"Snow particles density. Controls the overall particles number.","sdk-support":{"basic functionality":{android:"11.9.0",ios:"11.9.0",js:"3.9.0"}}},intensity:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1,experimental:!0,expression:{interpolated:!0,parameters:["zoom","measure-light"],relaxZoomRestriction:!0},transition:!0,doc:"Snow particles movement factor. Controls the overall particles movement speed.","sdk-support":{"basic functionality":{android:"11.9.0",ios:"11.9.0",js:"3.9.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",experimental:!0,expression:{interpolated:!0,parameters:["zoom","measure-light"],relaxZoomRestriction:!0},"use-theme":!0,transition:!0,doc:"Snow particles color.","sdk-support":{"basic functionality":{android:"11.9.0",ios:"11.9.0",js:"3.9.0"}}},opacity:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1,experimental:!0,expression:{interpolated:!0,parameters:["zoom","measure-light"],relaxZoomRestriction:!0},transition:!0,doc:"Snow particles opacity.","sdk-support":{"basic functionality":{android:"11.9.0",ios:"11.9.0",js:"3.9.0"}}},vignette:{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],11,0,13,.3],minimum:0,maximum:1,experimental:!0,expression:{interpolated:!0,parameters:["zoom","measure-light"],relaxZoomRestriction:!0},transition:!0,doc:"Snow vignette screen-space effect. Adds snow tint to screen corners","sdk-support":{"basic functionality":{android:"11.9.0",ios:"11.9.0",js:"3.9.0"}}},"vignette-color":{type:"color","property-type":"data-constant",default:"#ffffff",experimental:!0,expression:{interpolated:!0,parameters:["zoom","measure-light"],relaxZoomRestriction:!0},"use-theme":!0,transition:!0,doc:"Snow vignette screen-space corners tint color.","sdk-support":{"basic functionality":{android:"11.9.0",ios:"11.9.0",js:"3.9.0"}}},"center-thinning":{type:"number","property-type":"data-constant",default:.4,minimum:0,maximum:1,experimental:!0,expression:{interpolated:!0,parameters:["zoom","measure-light"],relaxZoomRestriction:!0},transition:!0,doc:"Thinning factor of snow particles from center. 0 - no thinning. 1 - maximal central area thinning.","sdk-support":{"basic functionality":{android:"11.9.0",ios:"11.9.0",js:"3.9.0"}}},direction:{type:"array",default:[0,50],minimum:0,maximum:360,length:2,value:"number","property-type":"data-constant",transition:!0,experimental:!0,expression:{interpolated:!0,parameters:["zoom","measure-light"],relaxZoomRestriction:!0},doc:"Main snow particles direction. Azimuth and polar angles",example:[0,45],"sdk-support":{"basic functionality":{android:"11.9.0",ios:"11.9.0",js:"3.9.0"}}},"flake-size":{type:"number","property-type":"data-constant",default:.71,minimum:0,maximum:5,experimental:!0,expression:{interpolated:!0,parameters:["zoom","measure-light"],relaxZoomRestriction:!0},transition:!0,doc:"Snow flake particle size. Correlates with individual particle screen size","sdk-support":{"basic functionality":{android:"11.9.0",ios:"11.9.0",js:"3.9.0"}}}},rain:{density:{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],11,0,13,.5],minimum:0,maximum:1,experimental:!0,expression:{interpolated:!0,parameters:["zoom","measure-light"],relaxZoomRestriction:!0},transition:!0,doc:"Rain particles density. Controls the overall screen density of the rain.","sdk-support":{"basic functionality":{android:"11.9.0",ios:"11.9.0",js:"3.9.0"}}},intensity:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1,experimental:!0,expression:{interpolated:!0,parameters:["zoom","measure-light"],relaxZoomRestriction:!0},transition:!0,doc:"Rain particles movement factor. Controls the overall rain particles speed","sdk-support":{"basic functionality":{android:"11.9.0",ios:"11.9.0",js:"3.9.0"}}},color:{type:"color","property-type":"data-constant",default:["interpolate",["linear"],["measure-light","brightness"],0,"#03113d",.3,"#a8adbc"],experimental:!0,expression:{interpolated:!0,parameters:["zoom","measure-light"],relaxZoomRestriction:!0},"use-theme":!0,transition:!0,doc:"Individual rain particle dorplets color.","sdk-support":{"basic functionality":{android:"11.9.0",ios:"11.9.0",js:"3.9.0"}}},opacity:{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["measure-light","brightness"],0,.88,1,.7],minimum:0,maximum:1,experimental:!0,expression:{interpolated:!0,parameters:["zoom","measure-light"],relaxZoomRestriction:!0},transition:!0,doc:"Rain particles opacity.","sdk-support":{"basic functionality":{android:"11.9.0",ios:"11.9.0",js:"3.9.0"}}},vignette:{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],11,0,13,1],minimum:0,maximum:1,experimental:!0,expression:{interpolated:!0,parameters:["zoom","measure-light"],relaxZoomRestriction:!0},transition:!0,doc:"Screen-space vignette rain tinting effect intensity.","sdk-support":{"basic functionality":{android:"11.9.0",ios:"11.9.0",js:"3.9.0"}}},"vignette-color":{type:"color","property-type":"data-constant",default:["interpolate",["linear"],["measure-light","brightness"],0,"#001736",.3,"#464646"],experimental:!0,expression:{interpolated:!0,parameters:["zoom","measure-light"],relaxZoomRestriction:!0},"use-theme":!0,transition:!0,doc:"Rain vignette screen-space corners tint color.","sdk-support":{"basic functionality":{android:"11.9.0",ios:"11.9.0",js:"3.9.0"}}},"center-thinning":{type:"number","property-type":"data-constant",default:.57,minimum:0,maximum:1,experimental:!0,expression:{interpolated:!0,parameters:["zoom","measure-light"],relaxZoomRestriction:!0},transition:!0,doc:"Thinning factor of rain particles from center. 0 - no thinning. 1 - maximal central area thinning.","sdk-support":{"basic functionality":{android:"11.9.0",ios:"11.9.0",js:"3.9.0"}}},direction:{type:"array",default:[0,80],minimum:0,maximum:360,length:2,value:"number","property-type":"data-constant",transition:!0,experimental:!0,expression:{interpolated:!0,parameters:["zoom","measure-light"],relaxZoomRestriction:!0},doc:"Main rain particles direction. Azimuth and polar angles.",example:[0,45],"sdk-support":{"basic functionality":{android:"11.9.0",ios:"11.9.0",js:"3.9.0"}}},"droplet-size":{type:"array",default:[2.6,18.2],minimum:0,maximum:50,length:2,value:"number","property-type":"data-constant",transition:!0,experimental:!0,expression:{interpolated:!0,parameters:["zoom","measure-light"],relaxZoomRestriction:!0},doc:"Rain droplet size. x - normal to direction, y - along direction",example:[0,45],"sdk-support":{"basic functionality":{android:"11.9.0",ios:"11.9.0",js:"3.9.0"}}},"distortion-strength":{type:"number","property-type":"data-constant",default:.7,minimum:0,maximum:1,experimental:!0,expression:{interpolated:!0,parameters:["zoom","measure-light"],relaxZoomRestriction:!0},transition:!0,doc:"Rain particles screen-space distortion strength.","sdk-support":{"basic functionality":{android:"11.9.0",ios:"11.9.0",js:"3.9.0"}}}},camera:{"camera-projection":{doc:"Camera projection describes how 3D world geometry get projected into 2D screen",type:"enum",values:{perspective:{doc:"linear projection where distant objects appear smaller than closer objects. Lines that are parallel seem to converge towards a vanishing point"},orthographic:{doc:"Projection where objects are of the same scale regardless of whether they are far away or near to the camera. Parallel lines remains parallel and there is no vanishing point."}},transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"sdk-support":{"basic functionality":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}},default:"perspective","property-type":"data-constant"}},colorTheme:{data:{type:"string",doc:"Expects a base64 encoded PNG image which represents a cube strip LUT. The height of the image cannot exceed 32 pixels and the width must be equal to the height squared.",transition:!1,"property-type":"data-constant",expression:{interpolated:!1}}},indoor:{floorplanFeaturesetId:{type:"string",doc:"An ID of a featureset to be used to query indoor floorplans.",experimental:!0,transition:!1,"property-type":"data-constant",expression:{interpolated:!1}},buildingFeaturesetId:{type:"string",doc:"An ID of a featureset to be used to add interactivity for building selection.",experimental:!0,transition:!1,"property-type":"data-constant",expression:{interpolated:!1}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{doc:"The position of the light source is aligned to the rotation of the map."},viewport:{doc:"The position of the light source is aligned to the rotation of the viewport."}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},doc:"Whether extruded geometries are lit relative to the map or viewport.",example:"map","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"Position of the light source relative to lit (extruded) geometries, in [r radial coordinate, a azimuthal angle, p polar angle] where r indicates the distance from the center of the base of an object to its light, a indicates the position of the light relative to 0Â° (0Â° when `light.anchor` is set to `viewport` corresponds to the top of the viewport, or 0Â° when `light.anchor` is set to `map` corresponds to due north, and degrees proceed clockwise), and p indicates the height of the light (from 0Â°, directly above, to 180Â°, directly below).",example:[1.5,90,80],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},"use-theme":!0,transition:!0,doc:"Color tint for lighting extruded geometries.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Intensity of lighting (on a scale from 0 to 1). Higher numbers will present as more extreme contrast.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}}}},projection:{name:{type:"enum",values:{albers:{doc:"An Albers equal-area projection centered on the continental United States. You can configure the projection for a different region by setting `center` and `parallels` properties. You may want to set max bounds to constrain the map to the relevant region."},equalEarth:{doc:"An Equal Earth projection."},equirectangular:{doc:"An Equirectangular projection. This projection is very similar to the Plate CarrÃ©e projection."},lambertConformalConic:{doc:"A Lambert conformal conic projection. You can configure the projection for a region by setting `center` and `parallels` properties. You may want to set max bounds to constrain the map to the relevant region."},mercator:{doc:"The Mercator projection is the default projection."},naturalEarth:{doc:"A Natural Earth projection."},winkelTripel:{doc:"A Winkel Tripel projection."},globe:{doc:"A globe projection."}},default:"mercator",doc:"The name of the projection to be used for rendering the map.",required:!0,"sdk-support":{"basic functionality":{js:"2.6.0",ios:"10.5.0",android:"10.5.0"}}},center:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-180,-90],maximum:[180,90],transition:!1,doc:"The reference longitude and latitude of the projection. `center` takes the form of [lng, lat]. This property is only configurable for conic projections (Albers and Lambert Conformal Conic). All other projections are centered on [0, 0].",example:[-96,37.5],requires:[{name:["albers","lambertConformalConic"]}],"sdk-support":{"basic functionality":{js:"2.6.0"}}},parallels:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-90,-90],maximum:[90,90],transition:!1,doc:"The standard parallels of the projection, denoting the desired latitude range with minimal distortion. `parallels` takes the form of [lat0, lat1]. This property is only configurable for conic projections (Albers and Lambert Conformal Conic).",example:[29.5,45.5],requires:[{name:["albers","lambertConformalConic"]}],"sdk-support":{"basic functionality":{js:"2.6.0"}}}},terrain:{source:{type:"string",doc:"Name of a source of `raster_dem` type to be used for terrain elevation.",required:!0,"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}}},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Exaggerates the elevation of the terrain by multiplying the data from the DEM with this value.",requires:["source"],"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_building","paint_symbol","paint_raster","paint_raster-particle","paint_hillshade","paint_background","paint_sky","paint_model"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,doc:"Whether or not the fill should be antialiased.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill layer. In contrast to the `fill-color`, this value will also affect the 1px stroke around the fill, if the stroke is used.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",doc:"The color of the filled part of this layer. This color can be specified as `rgba` with an alpha component and the color's opacity will not affect the opacity of the 1px stroke, if it is used.","use-theme":!0,transition:!0,requires:[{"!":"fill-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",doc:"The outline color of the fill. Matches the value of `fill-color` if unspecified.","use-theme":!0,transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{doc:"The fill is translated relative to the map."},viewport:{doc:"The fill is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-translate`.",default:"map",requires:["fill-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!1,doc:"Name of image in sprite to use for drawing image fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"fill-pattern-cross-fade":{type:"number","property-type":"data-constant",default:0,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom","measure-light"]},requires:["line-pattern"],"sdk-support":{"basic functionality":{js:"3.12.0",android:"11.14.0",ios:"11.14.0"}},doc:"Controls the transition progress between the image variants of fill-pattern. Zero means the first variant is used, one is the second, and in between they are blended together. Both images should be the same size and have the same type (either raster or vector)."},"fill-emissive-strength":{type:"number",default:0,minimum:0,transition:!0,units:"intensity",doc:"Controls the intensity of light emitted on the source features.",requires:["lights"],"sdk-support":{"basic functionality":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}},expression:{interpolated:!0,parameters:["zoom","measure-light"]},"property-type":"data-constant"},"fill-z-offset":{type:"number",doc:"Specifies an uniform elevation in meters. Note: If the value is zero, the layer will be rendered on the ground. Non-zero values will elevate the layer from the sea level, which can cause it to be rendered below the terrain.",default:0,minimum:0,transition:!0,experimental:!0,"sdk-support":{"basic functionality":{js:"3.7.0"},"data-driven styling":{js:"3.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"fill-bridge-guard-rail-color":{type:"color",default:"rgba(241, 236, 225, 255)",doc:"The color of bridge guard rail.",experimental:!0,private:!0,"use-theme":!0,transition:!0,"sdk-support":{"basic functionality":{android:"11.11.0",ios:"11.11.0",js:"3.14.0"},"data-driven styling":{android:"11.11.0",ios:"11.11.0",js:"3.14.0"}},expression:{interpolated:!0,parameters:["zoom","measure-light","feature"]},"property-type":"data-driven"},"fill-tunnel-structure-color":{type:"color",default:"rgba(241, 236, 225, 255)",doc:"The color of tunnel structures (tunnel entrance and tunnel walls).","use-theme":!0,transition:!0,experimental:!0,private:!0,"sdk-support":{"basic functionality":{android:"11.11.0",ios:"11.11.0",js:"3.14.0"},"data-driven styling":{android:"11.11.0",ios:"11.11.0",js:"3.14.0"}},expression:{interpolated:!0,parameters:["zoom","measure-light","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill extrusion layer. This is rendered on a per-layer, not per-feature, basis, and data-driven styling is not available.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",doc:"The base color of the extruded fill. The extrusion's surfaces will be shaded differently based on this color in combination with the root `light` settings. If this color is specified as `rgba` with an alpha component, the alpha component will be ignored; use `fill-extrusion-opacity` to set layer opacity.","use-theme":!0,transition:!0,requires:[{"!":"fill-extrusion-pattern"}],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up (on the flat plane), respectively.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{doc:"The fill extrusion is translated relative to the map."},viewport:{doc:"The fill extrusion is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-extrusion-translate`.",default:"map",requires:["fill-extrusion-translate"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!1,doc:"Name of image in sprite to use for drawing images on extruded fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-pattern-cross-fade":{type:"number","property-type":"data-constant",default:0,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom","measure-light"]},requires:["line-pattern"],"sdk-support":{"basic functionality":{js:"3.12.0",android:"11.14.0",ios:"11.14.0"}},doc:"Controls the transition progress between the image variants of fill-extrusion-pattern. Zero means the first variant is used, one is the second, and in between they are blended together. Both images should be the same size and have the same type (either raster or vector)."},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude this layer.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude the base of this layer. Must be less than or equal to `fill-extrusion-height`.",transition:!0,requires:["fill-extrusion-height"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-height-alignment":{type:"enum",experimental:!0,values:{terrain:{doc:"The fill extrusion height follows terrain slope."},flat:{doc:"The fill extrusion height is flat over terrain."}},doc:"Controls the behavior of fill extrusion height over terrain",default:"flat",requires:["fill-extrusion-height"],"sdk-support":{"basic functionality":{js:"3.8.0",android:"11.8.0",ios:"11.8.0"}},"property-type":"data-constant"},"fill-extrusion-base-alignment":{type:"enum",experimental:!0,values:{terrain:{doc:"The fill extrusion base follows terrain slope."},flat:{doc:"The fill extrusion base is flat over terrain."}},doc:"Controls the behavior of fill extrusion base over terrain",default:"terrain",requires:["fill-extrusion-base"],"sdk-support":{"basic functionality":{js:"3.8.0",android:"11.8.0",ios:"11.8.0"}},"property-type":"data-constant"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,doc:"Whether to apply a vertical gradient to the sides of a fill-extrusion layer. If true, sides will be shaded slightly darker farther down.",transition:!1,"sdk-support":{"basic functionality":{js:"0.50.0",android:"7.0.0",ios:"4.7.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant",type:"number",default:0,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Controls the intensity of shading near ground and concave angles between walls. Default value 0.0 disables ambient occlusion and values around 0.3 provide the most plausible results for buildings.","sdk-support":{"basic functionality":{js:"3.0.0",android:"10.7.0",ios:"10.7.0"}}},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant",type:"number",default:3,minimum:0,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Shades area near ground and concave angles between walls where the radius defines only vertical impact. Default value 3.0 corresponds to height of one floor and brings the most plausible results for buildings. This property works only with legacy light. When 3D lights are enabled `fill-extrusion-ambient-occlusion-wall-radius` and `fill-extrusion-ambient-occlusion-ground-radius` are used instead.",requires:["fill-extrusion-edge-radius"],"sdk-support":{"basic functionality":{js:"3.0.0",android:"10.7.0",ios:"10.7.0"}}},"fill-extrusion-ambient-occlusion-wall-radius":{"property-type":"data-constant",type:"number",experimental:!0,default:3,minimum:0,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Shades area near ground and concave angles between walls where the radius defines only vertical impact. Default value 3.0 corresponds to height of one floor and brings the most plausible results for buildings.",requires:["lights","fill-extrusion-edge-radius"],"sdk-support":{"basic functionality":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}}},"fill-extrusion-ambient-occlusion-ground-radius":{"property-type":"data-constant",type:"number",experimental:!0,default:3,minimum:0,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The extent of the ambient occlusion effect on the ground beneath the extruded buildings in meters.",requires:["lights"],"sdk-support":{"basic functionality":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}}},"fill-extrusion-ambient-occlusion-ground-attenuation":{"property-type":"data-constant",type:"number",experimental:!0,default:.69,minimum:0,maximum:1,doc:"Provides a control to futher fine-tune the look of the ambient occlusion on the ground beneath the extruded buildings. Lower values give the effect a more solid look while higher values make it smoother.",requires:["lights"],transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"sdk-support":{"basic functionality":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}}},"fill-extrusion-flood-light-color":{"property-type":"data-constant",type:"color",experimental:!0,default:"#ffffff",doc:"The color of the flood light effect on the walls of the extruded buildings.",requires:["lights"],"use-theme":!0,transition:!0,expression:{interpolated:!0,parameters:["zoom","measure-light"]},"sdk-support":{"basic functionality":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}}},"fill-extrusion-flood-light-intensity":{"property-type":"data-constant",type:"number",experimental:!0,default:0,minimum:0,maximum:1,doc:"The intensity of the flood light color.",requires:["lights"],transition:!0,expression:{interpolated:!0,parameters:["zoom","measure-light"]},"sdk-support":{"basic functionality":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}}},"fill-extrusion-flood-light-wall-radius":{"property-type":"data-driven",type:"number",experimental:!0,units:"meters",default:0,minimum:0,doc:"The extent of the flood light effect on the walls of the extruded buildings in meters.",requires:["lights"],transition:!0,expression:{interpolated:!0,parameters:["feature","feature-state"]},"sdk-support":{"basic functionality":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"},"data-driven styling":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}}},"fill-extrusion-flood-light-ground-radius":{"property-type":"data-driven",type:"number",experimental:!0,units:"meters",default:0,doc:"The extent of the flood light effect on the ground beneath the extruded buildings in meters. Note: this experimental property is evaluated once per tile, during tile initialization. Changing the property value could trigger tile reload. The `feature-state` styling is deprecated and will get removed soon.",requires:["lights"],transition:!0,expression:{interpolated:!0,parameters:["feature","feature-state"]},"sdk-support":{"basic functionality":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"},"data-driven styling":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}}},"fill-extrusion-flood-light-ground-attenuation":{"property-type":"data-constant",type:"number",experimental:!0,default:.69,minimum:0,maximum:1,doc:"Provides a control to futher fine-tune the look of the flood light on the ground beneath the extruded buildings. Lower values give the effect a more solid look while higher values make it smoother.",requires:["lights"],transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"sdk-support":{"basic functionality":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}}},"fill-extrusion-vertical-scale":{"property-type":"data-constant",type:"number",experimental:!0,default:1,minimum:0,doc:"A global multiplier that can be used to scale base, height, AO, and flood light of the fill extrusions.",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"sdk-support":{"basic functionality":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}}},"fill-extrusion-rounded-roof":{"property-type":"data-constant",type:"boolean",default:!0,experimental:!0,doc:"Indicates whether top edges should be rounded when fill-extrusion-edge-radius has a value greater than 0. If false, rounded edges are only applied to the sides. Default is true.",requires:["fill-extrusion-edge-radius"],transition:!1,"sdk-support":{"basic functionality":{js:"3.0.0",android:"10.10.0",ios:"10.10.0"}},expression:{interpolated:!1,parameters:["zoom"]}},"fill-extrusion-cutoff-fade-range":{type:"number",default:0,minimum:0,maximum:1,doc:"This parameter defines the range for the fade-out effect before an automatic content cutoff on pitched map views. Fade out is implemented by scaling down and removing buildings in the fade range in a staggered fashion. Opacity is not changed. The fade range is expressed in relation to the height of the map view. A value of 1.0 indicates that the content is faded to the same extent as the map's height in pixels, while a value close to zero represents a sharp cutoff. When the value is set to 0.0, the cutoff is completely disabled. Note: The property has no effect on the map if terrain is enabled.",transition:!1,expression:{interpolated:!1},"sdk-support":{"basic functionality":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}},"property-type":"data-constant"},"fill-extrusion-emissive-strength":{type:"number",default:0,minimum:0,transition:!0,units:"intensity",doc:"Controls the intensity of light emitted on the source features.",requires:["lights"],"sdk-support":{"basic functionality":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"},"data-driven styling":{js:"3.8.0",android:"11.8.0",ios:"11.8.0"}},expression:{interpolated:!0,parameters:["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"fill-extrusion-line-width":{type:"number",default:0,minimum:0,transition:!0,experimental:!0,units:"meters",doc:"If a non-zero value is provided, it sets the fill-extrusion layer into wall rendering mode. The value is used to render the feature with the given width over the outlines of the geometry. Note: This property is experimental and some other fill-extrusion properties might not be supported with non-zero line width.","sdk-support":{"basic functionality":{js:"3.7.0",android:"11.7.0",ios:"11.7.0"},"data-driven styling":{js:"3.7.0",android:"11.7.0",ios:"11.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-cast-shadows":{type:"boolean",default:!0,doc:"Enable/Disable shadow casting for this layer",transition:!1,"sdk-support":{"basic functionality":{js:"3.7.0",android:"11.8.0",ios:"11.8.0"}},"property-type":"data-constant"}},paint_building:{"building-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire procedural buildings layer. This is rendered on a per-layer, not per-feature, basis, and data-driven styling is not available.",transition:!0,experimental:!0,private:!0,"sdk-support":{"basic functionality":{}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"building-ambient-occlusion-wall-intensity":{"property-type":"data-constant",type:"number",default:0,minimum:0,maximum:1,experimental:!0,private:!0,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Controls the intensity of shading concave angles between walls and building elements, such as facades and rooftop.","sdk-support":{"basic functionality":{}}},"building-ambient-occlusion-ground-intensity":{"property-type":"data-constant",type:"number",default:0,minimum:0,maximum:1,experimental:!0,private:!0,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Controls the intensity of shading near ground","sdk-support":{"basic functionality":{}}},"building-ambient-occlusion-ground-radius":{"property-type":"data-constant",type:"number",experimental:!0,private:!0,default:3,minimum:0,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The extent of the ambient occlusion effect on the ground beneath the procedural buildings in meters.","sdk-support":{"basic functionality":{}}},"building-ambient-occlusion-ground-attenuation":{"property-type":"data-constant",type:"number",experimental:!0,private:!0,default:.69,minimum:0,maximum:1,doc:"Provides a control to further fine-tune the look of the ambient occlusion on the ground beneath the procedural buildings. Lower values give the effect a more solid look while higher values make it smoother.",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"sdk-support":{"basic functionality":{}}},"building-vertical-scale":{"property-type":"data-constant",type:"number",experimental:!0,private:!0,default:1,minimum:0,doc:"A global multiplier that can be used to scale base and height of the procedural buildings.",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"sdk-support":{"basic functionality":{}}},"building-cast-shadows":{type:"boolean",default:!0,doc:"Enable/Disable shadow casting for this layer",transition:!1,experimental:!0,private:!0,"sdk-support":{"basic functionality":{}},"property-type":"data-constant"},"building-color":{type:"color",default:"rgba(193, 154, 127, 1)",doc:"Color buildings. This can be styled using different building parts (e.g. windows, wall, roof, etc.). This won't be used if `building-roof-shape` has a value `flat`.",experimental:!0,private:!0,"use-theme":!0,transition:!1,"sdk-support":{"basic functionality":{},"data-driven styling":{}},expression:{interpolated:!0,parameters:["feature","feature-state"]},"property-type":"data-driven"},"building-emissive-strength":{type:"number",default:0,minimum:0,doc:"Controls the intensity of light emitted on the source features.",experimental:!0,private:!0,"sdk-support":{"basic functionality":{},"data-driven styling":{}},expression:{interpolated:!0,parameters:["feature","feature-state","measure-light"]},"property-type":"data-driven"}},paint_line:{"line-opacity":{type:"number",doc:"The opacity at which the line will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-color":{type:"color",doc:"The color with which the line will be drawn.",default:"#000000","use-theme":!0,transition:!0,requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.23.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{doc:"The line is translated relative to the map."},viewport:{doc:"The line is translated relative to the viewport."}},doc:"Controls the frame of reference for `line-translate`.",default:"map",requires:["line-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",doc:"Stroke thickness.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state","measure-light","line-progress"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,doc:"Draws a line casing outside of a line's actual path. Value indicates the width of the inner gap.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,doc:"The line's offset. For linear features, a positive value offsets the line to the right, relative to the direction of the line, and a negative value to the left. For polygon features, a positive value results in an inset, and a negative value results in an outset.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.12.1",android:"3.0.0",ios:"3.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Blur applied to the line, in pixels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",doc:"Specifies the lengths of the alternating dashes and gaps that form the dash pattern. The lengths are later scaled by the line width. To convert a dash length to pixels, multiply the length by the current line width. Note that GeoJSON sources with `lineMetrics: true` specified won't render dashed lines to the expected scale. Also note that zoom-dependent expressions will be evaluated only at integer zoom levels.",minimum:0,transition:!1,units:"line widths",requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"2.3.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{type:"resolvedImage",transition:!1,doc:"Name of image in sprite to use for drawing image lines. For seamless patterns, image width must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-pattern-cross-fade":{type:"number","property-type":"data-constant",default:0,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom","measure-light"]},requires:["line-pattern"],"sdk-support":{"basic functionality":{js:"3.12.0",android:"11.14.0",ios:"11.14.0"}},doc:"Controls the transition progress between the image variants of line-pattern. Zero means the first variant is used, one is the second, and in between they are blended together. Both images should be the same size and have the same type (either raster or vector)."},"line-gradient":{type:"color",doc:'A gradient used to color a line feature at various distances along its length. Defined using a `step` or `interpolate` expression which outputs a color for each corresponding `line-progress` input value. `line-progress` is a percentage of the line feature\'s total length as measured on the webmercator projected coordinate plane (a `number` between `0` and `1`). Can only be used with GeoJSON sources that specify `"lineMetrics": true`.',example:["interpolate",["linear"],["line-progress"],0,"blue",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],"use-theme":!0,transition:!1,requires:[{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],"sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.4.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{type:"array",value:"number",doc:"The line part between [trim-start, trim-end] will be painted using `line-trim-color,` which is transparent by default to produce a route vanishing effect. The line trim-off offset is based on the whole line range [0.0, 1.0].",length:2,default:[0,0],minimum:[0,0],maximum:[1,1],transition:!1,requires:[{source:"geojson",has:{lineMetrics:!0}}],"sdk-support":{"basic functionality":{js:"2.9.0",android:"10.5.0",ios:"10.5.0"}},"property-type":"constant"},"line-trim-fade-range":{type:"array",value:"number",doc:"The fade range for the trim-start and trim-end points is defined by the `line-trim-offset` property. The first element of the array represents the fade range from the trim-start point toward the end of the line, while the second element defines the fade range from the trim-end point toward the beginning of the line. The fade result is achieved by interpolating between `line-trim-color` and the color specified by the `line-color` or the `line-gradient` property.",experimental:!0,length:2,default:[0,0],minimum:[0,0],maximum:[1,1],transition:!1,requires:["line-trim-offset",{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["zoom","measure-light"]},"sdk-support":{"basic functionality":{js:"3.6.0",android:"11.6.0",ios:"11.6.0"}},"property-type":"data-constant"},"line-trim-color":{type:"color",doc:"The color to be used for rendering the trimmed line section that is defined by the `line-trim-offset` property.",experimental:!0,default:"transparent","use-theme":!0,transition:!0,requires:["line-trim-offset",{source:"geojson",has:{lineMetrics:!0}}],"sdk-support":{"basic functionality":{js:"3.6.0",android:"11.6.0",ios:"11.6.0"}},expression:{interpolated:!0,parameters:["zoom","measure-light"]},"property-type":"data-constant"},"line-emissive-strength":{type:"number",default:0,minimum:0,transition:!0,units:"intensity",doc:"Controls the intensity of light emitted on the source features.",requires:["lights"],"sdk-support":{"basic functionality":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}},expression:{interpolated:!0,parameters:["zoom","measure-light"]},"property-type":"data-constant"},"line-border-width":{type:"number",private:!0,doc:"The width of the line border. A value of zero means no border.",default:0,minimum:0,transition:!0,"sdk-support":{"basic functionality":{js:"3.0.0",android:"10.9.0",ios:"10.9.0"},"data-driven styling":{js:"3.0.0",android:"10.9.0",ios:"10.9.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-border-color":{type:"color",private:!0,doc:"The color of the line border. If line-border-width is greater than zero and the alpha value of this color is 0 (default), the color for the border will be selected automatically based on the line color.",default:"rgba(0, 0, 0, 0)","use-theme":!0,transition:!0,"sdk-support":{"basic functionality":{js:"3.0.0",android:"10.9.0",ios:"10.9.0"},"data-driven styling":{js:"3.0.0",android:"10.9.0",ios:"10.9.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-occlusion-opacity":{type:"number",default:0,minimum:0,maximum:1,doc:"Opacity multiplier (multiplies line-opacity value) of the line part that is occluded by 3D objects. Value 0 hides occluded part, value 1 means the same opacity as non-occluded part. The property is not supported when `line-opacity` has data-driven styling.","sdk-support":{"basic functionality":{js:"3.5.0",android:"11.5.0",ios:"11.5.0"}},expression:{interpolated:!0,parameters:["zoom"]},transition:!0,"property-type":"data-constant"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",doc:"Circle radius.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",doc:"The fill color of the circle.","use-theme":!0,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,doc:"Amount to blur the circle. 1 blurs the circle such that only the centerpoint is full opacity. Setting a negative value renders the blur as an inner glow effect.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-opacity":{type:"number",doc:"The opacity at which the circle will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{doc:"The circle is translated relative to the map."},viewport:{doc:"The circle is translated relative to the viewport."}},doc:"Controls the frame of reference for `circle-translate`.",default:"map",requires:["circle-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{doc:"Circles are scaled according to their apparent distance to the camera."},viewport:{doc:"Circles are not scaled."}},default:"map",doc:"Controls the scaling behavior of the circle when the map is pitched.","sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{doc:"The circle is aligned to the plane of the map."},viewport:{doc:"The circle is aligned to the plane of the viewport."}},default:"viewport",doc:"Orientation of circle when map is pitched.","sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The width of the circle's stroke. Strokes are placed outside of the `circle-radius`.","sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",doc:"The stroke color of the circle.","use-theme":!0,transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",doc:"The opacity of the circle's stroke.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-emissive-strength":{type:"number",default:0,minimum:0,transition:!0,units:"intensity",doc:"Controls the intensity of light emitted on the source features.",requires:["lights"],"sdk-support":{"basic functionality":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}},expression:{interpolated:!0,parameters:["zoom","measure-light"]},"property-type":"data-constant"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",doc:"Radius of influence of one heatmap point in pixels. Increasing the value makes the heatmap smoother, but less detailed. `queryRenderedFeatures` on heatmap layers will return points within this radius.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,doc:"A measure of how much an individual point contributes to the heatmap. A value of 10 would be equivalent to having 10 points of weight 1 in the same spot. Especially useful when combined with clustering.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"},"data-driven styling":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,doc:"Similar to `heatmap-weight` but controls the intensity of the heatmap globally. Primarily used for adjusting the heatmap based on zoom level.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],doc:'Defines the color of each pixel based on its density value in a heatmap. Should be an expression that uses `["heatmap-density"]` as input.',"use-theme":!0,transition:!1,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",doc:"The global opacity at which the heatmap layer will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{doc:"The opacity at which the icon will be drawn.",type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-occlusion-opacity":{doc:"The opacity at which the icon will be drawn in case of being depth occluded. Absent value means full occlusion against terrain only.",type:"number",minimum:0,maximum:1,default:0,transition:!0,requires:["icon-image"],"sdk-support":{"basic functionality":{js:"3.5.0",android:"11.5.0",ios:"11.6.0"},"data-driven styling":{js:"3.5.0",android:"11.5.0",ios:"11.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-emissive-strength":{type:"number",default:1,minimum:0,transition:!0,units:"intensity",doc:"Controls the intensity of light emitted on the source features.",requires:["lights"],"sdk-support":{"basic functionality":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"},"data-driven styling":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}},expression:{interpolated:!0,parameters:["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"text-emissive-strength":{type:"number",default:1,minimum:0,transition:!0,units:"intensity",doc:"Controls the intensity of light emitted on the source features.",requires:["lights"],"sdk-support":{"basic functionality":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"},"data-driven styling":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}},expression:{interpolated:!0,parameters:["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000","use-theme":!0,transition:!0,doc:"The color of the icon. This can only be used with [SDF icons](/help/troubleshooting/using-recolorable-images-in-mapbox-maps/).",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)","use-theme":!0,transition:!0,doc:"The color of the icon's halo. Icon halos can only be used with [SDF icons](/help/troubleshooting/using-recolorable-images-in-mapbox-maps/).",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the icon outline.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Fade out the halo towards the outside.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the icon's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{doc:"Icons are translated relative to the map."},viewport:{doc:"Icons are translated relative to the viewport."}},doc:"Controls the frame of reference for `icon-translate`.",default:"map",requires:["icon-image","icon-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-image-cross-fade":{type:"number","property-type":"data-constant",default:0,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom","measure-light"]},requires:["icon-image"],"sdk-support":{"basic functionality":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}},doc:"Controls the transition progress between the image variants of icon-image. Zero means the first variant is used, one is the second, and in between they are blended together. . Both images should be the same size and have the same type (either raster or vector)."},"text-opacity":{type:"number",doc:"The opacity at which the text will be drawn.",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-occlusion-opacity":{type:"number",doc:"The opacity at which the text will be drawn in case of being depth occluded. Absent value means full occlusion against terrain only.",minimum:0,maximum:1,default:0,transition:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"3.5.0",android:"11.5.0",ios:"11.6.0"},"data-driven styling":{js:"3.5.0",android:"11.5.0",ios:"11.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-color":{type:"color",doc:"The color with which the text will be drawn.",default:"#000000","use-theme":!0,transition:!0,overridable:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)","use-theme":!0,transition:!0,doc:"The color of the text's halo, which helps it stand out from backgrounds.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the font outline. Max text halo width is 1/4 of the font-size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The halo's fadeout distance towards the outside.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the text's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{doc:"The text is translated relative to the map."},viewport:{doc:"The text is translated relative to the viewport."}},doc:"Controls the frame of reference for `text-translate`.",default:"map",requires:["text-field","text-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-color-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!1,doc:"Increase or reduce the saturation of the symbol icon.","sdk-support":{"basic functionality":{js:"3.1.0",android:"11.1.0",ios:"11.1.0"}},expression:{interpolated:!1},"property-type":"data-constant"},"icon-color-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!1,doc:"Increase or reduce the contrast of the symbol icon.","sdk-support":{"basic functionality":{js:"3.5.0",android:"11.5.0",ios:"11.5.0"}},expression:{interpolated:!1},"property-type":"data-constant"},"icon-color-brightness-min":{type:"number",doc:"Increase or reduce the brightness of the symbols. The value is the minimum brightness.",default:0,minimum:0,maximum:1,transition:!1,"sdk-support":{"basic functionality":{js:"3.5.0",android:"11.5.0",ios:"11.5.0"}},expression:{interpolated:!1},"property-type":"data-constant"},"icon-color-brightness-max":{type:"number",doc:"Increase or reduce the brightness of the symbols. The value is the maximum brightness.",default:1,minimum:0,maximum:1,transition:!1,"sdk-support":{"basic functionality":{js:"3.5.0",android:"11.5.0",ios:"11.5.0"}},expression:{interpolated:!1},"property-type":"data-constant"},"symbol-z-offset":{type:"number",doc:"Specifies an uniform elevation from the ground, in meters.",default:0,minimum:0,transition:!0,experimental:!0,"sdk-support":{"basic functionality":{js:"3.7.0",android:"11.7.0",ios:"11.7.0"},"data-driven styling":{js:"3.7.0",android:"11.7.0",ios:"11.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"}},paint_raster:{"raster-opacity":{type:"number",doc:"The opacity at which the image will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-color":{type:"color",doc:'Defines a color map by which to colorize a raster layer, parameterized by the `["raster-value"]` expression and evaluated at 256 uniformly spaced steps over the range specified by `raster-color-range`.',"use-theme":!0,transition:!1,"sdk-support":{"basic functionality":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["raster-value"]},"property-type":"color-ramp"},"raster-color-mix":{type:"array",default:[.2126,.7152,.0722,0],length:4,value:"number","property-type":"data-constant",transition:!0,requires:["raster-color"],expression:{interpolated:!0,parameters:["zoom"]},doc:"When `raster-color` is active, specifies the combination of source RGB channels used to compute the raster value. Computed using the equation `mix.r * src.r + mix.g * src.g + mix.b * src.b + mix.a`. The first three components specify the mix of source red, green, and blue channels, respectively. The fourth component serves as a constant offset and is *not* multipled by source alpha. Source alpha is instead carried through and applied as opacity to the colorized result. Default value corresponds to RGB luminosity.",example:[.2126,.7152,.0722,0],"sdk-support":{"basic functionality":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}}},"raster-color-range":{type:"array",length:2,value:"number","property-type":"data-constant",transition:!0,requires:["raster-color"],expression:{interpolated:!0,parameters:["zoom"]},doc:"When `raster-color` is active, specifies the range over which `raster-color` is tabulated. Units correspond to the computed raster value via `raster-color-mix`. For `rasterarray` sources, if `raster-color-range` is unspecified, the source's stated data range is used.",example:[.5,10],"sdk-support":{"basic functionality":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}}},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",doc:"Rotates hues around the color wheel.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the minimum brightness.",default:0,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the maximum brightness.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",doc:"Increase or reduce the saturation of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",doc:"Increase or reduce the contrast of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",doc:"The resampling/interpolation method to use for overscaling, also known as texture magnification filter",values:{linear:{doc:"(Bi)linear filtering interpolates pixel values using the weighted average of the four closest original source pixels creating a smooth but blurry look when overscaled"},nearest:{doc:"Nearest neighbor filtering interpolates pixel values using the nearest original source pixel creating a sharp but pixelated look when overscaled"}},default:"linear","sdk-support":{"basic functionality":{js:"0.47.0",android:"6.3.0",ios:"4.2.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",doc:"Fade duration when a new tile is added.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-emissive-strength":{type:"number",default:0,minimum:0,transition:!0,units:"intensity",doc:"Controls the intensity of light emitted on the source features.",requires:["lights"],"sdk-support":{"basic functionality":{js:"3.1.0",android:"11.1.0",ios:"11.1.0"}},expression:{interpolated:!0,parameters:["zoom","measure-light"]},"property-type":"data-constant"},"raster-array-band":{type:"string",required:!1,experimental:!0,"property-type":"data-constant",transition:!1,requires:[{source:"raster-array"}],doc:"Displayed band of raster array source layer. Defaults to the first band if not set.",example:"band-name","sdk-support":{"basic functionality":{js:"3.1.0",android:"11.1.0",ios:"11.1.0"}}},"raster-elevation":{type:"number",doc:"Specifies an uniform elevation from the ground, in meters.",default:0,minimum:0,transition:!0,experimental:!0,"sdk-support":{"basic functionality":{js:"3.1.0",android:"11.2.0",ios:"11.2.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},"paint_raster-particle":{"raster-particle-array-band":{type:"string",required:!1,"property-type":"data-constant",transition:!1,doc:"Displayed band of raster array source layer",example:'"1713348000"',"sdk-support":{"basic functionality":{js:"3.3.0",android:"11.4.0",ios:"11.4.0"}}},"raster-particle-count":{type:"number",doc:"Defines the amount of particles per tile.",default:512,minimum:1,transition:!1,"sdk-support":{"basic functionality":{js:"3.3.0",android:"11.4.0",ios:"11.4.0"}},"property-type":"data-constant"},"raster-particle-color":{type:"color",doc:'Defines a color map by which to colorize a raster particle layer, parameterized by the `["raster-particle-speed"]` expression and evaluated at 256 uniformly spaced steps over the range specified by `raster-particle-max-speed`.',"use-theme":!0,transition:!1,"sdk-support":{"basic functionality":{js:"3.3.0",android:"11.4.0",ios:"11.4.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["raster-particle-speed"]},"property-type":"color-ramp"},"raster-particle-max-speed":{type:"number",doc:"Defines the maximum speed for particles. Velocities with magnitudes equal to or exceeding this value are clamped to the max value.",default:1,minimum:1,transition:!1,"sdk-support":{"basic functionality":{js:"3.3.0",android:"11.4.0",ios:"11.4.0"}},"property-type":"data-constant"},"raster-particle-speed-factor":{type:"number",doc:"Defines a coefficient for the speed of particlesâ motion.",default:.2,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"3.3.0",android:"11.4.0",ios:"11.4.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-particle-fade-opacity-factor":{type:"number",doc:"Defines defines the opacity coefficient applied to the faded particles in each frame. In practice, this property controls the length of the particle tail.",default:.98,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"3.3.0",android:"11.4.0",ios:"11.4.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-particle-reset-rate-factor":{type:"number",doc:"Defines a coefficient for a time period at which particles will restart at a random position, to avoid degeneration (empty areas without particles).",default:.8,minimum:0,maximum:1,transition:!1,"sdk-support":{"basic functionality":{js:"3.3.0",android:"11.4.0",ios:"11.4.0"}},"property-type":"data-constant"},"raster-particle-elevation":{type:"number",doc:"Specifies an uniform elevation from the ground, in meters.",default:0,minimum:0,transition:!0,"sdk-support":{"basic functionality":{js:"3.7.0",android:"11.7.0",ios:"11.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,doc:"The direction of the light source used to generate the hillshading with 0 as the top of the viewport if `hillshade-illumination-anchor` is set to `viewport` and due north if `hillshade-illumination-anchor` is set to `map` and no 3d lights enabled. If `hillshade-illumination-anchor` is set to `map` and 3d lights enabled, the direction from 3d lights is used instead.",transition:!1,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{doc:"The hillshade illumination is relative to the north direction."},viewport:{doc:"The hillshade illumination is relative to the top of the viewport."}},default:"viewport",doc:"Direction of light source when map is rotated.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",doc:"Intensity of the hillshade",default:.5,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",doc:"The shading color of areas that face away from the light source.","use-theme":!0,transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",doc:"The shading color of areas that faces towards the light source.","use-theme":!0,transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",doc:"The shading color used to accentuate rugged terrain like sharp cliffs and gorges.","use-theme":!0,transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0"}},expression:{interpolated:!0,parameters:["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-emissive-strength":{type:"number",default:0,minimum:0,transition:!0,units:"intensity",doc:"Controls the intensity of light emitted on the source features.",requires:["lights"],"sdk-support":{"basic functionality":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}},expression:{interpolated:!0,parameters:["zoom","measure-light"]},"property-type":"data-constant"}},paint_background:{"background-pitch-alignment":{type:"enum",values:{map:{doc:"The background is aligned to the plane of the map."},viewport:{doc:"The background is aligned to the plane of the viewport, covering the whole screen. Note: This mode disables the automatic reordering of the layer when terrain or globe projection is used."}},default:"map",doc:"Orientation of background layer.","sdk-support":{"basic functionality":{js:"3.8.0",android:"11.8.0",ios:"11.8.0"}},expression:{interpolated:!1,parameters:[]},experimental:!0,"property-type":"data-constant"},"background-color":{type:"color",default:"#000000",doc:"The color with which the background will be drawn.","use-theme":!0,transition:!0,requires:[{"!":"background-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!1,doc:"Name of image in sprite to use for drawing an image background. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity at which the background will be drawn.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-emissive-strength":{type:"number",default:0,minimum:0,transition:!0,units:"intensity",doc:"Controls the intensity of light emitted on the source features.",requires:["lights"],"sdk-support":{"basic functionality":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}},expression:{interpolated:!0,parameters:["zoom","measure-light"]},"property-type":"data-constant"}},paint_sky:{"sky-type":{type:"enum",values:{gradient:{doc:"Renders the sky with a gradient that can be configured with `sky-gradient-radius` and `sky-gradient`."},atmosphere:{doc:"Renders the sky with a simulated atmospheric scattering algorithm, the sun direction can be attached to the light position or explicitly set through `sky-atmosphere-sun`."}},default:"atmosphere",doc:"The type of the sky","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,doc:"Position of the sun center [a azimuthal angle, p polar angle]. The azimuthal angle indicates the position of the sun relative to 0Â° north, where degrees proceed clockwise. The polar angle indicates the height of the sun, where 0Â° is directly above, at zenith, and 90Â° at the horizon. When this property is ommitted, the sun center is directly inherited from the light position.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,doc:"Intensity of the sun as a light source in the atmosphere (on a scale from 0 to a 100). Setting higher values will brighten up the sky.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,doc:"Position of the gradient center [a azimuthal angle, p polar angle]. The azimuthal angle indicates the position of the gradient center relative to 0Â° north, where degrees proceed clockwise. The polar angle indicates the height of the gradient center, where 0Â° is directly above, at zenith, and 90Â° at the horizon.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,doc:"The angular distance (measured in degrees) from `sky-gradient-center` up to which the gradient extends. A value of 180 causes the gradient to wrap around to the opposite direction from `sky-gradient-center`.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],doc:"Defines a radial color gradient with which to color the sky. The color values can be interpolated with an expression using `sky-radial-progress`. The range [0, 1] for the interpolant covers a radial distance (in degrees) of [0, `sky-gradient-radius`] centered at the position specified by `sky-gradient-center`.","use-theme":!0,transition:!1,requires:[{"sky-type":"gradient"}],"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",doc:"A color applied to the atmosphere sun halo. The alpha channel describes how strongly the sun halo is represented in an atmosphere sky layer.","use-theme":!0,transition:!1,requires:[{"sky-type":"atmosphere"}],"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",doc:"A color used to tweak the main atmospheric scattering coefficients. Using white applies the default coefficients giving the natural blue color to the atmosphere. This color affects how heavily the corresponding wavelength is represented during scattering. The alpha channel describes the density of the atmosphere, with 1 maximum density and 0 no density.","use-theme":!0,transition:!1,requires:[{"sky-type":"atmosphere"}],"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire sky layer.",transition:!0,"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_model:{"model-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the model layer. Except for zoom, expressions that are data-driven are not supported if using GeoJSON or vector tile as the model layer source.",transition:!0,expression:{interpolated:!0,parameters:["feature","feature-state","zoom"]},"sdk-support":{"basic functionality":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"},"data-driven styling":{js:"3.9.0",android:"11.9.0",ios:"11.9.0"}},"property-type":"data-driven"},"model-rotation":{type:"array",value:"number",length:3,default:[0,0,0],period:360,units:"degrees","property-type":"data-driven",expression:{interpolated:!0,parameters:["feature","feature-state","zoom"]},"sdk-support":{"basic functionality":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"},"data-driven styling":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}},transition:!0,doc:"The rotation of the model in euler angles [lon, lat, z]."},"model-scale":{type:"array",value:"number",length:3,default:[1,1,1],doc:"The scale of the model. Expressions that are zoom-dependent are not supported if using GeoJSON or vector tile as the model layer source.","property-type":"data-driven",expression:{interpolated:!0,parameters:["feature","feature-state","zoom"]},"sdk-support":{"basic functionality":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"},"data-driven styling":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}},transition:!0},"model-translation":{type:"array",value:"number",length:3,default:[0,0,0],"property-type":"data-driven",expression:{interpolated:!0,parameters:["feature","feature-state","zoom"]},"sdk-support":{"basic functionality":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"},"data-driven styling":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}},transition:!0,doc:"The translation of the model in meters in form of [longitudal, latitudal, altitude] offsets."},"model-color":{type:"color",default:"#ffffff",doc:"The tint color of the model layer. model-color-mix-intensity (defaults to 0) defines tint(mix) intensity - this means that, this color is not used unless model-color-mix-intensity gets value greater than 0. Expressions that depend on measure-light are not supported when using GeoJSON or vector tile as the model layer source.","property-type":"data-driven",expression:{interpolated:!0,parameters:["feature","feature-state","measure-light","zoom"]},"sdk-support":{"basic functionality":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"},"data-driven styling":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}},"use-theme":!0,transition:!0},"model-color-mix-intensity":{type:"number","property-type":"data-driven",default:0,minimum:0,maximum:1,doc:"Intensity of model-color (on a scale from 0 to 1) in color mix with original 3D model's colors. Higher number will present a higher model-color contribution in mix. Expressions that depend on measure-light are not supported when using GeoJSON or vector tile as the model layer source.",expression:{interpolated:!0,parameters:["feature","feature-state","measure-light"]},"sdk-support":{"basic functionality":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"},"data-driven styling":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}},transition:!0},"model-type":{type:"enum",values:{"common-3d":{doc:"Integrated to 3D scene, using depth testing, along with terrain, fill-extrusions and custom layer."},"location-indicator":{doc:"Displayed over other 3D content, occluded by terrain."}},"sdk-support":{"basic functionality":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}},default:"common-3d",doc:"Defines rendering behavior of model in respect to other 3D scene objects.","property-type":"data-constant"},"model-cast-shadows":{type:"boolean",default:!0,doc:"Enable/Disable shadow casting for this layer",transition:!1,"sdk-support":{"basic functionality":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}},"property-type":"data-constant"},"model-receive-shadows":{type:"boolean",default:!0,doc:"Enable/Disable shadow receiving for this layer",transition:!1,"sdk-support":{"basic functionality":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}},"property-type":"data-constant"},"model-ambient-occlusion-intensity":{type:"number",default:1,minimum:0,maximum:1,doc:"Intensity of the ambient occlusion if present in the 3D model.",expression:{interpolated:!0,parameters:["zoom"]},"sdk-support":{"basic functionality":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}},"property-type":"data-constant",transition:!0},"model-emissive-strength":{type:"number","property-type":"data-driven",default:0,minimum:0,maximum:5,units:"intensity",doc:"Strength of the emission. There is no emission for value 0. For value 1.0, only emissive component (no shading) is displayed and values above 1.0 produce light contribution to surrounding area, for some of the parts (e.g. doors). Expressions that depend on measure-light are only supported as a global layer value (and not for each feature) when using GeoJSON or vector tile as the model layer source.",expression:{interpolated:!0,parameters:["feature","feature-state","measure-light"]},"sdk-support":{"basic functionality":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"},"data-driven styling":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}},transition:!0},"model-roughness":{type:"number",default:1,minimum:0,maximum:1,doc:"Material roughness. Material is fully smooth for value 0, and fully rough for value 1. Affects only layers using batched-model source.","property-type":"data-driven",expression:{interpolated:!0,parameters:["feature","feature-state"]},"sdk-support":{"basic functionality":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"},"data-driven styling":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}},transition:!0},"model-height-based-emissive-strength-multiplier":{type:"array",default:[1,1,1,1,0],length:5,value:"number",doc:"Emissive strength multiplier along model height (gradient begin, gradient end, value at begin, value at end, gradient curve power (logarithmic scale, curve power = pow(10, val)).","property-type":"data-driven",expression:{interpolated:!0,parameters:["feature","feature-state","measure-light"]},"sdk-support":{"basic functionality":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"},"data-driven styling":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}},transition:!0},"model-cutoff-fade-range":{type:"number",default:0,minimum:0,maximum:1,doc:"This parameter defines the range for the fade-out effect before an automatic content cutoff on pitched map views. The automatic cutoff range is calculated according to the minimum required zoom level of the source and layer. The fade range is expressed in relation to the height of the map view. A value of 1.0 indicates that the content is faded to the same extent as the map's height in pixels, while a value close to zero represents a sharp cutoff. When the value is set to 0.0, the cutoff is completely disabled. Note: The property has no effect on the map if terrain is enabled.",transition:!1,expression:{interpolated:!1},"sdk-support":{"basic functionality":{js:"3.0.0",android:"11.0.0",ios:"11.0.0"}},"property-type":"data-constant"},"model-front-cutoff":{type:"array",private:!0,value:"number","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]},length:3,default:[0,0,1],minimum:[0,0,0],maximum:[1,1,1],doc:"An array for configuring the fade-out effect for the front cutoff of content on pitched map views. It contains three values: start, range and final opacity. The start parameter defines the point at which the fade-out effect begins, with smaller values causing the effect to start earlier. The range parameter specifies how long the fade-out effect will last. A value of 0.0 for range makes content disappear immediately without a fade-out effect. The final opacity determines content opacity at the end of the fade-out effect. A value of 1.0 for final opacity means that the cutoff is completely disabled.","sdk-support":{"basic functionality":{js:"3.5.0"}}}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds",doc:"Time allotted for transitions to complete."},delay:{type:"number",default:0,minimum:0,units:"milliseconds",doc:"Length of time before a transition begins."}},"property-type":{"data-driven":{type:"property-type",doc:"Property is interpolable and can be represented using a property expression."},"color-ramp":{type:"property-type",doc:"Property should be specified using a color ramp from which the output color can be sampled based on a property calculation."},"data-constant":{type:"property-type",doc:"Property is interpolable but cannot be represented using a property expression."},constant:{type:"property-type",doc:"Property is constant across all zoom levels and property values."}},promoteId:{"*":{type:"*",doc:"A feature property name to use as the ID, or an expression to evaluate as the ID for feature state."}},$doc:{transition:{type:"transition",doc:"Controls how a property transitions to a new value. Overrides the style's root `transition` for this property."},"use-theme":{type:"enum",doc:'Controls whether the associated color property is affected by the global color theme. When set to "none", the color theme is ignored for this property. When set to "default", the color theme is applied.',values:{default:{doc:"The color theme is applied to this property (default behavior)."},none:{doc:"The color theme is ignored for this property."}},default:"default"}}};function GE(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];for(var o=0,i=r;o<i.length;o++){var a=i[o];for(var s in a)e[s]=a[s]}return e}var UE=function(e){function t(e,r){var n;return PE(this,t),(n=kE(this,t,[r])).message=r,n.key=e,n}return TE(t,jE(Error)),OE(t)}(),zE=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];PE(this,e),this.parent=t,this.bindings={};var n,o=RE(r);try{for(o.s();!(n=o.n()).done;){var i=CE(n.value,2),a=i[0],s=i[1];this.bindings[a]=s}}catch(e){o.e(e)}finally{o.f()}}return OE(e,[{key:"concat",value:function(t){return new e(this,t)}},{key:"get",value:function(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error("".concat(e," not found in scope."))}},{key:"has",value:function(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}])}(),HE={kind:"null"},qE={kind:"number"},VE={kind:"string"},KE={kind:"boolean"},YE={kind:"color"},JE={kind:"object"},WE={kind:"value"},XE={kind:"collator"},ZE={kind:"formatted"},$E={kind:"resolvedImage"};function e_(e,t){return{kind:"array",itemType:e,N:t}}function t_(e){if("array"===e.kind){var t=t_(e.itemType);return"number"==typeof e.N?"array<".concat(t,", ").concat(e.N,">"):"value"===e.itemType.kind?"array":"array<".concat(t,">")}return e.kind}var r_=[HE,qE,VE,KE,YE,ZE,JE,e_(WE),$E];function n_(e,t){if("error"===t.kind)return null;if("array"===e.kind){if("array"===t.kind&&(0===t.N&&"value"===t.itemType.kind||!n_(e.itemType,t.itemType))&&("number"!=typeof e.N||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if("value"===e.kind)for(var r=0,n=r_;r<n.length;r++){if(!n_(n[r],t))return null}}return"Expected ".concat(t_(e)," but found ").concat(t_(t)," instead.")}function o_(e,t){return t.some(function(t){return t.kind===e.kind})}function i_(e,t){return t.some(function(t){return"null"===t?null===e:"array"===t?Array.isArray(e):"object"===t?e&&!Array.isArray(e)&&"object"===FE(e):t===FE(e)})}function a_(e,t){return"array"===e.kind&&"array"===t.kind?e.N===t.N&&a_(e.itemType,t.itemType):e.kind===t.kind}function s_(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var u_,l_={};var c_=function(){if(u_)return l_;u_=1;var e={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function t(e){return(e=Math.round(e))<0?0:e>255?255:e}function r(e){return e<0?0:e>1?1:e}function n(e){return"%"===e[e.length-1]?t(parseFloat(e)/100*255):t(parseInt(e))}function o(e){return"%"===e[e.length-1]?r(parseFloat(e)/100):r(parseFloat(e))}function i(e,t,r){return r<0?r+=1:r>1&&(r-=1),6*r<1?e+(t-e)*r*6:2*r<1?t:3*r<2?e+(t-e)*(2/3-r)*6:e}try{l_.parseCSSColor=function(r){var a,s=r.replace(/ /g,"").toLowerCase();if(s in e)return e[s].slice();if("#"===s[0])return 4===s.length?(a=parseInt(s.substr(1),16))>=0&&a<=4095?[(3840&a)>>4|(3840&a)>>8,240&a|(240&a)>>4,15&a|(15&a)<<4,1]:null:7===s.length&&(a=parseInt(s.substr(1),16))>=0&&a<=16777215?[(16711680&a)>>16,(65280&a)>>8,255&a,1]:null;var u=s.indexOf("("),l=s.indexOf(")");if(-1!==u&&l+1===s.length){var c=s.substr(0,u),f=s.substr(u+1,l-(u+1)).split(","),p=1;switch(c){case"rgba":if(4!==f.length)return null;p=o(f.pop());case"rgb":return 3!==f.length?null:[n(f[0]),n(f[1]),n(f[2]),p];case"hsla":if(4!==f.length)return null;p=o(f.pop());case"hsl":if(3!==f.length)return null;var h=(parseFloat(f[0])%360+360)%360/360,y=o(f[1]),d=o(f[2]),m=d<=.5?d*(y+1):d+y-d*y,g=2*d-m;return[t(255*i(g,m,h+1/3)),t(255*i(g,m,h)),t(255*i(g,m,h-1/3)),p];default:return null}}return null}}catch(e){}return l_}();function f_(e,t,r){return e*(1-r)+t*r}var p_=Object.freeze({__proto__:null,array:function(e,t,r){return e.map(function(e,n){return f_(e,t[n],r)})},color:function(e,t,r){return new h_(f_(e.r,t.r,r),f_(e.g,t.g,r),f_(e.b,t.b,r),f_(e.a,t.a,r))},number:f_}),h_=function(){function e(t,r,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;PE(this,e),this.r=t,this.g=r,this.b=n,this.a=o}return OE(e,[{key:"toString",value:function(){var e=[this.r,this.g,this.b,this.a],t=e[0],r=e[1],n=e[2],o=e[3];return"rgba(".concat(Math.round(255*t),",").concat(Math.round(255*r),",").concat(Math.round(255*n),",").concat(o,")")}},{key:"toNonPremultipliedRenderColor",value:function(e){var t=this.r,r=this.g,n=this.b,o=this.a;return new d_(e,t,r,n,o)}},{key:"toPremultipliedRenderColor",value:function(e){var t=this.r,r=this.g,n=this.b,o=this.a;return new m_(e,t*o,r*o,n*o,o)}},{key:"clone",value:function(){return new e(this.r,this.g,this.b,this.a)}}],[{key:"parse",value:function(t){if(t){if(t instanceof e)return t;if("string"==typeof t){var r=c_.parseCSSColor(t);if(r)return new e(r[0]/255,r[1]/255,r[2]/255,r[3])}}}}])}(),y_=function(){return OE(function e(t,r,n,o,i){var a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(PE(this,e),this.premultiplied=!1,this.premultiplied=a,t){var s=t.image.height,u=s*s;this.premultiplied?(r=0===i?0:r/i*(s-1),n=0===i?0:n/i*(s-1),o=0===i?0:o/i*(s-1)):(r*=s-1,n*=s-1,o*=s-1);var l=Math.floor(r),c=Math.floor(n),f=Math.floor(o),p=Math.ceil(r),h=Math.ceil(n),y=Math.ceil(o),d=r-l,m=n-c,g=o-f,v=t.image.data,b=4*(l+c*u+f*s),A=4*(l+c*u+y*s),w=4*(l+h*u+f*s),S=4*(l+h*u+y*s),C=4*(p+c*u+f*s),E=4*(p+c*u+y*s),_=4*(p+h*u+f*s),I=4*(p+h*u+y*s);if(b<0||I>=v.length)throw new Error("out of range");this.r=f_(f_(f_(v[b],v[A],g),f_(v[w],v[S],g),m),f_(f_(v[C],v[E],g),f_(v[_],v[I],g),m),d)/255*(this.premultiplied?i:1),this.g=f_(f_(f_(v[b+1],v[A+1],g),f_(v[w+1],v[S+1],g),m),f_(f_(v[C+1],v[E+1],g),f_(v[_+1],v[I+1],g),m),d)/255*(this.premultiplied?i:1),this.b=f_(f_(f_(v[b+2],v[A+2],g),f_(v[w+2],v[S+2],g),m),f_(f_(v[C+2],v[E+2],g),f_(v[_+2],v[I+2],g),m),d)/255*(this.premultiplied?i:1),this.a=i}else this.r=r,this.g=n,this.b=o,this.a=i},[{key:"toArray",value:function(){return[255*this.r,255*this.g,255*this.b,this.a]}},{key:"toHslaArray",value:function(){var e=this.r,t=this.g,r=this.b,n=this.a;if(this.premultiplied){if(0===n)return[0,0,0,0];e/=n,t/=n,r/=n}var o=Math.min(Math.max(e,0),1),i=Math.min(Math.max(t,0),1),a=Math.min(Math.max(r,0),1),s=Math.min(o,i,a),u=Math.max(o,i,a),l=(s+u)/2;if(s===u)return[0,0,100*l,n];var c=u-s,f=l>.5?c/(2-u-s):c/(u+s),p=0;return u===o?p=(i-a)/c+(i<a?6:0):u===i?p=(a-o)/c+2:u===a&&(p=(o-i)/c+4),p*=60,[Math.min(Math.max(p,0),360),Math.min(Math.max(100*f,0),100),Math.min(Math.max(100*l,0),100),n]}},{key:"toArray01",value:function(){return[this.r,this.g,this.b,this.a]}},{key:"toArray01Scaled",value:function(e){return[this.r*e,this.g*e,this.b*e]}},{key:"toArray01Linear",value:function(){var e=this.r,t=this.g,r=this.b,n=this.a;return[Math.pow(e,2.2),Math.pow(t,2.2),Math.pow(r,2.2),n]}}])}(),d_=function(e){function t(e,r,n,o,i){return PE(this,t),kE(this,t,[e,r,n,o,i,!1])}return TE(t,y_),OE(t)}(),m_=function(e){function t(e,r,n,o,i){return PE(this,t),kE(this,t,[e,r,n,o,i,!0])}return TE(t,y_),OE(t)}();h_.black=new h_(0,0,0,1),h_.white=new h_(1,1,1,1),h_.transparent=new h_(0,0,0,0),h_.red=new h_(1,0,0,1),h_.blue=new h_(0,0,1,1);var g_=function(){return OE(function e(t,r,n){PE(this,e),this.sensitivity=t?r?"variant":"case":r?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})},[{key:"compare",value:function(e,t){return this.collator.compare(e,t)}},{key:"resolvedLocale",value:function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}])}(),v_=OE(function e(t,r,n,o,i){PE(this,e),this.text=t.normalize?t.normalize():t,this.image=r,this.scale=n,this.fontStack=o,this.textColor=i}),b_=function(){function e(t){PE(this,e),this.sections=t}return OE(e,[{key:"isEmpty",value:function(){return 0===this.sections.length||!this.sections.some(function(e){return 0!==e.text.length||!!e.image&&e.image.hasPrimary()})}},{key:"toString",value:function(){return 0===this.sections.length?"":this.sections.map(function(e){return e.text}).join("")}},{key:"serialize",value:function(){var e,t=["format"],r=RE(this.sections);try{for(r.s();!(e=r.n()).done;){var n=e.value;if(n.image){var o=n.image.getPrimary().id.toString();t.push(["image",o])}else{t.push(n.text);var i={};n.fontStack&&(i["text-font"]=["literal",n.fontStack.split(",")]),n.scale&&(i["font-scale"]=n.scale),n.textColor&&(i["text-color"]=["rgba"].concat(n.textColor.toNonPremultipliedRenderColor(null).toArray())),t.push(i)}}}catch(e){r.e(e)}finally{r.f()}return t}}],[{key:"fromString",value:function(t){return new e([new v_(t,null,null,null,null)])}},{key:"factory",value:function(t){return t instanceof e?t:e.fromString(t)}}])}(),A_=function(){function e(t){PE(this,e),"string"==typeof t?this.name=t:(this.name=t.name,this.iconsetId=t.iconsetId)}return OE(e,[{key:"toString",value:function(){return e.toString(this)}},{key:"serialize",value:function(){return{name:this.name,iconsetId:this.iconsetId}}}],[{key:"from",value:function(t){return new e(t)}},{key:"toString",value:function(e){return e.iconsetId?"".concat(e.name).concat("").concat(e.iconsetId):e.name}},{key:"parse",value:function(t){var r=CE(t.split(""),2);return new e({name:r[0],iconsetId:r[1]})}},{key:"isEqual",value:function(e,t){return e.name===t.name&&e.iconsetId===t.iconsetId}}])}(),w_=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(PE(this,e),this.id=A_.from(t),this.options=Object.assign({},r),r.transform){var n=r.transform,o=n.a,i=n.b,a=n.c,s=n.d,u=n.e,l=n.f;this.options.transform=new DOMMatrix([o,i,a,s,u,l])}else this.options.transform=new DOMMatrix([1,0,0,1,0,0])}return OE(e,[{key:"toString",value:function(){var e=this.options.transform,t=e.a,r=e.b,n=e.c,o=e.d,i=e.e,a=e.f,s={name:this.id.name,iconsetId:this.id.iconsetId,params:this.options.params,transform:{a:t,b:r,c:n,d:o,e:i,f:a}};return JSON.stringify(s)}},{key:"scaleSelf",value:function(e,t){return this.options.transform.scaleSelf(e,t),this}}],[{key:"parse",value:function(t){var r,n,o,i;try{var a=JSON.parse(t)||{};r=a.name,n=a.iconsetId,o=a.params,i=a.transform}catch(e){return null}if(!r)return null;var s=i||{},u=s.a,l=s.b,c=s.c,f=s.d,p=s.e,h=s.f;return new e({name:r,iconsetId:n},{params:o,transform:new DOMMatrix([u,l,c,f,p,h])})}}])}(),S_=function(){function e(t,r,n,o){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];PE(this,e),this.primaryId=A_.from(t),this.primaryOptions=r,n&&(this.secondaryId=A_.from(n)),this.secondaryOptions=o,this.available=i}return OE(e,[{key:"toString",value:function(){if(this.primaryId&&this.secondaryId){var e=this.primaryId.name,t=this.secondaryId.name;return"[".concat(e,",").concat(t,"]")}return this.primaryId.name}},{key:"hasPrimary",value:function(){return!!this.primaryId}},{key:"getPrimary",value:function(){return new w_(this.primaryId,this.primaryOptions)}},{key:"hasSecondary",value:function(){return!!this.secondaryId}},{key:"getSecondary",value:function(){return this.secondaryId?new w_(this.secondaryId,this.secondaryOptions):null}}],[{key:"from",value:function(t){return"string"==typeof t?e.build({name:t}):t}},{key:"build",value:function(t,r,n,o){return t&&("object"!==FE(t)||"name"in t)?new e(t,n,r,o):null}}])}();function C_(e,t,r,n){return"number"==typeof e&&e>=0&&e<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof r&&r>=0&&r<=255?void 0===n||"number"==typeof n&&n>=0&&n<=1?null:"Invalid rgba value [".concat([e,t,r,n].join(", "),"]: 'a' must be between 0 and 1."):"Invalid rgba value [".concat(("number"==typeof n?[e,t,r,n]:[e,t,r]).join(", "),"]: 'r', 'g', and 'b' must be between 0 and 255.")}function E_(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof h_)return!0;if(e instanceof g_)return!0;if(e instanceof b_)return!0;if(e instanceof S_)return!0;if(Array.isArray(e)){var t,r=RE(e);try{for(r.s();!(t=r.n()).done;){if(!E_(t.value))return!1}}catch(e){r.e(e)}finally{r.f()}return!0}if("object"===FE(e)){for(var n in e)if(!E_(e[n]))return!1;return!0}return!1}function __(e){if(null===e)return HE;if("string"==typeof e)return VE;if("boolean"==typeof e)return KE;if("number"==typeof e)return qE;if(e instanceof h_)return YE;if(e instanceof g_)return XE;if(e instanceof b_)return ZE;if(e instanceof S_)return $E;if(Array.isArray(e)){var t,r,n=e.length,o=RE(e);try{for(o.s();!(r=o.n()).done;){var i=__(r.value);if(t){if(t===i)continue;t=WE;break}t=i}}catch(e){o.e(e)}finally{o.f()}return e_(t||WE,n)}return JE}function I_(e){var t=FE(e);return null===e?"":"string"===t||"number"===t||"boolean"===t?String(e):e instanceof b_||e instanceof S_||e instanceof h_?e.toString():JSON.stringify(e)}var O_=function(){function e(t,r){PE(this,e),this.type=t,this.value=r}return OE(e,[{key:"evaluate",value:function(){return this.value}},{key:"eachChild",value:function(){}},{key:"outputDefined",value:function(){return!0}},{key:"serialize",value:function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof h_?["rgba"].concat(this.value.toNonPremultipliedRenderColor(null).toArray()):this.value instanceof b_?this.value.serialize():this.value}}],[{key:"parse",value:function(t,r){if(2!==t.length)return r.error("'literal' expression requires exactly one argument, but found ".concat(t.length-1," instead."));if(!E_(t[1]))return r.error("invalid value");var n=t[1],o=__(n),i=r.expectedType;return"array"!==o.kind||0!==o.N||!i||"array"!==i.kind||"number"==typeof i.N&&0!==i.N||(o=i),new e(o,n)}}])}(),x_=function(){return OE(function e(t){PE(this,e),this.name="ExpressionEvaluationError",this.message=t},[{key:"toJSON",value:function(){return this.message}}])}(),P_={string:VE,number:qE,boolean:KE,object:JE},k_=function(){function e(t,r){PE(this,e),this.type=t,this.args=r}return OE(e,[{key:"evaluate",value:function(e){for(var t=0;t<this.args.length;t++){var r=this.args[t].evaluate(e);if(!n_(this.type,__(r)))return r;if(t===this.args.length-1)throw new x_("The expression ".concat(JSON.stringify(this.args[t].serialize())," evaluated to ").concat(t_(__(r))," but was expected to be of type ").concat(t_(this.type),"."))}return null}},{key:"eachChild",value:function(e){this.args.forEach(e)}},{key:"outputDefined",value:function(){return this.args.every(function(e){return e.outputDefined()})}},{key:"serialize",value:function(){var e=this.type,t=[e.kind];if("array"===e.kind){var r=e.itemType;if("string"===r.kind||"number"===r.kind||"boolean"===r.kind){t.push(r.kind);var n=e.N;("number"==typeof n||this.args.length>1)&&t.push(n)}}return t.concat(this.args.map(function(e){return e.serialize()}))}}],[{key:"parse",value:function(t,r){if(t.length<2)return r.error("Expected at least one argument.");var n,o=1,i=t[0];if("array"===i){var a,s;if(t.length>2){var u=t[1];if("string"!=typeof u||!(u in P_)||"object"===u)return r.error('The item type argument of "array" must be one of string, number, boolean',1);a=P_[u],o++}else a=WE;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return r.error('The length argument to "array" must be a positive integer literal',2);s=t[2],o++}n=e_(a,s)}else n=P_[i];for(var l=[];o<t.length;o++){var c=r.parse(t[o],o,WE);if(!c)return null;l.push(c)}return new e(n,l)}}])}(),T_=function(){function e(t){PE(this,e),this.type=ZE,this.sections=t}return OE(e,[{key:"evaluate",value:function(e){return new b_(this.sections.map(function(t){var r=t.content.evaluate(e);return a_(__(r),$E)?new v_("",r,null,null,null):new v_(I_(r),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null)}))}},{key:"eachChild",value:function(e){var t,r=RE(this.sections);try{for(r.s();!(t=r.n()).done;){var n=t.value;e(n.content),n.scale&&e(n.scale),n.font&&e(n.font),n.textColor&&e(n.textColor)}}catch(e){r.e(e)}finally{r.f()}}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){var e,t=["format"],r=RE(this.sections);try{for(r.s();!(e=r.n()).done;){var n=e.value;t.push(n.content.serialize());var o={};n.scale&&(o["font-scale"]=n.scale.serialize()),n.font&&(o["text-font"]=n.font.serialize()),n.textColor&&(o["text-color"]=n.textColor.serialize()),t.push(o)}}catch(e){r.e(e)}finally{r.f()}return t}}],[{key:"parse",value:function(t,r){if(t.length<2)return r.error("Expected at least one argument.");var n=t[1];if(!Array.isArray(n)&&"object"===FE(n))return r.error("First argument must be an image or text section.");for(var o=[],i=!1,a=1;a<=t.length-1;++a){var s=t[a];if(i&&"object"===FE(s)&&!Array.isArray(s)){i=!1;var u=null;if(s["font-scale"]&&!(u=r.parseObjectValue(s["font-scale"],a,"font-scale",qE)))return null;var l=null;if(s["text-font"]&&!(l=r.parseObjectValue(s["text-font"],a,"text-font",e_(VE))))return null;var c=null;if(s["text-color"]&&!(c=r.parseObjectValue(s["text-color"],a,"text-color",YE)))return null;var f=o[o.length-1];f.scale=u,f.font=l,f.textColor=c}else{var p=r.parse(t[a],a,WE);if(!p)return null;var h=p.type.kind;if("string"!==h&&"value"!==h&&"null"!==h&&"resolvedImage"!==h)return r.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");i=!0,o.push({content:p,scale:null,font:null,textColor:null})}}return new e(o)}}])}();var j_=function(){function e(t,r,n,o){PE(this,e),this._imageWarnHistory={},this.type=$E,this.namePrimary=t,this.nameSecondary=r,n&&(this.paramsPrimary=n.params,this.iconsetIdPrimary=n.iconset?n.iconset.id:void 0),o&&(this.paramsSecondary=o.params,this.iconsetIdSecondary=o.iconset?o.iconset.id:void 0)}return OE(e,[{key:"evaluateParams",value:function(e,t){var r={};if(t){for(var n in t)if(t[n])try{r[n]=t[n].evaluate(e)}catch(e){continue}if(0!==Object.keys(r).length)return{params:r}}}},{key:"evaluate",value:function(e){var t={name:this.namePrimary.evaluate(e),iconsetId:this.iconsetIdPrimary},r=this.nameSecondary?{name:this.nameSecondary.evaluate(e),iconsetId:this.iconsetIdSecondary}:void 0,n=S_.build(t,r,this.paramsPrimary?this.evaluateParams(e,this.paramsPrimary):void 0,this.paramsSecondary?this.evaluateParams(e,this.paramsSecondary):void 0);if(n&&e.availableImages){var o=n.getPrimary().id;if(n.available=e.availableImages.some(function(e){return A_.isEqual(e,o)}),n.available){var i=n.getSecondary()?n.getSecondary().id:null;i&&(n.available=e.availableImages.some(function(e){return A_.isEqual(e,i)}))}}return n}},{key:"eachChild",value:function(e){if(e(this.namePrimary),this.paramsPrimary)for(var t in this.paramsPrimary)this.paramsPrimary[t]&&e(this.paramsPrimary[t]);if(this.nameSecondary&&(e(this.nameSecondary),this.paramsSecondary))for(var r in this.paramsSecondary)this.paramsSecondary[r]&&e(this.paramsSecondary[r])}},{key:"outputDefined",value:function(){return!1}},{key:"serializeOptions",value:function(e,t){var r={};if(t&&(r.iconset={id:t}),e)for(var n in r.params={},e)e[n]&&(r.params[n]=e[n].serialize());return Object.keys(r).length>0?r:void 0}},{key:"serialize",value:function(){var e=["image",this.namePrimary.serialize()];if(this.paramsPrimary||this.iconsetIdPrimary){var t=this.serializeOptions(this.paramsPrimary,this.iconsetIdPrimary);t&&e.push(t)}if(this.nameSecondary&&(e.push(this.nameSecondary.serialize()),this.paramsSecondary||this.iconsetIdSecondary)){var r=this.serializeOptions(this.paramsSecondary,this.iconsetIdSecondary);r&&e.push(r)}return e}}],[{key:"parse",value:function(t,r){if(t.length<2)return r.error("Expected two or more arguments.");var n=1,o=[];function i(){if(n<t.length){var e=r.parse(t[n],n++,VE);return e?(o.push({image:e,options:{}}),!0):(r.error(o.length?"Secondary image variant is not a string.":"No image name provided."),!1)}return!0}function a(){if(n<t.length){var e=t[n];if(!function(e){return null!==e&&"object"===FE(e)&&!Array.isArray(e)}(e))return!0;var i=e.params,a=e.iconset,s=r.concat(n);if(!i&&!a)return n++,!0;if(i){if("object"!==FE(i)||i.constructor!==Object)return s.error('Image options "params" should be an object'),!1;var u={},l=s.concat(void 0,"params");for(var c in i){if(!c)return l.error("Image parameter name should be non-empty"),!1;var f=l.concat(void 0,c).parse(i[c],void 0,YE,void 0,{typeAnnotation:"coerce"});if(!f)return!1;u[c]=f}o[o.length-1].options.params=u}if(a){if("object"!==FE(a)||a.constructor!==Object)return s.error('Image options "iconset" should be an object'),!1;if(!a.id)return s.error('Image options "iconset" should have an "id" property'),!1;o[o.length-1].options.iconset=a}return n++,!0}return!0}for(var s=0;s<2;s++)if(!i()||!a())return;return new e(o[0].image,o[1]?o[1].image:void 0,o[0].options,o[1]?o[1].options:void 0)}}])}();function M_(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":null===e?"null":FE(e)}var B_={"to-boolean":KE,"to-color":YE,"to-number":qE,"to-string":VE},N_=function(){function e(t,r){PE(this,e),this.type=t,this.args=r}return OE(e,[{key:"evaluate",value:function(e){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(e));if("color"===this.type.kind){var t,r,n,o=RE(this.args);try{for(o.s();!(n=o.n()).done;){if(r=null,(t=n.value.evaluate(e))instanceof h_)return t;if("string"==typeof t){var i=e.parseColor(t);if(i)return i}else if(Array.isArray(t)&&!(r=t.length<3||t.length>4?"Invalid rbga value ".concat(JSON.stringify(t),": expected an array containing either three or four numeric values."):C_(t[0],t[1],t[2],t[3])))return new h_(t[0]/255,t[1]/255,t[2]/255,t[3])}}catch(e){o.e(e)}finally{o.f()}throw new x_(r||"Could not parse color from value '".concat("string"==typeof t?t:String(JSON.stringify(t)),"'"))}if("number"===this.type.kind){var a,s=null,u=RE(this.args);try{for(u.s();!(a=u.n()).done;){if(null===(s=a.value.evaluate(e)))return 0;var l=Number(s);if(!isNaN(l))return l}}catch(e){u.e(e)}finally{u.f()}throw new x_("Could not convert ".concat(JSON.stringify(s)," to number."))}return"formatted"===this.type.kind?b_.fromString(I_(this.args[0].evaluate(e))):"resolvedImage"===this.type.kind?S_.build(I_(this.args[0].evaluate(e))):"array"===this.type.kind?this.args.map(function(t){return t.evaluate(e)}):I_(this.args[0].evaluate(e))}},{key:"eachChild",value:function(e){this.args.forEach(e)}},{key:"outputDefined",value:function(){return this.args.every(function(e){return e.outputDefined()})}},{key:"serialize",value:function(){if("formatted"===this.type.kind)return new T_([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new j_(this.args[0]).serialize();var e="array"===this.type.kind?[]:["to-".concat(this.type.kind)];return this.eachChild(function(t){e.push(t.serialize())}),e}}],[{key:"parse",value:function(t,r){if(t.length<2)return r.error("Expected at least one argument.");var n=t[0],o=[],i=HE;if("to-array"===n){if(!Array.isArray(t[1]))return null;var a=t[1].length;if(r.expectedType){if("array"!==r.expectedType.kind)return r.error("Expected ".concat(r.expectedType.kind," but found array."));i=e_(r.expectedType.itemType,a)}else{if(!(a>0&&E_(t[1][0])))return null;i=e_(__(t[1][0]),a)}for(var s=0;s<a;s++){var u=t[1][s],l=void 0;if("array"===M_(u))l=r.parse(u,void 0,i.itemType);else{var c=M_(u);if(c!==i.itemType.kind)return r.error("Expected ".concat(i.itemType.kind," but found ").concat(c,"."));l=r.registry.literal.parse(["literal",void 0===u?null:u],r)}if(!l)return null;o.push(l)}}else{if(("to-boolean"===n||"to-string"===n)&&2!==t.length)return r.error("Expected one argument.");i=B_[n];for(var f=1;f<t.length;f++){var p=r.parse(t[f],f,WE);if(!p)return null;o.push(p)}}return new e(i,o)}}])}(),R_=["Unknown","Point","LineString","Polygon"],L_=function(){return OE(function e(t,r){PE(this,e),this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null,this.scope=t,this.options=r},[{key:"id",value:function(){return this.feature&&void 0!==this.feature.id?this.feature.id:null}},{key:"geometryType",value:function(){return this.feature?"number"==typeof this.feature.type?R_[this.feature.type]:this.feature.type:null}},{key:"geometry",value:function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}},{key:"canonicalID",value:function(){return this.canonical}},{key:"properties",value:function(){return this.feature&&this.feature.properties||{}}},{key:"measureLight",value:function(e){return this.globals.brightness||0}},{key:"distanceFromCenter",value:function(){if(this.featureTileCoord&&this.featureDistanceData){var e=this.featureDistanceData.center,t=this.featureDistanceData.scale,r=this.featureTileCoord,n=r.x,o=r.y,i=n*t-e[0],a=o*t-e[1];return this.featureDistanceData.bearing[0]*i+this.featureDistanceData.bearing[1]*a}return 0}},{key:"parseColor",value:function(e){var t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=h_.parse(e)),t}},{key:"getConfig",value:function(e){return this.options?this.options.get(e):null}}])}(),D_=function(){function e(t,r,n,o,i){PE(this,e),this.name=t,this.type=r,this._evaluate=n,this.args=o,this._overloadIndex=i}return OE(e,[{key:"evaluate",value:function(t){if(!this._evaluate){var r=e.definitions[this.name];this._evaluate=Array.isArray(r)?r[2]:r.overloads[this._overloadIndex][1]}return this._evaluate(t,this.args)}},{key:"eachChild",value:function(e){this.args.forEach(e)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return[this.name].concat(this.args.map(function(e){return e.serialize()}))}}],[{key:"parse",value:function(t,r){var n=t[0],o=e.definitions[n];if(!o)return r.error('Unknown expression "'.concat(n,'". If you wanted a literal array, use ["literal", [...]].'),0);var i,a=Array.isArray(o)?o[0]:o.type,s=Array.isArray(o)?[[o[1],o[2]]]:o.overloads,u=[],l=null,c=-1,f=RE(s);try{for(f.s();!(i=f.n()).done;){var p=CE(i.value,2),h=p[0],y=p[1];if(!Array.isArray(h)||h.length===t.length-1){u.push(h),c++,l=new oO(r.registry,r.path,null,r.scope,void 0,r._scope,r.options);for(var d=[],m=!1,g=1;g<t.length;g++){var v=t[g],b=Array.isArray(h)?h[g-1]:h.type,A=l.parse(v,1+d.length,b);if(!A){m=!0;break}d.push(A)}if(!m)if(Array.isArray(h)&&h.length!==d.length)l.error("Expected ".concat(h.length," arguments, but found ").concat(d.length," instead."));else{for(var w=0;w<d.length;w++){var S=Array.isArray(h)?h[w]:h.type,C=d[w];l.concat(w+1).checkSubtype(S,C.type)}if(0===l.errors.length)return new e(n,a,y,d,c)}}}}catch(e){f.e(e)}finally{f.f()}if(1===u.length){var E;(E=r.errors).push.apply(E,wE(l.errors))}else{for(var _=(u.length?u:s.map(function(e){return CE(e,1)[0]})).map(F_).join(" | "),I=[],O=1;O<t.length;O++){var x=r.parse(t[O],1+I.length);if(!x)return null;I.push(t_(x.type))}r.error("Expected arguments of type ".concat(_,", but found (").concat(I.join(", "),") instead."))}return null}},{key:"register",value:function(t,r){for(var n in e.definitions=r,r)t[n]=e}}])}();function F_(e){return Array.isArray(e)?"(".concat(e.map(t_).join(", "),")"):"(".concat(t_(e.type),"...)")}var Q_,G_,U_=function(){function e(t,r,n){PE(this,e),this.type=XE,this.locale=n,this.caseSensitive=t,this.diacriticSensitive=r}return OE(e,[{key:"evaluate",value:function(e){return new g_(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}},{key:"eachChild",value:function(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){var e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}],[{key:"parse",value:function(t,r){if(2!==t.length)return r.error("Expected one argument.");var n=t[1];if("object"!==FE(n)||Array.isArray(n))return r.error("Collator options argument must be an object.");var o=void 0===n["case-sensitive"]?r.parse(!1,1,KE):r.parseObjectValue(n["case-sensitive"],1,"case-sensitive",KE);if(!o)return null;var i=void 0===n["diacritic-sensitive"]?r.parse(!1,1,KE):r.parseObjectValue(n["diacritic-sensitive"],1,"diacritic-sensitive",KE);if(!i)return null;var a=null;return n.locale&&!(a=r.parseObjectValue(n.locale,1,"locale",VE))?null:new e(o,i,a)}}])}();function z_(e){for(var t,r,n=0,o=0,i=e.length,a=i-1;o<i;a=o++)t=e[o],n+=((r=e[a]).x-t.x)*(t.y+r.y);return n}function H_(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function q_(e,t){return!(e[0]<=t[0])&&(!(e[2]>=t[2])&&(!(e[1]<=t[1])&&!(e[3]>=t[3])))}function V_(e,t,r){return t[1]>e[1]!=r[1]>e[1]&&e[0]<(r[0]-t[0])*(e[1]-t[1])/(r[1]-t[1])+t[0]}function K_(e,t){for(var r,n,o,i,a,s,u,l=arguments.length>2&&void 0!==arguments[2]&&arguments[2],c=!1,f=0,p=t.length;f<p;f++)for(var h=t[f],y=0,d=h.length,m=d-1;y<d;m=y++){var g=h[m],v=h[y];if(n=g,o=v,void 0,void 0,void 0,void 0,i=(r=e)[0]-n[0],a=r[1]-n[1],s=r[0]-o[0],u=r[1]-o[1],i*u-s*a==0&&i*s<=0&&a*u<=0)return l;V_(e,g,v)&&(c=!c)}return c}function Y_(e,t,r,n){var o=e[0]-r[0],i=e[1]-r[1],a=t[0]-r[0],s=t[1]-r[1],u=n[0]-r[0],l=n[1]-r[1],c=o*l-u*i,f=a*l-u*s;return c>0&&f<0||c<0&&f>0}function J_(e,t,r,n){var o,i,a=[t[0]-e[0],t[1]-e[1]],s=[n[0]-r[0],n[1]-r[1]];return 0!=(o=s)[0]*(i=a)[1]-o[1]*i[0]&&!(!Y_(e,t,r,n)||!Y_(r,n,e,t))}!function(){if(G_)return Q_;function e(e,t){this.x=e,this.y=t}G_=1,Q_=e,e.prototype={clone:function(){return new e(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,r=e.y-this.y;return t*t+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,r=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=r,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),r=Math.sin(e),n=t*this.x-r*this.y,o=r*this.x+t*this.y;return this.x=n,this.y=o,this},_rotateAround:function(e,t){var r=Math.cos(e),n=Math.sin(e),o=t.x+r*(this.x-t.x)-n*(this.y-t.y),i=t.y+n*(this.x-t.x)+r*(this.y-t.y);return this.x=o,this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},e.convert=function(t){return t instanceof e?t:Array.isArray(t)?new e(t[0],t[1]):t}}();var W_=8192;function X_(e,t){var r,n=(180+e[0])/360,o=(r=e[1],(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r*Math.PI/360)))/360),i=Math.pow(2,t.z);return[Math.round(n*i*W_),Math.round(o*i*W_)]}function Z_(e,t){for(var r=0;r<t.length;r++)if(K_(e,t[r]))return!0;return!1}function $_(e,t,r){var n,o=RE(r);try{for(o.s();!(n=o.n()).done;)for(var i=n.value,a=0,s=i.length,u=s-1;a<s;u=a++){if(J_(e,t,i[u],i[a]))return!0}}catch(e){o.e(e)}finally{o.f()}return!1}function eI(e,t){for(var r=0;r<e.length;++r)if(!K_(e[r],t))return!1;for(var n=0;n<e.length-1;++n)if($_(e[n],e[n+1],t))return!1;return!0}function tI(e,t){for(var r=0;r<t.length;r++)if(eI(e,t[r]))return!0;return!1}function rI(e,t,r){for(var n=[],o=0;o<e.length;o++){for(var i=[],a=0;a<e[o].length;a++){var s=X_(e[o][a],r);H_(t,s),i.push(s)}n.push(i)}return n}function nI(e,t,r){for(var n=[],o=0;o<e.length;o++){var i=rI(e[o],t,r);n.push(i)}return n}function oI(e,t,r,n){if(e[0]<r[0]||e[0]>r[2]){var o=.5*n,i=e[0]-r[0]>o?-n:r[0]-e[0]>o?n:0;0===i&&(i=e[0]-r[2]>o?-n:r[2]-e[0]>o?n:0),e[0]+=i}H_(t,e)}function iI(e,t,r,n){var o=Math.pow(2,n.z)*W_,i=[n.x*W_,n.y*W_],a=[];if(!e)return a;var s,u=RE(e);try{for(u.s();!(s=u.n()).done;){var l,c=RE(s.value);try{for(c.s();!(l=c.n()).done;){var f=l.value,p=[f.x+i[0],f.y+i[1]];oI(p,t,r,o),a.push(p)}}catch(e){c.e(e)}finally{c.f()}}}catch(e){u.e(e)}finally{u.f()}return a}function aI(e,t,r,n){var o=Math.pow(2,n.z)*W_,i=[n.x*W_,n.y*W_],a=[];if(!e)return a;var s,u,l=RE(e);try{for(l.s();!(s=l.n()).done;){var c,f=[],p=RE(s.value);try{for(p.s();!(c=p.n()).done;){var h=c.value,y=[h.x+i[0],h.y+i[1]];H_(t,y),f.push(y)}}catch(e){p.e(e)}finally{p.f()}a.push(f)}}catch(e){l.e(e)}finally{l.f()}if(t[2]-t[0]<=o/2){(u=t)[0]=u[1]=1/0,u[2]=u[3]=-1/0;var d,m=RE(a);try{for(m.s();!(d=m.n()).done;){var g,v=RE(d.value);try{for(v.s();!(g=v.n()).done;){oI(g.value,t,r,o)}}catch(e){v.e(e)}finally{v.f()}}}catch(e){m.e(e)}finally{m.f()}}return a}var sI=function(){function e(t,r){PE(this,e),this.type=KE,this.geojson=t,this.geometries=r}return OE(e,[{key:"evaluate",value:function(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(e,t){var r=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],o=e.canonicalID();if(!o)return!1;if("Polygon"===t.type){var i=rI(t.coordinates,n,o),a=iI(e.geometry(),r,n,o);if(!q_(r,n))return!1;var s,u=RE(a);try{for(u.s();!(s=u.n()).done;)if(!K_(s.value,i))return!1}catch(e){u.e(e)}finally{u.f()}}if("MultiPolygon"===t.type){var l=nI(t.coordinates,n,o),c=iI(e.geometry(),r,n,o);if(!q_(r,n))return!1;var f,p=RE(c);try{for(p.s();!(f=p.n()).done;)if(!Z_(f.value,l))return!1}catch(e){p.e(e)}finally{p.f()}}return!0}(e,this.geometries);if("LineString"===e.geometryType())return function(e,t){var r=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],o=e.canonicalID();if(!o)return!1;if("Polygon"===t.type){var i=rI(t.coordinates,n,o),a=aI(e.geometry(),r,n,o);if(!q_(r,n))return!1;var s,u=RE(a);try{for(u.s();!(s=u.n()).done;)if(!eI(s.value,i))return!1}catch(e){u.e(e)}finally{u.f()}}if("MultiPolygon"===t.type){var l=nI(t.coordinates,n,o),c=aI(e.geometry(),r,n,o);if(!q_(r,n))return!1;var f,p=RE(c);try{for(p.s();!(f=p.n()).done;)if(!tI(f.value,l))return!1}catch(e){p.e(e)}finally{p.f()}}return!0}(e,this.geometries)}return!1}},{key:"eachChild",value:function(){}},{key:"outputDefined",value:function(){return!0}},{key:"serialize",value:function(){return["within",this.geojson]}}],[{key:"parse",value:function(t,r){if(2!==t.length)return r.error("'within' expression requires exactly one argument, but found ".concat(t.length-1," instead."));if(E_(t[1])){var n=t[1];if("FeatureCollection"===n.type)for(var o=0;o<n.features.length;++o){var i=n.features[o].geometry.type;if("Polygon"===i||"MultiPolygon"===i)return new e(n,n.features[o].geometry)}else if("Feature"===n.type){var a=n.geometry.type;if("Polygon"===a||"MultiPolygon"===a)return new e(n,n.geometry)}else if("Polygon"===n.type||"MultiPolygon"===n.type)return new e(n,n)}return r.error("'within' expression requires valid geojson object that contains polygon geometry type.")}}])}(),uI={kilometers:1,miles:1e3/1609.344,nauticalmiles:1e3/1852,meters:1e3,metres:1e3,yards:1e3/.9144,feet:1e3/.3048,inches:1e3/.0254},lI=6378.137,cI=1/298.257223563,fI=cI*(2-cI),pI=Math.PI/180,hI=function(){function e(t,r){if(PE(this,e),void 0===t)throw new Error("No latitude given.");if(r&&!uI[r])throw new Error("Unknown unit ".concat(r,". Use one of: ").concat(Object.keys(uI).join(", ")));var n=pI*lI*(r?uI[r]:1),o=Math.cos(t*pI),i=1/(1-fI*(1-o*o)),a=Math.sqrt(i);this.kx=n*a*o,this.ky=n*a*i*(1-fI)}return OE(e,[{key:"distance",value:function(e,t){var r=mI(e[0]-t[0])*this.kx,n=(e[1]-t[1])*this.ky;return Math.sqrt(r*r+n*n)}},{key:"bearing",value:function(e,t){var r=mI(t[0]-e[0])*this.kx,n=(t[1]-e[1])*this.ky;return Math.atan2(r,n)/pI}},{key:"destination",value:function(e,t,r){var n=r*pI;return this.offset(e,Math.sin(n)*t,Math.cos(n)*t)}},{key:"offset",value:function(e,t,r){return[e[0]+t/this.kx,e[1]+r/this.ky]}},{key:"lineDistance",value:function(e){for(var t=0,r=0;r<e.length-1;r++)t+=this.distance(e[r],e[r+1]);return t}},{key:"area",value:function(e){for(var t=0,r=0;r<e.length;r++)for(var n=e[r],o=0,i=n.length,a=i-1;o<i;a=o++)t+=mI(n[o][0]-n[a][0])*(n[o][1]+n[a][1])*(r?-1:1);return Math.abs(t)/2*this.kx*this.ky}},{key:"along",value:function(e,t){var r=0;if(t<=0)return e[0];for(var n=0;n<e.length-1;n++){var o=e[n],i=e[n+1],a=this.distance(o,i);if((r+=a)>t)return dI(o,i,(t-(r-a))/a)}return e[e.length-1]}},{key:"pointToSegmentDistance",value:function(e,t,r){var n=CE(t,2),o=n[0],i=n[1],a=mI(r[0]-o)*this.kx,s=(r[1]-i)*this.ky;if(0!==a||0!==s){var u=(mI(e[0]-o)*this.kx*a+(e[1]-i)*this.ky*s)/(a*a+s*s);u>1?(o=r[0],i=r[1]):u>0&&(o+=a/this.kx*u,i+=s/this.ky*u)}return a=mI(e[0]-o)*this.kx,s=(e[1]-i)*this.ky,Math.sqrt(a*a+s*s)}},{key:"pointOnLine",value:function(e,t){for(var r=1/0,n=e[0][0],o=e[0][1],i=0,a=0,s=0;s<e.length-1;s++){var u=e[s][0],l=e[s][1],c=mI(e[s+1][0]-u)*this.kx,f=(e[s+1][1]-l)*this.ky,p=0;0===c&&0===f||((p=(mI(t[0]-u)*this.kx*c+(t[1]-l)*this.ky*f)/(c*c+f*f))>1?(u=e[s+1][0],l=e[s+1][1]):p>0&&(u+=c/this.kx*p,l+=f/this.ky*p));var h=(c=mI(t[0]-u)*this.kx)*c+(f=(t[1]-l)*this.ky)*f;h<r&&(r=h,n=u,o=l,i=s,a=p)}return{point:[n,o],index:i,t:Math.max(0,Math.min(1,a))}}},{key:"lineSlice",value:function(e,t,r){var n=this.pointOnLine(r,e),o=this.pointOnLine(r,t);if(n.index>o.index||n.index===o.index&&n.t>o.t){var i=n;n=o,o=i}var a=[n.point],s=n.index+1,u=o.index;!yI(r[s],a[0])&&s<=u&&a.push(r[s]);for(var l=s+1;l<=u;l++)a.push(r[l]);return yI(r[u],o.point)||a.push(o.point),a}},{key:"lineSliceAlong",value:function(e,t,r){for(var n=0,o=[],i=0;i<r.length-1;i++){var a=r[i],s=r[i+1],u=this.distance(a,s);if((n+=u)>e&&0===o.length&&o.push(dI(a,s,(e-(n-u))/u)),n>=t)return o.push(dI(a,s,(t-(n-u))/u)),o;n>e&&o.push(s)}return o}},{key:"bufferPoint",value:function(e,t){var r=t/this.ky,n=t/this.kx;return[e[0]-n,e[1]-r,e[0]+n,e[1]+r]}},{key:"bufferBBox",value:function(e,t){var r=t/this.ky,n=t/this.kx;return[e[0]-n,e[1]-r,e[2]+n,e[3]+r]}},{key:"insideBBox",value:function(e,t){return mI(e[0]-t[0])>=0&&mI(e[0]-t[2])<=0&&e[1]>=t[1]&&e[1]<=t[3]}}],[{key:"fromTile",value:function(t,r,n){var o=Math.PI*(1-2*(t+.5)/Math.pow(2,r));return new e(Math.atan(.5*(Math.exp(o)-Math.exp(-o)))/pI,n)}},{key:"units",get:function(){return uI}}])}();function yI(e,t){return e[0]===t[0]&&e[1]===t[1]}function dI(e,t,r){var n=mI(t[0]-e[0]),o=t[1]-e[1];return[e[0]+n*r,e[1]+o*r]}function mI(e){for(;e<-180;)e+=360;for(;e>180;)e-=360;return e}var gI=function(){return OE(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e,t){return e<t?-1:e>t?1:0};if(PE(this,e),this.data=t,this.length=this.data.length,this.compare=r,this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)},[{key:"push",value:function(e){this.data.push(e),this._up(this.length++)}},{key:"pop",value:function(){if(0!==this.length){var e=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),e}}},{key:"peek",value:function(){return this.data[0]}},{key:"_up",value:function(e){for(var t=this.data,r=this.compare,n=t[e];e>0;){var o=e-1>>1,i=t[o];if(r(n,i)>=0)break;t[e]=i,e=o}t[e]=n}},{key:"_down",value:function(e){for(var t=this.data,r=this.compare,n=this.length>>1,o=t[e];e<n;){var i=1+(e<<1),a=i+1;if(a<this.length&&r(t[a],t[i])<0&&(i=a),r(t[i],o)>=0)break;t[e]=t[i],e=i}t[e]=o}}])}(),vI=8192;function bI(e,t){return t.dist-e.dist}var AI=100,wI=50;function SI(e){var t=[1/0,1/0,-1/0,-1/0];if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function CI(e){return e[1]-e[0]+1}function EI(e,t){var r=e[1]>=e[0]&&e[1]<t;return r||console.warn("Distance Expression: Index is out of range"),r}function _I(e,t){if(e[0]>e[1])return[null,null];var r=CI(e);if(t){if(2===r)return[e,null];var n=Math.floor(r/2);return[[e[0],e[0]+n],[e[0]+n,e[1]]]}if(1===r)return[e,null];var o=Math.floor(r/2)-1;return[[e[0],e[0]+o],[e[0]+o+1,e[1]]]}function II(e,t){var r=[1/0,1/0,-1/0,-1/0];if(!EI(t,e.length))return r;for(var n=t[0];n<=t[1];++n)H_(r,e[n]);return r}function OI(e){for(var t=[1/0,1/0,-1/0,-1/0],r=0;r<e.length;++r)for(var n=0;n<e[r].length;++n)H_(t,e[r][n]);return t}function xI(e,t,r){if(SI(e)||SI(t))return NaN;var n=0,o=0;return e[2]<t[0]&&(n=t[0]-e[2]),e[0]>t[2]&&(n=e[0]-t[2]),e[1]>t[3]&&(o=e[1]-t[3]),e[3]<t[1]&&(o=t[1]-e[3]),r.distance([0,0],[n,o])}function PI(e,t){var r=Math.pow(2,t.z),n=(e.x/vI+t.x)/r,o=(e.y/vI+t.y)/r;return[function(e){return 360*e-180}(n),function(e){var t=180-360*e;return 360/Math.PI*Math.atan(Math.exp(t*Math.PI/180))-90}(o)]}function kI(e,t){for(var r=[],n=0;n<e.length;++n)r.push(PI(e[n],t));return r}function TI(e,t,r){var n=r.pointOnLine(t,e).point;return r.distance(e,n)}function jI(e,t,r,n,o){for(var i=r.slice(n[0],n[1]+1),a=1/0,s=t[0];s<=t[1];++s)if(0===(a=Math.min(a,TI(e[s],i,o))))return 0;return a}function MI(e,t,r,n,o){var i=Math.min(o.pointToSegmentDistance(e,r,n),o.pointToSegmentDistance(t,r,n)),a=Math.min(o.pointToSegmentDistance(r,e,t),o.pointToSegmentDistance(n,e,t));return Math.min(i,a)}function BI(e,t,r,n,o){if(!EI(t,e.length)||!EI(n,r.length))return NaN;for(var i=1/0,a=t[0];a<t[1];++a)for(var s=n[0];s<n[1];++s){if(J_(e[a],e[a+1],r[s],r[s+1]))return 0;i=Math.min(i,MI(e[a],e[a+1],r[s],r[s+1],o))}return i}function NI(e,t,r,n,o){if(!EI(t,e.length)||!EI(n,r.length))return NaN;for(var i=1/0,a=t[0];a<=t[1];++a)for(var s=n[0];s<=n[1];++s)if(0===(i=Math.min(i,o.distance(e[a],r[s]))))return i;return i}function RI(e,t,r){if(K_(e,t,!0))return 0;var n,o=1/0,i=RE(t);try{for(i.s();!(n=i.n()).done;){var a=n.value,s=a.length;if(s<2)return console.warn("Distance Expression: Invalid polygon!"),NaN;if(a[0]!==a[s-1]&&0===(o=Math.min(o,r.pointToSegmentDistance(e,a[s-1],a[0]))))return o;if(0===(o=Math.min(o,TI(e,a,r))))return o}}catch(e){i.e(e)}finally{i.f()}return o}function LI(e,t,r,n){if(!EI(t,e.length))return NaN;for(var o=t[0];o<=t[1];++o)if(K_(e[o],r,!0))return 0;for(var i=1/0,a=t[0];a<t[1];++a){var s,u=RE(r);try{for(u.s();!(s=u.n()).done;)for(var l=s.value,c=0,f=l.length,p=f-1;c<f;p=c++){if(J_(e[a],e[a+1],l[p],l[c]))return 0;i=Math.min(i,MI(e[a],e[a+1],l[p],l[c],n))}}catch(e){u.e(e)}finally{u.f()}}return i}function DI(e,t){var r,n=RE(e);try{for(n.s();!(r=n.n()).done;)for(var o=r.value,i=0;i<=o.length-1;++i)if(K_(o[i],t,!0))return!0}catch(e){n.e(e)}finally{n.f()}return!1}function FI(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0,o=OI(e),i=OI(t);if(n!==1/0&&xI(o,i,r)>=n)return n;if(q_(o,i)){if(DI(e,t))return 0}else if(DI(t,e))return 0;var a,s=n,u=RE(e);try{for(u.s();!(a=u.n()).done;)for(var l=a.value,c=0,f=l.length,p=f-1;c<f;p=c++){var h,y=RE(t);try{for(y.s();!(h=y.n()).done;)for(var d=h.value,m=0,g=d.length,v=g-1;m<g;v=m++){if(J_(l[p],l[c],d[v],d[m]))return 0;s=Math.min(s,MI(l[p],l[c],d[v],d[m],r))}}catch(e){y.e(e)}finally{y.f()}}}catch(e){u.e(e)}finally{u.f()}return s}function QI(e,t,r,n,o,i,a){if(null!==i&&null!==a){var s=xI(II(n,i),II(o,a),r);s<t&&e.push({dist:s,range1:i,range2:a})}}function GI(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1/0,i=Math.min(n.distance(e[0],r[0][0]),o);if(0===i)return i;for(var a={dist:0,range1:[0,e.length-1],range2:[0,0]},s=new gI([a],bI),u=t?wI:AI,l=OI(r);s.length;){var c=s.pop();if(!(c.dist>=i)){var f=c.range1;if(CI(f)<=u){if(!EI(f,e.length))return NaN;if(t){var p=LI(e,f,r,n);if(0===(i=Math.min(i,p)))return i}else for(var h=f[0];h<=f[1];++h){var y=RI(e[h],r,n);if(0===(i=Math.min(i,y)))return i}}else{var d=_I(f,t);if(null!==d[0]){var m=xI(II(e,d[0]),l,n);m<i&&s.push({dist:m,range1:d[0],range2:[0,0]})}if(null!==d[1]){var g=xI(II(e,d[1]),l,n);g<i&&s.push({dist:g,range1:d[1],range2:[0,0]})}}}}return i}function UI(e,t,r,n,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1/0,a=Math.min(i,o.distance(e[0],r[0]));if(0===a)return a;for(var s={dist:0,range1:[0,e.length-1],range2:[0,r.length-1]},u=new gI([s],bI),l=t?wI:AI,c=n?wI:AI;u.length;){var f=u.pop();if(!(f.dist>=a)){var p=f.range1,h=f.range2;if(CI(p)<=l&&CI(h)<=c){if(!EI(p,e.length)||!EI(h,r.length))return NaN;if(t&&n?a=Math.min(a,BI(e,p,r,h,o)):t||n?t&&!n?a=Math.min(a,jI(r,h,e,p,o)):!t&&n&&(a=Math.min(a,jI(e,p,r,h,o))):a=Math.min(a,NI(e,p,r,h,o)),0===a)return a}else{var y=_I(p,t),d=_I(h,n);QI(u,a,o,e,r,y[0],d[0]),QI(u,a,o,e,r,y[0],d[1]),QI(u,a,o,e,r,y[1],d[0]),QI(u,a,o,e,r,y[1],d[1])}}}return a}function zI(e,t,r,n){var o,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1/0,a=II(e,[0,e.length-1]),s=RE(r);try{for(s.s();!(o=s.n()).done;){var u=o.value;if(!(i!==1/0&&xI(a,II(u,[0,u.length-1]),n)>=i)&&0===(i=Math.min(i,UI(e,t,u,!0,n,i))))return i}}catch(e){s.e(e)}finally{s.f()}return i}function HI(e,t,r,n){var o,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1/0,a=II(e,[0,e.length-1]),s=RE(r);try{for(s.s();!(o=s.n()).done;){var u=o.value;if(!(i!==1/0&&xI(a,OI(u),n)>=i)){var l=GI(e,t,u,n,i);if(isNaN(l))return l;if(0===(i=Math.min(i,l)))return i}}}catch(e){s.e(e)}finally{s.f()}return i}function qI(e,t,r){var n,o=[],i=RE(function(e,t){var r=e.length;if(r<=1)return[e];for(var n,o,i=[],a=0;a<r;a++){var s=z_(e[a]);0!==s&&(e[a].area=Math.abs(s),void 0===o&&(o=s<0),o===s<0?(n&&i.push(n),n=[e[a]]):n.push(e[a]))}return n&&i.push(n),i}(e));try{for(i.s();!(n=i.n()).done;){for(var a=n.value,s=[],u=0;u<a.length;++u)s.push(kI(a[u],t));o.push(s)}}catch(e){i.e(e)}finally{i.f()}var l=new hI(o[0][0][0][1],"meters");if("Point"===r.type||"MultiPoint"===r.type||"LineString"===r.type)return HI("Point"===r.type?[r.coordinates]:r.coordinates,"LineString"===r.type,o,l);if("MultiLineString"===r.type){for(var c=1/0,f=0;f<r.coordinates.length;f++){var p=HI(r.coordinates[f],!0,o,l,c);if(isNaN(p))return p;if(0===(c=Math.min(c,p)))return c}return c}return"Polygon"===r.type||"MultiPolygon"===r.type?function(e,t,r){var n,o=1/0,i=RE(e);try{for(i.s();!(n=i.n()).done;){var a,s=n.value,u=RE(t);try{for(u.s();!(a=u.n()).done;){var l=FI(s,a.value,r,o);if(isNaN(l))return l;if(0===(o=Math.min(o,l)))return o}}catch(e){u.e(e)}finally{u.f()}}}catch(e){i.e(e)}finally{i.f()}return o}("Polygon"===r.type?[r.coordinates]:r.coordinates,o,l):null}function VI(e){return"Point"===e||"MultiPoint"===e||"LineString"===e||"MultiLineString"===e||"Polygon"===e||"MultiPolygon"===e}var KI=function(){function e(t,r){PE(this,e),this.type=qE,this.geojson=t,this.geometries=r}return OE(e,[{key:"evaluate",value:function(e){var t=e.geometry(),r=e.canonicalID();if(null!=t&&null!=r){if("Point"===e.geometryType())return function(e,t,r){var n,o=[],i=RE(e);try{for(i.s();!(n=i.n()).done;){var a,s=RE(n.value);try{for(s.s();!(a=s.n()).done;){var u=a.value;o.push(PI(u,t))}}catch(e){s.e(e)}finally{s.f()}}}catch(e){i.e(e)}finally{i.f()}var l=new hI(o[0][1],"meters");return"Point"===r.type||"MultiPoint"===r.type||"LineString"===r.type?UI(o,!1,"Point"===r.type?[r.coordinates]:r.coordinates,"LineString"===r.type,l):"MultiLineString"===r.type?zI(o,!1,r.coordinates,l):"Polygon"===r.type||"MultiPolygon"===r.type?HI(o,!1,"Polygon"===r.type?[r.coordinates]:r.coordinates,l):null}(t,r,this.geometries);if("LineString"===e.geometryType())return function(e,t,r){var n,o=[],i=RE(e);try{for(i.s();!(n=i.n()).done;){var a,s=[],u=RE(n.value);try{for(u.s();!(a=u.n()).done;){var l=a.value;s.push(PI(l,t))}}catch(e){u.e(e)}finally{u.f()}o.push(s)}}catch(e){i.e(e)}finally{i.f()}var c=new hI(o[0][0][1],"meters");if("Point"===r.type||"MultiPoint"===r.type||"LineString"===r.type)return zI("Point"===r.type?[r.coordinates]:r.coordinates,"LineString"===r.type,o,c);if("MultiLineString"===r.type){for(var f=1/0,p=0;p<r.coordinates.length;p++){var h=zI(r.coordinates[p],!0,o,c,f);if(isNaN(h))return h;if(0===(f=Math.min(f,h)))return f}return f}if("Polygon"===r.type||"MultiPolygon"===r.type){for(var y=1/0,d=0;d<o.length;d++){var m=HI(o[d],!0,"Polygon"===r.type?[r.coordinates]:r.coordinates,c,y);if(isNaN(m))return m;if(0===(y=Math.min(y,m)))return y}return y}return null}(t,r,this.geometries);if("Polygon"===e.geometryType())return qI(t,r,this.geometries);console.warn("Distance Expression: currently only evaluates valid Point/LineString/Polygon geometries.")}else console.warn("Distance Expression: requirs valid feature and canonical information.");return null}},{key:"eachChild",value:function(){}},{key:"outputDefined",value:function(){return!0}},{key:"serialize",value:function(){return["distance",this.geojson]}}],[{key:"parse",value:function(t,r){if(2!==t.length)return r.error("'distance' expression requires either one argument, but found ' ".concat(t.length-1," instead."));if(E_(t[1])){var n=t[1];if("FeatureCollection"===n.type){for(var o=0;o<n.features.length;++o)if(VI(n.features[o].geometry.type))return new e(n,n.features[o].geometry)}else if("Feature"===n.type){if(VI(n.geometry.type))return new e(n,n.geometry)}else if(VI(n.type))return new e(n,n)}return r.error("'distance' expression needs to be an array with format ['Distance', GeoJSONObj].")}}])}();function YI(e){if(e instanceof D_){if("get"===e.name&&1===e.args.length)return!1;if("feature-state"===e.name)return!1;if("has"===e.name&&1===e.args.length)return!1;if("properties"===e.name||"geometry-type"===e.name||"id"===e.name)return!1;if(/^filter-/.test(e.name))return!1}if(e instanceof sI)return!1;if(e instanceof KI)return!1;if(e instanceof rO)return e.featureConstant;var t=!0;return e.eachChild(function(e){t&&!YI(e)&&(t=!1)}),t}function JI(e){if(e instanceof D_&&"feature-state"===e.name)return!1;var t=!0;return e.eachChild(function(e){t&&!JI(e)&&(t=!1)}),t}function WI(e){if(e instanceof rO)return new Set([e.key]);var t=new Set;return e.eachChild(function(e){t=new Set([].concat(wE(t),wE(WI(e))))}),t}function XI(e,t){if(e instanceof D_&&t.indexOf(e.name)>=0)return!1;var r=!0;return e.eachChild(function(e){r&&!XI(e,t)&&(r=!1)}),r}var ZI="";function $I(e,t,r){return[e,t,r].filter(Boolean).join(ZI)}function eO(e,t){switch(e){case"string":return I_(t);case"number":return+t;case"boolean":return!!t;case"color":return h_.parse(t);case"formatted":return b_.fromString(I_(t));case"resolvedImage":return S_.build(I_(t))}return t}function tO(e,t,r,n){return void 0!==n&&(e=n*Math.round(e/n)),void 0!==t&&e<t&&(e=t),void 0!==r&&e>r&&(e=r),e}var rO=function(){function e(t,r,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];PE(this,e),this.type=t,this.key=r,this.scope=n,this.featureConstant=o}return OE(e,[{key:"evaluate",value:function(e){var t=$I(this.key,this.scope,e.scope),r=e.getConfig(t);if(!r)return null;var n=r.type,o=r.value,i=r.values,a=r.minValue,s=r.maxValue,u=r.stepValue,l=r.default.evaluate(e),c=l;if(o){var f=e.scope;e.scope=(f||"").split(ZI).slice(1).join(ZI),c=o.evaluate(e),e.scope=f}return n&&(c=eO(n,c)),void 0===c||void 0===a&&void 0===s&&void 0===u||("number"==typeof c?c=tO(c,a,s,u):Array.isArray(c)&&(c=c.map(function(e){return"number"==typeof e?tO(e,a,s,u):e}))),void 0!==o&&void 0!==c&&i&&!i.includes(c)&&(c=l,n&&(c=eO(n,c))),(n&&n!==this.type||void 0!==c&&!a_(__(c),this.type))&&(c=eO(this.type.kind,c)),c}},{key:"eachChild",value:function(){}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){var e=["config",this.key];return this.scope&&e.concat(this.scope),e}}],[{key:"parse",value:function(t,r){var n=r.expectedType;if(null!==n&&void 0!==n||(n=WE),t.length<2||t.length>3)return r.error("Invalid number of arguments for 'config' expression.");var o=r.parse(t[1],1);if(!(o instanceof O_))return r.error("Key name of 'config' expression must be a string literal.");var i,a=!0,s=I_(o.value);if(t.length>=3){var u=r.parse(t[2],2);if(!(u instanceof O_))return r.error("Scope of 'config' expression must be a string literal.");i=I_(u.value)}if(r.options){var l=$I(s,i,r._scope),c=r.options.get(l);c&&(a=YI(c.value||c.default))}return new e(n,s,i,a)}}])}(),nO=function(){function e(t,r){PE(this,e),this.type=r.type,this.name=t,this.boundExpression=r}return OE(e,[{key:"evaluate",value:function(e){return this.boundExpression.evaluate(e)}},{key:"eachChild",value:function(){}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return["var",this.name]}}],[{key:"parse",value:function(t,r){if(2!==t.length||"string"!=typeof t[1])return r.error("'var' expression requires exactly one string literal argument.");var n=t[1];return r.scope.has(n)?new e(n,r.scope.get(n)):r.error('Unknown variable "'.concat(n,'". Make sure "').concat(n,'" has been bound in an enclosing "let" expression before using it.'),1)}}])}(),oO=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new zE,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],a=arguments.length>5?arguments[5]:void 0,s=arguments.length>6?arguments[6]:void 0;PE(this,e),this.registry=t,this.path=r,this.key=r.map(function(e){return"string"==typeof e?"['".concat(e,"']"):"[".concat(e,"]")}).join(""),this.scope=o,this.errors=i,this.expectedType=n,this._scope=a,this.options=s}return OE(e,[{key:"parse",value:function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return t||r?this.concat(t,null,r,n)._parse(e,o):this._parse(e,o)}},{key:"parseObjectValue",value:function(e,t,r,n,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};return this.concat(t,r,n,o)._parse(e,i)}},{key:"_parse",value:function(e,t){function r(e,t,r){return"assert"===r?new k_(t,[e]):"coerce"===r?new N_(t,[e]):e}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var n="string"==typeof e[0]?this.registry[e[0]]:void 0;if(n){var o=n.parse(e,this);if(!o)return null;if(this.expectedType){var i=this.expectedType,a=o.type;if("string"!==i.kind&&"number"!==i.kind&&"boolean"!==i.kind&&"object"!==i.kind&&"array"!==i.kind||"value"!==a.kind)if("color"!==i.kind&&"formatted"!==i.kind&&"resolvedImage"!==i.kind||"value"!==a.kind&&"string"!==a.kind){if(this.checkSubtype(i,a))return null}else o=r(o,i,t.typeAnnotation||"coerce");else o=r(o,i,t.typeAnnotation||"assert")}if(!(o instanceof O_)&&"resolvedImage"!==o.type.kind&&function e(t){if(t instanceof nO)return e(t.boundExpression);if(t instanceof D_&&"error"===t.name)return!1;if(t instanceof U_)return!1;if(t instanceof sI)return!1;if(t instanceof KI)return!1;if(t instanceof rO)return!1;var r=t instanceof N_||t instanceof k_;var n=!0;t.eachChild(function(t){n=r?n&&e(t):n&&t instanceof O_});if(!n)return!1;return YI(t)&&XI(t,["zoom","heatmap-density","worldview","line-progress","raster-value","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center","measure-light","raster-particle-speed"])}(o)){var s=new L_(this._scope,this.options);try{o=new O_(o.type,o.evaluate(s))}catch(e){return this.error(e.message),null}}return o}return N_.parse(["to-array",e],this)}return void 0===e?this.error("'undefined' value invalid. Use null instead."):"object"===FE(e)?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found ".concat(FE(e)," instead."))}},{key:"concat",value:function(t,r,n,o){var i="number"==typeof t?this.path.concat(t):this.path;i="string"==typeof r?i.concat(r):i;var a=o?this.scope.concat(o):this.scope;return new e(this.registry,i,n||null,a,this.errors,this._scope,this.options)}},{key:"error",value:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var o="".concat(this.key).concat(r.map(function(e){return"[".concat(e,"]")}).join(""));this.errors.push(new UE(o,e))}},{key:"checkSubtype",value:function(e,t){var r=n_(e,t);return r&&this.error(r),r}}])}();function iO(e,t){for(var r,n,o=e.length-1,i=0,a=o,s=0;i<=a;)if(r=e[s=Math.floor((i+a)/2)],n=e[s+1],r<=t){if(s===o||t<n)return s;i=s+1}else{if(!(r>t))throw new x_("Input is not a number.");a=s-1}return 0}var aO,sO,uO=function(){function e(t,r,n){PE(this,e),this.type=t,this.input=r,this.labels=[],this.outputs=[];var o,i=RE(n);try{for(i.s();!(o=i.n()).done;){var a=CE(o.value,2),s=a[0],u=a[1];this.labels.push(s),this.outputs.push(u)}}catch(e){i.e(e)}finally{i.f()}}return OE(e,[{key:"evaluate",value:function(e){var t=this.labels,r=this.outputs;if(1===t.length)return r[0].evaluate(e);var n=this.input.evaluate(e);if(n<=t[0])return r[0].evaluate(e);var o=t.length;return n>=t[o-1]?r[o-1].evaluate(e):r[iO(t,n)].evaluate(e)}},{key:"eachChild",value:function(e){e(this.input);var t,r=RE(this.outputs);try{for(r.s();!(t=r.n()).done;){e(t.value)}}catch(e){r.e(e)}finally{r.f()}}},{key:"outputDefined",value:function(){return this.outputs.every(function(e){return e.outputDefined()})}},{key:"serialize",value:function(){for(var e=["step",this.input.serialize()],t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e}}],[{key:"parse",value:function(t,r){if(t.length-1<4)return r.error("Expected at least 4 arguments, but found only ".concat(t.length-1,"."));if((t.length-1)%2!=0)return r.error("Expected an even number of arguments.");var n=r.parse(t[1],1,qE);if(!n)return null;var o=[],i=null;r.expectedType&&"value"!==r.expectedType.kind&&(i=r.expectedType);for(var a=1;a<t.length;a+=2){var s=1===a?-1/0:t[a],u=t[a+1],l=a,c=a+1;if("number"!=typeof s)return r.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',l);if(o.length&&o[o.length-1][0]>=s)return r.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',l);var f=r.parse(u,c,i);if(!f)return null;i=i||f.type,o.push([s,f])}return new e(i,n,o)}}])}();var lO=s_(function(){if(sO)return aO;function e(e,t,r,n){this.cx=3*e,this.bx=3*(r-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(n-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=r,this.p2y=n}return sO=1,aO=e,e.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(void 0===t&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var r=e,n=0;n<8;n++){var o=this.sampleCurveX(r)-e;if(Math.abs(o)<t)return r;var i=this.sampleCurveDerivativeX(r);if(Math.abs(i)<1e-6)break;r-=o/i}var a=0,s=1;for(r=e,n=0;n<20&&(o=this.sampleCurveX(r),!(Math.abs(o-e)<t));n++)e>o?a=r:s=r,r=.5*(s-a)+a;return r},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}},aO}()),cO=.95047,fO=1,pO=1.08883,hO=4/29,yO=6/29,dO=3*yO*yO,mO=yO*yO*yO,gO=Math.PI/180,vO=180/Math.PI;function bO(e){return e>mO?Math.pow(e,1/3):e/dO+hO}function AO(e){return e>yO?e*e*e:dO*(e-hO)}function wO(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function SO(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function CO(e){var t=SO(e.r),r=SO(e.g),n=SO(e.b),o=bO((.4124564*t+.3575761*r+.1804375*n)/cO),i=bO((.2126729*t+.7151522*r+.072175*n)/fO);return{l:116*i-16,a:500*(o-i),b:200*(i-bO((.0193339*t+.119192*r+.9503041*n)/pO)),alpha:e.a}}function EO(e){var t=(e.l+16)/116,r=isNaN(e.a)?t:t+e.a/500,n=isNaN(e.b)?t:t-e.b/200;return t=fO*AO(t),r=cO*AO(r),n=pO*AO(n),new h_(wO(3.2404542*r-1.5371385*t-.4985314*n),wO(-.969266*r+1.8760108*t+.041556*n),wO(.0556434*r-.2040259*t+1.0572252*n),e.alpha)}var _O={forward:CO,reverse:EO,interpolate:function(e,t,r){return{l:f_(e.l,t.l,r),a:f_(e.a,t.a,r),b:f_(e.b,t.b,r),alpha:f_(e.alpha,t.alpha,r)}}},IO={forward:function(e){var t=CO(e),r=t.l,n=t.a,o=t.b,i=Math.atan2(o,n)*vO;return{h:i<0?i+360:i,c:Math.sqrt(n*n+o*o),l:r,alpha:e.a}},reverse:function(e){var t=e.h*gO,r=e.c;return EO({l:e.l,a:Math.cos(t)*r,b:Math.sin(t)*r,alpha:e.alpha})},interpolate:function(e,t,r){return{h:function(e,t,r){var n=t-e;return e+r*(n>180||n<-180?n-360*Math.round(n/360):n)}(e.h,t.h,r),c:f_(e.c,t.c,r),l:f_(e.l,t.l,r),alpha:f_(e.alpha,t.alpha,r)}}},OO=Object.freeze({__proto__:null,hcl:IO,lab:_O}),xO=function(){function e(t,r,n,o,i){PE(this,e),this.type=t,this.operator=r,this.interpolation=n,this.input=o,this.labels=[],this.outputs=[];var a,s=RE(i);try{for(s.s();!(a=s.n()).done;){var u=CE(a.value,2),l=u[0],c=u[1];this.labels.push(l),this.outputs.push(c)}}catch(e){s.e(e)}finally{s.f()}}return OE(e,[{key:"evaluate",value:function(t){var r=this.labels,n=this.outputs;if(1===r.length)return n[0].evaluate(t);var o=this.input.evaluate(t);if(o<=r[0])return n[0].evaluate(t);var i=r.length;if(o>=r[i-1])return n[i-1].evaluate(t);var a=iO(r,o),s=r[a],u=r[a+1],l=e.interpolationFactor(this.interpolation,o,s,u),c=n[a].evaluate(t),f=n[a+1].evaluate(t);return"interpolate"===this.operator?p_[this.type.kind.toLowerCase()](c,f,l):"interpolate-hcl"===this.operator?IO.reverse(IO.interpolate(IO.forward(c),IO.forward(f),l)):_O.reverse(_O.interpolate(_O.forward(c),_O.forward(f),l))}},{key:"eachChild",value:function(e){e(this.input);var t,r=RE(this.outputs);try{for(r.s();!(t=r.n()).done;){e(t.value)}}catch(e){r.e(e)}finally{r.f()}}},{key:"outputDefined",value:function(){return this.outputs.every(function(e){return e.outputDefined()})}},{key:"serialize",value:function(){var e;e="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(wE(this.interpolation.controlPoints));for(var t=[this.operator,e,this.input.serialize()],r=0;r<this.labels.length;r++)t.push(this.labels[r],this.outputs[r].serialize());return t}}],[{key:"interpolationFactor",value:function(e,t,r,n){var o=0;if("exponential"===e.name)o=PO(t,e.base,r,n);else if("linear"===e.name)o=PO(t,1,r,n);else if("cubic-bezier"===e.name){var i=e.controlPoints;o=new lO(i[0],i[1],i[2],i[3]).solve(PO(t,1,r,n))}return o}},{key:"parse",value:function(t,r){var n,o=_E(n=t)||SE(n)||LE(n)||EE(),i=o[0],a=o[1],s=o[2],u=o.slice(3);if(!Array.isArray(a)||0===a.length)return r.error("Expected an interpolation type expression.",1);if("linear"===a[0])a={name:"linear"};else if("exponential"===a[0]){var l=a[1];if("number"!=typeof l)return r.error("Exponential interpolation requires a numeric base.",1,1);a={name:"exponential",base:l}}else{if("cubic-bezier"!==a[0])return r.error("Unknown interpolation type ".concat(String(a[0])),1,0);var c=a.slice(1);if(4!==c.length||c.some(function(e){return"number"!=typeof e||e<0||e>1}))return r.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);a={name:"cubic-bezier",controlPoints:c}}if(t.length-1<4)return r.error("Expected at least 4 arguments, but found only ".concat(t.length-1,"."));if(t.length-1>3&&(t.length-1)%2!=0)return r.error("Expected an even number of arguments.");if(!(s=r.parse(s,2,qE)))return null;var f=[],p=null;"interpolate-hcl"===i||"interpolate-lab"===i?p=YE:r.expectedType&&"value"!==r.expectedType.kind&&(p=r.expectedType);for(var h=0;h<u.length;h+=2){var y=u[h],d=u[h+1],m=h+3,g=h+4;if("number"!=typeof y)return r.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',m);if(f.length&&f[f.length-1][0]>=y)return r.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',m);var v=r.parse(d,g,p);if(!v)return null;p=p||v.type,f.push([y,v])}return"number"===p.kind||"color"===p.kind||"array"===p.kind&&"number"===p.itemType.kind&&"number"==typeof p.N?new e(p,i,a,s,f):r.error("Type ".concat(t_(p)," is not interpolatable."))}}])}();function PO(e,t,r,n){var o=n-r,i=e-r;return 0===o?0:1===t?i/o:(Math.pow(t,i)-1)/(Math.pow(t,o)-1)}var kO=function(){function e(t,r){PE(this,e),this.type=t,this.args=r}return OE(e,[{key:"evaluate",value:function(e){var t,r,n=null,o=0,i=RE(this.args);try{for(i.s();!(r=i.n()).done;){if(o++,(n=r.value.evaluate(e))&&n instanceof S_&&!n.available&&(t||(t=n),n=null,o===this.args.length))return t;if(null!==n)break}}catch(e){i.e(e)}finally{i.f()}return n}},{key:"eachChild",value:function(e){this.args.forEach(e)}},{key:"outputDefined",value:function(){return this.args.every(function(e){return e.outputDefined()})}},{key:"serialize",value:function(){var e=["coalesce"];return this.eachChild(function(t){e.push(t.serialize())}),e}}],[{key:"parse",value:function(t,r){if(t.length<2)return r.error("Expectected at least one argument.");var n=null,o=r.expectedType;o&&"value"!==o.kind&&(n=o);var i,a=[],s=RE(t.slice(1));try{for(s.s();!(i=s.n()).done;){var u=i.value,l=r.parse(u,1+a.length,n,void 0,{typeAnnotation:"omit"});if(!l)return null;n=n||l.type,a.push(l)}}catch(e){s.e(e)}finally{s.f()}return new e(o&&a.some(function(e){return n_(o,e.type)})?WE:n,a)}}])}(),TO=function(){function e(t,r){PE(this,e),this.type=r.type,this.bindings=[].concat(t),this.result=r}return OE(e,[{key:"evaluate",value:function(e){return this.result.evaluate(e)}},{key:"eachChild",value:function(e){var t,r=RE(this.bindings);try{for(r.s();!(t=r.n()).done;){e(t.value[1])}}catch(e){r.e(e)}finally{r.f()}e(this.result)}},{key:"outputDefined",value:function(){return this.result.outputDefined()}},{key:"serialize",value:function(){var e,t=["let"],r=RE(this.bindings);try{for(r.s();!(e=r.n()).done;){var n=CE(e.value,2),o=n[0],i=n[1];t.push(o,i.serialize())}}catch(e){r.e(e)}finally{r.f()}return t.push(this.result.serialize()),t}}],[{key:"parse",value:function(t,r){if(t.length<4)return r.error("Expected at least 3 arguments, but found ".concat(t.length-1," instead."));for(var n=[],o=1;o<t.length-1;o+=2){var i=t[o];if("string"!=typeof i)return r.error("Expected string, but found ".concat(FE(i)," instead."),o);if(/[^a-zA-Z0-9_]/.test(i))return r.error("Variable names must contain only alphanumeric characters or '_'.",o);var a=r.parse(t[o+1],o+1);if(!a)return null;n.push([i,a])}var s=r.parse(t[t.length-1],t.length-1,r.expectedType,n);return s?new e(n,s):null}}])}(),jO=function(){function e(t,r,n){PE(this,e),this.type=t,this.index=r,this.input=n}return OE(e,[{key:"evaluate",value:function(e){var t=this.index.evaluate(e),r=this.input.evaluate(e);if(t<0)throw new x_("Array index out of bounds: ".concat(t," < 0."));if(t>=r.length)throw new x_("Array index out of bounds: ".concat(t," > ").concat(r.length-1,"."));if(t!==Math.floor(t))throw new x_("Array index must be an integer, but found ".concat(t," instead. Use at-interpolated to retrieve interpolated result with a fractional index."));return r[t]}},{key:"eachChild",value:function(e){e(this.index),e(this.input)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return["at",this.index.serialize(),this.input.serialize()]}}],[{key:"parse",value:function(t,r){if(3!==t.length)return r.error("Expected 2 arguments, but found ".concat(t.length-1," instead."));var n=r.parse(t[1],1,qE),o=r.parse(t[2],2,e_(r.expectedType||WE));return n&&o?new e(o.type.itemType,n,o):null}}])}(),MO=function(){function e(t,r,n){PE(this,e),this.type=t,this.index=r,this.input=n}return OE(e,[{key:"evaluate",value:function(e){var t=this.index.evaluate(e),r=this.input.evaluate(e);if(t<0)throw new x_("Array index out of bounds: ".concat(t," < 0."));if(t>r.length-1)throw new x_("Array index out of bounds: ".concat(t," > ").concat(r.length-1,"."));if(t===Math.floor(t))return r[t];var n=Math.floor(t),o=Math.ceil(t),i=r[n],a=r[o];if("number"!=typeof i||"number"!=typeof a)throw new x_("Cannot interpolate between non-number values at index ".concat(t,"."));var s=t-n;return i*(1-s)+a*s}},{key:"eachChild",value:function(e){e(this.index),e(this.input)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return["at-interpolated",this.index.serialize(),this.input.serialize()]}}],[{key:"parse",value:function(t,r){if(3!==t.length)return r.error("Expected 2 arguments, but found ".concat(t.length-1," instead."));var n=r.parse(t[1],1,qE),o=r.parse(t[2],2,e_(r.expectedType||WE));return n&&o?new e(o.type.itemType,n,o):null}}])}(),BO=function(){function e(t,r){PE(this,e),this.type=KE,this.needle=t,this.haystack=r}return OE(e,[{key:"evaluate",value:function(e){var t=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(null==r)return!1;if(!i_(t,["boolean","string","number","null"]))throw new x_("Expected first argument to be of type boolean, string, number or null, but found ".concat(t_(__(t))," instead."));if(!i_(r,["string","array"]))throw new x_("Expected second argument to be of type array or string, but found ".concat(t_(__(r))," instead."));return r.indexOf(t)>=0}},{key:"eachChild",value:function(e){e(this.needle),e(this.haystack)}},{key:"outputDefined",value:function(){return!0}},{key:"serialize",value:function(){return["in",this.needle.serialize(),this.haystack.serialize()]}}],[{key:"parse",value:function(t,r){if(3!==t.length)return r.error("Expected 2 arguments, but found ".concat(t.length-1," instead."));var n=r.parse(t[1],1,WE),o=r.parse(t[2],2,WE);return n&&o?o_(n.type,[KE,VE,qE,HE,WE])?new e(n,o):r.error("Expected first argument to be of type boolean, string, number or null, but found ".concat(t_(n.type)," instead")):null}}])}(),NO=function(){function e(t,r,n){PE(this,e),this.type=qE,this.needle=t,this.haystack=r,this.fromIndex=n}return OE(e,[{key:"evaluate",value:function(e){var t=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(!i_(t,["boolean","string","number","null"]))throw new x_("Expected first argument to be of type boolean, string, number or null, but found ".concat(t_(__(t))," instead."));if(!i_(r,["string","array"]))throw new x_("Expected second argument to be of type array or string, but found ".concat(t_(__(r))," instead."));if(this.fromIndex){var n=this.fromIndex.evaluate(e);return r.indexOf(t,n)}return r.indexOf(t)}},{key:"eachChild",value:function(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}],[{key:"parse",value:function(t,r){if(t.length<=2||t.length>=5)return r.error("Expected 3 or 4 arguments, but found ".concat(t.length-1," instead."));var n=r.parse(t[1],1,WE),o=r.parse(t[2],2,WE);if(!n||!o)return null;if(!o_(n.type,[KE,VE,qE,HE,WE]))return r.error("Expected first argument to be of type boolean, string, number or null, but found ".concat(t_(n.type)," instead"));if(4===t.length){var i=r.parse(t[3],3,qE);return i?new e(n,o,i):null}return new e(n,o)}}])}(),RO=function(){function e(t,r,n,o,i,a){PE(this,e),this.inputType=t,this.type=r,this.input=n,this.cases=o,this.outputs=i,this.otherwise=a}return OE(e,[{key:"evaluate",value:function(e){var t=this.input.evaluate(e);return(a_(__(t),this.inputType)&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}},{key:"eachChild",value:function(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}},{key:"outputDefined",value:function(){return this.outputs.every(function(e){return e.outputDefined()})&&this.otherwise.outputDefined()}},{key:"serialize",value:function(){var e,t=this,r=["match",this.input.serialize()],n=[],o={},i=RE(Object.keys(this.cases).sort());try{for(i.s();!(e=i.n()).done;){var a=e.value,s=o[this.cases[a]];void 0===s?(o[this.cases[a]]=n.length,n.push([this.cases[a],[a]])):n[s][1].push(a)}}catch(e){i.e(e)}finally{i.f()}for(var u=function(e){return"number"===t.inputType.kind?Number(e):e},l=0,c=n;l<c.length;l++){var f=CE(c[l],2),p=f[0],h=f[1];1===h.length?r.push(u(h[0])):r.push(h.map(u)),r.push(this.outputs[p].serialize())}return r.push(this.otherwise.serialize()),r}}],[{key:"parse",value:function(t,r){if(t.length<5)return r.error("Expected at least 4 arguments, but found only ".concat(t.length-1,"."));if(t.length%2!=1)return r.error("Expected an even number of arguments.");var n,o;r.expectedType&&"value"!==r.expectedType.kind&&(o=r.expectedType);for(var i={},a=[],s=2;s<t.length-1;s+=2){var u=t[s],l=t[s+1];Array.isArray(u)||(u=[u]);var c=r.concat(s);if(0===u.length)return c.error("Expected at least one branch label.");var f,p=RE(u);try{for(p.s();!(f=p.n()).done;){var h=f.value;if("number"!=typeof h&&"string"!=typeof h)return c.error("Branch labels must be numbers or strings.");if("number"==typeof h&&Math.abs(h)>Number.MAX_SAFE_INTEGER)return c.error("Branch labels must be integers no larger than ".concat(Number.MAX_SAFE_INTEGER,"."));if("number"==typeof h&&Math.floor(h)!==h)return c.error("Numeric branch labels must be integer values.");if(n){if(c.checkSubtype(n,__(h)))return null}else n=__(h);if(void 0!==i[String(h)])return c.error("Branch labels must be unique.");i[String(h)]=a.length}}catch(e){p.e(e)}finally{p.f()}var y=r.parse(l,s,o);if(!y)return null;o=o||y.type,a.push(y)}var d=r.parse(t[1],1,WE);if(!d)return null;var m=r.parse(t[t.length-1],t.length-1,o);return m?"value"!==d.type.kind&&r.concat(1).checkSubtype(n,d.type)?null:new e(n,o,d,i,a,m):null}}])}(),LO=function(){function e(t,r,n){PE(this,e),this.type=t,this.branches=r,this.otherwise=n}return OE(e,[{key:"evaluate",value:function(e){var t,r=RE(this.branches);try{for(r.s();!(t=r.n()).done;){var n=CE(t.value,2),o=n[0],i=n[1];if(o.evaluate(e))return i.evaluate(e)}}catch(e){r.e(e)}finally{r.f()}return this.otherwise.evaluate(e)}},{key:"eachChild",value:function(e){var t,r=RE(this.branches);try{for(r.s();!(t=r.n()).done;){var n=CE(t.value,2),o=n[0],i=n[1];e(o),e(i)}}catch(e){r.e(e)}finally{r.f()}e(this.otherwise)}},{key:"outputDefined",value:function(){return this.branches.every(function(e){var t=CE(e,2);t[0];return t[1].outputDefined()})&&this.otherwise.outputDefined()}},{key:"serialize",value:function(){var e=["case"];return this.eachChild(function(t){e.push(t.serialize())}),e}}],[{key:"parse",value:function(t,r){if(t.length<4)return r.error("Expected at least 3 arguments, but found only ".concat(t.length-1,"."));if(t.length%2!=0)return r.error("Expected an odd number of arguments.");var n;r.expectedType&&"value"!==r.expectedType.kind&&(n=r.expectedType);for(var o=[],i=1;i<t.length-1;i+=2){var a=r.parse(t[i],i,KE);if(!a)return null;var s=r.parse(t[i+1],i+1,n);if(!s)return null;o.push([a,s]),n=n||s.type}var u=r.parse(t[t.length-1],t.length-1,n);return u?new e(n,o,u):null}}])}(),DO=function(){function e(t,r,n,o){PE(this,e),this.type=t,this.input=r,this.beginIndex=n,this.endIndex=o}return OE(e,[{key:"evaluate",value:function(e){var t=this.input.evaluate(e),r=this.beginIndex.evaluate(e);if(!i_(t,["string","array"]))throw new x_("Expected first argument to be of type array or string, but found ".concat(t_(__(t))," instead."));if(this.endIndex){var n=this.endIndex.evaluate(e);return t.slice(r,n)}return t.slice(r)}},{key:"eachChild",value:function(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){if(null!=this.endIndex&&void 0!==this.endIndex){var e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}],[{key:"parse",value:function(t,r){if(t.length<=2||t.length>=5)return r.error("Expected 3 or 4 arguments, but found ".concat(t.length-1," instead."));var n=r.parse(t[1],1,WE),o=r.parse(t[2],2,qE);if(!n||!o)return null;if(!o_(n.type,[e_(WE),VE,WE]))return r.error("Expected first argument to be of type array or string, but found ".concat(t_(n.type)," instead"));if(4===t.length){var i=r.parse(t[3],3,qE);return i?new e(n.type,n,o,i):null}return new e(n.type,n,o)}}])}();function FO(e,t){return"=="===e||"!="===e?"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind:"string"===t.kind||"number"===t.kind||"value"===t.kind}function QO(e,t,r,n){return 0===n.compare(t,r)}function GO(e,t,r){var n="=="!==e&&"!="!==e;return function(){function o(e,t,r){PE(this,o),this.type=KE,this.lhs=e,this.rhs=t,this.collator=r,this.hasUntypedArgument="value"===e.type.kind||"value"===t.type.kind}return OE(o,[{key:"evaluate",value:function(o){var i=this.lhs.evaluate(o),a=this.rhs.evaluate(o);if(n&&this.hasUntypedArgument){var s=__(i),u=__(a);if(s.kind!==u.kind||"string"!==s.kind&&"number"!==s.kind)throw new x_('Expected arguments for "'.concat(e,'" to be (string, string) or (number, number), but found (').concat(s.kind,", ").concat(u.kind,") instead."))}if(this.collator&&!n&&this.hasUntypedArgument){var l=__(i),c=__(a);if("string"!==l.kind||"string"!==c.kind)return t(o,i,a)}return this.collator?r(o,i,a,this.collator.evaluate(o)):t(o,i,a)}},{key:"eachChild",value:function(e){e(this.lhs),e(this.rhs),this.collator&&e(this.collator)}},{key:"outputDefined",value:function(){return!0}},{key:"serialize",value:function(){var t=[e];return this.eachChild(function(e){t.push(e.serialize())}),t}}],[{key:"parse",value:function(e,t){if(3!==e.length&&4!==e.length)return t.error("Expected two or three arguments.");var r=e[0],i=t.parse(e[1],1,WE);if(!i)return null;if(!FO(r,i.type))return t.concat(1).error('"'.concat(r,"\" comparisons are not supported for type '").concat(t_(i.type),"'."));var a=t.parse(e[2],2,WE);if(!a)return null;if(!FO(r,a.type))return t.concat(2).error('"'.concat(r,"\" comparisons are not supported for type '").concat(t_(a.type),"'."));if(i.type.kind!==a.type.kind&&"value"!==i.type.kind&&"value"!==a.type.kind)return t.error("Cannot compare types '".concat(t_(i.type),"' and '").concat(t_(a.type),"'."));n&&("value"===i.type.kind&&"value"!==a.type.kind?i=new k_(a.type,[i]):"value"!==i.type.kind&&"value"===a.type.kind&&(a=new k_(i.type,[a])));var s=null;if(4===e.length){if("string"!==i.type.kind&&"string"!==a.type.kind&&"value"!==i.type.kind&&"value"!==a.type.kind)return t.error("Cannot use collator to compare non-string types.");if(!(s=t.parse(e[3],3,XE)))return null}return new o(i,a,s)}}])}()}var UO=GO("==",function(e,t,r){return t===r},QO),zO=GO("!=",function(e,t,r){return t!==r},function(e,t,r,n){return!QO(0,t,r,n)}),HO=GO("<",function(e,t,r){return t<r},function(e,t,r,n){return n.compare(t,r)<0}),qO=GO(">",function(e,t,r){return t>r},function(e,t,r,n){return n.compare(t,r)>0}),VO=GO("<=",function(e,t,r){return t<=r},function(e,t,r,n){return n.compare(t,r)<=0}),KO=GO(">=",function(e,t,r){return t>=r},function(e,t,r,n){return n.compare(t,r)>=0}),YO=function(){function e(t,r,n,o,i,a){PE(this,e),this.type=VE,this.number=t,this.locale=r,this.currency=n,this.unit=o,this.minFractionDigits=i,this.maxFractionDigits=a}return OE(e,[{key:"evaluate",value:function(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(e):void 0,unit:this.unit?this.unit.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}},{key:"eachChild",value:function(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.unit&&e(this.unit),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){var e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.unit&&(e.unit=this.unit.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}],[{key:"parse",value:function(t,r){if(3!==t.length)return r.error("Expected two arguments.");var n=r.parse(t[1],1,qE);if(!n)return null;var o=t[2];if("object"!==FE(o)||Array.isArray(o))return r.error("NumberFormat options argument must be an object.");var i=null;if(o.locale&&!(i=r.parseObjectValue(o.locale,2,"locale",VE)))return null;var a=null;if(o.currency&&!(a=r.parseObjectValue(o.currency,2,"currency",VE)))return null;var s=null;if(o.unit&&!(s=r.parseObjectValue(o.unit,2,"unit",VE)))return null;var u=null;if(o["min-fraction-digits"]&&!(u=r.parseObjectValue(o["min-fraction-digits"],2,"min-fraction-digits",qE)))return null;var l=null;return o["max-fraction-digits"]&&!(l=r.parseObjectValue(o["max-fraction-digits"],2,"max-fraction-digits",qE))?null:new e(n,i,a,s,u,l)}}])}();var JO={"==":UO,"!=":zO,">":qO,"<":HO,">=":KO,"<=":VO,array:k_,at:jO,"at-interpolated":MO,boolean:k_,case:LO,coalesce:kO,collator:U_,format:T_,image:j_,in:BO,"index-of":NO,interpolate:xO,"interpolate-hcl":xO,"interpolate-lab":xO,length:function(){function e(t){PE(this,e),this.type=qE,this.input=t}return OE(e,[{key:"evaluate",value:function(e){var t=this.input.evaluate(e);if("string"==typeof t)return t.length;if(Array.isArray(t))return t.length;throw new x_("Expected value to be of type string or array, but found ".concat(t_(__(t))," instead."))}},{key:"eachChild",value:function(e){e(this.input)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){var e=["length"];return this.eachChild(function(t){e.push(t.serialize())}),e}}],[{key:"parse",value:function(t,r){if(2!==t.length)return r.error("Expected 1 argument, but found ".concat(t.length-1," instead."));var n=r.parse(t[1],1);return n?"array"!==n.type.kind&&"string"!==n.type.kind&&"value"!==n.type.kind?r.error("Expected argument of type string or array, but found ".concat(t_(n.type)," instead.")):new e(n):null}}])}(),let:TO,literal:O_,match:RO,number:k_,"number-format":YO,object:k_,slice:DO,step:uO,string:k_,"to-boolean":N_,"to-color":N_,"to-number":N_,"to-string":N_,var:nO,within:sI,distance:KI,config:rO};function WO(e,t){var r=CE(t,4),n=r[0],o=r[1],i=r[2],a=r[3];n=n.evaluate(e),o=o.evaluate(e),i=i.evaluate(e);var s=a?a.evaluate(e):1,u=C_(n,o,i,s);if(u)throw new x_(u);return new h_(n/255,o/255,i/255,s)}function XO(e,t){var r=CE(t,4),n=r[0],o=r[1],i=r[2],a=r[3];n=n.evaluate(e),o=o.evaluate(e),i=i.evaluate(e);var s=a?a.evaluate(e):1,u=function(e,t,r,n){return"number"==typeof e&&e>=0&&e<=360?"number"==typeof t&&t>=0&&t<=100&&"number"==typeof r&&r>=0&&r<=100?void 0===n||"number"==typeof n&&n>=0&&n<=1?null:"Invalid hsla value [".concat([e,t,r,n].join(", "),"]: 'a' must be between 0 and 1."):"Invalid hsla value [".concat(("number"==typeof n?[e,t,r,n]:[e,t,r]).join(", "),"]: 's', and 'l' must be between 0 and 100."):"Invalid hsla value [".concat(("number"==typeof n?[e,t,r,n]:[e,t,r]).join(", "),"]: 'h' must be between 0 and 360.")}(n,o,i,s);if(u)throw new x_(u);var l="hsla(".concat(n,", ").concat(o,"%, ").concat(i,"%, ").concat(s,")"),c=h_.parse(l);if(!c)throw new x_("Failed to parse HSLA color: ".concat(l));return c}function ZO(e,t){return e in t}function $O(e,t){var r=t[e];return void 0===r?null:r}function ex(e){return{type:e}}function tx(e){return{result:"success",value:e}}function rx(e){return{result:"error",value:e}}function nx(e,t){return!!e&&!!e.parameters&&e.parameters.indexOf(t)>-1}function ox(e){return"data-driven"===e["property-type"]}function ix(e){return nx(e.expression,"measure-light")}function ax(e){return nx(e.expression,"zoom")}function sx(e){return!!e.expression&&e.expression.interpolated}function ux(e){return"object"===FE(e)&&null!==e&&!Array.isArray(e)}function lx(e){return e}function cx(e,t){var r,n,o,i="color"===t.type,a=e.stops&&"object"===FE(e.stops[0][0]),s=a||void 0!==e.property,u=a||!s,l=e.type||(sx(t)?"exponential":"interval");if(i&&((e=GE({},e)).stops&&(e.stops=e.stops.map(function(e){return[e[0],h_.parse(e[1])]})),e.default?e.default=h_.parse(e.default):e.default=h_.parse(t.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!OO[e.colorSpace])throw new Error("Unknown color space: ".concat(e.colorSpace));if("exponential"===l)r=yx;else if("interval"===l)r=hx;else if("categorical"===l){r=px,n=Object.create(null);var c,f=RE(e.stops);try{for(f.s();!(c=f.n()).done;){var p=c.value;n[p[0]]=p[1]}}catch(e){f.e(e)}finally{f.f()}o=FE(e.stops[0][0])}else{if("identity"!==l)throw new Error('Unknown function type "'.concat(l,'"'));r=dx}if(a){for(var h={},y=[],d=0;d<e.stops.length;d++){var m=e.stops[d],g=m[0].zoom;void 0===h[g]&&(h[g]={zoom:g,type:e.type,property:e.property,default:e.default,stops:[]},y.push(g)),h[g].stops.push([m[0].value,m[1]])}for(var v=[],b=0,A=y;b<A.length;b++){var w=A[b];v.push([h[w].zoom,cx(h[w],t)])}var S={name:"linear"};return{kind:"composite",interpolationType:S,interpolationFactor:xO.interpolationFactor.bind(void 0,S),zoomStops:v.map(function(e){return e[0]}),evaluate:function(r,n){var o=r.zoom;return yx({stops:v,base:e.base},t,o).evaluate(o,n)}}}if(u){var C="exponential"===l?{name:"exponential",base:void 0!==e.base?e.base:1}:null;return{kind:"camera",interpolationType:C,interpolationFactor:xO.interpolationFactor.bind(void 0,C),zoomStops:e.stops.map(function(e){return e[0]}),evaluate:function(i){var a=i.zoom;return r(e,t,a,n,o)}}}return{kind:"source",evaluate:function(i,a){var s=a&&a.properties?a.properties[e.property]:void 0;return void 0===s?fx(e.default,t.default):r(e,t,s,n,o)}}}function fx(e,t,r){return void 0!==e?e:void 0!==t?t:void 0!==r?r:void 0}function px(e,t,r,n,o){return fx(FE(r)===o?n[r]:void 0,e.default,t.default)}function hx(e,t,r){if("number"!==M_(r))return fx(e.default,t.default);var n=e.stops.length;if(1===n)return e.stops[0][1];if(r<=e.stops[0][0])return e.stops[0][1];if(r>=e.stops[n-1][0])return e.stops[n-1][1];var o=iO(e.stops.map(function(e){return e[0]}),r);return e.stops[o][1]}function yx(e,t,r){var n=void 0!==e.base?e.base:1;if("number"!==M_(r))return fx(e.default,t.default);var o=e.stops.length;if(1===o)return e.stops[0][1];if(r<=e.stops[0][0])return e.stops[0][1];if(r>=e.stops[o-1][0])return e.stops[o-1][1];var i=iO(e.stops.map(function(e){return e[0]}),r),a=function(e,t,r,n){var o=n-r,i=e-r;return 0===o?0:1===t?i/o:(Math.pow(t,i)-1)/(Math.pow(t,o)-1)}(r,n,e.stops[i][0],e.stops[i+1][0]),s=e.stops[i][1],u=e.stops[i+1][1],l=p_[t.type]||lx;if(e.colorSpace&&"rgb"!==e.colorSpace){var c=OO[e.colorSpace];l=function(e,t){return c.reverse(c.interpolate(c.forward(e),c.forward(t),a))}}return"function"==typeof s.evaluate?{evaluate:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=s.evaluate.apply(void 0,t),o=u.evaluate.apply(void 0,t);if(void 0!==n&&void 0!==o)return l(n,o,a)}}:l(s,u,a)}function dx(e,t,r){return"color"===t.type?r=h_.parse(r):"formatted"===t.type?r=b_.fromString(r.toString()):"resolvedImage"===t.type?r=S_.build(r.toString()):M_(r)===t.type||"enum"===t.type&&t.values[r]||(r=void 0),fx(r,e.default,t.default)}D_.register(JO,{error:[{kind:"error"},[VE],function(e,t){var r=CE(t,1)[0];throw new x_(r.evaluate(e))}],typeof:[VE,[WE],function(e,t){return t_(__(CE(t,1)[0].evaluate(e)))}],"to-rgba":[e_(qE,4),[YE],function(e,t){return CE(t,1)[0].evaluate(e).toNonPremultipliedRenderColor(null).toArray()}],"to-hsla":[e_(qE,4),[YE],function(e,t){return CE(t,1)[0].evaluate(e).toNonPremultipliedRenderColor(null).toHslaArray()}],rgb:[YE,[qE,qE,qE],WO],rgba:[YE,[qE,qE,qE,qE],WO],hsl:[YE,[qE,qE,qE],XO],hsla:[YE,[qE,qE,qE,qE],XO],has:{type:KE,overloads:[[[VE],function(e,t){return ZO(CE(t,1)[0].evaluate(e),e.properties())}],[[VE,JE],function(e,t){var r=CE(t,2),n=r[0],o=r[1];return ZO(n.evaluate(e),o.evaluate(e))}]]},get:{type:WE,overloads:[[[VE],function(e,t){return $O(CE(t,1)[0].evaluate(e),e.properties())}],[[VE,JE],function(e,t){var r=CE(t,2),n=r[0],o=r[1];return $O(n.evaluate(e),o.evaluate(e))}]]},"feature-state":[WE,[VE],function(e,t){return $O(CE(t,1)[0].evaluate(e),e.featureState||{})}],properties:[JE,[],function(e){return e.properties()}],"geometry-type":[VE,[],function(e){return e.geometryType()}],worldview:[VE,[],function(e){return e.globals.worldview||""}],id:[WE,[],function(e){return e.id()}],zoom:[qE,[],function(e){return e.globals.zoom}],pitch:[qE,[],function(e){return e.globals.pitch||0}],"distance-from-center":[qE,[],function(e){return e.distanceFromCenter()}],"measure-light":[qE,[VE],function(e,t){var r=CE(t,1)[0];return e.measureLight(r.evaluate(e))}],"heatmap-density":[qE,[],function(e){return e.globals.heatmapDensity||0}],"line-progress":[qE,[],function(e){return e.globals.lineProgress||0}],"raster-value":[qE,[],function(e){return e.globals.rasterValue||0}],"raster-particle-speed":[qE,[],function(e){return e.globals.rasterParticleSpeed||0}],"sky-radial-progress":[qE,[],function(e){return e.globals.skyRadialProgress||0}],accumulated:[WE,[],function(e){return void 0===e.globals.accumulated?null:e.globals.accumulated}],"+":[qE,ex(qE),function(e,t){var r,n=0,o=RE(t);try{for(o.s();!(r=o.n()).done;){n+=r.value.evaluate(e)}}catch(e){o.e(e)}finally{o.f()}return n}],"*":[qE,ex(qE),function(e,t){var r,n=1,o=RE(t);try{for(o.s();!(r=o.n()).done;){n*=r.value.evaluate(e)}}catch(e){o.e(e)}finally{o.f()}return n}],"-":{type:qE,overloads:[[[qE,qE],function(e,t){var r=CE(t,2),n=r[0],o=r[1];return n.evaluate(e)-o.evaluate(e)}],[[qE],function(e,t){return-CE(t,1)[0].evaluate(e)}]]},"/":[qE,[qE,qE],function(e,t){var r=CE(t,2),n=r[0],o=r[1];return n.evaluate(e)/o.evaluate(e)}],"%":[qE,[qE,qE],function(e,t){var r=CE(t,2),n=r[0],o=r[1];return n.evaluate(e)%o.evaluate(e)}],ln2:[qE,[],function(){return Math.LN2}],pi:[qE,[],function(){return Math.PI}],e:[qE,[],function(){return Math.E}],"^":[qE,[qE,qE],function(e,t){var r=CE(t,2),n=r[0],o=r[1];return Math.pow(n.evaluate(e),o.evaluate(e))}],sqrt:[qE,[qE],function(e,t){var r=CE(t,1)[0];return Math.sqrt(r.evaluate(e))}],log10:[qE,[qE],function(e,t){var r=CE(t,1)[0];return Math.log(r.evaluate(e))/Math.LN10}],ln:[qE,[qE],function(e,t){var r=CE(t,1)[0];return Math.log(r.evaluate(e))}],log2:[qE,[qE],function(e,t){var r=CE(t,1)[0];return Math.log(r.evaluate(e))/Math.LN2}],sin:[qE,[qE],function(e,t){var r=CE(t,1)[0];return Math.sin(r.evaluate(e))}],cos:[qE,[qE],function(e,t){var r=CE(t,1)[0];return Math.cos(r.evaluate(e))}],tan:[qE,[qE],function(e,t){var r=CE(t,1)[0];return Math.tan(r.evaluate(e))}],asin:[qE,[qE],function(e,t){var r=CE(t,1)[0];return Math.asin(r.evaluate(e))}],acos:[qE,[qE],function(e,t){var r=CE(t,1)[0];return Math.acos(r.evaluate(e))}],atan:[qE,[qE],function(e,t){var r=CE(t,1)[0];return Math.atan(r.evaluate(e))}],min:[qE,ex(qE),function(e,t){return Math.min.apply(Math,wE(t.map(function(t){return t.evaluate(e)})))}],max:[qE,ex(qE),function(e,t){return Math.max.apply(Math,wE(t.map(function(t){return t.evaluate(e)})))}],abs:[qE,[qE],function(e,t){var r=CE(t,1)[0];return Math.abs(r.evaluate(e))}],round:[qE,[qE],function(e,t){var r=CE(t,1)[0].evaluate(e);return r<0?-Math.round(-r):Math.round(r)}],floor:[qE,[qE],function(e,t){var r=CE(t,1)[0];return Math.floor(r.evaluate(e))}],ceil:[qE,[qE],function(e,t){var r=CE(t,1)[0];return Math.ceil(r.evaluate(e))}],"filter-==":[KE,[VE,WE],function(e,t){var r=CE(t,2),n=r[0],o=r[1];return e.properties()[n.value]===o.value}],"filter-id-==":[KE,[WE],function(e,t){var r=CE(t,1)[0];return e.id()===r.value}],"filter-type-==":[KE,[VE],function(e,t){var r=CE(t,1)[0];return e.geometryType()===r.value}],"filter-<":[KE,[VE,WE],function(e,t){var r=CE(t,2),n=r[0],o=r[1],i=e.properties()[n.value],a=o.value;return FE(i)===FE(a)&&i<a}],"filter-id-<":[KE,[WE],function(e,t){var r=CE(t,1)[0],n=e.id(),o=r.value;return FE(n)===FE(o)&&n<o}],"filter->":[KE,[VE,WE],function(e,t){var r=CE(t,2),n=r[0],o=r[1],i=e.properties()[n.value],a=o.value;return FE(i)===FE(a)&&i>a}],"filter-id->":[KE,[WE],function(e,t){var r=CE(t,1)[0],n=e.id(),o=r.value;return FE(n)===FE(o)&&n>o}],"filter-<=":[KE,[VE,WE],function(e,t){var r=CE(t,2),n=r[0],o=r[1],i=e.properties()[n.value],a=o.value;return FE(i)===FE(a)&&i<=a}],"filter-id-<=":[KE,[WE],function(e,t){var r=CE(t,1)[0],n=e.id(),o=r.value;return FE(n)===FE(o)&&n<=o}],"filter->=":[KE,[VE,WE],function(e,t){var r=CE(t,2),n=r[0],o=r[1],i=e.properties()[n.value],a=o.value;return FE(i)===FE(a)&&i>=a}],"filter-id->=":[KE,[WE],function(e,t){var r=CE(t,1)[0],n=e.id(),o=r.value;return FE(n)===FE(o)&&n>=o}],"filter-has":[KE,[WE],function(e,t){return CE(t,1)[0].value in e.properties()}],"filter-has-id":[KE,[],function(e){return null!==e.id()&&void 0!==e.id()}],"filter-type-in":[KE,[e_(VE)],function(e,t){return CE(t,1)[0].value.indexOf(e.geometryType())>=0}],"filter-id-in":[KE,[e_(WE)],function(e,t){return CE(t,1)[0].value.indexOf(e.id())>=0}],"filter-in-small":[KE,[VE,e_(WE)],function(e,t){var r=CE(t,2),n=r[0];return r[1].value.indexOf(e.properties()[n.value])>=0}],"filter-in-large":[KE,[VE,e_(WE)],function(e,t){var r=CE(t,2),n=r[0],o=r[1];return function(e,t,r,n){for(;r<=n;){var o=r+n>>1;if(t[o]===e)return!0;t[o]>e?n=o-1:r=o+1}return!1}(e.properties()[n.value],o.value,0,o.value.length-1)}],all:{type:KE,overloads:[[[KE,KE],function(e,t){var r=CE(t,2),n=r[0],o=r[1];return n.evaluate(e)&&o.evaluate(e)}],[ex(KE),function(e,t){var r,n=RE(t);try{for(n.s();!(r=n.n()).done;){if(!r.value.evaluate(e))return!1}}catch(e){n.e(e)}finally{n.f()}return!0}]]},any:{type:KE,overloads:[[[KE,KE],function(e,t){var r=CE(t,2),n=r[0],o=r[1];return n.evaluate(e)||o.evaluate(e)}],[ex(KE),function(e,t){var r,n=RE(t);try{for(n.s();!(r=n.n()).done;){if(r.value.evaluate(e))return!0}}catch(e){n.e(e)}finally{n.f()}return!1}]]},"!":[KE,[KE],function(e,t){return!CE(t,1)[0].evaluate(e)}],"is-supported-script":[KE,[VE],function(e,t){var r=CE(t,1)[0],n=e.globals&&e.globals.isSupportedScript;return!n||n(r.evaluate(e))}],upcase:[VE,[VE],function(e,t){return CE(t,1)[0].evaluate(e).toUpperCase()}],downcase:[VE,[VE],function(e,t){return CE(t,1)[0].evaluate(e).toLowerCase()}],concat:[VE,ex(WE),function(e,t){return t.map(function(t){return I_(t.evaluate(e))}).join("")}],"resolved-locale":[VE,[XE],function(e,t){return CE(t,1)[0].evaluate(e).resolvedLocale()}],random:[qE,[qE,qE,WE],function(e,t){var r,n,o=CE(t.map(function(t){return t.evaluate(e)}),3),i=o[0],a=o[1],s=o[2];if(i>a)return i;if(i===a)return i;if("string"==typeof s)r=function(e){var t=0;if(0===e.length)return t;for(var r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t&=t;return t}(s);else{if("number"!=typeof s)throw new x_("Invalid seed input: ".concat(s));r=s}return i+(n=r,function(){n=1831565813+(n|=0)|0;var e=Math.imul(n^n>>>15,1|n);return(((e=e+Math.imul(e^e>>>7,61|e)^e)^e>>>14)>>>0)/4294967296})()*(a-i)}]});var mx=function(){return OE(function e(t,r,n,o){var i;PE(this,e),this.expression=t,this._warningHistory={},this._evaluator=new L_(n,o),this._defaultValue=r?"color"===(i=r).type&&(ux(i.default)||Array.isArray(i.default))?new h_(0,0,0,0):"color"===i.type?h_.parse(i.default)||null:void 0===i.default?null:i.default:null,this._enumValues=r&&"enum"===r.type?r.values:null,this.configDependencies=WI(t)},[{key:"evaluateWithoutErrorHandling",value:function(e,t,r,n,o,i,a,s){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=r,this._evaluator.canonical=n||null,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=i,this._evaluator.featureTileCoord=a||null,this._evaluator.featureDistanceData=s||null,this.expression.evaluate(this._evaluator)}},{key:"evaluate",value:function(e,t,r,n,o,i,a,s){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=r||null,this._evaluator.canonical=n||null,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=i||null,this._evaluator.featureTileCoord=a||null,this._evaluator.featureDistanceData=s||null;try{var u=this.expression.evaluate(this._evaluator);if(null===u||void 0===u||"number"==typeof u&&u!=u)return this._defaultValue;if(this._enumValues&&!(u in this._enumValues))throw new x_("Expected value to be one of ".concat(Object.keys(this._enumValues).map(function(e){return JSON.stringify(e)}).join(", "),", but found ").concat(JSON.stringify(u)," instead."));return u}catch(e){return this._warningHistory[e.message]||(this._warningHistory[e.message]=!0,"undefined"!=typeof console&&console.warn('Failed to evaluate expression "'.concat(JSON.stringify(this.expression.serialize()),'". ').concat(e.message))),this._defaultValue}}}])}();function gx(e){return Array.isArray(e)&&e.length>0&&"string"==typeof e[0]&&e[0]in JO}function vx(e,t,r,n){var o=new oO(JO,[],t?function(e){var t={color:YE,string:VE,number:qE,enum:VE,boolean:KE,formatted:ZE,resolvedImage:$E};if("array"===e.type)return e_(t[e.value]||WE,e.length);return t[e.type]}(t):void 0,void 0,void 0,r,n),i=o.parse(e,void 0,void 0,void 0,t&&"string"===t.type?{typeAnnotation:"coerce"}:void 0);return i?tx(new mx(i,t,r,n)):rx(o.errors)}var bx=function(){return OE(function e(t,r,n,o){PE(this,e),this.kind=t,this._styleExpression=r,this.isLightConstant=n,this.isLineProgressConstant=o,this.isStateDependent="constant"!==t&&!JI(r.expression),this.configDependencies=WI(r.expression)},[{key:"evaluateWithoutErrorHandling",value:function(e,t,r,n,o,i){return this._styleExpression.evaluateWithoutErrorHandling(e,t,r,n,o,i)}},{key:"evaluate",value:function(e,t,r,n,o,i){return this._styleExpression.evaluate(e,t,r,n,o,i)}}])}(),Ax=function(){return OE(function e(t,r,n,o,i,a){PE(this,e),this.kind=t,this.zoomStops=n,this._styleExpression=r,this.isStateDependent="camera"!==t&&!JI(r.expression),this.isLightConstant=i,this.isLineProgressConstant=a,this.configDependencies=WI(r.expression),this.interpolationType=o},[{key:"evaluateWithoutErrorHandling",value:function(e,t,r,n,o,i){return this._styleExpression.evaluateWithoutErrorHandling(e,t,r,n,o,i)}},{key:"evaluate",value:function(e,t,r,n,o,i){return this._styleExpression.evaluate(e,t,r,n,o,i)}},{key:"interpolationFactor",value:function(e,t,r){return this.interpolationType?xO.interpolationFactor(this.interpolationType,e,t,r):0}}])}();function wx(e,t,r,n){if("error"===(e=vx(e,t,r,n)).result)return e;var o=e.value.expression,i=YI(o);if(!i&&!ox(t))return rx([new UE("","data expressions not supported")]);var a=XI(o,["zoom","pitch","distance-from-center"]);if(!a&&!ax(t))return rx([new UE("","zoom expressions not supported")]);var s=XI(o,["measure-light"]);if(!s&&!ix(t))return rx([new UE("","measure-light expression not supported")]);var u=XI(o,["line-progress"]);if(!u&&!nx(t.expression,"line-progress"))return rx([new UE("","line-progress expression not supported")]);var l=t.expression&&t.expression.relaxZoomRestriction,c=function e(t){var r=null;if(t instanceof TO)r=e(t.result);else if(t instanceof kO){var n,o=RE(t.args);try{for(o.s();!(n=o.n()).done;){var i=n.value;if(r=e(i))break}}catch(e){o.e(e)}finally{o.f()}}else(t instanceof uO||t instanceof xO)&&t.input instanceof D_&&"zoom"===t.input.name&&(r=t);if(r instanceof UE)return r;t.eachChild(function(t){var n=e(t);n instanceof UE?r=n:r&&n&&r!==n&&(r=new UE("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))});return r}(o);if(!(c||a||l))return rx([new UE("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression, or in the properties of atmosphere.')]);if(c instanceof UE)return rx([c]);if(c instanceof xO&&!sx(t))return rx([new UE("",'"interpolate" expressions cannot be used with this property')]);if(!c)return tx(new bx(i&&u?"constant":"source",e.value,s,u));var f=c instanceof xO?c.interpolation:void 0;return tx(new Ax(i&&u?"camera":"composite",e.value,c.labels,f,s,u))}var Sx=function(){function e(t,r){PE(this,e),this._parameters=t,this._specification=r,GE(this,cx(this._parameters,this._specification))}return OE(e,null,[{key:"deserialize",value:function(t){return new e(t._parameters,t._specification)}},{key:"serialize",value:function(e){return{_parameters:e._parameters,_specification:e._specification}}}])}();function Cx(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function Ex(e){if(Array.isArray(e))return e.map(Ex);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){var t={};for(var r in e)t[r]=Ex(e[r]);return t}return Cx(e)}function _x(e){if(!0===e||!1===e)return!0;if(!Array.isArray(e)||0===e.length)return!1;switch(e[0]){case"has":return e.length>=2&&"$id"!==e[1]&&"$type"!==e[1];case"in":return e.length>=3&&("string"!=typeof e[1]||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==e.length||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":var t,r=RE(e.slice(1));try{for(r.s();!(t=r.n()).done;){var n=t.value;if(!_x(n)&&"boolean"!=typeof n)return!1}}catch(e){r.e(e)}finally{r.f()}return!0;default:return!0}}function Ix(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"fill";if(null===e||void 0===e)return{filter:function(){return!0},needGeometry:!1,needFeature:!1};_x(e)||(e=kx(e));var o=e,i=!0;try{i=function(e){if(!Ox(e))return e;var t=Ex(e);return function e(t){var r=!1,n=[];if("case"===t[0]){for(var o=1;o<t.length-1;o+=2)r=r||Ox(t[o]),n.push(t[o+1]);n.push(t[t.length-1])}else if("match"===t[0]){r=r||Ox(t[1]);for(var i=2;i<t.length-1;i+=2)n.push(t[i+1]);n.push(t[t.length-1])}else if("step"===t[0]){r=r||Ox(t[1]);for(var a=1;a<t.length-1;a+=2)n.push(t[a+1])}r&&(t.length=0,t.push.apply(t,["any"].concat(n)));for(var s=1;s<t.length;s++)e(t[s])}(t),t=function e(t){if(!Array.isArray(t))return t;var r=function(e){if(xx.has(e[0]))for(var t=1;t<e.length;t++){var r=e[t];if(Ox(r))return!0}return e}(t);return!0===r?r:r.map(function(t){return e(t)})}(t)}(o)}catch(e){console.warn("Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n".concat(JSON.stringify(o,null,2),"\n        "))}var a=null,s=null;if("background"!==n&&"sky"!==n&&"slot"!==n){var u=vx(i,s=QE["filter_".concat(n)],t,r);if("error"===u.result)throw new Error(u.value.map(function(e){return"".concat(e.key,": ").concat(e.message)}).join(", "));a=function(e,t,r){return u.value.evaluate(e,t,{},r)}}var l=null,c=null;if(i!==o){var f=vx(o,s,t,r);if("error"===f.result)throw new Error(f.value.map(function(e){return"".concat(e.key,": ").concat(e.message)}).join(", "));l=function(e,t,r,n,o){return f.value.evaluate(e,t,{},r,void 0,void 0,n,o)},c=!YI(f.value.expression)}a=a;var p=function e(t){if(!Array.isArray(t))return!1;if("within"===t[0]||"distance"===t[0])return!0;for(var r=1;r<t.length;r++)if(e(t[r]))return!0;return!1}(i);return{filter:a,dynamicFilter:l||void 0,needGeometry:p,needFeature:!!c}}function Ox(e){if(!Array.isArray(e))return!1;if("pitch"===(t=e[0])||"distance-from-center"===t)return!0;for(var t,r=1;r<e.length;r++){if(Ox(e[r]))return!0}return!1}var xx=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function Px(e,t){return e<t?-1:e>t?1:0}function kx(e){if(!e)return!0;var t,r=e[0];return e.length<=1?"any"!==r:"=="===r?Tx(e[1],e[2],"=="):"!="===r?Bx(Tx(e[1],e[2],"==")):"<"===r||">"===r||"<="===r||">="===r?Tx(e[1],e[2],r):"any"===r?(t=e.slice(1),["any"].concat(t.map(kx))):"all"===r?["all"].concat(e.slice(1).map(kx)):"none"===r?["all"].concat(e.slice(1).map(kx).map(Bx)):"in"===r?jx(e[1],e.slice(2)):"!in"===r?Bx(jx(e[1],e.slice(2))):"has"===r?Mx(e[1]):"!has"!==r||Bx(Mx(e[1]))}function Tx(e,t,r){switch(e){case"$type":return["filter-type-".concat(r),t];case"$id":return["filter-id-".concat(r),t];default:return["filter-".concat(r),e,t]}}function jx(e,t){if(0===t.length)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(function(e){return FE(e)!==FE(t[0])})?["filter-in-large",e,["literal",t.sort(Px)]]:["filter-in-small",e,["literal",t]]}}function Mx(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function Bx(e){return["!",e]}var Nx,Rx={};!function(){return Nx?Rx:(Nx=1,e=Rx,t=function(){var e=function(e,t,r,n){for(r=r||{},n=e.length;n--;r[e[n]]=t);return r},t=[1,12],r=[1,13],n=[1,9],o=[1,10],i=[1,11],a=[1,14],s=[1,15],u=[14,18,22,24],l=[18,22],c=[22,24],f={trace:function(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(e,t,r,n,o,i,a){var s=i.length-1;switch(o){case 1:this.$=new String(e.replace(/\\(\\|")/g,"$1").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\v/g,"\v").replace(/\\f/g,"\f").replace(/\\b/g,"\b")),this.$.__line__=this._$.first_line;break;case 2:this.$=new Number(e),this.$.__line__=this._$.first_line;break;case 3:this.$=null;break;case 4:this.$=new Boolean(!0),this.$.__line__=this._$.first_line;break;case 5:this.$=new Boolean(!1),this.$.__line__=this._$.first_line;break;case 6:return this.$=i[s-1];case 13:this.$={},Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 14:case 19:this.$=i[s-1],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 15:this.$=[i[s-2],i[s]];break;case 16:this.$={},this.$[i[s][0]]=i[s][1];break;case 17:this.$=i[s-2],i[s-2][i[s][0]]=i[s][1];break;case 18:this.$=[],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 20:this.$=[i[s]];break;case 21:this.$=i[s-2],i[s-2].push(i[s])}},table:[{3:5,4:t,5:6,6:r,7:3,8:n,9:4,10:o,11:i,12:1,13:2,15:7,16:8,17:a,23:s},{1:[3]},{14:[1,16]},e(u,[2,7]),e(u,[2,8]),e(u,[2,9]),e(u,[2,10]),e(u,[2,11]),e(u,[2,12]),e(u,[2,3]),e(u,[2,4]),e(u,[2,5]),e([14,18,21,22,24],[2,1]),e(u,[2,2]),{3:20,4:t,18:[1,17],19:18,20:19},{3:5,4:t,5:6,6:r,7:3,8:n,9:4,10:o,11:i,13:23,15:7,16:8,17:a,23:s,24:[1,21],25:22},{1:[2,6]},e(u,[2,13]),{18:[1,24],22:[1,25]},e(l,[2,16]),{21:[1,26]},e(u,[2,18]),{22:[1,28],24:[1,27]},e(c,[2,20]),e(u,[2,14]),{3:20,4:t,20:29},{3:5,4:t,5:6,6:r,7:3,8:n,9:4,10:o,11:i,13:30,15:7,16:8,17:a,23:s},e(u,[2,19]),{3:5,4:t,5:6,6:r,7:3,8:n,9:4,10:o,11:i,13:31,15:7,16:8,17:a,23:s},e(l,[2,17]),e(l,[2,15]),e(c,[2,21])],defaultActions:{16:[2,6]},parseError:function(e,t){if(!t.recoverable)throw new Error(e);this.trace(e)},parse:function(e){var t=this,r=[0],n=[null],o=[],i=this.table,a="",s=0,u=0,l=1,c=o.slice.call(arguments,1),f=Object.create(this.lexer),p={yy:{}};for(var h in this.yy)Object.prototype.hasOwnProperty.call(this.yy,h)&&(p.yy[h]=this.yy[h]);f.setInput(e,p.yy),p.yy.lexer=f,p.yy.parser=this,void 0===f.yylloc&&(f.yylloc={});var y=f.yylloc;o.push(y);var d=f.options&&f.options.ranges;"function"==typeof p.yy.parseError?this.parseError=p.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var m,g,v,b,A,w,S,C,E,_={};;){if(g=r[r.length-1],this.defaultActions[g]?v=this.defaultActions[g]:(null!==m&&void 0!==m||(E=void 0,"number"!=typeof(E=f.lex()||l)&&(E=t.symbols_[E]||E),m=E),v=i[g]&&i[g][m]),void 0===v||!v.length||!v[0]){var I="";for(A in C=[],i[g])this.terminals_[A]&&A>2&&C.push("'"+this.terminals_[A]+"'");I=f.showPosition?"Parse error on line "+(s+1)+":\n"+f.showPosition()+"\nExpecting "+C.join(", ")+", got '"+(this.terminals_[m]||m)+"'":"Parse error on line "+(s+1)+": Unexpected "+(m==l?"end of input":"'"+(this.terminals_[m]||m)+"'"),this.parseError(I,{text:f.match,token:this.terminals_[m]||m,line:f.yylineno,loc:y,expected:C})}if(v[0]instanceof Array&&v.length>1)throw new Error("Parse Error: multiple actions possible at state: "+g+", token: "+m);switch(v[0]){case 1:r.push(m),n.push(f.yytext),o.push(f.yylloc),r.push(v[1]),m=null,u=f.yyleng,a=f.yytext,s=f.yylineno,y=f.yylloc;break;case 2:if(w=this.productions_[v[1]][1],_.$=n[n.length-w],_._$={first_line:o[o.length-(w||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(w||1)].first_column,last_column:o[o.length-1].last_column},d&&(_._$.range=[o[o.length-(w||1)].range[0],o[o.length-1].range[1]]),void 0!==(b=this.performAction.apply(_,[a,u,s,p.yy,v[1],n,o].concat(c))))return b;w&&(r=r.slice(0,-1*w*2),n=n.slice(0,-1*w),o=o.slice(0,-1*w)),r.push(this.productions_[v[1]][0]),n.push(_.$),o.push(_._$),S=i[r[r.length-2]][r[r.length-1]],r.push(S);break;case 3:return!0}}return!0}},p={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,r=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t),this.offset-=t;var n=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1);var o=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===n.length?this.yylloc.first_column:0)+n[n.length-r.length].length-r[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[o[0],o[0]+this.yyleng-t]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},test_match:function(e,t){var r,n,o;if(this.options.backtrack_lexer&&(o={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(o.yylloc.range=this.yylloc.range.slice(0))),(n=e[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=n.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:n?n[n.length-1].length-n[n.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],r=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack){for(var i in o)this[i]=o[i];return!1}return!1},next:function(){if(this.done)return this.EOF;var e,t,r,n;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var o=this._currentRules(),i=0;i<o.length;i++)if((r=this._input.match(this.rules[o[i]]))&&(!t||r[0].length>t[0].length)){if(t=r,n=i,this.options.backtrack_lexer){if(!1!==(e=this.test_match(r,o[i])))return e;if(this._backtrack){t=!1;continue}return!1}if(!this.options.flex)break}return t?!1!==(e=this.test_match(t,o[n]))&&e:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return e||this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(e){return(e=this.conditionStack.length-1-Math.abs(e||0))>=0?this.conditionStack[e]:"INITIAL"},pushState:function(e){this.begin(e)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(e,t,r,n){switch(r){case 0:break;case 1:return 6;case 2:return t.yytext=t.yytext.substr(1,t.yyleng-2),4;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}};function h(){this.yy={}}return f.lexer=p,h.prototype=f,f.Parser=h,new h}(),e.parser=t,e.Parser=t.Parser,e.parse=function(){return t.parse.apply(t,arguments)},Rx);var e,t}();var Lx={StyleExpression:mx,isExpression:gx,isExpressionFilter:_x,createExpression:vx,createPropertyExpression:wx,normalizePropertyExpression:function(e,t,r,n){if(ux(e))return new Sx(e,t);if(gx(e)||Array.isArray(e)&&e.length>0){var o=wx(e,t,r,n);if("error"===o.result)throw new Error(o.value.map(function(e){return"".concat(e.key,": ").concat(e.message)}).join(", "));return o.value}var i=e;return"string"==typeof e&&"color"===t.type&&(i=h_.parse(e)),{kind:"constant",configDependencies:new Set,evaluate:function(){return i}}},ZoomConstantExpression:bx,ZoomDependentExpression:Ax,StylePropertyFunction:Sx};function Dx(e){"@babel/helpers - typeof";return(Dx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fx(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],u=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Qx(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Qx(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qx(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Gx(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Ux(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Gx(Object(r),!0).forEach(function(t){zx(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gx(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function zx(e,t,r){return(t=qx(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Hx(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,qx(n.key),n)}}function qx(e){var t=function(e,t){if("object"!=Dx(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Dx(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Dx(t)?t:t+""}function Vx(e,t,r){return t=Kx(t),function(e,t){if(t&&("object"==Dx(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],Kx(e).constructor):t.apply(e,r))}function Kx(e){return(Kx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Yx(e,t){return(Yx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Jx=function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=e.type,o=e.options,i=void 0===o?{}:o;return r=Vx(this,t,[e]),"ThreeLayer"!==n&&(r.l7layer=new EC[n](Ux(Ux({},i),{},{name:r.id})),r.setDataFn=r.l7layer.setData.bind(r.l7layer)),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yx(e,t)}(t,SC),r=t,(n=[{key:"onAdd",value:function(e){var t=this;if(this.map=e,!e.$l7scene){var r=CC(EC.Scene,EC.Mapbox,e);return e.$l7scene=r,void r.on("loaded",function(){t.addSceneLayer(r)})}this.addSceneLayer(e.$l7scene)}},{key:"_getL7Filter",value:function(e){return bE(e,Ix)}},{key:"queryRenderedFeatures",value:function(e,t,r){if(!this.l7layer||!this.l7layer.isVisible())return r([]);var n=e;if(e instanceof o().Point||"number"==typeof e[0]){var i=o().Point.convert(e);n=[i,[i.x-1,i.y-1]]}var a=Fx((n=n.map(function(e){var t=o().Point.convert(e);return[t.x,t.y]})).flat(),4),s=a[0],u=a[1],l=a[2],c=a[3],f=this;this.l7layer.boxSelect([Math.min(s,l),Math.min(u,c),Math.max(s,l),Math.max(u,c)],function(e){var n=e||[],o=(t||{}).layerCapture;r(void 0===o||o?n.map(function(e){return Ux(Ux({},e),{},{layer:f.getLayer()})}):n)})}},{key:"_formateEvent",value:function(e){return Ux(Ux({},e),{},{originalEvent:e.target,target:this.map,point:o().Point.convert([e.x,e.y])})}}])&&Hx(r.prototype,n),i&&Hx(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,i}();function Wx(e){"@babel/helpers - typeof";return(Wx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xx(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Zx(n.key),n)}}function Zx(e){var t=function(e,t){if("object"!=Wx(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Wx(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Wx(t)?t:t+""}o().Map.prototype.getL7Scene=function(){var e=this;return new Promise(function(t){if(e.$l7scene)t(e.$l7scene);else{var r=CC(EC.Scene,EC.Mapbox,e);r.on("loaded",function(){e.$l7scene=r,t(r)})}})};var $x=function(){return e=function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.lngLat=To.isArray(t)?{lng:t[0],lat:t[1]}:t,this.style=To.extend({},r),this.attributes=n},(t=[{key:"getId",value:function(){return this.id}},{key:"setId",value:function(e){this.id=e}},{key:"getLngLat",value:function(){return this.lngLat}},{key:"setLngLat",value:function(e){this.lngLat=To.isArray(e)?{lng:e[0],lat:e[1]}:e}},{key:"setStyle",value:function(e){this.style=To.extend(this.style,e)}},{key:"getStyle",value:function(){return this.style}},{key:"setAttributes",value:function(e){this.attributes=To.extend({},this.attributes,e)}},{key:"getAttributes",value:function(){return this.attributes}}])&&Xx(e.prototype,t),r&&Xx(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}(),eP={getPoint:function(e){if(e&&e instanceof Array)return new $c.DataSet([{geometry:{type:"Point",coordinates:e}}])},getPoints:function(e){if(e&&e instanceof Array){var t=[];return e.forEach(function(e){t.push({geometry:{type:"Point",coordinates:e.geometry.coordinates}})}),new $c.DataSet(t)}},getCurveLines:function(e,t){if(e&&e instanceof Array&&t&&t instanceof Array){var r=[];return t.forEach(function(t){var n=t.geometry&&t.geometry.coordinates,o={lng:n[0],lat:n[1]},i={lng:e[0],lat:e[1]},a=$c.utilCurve.getPoints([i,o]);r.push({geometry:{type:"LineString",coordinates:a}})}),new $c.DataSet(r)}},getCurveDynamicPoints:function(e,t){if(e&&e instanceof Array&&t&&t instanceof Array){var r=[];return t.forEach(function(t){for(var n=t.geometry&&t.geometry.coordinates,o={lng:n[0],lat:n[1]},i={lng:e[0],lat:e[1]},a=$c.utilCurve.getPoints([i,o]),s=0;s<a.length;s++)r.push({geometry:{type:"Point",coordinates:a[s]},time:s})}),new $c.DataSet(r)}}};function tP(e,t,r,n,o){return{id:e,type:t,source:r||"vector-tiles","source-layer":n||e,paint:o}}function rP(e){"@babel/helpers - typeof";return(rP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function oP(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?nP(Object(r),!0).forEach(function(t){iP(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nP(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function iP(e,t,r){return(t=sP(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,sP(n.key),n)}}function sP(e){var t=function(e,t){if("object"!=rP(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=rP(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==rP(t)?t:t+""}var uP=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.map=t},(t=[{key:"addLayer",value:function(e,t,r){e.paint&&Object.assign(t.paint||{},e.paint),e.layout&&Object.assign(t.layout||{},e.layout),this.map.addLayerBySymbolBak(oP(oP({},e),t),r)}}])&&aP(e.prototype,t),r&&aP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function lP(e){"@babel/helpers - typeof";return(lP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function fP(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?cP(Object(r),!0).forEach(function(t){pP(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cP(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function pP(e,t,r){return(t=yP(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,yP(n.key),n)}}function yP(e){var t=function(e,t){if("object"!=lP(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=lP(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==lP(t)?t:t+""}var dP=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.map=t,this.singleSymbol=new uP(t),this.layerIds={}},(t=[{key:"addLayer",value:function(e,t,r){var n=this;t.forEach(function(t){var o=M.createUniqueID("".concat(e.id,"_compositeLayer_"));n.singleSymbol.addLayer(fP(fP({},e),{},{id:o}),t,r),n.addLayerId(e.id,o)})}},{key:"addLayerId",value:function(e,t){this.layerIds[e]||(this.layerIds[e]=[]),!this.layerIds[e].includes(t)&&this.layerIds[e].push(t)}},{key:"removeLayerId",value:function(e){delete this.layerIds[e]}},{key:"getLayerIds",value:function(e){return this.layerIds[e]}},{key:"getLayerId",value:function(e){for(var t in this.layerIds)if(this.layerIds[t].find(function(t){return t===e}))return t}}])&&hP(e.prototype,t),r&&hP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function mP(e){"@babel/helpers - typeof";return(mP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,vP(n.key),n)}}function vP(e){var t=function(e,t){if("object"!=mP(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=mP(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==mP(t)?t:t+""}var bP=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.symbols={},this.images={}},(t=[{key:"addSymbol",value:function(e,t){t.layout&&delete t.layout.visibility,this.symbols[e]=t}},{key:"getSymbol",value:function(e){return this.symbols[e]&&JSON.parse(JSON.stringify(this.symbols[e]))}},{key:"removeSymbol",value:function(e){delete this.symbols[e]}},{key:"addImageInfo",value:function(e,t){this.images[e]=t}},{key:"getImageInfo",value:function(e){return this.images[e]}}])&&gP(e.prototype,t),r&&gP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function AP(e){"@babel/helpers - typeof";return(AP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wP(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],u=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||SP(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function SP(e,t){if(e){if("string"==typeof e)return CP(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?CP(e,t):void 0}}function CP(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function EP(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=AP(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=AP(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==AP(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _P={circle:"circle",symbol:"symbol",line:"line",fill:"fill"},IP=[{prefix:"line-",type:_P.line},{prefix:"fill-",type:_P.fill},{prefix:"circle-",type:_P.circle}];function OP(e){return e&&e.length>0}function xP(e){var t=function(e){var t,r,n=e.paint,o=void 0===n?{}:n,i=e.layout,a=void 0===i?{}:i,s=Object.keys(o).concat(Object.keys(a)),u=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=SP(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}(IP);try{var l=function(){var e=r.value,n=s.some(function(t){return t.startsWith(e.prefix)});if(n)return t=e.type,1};for(u.s();!(r=u.n()).done&&!l(););}catch(e){u.e(e)}finally{u.f()}return t||_P.symbol}(e);return EP(EP(EP({},_P.symbol,{type:"layout",name:"icon-image"}),_P.line,{type:"paint",name:"line-pattern"}),_P.fill,{type:"paint",name:"fill-pattern"})[t]}var PP=["array","boolean","collator","format","literal","number","object","string","to-boolean","to-color","to-number","to-string","typeof","feature-state","geometry-type","id","line-progress","properties","at","get","has","length","!","!=","<","<=","==",">",">=","all","any","case","match","coalesce","interpolate","interpolate-hcl","interpolate-lab","step","let","var","concat","downcase","is-supported-script","resolved-locale","upcase","rgb","rgba","-","*","/","%","^","+","abs","acos","asin","atan","ceil","cos","e","floor","ln","ln2","log10","log2","max","min","pi","round","sin","sqrt","tan","zoom","heatmap-density"];function kP(e){if(e&&e.length>0){var t=wP(e,1)[0];return"string"==typeof t&&PP.includes(t)}return!1}function TP(e){return Object.keys(e).every(function(t){return!kP(e[t])})}function jP(e){return(OP(e)?e:[e]).every(function(e){return TP(e.paint||{})&&TP(e.layout||{})})}var MP=function(e){return["background-color","background-color-transition","background-pattern","background-pattern-transition","background-opacity","background-opacity-transition","fill-antialias","fill-opacity","fill-opacity-transition","fill-color","fill-color-transition","fill-outline-color","fill-outline-color-transition","fill-translate","fill-translate-transition","fill-translate-anchor","fill-pattern","fill-pattern-transition","fill-extrusion-opacity","fill-extrusion-opacity-transition","fill-extrusion-color","fill-extrusion-color-transition","fill-extrusion-translate","fill-extrusion-translate-transition","fill-extrusion-translate-anchor","fill-extrusion-pattern","fill-extrusion-pattern-transition","fill-extrusion-height","fill-extrusion-height-transition","fill-extrusion-base","fill-extrusion-base-transition","fill-extrusion-vertical-gradient","line-opacity","line-opacity-transition","line-color","line-color-transition","line-translate","line-translate-transition","line-translate-anchor","line-width","line-width-transition","line-gap-width","line-gap-width-transition","line-offset","line-offset-transition","line-blur","line-blur-transition","line-dasharray","line-dasharray-transition","line-pattern","line-pattern-transition","line-gradient","icon-opacity","icon-opacity-transition","icon-color","icon-color-transition","icon-halo-color","icon-halo-color-transition","icon-halo-width","icon-halo-width-transition","icon-halo-blur","icon-halo-blur-transition","icon-translate","icon-translate-transition","icon-translate-anchor","text-opacity","text-opacity-transition","text-color","text-color-transition","text-halo-color","text-halo-color-transition","text-halo-width","text-halo-width-transition","text-halo-blur","text-halo-blur-transition","text-translate","text-translate-transition","text-translate-anchor","raster-opacity","raster-opacity-transition","raster-hue-rotate","raster-hue-rotate-transition","raster-brightness-min","raster-brightness-min-transition","raster-brightness-max","raster-brightness-max-transition","raster-saturation","raster-saturation-transition","raster-contrast","raster-contrast-transition","raster-fade-duration","raster-resampling","circle-sort-key","circle-radius","circle-radius-transition","circle-color","circle-color-transition","circle-blur","circle-blur-transition","circle-opacity","circle-opacity-transition","circle-translate","circle-translate-transition","circle-translate-anchor","circle-pitch-scale","circle-pitch-alignment","circle-stroke-width","circle-stroke-width-transition","circle-stroke-color","circle-stroke-color-transition","circle-stroke-opacity","circle-stroke-opacity-transition","heatmap-radius","heatmap-radius-transition","heatmap-weight","heatmap-intensity","heatmap-intensity-transition","heatmap-color","heatmap-opacity","heatmap-opacity-transition","hillshade-illumination-direction","hillshade-illumination-anchor","hillshade-exaggeration","hillshade-exaggeration-transition","hillshade-shadow-color","hillshade-shadow-color-transition","hillshade-highlight-color","hillshade-highlight-color-transition","hillshade-accent-color","hillshade-accent-color-transition"].includes(e)};function BP(e){"@babel/helpers - typeof";return(BP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function NP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function RP(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?NP(Object(r),!0).forEach(function(t){LP(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NP(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function LP(e,t,r){return(t=FP(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,FP(n.key),n)}}function FP(e){var t=function(e,t){if("object"!=BP(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=BP(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==BP(t)?t:t+""}var QP=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.map=t,this.symbolManager=new bP,this.singleSymbolRender=new uP(t),this.compositeSymbolRender=new dP(t),this._layerSymbols={}},(t=[{key:"_update",value:function(e){return this.map=e,this}},{key:"addLayer",value:function(e,t){if("string"==typeof e.symbol){var r=e.symbol;if(r){var n=this.getSymbol(r);if(!n)return this.map.fire("error",{error:new Error('Symbol "'.concat(r,'" could not be loaded. Please make sure you have added the symbol with map.addSymbol().'))});this.setSymbolTolayer(e.id,r),this.getSymbolRender(n).addLayer(e,n,t)}}else kP(e.symbol)&&(this.setSymbolTolayer(e.id,e.symbol),this.addExpressionLayer(e,t))}},{key:"setSymbol",value:function(e,t){var r=this.map.getStyle().layers,n=r.findIndex(function(t){return t.id===e});if(-1===n)return this.map.fire("error",{error:new Error('Cannot set symbol "'.concat(t,'" to non-existing layer "').concat(e,'".'))});this.map.removeLayer(e);var o=r[n+1]&&r[n+1].id,i=o&&this.map.style.getLayer(o),a=i&&i.id||o&&this.getFirstLayerId(o),s=r[n];this.addLayer(RP(RP({},s),{},{paint:{},layout:{visibility:s.layout&&s.layout.visibility||"visible"},symbol:t}),a)}},{key:"getMatchLayers",value:function(e){var t=[],r=["all"];e.filter&&r.push(e.filter);var n=[],o=e.symbol.slice(2);return o.forEach(function(i,a){a%2==1?(t.push(RP(RP({},e),{},{filter:[].concat(r,[["==",e.symbol[1][1],o[a-1]]]),symbol:i})),n.push(["!=",e.symbol[1][1],o[a-1]])):a===o.length-1&&t.unshift(RP(RP({},e),{},{filter:[].concat(r,n),symbol:i}))}),t}},{key:"getCaseLayers",value:function(e){var t=[],r=["all"];e.filter&&r.push(e.filter);var n=[],o=e.symbol.slice(1);return o.forEach(function(i,a){a%2==1?(t.push(RP(RP({},e),{},{filter:[].concat(r,[o[a-1]]),symbol:i})),n.push(["!",o[a-1]])):a===o.length-1&&t.unshift(RP(RP({},e),{},{filter:[].concat(r,n),symbol:i}))}),t}},{key:"addExpressionLayer",value:function(e,t){var r=this,n={match:this.getMatchLayers,case:this.getCaseLayers}[e.symbol[0]],o=n&&n(e);if(!o)return this.map.fire("error",{error:new Error("This expressions not supported")});o.forEach(function(n){n.id=M.createUniqueID("".concat(e.id,"_compositeLayer_")),r.compositeSymbolRender.addLayerId(e.id,n.id),r.addLayer(n,t)})}},{key:"getSymbolRender",value:function(e){return OP(e)?this.compositeSymbolRender:this.singleSymbolRender}},{key:"addSymbolImageToMap",value:function(e,t){var r=xP(e),n=r.type,o=r.name,i=e[n]&&e[n][o];i&&!this.map.hasImage(i)&&(this.map.addImage(i,t),this.symbolManager.addImageInfo(i,t))}},{key:"addSymbol",value:function(e,t){return this.getSymbol(e)?this.map.fire("error",{error:new Error("An symbol with this name already exists.")}):jP(t)?void this.symbolManager.addSymbol(e,t):this.map.fire("error",{error:new Error("Symbol is not supported expressions.")})}},{key:"setSymbolTolayer",value:function(e,t){this._layerSymbols[e]=t}},{key:"getLayerSymbol",value:function(e){return this._layerSymbols[e]}},{key:"hasSymbol",value:function(){return Object.keys(this._layerSymbols).length>0}},{key:"removeSymbol",value:function(e){this.symbolManager.removeSymbol(e)}},{key:"getSymbol",value:function(e){return this.symbolManager.getSymbol(e)}},{key:"getLayerIds",value:function(e){return this.compositeSymbolRender.getLayerIds(e)||[]}},{key:"getLayerId",value:function(e){return this.compositeSymbolRender.getLayerId(e)}},{key:"removeLayerId",value:function(e){return this.compositeSymbolRender.removeLayerId(e)}},{key:"getLayer",value:function(e){var t=this.map.getLayerBySymbolBak(e),r=this.getLayerSymbol(e);if(t)return r?RP(RP({},t),{},{symbol:r}):t;var n=this.getLayerIds(e);if(n[0]){var o=this.map.getLayerBySymbolBak(n[0]);return o&&RP(RP({},o),{},{symbol:r,id:e})}}},{key:"removeLayer",value:function(e){var t=this,r=this.getLayerIds(e);r.length>0?(r.forEach(function(e){return t.map.style.removeLayer(e)}),this.removeLayerId(e)):this.map.style.removeLayer(e)}},{key:"getStyle",value:function(){var e=this,t=this.map.style.serialize();return this.hasSymbol()&&(t.layers=t.layers.reduce(function(t,r){var n=e.getLayerId(r.id);return n?!t.find(function(e){return e.id===n})&&t.push(RP(RP({},r),{},{symbol:e.getLayerSymbol(n),id:n})):e.getLayerSymbol(r.id)?t.push(RP(RP({},r),{},{symbol:e.getLayerSymbol(r.id)})):t.push(r),t},[])),t}},{key:"getFirstLayerId",value:function(e){return this.getLayerIds(e)[0]}},{key:"moveLayer",value:function(e,t){var r=this,n=this.getLayerIds(e),o=t&&this.map.style.getLayer(t),i=o&&o.id||t&&this.getFirstLayerId(t);n.length>0?n.forEach(function(e){return r.map.style.moveLayer(e,i)}):this.map.style.moveLayer(e,i)}},{key:"setFilter",value:function(e,t,r){var n=this;if(kP(this.getLayerSymbol(e))){var o=this.getFirstLayerId(e);this.map.style.setFilter(o,t,r);var i=this.getLayerSymbol(e);this.setSymbol(e,i)}else{var a=this.getLayerIds(e);a.length>0?a.forEach(function(e){return n.map.style.setFilter(e,t,r)}):this.map.style.setFilter(e,t,r)}}},{key:"getFilter",value:function(e){var t=this.getFirstLayerId(e);if(this.map.style.getLayer(t))return this.map.style.getFilter(t)}},{key:"setLayerZoomRange",value:function(e,t,r){var n=this,o=this.getLayerIds(e);o.length>0?o.forEach(function(e){return n.map.style.setLayerZoomRange(e,t,r)}):this.map.style.setLayerZoomRange(e,t,r)}},{key:"setPaintProperty",value:function(e,t,r,n){var o=this,i=this.getLayerIds(e);i.length>0?i.forEach(function(e){return o.map.style.setPaintProperty(e,t,r,n)}):this.map.style.setPaintProperty(e,t,r,n)}},{key:"getPaintProperty",value:function(e,t){var r=this.getFirstLayerId(e);return this.map.style.getPaintProperty(r,t)}},{key:"setLayoutProperty",value:function(e,t,r,n){var o=this,i=this.getLayerIds(e);i.length>0?i.forEach(function(e){return o.map.style.setLayoutProperty(e,t,r,n)}):this.map.style.setLayoutProperty(e,t,r,n)}},{key:"getLayoutProperty",value:function(e,t){var r=this.getFirstLayerId(e);return this.map.style.getLayoutProperty(r,t)}},{key:"updateLayerSymbol",value:function(e){var t=this;Object.keys(this._layerSymbols).forEach(function(r){var n=t._layerSymbols[r];n.includes(e)&&t.setSymbol(r,n)})}},{key:"updateSymbol",value:function(e,t){return this.getSymbol(e)?jP(t)?(this.symbolManager.addSymbol(e,t),void this.updateLayerSymbol(e)):this.map.fire("error",{error:new Error("Symbol is not supported expressions.")}):this.map.fire("error",{error:new Error('Symbol "'.concat(e,'" could not be loaded. Please make sure you have added the symbol with map.addSymbol().'))})}},{key:"setSymbolProperty",value:function(e,t,r,n){var o=this.getSymbol(e);if(!o)return this.map.fire("error",{error:new Error('Symbol "'.concat(e,'" could not be loaded. Please make sure you have added the symbol with map.addSymbol().'))});if(kP(n))return this.map.fire("error",{error:new Error("Symbol value is not supported expressions.")});var i=MP(r)?"paint":"layout";if(o.length>0){var a=o[t];if(!a)return this.map.fire("error",{error:new Error("symbol[".concat(t,"] does not exist."))});a[i]||(a[i]={}),Object.assign(a[i],LP({},r,n))}else o[i]||(o[i]={}),Object.assign(o[i],LP({},r,n));this.symbolManager.addSymbol(e,o),this.updateLayerSymbol(e)}},{key:"getSymbolProperty",value:function(e,t,r){var n=this.getSymbol(e);if(n){var o=MP(r)?"paint":"layout";return n.length>0?n[t]&&n[t][o]&&n[t][o][r]:n[o]&&n[o][r]}this.map.fire("error",{error:new Error('Symbol "'.concat(e,'" could not be loaded. Please make sure you have added the symbol with map.addSymbol().'))})}}])&&DP(e.prototype,t),r&&DP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function GP(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof s?n:s,l=Object.create(u.prototype);return UP(l,"_invoke",function(r,n,o){var i,s,u,l=0,c=o||[],f=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,r){return i=t,s=0,u=e,p.n=r,a}};function h(r,n){for(s=r,u=n,t=0;!f&&l&&!o&&t<c.length;t++){var o,i=c[t],h=p.p,y=i[2];r>3?(o=y===n)&&(u=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=r<2&&h<i[1])?(s=0,p.v=n,p.n=i[1]):h<y&&(o=r<3||i[0]>n||n>y)&&(i[4]=r,i[5]=n,p.n=y,s=0))}if(o||r>1)return a;throw f=!0,n}return function(o,c,y){if(l>1)throw TypeError("Generator is already running");for(f&&1===c&&h(c,y),s=c,u=y;(t=s<2?e:u)||!f;){i||(s?s<3?(s>1&&(p.n=-1),h(s,u)):p.n=u:p.v=u);try{if(l=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(f=p.n<0)?u:r.call(n,p))!==a)break}catch(t){i=e,s=1,u=t}finally{l=1}}return{value:t,done:f}}}(r,o,i),!0),l}var a={};function s(){}function u(){}function l(){}t=Object.getPrototypeOf;var c=[][n]?t(t([][n]())):(UP(t={},n,function(){return this}),t),f=l.prototype=s.prototype=Object.create(c);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,UP(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=l,UP(f,"constructor",l),UP(l,"constructor",u),u.displayName="GeneratorFunction",UP(l,o,"GeneratorFunction"),UP(f),UP(f,o,"Generator"),UP(f,n,function(){return this}),UP(f,"toString",function(){return"[object Generator]"}),(GP=function(){return{w:i,m:p}})()}function UP(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}(UP=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){UP(e,t,function(e){return this._invoke(t,r,e)})};i("next",0),i("throw",1),i("return",2)}})(e,t,r,n)}function zP(e,t,r,n,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function HP(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){zP(i,n,o,a,s,"next",e)}function s(e){zP(i,n,o,a,s,"throw",e)}a(void 0)})}}var qP=function(){var e=function(e){return o().Map.prototype.symbolHandler||(o().Map.prototype.symbolHandler=new QP(e)),o().Map.prototype.symbolHandler._update(e)};function t(){return(t=HP(GP().m(function e(t,r){var n,o,i,a,s,u,l;return GP().w(function(e){for(;;)switch(e.n){case 0:return n="".concat(r.basePath,"/").concat(t,"/").concat(t),e.n=1,z.get("".concat(n,".json")).then(function(e){return e.ok?e.json():null}).catch(function(){return null});case 1:if(o=e.v){e.n=2;break}return e.a(2,null);case 2:if(i=o.paint||{},a=o.layout||{},s=i["fill-pattern"]||i["line-pattern"]||a["icon-image"],!(l=s)){e.n=4;break}return e.n=3,new Promise(function(e){var t=new Image;t.src="".concat(n,".png"),t.onload=function(r){e(r?t:null)},t.onerror=function(){e(null)}});case 3:l=e.v;case 4:return u=l,e.a(2,{value:o,image:u})}},e)}))).apply(this,arguments)}function r(r,n){return function(e,r){return t.apply(this,arguments)}(r,n).then(function(t){if(!t)return null;var r=t.value,o=t.image;return o&&e(n).addSymbolImageToMap(r,o),r})}void 0===o().Map.prototype.addLayerBySymbolBak&&(o().Map.prototype.addLayerBySymbolBak=o().Map.prototype.addLayer,o().Map.prototype.addLayer=function(t,r){var n=e(this);if(!(n.getLayerIds(t.id).length>0))return t.symbol?(n.addLayer(t,r),this):(this.addLayerBySymbolBak(t,r),this);this.fire("error",{error:new Error("A layer with this id already exists.")})}),void 0===o().Map.prototype.getLayerBySymbolBak&&(o().Map.prototype.getLayerBySymbolBak=o().Map.prototype.getLayer,o().Map.prototype.getLayer=function(t){return e(this).getLayer(t)}),void 0===o().Map.prototype.moveLayerBySymbolBak&&(o().Map.prototype.moveLayerBySymbolBak=o().Map.prototype.moveLayer,o().Map.prototype.moveLayer=function(t,r){return!this.style.getLayer(t)||r&&!this.style.getLayer(r)?(e(this).moveLayer(t,r),this._update(!0)):this.moveLayerBySymbolBak(t,r)}),void 0===o().Map.prototype.removeLayerBySymbolBak&&(o().Map.prototype.removeLayerBySymbolBak=o().Map.prototype.removeLayer,o().Map.prototype.removeLayer=function(t){return this.style.getLayer(t)?this.removeLayerBySymbolBak(t):e(this).removeLayer(t)}),void 0===o().Map.prototype.setLayoutPropertyBySymbolBak&&(o().Map.prototype.setLayoutPropertyBySymbolBak=o().Map.prototype.setLayoutProperty,o().Map.prototype.setLayoutProperty=function(t,r,n,o){return this.overlayLayersManager[t]||this.style.getLayer(t)?this.setLayoutPropertyBySymbolBak(t,r,n,o):(e(this).setLayoutProperty(t,r,n,o),this._update(!0))}),o().Map.prototype.setSymbol=function(t,r){e(this).setSymbol(t,r)},o().Map.prototype.setStyleBak||(o().Map.prototype.setStyleBak=o().Map.prototype.setStyle,o().Map.prototype.setStyle=function(e,t){var r=this;return this.setStyleBak(e,t),this.style&&this.style.once("style.load",function(){e.layers.filter(function(e){return e.symbol}).forEach(function(e){r.setSymbol(e.id,e.symbol)})}),this}),o().Map.prototype.loadSymbol=(n=HP(GP().m(function e(t,n){var o,i,a,s,u,l,c=this;return GP().w(function(e){for(;;)switch(e.n){case 0:if("string"!=typeof t){e.n=2;break}return e.n=1,r(t,this);case 1:o=e.v,i=null,o||(i="Symbol ".concat(t," is not exists")),n(i,o),e.n=5;break;case 2:if(!M.isArray(t)){e.n=4;break}return a=t.map(function(e){return r(e,c)}),e.n=3,Promise.all(a);case 3:s=e.v,u=null,(l=t.filter(function(e,t){return!s[t]})).length>0&&(u="Symbol ".concat(l.join(",")," is not exists")),n(u,s),e.n=5;break;case 4:n({message:"Symbol id must be a string or string[]."});case 5:return e.a(2)}},e,this)})),function(e,t){return n.apply(this,arguments)}),o().Map.prototype.addSymbol=function(t,r){e(this).addSymbol(t,r)},o().Map.prototype.getSymbol=function(t){return e(this).getSymbol(t)},o().Map.prototype.hasSymbol=function(e){return e?!!this.getSymbol(e):(this.fire("error",{error:new Error("Missing required symbol id")}),!1)},o().Map.prototype.removeSymbol=function(t){e(this).removeSymbol(t)},o().Map.prototype.updateSymbol=function(t,r){e(this).updateSymbol(t,r)},o().Map.prototype.setSymbolProperty=function(t,r,n,o){e(this).setSymbolProperty(t,r,n,o)},o().Map.prototype.getSymbolProperty=function(t,r,n){return e(this).getSymbolProperty(t,r,n)},o().Map.prototype.getStyle=function(){if(this.style)return e(this).getStyle()},o().Map.prototype.setFilter=function(t,r,n){return this.style.getLayer(t)?(this.style.setFilter(t,r,n),this._update(!0)):(e(this).setFilter(t,r,n),this._update(!0))},o().Map.prototype.getFilter=function(t){return this.style.getLayer(t)?this.style.getFilter(t):e(this).getFilter(t)},o().Map.prototype.setLayerZoomRange=function(t,r,n){return this.style.getLayer(t)?(this.style.setLayerZoomRange(t,r,n),this._update(!0)):(e(this).setLayerZoomRange(t,r,n),this._update(!0))},o().Map.prototype.setPaintProperty=function(t,r,n,o){return this.style.getLayer(t)?(this.style.setPaintProperty(t,r,n,o),this._update(!0)):(e(this).setPaintProperty(t,r,n,o),this._update(!0))},o().Map.prototype.getPaintProperty=function(t,r){return this.style.getLayer(t)?this.style.getPaintProperty(t,r):e(this).getPaintProperty(t,r)},o().Map.prototype.getLayoutProperty=function(t,r){return this.style.getLayer(t)?this.style.getLayoutProperty(t,r):e(this).getLayoutProperty(t,r)},void 0===o().Map.prototype.onBak&&(o().Map.prototype.onBak=o().Map.prototype.on,o().Map.prototype.on=function(t,r,n){var o=this;return void 0===n||this.style.getLayer(r)?this.onBak(t,r,n):(e(this).getLayerIds(r).forEach(function(e){return o.onBak(t,e,n)}),this)}),void 0===o().Map.prototype.onceBak&&(o().Map.prototype.onceBak=o().Map.prototype.once,o().Map.prototype.once=function(t,r,n){var o=this;return void 0===n||this.style.getLayer(r)?this.onceBak(t,r,n):(e(this).getLayerIds(r).forEach(function(e){return o.onceBak(t,e,n)}),this)}),void 0===o().Map.prototype.offBak&&(o().Map.prototype.offBak=o().Map.prototype.off,o().Map.prototype.off=function(t,r,n){var o=this;return void 0===n||this.style.getLayer(r)?this.offBak(t,r,n):(e(this).getLayerIds(r).forEach(function(e){return o.offBak(t,e,n)}),this)});var n};function VP(e){"@babel/helpers - typeof";return(VP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function KP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,YP(n.key),n)}}function YP(e){var t=function(e,t){if("object"!=VP(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=VP(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==VP(t)?t:t+""}var JP=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.defaultBasePath="./resources/symbols"},(t=[{key:"init",value:function(e){o().Map.prototype.basePath=e&&e.basePath||this.defaultBasePath,qP()}}])&&KP(e.prototype,t),r&&KP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function WP(e){"@babel/helpers - typeof";return(WP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function XP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ZP(n.key),n)}}function ZP(e){var t=function(e,t){if("object"!=WP(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=WP(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==WP(t)?t:t+""}var $P=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t.filters&&"string"==typeof t.filters&&(t.filters=t.filters.split(",")),this.address=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null,M.extend(this,t)},(t=[{key:"destroy",value:function(){this.address=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null}}])&&XP(e.prototype,t),r&&XP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function ek(e){"@babel/helpers - typeof";return(ek="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,rk(n.key),n)}}function rk(e){var t=function(e,t){if("object"!=ek(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ek(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ek(t)?t:t+""}var nk=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t.filters&&(t.filters=t.filters.split(",")),this.x=null,this.y=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null,this.geoDecodingRadius=null,M.extend(this,t)},(t=[{key:"destroy",value:function(){this.x=null,this.y=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null,this.geoDecodingRadius=null}}])&&tk(e.prototype,t),r&&tk(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function ok(e){"@babel/helpers - typeof";return(ok="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ik(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ak(n.key),n)}}function ak(e){var t=function(e,t){if("object"!=ok(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ok(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ok(t)?t:t+""}function sk(e,t,r){return t=lk(t),function(e,t){if(t&&("object"==ok(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],lk(e).constructor):t.apply(e,r))}function uk(){return(uk="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=lk(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function lk(e){return(lk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ck(e,t){return(ck=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var fk=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=sk(this,t,[e,r])).options=r||{},n.CLASS_NAME="SuperMap.AddressMatchService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ck(e,t)}(t,Vw),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=uk(lk(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"code",value:function(e,t,r){if(t instanceof $P)return this.processAsync(e,t,r)}},{key:"decode",value:function(e,t,r){if(t instanceof nk)return this.processAsync(e,t,r)}},{key:"processAsync",value:function(e,t,r){return this.request({method:"GET",url:e,params:t,scope:this,success:r,failure:r})}},{key:"transformResult",value:function(e,t){return e.succeed&&delete e.succeed,{result:e,options:t}}}])&&ik(r.prototype,n),o&&ik(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function pk(e){"@babel/helpers - typeof";return(pk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,yk(n.key),n)}}function yk(e){var t=function(e,t){if("object"!=pk(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=pk(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==pk(t)?t:t+""}function dk(e,t,r){return t=mk(t),function(e,t){if(t&&("object"==pk(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],mk(e).constructor):t.apply(e,r))}function mk(e){return(mk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gk(e,t){return(gk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var vk=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=dk(this,t,[e,r]))._addressMatchService=new fk(e,r),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gk(e,t)}(t,Nw),r=t,(n=[{key:"code",value:function(e,t){return this._addressMatchService.code(M.urlPathAppend(this.url,"geocoding"),e,t)}},{key:"decode",value:function(e,t){return this._addressMatchService.decode(M.urlPathAppend(this.url,"geodecoding"),e,t)}}])&&hk(r.prototype,n),o&&hk(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function bk(e){"@babel/helpers - typeof";return(bk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ak(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,wk(n.key),n)}}function wk(e){var t=function(e,t){if("object"!=bk(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=bk(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==bk(t)?t:t+""}var Sk=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.customParams=null,this.prjCoordSys=null,this.expectCount=1e5,this.networkType=ln.LINE,this.queryOption=cn.ATTRIBUTEANDGEOMETRY,this.queryParams=null,this.startRecord=0,this.holdTime=10,this.returnCustomResult=!1,this.returnFeatureWithFieldCaption=!1,M.extend(this,t),this.CLASS_NAME="SuperMap.QueryParameters")},(t=[{key:"destroy",value:function(){var e=this;if(e.customParams=null,e.expectCount=null,e.networkType=null,e.queryOption=null,e.queryParams){for(var t=0,r=e.queryParams,n=r.length;t<n;t++)r[t].destroy();e.queryParams=null}e.startRecord=null,e.holdTime=null,e.returnCustomResult=null,e.prjCoordSys=null}}])&&Ak(e.prototype,t),r&&Ak(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function Ck(e){"@babel/helpers - typeof";return(Ck="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ek(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_k(n.key),n)}}function _k(e){var t=function(e,t){if("object"!=Ck(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Ck(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ck(t)?t:t+""}var Ik=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isQueryPoint=null,this.isQueryLine=null,this.isQueryRegion=null,this.attributeFilter=null,this.chartFeatureInfoSpecCode=null,M.extend(this,t),this.CLASS_NAME="SuperMap.ChartQueryFilterParameter"},(t=[{key:"destroy",value:function(){var e=this;e.isQueryPoint=null,e.isQueryLine=null,e.isQueryRegion=null,e.attributeFilter=null,e.chartFeatureInfoSpecCode=null}},{key:"toJson",value:function(){var e="";return e+='"isQueryPoint":'+this.isQueryPoint+",",e+='"isQueryLine":'+this.isQueryLine+",",e+='"isQueryRegion":'+this.isQueryRegion+",",this.attributeFilter&&(e+='"attributeFilter": "'+this.attributeFilter.replace(/"/g,"'")+'",'),e="{"+(e+='"chartFeatureInfoSpecCode":'+this.chartFeatureInfoSpecCode)+"}"}}])&&Ek(e.prototype,t),r&&Ek(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function Ok(e){"@babel/helpers - typeof";return(Ok="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Pk(n.key),n)}}function Pk(e){var t=function(e,t){if("object"!=Ok(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Ok(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ok(t)?t:t+""}var kk=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.queryMode=null,this.bounds=null,this.chartLayerNames=null,this.chartQueryFilterParameters=null,this.returnContent=!0,this.startRecord=0,this.expectCount=null,M.extend(this,t),this.CLASS_NAME="SuperMap.ChartQueryParameters"},(t=[{key:"destroy",value:function(){var e=this;e.queryMode=null,e.bounds=null,e.chartLayerNames=null,e.chartQueryFilterParameters=null,e.returnContent=!0,e.startRecord=0,e.expectCount=null}},{key:"getVariablesJson",value:function(){var e="";if(e+='"queryMode":"'+this.queryMode+'",',this.chartLayerNames&&this.chartLayerNames.length){for(var t=[],r=this.chartLayerNames.length,n=0;n<r;n++)t.push('"'+this.chartLayerNames[n]+'"');e+='"chartLayerNames":'+("["+t.join(",")+"]")+","}if("ChartBoundsQuery"!==this.queryMode&&"ChartFeatureBoundsQuery"!==this.queryMode||!this.bounds||(e+='"bounds":{"leftBottom":{"x":'+this.bounds.left+',"y":'+this.bounds.bottom+'},"rightTop":{"x":'+this.bounds.right+',"y":'+this.bounds.top+"}},"),this.chartQueryFilterParameters&&this.chartQueryFilterParameters.length){for(var o=[],i=this.chartQueryFilterParameters.length,a=0;a<i;a++){var s=this.chartQueryFilterParameters[a];s instanceof Ik&&o.push(s.toJson())}var u="["+o.join(",")+"]";u='"chartQueryParams":'+u+",",u+='"startRecord":'+this.startRecord+",",e+='"chartQueryParameters":'+(u="{"+(u+='"expectCount":'+this.expectCount)+"}")}return e="{"+e+"}"}}])&&xk(e.prototype,t),r&&xk(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}(),Tk={AGENCY:"äº§åè´£ä»»æºæ",BCNSHP:"ç«æ å½¢ç¶",BUISHP:"å»ºç­å½¢ç¶",BOYSHP:"æµ®æ å½¢ç¶",BURDEP:"åç½®æ·±åº¦",CALSGN:"å¼å·",CATAIR:"æºåºç±»",CATACH:"éå°ç±»",CATBRG:"æ¡¥æ¢ç±»",CATBUA:"å»ºç­ç¾¤åºç±»",CATCBL:"çµç¼ç±»",CATCAN:"æ¸ éç±»",CATCAM:"æ¹ä½æ å¿ç±»",CATCHP:"æ£æ¥ç«ç±»",CATCOA:"æµ·å²¸çº¿ç±»",CATCTR:"æ§å¶ç¹ç±»",CATCON:"ä¼ éè£ç½®ç±»",CATCOV:"ä½ç¨èå´ç±»",CATCRN:"èµ·éæºç±»",CATDAM:"æ°´åç±»",CATDIS:"è·ç¦»æ å¿ç±»",CATDOC:"è¹åç±»",CATDPG:"å¾åºåºç±»",CATFNC:"æ æ ç±»",CATFRY:"è½®æ¸¡ç±»",CATFIF:"æé±¼è®¾å¤ç±»",CATFOG:"é¾å·ç±»",CATFOR:"é²å¾¡å·¥äºç±»",CATGAT:"é¨ç±»",CATHAF:"æ¸¯å£è®¾å¤ç±»",CATHLK:"è¶¸è¹ç±»",CATICE:"å°ç±»",CATINB:"ä½ä¸æµ®æ ç±»",CATLND:"å°é¢å°å¸¦ç±»",CATLMK:"éæ ç±»",CATLAM:"ä¾§é¢æ å¿ç±»",CATLIT:"ç¯æ ç±»",CATMFA:"æµ·æ°´å»æ®åºç±»",CATMPA:"åäºæ¼ä¹ åºç±»",CATMOR:"ç³»æ³ç»ç¼è®¾å¤ç±»",CATNAV:"å¯¼èªçº¿ç±»",CATOBS:"éç¢ç©ç±»",CATOFP:"æµ·ä¸å¹³å°ç±»",CATOLB:"æ²¹éç±»",CATPLE:"æ¨æ¡©ç±»",CATPIL:"å¼èªåç»è¹ç¹ç±»",CATPIP:"ç®¡éç±»",CATPRA:"çäº§åºåç±»",CATPYL:"å¡æ¶ç±»",CATQUA:"æ°æ®è´¨éç±»",CATRAS:"é·è¾¾ç«ç±»",CATRTB:"é·è¾¾åºç­å¨ç±»",CATROS:"æ çº¿çµå°ç±»",CATTRK:"æ¨èèªçº¿ç±»",CATRSC:"æå©ç«ç±»",CATREA:"éå¶åºç±»",CATROD:"éè·¯ç±»",CATRUN:"è·éç±»",CATSEA:"æµ·åºç±»",CATSLC:"å²¸çº¿å»ºç­ç©ç±»",CATSIT:"äº¤éä¿¡å·ç«ç±»",CATSIW:"åè­¦ä¿¡å·å°ç±»",CATSIL:"ç­ä»ãç½ç±»",CATSLO:"æå¡ç±»",CATSCF:"å°åè¹ç¨è®¾å¤ç±»",CATSPM:"ä¸ç¨æ å¿ç±»",CATTSS:"åééèªå¶ç±»",CATVEG:"æ¤è¢«ç±»",CATWAT:"ç´æµç±»",CATWED:"æµ·èãå·¨åæµ·è»ç±»",CATWRK:"æ²è¹ç±»",CATZOC:"æ°æ®ç½®ä¿¡åº¦åºç±»",SPACE_:"å­ç¬¦ç©ºæ ¼",CHARS_:"å­ç¬¦è¯´æ",COLOUR:"é¢è²",COLPAT:"å½©è²å¾æ¡",COMCHA:"éä¿¡é¢é",CSIZE_:"ç½ç»è±å°ºå¯¸",CPDATE:"æ±ç¼æ¥æ",CSCALE:"ç¼è¾æ¯ä¾å°º",CONDTN:"ç¶æ",CONRAD:"é·è¾¾å¯è§",CONVIS:"è§è§å¯è§",CURVEL:"æµ·æµéåº¦",DATEND:"ç»æ­¢æ¥æ",DATSTA:"å¼å§æ¥æ",DRVAL1:"æ·±åº¦èå´å¼1",DRVAL2:"æ·±åº¦èå´å¼2",DUNITS:"æ·±åº¦åä½",ELEVAT:"æµ·æ",ESTRNG:"é¢è®¡ä¼ è¾èå´",EXCLIT:"ç¯åæ¾ç¤ºç¶åµ",EXPSOU:"æ°´æ·±è¯´æ",FUNCTN:"åè½",HEIGHT:"é«åº¦",HUNITS:"é«åº¦ãé¿åº¦åä½",HORACC:"æ°´å¹³ç²¾åº¦",HORCLR:"æ°´å¹³åç©º",HORLEN:"æ°´å¹³é¿åº¦",HORWID:"æ°´å¹³å®½åº¦",ICEFAC:"å°åµç³»æ°",INFORM:"ä¿¡æ¯",JRSDTN:"ç®¡è¾åºå",JUSTH_:"æ°´å¹³å¯¹é½",JUSTV_:"åç´å¯¹é½",LIFCAP:"èµ·éè½å",LITCHR:"ç¯è´¨",LITVIS:"ç¯æ è½è§åº¦",MARSYS:"æµ·ä¸æ å¿ä½ç³»",MLTYLT:"ç¯ç»",NATION:"å½ç±",NATCON:"å»ºç­ç»ææ§è´¨",NATSUR:"è¡¨é¢æ§è´¨",NATQUA:"è¡¨é¢æ§è´¨éå®æ¯è¯­",NMDATE:"èªæµ·éåæ¥æ",OBJNAM:"ç©æ åç§°",ORIENT:"æ¹ä½",PEREND:"å®æç»æ­¢æ¥æ",PERSTA:"å®æå¼å§æ¥æ",PICREP:"å¾ç¤ºæ¾ç¤º",PILDST:"å¼èªåºå",PRCTRY:"çäº§å½å®¶",PRODCT:"äº§å",PUBREF:"åºçç©åè",QUASOU:"æ°´æ·±æµéç¹æ§",RADWAL:"é·è¾¾æ³¢é¿",RADIUS:"åå¾",RECDAT:"è®°å½æ¥æ",RECIND:"è®°å½è¡¨ç¤ºæ³",RYRMGV:"ç£å·®åèå¹´ä»½",RESTRN:"éå¶åº",SCAMAX:"æå¤§æ¯ä¾å°º",SCAMIN:"æå°æ¯ä¾å°º",SCVAL1:"æ¯ä¾å¼1",SCVAL2:"æ¯ä¾å¼2",SECTR1:"æå½¢çé1",SECTR2:"æå½¢çé2",SHIPAM:"åç§»åæ°",SIGFRQ:"ä¿¡å·é¢ç",SIGGEN:"ä¿¡å·çæ",SIGGRP:"ä¿¡å·ç»",SIGPER:"ä¿¡å·å¨æ",SIGSEQ:"ä¿¡å·æ¶åº",SOUACC:"æµæ·±ç²¾åº¦",SDISMX:"æå¤§æµæ·±é´è·",SDISMN:"æå°æµæ·±é´è·",SORDAT:"æ°æ®æ¥æºæ¥æ",SORIND:"æ°æ®æ¥æºè¡¨ç¤º",STATUS:"ç¶åµ",SURATH:"æµéæºæ",SUREND:"æµéç»ææ¥æ",SURSTA:"æµéå¼å§æ¥æ",SURTYP:"æµéç±»å",SCALE_:"ç¬¦å·ç¼©æ¾ç³»æ°",SCODE_:"ç¬¦å·ä»£ç ",TECSOU:"æ°´æ·±æµéææ¯",TXSTR_:"ææ¬ä¸²",TXTDSC:"æ­£ææè¿°",TS_TSP:"æ½®æµéåçå¼",TS_TSV:"æ½®æµæ¶åºå¼",T_ACWL:"æ½®æ±æ½®ä½ç²¾åº¦",T_HWLW:"æ½®æ±é«ä½æ½®å¼",T_MTOD:"æ½®æ±é¢æ¥æ¹æ³",T_THDF:"æ½®æ±æ½®æ¶ä¸æ½®é«å·®",T_TINT:"æ½®æ±æ¶é´é´éå¼",T_TSVL:"æ½®æ±æ¶åºå¼",T_VAHC:"æ½®æ±è°ååæ½®å¼",TIMEND:"ç»æ­¢æ¶é´",TIMSTA:"å¼å§æ¶é´",TINTS_:"è²è°",TOPSHP:"é¡¶æ ãæ¼æ å½¢ç¶",TRAFIC:"äº¤éæµ",VALACM:"ç£å·®å¹´åç",VALDCO:"ç­æ·±çº¿å¼",VALLMA:"å±é¨ç£åå¼å¸¸å¼",VALMAG:"ç£å·®å¼",VALMXR:"æå¤§ä½ç¨è·ç¦»",VALNMR:"æ å®ä½ç¨è·ç¦»",VALSOU:"æ°´æ·±å¼",VERACC:"åç´ç²¾åº¦",VERCLR:"ç«ååç©º",VERCCL:"å°é­ç«ååç©º",VERCOP:"å¼å¯ç«ååç©º",VERCSA:"å®å¨ç«ååç©º",VERDAT:"åç´åºåé¢",VERLEN:"åç´é«åº¦",WATLEV:"æ°´ä½æåº",CAT_TS:"æ½®æµç±»",PUNITS:"ä½ç½®ç²¾åº¦åä½",CLSDEF:"ç©æ å®ä¹",CLSNAM:"ç©æ åç§°",SYMINS:"ç©æ åç§°",NINFOM:"ç¨å½å®¶è¯­è¨è¡¨ç¤ºçä¿¡æ¯",NOBJNM:"ç¨å½å®¶è¯­è¨è¡¨ç¤ºçç©æ åç§°",NPLDST:"ç¨å½å®¶è¯­è¨è¡¨ç¤ºçå¼èªåº",NTXST_:"ç¨å½å®¶è¯­è¨è¡¨ç¤ºçææ¬ä¸²",NTXTDS:"ç¨å½å®¶è¯­è¨è¡¨ç¤ºçæ­£æ",HORDAT:"æ°´å¹³åºåé¢",POSACC:"ä½ç½®ç²¾åº¦",QUAPOS:"ä½ç½®æ§è´¨"};function jk(e){"@babel/helpers - typeof";return(jk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Bk(n.key),n)}}function Bk(e){var t=function(e,t){if("object"!=jk(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=jk(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==jk(t)?t:t+""}function Nk(e,t,r){return t=Lk(t),Rk(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],Lk(e).constructor):t.apply(e,r))}function Rk(e,t){if(t&&("object"==jk(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Lk(e){return(Lk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Dk(e,t){return(Dk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Fk=function(e){function t(e,r){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=Nk(this,t,[e,r]),r=r||{},n.returnContent=null,n.format=sn.GEOJSON,M.extend(n,r);var o=n;return r.format&&(o.format=r.format.toUpperCase()),o.url?(o.url=M.urlPathAppend(o.url,"queryResults"),n.CLASS_NAME="SuperMap.ChartQueryService",n):Rk(n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Dk(e,t)}(t,Vw),r=t,(n=[{key:"destroy",value:function(){Vw.prototype.destroy.apply(this,arguments),this.returnContent=null,this.format=null}},{key:"processAsync",value:function(e,t){if(e instanceof kk){var r,n=this;return n.returnContent=e.returnContent,r=e.getVariablesJson(),n.returnContent&&(n.url=M.urlAppend(n.url,"returnContent=true")),n.request({method:"POST",data:r,scope:n,success:t,failure:t})}}},{key:"_tranformFeatureField",value:function(e,t){e.forEach(function(e){e.fieldNames.forEach(function(r,n){e.fieldNames[n]="function"==typeof t&&t(r)||Tk[r]||r})})}},{key:"_transformFeatures",value:function(e,t,r){this._tranformFeatureField(e.features,t),r===sn.GEOJSON&&(e.features=(new uo).toGeoJSON(e.features))}},{key:"transformResult",value:function(e,t){var r=this,n=this;e=M.transformResult(e);var o=n.fieldNameFormatter;if(e&&e.recordsets)for(var i=0,a=e.recordsets,s=a.length;i<s;i++)a[i].features&&this._transformFeatures(a[i],o,n.format),a[i].chartRecordsets&&a[i].chartRecordsets.forEach(function(e){r._transformFeatures(e,o,n.format)});return{result:e,options:t}}},{key:"getQueryParameters",value:function(e){return new Sk({queryMode:e.queryMode,bounds:e.bounds,chartLayerNames:e.chartLayerNames,chartQueryFilterParameters:e.chartQueryFilterParameters,returnContent:e.returnContent})}}])&&Mk(r.prototype,n),o&&Mk(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Qk(e){"@babel/helpers - typeof";return(Qk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Uk(n.key),n)}}function Uk(e){var t=function(e,t){if("object"!=Qk(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Qk(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Qk(t)?t:t+""}function zk(e,t,r){return t=qk(t),function(e,t){if(t&&("object"==Qk(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],qk(e).constructor):t.apply(e,r))}function Hk(){return(Hk="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=qk(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function qk(e){return(qk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Vk(e,t){return(Vk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Kk=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=zk(this,t,[e,r])).CLASS_NAME="SuperMap.ChartFeatureInfoSpecsService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vk(e,t)}(t,Vw),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=Hk(qk(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([]),M.reset(this)}},{key:"processAsync",value:function(e){return this.isTempLayers||M.urlPathAppend(this.url,"chartFeatureInfoSpecs"),this.request({method:"GET",params:null,scope:this,success:e,failure:e})}}])&&Gk(r.prototype,n),o&&Gk(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Yk(e){"@babel/helpers - typeof";return(Yk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Wk(n.key),n)}}function Wk(e){var t=function(e,t){if("object"!=Yk(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Yk(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Yk(t)?t:t+""}function Xk(e,t,r){return t=$k(t),function(e,t){if(t&&("object"==Yk(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],$k(e).constructor):t.apply(e,r))}function Zk(){return(Zk="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=$k(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function $k(e){return($k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function eT(e,t){return(eT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var tT=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Xk(this,t,[e,r])).CLASS_NAME="SuperMap.ChartAcronymClassifyService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&eT(e,t)}(t,Vw),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=Zk($k(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([]),M.reset(this)}},{key:"processAsync",value:function(e){var t=this;return t.isTempLayers||(t.url=M.urlPathAppend(t.url,"chartAcronymClassify")),t.request({method:"GET",params:null,scope:t,success:e,failure:e})}}])&&Jk(r.prototype,n),o&&Jk(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function rT(e){"@babel/helpers - typeof";return(rT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nT(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,oT(n.key),n)}}function oT(e){var t=function(e,t){if("object"!=rT(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=rT(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==rT(t)?t:t+""}var iT=function(){return e=function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=t,this.options=r||{}},(t=[{key:"queryChart",value:function(e,t,r){var n=this,o=e,i=n._processFormat(r);return new Fk(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:i,fieldNameFormatter:n.options.fieldNameFormatter}).processAsync(o,t)}},{key:"getChartFeatureInfo",value:function(e){var t=this,r=M.urlPathAppend(t.url,"chartFeatureInfoSpecs");return new Kk(r,{proxy:t.options.proxy,withCredentials:t.options.withCredentials,crossOrigin:t.options.crossOrigin,headers:t.options.headers}).processAsync(e)}},{key:"getChartAcronymClassify",value:function(e){var t=this;return new tT(t.url,{proxy:t.options.proxy,withCredentials:t.options.withCredentials,crossOrigin:t.options.crossOrigin,headers:t.options.headers}).processAsync(e)}},{key:"_processFormat",value:function(e){return e||sn.GEOJSON}}])&&nT(e.prototype,t),r&&nT(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function aT(e){"@babel/helpers - typeof";return(aT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sT(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,uT(n.key),n)}}function uT(e){var t=function(e,t){if("object"!=aT(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=aT(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==aT(t)?t:t+""}function lT(e,t,r){return t=cT(t),function(e,t){if(t&&("object"==aT(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],cT(e).constructor):t.apply(e,r))}function cT(e){return(cT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fT(e,t){return(fT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var pT=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=lT(this,t,[e,r]))._chartService=new iT(e,r),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fT(e,t)}(t,Nw),r=t,(n=[{key:"queryChart",value:function(e,t,r){return e=this._processParams(e),this._chartService.queryChart(e,t,r)}},{key:"getChartFeatureInfo",value:function(e){return this._chartService.getChartFeatureInfo(e)}},{key:"getChartAcronymClassify",value:function(e){return this._chartService.getChartAcronymClassify(e)}},{key:"_processParams",value:function(e){return e?(e.returnContent=null==e.returnContent||e.returnContent,e.chartQueryFilterParameters&&!To.isArray(e.chartQueryFilterParameters)&&(e.chartQueryFilterParameters=[e.chartQueryFilterParameters]),e.bounds&&(e.bounds=To.toSuperMapBounds(e.bounds)),e):{}}},{key:"_processFormat",value:function(e){return e||sn.GEOJSON}}])&&sT(r.prototype,n),o&&sT(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function hT(e){"@babel/helpers - typeof";return(hT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yT(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,dT(n.key),n)}}function dT(e){var t=function(e,t){if("object"!=hT(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=hT(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==hT(t)?t:t+""}function mT(e,t,r){return t=gT(t),function(e,t){if(t&&("object"==hT(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],gT(e).constructor):t.apply(e,r))}function gT(e){return(gT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vT(e,t){return(vT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var bT=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=r||{}).EVENT_TYPES=["broadcastSocketConnected","broadcastSocketClosed","broadcastSocketError","broadcastFailed","broadcastSucceeded","subscribeSocketConnected","subscribeSocketClosed","subscribeSocketError","messageSucceeded","setFilterParamSucceeded"],(n=mT(this,t,[e,r])).geometry=null,n.prjCoordSys=null,n.excludeField=null,M.extend(n,r),n.CLASS_NAME="SuperMap.DataFlowService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vT(e,t)}(t,Vw),r=t,(n=[{key:"initBroadcast",value:function(){var e=this;return this.broadcastWebSocket=this._connect(M.urlPathAppend(e.url,"broadcast")),this.broadcastWebSocket.onopen=function(t){e.broadcastWebSocket.isOpen=!0,t.eventType="broadcastSocketConnected",e.events.triggerEvent("broadcastSocketConnected",t)},this.broadcastWebSocket.onclose=function(t){e.broadcastWebSocket&&(e.broadcastWebSocket.isOpen=!1),t.eventType="broadcastSocketClosed",e.events.triggerEvent("broadcastSocketClosed",t)},this.broadcastWebSocket.onerror=function(t){t.eventType="broadcastSocketError",e.events.triggerEvent("broadcastSocketError",t)},this}},{key:"broadcast",value:function(e){this.broadcastWebSocket&&this.broadcastWebSocket.isOpen?(this.broadcastWebSocket.send(JSON.stringify(e)),this.events.triggerEvent("broadcastSucceeded")):this.events.triggerEvent("broadcastFailed")}},{key:"initSubscribe",value:function(){var e=this;return this.subscribeWebSocket=this._connect(M.urlPathAppend(e.url,"subscribe")),this.subscribeWebSocket.onopen=function(t){e.subscribeWebSocket.send(e._getFilterParams()),t.eventType="subscribeSocketConnected",e.events.triggerEvent("subscribeSocketConnected",t)},this.subscribeWebSocket.onclose=function(t){t.eventType="subscribeWebSocketClosed",e.events.triggerEvent("subscribeWebSocketClosed",t)},this.subscribeWebSocket.onerror=function(t){t.eventType="subscribeSocketError",e.events.triggerEvent("subscribeSocketError",t)},this.subscribeWebSocket.onmessage=function(t){e._onMessage(t)},this}},{key:"setExcludeField",value:function(e){return this.excludeField=e,this.subscribeWebSocket.send(this._getFilterParams()),this}},{key:"setGeometry",value:function(e){return this.geometry=e,this.subscribeWebSocket.send(this._getFilterParams()),this}},{key:"unSubscribe",value:function(){this.subscribeWebSocket&&(this.subscribeWebSocket.close(),this.subscribeWebSocket=null)}},{key:"unBroadcast",value:function(){this.broadcastWebSocket&&(this.broadcastWebSocket.close(),this.broadcastWebSocket=null)}},{key:"destroy",value:function(){Vw.prototype.destroy.apply(this,arguments);this.geometry=null,this.prjCoordSys=null,this.excludeField=null,this.unBroadcast(),this.unSubscribe()}},{key:"_getFilterParams",value:function(){var e={filterParam:{prjCoordSys:this.prjCoordSys,excludeField:this.excludeField,geometry:this.geometry}};return M.toJSON(e)}},{key:"_onMessage",value:function(e){if(e.data&&e.data.indexOf("filterParam")>=0){var t=JSON.parse(e.data);return e.filterParam=t,e.eventType="setFilterParamSucceeded",void this.events.triggerEvent("setFilterParamSucceeded",e)}var r=JSON.parse(e.data);e.featureResult=r,e.eventType="messageSucceeded",this.events.triggerEvent("messageSucceeded",e)}},{key:"_connect",value:function(e){return e=Fw.appendCredential(e),"WebSocket"in window?new WebSocket(e):"MozWebSocket"in window?new(0,window.MozWebSocket)(e):(console.log("no WebSocket"),null)}}])&&yT(r.prototype,n),o&&yT(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function AT(e){"@babel/helpers - typeof";return(AT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wT(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ST(n.key),n)}}function ST(e){var t=function(e,t){if("object"!=AT(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=AT(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==AT(t)?t:t+""}function CT(e,t,r){return t=ET(t),function(e,t){if(t&&("object"==AT(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],ET(e).constructor):t.apply(e,r))}function ET(e){return(ET=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _T(e,t){return(_T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var IT=function(e){function t(e,r){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=r||{}).projection&&(r.prjCoordSys=r.projection),(n=CT(this,t,[e,r])).dataFlow=new bT(e,r),n.dataFlow.events.on({broadcastSocketConnected:n._defaultEvent,broadcastSocketError:n._defaultEvent,broadcastFailed:n._defaultEvent,broadcastSucceeded:n._defaultEvent,subscribeSocketConnected:n._defaultEvent,subscribeSocketError:n._defaultEvent,messageSucceeded:n._defaultEvent,setFilterParamSucceeded:n._defaultEvent,scope:n});var o=n;return o.on("subscribeSocketConnected",function(e){o.fire("subscribesucceeded",e)}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_T(e,t)}(t,Nw),r=t,(n=[{key:"initBroadcast",value:function(){return this.dataFlow.initBroadcast(),this}},{key:"broadcast",value:function(e){this.dataFlow.broadcast(e)}},{key:"initSubscribe",value:function(){return this.dataFlow.initSubscribe(),this}},{key:"setExcludeField",value:function(e){return this.dataFlow.setExcludeField(e),this.options.excludeField=e,this}},{key:"setGeometry",value:function(e){return this.dataFlow.setGeometry(e),this.options.geometry=e,this}},{key:"unSubscribe",value:function(){this.dataFlow.unSubscribe()}},{key:"unBroadcast",value:function(){this.dataFlow.unBroadcast()}},{key:"_defaultEvent",value:function(e){this.fire(e.eventType||e.type,e)}}])&&wT(r.prototype,n),o&&wT(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function OT(e){"@babel/helpers - typeof";return(OT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xT(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,PT(n.key),n)}}function PT(e){var t=function(e,t){if("object"!=OT(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=OT(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==OT(t)?t:t+""}function kT(e,t,r){return t=MT(t),TT(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],MT(e).constructor):t.apply(e,r))}function TT(e,t){if(t&&("object"==OT(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function jT(){return(jT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=MT(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function MT(e){return(MT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function BT(e,t){return(BT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var NT=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=kT(this,t,[e,r]),r?(n.datasource=null,n.dataset=null,r&&M.extend(n,r),n.CLASS_NAME="SuperMap.DatasetService",n):TT(n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&BT(e,t)}(t,Vw),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=jT(MT(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([]);this.datasource=null,this.dataset=null}},{key:"getDatasetsService",value:function(e,t){var r=M.urlPathAppend(this.url,"datasources/name/".concat(e,"/datasets"));return this.processAsync(r,"GET",t)}},{key:"getDatasetService",value:function(e,t,r){var n=M.urlPathAppend(this.url,"datasources/name/".concat(e,"/datasets/name/").concat(t));return this.processAsync(n,"GET",r)}},{key:"setDatasetService",value:function(e,t){if(e){var r=M.urlPathAppend(this.url,"datasources/name/".concat(e.datasourceName,"/datasets/name/").concat(e.datasetName));return delete e.datasourceName,this.processAsync(r,"PUT",t,e)}}},{key:"deleteDatasetService",value:function(e,t,r){var n=M.urlPathAppend(this.url,"datasources/name/".concat(e,"/datasets/name/").concat(t));return this.processAsync(n,"DELETE",r)}},{key:"processAsync",value:function(e,t,r,n){var o={url:e,method:t,scope:this,success:r,failure:r};return n&&(o.data=M.toJSON(n)),this.request(o)}}])&&xT(r.prototype,n),o&&xT(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function RT(e){"@babel/helpers - typeof";return(RT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function LT(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,DT(n.key),n)}}function DT(e){var t=function(e,t){if("object"!=RT(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=RT(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==RT(t)?t:t+""}var FT=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasourceName=null,this.datasetName=null,this.datasetType=null,t&&M.extend(this,t),this.CLASS_NAME="SuperMap.CreateDatasetParameters")},(t=[{key:"destroy",value:function(){this.datasourceName=null,this.datasetName=null,this.datasetType=null}}])&&LT(e.prototype,t),r&&LT(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function QT(e){"@babel/helpers - typeof";return(QT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function GT(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,UT(n.key),n)}}function UT(e){var t=function(e,t){if("object"!=QT(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=QT(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==QT(t)?t:t+""}var zT=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasourceName=null,this.datasetName=null,this.isFileCache=null,this.description=null,this.prjCoordSys=null,this.charset=null,this.palette=null,this.noValue=null,t&&M.extend(this,t),this.CLASS_NAME="SuperMap.UpdateDatasetParameters")},(t=[{key:"destroy",value:function(){var e=this;e.datasourceName=null,e.datasetName=null,e.isFileCache=null,e.prjCoordSys=null,e.charset=null,e.palette=null,e.noValue=null}}])&&GT(e.prototype,t),r&&GT(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function HT(e){"@babel/helpers - typeof";return(HT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qT(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,VT(n.key),n)}}function VT(e){var t=function(e,t){if("object"!=HT(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=HT(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==HT(t)?t:t+""}function KT(e,t,r){return t=YT(t),function(e,t){if(t&&("object"==HT(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],YT(e).constructor):t.apply(e,r))}function YT(e){return(YT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function JT(e,t){return(JT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var WT=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=KT(this,t,[e,r]))._datasetService=new NT(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&JT(e,t)}(t,Nw),r=t,(n=[{key:"getDatasets",value:function(e,t){if(e)return this._datasetService.getDatasetsService(e,t)}},{key:"getDataset",value:function(e,t,r){if(e&&t)return this._datasetService.getDatasetService(e,t,r)}},{key:"setDataset",value:function(e,t){if(e instanceof FT||e instanceof zT){if(e instanceof FT)var r={datasetType:e.datasetType,datasetName:e.datasetName,datasourceName:e.datasourceName};else e instanceof zT&&(r={datasetName:e.datasetName,datasourceName:e.datasourceName,isFileCache:e.isFileCache,description:e.description,prjCoordSys:e.prjCoordSys,charset:e.charset});return this._datasetService.setDatasetService(r,t)}}},{key:"deleteDataset",value:function(e,t,r){return this._datasetService.deleteDatasetService(e,t,r)}}])&&qT(r.prototype,n),o&&qT(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function XT(e){"@babel/helpers - typeof";return(XT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ZT(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,$T(n.key),n)}}function $T(e){var t=function(e,t){if("object"!=XT(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=XT(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==XT(t)?t:t+""}var ej=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasourceName=null,this.description=null,this.coordUnit=null,this.distanceUnit=null,t&&M.extend(this,t),this.CLASS_NAME="SuperMap.SetDatasourceParameters")},(t=[{key:"destroy",value:function(){this.datasourceName=null,this.description=null,this.coordUnit=null,this.distanceUnit=null}}])&&ZT(e.prototype,t),r&&ZT(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function tj(e){"@babel/helpers - typeof";return(tj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rj(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,nj(n.key),n)}}function nj(e){var t=function(e,t){if("object"!=tj(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=tj(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==tj(t)?t:t+""}function oj(e,t,r){return t=aj(t),function(e,t){if(t&&("object"==tj(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],aj(e).constructor):t.apply(e,r))}function ij(){return(ij="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=aj(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function aj(e){return(aj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sj(e,t){return(sj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var uj=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=oj(this,t,[e,r]),r&&M.extend(n,r),n.CLASS_NAME="SuperMap.DatasourceService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sj(e,t)}(t,Vw),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=ij(aj(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"getDatasourceService",value:function(e,t){var r=M.urlPathAppend(this.url,"datasources/name/".concat(e));return this.processAsync(r,"GET",t)}},{key:"getDatasourcesService",value:function(e){var t=M.urlPathAppend(this.url,"datasources");return this.processAsync(t,"GET",e)}},{key:"setDatasourceService",value:function(e,t){if(e){var r=M.urlPathAppend(this.url,"datasources/name/".concat(e.datasourceName));return this.processAsync(r,"PUT",t,e)}}},{key:"processAsync",value:function(e,t,r,n){var o={url:e,method:t,scope:this,success:r,failure:r};return n&&(o.data=M.toJSON(n)),this.request(o)}}])&&rj(r.prototype,n),o&&rj(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function lj(e){"@babel/helpers - typeof";return(lj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cj(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,fj(n.key),n)}}function fj(e){var t=function(e,t){if("object"!=lj(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=lj(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==lj(t)?t:t+""}function pj(e,t,r){return t=hj(t),function(e,t){if(t&&("object"==lj(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],hj(e).constructor):t.apply(e,r))}function hj(e){return(hj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yj(e,t){return(yj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var dj=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=pj(this,t,[e,r]))._datasourceService=new uj(n.url,{proxy:n.proxy,withCredentials:n.withCredentials,crossOrigin:n.crossOrigin,headers:n.headers}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yj(e,t)}(t,Nw),r=t,(n=[{key:"getDatasources",value:function(e){return this._datasourceService.getDatasourcesService(e)}},{key:"getDatasource",value:function(e,t){if(e)return this._datasourceService.getDatasourceService(e,t)}},{key:"setDatasource",value:function(e,t){if(e instanceof ej){var r={description:e.description,coordUnit:e.coordUnit,distanceUnit:e.distanceUnit,datasourceName:e.datasourceName};return this._datasourceService.setDatasourceService(r,t)}}}])&&cj(r.prototype,n),o&&cj(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function mj(e){"@babel/helpers - typeof";return(mj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gj(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,vj(n.key),n)}}function vj(e){var t=function(e,t){if("object"!=mj(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=mj(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==mj(t)?t:t+""}var bj=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dataSourceName=null,this.dataSetName=null,this.features=null,this.editType=Tn.ADD,this.IDs=null,this.returnContent=!1,this.isUseBatch=!1,M.extend(this,t),this.CLASS_NAME="SuperMap.EditFeaturesParameters"},r=[{key:"toJsonParameters",value:function(e){var t,r,n;if(e.editType===Tn.DELETE){if(null===e.IDs)return;n={ids:e.IDs}}else if(n=[],e.features){r=e.features.length;for(var o=0;o<r;o++)(t=e.features[o]).geometry=$n.fromGeometry(t.geometry),n.push(t)}return M.toJSON(n)}}],(t=[{key:"destroy",value:function(){var e=this;e.dataSourceName=null,e.dataSetName=null,e.features=null,e.editType=null,e.IDs=null,e.returnContent=null}}])&&gj(e.prototype,t),r&&gj(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function Aj(e){"@babel/helpers - typeof";return(Aj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wj(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Sj(n.key),n)}}function Sj(e){var t=function(e,t){if("object"!=Aj(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Aj(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Aj(t)?t:t+""}function Cj(e,t,r){return t=_j(t),function(e,t){if(t&&("object"==Aj(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],_j(e).constructor):t.apply(e,r))}function Ej(){return(Ej="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=_j(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function _j(e){return(_j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ij(e,t){return(Ij=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Oj=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Cj(this,t,[e,r])).returnContent=!1,n.isUseBatch=!1,r&&M.extend(n,r),n.url=M.urlPathAppend(n.url,"features"),n.CLASS_NAME="SuperMap.EditFeaturesService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ij(e,t)}(t,Vw),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=Ej(_j(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([]);this.returnContent=null,this.isUseBatch=null,this.fromIndex=null,this.toIndex=null}},{key:"processAsync",value:function(e,t){if(e instanceof bj){var r=this,n="POST",o="",i=e.editType,a=null;if(r.returnContent=e.returnContent,r.isUseBatch=e.isUseBatch,a=bj.toJsonParameters(e),i===Tn.DELETE){a=o=M.toJSON(e.IDs);var s=M.urlAppend(r.url,M.getParameterString({ids:o}));z.urlIsLong(s)?(r.url=M.urlAppend(r.url,M.getParameterString({_method:"DELETE"})),n="POST"):(r.url=s,n="DELETE")}else i===Tn.UPDATE?n="PUT":(r.isUseBatch&&(r.url=M.urlAppend(r.url,"isUseBatch=".concat(r.isUseBatch)),r.returnContent=!1),r.returnContent&&(r.url=M.urlAppend(r.url,"returnContent=true"),n="POST"));return r.request({method:n,data:a,scope:r,success:t,failure:t})}}},{key:"getMetaData",value:function(e,t){var r=e.featureId;return this.url=M.urlPathAppend(this.url,r+"/metadata"),this.request({method:"GET",data:null,scope:this,success:t,failure:t})}}])&&wj(r.prototype,n),o&&wj(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function xj(e){"@babel/helpers - typeof";return(xj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pj(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,kj(n.key),n)}}function kj(e){var t=function(e,t){if("object"!=xj(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=xj(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==xj(t)?t:t+""}function Tj(e,t,r){return t=Mj(t),function(e,t){if(t&&("object"==xj(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],Mj(e).constructor):t.apply(e,r))}function jj(){return(jj="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=Mj(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function Mj(e){return(Mj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Bj(e,t){return(Bj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Nj=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=Tj(this,t,[e,r]),r=r||{},n.returnContent=!0,n.returnFeaturesOnly=!1,n.fromIndex=0,n.toIndex=19,n.hasGeometry=!0,n.maxFeatures=null,n.format=sn.GEOJSON,M.extend(n,r),n.url=M.urlPathAppend(n.url,"featureResults"),n.CLASS_NAME="SuperMap.GetFeaturesServiceBase",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bj(e,t)}(t,Vw),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=jj(Mj(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([]);var a=this;a.returnContent=null,a.fromIndex=null,a.toIndex=null,a.maxFeatures=null,a.format=null,a.hasGeometry=null}},{key:"processAsync",value:function(e,t){if(e){var r,n=this,o=!0;return n.returnContent=e.returnContent,n.returnFeaturesOnly=e.returnFeaturesOnly,n.fromIndex=e.fromIndex,n.toIndex=e.toIndex,n.maxFeatures=e.maxFeatures,n.hasGeometry=e.hasGeometry,n.returnContent&&(o=!1),null!=n.fromIndex&&null!=n.toIndex&&!isNaN(n.fromIndex)&&!isNaN(n.toIndex)&&n.fromIndex>=0&&n.toIndex>=0&&!o&&(n.url=M.urlAppend(n.url,"fromIndex=".concat(n.fromIndex,"&toIndex=").concat(n.toIndex))),n.returnContent&&(e.returnCountOnly||e.returnDatasetInfoOnly||e.returnFeaturesOnly||console.warn("recommend set returnFeaturesOnly config to true to imporve performance. if need get Total amount and Dataset information. FeatureService provide getFeaturesCount and getFeaturesDatasetInfo method"),e.returnCountOnly&&(n.url=M.urlAppend(n.url,"returnCountOnly="+e.returnCountOnly)),e.returnDatasetInfoOnly&&(n.url=M.urlAppend(n.url,"returnDatasetInfoOnly="+e.returnDatasetInfoOnly)),e.returnFeaturesOnly&&(n.url=M.urlAppend(n.url,"returnFeaturesOnly="+e.returnFeaturesOnly))),r=n.getJsonParameters(e),n.request({method:"POST",data:r,scope:n,success:t,failure:t})}}},{key:"transformResult",value:function(e,t){e=M.transformResult(e);var r=new uo;(this.format===sn.GEOJSON&&e.features&&(e.features=r.toGeoJSON(e.features)),this.returnFeaturesOnly&&Array.isArray(e))&&(e={succeed:e.succeed,features:r.toGeoJSON(e)});return{result:e,options:t}}},{key:"dataFormat",value:function(){return[sn.GEOJSON,sn.ISERVER,sn.FGB]}}])&&Pj(r.prototype,n),o&&Pj(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Rj(e){"@babel/helpers - typeof";return(Rj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lj(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Dj(n.key),n)}}function Dj(e){var t=function(e,t){if("object"!=Rj(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Rj(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Rj(t)?t:t+""}var Fj=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.attributeFilter=null,this.name=null,this.joinItems=null,this.linkItems=null,this.ids=null,this.orderBy=null,this.groupBy=null,this.fields=null,t&&M.extend(this,t),this.CLASS_NAME="SuperMap.FilterParameter"},(t=[{key:"destroy",value:function(){var e=this;if(e.attributeFilter=null,e.name=null,e.joinItems){for(var t=0,r=e.joinItems,n=r.length;t<n;t++)r[t].destroy();e.joinItems=null}if(e.linkItems){for(var o=0,i=e.linkItems,a=i.length;o<a;o++)i[o].destroy();e.linkItems=null}e.ids=null,e.orderBy=null,e.groupBy=null,e.fields=null}}])&&Lj(e.prototype,t),r&&Lj(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function Qj(e){"@babel/helpers - typeof";return(Qj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gj(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Uj(n.key),n)}}function Uj(e){var t=function(e,t){if("object"!=Qj(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Qj(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Qj(t)?t:t+""}var zj=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasetNames=null,this.targetEpsgCode=null,this.targetPrj=null,this.returnContent=!0,this.fromIndex=0,this.toIndex=19,this.returnFeaturesOnly=!1,this.maxFeatures=null,this.hasGeometry=!0,this.aggregations=null,M.extend(this,t),this.CLASS_NAME="SuperMap.GetFeaturesParametersBase"},(t=[{key:"destroy",value:function(){var e=this;e.datasetNames=null,e.returnContent=null,e.fromIndex=null,e.toIndex=null,e.hasGeometry=null,e.maxFeatures=null,e.targetEpsgCode=null,e.targetPrj=null,e.aggregation&&(e.aggregation=null)}}])&&Gj(e.prototype,t),r&&Gj(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function Hj(e){"@babel/helpers - typeof";return(Hj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qj(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Vj(n.key),n)}}function Vj(e){var t=function(e,t){if("object"!=Hj(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Hj(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Hj(t)?t:t+""}function Kj(e,t,r){return t=Jj(t),function(e,t){if(t&&("object"==Hj(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],Jj(e).constructor):t.apply(e,r))}function Yj(){return(Yj="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=Jj(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function Jj(e){return(Jj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Wj(e,t){return(Wj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Xj=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Kj(this,t,[e])).getFeatureMode="ID",r.IDs=null,r.fields=null,M.extend(r,e),r.CLASS_NAME="SuperMap.GetFeaturesByIDsParameters",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wj(e,t)}(t,zj),r=t,n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=Yj(Jj(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([]);var a=this;if(a.IDs=null,a.getFeatureMode=null,a.fields){for(;a.fields.length>0;)a.fields.pop();a.fields=null}}}],o=[{key:"toJsonParameters",value:function(e){var t,r;return t={datasetNames:e.datasetNames,getFeatureMode:"ID",ids:e.IDs},e.fields&&((r=new Fj).name=e.datasetNames,r.fields=e.fields,t.queryParameter=r),e.targetEpsgCode&&(t.targetEpsgCode=e.targetEpsgCode),"boolean"==typeof e.hasGeometry&&(t.hasGeometry=e.hasGeometry),!e.targetEpsgCode&&e.targetPrj&&(t.targetPrj=e.targetPrj),e.aggregations&&(t.aggregations=e.aggregations),M.toJSON(t)}}],n&&qj(r.prototype,n),o&&qj(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Zj(e){"@babel/helpers - typeof";return(Zj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $j(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,eM(n.key),n)}}function eM(e){var t=function(e,t){if("object"!=Zj(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Zj(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Zj(t)?t:t+""}function tM(e,t,r){return t=nM(t),function(e,t){if(t&&("object"==Zj(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],nM(e).constructor):t.apply(e,r))}function rM(){return(rM="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=nM(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function nM(e){return(nM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oM(e,t){return(oM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var iM=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=tM(this,t,[e,r])).CLASS_NAME="SuperMap.GetFeaturesByIDsService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oM(e,t)}(t,Nj),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=rM(nM(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"getJsonParameters",value:function(e){return Xj.toJsonParameters(e)}}])&&$j(r.prototype,n),o&&$j(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function aM(e){"@babel/helpers - typeof";return(aM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,uM(n.key),n)}}function uM(e){var t=function(e,t){if("object"!=aM(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=aM(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==aM(t)?t:t+""}function lM(e,t,r){return t=fM(t),function(e,t){if(t&&("object"==aM(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],fM(e).constructor):t.apply(e,r))}function cM(){return(cM="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=fM(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function fM(e){return(fM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pM(e,t){return(pM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var hM=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=lM(this,t,[e])).getFeatureMode="SQL",r.queryParameter=null,M.extend(r,e),r.CLASS_NAME="SuperMap.GetFeaturesBySQLParameters",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pM(e,t)}(t,zj),r=t,n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=cM(fM(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([]);this.getFeatureMode=null,this.queryParameter&&(this.queryParameter.destroy(),this.queryParameter=null)}}],o=[{key:"toJsonParameters",value:function(e){var t={datasetNames:e.datasetNames,getFeatureMode:"SQL",queryParameter:e.queryParameter};return e.maxFeatures&&!isNaN(e.maxFeatures)&&(t.maxFeatures=e.maxFeatures),"boolean"==typeof e.hasGeometry&&(t.hasGeometry=e.hasGeometry),e.aggregations&&(t.aggregations=e.aggregations),e.targetEpsgCode&&(t.targetEpsgCode=e.targetEpsgCode),!e.targetEpsgCode&&e.targetPrj&&(t.targetPrj=e.targetPrj),e.aggregations&&(t.aggregations=e.aggregations),M.toJSON(t)}}],n&&sM(r.prototype,n),o&&sM(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function yM(e){"@babel/helpers - typeof";return(yM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,mM(n.key),n)}}function mM(e){var t=function(e,t){if("object"!=yM(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=yM(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==yM(t)?t:t+""}function gM(e,t,r){return t=bM(t),function(e,t){if(t&&("object"==yM(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],bM(e).constructor):t.apply(e,r))}function vM(){return(vM="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=bM(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function bM(e){return(bM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function AM(e,t){return(AM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var wM=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=gM(this,t,[e,r])).CLASS_NAME="SuperMap.GetFeaturesBySQLService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&AM(e,t)}(t,Nj),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=vM(bM(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"getJsonParameters",value:function(e){return hM.toJsonParameters(e)}}])&&dM(r.prototype,n),o&&dM(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function SM(e){"@babel/helpers - typeof";return(SM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function CM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,EM(n.key),n)}}function EM(e){var t=function(e,t){if("object"!=SM(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=SM(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==SM(t)?t:t+""}function _M(e,t,r){return t=OM(t),function(e,t){if(t&&("object"==SM(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],OM(e).constructor):t.apply(e,r))}function IM(){return(IM="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=OM(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function OM(e){return(OM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xM(e,t){return(xM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var PM=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=_M(this,t,[e])).getFeatureMode=t.getFeatureMode.BOUNDS,r.bounds=null,r.fields=null,r.attributeFilter=null,r.spatialQueryMode=fn.CONTAIN,M.extend(r,e),r.CLASS_NAME="SuperMap.GetFeaturesByBoundsParameters",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xM(e,t)}(t,zj),r=t,n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=IM(OM(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([]);var a=this;if(a.bounds&&(a.bounds.destroy(),a.bounds=null),a.fields){for(;a.fields.length>0;)a.fields.pop();a.fields=null}a.attributeFilter=null,a.spatialQueryMode=null,a.getFeatureMode=null}}],o=[{key:"toJsonParameters",value:function(e){var r,n,o;return n={leftBottom:{x:e.bounds.left,y:e.bounds.bottom},rightTop:{x:e.bounds.right,y:e.bounds.top}},o={datasetNames:e.datasetNames,getFeatureMode:t.getFeatureMode.BOUNDS,bounds:n,spatialQueryMode:e.spatialQueryMode},e.fields&&((r=new Fj).name=e.datasetNames,r.fields=e.fields,o.queryParameter=r),e.attributeFilter&&(o.attributeFilter=e.attributeFilter,o.getFeatureMode=t.getFeatureMode.BOUNDS_ATTRIBUTEFILTER),e.maxFeatures&&!isNaN(e.maxFeatures)&&(o.maxFeatures=e.maxFeatures),"boolean"==typeof e.hasGeometry&&(o.hasGeometry=e.hasGeometry),e.targetEpsgCode&&(o.targetEpsgCode=e.targetEpsgCode),!e.targetEpsgCode&&e.targetPrj&&(o.targetPrj=e.targetPrj),e.aggregations&&(o.aggregations=e.aggregations),M.toJSON(o)}}],n&&CM(r.prototype,n),o&&CM(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function kM(e){"@babel/helpers - typeof";return(kM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function TM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,jM(n.key),n)}}function jM(e){var t=function(e,t){if("object"!=kM(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=kM(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==kM(t)?t:t+""}function MM(e,t,r){return t=NM(t),function(e,t){if(t&&("object"==kM(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],NM(e).constructor):t.apply(e,r))}function BM(){return(BM="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=NM(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function NM(e){return(NM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function RM(e,t){return(RM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}PM.getFeatureMode={BOUNDS:"BOUNDS",BOUNDS_ATTRIBUTEFILTER:"BOUNDS_ATTRIBUTEFILTER"};var LM=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=MM(this,t,[e,r])).CLASS_NAME="SuperMap.GetFeaturesByBoundsService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&RM(e,t)}(t,Nj),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=BM(NM(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"getJsonParameters",value:function(e){return PM.toJsonParameters(e)}}])&&TM(r.prototype,n),o&&TM(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function DM(e){"@babel/helpers - typeof";return(DM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function FM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,QM(n.key),n)}}function QM(e){var t=function(e,t){if("object"!=DM(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=DM(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==DM(t)?t:t+""}function GM(e,t,r){return t=zM(t),function(e,t){if(t&&("object"==DM(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],zM(e).constructor):t.apply(e,r))}function UM(){return(UM="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=zM(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function zM(e){return(zM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function HM(e,t){return(HM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var qM=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=GM(this,t,[e])).bufferDistance=null,r.attributeFilter=null,r.geometry=null,r.fields=null,M.extend(r,e),r.CLASS_NAME="SuperMap.GetFeaturesByBufferParameters",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&HM(e,t)}(t,zj),r=t,n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=UM(zM(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([]);var a=this;if(a.bufferDistance=null,a.attributeFilter=null,a.fields){for(;a.fields.length>0;)a.fields.pop();a.fields=null}a.geometry&&(a.geometry.destroy(),a.geometry=null)}}],o=[{key:"toJsonParameters",value:function(e){var t,r,n;return n=$n.fromGeometry(e.geometry),r={datasetNames:e.datasetNames,getFeatureMode:"BUFFER",bufferDistance:e.bufferDistance,geometry:n},e.fields&&((t=new Fj).name=e.datasetNames,t.fields=e.fields,r.queryParameter=t),e.attributeFilter&&(r.attributeFilter=e.attributeFilter,r.getFeatureMode="BUFFER_ATTRIBUTEFILTER"),e.maxFeatures&&!isNaN(e.maxFeatures)&&(r.maxFeatures=e.maxFeatures),"boolean"==typeof e.hasGeometry&&(r.hasGeometry=e.hasGeometry),e.targetEpsgCode&&(r.targetEpsgCode=e.targetEpsgCode),!e.targetEpsgCode&&e.targetPrj&&(r.targetPrj=e.targetPrj),M.toJSON(r)}}],n&&FM(r.prototype,n),o&&FM(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function VM(e){"@babel/helpers - typeof";return(VM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function KM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,YM(n.key),n)}}function YM(e){var t=function(e,t){if("object"!=VM(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=VM(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==VM(t)?t:t+""}function JM(e,t,r){return t=XM(t),function(e,t){if(t&&("object"==VM(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],XM(e).constructor):t.apply(e,r))}function WM(){return(WM="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=XM(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function XM(e){return(XM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ZM(e,t){return(ZM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var $M=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=JM(this,t,[e,r])).CLASS_NAME="SuperMap.GetFeaturesByBufferService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ZM(e,t)}(t,Nj),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=WM(XM(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"getJsonParameters",value:function(e){return qM.toJsonParameters(e)}}])&&KM(r.prototype,n),o&&KM(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function eB(e){"@babel/helpers - typeof";return(eB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,rB(n.key),n)}}function rB(e){var t=function(e,t){if("object"!=eB(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=eB(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==eB(t)?t:t+""}function nB(e,t,r){return t=iB(t),function(e,t){if(t&&("object"==eB(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],iB(e).constructor):t.apply(e,r))}function oB(){return(oB="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=iB(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function iB(e){return(iB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function aB(e,t){return(aB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var sB=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=nB(this,t,[e])).getFeatureMode="SPATIAL",r.geometry=null,r.fields=null,r.attributeFilter=null,r.spatialQueryMode=fn.CONTAIN,r.orderBy=null,M.extend(r,e),r.CLASS_NAME="SuperMap.GetFeaturesByGeometryParameters",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&aB(e,t)}(t,zj),r=t,n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=oB(iB(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([]);var a=this;if(a.geometry&&(a.geometry.destroy(),a.geometry=null),a.fields){for(;a.fields.length>0;)a.fields.pop();a.fields=null}a.attributeFilter=null,a.spatialQueryMode=null,a.getFeatureMode=null,a.orderBy=null}}],o=[{key:"toJsonParameters",value:function(e){var t,r,n;return r=$n.fromGeometry(e.geometry),n={datasetNames:e.datasetNames,getFeatureMode:"SPATIAL",geometry:r,spatialQueryMode:e.spatialQueryMode},(e.fields||e.orderBy)&&((t=new Fj).name=e.datasetNames,e.fields&&(t.fields=e.fields),e.orderBy&&(t.orderBy=e.orderBy),n.queryParameter=t),e.attributeFilter&&(n.attributeFilter=e.attributeFilter,n.getFeatureMode="SPATIAL_ATTRIBUTEFILTER"),e.maxFeatures&&!isNaN(e.maxFeatures)&&(n.maxFeatures=e.maxFeatures),"boolean"==typeof e.hasGeometry&&(n.hasGeometry=e.hasGeometry),e.targetEpsgCode&&(n.targetEpsgCode=e.targetEpsgCode),!e.targetEpsgCode&&e.targetPrj&&(n.targetPrj=e.targetPrj),e.aggregations&&(n.aggregations=e.aggregations),M.toJSON(n)}}],n&&tB(r.prototype,n),o&&tB(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function uB(e){"@babel/helpers - typeof";return(uB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,cB(n.key),n)}}function cB(e){var t=function(e,t){if("object"!=uB(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=uB(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==uB(t)?t:t+""}function fB(e,t,r){return t=hB(t),function(e,t){if(t&&("object"==uB(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],hB(e).constructor):t.apply(e,r))}function pB(){return(pB="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=hB(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function hB(e){return(hB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yB(e,t){return(yB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var dB=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=fB(this,t,[e,r])).CLASS_NAME="SuperMap.GetFeaturesByGeometryService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yB(e,t)}(t,Nj),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=pB(hB(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"getJsonParameters",value:function(e){return sB.toJsonParameters(e)}}])&&lB(r.prototype,n),o&&lB(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function mB(e){"@babel/helpers - typeof";return(mB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,vB(n.key),n)}}function vB(e){var t=function(e,t){if("object"!=mB(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=mB(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==mB(t)?t:t+""}var bB=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dataSourceName=null,this.dataSetName=null,this.featureId=null,M.extend(this,t),this.CLASS_NAME="SuperMap.AttachmentsParameters"},(t=[{key:"destroy",value:function(){this.dataSourceName=null,this.dataSetName=null,this.featureId=null}}])&&gB(e.prototype,t),r&&gB(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function AB(e){"@babel/helpers - typeof";return(AB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,SB(n.key),n)}}function SB(e){var t=function(e,t){if("object"!=AB(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=AB(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==AB(t)?t:t+""}function CB(e,t,r){return t=EB(t),function(e,t){if(t&&("object"==AB(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],EB(e).constructor):t.apply(e,r))}function EB(e){return(EB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _B(e,t){return(_B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var IB=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=CB(this,t,[e])).file=null,r.IDs=null,r.editType=Tn.ADD,M.extend(r,e),r.CLASS_NAME="SuperMap.EditAttachmentsParameters",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_B(e,t)}(t,bB),r=t,(n=[{key:"destroy",value:function(){var e=this;e.dataSourceName=null,e.dataSetName=null,e.featureId=null,e.file=null,e.IDs=null,e.editType=null}}])&&wB(r.prototype,n),o&&wB(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function OB(e){"@babel/helpers - typeof";return(OB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,PB(n.key),n)}}function PB(e){var t=function(e,t){if("object"!=OB(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=OB(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==OB(t)?t:t+""}function kB(e,t,r){return t=jB(t),function(e,t){if(t&&("object"==OB(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],jB(e).constructor):t.apply(e,r))}function TB(){return(TB="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=jB(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function jB(e){return(jB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function MB(e,t){return(MB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var BB=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=kB(this,t,[e,r]),r&&M.extend(n,r),n.CLASS_NAME="SuperMap.FeatureAttachmentsService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&MB(e,t)}(t,Vw),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=TB(jB(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"processAsync",value:function(e,t){if(e instanceof IB){M.extend(this,e);var r=this,n=e.editType;if(r.featureId=e.featureId,r.IDs=e.IDs,n===Tn.DELETE){if(!r.IDs||Array.isArray(r.IDs)&&0===r.IDs.length)return;r.method="DELETE";for(var o=[],i=0;i<r.IDs.length;i++){var a=M.urlPathAppend(r.url,"/features/".concat(r.featureId,"/attachments/").concat(r.IDs[i])),s=r.request({url:a,method:r.method,data:null,scope:r,success:null,failure:null});o.push(s)}return Promise.all(o).then(function(e){return t&&t(e),e})}if(e.file&&(e.file instanceof File||e.file instanceof Blob)){var u=new FormData;return u.append("file",e.file),r.method="POST",r.url=M.urlPathAppend(r.url,"/features/".concat(r.featureId,"/attachments")),r.request({method:r.method,data:u,scope:r,success:t,failure:t})}}}},{key:"getAttachments",value:function(e,t){if(e instanceof bB){M.extend(this,e);var r=this;return r.method="GET",r.featureId=e.featureId,r.url=M.urlPathAppend(r.url,"/features/".concat(r.featureId,"/attachments")),r.request({method:r.method,data:null,scope:r,success:t,failure:t})}}}])&&xB(r.prototype,n),o&&xB(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function NB(e){"@babel/helpers - typeof";return(NB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function RB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function LB(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?RB(Object(r),!0).forEach(function(t){DB(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RB(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function DB(e,t,r){return(t=QB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,QB(n.key),n)}}function QB(e){var t=function(e,t){if("object"!=NB(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=NB(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==NB(t)?t:t+""}var GB={id:iM,sql:wM,bounds:LM,buffer:$M,geometry:dB},UB=function(){return e=function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=t,this.options=r||{}},(t=[{key:"getFeaturesByIDs",value:function(e,t,r){var n=this;return new iM(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:r}).processAsync(e,t)}},{key:"getFeaturesByBounds",value:function(e,t,r){var n=this;return new LM(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(e,t)}},{key:"getFeaturesByBuffer",value:function(e,t,r){var n=this;return new $M(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(e,t)}},{key:"getFeaturesBySQL",value:function(e,t,r){var n=this;return new wM(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(e,t)}},{key:"getFeaturesByGeometry",value:function(e,t,r){var n=this;return new dB(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(e,t)}},{key:"editFeatures",value:function(e,t){if(e&&e.dataSourceName&&e.dataSetName){var r=this,n=r.url,o=e.dataSourceName,i=e.dataSetName;return n=M.urlPathAppend(n,"datasources/"+o+"/datasets/"+i),new Oj(n,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(e,t)}}},{key:"getMetadata",value:function(e,t){var r=this,n=r.url,o=e.dataSourceName,i=e.dataSetName;return n=M.urlPathAppend(n,"datasources/"+o+"/datasets/"+i),new Oj(n,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).getMetaData(e,t)}},{key:"getFeatureAttachments",value:function(e,t){if(e&&e.dataSourceName&&e.dataSetName&&null!=!e.featureId){var r=this,n=r.url,o=e.dataSourceName,i=e.dataSetName;return n=M.urlPathAppend(n,"datasources/"+o+"/datasets/"+i),new BB(n,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).getAttachments(e,t)}}},{key:"editFeatureAttachments",value:function(e,t){if(e&&e.dataSourceName&&e.dataSetName&&null!=!e.featureId&&e.editType){var r=this,n=r.url,o=e.dataSourceName,i=e.dataSetName;return n=M.urlPathAppend(n,"datasources/"+o+"/datasets/"+i),new BB(n,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(e,t)}}},{key:"getFeaturesCount",value:function(e,t){var r=this,n=LB(LB({},e),{},{returnCountOnly:!0,returnContent:!0,returnFeaturesOnly:!1}),o=Object.keys(GB).find(function(e){return n.CLASS_NAME.toLowerCase().includes(e)});return new GB[o](r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(n,t)}},{key:"getFeaturesDatasetInfo",value:function(e,t){var r=this,n=LB(LB({},e),{},{returnDatasetInfoOnly:!0,returnContent:!0,returnFeaturesOnly:!1}),o=Object.keys(GB).find(function(e){return n.CLASS_NAME.toLowerCase().includes(e)});return new GB[o](r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(n,t)}},{key:"_processFormat",value:function(e){return e||sn.GEOJSON}}])&&FB(e.prototype,t),r&&FB(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function zB(e){"@babel/helpers - typeof";return(zB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function HB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,qB(n.key),n)}}function qB(e){var t=function(e,t){if("object"!=zB(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=zB(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==zB(t)?t:t+""}function VB(e,t,r){return t=KB(t),function(e,t){if(t&&("object"==zB(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],KB(e).constructor):t.apply(e,r))}function KB(e){return(KB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function YB(e,t){return(YB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var JB=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=VB(this,t,[e,r]))._featureService=new UB(e,r),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&YB(e,t)}(t,Nw),r=t,(n=[{key:"getFeaturesByIDs",value:function(e,t,r){return e=this._processParams(e),this._featureService.getFeaturesByIDs(e,t,r)}},{key:"getFeaturesByBounds",value:function(e,t,r){return e=this._processParams(e),this._featureService.getFeaturesByBounds(e,t,r)}},{key:"getFeaturesByBuffer",value:function(e,t,r){return e=this._processParams(e),this._featureService.getFeaturesByBuffer(e,t,r)}},{key:"getFeaturesBySQL",value:function(e,t,r){return e=this._processParams(e),this._featureService.getFeaturesBySQL(e,t,r)}},{key:"getFeaturesByGeometry",value:function(e,t,r){return e=this._processParams(e),this._featureService.getFeaturesByGeometry(e,t,r)}},{key:"editFeatures",value:function(e,t){if(e&&e.dataSourceName&&e.dataSetName){var r=this,n=r.url,o=e.dataSourceName,i=e.dataSetName;return n=M.urlPathAppend(n,"datasources/"+o+"/datasets/"+i),new Oj(n,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(r._processParams(e),t)}}},{key:"getMetadata",value:function(e,t){return this._featureService.getMetadata(e,t)}},{key:"getFeatureAttachments",value:function(e,t){return this._featureService.getFeatureAttachments(e,t)}},{key:"editFeatureAttachments",value:function(e,t){return this._featureService.editFeatureAttachments(e,t)}},{key:"getFeaturesCount",value:function(e,t){return e=this._processParams(e),this._featureService.getFeaturesCount(e,t)}},{key:"getFeaturesDatasetInfo",value:function(e,t){return e=this._processParams(e),this._featureService.getFeaturesDatasetInfo(e,t)}},{key:"_processParams",value:function(e){if(!e)return{};var t=this;if(e.returnContent=null==e.returnContent||e.returnContent,e.fromIndex=e.fromIndex?e.fromIndex:0,e.toIndex=0===e.toIndex?0:e.toIndex?e.toIndex:-1,e.bounds&&(e.bounds=To.toSuperMapBounds(e.bounds)),e.editType&&(e.editType=e.editType.toLowerCase()),e.geometry&&(e.geometry instanceof o().LngLatBounds?(e.geometry=To.toSuperMapPolygon(e.geometry),e.geometry.SRID=4326):e.geometry instanceof o().Point?e.geometry=new ot(e.geometry.x,e.geometry.y):e.geometry instanceof o().LngLat?(e.geometry=new ot(e.geometry.lng,e.geometry.lat),e.geometry.SRID=4326):e.geometry instanceof b||(e.geometry=To.toSuperMapGeometry(e.geometry))),e.features){var r=[];To.isArray(e.features)?e.features.map(function(e){return r.push(t._createServerFeature(e)),r}):r.push(t._createServerFeature(e.features)),e.features=r}return e}},{key:"_createServerFeature",value:function(e){if(e.toServerFeature)return e.toServerFeature({geometryFunction:function(e){return To.toSuperMapGeometry(e)}});var t={},r=[],n=[],o=e.properties;for(var i in o)r.push(i),n.push(o[i]);return t.fieldNames=r,t.fieldValues=n,e.id&&(t.id=e.id),t.geometry=To.toSuperMapGeometry(e),t}}])&&HB(r.prototype,n),i&&HB(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,i}();function WB(e){"@babel/helpers - typeof";return(WB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function XB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ZB(n.key),n)}}function ZB(e){var t=function(e,t){if("object"!=WB(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=WB(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==WB(t)?t:t+""}function $B(e,t,r){return t=tN(t),function(e,t){if(t&&("object"==WB(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],tN(e).constructor):t.apply(e,r))}function eN(){return(eN="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=tN(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function tN(e){return(tN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rN(e,t){return(rN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var nN=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=$B(this,t,[e,r])).datasource=null,n.dataset=null,r&&M.extend(n,r),n.CLASS_NAME="SuperMap.GetFieldsService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rN(e,t)}(t,Vw),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=eN(tN(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([]);this.datasource=null,this.dataset=null}},{key:"processAsync",value:function(e){var t=this;return t.url=M.urlPathAppend(t.url,"datasources/".concat(t.datasource,"/datasets/").concat(t.dataset,"/fields")),t.request({method:"GET",data:null,scope:t,success:e,failure:e})}}])&&XB(r.prototype,n),o&&XB(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function oN(e){"@babel/helpers - typeof";return(oN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function iN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,aN(n.key),n)}}function aN(e){var t=function(e,t){if("object"!=oN(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=oN(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==oN(t)?t:t+""}var sN=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasource=null,this.dataset=null,t&&M.extend(this,t),this.CLASS_NAME="SuperMap.FieldParameters"},(t=[{key:"destroy",value:function(){this.datasource=null,this.dataset=null}}])&&iN(e.prototype,t),r&&iN(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function uN(e){"@babel/helpers - typeof";return(uN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,cN(n.key),n)}}function cN(e){var t=function(e,t){if("object"!=uN(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=uN(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==uN(t)?t:t+""}function fN(e,t,r){return t=pN(t),function(e,t){if(t&&("object"==uN(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],pN(e).constructor):t.apply(e,r))}function pN(e){return(pN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hN(e,t){return(hN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var yN=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=fN(this,t,[e])).fieldName=null,r.statisticMode=null,e&&M.extend(r,e),r.CLASS_NAME="SuperMap.FieldStatisticsParameters",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hN(e,t)}(t,sN),r=t,(n=[{key:"destroy",value:function(){this.fieldName=null,this.statisticMode=null}}])&&lN(r.prototype,n),o&&lN(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function dN(e){"@babel/helpers - typeof";return(dN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,gN(n.key),n)}}function gN(e){var t=function(e,t){if("object"!=dN(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=dN(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==dN(t)?t:t+""}function vN(e,t,r){return t=AN(t),function(e,t){if(t&&("object"==dN(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],AN(e).constructor):t.apply(e,r))}function bN(){return(bN="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=AN(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function AN(e){return(AN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wN(e,t){return(wN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var SN=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=vN(this,t,[e,r])).datasource=null,n.dataset=null,n.field=null,n.statisticMode=null,r&&M.extend(n,r),n.CLASS_NAME="SuperMap.FieldStatisticService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wN(e,t)}(t,Vw),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=bN(AN(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([]);this.datasource=null,this.dataset=null,this.field=null,this.statisticMode=null}},{key:"processAsync",value:function(e){var t=this,r="datasources/"+t.datasource+"/datasets/"+t.dataset+"/fields/"+t.field+"/"+t.statisticMode;return t.url=M.urlPathAppend(t.url,r),t.request({method:"GET",data:null,scope:t,success:e,failure:e})}}])&&mN(r.prototype,n),o&&mN(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function CN(e){"@babel/helpers - typeof";return(CN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function EN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_N(n.key),n)}}function _N(e){var t=function(e,t){if("object"!=CN(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=CN(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==CN(t)?t:t+""}var IN=function(){return e=function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=t,this.options=r||{}},(t=[{key:"getFields",value:function(e,t){var r=this;return new nN(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,datasource:e.datasource,dataset:e.dataset}).processAsync(t)}},{key:"getFieldStatisticsInfo",value:function(e,t){if(e instanceof yN){var r=this,n=e.fieldName,o=e.statisticMode;o&&!Array.isArray(o)&&(o=[o]),r.currentStatisticResult={fieldName:n},r._statisticsCallback=t,o.forEach(function(t){r.currentStatisticResult[t]=null,r._fieldStatisticRequest(e.datasource,e.dataset,n,t)})}}},{key:"_fieldStatisticRequest",value:function(e,t,r,n){var o=this;new SN(o.url,{datasource:e,dataset:t,field:r,statisticMode:n,crossOrigin:o.options.crossOrigin,headers:o.options.headers}).processAsync(o._processCompleted.bind(o))}},{key:"_processCompleted",value:function(e){var t=this;if(e.error)t._statisticsCallback(e);else{var r=!0,n=e.result;for(var o in this.currentStatisticResult&&null==t.currentStatisticResult[n.mode]&&(this.currentStatisticResult[n.mode]=n.result),t.currentStatisticResult)if(null==t.currentStatisticResult[o]){r=!1;break}r&&t._statisticsCallback({result:t.currentStatisticResult})}}}])&&EN(e.prototype,t),r&&EN(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function ON(e){"@babel/helpers - typeof";return(ON="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,PN(n.key),n)}}function PN(e){var t=function(e,t){if("object"!=ON(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ON(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ON(t)?t:t+""}function kN(e,t,r){return t=TN(t),function(e,t){if(t&&("object"==ON(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],TN(e).constructor):t.apply(e,r))}function TN(e){return(TN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jN(e,t){return(jN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var MN=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=kN(this,t,[e,r]))._fieldService=new IN(e,r),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jN(e,t)}(t,Nw),r=t,(n=[{key:"getFields",value:function(e,t){return this._fieldService.getFields(e,t)}},{key:"getFieldStatisticsInfo",value:function(e,t){return this._fieldService.getFieldStatisticsInfo(e,t)}}])&&xN(r.prototype,n),o&&xN(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function BN(e){"@babel/helpers - typeof";return(BN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function NN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,RN(n.key),n)}}function RN(e){var t=function(e,t){if("object"!=BN(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=BN(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==BN(t)?t:t+""}var LN=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasetName=null,this.dataSourceName=null,this.X=null,this.Y=null,this.bounds=null,M.extend(this,t),this.CLASS_NAME="SuperMap.GetGridCellInfosParameters"},(t=[{key:"destroy",value:function(){this.datasetName=null,this.dataSourceName=null,this.X=null,this.Y=null}}])&&NN(e.prototype,t),r&&NN(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function DN(e){"@babel/helpers - typeof";return(DN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function FN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,QN(n.key),n)}}function QN(e){var t=function(e,t){if("object"!=DN(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=DN(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==DN(t)?t:t+""}function GN(e,t,r){return t=zN(t),function(e,t){if(t&&("object"==DN(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],zN(e).constructor):t.apply(e,r))}function UN(){return(UN="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=zN(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function zN(e){return(zN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function HN(e,t){return(HN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var qN=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=GN(this,t,[e,r])).datasetName=null,n.dataSourceName=null,n.datasetType=null,n.X=null,n.Y=null,r&&M.extend(n,r),n.CLASS_NAME="SuperMap.GetGridCellInfosService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&HN(e,t)}(t,Vw),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=UN(zN(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([]);var a=this;a.X=null,a.Y=null,a.datasetName=null,a.dataSourceName=null,a.datasetType=null}},{key:"processAsync",value:function(e,t){if(e instanceof LN){M.extend(this,e);var r=this;return r.url=M.urlPathAppend(r.url,"datasources/".concat(r.dataSourceName,"/datasets/").concat(r.datasetName)),r.request({method:"GET",data:null,scope:r,success:function(e){!t&&e.result||(e=e.result?e.result:e,r.getDatasetInfoCompleted(e,t))},failure:t}).then(function(e){var t=e.result;return t&&r.getDatasetInfoCompleted(t)})}}},{key:"getDatasetInfoCompleted",value:function(e,t){return e=M.transformResult(e),this.datasetType=e.datasetInfo.type,this.queryGridInfos(t)}},{key:"queryGridInfos",value:function(e){var t=this,r="GRID"===t.datasetType?"gridValue":"imageValue",n=t.bounds?r+"s":r,o=M.urlPathAppend(t.url,n),i="GET",a=null;return Array.isArray(t.bounds)?(i="POST",a=t.bounds):t.bounds?o=M.urlAppend(o,"bounds=".concat(encodeURIComponent(JSON.stringify(t.bounds)))):null!=t.X&&null!=t.Y&&(o=M.urlAppend(o,"x=".concat(t.X,"&y=").concat(t.Y))),t.request({url:o,method:i,data:a,scope:t,success:e,failure:e})}}])&&FN(r.prototype,n),o&&FN(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function VN(e){"@babel/helpers - typeof";return(VN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function KN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,YN(n.key),n)}}function YN(e){var t=function(e,t){if("object"!=VN(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=VN(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==VN(t)?t:t+""}function JN(e,t,r){return t=WN(t),function(e,t){if(t&&("object"==VN(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],WN(e).constructor):t.apply(e,r))}function WN(e){return(WN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function XN(e,t){return(XN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var ZN=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=JN(this,t,[e,r]))._gridCellQueryService=new qN(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&XN(e,t)}(t,Nw),r=t,(n=[{key:"getGridCellInfos",value:function(e,t){return e?this._gridCellQueryService.processAsync(e,t):null}}])&&KN(r.prototype,n),o&&KN(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function $N(e){"@babel/helpers - typeof";return($N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eR(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,tR(n.key),n)}}function tR(e){var t=function(e,t){if("object"!=$N(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=$N(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==$N(t)?t:t+""}function rR(e,t,r){return t=nR(t),function(e,t){if(t&&("object"==$N(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],nR(e).constructor):t.apply(e,r))}function nR(e){return(nR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oR(e,t){return(oR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var iR=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=rR(this,t,[e,r=r||{}])).CLASS_NAME="SuperMap.GeoprocessingService",n.headers={},n.crossOrigin=!0,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oR(e,t)}(t,Vw),r=t,(n=[{key:"getTools",value:function(e){return this._processAsync({url:"".concat(this.url,"/list"),callback:e})}},{key:"getTool",value:function(e,t){return this._processAsync({url:"".concat(this.url,"/").concat(e),callback:t})}},{key:"execute",value:function(e,t,r,n){var o={parameter:t=t||null,environment:r=r||null};return this._processAsync({url:"".concat(this.url,"/").concat(e,"/execute"),paramter:o,callback:n})}},{key:"submitJob",value:function(e,t,r,n){t=t||null,r=r||null;var o=JSON.stringify({parameter:t,environments:r});return this._processAsync({url:"".concat(this.url,"/").concat(e,"/jobs"),method:"POST",callback:n,data:o})}},{key:"waitForJobCompletion",value:function(e,t,r,n){var o=this,i=setInterval(function(){o._processAsync({url:"".concat(o.url,"/").concat(t,"/jobs/").concat(e),callback:function(e){var t=e.result.state.runState;e.options.statusCallback&&e.options.statusCallback(t),-1!==["FINISHED","FAILED","CANCELED"].indexOf(t)&&(clearInterval(i),n(e))}})},r.interval)}},{key:"getJobInfo",value:function(e,t,r){return this._processAsync({url:"".concat(this.url,"/").concat(e,"/jobs/").concat(t),callback:r})}},{key:"cancelJob",value:function(e,t,r){return this._processAsync({url:"".concat(this.url,"/").concat(e,"/jobs/").concat(t,"/cancel"),callback:r})}},{key:"getJobs",value:function(e,t){var r="".concat(this.url,"/jobs");e&&"string"==typeof e?r="".concat(this.url,"/").concat(e,"/jobs"):t=e,this._processAsync({url:r,callback:t})}},{key:"getResults",value:function(e,t,r,n){var o="".concat(this.url,"/").concat(e,"/jobs/").concat(t,"/results");return r&&("string"==typeof r?o="".concat(o,"/").concat(r):n=r),this._processAsync({url:o,callback:n})}},{key:"_processAsync",value:function(e){var t=e.url,r=e.method,n=e.callback,o=e.paramter,i=e.data;return this.request({url:t,method:r||"GET",params:o,data:i,headers:{"Content-type":"application/json"},scope:this,success:n,failure:n})}}])&&eR(r.prototype,n),o&&eR(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function aR(e){"@babel/helpers - typeof";return(aR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sR(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,uR(n.key),n)}}function uR(e){var t=function(e,t){if("object"!=aR(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=aR(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==aR(t)?t:t+""}function lR(e,t,r){return t=cR(t),function(e,t){if(t&&("object"==aR(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],cR(e).constructor):t.apply(e,r))}function cR(e){return(cR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fR(e,t){return(fR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var pR=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=lR(this,t,[e,r])).headers={},n.crossOrigin=!0,n.withCredentials=!0,n.proxy=!0,n._geoprocessingJobsService=new iR(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fR(e,t)}(t,Nw),r=t,(n=[{key:"getTools",value:function(e){return this._geoprocessingJobsService.getTools(e)}},{key:"getTool",value:function(e,t){this._geoprocessingJobsService.getTool(e,t)}},{key:"execute",value:function(e,t,r,n){return this._geoprocessingJobsService.execute(e,t,r,n)}},{key:"submitJob",value:function(e,t,r,n){return this._geoprocessingJobsService.submitJob(e,t,r,n)}},{key:"waitForJobCompletion",value:function(e,t,r,n){return this._geoprocessingJobsService.waitForJobCompletion(e,t,r,n)}},{key:"getJobInfo",value:function(e,t,r){return this._geoprocessingJobsService.getJobInfo(e,t,r)}},{key:"cancelJob",value:function(e,t,r){return this._geoprocessingJobsService.cancelJob(e,t,r)}},{key:"getJobs",value:function(e,t){return this._geoprocessingJobsService.getJobs(e,t)}},{key:"getResults",value:function(e,t,r,n){return this._geoprocessingJobsService.getResults(e,t,r,n)}}])&&sR(r.prototype,n),o&&sR(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function hR(e){"@babel/helpers - typeof";return(hR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yR(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,dR(n.key),n)}}function dR(e){var t=function(e,t){if("object"!=hR(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=hR(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==hR(t)?t:t+""}var mR=function(){return e=function e(t,r){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)return this;this.memoryData=null,this.type=t,r&&M.extend(this,r),this.CLASS_NAME="SuperMap.Theme"},(t=[{key:"destroy",value:function(){this.memoryData&&(this.memoryData.destroy(),this.memoryData=null),this.type=null}},{key:"toServerJSONObject",value:function(){}}])&&yR(e.prototype,t),r&&yR(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function gR(e){"@babel/helpers - typeof";return(gR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vR(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,bR(n.key),n)}}function bR(e){var t=function(e,t){if("object"!=gR(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=gR(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==gR(t)?t:t+""}var AR=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.align=wn.BASELINECENTER,this.backColor=new Gr(255,255,255),this.foreColor=new Gr(0,0,0),this.backOpaque=!1,this.sizeFixed=!0,this.fontHeight=6,this.fontWidth=0,this.fontWeight=400,this.fontName="Times New Roman",this.bold=!1,this.italic=!1,this.italicAngle=0,this.shadow=!1,this.strikeout=!1,this.outline=!1,this.opaqueRate=0,this.underline=!1,this.rotation=0,t&&M.extend(this,t),this.CLASS_NAME="SuperMap.ServerTextStyle"}return t=e,n=[{key:"fromObj",value:function(t){var r=new e(t);return M.copy(r,t),r.backColor=Gr.fromJson(t.backColor),r.foreColor=Gr.fromJson(t.foreColor),r}}],(r=[{key:"destroy",value:function(){var e=this;e.align=null,e.backColor&&(e.backColor.destroy(),e.backColor=null),e.foreColor&&(e.foreColor.destroy(),e.foreColor=null),e.backOpaque=null,e.sizeFixed=null,e.fontHeight=null,e.fontWidth=null,e.fontWeight=null,e.fontName=null,e.bold=null,e.italic=null,e.italicAngle=null,e.shadow=null,e.strikeout=null,e.outline=null,e.opaqueRate=null,e.underline=null,e.rotation=null}}])&&vR(t.prototype,r),n&&vR(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function wR(e){"@babel/helpers - typeof";return(wR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function SR(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,CR(n.key),n)}}function CR(e){var t=function(e,t){if("object"!=wR(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=wR(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==wR(t)?t:t+""}var ER=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.caption=null,this.end=0,this.start=0,this.visible=!0,this.style=new AR,t&&M.extend(this,t),this.CLASS_NAME="SuperMap.ThemeLabelItem"}return t=e,n=[{key:"fromObj",value:function(t){if(t){var r=new e;return M.copy(r,t),r}}}],(r=[{key:"destroy",value:function(){var e=this;e.caption=null,e.end=null,e.start=null,e.style&&(e.style.destroy(),e.style=null),e.visible=null}}])&&SR(t.prototype,r),n&&SR(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function _R(e){"@babel/helpers - typeof";return(_R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function IR(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,OR(n.key),n)}}function OR(e){var t=function(e,t){if("object"!=_R(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=_R(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==_R(t)?t:t+""}var xR=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.caption=null,this.style=new qr,this.unique=null,this.visible=!0,t&&M.extend(this,t),this.CLASS_NAME="SuperMap.ThemeUniqueItem"}return t=e,n=[{key:"fromObj",value:function(t){var r=new e;return M.copy(r,t),r.style=qr.fromJson(t.style),r}}],(r=[{key:"destroy",value:function(){var e=this;e.caption=null,e.unique=null,e.style&&(e.style.destroy(),e.style=null),e.visible=null}},{key:"toServerJSONObject",value:function(){var e={};return(e=M.copyAttributes(e,this)).style&&e.style.toServerJSONObject&&(e.style=e.style.toServerJSONObject()),e}}])&&IR(t.prototype,r),n&&IR(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function PR(e){"@babel/helpers - typeof";return(PR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kR(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,TR(n.key),n)}}function TR(e){var t=function(e,t){if("object"!=PR(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=PR(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==PR(t)?t:t+""}var jR=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.offsetFixed=!1,this.offsetX="0.0",this.offsetY="0.0",t&&M.extend(this,t),this.CLASS_NAME="SuperMap.ThemeOffset"}return t=e,n=[{key:"fromObj",value:function(t){if(t){var r=new e;return M.copy(r,t),r}}}],(r=[{key:"destroy",value:function(){this.offsetFixed=null,this.offsetX=null,this.offsetY=null}}])&&kR(t.prototype,r),n&&kR(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function MR(e){"@babel/helpers - typeof";return(MR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function BR(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,NR(n.key),n)}}function NR(e){var t=function(e,t){if("object"!=MR(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=MR(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==MR(t)?t:t+""}var RR=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.defaultStyle=null,this.separator=null,this.separatorEnabled=!1,this.splitIndexes=null,this.styles=new AR,t&&M.extend(this,t),this.CLASS_NAME="SuperMap.LabelMixedTextStyle"}return t=e,n=[{key:"fromObj",value:function(t){if(t){var r=new e,n=t.styles;if(M.copy(r,t),r.defaultStyle=new AR(t.defaultStyle),n){r.styles=[];for(var o=0,i=n.length;o<i;o++)r.styles.push(new AR(n[o]))}return r}}}],(r=[{key:"destroy",value:function(){var e=this;if(e.defaultStyle&&(e.defaultStyle.destroy(),e.defaultStyle=null),e.separator=null,e.separatorEnabled=null,e.splitIndexes&&(e.splitIndexes=null),e.styles){for(var t=0,r=e.styles,n=r.length;t<n;t++)r[t].destroy();e.styles=null}}}])&&BR(t.prototype,r),n&&BR(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function LR(e){"@babel/helpers - typeof";return(LR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function DR(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,FR(n.key),n)}}function FR(e){var t=function(e,t){if("object"!=LR(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=LR(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==LR(t)?t:t+""}var QR=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.maxTextHeight=0,this.maxTextWidth=0,this.minTextHeight=0,this.minTextWidth=0,this.uniformStyle=new AR,this.uniformMixedStyle=null,t&&M.extend(this,t),this.CLASS_NAME="SuperMap.ThemeLabelText"}return t=e,n=[{key:"fromObj",value:function(t){if(t){var r=new e;return M.copy(r,t),r.uniformStyle=AR.fromObj(t.uniformStyle),r.uniformMixedStyle=RR.fromObj(t.uniformMixedStyle),r}}}],(r=[{key:"destroy",value:function(){var e=this;e.maxTextHeight=null,e.maxTextWidth=null,e.minTextHeight=null,e.minTextWidth=null,e.uniformStyle&&(e.uniformStyle.destroy(),e.uniformStyle=null),e.uniformMixedStyle&&(e.uniformMixedStyle.destroy(),e.uniformMixedStyle=null)}}])&&DR(t.prototype,r),n&&DR(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function GR(e){"@babel/helpers - typeof";return(GR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function UR(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,zR(n.key),n)}}function zR(e){var t=function(e,t){if("object"!=GR(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=GR(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==GR(t)?t:t+""}var HR=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isAlongLine=!0,this.alongLineDirection=Sn.LB_TO_RT,this.angleFixed=!1,this.repeatedLabelAvoided=!1,this.repeatIntervalFixed=!1,this.labelRepeatInterval=0,t&&M.extend(this,t),this.CLASS_NAME="SuperMap.ThemeLabelAlongLine"}return t=e,n=[{key:"fromObj",value:function(t){if(t){var r=new e;return M.copy(r,t),r}}}],(r=[{key:"destroy",value:function(){var e=this;e.isAlongLine=null,e.alongLineDirection=null,e.angleFixed=null,e.repeatedLabelAvoided=null,e.repeatIntervalFixed=null,e.labelRepeatInterval=null}}])&&UR(t.prototype,r),n&&UR(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function qR(e){"@babel/helpers - typeof";return(qR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function VR(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,KR(n.key),n)}}function KR(e){var t=function(e,t){if("object"!=qR(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=qR(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==qR(t)?t:t+""}var YR=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.labelBackShape=Cn.NONE,this.backStyle=new qr,t&&M.extend(this,t),this.CLASS_NAME="SuperMap.ThemeLabelBackground"}return t=e,n=[{key:"fromObj",value:function(t){if(t){var r=new e;return r.labelBackShape=t.labelBackShape,r.backStyle=qr.fromJson(t.backStyle),r}}}],(r=[{key:"destroy",value:function(){this.labelBackShape=null,this.backStyle&&(this.backStyle.destroy(),this.backStyle=null)}}])&&VR(t.prototype,r),n&&VR(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function JR(e){"@babel/helpers - typeof";return(JR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function WR(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,XR(n.key),n)}}function XR(e){var t=function(e,t){if("object"!=JR(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=JR(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==JR(t)?t:t+""}function ZR(e,t,r){return t=eL(t),function(e,t){if(t&&("object"==JR(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],eL(e).constructor):t.apply(e,r))}function $R(){return($R="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=eL(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function eL(e){return(eL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tL(e,t){return(tL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var rL=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=ZR(this,t,["LABEL",e])).alongLine=new HR,r.background=new YR,r.items=null,r.uniqueItems=null,r.labelExpression=null,r.labelOverLengthMode=En.NONE,r.matrixCells=null,r.maxLabelLength=256,r.numericPrecision=0,r.offset=new jR,r.overlapAvoided=!0,r.rangeExpression=null,r.uniqueExpression=null,r.smallGeometryLabeled=!1,r.text=new QR,r.textSpace=0,e&&M.extend(r,e),r.CLASS_NAME="SuperMap.ThemeLabel",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tL(e,t)}(t,mR),r=t,n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=$R(eL(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([]);var a=this;if(a.alongLine=null,a.background&&(a.background.destroy(),a.background=null),a.items){for(var s=0,u=a.items,l=u.length;s<l;s++)u[s].destroy();a.items=null}if(a.uniqueItems){for(var c=0,f=a.uniqueItems,p=f.length;c<p;c++)f[c].destory();a.uniqueItems=null}a.labelExpression=null,a.labelOverLengthMode=null,a.matrixCells=null,a.maxLabelLength=null,a.numericPrecision=null,a.overlapAvoided=null,a.rangeExpression=null,a.uniqueExpression=null,a.offset&&(a.offset.destroy(),a.offset=null),a.overlapAvoided=null,a.smallGeometryLabeled=null,a.text&&(a.text.destroy(),a.text=null),a.textSpace=null}},{key:"toJSON",value:function(){return M.toJSON(this.toServerJSONObject())}},{key:"toServerJSONObject",value:function(){var e={};return e.type=this.type,e.memoryData=this.memoryData,this.alongLine&&(e.alongLine=this.alongLine.isAlongLine,e.alongLineDirection=this.alongLine.alongLineDirection,e.angleFixed=this.alongLine.angleFixed,e.isLabelRepeated=this.alongLine.isLabelRepeated,e.labelRepeatInterval=this.alongLine.labelRepeatInterval,e.repeatedLabelAvoided=this.alongLine.repeatedLabelAvoided,e.repeatIntervalFixed=this.alongLine.repeatIntervalFixed),this.offset&&(e.offsetFixed=this.offset.offsetFixed,e.offsetX=this.offset.offsetX,e.offsetY=this.offset.offsetY),this.text&&(e.maxTextHeight=this.text.maxTextHeight,e.maxTextWidth=this.text.maxTextWidth,e.minTextHeight=this.text.minTextHeight,e.minTextWidth=this.text.minTextWidth,e.uniformStyle=this.text.uniformStyle,e.uniformMixedStyle=this.text.uniformMixedStyle),this.background&&(e.labelBackShape=this.background.labelBackShape,e.backStyle=this.background.backStyle),e.labelOverLengthMode=this.labelOverLengthMode,e.maxLabelLength=this.maxLabelLength,e.smallGeometryLabeled=this.smallGeometryLabeled,e.rangeExpression=this.rangeExpression,e.uniqueExpression=this.uniqueExpression,e.numericPrecision=this.numericPrecision,e.items=this.items,e.uniqueItems=this.uniqueItems,e.labelExpression=this.labelExpression,e.overlapAvoided=this.overlapAvoided,e.matrixCells=this.matrixCells,e.textSpace=this.textSpace,e}}],o=[{key:"fromObj",value:function(e){if(e){var r=new t,n=e.items,o=e.uniqueItems,i=e.matrixCells;if(e.matrixCells=null,M.copy(r,e),r.alongLine=HR.fromObj(e),r.background=YR.fromObj(e),n){r.items=[];for(var a=0,s=n.length;a<s;a++)r.items.push(ER.fromObj(n[a]))}if(o){r.uniqueItems=[];for(var u=0,l=o.length;u<l;u++)r.uniqueItems.push(xR.fromObj(o[u]))}if(i){r.matrixCells=[];for(var c=0,f=i.length;c<f;c++);}return r.offset=jR.fromObj(e),r.text=QR.fromObj(e),r}}}],n&&WR(r.prototype,n),o&&WR(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function nL(e){"@babel/helpers - typeof";return(nL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oL(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,iL(n.key),n)}}function iL(e){var t=function(e,t){if("object"!=nL(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=nL(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==nL(t)?t:t+""}function aL(e,t,r){return t=uL(t),function(e,t){if(t&&("object"==nL(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],uL(e).constructor):t.apply(e,r))}function sL(){return(sL="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=uL(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function uL(e){return(uL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lL(e,t){return(lL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var cL=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=aL(this,t,["UNIQUE",e])).defaultStyle=new qr,r.items=null,r.uniqueExpression=null,r.colorGradientType=An.YELLOW_RED,e&&M.extend(r,e),r.CLASS_NAME="SuperMap.ThemeUnique",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lL(e,t)}(t,mR),r=t,n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=sL(uL(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([]);var a=this;if(a.uniqueExpression=null,a.colorGradientType=null,a.items){if(a.items.length>0)for(var s in a.items)a.items[s].destroy(),a.items[s]=null;a.items=null}a.defaultStyle&&(a.defaultStyle.destroy(),a.defaultStyle=null)}},{key:"toServerJSONObject",value:function(){var e={};if((e=M.copyAttributes(e,this)).defaultStyle&&e.defaultStyle.toServerJSONObject&&(e.defaultStyle=e.defaultStyle.toServerJSONObject()),e.items){for(var t=[],r=e.items.length,n=0;n<r;n++)t.push(e.items[n].toServerJSONObject());e.items=t}return e}}],o=[{key:"fromObj",value:function(e){var r=new t,n=e.items,o=n?n.length:0;M.extend(r,e),r.items=[],r.defaultStyle=qr.fromJson(e.defaultStyle);for(var i=0;i<o;i++)r.items.push(xR.fromObj(n[i]));return r}}],n&&oL(r.prototype,n),o&&oL(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function fL(e){"@babel/helpers - typeof";return(fL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pL(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,hL(n.key),n)}}function hL(e){var t=function(e,t){if("object"!=fL(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=fL(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==fL(t)?t:t+""}var yL=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.axesColor=new Gr(0,0,0),this.axesDisplayed=!1,this.axesGridDisplayed=!1,this.axesTextDisplayed=!1,this.axesTextStyle=new AR,t&&M.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGraphAxes"}return t=e,n=[{key:"fromObj",value:function(t){if(t){var r=new e;return M.copy(r,t),r.axesColor=Gr.fromJson(t.axesColor),r.axesTextStyle=AR.fromObj(t.axesTextStyle),r}}}],(r=[{key:"destroy",value:function(){var e=this;e.axesColor&&(e.axesColor.destroy(),e.axesColor=null),e.axesDisplayed=null,e.axesGridDisplayed=null,e.axesTextDisplayed=null,e.axesTextStyle&&(e.axesTextStyle.destroy(),e.axesTextStyle=null)}}])&&pL(t.prototype,r),n&&pL(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function dL(e){"@babel/helpers - typeof";return(dL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mL(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,gL(n.key),n)}}function gL(e){var t=function(e,t){if("object"!=dL(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=dL(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==dL(t)?t:t+""}var vL=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.maxGraphSize=0,this.minGraphSize=0,t&&M.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGraphSize"}return t=e,n=[{key:"fromObj",value:function(t){var r=new e;return M.copy(r,t),r}}],(r=[{key:"destroy",value:function(){this.maxGraphSize=null,this.minGraphSize=null}}])&&mL(t.prototype,r),n&&mL(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function bL(e){"@babel/helpers - typeof";return(bL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function AL(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,wL(n.key),n)}}function wL(e){var t=function(e,t){if("object"!=bL(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=bL(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==bL(t)?t:t+""}var SL=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.graphTextDisplayed=!1,this.graphTextFormat=dn.CAPTION,this.graphTextStyle=new AR,t&&M.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGraphText"}return t=e,n=[{key:"fromObj",value:function(t){var r=new e;return M.copy(r,t),r.graphTextStyle=AR.fromObj(t.graphTextStyle),r}}],(r=[{key:"destroy",value:function(){var e=this;e.graphTextDisplayed=null,e.graphTextFormat=null,e.graphTextStyle&&(e.graphTextStyle.destroy(),e.graphTextStyle=null)}}])&&AL(t.prototype,r),n&&AL(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function CL(e){"@babel/helpers - typeof";return(CL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function EL(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_L(n.key),n)}}function _L(e){var t=function(e,t){if("object"!=CL(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=CL(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==CL(t)?t:t+""}var IL=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.caption=null,this.graphExpression=null,this.memoryDoubleValues=null,this.uniformStyle=new qr,t&&M.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGraphItem"}return t=e,n=[{key:"fromObj",value:function(t){if(t){var r=new e;return M.copy(r,t),r.uniformStyle=qr.fromJson(t.uniformStyle),r}}}],(r=[{key:"destroy",value:function(){this.caption=null,this.graphExpression=null,this.memoryDoubleValues=null,this.uniformStyle=null}}])&&EL(t.prototype,r),n&&EL(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function OL(e){"@babel/helpers - typeof";return(OL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xL(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,PL(n.key),n)}}function PL(e){var t=function(e,t){if("object"!=OL(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=OL(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==OL(t)?t:t+""}function kL(e,t,r){return t=jL(t),function(e,t){if(t&&("object"==OL(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],jL(e).constructor):t.apply(e,r))}function TL(){return(TL="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=jL(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function jL(e){return(jL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ML(e,t){return(ML=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var BL=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=kL(this,t,["GRAPH",e])).barWidth=0,r.graduatedMode=vn.CONSTANT,r.graphAxes=new yL,r.graphSize=new vL,r.graphSizeFixed=!1,r.graphText=new SL,r.graphType=mn.AREA,r.graphAxesTextDisplayMode=gn.NONE,r.items=null,r.memoryKeys=null,r.negativeDisplayed=!1,r.offset=new jR,r.overlapAvoided=!0,r.roseAngle=0,r.startAngle=0,e&&M.extend(r,e),r.CLASS_NAME="SuperMap.ThemeGraph",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ML(e,t)}(t,mR),r=t,n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=TL(jL(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([]);var a=this;if(a.barWidth=null,a.graduatedMode=null,a.graphAxes&&(a.graphAxes.destroy(),a.graphAxes=null),a.graphSize&&(a.graphSize.destroy(),a.graphSize=null),a.graphSizeFixed=null,a.graphText&&(a.graphText.destroy(),a.graphText=null),a.graphType=null,a.items){for(var s=0,u=a.items,l=u.length;s<l;s++)u[s].destroy();a.items=null}a.memoryKeys=null,a.negativeDisplayed=null,a.offset&&(a.offset.destroy(),a.offset=null),a.overlapAvoided=null,a.roseAngle=null,a.startAngle=null,a.graphAxesTextDisplayMode=null}},{key:"toJSON",value:function(){return M.toJSON(this.toServerJSONObject())}},{key:"toServerJSONObject",value:function(){var e={};return e.type=this.type,this.graphText&&(e.graphTextDisplayed=this.graphText.graphTextDisplayed,e.graphTextFormat=this.graphText.graphTextFormat,e.graphTextStyle=this.graphText.graphTextStyle),this.graphAxes&&(e.axesColor=this.graphAxes.axesColor,e.axesDisplayed=this.graphAxes.axesDisplayed,e.axesGridDisplayed=this.graphAxes.axesGridDisplayed,e.axesTextDisplayed=this.graphAxes.axesTextDisplayed,e.axesTextStyle=this.graphAxes.axesTextStyle),this.graphSize&&(e.maxGraphSize=this.graphSize.maxGraphSize,e.minGraphSize=this.graphSize.minGraphSize),this.offset&&(e.offsetFixed=this.offset.offsetFixed,e.offsetX=this.offset.offsetX,e.offsetY=this.offset.offsetY),e.barWidth=this.barWidth,e.graduatedMode=this.graduatedMode,e.graphSizeFixed=this.graphSizeFixed,e.graphType=this.graphType,e.graphAxesTextDisplayMode=this.graphAxesTextDisplayMode,e.items=this.items,e.memoryKeys=this.memoryKeys,e.negativeDisplayed=this.negativeDisplayed,e.overlapAvoided=this.overlapAvoided,e.roseAngle=this.roseAngle,e.startAngle=this.startAngle,e}}],o=[{key:"fromObj",value:function(e){var r=new t,n=e.items,o=n?n.length:0;M.copy(r,e),r.items=[],r.graphAxes=yL.fromObj(e),r.graphSize=vL.fromObj(e),r.graphText=SL.fromObj(e),r.offset=jR.fromObj(e);for(var i=0;i<o;i++)r.items.push(IL.fromObj(n[i]));return r}}],n&&xL(r.prototype,n),o&&xL(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function NL(e){"@babel/helpers - typeof";return(NL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function RL(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,LL(n.key),n)}}function LL(e){var t=function(e,t){if("object"!=NL(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=NL(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==NL(t)?t:t+""}function DL(e,t,r){return t=FL(t),function(e,t){if(t&&("object"==NL(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],FL(e).constructor):t.apply(e,r))}function FL(e){return(FL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function QL(e,t){return(QL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var GL=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=DL(this,t,["DOTDENSITY",e])).dotExpression=null,r.style=new qr,r.value=null,e&&M.extend(r,e),r.CLASS_NAME="SuperMap.ThemeDotDensity",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&QL(e,t)}(t,mR),r=t,o=[{key:"fromObj",value:function(e){if(e){var r=new t;return M.copy(r,e),r.style=qr.fromJson(e.style),r}}}],(n=[{key:"destroy",value:function(){var e=this;e.dotExpression=null,e.value=null,e.style&&(e.style.destroy(),e.style=null)}},{key:"toServerJSONObject",value:function(){var e={};return(e=M.copyAttributes(e,this)).style&&e.style.toServerJSONObject&&(e.style=e.style.toServerJSONObject()),e}}])&&RL(r.prototype,n),o&&RL(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function UL(e){"@babel/helpers - typeof";return(UL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zL(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,HL(n.key),n)}}function HL(e){var t=function(e,t){if("object"!=UL(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=UL(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==UL(t)?t:t+""}var qL=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.negativeDisplayed=!1,this.negativeStyle=new qr,this.positiveStyle=new qr,this.zeroDisplayed=!1,this.zeroStyle=new qr,t&&M.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGraduatedSymbolStyle"}return t=e,n=[{key:"fromObj",value:function(t){if(t){var r=new e;return M.copy(r,t),r.negativeStyle=qr.fromJson(t.negativeStyle),r.positiveStyle=qr.fromJson(t.positiveStyle),r.zeroStyle=qr.fromJson(t.zeroStyle),r}}}],(r=[{key:"destroy",value:function(){var e=this;e.negativeDisplayed=null,e.negativeStyle=null,e.positiveStyle=null,e.zeroDisplayed=null,e.zeroStyle=null}}])&&zL(t.prototype,r),n&&zL(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function VL(e){"@babel/helpers - typeof";return(VL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function KL(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,YL(n.key),n)}}function YL(e){var t=function(e,t){if("object"!=VL(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=VL(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==VL(t)?t:t+""}function JL(e,t,r){return t=XL(t),function(e,t){if(t&&("object"==VL(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],XL(e).constructor):t.apply(e,r))}function WL(){return(WL="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=XL(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function XL(e){return(XL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ZL(e,t){return(ZL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var $L=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=JL(this,t,["GRADUATEDSYMBOL",e])).baseValue=0,r.expression=null,r.graduatedMode=vn.CONSTAN,r.offset=new jR,r.style=new qL,e&&M.extend(r,e),r.CLASS_NAME="SuperMap.ThemeGraduatedSymbol",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ZL(e,t)}(t,mR),r=t,n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=WL(XL(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([]);var a=this;a.expression=null,a.graduatedMode=vn.CONSTANT,a.offset&&(a.offset.destroy(),a.offset=null),a.style&&(a.style.destroy(),a.style=null)}},{key:"toJSON",value:function(){return M.toJSON(this.toServerJSONObject())}},{key:"toServerJSONObject",value:function(){var e={};return e.type=this.type,e.memoryData=this.memoryData,e.baseValue=this.baseValue,e.expression=this.expression,e.graduatedMode=this.graduatedMode,this.offset&&(e.offsetFixed=this.offset.offsetFixed,e.offsetX=this.offset.offsetX,e.offsetY=this.offset.offsetY),this.style&&(e.negativeStyle=this.style.negativeStyle,e.negativeDisplayed=this.style.negativeDisplayed,e.positiveStyle=this.style.positiveStyle,e.zeroDisplayed=this.style.zeroDisplayed,e.zeroStyle=this.style.zeroStyle),e}}],o=[{key:"fromObj",value:function(e){if(e){var r=new t;return M.copy(r,e),r.offset=jR.fromObj(e),r.style=qL.fromObj(e),r}}}],n&&KL(r.prototype,n),o&&KL(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function eD(e){"@babel/helpers - typeof";return(eD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tD(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,rD(n.key),n)}}function rD(e){var t=function(e,t){if("object"!=eD(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=eD(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==eD(t)?t:t+""}var nD=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.caption=null,this.end=0,this.start=0,this.style=new qr,this.visible=!0,t&&M.extend(this,t),this.CLASS_NAME="SuperMap.ThemeRangeItem"}return t=e,n=[{key:"fromObj",value:function(t){if(t){var r=new e;return M.copy(r,t),r.style=qr.fromJson(t.style),r}}}],(r=[{key:"destroy",value:function(){var e=this;e.caption=null,e.end=null,e.start=null,e.style&&(e.style.destroy(),e.style=null),e.visible=null}},{key:"toServerJSONObject",value:function(){var e={};return(e=M.copyAttributes(e,this)).style&&e.style.toServerJSONObject&&(e.style=e.style.toServerJSONObject()),e}}])&&tD(t.prototype,r),n&&tD(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function oD(e){"@babel/helpers - typeof";return(oD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function iD(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,aD(n.key),n)}}function aD(e){var t=function(e,t){if("object"!=oD(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=oD(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==oD(t)?t:t+""}function sD(e,t,r){return t=lD(t),function(e,t){if(t&&("object"==oD(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],lD(e).constructor):t.apply(e,r))}function uD(){return(uD="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=lD(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function lD(e){return(lD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function cD(e,t){return(cD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var fD=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=sD(this,t,["RANGE",e])).precision="1.0E-12",r.items=null,r.rangeExpression=null,r.rangeMode=bn.EQUALINTERVAL,r.rangeParameter=0,r.colorGradientType=An.YELLOW_RED,e&&M.extend(r,e),r.CLASS_NAME="SuperMap.ThemeRange",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cD(e,t)}(t,mR),r=t,n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=uD(lD(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([]);var a=this;if(a.items){if(a.items.length>0)for(var s in a.items)a.items[s].destroy(),a.items[s]=null;a.items=null}a.rangeExpression=null,a.rangeMode=null,a.rangeParameter=null,a.colorGradientType=null}}],o=[{key:"fromObj",value:function(e){if(e){var r=new t;M.copy(r,e);var n=e.items,o=n?n.length:0;r.items=[];for(var i=0;i<o;i++)r.items.push(nD.fromObj(n[i]));return r}}}],n&&iD(r.prototype,n),o&&iD(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function pD(e){"@babel/helpers - typeof";return(pD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hD(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,yD(n.key),n)}}function yD(e){var t=function(e,t){if("object"!=pD(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=pD(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==pD(t)?t:t+""}var dD=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.bounds=null,this.caption=null,this.description=null,this.name=null,this.queryable=null,this.subLayers=null,this.type=null,this.visible=null,M.extend(this,t),this.CLASS_NAME="SuperMap.UGCLayer"},(t=[{key:"destroy",value:function(){M.reset(this)}},{key:"fromJson",value:function(e){e=e||{},M.extend(this,e);var t=this.bounds;t&&(this.bounds=new We(t.leftBottom.x,t.leftBottom.y,t.rightTop.x,t.rightTop.y))}},{key:"toServerJSONObject",value:function(){var e={};return(e=M.copyAttributes(e,this)).bounds&&e.bounds.toServerJSONObject&&(e.bounds=e.bounds.toServerJSONObject()),e}}])&&hD(e.prototype,t),r&&hD(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function mD(e){"@babel/helpers - typeof";return(mD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gD(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,vD(n.key),n)}}function vD(e){var t=function(e,t){if("object"!=mD(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=mD(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==mD(t)?t:t+""}function bD(e,t,r){return t=SD(t),function(e,t){if(t&&("object"==mD(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],SD(e).constructor):t.apply(e,r))}function AD(e,t,r,n){var o=wD(SD(1&n?e.prototype:e),t,r);return 2&n&&"function"==typeof o?function(e){return o.apply(r,e)}:o}function wD(){return(wD="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=SD(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function SD(e){return(SD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function CD(e,t){return(CD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var ED=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=bD(this,t,[e=e||{}])).completeLineSymbolDisplayed=null,r.maxScale=null,r.minScale=null,r.minVisibleGeometrySize=null,r.opaqueRate=null,r.symbolScalable=null,r.symbolScale=null,r.overlapDisplayed=null,r.overlapDisplayedOptions=null,r.CLASS_NAME="SuperMap.UGCMapLayer",M.extend(r,e),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&CD(e,t)}(t,dD),r=t,(n=[{key:"destroy",value:function(){AD(t,"destroy",this,3)([]),M.reset(this)}},{key:"fromJson",value:function(e){AD(t,"fromJson",this,3)([e])}},{key:"toServerJSONObject",value:function(){return AD(t,"toServerJSONObject",this,3)([])}}])&&gD(r.prototype,n),o&&gD(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function _D(e){"@babel/helpers - typeof";return(_D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ID(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,OD(n.key),n)}}function OD(e){var t=function(e,t){if("object"!=_D(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=_D(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==_D(t)?t:t+""}var xD=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.foreignTableName=null,this.joinFilter=null,this.joinType=null,t&&M.extend(this,t),this.CLASS_NAME="SuperMap.JoinItem"},(t=[{key:"destroy",value:function(){this.foreignTableName=null,this.joinFilter=null,this.joinType=null}},{key:"toServerJSONObject",value:function(){var e={};return e=M.copyAttributes(e,this)}}])&&ID(e.prototype,t),r&&ID(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function PD(e){"@babel/helpers - typeof";return(PD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kD(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,TD(n.key),n)}}function TD(e){var t=function(e,t){if("object"!=PD(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=PD(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==PD(t)?t:t+""}var jD=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.bounds=null,this.dataSourceName=null,this.description=null,this.encodeType=null,this.isReadOnly=null,this.name=null,this.prjCoordSys=null,this.tableName=null,this.type=null,M.extend(this,t);var r=this.bounds;r&&(this.bounds=new We(r.leftBottom.x,r.leftBottom.y,r.rightTop.x,r.rightTop.y)),this.CLASS_NAME="SuperMap.DatasetInfo"},(t=[{key:"destroy",value:function(){M.reset(this)}},{key:"toServerJSONObject",value:function(){var e={};return(e=M.copyAttributes(e,this)).bounds&&e.bounds.toServerJSONObject&&(e.bounds=e.bounds.toServerJSONObject()),e}}])&&kD(e.prototype,t),r&&kD(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function MD(e){"@babel/helpers - typeof";return(MD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function BD(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ND(n.key),n)}}function ND(e){var t=function(e,t){if("object"!=MD(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=MD(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==MD(t)?t:t+""}function RD(e,t,r){return t=FD(t),function(e,t){if(t&&("object"==MD(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],FD(e).constructor):t.apply(e,r))}function LD(e,t,r,n){var o=DD(FD(1&n?e.prototype:e),t,r);return 2&n&&"function"==typeof o?function(e){return o.apply(r,e)}:o}function DD(){return(DD="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=FD(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function FD(e){return(FD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function QD(e,t){return(QD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var GD=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=RD(this,t,[e=e||{}])).datasetInfo=null,r.displayFilter=null,r.joinItems=null,r.representationField=null,r.ugcLayerType=null,r.CLASS_NAME="SuperMap.UGCSubLayer",M.extend(r,e),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&QD(e,t)}(t,ED),r=t,(n=[{key:"fromJson",value:function(e){if(LD(t,"fromJson",this,3)([e]),this.datasetInfo&&(this.datasetInfo=new jD(this.datasetInfo)),this.joinItems&&this.joinItems.length){for(var r=[],n=0;n<this.joinItems.length;n++)r[n]=new xD(this.joinItems[n]);this.joinItems=r}}},{key:"destroy",value:function(){LD(t,"destroy",this,3)([]),M.reset(this)}},{key:"toServerJSONObject",value:function(){var e=LD(t,"toServerJSONObject",this,3)([]);if(e.joinItems){for(var r=[],n=0;n<e.joinItems.length;n++)e.joinItems[n].toServerJSONObject&&(r[n]=e.joinItems[n].toServerJSONObject());e.joinItems=r}return e.datasetInfo&&e.datasetInfo.toServerJSONObject&&(e.datasetInfo=e.datasetInfo.toServerJSONObject()),e}}])&&BD(r.prototype,n),o&&BD(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function UD(e){"@babel/helpers - typeof";return(UD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zD(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,HD(n.key),n)}}function HD(e){var t=function(e,t){if("object"!=UD(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=UD(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==UD(t)?t:t+""}function qD(e,t,r){return t=YD(t),function(e,t){if(t&&("object"==UD(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],YD(e).constructor):t.apply(e,r))}function VD(e,t,r,n){var o=KD(YD(1&n?e.prototype:e),t,r);return 2&n&&"function"==typeof o?function(e){return o.apply(r,e)}:o}function KD(){return(KD="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=YD(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function YD(e){return(YD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function JD(e,t){return(JD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var WD=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=qD(this,t,[e=e||{}])).theme=null,r.themeElementPosition=null,r.CLASS_NAME="SuperMap.ServerTheme",M.extend(r,e),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&JD(e,t)}(t,GD),r=t,(n=[{key:"destroy",value:function(){VD(t,"destroy",this,3)([]),M.reset(this)}},{key:"fromJson",value:function(e){VD(t,"fromJson",this,3)([e]);var r=this.theme;switch(r&&r.type){case"LABEL":this.theme=rL.fromObj(r);break;case"UNIQUE":this.theme=cL.fromObj(r);break;case"GRAPH":this.theme=BL.fromObj(r);break;case"DOTDENSITY":this.theme=GL.fromObj(r);break;case"GRADUATEDSYMBOL":this.theme=$L.fromObj(r);break;case"RANGE":this.theme=fD.fromObj(r)}this.themeElementPosition&&(this.themeElementPosition=new Ve(this.themeElementPosition.x,this.themeElementPosition.y))}},{key:"toServerJSONObject",value:function(){var e=VD(t,"toServerJSONObject",this,3)([]);return e.themeElementPosition&&e.themeElementPosition.toServerJSONObject&&(e.themeElementPosition=e.themeElementPosition.toServerJSONObject()),e.theme&&e.theme.toServerJSONObject&&(e.theme=e.theme.toServerJSONObject()),e}}])&&zD(r.prototype,n),o&&zD(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function XD(e){"@babel/helpers - typeof";return(XD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ZD(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,$D(n.key),n)}}function $D(e){var t=function(e,t){if("object"!=XD(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=XD(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==XD(t)?t:t+""}var eF=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.elevation=null,this.color=null,M.extend(this,t);var r=this.color;r&&(this.color=new Gr(r.red,r.green,r.blue)),this.CLASS_NAME="SuperMap.ColorDictionary"},(t=[{key:"destroy",value:function(){M.reset(this)}},{key:"toServerJSONObject",value:function(){var e={};return e=M.copyAttributes(e,this)}}])&&ZD(e.prototype,t),r&&ZD(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function tF(e){"@babel/helpers - typeof";return(tF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rF(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,nF(n.key),n)}}function nF(e){var t=function(e,t){if("object"!=tF(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=tF(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==tF(t)?t:t+""}function oF(e,t,r){return t=sF(t),function(e,t){if(t&&("object"==tF(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],sF(e).constructor):t.apply(e,r))}function iF(e,t,r,n){var o=aF(sF(1&n?e.prototype:e),t,r);return 2&n&&"function"==typeof o?function(e){return o.apply(r,e)}:o}function aF(){return(aF="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=sF(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function sF(e){return(sF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function uF(e,t){return(uF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var lF=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=oF(this,t,[e=e||{}])).colorDictionarys=null,r.brightness=null,r.colorGradientType=null,r.colors=null,r.contrast=null,r.dashStyle=null,r.gridType=null,r.horizontalSpacing=null,r.sizeFixed=null,r.solidStyle=null,r.specialColor=null,r.specialValue=null,r.specialValueTransparent=null,r.verticalSpacing=null,r.gamma=null,r.CLASS_NAME="SuperMap.Grid",M.extend(r,e),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&uF(e,t)}(t,GD),r=t,(n=[{key:"destroy",value:function(){iF(t,"destroy",this,3)([]),M.reset(this)}},{key:"fromJson",value:function(e){if(iF(t,"fromJson",this,3)([e]),this.specialColor&&(this.specialColor=new Gr(this.specialColor.red,this.specialColor.green,this.specialColor.blue)),this.colors){var r,n=[];for(var o in this.colors)r=this.colors[o],n.push(new Gr(r.red,r.green,r.blue));this.colors=n}if(this.dashStyle&&(this.dashStyle=new qr(this.dashStyle)),this.solidStyle&&(this.solidStyle=new qr(this.solidStyle)),this.colorDictionary){var i,a=[];for(var s in this.colorDictionary)i=this.colorDictionary[s],a.push(new eF({elevation:s,color:i}));this.colorDictionarys=a}delete this.colorDictionary}},{key:"toServerJSONObject",value:function(){var e=iF(t,"toServerJSONObject",this,3)([]);return e.dashStyle&&e.dashStyle.toServerJSONObject&&(e.dashStyle=e.dashStyle.toServerJSONObject()),e.solidStyle&&e.solidStyle.toServerJSONObject&&(e.solidStyle=e.solidStyle.toServerJSONObject()),e}}])&&rF(r.prototype,n),o&&rF(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function cF(e){"@babel/helpers - typeof";return(cF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fF(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,pF(n.key),n)}}function pF(e){var t=function(e,t){if("object"!=cF(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=cF(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==cF(t)?t:t+""}function hF(e,t,r){return t=mF(t),function(e,t){if(t&&("object"==cF(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],mF(e).constructor):t.apply(e,r))}function yF(e,t,r,n){var o=dF(mF(1&n?e.prototype:e),t,r);return 2&n&&"function"==typeof o?function(e){return o.apply(r,e)}:o}function dF(){return(dF="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=mF(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function mF(e){return(mF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gF(e,t){return(gF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var vF=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=hF(this,t,[e=e||{}])).brightness=null,r.colorSpaceType=null,r.contrast=null,r.displayBandIndexes=null,r.transparent=null,r.transparentColor=null,r.transparentColorTolerance=null,r.gamma=null,r.CLASS_NAME="SuperMap.Image",M.extend(r,e),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gF(e,t)}(t,GD),r=t,(n=[{key:"destroy",value:function(){yF(t,"destroy",this,3)([]),M.reset(this)}},{key:"fromJson",value:function(e){yF(t,"fromJson",this,3)([e]),this.transparentColor&&(this.transparentColor=new Gr(this.transparentColor.red,this.transparentColor.green,this.transparentColor.blue))}},{key:"toServerJSONObject",value:function(){return yF(t,"toServerJSONObject",this,3)([])}}])&&fF(r.prototype,n),o&&fF(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function bF(e){"@babel/helpers - typeof";return(bF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function AF(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,wF(n.key),n)}}function wF(e){var t=function(e,t){if("object"!=bF(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=bF(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==bF(t)?t:t+""}function SF(e,t,r){return t=_F(t),function(e,t){if(t&&("object"==bF(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],_F(e).constructor):t.apply(e,r))}function CF(e,t,r,n){var o=EF(_F(1&n?e.prototype:e),t,r);return 2&n&&"function"==typeof o?function(e){return o.apply(r,e)}:o}function EF(){return(EF="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=_F(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function _F(e){return(_F=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function IF(e,t){return(IF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var OF=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=SF(this,t,[e=e||{}])).style=null,r.CLASS_NAME="SuperMap.Vector",M.extend(r,e),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&IF(e,t)}(t,GD),r=t,(n=[{key:"destroy",value:function(){CF(t,"destroy",this,3)([]),M.reset(this)}},{key:"fromJson",value:function(e){CF(t,"fromJson",this,3)([e]);var r=this.style;r&&(this.style=new qr(r))}},{key:"toServerJSONObject",value:function(){var e=CF(t,"toServerJSONObject",this,3)([]);return e.style&&e.style.toServerJSONObject&&(e.style=e.style.toServerJSONObject()),e}}])&&AF(r.prototype,n),o&&AF(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function xF(e){"@babel/helpers - typeof";return(xF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function PF(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,kF(n.key),n)}}function kF(e){var t=function(e,t){if("object"!=xF(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=xF(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==xF(t)?t:t+""}function TF(e,t,r){return t=MF(t),function(e,t){if(t&&("object"==xF(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],MF(e).constructor):t.apply(e,r))}function jF(){return(jF="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=MF(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function MF(e){return(MF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function BF(e,t){return(BF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var NF=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=TF(this,t,[e,r])).isTempLayers=!1,r&&M.extend(n,r),n.CLASS_NAME="SuperMap.GetLayersInfoService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&BF(e,t)}(t,Vw),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=jF(MF(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([]),M.reset(this)}},{key:"processAsync",value:function(e){var t=this;return t.isTempLayers||(t.url=M.urlPathAppend(t.url,"layers")),t.request({method:"GET",params:null,scope:t,success:e,failure:e})}},{key:"transformResult",value:function(e,t){var r,n;return n=(r=!!(e=M.transformResult(e))&&e.length>0?e[0].subLayers.layers:null)?r.length:0,this.handleLayers(n,r),{result:e[0],options:t}}},{key:"handleLayers",value:function(e,t){var r;if(e)for(var n=0;n<e;n++){if(t[n].subLayers&&t[n].subLayers.layers&&t[n].subLayers.layers.length>0)this.handleLayers(t[n].subLayers.layers.length,t[n].subLayers.layers);else switch(t[n].ugcLayerType){case"THEME":(r=new WD).fromJson(t[n]),t[n]=r;break;case"GRID":(r=new lF).fromJson(t[n]),t[n]=r;break;case"IMAGE":(r=new vF).fromJson(t[n]),t[n]=r;break;case"VECTOR":(r=new OF).fromJson(t[n]),t[n]=r}}}}])&&PF(r.prototype,n),o&&PF(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function RF(e){"@babel/helpers - typeof";return(RF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function LF(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,DF(n.key),n)}}function DF(e){var t=function(e,t){if("object"!=RF(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=RF(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==RF(t)?t:t+""}function FF(e,t,r){return t=GF(t),function(e,t){if(t&&("object"==RF(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],GF(e).constructor):t.apply(e,r))}function QF(){return(QF="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=GF(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function GF(e){return(GF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function UF(e,t){return(UF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var zF=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=FF(this,t,[e,r]),r&&M.extend(n,r),n.CLASS_NAME="SuperMap.GetLayersLegendInfoService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&UF(e,t)}(t,Vw),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=QF(GF(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([]),M.reset(this)}},{key:"processAsync",value:function(e,t){return this.url=M.urlPathAppend(this.url,"/legend"),this.request({method:"GET",params:e,scope:this,success:t,failure:t})}}])&&LF(r.prototype,n),o&&LF(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function HF(e){"@babel/helpers - typeof";return(HF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qF(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,VF(n.key),n)}}function VF(e){var t=function(e,t){if("object"!=HF(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=HF(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==HF(t)?t:t+""}function KF(e,t,r){return t=JF(t),function(e,t){if(t&&("object"==HF(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],JF(e).constructor):t.apply(e,r))}function YF(){return(YF="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=JF(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function JF(e){return(JF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function WF(e,t){return(WF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var XF=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=KF(this,t,[e,r]),r&&M.extend(n,r),n.CLASS_NAME="SuperMap.SetLayerInfoService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&WF(e,t)}(t,Vw),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=YF(JF(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([]),M.reset(this)}},{key:"processAsync",value:function(e,t){if(e){var r=M.toJSON(e);return this.request({method:"PUT",data:r,scope:this,success:t,failure:t})}}}])&&qF(r.prototype,n),o&&qF(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function ZF(e){"@babel/helpers - typeof";return(ZF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $F(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,eQ(n.key),n)}}function eQ(e){var t=function(e,t){if("object"!=ZF(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ZF(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ZF(t)?t:t+""}function tQ(e,t,r){return t=nQ(t),function(e,t){if(t&&("object"==ZF(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],nQ(e).constructor):t.apply(e,r))}function rQ(){return(rQ="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=nQ(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function nQ(e){return(nQ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oQ(e,t){return(oQ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var iQ=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=tQ(this,t,[e,r])).resourceID=null,n.isTempLayers=!1,r&&M.extend(n,r),n.CLASS_NAME="SuperMap.SetLayersInfoService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oQ(e,t)}(t,Vw),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=rQ(nQ(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([]),M.reset(this)}},{key:"processAsync",value:function(e,t){if(e){var r,n=[],o=this,i="";o.isTempLayers?(o.url=M.urlPathAppend(o.url,"tempLayersSet/"+o.resourceID),i="PUT"):(o.url=M.urlPathAppend(o.url,"tempLayersSet"),i="POST"),e.subLayers||(e.subLayers={layers:[]}),e.subLayers.layers||(e.subLayers.layers=[]);var a=e.subLayers.layers,s=a.length;for(var u in a){if("GRID"===a[u].ugcLayerType){var l={},c=a[u].colorDictionarys;for(var f in c){l[c[f].elevation]=c[f].color}}a[u].colorDictionary=l,delete a[u].colorDictionarys}for(var p=0;p<s;p++)a[p].toJsonObject?n.push(a[p].toJsonObject()):n.push(a[p]);(r=M.extend(r,e)).subLayers={layers:n},r.object=null;var h=M.toJSON([r]);return o.request({method:i,data:h,scope:o,success:t,failure:t})}}}])&&$F(r.prototype,n),o&&$F(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function aQ(e){"@babel/helpers - typeof";return(aQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sQ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,uQ(n.key),n)}}function uQ(e){var t=function(e,t){if("object"!=aQ(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=aQ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==aQ(t)?t:t+""}var lQ=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.layerStatusList=[],this.holdTime=15,this.resourceID=null,t&&M.extend(this,t)},(t=[{key:"destroy",value:function(){this.layerStatusList=null,this.holdTime=null,this.resourceID=null}},{key:"toJSON",value:function(){var e="{";e+='"layers":[';for(var t=[],r=0,n=this.layerStatusList.length;r<n;r++)t.push(this.layerStatusList[r].toJSON());return e+=t,e+="]",e+="}"}}])&&sQ(e.prototype,t),r&&sQ(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function cQ(e){"@babel/helpers - typeof";return(cQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fQ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,pQ(n.key),n)}}function pQ(e){var t=function(e,t){if("object"!=cQ(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=cQ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==cQ(t)?t:t+""}function hQ(e,t,r){return t=dQ(t),function(e,t){if(t&&("object"==cQ(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],dQ(e).constructor):t.apply(e,r))}function yQ(){return(yQ="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=dQ(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function dQ(e){return(dQ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mQ(e,t){return(mQ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var gQ=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=hQ(this,t,[e,r])).lastparams=null,n.mapUrl=e,r&&M.extend(n,r),n.CLASS_NAME="SuperMap.SetLayerStatusService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mQ(e,t)}(t,Vw),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=yQ(dQ(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([]),M.reset(this)}},{key:"processAsync",value:function(e,t){if(e instanceof lQ){var r=this;if(r.url=r.mapUrl,null==e.resourceID)return r.url=M.urlPathAppend(r.url,"tempLayersSet"),r.lastparams=e,r.request({method:"POST",scope:r,success:r.createTempLayerComplete.bind(r,t),failure:t});r.url=M.urlPathAppend(r.url,"tempLayersSet/"+e.resourceID),r.url=M.urlAppend(r.url,"elementRemain=true&reference="+e.resourceID+"&holdTime="+e.holdTime.toString());var n="[{";return n+='"type":"UGC",',null!=e.layerStatusList&&e.layerStatusList.length>0&&(n+='"subLayers":'+e.toJSON()),n+=',"visible":true,',n+='"name":"'+this.getMapName(this.mapUrl)+'"',n+="}]",r.request({method:"PUT",data:n,scope:r,success:t,failure:t})}}},{key:"createTempLayerComplete",value:function(e,t){return t=t.result?t.result:t,(t=M.transformResult(t)).succeed&&(this.lastparams.resourceID=t.newResourceID),this.processAsync(this.lastparams,e)}},{key:"getMapName",value:function(e){var t=e;"/"===t.charAt(t.length-1)&&(t=t.substr(0,t.length-1));var r=t.lastIndexOf("/");return t.substring(r+1,t.length)}},{key:"transformResult",value:function(e,t){return null!=(e=M.transformResult(e))&&null!=this.lastparams&&null!=this.lastparams.resourceID&&(e.newResourceID=this.lastparams.resourceID),{result:e,options:t}}}])&&fQ(r.prototype,n),o&&fQ(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function vQ(e){"@babel/helpers - typeof";return(vQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bQ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,AQ(n.key),n)}}function AQ(e){var t=function(e,t){if("object"!=vQ(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=vQ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==vQ(t)?t:t+""}var wQ=function(){return e=function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=t,this.options=r||{}},(t=[{key:"getLayersInfo",value:function(e){var t=this;return new NF(t.url,{proxy:t.options.proxy,withCredentials:t.options.withCredentials,crossOrigin:t.options.crossOrigin,headers:t.options.headers}).processAsync(e)}},{key:"getLayersLegendInfo",value:function(e,t){var r=this;return new zF(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(e,t)}},{key:"setLayerInfo",value:function(e,t){if(e){var r=this,n=e.resourceID,o=e.tempLayerName,i=e.layerInfo;if(n&&o){var a=M.urlPathAppend(r.url,"tempLayersSet/"+n+"/"+o);return new XF(a,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(i,t)}}}},{key:"setLayersInfo",value:function(e,t){if(e){var r=this,n=e.resourceID,o=!!e.isTempLayers&&e.isTempLayers,i=e.layersInfo;if((!o||n)&&i)return new iQ(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,resourceID:n,isTempLayers:o}).processAsync(i,t)}}},{key:"setLayerStatus",value:function(e,t){if(e){var r=this;return new gQ(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(e,t)}}}])&&bQ(e.prototype,t),r&&bQ(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function SQ(e){"@babel/helpers - typeof";return(SQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function CQ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,EQ(n.key),n)}}function EQ(e){var t=function(e,t){if("object"!=SQ(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=SQ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==SQ(t)?t:t+""}function _Q(e,t,r){return t=IQ(t),function(e,t){if(t&&("object"==SQ(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],IQ(e).constructor):t.apply(e,r))}function IQ(e){return(IQ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function OQ(e,t){return(OQ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var xQ=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=_Q(this,t,[e,r]))._layerInfoService=new wQ(e,r),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&OQ(e,t)}(t,Nw),r=t,(n=[{key:"getLayersInfo",value:function(e){return this._layerInfoService.getLayersInfo(e)}},{key:"getLayersLegendInfo",value:function(e,t){return this._layerInfoService.getLayersLegendInfo(e,t)}},{key:"setLayerInfo",value:function(e,t){return this._layerInfoService.setLayerInfo(e,t)}},{key:"setLayersInfo",value:function(e,t){return this._layerInfoService.setLayersInfo(e,t)}},{key:"setLayerStatus",value:function(e,t){return this._layerInfoService.setLayerStatus(e,t)}}])&&CQ(r.prototype,n),o&&CQ(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function PQ(e){"@babel/helpers - typeof";return(PQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kQ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,TQ(n.key),n)}}function TQ(e){var t=function(e,t){if("object"!=PQ(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=PQ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==PQ(t)?t:t+""}function jQ(e,t,r){return t=BQ(t),function(e,t){if(t&&("object"==PQ(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],BQ(e).constructor):t.apply(e,r))}function MQ(){return(MQ="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=BQ(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function BQ(e){return(BQ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function NQ(e,t){return(NQ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var RQ=function(e){function t(e,r){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=jQ(this,t,[e,r])).projection=null,n.CLASS_NAME="SuperMap.MapService",r&&M.extend(n,r);var o=n;if(o.projection){var i=o.projection.split(":");i instanceof Array&&(2===i.length&&(o.url=M.urlAppend(o.url,"prjCoordSys=".concat(encodeURIComponent('{"epsgCode":"'.concat(i[1],'"}'))))),1===i.length&&(o.url=M.urlAppend(o.url,"prjCoordSys=".concat(encodeURIComponent('{"epsgCode":"'.concat(i[0],'"}'))))))}return n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&NQ(e,t)}(t,Vw),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=MQ(BQ(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"processAsync",value:function(e){return this.request({method:"GET",scope:this,success:e,failure:e})}},{key:"transformResult",value:function(e,t){var r=(e=M.transformResult(e)).code>=200&&e.code<300||0==e.code||304===e.code,n=e.code&&r;return!e.code||n?{result:e,options:t}:{error:e,options:t}}}])&&kQ(r.prototype,n),o&&kQ(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function LQ(e){"@babel/helpers - typeof";return(LQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function DQ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,FQ(n.key),n)}}function FQ(e){var t=function(e,t){if("object"!=LQ(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=LQ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==LQ(t)?t:t+""}function QQ(e,t,r){return t=UQ(t),function(e,t){if(t&&("object"==LQ(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],UQ(e).constructor):t.apply(e,r))}function GQ(){return(GQ="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=UQ(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function UQ(e){return(UQ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zQ(e,t){return(zQ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var HQ=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=QQ(this,t,[e,r])).CLASS_NAME="SuperMap.TilesetsService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zQ(e,t)}(t,Vw),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=GQ(UQ(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"processAsync",value:function(e){if(this.url){return this.url=M.urlPathAppend(this.url,"tilesets"),this.request({method:"GET",scope:this,success:e,failure:e})}}}])&&DQ(r.prototype,n),o&&DQ(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function qQ(e){"@babel/helpers - typeof";return(qQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function VQ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,KQ(n.key),n)}}function KQ(e){var t=function(e,t){if("object"!=qQ(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=qQ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==qQ(t)?t:t+""}function YQ(e,t,r){return t=JQ(t),function(e,t){if(t&&("object"==qQ(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],JQ(e).constructor):t.apply(e,r))}function JQ(e){return(JQ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function WQ(e,t){return(WQ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var XQ=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),YQ(this,t,[e,r])}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&WQ(e,t)}(t,Nw),r=t,(n=[{key:"getMapInfo",value:function(e){var t=this;return new RQ(t.url,{proxy:t.options.proxy,withCredentials:t.options.withCredentials,crossOrigin:t.options.crossOrigin,headers:t.options.headers,projection:t.options.projection}).processAsync(e)}},{key:"getWKT",value:function(e){var t=this;return new RQ(M.urlPathAppend(t.url,"prjCoordSys.wkt"),{proxy:t.options.proxy,withCredentials:t.options.withCredentials,withoutFormatSuffix:!0,crossOrigin:t.options.crossOrigin,headers:t.options.headers,projection:t.options.projection}).processAsync(e)}},{key:"getTilesets",value:function(e){var t=this;return new HQ(t.url,{proxy:t.options.proxy,withCredentials:t.options.withCredentials,crossOrigin:t.options.crossOrigin,headers:t.options.headers}).processAsync(e)}}])&&VQ(r.prototype,n),o&&VQ(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function ZQ(e){"@babel/helpers - typeof";return(ZQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $Q(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,eG(n.key),n)}}function eG(e){var t=function(e,t){if("object"!=ZQ(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ZQ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ZQ(t)?t:t+""}var tG=function(){return e=function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.geometry=t,this.unit=hn.METER,this.prjCoordSys=null,this.distanceMode=null,r&&M.extend(this,r),this.CLASS_NAME="SuperMap.MeasureParameters")},(t=[{key:"destroy",value:function(){this.geometry=null,this.unit=null,this.prjCoordSys=null}}])&&$Q(e.prototype,t),r&&$Q(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function rG(e){"@babel/helpers - typeof";return(rG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nG(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,oG(n.key),n)}}function oG(e){var t=function(e,t){if("object"!=rG(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=rG(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==rG(t)?t:t+""}function iG(e,t,r){return t=sG(t),function(e,t){if(t&&("object"==rG(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],sG(e).constructor):t.apply(e,r))}function aG(){return(aG="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=sG(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function sG(e){return(sG=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function uG(e,t){return(uG=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var lG=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=iG(this,t,[e,r])).measureMode=pn.DISTANCE,r&&M.extend(n,r),n.CLASS_NAME="SuperMap.MeasureService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&uG(e,t)}(t,Vw),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=aG(sG(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([]);this.measureMode=null}},{key:"processAsync",value:function(e,t){if(e instanceof tG){var r,n,o=this,i=e.geometry;if(i){o.url=M.urlPathAppend(o.url,o.measureMode===pn.AREA?"area":"distance");var a,s,u,l=$n.fromGeometry(i);if(l)return r=l.parts[0],n=l.points.splice(0,r),e.prjCoordSys?("object"===rG(e.prjCoordSys)?a='{"epsgCode"'+(s=e.prjCoordSys.projCode).substring(s.indexOf(":"),s.length)+"}":"string"==typeof e.prjCoordSys&&(a='{"epsgCode"'+e.prjCoordSys.substring(e.prjCoordSys.indexOf(":"),e.prjCoordSys.length)+"}"),u={point2Ds:M.toJSON(n),unit:e.unit,prjCoordSys:a,distanceMode:e.distanceMode||"Geodesic"}):u={point2Ds:M.toJSON(n),unit:e.unit,distanceMode:e.distanceMode||"Geodesic"},o.request({method:"GET",params:u,scope:o,success:t,failure:t})}}}}])&&nG(r.prototype,n),o&&nG(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function cG(e){"@babel/helpers - typeof";return(cG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fG(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,pG(n.key),n)}}function pG(e){var t=function(e,t){if("object"!=cG(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=cG(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==cG(t)?t:t+""}function hG(e,t,r){return t=yG(t),function(e,t){if(t&&("object"==cG(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],yG(e).constructor):t.apply(e,r))}function yG(e){return(yG=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dG(e,t){return(dG=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var mG=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),hG(this,t,[e,r])}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dG(e,t)}(t,Nw),r=t,(n=[{key:"measureDistance",value:function(e,t){return this.measure(e,"DISTANCE",t)}},{key:"measureArea",value:function(e,t){return this.measure(e,"AREA",t)}},{key:"measure",value:function(e,t,r){var n=this;return new lG(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,measureMode:t}).processAsync(n._processParam(e),r)}},{key:"_processParam",value:function(e){return!e||e.geometry instanceof b||(e.geometry=To.toSuperMapGeometry(e.geometry)),e}}])&&fG(r.prototype,n),o&&fG(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function gG(e){"@babel/helpers - typeof";return(gG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vG(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,bG(n.key),n)}}function bG(e){var t=function(e,t){if("object"!=gG(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=gG(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==gG(t)?t:t+""}function AG(e,t,r){return t=SG(t),function(e,t){if(t&&("object"==gG(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],SG(e).constructor):t.apply(e,r))}function wG(){return(wG="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=SG(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function SG(e){return(SG=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function CG(e,t){return(CG=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var EG=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=AG(this,t,[e,r])).format=sn.GEOJSON,n.CLASS_NAME="SuperMap.NetworkAnalystServiceBase",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&CG(e,t)}(t,Vw),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=wG(SG(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([]),this.format=null}},{key:"transformResult",value:function(e,t){var r;return(e=M.transformResult(e))&&this.format===sn.GEOJSON&&"function"==typeof this.toGeoJSONResult&&(r=this.toGeoJSONResult(e)),r||(r=e),{result:r,options:t}}},{key:"toGeoJSONResult",value:function(e){return null}}])&&vG(r.prototype,n),o&&vG(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function _G(e){"@babel/helpers - typeof";return(_G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function IG(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,OG(n.key),n)}}function OG(e){var t=function(e,t){if("object"!=_G(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=_G(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==_G(t)?t:t+""}var xG=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);this.sourceNodeIDs=null,this.edgeID=null,this.nodeID=null,this.isUncertainDirectionValid=!1,M.extend(this,t),this.CLASS_NAME="SuperMap.BurstPipelineAnalystParameters"},(t=[{key:"destroy",value:function(){this.sourceNodeIDs=null,this.edgeID=null,this.nodeID=null,this.isUncertainDirectionValid=null}}])&&IG(e.prototype,t),r&&IG(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function PG(e){"@babel/helpers - typeof";return(PG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kG(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,TG(n.key),n)}}function TG(e){var t=function(e,t){if("object"!=PG(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=PG(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==PG(t)?t:t+""}function jG(e,t,r){return t=BG(t),function(e,t){if(t&&("object"==PG(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],BG(e).constructor):t.apply(e,r))}function MG(){return(MG="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=BG(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function BG(e){return(BG=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function NG(e,t){return(NG=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var RG=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=jG(this,t,[e,r])).CLASS_NAME="SuperMap.BurstPipelineAnalystService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&NG(e,t)}(t,EG),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=MG(BG(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"processAsync",value:function(e,t){if(!(e instanceof xG))return null;var r;if(this.url=M.urlPathAppend(this.url,"burstAnalyse"),r={sourceNodeIDs:e.sourceNodeIDs,isUncertainDirectionValid:e.isUncertainDirectionValid},null!==e.edgeID&&null!==e.nodeID)throw new Error("edgeID and nodeID cannot be null at the same time.");if(null===e.edgeID&&null===e.nodeID)throw new Error("edgeID and nodeID cannot be null at the same time.");return null!==e.edgeID?r.edgeID=e.edgeID:r.nodeID=e.nodeID,this.request({method:"GET",params:r,scope:this,success:t,failure:t})}}])&&kG(r.prototype,n),o&&kG(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function LG(e){"@babel/helpers - typeof";return(LG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function DG(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,FG(n.key),n)}}function FG(e){var t=function(e,t){if("object"!=LG(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=LG(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==LG(t)?t:t+""}var QG=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.returnEdgeFeatures=!1,this.returnEdgeGeometry=!1,this.returnEdgeIDs=!1,this.returnNodeFeatures=!1,this.returnNodeGeometry=!1,this.returnNodeIDs=!1,this.returnPathGuides=!1,this.returnRoutes=!1,M.extend(this,t),this.CLASS_NAME="SuperMap.TransportationAnalystResultSetting")},(t=[{key:"destroy",value:function(){var e=this;e.returnEdgeFeatures=null,e.returnEdgeGeometry=null,e.returnEdgeIDs=null,e.returnNodeFeatures=null,e.returnNodeGeometry=null,e.returnNodeIDs=null,e.returnPathGuides=null,e.returnRoutes=null}}])&&DG(e.prototype,t),r&&DG(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function GG(e){"@babel/helpers - typeof";return(GG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function UG(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,zG(n.key),n)}}function zG(e){var t=function(e,t){if("object"!=GG(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=GG(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==GG(t)?t:t+""}var HG=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.barrierEdgeIDs=null,this.barrierNodeIDs=null,this.barrierPoints=null,this.weightFieldName=null,this.turnWeightField=null,this.resultSetting=new QG,M.extend(this,t),this.CLASS_NAME="SuperMap.TransportationAnalystParameter")},(t=[{key:"destroy",value:function(){var e=this;if(e.barrierEdgeIDs=null,e.barrierNodeIDs=null,e.weightFieldName=null,e.turnWeightField=null,e.resultSetting&&(e.resultSetting.destroy(),e.resultSetting=null),e.barrierPoints&&e.barrierPoints.length)for(var t in e.barrierPoints)e.barrierPoints[t].destroy();e.barrierPoints=null}}])&&UG(e.prototype,t),r&&UG(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function qG(e){"@babel/helpers - typeof";return(qG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function VG(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,KG(n.key),n)}}function KG(e){var t=function(e,t){if("object"!=qG(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=qG(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==qG(t)?t:t+""}var YG=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isAnalyzeById=!1,this.nodes=null,this.parameter=new HG,M.extend(this,t),this.CLASS_NAME="SuperMap.ComputeWeightMatrixParameters"},(t=[{key:"destroy",value:function(){var e=this;e.isAnalyzeById=null,e.nodes=null,e.parameter&&(e.parameter.destroy(),e.parameter=null)}}])&&VG(e.prototype,t),r&&VG(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function JG(e){"@babel/helpers - typeof";return(JG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function WG(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,XG(n.key),n)}}function XG(e){var t=function(e,t){if("object"!=JG(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=JG(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==JG(t)?t:t+""}function ZG(e,t,r){return t=eU(t),function(e,t){if(t&&("object"==JG(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],eU(e).constructor):t.apply(e,r))}function $G(){return($G="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=eU(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function eU(e){return(eU=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tU(e,t){return(tU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var rU=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=ZG(this,t,[e,r])).CLASS_NAME="SuperMap.ComputeWeightMatrixService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tU(e,t)}(t,EG),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=$G(eU(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"processAsync",value:function(e,t){if(e instanceof YG){var r,n=this;return n.url=M.urlPathAppend(n.url,"weightmatrix"),r={parameter:M.toJSON(e.parameter),nodes:n.getJson(e.isAnalyzeById,e.nodes)},n.request({method:"GET",params:r,scope:n,success:t,failure:t})}}},{key:"getJson",value:function(e,t){var r="[",n=t?t.length:0;if(!1===e)for(var o=0;o<n;o++)o>0&&(r+=","),r+='{"x":'+t[o].x+',"y":'+t[o].y+"}";else if(!0===e)for(var i=0;i<n;i++)i>0&&(r+=","),r+=t[i];return r+="]"}}])&&WG(r.prototype,n),o&&WG(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function nU(e){"@babel/helpers - typeof";return(nU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oU(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,iU(n.key),n)}}function iU(e){var t=function(e,t){if("object"!=nU(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=nU(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==nU(t)?t:t+""}var aU=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sourceNodeIDs=null,this.edgeID=null,this.nodeID=null,this.returnFeatures=!0,this.isUncertainDirectionValid=!1,this.queryType=null,M.extend(this,t),this.CLASS_NAME="SuperMap.FacilityAnalystStreamParameters"},(t=[{key:"destroy",value:function(){var e=this;e.edgeID=null,e.nodeID=null,e.weightName=null,e.returnFeatures=null,e.isUncertainDirectionValid=null,e.type=null}}])&&oU(e.prototype,t),r&&oU(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function sU(e){"@babel/helpers - typeof";return(sU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function uU(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,lU(n.key),n)}}function lU(e){var t=function(e,t){if("object"!=sU(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=sU(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==sU(t)?t:t+""}function cU(e,t,r){return t=pU(t),function(e,t){if(t&&("object"==sU(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],pU(e).constructor):t.apply(e,r))}function fU(){return(fU="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=pU(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function pU(e){return(pU=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hU(e,t){return(hU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var yU=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=cU(this,t,[e,r])).CLASS_NAME="SuperMap.FacilityAnalystStreamService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hU(e,t)}(t,EG),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=fU(pU(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"processAsync",value:function(e,t){if(e instanceof aU){var r,n=this;if(0===e.queryType)n.url=M.urlPathAppend(n.url,"upstreamcirticalfaclilities");else{if(1!==e.queryType)return;n.url=M.urlPathAppend(n.url,"downstreamcirticalfaclilities")}if(r={sourceNodeIDs:e.sourceNodeIDs,isUncertainDirectionValid:e.isUncertainDirectionValid,returnFeatures:e.returnFeatures},!(null!==e.edgeID&&null!==e.nodeID||null===e.edgeID&&null===e.nodeID))return null!==e.edgeID?r.edgeID=e.edgeID:r.nodeID=e.nodeID,n.request({method:"GET",params:r,scope:n,success:t,failure:t})}}},{key:"toGeoJSONResult",value:function(e){if(!e)return null;var t=new uo;return e.edgesFeatures&&(e.edgesFeatures=t.toGeoJSON(e.edgesFeatures)),e.nodesFeatures&&(e.nodesFeatures=t.toGeoJSON(e.nodesFeatures)),e}}])&&uU(r.prototype,n),o&&uU(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function dU(e){"@babel/helpers - typeof";return(dU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mU(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,gU(n.key),n)}}function gU(e){var t=function(e,t){if("object"!=dU(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=dU(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==dU(t)?t:t+""}var vU=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.edgeID=null,this.nodeID=null,this.weightName=null,this.returnFeatures=!0,this.isUncertainDirectionValid=!0,this.traceType=null,this.withIndex=null,M.extend(this,t),this.CLASS_NAME="SuperMap.TraceAnalystParameters"},(t=[{key:"destroy",value:function(){var e=this;e.edgeID=null,e.nodeID=null,e.weightName=null,e.returnFeatures=null,e.isUncertainDirectionValid=null,e.type=null,e.withIndex=null}}])&&mU(e.prototype,t),r&&mU(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function bU(e){"@babel/helpers - typeof";return(bU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function AU(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,wU(n.key),n)}}function wU(e){var t=function(e,t){if("object"!=bU(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=bU(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==bU(t)?t:t+""}function SU(e,t,r){return t=EU(t),function(e,t){if(t&&("object"==bU(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],EU(e).constructor):t.apply(e,r))}function CU(){return(CU="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=EU(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function EU(e){return(EU=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _U(e,t){return(_U=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var IU=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=SU(this,t,[e,r])).CLASS_NAME="SuperMap.TraceAnalystService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_U(e,t)}(t,EG),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=CU(EU(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"processAsync",value:function(e,t){if(e instanceof vU){var r,n=this;if(0===e.traceType)n.url=M.urlPathAppend(n.url,"traceup");else{if(1!==e.traceType)return;n.url=M.urlPathAppend(n.url,"tracedown")}if(r={weightName:e.weightName,isUncertainDirectionValid:e.isUncertainDirectionValid,returnFeatures:e.returnFeatures},!(null!==e.edgeID&&null!==e.nodeID||null===e.edgeID&&null===e.nodeID))return null!==e.edgeID?r.edgeID=e.edgeID:r.nodeID=e.nodeID,n.request({method:"GET",params:r,scope:n,success:t,failure:t})}}},{key:"toGeoJSONResult",value:function(e){if(!e)return null;var t=new uo;return e.edgesFeatures&&(e.edgesFeatures=t.toGeoJSON(e.edgesFeatures)),e.nodesFeatures&&(e.nodesFeatures=t.toGeoJSON(e.nodesFeatures)),e}}])&&AU(r.prototype,n),o&&AU(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function OU(e){"@babel/helpers - typeof";return(OU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xU(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,PU(n.key),n)}}function PU(e){var t=function(e,t){if("object"!=OU(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=OU(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==OU(t)?t:t+""}var kU=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.connected=null,this.returnFeatures=!0,this.edgeIDs=null,this.nodeIDs=null,this.withIndex=null,M.extend(this,t),this.CLASS_NAME="SuperMap.ConnectedEdgesAnalystParameters"},(t=[{key:"destroy",value:function(){var e=this;e.edgeIDs=null,e.nodeIDs=null,e.connected=null,e.returnFeatures=null,e.withIndex=null}}])&&xU(e.prototype,t),r&&xU(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function TU(e){"@babel/helpers - typeof";return(TU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jU(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,MU(n.key),n)}}function MU(e){var t=function(e,t){if("object"!=TU(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=TU(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==TU(t)?t:t+""}function BU(e,t,r){return t=RU(t),function(e,t){if(t&&("object"==TU(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],RU(e).constructor):t.apply(e,r))}function NU(){return(NU="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=RU(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function RU(e){return(RU=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function LU(e,t){return(LU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var DU=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=BU(this,t,[e,r])).CLASS_NAME="SuperMap.ConnectedEdgesAnalystService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&LU(e,t)}(t,EG),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=NU(RU(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"processAsync",value:function(e,t){if(e instanceof kU){var r;if(this.url=M.urlPathAppend(this.url,"connectededges"),r={connected:e.connected,returnFeatures:e.returnFeatures},!(null!==e.edgeIDs&&null!==e.nodeIDs||null===e.edgeIDs&&null===e.nodeIDs))return null!==e.edgeIDs?r.edgeIDs=e.edgeIDs:r.nodeIDs=e.nodeIDs,this.request({method:"GET",params:r,scope:this,success:t,failure:t})}}},{key:"toGeoJSONResult",value:function(e){if(!e)return null;var t=new uo;return e.edgesFeatures&&(e.edgesFeatures=t.toGeoJSON(e.edgesFeatures)),e.nodesFeatures&&(e.nodesFeatures=t.toGeoJSON(e.nodesFeatures)),e}}])&&jU(r.prototype,n),o&&jU(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function FU(e){"@babel/helpers - typeof";return(FU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function QU(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,GU(n.key),n)}}function GU(e){var t=function(e,t){if("object"!=FU(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=FU(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==FU(t)?t:t+""}var UU=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.event=null,this.expectFacilityCount=1,this.facilities=null,this.fromEvent=!1,this.isAnalyzeById=!1,this.maxWeight=0,this.parameter=new HG,M.extend(this,t),this.CLASS_NAME="SuperMap.FindClosestFacilitiesParameters"},(t=[{key:"destroy",value:function(){var e=this;e.event=null,e.expectFacilityCount=null,e.facilities=null,e.fromEvent=null,e.isAnalyzeById=null,e.maxWeight=null,e.parameter&&(e.parameter.destroy(),e.parameter=null)}}])&&QU(e.prototype,t),r&&QU(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function zU(e){"@babel/helpers - typeof";return(zU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function HU(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,qU(n.key),n)}}function qU(e){var t=function(e,t){if("object"!=zU(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=zU(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==zU(t)?t:t+""}function VU(e,t,r){return t=YU(t),function(e,t){if(t&&("object"==zU(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],YU(e).constructor):t.apply(e,r))}function KU(){return(KU="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=YU(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function YU(e){return(YU=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function JU(e,t){return(JU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var WU=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=VU(this,t,[e,r])).CLASS_NAME="SuperMap.FindClosestFacilitiesService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&JU(e,t)}(t,EG),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=KU(YU(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"processAsync",value:function(e,t){if(e instanceof UU){var r,n=this;return n.url=M.urlPathAppend(n.url,"closestfacility"),r={expectFacilityCount:e.expectFacilityCount,fromEvent:e.fromEvent,maxWeight:e.maxWeight,parameter:M.toJSON(e.parameter),event:M.toJSON(e.event),facilities:n.getJson(e.isAnalyzeById,e.facilities)},n.request({method:"GET",params:r,scope:n,success:t,failure:t})}}},{key:"getJson",value:function(e,t){var r="[",n=t?t.length:0;if(!1===e)for(var o=0;o<n;o++)o>0&&(r+=","),r+='{"x":'+t[o].x+',"y":'+t[o].y+"}";else if(!0===e)for(var i=0;i<n;i++)i>0&&(r+=","),r+=t[i];return r+="]"}},{key:"toGeoJSONResult",value:function(e){if(!e||!e.facilityPathList)return e;var t=new uo;return e.facilityPathList.map(function(e){return e.route&&(e.route=t.toGeoJSON(e.route)),e.pathGuideItems&&(e.pathGuideItems=t.toGeoJSON(e.pathGuideItems)),e.edgeFeatures&&(e.edgeFeatures=t.toGeoJSON(e.edgeFeatures)),e.nodeFeatures&&(e.nodeFeatures=t.toGeoJSON(e.nodeFeatures)),e}),e}}])&&HU(r.prototype,n),o&&HU(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function XU(e){"@babel/helpers - typeof";return(XU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ZU(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,$U(n.key),n)}}function $U(e){var t=function(e,t){if("object"!=XU(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=XU(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==XU(t)?t:t+""}var ez=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.expectedSupplyCenterCount=null,this.isFromCenter=!1,this.supplyCenters=null,this.turnWeightField=null,this.weightName=null,M.extend(this,t),this.CLASS_NAME="SuperMap.FindLocationParameters"},(t=[{key:"destroy",value:function(){var e=this;if(e.expectedSupplyCenterCount=null,e.isFromCenter=null,e.turnWeightField=null,e.weightName=null,e.supplyCenters){for(var t=0,r=e.supplyCenters,n=r.length;t<n;t++)r[t].destroy();e.supplyCenters=null}}}])&&ZU(e.prototype,t),r&&ZU(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function tz(e){"@babel/helpers - typeof";return(tz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rz(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,nz(n.key),n)}}function nz(e){var t=function(e,t){if("object"!=tz(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=tz(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==tz(t)?t:t+""}function oz(e,t,r){return t=az(t),function(e,t){if(t&&("object"==tz(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],az(e).constructor):t.apply(e,r))}function iz(){return(iz="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=az(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function az(e){return(az=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sz(e,t){return(sz=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var uz=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=oz(this,t,[e,r])).CLASS_NAME="SuperMap.FindLocationService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sz(e,t)}(t,EG),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=iz(az(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"processAsync",value:function(e,t){if(e instanceof ez){var r,n=this;return n.url=M.urlPathAppend(n.url,"location"),r={isFromCenter:e.isFromCenter,expectedSupplyCenterCount:e.expectedSupplyCenterCount,weightName:e.weightName,turnWeightField:e.turnWeightField,returnEdgeFeature:!0,returnEdgeGeometry:!0,returnNodeFeature:!0,mapParameter:M.toJSON(e.mapParameter),supplyCenters:n.getCentersJson(e.supplyCenters)},n.request({method:"GET",params:r,scope:n,success:t,failure:t})}}},{key:"getCentersJson",value:function(e){for(var t="[",r=e?e.length:0,n=0;n<r;n++)n>0&&(t+=","),t+=M.toJSON(e[n]);return t+="]"}},{key:"toGeoJSONResult",value:function(e){if(!e)return null;var t=new uo;return e.demandResults&&(e.demandResults=t.toGeoJSON(e.demandResults)),e.supplyResults&&(e.supplyResults=t.toGeoJSON(e.supplyResults)),e}}])&&rz(r.prototype,n),o&&rz(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function lz(e){"@babel/helpers - typeof";return(lz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cz(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,fz(n.key),n)}}function fz(e){var t=function(e,t){if("object"!=lz(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=lz(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==lz(t)?t:t+""}var pz=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.centers=null,this.hasLeastTotalCost=!1,this.isAnalyzeById=!1,this.nodes=null,this.parameter=new HG,M.extend(this,t),this.CLASS_NAME="SuperMap.FindMTSPPathsParameters"},(t=[{key:"destroy",value:function(){var e=this;e.centers=null,e.hasLeastTotalCost=null,e.isAnalyzeById=null,e.nodes=null,e.maxWeight=null,e.parameter&&(e.parameter.destroy(),e.parameter=null)}}])&&cz(e.prototype,t),r&&cz(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function hz(e){"@babel/helpers - typeof";return(hz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yz(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,dz(n.key),n)}}function dz(e){var t=function(e,t){if("object"!=hz(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=hz(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==hz(t)?t:t+""}function mz(e,t,r){return t=vz(t),function(e,t){if(t&&("object"==hz(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],vz(e).constructor):t.apply(e,r))}function gz(){return(gz="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=vz(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function vz(e){return(vz=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bz(e,t){return(bz=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Az=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=mz(this,t,[e,r])).CLASS_NAME="SuperMap.FindMTSPPathsService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bz(e,t)}(t,EG),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=gz(vz(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"processAsync",value:function(e,t){if(e instanceof pz){var r,n=this,o=n.getJson(e.isAnalyzeById,e.centers),i=n.getJson(e.isAnalyzeById,e.nodes);return n.url=M.urlPathAppend(n.url,"mtsppath"),r={centers:o,nodes:i,parameter:M.toJSON(e.parameter),hasLeastTotalCost:e.hasLeastTotalCost},n.request({method:"GET",params:r,scope:n,success:t,failure:t})}}},{key:"getJson",value:function(e,t){var r="[",n=t?t.length:0;if(!1===e)for(var o=0;o<n;o++)o>0&&(r+=","),r+='{"x":'+t[o].x+',"y":'+t[o].y+"}";else if(!0===e)for(var i=0;i<n;i++)i>0&&(r+=","),r+=t[i];return r+="]"}},{key:"toGeoJSONResult",value:function(e){if(!e||!e.pathList)return null;var t=new uo;return e.pathList.map(function(e){return e.route&&(e.route=t.toGeoJSON(e.route)),e.pathGuideItems&&(e.pathGuideItems=t.toGeoJSON(e.pathGuideItems)),e.edgeFeatures&&(e.edgeFeatures=t.toGeoJSON(e.edgeFeatures)),e.nodeFeatures&&(e.nodeFeatures=t.toGeoJSON(e.nodeFeatures)),e}),e}}])&&yz(r.prototype,n),o&&yz(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function wz(e){"@babel/helpers - typeof";return(wz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sz(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Cz(n.key),n)}}function Cz(e){var t=function(e,t){if("object"!=wz(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=wz(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==wz(t)?t:t+""}var Ez=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isAnalyzeById=!1,this.hasLeastEdgeCount=null,this.nodes=null,this.parameter=new HG,M.extend(this,t),this.CLASS_NAME="SuperMap.FindPathParameters"},(t=[{key:"destroy",value:function(){var e=this;e.isAnalyzeById=null,e.hasLeastEdgeCount=null,e.nodes=null,e.parameter&&(e.parameter.destroy(),e.parameter=null)}}])&&Sz(e.prototype,t),r&&Sz(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function _z(e){"@babel/helpers - typeof";return(_z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Iz(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Oz(n.key),n)}}function Oz(e){var t=function(e,t){if("object"!=_z(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=_z(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==_z(t)?t:t+""}function xz(e,t,r){return t=kz(t),function(e,t){if(t&&("object"==_z(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],kz(e).constructor):t.apply(e,r))}function Pz(){return(Pz="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=kz(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function kz(e){return(kz=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Tz(e,t){return(Tz=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var jz=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=xz(this,t,[e,r])).CLASS_NAME="SuperMap.FindPathService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Tz(e,t)}(t,EG),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=Pz(kz(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"processAsync",value:function(e,t){if(e instanceof Ez){var r,n=this;return n.url=M.urlPathAppend(n.url,"path"),r={hasLeastEdgeCount:e.hasLeastEdgeCount,parameter:M.toJSON(e.parameter),nodes:n.getJson(e.isAnalyzeById,e.nodes)},n.request({method:"GET",params:r,scope:n,success:t,failure:t})}}},{key:"getJson",value:function(e,t){var r="[",n=t?t.length:0;if(!1===e)for(var o=0;o<n;o++)o>0&&(r+=","),r+='{"x":'+t[o].x+',"y":'+t[o].y+"}";else if(!0===e)for(var i=0;i<n;i++)i>0&&(r+=","),r+=t[i];return r+="]"}},{key:"toGeoJSONResult",value:function(e){if(!e||!e.pathList||e.pathList.length<1)return null;var t=new uo;return e.pathList.forEach(function(e){e.route&&(e.route=t.toGeoJSON(e.route)),e.pathGuideItems&&(e.pathGuideItems=t.toGeoJSON(e.pathGuideItems)),e.edgeFeatures&&(e.edgeFeatures=t.toGeoJSON(e.edgeFeatures)),e.nodeFeatures&&(e.nodeFeatures=t.toGeoJSON(e.nodeFeatures))}),e}}])&&Iz(r.prototype,n),o&&Iz(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Mz(e){"@babel/helpers - typeof";return(Mz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bz(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Nz(n.key),n)}}function Nz(e){var t=function(e,t){if("object"!=Mz(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Mz(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Mz(t)?t:t+""}var Rz=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isAnalyzeById=!1,this.isCenterMutuallyExclusive=!1,this.centers=null,this.isFromCenter=!1,this.isReturnComplexArea=!1,this.serviceBufferRadius=100,this.weights=null,this.parameter=new HG,M.extend(this,t),this.CLASS_NAME="SuperMap.FindServiceAreasParameters"},(t=[{key:"destroy",value:function(){var e=this;e.isAnalyzeById=null,e.isCenterMutuallyExclusive=null,e.centers=null,e.isFromCenter=null,e.weights=null,e.parameter&&(e.parameter.destroy(),e.parameter=null)}}])&&Bz(e.prototype,t),r&&Bz(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function Lz(e){"@babel/helpers - typeof";return(Lz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dz(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Fz(n.key),n)}}function Fz(e){var t=function(e,t){if("object"!=Lz(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Lz(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Lz(t)?t:t+""}function Qz(e,t,r){return t=Uz(t),function(e,t){if(t&&("object"==Lz(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],Uz(e).constructor):t.apply(e,r))}function Gz(){return(Gz="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=Uz(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function Uz(e){return(Uz=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zz(e,t){return(zz=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Hz=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Qz(this,t,[e,r])).CLASS_NAME="SuperMap.FindServiceAreasService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zz(e,t)}(t,EG),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=Gz(Uz(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"processAsync",value:function(e,t){if(e instanceof Rz){var r,n=this;return n.url=M.urlPathAppend(n.url,"servicearea"),r={isReturnComplexArea:e.isReturnComplexArea,serviceBufferRadius:e.serviceBufferRadius,isFromCenter:e.isFromCenter,isCenterMutuallyExclusive:e.isCenterMutuallyExclusive,parameter:M.toJSON(e.parameter),centers:n.getJson(e.isAnalyzeById,e.centers),weights:n.getJson(!0,e.weights)},n.request({method:"GET",params:r,scope:n,success:t,failure:t})}}},{key:"getJson",value:function(e,t){var r="[",n=t?t.length:0;if(!1===e)for(var o=0;o<n;o++)o>0&&(r+=","),r+='{"x":'+t[o].x+',"y":'+t[o].y+"}";else if(!0===e)for(var i=0;i<n;i++)i>0&&(r+=","),r+=t[i];return r+="]"}},{key:"toGeoJSONResult",value:function(e){if(!e||!e.serviceAreaList)return e;var t=new uo;return e.serviceAreaList.map(function(e){return e.serviceRegion&&(e.serviceRegion=t.toGeoJSON(e.serviceRegion)),e.edgeFeatures&&(e.edgeFeatures=t.toGeoJSON(e.edgeFeatures)),e.nodeFeatures&&(e.nodeFeatures=t.toGeoJSON(e.nodeFeatures)),e.routes&&(e.routes=t.toGeoJSON(e.routes)),e}),e}}])&&Dz(r.prototype,n),o&&Dz(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function qz(e){"@babel/helpers - typeof";return(qz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vz(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Kz(n.key),n)}}function Kz(e){var t=function(e,t){if("object"!=qz(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=qz(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==qz(t)?t:t+""}var Yz=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.endNodeAssigned=!1,this.isAnalyzeById=!1,this.nodes=null,this.parameter=new HG,M.extend(this,t),this.CLASS_NAME="SuperMap.FindTSPPathsParameters"},(t=[{key:"destroy",value:function(){var e=this;e.endNodeAssigned=null,e.isAnalyzeById=null,e.nodes=null,e.parameter&&(e.parameter.destroy(),e.parameter=null)}}])&&Vz(e.prototype,t),r&&Vz(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function Jz(e){"@babel/helpers - typeof";return(Jz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wz(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Xz(n.key),n)}}function Xz(e){var t=function(e,t){if("object"!=Jz(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Jz(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Jz(t)?t:t+""}function Zz(e,t,r){return t=eH(t),function(e,t){if(t&&("object"==Jz(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],eH(e).constructor):t.apply(e,r))}function $z(){return($z="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=eH(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function eH(e){return(eH=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tH(e,t){return(tH=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var rH=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Zz(this,t,[e,r])).CLASS_NAME="SuperMap.FindTSPPathsService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tH(e,t)}(t,EG),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=$z(eH(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"processAsync",value:function(e,t){if(e instanceof Yz){var r,n=this;return n.url=M.urlPathAppend(n.url,"tsppath"),r={parameter:M.toJSON(e.parameter),endNodeAssigned:e.endNodeAssigned,nodes:n.getNodesJson(e)},n.request({method:"GET",params:r,scope:n,success:t,failure:t})}}},{key:"getNodesJson",value:function(e){var t,r,n,o,i="";if(!1===e.isAnalyzeById){for(t="[",r=0,n=(o=e.nodes).length;r<n;r++)r>0&&(t+=","),t+='{"x":'+o[r].x+',"y":'+o[r].y+"}";i+=t+="]"}else if(!0===e.isAnalyzeById){for(var a="[",s=e.nodes,u=s.length,l=0;l<u;l++)l>0&&(a+=","),a+=s[l];i+=a+="]"}return i}},{key:"toGeoJSONResult",value:function(e){if(!e||!e.tspPathList)return null;var t=new uo;return e.tspPathList.forEach(function(e){e.route&&(e.route=t.toGeoJSON(e.route)),e.pathGuideItems&&(e.pathGuideItems=t.toGeoJSON(e.pathGuideItems)),e.edgeFeatures&&(e.edgeFeatures=t.toGeoJSON(e.edgeFeatures)),e.nodeFeatures&&(e.nodeFeatures=t.toGeoJSON(e.nodeFeatures))}),e}}])&&Wz(r.prototype,n),o&&Wz(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function nH(e){"@babel/helpers - typeof";return(nH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oH(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,iH(n.key),n)}}function iH(e){var t=function(e,t){if("object"!=nH(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=nH(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==nH(t)?t:t+""}var aH=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.edgeId="",this.fromNodeId="",this.toNodeId="",this.weightField="",this.edgeWeight="",M.extend(this,t),this.CLASS_NAME="SuperMap.UpdateEdgeWeightParameters")},(t=[{key:"destroy",value:function(){this.edgeId=null,this.fromNodeId=null,this.toNodeId=null,this.weightField=null,this.edgeWeight=null}}])&&oH(e.prototype,t),r&&oH(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function sH(e){"@babel/helpers - typeof";return(sH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function uH(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,lH(n.key),n)}}function lH(e){var t=function(e,t){if("object"!=sH(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=sH(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==sH(t)?t:t+""}function cH(e,t,r){return t=pH(t),function(e,t){if(t&&("object"==sH(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],pH(e).constructor):t.apply(e,r))}function fH(){return(fH="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=pH(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function pH(e){return(pH=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hH(e,t){return(hH=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var yH=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=cH(this,t,[e,r])).CLASS_NAME="SuperMap.UpdateEdgeWeightService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hH(e,t)}(t,EG),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=fH(pH(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"processAsync",value:function(e,t){if(e instanceof aH){var r=this,n=r.parse(e);r.url=M.urlPathAppend(r.url,n);var o=e.edgeWeight?e.edgeWeight:null;return r.request({method:"PUT",scope:r,data:o,success:t,failure:t})}}},{key:"parse",value:function(e){if(e){var t="";for(var r in e)if(""!==e[r]&&"edgeWeight"!==e[r])switch(r){case"edgeId":t+="/edgeweight/"+e[r];break;case"fromNodeId":t+="/fromnode/"+e[r];break;case"toNodeId":t+="/tonode/"+e[r];break;case"weightField":t+="/weightfield/"+e[r]}return t}}}])&&uH(r.prototype,n),o&&uH(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function dH(e){"@babel/helpers - typeof";return(dH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mH(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,gH(n.key),n)}}function gH(e){var t=function(e,t){if("object"!=dH(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=dH(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==dH(t)?t:t+""}var vH=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.nodeId="",this.fromEdgeId="",this.toEdgeId="",this.weightField="",this.turnNodeWeight="",M.extend(this,t),this.CLASS_NAME="SuperMap.UpdateTurnNodeWeightParameters")},(t=[{key:"destroy",value:function(){this.nodeId=null,this.fromEdgeId=null,this.toEdgeId=null,this.weightField=null,this.turnNodeWeight=null}}])&&mH(e.prototype,t),r&&mH(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function bH(e){"@babel/helpers - typeof";return(bH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function AH(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,wH(n.key),n)}}function wH(e){var t=function(e,t){if("object"!=bH(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=bH(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==bH(t)?t:t+""}function SH(e,t,r){return t=EH(t),function(e,t){if(t&&("object"==bH(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],EH(e).constructor):t.apply(e,r))}function CH(){return(CH="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=EH(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function EH(e){return(EH=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _H(e,t){return(_H=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var IH=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=SH(this,t,[e,r])).CLASS_NAME="SuperMap.UpdateTurnNodeWeightService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_H(e,t)}(t,EG),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=CH(EH(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"processAsync",value:function(e,t){if(e instanceof vH){var r=this,n=r.parse(e);r.url=M.urlPathAppend(r.url,n);var o=e.turnNodeWeight?e.turnNodeWeight:null;return r.request({method:"PUT",scope:r,data:o,success:t,failure:t})}}},{key:"parse",value:function(e){if(e){var t="";for(var r in e)if(""!==e[r]&&"turnNodeWeight"!==e[r])switch(r){case"nodeId":t+="/turnnodeweight/"+e[r];break;case"fromEdgeId":t+="/fromedge/"+e[r];break;case"toEdgeId":t+="/toedge/"+e[r];break;case"weightField":t+="/weightfield/"+e[r]}return t}}}])&&AH(r.prototype,n),o&&AH(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function OH(e){"@babel/helpers - typeof";return(OH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xH(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,PH(n.key),n)}}function PH(e){var t=function(e,t){if("object"!=OH(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=OH(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==OH(t)?t:t+""}var kH=function(){return e=function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=t,this.options=r||{}},(t=[{key:"burstPipelineAnalyst",value:function(e,t){var r=this;return new RG(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(e,t)}},{key:"computeWeightMatrix",value:function(e,t){var r=this;return new rU(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(e,t)}},{key:"findClosestFacilities",value:function(e,t,r){var n=this;return new WU(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(e,t)}},{key:"traceAnalyst",value:function(e,t,r){var n=this;return new IU(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(e,t)}},{key:"connectedEdgesAnalyst",value:function(e,t,r){var n=this;return new DU(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(e,t)}},{key:"streamFacilityAnalyst",value:function(e,t,r){var n=this;return new yU(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(e,t)}},{key:"findLocation",value:function(e,t,r){var n=this;return new uz(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(e,t)}},{key:"findPath",value:function(e,t,r){var n=this;return new jz(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(e,t)}},{key:"findTSPPaths",value:function(e,t,r){var n=this;return new rH(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(e,t)}},{key:"findMTSPPaths",value:function(e,t,r){var n=this;return new Az(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(e,t)}},{key:"findServiceAreas",value:function(e,t,r){var n=this;return new Hz(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(e,t)}},{key:"updateEdgeWeight",value:function(e,t){var r=this;return new yH(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(e,t)}},{key:"updateTurnNodeWeight",value:function(e,t){var r=this;return new IH(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(e,t)}},{key:"_processFormat",value:function(e){return e||sn.GEOJSON}}])&&xH(e.prototype,t),r&&xH(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function TH(e){"@babel/helpers - typeof";return(TH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jH(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,MH(n.key),n)}}function MH(e){var t=function(e,t){if("object"!=TH(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=TH(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==TH(t)?t:t+""}function BH(e,t,r){return t=NH(t),function(e,t){if(t&&("object"==TH(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],NH(e).constructor):t.apply(e,r))}function NH(e){return(NH=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function RH(e,t){return(RH=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var LH=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=BH(this,t,[e,r]))._networkAnalystService=new kH(e,r),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&RH(e,t)}(t,Nw),r=t,(n=[{key:"burstPipelineAnalyst",value:function(e,t){return e=this._processParams(e),this._networkAnalystService.burstPipelineAnalyst(e,t)}},{key:"computeWeightMatrix",value:function(e,t){return e=this._processParams(e),this._networkAnalystService.computeWeightMatrix(e,t)}},{key:"findClosestFacilities",value:function(e,t,r){return e=this._processParams(e),this._networkAnalystService.findClosestFacilities(e,t,r)}},{key:"traceAnalyst",value:function(e,t,r){return e=this._processParams(e),this._networkAnalystService.traceAnalyst(e,t,r)}},{key:"connectedEdgesAnalyst",value:function(e,t,r){return e=this._processParams(e),this._networkAnalystService.connectedEdgesAnalyst(e,t,r)}},{key:"streamFacilityAnalyst",value:function(e,t,r){return e=this._processParams(e),this._networkAnalystService.streamFacilityAnalyst(e,t,r)}},{key:"findLocation",value:function(e,t,r){return e=this._processParams(e),this._networkAnalystService.findLocation(e,t,r)}},{key:"findPath",value:function(e,t,r){return e=this._processParams(e),this._networkAnalystService.findPath(e,t,r)}},{key:"findTSPPaths",value:function(e,t,r){return e=this._processParams(e),this._networkAnalystService.findTSPPaths(e,t,r)}},{key:"findMTSPPaths",value:function(e,t,r){return e=this._processParams(e),this._networkAnalystService.findMTSPPaths(e,t,r)}},{key:"findServiceAreas",value:function(e,t,r){return e=this._processParams(e),this._networkAnalystService.findServiceAreas(e,t,r)}},{key:"updateEdgeWeight",value:function(e,t){return this._networkAnalystService.updateEdgeWeight(e,t)}},{key:"updateTurnNodeWeight",value:function(e,t){return this._networkAnalystService.updateTurnNodeWeight(e,t)}},{key:"_processParams",value:function(e){if(!e)return{};var t=this;if(e.centers&&To.isArray(e.centers)&&e.centers.map(function(r,n){return e.centers[n]=t._toPointObject(r),e.centers[n]}),e.nodes&&To.isArray(e.nodes)&&e.nodes.map(function(r,n){return e.nodes[n]=t._toPointObject(r),e.nodes[n]}),e.event&&(e.event=t._toPointObject(e.event)),e.facilities&&To.isArray(e.facilities)&&e.facilities.map(function(r,n){return e.facilities[n]=t._toPointObject(r),e.facilities[n]}),e.parameter&&e.parameter.barrierPoints){var r=e.parameter.barrierPoints;To.isArray(r)?r.map(function(r,n){return e.parameter[n]=t._toPointObject(r),e.parameter.barrierPoints[n]}):e.parameter.barrierPoints=[r instanceof o().LngLat?{x:r.lng,y:r.lat}:r]}return e}},{key:"_toPointObject",value:function(e){return To.isArray(e)?{x:e[0],y:e[1]}:e instanceof o().LngLat?{x:e.lng,y:e.lat}:e instanceof o().Point?{x:e.x,y:e.y}:e}},{key:"_processFormat",value:function(e){return e||sn.GEOJSON}}])&&jH(r.prototype,n),i&&jH(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,i}();function DH(e){"@babel/helpers - typeof";return(DH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function FH(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,QH(n.key),n)}}function QH(e){var t=function(e,t){if("object"!=DH(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=DH(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==DH(t)?t:t+""}var GH=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.edgeID=null,this.nodeID=null,this.weightName=null,this.isUncertainDirectionValid=!1,M.extend(this,t),this.CLASS_NAME="SuperMap.FacilityAnalyst3DParameters"},(t=[{key:"destroy",value:function(){this.edgeID=null,this.nodeID=null,this.weightName=null,this.isUncertainDirectionValid=null}}])&&FH(e.prototype,t),r&&FH(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function UH(e){"@babel/helpers - typeof";return(UH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zH(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,HH(n.key),n)}}function HH(e){var t=function(e,t){if("object"!=UH(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=UH(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==UH(t)?t:t+""}function qH(e,t,r){return t=KH(t),function(e,t){if(t&&("object"==UH(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],KH(e).constructor):t.apply(e,r))}function VH(){return(VH="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=KH(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function KH(e){return(KH=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function YH(e,t){return(YH=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var JH=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=qH(this,t,[e])).CLASS_NAME="SuperMap.FacilityAnalystSinks3DParameters",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&YH(e,t)}(t,GH),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=VH(KH(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}}])&&zH(r.prototype,n),o&&zH(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function WH(e){"@babel/helpers - typeof";return(WH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function XH(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ZH(n.key),n)}}function ZH(e){var t=function(e,t){if("object"!=WH(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=WH(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==WH(t)?t:t+""}function $H(e,t,r){return t=eq(t),function(e,t){if(t&&("object"==WH(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],eq(e).constructor):t.apply(e,r))}function eq(e){return(eq=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tq(e,t){return(tq=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var rq=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=$H(this,t,[e,r])).CLASS_NAME="SuperMap.FacilityAnalystSinks3DService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tq(e,t)}(t,Vw),r=t,(n=[{key:"destroy",value:function(){Vw.prototype.destroy.apply(this,arguments)}},{key:"processAsync",value:function(e,t){if(e instanceof JH){var r;return this.url=M.urlPathAppend(this.url,"sinks"),r={edgeID:e.edgeID,nodeID:e.nodeID,weightName:e.weightName,isUncertainDirectionValid:e.isUncertainDirectionValid},this.request({method:"GET",params:r,scope:this,success:t,failure:t})}}}])&&XH(r.prototype,n),o&&XH(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function nq(e){"@babel/helpers - typeof";return(nq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oq(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,iq(n.key),n)}}function iq(e){var t=function(e,t){if("object"!=nq(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=nq(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==nq(t)?t:t+""}function aq(e,t,r){return t=uq(t),function(e,t){if(t&&("object"==nq(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],uq(e).constructor):t.apply(e,r))}function sq(){return(sq="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=uq(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function uq(e){return(uq=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lq(e,t){return(lq=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var cq=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=aq(this,t,[e])).CLASS_NAME="SuperMap.FacilityAnalystSources3DParameters",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lq(e,t)}(t,GH),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=sq(uq(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}}])&&oq(r.prototype,n),o&&oq(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function fq(e){"@babel/helpers - typeof";return(fq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pq(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,hq(n.key),n)}}function hq(e){var t=function(e,t){if("object"!=fq(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=fq(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==fq(t)?t:t+""}function yq(e,t,r){return t=mq(t),function(e,t){if(t&&("object"==fq(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],mq(e).constructor):t.apply(e,r))}function dq(){return(dq="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=mq(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function mq(e){return(mq=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gq(e,t){return(gq=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var vq=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=yq(this,t,[e,r])).CLASS_NAME="SuperMap.FacilityAnalystSources3DService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gq(e,t)}(t,Vw),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=dq(mq(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"processAsync",value:function(e,t){if(e instanceof cq){var r;return this.url=M.urlPathAppend(this.url,"sources"),r={edgeID:e.edgeID,nodeID:e.nodeID,weightName:e.weightName,isUncertainDirectionValid:e.isUncertainDirectionValid},this.request({method:"GET",params:r,scope:this,success:t,failure:t})}}}])&&pq(r.prototype,n),o&&pq(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function bq(e){"@babel/helpers - typeof";return(bq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Aq(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,wq(n.key),n)}}function wq(e){var t=function(e,t){if("object"!=bq(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=bq(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==bq(t)?t:t+""}function Sq(e,t,r){return t=Eq(t),function(e,t){if(t&&("object"==bq(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],Eq(e).constructor):t.apply(e,r))}function Cq(){return(Cq="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=Eq(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function Eq(e){return(Eq=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _q(e,t){return(_q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Iq=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Sq(this,t,[e])).CLASS_NAME="SuperMap.FacilityAnalystTraceup3DParameters",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_q(e,t)}(t,GH),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=Cq(Eq(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}}])&&Aq(r.prototype,n),o&&Aq(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Oq(e){"@babel/helpers - typeof";return(Oq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xq(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Pq(n.key),n)}}function Pq(e){var t=function(e,t){if("object"!=Oq(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Oq(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Oq(t)?t:t+""}function kq(e,t,r){return t=jq(t),function(e,t){if(t&&("object"==Oq(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],jq(e).constructor):t.apply(e,r))}function Tq(){return(Tq="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=jq(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function jq(e){return(jq=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Mq(e,t){return(Mq=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Bq=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=kq(this,t,[e,r])).CLASS_NAME="SuperMap.FacilityAnalystTraceup3DService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Mq(e,t)}(t,Vw),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=Tq(jq(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"processAsync",value:function(e,t){if(e instanceof Iq){var r;return this.url=M.urlPathAppend(this.url,"traceupresult"),r={edgeID:e.edgeID,nodeID:e.nodeID,weightName:e.weightName,isUncertainDirectionValid:e.isUncertainDirectionValid},this.request({method:"GET",params:r,scope:this,success:t,failure:t})}}}])&&xq(r.prototype,n),o&&xq(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Nq(e){"@babel/helpers - typeof";return(Nq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rq(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Lq(n.key),n)}}function Lq(e){var t=function(e,t){if("object"!=Nq(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Nq(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Nq(t)?t:t+""}function Dq(e,t,r){return t=Qq(t),function(e,t){if(t&&("object"==Nq(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],Qq(e).constructor):t.apply(e,r))}function Fq(){return(Fq="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=Qq(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function Qq(e){return(Qq=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gq(e,t){return(Gq=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Uq=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Dq(this,t,[e])).CLASS_NAME="SuperMap.FacilityAnalystTracedown3DParameters",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gq(e,t)}(t,GH),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=Fq(Qq(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}}])&&Rq(r.prototype,n),o&&Rq(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function zq(e){"@babel/helpers - typeof";return(zq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hq(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,qq(n.key),n)}}function qq(e){var t=function(e,t){if("object"!=zq(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=zq(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==zq(t)?t:t+""}function Vq(e,t,r){return t=Yq(t),function(e,t){if(t&&("object"==zq(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],Yq(e).constructor):t.apply(e,r))}function Kq(){return(Kq="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=Yq(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function Yq(e){return(Yq=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Jq(e,t){return(Jq=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Wq=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Vq(this,t,[e,r])).CLASS_NAME="SuperMap.FacilityAnalystTracedown3DService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jq(e,t)}(t,Vw),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=Kq(Yq(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"processAsync",value:function(e,t){if(e instanceof Uq){var r;return this.url=M.urlPathAppend(this.url,"tracedownresult"),r={edgeID:e.edgeID,nodeID:e.nodeID,weightName:e.weightName,isUncertainDirectionValid:e.isUncertainDirectionValid},this.request({method:"GET",params:r,scope:this,success:t,failure:t})}}}])&&Hq(r.prototype,n),o&&Hq(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Xq(e){"@babel/helpers - typeof";return(Xq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zq(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,$q(n.key),n)}}function $q(e){var t=function(e,t){if("object"!=Xq(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Xq(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Xq(t)?t:t+""}function eV(e,t,r){return t=rV(t),function(e,t){if(t&&("object"==Xq(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],rV(e).constructor):t.apply(e,r))}function tV(){return(tV="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=rV(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function rV(e){return(rV=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nV(e,t){return(nV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var oV=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=eV(this,t,[e]),e=e||{},r.sourceNodeIDs=null,M.extend(r,e),r.CLASS_NAME="SuperMap.FacilityAnalystUpstream3DParameters",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nV(e,t)}(t,GH),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=tV(rV(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([]),this.sourceNodeIDs=null}}])&&Zq(r.prototype,n),o&&Zq(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function iV(e){"@babel/helpers - typeof";return(iV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function aV(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,sV(n.key),n)}}function sV(e){var t=function(e,t){if("object"!=iV(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=iV(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==iV(t)?t:t+""}function uV(e,t,r){return t=cV(t),function(e,t){if(t&&("object"==iV(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],cV(e).constructor):t.apply(e,r))}function lV(){return(lV="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=cV(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function cV(e){return(cV=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fV(e,t){return(fV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var pV=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=uV(this,t,[e,r])).CLASS_NAME="SuperMap.FacilityAnalystUpstream3DService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fV(e,t)}(t,Vw),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=lV(cV(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"processAsync",value:function(e,t){if(e instanceof oV){var r;return this.url=M.urlPathAppend(this.url,"upstreamcirticalfaclilities"),r={sourceNodeIDs:e.sourceNodeIDs,edgeID:e.edgeID,nodeID:e.nodeID,isUncertainDirectionValid:e.isUncertainDirectionValid},this.request({method:"GET",params:r,scope:this,success:t,failure:t})}}}])&&aV(r.prototype,n),o&&aV(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function hV(e){"@babel/helpers - typeof";return(hV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yV(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,dV(n.key),n)}}function dV(e){var t=function(e,t){if("object"!=hV(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=hV(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==hV(t)?t:t+""}var mV=function(){return e=function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=t,this.options=r||{}},(t=[{key:"sinksFacilityAnalyst",value:function(e,t){var r=this;return new rq(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(e,t)}},{key:"sourcesFacilityAnalyst",value:function(e,t){var r=this;return new vq(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(e,t)}},{key:"traceUpFacilityAnalyst",value:function(e,t){var r=this;return new Bq(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(e,t)}},{key:"traceDownFacilityAnalyst",value:function(e,t){var r=this;return new Wq(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(e,t)}},{key:"upstreamFacilityAnalyst",value:function(e,t){var r=this;return new pV(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(e,t)}}])&&yV(e.prototype,t),r&&yV(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function gV(e){"@babel/helpers - typeof";return(gV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vV(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,bV(n.key),n)}}function bV(e){var t=function(e,t){if("object"!=gV(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=gV(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==gV(t)?t:t+""}function AV(e,t,r){return t=wV(t),function(e,t){if(t&&("object"==gV(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],wV(e).constructor):t.apply(e,r))}function wV(e){return(wV=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function SV(e,t){return(SV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var CV=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=AV(this,t,[e,r]))._networkAnalyst3DService=new mV(e,r),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&SV(e,t)}(t,Nw),r=t,(n=[{key:"sinksFacilityAnalyst",value:function(e,t){return this._networkAnalyst3DService.sinksFacilityAnalyst(e,t)}},{key:"sourcesFacilityAnalyst",value:function(e,t){return this._networkAnalyst3DService.sourcesFacilityAnalyst(e,t)}},{key:"traceUpFacilityAnalyst",value:function(e,t){return this._networkAnalyst3DService.traceUpFacilityAnalyst(e,t)}},{key:"traceDownFacilityAnalyst",value:function(e,t){return this._networkAnalyst3DService.traceDownFacilityAnalyst(e,t)}},{key:"upstreamFacilityAnalyst",value:function(e,t){return this._networkAnalyst3DService.upstreamFacilityAnalyst(e,t)}}])&&vV(r.prototype,n),o&&vV(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function EV(e){"@babel/helpers - typeof";return(EV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _V(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,IV(n.key),n)}}function IV(e){var t=function(e,t){if("object"!=EV(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=EV(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==EV(t)?t:t+""}function OV(e,t,r){return t=PV(t),function(e,t){if(t&&("object"==EV(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],PV(e).constructor):t.apply(e,r))}function xV(){return(xV="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=PV(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function PV(e){return(PV=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kV(e,t){return(kV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var TV=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=OV(this,t,[e,r=r||{}])).CLASS_NAME="SuperMap.ProcessingServiceBase",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kV(e,t)}(t,Vw),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=xV(PV(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"getJobs",value:function(e,t){var r=this;return z.get(Fw.appendCredential(e),null,{proxy:r.proxy}).then(function(e){return e.json()}).then(function(e){var n={result:e,object:r,type:"processCompleted"};return t(n),n}).catch(function(e){var n={error:e,object:r,type:"processFailed"};return t(n),n})}},{key:"addJob",value:function(e,t,r,n,o,i){var a=this,s=null;t&&t instanceof r&&(s=new Object,r.toObject(t,s));var u=Object.assign({"Content-Type":"application/x-www-form-urlencoded"},a.headers||{}),l={proxy:a.proxy,headers:u,withCredentials:a.withCredentials,crossOrigin:a.crossOrigin,isInTheSameDomain:a.isInTheSameDomain};return z.post(Fw.appendCredential(e),JSON.stringify(s),l).then(function(e){return e.json()}).then(function(e){return e.succeed?a.transformResult(e,n,o,i):((e=a.transformErrorResult(e)).options=a,e.type="processFailed",o(e),e)}).catch(function(e){return(e=a.transformErrorResult({error:e})).options=a,e.type="processFailed",o(e),e})}},{key:"transformResult",value:function(e,t,r,n){e=M.transformResult(e),t=t||1e3;var o=this;if(e)return new Promise(function(i){var a=setInterval(function(){z.get(Fw.appendCredential(e.newResourceLocation),{_t:(new Date).getTime()}).then(function(e){return e.json()}).then(function(e){if(i({object:o,id:e.id,state:e.state}),n({id:e.id,state:e.state,object:o}),"LOST"===e.state.runState||"KILLED"===e.state.runState||"FAILED"===e.state.runState){clearInterval(a);var t={error:e.state.errorMsg,state:e.state.runState,object:o,type:"processFailed"};i(t),r(t)}if("FINISHED"===e.state.runState&&e.setting.serviceInfo){clearInterval(a);var s={result:e,object:o,type:"processCompleted"};i(s),r(s)}}).catch(function(e){clearInterval(a);var t={error:e,object:o,type:"processFailed"};i(t),r(t)})},t)})}}])&&_V(r.prototype,n),o&&_V(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function jV(e){"@babel/helpers - typeof";return(jV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function MV(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,BV(n.key),n)}}function BV(e){var t=function(e,t){if("object"!=jV(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=jV(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==jV(t)?t:t+""}var NV=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.alias=null,this.connect=null,this.dataBase=null,this.driver=null,this.engineType=null,this.exclusive=null,this.OpenLinkTable=null,this.password=null,this.readOnly=null,this.server=null,this.user=null,t&&M.extend(this,t),this.CLASS_NAME="SuperMap.DatasourceConnectionInfo"},(t=[{key:"destroy",value:function(){var e=this;e.alias=null,e.connect=null,e.dataBase=null,e.driver=null,e.engineType=null,e.exclusive=null,e.OpenLinkTable=null,e.password=null,e.readOnly=null,e.server=null,e.user=null}}])&&MV(e.prototype,t),r&&MV(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function RV(e){"@babel/helpers - typeof";return(RV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function LV(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,DV(n.key),n)}}function DV(e){var t=function(e,t){if("object"!=RV(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=RV(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==RV(t)?t:t+""}var FV=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=On.UDB,this.datasetName="analystResult",this.datasourceInfo=null,this.outputPath="",M.extend(this,t),this.CLASS_NAME="SuperMap.OutputSetting"},(t=[{key:"destroy",value:function(){var e=this;e.type=null,e.datasetName=null,e.outputPath=null,e.datasourceInfo instanceof NV&&(e.datasourceInfo.destroy(),e.datasourceInfo=null)}}])&&LV(e.prototype,t),r&&LV(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function QV(e){"@babel/helpers - typeof";return(QV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function GV(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,UV(n.key),n)}}function UV(e){var t=function(e,t){if("object"!=QV(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=QV(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==QV(t)?t:t+""}var zV=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.items=null,this.numericPrecision=1,this.rangeMode=bn.EQUALINTERVAL,this.rangeCount="",this.colorGradientType=An.YELLOW_RED,M.extend(this,t),this.CLASS_NAME="SuperMap.MappingParameters"},(t=[{key:"destroy",value:function(){var e=this;if(e.items){if(e.items.length>0)for(var t in e.items)e.items[t].destroy(),e.items[t]=null;e.items=null}e.numericPrecision=null,e.rangeMode=null,e.rangeCount=null,e.colorGradientType=null}}])&&GV(e.prototype,t),r&&GV(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function HV(e){"@babel/helpers - typeof";return(HV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qV(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,VV(n.key),n)}}function VV(e){var t=function(e,t){if("object"!=HV(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=HV(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==HV(t)?t:t+""}var KV=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasetName="",this.query="",this.resolution=80,this.method=0,this.meshType=0,this.fields="",this.radius=300,this.meshSizeUnit=Fn.METER,this.radiusUnit=Fn.METER,this.areaUnit=Dn.SQUAREMILE,this.output=null,this.mappingParameters=null,M.extend(this,t),this.CLASS_NAME="SuperMap.KernelDensityJobParameter")},r=[{key:"toObject",value:function(e,t){for(var r in e)"datasetName"!==r?"output"!==r?(t.analyst=t.analyst||{},"query"===r&&e[r]?t.analyst[r]=e[r].toBBOX():t.analyst[r]=e[r],"mappingParameters"===r&&(t.analyst[r]=t.analyst[r]||{},t.analyst.mappingParameters=e[r])):(t.output=t.output||{},t.output=e[r]):(t.input=t.input||{},t.input[r]=e[r])}}],(t=[{key:"destroy",value:function(){this.datasetName=null,this.query=null,this.resolution=null,this.method=null,this.radius=null,this.meshType=null,this.fields=null,this.meshSizeUnit=null,this.radiusUnit=null,this.areaUnit=null,this.output instanceof FV&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof zV&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&qV(e.prototype,t),r&&qV(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function YV(e){"@babel/helpers - typeof";return(YV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function JV(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,WV(n.key),n)}}function WV(e){var t=function(e,t){if("object"!=YV(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=YV(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==YV(t)?t:t+""}function XV(e,t,r){return t=eK(t),function(e,t){if(t&&("object"==YV(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],eK(e).constructor):t.apply(e,r))}function ZV(e,t,r,n){var o=$V(eK(1&n?e.prototype:e),t,r);return 2&n&&"function"==typeof o?function(e){return o.apply(r,e)}:o}function $V(){return($V="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=eK(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function eK(e){return(eK=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tK(e,t){return(tK=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var rK=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=XV(this,t,[e,r])).url=M.urlPathAppend(n.url,"spatialanalyst/density"),n.CLASS_NAME="SuperMap.KernelDensityJobsService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tK(e,t)}(t,TV),r=t,(n=[{key:"destroy",value:function(){ZV(t,"destroy",this,3)([])}},{key:"getKernelDensityJobs",value:function(e){return ZV(t,"getJobs",this,3)([this.url,e])}},{key:"getKernelDensityJob",value:function(e,r){return ZV(t,"getJobs",this,3)([M.urlPathAppend(this.url,e),r])}},{key:"addKernelDensityJob",value:function(e,r,n,o){return ZV(t,"addJob",this,3)([this.url,e,KV,r,n,o])}}])&&JV(r.prototype,n),o&&JV(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function nK(e){"@babel/helpers - typeof";return(nK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oK(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,iK(n.key),n)}}function iK(e){var t=function(e,t){if("object"!=nK(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=nK(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==nK(t)?t:t+""}var aK=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasetName="",this.datasetQuery="",this.geometryQuery="",this.mode=fn.CONTAIN,this.output=null,this.mappingParameters=null,M.extend(this,t),this.CLASS_NAME="SuperMap.SingleObjectQueryJobsParameter")},r=[{key:"toObject",value:function(e,t){for(var r in e)"datasetName"!==r?"output"!==r?(t.analyst=t.analyst||{},t.analyst[r]=e[r],"mappingParameters"===r&&(t.analyst[r]=t.analyst[r]||{},t.analyst.mappingParameters=e[r])):(t.output=t.output||{},t.output=e[r]):(t.input=t.input||{},t.input[r]=e[r])}}],(t=[{key:"destroy",value:function(){this.datasetName=null,this.datasetQuery=null,this.geometryQuery=null,this.mode=null,this.output instanceof FV&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof zV&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&oK(e.prototype,t),r&&oK(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function sK(e){"@babel/helpers - typeof";return(sK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function uK(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,lK(n.key),n)}}function lK(e){var t=function(e,t){if("object"!=sK(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=sK(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==sK(t)?t:t+""}function cK(e,t,r){return t=hK(t),function(e,t){if(t&&("object"==sK(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],hK(e).constructor):t.apply(e,r))}function fK(e,t,r,n){var o=pK(hK(1&n?e.prototype:e),t,r);return 2&n&&"function"==typeof o?function(e){return o.apply(r,e)}:o}function pK(){return(pK="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=hK(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function hK(e){return(hK=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yK(e,t){return(yK=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var dK=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=cK(this,t,[e,r])).url=M.urlPathAppend(n.url,"spatialanalyst/query"),n.CLASS_NAME="SuperMap.SingleObjectQueryJobsService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yK(e,t)}(t,TV),r=t,(n=[{key:"destroy",value:function(){fK(t,"destroy",this,3)([])}},{key:"getQueryJobs",value:function(e){return fK(t,"getJobs",this,3)([this.url,e])}},{key:"getQueryJob",value:function(e,r){return fK(t,"getJobs",this,3)([M.urlPathAppend(this.url,e),r])}},{key:"addQueryJob",value:function(e,r,n,o){return fK(t,"addJob",this,3)([this.url,e,aK,r,n,o])}}])&&uK(r.prototype,n),o&&uK(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function mK(e){"@babel/helpers - typeof";return(mK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gK(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,vK(n.key),n)}}function vK(e){var t=function(e,t){if("object"!=mK(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=mK(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==mK(t)?t:t+""}var bK=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasetName="",this.regionDataset="",this.query="",this.resolution=100,this.meshType=0,this.statisticModes=Qn.AVERAGE,this.fields="",this.type=Gn.SUMMARYMESH,this.output=null,this.mappingParameters=null,M.extend(this,t),this.CLASS_NAME="SuperMap.SummaryMeshJobParameter")},r=[{key:"toObject",value:function(e,t){for(var r in e)"datasetName"!==r?"type"!==r?"output"!==r?("SUMMARYMESH"===e.type&&"regionDataset"!==r||"SUMMARYREGION"===e.type&&!n(["meshType","resolution","query"],r))&&(t.analyst=t.analyst||{},"query"===r&&e[r]?t.analyst[r]=e[r].toBBOX():t.analyst[r]=e[r],"mappingParameters"===r&&(t.analyst[r]=t.analyst[r]||{},t.analyst.mappingParameters=e[r])):(t.output=t.output||{},t.output=e[r]):t.type=e[r]:(t.input=t.input||{},t.input[r]=e[r]);function n(e,t){for(var r=e.length;r--;)if(e[r]===t)return!0;return!1}}}],(t=[{key:"destroy",value:function(){this.datasetName=null,this.query=null,this.resolution=null,this.statisticModes=null,this.meshType=null,this.fields=null,this.regionDataset=null,this.type=null,this.output instanceof FV&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof zV&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&gK(e.prototype,t),r&&gK(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function AK(e){"@babel/helpers - typeof";return(AK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wK(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,SK(n.key),n)}}function SK(e){var t=function(e,t){if("object"!=AK(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=AK(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==AK(t)?t:t+""}function CK(e,t,r){return t=IK(t),function(e,t){if(t&&("object"==AK(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],IK(e).constructor):t.apply(e,r))}function EK(e,t,r,n){var o=_K(IK(1&n?e.prototype:e),t,r);return 2&n&&"function"==typeof o?function(e){return o.apply(r,e)}:o}function _K(){return(_K="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=IK(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function IK(e){return(IK=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function OK(e,t){return(OK=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var xK=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=CK(this,t,[e,r])).url=M.urlPathAppend(n.url,"spatialanalyst/aggregatepoints"),n.CLASS_NAME="SuperMap.SummaryMeshJobsService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&OK(e,t)}(t,TV),r=t,(n=[{key:"destroy",value:function(){EK(t,"destroy",this,3)([])}},{key:"getSummaryMeshJobs",value:function(e){return EK(t,"getJobs",this,3)([this.url,e])}},{key:"getSummaryMeshJob",value:function(e,r){return EK(t,"getJobs",this,3)([M.urlPathAppend(this.url,e),r])}},{key:"addSummaryMeshJob",value:function(e,r,n,o){return EK(t,"addJob",this,3)([this.url,e,bK,r,n,o])}}])&&wK(r.prototype,n),o&&wK(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function PK(e){"@babel/helpers - typeof";return(PK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kK(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,TK(n.key),n)}}function TK(e){var t=function(e,t){if("object"!=PK(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=PK(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==PK(t)?t:t+""}var jK=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.datasetName="",this.datasetVectorClip="",this.geometryClip="",this.mode=Ln.CLIP,this.output=null,this.mappingParameters=null,M.extend(this,t),this.CLASS_NAME="SuperMap.VectorClipJobsParameter"},r=[{key:"toObject",value:function(e,t){for(var r in e)"datasetName"!==r?"output"!==r?(t.analyst=t.analyst||{},t.analyst[r]=e[r],"mappingParameters"===r&&(t.analyst[r]=t.analyst[r]||{},t.analyst.mappingParameters=e[r])):(t.output=t.output||{},t.output=e[r]):(t.input=t.input||{},t.input[r]=e[r])}}],(t=[{key:"destroy",value:function(){this.datasetName=null,this.datasetVectorClip=null,this.geometryClip=null,this.mode=null,this.output instanceof FV&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof zV&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&kK(e.prototype,t),r&&kK(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function MK(e){"@babel/helpers - typeof";return(MK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function BK(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,NK(n.key),n)}}function NK(e){var t=function(e,t){if("object"!=MK(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=MK(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==MK(t)?t:t+""}function RK(e,t,r){return t=FK(t),function(e,t){if(t&&("object"==MK(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],FK(e).constructor):t.apply(e,r))}function LK(e,t,r,n){var o=DK(FK(1&n?e.prototype:e),t,r);return 2&n&&"function"==typeof o?function(e){return o.apply(r,e)}:o}function DK(){return(DK="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=FK(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function FK(e){return(FK=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function QK(e,t){return(QK=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var GK=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=RK(this,t,[e,r])).url=M.urlPathAppend(n.url,"spatialanalyst/vectorclip"),n.CLASS_NAME="SuperMap.VectorClipJobsService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&QK(e,t)}(t,TV),r=t,(n=[{key:"destroy",value:function(){LK(t,"destroy",this,3)([])}},{key:"getVectorClipJobs",value:function(e){return LK(t,"getJobs",this,3)([this.url,e])}},{key:"getVectorClipJob",value:function(e,r){return LK(t,"getJobs",this,3)([M.urlPathAppend(this.url,e),r])}},{key:"addVectorClipJob",value:function(e,r,n,o){return LK(t,"addJob",this,3)([this.url,e,jK,r,n,o])}}])&&BK(r.prototype,n),o&&BK(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function UK(e){"@babel/helpers - typeof";return(UK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zK(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,HK(n.key),n)}}function HK(e){var t=function(e,t){if("object"!=UK(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=UK(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==UK(t)?t:t+""}var qK=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasetName="",this.datasetOverlay="",this.mode="",this.srcFields="",this.overlayFields="",this.output=null,this.mappingParameters=null,M.extend(this,t),this.CLASS_NAME="SuperMap.OverlayGeoJobParameter")},r=[{key:"toObject",value:function(e,t){for(var r in e)"datasetName"!=r?"output"!==r?(t.analyst=t.analyst||{},t.analyst[r]=e[r],"mappingParameters"===r&&(t.analyst[r]=t.analyst[r]||{},t.analyst.mappingParameters=e[r])):(t.output=t.output||{},t.output=e[r]):(t.input=t.input||{},t.input[r]=e[r])}}],(t=[{key:"destroy",value:function(){this.datasetName=null,this.datasetOverlay=null,this.mode=null,this.srcFields=null,this.overlayFields=null,this.output instanceof FV&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof zV&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&zK(e.prototype,t),r&&zK(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function VK(e){"@babel/helpers - typeof";return(VK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function KK(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,YK(n.key),n)}}function YK(e){var t=function(e,t){if("object"!=VK(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=VK(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==VK(t)?t:t+""}function JK(e,t,r){return t=ZK(t),function(e,t){if(t&&("object"==VK(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],ZK(e).constructor):t.apply(e,r))}function WK(e,t,r,n){var o=XK(ZK(1&n?e.prototype:e),t,r);return 2&n&&"function"==typeof o?function(e){return o.apply(r,e)}:o}function XK(){return(XK="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=ZK(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function ZK(e){return(ZK=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $K(e,t){return($K=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var eY=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=JK(this,t,[e,r])).url=M.urlPathAppend(n.url,"spatialanalyst/overlay"),n.CLASS_NAME="SuperMap.OverlayGeoJobsService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$K(e,t)}(t,TV),r=t,(n=[{key:"destroy",value:function(){WK(t,"destroy",this,3)([])}},{key:"getOverlayGeoJobs",value:function(e){return WK(t,"getJobs",this,3)([this.url,e])}},{key:"getOverlayGeoJob",value:function(e,r){return WK(t,"getJobs",this,3)([M.urlPathAppend(this.url,e),r])}},{key:"addOverlayGeoJob",value:function(e,r,n,o){return WK(t,"addJob",this,3)([this.url,e,qK,r,n,o])}}])&&KK(r.prototype,n),o&&KK(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function tY(e){"@babel/helpers - typeof";return(tY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rY(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,nY(n.key),n)}}function nY(e){var t=function(e,t){if("object"!=tY(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=tY(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==tY(t)?t:t+""}var oY=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasetName="",this.regionDataset="",this.sumShape=!0,this.query="",this.standardSummaryFields=!1,this.standardFields="",this.standardStatisticModes="",this.weightedSummaryFields=!1,this.weightedFields="",this.weightedStatisticModes="",this.meshType=0,this.resolution=100,this.meshSizeUnit=Fn.METER,this.type=Gn.SUMMARYMESH,this.output=null,this.mappingParameters=null,M.extend(this,t),this.CLASS_NAME="SuperMap.SummaryRegionJobParameter")},r=[{key:"toObject",value:function(e,t){for(var r in e)"datasetName"!==r?"type"!==r&&"type"!==r?"output"!==r?("SUMMARYREGION"===e.type||"SUMMARYMESH"===e.type&&"regionDataset"!==r)&&(t.analyst=t.analyst||{},"query"===r&&e[r]?t.analyst[r]=e[r].toBBOX():t.analyst[r]=e[r],"mappingParameters"===r&&(t.analyst[r]=t.analyst[r]||{},t.analyst.mappingParameters=e[r])):(t.output=t.output||{},t.output=e[r]):t.type=e[r]:(t.input=t.input||{},t.input[r]=e[r])}}],(t=[{key:"destroy",value:function(){this.datasetName=null,this.sumShape=null,this.regionDataset=null,this.query=null,this.standardSummaryFields=null,this.standardFields=null,this.standardStatisticModes=null,this.weightedSummaryFields=null,this.weightedFields=null,this.weightedStatisticModes=null,this.meshType=null,this.resolution=null,this.meshSizeUnit=null,this.type=null,this.output instanceof FV&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof zV&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&rY(e.prototype,t),r&&rY(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function iY(e){"@babel/helpers - typeof";return(iY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function aY(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,sY(n.key),n)}}function sY(e){var t=function(e,t){if("object"!=iY(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=iY(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==iY(t)?t:t+""}function uY(e,t,r){return t=fY(t),function(e,t){if(t&&("object"==iY(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],fY(e).constructor):t.apply(e,r))}function lY(e,t,r,n){var o=cY(fY(1&n?e.prototype:e),t,r);return 2&n&&"function"==typeof o?function(e){return o.apply(r,e)}:o}function cY(){return(cY="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=fY(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function fY(e){return(fY=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pY(e,t){return(pY=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var hY=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=uY(this,t,[e,r])).url=M.urlPathAppend(n.url,"spatialanalyst/summaryregion"),n.CLASS_NAME="SuperMap.SummaryRegionJobsService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pY(e,t)}(t,TV),r=t,(n=[{key:"destroy",value:function(){lY(t,"destroy",this,3)([])}},{key:"getSummaryRegionJobs",value:function(e){return lY(t,"getJobs",this,3)([this.url,e])}},{key:"getSummaryRegionJob",value:function(e,r){return lY(t,"getJobs",this,3)([M.urlPathAppend(this.url,e),r])}},{key:"addSummaryRegionJob",value:function(e,r,n,o){return lY(t,"addJob",this,3)([this.url,e,oY,r,n,o])}}])&&aY(r.prototype,n),o&&aY(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function yY(e){"@babel/helpers - typeof";return(yY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dY(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,mY(n.key),n)}}function mY(e){var t=function(e,t){if("object"!=yY(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=yY(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==yY(t)?t:t+""}var gY=function(){return e=function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasetName="",this.bounds="",this.distance="",this.distanceField="",this.distanceUnit=Fn.METER,this.dissolveField="",this.output=null,this.mappingParameters=null,!t)return this;M.extend(this,t),this.CLASS_NAME="SuperMap.BuffersAnalystJobsParameter"},r=[{key:"toObject",value:function(e,t){for(var r in e)"datasetName"!==r?"output"!==r?(t.analyst=t.analyst||{},"bounds"===r&&e[r]?t.analyst[r]=e[r].toBBOX():t.analyst[r]=e[r],"mappingParameters"===r&&(t.analyst[r]=t.analyst[r]||{},t.analyst.mappingParameters=e[r])):(t.output=t.output||{},t.output=e[r]):(t.input=t.input||{},t.input[r]=e[r])}}],(t=[{key:"destroy",value:function(){this.datasetName=null,this.bounds=null,this.distance=null,this.distanceField=null,this.distanceUnit=null,this.dissolveField=null,this.output instanceof FV&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof zV&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&dY(e.prototype,t),r&&dY(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function vY(e){"@babel/helpers - typeof";return(vY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bY(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,AY(n.key),n)}}function AY(e){var t=function(e,t){if("object"!=vY(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=vY(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==vY(t)?t:t+""}function wY(e,t,r){return t=EY(t),function(e,t){if(t&&("object"==vY(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],EY(e).constructor):t.apply(e,r))}function SY(e,t,r,n){var o=CY(EY(1&n?e.prototype:e),t,r);return 2&n&&"function"==typeof o?function(e){return o.apply(r,e)}:o}function CY(){return(CY="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=EY(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function EY(e){return(EY=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _Y(e,t){return(_Y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var IY=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=wY(this,t,[e,r])).url=M.urlPathAppend(n.url,"spatialanalyst/buffers"),n.CLASS_NAME="SuperMap.BuffersAnalystJobsService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_Y(e,t)}(t,TV),r=t,(n=[{key:"destroy",value:function(){SY(t,"destroy",this,3)([])}},{key:"getBuffersJobs",value:function(e){return SY(t,"getJobs",this,3)([this.url,e])}},{key:"getBuffersJob",value:function(e,r){return SY(t,"getJobs",this,3)([M.urlPathAppend(this.url,e),r])}},{key:"addBuffersJob",value:function(e,r,n,o){return SY(t,"addJob",this,3)([this.url,e,gY,r,n,o])}}])&&bY(r.prototype,n),o&&bY(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function OY(e){"@babel/helpers - typeof";return(OY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xY(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,PY(n.key),n)}}function PY(e){var t=function(e,t){if("object"!=OY(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=OY(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==OY(t)?t:t+""}var kY=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasetName="",this.datasetTopology="",this.tolerance="",this.rule=Un.REGIONNOOVERLAP,this.output=null,this.mappingParameters=null,M.extend(this,t),this.CLASS_NAME="SuperMap.TopologyValidatorJobsParameter")},r=[{key:"toObject",value:function(e,t){for(var r in e)"datasetName"!==r?"output"!==r?(t.analyst=t.analyst||{},t.analyst[r]=e[r],"mappingParameters"===r&&(t.analyst[r]=t.analyst[r]||{},t.analyst.mappingParameters=e[r])):(t.output=t.output||{},t.output=e[r]):(t.input=t.input||{},t.input[r]=e[r])}}],(t=[{key:"destroy",value:function(){this.datasetName=null,this.datasetTopology=null,this.tolerance=null,this.rule=null,this.output instanceof FV&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof zV&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&xY(e.prototype,t),r&&xY(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function TY(e){"@babel/helpers - typeof";return(TY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jY(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,MY(n.key),n)}}function MY(e){var t=function(e,t){if("object"!=TY(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=TY(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==TY(t)?t:t+""}function BY(e,t,r){return t=LY(t),function(e,t){if(t&&("object"==TY(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],LY(e).constructor):t.apply(e,r))}function NY(e,t,r,n){var o=RY(LY(1&n?e.prototype:e),t,r);return 2&n&&"function"==typeof o?function(e){return o.apply(r,e)}:o}function RY(){return(RY="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=LY(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function LY(e){return(LY=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function DY(e,t){return(DY=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var FY=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=BY(this,t,[e,r])).url=M.urlPathAppend(n.url,"spatialanalyst/topologyvalidator"),n.CLASS_NAME="SuperMap.TopologyValidatorJobsService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&DY(e,t)}(t,TV),r=t,(n=[{key:"destroy",value:function(){NY(t,"destroy",this,3)([])}},{key:"getTopologyValidatorJobs",value:function(e){return NY(t,"getJobs",this,3)([this.url,e])}},{key:"getTopologyValidatorJob",value:function(e,r){return NY(t,"getJobs",this,3)([M.urlPathAppend(this.url,e),r])}},{key:"addTopologyValidatorJob",value:function(e,r,n,o){return NY(t,"addJob",this,3)([this.url,e,kY,r,n,o])}}])&&jY(r.prototype,n),o&&jY(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function QY(e){"@babel/helpers - typeof";return(QY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function GY(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,UY(n.key),n)}}function UY(e){var t=function(e,t){if("object"!=QY(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=QY(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==QY(t)?t:t+""}var zY=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasetName="",this.groupField="",this.attributeField="",this.statisticModes="",this.output=null,this.mappingParameters=null,M.extend(this,t),this.CLASS_NAME="SuperMap.SummaryAttributesJobsParameter")},r=[{key:"toObject",value:function(e,t){for(var r in e)"datasetName"!==r?"output"!==r?(t.analyst=t.analyst||{},t.analyst[r]=e[r],"mappingParameters"===r&&(t.analyst[r]=t.analyst[r]||{},t.analyst.mappingParameters=e[r])):(t.output=t.output||{},t.output=e[r]):(t.input=t.input||{},t.input[r]=e[r])}}],(t=[{key:"destroy",value:function(){this.datasetName=null,this.groupField=null,this.attributeField=null,this.statisticModes=null,this.output instanceof FV&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof zV&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&GY(e.prototype,t),r&&GY(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function HY(e){"@babel/helpers - typeof";return(HY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qY(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,VY(n.key),n)}}function VY(e){var t=function(e,t){if("object"!=HY(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=HY(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==HY(t)?t:t+""}function KY(e,t,r){return t=WY(t),function(e,t){if(t&&("object"==HY(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],WY(e).constructor):t.apply(e,r))}function YY(e,t,r,n){var o=JY(WY(1&n?e.prototype:e),t,r);return 2&n&&"function"==typeof o?function(e){return o.apply(r,e)}:o}function JY(){return(JY="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=WY(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function WY(e){return(WY=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function XY(e,t){return(XY=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var ZY=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=KY(this,t,[e,r])).url=M.urlPathAppend(n.url,"spatialanalyst/summaryattributes"),n.CLASS_NAME="SuperMap.SummaryAttributesJobsService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&XY(e,t)}(t,TV),r=t,(n=[{key:"destroy",value:function(){YY(t,"destroy",this,3)([])}},{key:"getSummaryAttributesJobs",value:function(e){return YY(t,"getJobs",this,3)([this.url,e])}},{key:"getSummaryAttributesJob",value:function(e,r){return YY(t,"getJobs",this,3)([M.urlPathAppend(this.url,e),r])}},{key:"addSummaryAttributesJob",value:function(e,r,n,o){return YY(t,"addJob",this,3)([this.url,e,zY,r,n,o])}}])&&qY(r.prototype,n),o&&qY(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function $Y(e){"@babel/helpers - typeof";return($Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eJ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,tJ(n.key),n)}}function tJ(e){var t=function(e,t){if("object"!=$Y(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=$Y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==$Y(t)?t:t+""}var rJ=function(){return e=function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=t,this.options=r||{},this.kernelDensityJobs={},this.summaryMeshJobs={},this.queryJobs={},this.summaryRegionJobs={},this.vectorClipJobs={},this.overlayGeoJobs={},this.buffersJobs={},this.topologyValidatorJobs={},this.summaryAttributesJobs={}},(t=[{key:"getKernelDensityJobs",value:function(e,t){var r=this,n=r._processFormat(t);return new rK(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,format:n}).getKernelDensityJobs(e)}},{key:"getKernelDensityJob",value:function(e,t,r){var n=this,o=n._processFormat(r);return new rK(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:o}).getKernelDensityJob(e,t)}},{key:"addKernelDensityJob",value:function(e,t,r,n){var o=this,i=o._processFormat(n);return new rK(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,format:i}).addKernelDensityJob(e,r,t,function(e){o.kernelDensityJobs[e.id]=e.state})}},{key:"getKernelDensityJobState",value:function(e){return this.kernelDensityJobs[e]}},{key:"getSummaryMeshJobs",value:function(e,t){var r=this,n=r._processFormat(t);return new xK(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,format:n}).getSummaryMeshJobs(e)}},{key:"getSummaryMeshJob",value:function(e,t,r){var n=this,o=n._processFormat(r);return new xK(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:o}).getSummaryMeshJob(e,t)}},{key:"addSummaryMeshJob",value:function(e,t,r,n){var o=this,i=o._processFormat(n);return new xK(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,format:i}).addSummaryMeshJob(e,r,t,function(e){o.summaryMeshJobs[e.id]=e.state})}},{key:"getSummaryMeshJobState",value:function(e){return this.summaryMeshJobs[e]}},{key:"getQueryJobs",value:function(e,t){var r=this,n=r._processFormat(t);return new dK(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,format:n}).getQueryJobs(e)}},{key:"getQueryJob",value:function(e,t,r){var n=this,o=n._processFormat(r);return new dK(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:o}).getQueryJob(e,t)}},{key:"addQueryJob",value:function(e,t,r,n){var o=this,i=o._processFormat(n);return new dK(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,format:i}).addQueryJob(e,r,t,function(e){o.queryJobs[e.id]=e.state})}},{key:"getQueryJobState",value:function(e){return this.queryJobs[e]}},{key:"getSummaryRegionJobs",value:function(e,t){var r=this,n=r._processFormat(t);return new hY(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,format:n}).getSummaryRegionJobs(e)}},{key:"getSummaryRegionJob",value:function(e,t,r){var n=this,o=n._processFormat(r);return new hY(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:o}).getSummaryRegionJob(e,t)}},{key:"addSummaryRegionJob",value:function(e,t,r,n){var o=this,i=o._processFormat(n);return new hY(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,format:i}).addSummaryRegionJob(e,r,t,function(e){o.summaryRegionJobs[e.id]=e.state})}},{key:"getSummaryRegionJobState",value:function(e){return this.summaryRegionJobs[e]}},{key:"getVectorClipJobs",value:function(e,t){var r=this,n=r._processFormat(t);return new GK(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,format:n}).getVectorClipJobs(e)}},{key:"getVectorClipJob",value:function(e,t,r){var n=this,o=n._processFormat(r);return new GK(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:o}).getVectorClipJob(e,t)}},{key:"addVectorClipJob",value:function(e,t,r,n){var o=this,i=o._processFormat(n);return new GK(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,format:i}).addVectorClipJob(e,r,t,function(e){o.vectorClipJobs[e.id]=e.state})}},{key:"getVectorClipJobState",value:function(e){return this.vectorClipJobs[e]}},{key:"getOverlayGeoJobs",value:function(e,t){var r=this,n=r._processFormat(t);return new eY(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,format:n}).getOverlayGeoJobs(e)}},{key:"getOverlayGeoJob",value:function(e,t,r){var n=this,o=n._processFormat(r);return new eY(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:o}).getOverlayGeoJob(e,t)}},{key:"addOverlayGeoJob",value:function(e,t,r,n){var o=this,i=o._processFormat(n);return new eY(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,format:i}).addOverlayGeoJob(e,r,t,function(e){o.overlayGeoJobs[e.id]=e.state})}},{key:"getoverlayGeoJobState",value:function(e){return this.overlayGeoJobs[e]}},{key:"getBuffersJobs",value:function(e,t){var r=this,n=r._processFormat(t);return new IY(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,format:n}).getBuffersJobs(e)}},{key:"getBuffersJob",value:function(e,t,r){var n=this,o=n._processFormat(r);return new IY(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:o}).getBuffersJob(e,t)}},{key:"addBuffersJob",value:function(e,t,r,n){var o=this,i=o._processFormat(n);return new IY(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,format:i}).addBuffersJob(e,r,t,function(e){o.buffersJobs[e.id]=e.state})}},{key:"getBuffersJobState",value:function(e){return this.buffersJobs[e]}},{key:"getTopologyValidatorJobs",value:function(e,t){var r=this,n=r._processFormat(t);return new FY(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,format:n}).getTopologyValidatorJobs(e)}},{key:"getTopologyValidatorJob",value:function(e,t,r){var n=this,o=n._processFormat(r);return new FY(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:o}).getTopologyValidatorJob(e,t)}},{key:"addTopologyValidatorJob",value:function(e,t,r,n){var o=this,i=o._processFormat(n);return new FY(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,format:i}).addTopologyValidatorJob(e,r,t,function(e){o.topologyValidatorJobs[e.id]=e.state})}},{key:"getTopologyValidatorJobState",value:function(e){return this.topologyValidatorJobs[e]}},{key:"getSummaryAttributesJobs",value:function(e,t){var r=this,n=r._processFormat(t);return new ZY(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,format:n}).getSummaryAttributesJobs(e)}},{key:"getSummaryAttributesJob",value:function(e,t,r){var n=this,o=n._processFormat(r);return new ZY(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:o}).getSummaryAttributesJob(e,t)}},{key:"addSummaryAttributesJob",value:function(e,t,r,n){var o=this,i=o._processFormat(n);return new ZY(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,format:i}).addSummaryAttributesJob(e,r,t,function(e){o.summaryAttributesJobs[e.id]=e.state})}},{key:"getSummaryAttributesJobState",value:function(e){return this.summaryAttributesJobs[e]}},{key:"_processFormat",value:function(e){return e||sn.GEOJSON}}])&&eJ(e.prototype,t),r&&eJ(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function nJ(e){"@babel/helpers - typeof";return(nJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oJ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,iJ(n.key),n)}}function iJ(e){var t=function(e,t){if("object"!=nJ(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=nJ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==nJ(t)?t:t+""}function aJ(e,t,r){return t=sJ(t),function(e,t){if(t&&("object"==nJ(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],sJ(e).constructor):t.apply(e,r))}function sJ(e){return(sJ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function uJ(e,t){return(uJ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var lJ=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=aJ(this,t,[e,r]))._processingService=new rJ(e,r),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&uJ(e,t)}(t,Nw),r=t,(n=[{key:"getKernelDensityJobs",value:function(e,t){return this._processingService.getKernelDensityJobs(e,t)}},{key:"getKernelDensityJob",value:function(e,t,r){return this._processingService.getKernelDensityJob(e,t,r)}},{key:"addKernelDensityJob",value:function(e,t,r,n){return e=this._processParams(e),this._processingService.addKernelDensityJob(e,t,r,n)}},{key:"getKernelDensityJobState",value:function(e){return this._processingService.getKernelDensityJobState(e)}},{key:"getSummaryMeshJobs",value:function(e,t){return this._processingService.getSummaryMeshJobs(e,t)}},{key:"getSummaryMeshJob",value:function(e,t,r){return this._processingService.getSummaryMeshJob(e,t,r)}},{key:"addSummaryMeshJob",value:function(e,t,r,n){return e=this._processParams(e),this._processingService.addSummaryMeshJob(e,t,r,n)}},{key:"getSummaryMeshJobState",value:function(e){return this._processingService.getSummaryMeshJobState(e)}},{key:"getQueryJobs",value:function(e,t){return this._processingService.getQueryJobs(e,t)}},{key:"getQueryJob",value:function(e,t,r){return this._processingService.getQueryJob(e,t,r)}},{key:"addQueryJob",value:function(e,t,r,n){return e=this._processParams(e),this._processingService.addQueryJob(e,t,r,n)}},{key:"getQueryJobState",value:function(e){return this._processingService.getQueryJobState(e)}},{key:"getSummaryRegionJobs",value:function(e,t){return this._processingService.getSummaryRegionJobs(e,t)}},{key:"getSummaryRegionJob",value:function(e,t,r){return this._processingService.getSummaryRegionJob(e,t,r)}},{key:"addSummaryRegionJob",value:function(e,t,r,n){return e=this._processParams(e),this._processingService.addSummaryRegionJob(e,t,r,n)}},{key:"getSummaryRegionJobState",value:function(e){return this._processingService.getSummaryRegionJobState(e)}},{key:"getVectorClipJobs",value:function(e,t){return this._processingService.getVectorClipJobs(e,t)}},{key:"getVectorClipJob",value:function(e,t,r){return this._processingService.getVectorClipJob(e,t,r)}},{key:"addVectorClipJob",value:function(e,t,r,n){return e=this._processParams(e),this._processingService.addVectorClipJob(e,t,r,n)}},{key:"getVectorClipJobState",value:function(e){return this._processingService.getVectorClipJobState(e)}},{key:"getOverlayGeoJobs",value:function(e,t){return this._processingService.getOverlayGeoJobs(e,t)}},{key:"getOverlayGeoJob",value:function(e,t,r){return this._processingService.getOverlayGeoJob(e,t,r)}},{key:"addOverlayGeoJob",value:function(e,t,r,n){return e=this._processParams(e),this._processingService.addOverlayGeoJob(e,t,r,n)}},{key:"getoverlayGeoJobState",value:function(e){return this._processingService.getoverlayGeoJobState(e)}},{key:"getBuffersJobs",value:function(e,t){return this._processingService.getBuffersJobs(e,t)}},{key:"getBuffersJob",value:function(e,t,r){return this._processingService.getBuffersJob(e,t,r)}},{key:"addBuffersJob",value:function(e,t,r,n){return e=this._processParams(e),this._processingService.addBuffersJob(e,t,r,n)}},{key:"getBuffersJobState",value:function(e){return this._processingService.getBuffersJobState(e)}},{key:"getTopologyValidatorJobs",value:function(e,t){return this._processingService.getTopologyValidatorJobs(e,t)}},{key:"getTopologyValidatorJob",value:function(e,t,r){return this._processingService.getTopologyValidatorJob(e,t,r)}},{key:"addTopologyValidatorJob",value:function(e,t,r,n){return e=this._processParams(e),this._processingService.addTopologyValidatorJob(e,t,r,n)}},{key:"getTopologyValidatorJobState",value:function(e){return this._processingService.getTopologyValidatorJobState(e)}},{key:"getSummaryAttributesJobs",value:function(e,t){return this._processingService.getSummaryAttributesJobs(e,t)}},{key:"getSummaryAttributesJob",value:function(e,t,r){return this._processingService.getSummaryAttributesJob(e,t,r)}},{key:"addSummaryAttributesJob",value:function(e,t,r,n){return e=this._processParams(e),this._processingService.addSummaryAttributesJob(e,t,r,n)}},{key:"getSummaryAttributesJobState",value:function(e){return this._processingService.getSummaryAttributesJobState(e)}},{key:"_processFormat",value:function(e){return e||sn.GEOJSON}},{key:"_processParams",value:function(e){return e?(e.bounds&&(e.bounds=To.toSuperMapBounds(e.bounds)),e.query&&(e.query=To.toSuperMapBounds(e.query)),e.geometryQuery&&(e.geometryQuery=To.toProcessingParam(e.geometryQuery)),e.geometryClip&&(e.geometryClip=To.toProcessingParam(e.geometryClip)),e):{}}}])&&oJ(r.prototype,n),o&&oJ(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function cJ(e){"@babel/helpers - typeof";return(cJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fJ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,pJ(n.key),n)}}function pJ(e){var t=function(e,t){if("object"!=cJ(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=cJ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==cJ(t)?t:t+""}function hJ(e,t,r){return t=mJ(t),yJ(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],mJ(e).constructor):t.apply(e,r))}function yJ(e,t){if(t&&("object"==cJ(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function dJ(){return(dJ="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=mJ(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function mJ(e){return(mJ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gJ(e,t){return(gJ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var vJ=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=hJ(this,t,[e,r])).returnContent=!1,n.format=sn.GEOJSON,n.returnFeatureWithFieldCaption=!1,r&&M.extend(n,r),n.CLASS_NAME="SuperMap.QueryService",n.url?(r&&r.format&&(n.format=r.format.toUpperCase()),n.url=M.urlPathAppend(n.url,"queryResults"),n):yJ(n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gJ(e,t)}(t,Vw),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=dJ(mJ(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([]);this.returnContent=null,this.format=null}},{key:"processAsync",value:function(e,t){if(e instanceof Sk){var r,n=this,o=null;return n.returnContent=e.returnContent,r=n.getJsonParameters(e),n.returnContent||(o=e.returnCustomResult)&&(n.url=M.urlAppend(n.url,"returnCustomResult="+o)),n.returnFeatureWithFieldCaption=e.returnFeatureWithFieldCaption,n.request({method:"POST",data:r,scope:n,success:t,failure:t})}}},{key:"transformResult",value:function(e,t){e=M.transformResult(e);var r=new uo;if(e&&e.recordsets)for(var n=0,o=e.recordsets,i=o.length;n<i;n++)o[n].features&&(!0===this.returnFeatureWithFieldCaption&&o[n].features.map(function(e){return e.fieldNames=o[n].fieldCaptions,e}),this.format===sn.GEOJSON&&(o[n].features=r.toGeoJSON(o[n].features)));return{result:e,options:t}}},{key:"dataFormat",value:function(){return[sn.GEOJSON,sn.ISERVER,sn.FGB]}},{key:"getQueryParameters",value:function(e){return new Sk({customParams:e.customParams,expectCount:e.expectCount,networkType:e.networkType,queryOption:e.queryOption,queryParams:e.queryParams,startRecord:e.startRecord,prjCoordSys:e.prjCoordSys,holdTime:e.holdTime})}}])&&fJ(r.prototype,n),o&&fJ(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function bJ(e){"@babel/helpers - typeof";return(bJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function AJ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,wJ(n.key),n)}}function wJ(e){var t=function(e,t){if("object"!=bJ(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=bJ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==bJ(t)?t:t+""}function SJ(e,t,r){return t=EJ(t),function(e,t){if(t&&("object"==bJ(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],EJ(e).constructor):t.apply(e,r))}function CJ(){return(CJ="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=EJ(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function EJ(e){return(EJ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _J(e,t){return(_J=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var IJ=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=SJ(this,t,[e=e||{}])).returnContent=!0,r.bounds=null,M.extend(r,e),r.CLASS_NAME="SuperMap.QueryByBoundsParameters",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_J(e,t)}(t,Sk),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=CJ(EJ(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([]);this.returnContent=null,this.bounds&&(this.bounds=null)}}])&&AJ(r.prototype,n),o&&AJ(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function OJ(e){"@babel/helpers - typeof";return(OJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xJ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,PJ(n.key),n)}}function PJ(e){var t=function(e,t){if("object"!=OJ(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=OJ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==OJ(t)?t:t+""}function kJ(e,t,r){return t=jJ(t),function(e,t){if(t&&("object"==OJ(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],jJ(e).constructor):t.apply(e,r))}function TJ(){return(TJ="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=jJ(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function jJ(e){return(jJ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function MJ(e,t){return(MJ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var BJ=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=kJ(this,t,[e,r])).CLASS_NAME="SuperMap.QueryByBoundsService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&MJ(e,t)}(t,vJ),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=TJ(jJ(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"getJsonParameters",value:function(e){if(!(e instanceof IJ))return null;var t,r="",n=e.bounds;return t=this.getQueryParameters(e),r+="'queryMode':'BoundsQuery','queryParameters':",r+=M.toJSON(t),r="{"+(r+=",'bounds': {'rightTop':{'y':"+n.top+",'x':"+n.right+"},'leftBottom':{'y':"+n.bottom+",'x':"+n.left+"}}")+"}"}}])&&xJ(r.prototype,n),o&&xJ(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function NJ(e){"@babel/helpers - typeof";return(NJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function RJ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,LJ(n.key),n)}}function LJ(e){var t=function(e,t){if("object"!=NJ(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=NJ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==NJ(t)?t:t+""}function DJ(e,t,r){return t=QJ(t),function(e,t){if(t&&("object"==NJ(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],QJ(e).constructor):t.apply(e,r))}function FJ(){return(FJ="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=QJ(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function QJ(e){return(QJ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function GJ(e,t){return(GJ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var UJ=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=DJ(this,t,[e=e||{}])).geometry=null,r.isNearest=null,r.returnContent=!0,M.extend(r,e),r.CLASS_NAME="SuperMap.QueryByDistanceParameters",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&GJ(e,t)}(t,Sk),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=FJ(QJ(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([]);var a=this;a.returnContent=null,a.distance=null,a.isNearest=null,a.geometry&&(a.geometry.destroy(),a.geometry=null)}}])&&RJ(r.prototype,n),o&&RJ(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function zJ(e){"@babel/helpers - typeof";return(zJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function HJ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,qJ(n.key),n)}}function qJ(e){var t=function(e,t){if("object"!=zJ(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=zJ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==zJ(t)?t:t+""}function VJ(e,t,r){return t=YJ(t),function(e,t){if(t&&("object"==zJ(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],YJ(e).constructor):t.apply(e,r))}function KJ(){return(KJ="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=YJ(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function YJ(e){return(YJ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function JJ(e,t){return(JJ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var WJ=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=VJ(this,t,[e,r])).CLASS_NAME="SuperMap.QueryByDistanceService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&JJ(e,t)}(t,vJ),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=KJ(YJ(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"getJsonParameters",value:function(e){if(e instanceof UJ){var t="",r=this.getQueryParameters(e),n=$n.fromGeometry(e.geometry);return t+=e.isNearest?"'queryMode':'FindNearest','queryParameters':":"'queryMode':'DistanceQuery','queryParameters':",t+=M.toJSON(r),t="{"+(t+=",'geometry':"+M.toJSON(n)+",'distance':"+e.distance)+"}"}}}])&&HJ(r.prototype,n),o&&HJ(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function XJ(e){"@babel/helpers - typeof";return(XJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ZJ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,$J(n.key),n)}}function $J(e){var t=function(e,t){if("object"!=XJ(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=XJ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==XJ(t)?t:t+""}function eW(e,t,r){return t=rW(t),function(e,t){if(t&&("object"==XJ(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],rW(e).constructor):t.apply(e,r))}function tW(){return(tW="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=rW(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function rW(e){return(rW=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nW(e,t){return(nW=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var oW=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=eW(this,t,[e=e||{}])).returnContent=!0,M.extend(r,e),r.CLASS_NAME="SuperMap.QueryBySQLParameters",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nW(e,t)}(t,Sk),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=tW(rW(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([]);this.returnContent=null}}])&&ZJ(r.prototype,n),o&&ZJ(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function iW(e){"@babel/helpers - typeof";return(iW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function aW(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,sW(n.key),n)}}function sW(e){var t=function(e,t){if("object"!=iW(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=iW(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==iW(t)?t:t+""}function uW(e,t,r){return t=cW(t),function(e,t){if(t&&("object"==iW(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],cW(e).constructor):t.apply(e,r))}function lW(){return(lW="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=cW(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function cW(e){return(cW=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fW(e,t){return(fW=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var pW=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=uW(this,t,[e,r])).CLASS_NAME="SuperMap.QueryBySQLService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fW(e,t)}(t,vJ),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=lW(cW(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"getJsonParameters",value:function(e){if(e instanceof oW){var t,r="";return t=this.getQueryParameters(e),r+="'queryMode':'SqlQuery','queryParameters':",r="{"+(r+=M.toJSON(t))+"}"}}}])&&aW(r.prototype,n),o&&aW(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function hW(e){"@babel/helpers - typeof";return(hW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yW(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,dW(n.key),n)}}function dW(e){var t=function(e,t){if("object"!=hW(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=hW(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==hW(t)?t:t+""}function mW(e,t,r){return t=vW(t),function(e,t){if(t&&("object"==hW(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],vW(e).constructor):t.apply(e,r))}function gW(){return(gW="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=vW(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function vW(e){return(vW=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bW(e,t){return(bW=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var AW=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=mW(this,t,[e=e||{}])).returnContent=!0,r.geometry=null,r.spatialQueryMode=fn.INTERSECT,M.extend(r,e),r.CLASS_NAME="SuperMap.QueryByGeometryParameters",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bW(e,t)}(t,Sk),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=gW(vW(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([]);this.returnContent=null,this.geometry=null,this.spatialQueryMode=null}}])&&yW(r.prototype,n),o&&yW(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function wW(e){"@babel/helpers - typeof";return(wW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function SW(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,CW(n.key),n)}}function CW(e){var t=function(e,t){if("object"!=wW(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=wW(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==wW(t)?t:t+""}function EW(e,t,r){return t=IW(t),function(e,t){if(t&&("object"==wW(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],IW(e).constructor):t.apply(e,r))}function _W(){return(_W="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=IW(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function IW(e){return(IW=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function OW(e,t){return(OW=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var xW=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=EW(this,t,[e,r])).CLASS_NAME="SuperMap.QueryByGeometryService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&OW(e,t)}(t,vJ),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=_W(IW(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"getJsonParameters",value:function(e){if(e instanceof AW){var t,r="",n=e.geometry,o=$n.fromGeometry(n);return t=this.getQueryParameters(e),r+="'queryMode':'SpatialQuery','queryParameters':",r="{"+(r+=M.toJSON(t)+",'geometry':"+M.toJSON(o)+",'spatialQueryMode':"+M.toJSON(e.spatialQueryMode))+"}"}}}])&&SW(r.prototype,n),o&&SW(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function PW(e){"@babel/helpers - typeof";return(PW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kW(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,TW(n.key),n)}}function TW(e){var t=function(e,t){if("object"!=PW(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=PW(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==PW(t)?t:t+""}var jW=function(){return e=function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=r||{},this.url=t},(t=[{key:"queryByBounds",value:function(e,t,r){var n=this;return new BJ(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(e,t)}},{key:"queryByDistance",value:function(e,t,r){var n=this;return new WJ(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:r}).processAsync(e,t)}},{key:"queryBySQL",value:function(e,t,r){var n=this;return new pW(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:r}).processAsync(e,t)}},{key:"queryByGeometry",value:function(e,t,r){var n=this;return new xW(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:r}).processAsync(e,t)}},{key:"_processFormat",value:function(e){return e||sn.GEOJSON}}])&&kW(e.prototype,t),r&&kW(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function MW(e){"@babel/helpers - typeof";return(MW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function BW(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,NW(n.key),n)}}function NW(e){var t=function(e,t){if("object"!=MW(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=MW(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==MW(t)?t:t+""}function RW(e,t,r){return t=LW(t),function(e,t){if(t&&("object"==MW(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],LW(e).constructor):t.apply(e,r))}function LW(e){return(LW=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function DW(e,t){return(DW=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var FW=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=RW(this,t,[e,r]))._queryService=new jW(e,r),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&DW(e,t)}(t,Nw),r=t,(n=[{key:"queryByBounds",value:function(e,t,r){return e=this._processParams(e),this._queryService.queryByBounds(e,t,r)}},{key:"queryByDistance",value:function(e,t,r){return e=this._processParams(e),this._queryService.queryByDistance(e,t,r)}},{key:"queryBySQL",value:function(e,t,r){return e=this._processParams(e),this._queryService.queryBySQL(e,t,r)}},{key:"queryByGeometry",value:function(e,t,r){return e=this._processParams(e),this._queryService.queryByGeometry(e,t,r)}},{key:"_processParams",value:function(e){return e?(e.returnContent=null==e.returnContent||e.returnContent,e.queryParams&&!To.isArray(e.queryParams)&&(e.queryParams=[e.queryParams]),e.bounds&&(e.bounds instanceof Array&&(e.bounds=new We(e.bounds[0],e.bounds[1],e.bounds[2],e.bounds[3])),e.bounds instanceof o().LngLatBounds&&(e.bounds=new We(e.bounds.getSouthWest().lng,e.bounds.getSouthWest().lat,e.bounds.getNorthEast().lng,e.bounds.getNorthEast().lat))),e.geometry&&(e.geometry instanceof o().LngLat&&(e.geometry=new ot(e.geometry.lng,e.geometry.lat)),e.geometry instanceof o().Point&&(e.geometry=new ot(e.geometry.x,e.geometry.y)),e.geometry instanceof o().LngLatBounds&&(e.geometry=To.toSuperMapPolygon(e.geometry)),e.geometry instanceof b||(e.geometry=To.toSuperMapGeometry(e.geometry))),e):{}}}])&&BW(r.prototype,n),i&&BW(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,i}();function QW(e){"@babel/helpers - typeof";return(QW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function GW(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,UW(n.key),n)}}function UW(e){var t=function(e,t){if("object"!=QW(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=QW(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==QW(t)?t:t+""}function zW(e,t,r){return t=qW(t),function(e,t){if(t&&("object"==QW(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],qW(e).constructor):t.apply(e,r))}function HW(){return(HW="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=qW(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function qW(e){return(qW=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function VW(e,t){return(VW=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var KW=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=zW(this,t,[e,r])).format=r&&r.format||sn.GEOJSON,n.CLASS_NAME="SuperMap.SpatialAnalystBase",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&VW(e,t)}(t,Vw),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=HW(qW(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([]),this.format=null}},{key:"transformResult",value:function(e,t){var r;if((e=M.transformResult(e))&&this.format===sn.GEOJSON&&"function"==typeof this.toGeoJSONResult)if(M.isArray(e)){for(var n=0;n<e.length;n++)e[n]=this.toGeoJSONResult(e[n]);r=e}else r=this.toGeoJSONResult(e);return r||(r=e),{result:r,options:t}}},{key:"toGeoJSONResult",value:function(e){if(!e)return null;e.result&&e.result.resultGeometry&&(e=e.result);var t=new uo;if(e.recordsets)for(var r=0,n=e.recordsets,o=n.length;r<o;r++)n[r].features&&(n[r].features=t.toGeoJSON(n[r].features));else e.recordset&&e.recordset.features&&(e.recordset.features=t.toGeoJSON(e.recordset.features));return e.resultGeometry&&(e.resultGeometry=t.toGeoJSON(e.resultGeometry)),e.regions&&(e.regions=t.toGeoJSON(e.regions)),e}}])&&GW(r.prototype,n),o&&GW(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function YW(e){"@babel/helpers - typeof";return(YW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function JW(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,WW(n.key),n)}}function WW(e){var t=function(e,t){if("object"!=YW(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=YW(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==YW(t)?t:t+""}var XW=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dataset=null,this.targetDatasourceName=null,this.totalGridName=null,this.diffuseDatasetGridName=null,this.durationDatasetGridName=null,this.directDatasetGridName=null,this.latitude=null,this.timeMode="MULTIDAYS",this.dayStart=null,this.dayEnd=null,this.hourStart=null,this.hourEnd=null,this.transmittance=null,this.hourInterval=null,this.dayInterval=null,this.deleteExistResultDataset=!1,M.extend(this,t),this.CLASS_NAME="SuperMap.AreaSolarRadiationParameters"},r=[{key:"toObject",value:function(e,t){var r={};for(var n in e){if("dataset"!==n)"latitude"===n||"timeMode"===n||"dayStart"===n||("dayEnd"===n||"hourStart"===n||"hourEnd"===n)||("transmittance"===n||"hourInterval"===n||"dayInterval"===n)?r[n]=e[n]:t[n]=e[n]}t.parameter=r}}],(t=[{key:"destroy",value:function(){var e=this;e.dataset=null,e.zFactor=1,e.averageCurvatureName=null,e.profileCurvatureName=null,e.planCurvatureName=null,e.deleteExistResultDataset=!0}}])&&JW(e.prototype,t),r&&JW(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function ZW(e){"@babel/helpers - typeof";return(ZW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $W(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,eX(n.key),n)}}function eX(e){var t=function(e,t){if("object"!=ZW(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ZW(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ZW(t)?t:t+""}function tX(e,t,r){return t=nX(t),function(e,t){if(t&&("object"==ZW(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],nX(e).constructor):t.apply(e,r))}function rX(){return(rX="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=nX(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function nX(e){return(nX=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oX(e,t){return(oX=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var iX=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=tX(this,t,[e,r])).CLASS_NAME="SuperMap.AreaSolarRadiationService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oX(e,t)}(t,KW),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=rX(nX(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"processAsync",value:function(e,t){if(e instanceof XW){var r=this,n={};e instanceof XW&&(r.url=M.urlPathAppend(r.url,"datasets/".concat(e.dataset,"/solarradiation"))),r.url=M.urlAppend(r.url,"returnContent=true"),XW.toObject(e,n);var o=M.toJSON(n);return r.request({method:"POST",data:o,scope:r,success:t,failure:t})}}}])&&$W(r.prototype,n),o&&$W(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function aX(e){"@babel/helpers - typeof";return(aX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sX(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,uX(n.key),n)}}function uX(e){var t=function(e,t){if("object"!=aX(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=aX(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==aX(t)?t:t+""}var lX=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.exp=null,this.value=100,M.extend(this,t),this.CLASS_NAME="SuperMap.BufferDistance"},(t=[{key:"destroy",value:function(){this.exp=null,this.value=null}}])&&sX(e.prototype,t),r&&sX(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function cX(e){"@babel/helpers - typeof";return(cX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fX(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,pX(n.key),n)}}function pX(e){var t=function(e,t){if("object"!=cX(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=cX(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==cX(t)?t:t+""}var hX=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.endType=_n.FLAT,this.leftDistance=new lX,this.rightDistance=new lX,this.semicircleLineSegment=4,this.radiusUnit=yn.METER,t&&M.extend(this,t),this.CLASS_NAME="SuperMap.BufferSetting"},(t=[{key:"destroy",value:function(){var e=this;e.endType=null,e.leftDistance&&(e.leftDistance.destroy(),e.leftDistance=null),e.rightDistance&&(e.rightDistance.destroy(),e.rightDistance=null),e.semicircleLineSegment=null,e.radiusUnit=null}}])&&fX(e.prototype,t),r&&fX(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function yX(e){"@babel/helpers - typeof";return(yX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dX(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,mX(n.key),n)}}function mX(e){var t=function(e,t){if("object"!=yX(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=yX(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==yX(t)?t:t+""}var gX=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);this.bufferSetting=new hX,M.extend(this,t),this.CLASS_NAME="SuperMap.BufferAnalystParameters"},(t=[{key:"destroy",value:function(){this.bufferSetting&&(this.bufferSetting.destroy(),this.bufferSetting=null)}}])&&dX(e.prototype,t),r&&dX(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function vX(e){"@babel/helpers - typeof";return(vX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bX(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,AX(n.key),n)}}function AX(e){var t=function(e,t){if("object"!=vX(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=vX(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==vX(t)?t:t+""}var wX=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.expectCount=1e3,this.dataset=null,this.dataReturnMode=kn.RECORDSET_ONLY,this.deleteExistResultDataset=!0,M.extend(this,t),this.CLASS_NAME="SuperMap.DataReturnOption"},(t=[{key:"destroy",value:function(){this.expectCount=null,this.dataset=null,this.dataReturnMode=null,this.deleteExistResultDataset=null}}])&&bX(e.prototype,t),r&&bX(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function SX(e){"@babel/helpers - typeof";return(SX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function CX(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,EX(n.key),n)}}function EX(e){var t=function(e,t){if("object"!=SX(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=SX(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==SX(t)?t:t+""}function _X(e,t,r){return t=OX(t),function(e,t){if(t&&("object"==SX(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],OX(e).constructor):t.apply(e,r))}function IX(){return(IX="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=OX(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function OX(e){return(OX=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xX(e,t){return(xX=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var PX=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=_X(this,t,[e])).dataset=null,r.filterQueryParameter=new Fj,r.resultSetting=new wX,r.isAttributeRetained=!0,r.isUnion=!1,M.extend(r,e),r.CLASS_NAME="SuperMap.DatasetBufferAnalystParameters",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xX(e,t)}(t,gX),r=t,n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=IX(OX(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([]);var a=this;a.dataset=null,a.filterQueryParameter&&(a.filterQueryParameter.destroy(),a.filterQueryParameter=null),a.resultSetting&&(a.resultSetting.destroy(),a.resultSetting=null),a.isAttributeRetained=null,a.isUnion=null}}],o=[{key:"toObject",value:function(e,t){for(var r in e)if("bufferSetting"===r)e.bufferSetting.radiusUnit=e.bufferSetting.radiusUnit.toUpperCase(),t.bufferAnalystParameter=e.bufferSetting;else if("resultSetting"===r)t.dataReturnOption=e.resultSetting;else{if("dataset"===r)continue;t[r]=e[r]}}}],n&&CX(r.prototype,n),o&&CX(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function kX(e){"@babel/helpers - typeof";return(kX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function TX(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,jX(n.key),n)}}function jX(e){var t=function(e,t){if("object"!=kX(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=kX(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==kX(t)?t:t+""}function MX(e,t,r){return t=NX(t),function(e,t){if(t&&("object"==kX(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],NX(e).constructor):t.apply(e,r))}function BX(){return(BX="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=NX(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function NX(e){return(NX=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function RX(e,t){return(RX=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var LX=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=MX(this,t,[e])).sourceGeometry=null,r.sourceGeometrySRID=null,e&&M.extend(r,e),r.CLASS_NAME=" SuperMap.GeometryBufferAnalystParameters",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&RX(e,t)}(t,gX),r=t,n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=BX(NX(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([]);this.sourceGeometry&&(this.sourceGeometry.destroy(),this.sourceGeometry=null)}}],o=[{key:"toObject",value:function(e,t){for(var r in e)if("bufferSetting"===r){var n={};for(var o in e.bufferSetting)n[o]=e.bufferSetting[o];t.analystParameter=n}else"sourceGeometry"===r?t.sourceGeometry=$n.fromGeometry(e.sourceGeometry):t[r]=e[r]}}],n&&TX(r.prototype,n),o&&TX(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function DX(e){"@babel/helpers - typeof";return(DX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function FX(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,QX(n.key),n)}}function QX(e){var t=function(e,t){if("object"!=DX(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=DX(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==DX(t)?t:t+""}function GX(e,t,r){return t=zX(t),function(e,t){if(t&&("object"==DX(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],zX(e).constructor):t.apply(e,r))}function UX(){return(UX="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=zX(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function zX(e){return(zX=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function HX(e,t){return(HX=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var qX=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=GX(this,t,[e,r])).mode=null,r&&M.extend(n,r),n.CLASS_NAME="SuperMap.BufferAnalystService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&HX(e,t)}(t,KW),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=UX(zX(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([]),this.mode=null}},{key:"processAsync",value:function(e,t){var r={},n=this;e instanceof PX?(n.mode="datasets",n.url=M.urlPathAppend(n.url,"datasets/"+e.dataset+"/buffer"),PX.toObject(e,r)):e instanceof LX&&(n.mode="geometry",n.url=M.urlPathAppend(n.url,"geometry/buffer"),LX.toObject(e,r));var o=M.toJSON(r);return this.returnContent=!0,n.request({method:"POST",data:o,scope:n,success:t,failure:t})}},{key:"dataFormat",value:function(){return[sn.GEOJSON,sn.ISERVER,sn.FGB]}}])&&FX(r.prototype,n),o&&FX(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function VX(e){"@babel/helpers - typeof";return(VX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function KX(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,YX(n.key),n)}}function YX(e){var t=function(e,t){if("object"!=VX(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=VX(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==VX(t)?t:t+""}var JX=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dataset=null,this.bounds=null,this.fieldName=null,this.resultGridDatasetResolution=null,this.searchRadius=null,this.targetDatasource=null,this.resultGridName=null,this.deleteExistResultDataset=!1,M.extend(this,t),this.CLASS_NAME="SuperMap.DensityKernelAnalystParameters"},r=[{key:"toObject",value:function(e,t){for(var r in e)"dataset"!==r&&(t[r]=e[r])}}],(t=[{key:"destroy",value:function(){var e=this;e.dataset=null,e.bounds=null,e.fieldName=null,e.resultGridDatasetResolution=null,e.searchRadius=null,e.targetDatasource=null,e.resultGridName=null,e.deleteExistResultDataset=null}}])&&KX(e.prototype,t),r&&KX(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function WX(e){"@babel/helpers - typeof";return(WX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function XX(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ZX(n.key),n)}}function ZX(e){var t=function(e,t){if("object"!=WX(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=WX(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==WX(t)?t:t+""}function $X(e,t,r){return t=tZ(t),function(e,t){if(t&&("object"==WX(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],tZ(e).constructor):t.apply(e,r))}function eZ(){return(eZ="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=tZ(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function tZ(e){return(tZ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rZ(e,t){return(rZ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var nZ=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=$X(this,t,[e,r])).mode=null,r&&M.extend(n,r),n.CLASS_NAME="SuperMap.DensityAnalystService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rZ(e,t)}(t,KW),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=eZ(tZ(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([]),this.mode=null}},{key:"processAsync",value:function(e,t){var r=this,n=new Object;e instanceof JX&&(r.url=M.urlPathAppend(r.url,"datasets/"+e.dataset+"/densityanalyst/kernel"),r.mode="kernel"),JX.toObject(e,n);var o=M.toJSON(n);return r.url=M.urlAppend(r.url,"returnContent=true"),r.request({method:"POST",data:o,scope:r,success:t,failure:t})}}])&&XX(r.prototype,n),o&&XX(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function oZ(e){"@babel/helpers - typeof";return(oZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function iZ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,aZ(n.key),n)}}function aZ(e){var t=function(e,t){if("object"!=oZ(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=oZ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==oZ(t)?t:t+""}var sZ=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.routeTable=null,this.routeIDField=null,this.attributeFilter=null,this.eventTable=null,this.eventRouteIDField=null,this.measureField=null,this.measureStartField=null,this.measureEndField=null,this.measureOffsetField=null,this.errorInfoField=null,this.retainedFields=null,this.dataReturnOption=null,t&&M.extend(this,t),this.CLASS_NAME="SuperMap.GenerateSpatialDataParameters"},(t=[{key:"destroy",value:function(){var e=this;e.routeTable&&(e.routeTable=null),e.routeIDField=null,e.attributeFilter=null,e.eventTable=null,e.eventRouteIDField=null,e.measureField=null,e.measureStartField=null,e.measureEndField=null,e.measureOffsetField=null,e.errorInfoField=null,e.dataReturnOption&&(e.dataReturnOption.destroy(),e.dataReturnOption=null)}}])&&iZ(e.prototype,t),r&&iZ(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function uZ(e){"@babel/helpers - typeof";return(uZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lZ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,cZ(n.key),n)}}function cZ(e){var t=function(e,t){if("object"!=uZ(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=uZ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==uZ(t)?t:t+""}function fZ(e,t,r){return t=hZ(t),function(e,t){if(t&&("object"==uZ(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],hZ(e).constructor):t.apply(e,r))}function pZ(){return(pZ="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=hZ(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function hZ(e){return(hZ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yZ(e,t){return(yZ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var dZ=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=fZ(this,t,[e,r])).CLASS_NAME="SuperMap.GenerateSpatialDataService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yZ(e,t)}(t,KW),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=pZ(hZ(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"processAsync",value:function(e,t){if(e instanceof sZ){var r;return r=this.getJsonParameters(e),this.request({method:"POST",data:r,scope:this,success:t,failure:t})}}},{key:"getJsonParameters",value:function(e){var t="datasets/"+e.routeTable+"/linearreferencing/generatespatialdata";return this.url=M.urlPathAppend(this.url,t),this.url=M.urlAppend(this.url,"returnContent=true"),M.toJSON(e)}}])&&lZ(r.prototype,n),o&&lZ(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function mZ(e){"@babel/helpers - typeof";return(mZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gZ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,vZ(n.key),n)}}function vZ(e){var t=function(e,t){if("object"!=mZ(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=mZ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==mZ(t)?t:t+""}var bZ=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dataset=null,this.sourceFilter=null,this.referenceFilter=null,this.spatialRelationType=null,this.isBorderInside=null,this.returnFeature=null,this.returnGeoRelatedOnly=null,this.startRecord=0,this.expectCount=500,t&&M.extend(this,t),this.CLASS_NAME="SuperMap.GeoRelationAnalystParameters"},(t=[{key:"destroy",value:function(){var e=this;e.sourceFilter&&e.sourceFilter.destroy(),e.sourceFilter=null,e.referenceFilter&&e.referenceFilter.destroy(),e.referenceFilter=null,e.dataset=null,e.spatialRelationType=null,e.isBorderInside=null,e.returnFeature=null,e.returnGeoRelatedOnly=null,e.startRecord=null,e.expectCount=null}}])&&gZ(e.prototype,t),r&&gZ(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function AZ(e){"@babel/helpers - typeof";return(AZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wZ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,SZ(n.key),n)}}function SZ(e){var t=function(e,t){if("object"!=AZ(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=AZ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==AZ(t)?t:t+""}function CZ(e,t,r){return t=_Z(t),function(e,t){if(t&&("object"==AZ(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],_Z(e).constructor):t.apply(e,r))}function EZ(){return(EZ="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=_Z(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function _Z(e){return(_Z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function IZ(e,t){return(IZ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var OZ=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=CZ(this,t,[e,r])).CLASS_NAME="SuperMap.GeoRelationAnalystService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&IZ(e,t)}(t,KW),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=EZ(_Z(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"processAsync",value:function(e,t){if(e instanceof bZ){var r=this;r.url=M.urlPathAppend(r.url,"datasets/"+e.dataset+"/georelation");var n=M.toJSON(e);return r.url=M.urlAppend(r.url,"returnContent=true"),r.request({method:"POST",data:n,scope:r,success:t,failure:t})}}}])&&wZ(r.prototype,n),o&&wZ(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function xZ(e){"@babel/helpers - typeof";return(xZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function PZ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,kZ(n.key),n)}}function kZ(e){var t=function(e,t){if("object"!=xZ(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=xZ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==xZ(t)?t:t+""}var TZ=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.bounds=null,this.searchRadius=0,this.zValueFieldName=null,this.zValueScale=1,this.resolution=null,this.filterQueryParameter=null,this.outputDatasetName=null,this.outputDatasourceName=null,this.pixelFormat=null,this.dataset=null,this.inputPoints=null,this.InterpolationAnalystType="dataset",this.clipParam=null,M.extend(this,t),this.CLASS_NAME="SuperMap.InterpolationAnalystParameters")},r=[{key:"toObject",value:function(e,t){for(var r in e)if("inputPoints"===r&&"geometry"===e.InterpolationAnalystType){for(var n=[],o=0;o<e.inputPoints.length;o++){var i=e.inputPoints[o],a={x:i.x,y:i.y,z:i.tag};n.push(a)}t[r]=n}else t[r]=e[r]}}],(t=[{key:"destroy",value:function(){var e=this;e.bounds=null,e.searchRadius=null,e.zValueFieldName=null,e.zValueScale=null,e.resolution=null,e.filterQueryParameter=null,e.outputDatasetName=null,e.pixelFormat=null}}])&&PZ(e.prototype,t),r&&PZ(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function jZ(e){"@babel/helpers - typeof";return(jZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function MZ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,BZ(n.key),n)}}function BZ(e){var t=function(e,t){if("object"!=jZ(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=jZ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==jZ(t)?t:t+""}function NZ(e,t,r){return t=LZ(t),function(e,t){if(t&&("object"==jZ(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],LZ(e).constructor):t.apply(e,r))}function RZ(){return(RZ="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=LZ(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function LZ(e){return(LZ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function DZ(e,t){return(DZ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var FZ=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=NZ(this,t,[e])).smooth=.1,r.tension=40,r.searchMode=null,r.expectedCount=12,r.maxPointCountForInterpolation=200,r.maxPointCountInNode=50,e&&M.extend(r,e),r.CLASS_NAME="SuperMap.InterpolationRBFAnalystParameters",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&DZ(e,t)}(t,TZ),r=t,n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=RZ(LZ(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([]);var a=this;a.smooth=null,a.tension=null,a.searchMode=null,a.expectedCount=null,a.maxPointCountForInterpolation=null,a.maxPointCountInNode=null}}],o=[{key:"toObject",value:function(e,t){for(var r in e)t[r]=e[r]}}],n&&MZ(r.prototype,n),o&&MZ(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function QZ(e){"@babel/helpers - typeof";return(QZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function GZ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,UZ(n.key),n)}}function UZ(e){var t=function(e,t){if("object"!=QZ(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=QZ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==QZ(t)?t:t+""}function zZ(e,t,r){return t=qZ(t),function(e,t){if(t&&("object"==QZ(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],qZ(e).constructor):t.apply(e,r))}function HZ(){return(HZ="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=qZ(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function qZ(e){return(qZ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function VZ(e,t){return(VZ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var KZ=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=zZ(this,t,[e]),e&&M.extend(r,e),r.CLASS_NAME="SuperMap.InterpolationDensityAnalystParameters",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&VZ(e,t)}(t,TZ),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=HZ(qZ(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}}])&&GZ(r.prototype,n),o&&GZ(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function YZ(e){"@babel/helpers - typeof";return(YZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function JZ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,WZ(n.key),n)}}function WZ(e){var t=function(e,t){if("object"!=YZ(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=YZ(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==YZ(t)?t:t+""}function XZ(e,t,r){return t=$Z(t),function(e,t){if(t&&("object"==YZ(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],$Z(e).constructor):t.apply(e,r))}function ZZ(){return(ZZ="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=$Z(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function $Z(e){return($Z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function e$(e,t){return(e$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var t$=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=XZ(this,t,[e])).power=2,r.searchMode=null,r.expectedCount=12,e&&M.extend(r,e),r.CLASS_NAME="SuperMap.InterpolationIDWAnalystParameters",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&e$(e,t)}(t,TZ),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=ZZ($Z(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([]);this.power=null,this.searchMode=null,this.expectedCount=null}}])&&JZ(r.prototype,n),o&&JZ(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function r$(e){"@babel/helpers - typeof";return(r$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n$(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,o$(n.key),n)}}function o$(e){var t=function(e,t){if("object"!=r$(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=r$(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r$(t)?t:t+""}var i$=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.clipRegion=null,this.createResultDataset=!1,this.resultDatasetName=null,this.resultDatasourceName=null,this.returnResultRegion=!0,M.extend(this,t),this.CLASS_NAME="SuperMap.ThiessenAnalystParameters")},(t=[{key:"destroy",value:function(){var e=this;e.clipRegion&&(e.clipRegion.destroy(),e.clipRegion=null),e.createResultDataset=null,e.resultDatasetName=null,e.resultDatasourceName=null,e.returnResultRegion=null}}])&&n$(e.prototype,t),r&&n$(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function a$(e){"@babel/helpers - typeof";return(a$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s$(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,u$(n.key),n)}}function u$(e){var t=function(e,t){if("object"!=a$(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=a$(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a$(t)?t:t+""}function l$(e,t,r){return t=f$(t),function(e,t){if(t&&("object"==a$(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],f$(e).constructor):t.apply(e,r))}function c$(){return(c$="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=f$(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function f$(e){return(f$=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p$(e,t){return(p$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var h$=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=l$(this,t,[e])).type=null,r.mean=null,r.angle=0,r.nugget=0,r.range=0,r.sill=0,r.variogramMode=Bn.SPHERICAL,r.exponent=Nn.EXP1,r.searchMode=null,r.expectedCount=12,r.maxPointCountForInterpolation=200,r.maxPointCountInNode=50,e&&M.extend(r,e),r.CLASS_NAME="SuperMap.InterpolationKrigingAnalystParameters",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p$(e,t)}(t,TZ),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=c$(f$(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([]);var a=this;a.type=null,a.mean=null,a.angle=null,a.nugget=null,a.range=null,a.sill=null,a.variogramMode=null,a.exponent=null,a.searchMode=null,a.expectedCount=null,a.maxPointCountForInterpolation=null,a.maxPointCountInNode=null}}])&&s$(r.prototype,n),o&&s$(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function y$(e){"@babel/helpers - typeof";return(y$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d$(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,m$(n.key),n)}}function m$(e){var t=function(e,t){if("object"!=y$(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=y$(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==y$(t)?t:t+""}function g$(e,t,r){return t=b$(t),function(e,t){if(t&&("object"==y$(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],b$(e).constructor):t.apply(e,r))}function v$(){return(v$="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=b$(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function b$(e){return(b$=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A$(e,t){return(A$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var w$=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=g$(this,t,[e,r])).mode=null,r&&M.extend(n,r),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A$(e,t)}(t,KW),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=v$(b$(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([]),this.mode=null,this.CLASS_NAME="SuperMap.InterpolationAnalystService"}},{key:"processAsync",value:function(e,t){var r={},n=this;e instanceof KZ?(n.mode="Density","geometry"===e.InterpolationAnalystType?n.url=M.urlPathAppend(n.url,"geometry/interpolation/density"):n.url=M.urlPathAppend(n.url,"datasets/"+e.dataset+"/interpolation/density")):e instanceof t$?(n.mode="IDW","geometry"===e.InterpolationAnalystType?n.url=M.urlPathAppend(n.url,"geometry/interpolation/idw"):n.url=M.urlPathAppend(n.url,"datasets/"+e.dataset+"/interpolation/idw")):e instanceof FZ?(n.mode="RBF","geometry"===e.InterpolationAnalystType?n.url=M.urlPathAppend(n.url,"geometry/interpolation/rbf"):n.url=M.urlPathAppend(n.url,"datasets/"+e.dataset+"/interpolation/rbf")):e instanceof h$&&(n.mode="Kriging","geometry"===e.InterpolationAnalystType?n.url=M.urlPathAppend(n.url,"geometry/interpolation/kriging"):n.url=M.urlPathAppend(n.url,"datasets/"+e.dataset+"/interpolation/kriging")),TZ.toObject(e,r);var o=M.toJSON(r);return n.url=M.urlAppend(n.url,"returnContent=true"),n.request({method:"POST",data:o,scope:n,success:t,failure:t})}}])&&d$(r.prototype,n),o&&d$(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function S$(e){"@babel/helpers - typeof";return(S$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C$(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,E$(n.key),n)}}function E$(e){var t=function(e,t){if("object"!=S$(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=S$(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==S$(t)?t:t+""}var _$=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.dataset=null,this.extractRegion=null,this.expression=null,this.isZip=!1,this.ignoreNoValue=!1,this.targetDatasource=null,this.resultGridName=null,this.deleteExistResultDataset=!1,M.extend(this,t),this.CLASS_NAME="SuperMap.MathExpressionAnalysisParameters")},r=[{key:"toObject",value:function(e,t){for(var r in e)if("dataset"!==r&&(t[r]=e[r]),"extractRegion"===r&&e[r]){for(var n=e[r].components[0].components,o={},i=[],a=n.length,s=0;s<a-1;s++){var u={};u.x=n[s].x,u.y=n[s].y,i.push(u)}o.points=i,o.type="REGION",t[r]=o}}}],(t=[{key:"destroy",value:function(){var e=this;e.dataset=null,e.bounds=null,e.expression=null,e.isZip=!0,e.ignoreNoValue=!0,e.targetDatasource=null,e.resultGridName=null,e.deleteExistResultDataset=null}}])&&C$(e.prototype,t),r&&C$(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function I$(e){"@babel/helpers - typeof";return(I$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O$(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,x$(n.key),n)}}function x$(e){var t=function(e,t){if("object"!=I$(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=I$(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==I$(t)?t:t+""}function P$(e,t,r){return t=T$(t),function(e,t){if(t&&("object"==I$(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],T$(e).constructor):t.apply(e,r))}function k$(){return(k$="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=T$(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function T$(e){return(T$=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j$(e,t){return(j$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var M$=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=P$(this,t,[e,r])).CLASS_NAME="SuperMap.MathExpressionAnalysisService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j$(e,t)}(t,KW),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=k$(T$(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"processAsync",value:function(e,t){var r=this,n={};e instanceof _$&&(r.url=M.urlPathAppend(r.url,"datasets/"+e.dataset+"/mathanalyst")),_$.toObject(e,n);var o=M.toJSON(n);return r.url=M.urlAppend(r.url,"returnContent=true"),r.request({method:"POST",data:o,scope:r,success:t,failure:t})}}])&&O$(r.prototype,n),o&&O$(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function B$(e){"@babel/helpers - typeof";return(B$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N$(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,R$(n.key),n)}}function R$(e){var t=function(e,t){if("object"!=B$(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=B$(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==B$(t)?t:t+""}var L$=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.operation=In.UNION,t&&M.extend(this,t),this.CLASS_NAME="SuperMap.OverlayAnalystParameters"},(t=[{key:"destroy",value:function(){this.operation=null}}])&&N$(e.prototype,t),r&&N$(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function D$(e){"@babel/helpers - typeof";return(D$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F$(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Q$(n.key),n)}}function Q$(e){var t=function(e,t){if("object"!=D$(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=D$(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==D$(t)?t:t+""}function G$(e,t,r){return t=z$(t),function(e,t){if(t&&("object"==D$(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],z$(e).constructor):t.apply(e,r))}function U$(){return(U$="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=z$(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function z$(e){return(z$=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function H$(e,t){return(H$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var q$=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=G$(this,t,[e])).operateDataset=null,r.operateDatasetFields=[],r.operateDatasetFilter=new Fj,r.operateRegions=[],r.sourceDataset=null,r.sourceDatasetFields=[],r.sourceDatasetFilter=new Fj,r.tolerance=0,r.resultSetting=new wX,M.extend(r,e),r.CLASS_NAME="SuperMap.DatasetOverlayAnalystParameters",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&H$(e,t)}(t,L$),r=t,n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=U$(z$(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([]);var a=this;if(a.operateDataset=null,a.operateDatasetFields=null,a.operateDatasetFilter&&(a.operateDatasetFilter.destroy(),a.operateDatasetFilter=null),a.operateRegions){for(var s=0,u=a.operateRegions,l=u.length;s<l;s++)u[s].destroy();a.operateRegions=null}a.sourceDataset=null,a.sourceDatasetFields=null,a.sourceDatasetFilter&&(a.sourceDatasetFilter.destroy(),a.sourceDatasetFilter=null),a.tolerance=null,a.resultSetting&&(a.resultSetting.destroy(),a.resultSetting=null)}}],o=[{key:"toObject",value:function(e,t){for(var r in e)if("sourceDataset"!==r)if("operateRegions"===r){t.operateRegions=[];var n=e.operateRegions;for(var o in n)n.hasOwnProperty(o)&&(t.operateRegions[o]=$n.fromGeometry(n[o]))}else"resultSetting"===r?t.dataReturnOption=e.resultSetting:t[r]=e[r]}}],n&&F$(r.prototype,n),o&&F$(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function V$(e){"@babel/helpers - typeof";return(V$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function K$(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Y$(n.key),n)}}function Y$(e){var t=function(e,t){if("object"!=V$(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=V$(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==V$(t)?t:t+""}function J$(e,t,r){return t=X$(t),function(e,t){if(t&&("object"==V$(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],X$(e).constructor):t.apply(e,r))}function W$(){return(W$="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=X$(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function X$(e){return(X$=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Z$(e,t){return(Z$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var $$=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=J$(this,t,[e]),e&&e.operateGeometry&&(r.operateGeometry=e.operateGeometry),e&&e.sourceGeometry&&(r.sourceGeometry=e.sourceGeometry),e&&e.operateGeometries&&(r.operateGeometries=e.operateGeometries),e&&e.sourceGeometries&&(r.sourceGeometries=e.sourceGeometries),e&&M.extend(r,e),r.CLASS_NAME="SuperMap.GeometryOverlayAnalystParameters",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Z$(e,t)}(t,L$),r=t,n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=W$(X$(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([]);var a=this;a.sourceGeometry&&(a.sourceGeometry.destroy(),a.sourceGeometry=null),a.sourceGeometries&&(a.sourceGeometries.destroy(),a.sourceGeometries=null),a.sourceGeometry&&(a.sourceGeometry.destroy(),a.sourceGeometry=null),a.operateGeometries&&(a.operateGeometries.destroy(),a.operateGeometries=null)}}],o=[{key:"toObject",value:function(e,t){for(var r in e)if("sourceGeometry"===r)t.sourceGeometry=$n.fromGeometry(e.sourceGeometry);else if("sourceGeometries"===r){for(var n=[],o=0;o<e.sourceGeometries.length;o++)n.push($n.fromGeometry(e.sourceGeometries[o]));t.sourceGeometries=n}else if("operateGeometry"===r)t.operateGeometry=$n.fromGeometry(e.operateGeometry);else if("operateGeometries"===r){for(var i=[],a=0;a<e.operateGeometries.length;a++)i.push($n.fromGeometry(e.operateGeometries[a]));t.operateGeometries=i}else t[r]=e[r]}}],n&&K$(r.prototype,n),o&&K$(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function e0(e){"@babel/helpers - typeof";return(e0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function t0(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,r0(n.key),n)}}function r0(e){var t=function(e,t){if("object"!=e0(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=e0(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==e0(t)?t:t+""}function n0(e,t,r){return t=i0(t),function(e,t){if(t&&("object"==e0(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],i0(e).constructor):t.apply(e,r))}function o0(){return(o0="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=i0(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function i0(e){return(i0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a0(e,t){return(a0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var s0=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=n0(this,t,[e,r])).mode=null,r&&M.extend(n,r),n.CLASS_NAME="SuperMap.OverlayAnalystService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a0(e,t)}(t,KW),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=o0(i0(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([]),this.mode=null}},{key:"processAsync",value:function(e,t){var r={},n=this;e instanceof q$?(n.mode="datasets",n.url=M.urlPathAppend(n.url,"datasets/"+e.sourceDataset+"/overlay"),q$.toObject(e,r)):e instanceof $$&&(n.mode="geometry",e.operateGeometries&&e.sourceGeometries?(n.url=M.urlPathAppend(n.url,"geometry/overlay/batch"),n.url=M.urlAppend(n.url,"ignoreAnalystParam=true")):n.url=M.urlPathAppend(n.url,"geometry/overlay"),$$.toObject(e,r)),this.returnContent=!0;var o=M.toJSON(r);return n.request({method:"POST",data:o,scope:n,success:t,failure:t})}},{key:"dataFormat",value:function(){return[sn.GEOJSON,sn.ISERVER,sn.FGB]}}])&&t0(r.prototype,n),o&&t0(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function u0(e){"@babel/helpers - typeof";return(u0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l0(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,c0(n.key),n)}}function c0(e){var t=function(e,t){if("object"!=u0(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=u0(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==u0(t)?t:t+""}var f0=function(){return e=function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)return this;this.sourceRoute=null,this.point=null,this.tolerance=null,this.isIgnoreGap=!1,M.extend(this,t),this.CLASS_NAME="SuperMap.RouteCalculateMeasureParameters"},(t=[{key:"destroy",value:function(){var e=this;e.sourceRoute=null,e.point=null,e.tolerance&&(e.tolerance=null),e.isIgnoreGap&&(e.isIgnoreGap=!1)}}])&&l0(e.prototype,t),r&&l0(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function p0(e){"@babel/helpers - typeof";return(p0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h0(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,y0(n.key),n)}}function y0(e){var t=function(e,t){if("object"!=p0(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=p0(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==p0(t)?t:t+""}function d0(e,t,r){return t=g0(t),function(e,t){if(t&&("object"==p0(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],g0(e).constructor):t.apply(e,r))}function m0(){return(m0="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=g0(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function g0(e){return(g0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v0(e,t){return(v0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var b0=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=d0(this,t,[e,r])).CLASS_NAME="SuperMap.RouteCalculateMeasureService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v0(e,t)}(t,KW),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=m0(g0(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"processAsync",value:function(e,t){if(e instanceof f0){var r;return r=this.getJsonParameters(e),this.request({method:"POST",data:r,scope:this,success:t,failure:t})}}},{key:"getJsonParameters",value:function(e){return this.url=M.urlPathAppend(this.url,"geometry/calculatemeasure"),this.url=M.urlAppend(this.url,"returnContent=true"),M.toJSON(e)}}])&&h0(r.prototype,n),o&&h0(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function A0(e){"@babel/helpers - typeof";return(A0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w0(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,S0(n.key),n)}}function S0(e){var t=function(e,t){if("object"!=A0(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=A0(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==A0(t)?t:t+""}var C0=function(){return e=function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)return this;this.sourceRoute=null,this.dataset=null,this.routeIDField=null,this.routeID=null,this.type=null,this.measure=null,this.offset=0,this.isIgnoreGap=!1,this.startMeasure=null,this.endMeasure=null;var r=t.sourceRoute,n={};if(r&&r instanceof b&&r.components){n.type=r.type,n.parts=r.parts;for(var o=[],i=0,a=r.components.length;i<a;i++)o=o.concat(r.components[i].components);n.points=o,t.sourceRoute=n}M.extend(this,t),this.CLASS_NAME="SuperMap.RouteLocatorParameters"},(t=[{key:"destroy",value:function(){var e=this;e.sourceRoute=null,e.type=null,e.measure=null,e.offset=0,e.isIgnoreGap=!1,e.startMeasure=null,e.endMeasure=null,e.dataset=null,e.routeID=null,e.routeIDField=null}}])&&w0(e.prototype,t),r&&w0(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function E0(e){"@babel/helpers - typeof";return(E0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _0(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,I0(n.key),n)}}function I0(e){var t=function(e,t){if("object"!=E0(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=E0(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==E0(t)?t:t+""}function O0(e,t,r){return t=P0(t),function(e,t){if(t&&("object"==E0(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],P0(e).constructor):t.apply(e,r))}function x0(){return(x0="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=P0(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function P0(e){return(P0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k0(e,t){return(k0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var T0=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=O0(this,t,[e,r])).CLASS_NAME="SuperMap.RouteLocatorService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k0(e,t)}(t,KW),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=x0(P0(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"processAsync",value:function(e,t){if(e instanceof C0){var r;return r=this.getJsonParameters(e),this.request({method:"POST",data:r,scope:this,success:t,failure:t})}}},{key:"getJsonParameters",value:function(e){var t="geometry/routelocator";return e.dataset&&(t="datasets/"+e.dataset+"/linearreferencing/routelocator",e.sourceRoute=null),this.url=M.urlPathAppend(this.url,t),this.url=M.urlAppend(this.url,"returnContent=true"),M.toJSON(e)}}])&&_0(r.prototype,n),o&&_0(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function j0(e){"@babel/helpers - typeof";return(j0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M0(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,B0(n.key),n)}}function B0(e){var t=function(e,t){if("object"!=j0(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=j0(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==j0(t)?t:t+""}var N0=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.clipRegion=null,this.datumValue=0,this.expectedZValues=null,this.interval=0,this.resampleTolerance=0,this.smoothMethod=xn.BSPLINE,this.smoothness=0,t&&M.extend(this,t),this.CLASS_NAME="SuperMap.SurfaceAnalystParametersSetting"},(t=[{key:"destroy",value:function(){var e=this;e.clipRegion&&(e.clipRegion.destroy(),e.clipRegion=null),e.datumValue=null,e.expectedZValues=null,e.interval=null,e.resampleTolerance=null,e.smoothMethod=null,e.smoothness=null}},{key:"toJSON",value:function(){var e="'datumValue':"+M.toJSON(this.datumValue);if(e+=",'interval':"+M.toJSON(this.interval),e+=",'resampleTolerance':"+M.toJSON(this.resampleTolerance),e+=",'smoothMethod':"+M.toJSON(this.smoothMethod),e+=",'smoothness':"+M.toJSON(this.smoothness),null!=this.expectedZValues&&(e+=",'expectedZValues':"+M.toJSON(this.expectedZValues)),null!=this.clipRegion){var t=this.clipRegion;this.clipRegion instanceof b&&this.clipRegion.components&&(t=$n.fromGeometry(this.clipRegion)),e+=",'clipRegion':"+M.toJSON(t)}return"{"+e+"}"}}])&&M0(e.prototype,t),r&&M0(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function R0(e){"@babel/helpers - typeof";return(R0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L0(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,D0(n.key),n)}}function D0(e){var t=function(e,t){if("object"!=R0(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=R0(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==R0(t)?t:t+""}var F0=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.resolution=0,this.extractParameter=new N0,this.resultSetting=new wX,this.surfaceAnalystMethod=Pn.ISOLINE,t&&M.extend(this,t),this.CLASS_NAME="SuperMap.SurfaceAnalystParameters"},(t=[{key:"destroy",value:function(){var e=this;e.resolution=null,e.extractParameter&&(e.extractParameter.destroy(),e.extractParameter=null),e.resultSetting&&(e.resultSetting.destroy(),e.resultSetting=null),e.surfaceAnalystMethod=null}}])&&L0(e.prototype,t),r&&L0(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function Q0(e){"@babel/helpers - typeof";return(Q0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G0(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,U0(n.key),n)}}function U0(e){var t=function(e,t){if("object"!=Q0(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Q0(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Q0(t)?t:t+""}function z0(e,t,r){return t=q0(t),function(e,t){if(t&&("object"==Q0(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],q0(e).constructor):t.apply(e,r))}function H0(){return(H0="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=q0(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function q0(e){return(q0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function V0(e,t){return(V0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var K0=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=z0(this,t,[e])).dataset=null,r.filterQueryParameter=new Fj,r.zValueFieldName=null,e&&M.extend(r,e),r.CLASS_NAME="SuperMap.DatasetSurfaceAnalystParameters",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&V0(e,t)}(t,F0),r=t,n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=H0(q0(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([]);var a=this;a.dataset=null,a.filterQueryParameter&&(a.filterQueryParameter.destroy(),a.filterQueryParameter=null),a.zValueFieldName=null}}],o=[{key:"toObject",value:function(e,t){for(var r in e)if("filterQueryParameter"===r&&(t.filterQueryParameter=e.filterQueryParameter),"extractParameter"===r)e.extractParameter.clipRegion instanceof b&&e.extractParameter.clipRegion.components&&(e.extractParameter.clipRegion=$n.fromGeometry(e.extractParameter.clipRegion)),t.extractParameter=e.extractParameter;else{if("dataset"===r)continue;if("surfaceAnalystMethod"===r)continue;t[r]=e[r]}}}],n&&G0(r.prototype,n),o&&G0(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Y0(e){"@babel/helpers - typeof";return(Y0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function J0(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,W0(n.key),n)}}function W0(e){var t=function(e,t){if("object"!=Y0(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Y0(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Y0(t)?t:t+""}function X0(e,t,r){return t=$0(t),function(e,t){if(t&&("object"==Y0(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],$0(e).constructor):t.apply(e,r))}function Z0(){return(Z0="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=$0(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function $0(e){return($0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function e1(e,t){return(e1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var t1=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=X0(this,t,[e])).points=null,r.zValues=null,e&&M.extend(r,e),r.CLASS_NAME="SuperMap.GeometrySurfaceAnalystParameters",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&e1(e,t)}(t,F0),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=Z0($0(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([]);if(this.points){for(var a=0,s=this.points,u=s.length;a<u;a++)s[a].destroy();this.points=null}this.zValues=null}}])&&J0(r.prototype,n),o&&J0(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function r1(e){"@babel/helpers - typeof";return(r1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n1(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,o1(n.key),n)}}function o1(e){var t=function(e,t){if("object"!=r1(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=r1(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r1(t)?t:t+""}function i1(e,t,r){return t=s1(t),function(e,t){if(t&&("object"==r1(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],s1(e).constructor):t.apply(e,r))}function a1(){return(a1="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=s1(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function s1(e){return(s1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u1(e,t){return(u1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var l1=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=i1(this,t,[e,r])).CLASS_NAME="SuperMap.SurfaceAnalystService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u1(e,t)}(t,KW),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=a1(s1(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"processAsync",value:function(e,t){if(e instanceof F0){var r;return r=this.getJsonParameters(e),this.request({method:"POST",data:r,scope:this,success:t,failure:t})}}},{key:"getJsonParameters",value:function(e){var t="",r={};if(e instanceof K0)this.url=M.urlPathAppend(this.url,"datasets/"+e.dataset+"/"+e.surfaceAnalystMethod.toLowerCase()),K0.toObject(e,r),t=M.toJSON(r);else{if(!(e instanceof t1))return;this.url=M.urlPathAppend(this.url,"geometry/"+e.surfaceAnalystMethod.toLowerCase()),t=M.toJSON(e)}return this.returnContent=!0,t}},{key:"dataFormat",value:function(){return[sn.GEOJSON,sn.ISERVER,sn.FGB]}}])&&n1(r.prototype,n),o&&n1(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function c1(e){"@babel/helpers - typeof";return(c1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f1(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,p1(n.key),n)}}function p1(e){var t=function(e,t){if("object"!=c1(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=c1(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==c1(t)?t:t+""}var h1=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.dataset=null,this.zFactor=1,this.averageCurvatureName=null,this.profileCurvatureName="",this.planCurvatureName="",this.deleteExistResultDataset=!1,M.extend(this,t),this.CLASS_NAME="SuperMap.TerrainCurvatureCalculationParameters")},r=[{key:"toObject",value:function(e,t){for(var r in e)"dataset"!==r&&(t[r]=e[r])}}],(t=[{key:"destroy",value:function(){var e=this;e.dataset=null,e.zFactor=1,e.averageCurvatureName=null,e.profileCurvatureName=null,e.planCurvatureName=null,e.deleteExistResultDataset=!0}}])&&f1(e.prototype,t),r&&f1(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function y1(e){"@babel/helpers - typeof";return(y1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d1(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,m1(n.key),n)}}function m1(e){var t=function(e,t){if("object"!=y1(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=y1(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==y1(t)?t:t+""}function g1(e,t,r){return t=b1(t),function(e,t){if(t&&("object"==y1(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],b1(e).constructor):t.apply(e,r))}function v1(){return(v1="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=b1(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function b1(e){return(b1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A1(e,t){return(A1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var w1=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=g1(this,t,[e,r])).CLASS_NAME="SuperMap.TerrainCurvatureCalculationService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A1(e,t)}(t,KW),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=v1(b1(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"processAsync",value:function(e,t){var r=this,n={};e instanceof h1&&(r.url=M.urlPathAppend(r.url,"datasets/"+e.dataset+"/terraincalculation/curvature")),h1.toObject(e,n);var o=M.toJSON(n);return r.url=M.urlAppend(r.url,"returnContent=true"),r.request({method:"POST",data:o,scope:r,success:t,failure:t})}}])&&d1(r.prototype,n),o&&d1(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function S1(e){"@babel/helpers - typeof";return(S1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C1(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,E1(n.key),n)}}function E1(e){var t=function(e,t){if("object"!=S1(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=S1(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==S1(t)?t:t+""}var _1=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.dataset=null,this.cutFillType="GRID",this.afterCutFillDataset=null,this.resultDataset=null,this.buildPyramid=null,this.deleteExistResultDataset=null,this.bufferRadius=null,this.isRoundHead=null,this.line3D=null,this.region=null,this.region3D=null,M.extend(this,t),this.CLASS_NAME="SuperMap.TerrainCutFillCalculationParameters")},r=[{key:"toObject",value:function(e,t){for(var r in e)"dataset"!==r&&(t[r]=e[r])}}],(t=[{key:"destroy",value:function(){var e=this;e.cutFillType=null,e.afterCutFillDataset=null,e.resultDataset=null,e.buildPyramid=null,e.deleteExistResultDataset=null,e.bufferRadius=null,e.isRoundHead=null,e.line3D=null,e.region=null,e.region3D=null}}])&&C1(e.prototype,t),r&&C1(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function I1(e){"@babel/helpers - typeof";return(I1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O1(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,x1(n.key),n)}}function x1(e){var t=function(e,t){if("object"!=I1(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=I1(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==I1(t)?t:t+""}function P1(e,t,r){return t=T1(t),function(e,t){if(t&&("object"==I1(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],T1(e).constructor):t.apply(e,r))}function k1(){return(k1="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=T1(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function T1(e){return(T1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j1(e,t){return(j1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var M1=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=P1(this,t,[e,r])).CLASS_NAME="SuperMap.TerrainCutFillCalculationService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j1(e,t)}(t,KW),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=k1(T1(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"processAsync",value:function(e,t){var r=this,n={};e instanceof _1&&(r.url=M.urlPathAppend(r.url,"datasets/"+e.dataset+"/terraincalculation/cutfill")),_1.toObject(e,n);var o=M.toJSON(n);return r.url=M.urlAppend(r.url,"returnContent=true"),r.request({method:"POST",data:o,scope:r,success:t,failure:t})}}])&&O1(r.prototype,n),o&&O1(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function B1(e){"@babel/helpers - typeof";return(B1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N1(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,R1(n.key),n)}}function R1(e){var t=function(e,t){if("object"!=B1(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=B1(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==B1(t)?t:t+""}var L1=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.dataset=null,this.terrainAnalystSetting=null,this.resultDatasetName=null,this.deleteExistResultDataset=null,M.extend(this,t),this.CLASS_NAME="SuperMap.TerrainAspectCalculationParameters")},r=[{key:"toObject",value:function(e,t){for(var r in e)"dataset"!==r&&(t[r]=e[r])}}],(t=[{key:"destroy",value:function(){this.terrainAnalystSetting=null,this.resultDatasetName=null,this.deleteExistResultDataset=null}}])&&N1(e.prototype,t),r&&N1(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function D1(e){"@babel/helpers - typeof";return(D1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F1(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Q1(n.key),n)}}function Q1(e){var t=function(e,t){if("object"!=D1(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=D1(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==D1(t)?t:t+""}function G1(e,t,r){return t=z1(t),function(e,t){if(t&&("object"==D1(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],z1(e).constructor):t.apply(e,r))}function U1(){return(U1="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=z1(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function z1(e){return(z1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function H1(e,t){return(H1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var q1=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=G1(this,t,[e,r])).CLASS_NAME="SuperMap.TerrainAspectCalculationService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&H1(e,t)}(t,KW),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=U1(z1(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"processAsync",value:function(e,t){var r=this,n={};e instanceof L1&&(r.url=M.urlPathAppend(r.url,"datasets/"+e.dataset+"/terraincalculation/aspect")),L1.toObject(e,n);var o=M.toJSON(n);return r.url=M.urlAppend(r.url,"returnContent=true"),r.request({method:"POST",data:o,scope:r,success:t,failure:t})}}])&&F1(r.prototype,n),o&&F1(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function V1(e){"@babel/helpers - typeof";return(V1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function K1(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Y1(n.key),n)}}function Y1(e){var t=function(e,t){if("object"!=V1(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=V1(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==V1(t)?t:t+""}var J1=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.dataset=null,this.terrainAnalystSetting=null,this.resultDatasetName=null,this.deleteExistResultDataset=null,this.zFactor=null,this.slopeType=null,M.extend(this,t),this.CLASS_NAME="SuperMap.TerrainSlopeCalculationParameters")},r=[{key:"toObject",value:function(e,t){for(var r in e)"dataset"!==r&&(t[r]=e[r])}}],(t=[{key:"destroy",value:function(){var e=this;e.terrainAnalystSetting=null,e.resultDatasetName=null,e.deleteExistResultDataset=null,e.zFactor=null,e.slopeType=null}}])&&K1(e.prototype,t),r&&K1(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function W1(e){"@babel/helpers - typeof";return(W1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function X1(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Z1(n.key),n)}}function Z1(e){var t=function(e,t){if("object"!=W1(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=W1(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==W1(t)?t:t+""}function $1(e,t,r){return t=t2(t),function(e,t){if(t&&("object"==W1(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],t2(e).constructor):t.apply(e,r))}function e2(){return(e2="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=t2(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function t2(e){return(t2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function r2(e,t){return(r2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var n2=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=$1(this,t,[e,r])).CLASS_NAME="SuperMap.TerrainSlopeCalculationService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r2(e,t)}(t,KW),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=e2(t2(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"processAsync",value:function(e,t){var r=this,n={};e instanceof J1&&(r.url=M.urlPathAppend(r.url,"datasets/"+e.dataset+"/terraincalculation/slope")),J1.toObject(e,n);var o=M.toJSON(n);return r.url=M.urlAppend(r.url,"returnContent=true"),r.request({method:"POST",data:o,scope:r,success:t,failure:t})}}])&&X1(r.prototype,n),o&&X1(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function o2(e){"@babel/helpers - typeof";return(o2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i2(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a2(n.key),n)}}function a2(e){var t=function(e,t){if("object"!=o2(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=o2(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o2(t)?t:t+""}function s2(e,t,r){return t=l2(t),function(e,t){if(t&&("object"==o2(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],l2(e).constructor):t.apply(e,r))}function u2(){return(u2="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=l2(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function l2(e){return(l2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c2(e,t){return(c2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var f2=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=s2(this,t,[e])).filterQueryParameter=null,r.dataset=null,e&&M.extend(r,e),r.CLASS_NAME="SuperMap.DatasetThiessenAnalystParameters",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c2(e,t)}(t,i$),r=t,n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=u2(l2(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([]);this.filterQueryParameter&&(this.filterQueryParameter.destroy(),this.filterQueryParameter=null)}}],o=[{key:"toObject",value:function(e,t){for(var r in e)"clipRegion"===r?t.clipRegion=$n.fromGeometry(e.clipRegion):t[r]=e[r]}}],n&&i2(r.prototype,n),o&&i2(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function p2(e){"@babel/helpers - typeof";return(p2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h2(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,y2(n.key),n)}}function y2(e){var t=function(e,t){if("object"!=p2(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=p2(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==p2(t)?t:t+""}function d2(e,t,r){return t=g2(t),function(e,t){if(t&&("object"==p2(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],g2(e).constructor):t.apply(e,r))}function m2(){return(m2="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=g2(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function g2(e){return(g2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v2(e,t){return(v2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var b2=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=d2(this,t,[e])).points=null,e&&M.extend(r,e),r.CLASS_NAME="SuperMap.GeometryThiessenAnalystParameters",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v2(e,t)}(t,i$),r=t,n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=m2(g2(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([]);if(this.points){for(var a=this.points.length-1;a>=0;a--)this.points[a].destroy();this.points=null}}}],o=[{key:"toObject",value:function(e,t){for(var r in e)"clipRegion"===r?t.clipRegion=$n.fromGeometry(e.clipRegion):t[r]=e[r]}}],n&&h2(r.prototype,n),o&&h2(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function A2(e){"@babel/helpers - typeof";return(A2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w2(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,S2(n.key),n)}}function S2(e){var t=function(e,t){if("object"!=A2(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=A2(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==A2(t)?t:t+""}function C2(e,t,r){return t=_2(t),function(e,t){if(t&&("object"==A2(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],_2(e).constructor):t.apply(e,r))}function E2(){return(E2="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=_2(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function _2(e){return(_2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I2(e,t){return(I2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var O2=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=C2(this,t,[e,r])).mode=null,r&&M.extend(n,r),n.CLASS_NAME="SuperMap.ThiessenAnalystService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&I2(e,t)}(t,KW),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=E2(_2(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([]),this.mode=null}},{key:"processAsync",value:function(e,t){var r={},n=this;e instanceof f2?(n.mode="datasets",n.url=M.urlPathAppend(n.url,"datasets/"+e.dataset+"/thiessenpolygon"),f2.toObject(e,r)):e instanceof b2&&(n.mode="geometry",n.url=M.urlPathAppend(n.url,"geometry/thiessenpolygon"),b2.toObject(e,r));var o=M.toJSON(r);return this.returnContent=!0,n.request({method:"POST",data:o,scope:n,success:t,failure:t})}},{key:"dataFormat",value:function(){return[sn.GEOJSON,sn.ISERVER,sn.FGB]}}])&&w2(r.prototype,n),o&&w2(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function x2(e){"@babel/helpers - typeof";return(x2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P2(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,k2(n.key),n)}}function k2(e){var t=function(e,t){if("object"!=x2(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=x2(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==x2(t)?t:t+""}var T2=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.referenceDatasetName=null,this.referenceFilterQueryParameter=null,this.createResultDataset=null,this.resultDatasetName=null,this.resultDatasourceName=null,this.minDistance=null,this.maxDistance=null,t&&M.extend(this,t),this.CLASS_NAME="SuperMap.MinDistanceAnalystParameters"},(t=[{key:"destroy",value:function(){var e=this;e.referenceDatasetName=null,e.dataset=null,e.referenceFilterQueryParameter=null,e.createResultDataset=null,e.resultDatasetName=null,e.resultDatasourceName=null,e.minDistance=null,e.maxDistance=null}}])&&P2(e.prototype,t),r&&P2(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function j2(e){"@babel/helpers - typeof";return(j2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M2(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,B2(n.key),n)}}function B2(e){var t=function(e,t){if("object"!=j2(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=j2(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==j2(t)?t:t+""}function N2(e,t,r){return t=L2(t),function(e,t){if(t&&("object"==j2(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],L2(e).constructor):t.apply(e,r))}function R2(){return(R2="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=L2(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function L2(e){return(L2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D2(e,t){return(D2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var F2=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=N2(this,t,[e])).dataset=null,r.inputFilterQueryParameter=null,e&&M.extend(r,e),r.CLASS_NAME="SuperMap.DatasetMinDistanceAnalystParameters",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&D2(e,t)}(t,T2),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=R2(L2(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([]);this.dataset=null,this.inputFilterQueryParameter=null}}])&&M2(r.prototype,n),o&&M2(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Q2(e){"@babel/helpers - typeof";return(Q2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U2(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,z2(n.key),n)}}function z2(e){var t=function(e,t){if("object"!=Q2(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Q2(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Q2(t)?t:t+""}function H2(e,t,r){return t=V2(t),function(e,t){if(t&&("object"==Q2(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],V2(e).constructor):t.apply(e,r))}function q2(){return(q2="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=V2(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function V2(e){return(V2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function K2(e,t){return(K2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Y2=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=H2(this,t,[e])).inputGeometries=null,e&&M.extend(r,e),r.CLASS_NAME="SuperMap.GeometryMinDistanceAnalystParameters",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&K2(e,t)}(t,T2),r=t,n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=q2(V2(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([]);this.inputGeometries=null}}],o=[{key:"toObject",value:function(e,t){for(var r in e)if("inputGeometries"===r&&e.inputGeometries){for(var n=[],o=0;o<e.inputGeometries.length;o++)n.push($n.fromGeometry(e.inputGeometries[o]));t.inputGeometries=n}else t[r]=e[r]}}],n&&U2(r.prototype,n),o&&U2(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function J2(e){"@babel/helpers - typeof";return(J2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W2(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,X2(n.key),n)}}function X2(e){var t=function(e,t){if("object"!=J2(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=J2(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==J2(t)?t:t+""}function Z2(e,t,r){return t=e3(t),function(e,t){if(t&&("object"==J2(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],e3(e).constructor):t.apply(e,r))}function $2(){return($2="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=e3(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function e3(e){return(e3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function t3(e,t){return(t3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var r3=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=Z2(this,t,[e,r]),r&&M.extend(n,r),n.CLASS_NAME="SuperMap.MinDistanceAnalystService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&t3(e,t)}(t,KW),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=$2(e3(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"processAsync",value:function(e,t){var r=this,n={};e instanceof F2?(r.url=M.urlPathAppend(r.url,"datasets/"+e.dataset+"/mindistance"),n=e):e instanceof Y2&&(r.url=M.urlPathAppend(r.url,"geometry/mindistance"),Y2.toObject(e,n));var o=M.toJSON(n);return r.url=M.urlAppend(r.url,"returnContent=true"),r.request({method:"POST",data:o,scope:r,success:t,failure:t})}}])&&W2(r.prototype,n),o&&W2(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function n3(e){"@babel/helpers - typeof";return(n3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o3(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,i3(n.key),n)}}function i3(e){var t=function(e,t){if("object"!=n3(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=n3(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n3(t)?t:t+""}function a3(e,t,r){return t=u3(t),function(e,t){if(t&&("object"==n3(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],u3(e).constructor):t.apply(e,r))}function s3(){return(s3="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=u3(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function u3(e){return(u3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l3(e,t){return(l3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var c3=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=a3(this,t,[e,r]),r&&M.extend(n,r),n.CLASS_NAME="SuperMap.ConvexHullAnalystService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l3(e,t)}(t,KW),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=s3(u3(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([]),this.mode=null}},{key:"processAsync",value:function(e,t){var r=this;r.url=M.urlPathAppend(r.url,"geometry/3d/convexhull");var n=M.toJSON(e);return r.url=M.urlAppend(r.url,"returnContent=true"),r.request({method:"POST",data:n,scope:r,success:t,failure:t})}}])&&o3(r.prototype,n),o&&o3(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function f3(e){"@babel/helpers - typeof";return(f3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p3(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,h3(n.key),n)}}function h3(e){var t=function(e,t){if("object"!=f3(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=f3(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==f3(t)?t:t+""}function y3(e,t,r){return t=m3(t),function(e,t){if(t&&("object"==f3(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],m3(e).constructor):t.apply(e,r))}function d3(){return(d3="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=m3(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function m3(e){return(m3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g3(e,t){return(g3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var v3=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=y3(this,t,[e,r]),r&&M.extend(n,r),n.CLASS_NAME="SuperMap.GeometryBatchAnalystService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g3(e,t)}(t,KW),r=t,(n=[{key:"processAsync",value:function(e,t){var r=this;r.url=M.urlPathAppend(r.url,"geometry/batchanalyst"),r.url=M.urlAppend(r.url,"returnContent=true&ignoreAnalystParam=true");var n=r._processParams(e),o=M.toJSON(n);return r.request({method:"POST",data:o,scope:r,success:t,failure:t})}},{key:"_processParams",value:function(e){var t=this;if(M.isArray(e)){var r=[];return e.map(function(e){return r.push(t._toJSON(e)),e}),r}}},{key:"_toJSON",value:function(e){var t={};if("buffer"===e.analystName)t.analystName="buffer",t.param={},LX.toObject(e.param,t.param);else if("overlay"===e.analystName)t.analystName="overlay",t.param={},$$.toObject(e.param,t.param);else if("interpolationDensity"===e.analystName)t.analystName="interpolationDensity",t.param={},TZ.toObject(e.param,t.param);else if("interpolationidw"===e.analystName)t.analystName="interpolationidw",t.param={},TZ.toObject(e.param,t.param);else if("interpolationRBF"===e.analystName)t.analystName="interpolationRBF",t.param={},TZ.toObject(e.param,t.param);else if("interpolationKriging"===e.analystName)t.analystName="interpolationKriging",t.param={},TZ.toObject(e.param,t.param);else{if("thiessenpolygon"!==e.analystName)return e;t.analystName="thiessenpolygon",t.param={},b2.toObject(e.param,t.param)}return t}},{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=d3(m3(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}}])&&p3(r.prototype,n),o&&p3(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function b3(e){"@babel/helpers - typeof";return(b3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A3(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,w3(n.key),n)}}function w3(e){var t=function(e,t){if("object"!=b3(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=b3(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==b3(t)?t:t+""}var S3=function(){return e=function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=t,this.options=r||{}},(t=[{key:"getAreaSolarRadiationResult",value:function(e,t,r){var n=this;return new iX(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(e,t)}},{key:"bufferAnalysis",value:function(e,t,r){var n=this;return new qX(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(e,t)}},{key:"densityAnalysis",value:function(e,t,r){var n=this;return new nZ(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(e,t)}},{key:"generateSpatialData",value:function(e,t,r){var n=this;return new dZ(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(e,t)}},{key:"geoRelationAnalysis",value:function(e,t,r){var n=this;return new OZ(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(e,t)}},{key:"interpolationAnalysis",value:function(e,t,r){var n=this;return new w$(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(e,t)}},{key:"mathExpressionAnalysis",value:function(e,t,r){var n=this;return new M$(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(e,t)}},{key:"overlayAnalysis",value:function(e,t,r){var n=this;return new s0(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(e,t)}},{key:"routeCalculateMeasure",value:function(e,t,r){var n=this;return new b0(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(e,t)}},{key:"routeLocate",value:function(e,t,r){var n=this;return new T0(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(e,t)}},{key:"surfaceAnalysis",value:function(e,t,r){var n=this;return new l1(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(e,t)}},{key:"terrainCurvatureCalculate",value:function(e,t,r){var n=this;return new w1(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(e,t)}},{key:"terrainCutFillCalculate",value:function(e,t,r){var n=this;return new M1(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(e,t)}},{key:"terrainAspectCalculate",value:function(e,t,r){var n=this;return new q1(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(e,t)}},{key:"terrainSlopeCalculate",value:function(e,t,r){var n=this;return new n2(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(e,t)}},{key:"thiessenAnalysis",value:function(e,t,r){var n=this;return new O2(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(e,t)}},{key:"minDistanceAnalysis",value:function(e,t,r){var n=this;return new r3(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(e,t)}},{key:"convexHullAnalysis",value:function(e,t,r){var n=this;return new c3(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(e,t)}},{key:"geometrybatchAnalysis",value:function(e,t,r){for(var n=new v3(this.url,{format:this._processFormat(r)}),o=[],i=0;i<e.length;i++){var a=e[i];o.push({analystName:a.analystName,param:a.param})}return n.processAsync(o,t)}},{key:"_processFormat",value:function(e){return e||sn.GEOJSON}}])&&A3(e.prototype,t),r&&A3(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function C3(e){"@babel/helpers - typeof";return(C3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E3(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_3(n.key),n)}}function _3(e){var t=function(e,t){if("object"!=C3(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=C3(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==C3(t)?t:t+""}function I3(e,t,r){return t=O3(t),function(e,t){if(t&&("object"==C3(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],O3(e).constructor):t.apply(e,r))}function O3(e){return(O3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x3(e,t){return(x3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var P3=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=I3(this,t,[e,r]))._spatialAnalystService=new S3(e,r),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x3(e,t)}(t,Nw),r=t,(n=[{key:"getAreaSolarRadiationResult",value:function(e,t,r){return this._spatialAnalystService.getAreaSolarRadiationResult(e,t,r)}},{key:"bufferAnalysis",value:function(e,t,r){return e=this._processParams(e),this._spatialAnalystService.bufferAnalysis(e,t,r)}},{key:"densityAnalysis",value:function(e,t,r){return e=this._processParams(e),this._spatialAnalystService.densityAnalysis(e,t,r)}},{key:"generateSpatialData",value:function(e,t,r){return this._spatialAnalystService.generateSpatialData(e,t,r)}},{key:"geoRelationAnalysis",value:function(e,t,r){return e=this._processParams(e),this._spatialAnalystService.geoRelationAnalysis(e,t,r)}},{key:"interpolationAnalysis",value:function(e,t,r){return e=this._processParams(e),this._spatialAnalystService.interpolationAnalysis(e,t,r)}},{key:"mathExpressionAnalysis",value:function(e,t,r){return e=this._processParams(e),this._spatialAnalystService.mathExpressionAnalysis(e,t,r)}},{key:"overlayAnalysis",value:function(e,t,r){return e=this._processParams(e),this._spatialAnalystService.overlayAnalysis(e,t,r)}},{key:"routeCalculateMeasure",value:function(e,t,r){return e=this._processParams(e),this._spatialAnalystService.routeCalculateMeasure(e,t,r)}},{key:"routeLocate",value:function(e,t,r){return e=this._processParams(e),this._spatialAnalystService.routeLocate(e,t,r)}},{key:"surfaceAnalysis",value:function(e,t,r){return e=this._processParams(e),this._spatialAnalystService.surfaceAnalysis(e,t,r)}},{key:"terrainCurvatureCalculate",value:function(e,t,r){return this._spatialAnalystService.terrainCurvatureCalculate(e,t,r)}},{key:"terrainCutFillCalculate",value:function(e,t,r){return e=this._processParams(e),this._spatialAnalystService.terrainCutFillCalculate(e,t,r)}},{key:"terrainAspectCalculate",value:function(e,t,r){return e=this._processParams(e),this._spatialAnalystService.terrainAspectCalculate(e,t,r)}},{key:"terrainSlopeCalculate",value:function(e,t,r){return e=this._processParams(e),this._spatialAnalystService.terrainSlopeCalculate(e,t,r)}},{key:"thiessenAnalysis",value:function(e,t,r){return e=this._processParams(e),this._spatialAnalystService.thiessenAnalysis(e,t,r)}},{key:"minDistanceAnalysis",value:function(e,t,r){return e=this._processParams(e),this._spatialAnalystService.minDistanceAnalysis(e,t,r)}},{key:"convexHullAnalysis",value:function(e,t,r){return e=this._processParams(e),this._spatialAnalystService.convexHullAnalysis(e,t,r)}},{key:"geometrybatchAnalysis",value:function(e,t,r){for(var n=0;n<e.length;n++)e[n].param=this._processParams(e[n].param);return this._spatialAnalystService.geometrybatchAnalysis(e,t,r)}},{key:"_processParams",value:function(e){if(!e)return{};if(e.bounds&&(e.bounds=To.toSuperMapBounds(e.bounds)),e.inputPoints)for(var t=0;t<e.inputPoints.length;t++){var r=e.inputPoints[t];To.isArray(r)&&(e.inputPoints[t]={x:r[0],y:r[1],tag:r[2]})}if(e.points)for(var n=0;n<e.points.length;n++){var o=e.points[n];e.points[n]=To.toSuperMapPoint(o)}if(e.point&&(e.point=To.toSuperMapPoint(e.point)),e.extractRegion&&(e.extractRegion=To.toSuperMapGeometry(e.extractRegion)),e.extractParameter&&e.extractParameter.clipRegion&&(e.extractParameter.clipRegion=To.toSuperMapGeometry(e.extractParameter.clipRegion)),e.clipParam&&e.clipParam.clipRegion&&(e.clipParam.clipRegion=To.toSuperMapGeometry(e.clipParam.clipRegion)),e.clipRegion&&(e.clipRegion=To.toSuperMapGeometry(e.clipRegion)),e.sourceRoute&&e.sourceRoute){var i={type:"LINEM"};i.parts=[e.sourceRoute.geometry.coordinates.length],i.points=[];for(var a=0;a<e.sourceRoute.geometry.coordinates.length;a++){var s=e.sourceRoute.geometry.coordinates[a];i.points=i.points.concat({x:s[0],y:s[1],measure:s[2]})}e.sourceRoute=i}if(e.operateRegions&&To.isArray(e.operateRegions)&&e.operateRegions.map(function(t,r){return e.operateRegions[r]=To.toSuperMapGeometry(t),e.operateRegions[r]}),e.sourceGeometry){var u=null;e.sourceGeometrySRID&&(u=e.sourceGeometrySRID),e.sourceGeometry=To.toSuperMapGeometry(e.sourceGeometry),u&&(e.sourceGeometry.SRID=u),delete e.sourceGeometry.sourceGeometrySRID}if(e.operateGeometry&&(e.operateGeometry=To.toSuperMapGeometry(e.operateGeometry)),e.sourceGeometries){for(var l=[],c=0;c<e.sourceGeometries.length;c++)l.push(To.toSuperMapGeometry(e.sourceGeometries[c]));e.sourceGeometries=l}if(e.operateGeometries){for(var f=[],p=0;p<e.operateGeometries.length;p++)f.push(To.toSuperMapGeometry(e.operateGeometries[p]));e.operateGeometries=f}if(e.inputGeometries){for(var h=[],y=0;y<e.inputGeometries.length;y++)h.push(To.toSuperMapGeometry(e.inputGeometries[y]));e.inputGeometries=h}return e.sourceRoute&&e.sourceRoute.components&&To.isArray(e.sourceRoute.components)&&e.sourceRoute.components.map(function(t,r){return e.sourceRoute.components[r]=To.toSuperMapGeometry(t),e.sourceRoute.components[r]}),e}},{key:"_processFormat",value:function(e){return e||sn.GEOJSON}}])&&E3(r.prototype,n),o&&E3(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function k3(e){"@babel/helpers - typeof";return(k3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T3(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,j3(n.key),n)}}function j3(e){var t=function(e,t){if("object"!=k3(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=k3(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==k3(t)?t:t+""}var M3=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasetNames=null,this.dataSourceNames=null,this.joinItems=null,this.themes=null,this.displayFilters=null,this.displayOrderBys=null,this.fieldValuesDisplayFilter=null,t&&M.extend(this,t),this.CLASS_NAME="SuperMap.ThemeParameters"},(t=[{key:"destroy",value:function(){var e=this;if(e.datasetNames=null,e.dataSourceNames=null,e.joinItems){for(var t=0,r=e.joinItems,n=r.length;t<n;t++)r[t].destroy();e.joinItems=null}if(e.themes){for(var o=0,i=e.themes,a=i.length;o<a;o++)i[o].destroy();e.themes=null}}}])&&T3(e.prototype,t),r&&T3(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function B3(e){"@babel/helpers - typeof";return(B3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N3(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,R3(n.key),n)}}function R3(e){var t=function(e,t){if("object"!=B3(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=B3(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==B3(t)?t:t+""}function L3(e,t,r){return t=F3(t),function(e,t){if(t&&("object"==B3(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],F3(e).constructor):t.apply(e,r))}function D3(){return(D3="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=F3(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function F3(e){return(F3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Q3(e,t){return(Q3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var G3=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=L3(this,t,[e,r]),r&&M.extend(n,r),n.url=M.urlPathAppend(n.url,"tempLayersSet"),n.CLASS_NAME="SuperMap.ThemeService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Q3(e,t)}(t,Vw),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=D3(F3(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"processAsync",value:function(e,t){if(e instanceof M3){var r;return r=this.getJsonParameters(e),this.request({method:"POST",data:r,scope:this,success:t,failure:t})}}},{key:"getJsonParameters",value:function(e){var t,r="",n=null,o=null,i=null;r+="[{'type': 'UGC','subLayers': {'layers': [";for(var a=0;a<e.themes.length;a++){n=e.themes[a];var s=M.toJSON(n);if(r+="{'theme': "+(s=s.slice(0,-1))+"},'type': 'UGC','ugcLayerType': 'THEME',",(o=e.displayFilters)&&o.length>0&&(1===o.length?r+="'displayFilter':\""+o[0]+'",':r+="'displayFilter':\""+o[a]+'",'),(i=e.displayOrderBy)&&i.length>0&&(1===i.length?r+="'displayOrderBy':'"+i[0]+"',":r+="'displayOrderBy':'"+i[a]+"',"),(t=e.fieldValuesDisplayFilter)&&(r+="'fieldValuesDisplayFilter':"+M.toJSON(t)+","),e.joinItems&&e.joinItems.length>0&&e.joinItems[a]&&(r+="'joinItems':["+M.toJSON(e.joinItems[a])+"],"),e.datasetNames&&e.dataSourceNames){var u=e.datasetNames[a]?a:e.datasetNames.length-1,l=e.dataSourceNames[a]?a:e.dataSourceNames.length-1;r+="'datasetInfo': {'name': '"+e.datasetNames[u]+"','dataSourceName': '"+e.dataSourceNames[l]+"'}},"}else r+="},"}e.themes&&e.themes.length>0&&(r=r.substring(0,r.length-1)),r+="]},";var c=this.url.split("/");return r+="'name': '"+c[c.length-2]+"'}]"}}])&&N3(r.prototype,n),o&&N3(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function U3(e){"@babel/helpers - typeof";return(U3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z3(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,H3(n.key),n)}}function H3(e){var t=function(e,t){if("object"!=U3(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=U3(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==U3(t)?t:t+""}function q3(e,t,r){return t=V3(t),function(e,t){if(t&&("object"==U3(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],V3(e).constructor):t.apply(e,r))}function V3(e){return(V3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function K3(e,t){return(K3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Y3=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=q3(this,t,[e,r]))._themeService=new G3(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&K3(e,t)}(t,Nw),r=t,(n=[{key:"getThemeInfo",value:function(e,t){return this._themeService.processAsync(e,t)}}])&&z3(r.prototype,n),o&&z3(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function J3(e){"@babel/helpers - typeof";return(J3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W3(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,X3(n.key),n)}}function X3(e){var t=function(e,t){if("object"!=J3(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=J3(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==J3(t)?t:t+""}var Z3=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.keyWord=null,this.returnPosition=!1,M.extend(this,t),this.CLASS_NAME="SuperMap.StopQueryParameters"},(t=[{key:"destroy",value:function(){M.reset(this)}}])&&W3(e.prototype,t),r&&W3(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function $3(e){"@babel/helpers - typeof";return($3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function e4(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,t4(n.key),n)}}function t4(e){var t=function(e,t){if("object"!=$3(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=$3(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==$3(t)?t:t+""}function r4(e,t,r){return t=o4(t),function(e,t){if(t&&("object"==$3(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],o4(e).constructor):t.apply(e,r))}function n4(){return(n4="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=o4(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function o4(e){return(o4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i4(e,t){return(i4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var a4=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=r4(this,t,[e,r]),r=r||{},M.extend(n,r),n.CLASS_NAME="SuperMap.StopQueryService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i4(e,t)}(t,Vw),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=n4(o4(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([]),M.reset(this)}},{key:"processAsync",value:function(e,t){if(e instanceof Z3){return this.url=M.urlPathAppend(this.url,"stops/keyword/"+e.keyWord),this.request({method:"GET",params:{returnPosition:e.returnPosition},scope:this,success:t,failure:t})}}}])&&e4(r.prototype,n),o&&e4(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function s4(e){"@babel/helpers - typeof";return(s4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u4(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l4(n.key),n)}}function l4(e){var t=function(e,t){if("object"!=s4(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=s4(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s4(t)?t:t+""}var c4=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.transferLines=null,this.points=null,M.extend(this,t),this.CLASS_NAME="SuperMap.TransferPathParameters"},r=[{key:"toJson",value:function(e){if(e)return M.toJSON(e)}}],(t=[{key:"destroy",value:function(){M.reset(this)}}])&&u4(e.prototype,t),r&&u4(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function f4(e){"@babel/helpers - typeof";return(f4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p4(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,h4(n.key),n)}}function h4(e){var t=function(e,t){if("object"!=f4(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=f4(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==f4(t)?t:t+""}function y4(e,t,r){return t=m4(t),function(e,t){if(t&&("object"==f4(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],m4(e).constructor):t.apply(e,r))}function d4(){return(d4="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=m4(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function m4(e){return(m4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g4(e,t){return(g4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var v4=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=y4(this,t,[e,r])).CLASS_NAME="SuperMap.TransferPathService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g4(e,t)}(t,Vw),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=d4(m4(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"processAsync",value:function(e,t){if(e instanceof c4){var r;return this.url=M.urlPathAppend(this.url,"path"),r={points:M.toJSON(e.points),transferLines:M.toJSON(e.transferLines)},this.request({method:"GET",params:r,scope:this,success:t,failure:t})}}}])&&p4(r.prototype,n),o&&p4(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function b4(e){"@babel/helpers - typeof";return(b4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A4(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,w4(n.key),n)}}function w4(e){var t=function(e,t){if("object"!=b4(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=b4(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==b4(t)?t:t+""}var S4=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.solutionCount=6,this.transferPreference=Mn.NONE,this.transferTactic=jn.LESS_TIME,this.walkingRatio=null,this.points=!1,this.evadeLines=null,this.evadeStops=null,this.priorLines=null,this.priorStops=null,this.travelTime=null,M.extend(this,t),this.CLASS_NAME="SuperMap.TransferSolutionParameters"},r=[{key:"toJson",value:function(e){if(e)return M.toJSON(e)}}],(t=[{key:"destroy",value:function(){M.reset(this)}}])&&A4(e.prototype,t),r&&A4(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function C4(e){"@babel/helpers - typeof";return(C4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E4(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_4(n.key),n)}}function _4(e){var t=function(e,t){if("object"!=C4(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=C4(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==C4(t)?t:t+""}function I4(e,t,r){return t=x4(t),function(e,t){if(t&&("object"==C4(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],x4(e).constructor):t.apply(e,r))}function O4(){return(O4="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=x4(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function x4(e){return(x4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P4(e,t){return(P4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var k4=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=I4(this,t,[e,r])).CLASS_NAME="SuperMap.TransferSolutionService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P4(e,t)}(t,Vw),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=O4(x4(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"processAsync",value:function(e,t){if(e instanceof S4){var r;return this.url=M.urlPathAppend(this.url,"solutions"),r={points:M.toJSON(e.points),walkingRatio:e.walkingRatio,transferTactic:e.transferTactic,solutionCount:e.solutionCount,transferPreference:e.transferPreference},e.evadeLines&&(r.evadeLines=M.toJSON(e.evadeLines)),e.evadeStops&&(r.evadeStops=M.toJSON(e.evadeStops)),e.priorLines&&(r.priorLines=M.toJSON(e.priorLines)),e.priorStops&&(r.priorStops=M.toJSON(e.priorStops)),e.travelTime&&(r.travelTime=e.travelTime),this.request({method:"GET",params:r,scope:this,success:t,failure:t})}}}])&&E4(r.prototype,n),o&&E4(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function T4(e){"@babel/helpers - typeof";return(T4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j4(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,M4(n.key),n)}}function M4(e){var t=function(e,t){if("object"!=T4(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=T4(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==T4(t)?t:t+""}var B4=function(){return e=function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=t,this.options=r||{}},(t=[{key:"queryStop",value:function(e,t){var r=this;return new a4(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(e,t)}},{key:"analysisTransferPath",value:function(e,t){var r=this;return new v4(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(e,t)}},{key:"analysisTransferSolution",value:function(e,t){var r=this;return new k4(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(e,t)}}])&&j4(e.prototype,t),r&&j4(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function N4(e){"@babel/helpers - typeof";return(N4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R4(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,L4(n.key),n)}}function L4(e){var t=function(e,t){if("object"!=N4(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=N4(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==N4(t)?t:t+""}function D4(e,t,r){return t=F4(t),function(e,t){if(t&&("object"==N4(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],F4(e).constructor):t.apply(e,r))}function F4(e){return(F4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Q4(e,t){return(Q4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var G4=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=D4(this,t,[e,r]))._trafficTransferAnalystService=new B4(e,r),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Q4(e,t)}(t,Nw),r=t,(n=[{key:"queryStop",value:function(e,t){return this._trafficTransferAnalystService.queryStop(e,t)}},{key:"analysisTransferPath",value:function(e,t){return this._trafficTransferAnalystService.analysisTransferPath(e,t)}},{key:"analysisTransferSolution",value:function(e,t){return this._trafficTransferAnalystService.analysisTransferSolution(e,t)}},{key:"_processParams",value:function(e){return e?(e.transferLines&&!To.isArray(e.transferLines)&&(e.transferLines=[e.transferLines]),e.points&&To.isArray(e.points)&&e.points.map(function(t,r){return e.points[r]=t instanceof o().LngLat?{x:t.lng,y:t.lat}:t,e.points[r]}),e):{}}}])&&R4(r.prototype,n),i&&R4(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,i}();function U4(e){"@babel/helpers - typeof";return(U4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z4(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof s?n:s,l=Object.create(u.prototype);return H4(l,"_invoke",function(r,n,o){var i,s,u,l=0,c=o||[],f=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,r){return i=t,s=0,u=e,p.n=r,a}};function h(r,n){for(s=r,u=n,t=0;!f&&l&&!o&&t<c.length;t++){var o,i=c[t],h=p.p,y=i[2];r>3?(o=y===n)&&(u=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=r<2&&h<i[1])?(s=0,p.v=n,p.n=i[1]):h<y&&(o=r<3||i[0]>n||n>y)&&(i[4]=r,i[5]=n,p.n=y,s=0))}if(o||r>1)return a;throw f=!0,n}return function(o,c,y){if(l>1)throw TypeError("Generator is already running");for(f&&1===c&&h(c,y),s=c,u=y;(t=s<2?e:u)||!f;){i||(s?s<3?(s>1&&(p.n=-1),h(s,u)):p.n=u:p.v=u);try{if(l=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(f=p.n<0)?u:r.call(n,p))!==a)break}catch(t){i=e,s=1,u=t}finally{l=1}}return{value:t,done:f}}}(r,o,i),!0),l}var a={};function s(){}function u(){}function l(){}t=Object.getPrototypeOf;var c=[][n]?t(t([][n]())):(H4(t={},n,function(){return this}),t),f=l.prototype=s.prototype=Object.create(c);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,H4(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=l,H4(f,"constructor",l),H4(l,"constructor",u),u.displayName="GeneratorFunction",H4(l,o,"GeneratorFunction"),H4(f),H4(f,o,"Generator"),H4(f,n,function(){return this}),H4(f,"toString",function(){return"[object Generator]"}),(z4=function(){return{w:i,m:p}})()}function H4(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}(H4=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){H4(e,t,function(e){return this._invoke(t,r,e)})};i("next",0),i("throw",1),i("return",2)}})(e,t,r,n)}function q4(e,t,r,n,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function V4(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){q4(i,n,o,a,s,"next",e)}function s(e){q4(i,n,o,a,s,"throw",e)}a(void 0)})}}function K4(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Y4(n.key),n)}}function Y4(e){var t=function(e,t){if("object"!=U4(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=U4(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==U4(t)?t:t+""}function J4(e,t,r){return t=Z4(t),W4(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],Z4(e).constructor):t.apply(e,r))}function W4(e,t){if(t&&("object"==U4(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function X4(){return(X4="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=Z4(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function Z4(e){return(Z4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $4(e,t){return($4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var e5=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=J4(this,t,[e,r]),r&&M.extend(n,r),n.templates=[],n.CLASS_NAME="SuperMap.WebPrintingService",n.url?n:W4(n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$4(e,t)}(t,Vw),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=X4(Z4(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"createWebPrintingJob",value:function(){var e=V4(z4().m(function e(t,r){return z4().w(function(e){for(;;)switch(e.n){case 0:if(t){e.n=1;break}return e.a(2);case 1:return e.n=2,this._processParams(t);case 2:return e.a(2,this.processAsync("jobs","POST",r,t))}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"getPrintingJob",value:function(e,t){this.rollingProcess(this._processUrl("jobs/".concat(e)),t)}},{key:"getPrintingJobResult",value:function(e,t){return this.processAsync("jobs/".concat(e,"/result"),"GET",t)}},{key:"getLayoutTemplates",value:function(e){return this.processAsync("layouts","GET",e)}},{key:"rollingProcess",value:function(e,t){var r=this;this.id&&clearInterval(this.id),this.id=setInterval(function(){r.request({url:e,method:"GET",scope:r,success:t,failure:t})},1e3)}},{key:"processAsync",value:function(e,t,r,n){var o={url:this._processUrl(e),method:t,scope:this,success:r,failure:r};return n&&(o.data=M.toJSON(n)),this.request(o)}},{key:"transformResult",value:function(e,t){return"FINISHED"===(e=M.transformResult(e)).status||"ERROR"===e.status?clearInterval(this.id):"RUNNING"===e.status&&(t.success=!1),{result:e,options:t}}},{key:"_processUrl",value:function(e){return e?M.urlPathAppend(this.url,e):this.url}},{key:"_processParams",value:function(){var e=V4(z4().m(function e(t){var r,n,o,i,a,s,u,l,c,f,p,h,y,d,m,g,v;return z4().w(function(e){for(;;)switch(e.n){case 0:if(t.layoutOptions){e.n=1;break}return e.a(2);case 1:if(r=t.layoutOptions,n=r.legendOptions,o=r.templateName,n&&(!t.layoutOptions.legendOptions.title&&(t.layoutOptions.legendOptions.title=""),t.layoutOptions.legendOptions.picAsBase64=t.layoutOptions.legendOptions.picAsBase64&&t.layoutOptions.legendOptions.picAsBase64.replace(/^data:.+;base64,/,""),t.layoutOptions.legendOptions.customItems&&t.layoutOptions.legendOptions.customItems.hasOwnProperty("picAsBase64")&&(t.layoutOptions.legendOptions.customItems.picAsBase64=t.layoutOptions.legendOptions.customItems.picAsBase64.replace(/^data:.+;base64,/,""))),this.templates.length){e.n=3;break}return e.n=2,this.getLayoutTemplates();case 2:i=e.v,this.templates=i.result;case 3:a=this.templates.find(function(e){return e.templateName===o}),s=a.layoutOptions,u=s.hasCopyright,l=s.hasSubtitle,c=s.hasAuthor,f=s.hasScaleBar,p=s.hasTitle,h=s.hasTime,y=s.hasSummaryText,d=s.hasLittleMap,m=s.hasNorthArrow,g=s.hasLegend,v=t.layoutOptions,p?void 0===v.title&&(t.layoutOptions.title=null):delete t.layoutOptions.title,l?void 0===v.subTitle&&(t.layoutOptions.subTitle=null):delete t.layoutOptions.subTitle,c?void 0===v.author&&(t.layoutOptions.author=null):delete t.layoutOptions.author,u?void 0===v.copyright&&(t.layoutOptions.copyright=null):delete t.layoutOptions.copyright,y?void 0===v.summaryText&&(t.layoutOptions.summaryText=null):delete t.layoutOptions.summaryText,h?void 0===v.time&&(t.layoutOptions.time=null):delete t.layoutOptions.time,d&&v.littleMapOptions||delete t.layoutOptions.littleMapOptions,f&&v.scaleBarOptions||delete t.layoutOptions.scaleBarOptions,m&&v.northArrowOptions||delete t.layoutOptions.northArrowOptions,g&&v.legendOptions||delete t.layoutOptions.legendOptions;case 4:return e.a(2)}},e,this)}));return function(t){return e.apply(this,arguments)}}()}])&&K4(r.prototype,n),o&&K4(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function t5(e){"@babel/helpers - typeof";return(t5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r5(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n5(n.key),n)}}function n5(e){var t=function(e,t){if("object"!=t5(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=t5(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==t5(t)?t:t+""}function o5(e,t,r){return t=i5(t),function(e,t){if(t&&("object"==t5(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],i5(e).constructor):t.apply(e,r))}function i5(e){return(i5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a5(e,t){return(a5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var s5=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=o5(this,t,[e,r]))._webPrintingService=new e5(e,r),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a5(e,t)}(t,Nw),r=t,(n=[{key:"createWebPrintingJob",value:function(e,t){if(e)return this._webPrintingService.createWebPrintingJob(this._processParams(e),t)}},{key:"getPrintingJob",value:function(e,t){return this._webPrintingService.getPrintingJob(e,t)}},{key:"getPrintingJobResult",value:function(e,t){this._webPrintingService.getPrintingJobResult(e,t)}},{key:"getLayoutTemplates",value:function(e){return this._webPrintingService.getLayoutTemplates(e)}},{key:"_processParams",value:function(e){return e.layoutOptions&&e.layoutOptions.littleMapOptions&&(e.layoutOptions.littleMapOptions.center=this._toPointObject(e.layoutOptions.littleMapOptions.center)),e.exportOptions&&(e.exportOptions.center=this._toPointObject(e.exportOptions.center)),e}},{key:"_toPointObject",value:function(e){return To.isArray(e)?{x:e[0],y:e[1]}:e instanceof ot||e instanceof o().Point?{x:e.x,y:e.y}:e instanceof o().LngLat?{x:e.lng,y:e.lat}:e}}])&&r5(r.prototype,n),i&&r5(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,i}();function u5(e){"@babel/helpers - typeof";return(u5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function c5(e,t,r){return(t=p5(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f5(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,p5(n.key),n)}}function p5(e){var t=function(e,t){if("object"!=u5(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=u5(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==u5(t)?t:t+""}function h5(e,t,r){return t=d5(t),function(e,t){if(t&&("object"==u5(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],d5(e).constructor):t.apply(e,r))}function y5(){return(y5="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=d5(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function d5(e){return(d5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m5(e,t){return(m5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var g5=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=h5(this,t,[e,r])).options=r||{},r&&M.extend(n,r),n.CLASS_NAME="SuperMap.ImageService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m5(e,t)}(t,Vw),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=y5(d5(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"getCollections",value:function(e){var t=M.convertPath("/collections"),r=M.urlPathAppend(this.url,t);return this._processAsync({url:r,mehtod:"GET",callback:e})}},{key:"getCollectionByID",value:function(e,t){var r={collectionId:e},n=M.convertPath("/collections/{collectionId}",r),o=M.urlPathAppend(this.url,n);return this._processAsync({url:o,mehtod:"GET",callback:t})}},{key:"search",value:function(e,t){var r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l5(Object(r),!0).forEach(function(t){c5(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l5(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e||{}),n=M.convertPath("/search"),o=M.urlPathAppend(this.url,n);return this._processAsync({url:o,method:"POST",data:r,callback:t})}},{key:"_processAsync",value:function(e){var t=e.url,r=e.method,n=e.callback,o=e.data;return this.request({method:r||"GET",url:t,data:o,scope:this,success:n,failure:n})}}])&&f5(r.prototype,n),o&&f5(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function v5(e){"@babel/helpers - typeof";return(v5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b5(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,A5(n.key),n)}}function A5(e){var t=function(e,t){if("object"!=v5(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=v5(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==v5(t)?t:t+""}function w5(e,t,r){return t=S5(t),function(e,t){if(t&&("object"==v5(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],S5(e).constructor):t.apply(e,r))}function S5(e){return(S5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C5(e,t){return(C5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var E5=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=w5(this,t,[e,r]))._imageService=new g5(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C5(e,t)}(t,Nw),r=t,(n=[{key:"getCollections",value:function(e){return this._imageService.getCollections(e)}},{key:"getCollectionByID",value:function(e,t){return this._imageService.getCollectionByID(e,t)}},{key:"search",value:function(e,t){return this._imageService.search(e,t)}}])&&b5(r.prototype,n),o&&b5(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function _5(e){"@babel/helpers - typeof";return(_5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I5(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,O5(n.key),n)}}function O5(e){var t=function(e,t){if("object"!=_5(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=_5(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==_5(t)?t:t+""}function x5(e,t,r){return t=k5(t),function(e,t){if(t&&("object"==_5(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],k5(e).constructor):t.apply(e,r))}function P5(){return(P5="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=k5(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function k5(e){return(k5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T5(e,t){return(T5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var j5=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=x5(this,t,[e,r])).options=r||{},r&&M.extend(n,r),n.CLASS_NAME="SuperMap.ImageCollectionService",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T5(e,t)}(t,Vw),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=P5(k5(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"getLegend",value:function(e,t){var r={collectionId:this.options.collectionId};"function"==typeof e&&(t=e,e=null);var n=M.convertPath("/collections/{collectionId}/legend",r),o=M.urlPathAppend(this.url,n);return this._processAsync({url:o,method:"GET",params:e,callback:t})}},{key:"getStatistics",value:function(e){var t={collectionId:this.options.collectionId},r=M.convertPath("/collections/{collectionId}/statistics",t),n=M.urlPathAppend(this.url,r);return this._processAsync({url:n,method:"GET",callback:e})}},{key:"getTileInfo",value:function(e){var t={collectionId:this.options.collectionId},r=M.convertPath("/collections/{collectionId}/tileInfo",t),n=M.urlPathAppend(this.url,r);return this._processAsync({url:n,method:"GET",callback:e})}},{key:"deleteItemByID",value:function(e,t){var r={collectionId:this.options.collectionId,featureId:e},n=M.convertPath("/collections/{collectionId}/items/{featureId}",r),o=M.urlPathAppend(this.url,n);return this._processAsync({url:o,method:"DELETE",callback:t})}},{key:"getItemByID",value:function(e,t){var r={collectionId:this.options.collectionId,featureId:e},n=M.convertPath("/collections/{collectionId}/items/{featureId}",r),o=M.urlPathAppend(this.url,n);return this._processAsync({url:o,method:"GET",callback:t})}},{key:"_processAsync",value:function(e){var t=e.url,r=e.method,n=e.callback,o=e.params;return this.request({method:r||"GET",url:t,params:o,scope:this,success:n,failure:n})}}])&&I5(r.prototype,n),o&&I5(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function M5(e){"@babel/helpers - typeof";return(M5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B5(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,N5(n.key),n)}}function N5(e){var t=function(e,t){if("object"!=M5(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=M5(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==M5(t)?t:t+""}function R5(e,t,r){return t=L5(t),function(e,t){if(t&&("object"==M5(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],L5(e).constructor):t.apply(e,r))}function L5(e){return(L5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D5(e,t){return(D5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var F5=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=R5(this,t,[e,r]))._imageCollectionService=new j5(n.url,{collectionId:n.options.collectionId,proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&D5(e,t)}(t,Nw),r=t,(n=[{key:"getLegend",value:function(e,t){return this._imageCollectionService.getLegend(e,t)}},{key:"getStatistics",value:function(e){return this._imageCollectionService.getStatistics(e)}},{key:"getTileInfo",value:function(e){return this._imageCollectionService.getTileInfo(e)}},{key:"deleteItemByID",value:function(e,t){return this._imageCollectionService.deleteItemByID(e,t)}},{key:"getItemByID",value:function(e,t){return this._imageCollectionService.getItemByID(e,t)}}])&&B5(r.prototype,n),o&&B5(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(),Q5=window.SuperMap=window.SuperMap||{};function G5(e){"@babel/helpers - typeof";return(G5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U5(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,z5(n.key),n)}}function z5(e){var t=function(e,t){if("object"!=G5(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=G5(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==G5(t)?t:t+""}function H5(e,t,r){return t=q5(t),function(e,t){if(t&&("object"==G5(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],q5(e).constructor):t.apply(e,r))}function q5(e){return(q5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function V5(e,t){return(V5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}Q5.Components=window.SuperMap.Components||{};var K5=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=H5(this,t,[e])).regExes={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},r.CLASS_NAME="SuperMap.Format.WKT",r.extract={point:function(e){return e.x+" "+e.y},multipoint:function(e){for(var t=[],r=0,n=e.components.length;r<n;++r)t.push("("+this.extract.point.apply(this,[e.components[r]])+")");return t.join(",")},linestring:function(e){for(var t=[],r=0,n=e.components.length;r<n;++r)t.push(this.extract.point.apply(this,[e.components[r]]));return t.join(",")},multilinestring:function(e){for(var t=[],r=0,n=e.components.length;r<n;++r)t.push("("+this.extract.linestring.apply(this,[e.components[r]])+")");return t.join(",")},polygon:function(e){for(var t=[],r=0,n=e.components.length;r<n;++r)t.push("("+this.extract.linestring.apply(this,[e.components[r]])+")");return t.join(",")},multipolygon:function(e){for(var t=[],r=0,n=e.components.length;r<n;++r)t.push("("+this.extract.polygon.apply(this,[e.components[r]])+")");return t.join(",")},collection:function(e){for(var t=[],r=0,n=e.components.length;r<n;++r)t.push(this.extractGeometry.apply(this,[e.components[r]]));return t.join(",")}},r.parse={point:function(e){var t=p.trim(e).split(this.regExes.spaces);return new pr(new ot(t[0],t[1]))},multipoint:function(e){for(var t,r=p.trim(e).split(","),n=[],o=0,i=r.length;o<i;++o)t=r[o].replace(this.regExes.trimParens,"$1"),n.push(this.parse.point.apply(this,[t]).geometry);return new pr(new bt(n))},linestring:function(e){for(var t=p.trim(e).split(","),r=[],n=0,o=t.length;n<o;++n)r.push(this.parse.point.apply(this,[t[n]]).geometry);return new pr(new Bt(r))},multilinestring:function(e){for(var t,r=p.trim(e).split(this.regExes.parenComma),n=[],o=0,i=r.length;o<i;++o)t=r[o].replace(this.regExes.trimParens,"$1"),n.push(this.parse.linestring.apply(this,[t]).geometry);return new pr(new kr(n))},polygon:function(e){for(var t,r,n,o=p.trim(e).split(this.regExes.parenComma),i=[],a=0,s=o.length;a<s;++a)t=o[a].replace(this.regExes.trimParens,"$1"),r=this.parse.linestring.apply(this,[t]).geometry,n=new zt(r.components),i.push(n);return new pr(new Wt(i))},multipolygon:function(e){for(var t,r=p.trim(e).split(this.regExes.doubleParenComma),n=[],o=0,i=r.length;o<i;++o)t=r[o].replace(this.regExes.trimParens,"$1"),n.push(this.parse.polygon.apply(this,[t]).geometry);return new pr(new Lr(n))},geometrycollection:function(e){e=e.replace(/,\s*([A-Za-z])/g,"|$1");for(var t=p.trim(e).split("|"),r=[],n=0,o=t.length;n<o;++n)r.push(this.read(t[n]));return r}},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&V5(e,t)}(t,mr),r=t,(n=[{key:"read",value:function(e){var t,r,n;e=e.replace(/[\n\r]/g," ");var o=this.regExes.typeStr.exec(e);return o&&(r=o[1].toLowerCase(),n=o[2],this.parse[r]&&(t=this.parse[r].apply(this,[n]))),t}},{key:"write",value:function(e){var t,r,n;e.constructor===Array?(t=e,n=!0):(t=[e],n=!1);var o=[];n&&o.push("GEOMETRYCOLLECTION(");for(var i=0,a=t.length;i<a;++i)n&&i>0&&o.push(","),r=t[i].geometry,o.push(this.extractGeometry(r));return n&&o.push(")"),o.join("")}},{key:"extractGeometry",value:function(e){var t=e.CLASS_NAME.split(".")[2].toLowerCase();return this.extract[t]?("collection"===t?"GEOMETRYCOLLECTION":t.toUpperCase())+"("+this.extract[t].apply(this,[e])+")":null}}])&&U5(r.prototype,n),o&&U5(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Y5(e){"@babel/helpers - typeof";return(Y5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function J5(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,W5(n.key),n)}}function W5(e){var t=function(e,t){if("object"!=Y5(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Y5(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Y5(t)?t:t+""}var X5=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=this;t=t||{},this.speed=t.speed&&t.speed>=0?t.speed:1,this.frequency=t.speed&&t.frequency>=0?t.frequency:1e3,this.startTime=t.startTime&&null!=t.startTime?t.startTime:0,this.endTime=t.endTime&&null!=t.endTime&&t.endTime>=r.startTime?t.endTime:+new Date,this.repeat=void 0===t.repeat||t.repeat,this.reverse=void 0!==t.reverse&&t.reverse,this.currentTime=null,this.oldTime=null,this.running=!1,this.EVENT_TYPES=["start","pause","stop"],r.events=new ja(this,null,this.EVENT_TYPES),r.speed=Number(r.speed),r.frequency=Number(r.frequency),r.startTime=Number(r.startTime),r.endTime=Number(r.endTime),r.startTime=Date.parse(new Date(r.startTime)),r.endTime=Date.parse(new Date(r.endTime)),r.currentTime=r.startTime,this.CLASS_NAME="SuperMap.TimeControlBase"},(t=[{key:"updateOptions",value:function(e){var t=this;(e=e||{}).speed&&e.speed>=0&&(t.speed=e.speed,t.speed=Number(t.speed)),e.speed&&e.frequency>=0&&(t.frequency=e.frequency,t.frequency=Number(t.frequency)),e.startTime&&null!=e.startTime&&(t.startTime=e.startTime,t.startTime=Date.parse(new Date(t.startTime))),e.endTime&&null!=e.endTime&&e.endTime>=t.startTime&&(t.endTime=e.endTime,t.endTime=Date.parse(new Date(t.endTime))),null!=e.repeat&&(t.repeat=e.repeat),null!=e.reverse&&(t.reverse=e.reverse)}},{key:"start",value:function(){var e=this;e.running||(e.running=!0,e.tick(),e.events.triggerEvent("start",e.currentTime))}},{key:"pause",value:function(){this.running=!1,this.events.triggerEvent("pause",this.currentTime)}},{key:"stop",value:function(){var e=this;e.currentTime=e.startTime,e.running&&(e.running=!1),e.events.triggerEvent("stop",e.currentTime)}},{key:"toggle",value:function(){this.running?this.pause():this.start()}},{key:"setSpeed",value:function(e){return e>=0&&(this.speed=e,!0)}},{key:"getSpeed",value:function(){return this.speed}},{key:"setFrequency",value:function(e){return e>=0&&(this.frequency=e,!0)}},{key:"getFrequency",value:function(){return this.frequency}},{key:"setStartTime",value:function(e){var t=this;return!((e=Date.parse(new Date(e)))>t.endTime)&&(t.startTime=e,t.currentTime<t.startTime&&(t.currentTime=t.startTime,t.tick()),!0)}},{key:"getStartTime",value:function(){return this.startTime}},{key:"setEndTime",value:function(e){var t=this;return t.endTime=Date.parse(new Date(t.endTime)),!(e<t.startTime)&&(t.endTime=e,t.currentTime>=t.endTime&&(t.currentTime=t.startTime,t.tick()),!0)}},{key:"getEndTime",value:function(){return this.endTime}},{key:"setCurrentTime",value:function(e){var t=this;return t.currentTime=Date.parse(new Date(t.currentTime)),e>=t.startTime&&e<=t.endTime&&(t.currentTime=e,t.startTime=t.currentTime,t.tick(),!0)}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"setRepeat",value:function(e){this.repeat=e}},{key:"getRepeat",value:function(){return this.repeat}},{key:"setReverse",value:function(e){this.reverse=e}},{key:"getReverse",value:function(){return this.reverse}},{key:"getRunning",value:function(){return this.running}},{key:"destroy",value:function(){var e=this;e.speed=null,e.frequency=null,e.startTime=null,e.endTime=null,e.currentTime=null,e.repeat=null,e.running=!1,e.reverse=null}},{key:"tick",value:function(){}}])&&J5(e.prototype,t),r&&J5(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function Z5(e){"@babel/helpers - typeof";return(Z5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $5(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,e6(n.key),n)}}function e6(e){var t=function(e,t){if("object"!=Z5(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Z5(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Z5(t)?t:t+""}function t6(e,t,r){return t=o6(t),function(e,t){if(t&&("object"==Z5(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],o6(e).constructor):t.apply(e,r))}function r6(e,t,r,n){var o=n6(o6(1&n?e.prototype:e),t,r);return 2&n&&"function"==typeof o?function(e){return o.apply(r,e)}:o}function n6(){return(n6="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=o6(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function o6(e){return(o6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i6(e,t){return(i6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var a6=function(e){function t(e,r){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=n=t6(this,t,[r]);return o.callback=e,Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),r=this,n=function(){},o=function(){return r.apply(this instanceof n&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return n.prototype=this.prototype,o.prototype=new n,o}),o.update=o.update.bind(o),o.oldTime=o.currentTime,o.CLASS_NAME="SuperMap.TimeFlowControl",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i6(e,t)}(t,X5),r=t,(n=[{key:"updateOptions",value:function(e){e=e||{},r6(t,"updateOptions",this,3)([e])}},{key:"start",value:function(){var e=this;e.running||(e.running=!0,e.reverse?e.currentTime===e.startTime&&(e.oldTime=e.endTime,e.currentTime=e.oldTime):e.oldTime===e.endTime&&(e.currentTime=e.startTime,e.oldTime=e.currentTime),e.tick())}},{key:"stop",value:function(){r6(t,"stop",this,3)([]);var e=this;e.oldTime=e.currentTime,e.running&&(e.running=!1),e.intervalId&&window.clearTimeout(e.intervalId)}},{key:"destroy",value:function(){r6(t,"destroy",this,3)([]);this.oldTime=null,this.callback=null}},{key:"tick",value:function(){var e=this;e.intervalId&&window.clearInterval(e.intervalId),e.intervalId=null,e.update(),e.intervalId=window.setInterval(e.update,e.frequency)}},{key:"update",value:function(){var e=this;if(e.running)if(e.callback&&e.callback(e.currentTime),e.reverse){if(e.currentTime===e.startTime){if(!e.repeat)return e.running=!1,null;e.oldTime=e.endTime,e.currentTime=e.oldTime}else e.currentTime=e.oldTime,e.oldTime-=e.speed;e.oldTime<=e.startTime&&(e.oldTime=e.startTime)}else{if(e.currentTime===e.endTime){if(!e.repeat)return e.running=!1,e.stop(),null;e.stop(),e.currentTime=e.startTime,e.oldTime=e.currentTime,e.start()}else e.oldTime=e.currentTime,e.currentTime+=e.speed;e.currentTime>=e.endTime&&(e.currentTime=e.endTime)}}}])&&$5(r.prototype,n),o&&$5(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function s6(e){"@babel/helpers - typeof";return(s6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u6(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l6(n.key),n)}}function l6(e){var t=function(e,t){if("object"!=s6(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=s6(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s6(t)?t:t+""}var c6=function(){return e=function e(t,r){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t){var n=t.substr(t.length-1,1);this.serviceUrl="/"===n?t.substr(0,t.length-2):t}this.options=r||{},this.CLASS_NAME="SuperMap.iManagerServiceBase"},(t=[{key:"request",value:function(e,t,r,n){(n=n||{headers:{Accept:"*/*","Content-Type":"application/json"}}).crossOrigin=this.options.crossOrigin,n.headers=this.options.headers;var o=Fw.imanagerToken;return o&&(n.headers||(n.headers={}),n.headers["X-Auth-Token"]=o),r&&(r=JSON.stringify(r)),z.commit(e,t,r,n).then(function(e){return e.json()})}}])&&u6(e.prototype,t),r&&u6(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function f6(e){"@babel/helpers - typeof";return(f6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p6(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,h6(n.key),n)}}function h6(e){var t=function(e,t){if("object"!=f6(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=f6(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==f6(t)?t:t+""}var y6=function(e,t,r){return t&&p6(e.prototype,t),r&&p6(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.nodeSpec="SMALL",this.nodeCount=1,this.nodeName="",this.password="",this.description="",this.physicalMachineName="",this.ips=[],this.userName="",M.extend(this,t)});function d6(e){"@babel/helpers - typeof";return(d6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m6(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,g6(n.key),n)}}function g6(e){var t=function(e,t){if("object"!=d6(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=d6(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==d6(t)?t:t+""}function v6(e,t,r){return t=b6(t),function(e,t){if(t&&("object"==d6(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],b6(e).constructor):t.apply(e,r))}function b6(e){return(b6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A6(e,t){return(A6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var w6=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),v6(this,t,[e])}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A6(e,t)}(t,c6),r=t,(n=[{key:"load",value:function(){return this.request("GET",this.serviceUrl+"/web/api/service.json")}},{key:"createIServer",value:function(e){return this.request("POST",this.serviceUrl+"/cloud/web/nodes/server.json",new y6(e))}},{key:"createIPortal",value:function(e){return this.request("POST",this.serviceUrl+"/icloud/web/nodes/portal.json",new y6(e))}},{key:"iServerList",value:function(){return this.request("GET",this.serviceUrl+"/cloud/web/nodes/server.json")}},{key:"iPortalList",value:function(){return this.request("GET",this.serviceUrl+"/icloud/web/nodes/portal.json")}},{key:"startNodes",value:function(e){return this.request("POST",this.serviceUrl+"/cloud/web/nodes/started.json",e)}},{key:"stopNodes",value:function(e){return this.request("POST",this.serviceUrl+"/cloud/web/nodes/stopped.json",e)}}])&&m6(r.prototype,n),o&&m6(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function S6(e){"@babel/helpers - typeof";return(S6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C6(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,E6(n.key),n)}}function E6(e){var t=function(e,t){if("object"!=S6(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=S6(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==S6(t)?t:t+""}var _6=function(){return e=function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=r||{},this.serviceUrl=t,this.CLASS_NAME="SuperMap.iPortalServiceBase",this.withCredentials=r.withCredentials||!1,this.crossOrigin=r.crossOrigin,this.headers=r.headers},(t=[{key:"request",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{headers:this.headers,crossOrigin:this.crossOrigin,withCredentials:this.withCredentials};return t=Fw.appendCredential(t),z.commit(e,t,r,n).then(function(e){return e.json()})}}])&&C6(e.prototype,t),r&&C6(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function I6(e){"@babel/helpers - typeof";return(I6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O6(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,x6(n.key),n)}}function x6(e){var t=function(e,t){if("object"!=I6(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=I6(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==I6(t)?t:t+""}var P6=function(e,t,r){return t&&O6(e.prototype,t),r&&O6(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.resourceType="",this.pageSize=12,this.currentPage=1,this.orderBy="UPDATETIME",this.orderType="DESC",this.searchType="PUBLIC",this.tags=[],this.dirIds=[],this.resourceSubTypes=[],this.aggregationTypes=[],this.text="",this.groupIds=[],this.departmentIds=[],M.extend(this,t)});function k6(e){"@babel/helpers - typeof";return(k6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T6(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,j6(n.key),n)}}function j6(e){var t=function(e,t){if("object"!=k6(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=k6(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==k6(t)?t:t+""}var M6=function(e,t,r){return t&&T6(e.prototype,t),r&&T6(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.content=[],this.total=0,this.currentPage=1,this.pageSize=12,this.aggregations=null,M.extend(this,t)});function B6(e){"@babel/helpers - typeof";return(B6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N6(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,R6(n.key),n)}}function R6(e){var t=function(e,t){if("object"!=B6(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=B6(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==B6(t)?t:t+""}function L6(e,t,r){return t=D6(t),function(e,t){if(t&&("object"==B6(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],D6(e).constructor):t.apply(e,r))}function D6(e){return(D6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function F6(e,t){return(F6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Q6=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=L6(this,t,[e]),r=r||{},n.authorizeSetting=[],n.bounds="",n.bounds4326="",n.checkStatus="",n.createTime=0,n.description=null,n.dirId=null,n.epsgCode=0,n.heatLevel=0,n.id=0,n.name="",n.personalDirId=null,n.resourceId=0,n.resourceSubType=null,n.resourceType=null,n.serviceRootUrlId=null,n.tags=null,n.thumbnail=null,n.updateTime=0,n.userName="",n.sourceJSON={},M.extend(n,r),n.resourceUrl=e+"/web/"+n.resourceType.replace("_","").toLowerCase()+"s/"+n.resourceId,n.withCredentials&&(n.resourceUrl=e+"/web/mycontent/"+n.resourceType.replace("_","").toLowerCase()+"s/"+n.resourceId),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&F6(e,t)}(t,_6),r=t,(n=[{key:"load",value:function(){var e=this;return e.request("GET",e.resourceUrl+".json").then(function(t){if(t.error)return t;e.sourceJSON=t})}},{key:"update",value:function(){var e=this.resourceType.replace("_","").toLowerCase();"data"===e&&(this.resourceUrl=this.resourceUrl+"/attributes.json");var t=JSON.stringify(this.sourceJSON);if("service"===e){var r={authorizeSetting:this.sourceJSON.authorizeSetting,metadata:this.sourceJSON.metadata,tags:this.sourceJSON.tags,thumbnail:this.sourceJSON.thumbnail,tokenRefreshUrl:this.sourceJSON.tokenRefreshUrl};t=JSON.stringify(r)}return this.request("PUT",this.resourceUrl,t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})}}])&&N6(r.prototype,n),o&&N6(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function U6(e){"@babel/helpers - typeof";return(U6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z6(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,H6(n.key),n)}}function H6(e){var t=function(e,t){if("object"!=U6(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=U6(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==U6(t)?t:t+""}var q6=function(e,t,r){return t&&z6(e.prototype,t),r&&z6(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.ids=[],this.entities=[],this.resourceType="",M.extend(this,t)});function V6(e){"@babel/helpers - typeof";return(V6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function K6(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Y6(n.key),n)}}function Y6(e){var t=function(e,t){if("object"!=V6(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=V6(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==V6(t)?t:t+""}function J6(e,t,r){return t=W6(t),function(e,t){if(t&&("object"==V6(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],W6(e).constructor):t.apply(e,r))}function W6(e){return(W6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function X6(e,t){return(X6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Z6=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=J6(this,t,[e,r])).iportalUrl=e,r=r||{},n.withCredentials=r.withCredentials||!1,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&X6(e,t)}(t,_6),r=t,(n=[{key:"load",value:function(){return z.get(this.iportalUrl+"/web")}},{key:"queryResources",value:function(e){if(!(e instanceof P6))return new Promise(function(e){e("queryParams is not instanceof iPortalQueryParam !")});var t=this,r=this.iportalUrl+"/gateway/catalog/resource/search.json";return e.t=(new Date).getTime(),this.request("GET",r,e).then(function(e){var r=[];(e.content||[]).forEach(function(e){r.push(new Q6(t.iportalUrl,e))});var n=new M6;return n.content=r,n.total=e.total,n.currentPage=e.currentPage,n.pageSize=e.pageSize,n.aggregations=e.aggregations,n})}},{key:"updateResourcesShareSetting",value:function(e){if(!(e instanceof q6))return new Promise(function(e){e("shareParams is not instanceof iPortalShareParam !")});var t=e.resourceType.replace("_","").toLowerCase()+"s";"datas"===t&&(t="mycontent/"+t);var r={ids:e.ids,entities:e.entities},n=this.iportalUrl+"/web/"+t+"/sharesetting.json";return this.request("PUT",n,JSON.stringify(r)).then(function(e){return e})}}])&&K6(r.prototype,n),o&&K6(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function $6(e){"@babel/helpers - typeof";return($6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function e8(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,t8(n.key),n)}}function t8(e){var t=function(e,t){if("object"!=$6(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=$6(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==$6(t)?t:t+""}var r8=function(e,t,r){return t&&e8(e.prototype,t),r&&e8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.permissionType="",this.entityType="",this.entityName="GUEST",this.entityId=null,M.extend(this,t)});function n8(e){"@babel/helpers - typeof";return(n8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o8(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,i8(n.key),n)}}function i8(e){var t=function(e,t){if("object"!=n8(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=n8(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n8(t)?t:t+""}var a8=function(e,t,r){return t&&o8(e.prototype,t),r&&o8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.rootUrl="",this.tags=[],this.entities=[],M.extend(this,t)});function s8(e){"@babel/helpers - typeof";return(s8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u8(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l8(n.key),n)}}function l8(e){var t=function(e,t){if("object"!=s8(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=s8(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s8(t)?t:t+""}var c8=function(e,t,r){return t&&u8(e.prototype,t),r&&u8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.type="",this.tags=[],this.entities=[],this.metadata={},this.addedMapNames=[],this.addedSceneNames=[],M.extend(this,t)});function f8(e){"@babel/helpers - typeof";return(f8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p8(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,h8(n.key),n)}}function h8(e){var t=function(e,t){if("object"!=f8(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=f8(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==f8(t)?t:t+""}var y8=function(e,t,r){return t&&p8(e.prototype,t),r&&p8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.fileName="",this.type="",this.tags=[],this.dataMetaInfo={},M.extend(this,t)});function d8(e){"@babel/helpers - typeof";return(d8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m8(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,g8(n.key),n)}}function g8(e){var t=function(e,t){if("object"!=d8(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=d8(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==d8(t)?t:t+""}var v8=function(e,t,r){return t&&m8(e.prototype,t),r&&m8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.xField="",this.yField="",this.fileEncoding="UTF-8",this.xIndex=1,this.yIndex=1,this.fieldTypes=[],this.separator="",this.firstRowIsHead=!0,this.url="",this.dataStoreInfo={},M.extend(this,t)});function b8(e){"@babel/helpers - typeof";return(b8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A8(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,w8(n.key),n)}}function w8(e){var t=function(e,t){if("object"!=b8(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=b8(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==b8(t)?t:t+""}var S8=function(e,t,r){return t&&A8(e.prototype,t),r&&A8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.type="",this.url="",this.connectionInfo={},M.extend(this,t)});function C8(e){"@babel/helpers - typeof";return(C8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E8(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_8(n.key),n)}}function _8(e){var t=function(e,t){if("object"!=C8(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=C8(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==C8(t)?t:t+""}var I8=function(e,t,r){return t&&E8(e.prototype,t),r&&E8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.dataBase="",this.server="",M.extend(this,t)});function O8(e){"@babel/helpers - typeof";return(O8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x8(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,P8(n.key),n)}}function P8(e){var t=function(e,t){if("object"!=O8(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=O8(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==O8(t)?t:t+""}function k8(e,t,r){return t=T8(t),function(e,t){if(t&&("object"==O8(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],T8(e).constructor):t.apply(e,r))}function T8(e){return(T8=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j8(e,t){return(j8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var M8=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=k8(this,t,[e])).iportalUrl=e,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j8(e,t)}(t,_6),r=t,(n=[{key:"deleteResources",value:function(e){var t=e.resourceType.replace("_","").toLowerCase(),r=this.iportalUrl+"/web/"+t+"s.json?ids="+encodeURI(JSON.stringify(e.ids));return"data"===t?(r=this.iportalUrl+"/web/mycontent/datas/delete.json",this.request("POST",r,JSON.stringify(e.ids))):this.request("DELETE",r)}},{key:"addMap",value:function(e){if(!(e instanceof a8))return this.getErrMsgPromise("addMapParams is not instanceof IPortalAddResourceParam !");var t={rootUrl:e.rootUrl,tags:e.tags,authorizeSetting:e.entities},r=this.iportalUrl+"/web/maps/batchaddmaps.json";return this.request("POST",r,JSON.stringify(t)).then(function(e){return e})}},{key:"addScene",value:function(e){if(!(e instanceof a8))return this.getErrMsgPromise("addSceneParams is not instanceof IPortalAddResourceParam !");var t={rootUrl:e.rootUrl,tags:e.tags,authorizeSetting:e.entities},r=this.iportalUrl+"/web/scenes/batchaddscenes.json";return this.request("POST",r,JSON.stringify(t)).then(function(e){return e})}},{key:"registerService",value:function(e){if(!(e instanceof c8))return this.getErrMsgPromise("registerParams is not instanceof IPortalRegisterServiceParam !");var t={type:e.type,tags:e.tags,authorizeSetting:e.entities,metadata:e.metadata,addedMapNames:e.addedMapNames,addedSceneNames:e.addedSceneNames},r=this.iportalUrl+"/web/services.json";return this.request("POST",r,JSON.stringify(t)).then(function(e){return e})}},{key:"getErrMsgPromise",value:function(e){return new Promise(function(t){t(e)})}},{key:"uploadDataRequest",value:function(e,t){var r=this.iportalUrl+"/web/mycontent/datas/"+e+"/upload.json";return this.request("POST",r,t)}},{key:"addData",value:function(e,t){var r=this;if(!(e instanceof y8))return this.getErrMsgPromise("params is not instanceof iPortalAddDataParam !");var n,o=this.iportalUrl+"/web/mycontent/datas.json",i={fileName:e.fileName,tags:e.tags,type:e.type},a=e.type.toLowerCase();if("excel"===a||"csv"===a){if(!(e.dataMetaInfo instanceof v8))return this.getErrMsgPromise("params.dataMetaInfo is not instanceof iPortalDataMetaInfoParam !");n={xField:e.dataMetaInfo.xField,yField:e.dataMetaInfo.yField},"csv"===a&&(n.fileEncoding=e.dataMetaInfo.fileEncoding),i.coordType="WGS84",i.dataMetaInfo=n}else if("hdfs"===a||"hbase"===a){if(!(e.dataMetaInfo instanceof v8))return this.getErrMsgPromise("params.dataMetaInfo is not instanceof iPortalDataMetaInfoParam !");if(!(e.dataMetaInfo.dataStoreInfo instanceof S8))return this.getErrMsgPromise("params.dataMetaInfo.dataStoreInfo is not instanceof iPortalDataStoreInfoParam !");var s={type:e.dataMetaInfo.dataStoreInfo.type};switch(a){case"hdfs":s.url=e.dataMetaInfo.dataStoreInfo.url,n={url:e.dataMetaInfo.url,dataStoreInfo:s};break;case"hbase":if(!(e.dataMetaInfo.dataStoreInfo.connectionInfo instanceof I8))return this.getErrMsgPromise("params.dataMetaInfo.dataStoreInfo.connectionInfo is not instanceof iPortalDataConnectionInfoParam !");s.connectionInfo={dataBase:e.dataMetaInfo.dataStoreInfo.connectionInfo.dataBase,server:e.dataMetaInfo.dataStoreInfo.connectionInfo.server,engineType:"HBASE"},s.datastoreType="SPATIAL",n={dataStoreInfo:s}}i.dataMetaInfo=n}return this.request("POST",o,JSON.stringify(i)).then(function(e){return"hdfs"===a||"hbase"===a?e:e.childID?r.uploadDataRequest(e.childID,t):e.customResult})}},{key:"publishOrUnpublish",value:function(e,t){if(!e.dataId||!e.serviceType)return this.getErrMsgPromise("option.dataID and option.serviceType are Required!");var r=e.dataId,n=e.dataServiceId,o=e.serviceType,i=this.iportalUrl+"/web/mycontent/datas/"+r+"/publishstatus.json?serviceType="+o;return n&&(i+="&dataServiceId="+n),this.request("PUT",i,JSON.stringify(t)).then(function(e){return t?(n||(n=e.customResult),n):e})}},{key:"getDataPublishedStatus",value:function(e,t){var r=this.iportalUrl+"/web/mycontent/datas/"+e+"/publishstatus.json?dataServiceId="+t+"&forPublish=true";return this.request("GET",r)}},{key:"unPublishDataService",value:function(e){return this.publishOrUnpublish(e,!1)}},{key:"publishDataService",value:function(e){return this.publishOrUnpublish(e,!0)}}])&&x8(r.prototype,n),o&&x8(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function B8(e){"@babel/helpers - typeof";return(B8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N8(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,R8(n.key),n)}}function R8(e){var t=function(e,t){if("object"!=B8(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=B8(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==B8(t)?t:t+""}var L8=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.aggName=null,this.aggFieldName=null,this.CLASS_NAME="SuperMap.AggregationParameter",M.extend(this,t)},(t=[{key:"destroy",value:function(){this.aggName=null,this.aggFieldName=null,this.aggType=null}}])&&N8(e.prototype,t),r&&N8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function D8(e){"@babel/helpers - typeof";return(D8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F8(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Q8(n.key),n)}}function Q8(e){var t=function(e,t){if("object"!=D8(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=D8(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==D8(t)?t:t+""}function G8(e,t,r){return t=U8(t),function(e,t){if(t&&("object"==D8(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],U8(e).constructor):t.apply(e,r))}function U8(e){return(U8=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function z8(e,t){return(z8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var H8=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=G8(this,t)).subAggs=null,r.aggType=null,r.CLASS_NAME="SuperMap.BucketAggParameter",M.extend(r,e),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&z8(e,t)}(t,L8),r=t,(n=[{key:"destroy",value:function(){this.subAggs&&(this.subAggs=null)}}])&&F8(r.prototype,n),o&&F8(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function q8(e){"@babel/helpers - typeof";return(q8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function V8(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,K8(n.key),n)}}function K8(e){var t=function(e,t){if("object"!=q8(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=q8(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==q8(t)?t:t+""}function Y8(e,t,r){return t=W8(t),function(e,t){if(t&&("object"==q8(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],W8(e).constructor):t.apply(e,r))}function J8(){return(J8="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=W8(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function W8(e){return(W8=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function X8(e,t){return(X8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Z8=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Y8(this,t)).aggType=Hn.AVG,M.extend(r,e),r.CLASS_NAME="SuperMap.MetricsAggParameter",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&X8(e,t)}(t,L8),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=J8(W8(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([]);this.aggType=null}}])&&V8(r.prototype,n),o&&V8(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function $8(e){"@babel/helpers - typeof";return($8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function e9(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,t9(n.key),n)}}function t9(e){var t=function(e,t){if("object"!=$8(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=$8(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==$8(t)?t:t+""}var r9=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.displayModeChart=Jn.STANDARD,this.colourModeChart=Yn.DAY_BRIGHT,this.displayTypeName="S52",this.fontName="Arial",this.simplifiedMarker=!0,this.symbolizedAreaBoundary=!1,this.displayTextMessage=!1,this.displaySounding=!1,this.minVisibleScaleEnabled=!0,this.localizationDisplayText=!1,this.displayMetaObject=!1,this.displayCellName=!1,this.displaySafetyContourLabel=!1,this.displayBorder=!1,this.safetyContour=30,this.shallowContour=2,this.deepContour=30,this.safetyDepth=30,this.displayOtherContourLabel=!1,this.displayTwoShades=!1,this.depthUnit=hn.METER,this.fontSize=10,this.displayableFeature=null,this.selectableFeature=null,this.textClipRegionEnabled=!1,this.displayLowAccurateMarker=!0,this.displayScaleFactor=.05,this.displayableAcronymClassify=null,t&&M.extend(this,t),this.CLASS_NAME="SuperMap.ChartSetting"},(t=[{key:"destroy",value:function(){this.displayModeChart=null,this.colourModeChart=null,this.displayTypeName=null,this.fontName=null,this.simplifiedMarker=null,this.symbolizedAreaBoundary=null,this.displayTextMessage=null,this.displaySounding=null,this.minVisibleScaleEnabled=null,this.localizationDisplayText=null,this.displayMetaObject=null,this.displayCellName=null,this.displaySafetyContourLabel=null,this.displayBorder=null,this.safetyContour=null,this.shallowContour=null,this.deepContour=null,this.safetyDepth=null,this.displayOtherContourLabel=null,this.displayTwoShades=null,this.depthUnit=null,this.fontSize=null,this.displayableFeature=null,this.selectableFeature=null,this.textClipRegionEnabled=null,this.displayLowAccurateMarker=null,this.displayScaleFactor=null,this.displayableAcronymClassify=null}}])&&e9(e.prototype,t),r&&e9(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function n9(e){"@babel/helpers - typeof";return(n9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o9(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,i9(n.key),n)}}function i9(e){var t=function(e,t){if("object"!=n9(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=n9(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n9(t)?t:t+""}var a9=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.clipDatasetName=null,this.clipDatasourceName=null,this.clipRegion=null,this.isClipInRegion=!0,this.isExactClip=null,t&&M.extend(this,t),this.CLASS_NAME="SuperMap.ClipParameter"},(t=[{key:"destroy",value:function(){var e=this;e.clipDatasetName=null,e.clipDatasourceName=null,e.clipRegion=null,e.isClipInRegion=null,e.isExactClip=null}},{key:"toJSON",value:function(){return M.toJSON({isClipInRegion:this.isClipInRegion,clipDatasetName:this.clipDatasetName,clipDatasourceName:this.clipDatasourceName,isExactClip:this.isExactClip,clipRegion:$n.fromGeometry(this.clipRegion)})}}])&&o9(e.prototype,t),r&&o9(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function s9(e){"@babel/helpers - typeof";return(s9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u9(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l9(n.key),n)}}function l9(e){var t=function(e,t){if("object"!=s9(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=s9(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s9(t)?t:t+""}function c9(e,t,r){return t=p9(t),function(e,t){if(t&&("object"==s9(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],p9(e).constructor):t.apply(e,r))}function f9(){return(f9="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=p9(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function p9(e){return(p9=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h9(e,t){return(h9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var y9=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=c9(this,t)).precision=5,M.extend(r,e),r.aggType=zn.GEOHASH_GRID,r.CLASS_NAME="SuperMap.GeoHashGridAggParameter",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h9(e,t)}(t,H8),r=t,n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=f9(p9(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([]),this.aggType=null,this.precision=null}}],o=[{key:"toJsonParameters",value:function(e){var t={aggName:e.aggName,aggFieldName:e.aggFieldName,aggType:e.aggType,precision:e.precision};return M.toJson(t)}}],n&&u9(r.prototype,n),o&&u9(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function d9(e){"@babel/helpers - typeof";return(d9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m9(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,g9(n.key),n)}}function g9(e){var t=function(e,t){if("object"!=d9(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=d9(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==d9(t)?t:t+""}var v9=function(e,t,r){return t&&m9(e.prototype,t),r&&m9(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.CLASS_NAME="LabelMatrixCell"});function b9(e){"@babel/helpers - typeof";return(b9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A9(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,w9(n.key),n)}}function w9(e){var t=function(e,t){if("object"!=b9(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=b9(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==b9(t)?t:t+""}function S9(e,t,r){return t=C9(t),function(e,t){if(t&&("object"==b9(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],C9(e).constructor):t.apply(e,r))}function C9(e){return(C9=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E9(e,t){return(E9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var _9=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=S9(this,t,[e])).height=0,r.pathField=null,r.rotation=0,r.width=0,r.sizeFixed=!1,r.type="IMAGE",e&&M.extend(r,e),r.CLASS_NAME="SuperMap.LabelImageCell",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E9(e,t)}(t,v9),r=t,(n=[{key:"destroy",value:function(){var e=this;e.height=null,e.pathField=null,e.rotation=null,e.width=null,e.sizeFixed=null}}])&&A9(r.prototype,n),o&&A9(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function I9(e){"@babel/helpers - typeof";return(I9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O9(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,x9(n.key),n)}}function x9(e){var t=function(e,t){if("object"!=I9(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=I9(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==I9(t)?t:t+""}function P9(e,t,r){return t=k9(t),function(e,t){if(t&&("object"==I9(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],k9(e).constructor):t.apply(e,r))}function k9(e){return(k9=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T9(e,t){return(T9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var j9=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=P9(this,t,[e])).style=new qr,r.symbolIDField=null,r.type="SYMBOL",e&&M.extend(r,e),r.CLASS_NAME="SuperMap.LabelSymbolCell",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T9(e,t)}(t,v9),r=t,(n=[{key:"destroy",value:function(){this.style&&(this.style.destroy(),this.style=null),this.symbolIDField=null}}])&&O9(r.prototype,n),o&&O9(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function M9(e){"@babel/helpers - typeof";return(M9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B9(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,N9(n.key),n)}}function N9(e){var t=function(e,t){if("object"!=M9(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=M9(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==M9(t)?t:t+""}function R9(e,t,r){return t=L9(t),function(e,t){if(t&&("object"==M9(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],L9(e).constructor):t.apply(e,r))}function L9(e){return(L9=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D9(e,t){return(D9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var F9=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=R9(this,t,[e])).themeLabel=new rL,r.type="THEME",e&&M.extend(r,e),r.CLASS_NAME=" SuperMap.LabelThemeCell",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&D9(e,t)}(t,v9),r=t,(n=[{key:"destroy",value:function(){this.themeLabel&&(this.themeLabel.destroy(),this.themeLabel=null)}}])&&B9(r.prototype,n),o&&B9(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Q9(e){"@babel/helpers - typeof";return(Q9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G9(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,U9(n.key),n)}}function U9(e){var t=function(e,t){if("object"!=Q9(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Q9(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Q9(t)?t:t+""}var z9=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.layerName=null,this.isVisible=null,this.displayFilter=null,this.fieldValuesDisplayFilter=null,t&&M.extend(this,t),this.CLASS_NAME="SuperMap.LayerStatus"},(t=[{key:"destroy",value:function(){this.layerName=null,this.isVisible=null,this.displayFilter=null}},{key:"toJSON",value:function(){var e="{";e+='"type":"UGC",';var t=[];return this.layerName&&(t.push('"name":"'+this.layerName+'"'),t.push('"visible":'+this.isVisible)),this.displayFilter&&t.push('"displayFilter":"'+this.displayFilter+'"'),(this.minScale||0==this.minScale)&&t.push('"minScale":'+this.minScale),(this.maxScale||0==this.maxScale)&&t.push('"maxScale":'+this.maxScale),this.fieldValuesDisplayFilter&&t.push('"fieldValuesDisplayFilter":'+M.toJSON(this.fieldValuesDisplayFilter)),e+=t,e+="}"}}])&&G9(e.prototype,t),r&&G9(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function H9(e){"@babel/helpers - typeof";return(H9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q9(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,V9(n.key),n)}}function V9(e){var t=function(e,t){if("object"!=H9(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=H9(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==H9(t)?t:t+""}var K9=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasourceConnectionInfo=null,this.foreignKeys=null,this.foreignTable=null,this.linkFields=null,this.linkFilter=null,this.name=null,this.primaryKeys=null,t&&M.extend(this,t),this.CLASS_NAME="SuperMap.LinkItem"},(t=[{key:"destroy",value:function(){var e=this;e.datasourceConnectionInfo instanceof NV&&(e.datasourceConnectionInfo.destroy(),e.datasourceConnectionInfo=null),e.foreignKeys=null,e.foreignTable=null,e.linkFields=null,e.linkFilter=null,e.name=null,e.primaryKeys=null}}])&&q9(e.prototype,t),r&&q9(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function Y9(e){"@babel/helpers - typeof";return(Y9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function J9(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,W9(n.key),n)}}function W9(e){var t=function(e,t){if("object"!=Y9(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Y9(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Y9(t)?t:t+""}var X9=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.allowPointOverlap=!0,this.allowPointWithTextDisplay=!0,this.allowTextOverlap=!1,this.allowTextAndPointOverlap=!0,this.allowThemeGraduatedSymbolOverlap=!1,this.allowThemeGraphOverlap=!1,this.horizontalOverlappedSpaceSize=0,this.verticalOverlappedSpaceSize=0,M.extend(this,t),this.ugcLayer=new dD(t),this.CLASS_NAME="SuperMap.OverlapDisplayedOptions"},(t=[{key:"destroy",value:function(){M.reset(this)}},{key:"fromJson",value:function(e){this.ugcLayer.fromJson.apply(this,[e])}},{key:"toServerJSONObject",value:function(){return this.ugcLayer.toServerJSONObject.apply(this,arguments)}},{key:"toString",value:function(){var e=this.ugcLayer.toServerJSONObject.apply(this,arguments),t="{";for(var r in e)e.hasOwnProperty(r)&&(t+="'"+r+"':"+e[r]+",");return t=t.substr(0,t.length-1),t+="}"}}])&&J9(e.prototype,t),r&&J9(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function Z9(e){"@babel/helpers - typeof";return(Z9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $9(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,e7(n.key),n)}}function e7(e){var t=function(e,t){if("object"!=Z9(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Z9(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Z9(t)?t:t+""}var t7=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.model=null,this.resultSetting=null,t&&M.extend(this,t),this.CLASS_NAME="SuperMap.ConvexHullAnalystParameters"},(t=[{key:"destroy",value:function(){this.model=null,this.resultSetting=null}}])&&$9(e.prototype,t),r&&$9(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function r7(e){"@babel/helpers - typeof";return(r7="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n7(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,o7(n.key),n)}}function o7(e){var t=function(e,t){if("object"!=r7(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=r7(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r7(t)?t:t+""}var i7=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.bbox=null,this.layers=null,this.transparent=null,this.mapScale=null,this.returnVisibleOnly=null,this.width=null,this.height=null,M.extend(this,t),this.CLASS_NAME="SuperMap.GetLayersLegendInfoParameters"},(t=[{key:"destroy",value:function(){var e=this;e.bbox=null,e.layers=null,e.transparent=null,e.mapScale=null,e.returnVisibleOnly=null,e.width=null,e.height=null}}])&&n7(e.prototype,t),r&&n7(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function a7(e){"@babel/helpers - typeof";return(a7="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s7(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,u7(n.key),n)}}function u7(e){var t=function(e,t){if("object"!=a7(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=a7(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a7(t)?t:t+""}var l7=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.resourceID=null,this.tempLayerName=null,this.layerInfo=null,M.extend(this,t),this.CLASS_NAME="SuperMap.SetLayerInfoParameters"},(t=[{key:"destroy",value:function(){this.resourceID=null,this.tempLayerName=null,this.layerInfo=null}}])&&s7(e.prototype,t),r&&s7(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function c7(e){"@babel/helpers - typeof";return(c7="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f7(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,p7(n.key),n)}}function p7(e){var t=function(e,t){if("object"!=c7(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=c7(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==c7(t)?t:t+""}var h7=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.isTempLayers=null,this.resourceID=null,this.layersInfo=null,M.extend(this,t),this.CLASS_NAME="SuperMap.SetLayersInfoParameters"},(t=[{key:"destroy",value:function(){this.isTempLayers=null,this.resourceID=null,this.layersInfo=null}}])&&f7(e.prototype,t),r&&f7(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function y7(e){"@babel/helpers - typeof";return(y7="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d7(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,m7(n.key),n)}}function m7(e){var t=function(e,t){if("object"!=y7(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=y7(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==y7(t)?t:t+""}var g7=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.maxWeight=null,this.nodeID=null,this.resourceValue=null,this.type=null,t&&M.extend(this,t),this.CLASS_NAME="SuperMap.SupplyCenter"}return t=e,n=[{key:"fromJson",value:function(t){if(t)return new e({maxWeight:t.maxWeight,nodeID:t.nodeID,resourceValue:t.resourceValue,type:t.type})}}],(r=[{key:"destroy",value:function(){this.maxWeight=null,this.nodeID=null,this.resourceValue=null,this.type=null}}])&&d7(t.prototype,r),n&&d7(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function v7(e){"@babel/helpers - typeof";return(v7="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b7(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,A7(n.key),n)}}function A7(e){var t=function(e,t){if("object"!=v7(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=v7(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==v7(t)?t:t+""}var w7=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.bounds=null,this.boundsType=Vn.MAX,this.cellSize=null,this.cellSizeType=Kn.UNION,M.extend(this,t),this.CLASS_NAME="SuperMap.terrainAnalystSetting"},(t=[{key:"destroy",value:function(){this.bounds=null,this.boundsType=null,this.cellSize=null,this.cellSizeType=null}}])&&b7(e.prototype,t),r&&b7(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function S7(e){"@babel/helpers - typeof";return(S7="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C7(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,E7(n.key),n)}}function E7(e){var t=function(e,t){if("object"!=S7(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=S7(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==S7(t)?t:t+""}var _7=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.flowEnabled=!1,this.leaderLineDisplayed=!1,this.leaderLineStyle=new qr,t&&M.extend(this,t),this.CLASS_NAME="SuperMap.ThemeFlow"}return t=e,n=[{key:"fromObj",value:function(t){if(t){var r=new e;return M.copy(r,t),r.leaderLineStyle=qr.fromJson(t.leaderLineStyle),r}}}],(r=[{key:"destroy",value:function(){var e=this;e.flowEnabled=null,e.leaderLineDisplayed=null,e.leaderLineStyle&&(e.leaderLineStyle.destroy(),e.leaderLineStyle=null)}}])&&C7(t.prototype,r),n&&C7(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function I7(e){"@babel/helpers - typeof";return(I7="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O7(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,x7(n.key),n)}}function x7(e){var t=function(e,t){if("object"!=I7(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=I7(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==I7(t)?t:t+""}var P7=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.caption=null,this.color=new Gr,this.end=0,this.start=0,this.visible=!0,t&&M.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGridRangeItem"}return t=e,n=[{key:"fromObj",value:function(t){if(t){var r=new e;return M.copy(r,t),r.color=Gr.fromJson(t.color),r}}}],(r=[{key:"destroy",value:function(){var e=this;e.caption=null,e.end=null,e.start=null,e.color&&(e.color.destroy(),e.color=null),e.visible=null}},{key:"toServerJSONObject",value:function(){var e={};return(e=M.copyAttributes(e,this)).color&&e.color.toServerJSONObject&&(e.color=e.color.toServerJSONObject()),e}}])&&O7(t.prototype,r),n&&O7(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function k7(e){"@babel/helpers - typeof";return(k7="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T7(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,j7(n.key),n)}}function j7(e){var t=function(e,t){if("object"!=k7(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=k7(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==k7(t)?t:t+""}function M7(e,t,r){return t=N7(t),function(e,t){if(t&&("object"==k7(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],N7(e).constructor):t.apply(e,r))}function B7(){return(B7="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=N7(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function N7(e){return(N7=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R7(e,t){return(R7=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var D7=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=M7(this,t,["GRIDRANGE",e])).items=null,r.rangeMode=bn.EQUALINTERVAL,r.rangeParameter=0,r.colorGradientType=An.YELLOW_RED,r.reverseColor=!1,e&&M.extend(r,e),r.CLASS_NAME="SuperMap.ThemeGridRange",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R7(e,t)}(t,mR),r=t,n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=B7(N7(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([]);var a=this;if(a.items){if(a.items.length>0)for(var s in a.items)a.items[s].destroy(),a.items[s]=null;a.items=null}a.reverseColor=null,a.rangeMode=null,a.rangeParameter=null,a.colorGradientType=null}}],o=[{key:"fromObj",value:function(e){if(e){var r=new t;M.copy(r,e);var n=e.items,o=n?n.length:0;r.items=[];for(var i=0;i<o;i++)r.items.push(P7.fromObj(n[i]));return r}}}],n&&T7(r.prototype,n),o&&T7(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function F7(e){"@babel/helpers - typeof";return(F7="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Q7(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,G7(n.key),n)}}function G7(e){var t=function(e,t){if("object"!=F7(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=F7(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==F7(t)?t:t+""}var U7=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.caption=null,this.color=new Gr,this.unique=null,this.visible=!0,t&&M.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGridUniqueItem"}return t=e,n=[{key:"fromObj",value:function(t){var r=new e;return M.copy(r,t),r.color=Gr.fromJson(t.color),r}}],(r=[{key:"destroy",value:function(){var e=this;e.caption=null,e.unique=null,e.color&&(e.color.destroy(),e.color=null),e.visible=null}},{key:"toServerJSONObject",value:function(){var e={};return(e=M.copyAttributes(e,this)).color&&e.color.toServerJSONObject&&(e.color=e.color.toServerJSONObject()),e}}])&&Q7(t.prototype,r),n&&Q7(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function z7(e){"@babel/helpers - typeof";return(z7="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H7(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,q7(n.key),n)}}function q7(e){var t=function(e,t){if("object"!=z7(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=z7(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==z7(t)?t:t+""}function V7(e,t,r){return t=Y7(t),function(e,t){if(t&&("object"==z7(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],Y7(e).constructor):t.apply(e,r))}function K7(){return(K7="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=Y7(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function Y7(e){return(Y7=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function J7(e,t){return(J7=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var W7=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=V7(this,t,["GRIDUNIQUE",e])).defaultcolor=new Gr,r.items=null,e&&M.extend(r,e),r.CLASS_NAME="SuperMap.ThemeGridUnique",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&J7(e,t)}(t,mR),r=t,n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=K7(Y7(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([]);var a=this;if(a.items){if(a.items.length>0)for(var s in a.items)a.items[s].destroy(),a.items[s]=null;a.items=null}a.defaultcolor&&(a.defaultcolor.destroy(),a.defaultcolor=null)}},{key:"toServerJSONObject",value:function(){var e={};if((e=M.copyAttributes(e,this)).defaultcolor&&e.defaultcolor.toServerJSONObject&&(e.defaultcolor=e.defaultcolor.toServerJSONObject()),e.items){for(var t=[],r=e.items.length,n=0;n<r;n++)t.push(e.items[n].toServerJSONObject());e.items=t}return e}}],o=[{key:"fromObj",value:function(e){var r=new t,n=e.items,o=n?n.length:0;M.extend(r,e),r.items=[],r.defaultcolor=Gr.fromJson(e.defaultcolor);for(var i=0;i<o;i++)r.items.push(U7.fromObj(n[i]));return r}}],n&&H7(r.prototype,n),o&&H7(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function X7(e){"@babel/helpers - typeof";return(X7="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Z7(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,$7(n.key),n)}}function $7(e){var t=function(e,t){if("object"!=X7(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=X7(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==X7(t)?t:t+""}var eee=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.caption=null,this.unique=null,this.offsetX=0,this.offsetY=0,this.visible=!0,this.style=new AR,t&&M.extend(this,t),this.CLASS_NAME="SuperMap.ThemeLabelUniqueItem"}return t=e,n=[{key:"fromObj",value:function(t){if(t){var r=new e;return M.copy(r,t),r}}}],(r=[{key:"destroy",value:function(){var e=this;e.unique=null,e.caption=null,e.offsetX=null,e.offsetY=null,e.style&&(e.style.destroy(),e.style=null),e.visible=null}}])&&Z7(t.prototype,r),n&&Z7(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function tee(e){"@babel/helpers - typeof";return(tee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ree(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,nee(n.key),n)}}function nee(e){var t=function(e,t){if("object"!=tee(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=tee(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==tee(t)?t:t+""}var oee=function(){return e=function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.srcData=t,this.targetData=r,this.CLASS_NAME="SuperMap.ThemeMemoryData"},(t=[{key:"destroy",value:function(){this.srcData=null,this.targetData=null}},{key:"toJSON",value:function(){if(this.srcData&&this.targetData){for(var e="",t=Math.min(this.srcData.length,this.targetData.length),r=0;r<t;r++)e+="'"+this.srcData[r]+"':'"+this.targetData[r]+"',";return r>0&&(e=e.substring(0,e.length-1)),"{"+e+"}"}return null}}])&&ree(e.prototype,t),r&&ree(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function iee(e){"@babel/helpers - typeof";return(iee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function aee(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,see(n.key),n)}}function see(e){var t=function(e,t){if("object"!=iee(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=iee(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==iee(t)?t:t+""}var uee=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.lineID=null,this.lineName=null,this.lineAliasName=null,this.startStopIndex=null,this.startStopName=null,this.startStopAliasName=null,this.endStopIndex=null,this.endStopName=null,this.endStopAliasName=null,M.extend(this,t),this.CLASS_NAME="SuperMap.TransferLine"}return t=e,n=[{key:"fromJson",value:function(t){if(t)return new e({lineID:t.lineID,lineName:t.lineName,lineAliasName:t.lineAliasName,startStopIndex:t.startStopIndex,startStopName:t.startStopName,startStopAliasName:t.startStopAliasName,endStopIndex:t.endStopIndex,endStopName:t.endStopName,endStopAliasName:t.endStopAliasName})}}],(r=[{key:"destroy",value:function(){M.reset(this)}}])&&aee(t.prototype,r),n&&aee(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function lee(e){"@babel/helpers - typeof";return(lee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cee(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,fee(n.key),n)}}function fee(e){var t=function(e,t){if("object"!=lee(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=lee(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==lee(t)?t:t+""}var pee=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.type=null,M.extend(this,t),this.CLASS_NAME="SuperMap.RasterFunctionParameter"},(t=[{key:"destroy",value:function(){this.type=null}}])&&cee(e.prototype,t),r&&cee(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function hee(e){"@babel/helpers - typeof";return(hee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yee(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,dee(n.key),n)}}function dee(e){var t=function(e,t){if("object"!=hee(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=hee(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==hee(t)?t:t+""}function mee(e,t,r){return t=vee(t),function(e,t){if(t&&("object"==hee(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],vee(e).constructor):t.apply(e,r))}function gee(){return(gee="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=vee(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function vee(e){return(vee=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bee(e,t){return(bee=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Aee=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=mee(this,t,[e])).redIndex=0,r.nirIndex=1,r.colorMap="0:ffffe5ff;0.1:f7fcb9ff;0.2:d9f0a3ff;0.3:addd8eff;0.4:78c679ff;0.5:41ab5dff;0.6:238443ff;0.7:006837ff;1:004529ff",r.type=qn.NDVI,M.extend(r,e),r.CLASS_NAME="SuperMap.NDVIParameter",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bee(e,t)}(t,pee),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=gee(vee(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([]),this.redIndex=null,this.nirIndex=null,this.colorMap=null}},{key:"toJSON",value:function(){return{redIndex:this.redIndex,nirIndex:this.nirIndex,colorMap:this.colorMap,type:this.type}}}])&&yee(r.prototype,n),o&&yee(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function wee(e){"@babel/helpers - typeof";return(wee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function See(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Cee(n.key),n)}}function Cee(e){var t=function(e,t){if("object"!=wee(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=wee(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==wee(t)?t:t+""}function Eee(e,t,r){return t=Iee(t),function(e,t){if(t&&("object"==wee(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],Iee(e).constructor):t.apply(e,r))}function _ee(){return(_ee="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=Iee(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function Iee(e){return(Iee=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Oee(e,t){return(Oee=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var xee=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Eee(this,t,[e])).altitude=45,r.azimuth=315,r.zFactor=1,r.type=qn.HILLSHADE,M.extend(r,e),r.CLASS_NAME="SuperMap.HillshadeParameter",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Oee(e,t)}(t,pee),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=_ee(Iee(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([]),this.altitude=null,this.azimuth=null,this.zFactor=null}},{key:"toJSON",value:function(){return{altitude:this.altitude,azimuth:this.azimuth,zFactor:this.zFactor,type:this.type}}}])&&See(r.prototype,n),o&&See(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Pee(e){"@babel/helpers - typeof";return(Pee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kee(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Tee(n.key),n)}}function Tee(e){var t=function(e,t){if("object"!=Pee(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Pee(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Pee(t)?t:t+""}var jee=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=null,this.picAsUrl=null,this.picAsBase64=null,this.CLASS_NAME="SuperMap.WebPrintingJobCustomItems",M.extend(this,t)},(t=[{key:"destroy",value:function(){this.name=null,this.picAsUrl=null,this.picAsBase64=null}},{key:"toJSON",value:function(){var e={name:this.name};return this.title&&(e.title=this.title),this.picAsUrl?e.picAsUrl=this.picAsUrl:this.picAsBase64&&(e.picAsBase64=this.picAsBase64.replace(/^data:.+;base64,/,"")),M.toJSON(e)}}])&&kee(e.prototype,t),r&&kee(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function Mee(e){"@babel/helpers - typeof";return(Mee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bee(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Nee(n.key),n)}}function Nee(e){var t=function(e,t){if("object"!=Mee(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Mee(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Mee(t)?t:t+""}var Ree=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.picAsUrl=null,this.picAsBase64=null,this.CLASS_NAME="SuperMap.WebPrintingJobImage",M.extend(this,t)},(t=[{key:"destroy",value:function(){this.picAsUrl=null,this.picAsBase64=null}},{key:"toJSON",value:function(){var e={};return this.picAsUrl&&(e.picAsUrl=this.picAsUrl),this.picAsBase64&&(e.picAsBase64=this.picAsBase64.replace(/^data:.+;base64,/,"")),M.toJSON(e)}}])&&Bee(e.prototype,t),r&&Bee(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function Lee(e){"@babel/helpers - typeof";return(Lee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dee(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Fee(n.key),n)}}function Fee(e){var t=function(e,t){if("object"!=Lee(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Lee(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Lee(t)?t:t+""}var Qee=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=null,this.layerType=null,this.url=null,this.CLASS_NAME="SuperMap.WebPrintingJobLayers",M.extend(this,t)},(t=[{key:"destroy",value:function(){this.name=null,this.layerType=null,this.url=null}}])&&Dee(e.prototype,t),r&&Dee(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function Gee(e){"@babel/helpers - typeof";return(Gee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Uee(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,zee(n.key),n)}}function zee(e){var t=function(e,t){if("object"!=Gee(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Gee(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Gee(t)?t:t+""}var Hee=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.title=null,this.picAsUrl=null,this.picAsBase64=null,this.layers=null,this.customItems=null,this.CLASS_NAME="SuperMap.WebPrintingJobLegendOptions",M.extend(this,t)},(t=[{key:"destroy",value:function(){this.title=null,this.picAsUrl=null,this.picAsBase64=null,this.layers instanceof Qee&&(this.layers.destroy(),this.layers=null),this.customItems instanceof jee&&(this.customItems.destroy(),this.customItems=null)}},{key:"toJSON",value:function(){var e={title:this.title||""};return this.picAsUrl?e.picAsUrl=this.picAsUrl:this.picAsBase64?e.picAsBase64=this.picAsBase64.replace(/^data:.+;base64,/,""):this.customItems&&(e.customItems=this.customItems),M.toJSON(e)}}])&&Uee(e.prototype,t),r&&Uee(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function qee(e){"@babel/helpers - typeof";return(qee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vee(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Kee(n.key),n)}}function Kee(e){var t=function(e,t){if("object"!=qee(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=qee(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==qee(t)?t:t+""}var Yee=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.center=null,this.scale=null,this.layerNames=null,this.image=null,this.layers=null,this.CLASS_NAME="SuperMap.WebPrintingJobLittleMapOptions",M.extend(this,t)},(t=[{key:"destroy",value:function(){this.center=null,this.scale=null,this.layerNames=null,this.image instanceof Ree&&(this.image.destroy(),this.image=null),this.layers instanceof Qee&&(this.layers.destroy(),this.layers=null)}},{key:"toJSON",value:function(){var e={scale:this.scale,center:this.center};return this.layerNames?e.layerNames=this.layerNames:this.layers&&(e.layers=this.layers),this.image&&(e.image=this.image),M.toJSON(e)}}])&&Vee(e.prototype,t),r&&Vee(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function Jee(e){"@babel/helpers - typeof";return(Jee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wee(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Xee(n.key),n)}}function Xee(e){var t=function(e,t){if("object"!=Jee(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Jee(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Jee(t)?t:t+""}var Zee=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.picAsUrl=null,this.picAsBase64=null,this.CLASS_NAME="SuperMap.WebPrintingJobNorthArrowOptions",M.extend(this,t)},(t=[{key:"destroy",value:function(){this.picAsUrl=null,this.picAsBase64=null}},{key:"toJSON",value:function(){var e={};return this.picAsUrl?e.picAsUrl=this.picAsUrl:this.picAsBase64&&(e.picAsBase64=this.picAsBase64.replace(/^data:.+;base64,/,"")),M.toJSON(e)}}])&&Wee(e.prototype,t),r&&Wee(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function $ee(e){"@babel/helpers - typeof";return($ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ete(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,tte(n.key),n)}}function tte(e){var t=function(e,t){if("object"!=$ee(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=$ee(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==$ee(t)?t:t+""}var rte=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scaleText=null,this.orientation=null,this.type=null,this.intervals=null,this.unit=null,this.CLASS_NAME="SuperMap.WebPrintingJobScaleBarOptions",M.extend(this,t)},(t=[{key:"destroy",value:function(){this.scaleText=null,this.orientation=null,this.type=null,this.intervals=null,this.unit=null}},{key:"toJSON",value:function(){var e={scaleText:this.scaleText||"",type:this.type||"BAR",intervals:this.intervals||"",unit:this.unit||"METER"};return this.orientation&&(e.orientation=this.orientation),M.toJSON(e)}}])&&ete(e.prototype,t),r&&ete(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function nte(e){"@babel/helpers - typeof";return(nte="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ote(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ite(n.key),n)}}function ite(e){var t=function(e,t){if("object"!=nte(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=nte(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==nte(t)?t:t+""}var ate=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=null,this.url=null,this.token=null,this.value=null,this.CLASS_NAME="SuperMap.WebPrintingJobContent",M.extend(this,t)},(t=[{key:"destroy",value:function(){this.type="WEBMAP",this.url=null,this.token=null,this.value=null}},{key:"toJSON",value:function(){var e={type:this.type};return this.token&&(e.token=this.token),this.url?e.url=this.url:this.value&&(e.value=this.value),M.toJSON(e)}}])&&ote(e.prototype,t),r&&ote(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function ste(e){"@babel/helpers - typeof";return(ste="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ute(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,lte(n.key),n)}}function lte(e){var t=function(e,t){if("object"!=ste(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ste(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ste(t)?t:t+""}var cte=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.templateName=null,this.title=null,this.subTitle=null,this.author=null,this.copyright=null,this.summaryText=null,this.time=null,this.scaleBarOptions=null,this.northArrowOptions=null,this.littleMapOptions=null,this.legendOptions=null,this.CLASS_NAME="SuperMap.WebPrintingJobLayoutOptions",M.extend(this,t)},(t=[{key:"destroy",value:function(){this.templateName=null,this.title=null,this.subTitle=null,this.author=null,this.copyright=null,this.summaryText=null,this.time=null,this.scaleBarOptions instanceof rte&&(this.scaleBarOptions.destroy(),this.scaleBarOptions=null),this.northArrowOptions instanceof Zee&&(this.northArrowOptions.destroy(),this.northArrowOptions=null),this.littleMapOptions instanceof Yee&&(this.littleMapOptions.destroy(),this.littleMapOptions=null),this.legendOptions instanceof Hee&&(this.legendOptions.destroy(),this.legendOptions=null)}}])&&ute(e.prototype,t),r&&ute(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function fte(e){"@babel/helpers - typeof";return(fte="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pte(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,hte(n.key),n)}}function hte(e){var t=function(e,t){if("object"!=fte(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=fte(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==fte(t)?t:t+""}var yte=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.format=null,this.dpi=96,this.scale=null,this.rotation=null,this.center=null,this.CLASS_NAME="SuperMap.WebPrintingJobExportOptions",M.extend(this,t)},(t=[{key:"destroy",value:function(){this.format=null,this.dpi=null,this.scale=null,this.rotation=null,this.center=null,this.outputSize=null}},{key:"toJSON",value:function(){var e={format:this.format||"PDF",dpi:this.dpi,scale:this.scale,center:this.center};return this.rotation&&(e.rotation=this.rotation),this.outputSize&&(e.outputSize=this.outputSize),M.toJSON(e)}}])&&pte(e.prototype,t),r&&pte(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function dte(e){"@babel/helpers - typeof";return(dte="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mte(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,gte(n.key),n)}}function gte(e){var t=function(e,t){if("object"!=dte(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=dte(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==dte(t)?t:t+""}var vte=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.content=null,this.layoutOptions=null,this.exportOptions=null,M.extend(this,t),this.CLASS_NAME="SuperMap.WebPrintingJobParameters")},(t=[{key:"destroy",value:function(){this.content instanceof ate&&(this.content.destroy(),this.content=null),this.layoutOptions instanceof cte&&(this.layoutOptions.destroy(),this.layoutOptions=null),this.exportOptions instanceof yte&&(this.exportOptions.destroy(),this.exportOptions=null)}}])&&mte(e.prototype,t),r&&mte(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function bte(e){"@babel/helpers - typeof";return(bte="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ate(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,wte(n.key),n)}}function wte(e){var t=function(e,t){if("object"!=bte(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=bte(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==bte(t)?t:t+""}var Ste=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.include=void 0,this.exclude=void 0,this.CLASS_NAME="SuperMap.FieldsFilter",M.extend(this,t)}return t=e,n=[{key:"constructFromObject",value:function(t,r){return t&&(r=r||new e,t.hasOwnProperty("include")&&(r.include=t.include),t.hasOwnProperty("exclude")&&(r.exclude=t.exclude)),r}}],(r=[{key:"destroy",value:function(){this.include=void 0,this.exclude=void 0}}])&&Ate(t.prototype,r),n&&Ate(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function Cte(e){"@babel/helpers - typeof";return(Cte="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ete(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_te(n.key),n)}}function _te(e){var t=function(e,t){if("object"!=Cte(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Cte(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Cte(t)?t:t+""}var Ite=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.field=void 0,this.direction=e.Direction.ASC,this.CLASS_NAME="SuperMap.Sortby",M.extend(this,t)}return t=e,n=[{key:"constructFromObject",value:function(t,r){return t&&(r=r||new e,t.hasOwnProperty("field")&&(r.field=t.field),t.hasOwnProperty("direction")&&(r.direction=t.direction)),r}}],(r=[{key:"destroy",value:function(){this.field=void 0,this.direction="ASC"}}])&&Ete(t.prototype,r),n&&Ete(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function Ote(e){"@babel/helpers - typeof";return(Ote="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xte(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Pte(n.key),n)}}function Pte(e){var t=function(e,t){if("object"!=Ote(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Ote(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ote(t)?t:t+""}Ite.Direction={ASC:"ASC",DESC:"DESC"};var kte=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.bbox=void 0,this.collections=void 0,this.ids=void 0,this.limit=void 0,this.fields=void 0,this.query=void 0,this.sortby=void 0,this.CLASS_NAME="SuperMap.ImageSearchParameter",M.extend(this,t)}return t=e,n=[{key:"constructFromObject",value:function(t,r){return t&&(r=r||new e,t.hasOwnProperty("bbox")&&(r.bbox=t.bbox),t.hasOwnProperty("collections")&&(r.collections=t.collections),t.hasOwnProperty("ids")&&(r.ids=t.ids),t.hasOwnProperty("limit")&&(r.limit=t.limit),t.hasOwnProperty("fields")&&(r.fields=Ste.constructFromObject&&Ste.constructFromObject(t.fields,{})||t.fields),t.hasOwnProperty("query")&&(r.query=t.query),t.hasOwnProperty("sortby")&&(r.sortby=t.sortby,t.sortby&&(r.sortby=t.sortby.map(function(e){return Ite.constructFromObject&&Ite.constructFromObject(e,{})||e})))),r}}],(r=[{key:"destroy",value:function(){var e=this;e.bbox=void 0,e.collections=void 0,e.ids=void 0,e.limit=void 0,e.fields=void 0,e.query=void 0,e.sortby=void 0}}])&&xte(t.prototype,r),n&&xte(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function Tte(e){"@babel/helpers - typeof";return(Tte="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jte(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Mte(n.key),n)}}function Mte(e){var t=function(e,t){if("object"!=Tte(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Tte(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Tte(t)?t:t+""}var Bte=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.stretchType=void 0,this.stdevCoefficient=void 0,this.gaussianCoefficient=void 0,this.useMedianValue=void 0,this.minPercent=void 0,this.maxPercent=void 0,this.CLASS_NAME="SuperMap.ImageStretchOption",M.extend(this,t)}return t=e,n=[{key:"constructFromObject",value:function(t,r){return t&&(r=r||new e,t.hasOwnProperty("stretchType")&&(r.stretchType=t.stretchType),t.hasOwnProperty("stdevCoefficient")&&(r.stdevCoefficient=t.stdevCoefficient),t.hasOwnProperty("gaussianCoefficient")&&(r.gaussianCoefficient=t.gaussianCoefficient),t.hasOwnProperty("useMedianValue")&&(r.useMedianValue=t.useMedianValue),t.hasOwnProperty("minPercent")&&(r.minPercent=t.minPercent),t.hasOwnProperty("maxPercent")&&(r.maxPercent=t.maxPercent)),r}}],(r=[{key:"destroy",value:function(){var e=this;e.stretchType=void 0,e.stdevCoefficient=void 0,e.gaussianCoefficient=void 0,e.useMedianValue=void 0,e.minPercent=void 0,e.maxPercent=void 0}}])&&jte(t.prototype,r),n&&jte(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function Nte(e){"@babel/helpers - typeof";return(Nte="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rte(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Lte(n.key),n)}}function Lte(e){var t=function(e,t){if("object"!=Nte(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Nte(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Nte(t)?t:t+""}Bte.StretchType={NONE:"NONE",GAUSSIAN:"GAUSSIAN",PERCENTCLIP:"PERCENTCLIP",MINIMUMMAXIMUM:"MINIMUMMAXIMUM",STANDARDDEVIATION:"STANDARDDEVIATION"};var Dte=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.displayMode=void 0,this.displayBands=void 0,this.stretchOption=void 0,this.interpolationMode=void 0,this.colorScheme=void 0,this.colorTable=void 0,this.brightness=void 0,this.contrast=void 0,this.noData=void 0,this.noDataColor=void 0,this.noDataTransparent=void 0,this.backgroundValue=void 0,this.backgroundColor=void 0,this.backgroundTransparent=void 0,this.gridFunctions=void 0,this.gamma=void 0,this.CLASS_NAME="SuperMap.ImageRenderingRule",M.extend(this,t)}return t=e,n=[{key:"constructFromObject",value:function(t,r){return t&&(r=r||new e,t.hasOwnProperty("displayMode")&&(r.displayMode=t.displayMode),t.hasOwnProperty("displayBands")&&(r.displayBands=t.displayBands),t.hasOwnProperty("stretchOption")&&(r.stretchOption=Bte.constructFromObject&&Bte.constructFromObject(t.stretchOption,{})||t.stretchOption),t.hasOwnProperty("interpolationMode")&&(r.interpolationMode=t.interpolationMode),t.hasOwnProperty("colorScheme")&&(r.colorScheme=t.colorScheme),t.hasOwnProperty("colorTable")&&(r.colorTable=t.colorTable),t.hasOwnProperty("brightness")&&(r.brightness=t.brightness),t.hasOwnProperty("gamma")&&(r.gamma=t.gamma),t.hasOwnProperty("contrast")&&(r.contrast=t.contrast),t.hasOwnProperty("noData")&&(r.noData=t.noData),t.hasOwnProperty("noDataColor")&&(r.noDataColor=t.noDataColor),t.hasOwnProperty("backgroundValue")&&(r.backgroundValue=t.backgroundValue),t.hasOwnProperty("noDataTransparent")&&(r.noDataTransparent=t.noDataTransparent),t.hasOwnProperty("backgroundColor")&&(r.backgroundColor=t.backgroundColor),t.hasOwnProperty("backgroundTransparent")&&(r.backgroundTransparent=t.backgroundTransparent),t.hasOwnProperty("gridFunctions")&&(r.gridFunctions=t.gridFunctions)),r}}],(r=[{key:"destroy",value:function(){var e=this;e.displayMode=void 0,e.displayBands=void 0,e.stretchOption=void 0,e.interpolationMode=void 0,e.colorScheme=void 0,e.colorTable=void 0,e.brightness=void 0,e.contrast=void 0,e.noData=void 0,e.noDataColor=void 0,e.noDataTransparent=void 0,e.backgroundValue=void 0,e.backgroundColor=void 0,e.backgroundTransparent=void 0,e.gridFuncOptions=void 0,e.gamma=void 0}}])&&Rte(t.prototype,r),n&&Rte(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function Fte(e){"@babel/helpers - typeof";return(Fte="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qte(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Gte(n.key),n)}}function Gte(e){var t=function(e,t){if("object"!=Fte(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Fte(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Fte(t)?t:t+""}Dte.DisplayMode={COMPOSITE:"COMPOSITE",STRETCHED:"Stretched"},Dte.InterpolationMode={NEARESTNEIGHBOR:"NEARESTNEIGHBOR",HIGHQUALITYBILINEAR:"HIGHQUALITYBILINEAR",DEFAULT:"DEFAULT"};var Ute=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.girdFuncName="GFHillShade",this.Azimuth=315,this.Altitude=45,this.ZFactor=1,this.CLASS_NAME="SuperMap.ImageGFHillShade",M.extend(this,t)}return t=e,n=[{key:"constructFromObject",value:function(t,r){return t&&(r=r||new e,t.hasOwnProperty("girdFuncName")&&(r.girdFuncName=t.girdFuncName),t.hasOwnProperty("Azimuth")&&(r.Azimuth=t.Azimuth),t.hasOwnProperty("Altitude")&&(r.Altitude=t.Altitude),t.hasOwnProperty("ZFactor")&&(r.ZFactor=t.ZFactor)),r}}],(r=[{key:"destroy",value:function(){this.girdFuncName="GFHillShade",this.Azimuth=315,this.Altitude=45,this.ZFactor=1}}])&&Qte(t.prototype,r),n&&Qte(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function zte(e){"@babel/helpers - typeof";return(zte="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hte(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,qte(n.key),n)}}function qte(e){var t=function(e,t){if("object"!=zte(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=zte(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==zte(t)?t:t+""}var Vte=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.girdFuncName="GFAspect",this.Azimuth=void 0,this.CLASS_NAME="SuperMap.ImageGFAspect",M.extend(this,t)}return t=e,n=[{key:"constructFromObject",value:function(t,r){return t&&(r=r||new e,t.hasOwnProperty("girdFuncName")&&(r.girdFuncName=t.girdFuncName),t.hasOwnProperty("Azimuth")&&(r.Azimuth=t.Azimuth)),r}}],(r=[{key:"destroy",value:function(){this.girdFuncName="GFAspect",this.Azimuth=void 0}}])&&Hte(t.prototype,r),n&&Hte(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function Kte(e){"@babel/helpers - typeof";return(Kte="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yte(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Jte(n.key),n)}}function Jte(e){var t=function(e,t){if("object"!=Kte(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Kte(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Kte(t)?t:t+""}var Wte=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.girdFuncName="GFOrtho",this.CLASS_NAME="SuperMap.ImageGFOrtho",M.extend(this,t)}return t=e,n=[{key:"constructFromObject",value:function(t,r){return t&&(r=r||new e,t.hasOwnProperty("girdFuncName")&&(r.girdFuncName=t.girdFuncName)),r}}],(r=[{key:"destroy",value:function(){this.girdFuncName="GFOrtho"}}])&&Yte(t.prototype,r),n&&Yte(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function Xte(e){"@babel/helpers - typeof";return(Xte="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zte(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,$te(n.key),n)}}function $te(e){var t=function(e,t){if("object"!=Xte(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Xte(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Xte(t)?t:t+""}var ere=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.girdFuncName="GFSlope",this.Altitude=45,this.ZFactor=1,this.CLASS_NAME="SuperMap.ImageGFSlope",M.extend(this,t)}return t=e,n=[{key:"constructFromObject",value:function(t,r){return t&&(r=r||new e,t.hasOwnProperty("girdFuncName")&&(r.girdFuncName=t.girdFuncName),t.hasOwnProperty("Altitude")&&(r.Altitude=t.Altitude),t.hasOwnProperty("ZFactor")&&(r.ZFactor=t.ZFactor)),r}}],(r=[{key:"destroy",value:function(){this.girdFuncName="GFSlope",this.Altitude=45,this.ZFactor=1}}])&&Zte(t.prototype,r),n&&Zte(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}();function tre(e){"@babel/helpers - typeof";return(tre="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rre(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,nre(n.key),n)}}function nre(e){var t=function(e,t){if("object"!=tre(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=tre(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==tre(t)?t:t+""}var ore=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=null,this.name=null,this.geometry=null,this.address=null,this.attributes={},this.videoParameters=null,this.cameraLocation=null,M.extend(this,t),this.CLASS_NAME="SuperMap.VideoFeature"},(t=[{key:"destroy",value:function(){this.geometry&&this.geometry.destroy&&this.geometry.destroy(),this.geometry=null,this.name=null,this.videoParameters=null,this.cameraLocation=null,this.address=null,this.attributes=null}},{key:"toGeoJSONFeature",value:function(e){return{type:"Feature",geometry:e?e(this.geometry):this.geometry,properties:this.attributes,name:this.name,address:this.address,id:this.id}}},{key:"toServerFeature",value:function(e){var t=e.geometryFunction,r={type:"VideoFeature",geometry:t&&this.geometry?t(this.geometry):this.geometry,name:this.name,address:this.address,id:this.id},n=[],o=[];for(var i in this.attributes)n.push(i),o.push(this.attributes[i]);return r.fieldNames=n,r.fieldValues=o,r}}])&&rre(e.prototype,t),r&&rre(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function ire(e){"@babel/helpers - typeof";return(ire="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function are(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,sre(n.key),n)}}function sre(e){var t=function(e,t){if("object"!=ire(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ire(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ire(t)?t:t+""}var ure=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},M.extend(this,t),this.CLASS_NAME="SuperMap.OnlineServiceBase"},(t=[{key:"request",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return t=Fw.appendCredential(t),n.crossOrigin=this.options.crossOrigin,n.headers=this.options.headers,z.commit(e,t,r,n).then(function(e){return e.json()})}}])&&are(e.prototype,t),r&&are(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function lre(e){"@babel/helpers - typeof";return(lre="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cre(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,fre(n.key),n)}}function fre(e){var t=function(e,t){if("object"!=lre(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=lre(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==lre(t)?t:t+""}function pre(e,t,r){return t=hre(t),function(e,t){if(t&&("object"==lre(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],hre(e).constructor):t.apply(e,r))}function hre(e){return(hre=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yre(e,t){return(yre=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var dre=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=pre(this,t,[e]),r=r||{},n.MD5=null,n.type=null,n.userName=null,n.fileName=null,n.size=null,n.serviceStatus=null,n.serviceId=null,n.id=null,n.lastModfiedTime=null,n.status=null,n.storageId=null,n.publishInfo=null,n.authorizeSetting=null,n.nickname=null,n.tags=[],n.description=null,n.dataItemServices=null,n.coordType=null,n.dataCheckResult=null,n.dataMetaInfo=null,n.thumbnail=null,M.extend(n,r),n.id&&(n.serviceUrl=e+"/"+n.id),n.CLASS_NAME="SuperMap.OnlineData",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yre(e,t)}(t,ure),r=t,(n=[{key:"load",value:function(){if(this.serviceUrl){var e=this;return e.request("GET",this.serviceUrl).then(function(t){M.extend(e,t)})}}},{key:"getPublishedServices",value:function(){return this.dataItemServices}},{key:"getAuthorizeSetting",value:function(){return this.authorizeSetting}}])&&cre(r.prototype,n),o&&cre(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function mre(e){"@babel/helpers - typeof";return(mre="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gre(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,vre(n.key),n)}}function vre(e){var t=function(e,t){if("object"!=mre(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=mre(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==mre(t)?t:t+""}var bre=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rootUrl="https://www.supermapol.com",this.webUrl=this.rootUrl+"/web";var t=this.webUrl+"/mycontent";this.mDatasUrl=t+"/datas",this.CLASS_NAME="SuperMap.Online"},(t=[{key:"load",value:function(){return z.get(this.rootUrl).then(function(e){return e})}},{key:"login",value:function(){Fw.loginOnline(this.rootUrl,!0)}},{key:"queryDatas",value:function(e){var t=this,r=t.mDatasUrl;return e&&(e=e.toJSON()),z.get(r,e).then(function(e){if(e&&e.content&&!(e.content.length<1)){for(var r=[],n=e.content,o=n.length,i=0;i<o;i++){var a=n[i],s=new dre(t.mDatasUrl,a);r.push(s)}return r}})}}])&&gre(e.prototype,t),r&&gre(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function Are(e){"@babel/helpers - typeof";return(Are="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wre(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Sre(n.key),n)}}function Sre(e){var t=function(e,t){if("object"!=Are(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Are(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Are(t)?t:t+""}var Cre=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.userNames=null,this.types=null,this.fileName=null,this.serviceStatuses=null,this.serviceId=null,this.ids=null,this.keywords=null,this.orderBy=null,this.tags=null,this.filterFields=null,M.extend(this,t),this.CLASS_NAME="SuperMap.OnlineQueryDatasParameter"},(t=[{key:"toJSON",value:function(){var e=this,t={types:e.types,fileName:e.fileName,serviceStatuses:e.serviceStatuses,serviceId:e.serviceId,ids:e.ids,keywords:e.keywords,orderBy:e.orderBy,tags:e.tags,filterFields:e.filterFields};for(var r in t)null==t[r]&&delete t[r];return t}}])&&wre(e.prototype,t),r&&wre(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function Ere(e){"@babel/helpers - typeof";return(Ere="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _re(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ire(n.key),n)}}function Ire(e){var t=function(e,t){if("object"!=Ere(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Ere(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ere(t)?t:t+""}var Ore=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=null,this.serviceIds=null,this.clientType=Rn.SERVER,this.limitation=null,M.extend(this,t),this.CLASS_NAME="SuperMap.KeyServiceParameter"},(t=[{key:"toJSON",value:function(){return{name:this.name,serviceIds:this.serviceIds,clientType:this.clientType,limitation:this.limitation}}}])&&_re(e.prototype,t),r&&_re(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function xre(e){"@babel/helpers - typeof";return(xre="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pre(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,kre(n.key),n)}}function kre(e){var t=function(e,t){if("object"!=xre(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=xre(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==xre(t)?t:t+""}var Tre=function(e,t,r){return t&&Pre(e.prototype,t),r&&Pre(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=t,this.server=null,this.tokenServiceUrl=null,this.keyServiceUrl=null,M.extend(this,r),this.CLASS_NAME="SuperMap.ServerInfo",this.type=this.type||un.ISERVER,this.server||console.error("server url require is not  undefined");var n="/services/security/tokens";this.type===un.ISERVER&&this.server.indexOf("iserver")<0&&(n="/iserver"+n),this.tokenServiceUrl||(this.tokenServiceUrl=M.urlPathAppend(this.server,n)),this.keyServiceUrl||(this.type===un.IPORTAL?this.keyServiceUrl=M.urlPathAppend(this.server,"/web/mycontent/keys/register"):this.type===un.ONLINE&&(this.keyServiceUrl=M.urlPathAppend(this.server,"/web/mycontent/keys")))});function jre(e){"@babel/helpers - typeof";return(jre="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mre(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Bre(n.key),n)}}function Bre(e){var t=function(e,t){if("object"!=jre(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=jre(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==jre(t)?t:t+""}var Nre=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.userName=null,this.password=null,this.clientType=Rn.NONE,this.ip=null,this.referer=null,this.expiration=60,M.extend(this,t),this.CLASS_NAME="SuperMap.TokenServiceParameter"},(t=[{key:"toJSON",value:function(){return{userName:this.userName,password:this.password,clientType:this.clientType,ip:this.ip,referer:this.referer,expiration:this.expiration}}}])&&Mre(e.prototype,t),r&&Mre(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function Rre(e){"@babel/helpers - typeof";return(Rre="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lre(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Dre(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Lre(Object(r),!0).forEach(function(t){Qre(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lre(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Fre(e){return(Fre="function"==typeof Symbol&&"symbol"==Rre(Symbol.iterator)?function(e){return Rre(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Rre(e)})(e)}function Qre(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=Rre(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=Rre(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==Rre(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Gre(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Ure(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var r=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})}),r}var zre={exports:{}},Hre=Ure(Object.freeze({__proto__:null,default:{}}));function qre(e,t){for(var r=0,n=e.length-1;n>=0;n--){var o=e[n];"."===o?e.splice(n,1):".."===o?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r--;r)e.unshift("..");return e}var Vre=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,Kre=function(e){return Vre.exec(e).slice(1)};function Yre(){for(var e="",t=!1,r=arguments.length-1;r>=-1&&!t;r--){var n=r>=0?arguments[r]:"/";if("string"!=typeof n)throw new TypeError("Arguments to path.resolve must be strings");n&&(e=n+"/"+e,t="/"===n.charAt(0))}return(t?"/":"")+(e=qre(nne(e.split("/"),function(e){return!!e}),!t).join("/"))||"."}function Jre(e){var t=Wre(e),r="/"===one(e,-1);return(e=qre(nne(e.split("/"),function(e){return!!e}),!t).join("/"))||t||(e="."),e&&r&&(e+="/"),(t?"/":"")+e}function Wre(e){return"/"===e.charAt(0)}function Xre(){return Jre(nne(Array.prototype.slice.call(arguments,0),function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))}function Zre(e,t){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;r>=0&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=Yre(e).substr(1),t=Yre(t).substr(1);for(var n=r(e.split("/")),o=r(t.split("/")),i=Math.min(n.length,o.length),a=i,s=0;s<i;s++)if(n[s]!==o[s]){a=s;break}var u=[];for(s=a;s<n.length;s++)u.push("..");return(u=u.concat(o.slice(a))).join("/")}function $re(e){var t=Kre(e),r=t[0],n=t[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):"."}function ene(e,t){var r=Kre(e)[2];return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r}function tne(e){return Kre(e)[3]}var rne={extname:tne,basename:ene,dirname:$re,sep:"/",delimiter:":",relative:Zre,join:Xre,isAbsolute:Wre,normalize:Jre,resolve:Yre};function nne(e,t){if(e.filter)return e.filter(t);for(var r=[],n=0;n<e.length;n++)t(e[n],n,e)&&r.push(e[n]);return r}var one=function(e,t,r){return e.substr(t,r)},ine=Ure(Object.freeze({__proto__:null,resolve:Yre,normalize:Jre,isAbsolute:Wre,join:Xre,relative:Zre,sep:"/",delimiter:":",dirname:$re,basename:ene,extname:tne,default:rne}));!function(e,t){var r=function(t){t=void 0!==t?t:{};var r,n,o=Object.assign({},t),i="object"==("undefined"==typeof window?"undefined":Fre(window)),a="function"==typeof importScripts,s="object"==("undefined"==typeof process?"undefined":Fre(process))&&"object"==Fre(process.versions)&&"string"==typeof process.versions.node,u="";if(s){var l=Hre,c=ine;u=a?c.dirname(u)+"/":"//",r=function(e,t){return e=O(e)?new URL(e):c.normalize(e),l.readFileSync(e,t?void 0:"utf8")},n=function(e){var t=r(e,!0);return t.buffer||(t=new Uint8Array(t)),t},!t.thisProgram&&process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),e.exports=t,process.on("uncaughtException",function(e){if(!("unwind"===e||e instanceof P||e.context instanceof P))throw e}),t.inspect=function(){return"[Emscripten Module object]"}}else(i||a)&&(a?u=self.location.href:"undefined"!=typeof document&&document.currentScript&&(u=document.currentScript.src),u=0!==u.indexOf("blob:")?u.substr(0,u.replace(/[?#].*/,"").lastIndexOf("/")+1):"",r=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},a&&(n=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}));t.print||console.log.bind(console);var f,p,h=t.printErr||console.error.bind(console);Object.assign(t,o),o=null,t.arguments&&t.arguments,t.thisProgram&&t.thisProgram,t.quit&&t.quit,t.wasmBinary&&(f=t.wasmBinary),"object"!=("undefined"==typeof WebAssembly?"undefined":Fre(WebAssembly))&&S("no native wasm support detected");var y,d=!1;function m(){var e=p.buffer;t.HEAP8=new Int8Array(e),t.HEAP16=new Int16Array(e),t.HEAPU8=y=new Uint8Array(e),t.HEAPU16=new Uint16Array(e),t.HEAP32=new Int32Array(e),t.HEAPU32=new Uint32Array(e),t.HEAPF32=new Float32Array(e),t.HEAPF64=new Float64Array(e)}var g=[],v=[],b=[],A=0,w=null;function S(e){throw t.onAbort&&t.onAbort(e),h(e="Aborted("+e+")"),d=!0,e+=". Build with -sASSERTIONS for more info.",new WebAssembly.RuntimeError(e)}var C,E,_="data:application/octet-stream;base64,",I=function(e){return e.startsWith(_)},O=function(e){return e.startsWith("file://")};function x(e){return Promise.resolve().then(function(){return function(e){if(e==C&&f)return new Uint8Array(f);var t=function(e){if(I(e))return function(e){if(void 0!==s&&s){var t=Buffer.from(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.length)}for(var r=atob(e),n=new Uint8Array(r.length),o=0;o<r.length;++o)n[o]=r.charCodeAt(o);return n}(e.slice(_.length))}(e);if(t)return t;if(n)return n(e);throw"both async and sync fetching of the wasm failed"}(e)})}function P(e){this.name="ExitStatus",this.message="Program terminated with exit(".concat(e,")"),this.status=e}I(C="data:application/octet-stream;base64,AGFzbQEAAAABHwZgAX8Bf2ABfwBgAABgA39/fwBgA39/fwF/YAJ/fwACDQIBYQFhAAABYQFiAAIDExIAAwAAAgEBAQUDAAMFAQQEAQQEBQFwAQEBBQcBAYACgIACBggBfwFBkJAECwchCAFjAgABZAAGAWUAEwFmABEBZwAQAWgBAAFpAAwBagASCuZdEioBAX8jAEEQayIBIAA6AA8gAS0ADyIAQQF0IABBB3VBAXFBG2xzQf8BcQufAQEBfyMAQRBrIgMgADoADyADIAE2AgggAyACNgIEIANBADoAAwNAIAMtAANBBE9FBEAgA0EAOgACA0AgAy0AAiIBQQRPRQRAIAEgAy0AA0ECdCICIAMoAghqaiIAIAMoAgQgASACIAMtAA9BBHRqamotAAAgAC0AAHM6AAAgAyADLQACQQFqOgACDAELCyADIAMtAANBAWo6AAMMAQsLC08BAn9BkAwoAgAiASAAQQdqQXhxIgJqIQACQCACQQAgACABTRsNACAAPwBBEHRLBEAgABAARQ0BC0GQDCAANgIAIAEPC0GUDEEwNgIAQX8LNQEBf0EBIAAgAEEBTRshAAJAA0AgABAMIgENAUGIECgCACIBBEAgARECAAwBCwsQAQALIAELAgAL+AEBAX8jAEEQayIBIAA2AgwgASABKAIMLQANOgALIAEoAgwgASgCDC0ACToADSABKAIMIAEoAgwtAAU6AAkgASgCDCABKAIMLQABOgAFIAEoAgwgAS0ACzoAASABIAEoAgwtAAI6AAsgASgCDCABKAIMLQAKOgACIAEoAgwgAS0ACzoACiABIAEoAgwtAAY6AAsgASgCDCABKAIMLQAOOgAGIAEoAgwgAS0ACzoADiABIAEoAgwtAAM6AAsgASgCDCABKAIMLQAHOgADIAEoAgwgASgCDC0ACzoAByABKAIMIAEoAgwtAA86AAsgASgCDCABLQALOgAPC/gBAQF/IwBBEGsiASAANgIMIAEgASgCDC0AAToACyABKAIMIAEoAgwtAAU6AAEgASgCDCABKAIMLQAJOgAFIAEoAgwgASgCDC0ADToACSABKAIMIAEtAAs6AA0gASABKAIMLQACOgALIAEoAgwgASgCDC0ACjoAAiABKAIMIAEtAAs6AAogASABKAIMLQAGOgALIAEoAgwgASgCDC0ADjoABiABKAIMIAEtAAs6AA4gASABKAIMLQADOgALIAEoAgwgASgCDC0ADzoAAyABKAIMIAEoAgwtAAs6AA8gASgCDCABKAIMLQAHOgALIAEoAgwgAS0ACzoABwt7AQF/IwBBEGsiASAANgIMIAFBADoACwNAIAEtAAtBBE9FBEAgAUEAOgAKA0AgAS0ACiIAQQRPRQRAIAEtAAsgASgCDCAAQQJ0amoiACAALQAALQCACDoAACABIAEtAApBAWo6AAoMAQsLIAEgAS0AC0EBajoACwwBCwsL6wQBAX8jAEEQayICJAAgAiAANgIMIAIgATYCCCACQQA6AAdBACACKAIMIAIoAggQAyACQQE6AAcDQCACLQAHQQ5JBEAgAigCDBAJIAIoAgwQCCACKAIMIQEjAEEQayIAJAAgACABNgIMIABBADoACwNAIAAtAAsiAUEESQRAIAAgACgCDCABQQJ0ai0AADoACCAAIAAoAgwgAC0AC0ECdGoiAS0AAyABLQACIAEtAAAgAS0AAXNzczoACiAAIAAoAgwgAC0AC0ECdGotAAAgACgCDCAALQALQQJ0ai0AAXM6AAkgACAALQAJEAI6AAkgACgCDCAALQALQQJ0aiIBIAEtAAAgAC0ACSAALQAKc3M6AAAgACAAKAIMIAAtAAtBAnRqLQABIAAoAgwgAC0AC0ECdGotAAJzOgAJIAAgAC0ACRACOgAJIAAoAgwgAC0AC0ECdGoiASABLQABIAAtAAkgAC0ACnNzOgABIAAgACgCDCAALQALQQJ0ai0AAiAAKAIMIAAtAAtBAnRqLQADczoACSAAIAAtAAkQAjoACSAAKAIMIAAtAAtBAnRqIgEgAS0AAiAALQAJIAAtAApzczoAAiAAIAAoAgwgAC0AC0ECdGotAAMgAC0ACHM6AAkgACAALQAJEAI6AAkgACgCDCAALQALQQJ0aiIBIAEtAAMgAC0ACSAALQAKc3M6AAMgACAALQALQQFqOgALDAELCyAAQRBqJAAgAi0AByACKAIMIAIoAggQAyACIAItAAdBAWo6AAcMAQsLIAIoAgwQCSACKAIMEAhBDiACKAIMIAIoAggQAyACQRBqJAALmwYBAX8jAEEQayIDJAAgAyAANgIMIAMgATYCCCADIAI2AgQgAygCCCEBIwBBIGsiACADKAIMNgIcIAAgATYCGCAAQQA2AhQDQCAAKAIUIgFBCEkEQCABQQJ0IgEgACgCHGogASAAKAIYai0AADoAACAAKAIUQQJ0QQFqIgEgACgCHGogASAAKAIYai0AADoAACAAKAIUQQJ0QQJqIgEgACgCHGogASAAKAIYai0AADoAACAAKAIUQQJ0QQNqIgEgACgCHGogASAAKAIYai0AADoAACAAIAAoAhRBAWo2AhQMAQsLIABBCDYCFANAIAAoAhQiAUE8SQRAIAAgAUEBa0ECdDYCDCAAIAAoAhwgACgCDGotAAA6AAggACAAKAIcIAAoAgxBAWpqLQAAOgAJIAAgACgCHCAAKAIMQQJqai0AADoACiAAIAAoAhwgACgCDEEDamotAAA6AAsgACgCFEEHcUUEQCAAIAAtAAg6AAcgACAALQAJOgAIIAAgAC0ACjoACSAAIAAtAAs6AAogACAALQAHOgALIAAgAC0ACC0AgAg6AAggACAALQAJLQCACDoACSAAIAAtAAotAIAIOgAKIAAgAC0ACy0AgAg6AAsgACAALQAIIAAoAhRBA3YtAIAKczoACAsgACgCFEEHcUEERgRAIAAgAC0ACC0AgAg6AAggACAALQAJLQCACDoACSAAIAAtAAotAIAIOgAKIAAgAC0ACy0AgAg6AAsLIAAgACgCFEECdDYCECAAIAAoAhRBCGtBAnQ2AgwgACgCHCIBIAAoAhBqIAAoAgwgAWotAAAgAC0ACHM6AAAgACgCHCAAKAIQQQFqaiAAKAIcIAAoAgxBAWpqLQAAIAAtAAlzOgAAIAAoAhwgACgCEEECamogACgCHCAAKAIMQQJqai0AACAALQAKczoAACAAKAIcIAAoAhBBA2pqIAAoAhwgACgCDEEDamotAAAgAC0AC3M6AAAgACAAKAIUQQFqNgIUDAELCyADKAIMIgAgAygCBCIBKQAANwDwASAAIAEpAAg3APgBIANBEGokAAvOJwEMfyMAQRBrIgokAAJAAkACQAJAAkACQAJAAkACQCAAQfQBTQRAQZgMKAIAIgZBECAAQQtqQXhxIABBC0kbIgVBA3YiAHYiAUEDcQRAAkAgAUF/c0EBcSAAaiICQQN0IgFBwAxqIgAgAUHIDGooAgAiASgCCCIDRgRAQZgMIAZBfiACd3E2AgAMAQsgAyAANgIMIAAgAzYCCAsgAUEIaiEAIAEgAkEDdCICQQNyNgIEIAEgAmoiASABKAIEQQFyNgIEDAoLIAVBoAwoAgAiB00NASABBEACQEECIAB0IgJBACACa3IgASAAdHFoIgFBA3QiAEHADGoiAiAAQcgMaigCACIAKAIIIgNGBEBBmAwgBkF+IAF3cSIGNgIADAELIAMgAjYCDCACIAM2AggLIAAgBUEDcjYCBCAAIAVqIgQgAUEDdCIBIAVrIgNBAXI2AgQgACABaiADNgIAIAcEQCAHQXhxQcAMaiEBQawMKAIAIQICfyAGQQEgB0EDdnQiBXFFBEBBmAwgBSAGcjYCACABDAELIAEoAggLIQUgASACNgIIIAUgAjYCDCACIAE2AgwgAiAFNgIICyAAQQhqIQBBrAwgBDYCAEGgDCADNgIADAoLQZwMKAIAIgtFDQEgC2hBAnRByA5qKAIAIgIoAgRBeHEgBWshBCACIQEDQAJAIAEoAhAiAEUEQCABKAIUIgBFDQELIAAoAgRBeHEgBWsiASAEIAEgBEkiARshBCAAIAIgARshAiAAIQEMAQsLIAIoAhghCSACIAIoAgwiA0cEQEGoDCgCABogAigCCCIAIAM2AgwgAyAANgIIDAkLIAJBFGoiASgCACIARQRAIAIoAhAiAEUNAyACQRBqIQELA0AgASEIIAAiA0EUaiIBKAIAIgANACADQRBqIQEgAygCECIADQALIAhBADYCAAwIC0F/IQUgAEG/f0sNACAAQQtqIgBBeHEhBUGcDCgCACIIRQ0AQQAgBWshBAJAAkACQAJ/QQAgBUGAAkkNABpBHyAFQf///wdLDQAaIAVBJiAAQQh2ZyIAa3ZBAXEgAEEBdGtBPmoLIgdBAnRByA5qKAIAIgFFBEBBACEADAELQQAhACAFQRkgB0EBdmtBACAHQR9HG3QhAgNAAkAgASgCBEF4cSAFayIGIARPDQAgASEDIAYiBA0AQQAhBCABIQAMAwsgACABKAIUIgYgBiABIAJBHXZBBHFqKAIQIgFGGyAAIAYbIQAgAkEBdCECIAENAAsLIAAgA3JFBEBBACEDQQIgB3QiAEEAIABrciAIcSIARQ0DIABoQQJ0QcgOaigCACEACyAARQ0BCwNAIAAoAgRBeHEgBWsiAiAESSEBIAIgBCABGyEEIAAgAyABGyEDIAAoAhAiAQR/IAEFIAAoAhQLIgANAAsLIANFDQAgBEGgDCgCACAFa08NACADKAIYIQcgAyADKAIMIgJHBEBBqAwoAgAaIAMoAggiACACNgIMIAIgADYCCAwHCyADQRRqIgEoAgAiAEUEQCADKAIQIgBFDQMgA0EQaiEBCwNAIAEhBiAAIgJBFGoiASgCACIADQAgAkEQaiEBIAIoAhAiAA0ACyAGQQA2AgAMBgsgBUGgDCgCACIDTQRAQawMKAIAIQACQCADIAVrIgFBEE8EQCAAIAVqIgIgAUEBcjYCBCAAIANqIAE2AgAgACAFQQNyNgIEDAELIAAgA0EDcjYCBCAAIANqIgEgASgCBEEBcjYCBEEAIQJBACEBC0GgDCABNgIAQawMIAI2AgAgAEEIaiEADAgLIAVBpAwoAgAiAkkEQEGkDCACIAVrIgE2AgBBsAxBsAwoAgAiACAFaiICNgIAIAIgAUEBcjYCBCAAIAVBA3I2AgQgAEEIaiEADAgLQQAhACAFQS9qIgQCf0HwDygCAARAQfgPKAIADAELQfwPQn83AgBB9A9CgKCAgICABDcCAEHwDyAKQQxqQXBxQdiq1aoFczYCAEGEEEEANgIAQdQPQQA2AgBBgCALIgFqIgZBACABayIIcSIBIAVNDQdB0A8oAgAiAwRAQcgPKAIAIgcgAWoiCSAHTQ0IIAMgCUkNCAsCQEHUDy0AAEEEcUUEQAJAAkACQAJAQbAMKAIAIgMEQEHYDyEAA0AgAyAAKAIAIgdPBEAgByAAKAIEaiADSw0DCyAAKAIIIgANAAsLQQAQBCICQX9GDQMgASEGQfQPKAIAIgBBAWsiAyACcQRAIAEgAmsgAiADakEAIABrcWohBgsgBSAGTw0DQdAPKAIAIgAEQEHIDygCACIDIAZqIgggA00NBCAAIAhJDQQLIAYQBCIAIAJHDQEMBQsgBiACayAIcSIGEAQiAiAAKAIAIAAoAgRqRg0BIAIhAAsgAEF/Rg0BIAVBMGogBk0EQCAAIQIMBAtB+A8oAgAiAiAEIAZrakEAIAJrcSICEARBf0YNASACIAZqIQYgACECDAMLIAJBf0cNAgtB1A9B1A8oAgBBBHI2AgALIAEQBCECQQAQBCEAIAJBf0YNBSAAQX9GDQUgACACTQ0FIAAgAmsiBiAFQShqTQ0FC0HID0HIDygCACAGaiIANgIAQcwPKAIAIABJBEBBzA8gADYCAAsCQEGwDCgCACIEBEBB2A8hAANAIAIgACgCACIBIAAoAgQiA2pGDQIgACgCCCIADQALDAQLQagMKAIAIgBBACAAIAJNG0UEQEGoDCACNgIAC0EAIQBB3A8gBjYCAEHYDyACNgIAQbgMQX82AgBBvAxB8A8oAgA2AgBB5A9BADYCAANAIABBA3QiAUHIDGogAUHADGoiAzYCACABQcwMaiADNgIAIABBAWoiAEEgRw0AC0GkDCAGQShrIgBBeCACa0EHcSIBayIDNgIAQbAMIAEgAmoiATYCACABIANBAXI2AgQgACACakEoNgIEQbQMQYAQKAIANgIADAQLIAIgBE0NAiABIARLDQIgACgCDEEIcQ0CIAAgAyAGajYCBEGwDCAEQXggBGtBB3EiAGoiATYCAEGkDEGkDCgCACAGaiICIABrIgA2AgAgASAAQQFyNgIEIAIgBGpBKDYCBEG0DEGAECgCADYCAAwDC0EAIQMMBQtBACECDAMLQagMKAIAIAJLBEBBqAwgAjYCAAsgAiAGaiEBQdgPIQACQAJAAkADQCABIAAoAgBHBEAgACgCCCIADQEMAgsLIAAtAAxBCHFFDQELQdgPIQADQAJAIAQgACgCACIBTwRAIAEgACgCBGoiAyAESw0BCyAAKAIIIQAMAQsLQaQMIAZBKGsiAEF4IAJrQQdxIgFrIgg2AgBBsAwgASACaiIBNgIAIAEgCEEBcjYCBCAAIAJqQSg2AgRBtAxBgBAoAgA2AgAgBCADQScgA2tBB3FqQS9rIgAgACAEQRBqSRsiAUEbNgIEIAFB4A8pAgA3AhAgAUHYDykCADcCCEHgDyABQQhqNgIAQdwPIAY2AgBB2A8gAjYCAEHkD0EANgIAIAFBGGohAANAIABBBzYCBCAAQQhqIQwgAEEEaiEAIAwgA0kNAAsgASAERg0CIAEgASgCBEF+cTYCBCAEIAEgBGsiAkEBcjYCBCABIAI2AgAgAkH/AU0EQCACQXhxQcAMaiEAAn9BmAwoAgAiAUEBIAJBA3Z0IgJxRQRAQZgMIAEgAnI2AgAgAAwBCyAAKAIICyEBIAAgBDYCCCABIAQ2AgwgBCAANgIMIAQgATYCCAwDC0EfIQAgAkH///8HTQRAIAJBJiACQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAAsgBCAANgIcIARCADcCECAAQQJ0QcgOaiEBAkBBnAwoAgAiA0EBIAB0IgZxRQRAQZwMIAMgBnI2AgAgASAENgIADAELIAJBGSAAQQF2a0EAIABBH0cbdCEAIAEoAgAhAwNAIAMiASgCBEF4cSACRg0DIABBHXYhAyAAQQF0IQAgASADQQRxaiIGKAIQIgMNAAsgBiAENgIQCyAEIAE2AhggBCAENgIMIAQgBDYCCAwCCyAAIAI2AgAgACAAKAIEIAZqNgIEIAJBeCACa0EHcWoiByAFQQNyNgIEIAFBeCABa0EHcWoiBCAFIAdqIgVrIQYCQEGwDCgCACAERgRAQbAMIAU2AgBBpAxBpAwoAgAgBmoiADYCACAFIABBAXI2AgQMAQtBrAwoAgAgBEYEQEGsDCAFNgIAQaAMQaAMKAIAIAZqIgA2AgAgBSAAQQFyNgIEIAAgBWogADYCAAwBCyAEKAIEIgJBA3FBAUYEQCACQXhxIQkCQCACQf8BTQRAIAQoAgwiACAEKAIIIgFGBEBBmAxBmAwoAgBBfiACQQN2d3E2AgAMAgsgASAANgIMIAAgATYCCAwBCyAEKAIYIQgCQCAEIAQoAgwiAEcEQEGoDCgCABogBCgCCCIBIAA2AgwgACABNgIIDAELAkAgBEEUaiIBKAIAIgJFBEAgBCgCECICRQ0BIARBEGohAQsDQCABIQMgAiIAQRRqIgEoAgAiAg0AIABBEGohASAAKAIQIgINAAsgA0EANgIADAELQQAhAAsgCEUNAAJAIAQoAhwiAUECdEHIDmoiAigCACAERgRAIAIgADYCACAADQFBnAxBnAwoAgBBfiABd3E2AgAMAgsgCEEQQRQgCCgCECAERhtqIAA2AgAgAEUNAQsgACAINgIYIAQoAhAiAQRAIAAgATYCECABIAA2AhgLIAQoAhQiAUUNACAAIAE2AhQgASAANgIYCyAGIAlqIQYgBCAJaiIEKAIEIQILIAQgAkF+cTYCBCAFIAZBAXI2AgQgBSAGaiAGNgIAIAZB/wFNBEAgBkF4cUHADGohAAJ/QZgMKAIAIgFBASAGQQN2dCICcUUEQEGYDCABIAJyNgIAIAAMAQsgACgCCAshASAAIAU2AgggASAFNgIMIAUgADYCDCAFIAE2AggMAQtBHyECIAZB////B00EQCAGQSYgBkEIdmciAGt2QQFxIABBAXRrQT5qIQILIAUgAjYCHCAFQgA3AhAgAkECdEHIDmohAQJAAkBBnAwoAgAiAEEBIAJ0IgNxRQRAQZwMIAAgA3I2AgAgASAFNgIADAELIAZBGSACQQF2a0EAIAJBH0cbdCECIAEoAgAhAANAIAAiASgCBEF4cSAGRg0CIAJBHXYhACACQQF0IQIgASAAQQRxaiIDKAIQIgANAAsgAyAFNgIQCyAFIAE2AhggBSAFNgIMIAUgBTYCCAwBCyABKAIIIgAgBTYCDCABIAU2AgggBUEANgIYIAUgATYCDCAFIAA2AggLIAdBCGohAAwFCyABKAIIIgAgBDYCDCABIAQ2AgggBEEANgIYIAQgATYCDCAEIAA2AggLQaQMKAIAIgAgBU0NAEGkDCAAIAVrIgE2AgBBsAxBsAwoAgAiACAFaiICNgIAIAIgAUEBcjYCBCAAIAVBA3I2AgQgAEEIaiEADAMLQZQMQTA2AgBBACEADAILAkAgB0UNAAJAIAMoAhwiAEECdEHIDmoiASgCACADRgRAIAEgAjYCACACDQFBnAwgCEF+IAB3cSIINgIADAILIAdBEEEUIAcoAhAgA0YbaiACNgIAIAJFDQELIAIgBzYCGCADKAIQIgAEQCACIAA2AhAgACACNgIYCyADKAIUIgBFDQAgAiAANgIUIAAgAjYCGAsCQCAEQQ9NBEAgAyAEIAVqIgBBA3I2AgQgACADaiIAIAAoAgRBAXI2AgQMAQsgAyAFQQNyNgIEIAMgBWoiAiAEQQFyNgIEIAIgBGogBDYCACAEQf8BTQRAIARBeHFBwAxqIQACf0GYDCgCACIBQQEgBEEDdnQiBXFFBEBBmAwgASAFcjYCACAADAELIAAoAggLIQEgACACNgIIIAEgAjYCDCACIAA2AgwgAiABNgIIDAELQR8hACAEQf///wdNBEAgBEEmIARBCHZnIgBrdkEBcSAAQQF0a0E+aiEACyACIAA2AhwgAkIANwIQIABBAnRByA5qIQECQAJAIAhBASAAdCIFcUUEQEGcDCAFIAhyNgIAIAEgAjYCAAwBCyAEQRkgAEEBdmtBACAAQR9HG3QhACABKAIAIQUDQCAFIgEoAgRBeHEgBEYNAiAAQR12IQUgAEEBdCEAIAEgBUEEcWoiBigCECIFDQALIAYgAjYCEAsgAiABNgIYIAIgAjYCDCACIAI2AggMAQsgASgCCCIAIAI2AgwgASACNgIIIAJBADYCGCACIAE2AgwgAiAANgIICyADQQhqIQAMAQsCQCAJRQ0AAkAgAigCHCIAQQJ0QcgOaiIBKAIAIAJGBEAgASADNgIAIAMNAUGcDCALQX4gAHdxNgIADAILIAlBEEEUIAkoAhAgAkYbaiADNgIAIANFDQELIAMgCTYCGCACKAIQIgAEQCADIAA2AhAgACADNgIYCyACKAIUIgBFDQAgAyAANgIUIAAgAzYCGAsCQCAEQQ9NBEAgAiAEIAVqIgBBA3I2AgQgACACaiIAIAAoAgRBAXI2AgQMAQsgAiAFQQNyNgIEIAIgBWoiAyAEQQFyNgIEIAMgBGogBDYCACAHBEAgB0F4cUHADGohAEGsDCgCACEBAn9BASAHQQN2dCIFIAZxRQRAQZgMIAUgBnI2AgAgAAwBCyAAKAIICyEFIAAgATYCCCAFIAE2AgwgASAANgIMIAEgBTYCCAtBrAwgAzYCAEGgDCAENgIACyACQQhqIQALIApBEGokACAAC60CAQF/IwBBMGsiAyQAIAMgADYCLCADIAE2AiggAyACNgIkIANBADYCDCADQRA2AggDQCADKAIMIAMoAiRJBEAgAygCCEEQRgRAIANBEGoiACADKAIsIgEpAPABNwAAIAAgASkA+AE3AAggACADKAIsEAogA0EPNgIIA0ACQCADKAIIIgBBAEgNAAJAIAAgAygCLEHwAWpqIgAtAABB/wFGBEAgAEEAOgAADAELIAMoAgggAygCLEHwAWpqIgAgAC0AAEEBajoAAAwBCyADIAMoAghBAWs2AggMAQsLIANBADYCCAsgAygCKCADKAIMaiIAIAAtAAAgAygCCCADQRBqai0AAHM6AAAgAyADKAIMQQFqNgIMIAMgAygCCEEBajYCCAwBCwsgA0EwaiQAC1wBAX8jAEEQayICIAA2AgwgAiABNgIIIAJBADoABwNAIAItAAciAUEQT0UEQCABIAIoAgxqIgAgASACKAIIai0AACAALQAAczoAACACIAItAAdBAWo6AAcMAQsLC3sBAX8jAEEQayIBIAA2AgwgAUEAOgALA0AgAS0AC0EET0UEQCABQQA6AAoDQCABLQAKIgBBBE9FBEAgAS0ACyABKAIMIABBAnRqaiIAIAAtAAAtAJAKOgAAIAEgAS0ACkEBajoACgwBCwsgASABLQALQQFqOgALDAELCwuCEQEDfyMAQYACayIFJAACQCABRQ0AIAJFDQAgBSAAKAIEIAAoAggQCwJAAkACQCAAKAIAQQFrDgIAAQILIwBBIGsiAyQAIAMgBTYCHCADIAE2AhggAyACNgIUIANBADYCEANAIAMoAhAgAygCFEkEQCADIAMoAhgiACkAADcAACADIAApAAg3AAggAygCGCEAIAMoAhwhBCMAQRBrIgEkACABIAA2AgwgASAENgIIIAFBADoAB0EOIAEoAgwgASgCCBADIAFBDToABwNAIAEtAAcEQCABKAIMEAcgASgCDBAPIAEtAAcgASgCDCABKAIIEAMgASgCDCEEIwBBEGsiACQAIAAgBDYCDCAAQQA2AggDQCAAKAIIIgRBBEgEQCAAIAAoAgwgBEECdGotAAA6AAcgACAAKAIMIAAoAghBAnRqLQABOgAGIAAgACgCDCAAKAIIQQJ0ai0AAjoABSAAIAAoAgwgACgCCEECdGotAAM6AAQgAC0AByIEQQBsIAQQAkH/AXFzIAAtAAcQAkH/AXEQAkH/AXFzIAAtAAcQAkH/AXEQAkH/AXEQAkH/AXFzIAAtAAcQAkH/AXEQAkH/AXEQAkH/AXEQAkH/AXFBAGxzIAAtAAYiBCAEEAJB/wFxcyAALQAGEAJB/wFxEAJB/wFxQQBscyAALQAGEAJB/wFxEAJB/wFxEAJB/wFxcyAALQAGEAJB/wFxEAJB/wFxEAJB/wFxEAJB/wFxQQBsc3MgAC0ABSIEIAQQAkH/AXFBAGxzIAAtAAUQAkH/AXEQAkH/AXFzIAAtAAUQAkH/AXEQAkH/AXEQAkH/AXFzIAAtAAUQAkH/AXEQAkH/AXEQAkH/AXEQAkH/AXFBAGxzcyAALQAEIgQgBBACQf8BcUEAbHMgAC0ABBACQf8BcRACQf8BcUEAbHMgAC0ABBACQf8BcRACQf8BcRACQf8BcXMgAC0ABBACQf8BcRACQf8BcRACQf8BcRACQf8BcUEAbHNzIQQgACgCDCAAKAIIQQJ0aiAEOgAAIAAtAAcgAC0ABxACQf8BcUEAbHMgAC0ABxACQf8BcRACQf8BcUEAbHMgAC0ABxACQf8BcRACQf8BcRACQf8BcXMgAC0ABxACQf8BcRACQf8BcRACQf8BcRACQf8BcUEAbHMgAC0ABkEAbCAALQAGEAJB/wFxcyAALQAGEAJB/wFxEAJB/wFxcyAALQAGEAJB/wFxEAJB/wFxEAJB/wFxcyAALQAGEAJB/wFxEAJB/wFxEAJB/wFxEAJB/wFxQQBsc3MgAC0ABSAALQAFEAJB/wFxcyAALQAFEAJB/wFxEAJB/wFxQQBscyAALQAFEAJB/wFxEAJB/wFxEAJB/wFxcyAALQAFEAJB/wFxEAJB/wFxEAJB/wFxEAJB/wFxQQBsc3MgAC0ABCAALQAEEAJB/wFxQQBscyAALQAEEAJB/wFxEAJB/wFxcyAALQAEEAJB/wFxEAJB/wFxEAJB/wFxcyAALQAEEAJB/wFxEAJB/wFxEAJB/wFxEAJB/wFxQQBsc3MhBCAAKAIMIAAoAghBAnRqIAQ6AAEgAC0AByAALQAHEAJB/wFxQQBscyAALQAHEAJB/wFxEAJB/wFxcyAALQAHEAJB/wFxEAJB/wFxEAJB/wFxcyAALQAHEAJB/wFxEAJB/wFxEAJB/wFxEAJB/wFxQQBscyAALQAGIAAtAAYQAkH/AXFBAGxzIAAtAAYQAkH/AXEQAkH/AXFBAGxzIAAtAAYQAkH/AXEQAkH/AXEQAkH/AXFzIAAtAAYQAkH/AXEQAkH/AXEQAkH/AXEQAkH/AXFBAGxzcyAALQAFQQBsIAAtAAUQAkH/AXFzIAAtAAUQAkH/AXEQAkH/AXFzIAAtAAUQAkH/AXEQAkH/AXEQAkH/AXFzIAAtAAUQAkH/AXEQAkH/AXEQAkH/AXEQAkH/AXFBAGxzcyAALQAEIAAtAAQQAkH/AXFzIAAtAAQQAkH/AXEQAkH/AXFBAGxzIAAtAAQQAkH/AXEQAkH/AXEQAkH/AXFzIAAtAAQQAkH/AXEQAkH/AXEQAkH/AXEQAkH/AXFBAGxzcyEEIAAoAgwgACgCCEECdGogBDoAAiAALQAHIAAtAAcQAkH/AXFzIAAtAAcQAkH/AXEQAkH/AXFBAGxzIAAtAAcQAkH/AXEQAkH/AXEQAkH/AXFzIAAtAAcQAkH/AXEQAkH/AXEQAkH/AXEQAkH/AXFBAGxzIAAtAAYgAC0ABhACQf8BcUEAbHMgAC0ABhACQf8BcRACQf8BcXMgAC0ABhACQf8BcRACQf8BcRACQf8BcXMgAC0ABhACQf8BcRACQf8BcRACQf8BcRACQf8BcUEAbHNzIAAtAAUgAC0ABRACQf8BcUEAbHMgAC0ABRACQf8BcRACQf8BcUEAbHMgAC0ABRACQf8BcRACQf8BcRACQf8BcXMgAC0ABRACQf8BcRACQf8BcRACQf8BcRACQf8BcUEAbHNzIAAtAARBAGwgAC0ABBACQf8BcXMgAC0ABBACQf8BcRACQf8BcXMgAC0ABBACQf8BcRACQf8BcRACQf8BcXMgAC0ABBACQf8BcRACQf8BcRACQf8BcRACQf8BcUEAbHNzIQQgACgCDCAAKAIIQQJ0aiAEOgADIAAgACgCCEEBajYCCAwBCwsgAEEQaiQAIAEgAS0AB0EBazoABwwBCwsgASgCDBAHIAEoAgwQD0EAIAEoAgwgASgCCBADIAFBEGokACADKAIYIAMoAhxB8AFqEA4gAygCHCIAIAMpAAA3APABIAAgAykACDcA+AEgAyADKAIYQRBqNgIYIAMgAygCEEEQajYCEAwBCwsgA0EgaiQADAELIAUgASACEA0LIAIhAwsgBUGAAmokACADC4ACAQJ/IwBBgAJrIgMkAAJAIAFFDQAgAkUNACADIAAoAgQgACgCCBALAkACQAJAIAAoAgBBAWsOAgABAgsjAEEgayIAJAAgACADNgIcIAAgATYCGCAAIAI2AhQgACAAKAIcQfABajYCDCAAQQA2AhADQCAAKAIQIAAoAhRJBEAgACgCGCAAKAIMEA4gACgCGCAAKAIcEAogACAAKAIYNgIMIAAgACgCGEEQajYCGCAAIAAoAhBBEGo2AhAMAQsLIAAoAhwiASAAKAIMIgQpAAA3APABIAEgBCkACDcA+AEgAEEgaiQADAELIAMgASACEA0LIAIhBAsgA0GAAmokACAEC9ILAQd/AkAgAEUNACAAQQhrIgIgAEEEaygCACIBQXhxIgBqIQUCQCABQQFxDQAgAUEDcUUNASACIAIoAgAiAWsiAkGoDCgCAEkNASAAIAFqIQACQAJAQawMKAIAIAJHBEAgAUH/AU0EQCABQQN2IQQgAigCDCIBIAIoAggiA0YEQEGYDEGYDCgCAEF+IAR3cTYCAAwFCyADIAE2AgwgASADNgIIDAQLIAIoAhghBiACIAIoAgwiAUcEQCACKAIIIgMgATYCDCABIAM2AggMAwsgAkEUaiIEKAIAIgNFBEAgAigCECIDRQ0CIAJBEGohBAsDQCAEIQcgAyIBQRRqIgQoAgAiAw0AIAFBEGohBCABKAIQIgMNAAsgB0EANgIADAILIAUoAgQiAUEDcUEDRw0CQaAMIAA2AgAgBSABQX5xNgIEIAIgAEEBcjYCBCAFIAA2AgAPC0EAIQELIAZFDQACQCACKAIcIgNBAnRByA5qIgQoAgAgAkYEQCAEIAE2AgAgAQ0BQZwMQZwMKAIAQX4gA3dxNgIADAILIAZBEEEUIAYoAhAgAkYbaiABNgIAIAFFDQELIAEgBjYCGCACKAIQIgMEQCABIAM2AhAgAyABNgIYCyACKAIUIgNFDQAgASADNgIUIAMgATYCGAsgAiAFTw0AIAUoAgQiAUEBcUUNAAJAAkACQAJAIAFBAnFFBEBBsAwoAgAgBUYEQEGwDCACNgIAQaQMQaQMKAIAIABqIgA2AgAgAiAAQQFyNgIEIAJBrAwoAgBHDQZBoAxBADYCAEGsDEEANgIADwtBrAwoAgAgBUYEQEGsDCACNgIAQaAMQaAMKAIAIABqIgA2AgAgAiAAQQFyNgIEIAAgAmogADYCAA8LIAFBeHEgAGohACABQf8BTQRAIAFBA3YhBCAFKAIMIgEgBSgCCCIDRgRAQZgMQZgMKAIAQX4gBHdxNgIADAULIAMgATYCDCABIAM2AggMBAsgBSgCGCEGIAUgBSgCDCIBRwRAQagMKAIAGiAFKAIIIgMgATYCDCABIAM2AggMAwsgBUEUaiIEKAIAIgNFBEAgBSgCECIDRQ0CIAVBEGohBAsDQCAEIQcgAyIBQRRqIgQoAgAiAw0AIAFBEGohBCABKAIQIgMNAAsgB0EANgIADAILIAUgAUF+cTYCBCACIABBAXI2AgQgACACaiAANgIADAMLQQAhAQsgBkUNAAJAIAUoAhwiA0ECdEHIDmoiBCgCACAFRgRAIAQgATYCACABDQFBnAxBnAwoAgBBfiADd3E2AgAMAgsgBkEQQRQgBigCECAFRhtqIAE2AgAgAUUNAQsgASAGNgIYIAUoAhAiAwRAIAEgAzYCECADIAE2AhgLIAUoAhQiA0UNACABIAM2AhQgAyABNgIYCyACIABBAXI2AgQgACACaiAANgIAIAJBrAwoAgBHDQBBoAwgADYCAA8LIABB/wFNBEAgAEF4cUHADGohAQJ/QZgMKAIAIgNBASAAQQN2dCIAcUUEQEGYDCAAIANyNgIAIAEMAQsgASgCCAshACABIAI2AgggACACNgIMIAIgATYCDCACIAA2AggPC0EfIQMgAEH///8HTQRAIABBJiAAQQh2ZyIBa3ZBAXEgAUEBdGtBPmohAwsgAiADNgIcIAJCADcCECADQQJ0QcgOaiEBAkACQAJAQZwMKAIAIgRBASADdCIHcUUEQEGcDCAEIAdyNgIAIAEgAjYCACACIAE2AhgMAQsgAEEZIANBAXZrQQAgA0EfRxt0IQMgASgCACEBA0AgASIEKAIEQXhxIABGDQIgA0EddiEBIANBAXQhAyAEIAFBBHFqIgdBEGooAgAiAQ0ACyAHIAI2AhAgAiAENgIYCyACIAI2AgwgAiACNgIIDAELIAQoAggiACACNgIMIAQgAjYCCCACQQA2AhggAiAENgIMIAIgADYCCAtBuAxBuAwoAgBBAWsiAEF/IAAbNgIACwtjAQF/QQwQBSIDIAA2AgAgA0EgEAUiADYCBCAAIAEpABg3ABggACABKQAQNwAQIAAgASkACDcACCAAIAEpAAA3AAAgA0EQEAUiADYCCCAAIAIpAAg3AAggACACKQAANwAAIAMLC6EEAgBBgAgLkARjfHd78mtvxTABZyv+16t2yoLJffpZR/Ct1KKvnKRywLf9kyY2P/fMNKXl8XHYMRUExyPDGJYFmgcSgOLrJ7J1CYMsGhtuWqBSO9azKeMvhFPRAO0g/LFbasu+OUpMWM/Q76r7Q00zhUX5An9QPJ+oUaNAj5KdOPW8ttohEP/z0s0ME+xfl0QXxKd+PWRdGXNggU/cIiqQiEbuuBTeXgvb4DI6CkkGJFzC06xikZXkeefIN22N1U6pbFb06mV6rgi6eCUuHKa0xujddB9LvYuKcD61ZkgD9g5hNVe5hsEdnuH4mBFp2Y6Umx6H6c5VKN+MoYkNv+ZCaEGZLQ+wVLsWjQECBAgQIECAGzYAAAAAAFIJatUwNqU4v0CjnoHz1/t84zmCmy//hzSOQ0TE3unLVHuUMqbCIz3uTJULQvrDTgguoWYo2SSydluiSW2L0SVy+PZkhmiYFtSkXMxdZbaSbHBIUP3tudpeFUZXp42dhJDYqwCMvNMK9+RYBbizRQbQLB6Pyj8PAsGvvQMBE4prOpERQU9n3OqX8s/O8LTmc5asdCLnrTWF4vk36Bx1325H8RpxHSnFiW+3Yg6qGL4b/FY+S8bSeSCa28D+eM1a9B/dqDOIB8cxsRIQWSeA7F9gUX+pGbVKDS3lep+TyZzvoOA7Ta4q9bDI67s8g1OZYRcrBH66d9Ym4WkUY1UhDH0AQZAMCwMQCAE=")||(E=C,C=t.locateFile?t.locateFile(E,u):u+E);var k=function(e){for(;e.length>0;)e.shift()(t)};t.noExitRuntime;var T,j=function(e){var t=(e-p.buffer.byteLength+65535)/65536;try{return p.grow(t),m(),1}catch(e){}},M={b:function(){S("")},a:function(e){var t=y.length,r=2147483648;if((e>>>=0)>r)return!1;for(var n,o,i=1;i<=4;i*=2){var a=t*(1+.2/i);a=Math.min(a,e+100663296);var s=Math.min(r,(n=Math.max(e,a))+((o=65536)-n%o)%o);if(j(s))return!0}return!1}},B=function(){var e={a:M};function r(e,r){var n;return B=e.exports,p=B.c,m(),n=B.d,v.unshift(n),function(e){if(A--,t.monitorRunDependencies&&t.monitorRunDependencies(A),0==A&&w){var r=w;w=null,r()}}(),B}if(A++,t.monitorRunDependencies&&t.monitorRunDependencies(A),t.instantiateWasm)try{return t.instantiateWasm(e,r)}catch(e){return h("Module.instantiateWasm callback failed with error: ".concat(e)),!1}return function(e,t,r,n){(function(e,t,r){x(e).then(function(e){return WebAssembly.instantiate(e,t)}).then(function(e){return e}).then(r,function(e){h("failed to asynchronously prepare wasm: ".concat(e)),S(e)})})(t,r,n)}(0,C,e,function(e){r(e.instance)}),{}}();function N(){function e(){T||(T=!0,t.calledRun=!0,d||(k(v),t.onRuntimeInitialized&&t.onRuntimeInitialized(),function(){if(t.postRun)for("function"==typeof t.postRun&&(t.postRun=[t.postRun]);t.postRun.length;)e=t.postRun.shift(),b.unshift(e);var e;k(b)}()))}A>0||(function(){if(t.preRun)for("function"==typeof t.preRun&&(t.preRun=[t.preRun]);t.preRun.length;)e=t.preRun.shift(),g.unshift(e);var e;k(g)}(),A>0||(t.setStatus?(t.setStatus("Running..."),setTimeout(function(){setTimeout(function(){t.setStatus("")},1),e()},1)):e()))}if(t._UGCWasm_CipherAES_New=function(e,r,n){return(t._UGCWasm_CipherAES_New=B.e)(e,r,n)},t._UGCWasm_CipherAES_Encrypt=function(e,r,n){return(t._UGCWasm_CipherAES_Encrypt=B.f)(e,r,n)},t._UGCWasm_CipherAES_Decrypt=function(e,r,n){return(t._UGCWasm_CipherAES_Decrypt=B.g)(e,r,n)},t._malloc=function(e){return(t._malloc=B.i)(e)},t._free=function(e){return(t._free=B.j)(e)},w=function e(){T||N(),T||(w=e)},t.preInit)for("function"==typeof t.preInit&&(t.preInit=[t.preInit]);t.preInit.length>0;)t.preInit.pop()();return N(),t}();e.exports=r}(zre);var ane=Gre(zre.exports);function sne(e,t){for(var r=0;r<e.length;r++)t[r]=e[r];return t}function une(e,t){var r,n=new Uint8Array(t.arrayBuffer),o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:256;return e.byteLength<=t?e:e.subarray(0,t)}(n,t.decodeSize),i=e.Module;if(t.decrypt)r=sne(t.decrypt({key:t.key,bytes:o}),n);else{var a=function(e){var t;return lne[e]?t=lne[e]:(t=function(e){return function(e){try{for(var t=atob(e),r=t.length,n=Math.ceil(r/32),o=new Array(n),i=0;i<n;++i){for(var a=32*i,s=Math.min(a+32,r),u=new Array(s-a),l=a,c=0;l<s;++c,++l)u[c]=t[l].charCodeAt(0);o[i]=new Uint8Array(u)}return o}catch(e){return void console.log("Couldn't convert to byte array: "+e)}}(e)[0]}(e),lne[e]=t),t}(t.key),s=i._malloc(a.length*a.BYTES_PER_ELEMENT);i.HEAPU8.set(a,s/a.BYTES_PER_ELEMENT);var u=new Uint8Array(t.ivKey),l=i._malloc(u.length*u.BYTES_PER_ELEMENT);i.HEAPU8.set(u,l/u.BYTES_PER_ELEMENT);var c=i[e.newCipherName](2,s,l);i._free(s),i._free(l),r=function(e,t,r,n){var o=n.Module,i=o._malloc(e.length*e.BYTES_PER_ELEMENT);o.HEAPU8.set(e,i/e.BYTES_PER_ELEMENT),o[n.decryptCipherName](t,i,e.length);var a=sne(o.HEAPU8.subarray(i,i+e.length),r);return n.deleteCipherName&&o._UGCWasm_CipherSM4_Delete(t),o._free(i),a}(o,c,n,e).buffer}return t.decryptCompletedFunction&&t.decryptCompletedFunction(r),r}var lne={},cne={exports:{}};!function(e,t){var r=function(t){t=void 0!==t?t:{};var r,n,o=Object.assign({},t),i="object"==("undefined"==typeof window?"undefined":Fre(window)),a="function"==typeof importScripts,s="object"==("undefined"==typeof process?"undefined":Fre(process))&&"object"==Fre(process.versions)&&"string"==typeof process.versions.node,u="";if(s){var l=Hre,c=ine;u=a?c.dirname(u)+"/":"//",r=function(e,t){return e=O(e)?new URL(e):c.normalize(e),l.readFileSync(e,t?void 0:"utf8")},n=function(e){var t=r(e,!0);return t.buffer||(t=new Uint8Array(t)),t},!t.thisProgram&&process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),e.exports=t,process.on("uncaughtException",function(e){if(!("unwind"===e||e instanceof P||e.context instanceof P))throw e}),t.inspect=function(){return"[Emscripten Module object]"}}else(i||a)&&(a?u=self.location.href:"undefined"!=typeof document&&document.currentScript&&(u=document.currentScript.src),u=0!==u.indexOf("blob:")?u.substr(0,u.replace(/[?#].*/,"").lastIndexOf("/")+1):"",r=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},a&&(n=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}));t.print||console.log.bind(console);var f,p,h=t.printErr||console.error.bind(console);Object.assign(t,o),o=null,t.arguments&&t.arguments,t.thisProgram&&t.thisProgram,t.quit&&t.quit,t.wasmBinary&&(f=t.wasmBinary),"object"!=("undefined"==typeof WebAssembly?"undefined":Fre(WebAssembly))&&S("no native wasm support detected");var y,d=!1;function m(){var e=p.buffer;t.HEAP8=new Int8Array(e),t.HEAP16=new Int16Array(e),t.HEAPU8=y=new Uint8Array(e),t.HEAPU16=new Uint16Array(e),t.HEAP32=new Int32Array(e),t.HEAPU32=new Uint32Array(e),t.HEAPF32=new Float32Array(e),t.HEAPF64=new Float64Array(e)}var g=[],v=[],b=[],A=0,w=null;function S(e){throw t.onAbort&&t.onAbort(e),h(e="Aborted("+e+")"),d=!0,e+=". Build with -sASSERTIONS for more info.",new WebAssembly.RuntimeError(e)}var C,E,_="data:application/octet-stream;base64,",I=function(e){return e.startsWith(_)},O=function(e){return e.startsWith("file://")};function x(e,t,r){return function(e){return Promise.resolve().then(function(){return function(e){if(e==C&&f)return new Uint8Array(f);var t=function(e){if(I(e))return function(e){if(void 0!==s&&s){var t=Buffer.from(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.length)}for(var r=atob(e),n=new Uint8Array(r.length),o=0;o<r.length;++o)n[o]=r.charCodeAt(o);return n}(e.slice(_.length))}(e);if(t)return t;if(n)return n(e);throw"both async and sync fetching of the wasm failed"}(e)})}(e).then(function(e){return WebAssembly.instantiate(e,t)}).then(function(e){return e}).then(r,function(e){h("failed to asynchronously prepare wasm: ".concat(e)),S(e)})}function P(e){this.name="ExitStatus",this.message="Program terminated with exit(".concat(e,")"),this.status=e}I(C="data:application/octet-stream;base64,AGFzbQEAAAABLghgAX8Bf2AAAGADf39/AGADf39/AX9gAX8AYAR/f39/AGACf38AYAV/f39/fwACEwMBYQFhAAEBYQFiAAABYQFjAAIDDw4EAAACAQIFBgcABAMDAwQFAXABAQEFBwEBgAKAgAIGCAF/AUGQlwQLByUJAWQCAAFlAAcBZgAQAWcADwFoAA4BaQANAWoBAAFrAAwBbAADCuvpAQ7SCwEHfwJAIABFDQAgAEEIayICIABBBGsoAgAiAUF4cSIAaiEFAkAgAUEBcQ0AIAFBA3FFDQEgAiACKAIAIgFrIgJBqBMoAgBJDQEgACABaiEAAkACQEGsEygCACACRwRAIAFB/wFNBEAgAUEDdiEEIAIoAgwiASACKAIIIgNGBEBBmBNBmBMoAgBBfiAEd3E2AgAMBQsgAyABNgIMIAEgAzYCCAwECyACKAIYIQYgAiACKAIMIgFHBEAgAigCCCIDIAE2AgwgASADNgIIDAMLIAJBFGoiBCgCACIDRQRAIAIoAhAiA0UNAiACQRBqIQQLA0AgBCEHIAMiAUEUaiIEKAIAIgMNACABQRBqIQQgASgCECIDDQALIAdBADYCAAwCCyAFKAIEIgFBA3FBA0cNAkGgEyAANgIAIAUgAUF+cTYCBCACIABBAXI2AgQgBSAANgIADwtBACEBCyAGRQ0AAkAgAigCHCIDQQJ0QcgVaiIEKAIAIAJGBEAgBCABNgIAIAENAUGcE0GcEygCAEF+IAN3cTYCAAwCCyAGQRBBFCAGKAIQIAJGG2ogATYCACABRQ0BCyABIAY2AhggAigCECIDBEAgASADNgIQIAMgATYCGAsgAigCFCIDRQ0AIAEgAzYCFCADIAE2AhgLIAIgBU8NACAFKAIEIgFBAXFFDQACQAJAAkACQCABQQJxRQRAQbATKAIAIAVGBEBBsBMgAjYCAEGkE0GkEygCACAAaiIANgIAIAIgAEEBcjYCBCACQawTKAIARw0GQaATQQA2AgBBrBNBADYCAA8LQawTKAIAIAVGBEBBrBMgAjYCAEGgE0GgEygCACAAaiIANgIAIAIgAEEBcjYCBCAAIAJqIAA2AgAPCyABQXhxIABqIQAgAUH/AU0EQCABQQN2IQQgBSgCDCIBIAUoAggiA0YEQEGYE0GYEygCAEF+IAR3cTYCAAwFCyADIAE2AgwgASADNgIIDAQLIAUoAhghBiAFIAUoAgwiAUcEQEGoEygCABogBSgCCCIDIAE2AgwgASADNgIIDAMLIAVBFGoiBCgCACIDRQRAIAUoAhAiA0UNAiAFQRBqIQQLA0AgBCEHIAMiAUEUaiIEKAIAIgMNACABQRBqIQQgASgCECIDDQALIAdBADYCAAwCCyAFIAFBfnE2AgQgAiAAQQFyNgIEIAAgAmogADYCAAwDC0EAIQELIAZFDQACQCAFKAIcIgNBAnRByBVqIgQoAgAgBUYEQCAEIAE2AgAgAQ0BQZwTQZwTKAIAQX4gA3dxNgIADAILIAZBEEEUIAYoAhAgBUYbaiABNgIAIAFFDQELIAEgBjYCGCAFKAIQIgMEQCABIAM2AhAgAyABNgIYCyAFKAIUIgNFDQAgASADNgIUIAMgATYCGAsgAiAAQQFyNgIEIAAgAmogADYCACACQawTKAIARw0AQaATIAA2AgAPCyAAQf8BTQRAIABBeHFBwBNqIQECf0GYEygCACIDQQEgAEEDdnQiAHFFBEBBmBMgACADcjYCACABDAELIAEoAggLIQAgASACNgIIIAAgAjYCDCACIAE2AgwgAiAANgIIDwtBHyEDIABB////B00EQCAAQSYgAEEIdmciAWt2QQFxIAFBAXRrQT5qIQMLIAIgAzYCHCACQgA3AhAgA0ECdEHIFWohAQJAAkACQEGcEygCACIEQQEgA3QiB3FFBEBBnBMgBCAHcjYCACABIAI2AgAgAiABNgIYDAELIABBGSADQQF2a0EAIANBH0cbdCEDIAEoAgAhAQNAIAEiBCgCBEF4cSAARg0CIANBHXYhASADQQF0IQMgBCABQQRxaiIHQRBqKAIAIgENAAsgByACNgIQIAIgBDYCGAsgAiACNgIMIAIgAjYCCAwBCyAEKAIIIgAgAjYCDCAEIAI2AgggAkEANgIYIAIgBDYCDCACIAA2AggLQbgTQbgTKAIAQQFrIgBBfyAAGzYCAAsLTwECf0GQEygCACIBIABBB2pBeHEiAmohAAJAIAJBACAAIAFNGw0AIAA/AEEQdEsEQCAAEAFFDQELQZATIAA2AgAgAQ8LQZQTQTA2AgBBfws1AQF/QQEgACAAQQFNGyEAAkADQCAAEAwiAQ0BQYgXKAIAIgEEQCABEQEADAELCxAAAAsgAQuOTwEBfyMAQTBrIgMgADYCLCADIAE2AiggAyACNgIkIAMgAygCLDYCICADIAMoAigiAC0AAEEYdCAALQABQRB0ciAALQACQQh0ciAALQADcjYCHCADIAMoAigtAAcgAygCKC0ABEEYdCADKAIoLQAFQRB0ciADKAIoLQAGQQh0cnI2AhggAyADKAIoLQALIAMoAigtAAhBGHQgAygCKC0ACUEQdHIgAygCKC0ACkEIdHJyNgIUIAMgAygCKC0ADyADKAIoLQAMQRh0IAMoAigtAA1BEHRyIAMoAigtAA5BCHRycjYCECADIAMoAiAoAgAgAygCECADKAIYIAMoAhRzc3M2AgwgAyADKAIMQf8BcUECdEGACmooAgAiAEEIdCAAQRh2cjYCCCADIAMoAgxBCHY2AgwgAyADKAIIIAMoAhxzNgIcIAMgAygCDEH/AXFBAnRBgApqKAIAQRB0IAMoAgxB/wFxQQJ0QYAKaigCAEEQdnI2AgggAyADKAIMQQh2NgIMIAMgAygCCCADKAIcczYCHCADIAMoAgxB/wFxQQJ0QYAKaigCAEEYdCADKAIMQf8BcUECdEGACmooAgBBCHZyNgIIIAMgAygCDEEIdjYCDCADIAMoAgggAygCHHM2AhwgAyADKAIMQQJ0QYAKaigCADYCBCADIAMoAhwgAygCBHM2AgwgAyADKAIgKAIEIAMoAgwgAygCFCADKAIQc3NzNgIcIAMgAygCHEH/AXFBAnRBgApqKAIAIgBBCHQgAEEYdnI2AgggAyADKAIcQQh2NgIcIAMgAygCCCADKAIYczYCGCADIAMoAhxB/wFxQQJ0QYAKaigCAEEQdCADKAIcQf8BcUECdEGACmooAgBBEHZyNgIIIAMgAygCHEEIdjYCHCADIAMoAgggAygCGHM2AhggAyADKAIcQf8BcUECdEGACmooAgBBGHQgAygCHEH/AXFBAnRBgApqKAIAQQh2cjYCCCADIAMoAhxBCHY2AhwgAyADKAIIIAMoAhhzNgIYIAMgAygCHEECdEGACmooAgA2AgQgAyADKAIYIAMoAgRzNgIcIAMgAygCICgCCCADKAIcIAMoAhAgAygCDHNzczYCGCADIAMoAhhB/wFxQQJ0QYAKaigCACIAQQh0IABBGHZyNgIIIAMgAygCGEEIdjYCGCADIAMoAgggAygCFHM2AhQgAyADKAIYQf8BcUECdEGACmooAgBBEHQgAygCGEH/AXFBAnRBgApqKAIAQRB2cjYCCCADIAMoAhhBCHY2AhggAyADKAIIIAMoAhRzNgIUIAMgAygCGEH/AXFBAnRBgApqKAIAQRh0IAMoAhhB/wFxQQJ0QYAKaigCAEEIdnI2AgggAyADKAIYQQh2NgIYIAMgAygCCCADKAIUczYCFCADIAMoAhhBAnRBgApqKAIANgIEIAMgAygCFCADKAIEczYCGCADIAMoAiAoAgwgAygCGCADKAIMIAMoAhxzc3M2AhQgAyADKAIUQf8BcUECdEGACmooAgAiAEEIdCAAQRh2cjYCCCADIAMoAhRBCHY2AhQgAyADKAIIIAMoAhBzNgIQIAMgAygCFEH/AXFBAnRBgApqKAIAQRB0IAMoAhRB/wFxQQJ0QYAKaigCAEEQdnI2AgggAyADKAIUQQh2NgIUIAMgAygCCCADKAIQczYCECADIAMoAhRB/wFxQQJ0QYAKaigCAEEYdCADKAIUQf8BcUECdEGACmooAgBBCHZyNgIIIAMgAygCFEEIdjYCFCADIAMoAgggAygCEHM2AhAgAyADKAIUQQJ0QYAKaigCADYCBCADIAMoAhAgAygCBHM2AhQgAyADKAIgKAIQIAMoAhQgAygCHCADKAIYc3NzNgIQIAMgAygCEEH/AXFBAnRBgApqKAIAIgBBCHQgAEEYdnI2AgggAyADKAIQQQh2NgIQIAMgAygCCCADKAIMczYCDCADIAMoAhBB/wFxQQJ0QYAKaigCAEEQdCADKAIQQf8BcUECdEGACmooAgBBEHZyNgIIIAMgAygCEEEIdjYCECADIAMoAgggAygCDHM2AgwgAyADKAIQQf8BcUECdEGACmooAgBBGHQgAygCEEH/AXFBAnRBgApqKAIAQQh2cjYCCCADIAMoAhBBCHY2AhAgAyADKAIIIAMoAgxzNgIMIAMgAygCEEECdEGACmooAgA2AgQgAyADKAIMIAMoAgRzNgIQIAMgAygCICgCFCADKAIQIAMoAhggAygCFHNzczYCDCADIAMoAgxB/wFxQQJ0QYAKaigCAEEIdCADKAIMQf8BcUECdEGACmooAgBBGHZyNgIIIAMgAygCDEEIdjYCDCADIAMoAgggAygCHHM2AhwgAyADKAIMQf8BcUECdEGACmooAgBBEHQgAygCDEH/AXFBAnRBgApqKAIAQRB2cjYCCCADIAMoAgxBCHY2AgwgAyADKAIIIAMoAhxzNgIcIAMgAygCDEH/AXFBAnRBgApqKAIAQRh0IAMoAgxB/wFxQQJ0QYAKaigCAEEIdnI2AgggAyADKAIMQQh2NgIMIAMgAygCCCADKAIcczYCHCADIAMoAgxBAnRBgApqKAIANgIEIAMgAygCHCADKAIEczYCDCADIAMoAiAoAhggAygCDCADKAIUIAMoAhBzc3M2AhwgAyADKAIcQf8BcUECdEGACmooAgBBCHQgAygCHEH/AXFBAnRBgApqKAIAQRh2cjYCCCADIAMoAhxBCHY2AhwgAyADKAIIIAMoAhhzNgIYIAMgAygCHEH/AXFBAnRBgApqKAIAQRB0IAMoAhxB/wFxQQJ0QYAKaigCAEEQdnI2AgggAyADKAIcQQh2NgIcIAMgAygCCCADKAIYczYCGCADIAMoAhxB/wFxQQJ0QYAKaigCAEEYdCADKAIcQf8BcUECdEGACmooAgBBCHZyNgIIIAMgAygCHEEIdjYCHCADIAMoAgggAygCGHM2AhggAyADKAIcQQJ0QYAKaigCADYCBCADIAMoAhggAygCBHM2AhwgAyADKAIgKAIcIAMoAhwgAygCECADKAIMc3NzNgIYIAMgAygCGEH/AXFBAnRBgApqKAIAQQh0IAMoAhhB/wFxQQJ0QYAKaigCAEEYdnI2AgggAyADKAIYQQh2NgIYIAMgAygCCCADKAIUczYCFCADIAMoAhhB/wFxQQJ0QYAKaigCAEEQdCADKAIYQf8BcUECdEGACmooAgBBEHZyNgIIIAMgAygCGEEIdjYCGCADIAMoAgggAygCFHM2AhQgAyADKAIYQf8BcUECdEGACmooAgBBGHQgAygCGEH/AXFBAnRBgApqKAIAQQh2cjYCCCADIAMoAhhBCHY2AhggAyADKAIIIAMoAhRzNgIUIAMgAygCGEECdEGACmooAgA2AgQgAyADKAIUIAMoAgRzNgIYIAMgAygCICgCICADKAIYIAMoAgwgAygCHHNzczYCFCADIAMoAhRB/wFxQQJ0QYAKaigCAEEIdCADKAIUQf8BcUECdEGACmooAgBBGHZyNgIIIAMgAygCFEEIdjYCFCADIAMoAgggAygCEHM2AhAgAyADKAIUQf8BcUECdEGACmooAgBBEHQgAygCFEH/AXFBAnRBgApqKAIAQRB2cjYCCCADIAMoAhRBCHY2AhQgAyADKAIIIAMoAhBzNgIQIAMgAygCFEH/AXFBAnRBgApqKAIAQRh0IAMoAhRB/wFxQQJ0QYAKaigCAEEIdnI2AgggAyADKAIUQQh2NgIUIAMgAygCCCADKAIQczYCECADIAMoAhRBAnRBgApqKAIANgIEIAMgAygCECADKAIEczYCFCADIAMoAiAoAiQgAygCFCADKAIcIAMoAhhzc3M2AhAgAyADKAIQQf8BcUECdEGACmooAgBBCHQgAygCEEH/AXFBAnRBgApqKAIAQRh2cjYCCCADIAMoAhBBCHY2AhAgAyADKAIIIAMoAgxzNgIMIAMgAygCEEH/AXFBAnRBgApqKAIAQRB0IAMoAhBB/wFxQQJ0QYAKaigCAEEQdnI2AgggAyADKAIQQQh2NgIQIAMgAygCCCADKAIMczYCDCADIAMoAhBB/wFxQQJ0QYAKaigCAEEYdCADKAIQQf8BcUECdEGACmooAgBBCHZyNgIIIAMgAygCEEEIdjYCECADIAMoAgggAygCDHM2AgwgAyADKAIQQQJ0QYAKaigCADYCBCADIAMoAgwgAygCBHM2AhAgAyADKAIgKAIoIAMoAhAgAygCGCADKAIUc3NzNgIMIAMgAygCDEH/AXFBAnRBgApqKAIAQQh0IAMoAgxB/wFxQQJ0QYAKaigCAEEYdnI2AgggAyADKAIMQQh2NgIMIAMgAygCCCADKAIcczYCHCADIAMoAgxB/wFxQQJ0QYAKaigCAEEQdCADKAIMQf8BcUECdEGACmooAgBBEHZyNgIIIAMgAygCDEEIdjYCDCADIAMoAgggAygCHHM2AhwgAyADKAIMQf8BcUECdEGACmooAgBBGHQgAygCDEH/AXFBAnRBgApqKAIAQQh2cjYCCCADIAMoAgxBCHY2AgwgAyADKAIIIAMoAhxzNgIcIAMgAygCDEECdEGACmooAgA2AgQgAyADKAIcIAMoAgRzNgIMIAMgAygCICgCLCADKAIMIAMoAhQgAygCEHNzczYCHCADIAMoAhxB/wFxQQJ0QYAKaigCAEEIdCADKAIcQf8BcUECdEGACmooAgBBGHZyNgIIIAMgAygCHEEIdjYCHCADIAMoAgggAygCGHM2AhggAyADKAIcQf8BcUECdEGACmooAgBBEHQgAygCHEH/AXFBAnRBgApqKAIAQRB2cjYCCCADIAMoAhxBCHY2AhwgAyADKAIIIAMoAhhzNgIYIAMgAygCHEH/AXFBAnRBgApqKAIAQRh0IAMoAhxB/wFxQQJ0QYAKaigCAEEIdnI2AgggAyADKAIcQQh2NgIcIAMgAygCCCADKAIYczYCGCADIAMoAhxBAnRBgApqKAIANgIEIAMgAygCGCADKAIEczYCHCADIAMoAiAoAjAgAygCHCADKAIQIAMoAgxzc3M2AhggAyADKAIYQf8BcUECdEGACmooAgBBCHQgAygCGEH/AXFBAnRBgApqKAIAQRh2cjYCCCADIAMoAhhBCHY2AhggAyADKAIIIAMoAhRzNgIUIAMgAygCGEH/AXFBAnRBgApqKAIAQRB0IAMoAhhB/wFxQQJ0QYAKaigCAEEQdnI2AgggAyADKAIYQQh2NgIYIAMgAygCCCADKAIUczYCFCADIAMoAhhB/wFxQQJ0QYAKaigCAEEYdCADKAIYQf8BcUECdEGACmooAgBBCHZyNgIIIAMgAygCGEEIdjYCGCADIAMoAgggAygCFHM2AhQgAyADKAIYQQJ0QYAKaigCADYCBCADIAMoAhQgAygCBHM2AhggAyADKAIgKAI0IAMoAhggAygCDCADKAIcc3NzNgIUIAMgAygCFEH/AXFBAnRBgApqKAIAQQh0IAMoAhRB/wFxQQJ0QYAKaigCAEEYdnI2AgggAyADKAIUQQh2NgIUIAMgAygCCCADKAIQczYCECADIAMoAhRB/wFxQQJ0QYAKaigCAEEQdCADKAIUQf8BcUECdEGACmooAgBBEHZyNgIIIAMgAygCFEEIdjYCFCADIAMoAgggAygCEHM2AhAgAyADKAIUQf8BcUECdEGACmooAgBBGHQgAygCFEH/AXFBAnRBgApqKAIAQQh2cjYCCCADIAMoAhRBCHY2AhQgAyADKAIIIAMoAhBzNgIQIAMgAygCFEECdEGACmooAgA2AgQgAyADKAIQIAMoAgRzNgIUIAMgAygCICgCOCADKAIUIAMoAhwgAygCGHNzczYCECADIAMoAhBB/wFxQQJ0QYAKaigCAEEIdCADKAIQQf8BcUECdEGACmooAgBBGHZyNgIIIAMgAygCEEEIdjYCECADIAMoAgggAygCDHM2AgwgAyADKAIQQf8BcUECdEGACmooAgBBEHQgAygCEEH/AXFBAnRBgApqKAIAQRB2cjYCCCADIAMoAhBBCHY2AhAgAyADKAIIIAMoAgxzNgIMIAMgAygCEEH/AXFBAnRBgApqKAIAQRh0IAMoAhBB/wFxQQJ0QYAKaigCAEEIdnI2AgggAyADKAIQQQh2NgIQIAMgAygCCCADKAIMczYCDCADIAMoAhBBAnRBgApqKAIANgIEIAMgAygCDCADKAIEczYCECADIAMoAiAoAjwgAygCECADKAIYIAMoAhRzc3M2AgwgAyADKAIMQf8BcUECdEGACmooAgBBCHQgAygCDEH/AXFBAnRBgApqKAIAQRh2cjYCCCADIAMoAgxBCHY2AgwgAyADKAIIIAMoAhxzNgIcIAMgAygCDEH/AXFBAnRBgApqKAIAQRB0IAMoAgxB/wFxQQJ0QYAKaigCAEEQdnI2AgggAyADKAIMQQh2NgIMIAMgAygCCCADKAIcczYCHCADIAMoAgxB/wFxQQJ0QYAKaigCAEEYdCADKAIMQf8BcUECdEGACmooAgBBCHZyNgIIIAMgAygCDEEIdjYCDCADIAMoAgggAygCHHM2AhwgAyADKAIMQQJ0QYAKaigCADYCBCADIAMoAhwgAygCBHM2AgwgAyADKAIgKAJAIAMoAgwgAygCFCADKAIQc3NzNgIcIAMgAygCHEH/AXFBAnRBgApqKAIAQQh0IAMoAhxB/wFxQQJ0QYAKaigCAEEYdnI2AgggAyADKAIcQQh2NgIcIAMgAygCCCADKAIYczYCGCADIAMoAhxB/wFxQQJ0QYAKaigCAEEQdCADKAIcQf8BcUECdEGACmooAgBBEHZyNgIIIAMgAygCHEEIdjYCHCADIAMoAgggAygCGHM2AhggAyADKAIcQf8BcUECdEGACmooAgBBGHQgAygCHEH/AXFBAnRBgApqKAIAQQh2cjYCCCADIAMoAhxBCHY2AhwgAyADKAIIIAMoAhhzNgIYIAMgAygCHEECdEGACmooAgA2AgQgAyADKAIYIAMoAgRzNgIcIAMgAygCICgCRCADKAIcIAMoAhAgAygCDHNzczYCGCADIAMoAhhB/wFxQQJ0QYAKaigCAEEIdCADKAIYQf8BcUECdEGACmooAgBBGHZyNgIIIAMgAygCGEEIdjYCGCADIAMoAgggAygCFHM2AhQgAyADKAIYQf8BcUECdEGACmooAgBBEHQgAygCGEH/AXFBAnRBgApqKAIAQRB2cjYCCCADIAMoAhhBCHY2AhggAyADKAIIIAMoAhRzNgIUIAMgAygCGEH/AXFBAnRBgApqKAIAQRh0IAMoAhhB/wFxQQJ0QYAKaigCAEEIdnI2AgggAyADKAIYQQh2NgIYIAMgAygCCCADKAIUczYCFCADIAMoAhhBAnRBgApqKAIANgIEIAMgAygCFCADKAIEczYCGCADIAMoAiAoAkggAygCGCADKAIMIAMoAhxzc3M2AhQgAyADKAIUQf8BcUECdEGACmooAgBBCHQgAygCFEH/AXFBAnRBgApqKAIAQRh2cjYCCCADIAMoAhRBCHY2AhQgAyADKAIIIAMoAhBzNgIQIAMgAygCFEH/AXFBAnRBgApqKAIAQRB0IAMoAhRB/wFxQQJ0QYAKaigCAEEQdnI2AgggAyADKAIUQQh2NgIUIAMgAygCCCADKAIQczYCECADIAMoAhRB/wFxQQJ0QYAKaigCAEEYdCADKAIUQf8BcUECdEGACmooAgBBCHZyNgIIIAMgAygCFEEIdjYCFCADIAMoAgggAygCEHM2AhAgAyADKAIUQQJ0QYAKaigCADYCBCADIAMoAhAgAygCBHM2AhQgAyADKAIgKAJMIAMoAhQgAygCHCADKAIYc3NzNgIQIAMgAygCEEH/AXFBAnRBgApqKAIAQQh0IAMoAhBB/wFxQQJ0QYAKaigCAEEYdnI2AgggAyADKAIQQQh2NgIQIAMgAygCCCADKAIMczYCDCADIAMoAhBB/wFxQQJ0QYAKaigCAEEQdCADKAIQQf8BcUECdEGACmooAgBBEHZyNgIIIAMgAygCEEEIdjYCECADIAMoAgggAygCDHM2AgwgAyADKAIQQf8BcUECdEGACmooAgBBGHQgAygCEEH/AXFBAnRBgApqKAIAQQh2cjYCCCADIAMoAhBBCHY2AhAgAyADKAIIIAMoAgxzNgIMIAMgAygCEEECdEGACmooAgA2AgQgAyADKAIMIAMoAgRzNgIQIAMgAygCICgCUCADKAIQIAMoAhggAygCFHNzczYCDCADIAMoAgxB/wFxQQJ0QYAKaigCAEEIdCADKAIMQf8BcUECdEGACmooAgBBGHZyNgIIIAMgAygCDEEIdjYCDCADIAMoAgggAygCHHM2AhwgAyADKAIMQf8BcUECdEGACmooAgBBEHQgAygCDEH/AXFBAnRBgApqKAIAQRB2cjYCCCADIAMoAgxBCHY2AgwgAyADKAIIIAMoAhxzNgIcIAMgAygCDEH/AXFBAnRBgApqKAIAQRh0IAMoAgxB/wFxQQJ0QYAKaigCAEEIdnI2AgggAyADKAIMQQh2NgIMIAMgAygCCCADKAIcczYCHCADIAMoAgxBAnRBgApqKAIANgIEIAMgAygCHCADKAIEczYCDCADIAMoAiAoAlQgAygCDCADKAIUIAMoAhBzc3M2AhwgAyADKAIcQf8BcUECdEGACmooAgBBCHQgAygCHEH/AXFBAnRBgApqKAIAQRh2cjYCCCADIAMoAhxBCHY2AhwgAyADKAIIIAMoAhhzNgIYIAMgAygCHEH/AXFBAnRBgApqKAIAQRB0IAMoAhxB/wFxQQJ0QYAKaigCAEEQdnI2AgggAyADKAIcQQh2NgIcIAMgAygCCCADKAIYczYCGCADIAMoAhxB/wFxQQJ0QYAKaigCAEEYdCADKAIcQf8BcUECdEGACmooAgBBCHZyNgIIIAMgAygCHEEIdjYCHCADIAMoAgggAygCGHM2AhggAyADKAIcQQJ0QYAKaigCADYCBCADIAMoAhggAygCBHM2AhwgAyADKAIgKAJYIAMoAhwgAygCECADKAIMc3NzNgIYIAMgAygCGEH/AXFBAnRBgApqKAIAQQh0IAMoAhhB/wFxQQJ0QYAKaigCAEEYdnI2AgggAyADKAIYQQh2NgIYIAMgAygCCCADKAIUczYCFCADIAMoAhhB/wFxQQJ0QYAKaigCAEEQdCADKAIYQf8BcUECdEGACmooAgBBEHZyNgIIIAMgAygCGEEIdjYCGCADIAMoAgggAygCFHM2AhQgAyADKAIYQf8BcUECdEGACmooAgBBGHQgAygCGEH/AXFBAnRBgApqKAIAQQh2cjYCCCADIAMoAhhBCHY2AhggAyADKAIIIAMoAhRzNgIUIAMgAygCGEECdEGACmooAgA2AgQgAyADKAIUIAMoAgRzNgIYIAMgAygCICgCXCADKAIYIAMoAgwgAygCHHNzczYCFCADIAMoAhRB/wFxQQJ0QYAKaigCAEEIdCADKAIUQf8BcUECdEGACmooAgBBGHZyNgIIIAMgAygCFEEIdjYCFCADIAMoAgggAygCEHM2AhAgAyADKAIUQf8BcUECdEGACmooAgBBEHQgAygCFEH/AXFBAnRBgApqKAIAQRB2cjYCCCADIAMoAhRBCHY2AhQgAyADKAIIIAMoAhBzNgIQIAMgAygCFEH/AXFBAnRBgApqKAIAQRh0IAMoAhRB/wFxQQJ0QYAKaigCAEEIdnI2AgggAyADKAIUQQh2NgIUIAMgAygCCCADKAIQczYCECADIAMoAhRBAnRBgApqKAIANgIEIAMgAygCECADKAIEczYCFCADIAMoAiAoAmAgAygCFCADKAIcIAMoAhhzc3M2AhAgAyADKAIQQf8BcUECdEGACmooAgBBCHQgAygCEEH/AXFBAnRBgApqKAIAQRh2cjYCCCADIAMoAhBBCHY2AhAgAyADKAIIIAMoAgxzNgIMIAMgAygCEEH/AXFBAnRBgApqKAIAQRB0IAMoAhBB/wFxQQJ0QYAKaigCAEEQdnI2AgggAyADKAIQQQh2NgIQIAMgAygCCCADKAIMczYCDCADIAMoAhBB/wFxQQJ0QYAKaigCAEEYdCADKAIQQf8BcUECdEGACmooAgBBCHZyNgIIIAMgAygCEEEIdjYCECADIAMoAgggAygCDHM2AgwgAyADKAIQQQJ0QYAKaigCADYCBCADIAMoAgwgAygCBHM2AhAgAyADKAIgKAJkIAMoAhAgAygCGCADKAIUc3NzNgIMIAMgAygCDEH/AXFBAnRBgApqKAIAQQh0IAMoAgxB/wFxQQJ0QYAKaigCAEEYdnI2AgggAyADKAIMQQh2NgIMIAMgAygCCCADKAIcczYCHCADIAMoAgxB/wFxQQJ0QYAKaigCAEEQdCADKAIMQf8BcUECdEGACmooAgBBEHZyNgIIIAMgAygCDEEIdjYCDCADIAMoAgggAygCHHM2AhwgAyADKAIMQf8BcUECdEGACmooAgBBGHQgAygCDEH/AXFBAnRBgApqKAIAQQh2cjYCCCADIAMoAgxBCHY2AgwgAyADKAIIIAMoAhxzNgIcIAMgAygCDEECdEGACmooAgA2AgQgAyADKAIcIAMoAgRzNgIMIAMgAygCICgCaCADKAIMIAMoAhQgAygCEHNzczYCHCADIAMoAhxB/wFxQQJ0QYAKaigCAEEIdCADKAIcQf8BcUECdEGACmooAgBBGHZyNgIIIAMgAygCHEEIdjYCHCADIAMoAgggAygCGHM2AhggAyADKAIcQf8BcUECdEGACmooAgBBEHQgAygCHEH/AXFBAnRBgApqKAIAQRB2cjYCCCADIAMoAhxBCHY2AhwgAyADKAIIIAMoAhhzNgIYIAMgAygCHEH/AXFBAnRBgApqKAIAQRh0IAMoAhxB/wFxQQJ0QYAKaigCAEEIdnI2AgggAyADKAIcQQh2NgIcIAMgAygCCCADKAIYczYCGCADIAMoAhxBAnRBgApqKAIANgIEIAMgAygCGCADKAIEczYCHCADIAMoAiAoAmwgAygCHCADKAIQIAMoAgxzc3M2AhggAyADKAIYQf8BcUECdEGACmooAgBBCHQgAygCGEH/AXFBAnRBgApqKAIAQRh2cjYCCCADIAMoAhhBCHY2AhggAyADKAIIIAMoAhRzNgIUIAMgAygCGEH/AXFBAnRBgApqKAIAQRB0IAMoAhhB/wFxQQJ0QYAKaigCAEEQdnI2AgggAyADKAIYQQh2NgIYIAMgAygCCCADKAIUczYCFCADIAMoAhhB/wFxQQJ0QYAKaigCAEEYdCADKAIYQf8BcUECdEGACmooAgBBCHZyNgIIIAMgAygCGEEIdjYCGCADIAMoAgggAygCFHM2AhQgAyADKAIYQQJ0QYAKaigCADYCBCADIAMoAhQgAygCBHM2AhggAyADKAIgKAJwIAMoAhggAygCDCADKAIcc3NzNgIUIAMgAygCFEH/AXFBAnRBgApqKAIAQQh0IAMoAhRB/wFxQQJ0QYAKaigCAEEYdnI2AgggAyADKAIUQQh2NgIUIAMgAygCCCADKAIQczYCECADIAMoAhRB/wFxQQJ0QYAKaigCAEEQdCADKAIUQf8BcUECdEGACmooAgBBEHZyNgIIIAMgAygCFEEIdjYCFCADIAMoAgggAygCEHM2AhAgAyADKAIUQf8BcUECdEGACmooAgBBGHQgAygCFEH/AXFBAnRBgApqKAIAQQh2cjYCCCADIAMoAhRBCHY2AhQgAyADKAIIIAMoAhBzNgIQIAMgAygCFEECdEGACmooAgA2AgQgAyADKAIQIAMoAgRzNgIUIAMgAygCICgCdCADKAIUIAMoAhwgAygCGHNzczYCECADIAMoAhBB/wFxQQJ0QYAKaigCAEEIdCADKAIQQf8BcUECdEGACmooAgBBGHZyNgIIIAMgAygCEEEIdjYCECADIAMoAgggAygCDHM2AgwgAyADKAIQQf8BcUECdEGACmooAgBBEHQgAygCEEH/AXFBAnRBgApqKAIAQRB2cjYCCCADIAMoAhBBCHY2AhAgAyADKAIIIAMoAgxzNgIMIAMgAygCEEH/AXFBAnRBgApqKAIAQRh0IAMoAhBB/wFxQQJ0QYAKaigCAEEIdnI2AgggAyADKAIQQQh2NgIQIAMgAygCCCADKAIMczYCDCADIAMoAhBBAnRBgApqKAIANgIEIAMgAygCDCADKAIEczYCECADIAMoAiAoAnggAygCECADKAIYIAMoAhRzc3M2AgwgAyADKAIMQf8BcUECdEGACmooAgBBCHQgAygCDEH/AXFBAnRBgApqKAIAQRh2cjYCCCADIAMoAgxBCHY2AgwgAyADKAIIIAMoAhxzNgIcIAMgAygCDEH/AXFBAnRBgApqKAIAQRB0IAMoAgxB/wFxQQJ0QYAKaigCAEEQdnI2AgggAyADKAIMQQh2NgIMIAMgAygCCCADKAIcczYCHCADIAMoAgxB/wFxQQJ0QYAKaigCAEEYdCADKAIMQf8BcUECdEGACmooAgBBCHZyNgIIIAMgAygCDEEIdjYCDCADIAMoAgggAygCHHM2AhwgAyADKAIMQQJ0QYAKaigCADYCBCADIAMoAhwgAygCBHM2AgwgAyADKAIgKAJ8IAMoAgwgAygCFCADKAIQc3NzNgIcIAMgAygCHEH/AXFBAnRBgApqKAIAQQh0IAMoAhxB/wFxQQJ0QYAKaigCAEEYdnI2AgggAyADKAIcQQh2NgIcIAMgAygCCCADKAIYczYCGCADIAMoAhxB/wFxQQJ0QYAKaigCAEEQdCADKAIcQf8BcUECdEGACmooAgBBEHZyNgIIIAMgAygCHEEIdjYCHCADIAMoAgggAygCGHM2AhggAyADKAIcQf8BcUECdEGACmooAgBBGHQgAygCHEH/AXFBAnRBgApqKAIAQQh2cjYCCCADIAMoAhxBCHY2AhwgAyADKAIIIAMoAhhzNgIYIAMgAygCHEECdEGACmooAgA2AgQgAyADKAIYIAMoAgRzNgIcIAMoAiQgAygCHEEYdjoAACADKAIkIAMoAhxBEHY6AAEgAygCJCADKAIcQQh2OgACIAMoAiQgAygCHDoAAyADKAIkIAMoAgxBGHY6AAQgAygCJCADKAIMQRB2OgAFIAMoAiQgAygCDEEIdjoABiADKAIkIAMoAgw6AAcgAygCJCADKAIQQRh2OgAIIAMoAiQgAygCEEEQdjoACSADKAIkIAMoAhBBCHY6AAogAygCJCADKAIQOgALIAMoAiQgAygCFEEYdjoADCADKAIkIAMoAhRBEHY6AA0gAygCJCADKAIUQQh2OgAOIAMoAiQgAygCFDoADwsCAAv8AwECfyACQYAETwRAIAAgASACEAIPCyAAIAJqIQMCQCAAIAFzQQNxRQRAAkAgAEEDcUUEQCAAIQIMAQsgAkUEQCAAIQIMAQsgACECA0AgAiABLQAAOgAAIAFBAWohASACQQFqIgJBA3FFDQEgAiADSQ0ACwsCQCADQXxxIgBBwABJDQAgAiAAQUBqIgRLDQADQCACIAEoAgA2AgAgAiABKAIENgIEIAIgASgCCDYCCCACIAEoAgw2AgwgAiABKAIQNgIQIAIgASgCFDYCFCACIAEoAhg2AhggAiABKAIcNgIcIAIgASgCIDYCICACIAEoAiQ2AiQgAiABKAIoNgIoIAIgASgCLDYCLCACIAEoAjA2AjAgAiABKAI0NgI0IAIgASgCODYCOCACIAEoAjw2AjwgAUFAayEBIAJBQGsiAiAETQ0ACwsgACACTQ0BA0AgAiABKAIANgIAIAFBBGohASACQQRqIgIgAEkNAAsMAQsgA0EESQRAIAAhAgwBCyAAIANBBGsiBEsEQCAAIQIMAQsgACECA0AgAiABLQAAOgAAIAIgAS0AAToAASACIAEtAAI6AAIgAiABLQADOgADIAFBBGohASACQQRqIgIgBE0NAAsLIAIgA0kEQANAIAIgAS0AADoAACABQQFqIQEgAkEBaiICIANHDQALCwuPAQEBfyMAQSBrIgQgADYCHCAEIAE2AhggBCACNgIUIAQgAzYCECAEIAQoAhw2AgwgBCAEKAIYNgIIIAQgBCgCFDYCBCAEQQA2AgADQCAEKAIAIgAgBCgCEE9FBEAgACAEKAIMaiAAIAQoAghqLQAAIAAgBCgCBGotAABzOgAAIAQgBCgCAEEBajYCAAwBCwsLkSwBAX8jAEEgayICIAA2AhwgAiABNgIYIAIgAigCHDYCFCACQYASKAIAIAIoAhgiAC0AAEEYdCAALQABQRB0ciAALQACQQh0ciAALQADcnM2AhAgAkGEEigCACACKAIYLQAHIAIoAhgtAARBGHQgAigCGC0ABUEQdHIgAigCGC0ABkEIdHJyczYCDCACQYgSKAIAIAIoAhgtAAsgAigCGC0ACEEYdCACKAIYLQAJQRB0ciACKAIYLQAKQQh0cnJzNgIIIAJBjBIoAgAgAigCGC0ADyACKAIYLQAMQRh0IAIoAhgtAA1BEHRyIAIoAhgtAA5BCHRycnM2AgQgAkGQEigCACACKAIEIAIoAgwgAigCCHNzczYCACACIAIoAgAiAEEYdi0AgAhBGHQgAEEQdkH/AXEtAIAIQRB0cyAAQQh2Qf8BcS0AgAhBCHRzIABB/wFxLQCACHM2AgAgAiACKAIQIAIoAgAgAigCAEENdCACKAIAIgBBE3ZycyACKAIAQRd0IABBCXZyc3M2AgAgAigCFCACKAIANgIAIAJBlBIoAgAgAigCACACKAIIIAIoAgRzc3M2AhAgAiACKAIQQf8BcS0AgAggAigCEEEYdi0AgAhBGHQgAigCEEEQdkH/AXEtAIAIQRB0cyACKAIQQQh2Qf8BcS0AgAhBCHRzczYCECACIAIoAgwgAigCECACKAIQQQ10IAIoAhAiAEETdnJzIAIoAhBBF3QgAEEJdnJzczYCECACKAIUIAIoAhA2AgQgAkGYEigCACACKAIQIAIoAgQgAigCAHNzczYCDCACIAIoAgxB/wFxLQCACCACKAIMQRh2LQCACEEYdCACKAIMQRB2Qf8BcS0AgAhBEHRzIAIoAgxBCHZB/wFxLQCACEEIdHNzNgIMIAIgAigCCCACKAIMIAIoAgxBDXQgAigCDCIAQRN2cnMgAigCDEEXdCAAQQl2cnNzNgIMIAIoAhQgAigCDDYCCCACQZwSKAIAIAIoAgwgAigCACACKAIQc3NzNgIIIAIgAigCCEH/AXEtAIAIIAIoAghBGHYtAIAIQRh0IAIoAghBEHZB/wFxLQCACEEQdHMgAigCCEEIdkH/AXEtAIAIQQh0c3M2AgggAiACKAIEIAIoAgggAigCCEENdCACKAIIIgBBE3ZycyACKAIIQRd0IABBCXZyc3M2AgggAigCFCACKAIINgIMIAJBoBIoAgAgAigCCCACKAIQIAIoAgxzc3M2AgQgAiACKAIEQf8BcS0AgAggAigCBEEYdi0AgAhBGHQgAigCBEEQdkH/AXEtAIAIQRB0cyACKAIEQQh2Qf8BcS0AgAhBCHRzczYCBCACIAIoAgAgAigCBCACKAIEQQ10IAIoAgQiAEETdnJzIAIoAgRBF3QgAEEJdnJzczYCBCACKAIUIAIoAgQ2AhAgAkGkEigCACACKAIEIAIoAgwgAigCCHNzczYCACACIAIoAgBB/wFxLQCACCACKAIAQRh2LQCACEEYdCACKAIAQRB2Qf8BcS0AgAhBEHRzIAIoAgBBCHZB/wFxLQCACEEIdHNzNgIAIAIgAigCECACKAIAQRd0IAIoAgBBCXZyIAIoAgAgAigCAEENdCACKAIAQRN2cnNzczYCACACKAIUIAIoAgA2AhQgAkGoEigCACACKAIAIAIoAgggAigCBHNzczYCECACIAIoAhBB/wFxLQCACCACKAIQQRh2LQCACEEYdCACKAIQQRB2Qf8BcS0AgAhBEHRzIAIoAhBBCHZB/wFxLQCACEEIdHNzNgIQIAIgAigCDCACKAIQQRd0IAIoAhBBCXZyIAIoAhAgAigCEEENdCACKAIQQRN2cnNzczYCECACKAIUIAIoAhA2AhggAkGsEigCACACKAIQIAIoAgQgAigCAHNzczYCDCACIAIoAgxB/wFxLQCACCACKAIMQRh2LQCACEEYdCACKAIMQRB2Qf8BcS0AgAhBEHRzIAIoAgxBCHZB/wFxLQCACEEIdHNzNgIMIAIgAigCCCACKAIMQRd0IAIoAgxBCXZyIAIoAgwgAigCDEENdCACKAIMQRN2cnNzczYCDCACKAIUIAIoAgw2AhwgAkGwEigCACACKAIMIAIoAgAgAigCEHNzczYCCCACIAIoAghB/wFxLQCACCACKAIIQRh2LQCACEEYdCACKAIIQRB2Qf8BcS0AgAhBEHRzIAIoAghBCHZB/wFxLQCACEEIdHNzNgIIIAIgAigCBCACKAIIQRd0IAIoAghBCXZyIAIoAgggAigCCEENdCACKAIIQRN2cnNzczYCCCACKAIUIAIoAgg2AiAgAkG0EigCACACKAIIIAIoAhAgAigCDHNzczYCBCACIAIoAgRB/wFxLQCACCACKAIEQRh2LQCACEEYdCACKAIEQRB2Qf8BcS0AgAhBEHRzIAIoAgRBCHZB/wFxLQCACEEIdHNzNgIEIAIgAigCACACKAIEQRd0IAIoAgRBCXZyIAIoAgQgAigCBEENdCACKAIEQRN2cnNzczYCBCACKAIUIAIoAgQ2AiQgAkG4EigCACACKAIEIAIoAgwgAigCCHNzczYCACACIAIoAgBB/wFxLQCACCACKAIAQRh2LQCACEEYdCACKAIAQRB2Qf8BcS0AgAhBEHRzIAIoAgBBCHZB/wFxLQCACEEIdHNzNgIAIAIgAigCECACKAIAQRd0IAIoAgBBCXZyIAIoAgAgAigCAEENdCACKAIAQRN2cnNzczYCACACKAIUIAIoAgA2AiggAkG8EigCACACKAIAIAIoAgggAigCBHNzczYCECACIAIoAhBB/wFxLQCACCACKAIQQRh2LQCACEEYdCACKAIQQRB2Qf8BcS0AgAhBEHRzIAIoAhBBCHZB/wFxLQCACEEIdHNzNgIQIAIgAigCDCACKAIQQRd0IAIoAhBBCXZyIAIoAhAgAigCEEENdCACKAIQQRN2cnNzczYCECACKAIUIAIoAhA2AiwgAkHAEigCACACKAIQIAIoAgQgAigCAHNzczYCDCACIAIoAgxB/wFxLQCACCACKAIMQRh2LQCACEEYdCACKAIMQRB2Qf8BcS0AgAhBEHRzIAIoAgxBCHZB/wFxLQCACEEIdHNzNgIMIAIgAigCCCACKAIMQRd0IAIoAgxBCXZyIAIoAgwgAigCDEENdCACKAIMQRN2cnNzczYCDCACKAIUIAIoAgw2AjAgAkHEEigCACACKAIMIAIoAgAgAigCEHNzczYCCCACIAIoAghB/wFxLQCACCACKAIIQRh2LQCACEEYdCACKAIIQRB2Qf8BcS0AgAhBEHRzIAIoAghBCHZB/wFxLQCACEEIdHNzNgIIIAIgAigCBCACKAIIQRd0IAIoAghBCXZyIAIoAgggAigCCEENdCACKAIIQRN2cnNzczYCCCACKAIUIAIoAgg2AjQgAkHIEigCACACKAIIIAIoAhAgAigCDHNzczYCBCACIAIoAgRB/wFxLQCACCACKAIEQRh2LQCACEEYdCACKAIEQRB2Qf8BcS0AgAhBEHRzIAIoAgRBCHZB/wFxLQCACEEIdHNzNgIEIAIgAigCACACKAIEQRd0IAIoAgRBCXZyIAIoAgQgAigCBEENdCACKAIEQRN2cnNzczYCBCACKAIUIAIoAgQ2AjggAkHMEigCACACKAIEIAIoAgwgAigCCHNzczYCACACIAIoAgBB/wFxLQCACCACKAIAQRh2LQCACEEYdCACKAIAQRB2Qf8BcS0AgAhBEHRzIAIoAgBBCHZB/wFxLQCACEEIdHNzNgIAIAIgAigCECACKAIAQRd0IAIoAgBBCXZyIAIoAgAgAigCAEENdCACKAIAQRN2cnNzczYCACACKAIUIAIoAgA2AjwgAkHQEigCACACKAIAIAIoAgggAigCBHNzczYCECACIAIoAhBB/wFxLQCACCACKAIQQRh2LQCACEEYdCACKAIQQRB2Qf8BcS0AgAhBEHRzIAIoAhBBCHZB/wFxLQCACEEIdHNzNgIQIAIgAigCDCACKAIQQRd0IAIoAhBBCXZyIAIoAhAgAigCEEENdCACKAIQQRN2cnNzczYCECACKAIUIAIoAhA2AkAgAkHUEigCACACKAIQIAIoAgQgAigCAHNzczYCDCACIAIoAgxB/wFxLQCACCACKAIMQRh2LQCACEEYdCACKAIMQRB2Qf8BcS0AgAhBEHRzIAIoAgxBCHZB/wFxLQCACEEIdHNzNgIMIAIgAigCCCACKAIMQRd0IAIoAgxBCXZyIAIoAgwgAigCDEENdCACKAIMQRN2cnNzczYCDCACKAIUIAIoAgw2AkQgAkHYEigCACACKAIMIAIoAgAgAigCEHNzczYCCCACIAIoAghB/wFxLQCACCACKAIIQRh2LQCACEEYdCACKAIIQRB2Qf8BcS0AgAhBEHRzIAIoAghBCHZB/wFxLQCACEEIdHNzNgIIIAIgAigCBCACKAIIQRd0IAIoAghBCXZyIAIoAgggAigCCEENdCACKAIIQRN2cnNzczYCCCACKAIUIAIoAgg2AkggAkHcEigCACACKAIIIAIoAhAgAigCDHNzczYCBCACIAIoAgRB/wFxLQCACCACKAIEQRh2LQCACEEYdCACKAIEQRB2Qf8BcS0AgAhBEHRzIAIoAgRBCHZB/wFxLQCACEEIdHNzNgIEIAIgAigCACACKAIEQRd0IAIoAgRBCXZyIAIoAgQgAigCBEENdCACKAIEQRN2cnNzczYCBCACKAIUIAIoAgQ2AkwgAkHgEigCACACKAIEIAIoAgwgAigCCHNzczYCACACIAIoAgBB/wFxLQCACCACKAIAQRh2LQCACEEYdCACKAIAQRB2Qf8BcS0AgAhBEHRzIAIoAgBBCHZB/wFxLQCACEEIdHNzNgIAIAIgAigCECACKAIAQRd0IAIoAgBBCXZyIAIoAgAgAigCAEENdCACKAIAQRN2cnNzczYCACACKAIUIAIoAgA2AlAgAkHkEigCACACKAIAIAIoAgggAigCBHNzczYCECACIAIoAhBB/wFxLQCACCACKAIQQRh2LQCACEEYdCACKAIQQRB2Qf8BcS0AgAhBEHRzIAIoAhBBCHZB/wFxLQCACEEIdHNzNgIQIAIgAigCDCACKAIQQRd0IAIoAhBBCXZyIAIoAhAgAigCEEENdCACKAIQQRN2cnNzczYCECACKAIUIAIoAhA2AlQgAkHoEigCACACKAIQIAIoAgQgAigCAHNzczYCDCACIAIoAgxB/wFxLQCACCACKAIMQRh2LQCACEEYdCACKAIMQRB2Qf8BcS0AgAhBEHRzIAIoAgxBCHZB/wFxLQCACEEIdHNzNgIMIAIgAigCCCACKAIMQRd0IAIoAgxBCXZyIAIoAgwgAigCDEENdCACKAIMQRN2cnNzczYCDCACKAIUIAIoAgw2AlggAkHsEigCACACKAIMIAIoAgAgAigCEHNzczYCCCACIAIoAghB/wFxLQCACCACKAIIQRh2LQCACEEYdCACKAIIQRB2Qf8BcS0AgAhBEHRzIAIoAghBCHZB/wFxLQCACEEIdHNzNgIIIAIgAigCBCACKAIIQRd0IAIoAghBCXZyIAIoAgggAigCCEENdCACKAIIQRN2cnNzczYCCCACKAIUIAIoAgg2AlwgAkHwEigCACACKAIIIAIoAhAgAigCDHNzczYCBCACIAIoAgRB/wFxLQCACCACKAIEQRh2LQCACEEYdCACKAIEQRB2Qf8BcS0AgAhBEHRzIAIoAgRBCHZB/wFxLQCACEEIdHNzNgIEIAIgAigCACACKAIEQRd0IAIoAgRBCXZyIAIoAgQgAigCBEENdCACKAIEQRN2cnNzczYCBCACKAIUIAIoAgQ2AmAgAkH0EigCACACKAIEIAIoAgwgAigCCHNzczYCACACIAIoAgBB/wFxLQCACCACKAIAQRh2LQCACEEYdCACKAIAQRB2Qf8BcS0AgAhBEHRzIAIoAgBBCHZB/wFxLQCACEEIdHNzNgIAIAIgAigCECACKAIAQRd0IAIoAgBBCXZyIAIoAgAgAigCAEENdCACKAIAQRN2cnNzczYCACACKAIUIAIoAgA2AmQgAkH4EigCACACKAIAIAIoAgggAigCBHNzczYCECACIAIoAhBB/wFxLQCACCACKAIQQRh2LQCACEEYdCACKAIQQRB2Qf8BcS0AgAhBEHRzIAIoAhBBCHZB/wFxLQCACEEIdHNzNgIQIAIgAigCDCACKAIQQRd0IAIoAhBBCXZyIAIoAhAgAigCEEENdCACKAIQQRN2cnNzczYCECACKAIUIAIoAhA2AmggAkH8EigCACACKAIQIAIoAgQgAigCAHNzczYCDCACIAIoAgxB/wFxLQCACCACKAIMQRh2LQCACEEYdCACKAIMQRB2Qf8BcS0AgAhBEHRzIAIoAgxBCHZB/wFxLQCACEEIdHNzNgIMIAIgAigCCCACKAIMQRd0IAIoAgxBCXZyIAIoAgwgAigCDEENdCACKAIMQRN2cnNzczYCDCACKAIUIAIoAgw2AmwgAkGAEygCACACKAIMIAIoAgAgAigCEHNzczYCCCACIAIoAghB/wFxLQCACCACKAIIQRh2LQCACEEYdCACKAIIQRB2Qf8BcS0AgAhBEHRzIAIoAghBCHZB/wFxLQCACEEIdHNzNgIIIAIgAigCBCACKAIIQRd0IAIoAghBCXZyIAIoAgggAigCCEENdCACKAIIQRN2cnNzczYCCCACKAIUIAIoAgg2AnAgAkGEEygCACACKAIIIAIoAhAgAigCDHNzczYCBCACIAIoAgRB/wFxLQCACCACKAIEQRh2LQCACEEYdCACKAIEQRB2Qf8BcS0AgAhBEHRzIAIoAgRBCHZB/wFxLQCACEEIdHNzNgIEIAIgAigCACACKAIEQRd0IAIoAgRBCXZyIAIoAgQgAigCBEENdCACKAIEQRN2cnNzczYCBCACKAIUIAIoAgQ2AnQgAkGIEygCACACKAIEIAIoAgwgAigCCHNzczYCACACIAIoAgBB/wFxLQCACCACKAIAQRh2LQCACEEYdCACKAIAQRB2Qf8BcS0AgAhBEHRzIAIoAgBBCHZB/wFxLQCACEEIdHNzNgIAIAIgAigCECACKAIAQRd0IAIoAgBBCXZyIAIoAgAgAigCAEENdCACKAIAQRN2cnNzczYCACACKAIUIAIoAgA2AnggAkGMEygCACACKAIAIAIoAgggAigCBHNzczYCECACIAIoAhBB/wFxLQCACCACKAIQQRh2LQCACEEYdCACKAIQQRB2Qf8BcS0AgAhBEHRzIAIoAhBBCHZB/wFxLQCACEEIdHNzNgIQIAIgAigCDCACKAIQQRd0IAIoAhBBCXZyIAIoAhAgAigCEEENdCACKAIQQRN2cnNzczYCECACKAIUIAIoAhA2AnwgAkEANgIAIAJBADYCBCACQQA2AgggAkEANgIMIAJBADYCEAuHAgEBfyMAQUBqIgUkACAFIAA2AjwgBSABNgI4IAUgAjYCNCAFIAM2AjAgBSAENgIsA0AgBSgCMCIABEAgBUEQIAAgAEEQTxs2AgwgBSgCPCAFKAI4IAVBEGoiABAGIAUoAiwgBSgCNCAAIAUoAgwQCSMAQRBrIgAgBSgCODYCDCAAQQ82AggDQAJAIAAoAggiAUEASA0AIAEgACgCDGoiASABLQAAQQFqOgAAIAAoAgwgACgCCGotAAANACAAIAAoAghBAWs2AggMAQsLIAUgBSgCDCAFKAI0ajYCNCAFIAUoAgwgBSgCLGo2AiwgBSAFKAIwIAUoAgxrNgIwDAELCyAFQUBrJAALxicBDH8jAEEQayIKJAACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB9AFNBEBBmBMoAgAiBkEQIABBC2pBeHEgAEELSRsiBUEDdiIAdiIBQQNxBEACQCABQX9zQQFxIABqIgJBA3QiAUHAE2oiACABQcgTaigCACIBKAIIIgRGBEBBmBMgBkF+IAJ3cTYCAAwBCyAEIAA2AgwgACAENgIICyABQQhqIQAgASACQQN0IgJBA3I2AgQgASACaiIBIAEoAgRBAXI2AgQMDwsgBUGgEygCACIHTQ0BIAEEQAJAQQIgAHQiAkEAIAJrciABIAB0cWgiAUEDdCIAQcATaiICIABByBNqKAIAIgAoAggiBEYEQEGYEyAGQX4gAXdxIgY2AgAMAQsgBCACNgIMIAIgBDYCCAsgACAFQQNyNgIEIAAgBWoiCCABQQN0IgEgBWsiBEEBcjYCBCAAIAFqIAQ2AgAgBwRAIAdBeHFBwBNqIQFBrBMoAgAhAgJ/IAZBASAHQQN2dCIDcUUEQEGYEyADIAZyNgIAIAEMAQsgASgCCAshAyABIAI2AgggAyACNgIMIAIgATYCDCACIAM2AggLIABBCGohAEGsEyAINgIAQaATIAQ2AgAMDwtBnBMoAgAiC0UNASALaEECdEHIFWooAgAiAigCBEF4cSAFayEDIAIhAQNAAkAgASgCECIARQRAIAEoAhQiAEUNAQsgACgCBEF4cSAFayIBIAMgASADSSIBGyEDIAAgAiABGyECIAAhAQwBCwsgAigCGCEJIAIgAigCDCIERwRAQagTKAIAGiACKAIIIgAgBDYCDCAEIAA2AggMDgsgAkEUaiIBKAIAIgBFBEAgAigCECIARQ0DIAJBEGohAQsDQCABIQggACIEQRRqIgEoAgAiAA0AIARBEGohASAEKAIQIgANAAsgCEEANgIADA0LQX8hBSAAQb9/Sw0AIABBC2oiAEF4cSEFQZwTKAIAIghFDQBBACAFayEDAkACQAJAAn9BACAFQYACSQ0AGkEfIAVB////B0sNABogBUEmIABBCHZnIgBrdkEBcSAAQQF0a0E+agsiB0ECdEHIFWooAgAiAUUEQEEAIQAMAQtBACEAIAVBGSAHQQF2a0EAIAdBH0cbdCECA0ACQCABKAIEQXhxIAVrIgYgA08NACABIQQgBiIDDQBBACEDIAEhAAwDCyAAIAEoAhQiBiAGIAEgAkEddkEEcWooAhAiAUYbIAAgBhshACACQQF0IQIgAQ0ACwsgACAEckUEQEEAIQRBAiAHdCIAQQAgAGtyIAhxIgBFDQMgAGhBAnRByBVqKAIAIQALIABFDQELA0AgACgCBEF4cSAFayICIANJIQEgAiADIAEbIQMgACAEIAEbIQQgACgCECIBBH8gAQUgACgCFAsiAA0ACwsgBEUNACADQaATKAIAIAVrTw0AIAQoAhghByAEIAQoAgwiAkcEQEGoEygCABogBCgCCCIAIAI2AgwgAiAANgIIDAwLIARBFGoiASgCACIARQRAIAQoAhAiAEUNAyAEQRBqIQELA0AgASEGIAAiAkEUaiIBKAIAIgANACACQRBqIQEgAigCECIADQALIAZBADYCAAwLCyAFQaATKAIAIgRNBEBBrBMoAgAhAAJAIAQgBWsiAUEQTwRAIAAgBWoiAiABQQFyNgIEIAAgBGogATYCACAAIAVBA3I2AgQMAQsgACAEQQNyNgIEIAAgBGoiASABKAIEQQFyNgIEQQAhAkEAIQELQaATIAE2AgBBrBMgAjYCACAAQQhqIQAMDQsgBUGkEygCACICSQRAQaQTIAIgBWsiATYCAEGwE0GwEygCACIAIAVqIgI2AgAgAiABQQFyNgIEIAAgBUEDcjYCBCAAQQhqIQAMDQtBACEAIAVBL2oiAwJ/QfAWKAIABEBB+BYoAgAMAQtB/BZCfzcCAEH0FkKAoICAgIAENwIAQfAWIApBDGpBcHFB2KrVqgVzNgIAQYQXQQA2AgBB1BZBADYCAEGAIAsiAWoiBkEAIAFrIghxIgEgBU0NDEHQFigCACIEBEBByBYoAgAiByABaiIJIAdNDQ0gBCAJSQ0NCwJAQdQWLQAAQQRxRQRAAkACQAJAAkBBsBMoAgAiBARAQdgWIQADQCAEIAAoAgAiB08EQCAHIAAoAgRqIARLDQMLIAAoAggiAA0ACwtBABAEIgJBf0YNAyABIQZB9BYoAgAiAEEBayIEIAJxBEAgASACayACIARqQQAgAGtxaiEGCyAFIAZPDQNB0BYoAgAiAARAQcgWKAIAIgQgBmoiCCAETQ0EIAAgCEkNBAsgBhAEIgAgAkcNAQwFCyAGIAJrIAhxIgYQBCICIAAoAgAgACgCBGpGDQEgAiEACyAAQX9GDQEgBUEwaiAGTQRAIAAhAgwEC0H4FigCACICIAMgBmtqQQAgAmtxIgIQBEF/Rg0BIAIgBmohBiAAIQIMAwsgAkF/Rw0CC0HUFkHUFigCAEEEcjYCAAsgARAEIQJBABAEIQAgAkF/Rg0FIABBf0YNBSAAIAJNDQUgACACayIGIAVBKGpNDQULQcgWQcgWKAIAIAZqIgA2AgBBzBYoAgAgAEkEQEHMFiAANgIACwJAQbATKAIAIgMEQEHYFiEAA0AgAiAAKAIAIgEgACgCBCIEakYNAiAAKAIIIgANAAsMBAtBqBMoAgAiAEEAIAAgAk0bRQRAQagTIAI2AgALQQAhAEHcFiAGNgIAQdgWIAI2AgBBuBNBfzYCAEG8E0HwFigCADYCAEHkFkEANgIAA0AgAEEDdCIBQcgTaiABQcATaiIENgIAIAFBzBNqIAQ2AgAgAEEBaiIAQSBHDQALQaQTIAZBKGsiAEF4IAJrQQdxIgFrIgQ2AgBBsBMgASACaiIBNgIAIAEgBEEBcjYCBCAAIAJqQSg2AgRBtBNBgBcoAgA2AgAMBAsgAiADTQ0CIAEgA0sNAiAAKAIMQQhxDQIgACAEIAZqNgIEQbATIANBeCADa0EHcSIAaiIBNgIAQaQTQaQTKAIAIAZqIgIgAGsiADYCACABIABBAXI2AgQgAiADakEoNgIEQbQTQYAXKAIANgIADAMLQQAhBAwKC0EAIQIMCAtBqBMoAgAgAksEQEGoEyACNgIACyACIAZqIQFB2BYhAAJAAkACQANAIAEgACgCAEcEQCAAKAIIIgANAQwCCwsgAC0ADEEIcUUNAQtB2BYhAANAIAMgACgCACIBTwRAIAEgACgCBGoiBCADSw0DCyAAKAIIIQAMAAsACyAAIAI2AgAgACAAKAIEIAZqNgIEIAJBeCACa0EHcWoiByAFQQNyNgIEIAFBeCABa0EHcWoiBiAFIAdqIgVrIQAgAyAGRgRAQbATIAU2AgBBpBNBpBMoAgAgAGoiADYCACAFIABBAXI2AgQMCAtBrBMoAgAgBkYEQEGsEyAFNgIAQaATQaATKAIAIABqIgA2AgAgBSAAQQFyNgIEIAAgBWogADYCAAwICyAGKAIEIgNBA3FBAUcNBiADQXhxIQkgA0H/AU0EQCAGKAIMIgEgBigCCCICRgRAQZgTQZgTKAIAQX4gA0EDdndxNgIADAcLIAIgATYCDCABIAI2AggMBgsgBigCGCEIIAYgBigCDCICRwRAIAYoAggiASACNgIMIAIgATYCCAwFCyAGQRRqIgEoAgAiA0UEQCAGKAIQIgNFDQQgBkEQaiEBCwNAIAEhBCADIgJBFGoiASgCACIDDQAgAkEQaiEBIAIoAhAiAw0ACyAEQQA2AgAMBAtBpBMgBkEoayIAQXggAmtBB3EiAWsiCDYCAEGwEyABIAJqIgE2AgAgASAIQQFyNgIEIAAgAmpBKDYCBEG0E0GAFygCADYCACADIARBJyAEa0EHcWpBL2siACAAIANBEGpJGyIBQRs2AgQgAUHgFikCADcCECABQdgWKQIANwIIQeAWIAFBCGo2AgBB3BYgBjYCAEHYFiACNgIAQeQWQQA2AgAgAUEYaiEAA0AgAEEHNgIEIABBCGohDCAAQQRqIQAgDCAESQ0ACyABIANGDQAgASABKAIEQX5xNgIEIAMgASADayICQQFyNgIEIAEgAjYCACACQf8BTQRAIAJBeHFBwBNqIQACf0GYEygCACIBQQEgAkEDdnQiAnFFBEBBmBMgASACcjYCACAADAELIAAoAggLIQEgACADNgIIIAEgAzYCDCADIAA2AgwgAyABNgIIDAELQR8hACACQf///wdNBEAgAkEmIAJBCHZnIgBrdkEBcSAAQQF0a0E+aiEACyADIAA2AhwgA0IANwIQIABBAnRByBVqIQECQAJAQZwTKAIAIgRBASAAdCIGcUUEQEGcEyAEIAZyNgIAIAEgAzYCAAwBCyACQRkgAEEBdmtBACAAQR9HG3QhACABKAIAIQQDQCAEIgEoAgRBeHEgAkYNAiAAQR12IQQgAEEBdCEAIAEgBEEEcWoiBigCECIEDQALIAYgAzYCEAsgAyABNgIYIAMgAzYCDCADIAM2AggMAQsgASgCCCIAIAM2AgwgASADNgIIIANBADYCGCADIAE2AgwgAyAANgIIC0GkEygCACIAIAVNDQBBpBMgACAFayIBNgIAQbATQbATKAIAIgAgBWoiAjYCACACIAFBAXI2AgQgACAFQQNyNgIEIABBCGohAAwIC0GUE0EwNgIAQQAhAAwHC0EAIQILIAhFDQACQCAGKAIcIgFBAnRByBVqIgQoAgAgBkYEQCAEIAI2AgAgAg0BQZwTQZwTKAIAQX4gAXdxNgIADAILIAhBEEEUIAgoAhAgBkYbaiACNgIAIAJFDQELIAIgCDYCGCAGKAIQIgEEQCACIAE2AhAgASACNgIYCyAGKAIUIgFFDQAgAiABNgIUIAEgAjYCGAsgACAJaiEAIAYgCWoiBigCBCEDCyAGIANBfnE2AgQgBSAAQQFyNgIEIAAgBWogADYCACAAQf8BTQRAIABBeHFBwBNqIQECf0GYEygCACICQQEgAEEDdnQiAHFFBEBBmBMgACACcjYCACABDAELIAEoAggLIQAgASAFNgIIIAAgBTYCDCAFIAE2AgwgBSAANgIIDAELQR8hAyAAQf///wdNBEAgAEEmIABBCHZnIgFrdkEBcSABQQF0a0E+aiEDCyAFIAM2AhwgBUIANwIQIANBAnRByBVqIQECQAJAQZwTKAIAIgJBASADdCIEcUUEQEGcEyACIARyNgIAIAEgBTYCAAwBCyAAQRkgA0EBdmtBACADQR9HG3QhAyABKAIAIQIDQCACIgEoAgRBeHEgAEYNAiADQR12IQIgA0EBdCEDIAEgAkEEcWoiBCgCECICDQALIAQgBTYCEAsgBSABNgIYIAUgBTYCDCAFIAU2AggMAQsgASgCCCIAIAU2AgwgASAFNgIIIAVBADYCGCAFIAE2AgwgBSAANgIICyAHQQhqIQAMAgsCQCAHRQ0AAkAgBCgCHCIAQQJ0QcgVaiIBKAIAIARGBEAgASACNgIAIAINAUGcEyAIQX4gAHdxIgg2AgAMAgsgB0EQQRQgBygCECAERhtqIAI2AgAgAkUNAQsgAiAHNgIYIAQoAhAiAARAIAIgADYCECAAIAI2AhgLIAQoAhQiAEUNACACIAA2AhQgACACNgIYCwJAIANBD00EQCAEIAMgBWoiAEEDcjYCBCAAIARqIgAgACgCBEEBcjYCBAwBCyAEIAVBA3I2AgQgBCAFaiICIANBAXI2AgQgAiADaiADNgIAIANB/wFNBEAgA0F4cUHAE2ohAAJ/QZgTKAIAIgFBASADQQN2dCIDcUUEQEGYEyABIANyNgIAIAAMAQsgACgCCAshASAAIAI2AgggASACNgIMIAIgADYCDCACIAE2AggMAQtBHyEAIANB////B00EQCADQSYgA0EIdmciAGt2QQFxIABBAXRrQT5qIQALIAIgADYCHCACQgA3AhAgAEECdEHIFWohAQJAAkAgCEEBIAB0IgZxRQRAQZwTIAYgCHI2AgAgASACNgIADAELIANBGSAAQQF2a0EAIABBH0cbdCEAIAEoAgAhBQNAIAUiASgCBEF4cSADRg0CIABBHXYhBiAAQQF0IQAgASAGQQRxaiIGKAIQIgUNAAsgBiACNgIQCyACIAE2AhggAiACNgIMIAIgAjYCCAwBCyABKAIIIgAgAjYCDCABIAI2AgggAkEANgIYIAIgATYCDCACIAA2AggLIARBCGohAAwBCwJAIAlFDQACQCACKAIcIgBBAnRByBVqIgEoAgAgAkYEQCABIAQ2AgAgBA0BQZwTIAtBfiAAd3E2AgAMAgsgCUEQQRQgCSgCECACRhtqIAQ2AgAgBEUNAQsgBCAJNgIYIAIoAhAiAARAIAQgADYCECAAIAQ2AhgLIAIoAhQiAEUNACAEIAA2AhQgACAENgIYCwJAIANBD00EQCACIAMgBWoiAEEDcjYCBCAAIAJqIgAgACgCBEEBcjYCBAwBCyACIAVBA3I2AgQgAiAFaiIEIANBAXI2AgQgAyAEaiADNgIAIAcEQCAHQXhxQcATaiEAQawTKAIAIQECf0EBIAdBA3Z0IgUgBnFFBEBBmBMgBSAGcjYCACAADAELIAAoAggLIQYgACABNgIIIAYgATYCDCABIAA2AgwgASAGNgIIC0GsEyAENgIAQaATIAM2AgALIAJBCGohAAsgCkEQaiQAIAALNwEBfyAABEAgACgCBCIBBEAgARADIABBADYCBAsgACgCCCIBBEAgARADIABBADYCCAsLIAAQAwu7LwEGfyMAQZABayIFJAACQCABRQ0AIAJFDQAgAhAFIQYCQAJAAkACQAJAIAAoAgBBAWsOAgIAAQsgBUEQaiIDIAAoAgQQCiAFIAAoAggiACkAADcDACAFIAApAAg3AwggAyAFIAEgAiAGEAsMAgsgBhADQX8hAgwCCyAAKAIEIQQjAEEgayIIIgMgBUEQaiIHNgIcIAMgBDYCGCADIAMoAhw2AhQgA0GAEigCACADKAIYIgQtAABBGHQgBC0AAUEQdHIgBC0AAkEIdHIgBC0AA3JzNgIQIANBhBIoAgAgAygCGC0AByADKAIYLQAEQRh0IAMoAhgtAAVBEHRyIAMoAhgtAAZBCHRycnM2AgwgA0GIEigCACADKAIYLQALIAMoAhgtAAhBGHQgAygCGC0ACUEQdHIgAygCGC0ACkEIdHJyczYCCCADQYwSKAIAIAMoAhgtAA8gAygCGC0ADEEYdCADKAIYLQANQRB0ciADKAIYLQAOQQh0cnJzNgIEIANBkBIoAgAgAygCBCADKAIMIAMoAghzc3M2AgAgAyADKAIAIgRBGHYtAIAIQRh0IARBEHZB/wFxLQCACEEQdHMgBEEIdkH/AXEtAIAIQQh0cyAEQf8BcS0AgAhzNgIAIAMgAygCECADKAIAIAMoAgBBDXQgAygCACIEQRN2cnMgAygCAEEXdCAEQQl2cnNzNgIAIAMoAhQgAygCADYCfCADQZQSKAIAIAMoAgAgAygCCCADKAIEc3NzNgIQIAMgAygCEEH/AXEtAIAIIAMoAhBBGHYtAIAIQRh0IAMoAhBBEHZB/wFxLQCACEEQdHMgAygCEEEIdkH/AXEtAIAIQQh0c3M2AhAgAyADKAIMIAMoAhAgAygCEEENdCADKAIQIgRBE3ZycyADKAIQQRd0IARBCXZyc3M2AhAgAygCFCADKAIQNgJ4IANBmBIoAgAgAygCECADKAIEIAMoAgBzc3M2AgwgAyADKAIMQf8BcS0AgAggAygCDEEYdi0AgAhBGHQgAygCDEEQdkH/AXEtAIAIQRB0cyADKAIMQQh2Qf8BcS0AgAhBCHRzczYCDCADIAMoAgggAygCDCADKAIMQQ10IAMoAgwiBEETdnJzIAMoAgxBF3QgBEEJdnJzczYCDCADKAIUIAMoAgw2AnQgA0GcEigCACADKAIMIAMoAgAgAygCEHNzczYCCCADIAMoAghB/wFxLQCACCADKAIIQRh2LQCACEEYdCADKAIIQRB2Qf8BcS0AgAhBEHRzIAMoAghBCHZB/wFxLQCACEEIdHNzNgIIIAMgAygCBCADKAIIIAMoAghBDXQgAygCCCIEQRN2cnMgAygCCEEXdCAEQQl2cnNzNgIIIAMoAhQgAygCCDYCcCADQaASKAIAIAMoAgggAygCECADKAIMc3NzNgIEIAMgAygCBEH/AXEtAIAIIAMoAgRBGHYtAIAIQRh0IAMoAgRBEHZB/wFxLQCACEEQdHMgAygCBEEIdkH/AXEtAIAIQQh0c3M2AgQgAyADKAIAIAMoAgQgAygCBEENdCADKAIEIgRBE3ZycyADKAIEQRd0IARBCXZyc3M2AgQgAygCFCADKAIENgJsIANBpBIoAgAgAygCBCADKAIMIAMoAghzc3M2AgAgAyADKAIAQf8BcS0AgAggAygCAEEYdi0AgAhBGHQgAygCAEEQdkH/AXEtAIAIQRB0cyADKAIAQQh2Qf8BcS0AgAhBCHRzczYCACADIAMoAhAgAygCAEEXdCADKAIAQQl2ciADKAIAIAMoAgBBDXQgAygCAEETdnJzc3M2AgAgAygCFCADKAIANgJoIANBqBIoAgAgAygCACADKAIIIAMoAgRzc3M2AhAgAyADKAIQQf8BcS0AgAggAygCEEEYdi0AgAhBGHQgAygCEEEQdkH/AXEtAIAIQRB0cyADKAIQQQh2Qf8BcS0AgAhBCHRzczYCECADIAMoAgwgAygCEEEXdCADKAIQQQl2ciADKAIQIAMoAhBBDXQgAygCEEETdnJzc3M2AhAgAygCFCADKAIQNgJkIANBrBIoAgAgAygCECADKAIEIAMoAgBzc3M2AgwgAyADKAIMQf8BcS0AgAggAygCDEEYdi0AgAhBGHQgAygCDEEQdkH/AXEtAIAIQRB0cyADKAIMQQh2Qf8BcS0AgAhBCHRzczYCDCADIAMoAgggAygCDEEXdCADKAIMQQl2ciADKAIMIAMoAgxBDXQgAygCDEETdnJzc3M2AgwgAygCFCADKAIMNgJgIANBsBIoAgAgAygCDCADKAIAIAMoAhBzc3M2AgggAyADKAIIQf8BcS0AgAggAygCCEEYdi0AgAhBGHQgAygCCEEQdkH/AXEtAIAIQRB0cyADKAIIQQh2Qf8BcS0AgAhBCHRzczYCCCADIAMoAgQgAygCCEEXdCADKAIIQQl2ciADKAIIIAMoAghBDXQgAygCCEETdnJzc3M2AgggAygCFCADKAIINgJcIANBtBIoAgAgAygCCCADKAIQIAMoAgxzc3M2AgQgAyADKAIEQf8BcS0AgAggAygCBEEYdi0AgAhBGHQgAygCBEEQdkH/AXEtAIAIQRB0cyADKAIEQQh2Qf8BcS0AgAhBCHRzczYCBCADIAMoAgAgAygCBEEXdCADKAIEQQl2ciADKAIEIAMoAgRBDXQgAygCBEETdnJzc3M2AgQgAygCFCADKAIENgJYIANBuBIoAgAgAygCBCADKAIMIAMoAghzc3M2AgAgAyADKAIAQf8BcS0AgAggAygCAEEYdi0AgAhBGHQgAygCAEEQdkH/AXEtAIAIQRB0cyADKAIAQQh2Qf8BcS0AgAhBCHRzczYCACADIAMoAhAgAygCAEEXdCADKAIAQQl2ciADKAIAIAMoAgBBDXQgAygCAEETdnJzc3M2AgAgAygCFCADKAIANgJUIANBvBIoAgAgAygCACADKAIIIAMoAgRzc3M2AhAgAyADKAIQQf8BcS0AgAggAygCEEEYdi0AgAhBGHQgAygCEEEQdkH/AXEtAIAIQRB0cyADKAIQQQh2Qf8BcS0AgAhBCHRzczYCECADIAMoAgwgAygCEEEXdCADKAIQQQl2ciADKAIQIAMoAhBBDXQgAygCEEETdnJzc3M2AhAgAygCFCADKAIQNgJQIANBwBIoAgAgAygCECADKAIEIAMoAgBzc3M2AgwgAyADKAIMQf8BcS0AgAggAygCDEEYdi0AgAhBGHQgAygCDEEQdkH/AXEtAIAIQRB0cyADKAIMQQh2Qf8BcS0AgAhBCHRzczYCDCADIAMoAgggAygCDEEXdCADKAIMQQl2ciADKAIMIAMoAgxBDXQgAygCDEETdnJzc3M2AgwgAygCFCADKAIMNgJMIANBxBIoAgAgAygCDCADKAIAIAMoAhBzc3M2AgggAyADKAIIQf8BcS0AgAggAygCCEEYdi0AgAhBGHQgAygCCEEQdkH/AXEtAIAIQRB0cyADKAIIQQh2Qf8BcS0AgAhBCHRzczYCCCADIAMoAgQgAygCCEEXdCADKAIIQQl2ciADKAIIIAMoAghBDXQgAygCCEETdnJzc3M2AgggAygCFCADKAIINgJIIANByBIoAgAgAygCCCADKAIQIAMoAgxzc3M2AgQgAyADKAIEQf8BcS0AgAggAygCBEEYdi0AgAhBGHQgAygCBEEQdkH/AXEtAIAIQRB0cyADKAIEQQh2Qf8BcS0AgAhBCHRzczYCBCADIAMoAgAgAygCBEEXdCADKAIEQQl2ciADKAIEIAMoAgRBDXQgAygCBEETdnJzc3M2AgQgAygCFCADKAIENgJEIANBzBIoAgAgAygCBCADKAIMIAMoAghzc3M2AgAgAyADKAIAQf8BcS0AgAggAygCAEEYdi0AgAhBGHQgAygCAEEQdkH/AXEtAIAIQRB0cyADKAIAQQh2Qf8BcS0AgAhBCHRzczYCACADIAMoAhAgAygCAEEXdCADKAIAQQl2ciADKAIAIAMoAgBBDXQgAygCAEETdnJzc3M2AgAgAygCFEFAayADKAIANgIAIANB0BIoAgAgAygCACADKAIIIAMoAgRzc3M2AhAgAyADKAIQQf8BcS0AgAggAygCEEEYdi0AgAhBGHQgAygCEEEQdkH/AXEtAIAIQRB0cyADKAIQQQh2Qf8BcS0AgAhBCHRzczYCECADIAMoAgwgAygCEEEXdCADKAIQQQl2ciADKAIQIAMoAhBBDXQgAygCEEETdnJzc3M2AhAgAygCFCADKAIQNgI8IANB1BIoAgAgAygCECADKAIEIAMoAgBzc3M2AgwgAyADKAIMQf8BcS0AgAggAygCDEEYdi0AgAhBGHQgAygCDEEQdkH/AXEtAIAIQRB0cyADKAIMQQh2Qf8BcS0AgAhBCHRzczYCDCADIAMoAgggAygCDEEXdCADKAIMQQl2ciADKAIMIAMoAgxBDXQgAygCDEETdnJzc3M2AgwgAygCFCADKAIMNgI4IANB2BIoAgAgAygCDCADKAIAIAMoAhBzc3M2AgggAyADKAIIQf8BcS0AgAggAygCCEEYdi0AgAhBGHQgAygCCEEQdkH/AXEtAIAIQRB0cyADKAIIQQh2Qf8BcS0AgAhBCHRzczYCCCADIAMoAgQgAygCCEEXdCADKAIIQQl2ciADKAIIIAMoAghBDXQgAygCCEETdnJzc3M2AgggAygCFCADKAIINgI0IANB3BIoAgAgAygCCCADKAIQIAMoAgxzc3M2AgQgAyADKAIEQf8BcS0AgAggAygCBEEYdi0AgAhBGHQgAygCBEEQdkH/AXEtAIAIQRB0cyADKAIEQQh2Qf8BcS0AgAhBCHRzczYCBCADIAMoAgAgAygCBEEXdCADKAIEQQl2ciADKAIEIAMoAgRBDXQgAygCBEETdnJzc3M2AgQgAygCFCADKAIENgIwIANB4BIoAgAgAygCBCADKAIMIAMoAghzc3M2AgAgAyADKAIAQf8BcS0AgAggAygCAEEYdi0AgAhBGHQgAygCAEEQdkH/AXEtAIAIQRB0cyADKAIAQQh2Qf8BcS0AgAhBCHRzczYCACADIAMoAhAgAygCAEEXdCADKAIAQQl2ciADKAIAIAMoAgBBDXQgAygCAEETdnJzc3M2AgAgAygCFCADKAIANgIsIANB5BIoAgAgAygCACADKAIIIAMoAgRzc3M2AhAgAyADKAIQQf8BcS0AgAggAygCEEEYdi0AgAhBGHQgAygCEEEQdkH/AXEtAIAIQRB0cyADKAIQQQh2Qf8BcS0AgAhBCHRzczYCECADIAMoAgwgAygCEEEXdCADKAIQQQl2ciADKAIQIAMoAhBBDXQgAygCEEETdnJzc3M2AhAgAygCFCADKAIQNgIoIANB6BIoAgAgAygCECADKAIEIAMoAgBzc3M2AgwgAyADKAIMQf8BcS0AgAggAygCDEEYdi0AgAhBGHQgAygCDEEQdkH/AXEtAIAIQRB0cyADKAIMQQh2Qf8BcS0AgAhBCHRzczYCDCADIAMoAgggAygCDEEXdCADKAIMQQl2ciADKAIMIAMoAgxBDXQgAygCDEETdnJzc3M2AgwgAygCFCADKAIMNgIkIANB7BIoAgAgAygCDCADKAIAIAMoAhBzc3M2AgggAyADKAIIQf8BcS0AgAggAygCCEEYdi0AgAhBGHQgAygCCEEQdkH/AXEtAIAIQRB0cyADKAIIQQh2Qf8BcS0AgAhBCHRzczYCCCADIAMoAgQgAygCCEEXdCADKAIIQQl2ciADKAIIIAMoAghBDXQgAygCCEETdnJzc3M2AgggAygCFCADKAIINgIgIANB8BIoAgAgAygCCCADKAIQIAMoAgxzc3M2AgQgAyADKAIEQf8BcS0AgAggAygCBEEYdi0AgAhBGHQgAygCBEEQdkH/AXEtAIAIQRB0cyADKAIEQQh2Qf8BcS0AgAhBCHRzczYCBCADIAMoAgAgAygCBEEXdCADKAIEQQl2ciADKAIEIAMoAgRBDXQgAygCBEETdnJzc3M2AgQgAygCFCADKAIENgIcIANB9BIoAgAgAygCBCADKAIMIAMoAghzc3M2AgAgAyADKAIAQf8BcS0AgAggAygCAEEYdi0AgAhBGHQgAygCAEEQdkH/AXEtAIAIQRB0cyADKAIAQQh2Qf8BcS0AgAhBCHRzczYCACADIAMoAhAgAygCAEEXdCADKAIAQQl2ciADKAIAIAMoAgBBDXQgAygCAEETdnJzc3M2AgAgAygCFCADKAIANgIYIANB+BIoAgAgAygCACADKAIIIAMoAgRzc3M2AhAgAyADKAIQQf8BcS0AgAggAygCEEEYdi0AgAhBGHQgAygCEEEQdkH/AXEtAIAIQRB0cyADKAIQQQh2Qf8BcS0AgAhBCHRzczYCECADIAMoAgwgAygCEEEXdCADKAIQQQl2ciADKAIQIAMoAhBBDXQgAygCEEETdnJzc3M2AhAgAygCFCADKAIQNgIUIANB/BIoAgAgAygCECADKAIEIAMoAgBzc3M2AgwgAyADKAIMQf8BcS0AgAggAygCDEEYdi0AgAhBGHQgAygCDEEQdkH/AXEtAIAIQRB0cyADKAIMQQh2Qf8BcS0AgAhBCHRzczYCDCADIAMoAgggAygCDEEXdCADKAIMQQl2ciADKAIMIAMoAgxBDXQgAygCDEETdnJzc3M2AgwgAygCFCADKAIMNgIQIANBgBMoAgAgAygCDCADKAIAIAMoAhBzc3M2AgggAyADKAIIQf8BcS0AgAggAygCCEEYdi0AgAhBGHQgAygCCEEQdkH/AXEtAIAIQRB0cyADKAIIQQh2Qf8BcS0AgAhBCHRzczYCCCADIAMoAgQgAygCCEEXdCADKAIIQQl2ciADKAIIIAMoAghBDXQgAygCCEETdnJzc3M2AgggAygCFCADKAIINgIMIANBhBMoAgAgAygCCCADKAIQIAMoAgxzc3M2AgQgAyADKAIEQf8BcS0AgAggAygCBEEYdi0AgAhBGHQgAygCBEEQdkH/AXEtAIAIQRB0cyADKAIEQQh2Qf8BcS0AgAhBCHRzczYCBCADIAMoAgAgAygCBEEXdCADKAIEQQl2ciADKAIEIAMoAgRBDXQgAygCBEETdnJzc3M2AgQgAygCFCADKAIENgIIIANBiBMoAgAgAygCBCADKAIMIAMoAghzc3M2AgAgAyADKAIAQf8BcS0AgAggAygCAEEYdi0AgAhBGHQgAygCAEEQdkH/AXEtAIAIQRB0cyADKAIAQQh2Qf8BcS0AgAhBCHRzczYCACADIAMoAhAgAygCAEEXdCADKAIAQQl2ciADKAIAIAMoAgBBDXQgAygCAEETdnJzc3M2AgAgAygCFCADKAIANgIEIANBjBMoAgAgAygCACADKAIIIAMoAgRzc3M2AhAgAyADKAIQQf8BcS0AgAggAygCEEEYdi0AgAhBGHQgAygCEEEQdkH/AXEtAIAIQRB0cyADKAIQQQh2Qf8BcS0AgAhBCHRzczYCECADIAMoAgwgAygCEEEXdCADKAIQQQl2ciADKAIQIAMoAhBBDXQgAygCEEETdnJzc3M2AhAgAygCFCADKAIQNgIAIANBADYCACADQQA2AgQgA0EANgIIIANBADYCDCADQQA2AhAgACgCCCEDIAgiACQAIAAgBzYCHCAAIAM2AhggACABNgIUIAAgAkEEdjYCECAAIAY2AgwDQCAAIAAoAhAiA0EBazYCECADBEAgACgCHCAAKAIUIAAoAgwQBiAAKAIYIQQjAEEgayIDIAAoAgw2AhwgAyAENgIYIANBEDYCFCADIAMoAhw2AhAgAyADKAIYNgIMIANBADYCCANAIAMoAggiBCADKAIUSQRAIAQgAygCEGoiByAEIAMoAgxqLQAAIActAABzOgAAIAMgAygCCEEBajYCCAwBCwsgACAAKAIUNgIYIAAgACgCFEEQajYCFCAAIAAoAgxBEGo2AgwMAQsLIABBIGokAAsgASAGIAIQCCAGEAMLIAIhAwsgBUGQAWokACADC68CAQN/IwBBkAFrIgMkAAJAIAFFDQAgAkUNACADQRBqIAAoAgQQCiACEAUhBUF/IQQCQAJAAkACQCAAKAIAQQFrDgIAAQMLIAAoAgghBCMAQSBrIgAkACAAIANBEGo2AhwgACAENgIYIAAgATYCFCAAIAJBBHY2AhAgACAFNgIMA0AgACAAKAIQIgRBAWs2AhAgBARAIAAoAgwgACgCFCAAKAIYQRAQCSAAKAIcIAAoAgwgACgCDBAGIAAgACgCDDYCGCAAIAAoAhRBEGo2AhQgACAAKAIMQRBqNgIMDAELCyAAQSBqJAAMAQsgAyAAKAIIIgApAAA3AwAgAyAAKQAINwMIIANBEGogAyABIAIgBRALCyABIAUgAhAIIAIhBAsgBRADCyADQZABaiQAIAQLYwEBf0EMEAUiAyAANgIAIANBIBAFIgA2AgQgACABKQAYNwAYIAAgASkAEDcAECAAIAEpAAg3AAggACABKQAANwAAIANBEBAFIgA2AgggACACKQAINwAIIAAgAikAADcAACADCwuiCwIAQYAIC4AK1pDp/szhPbcWthTCKPssBStnmnYqvgTDqkQTJkmGBpmcQlD0ke+YejNUC0Ptz6xi5LMcqckI6JWA35T6dY8/pkcHp/zzcxe6g1k8GeaFT6hoa4GycWTai/jrD0twVp01HiQOXmNY0aIlInw7ASF4h9QARlef0ydSTDYC56DEyJ7qv4rSQMc4taP38s75YRWh4K5dpJs0GlWtkzIw9Yyx4x324i6CZspgwCkjqw1TTm/V2zdF3v2OLwP/anJtbFtRjRuvkrvdvH8R2VxBHxBa2ArBMYilzXu9LXTQErjltLCJaZdKDJZ3fmW58QnFbsaEGPB97DrcTSB57l8+18s5SFtb1Y5CQpLQp6fqTfv7/QYzM8/8h4fiZfT0Pcne3rVrWFgWTtratG5QUBRECwvByqCgKIjv7/gXsLAsnBQUBRGsrCuHnZ1m+2pqmPLZ2XeuqKgqgvr6vEYQEAQUDw/Az6qqqAIREUVUTEwTX5iYJr4lJUhtGhqEnhgYBh5mZpv9cnKe7AkJQ0pBQVEQ09P3JEZGk9W/v+xTYmKa+Onpe5LMzDP/UVFVBCwsCycNDUJPt7fuWT8/zPOysq4ciYlj6pOT53TOzrF/cHAcbKamqw0nJ8rtICAIKKOj60hWVpfBAgKCgH9/3KNSUpbE6+v5EtXVdKE+Po2z/Pw/w5qapD4dHUZbHBwHG56epTvz8/8Mz8/wP83Ncr9cXBdL6uq4Ug4OgY9lZVg98PA8zGRkGX2bm+V+FhaHkT09TnOioqoIoaFpyK2tascGBoOFysqwesXFcLWRkWX0a2vZsi4uiafj4/sYr6/oRzw8DzMtLUpnwcFxsFlZVw52dp/p1NQ14Xh4HmaQkCS0ODgONnl5XyaNjWLvYWFZOEdH0pWKiqAqlJQlsYiIIqrx8X2M7Ow71wQEAQWEhCGl4eF5mB4ehZtTU9eEAAAAABkZR15dXVYLfn6d409P0J+cnCe7SUlTGjExTXzY2DbuCAgCCp+f5HuCgqIgExPH1CMjy+h6epzmq6vpQv7+vUMqKoiiS0vRmgEBQUAfH8Tb4OA42NbWt2GOjqEv39/0K8vL8To7O8325+f6HYWFYOVUVBVBhoajJYOD42C6uqwWdXVcKZKSpjRubpn30NA05GhoGnJVVVQBtravGU5Okd/IyDL6wMAw8NfX9iEyMo68xsazdY+P4G90dB1p29v1LouL4Wq4uC6WCgqAipmZZ/4rK8nigYFh4AMDw8CkpCmNjIwjr66uqQc0NA05TU1SHzk5T3a9vW7TV1fWgW9v2Lfc3DfrFRVEUXt73ab39/4JOjqMtry8L5MMDAMP///8A6mpa8LJyXO6tbVs2bGxbdxtbVo3RUVQFTY2j7lsbBt3vr6tE0pKkNru7rlXd3feqfLyvkz9/X6DREQRVWdn2r1xcV0sBQVARXx8H2NAQBBQaWlbMmNj27goKAoiBwfCxcTEMfUiIoqolpanMTc3zvnt7XqX9va/SbS0LZnR0XWkQ0PTkEhIElri4rpYl5fmcdLStmTCwrJwJiaLraWlaM1eXpXLKSlLYjAwDDxaWpTO3d12q/n5f4aVlWTx5ua7XcfH8jUkJAktFxfG0bm5b9YbG8XeEhKGlGBgGHjDw/Mw9fV8ibOz71zo6DrSc3PfrDU1THmAgCCg5eV4nbu77VZ9fV4j+Pg+xl9f1IsvL8jn5OQ53SEhSWgAQYASC5MBxrqxo1AzqlaXkX1n3CJwshUOBwAxKiMcTUY/OGliW1SFfndwoZqTjL22r6jZ0svE9e7n4BEKA/wtJh8YSUI7NGVeV1CBenNsnZaPiLmyq6TVzsfA8erj3A0G//gpIhsURT43MGFaU0x9dm9omZKLhLWup6DRysO87ebf2AkC+/QlHhcQQTozLF1WT0h5cmtkkAsB")||(E=C,C=t.locateFile?t.locateFile(E,u):u+E);var k=function(e){for(;e.length>0;)e.shift()(t)};t.noExitRuntime;var T,j=function(e){var t=(e-p.buffer.byteLength+65535)/65536;try{return p.grow(t),m(),1}catch(e){}},M={a:function(){S("")},c:function(e,t,r){return y.copyWithin(e,t,t+r)},b:function(e){var t=y.length,r=2147483648;if((e>>>=0)>r)return!1;for(var n,o,i=1;i<=4;i*=2){var a=t*(1+.2/i);a=Math.min(a,e+100663296);var s=Math.min(r,(n=Math.max(e,a))+((o=65536)-n%o)%o);if(j(s))return!0}return!1}},B=function(){var e={a:M};function r(e,r){var n;return B=e.exports,p=B.d,m(),n=B.e,v.unshift(n),function(e){if(A--,t.monitorRunDependencies&&t.monitorRunDependencies(A),0==A&&w){var r=w;w=null,r()}}(),B}if(A++,t.monitorRunDependencies&&t.monitorRunDependencies(A),t.instantiateWasm)try{return t.instantiateWasm(e,r)}catch(e){return h("Module.instantiateWasm callback failed with error: ".concat(e)),!1}return x(C,e,function(e){r(e.instance)}),{}}();function N(){function e(){T||(T=!0,t.calledRun=!0,d||(k(v),t.onRuntimeInitialized&&t.onRuntimeInitialized(),function(){if(t.postRun)for("function"==typeof t.postRun&&(t.postRun=[t.postRun]);t.postRun.length;)e=t.postRun.shift(),b.unshift(e);var e;k(b)}()))}A>0||(function(){if(t.preRun)for("function"==typeof t.preRun&&(t.preRun=[t.preRun]);t.preRun.length;)e=t.preRun.shift(),g.unshift(e);var e;k(g)}(),A>0||(t.setStatus?(t.setStatus("Running..."),setTimeout(function(){setTimeout(function(){t.setStatus("")},1),e()},1)):e()))}if(t._UGCWasm_CipherSM4_New=function(e,r,n){return(t._UGCWasm_CipherSM4_New=B.f)(e,r,n)},t._UGCWasm_CipherSM4_Encrypt=function(e,r,n){return(t._UGCWasm_CipherSM4_Encrypt=B.g)(e,r,n)},t._UGCWasm_CipherSM4_Decrypt=function(e,r,n){return(t._UGCWasm_CipherSM4_Decrypt=B.h)(e,r,n)},t._UGCWasm_CipherSM4_Delete=function(e){return(t._UGCWasm_CipherSM4_Delete=B.i)(e)},t._malloc=function(e){return(t._malloc=B.k)(e)},t._free=function(e){return(t._free=B.l)(e)},w=function e(){T||N(),T||(w=e)},t.preInit)for("function"==typeof t.preInit&&(t.preInit=[t.preInit]);t.preInit.length>0;)t.preInit.pop()();return N(),t}();e.exports=r}(cne);var fne=Gre(cne.exports);function pne(e){"@babel/helpers - typeof";return(pne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hne(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function yne(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=pne(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=pne(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==pne(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dne(e){return function(e){if(Array.isArray(e))return mne(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return mne(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?mne(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mne(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function gne(e){"@babel/helpers - typeof";return(gne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vne(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,bne(n.key),n)}}function bne(e){var t=function(e,t){if("object"!=gne(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=gne(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==gne(t)?t:t+""}var Ane=function(){return e=function e(t,r,n){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!r||"function"!=typeof r&&"object"!==gne(r)||"function"!=typeof r.Client)throw Error("Please enter the global variable of @elastic/elasticsearch@5.6.22 or elasticsearch@16.7.3 for the second parameter!");n=n||{},this.url=t;try{this.client=new r.Client({host:this.url})}catch(e){this.client=new r.Client({node:{url:new URL(this.url)}})}this.change=null,this.openGeoFence=!1,this.outOfGeoFence=null,this.geoFence=null,this.EVENT_TYPES=["change","error","outOfGeoFence"],this.events=new ja(this,null,this.EVENT_TYPES),this.eventListeners=null,M.extend(this,n),this.eventListeners instanceof Object&&this.events.on(this.eventListeners)},(t=[{key:"setGeoFence",value:function(e){this.geoFence=e}},{key:"bulk",value:function(e,t){return this.client.bulk(e,this._handleCallback(t))}},{key:"clearScroll",value:function(e,t){return this.client.clearScroll(e,this._handleCallback(t))}},{key:"count",value:function(e,t){return this.client.count(e,this._handleCallback(t))}},{key:"create",value:function(e,t){return this.client.create(e,this._handleCallback(t))}},{key:"delete",value:function(e,t){return this.client.delete(e,this._handleCallback(t))}},{key:"deleteByQuery",value:function(e,t){return this.client.deleteByQuery(e,this._handleCallback(t))}},{key:"deleteScript",value:function(e,t){return this.client.deleteScript(e,this._handleCallback(t))}},{key:"deleteTemplate",value:function(e,t){return this.client.deleteTemplate(e,this._handleCallback(t))}},{key:"exists",value:function(e,t){return this.client.exists(e,this._handleCallback(t))}},{key:"existsSource",value:function(e,t){return this.client.existsSource(e,this._handleCallback(t))}},{key:"explain",value:function(e,t){return this.client.explain(e,this._handleCallback(t))}},{key:"fieldCaps",value:function(e,t){return this.client.fieldCaps(e,this._handleCallback(t))}},{key:"get",value:function(e,t){return this.client.get(e,this._handleCallback(t))}},{key:"getScript",value:function(e,t){return this.client.getScript(e,this._handleCallback(t))}},{key:"getSource",value:function(e,t){return this.client.getSource(e,this._handleCallback(t))}},{key:"getTemplate",value:function(e,t){return this.client.getTemplate(e,this._handleCallback(t))}},{key:"index",value:function(e,t){return this.client.index(e,this._handleCallback(t))}},{key:"info",value:function(e,t){return this.client.info(e,this._handleCallback(t))}},{key:"mget",value:function(e,t){return this.client.mget(e,this._handleCallback(t))}},{key:"msearch",value:function(e,t){var r=this;return r.client.msearch(e).then(function(e){return e=e.body||e,r._update(e.responses,t),e},function(e){return t(e),r.events.triggerEvent("error",{error:e}),e})}},{key:"msearchTemplate",value:function(e,t){return this.client.msearchTemplate(e,this._handleCallback(t))}},{key:"mtermvectors",value:function(e,t){return this.client.mtermvectors(e,this._handleCallback(t))}},{key:"ping",value:function(e,t){return this.client.ping(e,this._handleCallback(t))}},{key:"putScript",value:function(e,t){return this.client.putScript(e,this._handleCallback(t))}},{key:"putTemplate",value:function(e,t){return this.client.putTemplate(e,this._handleCallback(t))}},{key:"reindex",value:function(e,t){return this.client.reindex(e,this._handleCallback(t))}},{key:"reindexRessrottle",value:function(e,t){return this.client.reindexRessrottle(e,this._handleCallback(t))}},{key:"renderSearchTemplate",value:function(e,t){return this.client.renderSearchTemplate(e,this._handleCallback(t))}},{key:"scroll",value:function(e,t){return this.client.scroll(e,this._handleCallback(t))}},{key:"search",value:function(e,t){var r=this;return r.client.search(e).then(function(e){return e=e.body||e,r._update(e,t),e},function(e){return t&&t(e),r.events.triggerEvent("error",{error:e}),e})}},{key:"searchShards",value:function(e,t){return this.client.searchShards(e,this._handleCallback(t))}},{key:"searchTemplate",value:function(e,t){return this.client.searchTemplate(e,this._handleCallback(t))}},{key:"suggest",value:function(e,t){return this.client.suggest(e,this._handleCallback(t))}},{key:"termvectors",value:function(e,t){return this.client.termvectors(e,this._handleCallback(t))}},{key:"update",value:function(e,t){return this.client.update(e,this._handleCallback(t))}},{key:"updateByQuery",value:function(e,t){return this.client.updateByQuery(e,this._handleCallback(t))}},{key:"_handleCallback",value:function(e){return function(){var t=Array.from(arguments),r=t.shift(),n=t.shift(),o=n&&n.body;if(o){var i=n;t=[i.statusCode,i.headers],n=o}e.call.apply(e,[this,r,n].concat(dne(t)))}}},{key:"_update",value:function(e,t){var r=this;e&&(r.data=e,r.openGeoFence&&r.geoFence&&r._validateDatas(e),r.events.triggerEvent("change",{data:r.data}),r.change?r.change&&r.change(e):t&&t(void 0,{responses:e}))}},{key:"_validateDatas",value:function(e){if(e){e instanceof Array||(e=[e]);var t,r=e.length;for(t=0;t<r;t++)this._validateData(e[t])}}},{key:"_validateData",value:function(e){var t=this;e.hits.hits.map(function(r){var n=r._source,o=t._getMeterPerMapUnit(t.geoFence.unit),i=t.geoFence.center[0]*o,a=t.geoFence.center[1]*o,s=n.x*o,u=n.y*o;return t._distance(s,u,i,a)>t.geoFence.radius&&(t.outOfGeoFence&&t.outOfGeoFence(e),t.events.triggerEvent("outOfGeoFence",{data:e})),r})}},{key:"_distance",value:function(e,t,r,n){return Math.sqrt((e-r)*(e-r)+(t-n)*(t-n))}},{key:"_getMeterPerMapUnit",value:function(e){var t;return"meter"===e?t=1:"degree"===e&&(t=2*Math.PI*6378137/360),t}}])&&vne(e.prototype,t),r&&vne(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function wne(e){"@babel/helpers - typeof";return(wne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sne(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Cne(n.key),n)}}function Cne(e){var t=function(e,t){if("object"!=wne(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=wne(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==wne(t)?t:t+""}var Ene=new gi,_ne=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},r=[{key:"createCanvas",value:function(e,t){var r=document.createElement("canvas");return r.height=e,r.width=t,r.getContext("2d")}},{key:"getLinearGradient",value:function(e,t,r,n,o){this._ctx||(this._ctx=this.getContext());for(var i=this._ctx.createLinearGradient(e,t,r,n),a=o.length,s=1/(a-1),u=0,l=0;l<a;l++)i.addColorStop(u,o[l]),u+=s;return i.__nonRecursion=!0,i}},{key:"getContext",value:function(){return this._ctx||(this._ctx=document.createElement("canvas").getContext("2d")),this._ctx}},{key:"getStepColors",value:function(e,t,r){e=Ene.toRGBA(e),t=Ene.toRGBA(t),e=Ene.getData(e);for(var n=[],o=((t=Ene.getData(t))[0]-e[0])/r,i=(t[1]-e[1])/r,a=(t[2]-e[2])/r,s=(t[3]-e[3])/r,u=0,l=e[0],c=e[1],f=e[2],p=e[3];u<r;u++)n[u]=Ene.toColor([Ene.adjust(Math.floor(l),[0,255]),Ene.adjust(Math.floor(c),[0,255]),Ene.adjust(Math.floor(f),[0,255]),p.toFixed(4)-0],"hex"),l+=o,c+=i,f+=a,p+=s;return l=t[0],c=t[1],f=t[2],p=t[3],n[u]=Ene.toColor([l,c,f,p],"hex"),n}},{key:"getGradientColors",value:function(e,t,r){var n,o,i,a=[],s=e.length;if(void 0!==t){if(s>=t)if("RANGE"===r)for(o=0;o<t;o++)a.push(e[o]);else for(o=0;o<t;o++){var u=Math.floor(o/2);if(o%2==0)a.push(e[u]);else{var l=e.length-1-u;a.push(e[l])}}else{for(n=Math.ceil(t/(s-1)),o=0,i=s-1;o<i;o++){var c=this.getStepColors(e[o],e[o+1],n);o<i-1&&c.pop(),a=a.concat(c)}for(var f=a.length-t,p=0;p<f;p++)a.splice(2,1)}return a}}},{key:"getColorWithOpacity",value:function(e,t){return Ene.alpha(e,t)}}],(t=null)&&Sne(e.prototype,t),r&&Sne(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function Ine(e){"@babel/helpers - typeof";return(Ine="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function One(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,xne(n.key),n)}}function xne(e){var t=function(e,t){if("object"!=Ine(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Ine(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ine(t)?t:t+""}var Pne=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},r=[{key:"newInstance",value:function(){return this.geostatsInstance||(this.geostatsInstance=new window.geostats),this.geostatsInstance}},{key:"getInstance",value:function(e){var t=this.newInstance();return t.setSerie(e),t}},{key:"getArrayStatistic",value:function(e,t){return e.length?"Sum"===t||"æ±å"===t?this.getSum(e):"Maximum"===t||"æå¤§å¼"===t?this.getMax(e):"Minimum"===t||"æå°å¼"===t?this.getMin(e):"Average"===t||"å¹³åå¼"===t?this.getMean(e):"Median"===t||"ä¸­ä½æ°"===t?this.getMedian(e):"times"===t||"è®¡æ°"===t?this.getTimes(e):void 0:0}},{key:"getArraySegments",value:function(e,t,r){return"offset"===t?this.getEqInterval(e,r):"jenks"===t?this.getJenks(e,r):"square"===t?this.getMin(e)>=0&&this.getSqrtInterval(e,r):"logarithm"===t?this.getMin(e)>0&&this.getGeometricProgression(e,r):void 0}},{key:"getSum",value:function(e){return this.getInstance(e).sum()}},{key:"getMax",value:function(e){return this.getInstance(e).max()}},{key:"getMin",value:function(e){return this.getInstance(e).min()}},{key:"getMean",value:function(e){return this.getInstance(e).mean()}},{key:"getMedian",value:function(e){return this.getInstance(e).median()}},{key:"getTimes",value:function(e){return e.length}},{key:"getEqInterval",value:function(e,t){return this.getInstance(e).getClassEqInterval(t)}},{key:"getJenks",value:function(e,t){return this.getInstance(e).getClassJenks(t)}},{key:"getSqrtInterval",value:function(e,t){return e=e.map(function(e){return Math.sqrt(e)}),this.getInstance(e).getClassEqInterval(t).map(function(e){return e*e})}},{key:"getGeometricProgression",value:function(e,t){return this.getInstance(e).getClassGeometricProgression(t)}}],(t=null)&&One(e.prototype,t),r&&One(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function kne(e){if(!e)throw new Error("No GeoJSON coords provided");if(!e||0===e.length)return null;var t=e.length,r=new Float64Array(e.flat()),n=window.ugcModule._malloc(2*t*8);window.ugcModule.HEAPF64.set(r,n/8);var o=window.ugcModule._UGCWasm_Geometry_CreatePoint2DsFromBuffer(n,t);return window.ugcModule._free(n),o}function Tne(e){if(!e)throw new Error("No GeoJSON coords provided");if(!e||0===e.length)return null;var t=e.length,r=new Float64Array(e),n=window.ugcModule._malloc(8*t);window.ugcModule.HEAPF64.set(r,n/8);var o=window.ugcModule._UGCWasm_Helper_CreateDoubleArray(n,t);return window.ugcModule._free(n),o}function jne(e){var t=window.ugcModule._UGCWasm_Helper_GetDoubleArrayLength(e),r=window.ugcModule._malloc(8*t);window.ugcModule._UGCWasm_Helper_GetBufferFromDoubleArray(e,r);for(var n=new Float64Array(window.ugcModule.HEAPF64.buffer,r,t),o=[],i=0;i<t;i++)o.push(n[i]);return window.ugcModule._free(r),o}function Mne(e){if(!e)return null;switch(window.ugcModule._UGCWasm_Geometry_GetType(e)){case 1:var t=[],r=window.ugcModule._UGCWasm_GeoPoint_GetX(e),n=window.ugcModule._UGCWasm_GeoPoint_GetY(e);return t.push(r,n),{type:"Point",coordinates:t};case 3:for(var o=[],i=window.ugcModule._UGCWasm_GeoLine_GetPartCount(e),a=0;a<i;a++){var s=window.ugcModule._UGCWasm_GeoLine_GetPartPointCount(e,a),u=window.ugcModule._malloc(2*s*8);window.ugcModule._UGCWasm_GeoLine_GetPart2(e,u,a);for(var l=new Float64Array(window.ugcModule.HEAPF64.buffer,u,2*s),c=[],f=0;f<2*s;f+=2)c.push([l[f],l[f+1]]);window.ugcModule._free(u),o.push(c)}return{type:"LineString",coordinates:o[0]};case 5:for(var p=[],h=window.ugcModule._UGCWasm_GeoRegion_GetPartCount(e),y=0;y<h;y++){var d=window.ugcModule._UGCWasm_GeoRegion_GetPartPointCount(e,y),m=window.ugcModule._malloc(2*d*8);window.ugcModule._UGCWasm_GeoRegion_GetPart2(e,m,y);for(var g=new Float64Array(window.ugcModule.HEAPF64.buffer,m,2*d),v=[],b=0;b<2*d;b+=2)v.push([g[b],g[b+1]]);window.ugcModule._free(m),p.push(v)}return{type:"Polygon",coordinates:p};default:return null}}function Bne(e){if(!e)throw new Error("No GeoJSON object provided");switch(e.type){case"Feature":return Bne(e.geometry);case"FeatureCollection":return 0===e.features.length?null:Bne(e.features[0].geometry);case"Point":return 0===e.coordinates.length?window.ugcModule._UGCWasm_GeoPoint_New():window.ugcModule._UGCWasm_GeoPoint_New2(e.coordinates[0],e.coordinates[1]);case"LineString":if(0===e.coordinates.length)return window.ugcModule._UGCWasm_GeoLine_New();var t=window.ugcModule._UGCWasm_GeoLine_New(),r=kne(e.coordinates);return window.ugcModule._UGCWasm_GeoLine_AddPart2(t,r,e.coordinates.length),t;case"Polygon":if(0===e.coordinates.length)return window.ugcModule._UGCWasm_GeoRegion_New();var n=window.ugcModule._UGCWasm_GeoRegion_New(),o=kne(e.coordinates[0]);if(window.ugcModule._UGCWasm_GeoRegion_AddPart2(n,o,e.coordinates[0].length),e.coordinates.length>1)for(var i=1;i<e.coordinates.length;i++){var a=kne(e.coordinates[i]);window.ugcModule._UGCWasm_GeoRegion_AddPart2(n,a,e.coordinates[i].length)}return n;case"MultiLineString":if(0===e.coordinates.length)return window.ugcModule._UGCWasm_GeoLine_New();var s=window.ugcModule._UGCWasm_GeoLine_New(),u=kne(e.coordinates[0]);if(window.ugcModule._UGCWasm_GeoLine_AddPart2(s,u,e.coordinates[0].length),e.coordinates.length>1)for(var l=1;l<e.coordinates.length;l++){var c=kne(e.coordinates[l]);window.ugcModule._UGCWasm_GeoLine_AddPart2(s,c,e.coordinates[l].length)}return s;default:throw new Error("Unsupported GeoJSON type: "+e.type+". Are you sure this is valid GeoJSON?")}}function Nne(e){var t=[],r=[];return fo(e)&&"FeatureCollection"===e.type?e.features.forEach(function(e){var n=e.geometry.coordinates;t.push(n[0]),r.push(n[1])}):Array.isArray(e)&&e.forEach(function(e){if("Feature"===e.type){var n=e.geometry.coordinates;t.push(n[0]),r.push(n[1])}else Array.isArray(e)?(t.push(e[0]),r.push(e[1])):fo(e)&&(t.push(e.x),r.push(e.y))}),{xList:t,yList:r}}var Rne=function(){try{return Module}catch(e){return{}}}();function Lne(e){"@babel/helpers - typeof";return(Lne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dne(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Fne(n.key),n)}}function Fne(e){var t=function(e,t){if("object"!=Lne(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Lne(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Lne(t)?t:t+""}function Qne(e,t,r){return t=Gne(t),function(e,t){if(t&&("object"==Lne(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],Gne(e).constructor):t.apply(e,r))}function Gne(e){return(Gne=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Une(e,t){return(Une=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var zne=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=Qne(this,t),e&&(window.ugcModule=e),window.ugcModule||(window.ugcModule=Rne),r.module=window.ugcModule,r.addEventType("loaded"),r.module.calledRun?r.triggerEvent("loaded",{}):r.module.onRuntimeInitialized=function(){r.triggerEvent("loaded",{})},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Une(e,t)}(t,ja),r=t,(n=[{key:"buffer",value:function(e,t){var r=Bne(e),n=this.module._UGCWasm_Geometrist_Buffer(r,t);return{type:"Feature",geometry:Mne(n)}}},{key:"computeConvexHull",value:function(e){var t=e.length,r=kne(e);return{type:"Feature",geometry:Mne(this.module._UGCWasm_Geometrist_ComputeConvexHull(r,t))}}},{key:"isIdentical",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-6,n=Bne(e),o=Bne(t);return 1===this.module._UGCWasm_Geometrist_IsIdentical(n,o,r)}},{key:"hasIntersection",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-6,n=Bne(e),o=Bne(t);return 1===this.module._UGCWasm_Geometrist_HasIntersection(n,o,r)}},{key:"hasTouch",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-6,n=Bne(e),o=Bne(t);return 1===this.module._UGCWasm_Geometrist_HasTouch(n,o,r)}},{key:"resample",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e-6,r=Bne(e);return{type:"Feature",geometry:Mne(this.module._UGCWasm_Geometrist_Resample(r,t))}}},{key:"isParallel",value:function(e,t,r,n,o,i,a,s){return 1===this.module._UGCWasm_Geometrist_IsParallel(e,t,r,n,o,i,a,s)}},{key:"computePerpendicularPosition",value:function(e,t,r,n,o,i){var a=this.module._UGCWasm_Helper_CreateDoubleArray(0,2);return this.module._UGCWasm_Geometrist_ComputePerpendicularPosition(e,t,r,n,o,i,a),a=jne(a)}},{key:"isPointOnLine",value:function(e,t,r,n,o,i){var a=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return 1===this.module._UGCWasm_Geometrist_IsPointOnLine(e,t,r,n,o,i,a)}},{key:"isProjectOnLineSegment",value:function(e,t,r,n,o,i){return 1===this.module._UGCWasm_Geometrist_IsProjectOnLineSegment(e,t,r,n,o,i)}},{key:"distanceToLineSegment",value:function(e,t,r,n,o,i){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:hn.DEGREE,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:hn.DEGREE,u=this.module._UGCWasm_Geometrist_DistanceToLineSegment(e,t,r,n,o,i);return s!==hn.DEGREE?u*pf(a)/pf(s):u}},{key:"nearestPointToVertex",value:function(e,t,r){if("LineString"!==Hne(r))throw new Error("only feature type is LineString supported");var n=this.module._UGCWasm_Helper_CreateDoubleArray(0,2),o=Bne(r);return this.module._UGCWasm_Geometrist_NearestPointToVertex(e,t,o,n),n=jne(n)}},{key:"computeConcaveHullPoints",value:function(e,t,r){if(!Array.isArray(t)){var n=Nne(e);r=t,e=n.xList,t=n.yList}var o=Tne(e),i=Tne(t);return{type:"Feature",geometry:Mne(this.module._UGCWasm_Geometrist_ComputeConcaveHullPoints(o,i,e.length,r))}}},{key:"isSegmentIntersect",value:function(e,t,r,n,o,i,a,s){return 1===this.module._UGCWasm_Geometrist_IsSegmentIntersect(e,t,r,n,o,i,a,s)}},{key:"isIntersectRegionWithRect",value:function(e,t,r,n,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1e-6,a=Bne(e);return 0!==this.module._UGCWasm_Geometrist_isIntersectRegionWithRect(a,t,r,n,o,i)}},{key:"isOnSameSide",value:function(e,t,r,n,o,i,a,s){return 1===this.module._UGCWasm_Geometrist_IsOnSameSide(e,t,r,n,o,i,a,s)}},{key:"isRight",value:function(e,t,r,n,o,i){return 1===this.module._UGCWasm_Geometrist_IsRight(e,t,r,n,o,i)}},{key:"isLeft",value:function(e,t,r,n,o,i){return 1===this.module._UGCWasm_Geometrist_IsLeft(e,t,r,n,o,i)}},{key:"computeGeodesicArea",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Dn.SQUAREMETER;if(!function(e){if(e&&e.geometry&&e.geometry.type){var t=e.geometry.type;if("Point"===t)return po(e.geometry.coordinates);if("LineString"===t)return po(e.geometry.coordinates[0]);if("Polygon"===t||"MultiLineString"===t)return po(e.geometry.coordinates[0][0])}}(e))throw new Error("coordinates is invalid latlng");if("Polygon"!==Hne(e))throw new Error("only feature type is Polygon supported");var r=Bne(e),n=this.module._UGCWasm_Geometry_NewUGPrjCoordSys(4326),o=this.module._UGCWasm_Geometrist_ComputeGeodesicArea(r,n);return t!==Dn.SQUAREMETER?o*hf[t]:o}},{key:"smooth",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if("LineString"!==Hne(e))throw new Error("only feature type is LineString supported");var r=Bne(e);return{type:"Feature",geometry:Mne(this.module._UGCWasm_Geometrist_Smooth(r,t))}}},{key:"computeGeodesicDistance",value:function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:hn.METER;if(!Array.isArray(t)){var i=Nne(e),a=i.xList,s=i.yList;o=n||hn.METER,n=r,r=t,e=a,t=s}if(!po([e[0],t[0]]))throw new Error("coordinates is invalid latlng");var u=Tne(e),l=Tne(t),c=this.module._UGCWasm_Geometrist_ComputeGeodesicDistance(u,l,r,n);return o!==hn.METER?c/pf(o):c}},{key:"computeParallel",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:hn.DEGREE,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:hn.DEGREE;if("LineString"!==Hne(e))throw new Error("only feature type is LineString supported");n!==hn.DEGREE&&(t=t*pf(n)/pf(r));var o=Bne(e);return{type:"Feature",geometry:Mne(this.module._UGCWasm_Geometrist_ComputeParallel(o,t))}}},{key:"computeConvexHullPoints",value:function(e,t){if(!Array.isArray(t)){var r=Nne(e);e=r.xList,t=r.yList}var n=Tne(e),o=Tne(t);return{type:"Feature",geometry:Mne(this.module._UGCWasm_Geometrist_ComputeConvexHullPoints(n,o,e.length))}}}])&&Dne(r.prototype,n),o&&Dne(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Hne(e){return"Feature"===e.type&&null!==e.geometry?e.geometry.type:e.type}var qne=r(8518),Vne=r.n(qne);function Kne(e){"@babel/helpers - typeof";return(Kne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jne(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Xne(n.key),n)}}function Wne(e,t,r){return t&&Jne(e.prototype,t),r&&Jne(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Xne(e){var t=function(e,t){if("object"!=Kne(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Kne(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Kne(t)?t:t+""}var Zne=function(){function e(t){Yne(this,e),this.env=null,this.parser=null,this.ruleSet=null,this.cartoStr="",this.shaders=null,"string"==typeof t&&(this.cartoStr=t,this.env={frames:[],errors:[],error:function(e){this.errors.push(e)}},this.parser=this.getParser(this.env),this.parse(t),this.shaders=this.toShaders())}return Wne(e,[{key:"getParser",value:function(t){var r,n,o,i,a,s,u,l,c,f=this;function p(){i=u[o],a=n,l=n}function h(){u[o]=i,l=n=a}function y(){n>l&&(u[o]=u[o].slice(n-l),l=n)}function d(e){var t,i,a,s;if(e instanceof Function)return e.call(c.parsers);if("string"==typeof e)t=r.charAt(n)===e?e:null,i=1,y();else{if(y(),!(t=e.exec(u[o])))return null;i=t[0].length}if(t){var f=n+=i;for(s=n+u[o].length-i;n<s&&(32===(a=r.charCodeAt(n))||10===a||9===a);)n++;return u[o]=u[o].slice(i+(n-f)),l=n,0===u[o].length&&o<u.length-1&&o++,"string"==typeof t?t:1===t.length?t[0]:t}}function m(e){var n,o={index:s,filename:t.filename,message:"Parse error.",line:0,column:-1};for(var i in o)0===e[i]&&(e[i]=o[i]);n=e.filename&&f.env.inputs&&f.env.inputs[e.filename]?f.env.inputs[e.filename]:r,e.line=(n.slice(0,e.index).match(/\n/g)||"").length+1;for(var a=e.index;a>=0&&"\n"!==n.charAt(a);a--)e.column++;return new Error([e.filename,e.line,e.column,e.message].join(";"))}return this.env=t=t||{},this.env.filename=this.env.filename||null,this.env.inputs=this.env.inputs||{},c={parse:function(i){var a,c=null;if(n=o=l=s=0,u=[],r=i.replace(/\r\n/g,"\n"),t.filename&&(f.env.inputs[t.filename]=r),u=function(e){for(var t,n,o,i,a=0,s=/(?:@\{[\w-]+\}|[^"'`\{\}\/\(\)\\])+/g,u=/\/\*(?:[^*]|\*+[^\/*])*\*+\/|\/\/.*/g,l=/"((?:[^"\\\r\n]|\\.)*)"|'((?:[^'\\\r\n]|\\.)*)'|`((?:[^`]|\\.)*)`/g,f=0,p=e[0],h=0;h<r.length;)if(s.lastIndex=h,(t=s.exec(r))&&t.index===h&&(h+=t[0].length,p.push(t[0])),o=r.charAt(h),u.lastIndex=l.lastIndex=h,(t=l.exec(r))&&t.index===h)h+=t[0].length,p.push(t[0]);else if(n||"/"!==o||"/"!==(i=r.charAt(h+1))&&"*"!==i||!(t=u.exec(r))||t.index!==h){switch(o){case"{":if(!n){f++,p.push(o);break}case"}":if(!n){f--,p.push(o),e[++a]=p=[];break}case"(":if(!n){n=!0,p.push(o);break}case")":if(n){n=!1,p.push(o);break}default:p.push(o)}h++}else h+=t[0].length,p.push(t[0]);return 0!==f&&(c={index:h-1,type:"Parse",message:f>0?"missing closing `}`":"missing opening `{`"}),e.map(function(e){return e.join("")})}([[]]),c)throw m(c);var p=function(e,t){var r=e.specificity,n=t.specificity;return r[0]!=n[0]?n[0]-r[0]:r[1]!=n[1]?n[1]-r[1]:r[2]!=n[2]?n[2]-r[2]:n[3]-r[3]};return(a=new e.Tree.Ruleset([],d(this.parsers.primary))).root=!0,a.toList=function(e){e.error=function(t){e.errors||(e.errors=new Error("")),e.errors.message?e.errors.message+="\n"+m(t).message:e.errors.message=m(t).message},e.frames=e.frames||[];var t=this.flatten([],[],e);return t.sort(p),t},a},parsers:{primary:function(){for(var e,t=[];(e=d(this.rule)||d(this.ruleset)||d(this.comment))||d(/^[\s\n]+/)||(e=d(this.invalid));)e&&t.push(e);return t},invalid:function(){var t=d(/^[^;\n]*[;\n]/);if(t)return new e.Tree.Invalid(t,a)},comment:function(){var t;if("/"===r.charAt(n))return"/"===r.charAt(n+1)?new e.Tree.Comment(d(/^\/\/.*/),!0):(t=d(/^\/\*(?:[^*]|\*+[^\/*])*\*+\/\n?/))?new e.Tree.Comment(t):void 0},entities:{quoted:function(){if('"'===r.charAt(n)||"'"===r.charAt(n)){var t=d(/^"((?:[^"\\\r\n]|\\.)*)"|'((?:[^'\\\r\n]|\\.)*)'/);return t?new e.Tree.Quoted(t[1]||t[2]):void 0}},field:function(){if(d("[")){var t=d(/(^[^\]]+)/);if(d("]"))return t?new e.Tree.Field(t[1]):void 0}},comparison:function(){var e=d(/^=~|=|!=|<=|>=|<|>/);if(e)return e},keyword:function(){var t=d(/^[A-Za-z\u4e00-\u9fa5-]+[A-Za-z-0-9\u4e00-\u9fa5_]*/);if(t)return new e.Tree.Keyword(t)},call:function(){var t,r;if(t=/^([\w\-]+|%)\(/.exec(u[o])){if("url"===(t=t[1]))return null;n+=t.length;if(d("("),r=d(this.entities.arguments),d(")"))return t?new e.Tree.Call(t,r,n):void 0}},arguments:function(){for(var e,t=[];e=d(this.expression);){t.push(e);if(!d(","))break}return t},literal:function(){return d(this.entities.dimension)||d(this.entities.keywordcolor)||d(this.entities.hexcolor)||d(this.entities.quoted)},url:function(){var t;if("u"===r.charAt(n)&&d(/^url\(/)){t=d(this.entities.quoted)||d(this.entities.variable)||d(/^[\-\w%@_match\/.&=:;#+?~]+/)||"";return d(")")?new e.Tree.URL(void 0!==t.value||t instanceof e.Tree.Variable?t:new e.Tree.Quoted(t)):new e.Tree.Invalid(t,a,"Missing closing ) in URL.")}},variable:function(){var o,i=n;if("@"===r.charAt(n)&&(o=d(/^@[\w-]+/)))return new e.Tree.Variable(o,i,t.filename)},hexcolor:function(){var t;if("#"===r.charAt(n)&&(t=d(/^#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})/)))return new e.Tree.Color(t[1])},keywordcolor:function(){var t=u[o].match(/^[a-z]+/);if(t&&t[0]in e.Tree.Reference.data.colors)return new e.Tree.Color(e.Tree.Reference.data.colors[d(/^[a-z]+/)])},dimension:function(){var t=r.charCodeAt(n);if(!(t>57||t<45||47===t)){var o=d(/^(-?\d*\.?\d+(?:[eE][-+]?\d+)?)(\%|\w+)?/);return o?new e.Tree.Dimension(o[1],o[2],a):void 0}}},variable:function(){var e;if("@"===r.charAt(n)&&(e=d(/^(@[\w-]+)\s*:/)))return e[1]},entity:function(){var e=d(this.entities.call)||d(this.entities.literal),t=d(this.entities.field)||d(this.entities.variable),r=d(this.entities.url)||d(this.entities.keyword);return e||t||r},end:function(){var e;return d(";")||("string"==typeof(e="}")?r.charAt(n)===e:!!e.test(u[o]))},element:function(){var t=d(/^(?:[.#][\w\u4e00-\u9fa5\-]+|\*|Map)/);if(t)return new e.Tree.Element(t)},attachment:function(){var e=d(/^::([\w\-]+(?:\/[\w\-]+)*)/);if(e)return e[1]},selector:function(){for(var t,o,i,s,u,l=[],c=new e.Tree.Filterset,f=[],p=0,h=0;(i=d(this.element))||(u=d(this.zoom))||(s=d(this.filter))||(t=d(this.attachment));){if(p++,i)l.push(i);else if(u)f.push(u),h++;else if(s){var y=c.add(s);if(y)throw m({message:y,index:n-1});h++}else{if(o)throw m({message:"Encountered second attachment name.",index:n-1});o=t}var g=r.charAt(n);if("{"===g||"}"===g||";"===g||","===g)break}if(p)return new e.Tree.Selector(c,f,l,o,h,a)},filter:function(){p();var r,n,o;if(d("[")&&(r=d(/^[a-zA-Z0-9\-_]+/)||d(this.entities.quoted)||d(this.entities.variable)||d(this.entities.keyword)||d(this.entities.field))&&(r instanceof e.Tree.Quoted&&(r=new e.Tree.Field(r.toString())),(n=d(this.entities.comparison))&&(o=d(this.entities.quoted)||d(this.entities.variable)||d(this.entities.dimension)||d(this.entities.keyword)||d(this.entities.field)))){if(!d("]"))throw m({message:"Missing closing ] of filter.",index:a-1});return r.is||(r=new e.Tree.Field(r)),new e.Tree.Filter(r,n,o,a,t.filename)}},zoom:function(){p();var t,r;if(d(/^\[\s*zoom/g)&&(t=d(this.entities.comparison))&&(r=d(this.entities.variable)||d(this.entities.dimension))&&d("]"))return new e.Tree.Zoom(t,r,a);h()},block:function(){var e;if(d("{")&&(e=d(this.primary))&&d("}"))return e},ruleset:function(){var t,r,n=[];for(p();t=d(this.selector);){for(n.push(t);d(this.comment););if(!d(","))break;for(;d(this.comment););}if(t)for(;d(this.comment););if(n.length>0&&(r=d(this.block))){if(1===n.length&&n[0].elements.length&&"Map"===n[0].elements[0].value){var o=new e.Tree.Ruleset(n,r);return o.isMap=!0,o}return new e.Tree.Ruleset(n,r)}h()},rule:function(){var o,i,u=r.charAt(n);if(p(),"."!==u&&"#"!==u&&(o=d(this.variable)||d(this.property))){if((i=d(this.value))&&d(this.end))return new e.Tree.Rule(o,i,a,t.filename);s=n,h()}},font:function(){for(var t,r=[],n=[];t=d(this.entity);)n.push(t);if(r.push(new e.Tree.Expression(n)),d(","))for(;(t=d(this.expression))&&(r.push(t),d(",")););return new e.Tree.Value(r)},value:function(){for(var t,r=[];(t=d(this.expression))&&(r.push(t),d(",")););return r.length>1?new e.Tree.Value(r.map(function(e){return e.value[0]})):1===r.length?new e.Tree.Value(r):void 0},sub:function(){var e;if(d("(")&&(e=d(this.expression))&&d(")"))return e},multiplication:function(){var t,r,n,o;if(t=d(this.operand)){for(;(n=d("/")||d("*")||d("%"))&&(r=d(this.operand));)o=new e.Tree.Operation(n,[o||t,r],a);return o||t}},addition:function(){var t,o,i,s;if(t=d(this.multiplication)){for(;(i=d(/^[-+]\s+/)||" "!=r.charAt(n-1)&&(d("+")||d("-")))&&(o=d(this.multiplication));)s=new e.Tree.Operation(i,[s||t,o],a);return s||t}},operand:function(){return d(this.sub)||d(this.entity)},expression:function(){for(var t,r=[];t=d(this.addition)||d(this.entity);)r.push(t);if(r.length>0)return new e.Tree.Expression(r)},property:function(){var e=d(/^(([a-z][-a-z_0-9]*\/)?\*?-?[-a-z_0-9]+)\s*:/);if(e)return e[1]}}}}},{key:"parse",value:function(e){var t=this.parser;return this.ruleSet=t.parse(e)}},{key:"toShaders",value:function(){if(this.ruleSet){var e=this.ruleSet;if(e){var t=e.toList(this.env);t.reverse();var r={},n=[];this._toShaders(r,n,t);for(var o=[],i={},a=0,s=t.length;a<s;++a){var u=t[a],l=u.attachment,c=r[n[a]],f=[];if(!i[l]){var p=0;for(var h in c)if("zoom"!==h&&"frames"!==h&&"attachment"!==h&&"elements"!=h)if("layer-index"===h){var y=(c[h].join("\n"),null);Object.defineProperty(f,"layerIndex",{configurable:!0,enumerable:!1,value:y})}else f[p++]=function(e,t){if(!Array.isArray(e))return e;var r=e.join("\n"),n='attributes["FEATUREID"]&&attributes["FEATUREID"]',o=r.indexOf(n);if(o>=0){if(!t.featureFilter){var i=o+n.length,a=r.indexOf(")",i+1),s="featureId&&(featureId"+r.substring(i,a)+")";Object.defineProperty(t,"featureFilter",{configurable:!0,enumerable:!1,value:function(e){return!!s}})}return{property:h,getValue:Function("attributes","zoom","seftFilter","var _value = null; var isExcute=typeof seftFilter=='function'?sefgFilter():seftFilter;if(isExcute){"+r+";} return _value; ")}}return{property:h,getValue:Function("attributes","zoom","var _value = null;"+r+"; return _value; ")}}(c[h],f);Object.defineProperty(f,"attachment",{configurable:!0,enumerable:!1,value:l}),Object.defineProperty(f,"elements",{configurable:!0,enumerable:!1,value:u.elements}),o.push(f),i[n[a]]=!0}Object.defineProperty(f,"zoom",{configurable:!0,enumerable:!1,value:u.zoom})}return o}}return null}},{key:"_toShaders",value:function(t,r,n){for(var o=0,i=n.length;o<i;++o){for(var a=n[o],s=[],u=0,l=a.elements.length;u<l;u++)s.push(a.elements[u]);var c=a.filters.filters,f=[];for(var p in c)f.push(c[p].id);var h=s.join("/")+"::"+a.attachment+"_"+f.join("_");r.push(h);var y=t[h]=t[h]||{};y.zoom=e.Tree.Zoom.all;var d=a.toJS(this.env);for(var m in d)(y[m]=y[m]||[]).push(d[m].join("\n"))}}},{key:"getShaders",value:function(){return this.shaders}},{key:"destroy",value:function(){this.cartoStr=null,this.env=null,this.ruleSet=null,this.parser=null,this.shaders=null}}])}(),$ne={version:"2.1.1",style:{"filter-mode":{type:["all","first"],doc:"Control the processing behavior of Rule filters within a Style. If 'all' is used then all Rules are processed sequentially independent of whether any previous filters matched. If 'first' is used then it means processing ends after the first match (a positive filter evaluation) and no further Rules in the Style are processed ('first' is usually the default for CSS implementations on top of Mapnik to simplify translation from CSS to Mapnik XML)","default-value":"all","default-meaning":"All Rules in a Style are processed whether they have filters or not and whether or not the filter conditions evaluate to true."},"image-filters":{css:"image-filters","default-value":"none","default-meaning":"no filters",type:"functions",functions:[["agg-stack-blur",2],["emboss",0],["blur",0],["gray",0],["sobel",0],["edge-detect",0],["x-gradient",0],["y-gradient",0],["invert",0],["sharpen",0]],doc:"A list of image filters."},"comp-op":{css:"comp-op","default-value":"src-over","default-meaning":"add the current layer on top of other layers",doc:"Composite operation. This defines how this layer should behave relative to layers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]},opacity:{css:"opacity",type:"float",doc:"An alpha value for the style (which means an alpha applied to all features in separate buffer and then composited back to main buffer)","default-value":1,"default-meaning":"no separate buffer will be used and no alpha will be applied to the style after rendering"}},layer:{name:{"default-value":"",type:"string",required:!0,"default-meaning":"No layer name has been provided",doc:"The name of a layer. Can be anything you wish and is not strictly validated, but ideally unique  in the map"},srs:{"default-value":"",type:"string","default-meaning":"No srs value is provided and the value will be inherited from the Map's srs",doc:"The spatial reference system definition for the layer, aka the projection. Can either be a proj4 literal string like '+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs' or, if the proper proj4 epsg/nad/etc identifier files are installed, a string that uses an id like: '+init=epsg:4326'"},status:{"default-value":!0,type:"boolean","default-meaning":"This layer will be marked as active and available for processing",doc:"A property that can be set to false to disable this layer from being processed"},minzoom:{"default-value":"0",type:"float","default-meaning":"The layer will be visible at the minimum possible scale",doc:"The minimum scale denominator that this layer will be visible at. A layer's visibility is determined by whether its status is true and if the Map scale >= minzoom - 1e-6 and scale < maxzoom + 1e-6"},maxzoom:{"default-value":"1.79769e+308",type:"float","default-meaning":"The layer will be visible at the maximum possible scale",doc:"The maximum scale denominator that this layer will be visible at. The default is the numeric limit of the C++ double type, which may vary slightly by system, but is likely a massive number like 1.79769e+308 and ensures that this layer will always be visible unless the value is reduced. A layer's visibility is determined by whether its status is true and if the Map scale >= minzoom - 1e-6 and scale < maxzoom + 1e-6"},queryable:{"default-value":!1,type:"boolean","default-meaning":"The layer will not be available for the direct querying of data values",doc:"This property was added for GetFeatureInfo/WMS compatibility and is rarely used. It is off by default meaning that in a WMS context the layer will not be able to be queried unless the property is explicitly set to true"},"clear-label-cache":{"default-value":!1,type:"boolean","default-meaning":"The renderer's collision detector cache (used for avoiding duplicate labels and overlapping markers) will not be cleared immediately before processing this layer",doc:"This property, by default off, can be enabled to allow a user to clear the collision detector cache before a given layer is processed. This may be desirable to ensure that a given layers data shows up on the map even if it normally would not because of collisions with previously rendered labels or markers"},"group-by":{"default-value":"",type:"string","default-meaning":"No special layer grouping will be used during rendering",doc:"https://github.com/mapnik/mapnik/wiki/Grouped-rendering"},"buffer-size":{"default-value":"0",type:"float","default-meaning":"No buffer will be used",doc:"Extra tolerance around the Layer extent (in pixels) used to when querying and (potentially) clipping the layer data during rendering"},"maximum-extent":{"default-value":"none",type:"bbox","default-meaning":"No clipping extent will be used",doc:"An extent to be used to limit the bounds used to query this specific layer data during rendering. Should be minx, miny, maxx, maxy in the coordinates of the Layer."}},symbolizers:{"*":{"image-filters":{css:"image-filters","default-value":"none","default-meaning":"no filters",type:"functions",functions:[["agg-stack-blur",2],["emboss",0],["blur",0],["gray",0],["sobel",0],["edge-detect",0],["x-gradient",0],["y-gradient",0],["invert",0],["sharpen",0]],doc:"A list of image filters."},"comp-op":{css:"comp-op","default-value":"src-over","default-meaning":"add the current layer on top of other layers",doc:"Composite operation. This defines how this layer should behave relative to layers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]},opacity:{css:"opacity",type:"float",doc:"An alpha value for the style (which means an alpha applied to all features in separate buffer and then composited back to main buffer)","default-value":1,"default-meaning":"no separate buffer will be used and no alpha will be applied to the style after rendering"}},map:{"background-color":{css:"background-color","default-value":"none","default-meaning":"transparent",type:"color",doc:"Map Background color"},"background-image":{css:"background-image",type:"uri","default-value":"","default-meaning":"transparent",doc:"An image that is repeated below all features on a map as a background.",description:"Map Background image"},srs:{css:"srs",type:"string","default-value":"+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs","default-meaning":"The proj4 literal of EPSG:4326 is assumed to be the Map's spatial reference and all data from layers within this map will be plotted using this coordinate system. If any layers do not declare an srs value then they will be assumed to be in the same srs as the Map and not transformations will be needed to plot them in the Map's coordinate space",doc:"Map spatial reference (proj4 string)"},"buffer-size":{css:"buffer-size","default-value":"0",type:"float","default-meaning":"No buffer will be used",doc:'Extra tolerance around the map (in pixels) used to ensure labels crossing tile boundaries are equally rendered in each tile (e.g. cut in each tile). Not intended to be used in combination with "avoid-edges".'},"maximum-extent":{css:"","default-value":"none",type:"bbox","default-meaning":"No clipping extent will be used",doc:"An extent to be used to limit the bounds used to query all layers during rendering. Should be minx, miny, maxx, maxy in the coordinates of the Map."},base:{css:"base","default-value":"","default-meaning":"This base path defaults to an empty string meaning that any relative paths to files referenced in styles or layers will be interpreted relative to the application process.",type:"string",doc:"Any relative paths used to reference files will be understood as relative to this directory path if the map is loaded from an in memory object rather than from the filesystem. If the map is loaded from the filesystem and this option is not provided it will be set to the directory of the stylesheet."},"paths-from-xml":{css:"","default-value":!0,"default-meaning":"Paths read from XML will be interpreted from the location of the XML",type:"boolean",doc:"value to control whether paths in the XML will be interpreted from the location of the XML or from the working directory of the program that calls load_map()"},"minimum-version":{css:"","default-value":"none","default-meaning":"Mapnik version will not be detected and no error will be thrown about compatibility",type:"string",doc:"The minumum Mapnik version (e.g. 0.7.2) needed to use certain functionality in the stylesheet"},"font-directory":{css:"font-directory",type:"uri","default-value":"none","default-meaning":"No map-specific fonts will be registered",doc:"Path to a directory which holds fonts which should be registered when the Map is loaded (in addition to any fonts that may be automatically registered)."}},polygon:{fill:{css:"polygon-fill",type:"color","default-value":"rgba(128,128,128,1)","default-meaning":"gray and fully opaque (alpha = 1), same as rgb(128,128,128)",doc:"Fill color to assign to a polygon"},"fill-opacity":{css:"polygon-opacity",type:"float",doc:"The opacity of the polygon","default-value":1,"default-meaning":"opaque"},gamma:{css:"polygon-gamma",type:"float","default-value":1,"default-meaning":"fully antialiased",range:"0-1",doc:"Level of antialiasing of polygon edges"},"gamma-method":{css:"polygon-gamma-method",type:["power","linear","none","threshold","multiply"],"default-value":"power","default-meaning":"pow(x,gamma) is used to calculate pixel gamma, which produces slightly smoother line and polygon antialiasing than the 'linear' method, while other methods are usually only used to disable AA",doc:"An Antigrain Geometry specific rendering hint to control the quality of antialiasing. Under the hood in Mapnik this method is used in combination with the 'gamma' value (which defaults to 1). The methods are in the AGG source at https://github.com/mapnik/mapnik/blob/master/deps/agg/include/agg_gamma_functions.h"},clip:{css:"polygon-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"polygon-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"polygon-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"polygon-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},line:{stroke:{css:"line-color","default-value":"rgba(0,0,0,1)",type:"color","default-meaning":"black and fully opaque (alpha = 1), same as rgb(0,0,0)",doc:"The color of a drawn line"},"stroke-width":{css:"line-width","default-value":1,type:"float",doc:"The width of a line in pixels"},"stroke-opacity":{css:"line-opacity","default-value":1,type:"float","default-meaning":"opaque",doc:"The opacity of a line"},"stroke-linejoin":{css:"line-join","default-value":"miter",type:["miter","round","bevel"],doc:"The behavior of lines when joining"},"stroke-linecap":{css:"line-cap","default-value":"butt",type:["butt","round","square"],doc:"The display of line endings"},"stroke-gamma":{css:"line-gamma",type:"float","default-value":1,"default-meaning":"fully antialiased",range:"0-1",doc:"Level of antialiasing of stroke line"},"stroke-gamma-method":{css:"line-gamma-method",type:["power","linear","none","threshold","multiply"],"default-value":"power","default-meaning":"pow(x,gamma) is used to calculate pixel gamma, which produces slightly smoother line and polygon antialiasing than the 'linear' method, while other methods are usually only used to disable AA",doc:"An Antigrain Geometry specific rendering hint to control the quality of antialiasing. Under the hood in Mapnik this method is used in combination with the 'gamma' value (which defaults to 1). The methods are in the AGG source at https://github.com/mapnik/mapnik/blob/master/deps/agg/include/agg_gamma_functions.h"},"stroke-dasharray":{css:"line-dasharray",type:"numbers",doc:"A pair of length values [a,b], where (a) is the dash length and (b) is the gap length respectively. More than two values are supported for more complex patterns.","default-value":"none","default-meaning":"solid line"},"stroke-dashoffset":{css:"line-dash-offset",type:"numbers",doc:"valid parameter but not currently used in renderers (only exists for experimental svg support in Mapnik which is not yet enabled)","default-value":"none","default-meaning":"solid line"},"stroke-miterlimit":{css:"line-miterlimit",type:"float",doc:"The limit on the ratio of the miter length to the stroke-width. Used to automatically convert miter joins to bevel joins for sharp angles to avoid the miter extending beyond the thickness of the stroking path. Normally will not need to be set, but a larger value can sometimes help avoid jaggy artifacts.","default-value":4,"default-meaning":"Will auto-convert miters to bevel line joins when theta is less than 29 degrees as per the SVG spec: 'miterLength / stroke-width = 1 / sin ( theta / 2 )'"},clip:{css:"line-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"line-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},offset:{css:"line-offset",type:"float","default-value":0,"default-meaning":"no offset",doc:"Offsets a line a number of pixels parallel to its actual path. Postive values move the line left, negative values move it right (relative to the directionality of the line)."},rasterizer:{css:"line-rasterizer",type:["full","fast"],"default-value":"full",doc:"Exposes an alternate AGG rendering method that sacrifices some accuracy for speed."},"geometry-transform":{css:"line-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"line-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},markers:{file:{css:"marker-file",doc:"An SVG file that this marker shows at each placement. If no file is given, the marker will show an ellipse.","default-value":"","default-meaning":"An ellipse or circle, if width equals height",type:"uri"},opacity:{css:"marker-opacity",doc:"The overall opacity of the marker, if set, overrides both the opacity of both the fill and stroke","default-value":1,"default-meaning":"The stroke-opacity and fill-opacity will be used",type:"float"},"fill-opacity":{css:"marker-fill-opacity",doc:"The fill opacity of the marker","default-value":1,"default-meaning":"opaque",type:"float"},stroke:{css:"marker-line-color",doc:"The color of the stroke around a marker shape.","default-value":"black",type:"color"},"stroke-width":{css:"marker-line-width",doc:"The width of the stroke around a marker shape, in pixels. This is positioned on the boundary, so high values can cover the area itself.",type:"float"},"stroke-opacity":{css:"marker-line-opacity","default-value":1,"default-meaning":"opaque",doc:"The opacity of a line",type:"float"},placement:{css:"marker-placement",type:["point","line","interior"],"default-value":"point","default-meaning":"Place markers at the center point (centroid) of the geometry",doc:"Attempt to place markers on a point, in the center of a polygon, or if markers-placement:line, then multiple times along a line. 'interior' placement can be used to ensure that points placed on polygons are forced to be inside the polygon interior"},"multi-policy":{css:"marker-multi-policy",type:["each","whole","largest"],"default-value":"each","default-meaning":"If a feature contains multiple geometries and the placement type is either point or interior then a marker will be rendered for each",doc:"A special setting to allow the user to control rendering behavior for 'multi-geometries' (when a feature contains multiple geometries). This setting does not apply to markers placed along lines. The 'each' policy is default and means all geometries will get a marker. The 'whole' policy means that the aggregate centroid between all geometries will be used. The 'largest' policy means that only the largest (by bounding box areas) feature will get a rendered marker (this is how text labeling behaves by default)."},"marker-type":{css:"marker-type",type:["arrow","ellipse"],"default-value":"ellipse",doc:"The default marker-type. If a SVG file is not given as the marker-file parameter, the renderer provides either an arrow or an ellipse (a circle if height is equal to width)"},width:{css:"marker-width","default-value":10,doc:"The width of the marker, if using one of the default types.",type:"expression"},height:{css:"marker-height","default-value":10,doc:"The height of the marker, if using one of the default types.",type:"expression"},fill:{css:"marker-fill","default-value":"blue",doc:"The color of the area of the marker.",type:"color"},"allow-overlap":{css:"marker-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping markers are shown or hidden.","default-meaning":"Do not allow makers to overlap with each other - overlapping markers will not be shown."},"ignore-placement":{css:"marker-ignore-placement",type:"boolean","default-value":!1,"default-meaning":"do not store the bbox of this geometry in the collision detector cache",doc:"value to control whether the placement of the feature will prevent the placement of other features"},spacing:{css:"marker-spacing",doc:"Space between repeated labels","default-value":100,type:"float"},"max-error":{css:"marker-max-error",type:"float","default-value":.2,doc:"The maximum difference between actual marker placement and the marker-spacing parameter. Setting a high value can allow the renderer to try to resolve placement conflicts with other symbolizers."},transform:{css:"marker-transform",type:"functions",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]],"default-value":"","default-meaning":"No transformation",doc:"SVG transformation definition"},clip:{css:"marker-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"marker-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"marker-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"marker-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},shield:{name:{css:"shield-name",type:"expression",serialization:"content",doc:'Value to use for a shield"s text label. Data columns are specified using brackets like [column_name]'},file:{css:"shield-file",required:!0,type:"uri","default-value":"none",doc:"Image file to render behind the shield text"},"face-name":{css:"shield-face-name",type:"string",validate:"font",doc:"Font name and style to use for the shield text","default-value":"",required:!0},"unlock-image":{css:"shield-unlock-image",type:"boolean",doc:"This parameter should be set to true if you are trying to position text beside rather than on top of the shield image","default-value":!1,"default-meaning":"text alignment relative to the shield image uses the center of the image as the anchor for text positioning."},size:{css:"shield-size",type:"float",doc:"The size of the shield text in pixels"},fill:{css:"shield-fill",type:"color",doc:"The color of the shield text"},placement:{css:"shield-placement",type:["point","line","vertex","interior"],"default-value":"point",doc:"How this shield should be placed. Point placement attempts to place it on top of points, line places along lines multiple times per feature, vertex places on the vertexes of polygons, and interior attempts to place inside of polygons."},"avoid-edges":{css:"shield-avoid-edges",doc:"Tell positioning algorithm to avoid labeling near intersection edges.",type:"boolean","default-value":!1},"allow-overlap":{css:"shield-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping shields are shown or hidden.","default-meaning":"Do not allow shields to overlap with other map elements already placed."},"minimum-distance":{css:"shield-min-distance",type:"float","default-value":0,doc:"Minimum distance to the next shield symbol, not necessarily the same shield."},spacing:{css:"shield-spacing",type:"float","default-value":0,doc:"The spacing between repeated occurrences of the same shield on a line"},"minimum-padding":{css:"shield-min-padding","default-value":0,doc:"Determines the minimum amount of padding that a shield gets relative to other shields",type:"float"},"wrap-width":{css:"shield-wrap-width",type:"unsigned","default-value":0,doc:"Length of a chunk of text in characters before wrapping text"},"wrap-before":{css:"shield-wrap-before",type:"boolean","default-value":!1,doc:"Wrap text before wrap-width is reached. If false, wrapped lines will be a bit longer than wrap-width."},"wrap-character":{css:"shield-wrap-character",type:"string","default-value":" ",doc:"Use this character instead of a space to wrap long names."},"halo-fill":{css:"shield-halo-fill",type:"color","default-value":"#FFFFFF","default-meaning":"white",doc:"Specifies the color of the halo around the text."},"halo-radius":{css:"shield-halo-radius",doc:"Specify the radius of the halo in pixels","default-value":0,"default-meaning":"no halo",type:"float"},"character-spacing":{css:"shield-character-spacing",type:"unsigned","default-value":0,doc:"Horizontal spacing between characters (in pixels). Currently works for point placement only, not line placement."},"line-spacing":{css:"shield-line-spacing",doc:"Vertical spacing between lines of multiline labels (in pixels)",type:"unsigned"},dx:{css:"shield-text-dx",type:"float",doc:"Displace text within shield by fixed amount, in pixels, +/- along the X axis.  A positive value will shift the text right","default-value":0},dy:{css:"shield-text-dy",type:"float",doc:"Displace text within shield by fixed amount, in pixels, +/- along the Y axis.  A positive value will shift the text down","default-value":0},"shield-dx":{css:"shield-dx",type:"float",doc:"Displace shield by fixed amount, in pixels, +/- along the X axis.  A positive value will shift the text right","default-value":0},"shield-dy":{css:"shield-dy",type:"float",doc:"Displace shield by fixed amount, in pixels, +/- along the Y axis.  A positive value will shift the text down","default-value":0},opacity:{css:"shield-opacity",type:"float",doc:"(Default 1.0) - opacity of the image used for the shield","default-value":1},"text-opacity":{css:"shield-text-opacity",type:"float",doc:"(Default 1.0) - opacity of the text placed on top of the shield","default-value":1},"horizontal-alignment":{css:"shield-horizontal-alignment",type:["left","middle","right","auto"],doc:"The shield's horizontal alignment from its centerpoint","default-value":"auto"},"vertical-alignment":{css:"shield-vertical-alignment",type:["top","middle","bottom","auto"],doc:"The shield's vertical alignment from its centerpoint","default-value":"middle"},"text-transform":{css:"shield-text-transform",type:["none","uppercase","lowercase","capitalize"],doc:"Transform the case of the characters","default-value":"none"},"justify-alignment":{css:"shield-justify-alignment",type:["left","center","right","auto"],doc:"Define how text in a shield's label is justified","default-value":"auto"},clip:{css:"shield-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},"comp-op":{css:"shield-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},"line-pattern":{file:{css:"line-pattern-file",type:"uri","default-value":"none",required:!0,doc:"An image file to be repeated and warped along a line"},clip:{css:"line-pattern-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"line-pattern-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"line-pattern-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"line-pattern-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},"polygon-pattern":{file:{css:"polygon-pattern-file",type:"uri","default-value":"none",required:!0,doc:"Image to use as a repeated pattern fill within a polygon"},alignment:{css:"polygon-pattern-alignment",type:["local","global"],"default-value":"local",doc:"Specify whether to align pattern fills to the layer or to the map."},gamma:{css:"polygon-pattern-gamma",type:"float","default-value":1,"default-meaning":"fully antialiased",range:"0-1",doc:"Level of antialiasing of polygon pattern edges"},opacity:{css:"polygon-pattern-opacity",type:"float",doc:"(Default 1.0) - Apply an opacity level to the image used for the pattern","default-value":1,"default-meaning":"The image is rendered without modifications"},clip:{css:"polygon-pattern-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"polygon-pattern-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"polygon-pattern-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"polygon-pattern-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},raster:{opacity:{css:"raster-opacity","default-value":1,"default-meaning":"opaque",type:"float",doc:"The opacity of the raster symbolizer on top of other symbolizers."},"filter-factor":{css:"raster-filter-factor","default-value":-1,"default-meaning":"Allow the datasource to choose appropriate downscaling.",type:"float",doc:"This is used by the Raster or Gdal datasources to pre-downscale images using overviews. Higher numbers can sometimes cause much better scaled image output, at the cost of speed."},scaling:{css:"raster-scaling",type:["near","fast","bilinear","bilinear8","bicubic","spline16","spline36","hanning","hamming","hermite","kaiser","quadric","catrom","gaussian","bessel","mitchell","sinc","lanczos","blackman"],"default-value":"near",doc:"The scaling algorithm used to making different resolution versions of this raster layer. Bilinear is a good compromise between speed and accuracy, while lanczos gives the highest quality."},"mesh-size":{css:"raster-mesh-size","default-value":16,"default-meaning":"Reprojection mesh will be 1/16 of the resolution of the source image",type:"unsigned",doc:"A reduced resolution mesh is used for raster reprojection, and the total image size is divided by the mesh-size to determine the quality of that mesh. Values for mesh-size larger than the default will result in faster reprojection but might lead to distortion."},"comp-op":{css:"raster-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},point:{file:{css:"point-file",type:"uri",required:!1,"default-value":"none",doc:"Image file to represent a point"},"allow-overlap":{css:"point-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping points are shown or hidden.","default-meaning":"Do not allow points to overlap with each other - overlapping markers will not be shown."},"ignore-placement":{css:"point-ignore-placement",type:"boolean","default-value":!1,"default-meaning":"do not store the bbox of this geometry in the collision detector cache",doc:"value to control whether the placement of the feature will prevent the placement of other features"},opacity:{css:"point-opacity",type:"float","default-value":1,"default-meaning":"Fully opaque",doc:"A value from 0 to 1 to control the opacity of the point"},placement:{css:"point-placement",type:["centroid","interior"],doc:"How this point should be placed. Centroid calculates the geometric center of a polygon, which can be outside of it, while interior always places inside of a polygon.","default-value":"centroid"},transform:{css:"point-transform",type:"functions",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]],"default-value":"","default-meaning":"No transformation",doc:"SVG transformation definition"},"comp-op":{css:"point-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},text:{name:{css:"text-name",type:"expression",required:!0,"default-value":"",serialization:"content",doc:"Value to use for a text label. Data columns are specified using brackets like [column_name]"},"face-name":{css:"text-face-name",type:"string",validate:"font",doc:"Font name and style to render a label in",required:!0},size:{css:"text-size",type:"float","default-value":10,doc:"Text size in pixels"},"text-ratio":{css:"text-ratio",doc:"Define the amount of text (of the total) present on successive lines when wrapping occurs","default-value":0,type:"unsigned"},"wrap-width":{css:"text-wrap-width",doc:"Length of a chunk of text in characters before wrapping text","default-value":0,type:"unsigned"},"wrap-before":{css:"text-wrap-before",type:"boolean","default-value":!1,doc:"Wrap text before wrap-width is reached. If false, wrapped lines will be a bit longer than wrap-width."},"wrap-character":{css:"text-wrap-character",type:"string","default-value":" ",doc:"Use this character instead of a space to wrap long text."},spacing:{css:"text-spacing",type:"unsigned",doc:"Distance between repeated text labels on a line (aka. label-spacing)"},"character-spacing":{css:"text-character-spacing",type:"float","default-value":0,doc:"Horizontal spacing adjustment between characters in pixels"},"line-spacing":{css:"text-line-spacing","default-value":0,type:"unsigned",doc:"Vertical spacing adjustment between lines in pixels"},"label-position-tolerance":{css:"text-label-position-tolerance","default-value":0,type:"unsigned",doc:"Allows the label to be displaced from its ideal position by a number of pixels (only works with placement:line)"},"max-char-angle-delta":{css:"text-max-char-angle-delta",type:"float","default-value":"22.5",doc:"The maximum angle change, in degrees, allowed between adjacent characters in a label. This value internally is converted to radians to the default is 22.5*math.pi/180.0. The higher the value the fewer labels will be placed around around sharp corners."},fill:{css:"text-fill",doc:"Specifies the color for the text","default-value":"#000000",type:"color"},opacity:{css:"text-opacity",doc:"A number from 0 to 1 specifying the opacity for the text","default-value":1,"default-meaning":"Fully opaque",type:"float"},"halo-fill":{css:"text-halo-fill",type:"color","default-value":"#FFFFFF","default-meaning":"white",doc:"Specifies the color of the halo around the text."},"halo-radius":{css:"text-halo-radius",doc:"Specify the radius of the halo in pixels","default-value":0,"default-meaning":"no halo",type:"float"},dx:{css:"text-dx",type:"float",doc:"Displace text by fixed amount, in pixels, +/- along the X axis.  A positive value will shift the text right","default-value":0},dy:{css:"text-dy",type:"float",doc:"Displace text by fixed amount, in pixels, +/- along the Y axis.  A positive value will shift the text down","default-value":0},"vertical-alignment":{css:"text-vertical-alignment",type:["top","middle","bottom","auto"],doc:"Position of label relative to point position.","default-value":"auto","default-meaning":'Default affected by value of dy; "bottom" for dy>0, "top" for dy<0.'},"avoid-edges":{css:"text-avoid-edges",doc:"Tell positioning algorithm to avoid labeling near intersection edges.","default-value":!1,type:"boolean"},"minimum-distance":{css:"text-min-distance",doc:"Minimum permitted distance to the next text symbolizer.",type:"float"},"minimum-padding":{css:"text-min-padding",doc:"Determines the minimum amount of padding that a text symbolizer gets relative to other text",type:"float"},"minimum-path-length":{css:"text-min-path-length",type:"float","default-value":0,"default-meaning":"place labels on all paths",doc:"Place labels only on paths longer than this value."},"allow-overlap":{css:"text-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping text is shown or hidden.","default-meaning":"Do not allow text to overlap with other text - overlapping markers will not be shown."},orientation:{css:"text-orientation",type:"expression",doc:"Rotate the text."},placement:{css:"text-placement",type:["point","line","vertex","interior"],"default-value":"point",doc:"Control the style of placement of a point versus the geometry it is attached to."},"placement-type":{css:"text-placement-type",doc:'Re-position and/or re-size text to avoid overlaps. "simple" for basic algorithm (using text-placements string,) "dummy" to turn this feature off.',type:["dummy","simple"],"default-value":"dummy"},placements:{css:"text-placements",type:"string","default-value":"",doc:'If "placement-type" is set to "simple", use this "POSITIONS,[SIZES]" string. An example is `text-placements: "E,NE,SE,W,NW,SW";` '},"text-transform":{css:"text-transform",type:["none","uppercase","lowercase","capitalize"],doc:"Transform the case of the characters","default-value":"none"},"horizontal-alignment":{css:"text-horizontal-alignment",type:["left","middle","right","auto"],doc:"The text's horizontal alignment from its centerpoint","default-value":"auto"},"justify-alignment":{css:"text-align",type:["left","right","center","auto"],doc:"Define how text is justified","default-value":"auto","default-meaning":"Auto alignment means that text will be centered by default except when using the `placement-type` parameter - in that case either right or left justification will be used automatically depending on where the text could be fit given the `text-placements` directives"},clip:{css:"text-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},"comp-op":{css:"text-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},building:{fill:{css:"building-fill","default-value":"#FFFFFF",doc:"The color of the buildings walls.",type:"color"},"fill-opacity":{css:"building-fill-opacity",type:"float",doc:"The opacity of the building as a whole, including all walls.","default-value":1},height:{css:"building-height",doc:"The height of the building in pixels.",type:"expression","default-value":"0"}}},colors:{aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50],transparent:[0,0,0,0]},filter:{value:["true","false","null","point","linestring","polygon","collection"]}};function eoe(e){"@babel/helpers - typeof";return(eoe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function toe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,roe(n.key),n)}}function roe(e){var t=function(e,t){if("object"!=eoe(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=eoe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==eoe(t)?t:t+""}Zne.mapnik_reference={version:{latest:$ne,"2.1.1":$ne}},Zne.Tree={},Zne.Tree.operate=function(e,t,r){switch(e){case"+":return t+r;case"-":return t-r;case"*":return t*r;case"%":return t%r;case"/":return t/r}},Zne.Tree.functions={rgb:function(e,t,r){return this.rgba(e,t,r,1)},rgba:function(e,t,r,n){var o=this,i=[e,t,r].map(function(e){return o.number(e)});return n=o.number(n),i.some(isNaN)||isNaN(n)?null:new Zne.Tree.Color(i,n)},stop:function(e){var t,r;return arguments.length>1&&(t=arguments[1]),arguments.length>2&&(r=arguments[2]),{is:"tag",val:e,color:t,mode:r,toString:function(n){return'\n\t<stop value="'+e.ev(n)+'"'+(t?' color="'+t.ev(n)+'" ':"")+(r?' mode="'+r.ev(n)+'" ':"")+"/>"}}},hsl:function(e,t,r){return this.hsla(e,t,r,1)},hsla:function(e,t,r,n){if([e=this.number(e)%360/360,t=this.number(t),r=this.number(r),n=this.number(n)].some(isNaN))return null;var o=r<=.5?r*(t+1):r+t-r*t,i=2*r-o;return this.rgba(255*a(e+1/3),255*a(e),255*a(e-1/3),n);function a(e){return 6*(e=e<0?e+1:e>1?e-1:e)<1?i+(o-i)*e*6:2*e<1?o:3*e<2?i+(o-i)*(2/3-e)*6:i}},hue:function(e){return"toHSL"in e?new Zne.Tree.Dimension(Math.round(e.toHSL().h)):null},saturation:function(e){return"toHSL"in e?new Zne.Tree.Dimension(Math.round(100*e.toHSL().s),"%"):null},lightness:function(e){return"toHSL"in e?new Zne.Tree.Dimension(Math.round(100*e.toHSL().l),"%"):null},alpha:function(e){return"toHSL"in e?new Zne.Tree.Dimension(e.toHSL().a):null},saturate:function(e,t){if(!("toHSL"in e))return null;var r=e.toHSL();return r.s+=t.value/100,r.s=this.clamp(r.s),this.hsla_simple(r)},desaturate:function(e,t){if(!("toHSL"in e))return null;var r=e.toHSL();return r.s-=t.value/100,r.s=this.clamp(r.s),this.hsla_simple(r)},lighten:function(e,t){if(!("toHSL"in e))return null;var r=e.toHSL();return r.l+=t.value/100,r.l=this.clamp(r.l),this.hsla_simple(r)},darken:function(e,t){if(!("toHSL"in e))return null;var r=e.toHSL();return r.l-=t.value/100,r.l=this.clamp(r.l),this.hsla_simple(r)},fadein:function(e,t){if(!("toHSL"in e))return null;var r=e.toHSL();return r.a+=t.value/100,r.a=this.clamp(r.a),this.hsla_simple(r)},fadeout:function(e,t){if(!("toHSL"in e))return null;var r=e.toHSL();return r.a-=t.value/100,r.a=this.clamp(r.a),this.hsla_simple(r)},spin:function(e,t){if(!("toHSL"in e))return null;var r=e.toHSL(),n=(r.h+t.value)%360;return r.h=n<0?360+n:n,this.hsla_simple(r)},replace:function(e,t,r){return"field"===e.is?e.toString+".replace("+t.toString()+", "+r.toString()+")":e.replace(t,r)},mix:function(e,t,r){var n=r.value/100,o=2*n-1,i=e.toHSL().a-t.toHSL().a,a=((o*i==-1?o:(o+i)/(1+o*i))+1)/2,s=1-a,u=[e.rgb[0]*a+t.rgb[0]*s,e.rgb[1]*a+t.rgb[1]*s,e.rgb[2]*a+t.rgb[2]*s],l=e.alpha*n+t.alpha*(1-n);return new Zne.Tree.Color(u,l)},greyscale:function(e){return this.desaturate(e,new Zne.Tree.Dimension(100))},"%":function(e){for(var t=Array.prototype.slice.call(arguments,1),r=e.value,n=0;n<t.length;n++)r=r.replace(/%s/,t[n].value).replace(/%[da]/,t[n].toString());return r=r.replace(/%%/g,"%"),new Zne.Tree.Quoted(r)},hsla_simple:function(e){return this.hsla(e.h,e.s,e.l,e.a)},number:function(e){return e instanceof Zne.Tree.Dimension?parseFloat("%"===e.unit?e.value/100:e.value):"number"==typeof e?e:NaN},clamp:function(e){return Math.min(1,Math.max(0,e))}},Zne.Tree.Call=function(){return Wne(function e(t,r,n){Yne(this,e),this.is="call",this.name=t,this.args=r,this.index=n},[{key:"ev",value:function(e){for(var t=this.args.map(function(t){return t.ev(e)}),r=0;r<t.length;r++)if("undefined"===t[r].is)return{is:"undefined",value:"undefined"};if(this.name in Zne.Tree.functions){if(Zne.Tree.functions[this.name].length<=t.length){var n=Zne.Tree.functions[this.name].apply(Zne.Tree.functions,t);return null===n?(e.error({message:"incorrect arguments given to "+this.name+"()",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):n}return e.error({message:"incorrect number of arguments for "+this.name+"(). "+Zne.Tree.functions[this.name].length+" expected.",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}}var o=Zne.Tree.Reference.mapnikFunctions[this.name];if(void 0===o){var i=Vne()(Zne.Tree.Reference.mapnikFunctions),a=this.name,s=i.map(function(e){return[e[0],Zne.Tree.Reference.editDistance(a,e[0]),e[1]]}).sort(function(e,t){return e[1]-t[1]});return e.error({message:"unknown function "+this.name+"(), did you mean "+s[0][0]+"("+s[0][2]+")",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}}return o!==t.length&&-1!==o?(e.error({message:"function "+this.name+"() takes "+o+" arguments and was given "+t.length,index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):(this.args=t,this)}},{key:"toString",value:function(e,t){return this.args.length?this.name+"("+this.args.join(",")+")":this.name}}])}(),Zne.Tree.Color=function(){return Wne(function e(t,r){Yne(this,e),this.is="color",Array.isArray(t)?this.rgb=t.slice(0,3):6==t.length?this.rgb=t.match(/.{2}/g).map(function(e){return parseInt(e,16)}):this.rgb=t.split("").map(function(e){return parseInt(e+e,16)}),"number"==typeof r?this.alpha=r:4===t.length?this.alpha=t[3]:this.alpha=1},[{key:"ev",value:function(){return this}},{key:"toString",value:function(){return"rgba("+this.rgb.map(function(e){return Math.round(e)}).concat(this.alpha).join(", ")+")"}},{key:"operate",value:function(e,t,r){var n=[];r instanceof Zne.Tree.Color||(r=r.toColor());for(var o=0;o<3;o++)n[o]=Zne.Tree.operate(t,this.rgb[o],r.rgb[o]);return new Zne.Tree.Color(n)}},{key:"toHSL",value:function(){var e,t,r=this.rgb[0]/255,n=this.rgb[1]/255,o=this.rgb[2]/255,i=this.alpha,a=Math.max(r,n,o),s=Math.min(r,n,o),u=(a+s)/2,l=a-s;if(a===s)e=t=0;else{switch(t=u>.5?l/(2-a-s):l/(a+s),a){case r:e=(n-o)/l+(n<o?6:0);break;case n:e=(o-r)/l+2;break;case o:e=(r-n)/l+4}e/=6}return{h:360*e,s:t,l:u,a:i}}}])}(),Zne.Tree.Comment=function(){return Wne(function e(t,r){Yne(this,e),this.value=t,this.silent=!!r},[{key:"toString",value:function(e){return"\x3c!--"+this.value+"--\x3e"}},{key:"ev",value:function(){return this}}])}(),Zne.Tree.Definition=function(){return Wne(function e(t,r){Yne(this,e),this.elements=t.elements,this.rules=r,this.ruleIndex={};for(var n=0;n<this.rules.length;n++)"zoom"in this.rules[n]&&(this.rules[n]=this.rules[n].clone()),this.rules[n].zoom=t.zoom,this.ruleIndex[this.rules[n].updateID()]=!0;this.filters=t.filters,this.zoom=t.zoom,this.attachment=t.attachment||"__default__",this.specificity=t.specificity()},[{key:"toString",value:function(){for(var e=this.filters.toString(),t=0;t<this.rules.length;t++)e+="\n    "+this.rules[t];return e}},{key:"toJS",value:function(e){var t={},r=this.zoom,n=this.filters.toJS(e),o=[r];function i(r){if(r instanceof Zne.Tree.Rule)t[r.name]=t[r.name]||[],n?t[r.name].push("if("+n+"){"+r.value.toJS(e)+"}"):t[r.name].push(r.value.toJS(e));else if(r instanceof Zne.Tree.Ruleset){var o=r.toJS(e);for(var i in o)for(var a in t[i]=t[i]||[],o[i])t[i].push(o[i][a])}}for(var a in n&&o.push(n),n=o.join(" && "),this.rules)i(this.rules[a]);return t}}])}(),Zne.Tree.Dimension=function(){return Wne(function e(t,r,n){Yne(this,e),this.is="float",this.physical_units=["m","cm","in","mm","pt","pc"],this.screen_units=["px","%"],this.all_units=["m","cm","in","mm","pt","pc","px","%"],this.densities={m:.0254,mm:25.4,cm:2.54,pt:72,pc:6},this.value=parseFloat(t),this.unit=r||null,this.index=n},[{key:"ev",value:function(e){if(this.unit&&this.all_units.indexOf(this.unit)<0)return e.error({message:"Invalid unit: '"+this.unit+"'",index:this.index}),{is:"undefined",value:"undefined"};if(this.unit&&this.physical_units.indexOf(this.unit)>=0){if(!e.ppi)return e.error({message:"ppi is not set, so metric units can't be used",index:this.index}),{is:"undefined",value:"undefined"};this.value=this.value/this.densities[this.unit]*e.ppi,this.unit="px"}return this}},{key:"toColor",value:function(){return new Zne.Tree.Color([this.value,this.value,this.value])}},{key:"round",value:function(){return this.value=Math.round(this.value),this}},{key:"toString",value:function(){return this.value.toString()}},{key:"operate",value:function(e,t,r){return"%"===this.unit&&"%"!==r.unit?(e.error({message:"If two operands differ, the first must not be %",index:this.index}),{is:"undefined",value:"undefined"}):"%"!==this.unit&&"%"===r.unit?"*"===t||"/"===t||"%"===t?(e.error({message:"Percent values can only be added or subtracted from other values",index:this.index}),{is:"undefined",value:"undefined"}):new Zne.Tree.Dimension(Zne.Tree.operate(t,this.value,this.value*r.value*.01),this.unit):new Zne.Tree.Dimension(Zne.Tree.operate(t,this.value,r.value),this.unit||r.unit)}}])}(),Zne.Tree.Element=function(){return Wne(function e(t){Yne(this,e),this.value=t.trim(),"#"===this.value[0]&&(this.type="id",this.clean=this.value.replace(/^#/,"")),"."===this.value[0]&&(this.type="class",this.clean=this.value.replace(/^\./,"")),-1!==this.value.indexOf("*")&&(this.type="wildcard")},[{key:"specificity",value:function(){return["id"===this.type?1:0,"class"===this.type?1:0]}},{key:"toString",value:function(){return this.value}}])}(),Zne.Tree.Expression=function(){return Wne(function e(t){Yne(this,e),this.is="expression",this.value=t},[{key:"ev",value:function(e){return this.value.length>1?new Zne.Tree.Expression(this.value.map(function(t){return t.ev(e)})):this.value[0].ev(e)}},{key:"toString",value:function(e){return this.value.map(function(t){return t.toString(e)}).join(" ")}}])}(),Zne.Tree.Field=function(){return Wne(function e(t){Yne(this,e),this.is="field",this.value=t||""},[{key:"toString",value:function(){return'["'+this.value.toUpperCase()+'"]'}},{key:"ev",value:function(){return this}}])}(),Zne.Tree.Filter=function(){return Wne(function e(t,r,n,o,i){Yne(this,e),this.ops={"<":[" &lt; ","numeric"],">":[" &gt; ","numeric"],"=":[" = ","both"],"!=":[" != ","both"],"<=":[" &lt;= ","numeric"],">=":[" &gt;= ","numeric"],"=~":[".match(","string",")"]},this.key=t,this.op=r,this.val=n,this.index=o,this.filename=i,this.id=this.key+this.op+this.val},[{key:"ev",value:function(e){return this.key=this.key.ev(e),this.val=this.val.ev(e),this}},{key:"toString",value:function(){return"["+this.id+"]"}}])}(),Zne.Tree.Filterset=function(){return Wne(function e(){Yne(this,e),this.filters={}},[{key:"toJS",value:function(e){function t(e){var t=e.op;"="===t&&(t="==");var r=e.val;void 0!==e._val&&(r=e._val.toString(!0)),e.key&&"scale"===e.key.value?r=+r:"string"!=typeof r&&"object"!==Kne(r)||(r="'"+r+"'");var n="attributes";return n+"&&"+n+e.key+"&&"+n+e.key+" "+t+r}var r=[];for(var n in this.filters)r.push(t(this.filters[n]));return r.join(" && ")}},{key:"toString",value:function(){var e=[];for(var t in this.filters)e.push(this.filters[t].id);return e.sort().join("\t")}},{key:"ev",value:function(e){for(var t in this.filters)this.filters[t].ev(e);return this}},{key:"clone",value:function(){var e=new Zne.Tree.Filterset;for(var t in this.filters)e.filters[t]=this.filters[t];return e}},{key:"cloneWith",value:function(e){var t=[];for(var r in e.filters){var n=this.addable(e.filters[r]);if(!1===n)return!1;!0===n&&t.push(e.filters[r])}if(!t.length)return null;var o=new Zne.Tree.Filterset;for(r in this.filters)o.filters[r]=this.filters[r];for(;r=t.shift();)o.add(r);return o}},{key:"addable",value:function(e){var t=e.key.toString(),r=e.val.toString();switch(r.match(/^[0-9]+(\.[0-9]*)?_match/)&&(r=parseFloat(r)),e.op){case"=":return void 0!==this.filters[t+"="]?this.filters[t+"="].val.toString()==r&&null:void 0===this.filters[t+"!="+r]&&(!(void 0!==this.filters[t+">"]&&this.filters[t+">"].val>=r)&&(!(void 0!==this.filters[t+"<"]&&this.filters[t+"<"].val<=r)&&(!(void 0!==this.filters[t+">="]&&this.filters[t+">="].val>r)&&!(void 0!==this.filters[t+"<="]&&this.filters[t+"<="].val<r))));case"=~":return!0;case"!=":return void 0!==this.filters[t+"="]?this.filters[t+"="].val!==r&&null:void 0!==this.filters[t+"!="+r]?null:void 0!==this.filters[t+">"]&&this.filters[t+">"].val>=r?null:void 0!==this.filters[t+"<"]&&this.filters[t+"<"].val<=r?null:void 0!==this.filters[t+">="]&&this.filters[t+">="].val>r?null:!(void 0!==this.filters[t+"<="]&&this.filters[t+"<="].val<r)||null;case">":return t+"="in this.filters?!(this.filters[t+"="].val<=r)&&null:!(void 0!==this.filters[t+"<"]&&this.filters[t+"<"].val<=r)&&(!(void 0!==this.filters[t+"<="]&&this.filters[t+"<="].val<=r)&&(void 0!==this.filters[t+">"]&&this.filters[t+">"].val>=r?null:!(void 0!==this.filters[t+">="]&&this.filters[t+">="].val>r)||null));case">=":return void 0!==this.filters[t+"="]?!(this.filters[t+"="].val<r)&&null:!(void 0!==this.filters[t+"<"]&&this.filters[t+"<"].val<=r)&&(!(void 0!==this.filters[t+"<="]&&this.filters[t+"<="].val<r)&&(void 0!==this.filters[t+">"]&&this.filters[t+">"].val>=r?null:!(void 0!==this.filters[t+">="]&&this.filters[t+">="].val>=r)||null));case"<":return void 0!==this.filters[t+"="]?!(this.filters[t+"="].val>=r)&&null:!(void 0!==this.filters[t+">"]&&this.filters[t+">"].val>=r)&&(!(void 0!==this.filters[t+">="]&&this.filters[t+">="].val>=r)&&(void 0!==this.filters[t+"<"]&&this.filters[t+"<"].val<=r?null:!(void 0!==this.filters[t+"<="]&&this.filters[t+"<="].val<r)||null));case"<=":return void 0!==this.filters[t+"="]?!(this.filters[t+"="].val>r)&&null:!(void 0!==this.filters[t+">"]&&this.filters[t+">"].val>=r)&&(!(void 0!==this.filters[t+">="]&&this.filters[t+">="].val>r)&&(void 0!==this.filters[t+"<"]&&this.filters[t+"<"].val<=r?null:!(void 0!==this.filters[t+"<="]&&this.filters[t+"<="].val<=r)||null))}}},{key:"conflict",value:function(e){var t=e.key.toString(),r=e.val.toString();return isNaN(parseFloat(r))||(r=parseFloat(r)),("="===e.op&&void 0!==this.filters[t+"="]&&r!=this.filters[t+"="].val.toString()||"!="===e.op&&void 0!==this.filters[t+"="]&&r==this.filters[t+"="].val.toString()||"="===e.op&&void 0!==this.filters[t+"!="]&&r===this.filters[t+"!="].val.toString())&&e.toString()+" added to "+this.toString()+" produces an invalid filter"}},{key:"add",value:function(e,t){var r,n=e.key.toString(),o=e.op,i=this.conflict(e);if(i)return i;if("="===o){for(var a in this.filters)this.filters[a].key===n&&delete this.filters[a];this.filters[n+"="]=e}else if("!="===o)this.filters[n+"!="+e.val]=e;else if("=~"===o)this.filters[n+"=~"+e.val]=e;else if(">"===o){for(var s in this.filters)this.filters[s].key===n&&this.filters[s].val<=e.val&&delete this.filters[s];this.filters[n+">"]=e}else if(">="===o){for(var u in this.filters)r=+this.filters[u].val.toString(),this.filters[u].key===n&&r<e.val&&delete this.filters[u];void 0!==this.filters[n+"!="+e.val]?(delete this.filters[n+"!="+e.val],e.op=">",this.filters[n+">"]=e):this.filters[n+">="]=e}else if("<"===o){for(var l in this.filters)r=+this.filters[l].val.toString(),this.filters[l].key===n&&r>=e.val&&delete this.filters[l];this.filters[n+"<"]=e}else if("<="===o){for(var c in this.filters)r=+this.filters[c].val.toString(),this.filters[c].key===n&&r>e.val&&delete this.filters[c];void 0!==this.filters[n+"!="+e.val]?(delete this.filters[n+"!="+e.val],e.op="<",this.filters[n+"<"]=e):this.filters[n+"<="]=e}}}])}(),Zne.Tree.Fontset=Wne(function e(t,r){Yne(this,e),this.fonts=r,this.name="fontset-"+t.effects.length}),Zne.Tree.Invalid=function(){return Wne(function e(t,r,n){Yne(this,e),this.is="invalid",this.chunk=t,this.index=r,this.type="syntax",this.message=n||"Invalid code: "+this.chunk},[{key:"ev",value:function(e){return e.error({chunk:this.chunk,index:this.index,type:"syntax",message:this.message||"Invalid code: "+this.chunk}),{is:"undefined"}}}])}(),Zne.Tree.Keyword=function(){return Wne(function e(t){Yne(this,e),this.value=t;var r={transparent:"color",true:"boolean",false:"boolean"};this.is=r[t]?r[t]:"keyword"},[{key:"ev",value:function(){return this}},{key:"toString",value:function(){return this.value}}])}(),Zne.Tree.Literal=function(){return Wne(function e(t){Yne(this,e),this.value=t||"",this.is="field"},[{key:"toString",value:function(){return this.value}},{key:"ev",value:function(){return this}}])}(),Zne.Tree.Operation=function(){return Wne(function e(t,r,n){Yne(this,e),this.is="operation",this.op=t.trim(),this.operands=r,this.index=n},[{key:"ev",value:function(e){var t,r=this.operands[0].ev(e),n=this.operands[1].ev(e);return"undefined"===r.is||"undefined"===n.is?{is:"undefined",value:"undefined"}:(r instanceof Zne.Tree.Dimension&&n instanceof Zne.Tree.Color&&("*"===this.op||"+"===this.op?(t=n,n=r,r=t):e.error({name:"OperationError",message:"Can't substract or divide a color from a number",index:this.index})),r instanceof Zne.Tree.Quoted&&n instanceof Zne.Tree.Quoted&&"+"!==this.op?(e.error({message:"Can't subtract, divide, or multiply strings.",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):r instanceof Zne.Tree.Field||n instanceof Zne.Tree.Field||r instanceof Zne.Tree.Literal||n instanceof Zne.Tree.Literal?"color"===r.is||"color"===n.is?(e.error({message:"Can't subtract, divide, or multiply colors in expressions.",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):new Zne.Tree.Literal(r.ev(e).toString(!0)+this.op+n.ev(e).toString(!0)):void 0===r.operate?(e.error({message:"Cannot do math with type "+r.is+".",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):r.operate(e,this.op,n))}}])}(),Zne.Tree.Quoted=function(){return Wne(function e(t){Yne(this,e),this.is="string",this.value=t||""},[{key:"toString",value:function(e){var t=this.value.replace(/&/g,"&amp;"),r=t.replace(/\'/g,"\\'").replace(/\"/g,"&quot;").replace(/</g,"&lt;").replace(/\>/g,"&gt;");return!0===e?"'"+r+"'":t}},{key:"ev",value:function(){return this}},{key:"operate",value:function(e,t,r){return new Zne.Tree.Quoted(Zne.Tree.operate(t,this.toString(),r.toString(this.contains_field)))}}])}(),Zne.Tree.Reference={_validateValue:{font:function(e,t){return!e.validation_data||!e.validation_data.fonts||-1!=e.validation_data.fonts.indexOf(t)}},setData:function(e){this.data=e,this.selector_cache=function(e){var t={};for(var r in e.symbolizers)for(var n in e.symbolizers[r])e.symbolizers[r][n].hasOwnProperty("css")&&(t[e.symbolizers[r][n].css]=[e.symbolizers[r][n],r,n]);return t}(e),this.mapnikFunctions=function(e){var t={};for(var r in e.symbolizers)for(var n in e.symbolizers[r])if("functions"===e.symbolizers[r][n].type)for(var o=0;o<e.symbolizers[r][n].functions.length;o++){var i=e.symbolizers[r][n].functions[o];t[i[0]]=i[1]}return t}(e),this.required_cache=function(e){var t={};for(var r in e.symbolizers)for(var n in t[r]=[],e.symbolizers[r])e.symbolizers[r][n].required&&t[r].push(e.symbolizers[r][n].css);return t}(e)},setVersion:function(e){return!!Zne.mapnik_reference.version.hasOwnProperty(e)&&(this.setData(Zne.mapnik_reference.version[e]),!0)},selectorData:function(e,t){if(this.selector_cache&&this.selector_cache[e])return this.selector_cache[e][t]},validSelector:function(e){return!!this.selector_cache[e]},selectorName:function(e){return this.selectorData(e,2)},selector:function(e){return this.selectorData(e,0)},symbolizer:function(e){return this.selectorData(e,1)},requiredProperties:function(e,t){var r=this.required_cache[e];for(var n in r)if(!(r[n]in t))return"Property "+r[n]+" required for defining "+e+" styles."},isFont:function(e){return"font"===this.selector(e).validate},editDistance:function(e,t){if(0===e.length)return t.length;if(0===t.length)return e.length;for(var r=[],n=0;n<=t.length;n++)r[n]=[n];for(var o=0;o<=e.length;o++)r[0][o]=o;for(n=1;n<=t.length;n++)for(o=1;o<=e.length;o++)t.charAt(n-1)===e.charAt(o-1)?r[n][o]=r[n-1][o-1]:r[n][o]=Math.min(r[n-1][o-1]+1,Math.min(r[n][o-1]+1,r[n-1][o]+1));return r[t.length][e.length]},validValue:function(e,t,r){var n;if(this.selector(t)){if("keyword"===r.value[0].is)return function(e,t){return"object"===Kne(this.selector(t).type)?-1!==this.selector(t).type.indexOf(e.value[0].value):"string"===this.selector(t).type}(r,t);if("undefined"===r.value[0].is)return!0;if("numbers"===this.selector(t).type){for(n in r.value)if("float"!==r.value[n].is)return!1;return!0}if("tags"===this.selector(t).type){if(!r.value)return!1;if(!r.value[0].value)return"tag"===r.value[0].is;for(n=0;n<r.value[0].value.length;n++)if("tag"!==r.value[0].value[n].is)return!1;return!0}if("functions"==this.selector(t).type)return function(e,t){if("string"===e.value[0].is)return!0;for(var r in e.value)for(var n in e.value[r].value){if("call"!==e.value[r].value[n].is)return!1;var o=find(this.selector(t).functions,function(t){return t[0]===e.value[r].value[n].name});if(!(o&&-1===o[1]||o&&o[1]===e.value[r].value[n].args.length))return!1}return!0}(r,t);if("expression"===this.selector(t).type)return!0;if("unsigned"===this.selector(t).type)return"float"===r.value[0].is&&(r.value[0].round(),!0);if(this.selector(t).validate){for(n=0;n<r.value.length;n++)if(this.selector(t).type===r.value[n].is&&this._validateValue[this.selector(t).validate](e,r.value[n].value))return!0;return!1}return this.selector(t).type===r.value[0].is}return!1}},Zne.Tree.Reference.setVersion("latest"),Zne.Tree.Rule=function(){return Wne(function e(t,r,n,o){Yne(this,e),this.is="rule";var i=t.split("/");this.name=i.pop(),this.instance=i.length?i[0]:"__default__",this.value=r instanceof Zne.Tree.Value?r:new Zne.Tree.Value([r]),this.index=n,this.symbolizer=Zne.Tree.Reference.symbolizer(this.name),this.filename=o,this.variable="@"===t.charAt(0)},[{key:"clone",value:function(){var e=Object.create(Zne.Tree.Rule.prototype);return e.name=this.name,e.value=this.value,e.index=this.index,e.instance=this.instance,e.symbolizer=this.symbolizer,e.filename=this.filename,e.variable=this.variable,e}},{key:"updateID",value:function(){return this.id=this.zoom+"#"+this.instance+"#"+this.name}},{key:"toString",value:function(){return"["+Zne.Tree.Zoom.toString(this.zoom)+"] "+this.name+": "+this.value}},{key:"ev",value:function(e){return new Zne.Tree.Rule(this.name,this.value.ev(e),this.index,this.filename)}}])}(),Zne.Tree.Ruleset=function(){return Wne(function e(t,r){Yne(this,e),this.is="ruleset",this.selectors=t,this.rules=r,this._lookups={}},[{key:"ev",value:function(e){var t,r,n=new Zne.Tree.Ruleset(this.selectors,this.rules.slice(0));for(n.root=this.root,e.frames.unshift(n),t=0;t<n.rules.length;t++)r=n.rules[t],n.rules[t]=r.ev?r.ev(e):r;return e.frames.shift(),n}},{key:"match",value:function(e){return!e||0===e.length}},{key:"variables",value:function(){return this._variables?this._variables:this._variables=this.rules.reduce(function(e,t){return t instanceof Zne.Tree.Rule&&!0===t.variable&&(e[t.name]=t),e},{})}},{key:"variable",value:function(e){return this.variables()[e]}},{key:"rulesets",value:function(){return this._rulesets?this._rulesets:this._rulesets=this.rules.filter(function(e){return e instanceof Zne.Tree.Ruleset})}},{key:"find",value:function(e,t){t=t||this;var r=[],n=e.toString();return n in this._lookups?this._lookups[n]:(this.rulesets().forEach(function(n){if(n!==t)for(var o=0;o<n.selectors.length;o++)if(e.match(n.selectors[o])){e.elements.length>1?Array.prototype.push.apply(r,n.find(new Zne.Tree.Selector(null,null,e.elements.slice(1)),t)):r.push(n);break}}),this._lookups[n]=r)}},{key:"evZooms",value:function(e){for(var t=0;t<this.selectors.length;t++){for(var r=Zne.Tree.Zoom.all,n=0;n<this.selectors[t].zoom.length;n++)r=this.selectors[t].zoom[n].ev(e).zoom;this.selectors[t].zoom=r}}},{key:"flatten",value:function(e,t,r){var n,o,i=[];for(0===this.selectors.length&&(r.frames=r.frames.concat(this.rules)),this.evZooms(r),n=0;n<this.selectors.length;n++){var a=this.selectors[n];if(a.filters)if(t.length)for(o=0;o<t.length;o++){var s=t[o],u=s.filters.cloneWith(a.filters);if(null===u){if(s.zoom===a.zoom&&s.attachment===a.attachment&&s.elements.join()===a.elements.join()){i.push(s);continue}u=s.filters}else if(!u)continue;var l=Object.create(Zne.Tree.Selector.prototype);l.filters=u,l.zoom=a.zoom,l.elements=s.elements.concat(a.elements),s.attachment&&a.attachment?l.attachment=s.attachment+"/"+a.attachment:l.attachment=a.attachment||s.attachment,l.conditions=s.conditions+a.conditions,l.index=a.index,i.push(l)}else i.push(a)}var c=[];for(n=0;n<this.rules.length;n++){var f=this.rules[n];f instanceof Zne.Tree.Ruleset?f.flatten(e,i,r):f instanceof Zne.Tree.Rule?c.push(f):f instanceof Zne.Tree.Invalid&&r.error(f)}var p=!!c.length&&c[0].index;for(n=0;n<i.length;n++)!1!==p&&(i[n].index=p),e.push(new Zne.Tree.Definition(i[n],c.slice()));return e}}])}(),Zne.Tree.Selector=function(){return Wne(function e(t,r,n,o,i,a){Yne(this,e),this.elements=n||[],this.attachment=o,this.filters=t||{},this.zoom=void 0!==r?r:Zne.Tree.Zoom.all,this.conditions=i,this.index=a},[{key:"specificity",value:function(){return this.elements.reduce(function(e,t){var r=t.specificity();return e[0]+=r[0],e[1]+=r[1],e},[0,0,this.conditions,this.index])}}])}(),Zne.Tree.URL=function(){return Wne(function e(t,r){Yne(this,e),this.is="uri",this.value=t,this.paths=r},[{key:"toString",value:function(){return this.value.toString()}},{key:"ev",value:function(e){return new Zne.Tree.URL(this.value.ev(e),this.paths)}}])}(),Zne.Tree.Value=function(){return Wne(function e(t){Yne(this,e),this.is="value",this.value=t},[{key:"ev",value:function(e){return 1===this.value.length?this.value[0].ev(e):new Zne.Tree.Value(this.value.map(function(t){return t.ev(e)}))}},{key:"toJS",value:function(e){var t=this.ev(e),r=t.toString();return"color"===t.is||"uri"===t.is||"string"===t.is||"keyword"===t.is?r="'"+r+"'":"field"===t.is?r=r.replace(/\[(.*)\]/g,"attributes['_match1']"):t.value&&"object"===Kne(t.value)&&(r="["+r+"]"),"_value = "+r+";"}},{key:"toString",value:function(e,t,r,n){return this.value.map(function(t){return t.toString(e,n)}).join(r||", ")}},{key:"clone",value:function(){var e=Object.create(Zne.Tree.Value.prototype);return Array.isArray(e)?e.value=this.value.slice():e.value=this.value,e.is=this.is,e}}])}(),Zne.Tree.Variable=function(){return Wne(function e(t,r,n){Yne(this,e),this.is="variable",this.name=t,this.index=r,this.filename=n},[{key:"toString",value:function(){return this.name}},{key:"ev",value:function(e){if(this._css)return this._css;var t=e.frames.filter(function(e){return e.name===this.name}.bind(this));return t.length?t[0].value.ev(e):(e.error({message:"variable "+this.name+" is undefined",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"})}}])}(),Zne.Tree.Zoom=function(){return Wne(function e(t,r,n){Yne(this,e),this.op=t,this.value=r,this.index=n},[{key:"setZoom",value:function(e){return this.zoom=e,this}},{key:"ev",value:function(e){var t=parseInt(this.value.ev(e).toString(),10);switch((t>Zne.Tree.Zoom.maxZoom||t<0)&&e.error({message:"Only zoom levels between 0 and "+Zne.Tree.Zoom.maxZoom+" supported.",index:this.index}),this.op){case"=":return this.zoom="zoom && zoom === "+t,this;case">":this.zoom="zoom && zoom > "+t;break;case">=":this.zoom="zoom && zoom >= "+t;break;case"<":this.zoom="zoom && zoom < "+t;break;case"<=":this.zoom="zoom && zoom <= "+t}return this}},{key:"toString",value:function(){for(var e="",t=0;t<=Zne.Tree.Zoom.maxZoom;t++)e+=this.zoom&1<<t?"X":".";return e}}])}(),Zne.Tree.Zoom.all=23,Zne.Tree.Zoom.maxZoom=22,Zne.Tree.Zoom.ranges={0:1e9,1:5e8,2:2e8,3:1e8,4:5e7,5:25e6,6:125e5,7:65e5,8:3e6,9:15e5,10:75e4,11:4e5,12:2e5,13:1e5,14:5e4,15:25e3,16:12500,17:5e3,18:2500,19:1500,20:750,21:500,22:250,23:100};var noe=function(e,t,r){return t&&toe(e.prototype,t),r&&toe(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.fill=!0,this.fillColor="#000000",this.fillOpacity=1,this.stroke=!1,this.strokeColor="#000000",this.strokeOpacity=1,this.strokeWidth=1,this.strokeLinecap="butt",this.strokeLineJoin="miter",this.strokeDashstyle="solid",this.pointRadius=6,this.shadowBlur=0,this.shadowColor="#000000",this.shadowOffsetX=0,this.shadowOffsetY=0,this.label="",this.labelRect=!1,this.fontColor="",this.fontSize=12,this.fontStyle="normal",this.fontVariant="normal",this.fontWeight="normal",this.fontFamily="arial,sans-serif",this.labelPosition="top",this.labelAlign="center",this.labelBaseline="middle",this.labelXOffset=0,this.labelYOffset=0,M.extend(this,t)});function ooe(e){"@babel/helpers - typeof";return(ooe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ioe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,aoe(n.key),n)}}function aoe(e){var t=function(e,t){if("object"!=ooe(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ooe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ooe(t)?t:t+""}function soe(e,t,r){return t=loe(t),function(e,t){if(t&&("object"==ooe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],loe(e).constructor):t.apply(e,r))}function uoe(){return(uoe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=loe(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function loe(e){return(loe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function coe(e,t){return(coe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var foe=function(e){function t(e,r,n,o,i,a){var s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(s=soe(this,t,[e,r,n,o,i,a])).shapeFactory=new Oc,s.shapeParameters=null,s.RelativeCoordinate=!1,s.setting=null,s.origonPoint=null,s.chartBox=null,s.chartBounds=null,s.width=null,s.height=null,s.XOffset=0,s.YOffset=0,s.DVBParameter=null,s.dataViewBox=null,s.DVBCodomain=null,s.DVBCenterPoint=null,s.DVBUnitValue=null,s.DVBOrigonPoint=null,s.DVBWidth=null,s.DVBHeight=null,s.origonPointOffset=null,s.fields=n||[],s.dataValues=null,s.lonlat=i||s.data.geometry.getBounds().getCenterLonLat(),o&&o.width&&o.height&&o.codomain&&(s.setting=o),s.CLASS_NAME="SuperMap.Feature.Theme.Graph",s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&coe(e,t)}(t,zo),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;this.shapeFactory=null,this.shapeParameters=null,this.width=null,this.height=null,this.origonPoint=null,this.chartBox=null,this.dataViewBox=null,this.chartBounds=null,this.DVBParameter=null,this.DVBOrigonPoint=null,this.DVBCenterPoint=null,this.DVBWidth=null,this.DVBHeight=null,this.DVBCodomain=null,this.DVBUnitValue=null,this.origonPointOffset=null,this.XOffset=null,this.YOffset=null,this.fields=null,this.dataValues=null,this.setting=null,(e=t,r="destroy",n=this,i=uoe(loe(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"initBaseParameter",value:function(){if(!this.setting)return!1;var e=this.setting;if(!(e.width&&e.height&&e.codomain))return!1;var t=void 0===e.decimalNumber||isNaN(e.decimalNumber)?-1:e.decimalNumber,r=zo.getDataValues(this.data,this.fields,t);this.dataValues=r||[],this.width=parseFloat(e.width),this.height=parseFloat(e.height),this.DVBCodomain=e.codomain,this.XOffset=e.XOffset?e.XOffset:0,this.YOffset=e.YOffset?e.YOffset:0,this.origonPoint=[],this.chartBox=[],this.dataViewBox=[],this.DVBParameter=e.dataViewBoxParameter?e.dataViewBoxParameter:[0,0,0,0],this.DVBOrigonPoint=[],this.DVBCenterPoint=[],this.origonPointOffset=[],this.resetLocation();var n=this.width,o=this.height,i=this.location;this.origonPoint=[i[0]-n/2,i[1]-o/2];var a=this.origonPoint;this.chartBox=[a[0],a[1]+o,a[0]+n,a[1]];var s=this.chartBox,u=this.DVBParameter;this.dataViewBox=[s[0]+u[0],s[1]-u[1],s[2]-u[2],s[3]+u[3]];var l=this.dataViewBox;return!(l[0]>=l[2]||l[1]<=l[3])&&(this.DVBOrigonPoint=[l[0],l[3]],this.DVBWidth=Math.abs(l[2]-l[0]),this.DVBHeight=Math.abs(l[1]-l[3]),this.DVBCenterPoint=[this.DVBOrigonPoint[0]+this.DVBWidth/2,this.DVBOrigonPoint[1]+this.DVBHeight/2],this.origonPointOffset=[this.DVBOrigonPoint[0]-a[0],this.DVBOrigonPoint[1]-a[1]],!0)}},{key:"resetLocation",value:function(e){e&&(this.lonlat=e);var t=this.getLocalXY(this.lonlat);t[0]+=this.XOffset,t[1]+=this.YOffset,this.location=t;var r=this.width,n=this.height,o=this.location;return this.chartBounds=new We(o[0]-r/2,o[1]+n/2,o[0]+r/2,o[1]-n/2),this.resetLinearGradient(),o}},{key:"resetLinearGradient",value:function(){}},{key:"shapesConvertToRelativeCoordinate",value:function(){for(var e=this.shapes,t=this.location,r=0,n=e.length;r<n;r++){e[r].refOriginalPosition=t;var o=e[r].style;for(var i in o)switch(i){case"pointList":for(var a=o[i],s=0,u=a.length;s<u;s++)a[s][0]-=t[0],a[s][1]-=t[1];break;case"x":o[i]-=t[0];break;case"y":o[i]-=t[1]}}this.RelativeCoordinate=!0}},{key:"assembleShapes",value:function(){}},{key:"getLocalXY",value:function(e){return this.layer.getLocalXY(e)}}])&&ioe(r.prototype,n),o&&ioe(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function poe(e){"@babel/helpers - typeof";return(poe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hoe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,yoe(n.key),n)}}function yoe(e){var t=function(e,t){if("object"!=poe(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=poe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==poe(t)?t:t+""}function doe(e,t,r){return t=goe(t),function(e,t){if(t&&("object"==poe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],goe(e).constructor):t.apply(e,r))}function moe(){return(moe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=goe(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function goe(e){return(goe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function voe(e,t){return(voe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}zo.getDataValues=function(e,t,r){if(!e.attributes)return!1;for(var n=[],o=e.attributes,i=0;i<t.length;i++)for(var a in o)if(a===t[i])try{!isNaN(r)&&r>=0?n.push(parseFloat(o[a].toString()).toFixed(r)):n.push(parseFloat(o[a].toString()))}catch(e){throw new Error("not a number")}return n.length===t.length&&n};var boe=function(e){function t(e,r,n,o,i){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=doe(this,t,[e,r,n,o,i])).CLASS_NAME="SuperMap.Feature.Theme.Bar",a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&voe(e,t)}(t,foe),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=moe(goe(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"assembleShapes",value:function(){var e={showShadow:!0,shadowBlur:8,shadowColor:"rgba(100,100,100,0.8)",shadowOffsetX:2,shadowOffsetY:2},t=this.setting;if(t.barLinearGradient||(t.barLinearGradient=[["#00FF00","#00CD00"],["#00CCFF","#5E87A2"],["#00FF66","#669985"],["#CCFF00","#94A25E"],["#FF9900","#A2945E"]]),t.dataViewBoxParameter||(void 0===t.useAxis||t.useAxis?t.dataViewBoxParameter=[45,15,15,15]:t.dataViewBoxParameter=[5,5,5,5]),this.initBaseParameter()){var r=this.DVBCodomain;this.DVBUnitValue=(r[1]-r[0])/this.DVBHeight;var n=this.dataViewBox,o=this.dataValues;if(!(o.length<1)){for(var i=0,a=o.length;i<a;i++)if(o[i]<r[0]||o[i]>r[1])return;var s=this.calculateXShapeInfo();if(s){var u=s.xPositions,l=s.width;(void 0===t.useBackground||t.useBackground)&&this.shapes.push(Oc.Background(this.shapeFactory,this.chartBox,t)),(void 0===t.useAxis||t.useAxis)&&(this.shapes=this.shapes.concat(Oc.GraphAxis(this.shapeFactory,n,t,s)));for(var c=0;c<o.length;c++){var f=n[1]-(o[c]-r[0])/this.DVBUnitValue,p=[[u[c]-l/2,n[1]-1],[u[c]+l/2,n[1]-1],[u[c]+l/2,f],[u[c]-l/2,f]],h=new Nu(p);if(void 0===t.showShadow||t.showShadow){if(t.barShadowStyle){var y=t.barShadowStyle;y.shadowBlur&&(e.shadowBlur=y.shadowBlur),y.shadowColor&&(e.shadowColor=y.shadowColor),y.shadowOffsetX&&(e.shadowOffsetX=y.shadowOffsetX),y.shadowOffsetY&&(e.shadowOffsetY=y.shadowOffsetY)}h.style={},M.copyAttributesWithClip(h.style,e)}h.refDataID=this.data.id,h.dataInfo={field:this.fields[c],value:o[c]},void 0!==t.barHoverAble&&(h.hoverable=t.barHoverAble),void 0!==t.barClickAble&&(h.clickable=t.barClickAble),this.shapes.push(this.shapeFactory.createShape(h))}this.shapesConvertToRelativeCoordinate()}}}}},{key:"calculateXShapeInfo",value:function(){var e,t=this.dataViewBox,r=this.setting,n=this.dataValues.length;if(n<1)return null;var o=[],i=0,a=this.DVBWidth;if(r.xShapeBlank&&r.xShapeBlank.length&&3==r.xShapeBlank.length){var s=a-((e=r.xShapeBlank)[0]+e[2]+(n-1)*e[1]);if(s<=n)return null;i=s/n}else e=[i=a/(2*n+1),i,i];for(var u=0,l=0;l<n;l++)0==l?u=e[0]+i/2:u+=i+e[1],o.push(t[0]+u);return{xPositions:o,width:i}}},{key:"resetLinearGradient",value:function(){if(this.RelativeCoordinate)for(var e=this.shapes.length,t=this.setting.barLinearGradient,r=-1,n=0;n<e;n++){var o=this.shapes[n];if("SuperMap.LevelRenderer.Shape.SmicPolygon"===o.CLASS_NAME){var i=o.style,a=this.location[0]+i.pointList[0][0],s=this.location[0]+i.pointList[1][0];++r>=t.length&&(r%=t.length);var u=t[r][0],l=t[r][1],c=(new gi).getLinearGradient(a,0,s,0,[[0,u],[1,l]]);o.style.color=c}}}}])&&hoe(r.prototype,n),o&&hoe(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Aoe(e){"@babel/helpers - typeof";return(Aoe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function woe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Soe(n.key),n)}}function Soe(e){var t=function(e,t){if("object"!=Aoe(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Aoe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Aoe(t)?t:t+""}function Coe(e,t,r){return t=_oe(t),function(e,t){if(t&&("object"==Aoe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],_oe(e).constructor):t.apply(e,r))}function Eoe(){return(Eoe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=_oe(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function _oe(e){return(_oe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ioe(e,t){return(Ioe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Ooe=function(e){function t(e,r,n,o,i){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=Coe(this,t,[e,r,n,o,i])).CLASS_NAME="SuperMap.Feature.Theme.Bar3D",a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ioe(e,t)}(t,foe),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=Eoe(_oe(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"assembleShapes",value:function(){var e=this.setting;if(e.dataViewBoxParameter||(void 0===e.useAxis||e.useAxis?e.dataViewBoxParameter=[45,25,20,20]:e.dataViewBoxParameter=[5,5,5,5]),e.axisUseArrow=void 0===e.axisUseArrow||e.axisUseArrow,e.axisXLabelsOffset=void 0!==e.axisXLabelsOffset?e.axisXLabelsOffset:[-10,10],this.initBaseParameter()){var t=this.DVBCodomain;this.DVBUnitValue=(t[1]-t[0])/this.DVBHeight;var r=this.dataViewBox,n=this.dataValues;if(!(n.length<1)){for(var o=0,i=n.length;o<i;o++)if(n[o]<t[0]||n[o]>t[1])return;var a=this.calculateXShapeInfo();if(a){var s=a.xPositions,u=a.width;(void 0===e.useBackground||e.useBackground)&&this.shapes.push(Oc.Background(this.shapeFactory,this.chartBox,e)),(!e.axis3DParameter||isNaN(e.axis3DParameter)||e.axis3DParameter<15)&&(e.axis3DParameter=20),(void 0===e.useAxis||e.useAxis)&&(this.shapes=this.shapes.concat(Oc.GraphAxis(this.shapeFactory,r,e,a)));for(var l=e.bar3DParameter&&!isNaN(e.bar3DParameter)?e.bar3DParameter:10,c=0;c<n.length;c++){var f=r[1]-(n[c]-t[0])/this.DVBUnitValue,p=s[c]-u/2,h=s[c]+u/2,y=[[p,f],[h,f],[h-l,f+l],[p-l,f+l]],d=[[h,f],[h-l,f+l],[h-l,r[1]+l],[h,r[1]]],m=[[p-l,r[1]+l],[h-l,r[1]+l],[h-l,f+l],[p-l,f+l]];l<=0&&(m=[[p,r[1]],[h,r[1]],[h,f],[p,f]]);var g=new Nu(y),v=new Nu(d),b=new Nu(m);e.barSideStyle=e.barSideStyle?e.barSideStyle:e.barFaceStyle,e.barSideStyleByFields=e.barSideStyleByFields?e.barSideStyleByFields:e.barFaceStyleByFields,e.barSideStyleByCodomain=e.barSideStyleByCodomain?e.barSideStyleByCodomain:e.barFaceStyleByCodomain,e.barTopStyle=e.barTopStyle?e.barTopStyle:e.barFaceStyle,e.barTopStyleByFields=e.barTopStyleByFields?e.barTopStyleByFields:e.barFaceStyleByFields,e.barTopStyleByCodomain=e.barTopStyleByCodomain?e.barTopStyleByCodomain:e.barFaceStyleByCodomain,b.style=Oc.ShapeStyleTool({stroke:!0,strokeColor:"#ffffff",fillColor:"#ee9900"},e.barFaceStyle,e.barFaceStyleByFields,e.barFaceStyleByCodomain,c,n[c]),v.style=Oc.ShapeStyleTool({stroke:!0,strokeColor:"#ffffff",fillColor:"#ee9900"},e.barSideStyle,e.barSideStyleByFields,e.barSideStyleByCodomain,c,n[c]),g.style=Oc.ShapeStyleTool({stroke:!0,strokeColor:"#ffffff",fillColor:"#ee9900"},e.barTopStyle,e.barTopStyleByFields,e.barTopStyleByCodomain,c,n[c]),e.barSideHoverStyle=e.barSideHoverStyle?e.barSideHoverStyle:e.barFaceHoverStyle,e.barTopHoverStyle=e.barTopHoverStyle?e.barTopHoverStyle:e.barFaceHoverStyle,b.highlightStyle=Oc.ShapeStyleTool({stroke:!0},e.barFaceHoverStyle),v.highlightStyle=Oc.ShapeStyleTool({stroke:!0},e.barSideHoverStyle),g.highlightStyle=Oc.ShapeStyleTool({stroke:!0},e.barTopHoverStyle),g.refDataID=v.refDataID=b.refDataID=this.data.id,g.isHoverByRefDataID=v.isHoverByRefDataID=b.isHoverByRefDataID=!0,g.refDataHoverGroup=v.refDataHoverGroup=b.refDataHoverGroup=M.createUniqueID("lr_shg"),g.dataInfo=v.dataInfo=b.dataInfo={field:this.fields[c],value:n[c]},void 0!==e.barHoverAble&&(g.hoverable=v.hoverable=b.hoverable=e.barHoverAble),void 0!==e.barClickAble&&(g.clickable=v.clickable=b.clickable=e.barClickAble),this.shapes.push(this.shapeFactory.createShape(v)),this.shapes.push(this.shapeFactory.createShape(g)),this.shapes.push(this.shapeFactory.createShape(b))}this.shapesConvertToRelativeCoordinate()}}}}},{key:"calculateXShapeInfo",value:function(){var e,t=this.dataViewBox,r=this.setting,n=this.dataValues.length;if(n<1)return null;var o=[],i=0,a=this.DVBWidth;if(r.xShapeBlank&&r.xShapeBlank.length&&3==r.xShapeBlank.length){var s=a-((e=r.xShapeBlank)[0]+e[2]+(n-1)*e[1]);if(s<=n)return null;i=s/n}else e=[i=a/(2*n+1),i,i];for(var u=0,l=0;l<n;l++)0==l?u=e[0]+i/2:u+=i+e[1],o.push(t[0]+u);return{xPositions:o,width:i}}}])&&woe(r.prototype,n),o&&woe(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function xoe(e){"@babel/helpers - typeof";return(xoe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Poe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,koe(n.key),n)}}function koe(e){var t=function(e,t){if("object"!=xoe(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=xoe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==xoe(t)?t:t+""}function Toe(e,t,r){return t=Moe(t),function(e,t){if(t&&("object"==xoe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],Moe(e).constructor):t.apply(e,r))}function joe(){return(joe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=Moe(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function Moe(e){return(Moe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Boe(e,t){return(Boe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Noe=function(e){function t(e,r,n,o,i,a){var s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(s=Toe(this,t,[e,r,n,o,i,a])).setting=null,o&&o.codomain&&(s.setting=o,s.DVBCodomain=s.setting.codomain),s.CLASS_NAME="SuperMap.Feature.Theme.RankSymbol",s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Boe(e,t)}(t,foe),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;this.setting=null,(e=t,r="destroy",n=this,i=joe(Moe(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"initBaseParameter",value:function(){if(!this.setting)return!1;var e=this.setting;e.XOffset&&(this.XOffset=e.XOffset),e.YOffset&&(this.YOffset=e.YOffset),this.XOffset=e.XOffset?e.XOffset:0,this.YOffset=e.YOffset?e.YOffset:0,this.origonPoint=[],this.chartBox=[],this.dataViewBox=[],this.DVBParameter=e.dataViewBoxParameter?e.dataViewBoxParameter:[0,0,0,0],this.DVBOrigonPoint=[],this.DVBCenterPoint=[],this.origonPointOffset=[],this.resetLocation();var t=this.width,r=this.height,n=this.location;this.origonPoint=[n[0]-t/2,n[1]-r/2];var o=this.origonPoint;this.chartBox=[o[0],o[1]+r,o[0]+t,o[1]];var i=this.chartBox,a=this.DVBParameter;this.dataViewBox=[i[0]+a[0],i[1]-a[1],i[2]-a[2],i[3]+a[3]];var s=this.dataViewBox;return!(s[0]>=s[2]||s[1]<=s[3])&&(this.DVBOrigonPoint=[s[0],s[3]],this.DVBWidth=Math.abs(s[2]-s[0]),this.DVBHeight=Math.abs(s[1]-s[3]),this.DVBCenterPoint=[this.DVBOrigonPoint[0]+this.DVBWidth/2,this.DVBOrigonPoint[1]+this.DVBHeight/2],this.origonPointOffset=[this.DVBOrigonPoint[0]-o[0],this.DVBOrigonPoint[1]-o[1]],!0)}}])&&Poe(r.prototype,n),o&&Poe(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Roe(e){"@babel/helpers - typeof";return(Roe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Loe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Doe(n.key),n)}}function Doe(e){var t=function(e,t){if("object"!=Roe(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Roe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Roe(t)?t:t+""}function Foe(e,t,r){return t=Goe(t),function(e,t){if(t&&("object"==Roe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],Goe(e).constructor):t.apply(e,r))}function Qoe(){return(Qoe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=Goe(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function Goe(e){return(Goe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Uoe(e,t){return(Uoe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var zoe=function(e){function t(e,r,n,o,i){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=Foe(this,t,[e,r,n,o,i])).CLASS_NAME="SuperMap.Feature.Theme.Circle",a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Uoe(e,t)}(t,Noe),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=Qoe(Goe(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"assembleShapes",value:function(){if(!this.setting)return!1;var e=this.setting;if(!e.codomain)return!1;var t=void 0===e.decimalNumber||isNaN(e.decimalNumber)?-1:e.decimalNumber,r=zo.getDataValues(this.data,this.fields,t);this.dataValues=r||[];var n=this.dataValues;e.maxR||(e.maxR=100),e.minR||(e.minR=0);var o=this.DVBCodomain;o&&o[1]-o[0]>0?this.DVBUnitValue=e.maxR/(o[1]-o[0]):this.DVBUnitValue=e.maxR;var i=this.DVBUnitValue,a=n[0]*i+e.minR;if(this.width=2*a,this.height=2*a,this.initBaseParameter()&&(!o||!(n[0]<o[0]||n[0]>o[1]))){var s=this.DVBCenterPoint,u=new wl(s[0],s[1],a);u.style=Oc.ShapeStyleTool(null,e.circleStyle,null,null,0),void 0!==e.fillColor?u.style.fillColor=e.fillColor:u.style.fillColor="#ff9277",u.highlightStyle=Oc.ShapeStyleTool(null,e.circleHoverStyle),void 0!==e.circleHoverAble&&(u.hoverable=e.circleHoverAble),void 0!==e.circleClickAble&&(u.clickable=e.circleClickAble),u.refDataID=this.data.id,u.dataInfo={field:this.fields[0],r:a,value:n[0]},this.shapes.push(this.shapeFactory.createShape(u)),this.shapesConvertToRelativeCoordinate()}}}])&&Loe(r.prototype,n),o&&Loe(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Hoe(e){"@babel/helpers - typeof";return(Hoe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qoe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Voe(n.key),n)}}function Voe(e){var t=function(e,t){if("object"!=Hoe(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Hoe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Hoe(t)?t:t+""}function Koe(e,t,r){return t=Joe(t),function(e,t){if(t&&("object"==Hoe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],Joe(e).constructor):t.apply(e,r))}function Yoe(){return(Yoe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=Joe(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function Joe(e){return(Joe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Woe(e,t){return(Woe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Xoe=function(e){function t(e,r,n,o,i,a){var s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(s=Koe(this,t,[e,r,n,o,i,a])).CLASS_NAME="SuperMap.Feature.Theme.Line",s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Woe(e,t)}(t,foe),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=Yoe(Joe(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"assembleShapes",value:function(){var e=this.setting;if(e.dataViewBoxParameter||(void 0===e.useAxis||e.useAxis?e.dataViewBoxParameter=[45,15,15,15]:e.dataViewBoxParameter=[5,5,5,5]),this.initBaseParameter()){var t=this.dataViewBox,r=this.DVBCodomain;this.DVBUnitValue=(r[1]-r[0])/this.DVBHeight;var n=this.DVBUnitValue,o=this.dataValues;if(!(o.length<1)){var i=this.calculateXShapeInfo();if(i){var a,s,u=i.xPositions;(void 0===e.useBackground||e.useBackground)&&this.shapes.push(Oc.Background(this.shapeFactory,this.chartBox,e)),this.shapes=this.shapes.concat(Oc.GraphAxis(this.shapeFactory,t,e,i));for(var l=[],c=[],f=0,p=o.length;f<p;f++){if(o[f]<r[0]||o[f]>r[1])return null;a=u[f],s=t[1]-(o[f]-r[0])/n;var h=new bu(a,s);h.style=Oc.ShapeStyleTool({fillColor:"#ee9900"},e.pointStyle,e.pointStyleByFields,e.pointStyleByCodomain,f,o[f]),h.highlightStyle=Oc.ShapeStyleTool(null,e.pointHoverStyle),void 0!==e.pointHoverAble&&(h.hoverable=e.pointHoverAble),void 0!==e.pointClickAble&&(h.clickable=e.pointClickAble),h.refDataID=this.data.id,h.dataInfo={field:this.fields[f],value:o[f]},c.push(this.shapeFactory.createShape(h));var y=[a,s];l.push(y)}var d=new Ou(l);d.style=Oc.ShapeStyleTool({strokeColor:"#ee9900"},e.lineStyle),d.clickable=!1,d.hoverable=!1;var m=this.shapeFactory.createShape(d);this.shapes.push(m),this.shapes=this.shapes.concat(c),this.shapesConvertToRelativeCoordinate()}}}}},{key:"calculateXShapeInfo",value:function(){var e,t=this.dataViewBox,r=this.setting,n=this.dataValues.length;if(n<1)return null;var o=[],i=this.DVBWidth,a=0;if(r.xShapeBlank&&r.xShapeBlank.length&&2==r.xShapeBlank.length){var s=i-((e=r.xShapeBlank)[0]+e[1]);if(s<=n)return null;a=s/(n-1)}else e=[a=i/(n+1),a,a];for(var u=0,l=0;l<n;l++)0==l?u=e[0]:u+=a,o.push(t[0]+u);return{xPositions:o,width:0}}}])&&qoe(r.prototype,n),o&&qoe(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Zoe(e){"@babel/helpers - typeof";return(Zoe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $oe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,eie(n.key),n)}}function eie(e){var t=function(e,t){if("object"!=Zoe(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Zoe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Zoe(t)?t:t+""}function tie(e,t,r){return t=nie(t),function(e,t){if(t&&("object"==Zoe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],nie(e).constructor):t.apply(e,r))}function rie(){return(rie="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=nie(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function nie(e){return(nie=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oie(e,t){return(oie=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var iie=function(e){function t(e,r,n,o,i){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=tie(this,t,[e,r,n,o,i])).CLASS_NAME="SuperMap.Feature.Theme.Pie",a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oie(e,t)}(t,foe),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=rie(nie(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"assembleShapes",value:function(){var e=this.setting,t=[{fillColor:"#ff9277"},{fillColor:"#dddd00"},{fillColor:"#ffc877"},{fillColor:"#bbe3ff"},{fillColor:"#d5ffbb"},{fillColor:"#bbbbff"},{fillColor:"#ddb000"},{fillColor:"#b0dd00"},{fillColor:"#e2bbff"},{fillColor:"#ffbbe3"},{fillColor:"#ff7777"},{fillColor:"#ff9900"},{fillColor:"#83dd00"},{fillColor:"#77e3ff"},{fillColor:"#778fff"},{fillColor:"#c877ff"},{fillColor:"#ff77ab"},{fillColor:"#ff6600"},{fillColor:"#aa8800"},{fillColor:"#77c7ff"},{fillColor:"#ad77ff"},{fillColor:"#ff77ff"},{fillColor:"#dd0083"},{fillColor:"#777700"},{fillColor:"#00aa00"},{fillColor:"#0088aa"},{fillColor:"#8400dd"},{fillColor:"#aa0088"},{fillColor:"#dd0000"},{fillColor:"#772e00"}];if(this.initBaseParameter()){e.useBackground&&this.shapes.push(Oc.Background(this.shapeFactory,this.chartBox,e));var r=this.dataValues;if(!(r.length<1)){for(var n=this.DVBCodomain,o=0;o<r.length;o++)if(r[o]<n[0]||r[o]>n[1])return;for(var i=0,a=0;a<r.length;a++)i+=Math.abs(r[a]);this.DVBUnitValue=360/i;for(var s=this.DVBUnitValue,u=this.DVBCenterPoint,l=0,c=0,f=l,p=this.DVBHeight<this.DVBWidth?this.DVBHeight/2:this.DVBWidth/2,h=0;h<r.length;h++){var y=Math.abs(r[h]);(c=0===h?l+y*s:h===y.length-1?f:l+y*s)-l>=360&&(c=359.9999999);var d=new Xu(u[0],u[1],p,l,c);if(void 0===e.sectorStyleByFields){var m=h%t.length;d.style=Oc.ShapeStyleTool(null,e.sectorStyle,t,null,m)}else d.style=Oc.ShapeStyleTool(null,e.sectorStyle,e.sectorStyleByFields,e.sectorStyleByCodomain,h,r[h]);d.highlightStyle=Oc.ShapeStyleTool(null,e.sectorHoverStyle),void 0!==e.sectorHoverAble&&(d.hoverable=e.sectorHoverAble),void 0!==e.sectorClickAble&&(d.clickable=e.sectorClickAble),d.refDataID=this.data.id,d.dataInfo={field:this.fields[h],value:r[h]},this.shapes.push(this.shapeFactory.createShape(d)),l=c}this.shapesConvertToRelativeCoordinate()}}}}])&&$oe(r.prototype,n),o&&$oe(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function aie(e){"@babel/helpers - typeof";return(aie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sie(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,uie(n.key),n)}}function uie(e){var t=function(e,t){if("object"!=aie(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=aie(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==aie(t)?t:t+""}function lie(e,t,r){return t=fie(t),function(e,t){if(t&&("object"==aie(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],fie(e).constructor):t.apply(e,r))}function cie(){return(cie="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=fie(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function fie(e){return(fie=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pie(e,t){return(pie=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var hie=function(e){function t(e,r,n,o,i,a){var s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(s=lie(this,t,[e,r,n,o,i,a])).CLASS_NAME="SuperMap.Feature.Theme.Point",s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pie(e,t)}(t,foe),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=cie(fie(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"assembleShapes",value:function(){var e=this.setting;if(e.dataViewBoxParameter||(void 0===e.useAxis||e.useAxis?e.dataViewBoxParameter=[45,15,15,15]:e.dataViewBoxParameter=[5,5,5,5]),this.initBaseParameter()){var t=this.dataViewBox,r=this.DVBCodomain;this.DVBUnitValue=(r[1]-r[0])/this.DVBHeight;var n=this.DVBUnitValue,o=this.dataValues,i=this.calculateXShapeInfo();if(i){var a,s,u=i.xPositions;(void 0===e.useBackground||e.useBackground)&&this.shapes.push(Oc.Background(this.shapeFactory,this.chartBox,e)),this.shapes=this.shapes.concat(Oc.GraphAxis(this.shapeFactory,t,e,i));for(var l=0,c=o.length;l<c;l++){if(o[l]<r[0]||o[l]>r[1])return null;a=u[l],s=t[1]-(o[l]-r[0])/n;var f=new bu(a,s);f.style=Oc.ShapeStyleTool({fillColor:"#ee9900"},e.pointStyle,e.pointStyleByFields,e.pointStyleByCodomain,l,o[l]),f.highlightStyle=Oc.ShapeStyleTool(null,e.pointHoverStyle),void 0!==e.pointHoverAble&&(f.hoverable=e.pointHoverAble),void 0!==e.pointClickAble&&(f.clickable=e.pointClickAble),f.refDataID=this.data.id,f.dataInfo={field:this.fields[l],value:o[l]},this.shapes.push(this.shapeFactory.createShape(f))}this.shapesConvertToRelativeCoordinate()}}}},{key:"calculateXShapeInfo",value:function(){var e,t=this.dataViewBox,r=this.setting,n=this.dataValues.length;if(n<1)return null;var o=[],i=this.DVBWidth,a=0;if(r.xShapeBlank&&r.xShapeBlank.length&&2==r.xShapeBlank.length){var s=i-((e=r.xShapeBlank)[0]+e[1]);if(s<=n)return null;a=s/(n-1)}else e=[a=i/(n+1),a,a];for(var u=0,l=0;l<n;l++)0==l?u=e[0]:u+=a,o.push(t[0]+u);return{xPositions:o,width:0}}}])&&sie(r.prototype,n),o&&sie(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function yie(e){"@babel/helpers - typeof";return(yie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function die(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,mie(n.key),n)}}function mie(e){var t=function(e,t){if("object"!=yie(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=yie(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==yie(t)?t:t+""}function gie(e,t,r){return t=bie(t),function(e,t){if(t&&("object"==yie(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],bie(e).constructor):t.apply(e,r))}function vie(){return(vie="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=bie(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function bie(e){return(bie=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Aie(e,t){return(Aie=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var wie=function(e){function t(e,r,n,o,i){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=gie(this,t,[e,r,n,o,i])).CLASS_NAME="SuperMap.Feature.Theme.Ring",a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Aie(e,t)}(t,foe),r=t,(n=[{key:"destroy",value:function(){var e,r,n,o,i;(e=t,r="destroy",n=this,i=vie(bie(1&(o=3)?e.prototype:e),r,n),2&o&&"function"==typeof i?function(e){return i.apply(n,e)}:i)([])}},{key:"assembleShapes",value:function(){if(this.initBaseParameter()){var e=[{fillColor:"#ff9277"},{fillColor:"#dddd00"},{fillColor:"#ffc877"},{fillColor:"#bbe3ff"},{fillColor:"#d5ffbb"},{fillColor:"#bbbbff"},{fillColor:"#ddb000"},{fillColor:"#b0dd00"},{fillColor:"#e2bbff"},{fillColor:"#ffbbe3"},{fillColor:"#ff7777"},{fillColor:"#ff9900"},{fillColor:"#83dd00"},{fillColor:"#77e3ff"},{fillColor:"#778fff"},{fillColor:"#c877ff"},{fillColor:"#ff77ab"},{fillColor:"#ff6600"},{fillColor:"#aa8800"},{fillColor:"#77c7ff"},{fillColor:"#ad77ff"},{fillColor:"#ff77ff"},{fillColor:"#dd0083"},{fillColor:"#777700"},{fillColor:"#00aa00"},{fillColor:"#0088aa"},{fillColor:"#8400dd"},{fillColor:"#aa0088"},{fillColor:"#dd0000"},{fillColor:"#772e00"}],t=this.setting;t.useBackground&&this.shapes.push(Oc.Background(this.shapeFactory,this.chartBox,t));var r=this.dataValues;if(!(r.length<1)){for(var n=this.DVBCodomain,o=0;o<r.length;o++)if(r[o]<n[0]||r[o]>n[1])return;for(var i=0,a=0;a<r.length;a++)i+=Math.abs(r[a]);this.DVBUnitValue=360/i;for(var s=this.DVBUnitValue,u=this.DVBCenterPoint,l=0,c=0,f=l,p=this.DVBHeight<this.DVBWidth?this.DVBHeight/2:this.DVBWidth/2,h=t.innerRingRadius>=0&&t.innerRingRadius<p,y=void 0!==t.innerRingRadius&&!isNaN(t.innerRingRadius)&&h?t.innerRingRadius:0,d=0;d<r.length;d++){var m=Math.abs(r[d]);c=0===d?l+m*s:d===m.length-1?f:l+m*s;var g=new Xu(u[0],u[1],p,l,c,y);if(void 0===t.sectorStyleByFields){var v=d%e.length;g.style=Oc.ShapeStyleTool(null,t.sectorStyle,e,null,v)}else g.style=Oc.ShapeStyleTool(null,t.sectorStyle,t.sectorStyleByFields,t.sectorStyleByCodomain,d,r[d]);g.highlightStyle=Oc.ShapeStyleTool(null,t.sectorHoverStyle),void 0!==t.sectorHoverAble&&(g.hoverable=t.sectorHoverAble),void 0!==t.sectorClickAble&&(g.clickable=t.sectorClickAble),g.refDataID=this.data.id,g.dataInfo={field:this.fields[d],value:r[d]},this.shapes.push(this.shapeFactory.createShape(g)),l=c}this.shapesConvertToRelativeCoordinate()}}}}])&&die(r.prototype,n),o&&die(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();var Sie="EXCEL",Cie="CSV",Eie="GEOJSON",_ie="JSON";function Iie(e){"@babel/helpers - typeof";return(Iie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oie(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,xie(n.key),n)}}function xie(e){var t=function(e,t){if("object"!=Iie(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Iie(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Iie(t)?t:t+""}var Pie=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._initView()},(t=[{key:"_initView",value:function(){var e=document.createElement("div");e.hidden=!0,e.setAttribute("class","component-messageboxcontainer component-border-bottom-orange");var t=document.createElement("div");t.setAttribute("class","icon"),this.icon=document.createElement("span"),this.icon.setAttribute("class","supermapol-icons-message-warning"),t.appendChild(this.icon),e.appendChild(t);var r=document.createElement("div");r.setAttribute("class","component-messagebox"),r.innerHTML="",e.appendChild(r),this.messageBox=r;var n=document.createElement("div");n.setAttribute("class","component-messagebox__cancelbtncontainer");var o=document.createElement("button");o.setAttribute("class","component-messagebox__cancelBtn"),o.innerHTML="x",o.onclick=this.closeView.bind(this),n.appendChild(o),e.appendChild(n),this.messageBoxContainer=e,document.body.appendChild(this.messageBoxContainer)}},{key:"closeView",value:function(){this.messageBoxContainer.hidden=!0}},{key:"showView",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warring";"success"===t?(this.icon.setAttribute("class","supermapol-icons-message-success"),this.messageBoxContainer.setAttribute("class","component-messageboxcontainer component-border-bottom-green")):"failure"===t?(this.icon.setAttribute("class","supermapol-icons-message-failure"),this.messageBoxContainer.setAttribute("class","component-messageboxcontainer component-border-bottom-red")):"warring"===t&&(this.icon.setAttribute("class","supermapol-icons-message-warning"),this.messageBoxContainer.setAttribute("class","component-messageboxcontainer component-border-bottom-orange")),this.messageBox.innerHTML=e,this.messageBoxContainer.hidden=!1}}])&&Oie(e.prototype,t),r&&Oie(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}(),kie=function(){try{return echarts}catch(e){return{}}}(),Tie={"en-US":{title_dataFlowService:"Data Flow Service",title_distributedAnalysis:"Distributed Analysis",title_clientComputing:"Client Computing",title_dataServiceQuery:"Data Service Query",title_searchCity:"Search city",title_searchLayer:" Search layer",text_input_value_inputDataFlowUrl:"Please enter the data stream service address such as: ws://{serviceRoot}/{dataFlowName}/dataflow/subscribe",text_displayFeaturesInfo:"Display feature information",text_subscribe:"subscribe",text_cancelSubscribe:"unsubscribe",text_densityAnalysis:"Density Analysis",text_CalculateTheValuePerUnitArea:"Calculate the value per unit area within the neighborhood shape",text_option_selectDataset:"Please select a dataset",text_label_dataset:"Dataset",text_option_simplePointDensityAnalysis:"Simple point density analysis",text_option_nuclearDensityAnalysis:"Nuclear density analysis",text_label_analyticalMethod:"Analytical method",text_option_quadrilateral:"Quadrilateral",text_option_hexagon:"hexagon",text_label_meshType:"Mesh type",text_option_notSet:"Not set",text_label_weightField:"Weight field",text_label_gridSizeInMeters:"Grid size",text_label_searchRadius:"Search radius",text_label_queryRange:"Scope of analysis",text_label_areaUnit:"Area unit",text_option_equidistantSegmentation:"Equidistant segmentation",text_option_logarithm:"Logarithm",text_option_equalCountingSegment:"Equal counting segment",text_option_squareRootSegmentation:"Square root segmentation",text_label_thematicMapSegmentationMode:"Thematic map segmentation mode",text_label_thematicMapSegmentationParameters:"Thematic map segmentation parameters",text_option_greenOrangePurpleGradient:"Green orange purple gradient",text_option_greenOrangeRedGradient:"Green orange red gradient",text_option_rainbowGradient:"Rainbow gradient",text_option_spectralGradient:"Spectral gradient",text_option_terrainGradient:"Terrain gradient",text_label_thematicMapColorGradientMode:"Thematic map color gradient mode",text_label_resultLayerName:"Result layer name",text_chooseFile:"Open File",text_isoline:"Isoline",text_extractDiscreteValue:"Extract discrete value generation curve",text_buffer:"Buffer",text_specifyTheDistance:"Specify the distance to create the surrounding area",text_label_analysisLayer:"Analysis layer",text_label_extractField:"Extract field",text_label_extractedValue:"Extracted value",text_label_distanceAttenuation:"Distance attenuation",text_label_gridSize:"gridSize",text_label_bufferRadius:"Buffer radius",text_label_defaultkilometers:"Default 10 kilometers",text_label_kilometer:"kilometer",text_label_unit:"unit",text_retainOriginal:"Retain original object field",text_mergeBuffer:"Merge buffer",text_label_color:"Color",text_label_buffer:"[Buffer]",text_label_isolines:"[Isolines]",text_label_queryRangeTips:"The default is the full range of input data. Example: -74.050, 40.650, -73.850, 40.850",text_label_queryModel:"Query mode",text_label_IDArrayOfFeatures:"ID array of features",text_label_maxFeatures:"The maximum number of features that can be returned",text_label_bufferDistance:"Buffer distance",text_label_queryRange1:"Query range",text_label_spatialQueryMode:"Spatial query mode",text_label_featureFilter:"Feature filter",text_label_geometricObject:"Geometric object",text_label_queryMode:"Query mode",text_label_searchTips:"Search for city locations or layer features",text_label_chooseSearchLayers:"Select a query layer",text_loadSearchCriteria:"Load search criteria",text_saveSearchCriteria:"Save search criteria",btn_analyze:"Analyze",btn_analyzing:"Analyzing",btn_emptyTheAnalysisLayer:"Empty the analysis layer",btn_cancelAnalysis:"Cancel",btn_query:"Query",btn_querying:"Querying",btn_emptyTheRresultLayer:"Clear all result layers","msg_dataReturnedIsEmpty.":"The request is successful and the data returned by the query is empty.",msg_dataFlowServiceHasBeenSubscribed:"The data stream service has been subscribed to.",msg_inputDataFlowUrlFirst:"Please enter the data stream service address first.",msg_datasetOrMethodUnsupport:"This dataset does not support this analysis type. Please reselect the dataset.",msg_selectDataset:"Please select a data set!",msg_setTheWeightField:"Please set the weight field!",msg_theFieldNotSupportAnalysis:"The field you currently select does not support analysis!",msg_resultIsEmpty:"The result of the analysis is empty!",msg_openFileFail:"Failed to open file!",msg_fileTypeUnsupported:"File format is not supported!",msg_fileSizeExceeded:"File size exceeded! The file size should not exceed 10M!",msg_dataInWrongGeoJSONFormat:"Wrong data format! Non standard GEOJSON format data!",msg_dataInWrongFormat:"Wrong data format! Non standard EXCEL, CSV or GEOJSON format data!",msg_searchKeywords:"Search keywords cannot be empty. Please enter your search criteria.",msg_searchGeocodeField:"Did not match the address matching service data!",msg_cityGeocodeField:"The address matching service of the current city is not configured.",msg_getFeatureField:"No related vector features found!",msg_dataflowservicesubscribed:"The data stream service has been subscribed to.",msg_subscribesucceeded:"The data stream service subscription was successful.",msg_crsunsupport:"Does not support the coordinate system of the current map",msg_tilematrixsetunsupport:"Incoming TileMatrixSet is not supported",msg_jsonResolveFiled:"JSON format parsing failureï¼",msg_requestContentFiled:"Failed to request data through iportal!",msg_getdatafailed:"Failed to get data!"},"zh-CN":{title_dataFlowService:"æ°æ®æµæå¡",title_distributedAnalysis:"åå¸å¼åæ",title_clientComputing:"å®¢æ·ç«¯è®¡ç®",title_dataServiceQuery:"æ°æ®æå¡æ¥è¯¢",title_searchCity:"æç´¢åå¸",title_searchLayer:"æç´¢å¾å±",text_input_value_inputDataFlowUrl:"è¯·è¾å¥æ°æ®æµæå¡å°åå¦:ws://{serviceRoot}/{dataFlowName}/dataflow/subscribe",text_displayFeaturesInfo:"æ¾ç¤ºè¦ç´ ä¿¡æ¯",text_subscribe:"è®¢é",text_cancelSubscribe:"åæ¶è®¢é",text_densityAnalysis:"å¯åº¦åæ",text_CalculateTheValuePerUnitArea:"è®¡ç®ç¹æå®é»åå½¢ç¶åçæ¯åä½é¢ç§¯éå¼",text_option_selectDataset:"è¯·éæ©æ°æ®é",text_label_dataset:"æ°æ®é",text_option_simplePointDensityAnalysis:"ç®åç¹å¯åº¦åæ",text_option_nuclearDensityAnalysis:"æ ¸å¯åº¦åæ",text_label_analyticalMethod:"åææ¹æ³",text_option_quadrilateral:"åè¾¹å½¢",text_option_hexagon:"å­è¾¹å½¢",text_label_meshType:"ç½æ ¼é¢ç±»å",text_option_notSet:"æªè®¾ç½®",text_label_weightField:"æéå­æ®µ",text_label_gridSizeInMeters:"ç½æ ¼å¤§å°",text_label_searchRadius:"æç´¢åå¾",text_label_queryRange:"åæèå´",text_label_areaUnit:"é¢ç§¯åä½",text_option_equidistantSegmentation:"ç­è·ç¦»åæ®µ",text_option_logarithm:"å¯¹æ°",text_option_equalCountingSegment:"ç­è®¡æ°åæ®µ",text_option_squareRootSegmentation:"å¹³æ¹æ ¹åæ®µ",text_label_thematicMapSegmentationMode:"ä¸é¢å¾åæ®µæ¨¡å¼",text_label_thematicMapSegmentationParameters:"ä¸é¢å¾åæ®µåæ°",text_option_greenOrangePurpleGradient:"ç»¿æ©ç´«æ¸å",text_option_greenOrangeRedGradient:"ç»¿æ©çº¢æ¸å",text_option_rainbowGradient:"å½©è¹æ¸å",text_option_spectralGradient:"åè°±æ¸å",text_option_terrainGradient:"å°å½¢æ¸å",text_label_thematicMapColorGradientMode:"ä¸é¢å¾é¢è²æ¸åæ¨¡å¼",text_label_resultLayerName:"ç»æå¾å±åç§°",text_chooseFile:"éæ©æä»¶",text_isoline:"ç­å¼çº¿",text_extractDiscreteValue:"æåç¦»æ£å¼çææ²çº¿",text_buffer:"ç¼å²åº",text_specifyTheDistance:"æå®è·ç¦»åå»ºå¨è¾¹åºå",text_label_analysisLayer:"åæå¾å±",text_label_extractField:"æåå­æ®µ",text_label_extractedValue:"æåå¼",text_label_distanceAttenuation:"è·ç¦»è¡°å",text_label_gridSize:"æ æ ¼å¤§å°",text_label_bufferRadius:"ç¼å²åå¾",text_label_defaultkilometers:"é»è®¤10åç±³",text_option_kilometer:"åç±³",text_label_unit:"åä½",text_retainOriginal:"ä¿çåå¯¹è±¡å­æ®µå±æ§",text_mergeBuffer:"åå¹¶ç¼å²åº",text_label_color:"é¢è²",text_label_buffer:"[ç¼å²åº]",text_label_isolines:"[ç­å¼çº¿]",text_label_queryRangeTips:"é»è®¤ä¸ºè¾å¥æ°æ®çå¨å¹èå´ãèä¾ï¼-74.050,40.650,-73.850,40.850",text_label_IDArrayOfFeatures:"è¦ç´  ID æ°ç»",text_label_maxFeatures:"æå¤å¯è¿åçè¦ç´ æ°é",text_label_bufferDistance:"ç¼å²åºè·ç¦»",text_label_queryRange1:"æ¥è¯¢èå´",text_label_spatialQueryMode:"ç©ºé´æ¥è¯¢æ¨¡å¼",text_label_featureFilter:"è¦ç´ è¿æ»¤å¨",text_label_geometricObject:"å ä½å¯¹è±¡",text_label_queryMode:"æ¥è¯¢æ¨¡å¼",text_label_searchTips:"æç´¢åå¸å°ç¹æå¾å±è¦ç´ ",text_label_chooseSearchLayers:"éæ©æ¥è¯¢å¾å±",text_loadSearchCriteria:"å è½½æç´¢æ¡ä»¶",text_saveSearchCriteria:"ä¿å­æç´¢æ¡ä»¶",btn_analyze:"åæ",btn_analyzing:"åæä¸­",btn_emptyTheAnalysisLayer:"æ¸ç©ºåæå¾å±",btn_cancelAnalysis:"åæ¶",btn_query:"æ¥è¯¢",btn_querying:"æ¥è¯¢ä¸­",btn_emptyTheRresultLayer:"æ¸é¤ææç»æå¾å±",msg_dataFlowServiceHasBeenSubscribed:"å·²è®¢éè¯¥æ°æ®æµæå¡ã",msg_inputDataFlowUrlFirst:"è¯·åè¾å¥æ°æ®æµæå¡å°åã",msg_datasetOrMethodUnsupport:"è¯¥æ°æ®éä¸æ¯ææ¬åæç±»åï¼è¯·éæ°éæ©æ°æ®é",msg_selectDataset:"è¯·éæ©æ°æ®éï¼",msg_setTheWeightField:"è¯·è®¾ç½®æéå­æ®µï¼",msg_theFieldNotSupportAnalysis:"æ¨å½åéæ©çå­æ®µä¸æ¯æåæï¼",msg_resultIsEmpty:"åæçç»æä¸ºç©ºï¼",msg_dataReturnedIsEmpty:"è¯·æ±æåï¼æ¥è¯¢è¿åçæ°æ®ä¸ºç©ºã",msg_openFileFail:"æå¼æä»¶å¤±è´¥ï¼",msg_fileTypeUnsupported:"ä¸æ¯æè¯¥æä»¶æ ¼å¼ï¼",msg_fileSizeExceeded:"æä»¶å¤§å°è¶éï¼æä»¶å¤§å°ä¸å¾è¶è¿ 10Mï¼",msg_dataInWrongGeoJSONFormat:"æ°æ®æ ¼å¼éè¯¯ï¼éæ åç GEOJSON æ ¼å¼æ°æ®ï¼",msg_dataInWrongFormat:"æ°æ®æ ¼å¼éè¯¯ï¼éæ åç EXCEL, CSV æ GEOJSON æ ¼å¼æ°æ®ï¼",msg_searchKeywords:"æç´¢å³é®å­ä¸è½ä¸ºç©ºï¼è¯·è¾å¥æç´¢æ¡ä»¶ã",msg_searchGeocodeField:"æªå¹éå°å°åå¹éæå¡æ°æ®ï¼",msg_cityGeocodeField:"æªéç½®å½ååå¸çå°åå¹éæå¡ã",msg_getFeatureField:"æªæ¥æ¾å°ç¸å³ç¢éè¦ç´ ï¼",msg_dataflowservicesubscribed:"å·²è®¢éè¯¥æ°æ®æµæå¡ã",msg_subscribesucceeded:"æ°æ®æµæå¡è®¢éæåã",msg_crsunsupport:"ä¸æ¯æå½åå°å¾çåæ ç³»",msg_tilematrixsetunsupport:"ä¸æ¯æä¼ å¥çTileMatrixSet",msg_jsonResolveFiled:"jsonæ ¼å¼è§£æå¤±è´¥ï¼",msg_requestContentFiled:"éè¿iportalè¯·æ±æ°æ®å¤±è´¥ï¼",msg_getdatafailed:"è·åæ°æ®å¤±è´¥ï¼"},code:null,defaultCode:"en-US",getCode:function(){return Tie.code||Tie.setCode(),Tie.code},setCode:function(){var e=this.getLanguageFromCookie();e||(e=Tie.defaultCode,e="Netscape"===navigator.appName?navigator.language:navigator.browserLanguage),0===e.indexOf("zh")&&(e="zh-CN"),0===e.indexOf("en")&&(e="en-US"),Tie.code=e},getLanguageFromCookie:function(){for(var e=document.cookie.split(";"),t=0;t<e.length;t++){for(var r=e[t];" "===r.charAt(0);)r=r.substring(1);if(-1!==r.indexOf("language="))return r.substring("language=".length,r.length)}return""},i18n:function(e){var t=Tie[Tie.getCode()],r=t&&t[e];return r||(r=e),r}},jie=function(){try{return XLSX}catch(e){return{}}}(),Mie={rABS:"undefined"!=typeof FileReader&&FileReader.prototype&&FileReader.prototype.readAsBinaryString,rABF:"undefined"!=typeof FileReader&&FileReader.prototype&&FileReader.prototype.readAsArrayBuffer,rAT:"undefined"!=typeof FileReader&&FileReader.prototype&&FileReader.prototype.readAsText,readFile:function(e,t,r,n,o){_ie===e||Eie===e?this.readTextFile(t,r,n,o):Sie!==e&&Cie!==e||this.readXLSXFile(t,r,n,o)},readTextFile:function(e,t,r,n){var o=new FileReader;o.onloadend=function(e){t&&t.call(n,e.target.result)},o.onerror=function(e){r&&r.call(n,e)},this.rAT?o.readAsText(e.file,"utf-8"):o.readAsBinaryString(e.file)},readXLSXFile:function(e,t,r,n){var o=new FileReader;o.onloadend=function(e){var o=new Uint8Array(e.target.result),i=jie.read(o,{type:"array"});try{if(i&&i.SheetNames&&i.SheetNames.length>0){var a=i.SheetNames[0],s=jie.utils.sheet_to_csv(i.Sheets[a]);t&&t.call(n,s)}}catch(e){r&&r.call(n,e)}},o.onerror=function(e){r&&r.call(n,e)},this.rABF&&o.readAsArrayBuffer(e.file)},processDataToGeoJson:function(e,t,r,n,o){var i=null;if("EXCEL"===e||"CSV"===e)i=this.processExcelDataToGeoJson(t),r&&r.call(o,i);else if("JSON"===e||"GEOJSON"===e){var a=t;"string"==typeof a&&(a=JSON.parse(a)),"ISERVER"===a.type?i=a.data.recordsets[0].features:"FeatureCollection"===a.type?i=a:n&&n.call(o,Tie.i18n("msg_dataInWrongGeoJSONFormat")),r&&r.call(o,i)}else n&&n.call(o,Tie.i18n("msg_dataInWrongFormat"))},processExcelDataToGeoJson:function(e){for(var t=this.string2Csv(e),r=t.colTitles,n=-1,o=-1,i=0,a=r.length;i<a;i++)this.isXField(r[i])&&(n=i),this.isYField(r[i])&&(o=i);for(var s=[],u=0,l=t.rows.length;u<l;u++){var c=t.rows[u],f=Number(c[n]),p=Number(c[o]),h={};for(var y in t.colTitles){h[t.colTitles[y]]=t.rows[u][y]}var d={type:"Feature",geometry:{type:"Point",coordinates:[f,p]},properties:h};s.push(d)}return s},isXField:function(e){var t=e.toLowerCase();return"x"===t||"smx"===t||"jd"===t||"ç»åº¦"===t||"ä¸ç»"===t||"longitude"===t||"lot"===t||"lon"===t||"lng"===t||"xåæ "===t},isYField:function(e){var t=e.toLowerCase();return"y"===t||"smy"===t||"wd"===t||"çº¬åº¦"===t||"åçº¬"===t||"latitude"===t||"lat"===t||"yåæ "===t},string2Csv:function(e,t){var r=e.split("\n"),n={};n.colTitles=t?[]:r[0].split(","),n.rows=[];for(var o=t?0:1;o<r.length;o++)r[o]&&n.rows.push(r[o].split(","));return n}};function Bie(e){"@babel/helpers - typeof";return(Bie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nie(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Rie(n.key),n)}}function Rie(e){var t=function(e,t){if("object"!=Bie(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Bie(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Bie(t)?t:t+""}var Lie=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasets=t,this.EVENT_TYPES=["getdatafailed"],this.events=new ja(this,null,this.EVENT_TYPES)},(t=[{key:"getDatasetInfo",value:function(e){var t=this.datasets.url,r=this;z.get(t).then(function(e){return e.json()}).then(function(t){if(t.datasetInfo){var n=t.datasetInfo;r.datasetsInfo={dataSourceName:n.dataSourceName,datasetName:n.name,mapName:t.name},e({result:r.datasetsInfo})}}).catch(function(e){console.log(e),r._fireFailedEvent(e)})}},{key:"getDataFeatures",value:function(e,t){var r,n,o=e.result,i={name:o.datasetName+"@"+o.dataSourceName};Object.assign(i,this.datasets.queryInfo),r=new Fj(i),n=new hM({queryParameter:r,datasetNames:[o.dataSourceName+":"+o.datasetName],fromIndex:0,toIndex:1e5}),new wM(o.dataUrl).processAsync(n,t)}},{key:"getLayerFeatures",value:function(e,t){var r,n,o=e.result,i={name:o.mapName};Object.assign(i,this.datasets.queryInfo),r=new Fj(i),n=new oW({queryParams:[r],expectCount:1e5}),new pW(o.dataUrl).processAsync(n,t)}},{key:"getDataInfoByIptl",value:function(e){this.getServiceInfo(this.datasets.url,e)}},{key:"getServiceInfo",value:function(e,t){var r=this;z.get(e,null,{withCredentials:this.datasets.withCredentials}).then(function(e){return e.json()}).then(function(n){var o;!1!==n.succeed?n.dataItemServices&&n.dataItemServices.length>0?(n.dataItemServices.forEach(function(n){if("RESTDATA"===n.serviceType&&"PUBLISHED"===n.serviceStatus)o=n;else{if("RESTMAP"!==n.serviceType||"PUBLISHED"!==n.serviceStatus)return void r.getDatafromContent(e,t);o=n}}),o&&r.getDatafromRest(o.serviceType,o.address,t)):r.getDatafromContent(e,t):r._fireFailedEvent(n)}).catch(function(e){console.log(e),r._fireFailedEvent(e)})}},{key:"getDatafromContent",value:function(e,t){var r=this,n={result:{}},o=this;e+="/content.json?pageSize=9999999&currentPage=1",z.get(e,null,{withCredentials:this.datasets.withCredentials}).then(function(e){return e.json()}).then(function(e){if(!1!==e.succeed){if(e.type){if("JSON"===e.type||"GEOJSON"===e.type){if(e.content=JSON.parse(e.content.trim()),!e.content.features)return void console.log(Tie.i18n("msg_jsonResolveFiled"));var i=r._formatGeoJSON(e.content);n.result.features={type:e.content.type,features:i}}else if("EXCEL"===e.type||"CSV"===e.type){var a=r._excelData2Feature(e.content);n.result.features={type:"FeatureCollection",features:a}}t(n,"content")}}else o._fireFailedEvent(e)},this).catch(function(e){console.log(e),o._fireFailedEvent(e)})}},{key:"getDatafromRest",value:function(e,t,r){var n=this,o=this.datasets.withCredentials;if("RESTDATA"===e){var i,a,s="".concat(t,"/data/datasources");z.get(s,null,{withCredentials:o}).then(function(e){return e.json()}).then(function(e){i=e.datasourceNames[0],s="".concat(t,"/data/datasources/").concat(i,"/datasets"),z.get(s,null,{withCredentials:o}).then(function(e){return e.json()}).then(function(e){return a=e.datasetNames[0],n.getDatafromRestData("".concat(t,"/data"),[i+":"+a],r),[i+":"+a]}).catch(function(e){n._fireFailedEvent(e)})}).catch(function(e){n._fireFailedEvent(e)})}else{var u,l,c,f="".concat(t,"/maps");z.get(f,null,{withCredentials:o}).then(function(e){return e.json()}).then(function(e){u=e[0].name,c=e[0].path,f=f="".concat(t,"/maps/").concat(u,"/layers"),z.get(f,null,{withCredentials:o}).then(function(e){return e.json()}).then(function(e){return l=e[0].subLayers.layers[0].caption,n.getDatafromRestMap(l,c,r),l}).catch(function(e){n._fireFailedEvent(e)})}).catch(function(e){n._fireFailedEvent(e)})}}},{key:"getDatafromRestData",value:function(e,t,r){var n=this;this.datasets.queryInfo.attributeFilter=this.datasets.queryInfo.attributeFilter||"SmID>0",this._getFeatureBySQL(e,t,this.datasets.queryInfo,function(e){r(e,"RESTDATA")},function(e){console.log(e),n._fireFailedEvent(e)})}},{key:"getDatafromRestMap",value:function(e,t,r){var n=this;this.datasets.queryInfo.attributeFilter=this.datasets.queryInfo.attributeFilter||"smid=1",this._queryFeatureBySQL(t,e,this.datasets.queryInfo,null,null,function(e){r(e,"RESTMAP")},function(e){console.log(e),n._fireFailedEvent(e)})}},{key:"_getFeatureBySQL",value:function(e,t,r,n,o){var i,a,s={name:t.join().replace(":","@")};Object.assign(s,r),i=new Fj(s),a=new hM({queryParameter:i,datasetNames:t,fromIndex:0,toIndex:1e5,returnContent:!0}),new wM(e).processAsync(a,function(e){"processCompleted"===e.type?n&&n(e):o&&o(e)})}},{key:"_queryFeatureBySQL",value:function(e,t,r,n,o,i,a,s,u,l){var c,f,p={name:t};Object.assign(p,r),c=new Fj(p),n&&(c.fields=n);var h={queryParams:[c]};l&&(h.queryOption=cn.ATTRIBUTE),s&&(h.startRecord=s),u&&(h.expectCount=u),o&&(h.prjCoordSys={epsgCode:o}),f=new oW(h),this._queryBySQL(e,f,function(e){"processCompleted"===e.type?i(e):a(e)})}},{key:"_queryBySQL",value:function(e,t,r,n){new pW(e,{format:this._processFormat(n)}).processAsync(t,r)}},{key:"_processFormat",value:function(e){return e||sn.GEOJSON}},{key:"_formatGeoJSON",value:function(e){var t=e.features;return t.forEach(function(e,t){e.properties.index=t}),t}},{key:"_excelData2Feature",value:function(e){for(var t=e.colTitles,r=-1,n=-1,o=0,i=t.length;o<i;o++)Mie.isXField(t[o])&&(r=o),Mie.isYField(t[o])&&(n=o);for(var a=[],s=0,u=e.rows.length;s<u;s++){var l=e.rows[s],c=Number(l[r]),f=Number(l[n]),p={};for(var h in e.colTitles){p[e.colTitles[h]]=e.rows[s][h]}p.index=s+"";var y={type:"Feature",geometry:{type:"Point",coordinates:[c,f]},properties:p};a.push(y)}return a}},{key:"_fireFailedEvent",value:function(e){var t=e?{error:e,message:Tie.i18n("msg_getdatafailed")}:{message:Tie.i18n("msg_getdatafailed")};this.events.triggerEvent("getdatafailed",t)}}])&&Nie(e.prototype,t),r&&Nie(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function Die(e){"@babel/helpers - typeof";return(Die="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fie(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return Qie(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Qie(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function Qie(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Gie(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Uie(n.key),n)}}function Uie(e){var t=function(e,t){if("object"!=Die(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Die(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Die(t)?t:t+""}var zie=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasets=t.datasets,this.xField=[],this.yField=[],this.grid={top:"50px",bottom:"50px",left:"50px",right:"60px"},this.chartType=t.type||"bar",this._initXYField(t.chartOptions),this.EVENT_TYPES=["getdatafailed"],this.events=new ja(this,null,this.EVENT_TYPES)},(t=[{key:"_initXYField",value:function(e){var t=this;e&&e.length>0&&e.forEach(function(e){e.xAxis&&t.xField.push({field:e.xAxis.field,name:e.xAxis.name}),e.yAxis&&t.yField.push({field:e.yAxis.field,name:e.yAxis.name})})}},{key:"getDatasetInfo",value:function(e){var t=this;this.createChart=e,this.datasets&&this._checkUrl(this.datasets.url)&&(this.chartModel=new Lie(this.datasets),"iServer"===this.datasets.type?this.chartModel.getDatasetInfo(this._getDatasetInfoSuccess.bind(this)):"iPortal"===this.datasets.type&&this.chartModel.getDataInfoByIptl(this._getDataInfoSuccess.bind(this)),this.chartModel.events.on({getdatafailed:function(e){t.events.triggerEvent("getdatafailed",e)}}))}},{key:"_getDatasetInfoSuccess",value:function(e){var t=this.datasets.url,r=t.indexOf("rest");if(r>0){var n=t.indexOf("/",r+5),o=t.substring(r+5,n),i=t.substring(0,r+4)+"/data";if("maps"===o){var a=t.indexOf("/",n+1),s=t.substring(n+1,a);i=t.substring(0,r+4)+"/maps/"+s,e.result.dataUrl=i,this._getLayerFeatures(e)}else"data"===o&&(e.result.dataUrl=i,this._getDataFeatures(e))}}},{key:"_getDataInfoSuccess",value:function(e,t){"RESTMAP"===t?this._getChartDatasFromLayer(e):this._getChartDatas(e)}},{key:"_getDataFeatures",value:function(e){this.chartModel.getDataFeatures(e,this._getChartDatas.bind(this))}},{key:"_getLayerFeatures",value:function(e){this.chartModel.getLayerFeatures(e,this._getChartDatasFromLayer.bind(this))}},{key:"_getChartDatas",value:function(e){if(e){this.features=e.result.features;var t=this.features.features,r={};if(t.length){var n=t[0],o=[],i=[];for(var a in n.properties)o.push(a),i.push(this._getDataType(n.properties[a]));for(var s in r={features:t,fieldCaptions:o,fieldTypes:i,fieldValues:[]},i){var u=[];for(var l in t){var c=t[l],f=r.fieldCaptions[s],p=c.properties[f];u.push(p)}r.fieldValues.push(u)}this.createChart(r)}}}},{key:"_getChartDatasFromLayer",value:function(e){if(e.result.recordsets){var t=e.result.recordsets[0],r=t.features.features;this.features=t.features;var n={};if(r.length){for(var o in(n={features:t.features,fieldCaptions:t.fieldCaptions,fieldTypes:t.fieldTypes,fieldValues:[]}).fieldCaptions){var i=[];for(var a in r){var s=r[a],u=n.fieldCaptions[o],l=s.properties[u];i.push(l)}n.fieldValues.push(i)}this.createChart(n)}}}},{key:"_createChartOptions",value:function(e){return this.calculatedData=this._createChartDatas(e),this.updateChartOptions(this.chartType)}},{key:"changeType",value:function(e){if(e!==this.chartType)return this.chartType=e,this.updateChartOptions(this.chartType)}},{key:"updateData",value:function(e,t,r){this.updateChart=r,this.xField=[],this.yField=[],this._initXYField(t),e.type=e.type||"iServer",e.withCredentials=e.withCredentials||!1,this.datasets=e,this.getDatasetInfo(this._updateDataSuccess.bind(this))}},{key:"_updateDataSuccess",value:function(e){var t=this._createChartOptions(e);this.updateChart(t)}},{key:"updateChartOptions",value:function(e,t){if(this.calculatedData){var r=this.grid,n=this._createChartSeries(this.calculatedData,e),o=[];for(var i in this.calculatedData.XData)o.push({value:this.calculatedData.XData[i].fieldsData});var a={type:"category",name:this.xField[0].name||"X",data:o,nameTextStyle:{color:"#fff",fontSize:14},splitLine:{show:!1},axisLine:{lineStyle:{color:"#eee"}}},s={type:"value",name:this.yFieldName||"Y",data:{},nameTextStyle:{color:"#fff",fontSize:14},splitLine:{show:!1},axisLine:{lineStyle:{color:"#eee"}}},u={formatter:"{b0}: {c0}"},l="#404a59";return t&&(t.grid&&(r=t.grid),t.tooltip&&(u=t.tooltip),t.backgroundColor&&(l=t.backgroundColor)),{backgroundColor:l,grid:r,series:n,xAxis:a,yAxis:s,tooltip:u}}}},{key:"_createChartDatas",value:function(e){var t=0,r=[],n=e.fieldCaptions,o=this;n.forEach(function(e,r){o.xField[0]&&e===o.xField[0].field&&(t=r)}),this.yFieldName="",this.yField.forEach(function(e,t){0!==t&&(o.yFieldName=o.yFieldName+","),o.yFieldName=o.yFieldName+e.name,n.forEach(function(t,n){t===e.field&&r.push(n)})});var i=this._getAttrData(e,t),a=[];if(r.length>0)r.forEach(function(t){var r=[];for(var n in e.fieldValues[t])r.push({value:e.fieldValues[t][n]});a.push(r)});else{for(var s=[],u=[],l=i.length,c=0;c<l;c++){for(var f=!1,p=0,h=u.length;p<h;p++)if(i[c].fieldsData===u[p].fieldsData){s[p].value++,u[p].recordIndexs.push(c),f=!0;break}f||i[c].fieldsData&&(u.push({fieldsData:i[c].fieldsData,recordIndexs:[c]}),s.push({value:1}))}i=u,a=[s]}return{XData:i,YData:a}}},{key:"_getAttrData",value:function(e,t){0===t&&(this.xField=[{field:e.fieldCaptions[t],name:e.fieldCaptions[t]}]);for(var r=[],n=0,o=e.fieldValues[t].length;n<o;n++){var i=e.fieldValues[t][n];r.push({recordIndexs:n,fieldsData:i})}return r}},{key:"_createChartSeries",value:function(e,t){var r=[];return e.YData.forEach(function(e){var n,o=0,i=[],a=Fie(e);try{for(a.s();!(n=a.n()).done;){o=n.value.value,i.push({value:o})}}catch(e){a.e(e)}finally{a.f()}var s={type:t,data:i,name:"y"};r.push(s)}),r}},{key:"_isDate",value:function(e){return/((^((1[8-9]\d{2})|([2-9]\d{3}))([-\/\._])(10|12|0?[13578])([-\/\._])(3[01]|[12][0-9]|0?[1-9])$)|(^((1[8-9]\d{2})|([2-9]\d{3}))([-\/\._])(11|0?[469])([-\/\._])(30|[12][0-9]|0?[1-9])$)|(^((1[8-9]\d{2})|([2-9]\d{3}))([-\/\._])(0?2)([-\/\._])(2[0-8]|1[0-9]|0?[1-9])$)|(^([2468][048]00)([-\/\._])(0?2)([-\/\._])(29)$)|(^([3579][26]00)([-\/\._])(0?2)([-\/\._])(29)$)|(^([1][89][0][48])([-\/\._])(0?2)([-\/\._])(29)$)|(^([2-9][0-9][0][48])([-\/\._])(0?2)([-\/\._])(29)$)|(^([1][89][2468][048])([-\/\._])(0?2)([-\/\._])(29)$)|(^([2-9][0-9][2468][048])([-\/\._])(0?2)([-\/\._])(29)$)|(^([1][89][13579][26])([-\/\._])(0?2)([-\/\._])(29)$)|(^([2-9][0-9][13579][26])([-\/\._])(0?2)([-\/\._])(29)$))/gi.test(e)}},{key:"_isNumber",value:function(e){var t=Number(e);return 0===t||!isNaN(t)}},{key:"_getDataType",value:function(e){if(null!==e&&void 0!==e&&""!==e){if(this._isDate(e))return"DATE";if(this._isNumber(e))return"NUMBER"}return"STRING"}},{key:"_checkUrl",value:function(e){return!(""===e||!this._isMatchUrl(e))&&(!/^http[s]?:\/\/localhost/.test(e)&&!/^http[s]?:\/\/127.0.0.1/.test(e))}},{key:"_isMatchUrl",value:function(e){return new RegExp("(https?|http|file|ftp)://[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]").test(e)}},{key:"getStyle",value:function(){return{grid:this.grid,tooltip:this.tooltip,backgroundColor:this.backgroundColor}}},{key:"getFeatures",value:function(){return this.features}},{key:"setStyle",value:function(e){return this.updateChartOptions(this.chartType,e)}}])&&Gie(e.prototype,t),r&&Gie(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function Hie(e){"@babel/helpers - typeof";return(Hie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qie(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Vie(n.key),n)}}function Vie(e){var t=function(e,t){if("object"!=Hie(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Hie(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Hie(t)?t:t+""}var Kie=function(){return e=function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.domID=t,this.chartType=r.type||"bar",r.datasets.type=r.datasets.type||"iServer",r.datasets.withCredentials=r.datasets.withCredentials||!1,this.viewModel=new zie(r),this._fillDataToView()},(t=[{key:"onAdd",value:function(e){this.addChart=e}},{key:"_fillDataToView",value:function(){var e=new Pie;this.viewModel.getDatasetInfo(this._createChart.bind(this)),this.viewModel.events.on({getdatafailed:function(t){e.showView(t.message)}})}},{key:"getStyle",value:function(){return this.viewModel.getStyle()}},{key:"getFeatures",value:function(){return this.viewModel.getFeatures()}},{key:"setStyle",value:function(e){var t=this.viewModel.setStyle(e);this._updateChart(t)}},{key:"changeType",value:function(e){if(this.chartType!==e){this.chartType=e;var t=this.viewModel.changeType(e);this._updateChart(t)}}},{key:"updateData",value:function(e,t){var r=this;this.viewModel.updateData(e,t,function(e){r._updateChart(e),r.addChart&&r.addChart()})}},{key:"_createChart",value:function(e){this.echart=kie.init(document.getElementById(this.domID),null,{renderer:"canvas"});var t=this.viewModel._createChartOptions(e);this.echart.setOption(t),this.addChart&&this.addChart()}},{key:"_updateChart",value:function(e){this.echart&&(this.echart.clear(),this.echart.setOption(e))}}])&&qie(e.prototype,t),r&&qie(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function Yie(e){"@babel/helpers - typeof";return(Yie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jie(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Wie(n.key),n)}}function Wie(e){var t=function(e,t){if("object"!=Yie(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Yie(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Yie(t)?t:t+""}var Xie=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.id=t.id?t.id:null,this.rootContainer=null},(t=[{key:"getElement",value:function(){return this.id&&(this.rootContainer.id=this.id),this.rootContainer}},{key:"_initView",value:function(){}},{key:"showView",value:function(){this.rootContainer.hidden=!1}},{key:"closeView",value:function(){this.rootContainer.hidden=!0}}])&&Jie(e.prototype,t),r&&Jie(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function Zie(e){"@babel/helpers - typeof";return(Zie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $ie(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,eae(n.key),n)}}function eae(e){var t=function(e,t){if("object"!=Zie(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Zie(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Zie(t)?t:t+""}function tae(e,t,r){return t=rae(t),function(e,t){if(t&&("object"==Zie(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],rae(e).constructor):t.apply(e,r))}function rae(e){return(rae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nae(e,t){return(nae=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var oae=function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=tae(this,t,[e]);var n=e.title?e.title:"";return r._initView(n),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nae(e,t)}(t,Xie),r=t,(n=[{key:"_initView",value:function(e){var t=document.createElement("div");t.setAttribute("class","component-container");var r=document.createElement("div");r.setAttribute("class","component-title");var n=document.createElement("div");n.innerHTML=e,r.appendChild(n),t.appendChild(r);var o=document.createElement("div");return o.setAttribute("class","component-content"),t.appendChild(o),this.content=o,this.rootContainer=t,t}},{key:"getContentElement",value:function(){return this.content}},{key:"appendContent",value:function(e){this.content.appendChild(e)}}])&&$ie(r.prototype,n),o&&$ie(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function iae(e){"@babel/helpers - typeof";return(iae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function aae(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,sae(n.key),n)}}function sae(e){var t=function(e,t){if("object"!=iae(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=iae(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==iae(t)?t:t+""}function uae(e,t,r){return t=lae(t),function(e,t){if(t&&("object"==iae(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],lae(e).constructor):t.apply(e,r))}function lae(e){return(lae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function cae(e,t){return(cae=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var fae=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=uae(this,t,[e]))._initView(e),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cae(e,t)}(t,Xie),r=t,(n=[{key:"_initView",value:function(e){var t=this._createElement("div","component-selecttool");e.labelName&&(this._createElement("label","component-selecttool__lable--describe",t).innerHTML=e.labelName);var r=this._createElement("div","component-selecttool--chart",t);r.setAttribute("tabindex","1");var n=this._createElement("div","component-selecttool__name",r);n.title=e.optionsArr[0],n.innerHTML=e.optionsArr[0];var o=this._createElement("div","component-selecttool__trianglebtn--chart",r),i=this._createElement("div","component-triangle-down-img",o),a=this._createElement("div","component-selecttool__content",r),s=this._createElement("div","component-selecttool__content--chart",a),u=this._createElement("div","component-selecttool__scrollarea__content",s);u.setAttribute("tabindex","1"),this.createOptions(u,e.optionsArr),this.optionClickEvent(u,n,e.optionsClickCb),this._selectClickEvent(r,a,i),this.rootContainer=t}},{key:"createOptions",value:function(e,t){for(var r in t){var n=this._createElement("div","component-selecttool__option",e);n.title=t[r],n.innerHTML=t[r]}}},{key:"_selectClickEvent",value:function(e,t,r){e.onclick=function(e){"block"===t.style.display?(t.style.display="none",r.className="component-triangle-down-img"):(t.style.display="block",r.className="triangle-up-img"),e.preventDefault(),e.stopPropagation()},e.onmousedown=function(e){e.target!==this&&(this.focus(),e.preventDefault(),e.stopPropagation())},e.onblur=function(){t.style.display="none",r.className="component-triangle-down-img"}}},{key:"_createElement",value:function(e,t,r){var n=document.createElement(e||"div");return t&&(n.className=t),r&&r.appendChild(n),n}},{key:"optionClickEvent",value:function(e,t,r){for(var n=function(){var n=e.children[o];n.onclick=function(){t.innerHTML=n.innerHTML,t.title=n.title,n.getAttribute("data-value")&&t.setAttribute("data-value",n.getAttribute("data-value")),r&&r(n)}},o=0;o<e.children.length;o++)n()}}])&&aae(r.prototype,n),o&&aae(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function pae(e){"@babel/helpers - typeof";return(pae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hae(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,yae(n.key),n)}}function yae(e){var t=function(e,t){if("object"!=pae(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=pae(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==pae(t)?t:t+""}function dae(e,t,r){return t=mae(t),function(e,t){if(t&&("object"==pae(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],mae(e).constructor):t.apply(e,r))}function mae(e){return(mae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gae(e,t){return(gae=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var vae=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=dae(this,t,[e]))._initView(e),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gae(e,t)}(t,Xie),r=t,(n=[{key:"_initView",value:function(e){var t=document.createElement("div");t.className="component-dropdownbox--container";var r=document.createElement("div");r.setAttribute("tabindex","1"),r.className="component-dropdownbox",t.appendChild(r);var n=document.createElement("div");r.appendChild(n),this._createDropDownOption(e[0],n);var o=document.createElement("div");o.className="component-dropdownbox__triangle-btn",r.appendChild(o);var i=document.createElement("div");i.className="component-triangle-down-img",o.appendChild(i);var a={parentEle:r,dropDownContent:["component-dropdownbox__content component-dropdownbox__content--chart","dropDownContent"],scrollareaContent:"component-selecttool__scrollarea__content",optionsArr:e,triangleBtn:i,dropDownTopContainer:n};this._createDropDownBox(a),this.rootContainer=t}},{key:"_createDropDownBox",value:function(e){var t=e.parentEle,r=e.dropDownTopContainer,n=document.createElement("div");n.className=e.dropDownContent[0],t.appendChild(n);var o=document.createElement("div");o.className=e.scrollareaContent,n.appendChild(o);for(var i=e.optionsArr,a=0;a<i.length;a++)this._createDropDownOption(i[a],o);var s=e.triangleBtn;this._dropDownClickEvent(t,n,s),this._eleOnblur(t,n,s);for(var u=o.children,l=function(e){u[e].onclick=function(){r.innerHTML=u[e].outerHTML}},c=0;c<u.length;c++)l(c)}},{key:"_createDropDownOption",value:function(e,t){var r=document.createElement("div");r.className="component-dropdownbox__item";var n=e;n.dataValue&&r.setAttribute("data-value",n.dataValue),t.appendChild(r);var o=document.createElement("div");o.className="component-dropdownbox__item__img",r.appendChild(o);var i=document.createElement("div");n.icon.className&&(i.className=n.icon.className),n.icon.background&&(i.style.background=n.icon.background),o.appendChild(i);var a=document.createElement("div");a.className="component-dropdownbox__item__title",a.title=n.title,a.innerHTML=n.title,r.appendChild(a);var s=document.createElement("div");s.className="component-dropdownbox__item__remark",s.title=n.remark,s.innerHTML=n.remark,r.appendChild(s)}},{key:"_dropDownClickEvent",value:function(e,t,r){e.onclick=function(e){"block"===t.style.display?(t.style.display="none",r.className="component-triangle-down-img"):(t.style.display="block",r.className="triangle-up-img"),e.preventDefault(),e.stopPropagation()},e.onmousedown=function(e){e.target!==this&&(this.focus(),e.preventDefault(),e.stopPropagation())}}},{key:"_eleOnblur",value:function(e,t,r){e.onblur=function(){t.style.display="none",r.className="component-triangle-down-img"}}},{key:"_createElement",value:function(e,t,r){var n=document.createElement(e||"div");return t&&(n.className=t),r&&r.appendChild(n),n}}])&&hae(r.prototype,n),o&&hae(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function bae(e){"@babel/helpers - typeof";return(bae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Aae(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,wae(n.key),n)}}function wae(e){var t=function(e,t){if("object"!=bae(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=bae(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==bae(t)?t:t+""}function Sae(e,t,r){return t=Cae(t),function(e,t){if(t&&("object"==bae(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],Cae(e).constructor):t.apply(e,r))}function Cae(e){return(Cae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Eae(e,t){return(Eae=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var _ae=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=Sae(this,t,[e=e||{}]),e.title=e.title?e.title:"",r._initView(e.title),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Eae(e,t)}(t,Xie),r=t,(n=[{key:"_initView",value:function(e){var t=document.createElement("div");t.setAttribute("class","component-popcontainer");var r=document.createElement("div");r.setAttribute("class","component-popcontainer__header");var n=document.createElement("label");n.setAttribute("class","component-popcontainer__header__title"),n.innerHTML=e,r.appendChild(n);var o=document.createElement("span");o.setAttribute("class","supermapol-icons-clear component-popcontainer__header__close"),o.onclick=this.closeView.bind(this),t.appendChild(o),t.appendChild(r);var i=document.createElement("div");i.setAttribute("class","component-popcontainer__content"),this.content=i,t.appendChild(i),this.rootContainer=t}},{key:"appendContent",value:function(e){this.content.appendChild(e)}}])&&Aae(r.prototype,n),o&&Aae(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Iae(e){"@babel/helpers - typeof";return(Iae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oae(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,xae(n.key),n)}}function xae(e){var t=function(e,t){if("object"!=Iae(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Iae(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Iae(t)?t:t+""}function Pae(e,t,r){return t=kae(t),function(e,t){if(t&&("object"==Iae(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],kae(e).constructor):t.apply(e,r))}function kae(e){return(kae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Tae(e,t){return(Tae=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var jae=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e.title=e.title?e.title:"å±æ§",(r=Pae(this,t,[e])).rootContainer.firstChild.hidden=!0,e.attributes=e.attributes?e.attributes:[],r._createAttributesTable(e.attributes),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Tae(e,t)}(t,_ae),r=t,(n=[{key:"_createAttributesTable",value:function(e){var t=document.createElement("table");t.setAttribute("class","component-popcontainer__content__table");var r=document.createElement("tbody"),n=!0;for(var o in e){var i=document.createElement("tr");n&&i.setAttribute("class","component-popcontainer__content__td--color");var a=document.createElement("td"),s=document.createElement("Span");s.innerHTML=o,a.appendChild(s);var u=document.createElement("td");u.innerHTML=e[o],i.appendChild(a),i.appendChild(u),r.appendChild(i),n=!n}t.appendChild(r),this.appendContent(t)}}])&&Oae(r.prototype,n),o&&Oae(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Mae(e){"@babel/helpers - typeof";return(Mae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bae(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Nae(n.key),n)}}function Nae(e){var t=function(e,t){if("object"!=Mae(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Mae(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Mae(t)?t:t+""}function Rae(e,t,r){return t=Lae(t),function(e,t){if(t&&("object"==Mae(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],Lae(e).constructor):t.apply(e,r))}function Lae(e){return(Lae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Dae(e,t){return(Dae=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Fae=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Rae(this,t,[e]))._initView(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Dae(e,t)}(t,Xie),r=t,(n=[{key:"_initView",value:function(){var e=document.createElement("div");e.setAttribute("class","component-tabpage");var t=document.createElement("ul");this.header=t;var r=document.createElement("div");r.setAttribute("class","component-tabpage__content"),this.content=r,e.appendChild(t),e.appendChild(r),this.rootContainer=e}},{key:"setTabs",value:function(e){this.removeAllTabs(),this.appendTabs(e)}},{key:"appendTabs",value:function(e){for(var t=0;t<e.length;t++){var r=document.createElement("span");r.index=t,r.appendChild(document.createTextNode(e[t].title)),r.onclick=this._changeTabsPage.bind(this);var n=e[t].content;n.index=t,n.hidden=!0,this.header.appendChild(r),this.content.appendChild(n)}this.header.firstChild.setAttribute("class","on"),this.content.firstChild.hidden=!1}},{key:"removeTab",value:function(e){this.header.removeChild(this.header.children[e]),this.content.removeChild(this.content.children[e])}},{key:"removeAllTabs",value:function(){for(var e=this.header.children.length;e>0;e--)this.header.removeChild(this.header.children[e]),this.content.removeChild(this.content.children[e])}},{key:"_changeTabsPage",value:function(e){for(var t=e.target.index,r=0;r<this.header.children.length;r++)this.header.children[r].setAttribute("class",""),this.content.children[r].hidden=!0,r===t&&(this.header.children[r].setAttribute("class","on"),this.content.children[r].hidden=!1)}}])&&Bae(r.prototype,n),o&&Bae(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Qae(e){"@babel/helpers - typeof";return(Qae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gae(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Uae(n.key),n)}}function Uae(e){var t=function(e,t){if("object"!=Qae(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Qae(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Qae(t)?t:t+""}function zae(e,t,r){return t=Hae(t),function(e,t){if(t&&("object"==Qae(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],Hae(e).constructor):t.apply(e,r))}function Hae(e){return(Hae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qae(e,t){return(qae=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Vae=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=zae(this,t,[e])).rootContainer.classList.add("component-citytabpage--noneBoxShadow"),r.config=e.config,M.isArray(r.config)?(r.header.hidden=!0,r._createCityItem("åå¸",r.config),r.content.style.border="none"):(r._createTabs(),r.header.onclick=function(e){for(var t=0;t<r.header.children.length;t++)r.header.children[t].setAttribute("class","");e.target.setAttribute("class","on"),r._createCityContent(e.target.innerHTML)}),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qae(e,t)}(t,Fae),r=t,(n=[{key:"_createTabs",value:function(){if(M.isArray(this.config))for(var e=0;e<this.config.length;e++){var t="";for(var r in this.config[e])t+=r;var n=document.createElement("li");n.innerHTML=t,this.header.appendChild(n)}else for(var o in this.config){var i=document.createElement("li");i.innerHTML=o,this.header.appendChild(i)}this.header.firstChild.setAttribute("class","on"),this._createCityContent(this.header.firstChild.innerHTML)}},{key:"_createCityContent",value:function(e){for(var t=this.content.children.length;t>0;t--)this.content.removeChild(this.content.children[t-1]);var r=this.config[e];for(var n in r)this._createCityItem(n,r[n])}},{key:"_createCityItem",value:function(e,t){var r=document.createElement("div"),n=document.createElement("div");n.setAttribute("class","component-citytabpag__py-key"),n.innerHTML=e,r.appendChild(n);var o=document.createElement("div");o.setAttribute("class","component-citytabpag__content");for(var i=0;i<t.length;i++){var a=document.createElement("span");a.innerHTML=t[i],o.appendChild(a)}"HOT"===e&&(o.style.width="428px"),r.appendChild(o),this.content.appendChild(r)}}])&&Gae(r.prototype,n),o&&Gae(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Kae(e){"@babel/helpers - typeof";return(Kae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yae(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Jae(n.key),n)}}function Jae(e){var t=function(e,t){if("object"!=Kae(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Kae(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Kae(t)?t:t+""}function Wae(e,t,r){return t=Xae(t),function(e,t){if(t&&("object"==Kae(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],Xae(e).constructor):t.apply(e,r))}function Xae(e){return(Xae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Zae(e,t){return(Zae=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var $ae=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Wae(this,t,[e])).navTabsTitle=null,r.navTabsContent=null,e.tabs=e.tabs?e.tabs:[],r._initView(e.tabs),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zae(e,t)}(t,Xie),r=t,(n=[{key:"_initView",value:function(e){var t=document.createElement("div");t.setAttribute("class","component-navtabspage");var r=document.createElement("span");r.setAttribute("class","supermapol-icons-close"),r.onclick=this.closeView.bind(this),t.appendChild(r);var n=document.createElement("div");this.navTabsTitle=n,n.setAttribute("class","component-navtabspage__title"),t.appendChild(n);var o=document.createElement("div");this.navTabsContent=o,o.setAttribute("class","component-navtabspage__content"),t.appendChild(o),e.length>0&&this.appendTabs(e),this.rootContainer=t}},{key:"setTabs",value:function(e){this.removeAllTabs(),this.appendTabs(e)}},{key:"appendTabs",value:function(e){for(var t=0;t<e.length;t++){var r=document.createElement("span");r.index=t,r.appendChild(document.createTextNode(e[t].title)),r.onclick=this._changeTabsPage.bind(this);var n=e[t].content;n.index=t,n.hidden=!0,this.navTabsTitle.appendChild(r),this.navTabsContent.appendChild(n)}this.navTabsTitle.firstChild.setAttribute("class","component-navtabspage__tabs--select"),this.navTabsContent.firstChild.hidden=!1}},{key:"removeTab",value:function(e){this.navTabsTitle.removeChild(this.navTabsTitle.children[e]),this.navTabsContent.removeChild(this.navTabsContent.children[e])}},{key:"removeAllTabs",value:function(){for(var e=this.navTabsTitle.children.length;e>0;e--)this.navTabsTitle.removeChild(this.navTabsTitle.children[e]),this.navTabsContent.removeChild(this.navTabsContent.children[e])}},{key:"_changeTabsPage",value:function(e){for(var t=e.target.index,r=0;r<this.navTabsTitle.children.length;r++)this.navTabsTitle.children[r].setAttribute("class",""),this.navTabsContent.children[r].hidden=!0,r===t&&(this.navTabsTitle.children[r].setAttribute("class","component-navtabspage__tabs--select"),this.navTabsContent.children[r].hidden=!1)}}])&&Yae(r.prototype,n),o&&Yae(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function ese(e){"@babel/helpers - typeof";return(ese="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tse(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,rse(n.key),n)}}function rse(e){var t=function(e,t){if("object"!=ese(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ese(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ese(t)?t:t+""}function nse(e,t,r){return t=ose(t),function(e,t){if(t&&("object"==ese(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],ose(e).constructor):t.apply(e,r))}function ose(e){return(ose=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ise(e,t){return(ise=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var ase=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=nse(this,t,[e=e||{}])).currentPage=0,r.pageNumberLis=[],r.currentPageNumberLis=[],r.linkageEvent=null,e.contents=e.contents?e.contents:null,e.pageCounts=e.pageCounts?e.pageCounts:0,r._initView(e.contents,e.pageCounts),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ise(e,t)}(t,Xie),r=t,(n=[{key:"setLinkageEvent",value:function(e){this.linkageEvent=e}},{key:"_initView",value:function(e,t){var r=document.createElement("div");r.setAttribute("class","component-pagination");var n=document.createElement("div");n.setAttribute("class","component-pagination__content"),r.appendChild(n),this.content=n;var o=document.createElement("ul");o.setAttribute("class","component-pagination__link"),o.onclick=this._changePageEvent.bind(this),r.appendChild(o),this._createLink(o),this.link=o,e&&this.setContent(e),0!==t&&this.setPageLink(t),this.rootContainer=r}},{key:"setContent",value:function(e){this.clearContent(),this.appendContent(e)}},{key:"appendContent",value:function(e){this.content.appendChild(e)}},{key:"clearContent",value:function(){for(var e=this.content.children.length-1;e>=0;e--)this.content.removeChild(this.content.children[e])}},{key:"setPageLink",value:function(e){this.pageNumberLis=[],this.currentPageNumberLis=[],this.clearPageLink(),this._createPageLi(e),this._appendPageLink()}},{key:"_createPageLi",value:function(e){for(var t=0;t<e;t++){var r=document.createElement("li");r.innerHTML=t+1,this.pageNumberLis.push(r)}if(this.pageNumberLis[0].setAttribute("class","active"),this.currentPage=1,e<5)this.currentPageNumberLis=this.pageNumberLis;else for(var n=0;n<5;n++)this.currentPageNumberLis.push(this.pageNumberLis[n])}},{key:"_appendPageLink",value:function(){for(var e=0;e<this.currentPageNumberLis.length;e++)this.link.insertBefore(this.currentPageNumberLis[e],this.link.childNodes[this.link.children.length-2]);for(var t=0;t<this.currentPageNumberLis.length;t++)this.currentPageNumberLis[t].setAttribute("class",""),Number(this.currentPageNumberLis[t].innerHTML)===this.currentPage&&this.currentPageNumberLis[t].setAttribute("class","active");this._changeDisableState(),this.linkageEvent&&this.linkageEvent(this.currentPage)}},{key:"clearPageLink",value:function(){for(var e=this.link.children.length-3;e>1;e--)this.link.removeChild(this.link.children[e])}},{key:"_createLink",value:function(e){for(var t=0;t<4;t++){var r=document.createElement("li");r.setAttribute("class","disable");var n=document.createElement("span");r.appendChild(n),0===t?(n.id="first",n.setAttribute("class","supermapol-icons-first")):1===t?(n.id="prev",n.setAttribute("class","supermapol-icons-prev")):2===t?(n.id="next",n.setAttribute("class","supermapol-icons-next")):3===t&&(n.id="last",n.setAttribute("class","supermapol-icons-last")),e.appendChild(r)}}},{key:"_changePageEvent",value:function(e){var t=e.target;if("disable"!==t.parentElement.classList[0]){var r;if(t.id)r=t.id;else{if(!Number(t.innerHTML))return;r=Number(t.innerHTML)}this._prePageNum(r),this.clearPageLink(),this._appendPageLink()}}},{key:"_changeDisableState",value:function(){this.link.children[0].setAttribute("class",""),this.link.children[1].setAttribute("class",""),this.link.children[this.link.children.length-1].setAttribute("class",""),this.link.children[this.link.children.length-2].setAttribute("class",""),1===this.currentPage&&(this.link.children[0].setAttribute("class","disable"),this.link.children[1].setAttribute("class","disable")),this.currentPage===this.pageNumberLis.length&&(this.link.children[this.link.children.length-1].setAttribute("class","disable"),this.link.children[this.link.children.length-2].setAttribute("class","disable"))}},{key:"_prePageNum",value:function(e){var t=[];if(this.currentPage="first"===e?1:"last"===e?this.pageNumberLis.length:"prev"===e?this.currentPage-1:"next"===e?this.currentPage+1:e,this.pageNumberLis.length<=5)for(var r=0;r<this.pageNumberLis.length;r++)t.push(this.pageNumberLis[r]);else if(this.currentPage<=3)for(var n=0;n<5;n++)t.push(this.pageNumberLis[n]);else if(this.currentPage>=this.pageNumberLis.length-3)for(var o=this.pageNumberLis.length-5;o<this.pageNumberLis.length;o++)t.push(this.pageNumberLis[o]);else for(var i=this.currentPage-3;i<=this.currentPage+1;i++)t.push(this.pageNumberLis[i]);t.length>0&&(this.currentPageNumberLis=t)}}])&&tse(r.prototype,n),o&&tse(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function sse(e){"@babel/helpers - typeof";return(sse="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function use(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function lse(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?use(Object(r),!0).forEach(function(t){cse(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):use(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function cse(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=sse(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=sse(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==sse(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Q5.Lang=Tie,Q5.i18n=Q5.Lang.i18n,Q5.Util=lse(lse({},Q5.Util),M),Q5.Browser=k,Q5.INCHES_PER_UNIT=B,Q5.METERS_PER_INCH=N,Q5.DOTS_PER_INCH=96,Q5.IS_GECKO=j,Q5.setCORS=function(e){R=e},Q5.isCORS=G,Q5.setRequestTimeout=function(e){return L=e},Q5.getRequestTimeout=U,Q5.setRequestHeaders=function(e){return D=e},Q5.FetchRequest=z,Q5.EncryptRequest=ne,Q5.getServiceKey=oe,Q5.GeometryAnalysis=zne,Q5.inherit=function(e,t){var r,n,o,i=function(){};for(i.prototype=t.prototype,e.prototype=new i,r=2,n=arguments.length;r<n;r++)"function"==typeof(o=arguments[r])&&(o=o.prototype),M.extend(e.prototype,o)},Q5.mixin=f,Q5.String=p,Q5.Number=h,Q5.Function=y,Q5.Array=d,Q5.Date=Oa,Q5.Event=xa,Q5.Bounds=We,Q5.Credential=Ia,Q5.Events=ja,Q5.Feature=er,Q5.Geometry=b,Q5.Geometry3D=Fa,Q5.Pixel=Ue,Q5.Size=De,Q5.Feature.Vector=pr,Q5.Geometry.Collection=pt,Q5.Geometry.Curve=It,Q5.Geometry.GeoText=Fo,Q5.Geometry.LinearRing=zt,Q5.Geometry.LineString=Bt,Q5.Geometry.MultiLineString=kr,Q5.Geometry.MultiPoint=bt,Q5.Geometry.MultiPolygon=Lr,Q5.Geometry.Point=ot,Q5.Geometry.Polygon=Wt,Q5.Geometry.Rectangle=Sa,Q5.Components.Chart=Kie,Q5.Components.ChartViewModel=zie,Q5.Components.MessageBox=Pie,Q5.Components.AttributesPopContainer=jae,Q5.Components.CityTabsPage=Vae,Q5.Components.CommonContainer=oae,Q5.Components.DropDownBox=vae,Q5.Components.IndexTabsPageContainer=Fae,Q5.Components.NavTabsPage=$ae,Q5.Components.PaginationContainer=ase,Q5.Components.PopContainer=_ae,Q5.Components.Select=fae,Q5.Components.TemplateBase=Xie,Q5.Components.FileReaderUtil=Mie,Q5.TimeControlBase=X5,Q5.TimeFlowControl=a6,Q5.Format=Q5.Format||mr,Q5.Format.GeoJSON=uo,Q5.Format.JSON=Cr,Q5.Format.WKT=K5,Q5.iManager=w6,Q5.iManagerCreateNodeParam=y6,Q5.iManagerServiceBase=c6,Q5.iPortal=Z6,Q5.iPortalAddDataParam=y8,Q5.iPortalAddResourceParam=a8,Q5.iPortalDataConnectionInfoParam=I8,Q5.iPortalDataMetaInfoParam=v8,Q5.iPortalDataStoreInfoParam=S8,Q5.iPortalQueryParam=P6,Q5.iPortalQueryResult=M6,Q5.iPortalRegisterServiceParam=c8,Q5.iPortalResource=Q6,Q5.iPortalServiceBase=_6,Q5.iPortalShareEntity=r8,Q5.iPortalShareParam=q6,Q5.iPortalUser=M8,Q5.AddressMatchService=fk,Q5.AggregationParameter=L8,Q5.AreaSolarRadiationParameters=XW,Q5.AreaSolarRadiationService=iX,Q5.AttachmentsParameters=bB,Q5.BucketAggParameter=H8,Q5.BufferAnalystParameters=gX,Q5.BufferAnalystService=qX,Q5.BufferDistance=lX,Q5.BuffersAnalystJobsParameter=gY,Q5.BuffersAnalystJobsService=IY,Q5.BufferSetting=hX,Q5.BurstPipelineAnalystParameters=xG,Q5.BurstPipelineAnalystService=RG,Q5.ChartFeatureInfoSpecsService=Kk,Q5.ChartAcronymClassifyService=tT,Q5.ChartQueryFilterParameter=Ik,Q5.ChartQueryParameters=kk,Q5.ChartQueryService=Fk,Q5.ChartSetting=r9,Q5.ClipParameter=a9,Q5.ColorDictionary=eF,Q5.CommonServiceBase=Vw,Q5.ComputeWeightMatrixParameters=YG,Q5.ComputeWeightMatrixService=rU,Q5.CreateDatasetParameters=FT,Q5.DataFlowService=bT,Q5.DataReturnOption=wX,Q5.DatasetBufferAnalystParameters=PX,Q5.DatasetInfo=jD,Q5.DatasetOverlayAnalystParameters=q$,Q5.DatasetService=NT,Q5.DatasetSurfaceAnalystParameters=K0,Q5.DatasetThiessenAnalystParameters=f2,Q5.DatasourceConnectionInfo=NV,Q5.DatasourceService=uj,Q5.DensityAnalystService=nZ,Q5.DensityKernelAnalystParameters=JX,Q5.EditAttachmentsParameters=IB,Q5.FeatureAttachmentsService=BB,Q5.EditFeaturesParameters=bj,Q5.EditFeaturesService=Oj,Q5.FacilityAnalyst3DParameters=GH,Q5.FacilityAnalystSinks3DParameters=JH,Q5.FacilityAnalystSinks3DService=rq,Q5.FacilityAnalystSources3DParameters=cq,Q5.FacilityAnalystSources3DService=vq,Q5.FacilityAnalystStreamParameters=aU,Q5.FacilityAnalystStreamService=yU,Q5.FacilityAnalystTracedown3DParameters=Uq,Q5.FacilityAnalystTracedown3DService=Wq,Q5.FacilityAnalystTraceup3DParameters=Iq,Q5.FacilityAnalystTraceup3DService=Bq,Q5.FacilityAnalystUpstream3DParameters=oV,Q5.FacilityAnalystUpstream3DService=pV,Q5.FieldParameters=sN,Q5.FieldsFilter=Ste,Q5.FieldStatisticService=SN,Q5.FieldStatisticsParameters=yN,Q5.FilterParameter=Fj,Q5.FindClosestFacilitiesParameters=UU,Q5.FindClosestFacilitiesService=WU,Q5.FindLocationParameters=ez,Q5.FindLocationService=uz,Q5.FindMTSPPathsParameters=pz,Q5.FindMTSPPathsService=Az,Q5.FindPathParameters=Ez,Q5.FindPathService=jz,Q5.FindServiceAreasParameters=Rz,Q5.FindServiceAreasService=Hz,Q5.FindTSPPathsParameters=Yz,Q5.FindTSPPathsService=rH,Q5.GenerateSpatialDataParameters=sZ,Q5.GenerateSpatialDataService=dZ,Q5.GeoCodingParameter=$P,Q5.GeoDecodingParameter=nk,Q5.GeoHashGridAggParameter=y9,Q5.GeometryBatchAnalystService=v3,Q5.GeometryBufferAnalystParameters=LX,Q5.GeometryOverlayAnalystParameters=$$,Q5.GeometrySurfaceAnalystParameters=t1,Q5.GeometryThiessenAnalystParameters=b2,Q5.GeoprocessingService=iR,Q5.GeoRelationAnalystParameters=bZ,Q5.GeoRelationAnalystService=OZ,Q5.GetFeaturesByBoundsParameters=PM,Q5.GetFeaturesByBoundsService=LM,Q5.GetFeaturesByBufferParameters=qM,Q5.GetFeaturesByBufferService=$M,Q5.GetFeaturesByGeometryParameters=sB,Q5.GetFeaturesByGeometryService=dB,Q5.GetFeaturesByIDsParameters=Xj,Q5.GetFeaturesByIDsService=iM,Q5.GetFeaturesBySQLParameters=hM,Q5.GetFeaturesBySQLService=wM,Q5.GetFeaturesParametersBase=zj,Q5.GetFeaturesServiceBase=Nj,Q5.GetFieldsService=nN,Q5.GetGridCellInfosParameters=LN,Q5.GetGridCellInfosService=qN,Q5.GetLayersInfoService=NF,Q5.Grid=lF,Q5.HillshadeParameter=xee,Q5.Image=vF,Q5.ImageCollectionService=j5,Q5.ImageGFAspect=Vte,Q5.ImageGFHillShade=Ute,Q5.ImageGFOrtho=Wte,Q5.ImageGFSlope=ere,Q5.ImageRenderingRule=Dte,Q5.ImageSearchParameter=kte,Q5.ImageService=g5,Q5.ImageStretchOption=Bte,Q5.InterpolationAnalystParameters=TZ,Q5.InterpolationAnalystService=w$,Q5.InterpolationDensityAnalystParameters=KZ,Q5.InterpolationIDWAnalystParameters=t$,Q5.InterpolationKrigingAnalystParameters=h$,Q5.InterpolationRBFAnalystParameters=FZ,Q5.JoinItem=xD,Q5.KernelDensityJobParameter=KV,Q5.KernelDensityJobsService=rK,Q5.LabelImageCell=_9,Q5.LabelMatrixCell=v9,Q5.LabelMixedTextStyle=RR,Q5.LabelSymbolCell=j9,Q5.LabelThemeCell=F9,Q5.LayerStatus=z9,Q5.LinkItem=K9,Q5.MappingParameters=zV,Q5.MapService=RQ,Q5.MathExpressionAnalysisParameters=_$,Q5.MathExpressionAnalysisService=M$,Q5.MeasureParameters=tG,Q5.MeasureService=lG,Q5.MetricsAggParameter=Z8,Q5.NDVIParameter=Aee,Q5.NetworkAnalystServiceBase=EG,Q5.OutputSetting=FV,Q5.OverlapDisplayedOptions=X9,Q5.OverlayAnalystParameters=L$,Q5.OverlayAnalystService=s0,Q5.OverlayGeoJobParameter=qK,Q5.OverlayGeoJobsService=eY,Q5.PointWithMeasure=Zr,Q5.ProcessingServiceBase=TV,Q5.QueryByBoundsParameters=IJ,Q5.QueryByBoundsService=BJ,Q5.QueryByDistanceParameters=UJ,Q5.QueryByDistanceService=WJ,Q5.QueryByGeometryParameters=AW,Q5.QueryByGeometryService=xW,Q5.QueryBySQLParameters=oW,Q5.QueryBySQLService=pW,Q5.DatasetMinDistanceAnalystParameters=F2,Q5.MinDistanceAnalystService=r3,Q5.TerrainCutFillCalculationParameters=_1,Q5.TerrainCutFillCalculationService=M1,Q5.terrainAnalystSetting=w7,Q5.TerrainAspectCalculationParameters=L1,Q5.TerrainAspectCalculationService=q1,Q5.TerrainSlopeCalculationParameters=J1,Q5.TerrainSlopeCalculationService=n2,Q5.GeometryMinDistanceAnalystParameters=Y2,Q5.ConvexHullAnalystParameters=t7,Q5.ConvexHullAnalystService=c3,Q5.TraceAnalystParameters=vU,Q5.TraceAnalystService=IU,Q5.ConnectedEdgesAnalystParameters=kU,Q5.ConnectedEdgesAnalystService=DU,Q5.GetLayersLegendInfoParameters=i7,Q5.GetLayersLegendInfoService=zF,Q5.QueryParameters=Sk,Q5.QueryService=jW,Q5.RasterFunctionParameter=pee,Q5.Route=an,Q5.RouteCalculateMeasureParameters=f0,Q5.RouteCalculateMeasureService=b0,Q5.RouteLocatorParameters=C0,Q5.RouteLocatorService=T0,Q5.ServerColor=Gr,Q5.ServerFeature=Ys,Q5.ServerGeometry=$n,Q5.ServerStyle=qr,Q5.ServerTextStyle=AR,Q5.ServerTheme=WD,Q5.SetDatasourceParameters=ej,Q5.SetLayerInfoParameters=l7,Q5.SetLayerInfoService=XF,Q5.SetLayersInfoParameters=h7,Q5.SetLayersInfoService=iQ,Q5.SetLayerStatusParameters=lQ,Q5.SetLayerStatusService=gQ,Q5.SingleObjectQueryJobsParameter=aK,Q5.SingleObjectQueryJobsService=dK,Q5.Sortby=Ite,Q5.SpatialAnalystBase=KW,Q5.StopQueryParameters=Z3,Q5.StopQueryService=a4,Q5.SummaryAttributesJobsParameter=zY,Q5.SummaryAttributesJobsService=ZY,Q5.SummaryMeshJobParameter=bK,Q5.SummaryMeshJobsService=xK,Q5.SummaryRegionJobParameter=oY,Q5.SummaryRegionJobsService=hY,Q5.SupplyCenter=g7,Q5.SurfaceAnalystParameters=F0,Q5.SurfaceAnalystParametersSetting=N0,Q5.SurfaceAnalystService=l1,Q5.TerrainCurvatureCalculationParameters=h1,Q5.TerrainCurvatureCalculationService=w1,Q5.Theme=mR,Q5.ThemeDotDensity=GL,Q5.ThemeFlow=_7,Q5.ThemeGraduatedSymbol=$L,Q5.ThemeGraduatedSymbolStyle=qL,Q5.ThemeGraph=BL,Q5.ThemeGraphAxes=yL,Q5.ThemeGraphItem=IL,Q5.ThemeGraphSize=vL,Q5.ThemeGraphText=SL,Q5.ThemeGridRange=D7,Q5.ThemeGridRangeItem=P7,Q5.ThemeGridUnique=W7,Q5.ThemeGridUniqueItem=U7,Q5.ThemeLabel=rL,Q5.ThemeLabelAlongLine=HR,Q5.ThemeLabelBackground=YR,Q5.ThemeLabelItem=ER,Q5.ThemeLabelText=QR,Q5.ThemeLabelUniqueItem=eee,Q5.ThemeMemoryData=oee,Q5.ThemeOffset=jR,Q5.ThemeParameters=M3,Q5.ThemeRange=fD,Q5.ThemeRangeItem=nD,Q5.ThemeService=G3,Q5.ThemeUnique=cL,Q5.ThemeUniqueItem=xR,Q5.ThiessenAnalystParameters=i$,Q5.ThiessenAnalystService=O2,Q5.TilesetsService=HQ,Q5.TopologyValidatorJobsParameter=kY,Q5.TopologyValidatorJobsService=FY,Q5.TransferLine=uee,Q5.TransferPathParameters=c4,Q5.TransferPathService=v4,Q5.TransferSolutionParameters=S4,Q5.TransferSolutionService=k4,Q5.TransportationAnalystParameter=HG,Q5.TransportationAnalystResultSetting=QG,Q5.UGCLayer=dD,Q5.UGCMapLayer=ED,Q5.UGCSubLayer=GD,Q5.UpdateDatasetParameters=zT,Q5.UpdateEdgeWeightParameters=aH,Q5.UpdateEdgeWeightService=yH,Q5.UpdateTurnNodeWeightParameters=vH,Q5.UpdateTurnNodeWeightService=IH,Q5.Vector=OF,Q5.VectorClipJobsParameter=jK,Q5.VectorClipJobsService=GK,Q5.WebPrintingJobContent=ate,Q5.WebPrintingJobCustomItems=jee,Q5.WebPrintingJobExportOptions=yte,Q5.WebPrintingJobImage=Ree,Q5.WebPrintingJobLayers=Qee,Q5.WebPrintingJobLayoutOptions=cte,Q5.WebPrintingJobLegendOptions=Hee,Q5.WebPrintingJobLittleMapOptions=Yee,Q5.WebPrintingJobNorthArrowOptions=Zee,Q5.WebPrintingJobParameters=vte,Q5.WebPrintingJobScaleBarOptions=rte,Q5.WebPrintingService=e5,Q5.Online=bre,Q5.OnlineData=dre,Q5.OnlineQueryDatasParameter=Cre,Q5.ServiceStatus={DOES_NOT_INVOLVE:"DOES_NOT_INVOLVE",PUBLISH_FAILED:"PUBLISH_FAILED",PUBLISHED:"PUBLISHED",PUBLISHING:"PUBLISHING",UNPUBLISHED:"UNPUBLISHED",UNPUBLISHED_FAILED:"UNPUBLISHED_FAILED"},Q5.DataItemType={GEOJSON:"GEOJSON",UGCV5_MVT:"UGCV5_MVT",JSON:"JSON",AUDIO:"AUDIO",COLOR:"COLOR",COLORSCHEME:"COLORSCHEME",CSV:"CSV",EXCEL:"EXCEL",FILLSYMBOL:"FILLSYMBOL",IMAGE:"IMAGE",LAYERTEMPLATE:"LAYERTEMPLATE",LAYOUTTEMPLATE:"LAYOUTTEMPLATE",LINESYMBOL:"LINESYMBOL",MAPTEMPLATE:"MAPTEMPLATE",MARKERSYMBOL:"MARKERSYMBOL",MBTILES:"MBTILES",PHOTOS:"PHOTOS",SHP:"SHP",SMTILES:"SMTILES",SVTILES:"SVTILES",THEMETEMPLATE:"THEMETEMPLATE",TPK:"TPK",UDB:"UDB",UGCV5:"UGCV5",UNKNOWN:"UNKNOWN",VIDEO:"VIDEO",WORKENVIRONMENT:"WORKENVIRONMENT",WORKSPACE:"WORKSPACE"},Q5.DataItemOrderBy={FILENAME:"FILENAME",ID:"ID",LASTMODIFIEDTIME:"LASTMODIFIEDTIME",NICKNAME:"NICKNAME",SERVICESTATUS:"SERVICESTATUS",SIZE:"SIZE",STATUS:"STATUS",TYPE:"TYPE",UPDATETIME:"UPDATETIME",USERNAME:"USERNAME"},Q5.FilterField={LINKPAGE:"LINKPAGE",MAPTITLE:"MAPTITLE",NICKNAME:"NICKNAME",RESTITLE:"RESTITLE",USERNAME:"USERNAME"},Q5.OnlineServiceBase=ure,Q5.Feature=Q5.Feature||{},Q5.Feature.Theme=zo,Q5.Feature.Theme.Bar=boe,Q5.Feature.Theme.Bar3D=Ooe,Q5.Feature.Theme.Circle=zoe,Q5.Feature.Theme.Graph=foe,Q5.Feature.Theme.Line=Xoe,Q5.Feature.Theme.Pie=iie,Q5.Feature.Theme.Point=hie,Q5.Feature.Theme.RankSymbol=Noe,Q5.Feature.Theme.Ring=wie,Q5.Feature.Theme.ThemeVector=Rc,Q5.Feature.ShapeParameters=fu,Q5.Feature.ShapeParameters.Circle=wl,Q5.Feature.ShapeParameters.Image=hl,Q5.Feature.ShapeParameters.Label=il,Q5.Feature.ShapeParameters.Line=Ou,Q5.Feature.ShapeParameters.Point=bu,Q5.Feature.ShapeParameters.Polygon=Nu,Q5.Feature.ShapeParameters.Rectangle=zu,Q5.Feature.ShapeParameters.Sector=Xu,Q5.Feature.ShapeFactory=Oc,Q5.LevelRenderer=Hs,Q5.KeyServiceParameter=Ore,Q5.SecurityManager=Fw,Q5.ServerInfo=Tre,Q5.TokenServiceParameter=Nre,Q5.decrypt=function(e){var t=function(e){var t,r=e.arrayBuffer,n=e.algorithm,o=void 0===n?"AES":n;if(!r||0===r.byteLength)return r;switch(o){case"AES":case"AES/CTR":t=function(e){var t=e.ivKey,r=void 0===t?[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]:t,n=e.decodeSize,o=void 0===n?256:n,i=Dre(Dre({},e),{},{ivKey:r,decodeSize:o});return une({Module:ane,newCipherName:"_UGCWasm_CipherAES_New",decryptCipherName:"_UGCWasm_CipherAES_Decrypt"},i)}(e);break;case"SM4":case"SM4/CTR":t=function(e){var t=e.ivKey,r=void 0===t?[48,49,50,51,52,53,54,55,56,57,97,98,99,100,101,102]:t,n=e.decodeSize,o=void 0===n?256:n,i=Dre(Dre({},e),{},{ivKey:r,decodeSize:o});return une({Module:fne,newCipherName:"_UGCWasm_CipherSM4_New",decryptCipherName:"_UGCWasm_CipherSM4_Decrypt",deleteCipherName:"_UGCWasm_CipherSM4_Delete"},i)}(e);break;default:t=r}return t}(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?hne(Object(r),!0).forEach(function(t){yne(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hne(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e));return(new TextDecoder).decode(new Uint8Array(t))},Q5.ThemeStyle=noe,Q5.CartoCSS=Zne,Q5.ElasticSearch=Ane,Q5.ArrayStatistic=Pne,Q5.ColorsPickerUtil=_ne,Q5.DataFormat=sn,Q5.ServerType=un,Q5.GeometryType=ln,Q5.QueryOption=cn,Q5.JoinType={INNERJOIN:"INNERJOIN",LEFTJOIN:"LEFTJOIN"},Q5.SpatialQueryMode=fn,Q5.SpatialRelationType={CONTAIN:"CONTAIN",INTERSECT:"INTERSECT",WITHIN:"WITHIN"},Q5.MeasureMode=pn,Q5.Unit=hn,Q5.BufferRadiusUnit=yn,Q5.EngineType={IMAGEPLUGINS:"IMAGEPLUGINS",OGC:"OGC",ORACLEPLUS:"ORACLEPLUS",SDBPLUS:"SDBPLUS",SQLPLUS:"SQLPLUS",UDB:"UDB"},Q5.ThemeGraphTextFormat=dn,Q5.ThemeGraphType=mn,Q5.GraphAxesTextDisplayMode=gn,Q5.GraduatedMode=vn,Q5.RangeMode=bn,Q5.ThemeType={DOTDENSITY:"DOTDENSITY",GRADUATEDSYMBOL:"GRADUATEDSYMBOL",GRAPH:"GRAPH",LABEL:"LABEL",RANGE:"RANGE",UNIQUE:"UNIQUE"},Q5.ColorGradientType=An,Q5.TextAlignment=wn,Q5.FillGradientMode={NONE:"NONE",LINEAR:"LINEAR",RADIAL:"RADIAL",CONICAL:"CONICAL",SQUARE:"SQUARE"},Q5.AlongLineDirection=Sn,Q5.LabelBackShape=Cn,Q5.LabelOverLengthMode=En,Q5.DirectionType={EAST:"EAST",NONE:"NONE",NORTH:"NORTH",SOURTH:"SOURTH",WEST:"WEST"},Q5.OverlayOperationType=In,Q5.OutputType=On,Q5.SideType={LEFT:"LEFT",MIDDLE:"MIDDLE",NONE:"NONE",RIGHT:"RIGHT"},Q5.SupplyCenterType={FIXEDCENTER:"FIXEDCENTER",NULL:"NULL",OPTIONALCENTER:"OPTIONALCENTER"},Q5.TurnType={AHEAD:"AHEAD",BACK:"BACK",END:"END",LEFT:"LEFT",NONE:"NONE",RIGHT:"RIGHT"},Q5.BufferEndType=_n,Q5.SmoothMethod=xn,Q5.SurfaceAnalystMethod=Pn,Q5.DataReturnMode=kn,Q5.EditType=Tn,Q5.TransferTactic=jn,Q5.TransferPreference=Mn,Q5.GridType={CROSS:"CROSS",GRID:"GRID",POINT:"POINT"},Q5.ColorSpaceType={CMYK:"CMYK",RGB:"RGB"},Q5.LayerType={UGC:"UGC",WMS:"WMS",WFS:"WFS",CUSTOM:"CUSTOM"},Q5.UGCLayerType={THEME:"THEME",VECTOR:"VECTOR",GRID:"GRID",IMAGE:"IMAGE"},Q5.StatisticMode={AVERAGE:"AVERAGE",MAX:"MAX",MIN:"MIN",STDDEVIATION:"STDDEVIATION",SUM:"SUM",VARIANCE:"VARIANCE"},Q5.PixelFormat={BIT16:"BIT16",BIT32:"BIT32",BIT64:"BIT64",SINGLE:"SINGLE",DOUBLE:"DOUBLE",UBIT1:"UBIT1",UBIT4:"UBIT4",UBIT8:"UBIT8",UBIT24:"UBIT24",UBIT32:"UBIT32"},Q5.SearchMode={KDTREE_FIXED_COUNT:"KDTREE_FIXED_COUNT",KDTREE_FIXED_RADIUS:"KDTREE_FIXED_RADIUS",NONE:"NONE",QUADTREE:"QUADTREE"},Q5.InterpolationAlgorithmType={KRIGING:"KRIGING",SimpleKriging:"SimpleKriging",UniversalKriging:"UniversalKriging"},Q5.VariogramMode=Bn,Q5.Exponent=Nn,Q5.ClientType=Rn,Q5.ChartType={BAR:"Bar",BAR3D:"Bar3D",CIRCLE:"Circle",PIE:"Pie",POINT:"Point",LINE:"Line",RING:"Ring"},Q5.ClipAnalystMode=Ln,Q5.AnalystAreaUnit=Dn,Q5.AnalystSizeUnit=Fn,Q5.StatisticAnalystMode=Qn,Q5.SummaryType=Gn,Q5.TopologyValidatorRule=Un,Q5.BucketAggType=zn,Q5.MetricsAggType=Hn,Q5.GetFeatureMode={BOUNDS:"BOUNDS",BUFFER:"BUFFER",ID:"ID",SPATIAL:"SPATIAL",SQL:"SQL"},Q5.RasterFunctionType=qn,Q5.ResourceType={MAP:"MAP",SERVICE:"SERVICE",SCENE:"SCENE",DATA:"DATA",INSIGHTS_WORKSPACE:"INSIGHTS_WORKSPACE",MAP_DASHBOARD:"MAP_DASHBOARD"},Q5.OrderBy={UPDATETIME:"UPDATETIME",HEATLEVEL:"HEATLEVEL",RELEVANCE:"RELEVANCE"},Q5.OrderType={ASC:"ASC",DESC:"DESC"},Q5.SearchType={PUBLIC:"PUBLIC",MY_RES:"MY_RES",MYGROUP_RES:"MYGROUP_RES",MYDEPARTMENT_RES:"MYDEPARTMENT_RES",SHARETOME_RES:"SHARETOME_RES"},Q5.AggregationTypes={TAG:"TAG",TYPE:"TYPE"},Q5.PermissionType={SEARCH:"SEARCH",READ:"READ",READWRITE:"READWRITE",DELETE:"DELETE",DOWNLOAD:"DOWNLOAD"},Q5.EntityType={DEPARTMENT:"DEPARTMENT",GROUP:"GROUP",IPORTALGROUP:"IPORTALGROUP",ROLE:"ROLE",USER:"USER"},Q5.WebExportFormatType={PNG:"PNG",PDF:"PDF"},Q5.WebScaleOrientationType={HORIZONTALLABELSBELOW:"HORIZONTALLABELSBELOW",HORIZONTALLABELSABOVE:"HORIZONTALLABELSABOVE",VERTICALLABELSLEFT:"VERTICALLABELSLEFT",VERTICALLABELSRIGHT:"VERTICALLABELSRIGHT"},Q5.WebScaleType={LINE:"LINE",BAR:"BAR",BAR_SUB:"BAR_SUB"},Q5.WebScaleUnit={METER:"METER",FOOT:"FOOT",DEGREES:"DEGREES"},Q5.KnowledgeGraph=ZS,Q5.BoundsType=Vn,Q5.CellSizeType=Kn,Q5.ColourModeChart=Yn,Q5.DisplayModeChart=Jn,Q5.VideoFeature=ore;var fse=r(368),pse=r(9973);function hse(e){"@babel/helpers - typeof";return(hse="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var yse=function(e,t){return(yse=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};function dse(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}yse(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function mse(e,t){var r=e[0],n=e[1];return[r*Math.cos(t)-n*Math.sin(t),r*Math.sin(t)+n*Math.cos(t)]}function gse(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=0;r<e.length;r++)if("number"!=typeof e[r])throw new Error("assertNumbers arguments["+r+"] is not a number. "+hse(e[r])+" == typeof "+e[r]);return!0}var vse=Math.PI;function bse(e,t,r){e.lArcFlag=0===e.lArcFlag?0:1,e.sweepFlag=0===e.sweepFlag?0:1;var n=e.rX,o=e.rY,i=e.x,a=e.y;n=Math.abs(e.rX),o=Math.abs(e.rY);var s=mse([(t-i)/2,(r-a)/2],-e.xRot/180*vse),u=s[0],l=s[1],c=Math.pow(u,2)/Math.pow(n,2)+Math.pow(l,2)/Math.pow(o,2);1<c&&(n*=Math.sqrt(c),o*=Math.sqrt(c)),e.rX=n,e.rY=o;var f=Math.pow(n,2)*Math.pow(l,2)+Math.pow(o,2)*Math.pow(u,2),p=(e.lArcFlag!==e.sweepFlag?1:-1)*Math.sqrt(Math.max(0,(Math.pow(n,2)*Math.pow(o,2)-f)/f)),h=n*l/o*p,y=-o*u/n*p,d=mse([h,y],e.xRot/180*vse);e.cX=d[0]+(t+i)/2,e.cY=d[1]+(r+a)/2,e.phi1=Math.atan2((l-y)/o,(u-h)/n),e.phi2=Math.atan2((-l-y)/o,(-u-h)/n),0===e.sweepFlag&&e.phi2>e.phi1&&(e.phi2-=2*vse),1===e.sweepFlag&&e.phi2<e.phi1&&(e.phi2+=2*vse),e.phi1*=180/vse,e.phi2*=180/vse}function Ase(e,t,r){gse(e,t,r);var n=e*e+t*t-r*r;if(0>n)return[];if(0===n)return[[e*r/(e*e+t*t),t*r/(e*e+t*t)]];var o=Math.sqrt(n);return[[(e*r+t*o)/(e*e+t*t),(t*r-e*o)/(e*e+t*t)],[(e*r-t*o)/(e*e+t*t),(t*r+e*o)/(e*e+t*t)]]}var wse,Sse=Math.PI/180;function Cse(e,t,r){return(1-r)*e+r*t}function Ese(e,t,r,n){return e+Math.cos(n/180*vse)*t+Math.sin(n/180*vse)*r}function _se(e,t,r,n){var o=t-e,i=r-t,a=3*o+3*(n-r)-6*i,s=6*(i-o),u=3*o;return Math.abs(a)<1e-6?[-u/s]:function(e,t,r){void 0===r&&(r=1e-6);var n=e*e/4-u/a;if(n<-r)return[];if(n<=r)return[-e/2];var o=Math.sqrt(n);return[-e/2-o,-e/2+o]}(s/a,0,1e-6)}function Ise(e,t,r,n,o){var i=1-o;return e*(i*i*i)+t*(3*i*i*o)+r*(3*i*o*o)+n*(o*o*o)}!function(e){function t(){return o(function(e,t,r){return e.relative&&(void 0!==e.x1&&(e.x1+=t),void 0!==e.y1&&(e.y1+=r),void 0!==e.x2&&(e.x2+=t),void 0!==e.y2&&(e.y2+=r),void 0!==e.x&&(e.x+=t),void 0!==e.y&&(e.y+=r),e.relative=!1),e})}function r(){var e=NaN,t=NaN,r=NaN,n=NaN;return o(function(o,i,a){return o.type&jse.SMOOTH_CURVE_TO&&(o.type=jse.CURVE_TO,e=isNaN(e)?i:e,t=isNaN(t)?a:t,o.x1=o.relative?i-e:2*i-e,o.y1=o.relative?a-t:2*a-t),o.type&jse.CURVE_TO?(e=o.relative?i+o.x2:o.x2,t=o.relative?a+o.y2:o.y2):(e=NaN,t=NaN),o.type&jse.SMOOTH_QUAD_TO&&(o.type=jse.QUAD_TO,r=isNaN(r)?i:r,n=isNaN(n)?a:n,o.x1=o.relative?i-r:2*i-r,o.y1=o.relative?a-n:2*a-n),o.type&jse.QUAD_TO?(r=o.relative?i+o.x1:o.x1,n=o.relative?a+o.y1:o.y1):(r=NaN,n=NaN),o})}function n(){var e=NaN,t=NaN;return o(function(r,n,o){if(r.type&jse.SMOOTH_QUAD_TO&&(r.type=jse.QUAD_TO,e=isNaN(e)?n:e,t=isNaN(t)?o:t,r.x1=r.relative?n-e:2*n-e,r.y1=r.relative?o-t:2*o-t),r.type&jse.QUAD_TO){e=r.relative?n+r.x1:r.x1,t=r.relative?o+r.y1:r.y1;var i=r.x1,a=r.y1;r.type=jse.CURVE_TO,r.x1=((r.relative?0:n)+2*i)/3,r.y1=((r.relative?0:o)+2*a)/3,r.x2=(r.x+2*i)/3,r.y2=(r.y+2*a)/3}else e=NaN,t=NaN;return r})}function o(e){var t=0,r=0,n=NaN,o=NaN;return function(i){if(isNaN(n)&&!(i.type&jse.MOVE_TO))throw new Error("path must start with moveto");var a=e(i,t,r,n,o);return i.type&jse.CLOSE_PATH&&(t=n,r=o),void 0!==i.x&&(t=i.relative?t+i.x:i.x),void 0!==i.y&&(r=i.relative?r+i.y:i.y),i.type&jse.MOVE_TO&&(n=t,o=r),a}}function i(e,t,r,n,i,a){return gse(e,t,r,n,i,a),o(function(o,s,u,l){var c=o.x1,f=o.x2,p=o.relative&&!isNaN(l),h=void 0!==o.x?o.x:p?0:s,y=void 0!==o.y?o.y:p?0:u;function d(e){return e*e}o.type&jse.HORIZ_LINE_TO&&0!==t&&(o.type=jse.LINE_TO,o.y=o.relative?0:u),o.type&jse.VERT_LINE_TO&&0!==r&&(o.type=jse.LINE_TO,o.x=o.relative?0:s),void 0!==o.x&&(o.x=o.x*e+y*r+(p?0:i)),void 0!==o.y&&(o.y=h*t+o.y*n+(p?0:a)),void 0!==o.x1&&(o.x1=o.x1*e+o.y1*r+(p?0:i)),void 0!==o.y1&&(o.y1=c*t+o.y1*n+(p?0:a)),void 0!==o.x2&&(o.x2=o.x2*e+o.y2*r+(p?0:i)),void 0!==o.y2&&(o.y2=f*t+o.y2*n+(p?0:a));var m=e*n-t*r;if(void 0!==o.xRot&&(1!==e||0!==t||0!==r||1!==n))if(0===m)delete o.rX,delete o.rY,delete o.xRot,delete o.lArcFlag,delete o.sweepFlag,o.type=jse.LINE_TO;else{var g=o.xRot*Math.PI/180,v=Math.sin(g),b=Math.cos(g),A=1/d(o.rX),w=1/d(o.rY),S=d(b)*A+d(v)*w,C=2*v*b*(A-w),E=d(v)*A+d(b)*w,_=S*n*n-C*t*n+E*t*t,I=C*(e*n+t*r)-2*(S*r*n+E*e*t),O=S*r*r-C*e*r+E*e*e,x=(Math.atan2(I,_-O)+Math.PI)%Math.PI/2,P=Math.sin(x),k=Math.cos(x);o.rX=Math.abs(m)/Math.sqrt(_*d(k)+I*P*k+O*d(P)),o.rY=Math.abs(m)/Math.sqrt(_*d(P)-I*P*k+O*d(k)),o.xRot=180*x/Math.PI}return void 0!==o.sweepFlag&&0>m&&(o.sweepFlag=+!o.sweepFlag),o})}e.ROUND=function(e){function t(t){return Math.round(t*e)/e}return void 0===e&&(e=1e13),gse(e),function(e){return void 0!==e.x1&&(e.x1=t(e.x1)),void 0!==e.y1&&(e.y1=t(e.y1)),void 0!==e.x2&&(e.x2=t(e.x2)),void 0!==e.y2&&(e.y2=t(e.y2)),void 0!==e.x&&(e.x=t(e.x)),void 0!==e.y&&(e.y=t(e.y)),void 0!==e.rX&&(e.rX=t(e.rX)),void 0!==e.rY&&(e.rY=t(e.rY)),e}},e.TO_ABS=t,e.TO_REL=function(){return o(function(e,t,r){return e.relative||(void 0!==e.x1&&(e.x1-=t),void 0!==e.y1&&(e.y1-=r),void 0!==e.x2&&(e.x2-=t),void 0!==e.y2&&(e.y2-=r),void 0!==e.x&&(e.x-=t),void 0!==e.y&&(e.y-=r),e.relative=!0),e})},e.NORMALIZE_HVZ=function(e,t,r){return void 0===e&&(e=!0),void 0===t&&(t=!0),void 0===r&&(r=!0),o(function(n,o,i,a,s){if(isNaN(a)&&!(n.type&jse.MOVE_TO))throw new Error("path must start with moveto");return t&&n.type&jse.HORIZ_LINE_TO&&(n.type=jse.LINE_TO,n.y=n.relative?0:i),r&&n.type&jse.VERT_LINE_TO&&(n.type=jse.LINE_TO,n.x=n.relative?0:o),e&&n.type&jse.CLOSE_PATH&&(n.type=jse.LINE_TO,n.x=n.relative?a-o:a,n.y=n.relative?s-i:s),n.type&jse.ARC&&(0===n.rX||0===n.rY)&&(n.type=jse.LINE_TO,delete n.rX,delete n.rY,delete n.xRot,delete n.lArcFlag,delete n.sweepFlag),n})},e.NORMALIZE_ST=r,e.QT_TO_C=n,e.INFO=o,e.SANITIZE=function(e){void 0===e&&(e=0),gse(e);var t=NaN,r=NaN,n=NaN,i=NaN;return o(function(o,a,s,u,l){var c=Math.abs,f=!1,p=0,h=0;if(o.type&jse.SMOOTH_CURVE_TO&&(p=isNaN(t)?0:a-t,h=isNaN(r)?0:s-r),o.type&(jse.CURVE_TO|jse.SMOOTH_CURVE_TO)?(t=o.relative?a+o.x2:o.x2,r=o.relative?s+o.y2:o.y2):(t=NaN,r=NaN),o.type&jse.SMOOTH_QUAD_TO?(n=isNaN(n)?a:2*a-n,i=isNaN(i)?s:2*s-i):o.type&jse.QUAD_TO?(n=o.relative?a+o.x1:o.x1,i=o.relative?s+o.y1:o.y2):(n=NaN,i=NaN),o.type&jse.LINE_COMMANDS||o.type&jse.ARC&&(0===o.rX||0===o.rY||!o.lArcFlag)||o.type&jse.CURVE_TO||o.type&jse.SMOOTH_CURVE_TO||o.type&jse.QUAD_TO||o.type&jse.SMOOTH_QUAD_TO){var y=void 0===o.x?0:o.relative?o.x:o.x-a,d=void 0===o.y?0:o.relative?o.y:o.y-s;p=isNaN(n)?void 0===o.x1?p:o.relative?o.x:o.x1-a:n-a,h=isNaN(i)?void 0===o.y1?h:o.relative?o.y:o.y1-s:i-s;var m=void 0===o.x2?0:o.relative?o.x:o.x2-a,g=void 0===o.y2?0:o.relative?o.y:o.y2-s;c(y)<=e&&c(d)<=e&&c(p)<=e&&c(h)<=e&&c(m)<=e&&c(g)<=e&&(f=!0)}return o.type&jse.CLOSE_PATH&&c(a-u)<=e&&c(s-l)<=e&&(f=!0),f?[]:o})},e.MATRIX=i,e.ROTATE=function(e,t,r){void 0===t&&(t=0),void 0===r&&(r=0),gse(e,t,r);var n=Math.sin(e),o=Math.cos(e);return i(o,n,-n,o,t-t*o+r*n,r-t*n-r*o)},e.TRANSLATE=function(e,t){return void 0===t&&(t=0),gse(e,t),i(1,0,0,1,e,t)},e.SCALE=function(e,t){return void 0===t&&(t=e),gse(e,t),i(e,0,0,t,0,0)},e.SKEW_X=function(e){return gse(e),i(1,0,Math.atan(e),1,0,0)},e.SKEW_Y=function(e){return gse(e),i(1,Math.atan(e),0,1,0,0)},e.X_AXIS_SYMMETRY=function(e){return void 0===e&&(e=0),gse(e),i(-1,0,0,1,e,0)},e.Y_AXIS_SYMMETRY=function(e){return void 0===e&&(e=0),gse(e),i(1,0,0,-1,0,e)},e.A_TO_C=function(){return o(function(e,t,r){return jse.ARC===e.type?function(e,t,r){var n,o,i,a;e.cX||bse(e,t,r);for(var s=Math.min(e.phi1,e.phi2),u=Math.max(e.phi1,e.phi2)-s,l=Math.ceil(u/90),c=new Array(l),f=t,p=r,h=0;h<l;h++){var y=Cse(e.phi1,e.phi2,h/l),d=Cse(e.phi1,e.phi2,(h+1)/l),m=d-y,g=4/3*Math.tan(m*Sse/4),v=[Math.cos(y*Sse)-g*Math.sin(y*Sse),Math.sin(y*Sse)+g*Math.cos(y*Sse)],b=v[0],A=v[1],w=[Math.cos(d*Sse),Math.sin(d*Sse)],S=w[0],C=w[1],E=[S+g*Math.sin(d*Sse),C-g*Math.cos(d*Sse)],_=E[0],I=E[1];c[h]={relative:e.relative,type:jse.CURVE_TO};var O=function(t,r){var n=mse([t*e.rX,r*e.rY],e.xRot),o=n[0],i=n[1];return[e.cX+o,e.cY+i]};n=O(b,A),c[h].x1=n[0],c[h].y1=n[1],o=O(_,I),c[h].x2=o[0],c[h].y2=o[1],i=O(S,C),c[h].x=i[0],c[h].y=i[1],e.relative&&(c[h].x1-=f,c[h].y1-=p,c[h].x2-=f,c[h].y2-=p,c[h].x-=f,c[h].y-=p),f=(a=[c[h].x,c[h].y])[0],p=a[1]}return c}(e,e.relative?0:t,e.relative?0:r):e})},e.ANNOTATE_ARCS=function(){return o(function(e,t,r){return e.relative&&(t=0,r=0),jse.ARC===e.type&&bse(e,t,r),e})},e.CLONE=function(){return function(e){var t={};for(var r in e)t[r]=e[r];return t}},e.CALCULATE_BOUNDS=function(){var e=t(),i=n(),a=r(),s=o(function(t,r,n){var o=a(i(e(function(e){var t={};for(var r in e)t[r]=e[r];return t}(t))));function u(e){e>s.maxX&&(s.maxX=e),e<s.minX&&(s.minX=e)}function l(e){e>s.maxY&&(s.maxY=e),e<s.minY&&(s.minY=e)}if(o.type&jse.DRAWING_COMMANDS&&(u(r),l(n)),o.type&jse.HORIZ_LINE_TO&&u(o.x),o.type&jse.VERT_LINE_TO&&l(o.y),o.type&jse.LINE_TO&&(u(o.x),l(o.y)),o.type&jse.CURVE_TO){u(o.x),l(o.y);for(var c=0,f=_se(r,o.x1,o.x2,o.x);c<f.length;c++)0<(O=f[c])&&1>O&&u(Ise(r,o.x1,o.x2,o.x,O));for(var p=0,h=_se(n,o.y1,o.y2,o.y);p<h.length;p++)0<(O=h[p])&&1>O&&l(Ise(n,o.y1,o.y2,o.y,O))}if(o.type&jse.ARC){u(o.x),l(o.y),bse(o,r,n);for(var y=o.xRot/180*Math.PI,d=Math.cos(y)*o.rX,m=Math.sin(y)*o.rX,g=-Math.sin(y)*o.rY,v=Math.cos(y)*o.rY,b=o.phi1<o.phi2?[o.phi1,o.phi2]:-180>o.phi2?[o.phi2+360,o.phi1+360]:[o.phi2,o.phi1],A=b[0],w=b[1],S=function(e){var t=e[0],r=e[1],n=180*Math.atan2(r,t)/Math.PI;return n<A?n+360:n},C=0,E=Ase(g,-d,0).map(S);C<E.length;C++)(O=E[C])>A&&O<w&&u(Ese(o.cX,d,g,O));for(var _=0,I=Ase(v,-m,0).map(S);_<I.length;_++){var O;(O=I[_])>A&&O<w&&l(Ese(o.cY,m,v,O))}}return t});return s.minX=1/0,s.maxX=-1/0,s.minY=1/0,s.maxY=-1/0,s}}(wse||(wse={}));var Ose,xse=function(){function e(){}return e.prototype.round=function(e){return this.transform(wse.ROUND(e))},e.prototype.toAbs=function(){return this.transform(wse.TO_ABS())},e.prototype.toRel=function(){return this.transform(wse.TO_REL())},e.prototype.normalizeHVZ=function(e,t,r){return this.transform(wse.NORMALIZE_HVZ(e,t,r))},e.prototype.normalizeST=function(){return this.transform(wse.NORMALIZE_ST())},e.prototype.qtToC=function(){return this.transform(wse.QT_TO_C())},e.prototype.aToC=function(){return this.transform(wse.A_TO_C())},e.prototype.sanitize=function(e){return this.transform(wse.SANITIZE(e))},e.prototype.translate=function(e,t){return this.transform(wse.TRANSLATE(e,t))},e.prototype.scale=function(e,t){return this.transform(wse.SCALE(e,t))},e.prototype.rotate=function(e,t,r){return this.transform(wse.ROTATE(e,t,r))},e.prototype.matrix=function(e,t,r,n,o,i){return this.transform(wse.MATRIX(e,t,r,n,o,i))},e.prototype.skewX=function(e){return this.transform(wse.SKEW_X(e))},e.prototype.skewY=function(e){return this.transform(wse.SKEW_Y(e))},e.prototype.xSymmetry=function(e){return this.transform(wse.X_AXIS_SYMMETRY(e))},e.prototype.ySymmetry=function(e){return this.transform(wse.Y_AXIS_SYMMETRY(e))},e.prototype.annotateArcs=function(){return this.transform(wse.ANNOTATE_ARCS())},e}(),Pse=function(e){return" "===e||"\t"===e||"\r"===e||"\n"===e},kse=function(e){return"0".charCodeAt(0)<=e.charCodeAt(0)&&e.charCodeAt(0)<="9".charCodeAt(0)},Tse=function(e){function t(){var t=e.call(this)||this;return t.curNumber="",t.curCommandType=-1,t.curCommandRelative=!1,t.canParseCommandOrComma=!0,t.curNumberHasExp=!1,t.curNumberHasExpDigits=!1,t.curNumberHasDecimal=!1,t.curArgs=[],t}return dse(t,e),t.prototype.finish=function(e){if(void 0===e&&(e=[]),this.parse(" ",e),0!==this.curArgs.length||!this.canParseCommandOrComma)throw new SyntaxError("Unterminated command at the path end.");return e},t.prototype.parse=function(e,t){var r=this;void 0===t&&(t=[]);for(var n=function(e){t.push(e),r.curArgs.length=0,r.canParseCommandOrComma=!0},o=0;o<e.length;o++){var i=e[o],a=!(this.curCommandType!==jse.ARC||3!==this.curArgs.length&&4!==this.curArgs.length||1!==this.curNumber.length||"0"!==this.curNumber&&"1"!==this.curNumber),s=kse(i)&&("0"===this.curNumber&&"0"===i||a);if(!kse(i)||s)if("e"!==i&&"E"!==i)if("-"!==i&&"+"!==i||!this.curNumberHasExp||this.curNumberHasExpDigits)if("."!==i||this.curNumberHasExp||this.curNumberHasDecimal||a){if(this.curNumber&&-1!==this.curCommandType){var u=Number(this.curNumber);if(isNaN(u))throw new SyntaxError("Invalid number ending at "+o);if(this.curCommandType===jse.ARC)if(0===this.curArgs.length||1===this.curArgs.length){if(0>u)throw new SyntaxError('Expected positive number, got "'+u+'" at index "'+o+'"')}else if((3===this.curArgs.length||4===this.curArgs.length)&&"0"!==this.curNumber&&"1"!==this.curNumber)throw new SyntaxError('Expected a flag, got "'+this.curNumber+'" at index "'+o+'"');this.curArgs.push(u),this.curArgs.length===Mse[this.curCommandType]&&(jse.HORIZ_LINE_TO===this.curCommandType?n({type:jse.HORIZ_LINE_TO,relative:this.curCommandRelative,x:u}):jse.VERT_LINE_TO===this.curCommandType?n({type:jse.VERT_LINE_TO,relative:this.curCommandRelative,y:u}):this.curCommandType===jse.MOVE_TO||this.curCommandType===jse.LINE_TO||this.curCommandType===jse.SMOOTH_QUAD_TO?(n({type:this.curCommandType,relative:this.curCommandRelative,x:this.curArgs[0],y:this.curArgs[1]}),jse.MOVE_TO===this.curCommandType&&(this.curCommandType=jse.LINE_TO)):this.curCommandType===jse.CURVE_TO?n({type:jse.CURVE_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x2:this.curArgs[2],y2:this.curArgs[3],x:this.curArgs[4],y:this.curArgs[5]}):this.curCommandType===jse.SMOOTH_CURVE_TO?n({type:jse.SMOOTH_CURVE_TO,relative:this.curCommandRelative,x2:this.curArgs[0],y2:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===jse.QUAD_TO?n({type:jse.QUAD_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===jse.ARC&&n({type:jse.ARC,relative:this.curCommandRelative,rX:this.curArgs[0],rY:this.curArgs[1],xRot:this.curArgs[2],lArcFlag:this.curArgs[3],sweepFlag:this.curArgs[4],x:this.curArgs[5],y:this.curArgs[6]})),this.curNumber="",this.curNumberHasExpDigits=!1,this.curNumberHasExp=!1,this.curNumberHasDecimal=!1,this.canParseCommandOrComma=!0}if(!Pse(i))if(","===i&&this.canParseCommandOrComma)this.canParseCommandOrComma=!1;else if("+"!==i&&"-"!==i&&"."!==i)if(s)this.curNumber=i,this.curNumberHasDecimal=!1;else{if(0!==this.curArgs.length)throw new SyntaxError("Unterminated command at index "+o+".");if(!this.canParseCommandOrComma)throw new SyntaxError('Unexpected character "'+i+'" at index '+o+". Command cannot follow comma");if(this.canParseCommandOrComma=!1,"z"!==i&&"Z"!==i)if("h"===i||"H"===i)this.curCommandType=jse.HORIZ_LINE_TO,this.curCommandRelative="h"===i;else if("v"===i||"V"===i)this.curCommandType=jse.VERT_LINE_TO,this.curCommandRelative="v"===i;else if("m"===i||"M"===i)this.curCommandType=jse.MOVE_TO,this.curCommandRelative="m"===i;else if("l"===i||"L"===i)this.curCommandType=jse.LINE_TO,this.curCommandRelative="l"===i;else if("c"===i||"C"===i)this.curCommandType=jse.CURVE_TO,this.curCommandRelative="c"===i;else if("s"===i||"S"===i)this.curCommandType=jse.SMOOTH_CURVE_TO,this.curCommandRelative="s"===i;else if("q"===i||"Q"===i)this.curCommandType=jse.QUAD_TO,this.curCommandRelative="q"===i;else if("t"===i||"T"===i)this.curCommandType=jse.SMOOTH_QUAD_TO,this.curCommandRelative="t"===i;else{if("a"!==i&&"A"!==i)throw new SyntaxError('Unexpected character "'+i+'" at index '+o+".");this.curCommandType=jse.ARC,this.curCommandRelative="a"===i}else t.push({type:jse.CLOSE_PATH}),this.canParseCommandOrComma=!0,this.curCommandType=-1}else this.curNumber=i,this.curNumberHasDecimal="."===i}else this.curNumber+=i,this.curNumberHasDecimal=!0;else this.curNumber+=i;else this.curNumber+=i,this.curNumberHasExp=!0;else this.curNumber+=i,this.curNumberHasExpDigits=this.curNumberHasExp}return t},t.prototype.transform=function(e){return Object.create(this,{parse:{value:function(t,r){void 0===r&&(r=[]);for(var n=0,o=Object.getPrototypeOf(this).parse.call(this,t);n<o.length;n++){var i=o[n],a=e(i);Array.isArray(a)?r.push.apply(r,a):r.push(a)}return r}}})},t}(xse),jse=function(e){function t(r){var n=e.call(this)||this;return n.commands="string"==typeof r?t.parse(r):r,n}return dse(t,e),t.prototype.encode=function(){return t.encode(this.commands)},t.prototype.getBounds=function(){var e=wse.CALCULATE_BOUNDS();return this.transform(e),e},t.prototype.transform=function(e){for(var t=[],r=0,n=this.commands;r<n.length;r++){var o=e(n[r]);Array.isArray(o)?t.push.apply(t,o):t.push(o)}return this.commands=t,this},t.encode=function(e){return function(e){var t="";Array.isArray(e)||(e=[e]);for(var r=0;r<e.length;r++){var n=e[r];if(n.type===jse.CLOSE_PATH)t+="z";else if(n.type===jse.HORIZ_LINE_TO)t+=(n.relative?"h":"H")+n.x;else if(n.type===jse.VERT_LINE_TO)t+=(n.relative?"v":"V")+n.y;else if(n.type===jse.MOVE_TO)t+=(n.relative?"m":"M")+n.x+" "+n.y;else if(n.type===jse.LINE_TO)t+=(n.relative?"l":"L")+n.x+" "+n.y;else if(n.type===jse.CURVE_TO)t+=(n.relative?"c":"C")+n.x1+" "+n.y1+" "+n.x2+" "+n.y2+" "+n.x+" "+n.y;else if(n.type===jse.SMOOTH_CURVE_TO)t+=(n.relative?"s":"S")+n.x2+" "+n.y2+" "+n.x+" "+n.y;else if(n.type===jse.QUAD_TO)t+=(n.relative?"q":"Q")+n.x1+" "+n.y1+" "+n.x+" "+n.y;else if(n.type===jse.SMOOTH_QUAD_TO)t+=(n.relative?"t":"T")+n.x+" "+n.y;else{if(n.type!==jse.ARC)throw new Error('Unexpected command type "'+n.type+'" at index '+r+".");t+=(n.relative?"a":"A")+n.rX+" "+n.rY+" "+n.xRot+" "+ +n.lArcFlag+" "+ +n.sweepFlag+" "+n.x+" "+n.y}}return t}(e)},t.parse=function(e){var t=new Tse,r=[];return t.parse(e,r),t.finish(r),r},t.CLOSE_PATH=1,t.MOVE_TO=2,t.HORIZ_LINE_TO=4,t.VERT_LINE_TO=8,t.LINE_TO=16,t.CURVE_TO=32,t.SMOOTH_CURVE_TO=64,t.QUAD_TO=128,t.SMOOTH_QUAD_TO=256,t.ARC=512,t.LINE_COMMANDS=t.LINE_TO|t.HORIZ_LINE_TO|t.VERT_LINE_TO,t.DRAWING_COMMANDS=t.HORIZ_LINE_TO|t.VERT_LINE_TO|t.LINE_TO|t.CURVE_TO|t.SMOOTH_CURVE_TO|t.QUAD_TO|t.SMOOTH_QUAD_TO|t.ARC,t}(xse),Mse=((Ose={})[jse.MOVE_TO]=2,Ose[jse.LINE_TO]=2,Ose[jse.HORIZ_LINE_TO]=1,Ose[jse.VERT_LINE_TO]=1,Ose[jse.CLOSE_PATH]=0,Ose[jse.QUAD_TO]=4,Ose[jse.SMOOTH_QUAD_TO]=2,Ose[jse.CURVE_TO]=6,Ose[jse.SMOOTH_CURVE_TO]=4,Ose[jse.ARC]=7,Ose);function Bse(e){"@babel/helpers - typeof";return(Bse="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Nse=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],Rse=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function Lse(e,t,r,n,o){if("string"==typeof e&&(e=document.getElementById(e)),!(e&&"object"===Bse(e)&&"getContext"in e))throw new TypeError("Expecting canvas with `getContext` method in processCanvasRGB(A) calls!");var i=e.getContext("2d");try{return i.getImageData(t,r,n,o)}catch(e){throw new Error("unable to access image data: "+e)}}function Dse(e,t,r,n,o,i){if(!(isNaN(i)||i<1)){i|=0;var a=Lse(e,t,r,n,o);a=function(e,t,r,n,o,i){for(var a,s=e.data,u=2*i+1,l=n-1,c=o-1,f=i+1,p=f*(f+1)/2,h=new Fse,y=h,d=1;d<u;d++)y=y.next=new Fse,d===f&&(a=y);y.next=h;for(var m=null,g=null,v=0,b=0,A=Nse[i],w=Rse[i],S=0;S<o;S++){y=h;for(var C=s[b],E=s[b+1],_=s[b+2],I=s[b+3],O=0;O<f;O++)y.r=C,y.g=E,y.b=_,y.a=I,y=y.next;for(var x=0,P=0,k=0,T=0,j=f*C,M=f*E,B=f*_,N=f*I,R=p*C,L=p*E,D=p*_,F=p*I,Q=1;Q<f;Q++){var G=b+((l<Q?l:Q)<<2),U=s[G],z=s[G+1],H=s[G+2],q=s[G+3],V=f-Q;R+=(y.r=U)*V,L+=(y.g=z)*V,D+=(y.b=H)*V,F+=(y.a=q)*V,x+=U,P+=z,k+=H,T+=q,y=y.next}m=h,g=a;for(var K=0;K<n;K++){var Y=F*A>>>w;if(s[b+3]=Y,0!==Y){var J=255/Y;s[b]=(R*A>>>w)*J,s[b+1]=(L*A>>>w)*J,s[b+2]=(D*A>>>w)*J}else s[b]=s[b+1]=s[b+2]=0;R-=j,L-=M,D-=B,F-=N,j-=m.r,M-=m.g,B-=m.b,N-=m.a;var W=K+i+1;W=v+(W<l?W:l)<<2,x+=m.r=s[W],P+=m.g=s[W+1],k+=m.b=s[W+2],T+=m.a=s[W+3],R+=x,L+=P,D+=k,F+=T,m=m.next;var X=g,Z=X.r,$=X.g,ee=X.b,te=X.a;j+=Z,M+=$,B+=ee,N+=te,x-=Z,P-=$,k-=ee,T-=te,g=g.next,b+=4}v+=n}for(var re=0;re<n;re++){var ne=s[b=re<<2],oe=s[b+1],ie=s[b+2],ae=s[b+3],se=f*ne,ue=f*oe,le=f*ie,ce=f*ae,fe=p*ne,pe=p*oe,he=p*ie,ye=p*ae;y=h;for(var de=0;de<f;de++)y.r=ne,y.g=oe,y.b=ie,y.a=ae,y=y.next;for(var me=n,ge=0,ve=0,be=0,Ae=0,we=1;we<=i;we++){b=me+re<<2;var Se=f-we;fe+=(y.r=ne=s[b])*Se,pe+=(y.g=oe=s[b+1])*Se,he+=(y.b=ie=s[b+2])*Se,ye+=(y.a=ae=s[b+3])*Se,Ae+=ne,ge+=oe,ve+=ie,be+=ae,y=y.next,we<c&&(me+=n)}b=re,m=h,g=a;for(var Ce=0;Ce<o;Ce++){var Ee=b<<2;s[Ee+3]=ae=ye*A>>>w,ae>0?(ae=255/ae,s[Ee]=(fe*A>>>w)*ae,s[Ee+1]=(pe*A>>>w)*ae,s[Ee+2]=(he*A>>>w)*ae):s[Ee]=s[Ee+1]=s[Ee+2]=0,fe-=se,pe-=ue,he-=le,ye-=ce,se-=m.r,ue-=m.g,le-=m.b,ce-=m.a,Ee=re+((Ee=Ce+f)<c?Ee:c)*n<<2,fe+=Ae+=m.r=s[Ee],pe+=ge+=m.g=s[Ee+1],he+=ve+=m.b=s[Ee+2],ye+=be+=m.a=s[Ee+3],m=m.next,se+=ne=g.r,ue+=oe=g.g,le+=ie=g.b,ce+=ae=g.a,Ae-=ne,ge-=oe,ve-=ie,be-=ae,g=g.next,b+=n}}return e}(a,0,0,n,o,i),e.getContext("2d").putImageData(a,t,r)}}var Fse=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.r=0,this.g=0,this.b=0,this.a=0,this.next=null};function Qse(e){"@babel/helpers - typeof";return(Qse="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gse(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Use(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Gse(Object(r),!0).forEach(function(t){zse(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gse(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function zse(e,t,r){return(t=rue(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Hse(e,t,r,n){var o=qse(Wse(1&n?e.prototype:e),t,r);return 2&n&&"function"==typeof o?function(e){return o.apply(r,e)}:o}function qse(){return(qse="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=Wse(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function Vse(e){return function(e){if(Array.isArray(e))return iue(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||oue(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kse(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=oue(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function Yse(e,t,r){return t=Wse(t),Jse(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],Wse(e).constructor):t.apply(e,r))}function Jse(e,t){if(t&&("object"==Qse(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Wse(e){return(Wse=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xse(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zse(e,t)}function Zse(e,t){return(Zse=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function $se(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function eue(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,rue(n.key),n)}}function tue(e,t,r){return t&&eue(e.prototype,t),r&&eue(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function rue(e){var t=function(e,t){if("object"!=Qse(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Qse(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Qse(t)?t:t+""}function nue(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],u=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||oue(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oue(e,t){if(e){if("string"==typeof e)return iue(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?iue(e,t):void 0}}function iue(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function aue(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof s?n:s,l=Object.create(u.prototype);return sue(l,"_invoke",function(r,n,o){var i,s,u,l=0,c=o||[],f=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,r){return i=t,s=0,u=e,p.n=r,a}};function h(r,n){for(s=r,u=n,t=0;!f&&l&&!o&&t<c.length;t++){var o,i=c[t],h=p.p,y=i[2];r>3?(o=y===n)&&(u=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=r<2&&h<i[1])?(s=0,p.v=n,p.n=i[1]):h<y&&(o=r<3||i[0]>n||n>y)&&(i[4]=r,i[5]=n,p.n=y,s=0))}if(o||r>1)return a;throw f=!0,n}return function(o,c,y){if(l>1)throw TypeError("Generator is already running");for(f&&1===c&&h(c,y),s=c,u=y;(t=s<2?e:u)||!f;){i||(s?s<3?(s>1&&(p.n=-1),h(s,u)):p.n=u:p.v=u);try{if(l=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(f=p.n<0)?u:r.call(n,p))!==a)break}catch(t){i=e,s=1,u=t}finally{l=1}}return{value:t,done:f}}}(r,o,i),!0),l}var a={};function s(){}function u(){}function l(){}t=Object.getPrototypeOf;var c=[][n]?t(t([][n]())):(sue(t={},n,function(){return this}),t),f=l.prototype=s.prototype=Object.create(c);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,sue(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=l,sue(f,"constructor",l),sue(l,"constructor",u),u.displayName="GeneratorFunction",sue(l,o,"GeneratorFunction"),sue(f),sue(f,o,"Generator"),sue(f,n,function(){return this}),sue(f,"toString",function(){return"[object Generator]"}),(aue=function(){return{w:i,m:p}})()}function sue(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}(sue=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){sue(e,t,function(e){return this._invoke(t,r,e)})};i("next",0),i("throw",1),i("return",2)}})(e,t,r,n)}function uue(e,t,r,n,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function lue(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){uue(i,n,o,a,s,"next",e)}function s(e){uue(i,n,o,a,s,"throw",e)}a(void 0)})}}function cue(e){return e.replace(/(?!\u3000)\s+/gm," ")}function fue(e){var t=e.match(/-?(\d+(?:\.\d*(?:[eE][+-]?\d+)?)?|\.\d+)(?=\D|$)/gm);return t?t.map(parseFloat):[]}var pue=/^[A-Z-]+$/;function hue(e){var t=/url\(('([^']+)'|"([^"]+)"|([^'")]+))\)/.exec(e);return t&&(t[2]||t[3]||t[4])||""}var yue=/(\[[^\]]+\])/g,due=/(#[^\s+>~.[:]+)/g,mue=/(\.[^\s+>~.[:]+)/g,gue=/(::[^\s+>~.[:]+|:first-line|:first-letter|:before|:after)/gi,vue=/(:[\w-]+\([^)]*\))/gi,bue=/(:[^\s+>~.[:]+)/g,Aue=/([^\s+>~.[:]+)/g;function wue(e,t){var r=t.exec(e);return r?[e.replace(t," "),r.length]:[e,0]}var Sue=1e-8;function Cue(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2))}function Eue(e,t){return(e[0]*t[0]+e[1]*t[1])/(Cue(e)*Cue(t))}function _ue(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(Eue(e,t))}function Iue(e){return e*e*e}function Oue(e){return 3*e*e*(1-e)}function xue(e){return 3*e*(1-e)*(1-e)}function Pue(e){return(1-e)*(1-e)*(1-e)}function kue(e){return e*e}function Tue(e){return 2*e*(1-e)}function jue(e){return(1-e)*(1-e)}var Mue=function(){function e(t,r,n){$se(this,e),this.document=t,this.name=r,this.value=n,this.isNormalizedColor=!1}return tue(e,[{key:"split",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:" ",r=this.document,n=this.name;return cue(this.getString()).trim().split(t).map(function(t){return new e(r,n,t)})}},{key:"hasValue",value:function(e){var t=this.value;return null!==t&&""!==t&&(e||0!==t)&&void 0!==t}},{key:"isString",value:function(e){var t=this.value,r="string"==typeof t;return r&&e?e.test(t):r}},{key:"isUrlDefinition",value:function(){return this.isString(/^url\(/)}},{key:"isPixels",value:function(){if(!this.hasValue())return!1;var e=this.getString();switch(!0){case e.endsWith("px"):case/^[0-9]+$/.test(e):return!0;default:return!1}}},{key:"setValue",value:function(e){return this.value=e,this}},{key:"getValue",value:function(e){return void 0===e||this.hasValue()?this.value:e}},{key:"getNumber",value:function(e){if(!this.hasValue())return void 0===e?0:parseFloat(e);var t=this.value,r=parseFloat(t);return this.isString(/%$/)&&(r/=100),r}},{key:"getString",value:function(e){return void 0===e||this.hasValue()?void 0===this.value?"":String(this.value):String(e)}},{key:"getColor",value:function(e){var t=this.getString(e);return this.isNormalizedColor?t:(this.isNormalizedColor=!0,t=function(e){if(!e.startsWith("rgb"))return e;var t=3;return e.replace(/\d+(\.\d+)?/g,function(e,r){return t--&&r?String(Math.round(parseFloat(e))):e})}(t),this.value=t,t)}},{key:"getDpi",value:function(){return 96}},{key:"getRem",value:function(){return this.document.rootEmSize}},{key:"getEm",value:function(){return this.document.emSize}},{key:"getUnits",value:function(){return this.getString().replace(/[0-9.-]/g,"")}},{key:"getPixels",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.hasValue())return 0;var r=nue("boolean"==typeof e?[void 0,e]:[e],2),n=r[0],o=r[1],i=this.document.screen.viewPort;switch(!0){case this.isString(/vmin$/):return this.getNumber()/100*Math.min(i.computeSize("x"),i.computeSize("y"));case this.isString(/vmax$/):return this.getNumber()/100*Math.max(i.computeSize("x"),i.computeSize("y"));case this.isString(/vw$/):return this.getNumber()/100*i.computeSize("x");case this.isString(/vh$/):return this.getNumber()/100*i.computeSize("y");case this.isString(/rem$/):return this.getNumber()*this.getRem();case this.isString(/em$/):return this.getNumber()*this.getEm();case this.isString(/ex$/):return this.getNumber()*this.getEm()/2;case this.isString(/px$/):return this.getNumber();case this.isString(/pt$/):return this.getNumber()*this.getDpi()*(1/72);case this.isString(/pc$/):return 15*this.getNumber();case this.isString(/cm$/):return this.getNumber()*this.getDpi()/2.54;case this.isString(/mm$/):return this.getNumber()*this.getDpi()/25.4;case this.isString(/in$/):return this.getNumber()*this.getDpi();case this.isString(/%$/)&&o:return this.getNumber()*this.getEm();case this.isString(/%$/):return this.getNumber()*i.computeSize(n);default:var a=this.getNumber();return t&&a<1?a*i.computeSize(n):a}}},{key:"getMilliseconds",value:function(){return this.hasValue()?this.isString(/ms$/)?this.getNumber():1e3*this.getNumber():0}},{key:"getRadians",value:function(){if(!this.hasValue())return 0;switch(!0){case this.isString(/deg$/):return this.getNumber()*(Math.PI/180);case this.isString(/grad$/):return this.getNumber()*(Math.PI/200);case this.isString(/rad$/):return this.getNumber();default:return this.getNumber()*(Math.PI/180)}}},{key:"getDefinition",value:function(){var e=this.getString(),t=/#([^)'"]+)/.exec(e),r=(null===t||void 0===t?void 0:t[1])||e;return this.document.definitions.get(r)}},{key:"getFillStyleDefinition",value:function(e,t){var r=this.getDefinition();if(!r)return null;if("function"==typeof r.createGradient&&"getBoundingBox"in e)return r.createGradient(this.document.ctx,e,t);if("function"==typeof r.createPattern){if(r.getHrefAttribute().hasValue()){var n=r.getAttribute("patternTransform");(r=r.getHrefAttribute().getDefinition())&&n.hasValue()&&r.getAttribute("patternTransform",!0).setValue(n.value)}if(r)return r.createPattern(this.document.ctx,e,t)}return null}},{key:"getTextBaseline",value:function(){if(!this.hasValue())return null;var t=this.getString();return e.textBaselineMapping[t]||null}},{key:"addOpacity",value:function(t){for(var r=this.getColor(),n=r.length,o=0,i=0;i<n&&(","===r[i]&&o++,3!==o);i++);if(t.hasValue()&&this.isString()&&3!==o){var a=new pse(r);a.ok&&(a.alpha=t.getNumber(),r=a.toRGBA())}return new e(this.document,this.name,r)}}],[{key:"empty",value:function(t){return new e(t,"EMPTY","")}}])}();Mue.textBaselineMapping={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};var Bue=function(){return tue(function e(){$se(this,e),this.viewPorts=[]},[{key:"clear",value:function(){this.viewPorts=[]}},{key:"setCurrent",value:function(e,t){this.viewPorts.push({width:e,height:t})}},{key:"removeCurrent",value:function(){this.viewPorts.pop()}},{key:"getRoot",value:function(){var e=nue(this.viewPorts,1)[0];return e||Nue()}},{key:"getCurrent",value:function(){var e=this.viewPorts,t=e[e.length-1];return t||Nue()}},{key:"width",get:function(){return this.getCurrent().width}},{key:"height",get:function(){return this.getCurrent().height}},{key:"computeSize",value:function(e){return"number"==typeof e?e:"x"===e?this.width:"y"===e?this.height:Math.sqrt(Math.pow(this.width,2)+Math.pow(this.height,2))/Math.sqrt(2)}}])}();function Nue(){return{width:Bue.DEFAULT_VIEWPORT_WIDTH,height:Bue.DEFAULT_VIEWPORT_HEIGHT}}Bue.DEFAULT_VIEWPORT_WIDTH=800,Bue.DEFAULT_VIEWPORT_HEIGHT=600;var Rue=function(){function e(t,r){$se(this,e),this.x=t,this.y=r}return tue(e,[{key:"angleTo",value:function(e){return Math.atan2(e.y-this.y,e.x-this.x)}},{key:"applyTransform",value:function(e){var t=this.x,r=this.y,n=t*e[0]+r*e[2]+e[4],o=t*e[1]+r*e[3]+e[5];this.x=n,this.y=o}}],[{key:"parse",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=nue(fue(t),2),o=n[0],i=void 0===o?r:o,a=n[1];return new e(i,void 0===a?r:a)}},{key:"parseScale",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=nue(fue(t),2),o=n[0],i=void 0===o?r:o,a=n[1];return new e(i,void 0===a?i:a)}},{key:"parsePath",value:function(t){for(var r=fue(t),n=r.length,o=[],i=0;i<n;i+=2)o.push(new e(r[i],r[i+1]));return o}}])}(),Lue=function(){return tue(function e(t){$se(this,e),this.screen=t,this.working=!1,this.events=[],this.eventElements=[],this.onClick=this.onClick.bind(this),this.onMouseMove=this.onMouseMove.bind(this)},[{key:"isWorking",value:function(){return this.working}},{key:"start",value:function(){if(!this.working){var e=this.screen,t=this.onClick,r=this.onMouseMove,n=e.ctx.canvas;n.onclick=t,n.onmousemove=r,this.working=!0}}},{key:"stop",value:function(){if(this.working){var e=this.screen.ctx.canvas;this.working=!1,e.onclick=null,e.onmousemove=null}}},{key:"hasEvents",value:function(){return this.working&&this.events.length>0}},{key:"runEvents",value:function(){if(this.working){var e,t=this.screen,r=this.events,n=this.eventElements,o=t.ctx.canvas.style;o&&(o.cursor=""),r.forEach(function(t,r){var o=t.run;for(e=n[r];e;)o(e),e=e.parent}),this.events=[],this.eventElements=[]}}},{key:"checkPath",value:function(e,t){if(this.working&&t){var r=this.events,n=this.eventElements;r.forEach(function(r,o){var i=r.x,a=r.y;!n[o]&&t.isPointInPath&&t.isPointInPath(i,a)&&(n[o]=e)})}}},{key:"checkBoundingBox",value:function(e,t){if(this.working&&t){var r=this.events,n=this.eventElements;r.forEach(function(r,o){var i=r.x,a=r.y;!n[o]&&t.isPointInBox(i,a)&&(n[o]=e)})}}},{key:"mapXY",value:function(e,t){for(var r=this.screen,n=r.window,o=r.ctx,i=new Rue(e,t),a=o.canvas;a;)i.x-=a.offsetLeft,i.y-=a.offsetTop,a=a.offsetParent;return(null===n||void 0===n?void 0:n.scrollX)&&(i.x+=n.scrollX),(null===n||void 0===n?void 0:n.scrollY)&&(i.y+=n.scrollY),i}},{key:"onClick",value:function(e){var t=this.mapXY(e.clientX,e.clientY),r=t.x,n=t.y;this.events.push({type:"onclick",x:r,y:n,run:function(e){e.onClick&&e.onClick()}})}},{key:"onMouseMove",value:function(e){var t=this.mapXY(e.clientX,e.clientY),r=t.x,n=t.y;this.events.push({type:"onmousemove",x:r,y:n,run:function(e){e.onMouseMove&&e.onMouseMove()}})}}])}(),Due="undefined"!=typeof window?window:null,Fue="undefined"!=typeof fetch?fetch.bind(void 0):void 0,Que=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.fetch,o=void 0===n?Fue:n,i=r.window,a=void 0===i?Due:i;if($se(this,e),this.ctx=t,this.viewPort=new Bue,this.mouse=new Lue(this),this.animations=[],this.waits=[],this.frameDuration=0,this.isReadyLock=!1,this.isFirstRender=!0,this.intervalId=null,this.window=a,!o)throw new Error("Can't find 'fetch' in 'globalThis', please provide it via options");this.fetch=o}return tue(e,[{key:"wait",value:function(e){this.waits.push(e)}},{key:"ready",value:function(){return this.readyPromise?this.readyPromise:Promise.resolve()}},{key:"isReady",value:function(){if(this.isReadyLock)return!0;var e=this.waits.every(function(e){return e()});return e&&(this.waits=[],this.resolveReady&&this.resolveReady()),this.isReadyLock=e,e}},{key:"setDefaults",value:function(e){e.strokeStyle="rgba(0,0,0,0)",e.lineCap="butt",e.lineJoin="miter",e.miterLimit=4}},{key:"setViewBox",value:function(e){var t=e.document,r=e.ctx,n=e.aspectRatio,o=e.width,i=e.desiredWidth,a=e.height,s=e.desiredHeight,u=e.minX,l=void 0===u?0:u,c=e.minY,f=void 0===c?0:c,p=e.refX,h=e.refY,y=e.clip,d=void 0!==y&&y,m=e.clipX,g=void 0===m?0:m,v=e.clipY,b=void 0===v?0:v,A=nue(cue(n).replace(/^defer\s/,"").split(" "),2),w=A[0],S=A[1],C=w||"xMidYMid",E=S||"meet",_=o/i,I=a/s,O=Math.min(_,I),x=Math.max(_,I),P=i,k=s;"meet"===E&&(P*=O,k*=O),"slice"===E&&(P*=x,k*=x);var T=new Mue(t,"refX",p),j=new Mue(t,"refY",h),M=T.hasValue()&&j.hasValue();if(M&&r.translate(-O*T.getPixels("x"),-O*j.getPixels("y")),d){var B=O*g,N=O*b;r.beginPath(),r.moveTo(B,N),r.lineTo(o,N),r.lineTo(o,a),r.lineTo(B,a),r.closePath(),r.clip()}if(!M){var R="meet"===E&&O===I,L="slice"===E&&x===I,D="meet"===E&&O===_,F="slice"===E&&x===_;C.startsWith("xMid")&&(R||L)&&r.translate(o/2-P/2,0),C.endsWith("YMid")&&(D||F)&&r.translate(0,a/2-k/2),C.startsWith("xMax")&&(R||L)&&r.translate(o-P,0),C.endsWith("YMax")&&(D||F)&&r.translate(0,a-k)}switch(!0){case"none"===C:r.scale(_,I);break;case"meet"===E:r.scale(O,O);break;case"slice"===E:r.scale(x,x)}r.translate(-l,-f)}},{key:"start",value:function(t){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.enableRedraw,i=void 0!==o&&o,a=n.ignoreMouse,s=void 0!==a&&a,u=n.ignoreAnimation,l=void 0!==u&&u,c=n.ignoreDimensions,f=void 0!==c&&c,p=n.ignoreClear,h=void 0!==p&&p,y=n.forceRedraw,d=n.scaleWidth,m=n.scaleHeight,g=n.offsetX,v=n.offsetY,b=this.mouse,A=1e3/e.FRAMERATE;if(this.isReadyLock=!1,this.frameDuration=A,this.readyPromise=new Promise(function(e){r.resolveReady=e}),this.isReady()&&this.render(t,f,h,d,m,g,v),i){var w=Date.now(),S=w,C=0,E=function(){w=Date.now(),(C=w-S)>=A&&(S=w-C%A,r.shouldUpdate(l,y)&&(r.render(t,f,h,d,m,g,v),b.runEvents())),r.intervalId=fse(E)};s||b.start(),this.intervalId=fse(E)}}},{key:"stop",value:function(){this.intervalId&&(fse.cancel(this.intervalId),this.intervalId=null),this.mouse.stop()}},{key:"shouldUpdate",value:function(e,t){if(!e){var r=this.frameDuration;if(this.animations.reduce(function(e,t){return t.update(r)||e},!1))return!0}return!("function"!=typeof t||!t())||(!(this.isReadyLock||!this.isReady())||!!this.mouse.hasEvents())}},{key:"render",value:function(e,t,r,n,o,i,a){var s=this.viewPort,u=this.ctx,l=this.isFirstRender,c=u.canvas;s.clear(),c.width&&c.height&&s.setCurrent(c.width,c.height);var f=e.getStyle("width"),p=e.getStyle("height");!t&&(l||"number"!=typeof n&&"number"!=typeof o)&&(f.hasValue()&&(c.width=f.getPixels("x"),c.style&&(c.style.width="".concat(c.width,"px"))),p.hasValue()&&(c.height=p.getPixels("y"),c.style&&(c.style.height="".concat(c.height,"px"))));var h=c.clientWidth||c.width,y=c.clientHeight||c.height;if(t&&f.hasValue()&&p.hasValue()&&(h=f.getPixels("x"),y=p.getPixels("y")),s.setCurrent(h,y),"number"==typeof i&&e.getAttribute("x",!0).setValue(i),"number"==typeof a&&e.getAttribute("y",!0).setValue(a),"number"==typeof n||"number"==typeof o){var d=fue(e.getAttribute("viewBox").getString()),m=0,g=0;if("number"==typeof n){var v=e.getStyle("width");v.hasValue()?m=v.getPixels("x")/n:d[2]&&!isNaN(d[2])&&(m=d[2]/n)}if("number"==typeof o){var b=e.getStyle("height");b.hasValue()?g=b.getPixels("y")/o:d[3]&&!isNaN(d[3])&&(g=d[3]/o)}m||(m=g),g||(g=m),e.getAttribute("width",!0).setValue(n),e.getAttribute("height",!0).setValue(o);var A=e.getStyle("transform",!0,!0);A.setValue("".concat(A.getString()," scale(").concat(1/m,", ").concat(1/g,")"))}r||u.clearRect(0,0,h,y),e.render(u),l&&(this.isFirstRender=!1)}}])}();Que.defaultWindow=Due,Que.defaultFetch=Fue,Que.FRAMERATE=30,Que.MAX_VIRTUAL_PIXELS=3e4;var Gue=Que.defaultFetch,Uue="undefined"!=typeof DOMParser?DOMParser:void 0,zue=function(){return tue(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.fetch,n=void 0===r?Gue:r,o=t.DOMParser,i=void 0===o?Uue:o;if($se(this,e),!n)throw new Error("Can't find 'fetch' in 'globalThis', please provide it via options");if(!i)throw new Error("Can't find 'DOMParser' in 'globalThis', please provide it via options");this.fetch=n,this.DOMParser=i},[{key:"parse",value:function(){var e=lue(aue().m(function e(t){return aue().w(function(e){for(;;)switch(e.n){case 0:if(!t.startsWith("<")){e.n=1;break}return e.a(2,this.parseFromString(t));case 1:return e.a(2,this.load(t))}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"parseFromString",value:function(e){var t=new this.DOMParser;try{return this.checkDocument(t.parseFromString(e,"image/svg+xml"))}catch(r){return this.checkDocument(t.parseFromString(e,"text/xml"))}}},{key:"checkDocument",value:function(e){var t=e.getElementsByTagName("parsererror")[0];if(t)throw new Error(t.textContent||"Unknown parse error");return e}},{key:"load",value:function(){var e=lue(aue().m(function e(t){var r,n;return aue().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.fetch(t);case 1:return r=e.v,e.n=2,r.text();case 2:return n=e.v,e.a(2,this.parseFromString(n))}},e,this)}));return function(t){return e.apply(this,arguments)}}()}])}(),Hue=function(){return tue(function e(t,r){$se(this,e),this.type="translate",this.point=Rue.parse(r)},[{key:"apply",value:function(e){var t=this.point,r=t.x,n=t.y;e.translate(r||0,n||0)}},{key:"unapply",value:function(e){var t=this.point,r=t.x,n=t.y;e.translate(-1*r||0,-1*n||0)}},{key:"applyToPoint",value:function(e){var t=this.point,r=t.x,n=t.y;e.applyTransform([1,0,0,1,r||0,n||0])}}])}(),que=function(){return tue(function e(t,r,n){$se(this,e),this.type="rotate";var o=fue(r);this.angle=new Mue(t,"angle",o[0]),this.originX=n[0],this.originY=n[1],this.cx=o[1]||0,this.cy=o[2]||0},[{key:"apply",value:function(e){var t=this.cx,r=this.cy,n=this.originX,o=this.originY,i=this.angle,a=t+n.getPixels("x"),s=r+o.getPixels("y");e.translate(a,s),e.rotate(i.getRadians()),e.translate(-a,-s)}},{key:"unapply",value:function(e){var t=this.cx,r=this.cy,n=this.originX,o=this.originY,i=this.angle,a=t+n.getPixels("x"),s=r+o.getPixels("y");e.translate(a,s),e.rotate(-1*i.getRadians()),e.translate(-a,-s)}},{key:"applyToPoint",value:function(e){var t=this.cx,r=this.cy,n=this.angle.getRadians();e.applyTransform([1,0,0,1,t||0,r||0]),e.applyTransform([Math.cos(n),Math.sin(n),-Math.sin(n),Math.cos(n),0,0]),e.applyTransform([1,0,0,1,-t||0,-r||0])}}])}(),Vue=function(){return tue(function e(t,r,n){$se(this,e),this.type="scale";var o=Rue.parseScale(r);0!==o.x&&0!==o.y||(o.x=Sue,o.y=Sue),this.scale=o,this.originX=n[0],this.originY=n[1]},[{key:"apply",value:function(e){var t=this.scale,r=t.x,n=t.y,o=this.originX,i=this.originY,a=o.getPixels("x"),s=i.getPixels("y");e.translate(a,s),e.scale(r,n||r),e.translate(-a,-s)}},{key:"unapply",value:function(e){var t=this.scale,r=t.x,n=t.y,o=this.originX,i=this.originY,a=o.getPixels("x"),s=i.getPixels("y");e.translate(a,s),e.scale(1/r,1/n||r),e.translate(-a,-s)}},{key:"applyToPoint",value:function(e){var t=this.scale,r=t.x,n=t.y;e.applyTransform([r||0,0,0,n||0,0,0])}}])}(),Kue=function(){return tue(function e(t,r,n){var o;$se(this,e),this.type="matrix",this.matrix=[(o=fue(r))[0]||0,o[1]||0,o[2]||0,o[3]||0,o[4]||0,o[5]||0],this.originX=n[0],this.originY=n[1]},[{key:"apply",value:function(e){var t=this.originX,r=this.originY,n=this.matrix,o=t.getPixels("x"),i=r.getPixels("y");e.translate(o,i),e.transform(n[0],n[1],n[2],n[3],n[4],n[5]),e.translate(-o,-i)}},{key:"unapply",value:function(e){var t=this.originX,r=this.originY,n=this.matrix,o=n[0],i=n[2],a=n[4],s=n[1],u=n[3],l=n[5],c=1/(o*(1*u-0*l)-i*(1*s-0*l)+a*(0*s-0*u)),f=t.getPixels("x"),p=r.getPixels("y");e.translate(f,p),e.transform(c*(1*u-0*l),c*(0*l-1*s),c*(0*a-1*i),c*(1*o-0*a),c*(i*l-a*u),c*(a*s-o*l)),e.translate(-f,-p)}},{key:"applyToPoint",value:function(e){e.applyTransform(this.matrix)}}])}(),Yue=function(e){function t(e,r,n){var o;return $se(this,t),(o=Yse(this,t,[e,r,n])).type="skew",o.angle=new Mue(e,"angle",r),o}return Xse(t,Kue),tue(t)}(),Jue=function(e){function t(e,r,n){var o;return $se(this,t),(o=Yse(this,t,[e,r,n])).type="skewX",o.matrix=[1,0,Math.tan(o.angle.getRadians()),1,0,0],o}return Xse(t,Yue),tue(t)}(),Wue=function(e){function t(e,r,n){var o;return $se(this,t),(o=Yse(this,t,[e,r,n])).type="skewY",o.matrix=[1,Math.tan(o.angle.getRadians()),0,1,0,0],o}return Xse(t,Yue),tue(t)}();var Xue=function(){function e(t,r,n){var o=this;$se(this,e),this.document=t,this.transforms=[],cue(r).trim().replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/).forEach(function(t){if("none"!==t){var r=nue(function(e){var t=nue(e.split("("),2),r=t[0],n=void 0===r?"":r,o=t[1],i=void 0===o?"":o;return[n.trim(),i.trim().replace(")","")]}(t),2),i=r[0],a=r[1],s=e.transformTypes[i];s&&o.transforms.push(new s(o.document,a,n))}})}return tue(e,[{key:"apply",value:function(e){this.transforms.forEach(function(t){return t.apply(e)})}},{key:"unapply",value:function(e){this.transforms.forEach(function(t){return t.unapply(e)})}},{key:"applyToPoint",value:function(e){this.transforms.forEach(function(t){return t.applyToPoint(e)})}}],[{key:"fromElement",value:function(t,r){var n=r.getStyle("transform",!1,!0);if(n.hasValue()){var o=nue(r.getStyle("transform-origin",!1,!0).split(),2),i=o[0],a=o[1],s=void 0===a?i:a;if(i&&s){var u=[i,s];return new e(t,n.getString(),u)}}return null}}])}();Xue.transformTypes={translate:Hue,rotate:que,scale:Vue,matrix:Kue,skewX:Jue,skewY:Wue};var Zue=function(){function e(t,r){var n=this,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if($se(this,e),this.document=t,this.node=r,this.captureTextNodes=o,this.type="",this.attributes=new Map,this.styles=new Map,this.stylesSpecificity=new Map,this.animationFrozen=!1,this.animationFrozenValue="",this.parent=null,this.children=[],r&&1===r.nodeType){if(Array.from(r.attributes).forEach(function(e){var r,o=(r=e.nodeName,pue.test(r)?r.toLowerCase():r);n.attributes.set(o,new Mue(t,o,e.value))}),this.addStylesFromStyleDefinition(),this.getAttribute("style").hasValue())this.getAttribute("style").getString().split(";").map(function(e){return e.trim()}).forEach(function(e){if(e){var r=nue(e.split(":").map(function(e){return e.trim()}),2),o=r[0],i=r[1];o&&n.styles.set(o,new Mue(t,o,i))}});var i=t.definitions,a=this.getAttribute("id");a.hasValue()&&(i.has(a.getString())||i.set(a.getString(),this)),Array.from(r.childNodes).forEach(function(e){if(1===e.nodeType)n.addChild(e);else if(o&&(3===e.nodeType||4===e.nodeType)){var r=t.createTextNode(e);r.getText().length>0&&n.addChild(r)}})}}return tue(e,[{key:"getAttribute",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.attributes.get(e);if(!r&&t){var n=new Mue(this.document,e,"");return this.attributes.set(e,n),n}return r||Mue.empty(this.document)}},{key:"getHrefAttribute",value:function(){var e,t,r=Kse(this.attributes);try{for(r.s();!(t=r.n()).done;){var n=nue(t.value,2),o=n[0],i=n[1];if("href"===o||o.endsWith(":href")){e=i;break}}}catch(e){r.e(e)}finally{r.f()}return e||Mue.empty(this.document)}},{key:"getStyle",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=this.styles.get(e);if(n)return n;var o=this.getAttribute(e);if(o.hasValue())return this.styles.set(e,o),o;if(!r){var i=this.parent;if(i){var a=i.getStyle(e);if(a.hasValue())return a}}if(t){var s=new Mue(this.document,e,"");return this.styles.set(e,s),s}return Mue.empty(this.document)}},{key:"render",value:function(e){if("none"!==this.getStyle("display").getString()&&"hidden"!==this.getStyle("visibility").getString()){if(e.save(),this.getStyle("mask").hasValue()){var t=this.getStyle("mask").getDefinition();t&&(this.applyEffects(e),t.apply(e,this))}else if("none"!==this.getStyle("filter").getValue("none")){var r=this.getStyle("filter").getDefinition();r&&(this.applyEffects(e),r.apply(e,this))}else this.setContext(e),this.renderChildren(e),this.clearContext(e);e.restore()}}},{key:"setContext",value:function(e){}},{key:"applyEffects",value:function(e){var t=Xue.fromElement(this.document,this);t&&t.apply(e);var r=this.getStyle("clip-path",!1,!0);if(r.hasValue()){var n=r.getDefinition();n&&n.apply(e)}}},{key:"clearContext",value:function(e){}},{key:"renderChildren",value:function(e){this.children.forEach(function(t){t.render(e)})}},{key:"addChild",value:function(t){var r=t instanceof e?t:this.document.createElement(t);r.parent=this,e.ignoreChildTypes.includes(r.type)||this.children.push(r)}},{key:"matchesSelector",value:function(e){var t,r=this.node;if("function"==typeof r.matches)return r.matches(e);var n=null===(t=r.getAttribute)||void 0===t?void 0:t.call(r,"class");return!(!n||""===n)&&n.split(" ").some(function(t){return".".concat(t)===e})}},{key:"addStylesFromStyleDefinition",value:function(){var e,t=this.document,r=t.styles,n=t.stylesSpecificity,o=Kse(r);try{for(o.s();!(e=o.n()).done;){var i=nue(e.value,2),a=i[0],s=i[1];if(!a.startsWith("@")&&this.matchesSelector(a)){var u=n.get(a);if(s){var l,c=Kse(s);try{for(c.s();!(l=c.n()).done;){var f=nue(l.value,2),p=f[0],h=f[1],y=this.stylesSpecificity.get(p);void 0===y&&(y="000"),u&&u>=y&&(h&&this.styles.set(p,h),this.stylesSpecificity.set(p,u))}}catch(e){c.e(e)}finally{c.f()}}}}}catch(e){o.e(e)}finally{o.f()}}},{key:"removeStyles",value:function(e,t){return t.reduce(function(t,r){var n=e.getStyle(r);if(!n.hasValue())return t;var o=n.getString();return n.setValue(""),[].concat(Vse(t),[[r,o]])},[])}},{key:"restoreStyles",value:function(e,t){t.forEach(function(t){var r=nue(t,2),n=r[0],o=r[1];e.getStyle(n,!0).setValue(o)})}},{key:"isFirstChild",value:function(){var e;return 0===(null===(e=this.parent)||void 0===e?void 0:e.children.indexOf(this))}}])}();Zue.ignoreChildTypes=["title"];var $ue=function(e){function t(e,r,n){return $se(this,t),Yse(this,t,[e,r,n])}return Xse(t,Zue),tue(t)}();function ele(e){var t=e.trim();return/^('|")/.test(t)?t:'"'.concat(t,'"')}var tle=function(){function e(t,r,n,o,i,a){$se(this,e);var s=a?"string"==typeof a?e.parse(a):a:{};this.fontFamily=i||s.fontFamily,this.fontSize=o||s.fontSize,this.fontStyle=t||s.fontStyle,this.fontWeight=n||s.fontWeight,this.fontVariant=r||s.fontVariant}return tue(e,[{key:"toString",value:function(){return[function(e){if(!e)return"";var t=e.trim().toLowerCase();switch(t){case"normal":case"italic":case"oblique":case"inherit":case"initial":case"unset":return t;default:return/^oblique\s+(-|)\d+deg$/.test(t)?t:""}}(this.fontStyle),this.fontVariant,function(e){if(!e)return"";var t=e.trim().toLowerCase();switch(t){case"normal":case"bold":case"lighter":case"bolder":case"inherit":case"initial":case"unset":return t;default:return/^[\d.]+$/.test(t)?t:""}}(this.fontWeight),this.fontSize,(e=this.fontFamily,"undefined"==typeof process?e:e.trim().split(",").map(ele).join(","))].join(" ").trim();var e}}],[{key:"parse",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1?arguments[1]:void 0,n="",o="",i="",a="",s="",u={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1};return cue(t).trim().split(" ").forEach(function(t){switch(!0){case!u.fontStyle&&e.styles.includes(t):"inherit"!==t&&(n=t),u.fontStyle=!0;break;case!u.fontVariant&&e.variants.includes(t):"inherit"!==t&&(o=t),u.fontStyle=!0,u.fontVariant=!0;break;case!u.fontWeight&&e.weights.includes(t):"inherit"!==t&&(i=t),u.fontStyle=!0,u.fontVariant=!0,u.fontWeight=!0;break;case!u.fontSize:"inherit"!==t&&(a=t.split("/")[0]||""),u.fontStyle=!0,u.fontVariant=!0,u.fontWeight=!0,u.fontSize=!0;break;default:"inherit"!==t&&(s+=t)}}),new e(n,o,i,a,s,r)}}])}();tle.styles="normal|italic|oblique|inherit",tle.variants="normal|small-caps|inherit",tle.weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit";var rle=function(){return tue(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.NaN,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.NaN,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.NaN,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Number.NaN;$se(this,e),this.x1=t,this.y1=r,this.x2=n,this.y2=o,this.addPoint(t,r),this.addPoint(n,o)},[{key:"x",get:function(){return this.x1}},{key:"y",get:function(){return this.y1}},{key:"width",get:function(){return this.x2-this.x1}},{key:"height",get:function(){return this.y2-this.y1}},{key:"addPoint",value:function(e,t){void 0!==e&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=e,this.x2=e),e<this.x1&&(this.x1=e),e>this.x2&&(this.x2=e)),void 0!==t&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=t,this.y2=t),t<this.y1&&(this.y1=t),t>this.y2&&(this.y2=t))}},{key:"addX",value:function(e){this.addPoint(e,0)}},{key:"addY",value:function(e){this.addPoint(0,e)}},{key:"addBoundingBox",value:function(e){if(e){var t=e.x1,r=e.y1,n=e.x2,o=e.y2;this.addPoint(t,r),this.addPoint(n,o)}}},{key:"sumCubic",value:function(e,t,r,n,o){return Math.pow(1-e,3)*t+3*Math.pow(1-e,2)*e*r+3*(1-e)*Math.pow(e,2)*n+Math.pow(e,3)*o}},{key:"bezierCurveAdd",value:function(e,t,r,n,o){var i=6*t-12*r+6*n,a=-3*t+9*r-9*n+3*o,s=3*r-3*t;if(0!==a){var u=Math.pow(i,2)-4*s*a;if(!(u<0)){var l=(-i+Math.sqrt(u))/(2*a);0<l&&l<1&&(e?this.addX(this.sumCubic(l,t,r,n,o)):this.addY(this.sumCubic(l,t,r,n,o)));var c=(-i-Math.sqrt(u))/(2*a);0<c&&c<1&&(e?this.addX(this.sumCubic(c,t,r,n,o)):this.addY(this.sumCubic(c,t,r,n,o)))}}else{if(0===i)return;var f=-s/i;0<f&&f<1&&(e?this.addX(this.sumCubic(f,t,r,n,o)):this.addY(this.sumCubic(f,t,r,n,o)))}}},{key:"addBezierCurve",value:function(e,t,r,n,o,i,a,s){this.addPoint(e,t),this.addPoint(a,s),this.bezierCurveAdd(!0,e,r,o,a),this.bezierCurveAdd(!1,t,n,i,s)}},{key:"addQuadraticCurve",value:function(e,t,r,n,o,i){var a=e+2/3*(r-e),s=t+2/3*(n-t),u=a+1/3*(o-e),l=s+1/3*(i-t);this.addBezierCurve(e,t,a,u,s,l,o,i)}},{key:"isPointInBox",value:function(e,t){var r=this.x1,n=this.y1,o=this.x2,i=this.y2;return r<=e&&e<=o&&n<=t&&t<=i}}])}(),nle=function(e){function t(){var e;$se(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=Yse(this,t,[].concat(n))).modifiedEmSizeStack=!1,e}return Xse(t,Zue),tue(t,[{key:"calculateOpacity",value:function(){for(var e=1,t=this;t;){var r=t.getStyle("opacity",!1,!0);r.hasValue(!0)&&(e*=r.getNumber()),t=t.parent}return e}},{key:"setContext",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t){var r=this.getStyle("fill"),n=this.getStyle("fill-opacity"),o=this.getStyle("stroke"),i=this.getStyle("stroke-opacity");if(r.isUrlDefinition()){var a=r.getFillStyleDefinition(this,n);a&&(e.fillStyle=a)}else if(r.hasValue()){"currentColor"===r.getString()&&r.setValue(this.getStyle("color").getColor());var s=r.getColor();"inherit"!==s&&(e.fillStyle="none"===s?"rgba(0,0,0,0)":s)}if(n.hasValue()){var u=new Mue(this.document,"fill",e.fillStyle).addOpacity(n).getColor();e.fillStyle=u}if(o.isUrlDefinition()){var l=o.getFillStyleDefinition(this,i);l&&(e.strokeStyle=l)}else if(o.hasValue()){"currentColor"===o.getString()&&o.setValue(this.getStyle("color").getColor());var c=o.getString();"inherit"!==c&&(e.strokeStyle="none"===c?"rgba(0,0,0,0)":c)}if(i.hasValue()){var f=new Mue(this.document,"stroke",e.strokeStyle).addOpacity(i).getString();e.strokeStyle=f}var p=this.getStyle("stroke-width");if(p.hasValue()){var h=p.getPixels();e.lineWidth=h||Sue}var y=this.getStyle("stroke-linecap"),d=this.getStyle("stroke-linejoin"),m=this.getStyle("stroke-miterlimit"),g=this.getStyle("stroke-dasharray"),v=this.getStyle("stroke-dashoffset");if(y.hasValue()&&(e.lineCap=y.getString()),d.hasValue()&&(e.lineJoin=d.getString()),m.hasValue()&&(e.miterLimit=m.getNumber()),g.hasValue()&&"none"!==g.getString()){var b=fue(g.getString());void 0!==e.setLineDash?e.setLineDash(b):void 0!==e.webkitLineDash?e.webkitLineDash=b:void 0===e.mozDash||1===b.length&&0===b[0]||(e.mozDash=b);var A=v.getPixels();void 0!==e.lineDashOffset?e.lineDashOffset=A:void 0!==e.webkitLineDashOffset?e.webkitLineDashOffset=A:void 0!==e.mozDashOffset&&(e.mozDashOffset=A)}}if(this.modifiedEmSizeStack=!1,void 0!==e.font){var w=this.getStyle("font"),S=this.getStyle("font-style"),C=this.getStyle("font-variant"),E=this.getStyle("font-weight"),_=this.getStyle("font-size"),I=this.getStyle("font-family"),O=new tle(S.getString(),C.getString(),E.getString(),_.hasValue()?"".concat(_.getPixels(!0),"px"):"",I.getString(),tle.parse(w.getString(),e.font));S.setValue(O.fontStyle),C.setValue(O.fontVariant),E.setValue(O.fontWeight),_.setValue(O.fontSize),I.setValue(O.fontFamily),e.font=O.toString(),_.isPixels()&&(this.document.emSize=_.getPixels(),this.modifiedEmSizeStack=!0)}t||(this.applyEffects(e),e.globalAlpha=this.calculateOpacity())}},{key:"clearContext",value:function(e){Hse(t,"clearContext",this,3)([e]),this.modifiedEmSizeStack&&this.document.popEmSize()}}])}(),ole=function(e){function t(e,r,n){var o;return $se(this,t),(o=Yse(this,t,[e,r,(this instanceof t?this.constructor:void 0)===t||n])).type="text",o.x=0,o.y=0,o.leafTexts=[],o.textChunkStart=0,o.minX=Number.POSITIVE_INFINITY,o.maxX=Number.NEGATIVE_INFINITY,o.measureCache=-1,o}return Xse(t,nle),tue(t,[{key:"setContext",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Hse(t,"setContext",this,3)([e,r]);var n=this.getStyle("dominant-baseline").getTextBaseline()||this.getStyle("alignment-baseline").getTextBaseline();n&&(e.textBaseline=n)}},{key:"initializeCoordinates",value:function(){this.x=0,this.y=0,this.leafTexts=[],this.textChunkStart=0,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY}},{key:"getBoundingBox",value:function(e){var t=this;if("text"!==this.type)return this.getTElementBoundingBox(e);this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(e);var r=null;return this.children.forEach(function(n,o){var i=t.getChildBoundingBox(e,t,t,o);r?r.addBoundingBox(i):r=i}),r}},{key:"getFontSize",value:function(){var e=this.document,t=this.parent,r=tle.parse(e.ctx.font).fontSize;return t.getStyle("font-size").getNumber(r)}},{key:"getTElementBoundingBox",value:function(e){var t=this.getFontSize();return new rle(this.x,this.y-t,this.x+this.measureText(e),this.y)}},{key:"getGlyph",value:function(e,t,r){var n,o=t[r];if(e.isArabic){var i,a=t.length,s=t[r-1],u=t[r+1],l="isolated";(0===r||" "===s)&&r<a-1&&" "!==u&&(l="terminal"),r>0&&" "!==s&&r<a-1&&" "!==u&&(l="medial"),r>0&&" "!==s&&(r===a-1||" "===u)&&(l="initial"),n=(null===(i=e.arabicGlyphs.get(o))||void 0===i?void 0:i.get(l))||e.glyphs.get(o)}else n=e.glyphs.get(o);return n||(n=e.missingGlyph),n}},{key:"getText",value:function(){return""}},{key:"getTextFromNode",value:function(e){var t=e||this.node,r=Array.from(t.parentNode.childNodes),n=r.indexOf(t),o=r.length-1,i=cue(t.textContent||"");return 0===n&&(i=i.replace(/^[\n \t]+/,"")),n===o&&(i=function(e){return e.replace(/[\n \t]+$/,"")}(i)),i}},{key:"renderChildren",value:function(e){var t=this;if("text"===this.type){this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(e),this.children.forEach(function(r,n){t.renderChild(e,t,t,n)});var r=this.document.screen.mouse;r.isWorking()&&r.checkBoundingBox(this,this.getBoundingBox(e))}else this.renderTElementChildren(e)}},{key:"renderTElementChildren",value:function(e){var t=this.document,r=this.parent,n=this.getText(),o=r.getStyle("font-family").getDefinition();if(o)for(var i=o.fontFace.unitsPerEm,a=tle.parse(t.ctx.font),s=r.getStyle("font-size").getNumber(a.fontSize),u=r.getStyle("font-style").getString(a.fontStyle),l=s/i,c=o.isRTL?n.split("").reverse().join(""):n,f=fue(r.getAttribute("dx").getString()),p=c.length,h=0;h<p;h++){var y=this.getGlyph(o,c,h);e.translate(this.x,this.y),e.scale(l,-l);var d=e.lineWidth;e.lineWidth=e.lineWidth*i/s,"italic"===u&&e.transform(1,0,.4,1,0,0),y.render(e),"italic"===u&&e.transform(1,0,-.4,1,0,0),e.lineWidth=d,e.scale(1/l,-1/l),e.translate(-this.x,-this.y),this.x+=s*(y.horizAdvX||o.horizAdvX)/i,void 0===f[h]||isNaN(f[h])||(this.x+=f[h])}else{var m=this.x,g=this.y;e.fillStyle&&e.fillText(n,m,g),e.strokeStyle&&e.strokeText(n,m,g)}}},{key:"applyAnchoring",value:function(){if(!(this.textChunkStart>=this.leafTexts.length)){var e=this.leafTexts[this.textChunkStart],t=e.getStyle("text-anchor").getString("start"),r=0;r="start"===t?e.x-this.minX:"end"===t?e.x-this.maxX:e.x-(this.minX+this.maxX)/2;for(var n=this.textChunkStart;n<this.leafTexts.length;n++)this.leafTexts[n].x+=r;this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.textChunkStart=this.leafTexts.length}}},{key:"adjustChildCoordinatesRecursive",value:function(e){var t=this;this.children.forEach(function(r,n){t.adjustChildCoordinatesRecursiveCore(e,t,t,n)}),this.applyAnchoring()}},{key:"adjustChildCoordinatesRecursiveCore",value:function(e,t,r,n){var o=r.children[n];o.children.length>0?o.children.forEach(function(r,n){t.adjustChildCoordinatesRecursiveCore(e,t,o,n)}):this.adjustChildCoordinates(e,t,r,n)}},{key:"adjustChildCoordinates",value:function(e,t,r,n){var o=r.children[n];if("function"!=typeof o.measureText)return o;e.save(),o.setContext(e,!0);var i=o.getAttribute("x"),a=o.getAttribute("y"),s=o.getAttribute("dx"),u=o.getAttribute("dy"),l=o.getStyle("font-family").getDefinition(),c=Boolean(null===l||void 0===l?void 0:l.isRTL);0===n&&(i.hasValue()||i.setValue(o.getInheritedAttribute("x")),a.hasValue()||a.setValue(o.getInheritedAttribute("y")),s.hasValue()||s.setValue(o.getInheritedAttribute("dx")),u.hasValue()||u.setValue(o.getInheritedAttribute("dy")));var f=o.measureText(e);return c&&(t.x-=f),i.hasValue()?(t.applyAnchoring(),o.x=i.getPixels("x"),s.hasValue()&&(o.x+=s.getPixels("x"))):(s.hasValue()&&(t.x+=s.getPixels("x")),o.x=t.x),t.x=o.x,c||(t.x+=f),a.hasValue()?(o.y=a.getPixels("y"),u.hasValue()&&(o.y+=u.getPixels("y"))):(u.hasValue()&&(t.y+=u.getPixels("y")),o.y=t.y),t.y=o.y,t.leafTexts.push(o),t.minX=Math.min(t.minX,o.x,o.x+f),t.maxX=Math.max(t.maxX,o.x,o.x+f),o.clearContext(e),e.restore(),o}},{key:"getChildBoundingBox",value:function(e,t,r,n){var o=r.children[n];if("function"!=typeof o.getBoundingBox)return null;var i=o.getBoundingBox(e);return i&&o.children.forEach(function(r,n){var a=t.getChildBoundingBox(e,t,o,n);i.addBoundingBox(a)}),i}},{key:"renderChild",value:function(e,t,r,n){var o=r.children[n];o.render(e),o.children.forEach(function(r,n){t.renderChild(e,t,o,n)})}},{key:"measureText",value:function(e){var t=this.measureCache;if(~t)return t;var r=this.getText(),n=this.measureTargetText(e,r);return this.measureCache=n,n}},{key:"measureTargetText",value:function(e,t){if(!t.length)return 0;var r=this.parent,n=r.getStyle("font-family").getDefinition();if(n){for(var o=this.getFontSize(),i=n.isRTL?t.split("").reverse().join(""):t,a=fue(r.getAttribute("dx").getString()),s=i.length,u=0,l=0;l<s;l++){u+=(this.getGlyph(n,i,l).horizAdvX||n.horizAdvX)*o/n.fontFace.unitsPerEm,void 0===a[l]||isNaN(a[l])||(u+=a[l])}return u}if(!e.measureText)return 10*t.length;e.save(),this.setContext(e,!0);var c=e.measureText(t).width;return this.clearContext(e),e.restore(),c}},{key:"getInheritedAttribute",value:function(e){for(var r=this;r instanceof t&&r.isFirstChild()&&r.parent;){var n=r.parent.getAttribute(e);if(n.hasValue(!0))return n.getString("0");r=r.parent}return null}}])}(),ile=function(e){function t(e,r,n){var o;return $se(this,t),(o=Yse(this,t,[e,r,(this instanceof t?this.constructor:void 0)===t||n])).type="tspan",o.text=o.children.length>0?"":o.getTextFromNode(),o}return Xse(t,ole),tue(t,[{key:"getText",value:function(){return this.text}}])}(),ale=function(e){function t(){var e;$se(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=Yse(this,t,[].concat(n))).type="textNode",e}return Xse(t,ile),tue(t)}(),sle=function(e){function t(e){var r;return $se(this,t),(r=Yse(this,t,[e.replace(/([+\-.])\s+/gm,"$1").replace(/[^MmZzLlHhVvCcSsQqTtAae\d\s.,+-].*/g,"")])).control=new Rue(0,0),r.start=new Rue(0,0),r.current=new Rue(0,0),r.command=null,r.commands=r.commands,r.i=-1,r.previousCommand=null,r.points=[],r.angles=[],r}return Xse(t,jse),tue(t,[{key:"reset",value:function(){this.i=-1,this.command=null,this.previousCommand=null,this.start=new Rue(0,0),this.control=new Rue(0,0),this.current=new Rue(0,0),this.points=[],this.angles=[]}},{key:"isEnd",value:function(){return this.i>=this.commands.length-1}},{key:"next",value:function(){var e=this.commands[++this.i];return this.previousCommand=this.command,this.command=e,e}},{key:"getPoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"x",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"y",r=new Rue(this.command[e],this.command[t]);return this.makeAbsolute(r)}},{key:"getAsControlPoint",value:function(e,t){var r=this.getPoint(e,t);return this.control=r,r}},{key:"getAsCurrentPoint",value:function(e,t){var r=this.getPoint(e,t);return this.current=r,r}},{key:"getReflectedControlPoint",value:function(){var e=this.previousCommand.type;if(e!==jse.CURVE_TO&&e!==jse.SMOOTH_CURVE_TO&&e!==jse.QUAD_TO&&e!==jse.SMOOTH_QUAD_TO)return this.current;var t=this.current,r=t.x,n=t.y,o=this.control,i=o.x,a=o.y;return new Rue(2*r-i,2*n-a)}},{key:"makeAbsolute",value:function(e){if(this.command.relative){var t=this.current,r=t.x,n=t.y;e.x+=r,e.y+=n}return e}},{key:"addMarker",value:function(e,t,r){var n=this.points,o=this.angles;r&&o.length>0&&!o[o.length-1]&&(o[o.length-1]=n[n.length-1].angleTo(r)),this.addMarkerAngle(e,t?t.angleTo(e):null)}},{key:"addMarkerAngle",value:function(e,t){this.points.push(e),this.angles.push(t)}},{key:"getMarkerPoints",value:function(){return this.points}},{key:"getMarkerAngles",value:function(){for(var e=this.angles,t=e.length,r=0;r<t;r++)if(!e[r])for(var n=r+1;n<t;n++)if(e[n]){e[r]=e[n];break}return e}}])}(),ule=function(e){function t(e,r,n){var o;return $se(this,t),(o=Yse(this,t,[e,r,n])).type="path",o.pathParser=new sle(o.getAttribute("d").getString()),o}return Xse(t,nle),tue(t,[{key:"path",value:function(e){var t=this.pathParser,r=new rle;for(t.reset(),e&&e.beginPath();!t.isEnd();)switch(t.next().type){case sle.MOVE_TO:this.pathM(e,r);break;case sle.LINE_TO:this.pathL(e,r);break;case sle.HORIZ_LINE_TO:this.pathH(e,r);break;case sle.VERT_LINE_TO:this.pathV(e,r);break;case sle.CURVE_TO:this.pathC(e,r);break;case sle.SMOOTH_CURVE_TO:this.pathS(e,r);break;case sle.QUAD_TO:this.pathQ(e,r);break;case sle.SMOOTH_QUAD_TO:this.pathT(e,r);break;case sle.ARC:this.pathA(e,r);break;case sle.CLOSE_PATH:this.pathZ(e,r)}return r}},{key:"getBoundingBox",value:function(e){return this.path()}},{key:"getMarkers",value:function(){var e=this.pathParser,t=e.getMarkerPoints(),r=e.getMarkerAngles();return t.map(function(e,t){return[e,r[t]]})}},{key:"renderChildren",value:function(e){this.path(e),this.document.screen.mouse.checkPath(this,e);var t=this.getStyle("fill-rule");""!==e.fillStyle&&("inherit"!==t.getString("inherit")?e.fill(t.getString()):e.fill()),""!==e.strokeStyle&&("non-scaling-stroke"===this.getAttribute("vector-effect").getString()?(e.save(),e.setTransform(1,0,0,1,0,0),e.stroke(),e.restore()):e.stroke());var r=this.getMarkers();if(r){var n=r.length-1,o=this.getStyle("marker-start"),i=this.getStyle("marker-mid"),a=this.getStyle("marker-end");if(o.isUrlDefinition()){var s=o.getDefinition(),u=nue(r[0],2),l=u[0],c=u[1];s.render(e,l,c)}if(i.isUrlDefinition())for(var f=i.getDefinition(),p=1;p<n;p++){var h=nue(r[p],2),y=h[0],d=h[1];f.render(e,y,d)}if(a.isUrlDefinition()){var m=a.getDefinition(),g=nue(r[n],2),v=g[0],b=g[1];m.render(e,v,b)}}}},{key:"pathM",value:function(e,r){var n=this.pathParser,o=t.pathM(n).point,i=o.x,a=o.y;n.addMarker(o),r.addPoint(i,a),e&&e.moveTo(i,a)}},{key:"pathL",value:function(e,r){var n=this.pathParser,o=t.pathL(n),i=o.current,a=o.point,s=a.x,u=a.y;n.addMarker(a,i),r.addPoint(s,u),e&&e.lineTo(s,u)}},{key:"pathH",value:function(e,r){var n=this.pathParser,o=t.pathH(n),i=o.current,a=o.point,s=a.x,u=a.y;n.addMarker(a,i),r.addPoint(s,u),e&&e.lineTo(s,u)}},{key:"pathV",value:function(e,r){var n=this.pathParser,o=t.pathV(n),i=o.current,a=o.point,s=a.x,u=a.y;n.addMarker(a,i),r.addPoint(s,u),e&&e.lineTo(s,u)}},{key:"pathC",value:function(e,r){var n=this.pathParser,o=t.pathC(n),i=o.current,a=o.point,s=o.controlPoint,u=o.currentPoint;n.addMarker(u,s,a),r.addBezierCurve(i.x,i.y,a.x,a.y,s.x,s.y,u.x,u.y),e&&e.bezierCurveTo(a.x,a.y,s.x,s.y,u.x,u.y)}},{key:"pathS",value:function(e,r){var n=this.pathParser,o=t.pathS(n),i=o.current,a=o.point,s=o.controlPoint,u=o.currentPoint;n.addMarker(u,s,a),r.addBezierCurve(i.x,i.y,a.x,a.y,s.x,s.y,u.x,u.y),e&&e.bezierCurveTo(a.x,a.y,s.x,s.y,u.x,u.y)}},{key:"pathQ",value:function(e,r){var n=this.pathParser,o=t.pathQ(n),i=o.current,a=o.controlPoint,s=o.currentPoint;n.addMarker(s,a,a),r.addQuadraticCurve(i.x,i.y,a.x,a.y,s.x,s.y),e&&e.quadraticCurveTo(a.x,a.y,s.x,s.y)}},{key:"pathT",value:function(e,r){var n=this.pathParser,o=t.pathT(n),i=o.current,a=o.controlPoint,s=o.currentPoint;n.addMarker(s,a,a),r.addQuadraticCurve(i.x,i.y,a.x,a.y,s.x,s.y),e&&e.quadraticCurveTo(a.x,a.y,s.x,s.y)}},{key:"pathA",value:function(e,r){var n=this.pathParser,o=t.pathA(n),i=o.currentPoint,a=o.rX,s=o.rY,u=o.sweepFlag,l=o.xAxisRotation,c=o.centp,f=o.a1,p=o.ad,h=1-u?1:-1,y=f+h*(p/2),d=new Rue(c.x+a*Math.cos(y),c.y+s*Math.sin(y));if(n.addMarkerAngle(d,y-h*Math.PI/2),n.addMarkerAngle(i,y-h*Math.PI),r.addPoint(i.x,i.y),e&&!isNaN(f)&&!isNaN(p)){var m=a>s?a:s,g=a>s?1:a/s,v=a>s?s/a:1;e.translate(c.x,c.y),e.rotate(l),e.scale(g,v),e.arc(0,0,m,f,f+p,Boolean(1-u)),e.scale(1/g,1/v),e.rotate(-l),e.translate(-c.x,-c.y)}}},{key:"pathZ",value:function(e,r){t.pathZ(this.pathParser),e&&r.x1!==r.x2&&r.y1!==r.y2&&e.closePath()}}],[{key:"pathM",value:function(e){var t=e.getAsCurrentPoint();return e.start=e.current,{point:t}}},{key:"pathL",value:function(e){return{current:e.current,point:e.getAsCurrentPoint()}}},{key:"pathH",value:function(e){var t=e.current,r=e.command,n=new Rue((r.relative?t.x:0)+r.x,t.y);return e.current=n,{current:t,point:n}}},{key:"pathV",value:function(e){var t=e.current,r=e.command,n=new Rue(t.x,(r.relative?t.y:0)+r.y);return e.current=n,{current:t,point:n}}},{key:"pathC",value:function(e){return{current:e.current,point:e.getPoint("x1","y1"),controlPoint:e.getAsControlPoint("x2","y2"),currentPoint:e.getAsCurrentPoint()}}},{key:"pathS",value:function(e){return{current:e.current,point:e.getReflectedControlPoint(),controlPoint:e.getAsControlPoint("x2","y2"),currentPoint:e.getAsCurrentPoint()}}},{key:"pathQ",value:function(e){return{current:e.current,controlPoint:e.getAsControlPoint("x1","y1"),currentPoint:e.getAsCurrentPoint()}}},{key:"pathT",value:function(e){var t=e.current,r=e.getReflectedControlPoint();return e.control=r,{current:t,controlPoint:r,currentPoint:e.getAsCurrentPoint()}}},{key:"pathA",value:function(e){var t=e.current,r=e.command,n=r.rX,o=r.rY,i=r.xRot,a=r.lArcFlag,s=r.sweepFlag,u=i*(Math.PI/180),l=e.getAsCurrentPoint(),c=new Rue(Math.cos(u)*(t.x-l.x)/2+Math.sin(u)*(t.y-l.y)/2,-Math.sin(u)*(t.x-l.x)/2+Math.cos(u)*(t.y-l.y)/2),f=Math.pow(c.x,2)/Math.pow(n,2)+Math.pow(c.y,2)/Math.pow(o,2);f>1&&(n*=Math.sqrt(f),o*=Math.sqrt(f));var p=(a===s?-1:1)*Math.sqrt((Math.pow(n,2)*Math.pow(o,2)-Math.pow(n,2)*Math.pow(c.y,2)-Math.pow(o,2)*Math.pow(c.x,2))/(Math.pow(n,2)*Math.pow(c.y,2)+Math.pow(o,2)*Math.pow(c.x,2)));isNaN(p)&&(p=0);var h=new Rue(p*n*c.y/o,p*-o*c.x/n),y=new Rue((t.x+l.x)/2+Math.cos(u)*h.x-Math.sin(u)*h.y,(t.y+l.y)/2+Math.sin(u)*h.x+Math.cos(u)*h.y),d=_ue([1,0],[(c.x-h.x)/n,(c.y-h.y)/o]),m=[(c.x-h.x)/n,(c.y-h.y)/o],g=[(-c.x-h.x)/n,(-c.y-h.y)/o],v=_ue(m,g);return Eue(m,g)<=-1&&(v=Math.PI),Eue(m,g)>=1&&(v=0),{currentPoint:l,rX:n,rY:o,sweepFlag:s,xAxisRotation:u,centp:y,a1:d,ad:v}}},{key:"pathZ",value:function(e){e.current=e.start}}])}(),lle=function(e){function t(){var e;$se(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=Yse(this,t,[].concat(n))).type="svg",e.root=!1,e}return Xse(t,nle),tue(t,[{key:"setContext",value:function(e){var r,n=this.document,o=n.screen,i=n.window,a=e.canvas;if(o.setDefaults(e),"style"in a&&void 0!==e.font&&i&&void 0!==i.getComputedStyle){e.font=i.getComputedStyle(a).getPropertyValue("font");var s=new Mue(n,"fontSize",tle.parse(e.font).fontSize);s.hasValue()&&(n.rootEmSize=s.getPixels("y"),n.emSize=n.rootEmSize)}this.getAttribute("x").hasValue()||this.getAttribute("x",!0).setValue(0),this.getAttribute("y").hasValue()||this.getAttribute("y",!0).setValue(0);var u=o.viewPort,l=u.width,c=u.height;this.getStyle("width").hasValue()||this.getStyle("width",!0).setValue("100%"),this.getStyle("height").hasValue()||this.getStyle("height",!0).setValue("100%"),this.getStyle("color").hasValue()||this.getStyle("color",!0).setValue("black");var f=this.getAttribute("refX"),p=this.getAttribute("refY"),h=this.getAttribute("viewBox"),y=h.hasValue()?fue(h.getString()):null,d=!this.root&&"visible"!==this.getStyle("overflow").getValue("hidden"),m=0,g=0,v=0,b=0;y&&(m=y[0],g=y[1]),this.root||(l=this.getStyle("width").getPixels("x"),c=this.getStyle("height").getPixels("y"),"marker"===this.type&&(v=m,b=g,m=0,g=0)),o.viewPort.setCurrent(l,c),!this.node||this.parent&&"foreignObject"!==(null===(r=this.node.parentNode)||void 0===r?void 0:r.nodeName)||!this.getStyle("transform",!1,!0).hasValue()||this.getStyle("transform-origin",!1,!0).hasValue()||this.getStyle("transform-origin",!0,!0).setValue("50% 50%"),Hse(t,"setContext",this,3)([e]),e.translate(this.getAttribute("x").getPixels("x"),this.getAttribute("y").getPixels("y")),y&&(l=y[2],c=y[3]),n.setViewBox({ctx:e,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:o.viewPort.width,desiredWidth:l,height:o.viewPort.height,desiredHeight:c,minX:m,minY:g,refX:f.getValue(),refY:p.getValue(),clip:d,clipX:v,clipY:b}),y&&(o.viewPort.removeCurrent(),o.viewPort.setCurrent(l,c))}},{key:"clearContext",value:function(e){Hse(t,"clearContext",this,3)([e]),this.document.screen.viewPort.removeCurrent()}},{key:"resize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=this.getAttribute("width",!0),o=this.getAttribute("height",!0),i=this.getAttribute("viewBox"),a=this.getAttribute("style"),s=n.getNumber(0),u=o.getNumber(0);if(r)if("string"==typeof r)this.getAttribute("preserveAspectRatio",!0).setValue(r);else{var l=this.getAttribute("preserveAspectRatio");l.hasValue()&&l.setValue(l.getString().replace(/^\s*(\S.*\S)\s*$/,"$1"))}if(n.setValue(e),o.setValue(t),i.hasValue()||i.setValue("0 0 ".concat(s||e," ").concat(u||t)),a.hasValue()){var c=this.getStyle("width"),f=this.getStyle("height");c.hasValue()&&c.setValue("".concat(e,"px")),f.hasValue()&&f.setValue("".concat(t,"px"))}}}])}(),cle=function(e){function t(){var e;$se(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=Yse(this,t,[].concat(n))).type="rect",e}return Xse(t,ule),tue(t,[{key:"path",value:function(e){var t=this.getAttribute("x").getPixels("x"),r=this.getAttribute("y").getPixels("y"),n=this.getStyle("width",!1,!0).getPixels("x"),o=this.getStyle("height",!1,!0).getPixels("y"),i=this.getAttribute("rx"),a=this.getAttribute("ry"),s=i.getPixels("x"),u=a.getPixels("y");if(i.hasValue()&&!a.hasValue()&&(u=s),a.hasValue()&&!i.hasValue()&&(s=u),s=Math.min(s,n/2),u=Math.min(u,o/2),e){var l=(Math.sqrt(2)-1)/3*4;e.beginPath(),o>0&&n>0&&(e.moveTo(t+s,r),e.lineTo(t+n-s,r),e.bezierCurveTo(t+n-s+l*s,r,t+n,r+u-l*u,t+n,r+u),e.lineTo(t+n,r+o-u),e.bezierCurveTo(t+n,r+o-u+l*u,t+n-s+l*s,r+o,t+n-s,r+o),e.lineTo(t+s,r+o),e.bezierCurveTo(t+s-l*s,r+o,t,r+o-u+l*u,t,r+o-u),e.lineTo(t,r+u),e.bezierCurveTo(t,r+u-l*u,t+s-l*s,r,t+s,r),e.closePath())}return new rle(t,r,t+n,r+o)}},{key:"getMarkers",value:function(){return null}}])}(),fle=function(e){function t(){var e;$se(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=Yse(this,t,[].concat(n))).type="circle",e}return Xse(t,ule),tue(t,[{key:"path",value:function(e){var t=this.getAttribute("cx").getPixels("x"),r=this.getAttribute("cy").getPixels("y"),n=this.getAttribute("r").getPixels();return e&&n>0&&(e.beginPath(),e.arc(t,r,n,0,2*Math.PI,!1),e.closePath()),new rle(t-n,r-n,t+n,r+n)}},{key:"getMarkers",value:function(){return null}}])}(),ple=function(e){function t(){var e;$se(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=Yse(this,t,[].concat(n))).type="ellipse",e}return Xse(t,ule),tue(t,[{key:"path",value:function(e){var t=(Math.sqrt(2)-1)/3*4,r=this.getAttribute("rx").getPixels("x"),n=this.getAttribute("ry").getPixels("y"),o=this.getAttribute("cx").getPixels("x"),i=this.getAttribute("cy").getPixels("y");return e&&r>0&&n>0&&(e.beginPath(),e.moveTo(o+r,i),e.bezierCurveTo(o+r,i+t*n,o+t*r,i+n,o,i+n),e.bezierCurveTo(o-t*r,i+n,o-r,i+t*n,o-r,i),e.bezierCurveTo(o-r,i-t*n,o-t*r,i-n,o,i-n),e.bezierCurveTo(o+t*r,i-n,o+r,i-t*n,o+r,i),e.closePath()),new rle(o-r,i-n,o+r,i+n)}},{key:"getMarkers",value:function(){return null}}])}(),hle=function(e){function t(){var e;$se(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=Yse(this,t,[].concat(n))).type="line",e}return Xse(t,ule),tue(t,[{key:"getPoints",value:function(){return[new Rue(this.getAttribute("x1").getPixels("x"),this.getAttribute("y1").getPixels("y")),new Rue(this.getAttribute("x2").getPixels("x"),this.getAttribute("y2").getPixels("y"))]}},{key:"path",value:function(e){var t=nue(this.getPoints(),2),r=t[0],n=r.x,o=r.y,i=t[1],a=i.x,s=i.y;return e&&(e.beginPath(),e.moveTo(n,o),e.lineTo(a,s)),new rle(n,o,a,s)}},{key:"getMarkers",value:function(){var e=nue(this.getPoints(),2),t=e[0],r=e[1],n=t.angleTo(r);return[[t,n],[r,n]]}}])}(),yle=function(e){function t(e,r,n){var o;return $se(this,t),(o=Yse(this,t,[e,r,n])).type="polyline",o.points=[],o.points=Rue.parsePath(o.getAttribute("points").getString()),o}return Xse(t,ule),tue(t,[{key:"path",value:function(e){var t=this.points,r=nue(t,1)[0],n=r.x,o=r.y,i=new rle(n,o);return e&&(e.beginPath(),e.moveTo(n,o)),t.forEach(function(t){var r=t.x,n=t.y;i.addPoint(r,n),e&&e.lineTo(r,n)}),i}},{key:"getMarkers",value:function(){var e=this.points,t=e.length-1,r=[];return e.forEach(function(n,o){o!==t&&r.push([n,n.angleTo(e[o+1])])}),r.length>0&&r.push([e[e.length-1],r[r.length-1][1]]),r}}])}(),dle=function(e){function t(){var e;$se(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=Yse(this,t,[].concat(n))).type="polygon",e}return Xse(t,yle),tue(t,[{key:"path",value:function(e){var r=Hse(t,"path",this,3)([e]),n=nue(this.points,1)[0],o=n.x,i=n.y;return e&&(e.lineTo(o,i),e.closePath()),r}}])}(),mle=function(e){function t(){var e;$se(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=Yse(this,t,[].concat(n))).type="pattern",e}return Xse(t,Zue),tue(t,[{key:"createPattern",value:function(e,t,r){var n=this.getStyle("width").getPixels("x",!0),o=this.getStyle("height").getPixels("y",!0),i=new lle(this.document,null);i.attributes.set("viewBox",new Mue(this.document,"viewBox",this.getAttribute("viewBox").getValue())),i.attributes.set("width",new Mue(this.document,"width","".concat(n,"px"))),i.attributes.set("height",new Mue(this.document,"height","".concat(o,"px"))),i.attributes.set("transform",new Mue(this.document,"transform",this.getAttribute("patternTransform").getValue())),i.children=this.children;var a=this.document.createCanvas(n,o),s=a.getContext("2d"),u=this.getAttribute("x"),l=this.getAttribute("y");u.hasValue()&&l.hasValue()&&s.translate(u.getPixels("x",!0),l.getPixels("y",!0)),r.hasValue()?this.styles.set("fill-opacity",r):this.styles.delete("fill-opacity");for(var c=-1;c<=1;c++)for(var f=-1;f<=1;f++)s.save(),i.attributes.set("x",new Mue(this.document,"x",c*a.width)),i.attributes.set("y",new Mue(this.document,"y",f*a.height)),i.render(s),s.restore();return e.createPattern(a,"repeat")}}])}(),gle=function(e){function t(){var e;$se(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=Yse(this,t,[].concat(n))).type="marker",e}return Xse(t,Zue),tue(t,[{key:"render",value:function(e,t,r){if(t){var n=t.x,o=t.y,i=this.getAttribute("orient").getString("auto"),a=this.getAttribute("markerUnits").getString("strokeWidth");e.translate(n,o),"auto"===i&&e.rotate(r),"strokeWidth"===a&&e.scale(e.lineWidth,e.lineWidth),e.save();var s=new lle(this.document);s.type=this.type,s.attributes.set("viewBox",new Mue(this.document,"viewBox",this.getAttribute("viewBox").getValue())),s.attributes.set("refX",new Mue(this.document,"refX",this.getAttribute("refX").getValue())),s.attributes.set("refY",new Mue(this.document,"refY",this.getAttribute("refY").getValue())),s.attributes.set("width",new Mue(this.document,"width",this.getAttribute("markerWidth").getValue())),s.attributes.set("height",new Mue(this.document,"height",this.getAttribute("markerHeight").getValue())),s.attributes.set("overflow",new Mue(this.document,"overflow",this.getAttribute("overflow").getValue())),s.attributes.set("fill",new Mue(this.document,"fill",this.getAttribute("fill").getColor("black"))),s.attributes.set("stroke",new Mue(this.document,"stroke",this.getAttribute("stroke").getValue("none"))),s.children=this.children,s.render(e),e.restore(),"strokeWidth"===a&&e.scale(1/e.lineWidth,1/e.lineWidth),"auto"===i&&e.rotate(-r),e.translate(-n,-o)}}}])}(),vle=function(e){function t(){var e;$se(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=Yse(this,t,[].concat(n))).type="defs",e}return Xse(t,Zue),tue(t,[{key:"render",value:function(){}}])}(),ble=function(e){function t(){var e;$se(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=Yse(this,t,[].concat(n))).type="g",e}return Xse(t,nle),tue(t,[{key:"getBoundingBox",value:function(e){var t=new rle;return this.children.forEach(function(r){t.addBoundingBox(r.getBoundingBox(e))}),t}}])}(),Ale=function(e){function t(e,r,n){var o;$se(this,t),(o=Yse(this,t,[e,r,n])).attributesToInherit=["gradientUnits"],o.stops=[];var i=o,a=i.stops;return i.children.forEach(function(e){"stop"===e.type&&a.push(e)}),o}return Xse(t,Zue),tue(t,[{key:"getGradientUnits",value:function(){return this.getAttribute("gradientUnits").getString("objectBoundingBox")}},{key:"createGradient",value:function(e,t,r){var n=this,o=this;this.getHrefAttribute().hasValue()&&(o=this.getHrefAttribute().getDefinition(),this.inheritStopContainer(o));var i=o.stops,a=this.getGradient(e,t);if(!a)return this.addParentOpacity(r,i[i.length-1].color);if(i.forEach(function(e){a.addColorStop(e.offset,n.addParentOpacity(r,e.color))}),this.getAttribute("gradientTransform").hasValue()){var s=this.document,u=Que.MAX_VIRTUAL_PIXELS,l=s.screen.viewPort.getRoot(),c=new cle(s);c.attributes.set("x",new Mue(s,"x",-u/3)),c.attributes.set("y",new Mue(s,"y",-u/3)),c.attributes.set("width",new Mue(s,"width",u)),c.attributes.set("height",new Mue(s,"height",u));var f=new ble(s);f.attributes.set("transform",new Mue(s,"transform",this.getAttribute("gradientTransform").getValue())),f.children=[c];var p=new lle(s);p.attributes.set("x",new Mue(s,"x",0)),p.attributes.set("y",new Mue(s,"y",0)),p.attributes.set("width",new Mue(s,"width",l.width)),p.attributes.set("height",new Mue(s,"height",l.height)),p.children=[f];var h=s.createCanvas(l.width,l.height),y=h.getContext("2d");return y.fillStyle=a,p.render(y),y.createPattern(h,"no-repeat")}return a}},{key:"inheritStopContainer",value:function(e){var t=this;this.attributesToInherit.forEach(function(r){!t.getAttribute(r).hasValue()&&e.getAttribute(r).hasValue()&&t.getAttribute(r,!0).setValue(e.getAttribute(r).getValue())})}},{key:"addParentOpacity",value:function(e,t){return e.hasValue()?new Mue(this.document,"color",t).addOpacity(e).getColor():t}}])}(),wle=function(e){function t(e,r,n){var o;return $se(this,t),(o=Yse(this,t,[e,r,n])).type="linearGradient",o.attributesToInherit.push("x1","y1","x2","y2"),o}return Xse(t,Ale),tue(t,[{key:"getGradient",value:function(e,t){var r="objectBoundingBox"===this.getGradientUnits(),n=r?t.getBoundingBox(e):null;if(r&&!n)return null;this.getAttribute("x1").hasValue()||this.getAttribute("y1").hasValue()||this.getAttribute("x2").hasValue()||this.getAttribute("y2").hasValue()||(this.getAttribute("x1",!0).setValue(0),this.getAttribute("y1",!0).setValue(0),this.getAttribute("x2",!0).setValue(1),this.getAttribute("y2",!0).setValue(0));var o=r?n.x+n.width*this.getAttribute("x1").getNumber():this.getAttribute("x1").getPixels("x"),i=r?n.y+n.height*this.getAttribute("y1").getNumber():this.getAttribute("y1").getPixels("y"),a=r?n.x+n.width*this.getAttribute("x2").getNumber():this.getAttribute("x2").getPixels("x"),s=r?n.y+n.height*this.getAttribute("y2").getNumber():this.getAttribute("y2").getPixels("y");return o===a&&i===s?null:e.createLinearGradient(o,i,a,s)}}])}(),Sle=function(e){function t(e,r,n){var o;return $se(this,t),(o=Yse(this,t,[e,r,n])).type="radialGradient",o.attributesToInherit.push("cx","cy","r","fx","fy","fr"),o}return Xse(t,Ale),tue(t,[{key:"getGradient",value:function(e,t){var r="objectBoundingBox"===this.getGradientUnits(),n=t.getBoundingBox(e);if(r&&!n)return null;this.getAttribute("cx").hasValue()||this.getAttribute("cx",!0).setValue("50%"),this.getAttribute("cy").hasValue()||this.getAttribute("cy",!0).setValue("50%"),this.getAttribute("r").hasValue()||this.getAttribute("r",!0).setValue("50%");var o=r?n.x+n.width*this.getAttribute("cx").getNumber():this.getAttribute("cx").getPixels("x"),i=r?n.y+n.height*this.getAttribute("cy").getNumber():this.getAttribute("cy").getPixels("y"),a=o,s=i;this.getAttribute("fx").hasValue()&&(a=r?n.x+n.width*this.getAttribute("fx").getNumber():this.getAttribute("fx").getPixels("x")),this.getAttribute("fy").hasValue()&&(s=r?n.y+n.height*this.getAttribute("fy").getNumber():this.getAttribute("fy").getPixels("y"));var u=r?(n.width+n.height)/2*this.getAttribute("r").getNumber():this.getAttribute("r").getPixels(),l=this.getAttribute("fr").getPixels();return e.createRadialGradient(a,s,l,o,i,u)}}])}(),Cle=function(e){function t(e,r,n){var o;$se(this,t),(o=Yse(this,t,[e,r,n])).type="stop";var i=Math.max(0,Math.min(1,o.getAttribute("offset").getNumber())),a=o.getStyle("stop-opacity"),s=o.getStyle("stop-color",!0);return""===s.getString()&&s.setValue("#000"),a.hasValue()&&(s=s.addOpacity(a)),o.offset=i,o.color=s.getColor(),o}return Xse(t,Zue),tue(t)}(),Ele=function(e){function t(e,r,n){var o;$se(this,t),(o=Yse(this,t,[e,r,n])).type="animate",o.duration=0,o.initialUnits="",o.removed=!1,o.frozen=!1,e.screen.animations.push(o),o.begin=o.getAttribute("begin").getMilliseconds(),o.maxDuration=o.begin+o.getAttribute("dur").getMilliseconds(),o.from=o.getAttribute("from"),o.to=o.getAttribute("to"),o.values=new Mue(e,"values",null);var i=o.getAttribute("values");return i.hasValue()&&o.values.setValue(i.getString().split(";")),o}return Xse(t,Zue),tue(t,[{key:"getProperty",value:function(){var e=this.getAttribute("attributeType").getString(),t=this.getAttribute("attributeName").getString();return"CSS"===e?this.parent.getStyle(t,!0):this.parent.getAttribute(t,!0)}},{key:"calcValue",value:function(){var e=this.initialUnits,t=this.getProgress(),r=t.progress,n=t.from,o=t.to,i=n.getNumber()+(o.getNumber()-n.getNumber())*r;return"%"===e&&(i*=100),"".concat(i).concat(e)}},{key:"update",value:function(e){var t=this.parent,r=this.getProperty();if(this.initialValue||(this.initialValue=r.getString(),this.initialUnits=r.getUnits()),this.duration>this.maxDuration){var n=this.getAttribute("fill").getString("remove");if("indefinite"===this.getAttribute("repeatCount").getString()||"indefinite"===this.getAttribute("repeatDur").getString())this.duration=0;else if("freeze"!==n||this.frozen){if("remove"===n&&!this.removed)return this.removed=!0,t&&r&&r.setValue(t.animationFrozen?t.animationFrozenValue:this.initialValue),!0}else this.frozen=!0,t&&r&&(t.animationFrozen=!0,t.animationFrozenValue=r.getString());return!1}this.duration+=e;var o=!1;if(this.begin<this.duration){var i=this.calcValue(),a=this.getAttribute("type");if(a.hasValue()){var s=a.getString();i="".concat(s,"(").concat(i,")")}r.setValue(i),o=!0}return o}},{key:"getProgress",value:function(){var e,t,r=this.document,n=this.values,o=(this.duration-this.begin)/(this.maxDuration-this.begin);if(n.hasValue()){var i,a=o*(n.getValue().length-1),s=Math.floor(a),u=Math.ceil(a);i=n.getValue()[s],e=new Mue(r,"from",i?parseFloat(i):0),i=n.getValue()[u],t=new Mue(r,"to",i?parseFloat(i):0),o=(a-s)/(u-s)}else e=this.from,t=this.to;return{progress:o,from:e,to:t}}}])}(),_le=function(e){function t(){var e;$se(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=Yse(this,t,[].concat(n))).type="animateColor",e}return Xse(t,Ele),tue(t,[{key:"calcValue",value:function(){var e=this.getProgress(),t=e.progress,r=e.from,n=e.to,o=new pse(r.getColor()),i=new pse(n.getColor());if(o.ok&&i.ok){var a=o.r+(i.r-o.r)*t,s=o.g+(i.g-o.g)*t,u=o.b+(i.b-o.b)*t;return"rgb(".concat(Math.floor(a),", ").concat(Math.floor(s),", ").concat(Math.floor(u),")")}return this.getAttribute("from").getColor()}}])}(),Ile=function(e){function t(){var e;$se(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=Yse(this,t,[].concat(n))).type="animateTransform",e}return Xse(t,Ele),tue(t,[{key:"calcValue",value:function(){var e=this.getProgress(),t=e.progress,r=e.from,n=e.to,o=fue(r.getString()),i=fue(n.getString());return o.map(function(e,r){return e+(i[r]-e)*t}).join(" ")}}])}(),Ole=function(e){function t(e,r,n){var o;return $se(this,t),(o=Yse(this,t,[e,r,n])).type="font-face",o.ascent=o.getAttribute("ascent").getNumber(),o.descent=o.getAttribute("descent").getNumber(),o.unitsPerEm=o.getAttribute("units-per-em").getNumber(),o}return Xse(t,Zue),tue(t)}(),xle=function(e){function t(e,r,n){var o;return $se(this,t),(o=Yse(this,t,[e,r,n])).type="glyph",o.horizAdvX=o.getAttribute("horiz-adv-x").getNumber(),o.unicode=o.getAttribute("unicode").getString(),o.arabicForm=o.getAttribute("arabic-form").getString(),o}return Xse(t,ule),tue(t)}(),Ple=function(e){function t(){var e;$se(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=Yse(this,t,[].concat(n))).type="missing-glyph",e.horizAdvX=0,e}return Xse(t,xle),tue(t)}(),kle=function(e){function t(e,r,n){var o;$se(this,t),(o=Yse(this,t,[e,r,n])).type="font",o.isArabic=!1,o.glyphs=new Map,o.arabicGlyphs=new Map,o.isRTL=!1,o.horizAdvX=o.getAttribute("horiz-adv-x").getNumber();var i,a=e.definitions,s=Kse(o.children);try{for(s.s();!(i=s.n()).done;){var u=i.value;if(u instanceof Ole){o.fontFace=u;var l=u.getStyle("font-family");l.hasValue()&&a.set(l.getString(),o)}else if(u instanceof Ple)o.missingGlyph=u;else if(u instanceof xle)if(u.arabicForm){o.isRTL=!0,o.isArabic=!0;var c=o.arabicGlyphs.get(u.unicode);void 0===c&&(c=new Map,o.arabicGlyphs.set(u.unicode,c)),c.set(u.arabicForm,u)}else o.glyphs.set(u.unicode,u)}}catch(e){s.e(e)}finally{s.f()}return o}return Xse(t,Zue),tue(t,[{key:"render",value:function(){}}])}(),Tle=function(e){function t(){var e;$se(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=Yse(this,t,[].concat(n))).type="tref",e}return Xse(t,ole),tue(t,[{key:"getText",value:function(){var e=this.getHrefAttribute().getDefinition();if(e){var t=e.children[0];if(t)return t.getText()}return""}}])}(),jle=function(e){function t(e,r,n){var o;$se(this,t),(o=Yse(this,t,[e,r,n])).type="a";var i=r.childNodes,a=i[0],s=i.length>0&&Array.from(i).every(function(e){return 3===e.nodeType});return o.hasText=s,o.text=s?o.getTextFromNode(a):"",o}return Xse(t,ole),tue(t,[{key:"getText",value:function(){return this.text}},{key:"renderChildren",value:function(e){if(this.hasText){Hse(t,"renderChildren",this,3)([e]);var r=this.document,n=this.x,o=this.y,i=r.screen.mouse,a=new Mue(r,"fontSize",tle.parse(r.ctx.font).fontSize);i.isWorking()&&i.checkBoundingBox(this,new rle(n,o-a.getPixels("y"),n+this.measureText(e),o))}else if(this.children.length>0){var s=new ble(this.document);s.children=this.children,s.parent=this,s.render(e)}}},{key:"onClick",value:function(){var e=this.document.window;e&&e.open(this.getHrefAttribute().getString())}},{key:"onMouseMove",value:function(){this.document.ctx.canvas.style.cursor="pointer"}}])}(),Mle=function(e){function t(e,r,n){var o;$se(this,t),(o=Yse(this,t,[e,r,n])).type="textPath",o.textWidth=0,o.textHeight=0,o.pathLength=-1,o.glyphInfo=null,o.letterSpacingCache=[],o.measuresCache=new Map([["",0]]);var i=o.getHrefAttribute().getDefinition();return o.text=o.getTextFromNode(),o.dataArray=o.parsePathData(i),o}return Xse(t,ole),tue(t,[{key:"getText",value:function(){return this.text}},{key:"path",value:function(e){var t=this.dataArray;e&&e.beginPath(),t.forEach(function(t){var r=t.type,n=t.points;switch(r){case sle.LINE_TO:e&&e.lineTo(n[0],n[1]);break;case sle.MOVE_TO:e&&e.moveTo(n[0],n[1]);break;case sle.CURVE_TO:e&&e.bezierCurveTo(n[0],n[1],n[2],n[3],n[4],n[5]);break;case sle.QUAD_TO:e&&e.quadraticCurveTo(n[0],n[1],n[2],n[3]);break;case sle.ARC:var o=nue(n,8),i=o[0],a=o[1],s=o[2],u=o[3],l=o[4],c=o[5],f=o[6],p=o[7],h=s>u?s:u,y=s>u?1:s/u,d=s>u?u/s:1;e&&(e.translate(i,a),e.rotate(f),e.scale(y,d),e.arc(0,0,h,l,l+c,Boolean(1-p)),e.scale(1/y,1/d),e.rotate(-f),e.translate(-i,-a));break;case sle.CLOSE_PATH:e&&e.closePath()}})}},{key:"renderChildren",value:function(e){this.setTextData(e),e.save();var t=this.parent.getStyle("text-decoration").getString(),r=this.getFontSize(),n=this.glyphInfo,o=e.fillStyle;"underline"===t&&e.beginPath(),n.forEach(function(n,o){var i=n.p0,a=n.p1,s=n.rotation,u=n.text;e.save(),e.translate(i.x,i.y),e.rotate(s),e.fillStyle&&e.fillText(u,0,0),e.strokeStyle&&e.strokeText(u,0,0),e.restore(),"underline"===t&&(0===o&&e.moveTo(i.x,i.y+r/8),e.lineTo(a.x,a.y+r/5))}),"underline"===t&&(e.lineWidth=r/20,e.strokeStyle=o,e.stroke(),e.closePath()),e.restore()}},{key:"getLetterSpacingAt",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.letterSpacingCache[e]||0}},{key:"findSegmentToFitChar",value:function(e,t,r,n,o,i,a,s,u){var l=i,c=this.measureText(e,s);" "===s&&"justify"===t&&r<n&&(c+=(n-r)/o),u>-1&&(l+=this.getLetterSpacingAt(u));var f=this.textHeight/20,p=this.getEquidistantPointOnPath(l,f,0),h=this.getEquidistantPointOnPath(l+c,f,0),y={p0:p,p1:h},d=p&&h?Math.atan2(h.y-p.y,h.x-p.x):0;if(a){var m=Math.cos(Math.PI/2+d)*a,g=Math.cos(-d)*a;y.p0=Use(Use({},p),{},{x:p.x+m,y:p.y+g}),y.p1=Use(Use({},h),{},{x:h.x+m,y:h.y+g})}return{offset:l+=c,segment:y,rotation:d}}},{key:"measureText",value:function(e,t){var r=this.measuresCache,n=t||this.getText();if(r.has(n))return r.get(n);var o=this.measureTargetText(e,n);return r.set(n,o),o}},{key:"setTextData",value:function(e){var t=this;if(!this.glyphInfo){var r=this.getText(),n=r.split(""),o=r.split(" ").length-1,i=this.parent.getAttribute("dx").split().map(function(e){return e.getPixels("x")}),a=this.parent.getAttribute("dy").getPixels("y"),s=this.parent.getStyle("text-anchor").getString("start"),u=this.getStyle("letter-spacing"),l=this.parent.getStyle("letter-spacing"),c=0;u.hasValue()&&"inherit"!==u.getValue()?u.hasValue()&&"initial"!==u.getValue()&&"unset"!==u.getValue()&&(c=u.getPixels()):c=l.getPixels();var f=[],p=r.length;this.letterSpacingCache=f;for(var h=0;h<p;h++)f.push(void 0!==i[h]?i[h]:c);var y=f.reduce(function(e,t,r){return 0===r?0:e+t||0},0),d=this.measureText(e),m=Math.max(d+y,0);this.textWidth=d,this.textHeight=this.getFontSize(),this.glyphInfo=[];var g=this.getPathLength(),v=this.getStyle("startOffset").getNumber(0)*g,b=0;"middle"!==s&&"center"!==s||(b=-m/2),"end"!==s&&"right"!==s||(b=-m),b+=v,n.forEach(function(r,i){var u=t.findSegmentToFitChar(e,s,m,g,o,b,a,r,i),l=u.offset,c=u.segment,f=u.rotation;b=l,c.p0&&c.p1&&t.glyphInfo.push({text:n[i],p0:c.p0,p1:c.p1,rotation:f})})}}},{key:"parsePathData",value:function(e){if(this.pathLength=-1,!e)return[];var t=[],r=e.pathParser;for(r.reset();!r.isEnd();){var n=r.current,o=n?n.x:0,i=n?n.y:0,a=r.next(),s=a.type,u=[];switch(a.type){case sle.MOVE_TO:this.pathM(r,u);break;case sle.LINE_TO:s=this.pathL(r,u);break;case sle.HORIZ_LINE_TO:s=this.pathH(r,u);break;case sle.VERT_LINE_TO:s=this.pathV(r,u);break;case sle.CURVE_TO:this.pathC(r,u);break;case sle.SMOOTH_CURVE_TO:s=this.pathS(r,u);break;case sle.QUAD_TO:this.pathQ(r,u);break;case sle.SMOOTH_QUAD_TO:s=this.pathT(r,u);break;case sle.ARC:u=this.pathA(r);break;case sle.CLOSE_PATH:ule.pathZ(r)}a.type!==sle.CLOSE_PATH?t.push({type:s,points:u,start:{x:o,y:i},pathLength:this.calcLength(o,i,s,u)}):t.push({type:sle.CLOSE_PATH,points:[],pathLength:0})}return t}},{key:"pathM",value:function(e,t){var r=ule.pathM(e).point,n=r.x,o=r.y;t.push(n,o)}},{key:"pathL",value:function(e,t){var r=ule.pathL(e).point,n=r.x,o=r.y;return t.push(n,o),sle.LINE_TO}},{key:"pathH",value:function(e,t){var r=ule.pathH(e).point,n=r.x,o=r.y;return t.push(n,o),sle.LINE_TO}},{key:"pathV",value:function(e,t){var r=ule.pathV(e).point,n=r.x,o=r.y;return t.push(n,o),sle.LINE_TO}},{key:"pathC",value:function(e,t){var r=ule.pathC(e),n=r.point,o=r.controlPoint,i=r.currentPoint;t.push(n.x,n.y,o.x,o.y,i.x,i.y)}},{key:"pathS",value:function(e,t){var r=ule.pathS(e),n=r.point,o=r.controlPoint,i=r.currentPoint;return t.push(n.x,n.y,o.x,o.y,i.x,i.y),sle.CURVE_TO}},{key:"pathQ",value:function(e,t){var r=ule.pathQ(e),n=r.controlPoint,o=r.currentPoint;t.push(n.x,n.y,o.x,o.y)}},{key:"pathT",value:function(e,t){var r=ule.pathT(e),n=r.controlPoint,o=r.currentPoint;return t.push(n.x,n.y,o.x,o.y),sle.QUAD_TO}},{key:"pathA",value:function(e){var t=ule.pathA(e),r=t.rX,n=t.rY,o=t.sweepFlag,i=t.xAxisRotation,a=t.centp,s=t.a1,u=t.ad;return 0===o&&u>0&&(u-=2*Math.PI),1===o&&u<0&&(u+=2*Math.PI),[a.x,a.y,r,n,s,u,i,o]}},{key:"calcLength",value:function(e,t,r,n){var o=0,i=null,a=null,s=0;switch(r){case sle.LINE_TO:return this.getLineLength(e,t,n[0],n[1]);case sle.CURVE_TO:for(o=0,i=this.getPointOnCubicBezier(0,e,t,n[0],n[1],n[2],n[3],n[4],n[5]),s=.01;s<=1;s+=.01)a=this.getPointOnCubicBezier(s,e,t,n[0],n[1],n[2],n[3],n[4],n[5]),o+=this.getLineLength(i.x,i.y,a.x,a.y),i=a;return o;case sle.QUAD_TO:for(o=0,i=this.getPointOnQuadraticBezier(0,e,t,n[0],n[1],n[2],n[3]),s=.01;s<=1;s+=.01)a=this.getPointOnQuadraticBezier(s,e,t,n[0],n[1],n[2],n[3]),o+=this.getLineLength(i.x,i.y,a.x,a.y),i=a;return o;case sle.ARC:o=0;var u=n[4],l=n[5],c=n[4]+l,f=Math.PI/180;if(Math.abs(u-c)<f&&(f=Math.abs(u-c)),i=this.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],u,0),l<0)for(s=u-f;s>c;s-=f)a=this.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],s,0),o+=this.getLineLength(i.x,i.y,a.x,a.y),i=a;else for(s=u+f;s<c;s+=f)a=this.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],s,0),o+=this.getLineLength(i.x,i.y,a.x,a.y),i=a;return a=this.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],c,0),o+=this.getLineLength(i.x,i.y,a.x,a.y)}return 0}},{key:"getPointOnLine",value:function(e,t,r,n,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:t,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:r,s=(o-r)/(n-t+Sue),u=Math.sqrt(e*e/(1+s*s));n<t&&(u*=-1);var l=s*u,c=null;if(n===t)c={x:i,y:a+l};else if((a-r)/(i-t+Sue)===s)c={x:i+u,y:a+l};else{var f,p,h=this.getLineLength(t,r,n,o);if(h<Sue)return null;var y=(i-t)*(n-t)+(a-r)*(o-r);f=t+(y/=h*h)*(n-t),p=r+y*(o-r);var d=this.getLineLength(i,a,f,p),m=Math.sqrt(e*e-d*d);u=Math.sqrt(m*m/(1+s*s)),n<t&&(u*=-1),c={x:f+u,y:p+(l=s*u)}}return c}},{key:"getPointOnPath",value:function(e){var t=this.getPathLength(),r=0,n=null;if(e<-5e-5||e-5e-5>t)return null;var o,i=Kse(this.dataArray);try{for(i.s();!(o=i.n()).done;){var a=o.value;if(!a||!(a.pathLength<5e-5||r+a.pathLength+5e-5<e)){var s=e-r,u=0;switch(a.type){case sle.LINE_TO:n=this.getPointOnLine(s,a.start.x,a.start.y,a.points[0],a.points[1],a.start.x,a.start.y);break;case sle.ARC:var l=a.points[4],c=a.points[5],f=a.points[4]+c;if(u=l+s/a.pathLength*c,c<0&&u<f||c>=0&&u>f)break;n=this.getPointOnEllipticalArc(a.points[0],a.points[1],a.points[2],a.points[3],u,a.points[6]);break;case sle.CURVE_TO:(u=s/a.pathLength)>1&&(u=1),n=this.getPointOnCubicBezier(u,a.start.x,a.start.y,a.points[0],a.points[1],a.points[2],a.points[3],a.points[4],a.points[5]);break;case sle.QUAD_TO:(u=s/a.pathLength)>1&&(u=1),n=this.getPointOnQuadraticBezier(u,a.start.x,a.start.y,a.points[0],a.points[1],a.points[2],a.points[3])}if(n)return n;break}r+=a.pathLength}}catch(e){i.e(e)}finally{i.f()}return null}},{key:"getLineLength",value:function(e,t,r,n){return Math.sqrt((r-e)*(r-e)+(n-t)*(n-t))}},{key:"getPathLength",value:function(){return-1===this.pathLength&&(this.pathLength=this.dataArray.reduce(function(e,t){return t.pathLength>0?e+t.pathLength:e},0)),this.pathLength}},{key:"getPointOnCubicBezier",value:function(e,t,r,n,o,i,a,s,u){return{x:s*Iue(e)+i*Oue(e)+n*xue(e)+t*Pue(e),y:u*Iue(e)+a*Oue(e)+o*xue(e)+r*Pue(e)}}},{key:"getPointOnQuadraticBezier",value:function(e,t,r,n,o,i,a){return{x:i*kue(e)+n*Tue(e)+t*jue(e),y:a*kue(e)+o*Tue(e)+r*jue(e)}}},{key:"getPointOnEllipticalArc",value:function(e,t,r,n,o,i){var a=Math.cos(i),s=Math.sin(i),u=r*Math.cos(o),l=n*Math.sin(o);return{x:e+(u*a-l*s),y:t+(u*s+l*a)}}},{key:"buildEquidistantCache",value:function(e,t){var r=this.getPathLength(),n=t||.25,o=e||r/100;if(!this.equidistantCache||this.equidistantCache.step!==o||this.equidistantCache.precision!==n){this.equidistantCache={step:o,precision:n,points:[]};for(var i=0,a=0;a<=r;a+=n){var s=this.getPointOnPath(a),u=this.getPointOnPath(a+n);s&&u&&((i+=this.getLineLength(s.x,s.y,u.x,u.y))>=o&&(this.equidistantCache.points.push({x:s.x,y:s.y,distance:a}),i-=o))}}}},{key:"getEquidistantPointOnPath",value:function(e,t,r){if(this.buildEquidistantCache(t,r),e<0||e-this.getPathLength()>5e-5)return null;var n=Math.round(e/this.getPathLength()*(this.equidistantCache.points.length-1));return this.equidistantCache.points[n]||null}}])}(),Ble=/^\s*data:(([^/,;]+\/[^/,;]+)(?:;([^,;=]+=[^,;=]+))?)?(?:;(base64))?,(.*)$/i,Nle=function(e){function t(e,r,n){var o;$se(this,t),(o=Yse(this,t,[e,r,n])).type="image",o.loaded=!1;var i=o.getHrefAttribute().getString();if(!i)return Jse(o);var a=i.endsWith(".svg")||/^\s*data:image\/svg\+xml/i.test(i);return e.images.push(o),a?o.loadSvg(i):o.loadImage(i),o}return Xse(t,nle),tue(t,[{key:"loadImage",value:function(){var e=lue(aue().m(function e(t){var r,n;return aue().w(function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,this.document.createImage(t);case 1:r=e.v,this.image=r,e.n=3;break;case 2:e.p=2,n=e.v,console.error('Error while loading image "'.concat(t,'":'),n);case 3:this.loaded=!0;case 4:return e.a(2)}},e,this,[[0,2]])}));return function(t){return e.apply(this,arguments)}}()},{key:"loadSvg",value:function(){var e=lue(aue().m(function e(t){var r,n,o,i,a;return aue().w(function(e){for(;;)switch(e.n){case 0:if(!(r=Ble.exec(t))){e.n=1;break}(n=r[5])&&("base64"===r[4]?this.image=atob(n):this.image=decodeURIComponent(n)),e.n=5;break;case 1:return e.p=1,e.n=2,this.document.fetch(t);case 2:return o=e.v,e.n=3,o.text();case 3:i=e.v,this.image=i,e.n=5;break;case 4:e.p=4,a=e.v,console.error('Error while loading image "'.concat(t,'":'),a);case 5:this.loaded=!0;case 6:return e.a(2)}},e,this,[[1,4]])}));return function(t){return e.apply(this,arguments)}}()},{key:"renderChildren",value:function(e){var t=this.document,r=this.image,n=this.loaded,o=this.getAttribute("x").getPixels("x"),i=this.getAttribute("y").getPixels("y"),a=this.getStyle("width").getPixels("x"),s=this.getStyle("height").getPixels("y");if(n&&r&&a&&s){if(e.save(),e.translate(o,i),"string"==typeof r){var u=t.canvg.forkString(e,r,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:0,offsetY:0,scaleWidth:a,scaleHeight:s}),l=u.document.documentElement;l&&(l.parent=this),u.render()}else t.setViewBox({ctx:e,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:a,desiredWidth:r.width,height:s,desiredHeight:r.height}),this.loaded&&("complete"in r&&!r.complete||e.drawImage(r,0,0));e.restore()}}},{key:"getBoundingBox",value:function(){var e=this.getAttribute("x").getPixels("x"),t=this.getAttribute("y").getPixels("y"),r=this.getStyle("width").getPixels("x"),n=this.getStyle("height").getPixels("y");return new rle(e,t,e+r,t+n)}}])}(),Rle=function(e){function t(){var e;$se(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=Yse(this,t,[].concat(n))).type="symbol",e}return Xse(t,nle),tue(t,[{key:"render",value:function(e){}}])}(),Lle=function(){return tue(function e(t){$se(this,e),this.document=t,this.loaded=!1,t.fonts.push(this)},[{key:"load",value:function(){var e=lue(aue().m(function e(t,r){var n,o,i,a;return aue().w(function(e){for(;;)switch(e.n){case 0:return e.p=0,n=this.document,e.n=1,n.canvg.parser.load(r);case 1:o=e.v,i=o.getElementsByTagName("font"),Array.from(i).forEach(function(e){var r=n.createElement(e);n.definitions.set(t,r)}),e.n=3;break;case 2:e.p=2,a=e.v,console.error('Error while loading font "'.concat(r,'":'),a);case 3:this.loaded=!0;case 4:return e.a(2)}},e,this,[[0,2]])}));return function(t,r){return e.apply(this,arguments)}}()}])}(),Dle=function(e){function t(e,r,n){var o;return $se(this,t),(o=Yse(this,t,[e,r,n])).type="style",cue(Array.from(r.childNodes).map(function(e){return e.textContent}).join("").replace(/(\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,"").replace(/@import.*;/g,"")).split("}").forEach(function(t){var r=t.trim();if(r){var n=r.split("{"),o=n[0].split(","),i=n[1].split(";");o.forEach(function(t){var r=t.trim();if(r){var n=e.styles.get(r)||new Map;if(i.forEach(function(t){var r=t.indexOf(":"),o=t.substr(0,r).trim(),i=t.substr(r+1,t.length-r).trim();o&&i&&n.set(o,new Mue(e,o,i))}),e.styles.set(r,n),e.stylesSpecificity.set(r,function(e){var t=[0,0,0],r=e.replace(/:not\(([^)]*)\)/g,"     $1 ").replace(/{[\s\S]*/gm," "),n=0,o=nue(wue(r,yue),2);r=o[0],n=o[1],t[1]+=n;var i=nue(wue(r,due),2);r=i[0],n=i[1],t[0]+=n;var a=nue(wue(r,mue),2);r=a[0],n=a[1],t[1]+=n;var s=nue(wue(r,gue),2);r=s[0],n=s[1],t[2]+=n;var u=nue(wue(r,vue),2);r=u[0],n=u[1],t[1]+=n;var l=nue(wue(r,bue),2);r=l[0],n=l[1],t[1]+=n;var c=nue(wue(r=r.replace(/[*\s+>~]/g," ").replace(/[#.]/g," "),Aue),2);return r=c[0],n=c[1],t[2]+=n,t.join("")}(r)),"@font-face"===r){var o=n.get("font-family").getString().replace(/"|'/g,"");n.get("src").getString().split(",").forEach(function(t){if(t.indexOf('format("svg")')>0){var r=hue(t);r&&new Lle(e).load(o,r)}})}}})}}),o}return Xse(t,Zue),tue(t)}();Dle.parseExternalUrl=hue;var Fle=function(e){function t(){var e;$se(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=Yse(this,t,[].concat(n))).type="use",e}return Xse(t,nle),tue(t,[{key:"setContext",value:function(e){Hse(t,"setContext",this,3)([e]);var r=this.getAttribute("x"),n=this.getAttribute("y");r.hasValue()&&e.translate(r.getPixels("x"),0),n.hasValue()&&e.translate(0,n.getPixels("y"))}},{key:"path",value:function(e){var t=this.element;t&&t.path(e)}},{key:"renderChildren",value:function(e){var t=this.document,r=this.element;if(r){var n=r;if("symbol"===r.type&&((n=new lle(t)).attributes.set("viewBox",new Mue(t,"viewBox",r.getAttribute("viewBox").getString())),n.attributes.set("preserveAspectRatio",new Mue(t,"preserveAspectRatio",r.getAttribute("preserveAspectRatio").getString())),n.attributes.set("overflow",new Mue(t,"overflow",r.getAttribute("overflow").getString())),n.children=r.children,r.styles.set("opacity",new Mue(t,"opacity",this.calculateOpacity()))),"svg"===n.type){var o=this.getStyle("width",!1,!0),i=this.getStyle("height",!1,!0);o.hasValue()&&n.attributes.set("width",new Mue(t,"width",o.getString())),i.hasValue()&&n.attributes.set("height",new Mue(t,"height",i.getString()))}var a=n.parent;n.parent=this,n.render(e),n.parent=a}}},{key:"getBoundingBox",value:function(e){var t=this.element;return t?t.getBoundingBox(e):null}},{key:"elementTransform",value:function(){var e=this.document,t=this.element;return t?Xue.fromElement(e,t):null}},{key:"element",get:function(){return this.cachedElement||(this.cachedElement=this.getHrefAttribute().getDefinition()),this.cachedElement}}])}();function Qle(e,t,r,n,o,i){return e[r*n*4+4*t+i]}function Gle(e,t,r,n,o,i,a){e[r*n*4+4*t+i]=a}function Ule(e,t,r){return e[t]*r}function zle(e,t,r,n){return t+Math.cos(e)*r+Math.sin(e)*n}var Hle=function(e){function t(e,r,n){var o;$se(this,t),(o=Yse(this,t,[e,r,n])).type="feColorMatrix";var i=fue(o.getAttribute("values").getString());switch(o.getAttribute("type").getString("matrix")){case"saturate":var a=i[0];i=[.213+.787*a,.715-.715*a,.072-.072*a,0,0,.213-.213*a,.715+.285*a,.072-.072*a,0,0,.213-.213*a,.715-.715*a,.072+.928*a,0,0,0,0,0,1,0,0,0,0,0,1];break;case"hueRotate":var s=i[0]*Math.PI/180;i=[zle(s,.213,.787,-.213),zle(s,.715,-.715,-.715),zle(s,.072,-.072,.928),0,0,zle(s,.213,-.213,.143),zle(s,.715,.285,.14),zle(s,.072,-.072,-.283),0,0,zle(s,.213,-.213,-.787),zle(s,.715,-.715,.715),zle(s,.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break;case"luminanceToAlpha":i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1]}return o.matrix=i,o.includeOpacity=o.getAttribute("includeOpacity").hasValue(),o}return Xse(t,Zue),tue(t,[{key:"apply",value:function(e,t,r,n,o){for(var i=this.includeOpacity,a=this.matrix,s=e.getImageData(0,0,n,o),u=0;u<o;u++)for(var l=0;l<n;l++){var c=Qle(s.data,l,u,n,0,0),f=Qle(s.data,l,u,n,0,1),p=Qle(s.data,l,u,n,0,2),h=Qle(s.data,l,u,n,0,3),y=Ule(a,0,c)+Ule(a,1,f)+Ule(a,2,p)+Ule(a,3,h)+Ule(a,4,1),d=Ule(a,5,c)+Ule(a,6,f)+Ule(a,7,p)+Ule(a,8,h)+Ule(a,9,1),m=Ule(a,10,c)+Ule(a,11,f)+Ule(a,12,p)+Ule(a,13,h)+Ule(a,14,1),g=Ule(a,15,c)+Ule(a,16,f)+Ule(a,17,p)+Ule(a,18,h)+Ule(a,19,1);i&&(y=0,d=0,m=0,g*=h/255),Gle(s.data,l,u,n,0,0,y),Gle(s.data,l,u,n,0,1,d),Gle(s.data,l,u,n,0,2,m),Gle(s.data,l,u,n,0,3,g)}e.clearRect(0,0,n,o),e.putImageData(s,0,0)}}])}(),qle=function(e){function t(){var e;$se(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=Yse(this,t,[].concat(n))).type="mask",e}return Xse(t,Zue),tue(t,[{key:"apply",value:function(e,r){var n=this.document,o=this.getAttribute("x").getPixels("x"),i=this.getAttribute("y").getPixels("y"),a=this.getStyle("width").getPixels("x"),s=this.getStyle("height").getPixels("y");if(!a&&!s){var u=new rle;this.children.forEach(function(t){u.addBoundingBox(t.getBoundingBox(e))}),o=Math.floor(u.x1),i=Math.floor(u.y1),a=Math.floor(u.width),s=Math.floor(u.height)}var l=this.removeStyles(r,t.ignoreStyles),c=n.createCanvas(o+a,i+s),f=c.getContext("2d");n.screen.setDefaults(f),this.renderChildren(f),new Hle(n,{nodeType:1,childNodes:[],attributes:[{nodeName:"type",value:"luminanceToAlpha"},{nodeName:"includeOpacity",value:"true"}]}).apply(f,0,0,o+a,i+s);var p=n.createCanvas(o+a,i+s),h=p.getContext("2d");n.screen.setDefaults(h),r.render(h),h.globalCompositeOperation="destination-in",h.fillStyle=f.createPattern(c,"no-repeat"),h.fillRect(0,0,o+a,i+s),e.fillStyle=h.createPattern(p,"no-repeat"),e.fillRect(0,0,o+a,i+s),this.restoreStyles(r,l)}},{key:"render",value:function(e){}}])}();qle.ignoreStyles=["mask","transform","clip-path"];var Vle=function(){},Kle=function(e){function t(){var e;$se(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=Yse(this,t,[].concat(n))).type="clipPath",e}return Xse(t,Zue),tue(t,[{key:"apply",value:function(e){var t=this.document,r=Reflect.getPrototypeOf(e),n=e.beginPath,o=e.closePath;r&&(r.beginPath=Vle,r.closePath=Vle),Reflect.apply(n,e,[]),this.children.forEach(function(n){if("path"in n){var i="elementTransform"in n?n.elementTransform():null;i||(i=Xue.fromElement(t,n)),i&&i.apply(e),n.path(e),r&&(r.closePath=o),i&&i.unapply(e)}}),Reflect.apply(o,e,[]),e.clip(),r&&(r.beginPath=n,r.closePath=o)}},{key:"render",value:function(e){}}])}(),Yle=function(e){function t(){var e;$se(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=Yse(this,t,[].concat(n))).type="filter",e}return Xse(t,Zue),tue(t,[{key:"apply",value:function(e,r){var n=this.document,o=this.children,i="getBoundingBox"in r?r.getBoundingBox(e):null;if(i){var a=0,s=0;o.forEach(function(e){var t=e.extraFilterDistance||0;a=Math.max(a,t),s=Math.max(s,t)});var u=Math.floor(i.width),l=Math.floor(i.height),c=u+2*a,f=l+2*s;if(!(c<1||f<1)){var p=Math.floor(i.x),h=Math.floor(i.y),y=this.removeStyles(r,t.ignoreStyles),d=n.createCanvas(c,f),m=d.getContext("2d");n.screen.setDefaults(m),m.translate(-p+a,-h+s),r.render(m),o.forEach(function(e){"function"==typeof e.apply&&e.apply(m,0,0,c,f)}),e.drawImage(d,0,0,c,f,p-a,h-s,c,f),this.restoreStyles(r,y)}}}},{key:"render",value:function(e){}}])}();Yle.ignoreStyles=["filter","transform","clip-path"];var Jle={svg:lle,rect:cle,circle:fle,ellipse:ple,line:hle,polyline:yle,polygon:dle,path:ule,pattern:mle,marker:gle,defs:vle,linearGradient:wle,radialGradient:Sle,stop:Cle,animate:Ele,animateColor:_le,animateTransform:Ile,font:kle,"font-face":Ole,"missing-glyph":Ple,glyph:xle,text:ole,tspan:ile,tref:Tle,a:jle,textPath:Mle,image:Nle,g:ble,symbol:Rle,style:Dle,use:Fle,mask:qle,clipPath:Kle,filter:Yle,feDropShadow:function(e){function t(e,r,n){var o;return $se(this,t),(o=Yse(this,t,[e,r,n])).type="feDropShadow",o.addStylesFromStyleDefinition(),o}return Xse(t,Zue),tue(t,[{key:"apply",value:function(e,t,r,n,o){}}])}(),feMorphology:function(e){function t(){var e;$se(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=Yse(this,t,[].concat(n))).type="feMorphology",e}return Xse(t,Zue),tue(t,[{key:"apply",value:function(e,t,r,n,o){}}])}(),feComposite:function(e){function t(){var e;$se(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=Yse(this,t,[].concat(n))).type="feComposite",e}return Xse(t,Zue),tue(t,[{key:"apply",value:function(e,t,r,n,o){}}])}(),feColorMatrix:Hle,feGaussianBlur:function(e){function t(e,r,n){var o;return $se(this,t),(o=Yse(this,t,[e,r,n])).type="feGaussianBlur",o.blurRadius=Math.floor(o.getAttribute("stdDeviation").getNumber()),o.extraFilterDistance=o.blurRadius,o}return Xse(t,Zue),tue(t,[{key:"apply",value:function(e,t,r,n,o){var i=this.document,a=this.blurRadius,s=i.window?i.window.document.body:null,u=e.canvas;u.id=i.getUniqueId(),s&&(u.style.display="none",s.appendChild(u)),Dse(u,t,r,n,o,a),s&&s.removeChild(u)}}])}(),title:function(e){function t(){var e;$se(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=Yse(this,t,[].concat(n))).type="title",e}return Xse(t,Zue),tue(t)}(),desc:function(e){function t(){var e;$se(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=Yse(this,t,[].concat(n))).type="desc",e}return Xse(t,Zue),tue(t)}()};function Wle(){return(Wle=lue(aue().m(function e(t){var r,n,o=arguments;return aue().w(function(e){for(;;)switch(e.n){case 0:return r=o.length>1&&void 0!==o[1]&&o[1],n=document.createElement("img"),r&&(n.crossOrigin="Anonymous"),e.a(2,new Promise(function(e,r){n.onload=function(){e(n)},n.onerror=function(e,t,n,o,i){r(i)},n.src=t}))}},e)}))).apply(this,arguments)}var Xle=12,Zle=function(){function e(t){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.rootEmSize,i=void 0===o?Xle:o,a=n.emSize,s=void 0===a?Xle:a,u=n.createCanvas,l=void 0===u?e.createCanvas:u,c=n.createImage,f=void 0===c?e.createImage:c,p=n.anonymousCrossOrigin;$se(this,e),this.canvg=t,this.definitions=new Map,this.styles=new Map,this.stylesSpecificity=new Map,this.images=[],this.fonts=[],this.emSizeStack=[],this.uniqueId=0,this.screen=t.screen,this.rootEmSize=i,this.emSize=s,this.createCanvas=l,this.createImage=this.bindCreateImage(f,p),this.screen.wait(function(){return r.isImagesLoaded()}),this.screen.wait(function(){return r.isFontsLoaded()})}return tue(e,[{key:"bindCreateImage",value:function(e,t){return"boolean"==typeof t?function(r,n){return e(r,"boolean"==typeof n?n:t)}:e}},{key:"window",get:function(){return this.screen.window}},{key:"fetch",get:function(){return this.screen.fetch}},{key:"ctx",get:function(){return this.screen.ctx}},{key:"emSize",get:function(){var e=this.emSizeStack;return e[e.length-1]||Xle},set:function(e){this.emSizeStack.push(e)}},{key:"popEmSize",value:function(){this.emSizeStack.pop()}},{key:"getUniqueId",value:function(){return"canvg".concat(++this.uniqueId)}},{key:"isImagesLoaded",value:function(){return this.images.every(function(e){return e.loaded})}},{key:"isFontsLoaded",value:function(){return this.fonts.every(function(e){return e.loaded})}},{key:"createDocumentElement",value:function(e){var t=this.createElement(e.documentElement);return t.root=!0,t.addStylesFromStyleDefinition(),this.documentElement=t,t}},{key:"createElement",value:function(t){var r=t.nodeName.replace(/^[^:]+:/,""),n=e.elementTypes[r];return n?new n(this,t):new $ue(this,t)}},{key:"createTextNode",value:function(e){return new ale(this,e)}},{key:"setViewBox",value:function(e){this.screen.setViewBox(Use({document:this},e))}}])}();Zle.createCanvas=function(e,t){var r=document.createElement("canvas");return r.width=e,r.height=t,r},Zle.createImage=function(e){return Wle.apply(this,arguments)},Zle.elementTypes=Jle;var $le=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};$se(this,e),this.parser=new zue(n),this.screen=new Que(t,n),this.options=n;var o=new Zle(this,n),i=o.createDocumentElement(r);this.document=o,this.documentElement=i}return tue(e,[{key:"fork",value:function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e.from(t,r,Use(Use({},this.options),n))}},{key:"forkString",value:function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e.fromString(t,r,Use(Use({},this.options),n))}},{key:"ready",value:function(){return this.screen.ready()}},{key:"isReady",value:function(){return this.screen.isReady()}},{key:"render",value:function(){var e=lue(aue().m(function e(){var t,r=arguments;return aue().w(function(e){for(;;)switch(e.n){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},this.start(Use({enableRedraw:!0,ignoreAnimation:!0,ignoreMouse:!0},t)),e.n=1,this.ready();case 1:this.stop();case 2:return e.a(2)}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"start",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.documentElement,r=this.screen,n=this.options;r.start(t,Use(Use({enableRedraw:!0},n),e))}},{key:"stop",value:function(){this.screen.stop()}},{key:"resize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.documentElement.resize(e,t,r)}}],[{key:"from",value:function(){var t=lue(aue().m(function t(r,n){var o,i,a,s=arguments;return aue().w(function(t){for(;;)switch(t.n){case 0:return o=s.length>2&&void 0!==s[2]?s[2]:{},i=new zue(o),t.n=1,i.parse(n);case 1:return a=t.v,t.a(2,new e(r,a,o))}},t)}));return function(e,r){return t.apply(this,arguments)}}()},{key:"fromString",value:function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new e(t,new zue(n).parseFromString(r),n)}}])}(),ece=r(311),tce=r.n(ece),rce=r(304);function nce(e){return function(e){if(Array.isArray(e))return oce(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return oce(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?oce(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oce(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ice(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof s?n:s,l=Object.create(u.prototype);return ace(l,"_invoke",function(r,n,o){var i,s,u,l=0,c=o||[],f=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,r){return i=t,s=0,u=e,p.n=r,a}};function h(r,n){for(s=r,u=n,t=0;!f&&l&&!o&&t<c.length;t++){var o,i=c[t],h=p.p,y=i[2];r>3?(o=y===n)&&(u=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=r<2&&h<i[1])?(s=0,p.v=n,p.n=i[1]):h<y&&(o=r<3||i[0]>n||n>y)&&(i[4]=r,i[5]=n,p.n=y,s=0))}if(o||r>1)return a;throw f=!0,n}return function(o,c,y){if(l>1)throw TypeError("Generator is already running");for(f&&1===c&&h(c,y),s=c,u=y;(t=s<2?e:u)||!f;){i||(s?s<3?(s>1&&(p.n=-1),h(s,u)):p.n=u:p.v=u);try{if(l=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(f=p.n<0)?u:r.call(n,p))!==a)break}catch(t){i=e,s=1,u=t}finally{l=1}}return{value:t,done:f}}}(r,o,i),!0),l}var a={};function s(){}function u(){}function l(){}t=Object.getPrototypeOf;var c=[][n]?t(t([][n]())):(ace(t={},n,function(){return this}),t),f=l.prototype=s.prototype=Object.create(c);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,ace(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=l,ace(f,"constructor",l),ace(l,"constructor",u),u.displayName="GeneratorFunction",ace(l,o,"GeneratorFunction"),ace(f),ace(f,o,"Generator"),ace(f,n,function(){return this}),ace(f,"toString",function(){return"[object Generator]"}),(ice=function(){return{w:i,m:p}})()}function ace(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}(ace=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){ace(e,t,function(e){return this._invoke(t,r,e)})};i("next",0),i("throw",1),i("return",2)}})(e,t,r,n)}function sce(e,t,r,n,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function uce(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){sce(i,n,o,a,s,"next",e)}function s(e){sce(i,n,o,a,s,"throw",e)}a(void 0)})}}function lce(e){"@babel/helpers - typeof";return(lce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cce(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,fce(n.key),n)}}function fce(e){var t=function(e,t){if("object"!=lce(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=lce(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==lce(t)?t:t+""}var pce=["GoogleCRS84Quad","GoogleMapsCompatible","urn:ogc:def:wkss:OGC:1.0:GoogleMapsCompatible","urn:ogc:def:wkss:OGC:1.0:GoogleCRS84Quad"],hce=[559082264.0287178,279541132.0143589,139770566.00717944,69885283.00358972,34942641.50179486,17471320.75089743,8735660.375448715,4367830.1877243575,2183915.0938621787,1091957.5469310894,545978.7734655447,272989.38673277234,136494.69336638617,68247.34668319309,34123.67334159654,17061.83667079827,8530.918335399136,4265.459167699568,2132.729583849784,1066.364791924892,533.182395962446,266.591197981223,133.2955989906115],yce=[559082264.0287176,279541132.0143588,139770566.0071794,69885283.0035897,34942641.50179485,17471320.750897426,8735660.375448713,4367830.187724357,2183915.0938621783,1091957.5469310891,545978.7734655446,272989.3867327723,136494.69336638614,68247.34668319307,34123.673341596535,17061.836670798268,8530.918335399134,4265.459167699567,2132.7295838497835,1066.3647919248917,533.1823959624459,266.59119798122293,133.29559899061147],dce=function(){return e=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"string"==typeof t||"number"==typeof t?this.mapId=t:null!==t&&"object"===lce(t)&&(this.mapInfo=t),this.serverUrl=r.serverUrl||"https://www.supermapol.com",this.credentialKey=r.credentialKey,this.credentialValue=r.credentialValue,this.tiandituKey=r.tiandituKey||"",this.withCredentials=r.withCredentials||!1,this.excludePortalProxyUrl=r.excludePortalProxyUrl,this.iportalServiceProxyUrl=r.iportalServiceProxyUrlPrefix,this.proxy=r.proxy,this.proxyOptions={data:"apps/viewer/getUrlResource.json?url=",image:"apps/viewer/getUrlResource.png?url="}},(t=[{key:"setMapId",value:function(e){"string"==typeof e||"number"==typeof e?(this.mapId=e,this.mapInfo=null):null!==e&&"object"===lce(e)&&(this.mapInfo=e,this.mapId="")}},{key:"setServerUrl",value:function(e){this.serverUrl=e}},{key:"setWithCredentials",value:function(e){this.withCredentials=e}},{key:"setProxy",value:function(e){this.proxy=e}},{key:"handleServerUrl",value:function(e){var t=Co(e);return this.serverUrl=t,t}},{key:"getMapInfo",value:function(){var e=uce(ice().m(function e(){var t,r,n=this;return ice().w(function(e){for(;;)switch(e.n){case 0:if(this.mapId||!this.mapInfo){e.n=1;break}return e.a(2,new Promise(function(e){e(n.mapInfo)}));case 1:return t=this._handleMapUrl(),e.p=2,e.n=3,this.getiPortalServiceProxy();case 3:return e.a(2,new Promise(function(e,r){z.get(t,null,{withCredentials:n.withCredentials}).then(function(e){return e.json()}).then(function(t){if(t&&!1===t.succeed){var n={message:t&&t.error&&t.error.errorMsg};r(n)}else t.mapParams={title:t.title,description:t.description},e(t)}).catch(function(e){r(e)})}));case 4:return e.p=4,r=e.v,e.a(2,Promise.reject(r))}},e,this,[[2,4]])}));return function(){return e.apply(this,arguments)}}()},{key:"getiPortalServiceProxy",value:function(){var e=this;return new Promise(function(t,r){z.get("".concat(e.serverUrl,"web/config/portal.json"),{scope:["serviceProxy"]}).then(function(e){return e.json()}).then(function(n){if(n&&n.serviceProxy){var o=n.serviceProxy;o.enable&&(o.proxyServerRootUrl?e.iportalServiceProxyUrl=o.proxyServerRootUrl:o.port&&o.rootUrlPostfix&&(e.iportalServiceProxyUrl="".concat(o.port,"/").concat(o.rootUrlPostfix)),e.serverUrl.indexOf(e.iportalServiceProxyUrl)>-1&&(e.iportalServiceProxyUrl="")),t(o)}else r("serviceProxyFailed")}).catch(function(e){r(e)})})}},{key:"getLayerFeatures",value:function(e,t,r){var n;switch(e){case"hosted":n=this._getFeaturesFromHosted(t,r);break;case"rest_data":n=this._getFeaturesFromRestData(t,r);break;case"rest_map":n=this._getFeaturesFromRestMap(t);break;case"dataflow":n=this._getFeaturesFromDataflow(t);break;case"user_data":n=this._getFeaturesFromUserData(t)}return n}},{key:"getWmsInfo",value:function(e){var t=this;return new Promise(function(r){var n=t.handleProxy(),o=M.urlAppend(e.url,"REQUEST=GetCapabilities&SERVICE=WMS");z.get(o,null,{withCredentials:t.handleWithCredentials(n,e.url,!1),withoutFormatSuffix:!0,proxy:n}).then(function(e){return e.text()}).then(function(e){var t=new rce.XMLParser({ignoreAttributes:!1,attributeNamePrefix:"@_"}).parse(e),n=t.WMT_MS_Capabilities||t.WMS_Capabilities,o=n.Capability.Layer.LatLonBoundingBox,i=null;o&&(i=[+o["@_minx"],+o["@_miny"],+o["@_maxx"],+o["@_maxy"]]);var a=n.Capability.Layer.EX_GeographicBoundingBox;a&&(i=[+a.westBoundLongitude,+a.southBoundLatitude,+a.eastBoundLongitude,+a.northBoundLatitude]),r({version:n["@_version"],bounds:i})})})}},{key:"getMapBoxStyle",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise(function(n,o){var i=t.handleProxy();z.get(e,{},{withoutFormatSuffix:r,withCredentials:t.handleWithCredentials(i,e,t.withCredentials)}).then(function(e){return e.json()}).then(function(e){n(e)}).catch(function(e){o(e)})})}},{key:"getWmtsInfo",value:function(e,t){var r=this;return new Promise(function(n,o){var i,a=!1,s=22,u=0,l="",c="",f="",p=r.handleProxy(),h=M.urlAppend(e.url,"REQUEST=GetCapabilities&SERVICE=WMTS&VERSION=1.0.0");h=r.handleParentRes(h),z.get(h,null,{withCredentials:r.handleWithCredentials(p,e.url,!1),withoutFormatSuffix:!0,proxy:p}).then(function(e){return e.text()}).then(function(o){var p=["Layer","TileMatrixSet","ows:Operation","ows:Get","ResourceURL","Style"],h=new rce.XMLParser({ignoreAttributes:!1,attributeNamePrefix:"@_",isArray:function(e){if(-1!==p.indexOf(e))return!0}}).parse(o).Capabilities,y=h.Contents,d=h["ows:OperationsMetadata"];if(d){var m=d["ows:Operation"];Array.isArray(m)||(m=[m]);var g=m.find(function(e){return"GetTile"===e["@_name"]});if(g){var v=g["ows:DCP"]["ows:HTTP"]["ows:Get"];Array.isArray(v)||(v=[v]);var b=v.find(function(e){return"KVP"===e["ows:Constraint"]["ows:AllowedValues"]["ows:Value"]});b&&(f=b["@_xlink:href"])}}for(var A=y.TileMatrixSet,w=0;w<A.length;w++)if(A[w]["ows:Identifier"]&&A[w]["ows:Identifier"]+""===e.tileMatrixSet){if(A[w].WellKnownScaleSet&&pce.includes(A[w].WellKnownScaleSet))a=!0;else{for(var S={},C="EPSG:3857"===t?hce:yce,E="EPSG:3857"===t?[-20037508.342789248,20037508.342789087]:[-180,90],_=0;_<A[w].TileMatrix.length;_++){var I=A[w].TileMatrix[_],O=I["ows:Identifier"],x=nce(I.TopLeftCorner.split(" "));if(!(r.numberEqual(x[0],E[0])&&r.numberEqual(x[1],E[1])||r.numberEqual(x[0],E[1])&&r.numberEqual(x[1],E[0])))break;var P=C[+O];if(!P)break;var k=parseFloat(A[w].TileMatrix[_].ScaleDenominator);if(r.numberEqual(P,k))S[+O]=k;else if(Object.keys(S).length>0)break}var T=Object.keys(S).map(function(e){return+e});if(s=T.length>0?Math.max.apply(Math,nce(T)):void 0,u=T.length>0?Math.min.apply(Math,nce(T)):void 0,0===T.length)throw Error("TileMatrixSetNotSuppport");a=!0}break}var j=y.Layer&&y.Layer.find(function(t){return t["ows:Identifier"]===e.layer});if(j){var M=j.Style;if(l=Array.isArray(j.Style)?M[0]["ows:Identifier"]?M[0]["ows:Identifier"]:"":M["ows:Identifier"]?M["ows:Identifier"]:"",j["ows:WGS84BoundingBox"]){var B=j["ows:WGS84BoundingBox"]["ows:LowerCorner"].split(" "),N=j["ows:WGS84BoundingBox"]["ows:UpperCorner"].split(" ");i=[parseFloat(B[0]),parseFloat(B[1]),parseFloat(N[0]),parseFloat(N[1])]}var R=j.ResourceURL;Array.isArray(R)||(R=[R]);var L=R.find(function(e){return"tile"===e["@_resourceType"]});L&&(c=L["@_template"])}n({isMatched:a,matchMaxZoom:s,matchMinZoom:u,style:l,bounds:i,restResourceURL:c,kvpResourceUrl:f})}).catch(function(e){o(e)})})}},{key:"_getFeaturesFromHosted",value:function(e,t){var r=e.dataSource,n=e.layerType,o=r?r.serverId:e.serverId;return o?"MARKER"===n||r&&(!r.accessType||"DIRECT"===r.accessType)?this._getDataFromIportal(o,e):this._getDataFromHosted({layer:e,serverId:o,baseProjection:t}):new Promise(function(e){e({type:"noServerId"})})}},{key:"_getFeaturesFromRestData",value:function(e,t){var r,n=this,o=e.dataSource;return new Promise(function(i,a){n._getFeatureBySQL(o.url,[decodeURIComponent(o.dataSourceName)||e.name],function(e){e.result.features?(r=n.parseGeoJsonData2Feature({allDatas:{features:e.result.features.features}}),i({type:"feature",features:r})):a("features must be valid")},function(e){a(e)},t)})}},{key:"_getFeaturesFromRestMap",value:function(e){var t=this;return new Promise(function(r,n){t._queryFeatureBySQL(e.dataSource.url,e.dataSource.layerName,function(o){var i=o&&o.result.recordsets,a=i&&i[0],s=a.fields;if(a&&s){var u=[];for(var l in s){var c=s[l];0===c.indexOf("Sm")&&"SmID"!==c||u.push(c)}t._getFeatures(u,e,function(e){r({type:"feature",features:e})},function(e){n(e)})}},function(e){n(e)},"smid=1")})}},{key:"_getFeaturesFromUserData",value:function(e){var t=this,r=e.dataSource;return new Promise(function(e,n){var o=t.handleProxy(),i=t.handleParentRes(r.url);z.get(i,null,{withCredentials:t.handleWithCredentials(o,i,t.withCredentials),proxy:o,withoutFormatSuffix:!0}).then(function(e){return e.json()}).then(function(r){var n;n=r&&r instanceof Object&&"FeatureCollection"===r.type?r.features:r,n=t.parseGeoJsonData2Feature({allDatas:{features:n}}),e({type:"feature",features:n})}).catch(function(e){n(e)})})}},{key:"_queryFeatureBySQL",value:function(e,t,r,n,o,i,a,s,u,l){var c=this._getQueryFeaturesParam(t,o,i,a,s,u,l),f=this.handleProxy(),p=this.handleParentRes(e);new pW(p,{proxy:f,withCredentials:this.handleWithCredentials(f,e,!1),eventListeners:{processCompleted:function(e){r&&r(e)},processFailed:function(e){n&&n(e)}}}).processAsync(c)}},{key:"_getFeatures",value:function(e,t,r,n){var o=this,i=t.dataSource;this._queryFeatureBySQL(i.url,i.layerName,function(e){var t=e.result.recordsets[0].features.features,n=o.parseGeoJsonData2Feature({allDatas:{features:t}});r(n)},function(e){n(e)},null,e)}},{key:"_getQueryFeaturesParam",value:function(e,t,r,n,o,i,a){var s=new Fj({name:e,attributeFilter:t});r&&(s.fields=r);var u={queryParams:[s]};return a&&(u.queryOption=cn.ATTRIBUTE),o&&(u.startRecord=o),i&&(u.expectCount=i),n&&(u.prjCoordSys={epsgCode:n}),new oW(u)}},{key:"_getFeaturesFromDataflow",value:function(e){var t=this;return new Promise(function(r,n){t._getDataflowInfo(e,function(){r({type:"dataflow"})},function(e){n(e)})})}},{key:"_getDataflowInfo",value:function(e,t,r){var n,o=e.url,i="".concat(o,".json");e.credential&&e.credential.token&&(n=e.credential.token,i+="?token=".concat(n));var a=this.handleProxy();i=this.handleParentRes(i),z.get(i,null,{proxy:a,withCredentials:this.handleWithCredentials(a,i,!1)}).then(function(e){return e.json()}).then(function(n){n?(n.featureMetaData&&(e.featureType=n.featureMetaData.featureType.toUpperCase(),e.dataSource={dataTypes:{}},n.featureMetaData.fieldInfos&&n.featureMetaData.fieldInfos.length>0&&n.featureMetaData.fieldInfos.forEach(function(t){var r=t.name.trim();"TEXT"===t.type?e.dataSource.dataTypes[r]="STRING":["DOUBLE","INT","FLOAT","LONG","SHORT"].includes(t.type)?e.dataSource.dataTypes[r]="NUMBER":e.dataSource.dataTypes[r]="UNKNOWN"})),e.wsUrl=n.urls[0].url,e.name=n.urls[0].url.split("iserver/services/")[1].split("/dataflow")[0],t()):r()}).catch(function(){r()})}},{key:"getDatasourceType",value:function(e){var t,r=e.dataSource,n=e.layerType;return r&&"SAMPLE_DATA"===r.type?r.type:(r&&r.serverId||"MARKER"===n||"HOSTED_TILE"===n?t="hosted":"ZXY_TILE"===n||"SUPERMAP_REST"===n||"TILE"===n||"WMS"===n||"WMTS"===n||"MAPBOXSTYLE"===n?t="tile":r&&"REST_DATA"===r.type?t="rest_data":r&&"REST_MAP"===r.type&&r.url?t="rest_map":"DATAFLOW_POINT_TRACK"===n||"DATAFLOW_HEAT"===n?t="dataflow":r&&"USER_DATA"===r.type&&(t="user_data"),t)}},{key:"getFeatureProperties",value:function(e){var t=[];return e&&e.length&&e.forEach(function(e){var r=e.properties;r&&t.push(r)}),t}},{key:"parseGeoJsonData2Feature",value:function(e){for(var t=e.allDatas.features,r=[],n=0,o=t.length;n<o;n++){var i=t[n],a=i.geometry.coordinates;"Point"===t[n].geometry.type&&t[n].properties&&(t[n].properties.lon=a[0],t[n].properties.lat=a[1]),i.properties.index=n+"",r.push(i)}return r}},{key:"_getDataFromIportal",value:function(e,t){var r,n=this,o="".concat(this.serverUrl,"web/datas/").concat(e,"/content.json?pageSize=9999999&currentPage=1");return this.credentialKey&&this.credentialValue&&(o="".concat(o,"&").concat(this.credentialKey,"=").concat(this.credentialValue)),new Promise(function(e,i){o=n.handleParentRes(o);var a=n.handleProxy();z.get(o,null,{withCredentials:n.handleWithCredentials(a,o,n.withCredentials),proxy:a}).then(function(e){return e.json()}).then(function(){var o=uce(ice().m(function o(a){var s,u,l,c;return ice().w(function(o){for(;;)switch(o.n){case 0:if(!1===a.succeed&&i(a.error),!a||!a.type){o.n=7;break}if("JSON"!==a.type&&"GEOJSON"!==a.type){o.n=1;break}a.content=JSON.parse(a.content.trim()),r=n._formatGeoJSON(a.content),o.n=6;break;case 1:if("EXCEL"!==a.type&&"CSV"!==a.type){o.n=5;break}if(!t.dataSource||!t.dataSource.administrativeInfo){o.n=3;break}return a.content.rows.unshift(a.content.colTitles),s=t.dataSource.administrativeInfo,u=s.divisionType,l=s.divisionField,o.n=2,n._excelData2FeatureByDivision(a.content,u,l);case 2:c=o.v,r=n._formatGeoJSON(c),o.n=4;break;case 3:r=n._excelData2Feature(a.content,t&&t.xyField||{});case 4:o.n=6;break;case 5:"SHP"===a.type&&(a.content=JSON.parse(a.content.trim()),r=n._formatGeoJSON(a.content.layers[0]));case 6:e({type:"feature",features:r});case 7:return o.a(2)}},o)}));return function(e){return o.apply(this,arguments)}}()).catch(function(e){i(e)})})}},{key:"_getDataFromHosted",value:function(e){var t=this,r=e.layer,n=e.serverId,o=e.baseProjection,i="HOSTED_TILE"===r.layerType;return new Promise(function(e,a){t._checkUploadToRelationship(n).then(function(s){if(s&&s.length>0){var u=s[0].name,l=s[0].type.toUpperCase();t._getDataService(n,u).then(function(n){var s=n.dataItemServices;0===s.length&&a("noDataServices");var c={layer:r,dataItemServices:s,datasetName:u,featureType:l,resolve:e,reject:a,baseProjection:o};if(i){var f=s.filter(function(e){return e&&"RESTDATA"===e.serviceType})[0];t._isMvt(f.address,u,o).then(function(e){t._getServiceInfoFromLayer(c,e)}).catch(function(){t._getServiceInfoFromLayer(c)})}else t._getServiceInfoFromLayer(c)})}else a("resultIsEmpty")}).catch(function(e){a(e)})})}},{key:"_isMvt",value:function(e,t,r){return this._getDatasetsInfo(e,t).then(function(e){return e.epsgCode==r.split("EPSG:")[1]?z.get("".concat(e.url,"/tilefeature.mvt")).then(function(e){return e.json()}).then(function(t){return e.isMvt=t.error&&400===t.error.code,e}).catch(function(){return e}):e})}},{key:"_getServiceInfoFromLayer",value:function(e,t){var r=this,n=e.layer,o=e.dataItemServices,i=e.datasetName,a=e.featureType,s=e.resolve,u=e.reject,l=e.baseProjection,c=t?!t.isMvt:"HOSTED_TILE"===n.layerType,f=!1;o.forEach(function(e){f||(e&&c&&"RESTMAP"===e.serviceType?(f=!0,r._getTileLayerInfo(e.address,l).then(function(e){s({type:"restMap",restMaps:e})})):e&&!c&&"RESTDATA"===e.serviceType&&(t&&t.isMvt?s({type:"mvt",info:t,featureType:a}):(f=!0,r._getDatasources(e.address).then(function(t){n.dataSource.dataSourceName=t+":"+i,n.dataSource.url="".concat(e.address,"/data"),r._getFeatureBySQL(n.dataSource.url,[n.dataSource.dataSourceName||n.name],function(e){var t=r.parseGeoJsonData2Feature({allDatas:{features:e.result.features.features}});s({type:"feature",features:t})},function(e){u(e)})},function(e){u(e)}))))},this),f||u("noService")}},{key:"_getDatasetsInfo",value:function(e,t){var r=this;return this._getDatasources(e).then(function(n){var o="".concat(e,"/data/datasources/").concat(n,"/datasets/").concat(t),i=r.handleProxy();return o=r.handleParentRes(o),z.get(o,null,{withCredentials:r.handleWithCredentials(i,o,!1),proxy:i}).then(function(e){return e.json()}).then(function(e){return{epsgCode:e.datasetInfo.prjCoordSys.epsgCode,bounds:e.datasetInfo.bounds,datasourceName:n,datasetName:t,url:o}})})}},{key:"_getDatasources",value:function(e){var t=this.handleProxy(),r="".concat(e,"/data/datasources.json");return r=this.handleParentRes(r),z.get(r,null,{withCredentials:this.handleWithCredentials(t,r,!1),proxy:t}).then(function(e){return e.json()}).then(function(e){if(401===e.code)throw Error(e.errorMsg);return e.datasourceNames[0]})}},{key:"_getDataService",value:function(e,t){var r=this.handleProxy(),n="".concat(this.serverUrl,"web/datas/").concat(e,".json");return n=this.handleParentRes(n),z.get(n,null,{withCredentials:this.handleWithCredentials(r,n,this.withCredentials),proxy:r}).then(function(e){return e.json()}).then(function(r){return r.fileId=e,r.datasetName=t,r})}},{key:"_checkUploadToRelationship",value:function(e){var t=this.handleProxy(),r="".concat(this.serverUrl,"web/datas/").concat(e,"/datasets.json");return r=this.handleParentRes(r),z.get(r,null,{withCredentials:this.handleWithCredentials(t,r,this.withCredentials),proxy:t}).then(function(e){return e.json()}).then(function(e){return e})}},{key:"_handleMapUrl",value:function(){var e=this.serverUrl+"web/maps/"+this.mapId+"/map";this.credentialValue&&this.credentialKey&&(e+="?"+this.credentialKey+"="+this.credentialValue);var t="getUrlResource.json?url=";if(this.excludePortalProxyUrl&&this.serverUrl.indexOf(t)>-1){var r=this.serverUrl.split(t);r.length>1&&(e=r[0]+t+this.serverUrl+"web/maps/"+this.mapId+"/map.json")}return e=-1===e.indexOf(".json")?"".concat(e,".json"):e}},{key:"handleProxy",value:function(e){if(!this.proxy)return null;var t=this.proxyOptions[e||"data"],r=this.serverUrl+t;return"string"==typeof this.proxy&&(r=this.proxy),r}},{key:"handleWithCredentials",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.withCredentials;return t&&t.includes("https://www.supermapol.com")?"":!(!e||!e.startsWith(this.serverUrl)||t&&!t.startsWith(e))||(!!(t&&this.iportalServiceProxyUrl&&t.indexOf(this.iportalServiceProxyUrl)>=0)||r)}},{key:"isIportalResourceUrl",value:function(e){return e.startsWith(this.serverUrl)||this.iportalServiceProxyUrl&&e.indexOf(this.iportalServiceProxyUrl)>=0}},{key:"handleParentRes",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.mapId,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"MAP";return this.isIportalResourceUrl(e)?M.urlAppend(e,"parentResType=".concat(r,"&parentResId=").concat(t)):e}},{key:"_formatGeoJSON",value:function(e){var t=e.features;return t.forEach(function(e,t){e.properties.index=t}),t}},{key:"_excelData2Feature",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.colTitles,n=r.indexOf(t.xField),o=r.indexOf(t.yField);if(o<0||n<0)for(var i=0,a=r.length;i<a;i++)Mie.isXField(r[i])&&(n=i),Mie.isYField(r[i])&&(o=i);for(var s=[],u=0,l=e.rows.length;u<l;u++){var c=e.rows[u],f=Number(c[n]),p=Number(c[o]);if(!isNaN(f)&&!isNaN(p)){for(var h={},y=0;y<e.colTitles.length;y++){h[e.colTitles[y].trim()]=e.rows[u][y]}h.index=u+"";var d={type:"Feature",geometry:{type:"Point",coordinates:[f,p]},properties:h};s.push(d)}}return s}},{key:"_excelData2FeatureByDivision",value:function(e,t,r){var n=this,o=["åå¸","City"].includes(t)?"MunicipalData":"ProvinceData";if(window[o]&&window[o].features)return new Promise(function(t){t(n._combineFeature(e,window[o],r))});var i=["åå¸","City"].includes(t)?"MunicipalData.js":"ProvincialData.js",a=this.handleProxy(),s="".concat(this.serverUrl,"apps/dataviz/libs/administrative_data/").concat(i);return z.get(s,null,{withCredentials:!1,proxy:a,withoutFormatSuffix:!0}).then(function(e){return e.text()}).then(function(t){return new Function(t)(),n._combineFeature(e,window[o],r)})}},{key:"_combineFeature",value:function(e,t,r){var n=this,o={type:"FeatureCollection",features:[]};if(e.length<2)return o;var i=e.colTitles,a=e.rows,s=i.findIndex(function(e){return e===r});return a.forEach(function(e){var r=t.features.find(function(t){return n._isMatchAdministrativeName(t.properties.Name,e[s])});if(r){var a=r.properties.Province,u={properties:{},geometry:r.geometry,type:"Feature"};e.forEach(function(e,t){u.properties[i[t]]=e}),a&&(u.properties.Province=a),o.features.push(u)}}),o}},{key:"_isMatchAdministrativeName",value:function(e,t){if(e&&"string"==typeof t&&t.constructor===String){var r=e.trim().substr(0,2);return"å¼ å®¶"===r&&(r=e.trim().substr(0,3)),"é¿æ"===r&&(r=e.trim().substr(0,3)),!!t.match(new RegExp(r))}return!1}},{key:"_getTileLayerInfo",value:function(e,t){var r=this,n=this.handleProxy(),o=t.split("EPSG:")[1],i="".concat(e,"/maps.json");return i=this.handleParentRes(i),z.get(i,null,{withCredentials:this.handleWithCredentials(n,i,this.withCredentials),proxy:n}).then(function(e){return e.json()}).then(function(e){var t=[];return e&&e.forEach(function(e){var i=z.get("".concat(e.path,".json?prjCoordSys=").concat(JSON.stringify({epsgCode:o})),null,{withCredentials:r.withCredentials,proxy:n}).then(function(e){return e.json()}).then(function(t){return t.url=e.path,t});t.push(i)}),Promise.all(t).then(function(e){return e})})}},{key:"_getFeatureBySQL",value:function(e,t,r,n,o){var i,a,s=this;i=new Fj({name:t.join().replace(":","@"),attributeFilter:null}),a=new hM({queryParameter:i,datasetNames:t,fromIndex:0,toIndex:-1,maxFeatures:-1,returnContent:!0,returnFeaturesOnly:!0}),o&&"EPSG:4326"!==o&&(a.targetEpsgCode=4326);var u=this.handleProxy(),l={proxy:u,withCredentials:this.handleWithCredentials(u,e,!1),eventListeners:{processCompleted:function(e){var t=e.result;if(t&&t.datasetInfos){var n=[],o=[],i=[];t.datasetInfos[0].fieldInfos.forEach(function(e){e.name&&(n.push(e.name.toUpperCase()),o.push(e.caption.toUpperCase()),i.push(e.type))});var a=s.statisticsFeatures(t.features.features,n,o,i);e.result.features.features=a.features}r&&r(e)},processFailed:function(e){n&&n(e)}}},c=this.handleParentRes(e);new wM(c,l).processAsync(a)}},{key:"statisticsFeatures",value:function(e,t,r,n){var o={features:e,fields:t||[],fieldValues:[],fieldTypes:n};if(e&&e.length){r&&r.length&&e.forEach(function(e){var n={};for(var o in e.properties){var i=t.indexOf(o);n[r[i]||o]=e.properties[o]}e.properties=n});var i=Object.assign({},e[0].properties,e[e.length-1].properties);o.fields=Object.keys(i)}for(var a in o.fields){var s=[];for(var u in e){var l=e[u],c=o.fields[a],f=l.properties[c];s.push(f)}o.fieldValues.push(s)}return o}},{key:"numberEqual",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-5;return Math.abs(+e-+t)<=r}}])&&cce(e.prototype,t),r&&cce(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function mce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function gce(e,t,r){return(t=Cce(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vce(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof s?n:s,l=Object.create(u.prototype);return bce(l,"_invoke",function(r,n,o){var i,s,u,l=0,c=o||[],f=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,r){return i=t,s=0,u=e,p.n=r,a}};function h(r,n){for(s=r,u=n,t=0;!f&&l&&!o&&t<c.length;t++){var o,i=c[t],h=p.p,y=i[2];r>3?(o=y===n)&&(u=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=r<2&&h<i[1])?(s=0,p.v=n,p.n=i[1]):h<y&&(o=r<3||i[0]>n||n>y)&&(i[4]=r,i[5]=n,p.n=y,s=0))}if(o||r>1)return a;throw f=!0,n}return function(o,c,y){if(l>1)throw TypeError("Generator is already running");for(f&&1===c&&h(c,y),s=c,u=y;(t=s<2?e:u)||!f;){i||(s?s<3?(s>1&&(p.n=-1),h(s,u)):p.n=u:p.v=u);try{if(l=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(f=p.n<0)?u:r.call(n,p))!==a)break}catch(t){i=e,s=1,u=t}finally{l=1}}return{value:t,done:f}}}(r,o,i),!0),l}var a={};function s(){}function u(){}function l(){}t=Object.getPrototypeOf;var c=[][n]?t(t([][n]())):(bce(t={},n,function(){return this}),t),f=l.prototype=s.prototype=Object.create(c);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,bce(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=l,bce(f,"constructor",l),bce(l,"constructor",u),u.displayName="GeneratorFunction",bce(l,o,"GeneratorFunction"),bce(f),bce(f,o,"Generator"),bce(f,n,function(){return this}),bce(f,"toString",function(){return"[object Generator]"}),(vce=function(){return{w:i,m:p}})()}function bce(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}(bce=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){bce(e,t,function(e){return this._invoke(t,r,e)})};i("next",0),i("throw",1),i("return",2)}})(e,t,r,n)}function Ace(e,t,r,n,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function wce(e){"@babel/helpers - typeof";return(wce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sce(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Cce(n.key),n)}}function Cce(e){var t=function(e,t){if("object"!=wce(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=wce(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==wce(t)?t:t+""}function Ece(e,t,r){return t=_ce(t),function(e,t){if(t&&("object"==wce(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],_ce(e).constructor):t.apply(e,r))}function _ce(e){return(_ce=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ice(e,t){return(Ice=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Oce=1e3;function xce(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ja,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"triggerEvent";return function(r){function n(e,t,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(o=Ece(this,n)).serverUrl=t.serverUrl||"https://www.supermapol.com",o.credentialValue=t.credentialValue,o.credentialKey=t.credentialKey,o.tiandituKey=t.tiandituKey||"",o.googleMapsAPIKey=t.googleMapsAPIKey||"",o.bingMapsKey=t.bingMapsKey||"",o.googleMapsLanguage=t.googleMapsLanguage||"zh-CN",o.withCredentials=t.withCredentials||!1,o.proxy=t.proxy,o.target=t.target||"map",o.excluortalProxyUrl=t.excludePortalProxyUrl,o.isSuperMapOnline=t.isSuperMapOnline,o.ignoreBaseProjection=t.ignoreBaseProjection,o.specifiedProj4=t.proj4,o.echartslayer=[],o.canvgsV=[],o.webMapService=new dce(e,t),o.mapOptions=r,o.eventTypes=["mapcreatefailed","layercreatefailed"],o.mapId=e,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ice(e,t)}(n,e),o=n,(i=[{key:"_initWebMap",value:function(){throw new Error("_initWebMap is not implemented")}},{key:"_getMapInfo",value:function(){throw new Error("_getMapInfo is not implemented")}},{key:"_createMap",value:function(){throw new Error("_createMap is not implemented")}},{key:"_initBaseLayer",value:function(){throw new Error("_initBaseLayer is not implemented")}},{key:"_initOverlayLayer",value:function(){throw new Error("_initOverlayLayer is not implemented")}},{key:"_addLayerSucceeded",value:function(){throw new Error("_addLayerSucceeded is not implemented")}},{key:"_unproject",value:function(){throw new Error("_unproject is not implemented")}},{key:"clean",value:function(){throw new Error("clean is not implemented")}},{key:"echartsLayerResize",value:function(){this.echartslayer.forEach(function(e){e.chart.resize()})}},{key:"setMapId",value:function(e){var t=this;"string"==typeof e||"number"==typeof e?(this.mapId=e,this.webMapInfo=null):null!==e&&"object"===wce(e)&&(this.webMapInfo=e,this.mapId=""),this.webMapService.setMapId(e),e&&setTimeout(function(){t._initWebMap()},0)}},{key:"setServerUrl",value:function(e){this.serverUrl=e,this.webMapService.setServerUrl(e)}},{key:"setWithCredentials",value:function(e){this.withCredentials=e,this.webMapService.setWithCredentials(e)}},{key:"setProxy",value:function(e){this.proxy=e,this.webMapService.setProxy(e)}},{key:"setZoom",value:function(e){this.map&&(this.mapOptions.zoom=e,e!==+this.map.getZoom().toFixed(2)&&(e||0===e)&&this.map.setZoom(e,{from:"setZoom"}))}},{key:"setMaxBounds",value:function(e){this.map&&(this.mapOptions.maxBounds=e,e&&this.map.setMaxBounds(e))}},{key:"setMinZoom",value:function(e){this.map&&(this.mapOptions.minZoom=e,(e||0===e)&&this.map.setMinZoom(e))}},{key:"setMaxZoom",value:function(e){this.map&&(this.mapOptions.maxZoom=e,(e||0===e)&&this.map.setMaxZoom(e))}},{key:"initWebMap",value:function(){if(this.clean(),this.serverUrl=this.serverUrl&&this.webMapService.handleServerUrl(this.serverUrl),this.webMapInfo){var e=this.webMapInfo;return e.mapParams={title:this.webMapInfo.title,description:this.webMapInfo.description},this.mapParams=e.mapParams,void this._getMapInfo(e)}this.mapId&&this.serverUrl?(this._taskID=new Date,this.getMapInfo(this._taskID)):this._createMap()}},{key:"getMapInfo",value:function(e){var t=this;this.serverUrl=this.serverUrl&&this.webMapService.handleServerUrl(this.serverUrl),this.webMapService.getMapInfo().then(function(r){t._taskID===e&&(t.mapParams=r.mapParams,t._getMapInfo(r,e))},function(e){throw e}).catch(function(e){t._fire("mapcreatefailed",{error:e}),console.log(e)})}},{key:"getBaseLayerType",value:function(e){var t=e.layerType;switch((t.indexOf("TIANDITU_VEC")>-1||t.indexOf("TIANDITU_IMG")>-1||t.indexOf("TIANDITU_TER")>-1)&&(t="TIANDITU"),t){case"TILE":case"SUPERMAP_REST":return"TILE";case"CLOUD":case"CLOUD_BLACK":return"CLOUD";case"OSM":case"JAPAN_ORT":case"JAPAN_RELIEF":case"JAPAN_PALE":case"JAPAN_STD":case"GOOGLE_CN":case"GOOGLE":return"XYZ";default:return t}}},{key:"getMapurls",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{CLOUD:e.CLOUD||"http://t2.dituhui.com/FileService/image?map=quanguo&type=web&x={x}&y={y}&z={z}",CLOUD_BLACK:e.CLOUD_BLACK||"http://t3.dituhui.com/MapService/getGdp?x={x}&y={y}&z={z}",OSM:e.OSM||"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png",GOOGLE:"https://maps.googleapis.com/maps/vt?pb=!1m5!1m4!1i{z}!2i{x}!3i{y}!4i256!2m3!1e0!2sm!3i540264686!3m12!2s{googleMapsLanguage}!3sUS!5e18!12m4!1e68!2m2!1sset!2sRoadmap!12m3!1e37!2m1!1ssmartmaps!4e0&key={googleMapsAPIKey}",GOOGLE_CN:"https://mt{0-3}.google.com/vt/lyrs=m&hl=zh-CN&gl=cn&x={x}&y={y}&z={z}",JAPAN_STD:"https://cyberjapandata.gsi.go.jp/xyz/std/{z}/{x}/{y}.png",JAPAN_PALE:"https://cyberjapandata.gsi.go.jp/xyz/pale/{z}/{x}/{y}.png",JAPAN_RELIEF:"https://cyberjapandata.gsi.go.jp/xyz/relief/{z}/{x}/{y}.png",JAPAN_ORT:"https://cyberjapandata.gsi.go.jp/xyz/ort/{z}/{x}/{y}.jpg"}}},{key:"getLayerFeatures",value:function(e,t,r){var n=this,o=this.webMapService.getLayerFeatures(r,e,this.baseProjection);o&&o.then(function(){var r,o=(r=vce().m(function r(o){var i;return vce().w(function(r){for(;;)switch(r.n){case 0:if(!n.mapId||n._taskID===t){r.n=1;break}return r.a(2);case 1:if(!o||!e.projection){r.n=3;break}if(FC(e.projection,n.specifiedProj4)){r.n=3;break}return r.n=2,UC(e.projection.split(":")[1],n.serverUrl);case 2:(i=r.v)&&DC(e.projection,i,n.specifiedProj4);case 3:n._getLayerFeaturesSucceeded(o,e);case 4:return r.a(2)}},r)}),function(){var e=this,t=arguments;return new Promise(function(n,o){var i=r.apply(e,t);function a(e){Ace(i,n,o,a,s,"next",e)}function s(e){Ace(i,n,o,a,s,"throw",e)}a(void 0)})});return function(e){return o.apply(this,arguments)}}(),function(e){throw new Error(e)}).catch(function(t){n._addLayerSucceeded(),n._fire("layercreatefailed",{error:t,layer:e,map:n.map}),console.log(t)})}},{key:"setFeatureInfo",value:function(e){var t,r=e.dv_v5_markerInfo;if(!r||!r.dataViz_title)return r;t=r;var n=e.properties;for(var o in t)n[o]&&(t[o]=n[o],delete n[o]);return t}},{key:"getRankStyleGroup",value:function(e,t,r){var n=[],o=[],i=r.style,a=r.themeSetting,s=a.segmentMethod,u=a.segmentCount,l=a.customSettings,c=r.themeSetting.minRadius,f=r.themeSetting.maxRadius,p=a.colors,h=i.fillColor;t.forEach(function(t){var r=t.properties[e];null==r||""===r||isNaN(+r)||n.push(Number(r))});try{o=Pne.getArraySegments(n,s,u)}catch(e){console.log(e)}for(var y=0;y<u;y++)if(y in l){var d=l[y].segment.start,m=l[y].segment.end;null!=d&&(o[y]=d),null!=m&&(o[y+1]=m)}var g=[];if(o&&o.length){for(var v,b,A=o.length,w=(f-c)/(A-1),S=Number(((f+c)/2).toFixed(2)),C="",E=p?_ne.getGradientColors(p,A,"RANGE"):[],_=0;_<A-1;_++)S=(v=Number(o[_].toFixed(2)))===(b=Number(o[_+1].toFixed(2)))?S:c+Math.round(w*_),b=_===A-2?b+.01:b,S=l[_]&&l[_].radius?l[_].radius:S,i.radius=S,p&&p.length>0&&(C=l[_]&&l[_].color?l[_].color:E[_]||h,i.fillColor=C),g.push({radius:S,color:C,start:v,end:b,style:i});return g}return!1}},{key:"createRankStyleSource",value:function(e,t){var r=e.themeSetting.themeField,n=this.getRankStyleGroup(r,t,e);return!!n&&{parameters:e,styleGroups:n}}},{key:"getRestMapLayerInfo",value:function(e,t){var r=e.bounds,n=e.coordUnit,o=e.visibleScales,i=e.url;return t.layerType="TILE",t.orginEpsgCode=this.baseProjection,t.units=n&&n.toLowerCase(),t.extent=[r.left,r.bottom,r.right,r.top],t.visibleScales=o,t.url=i,t.sourceType="TILE",t}},{key:"handleLayerFeatures",value:function(e,t){var r=t.layerType,n=t.style,o=t.themeSetting,i=t.filterCondition;return(n||o)&&i&&"RANGE"!==r&&"UNIQUE"!==r&&"RANK_SYMBOL"!==r&&(e=this.getFilterFeatures(i,e)),e}},{key:"getFilterFeatures",value:function(e,t){if(!e)return t;for(var r=this.replaceFilterCharacter(e),n=[],o=0;o<t.length;o++){var i=t[o],a=void 0,s=i.properties;try{r=this.parseCondition(r,Object.keys(s));var u=this.parseConditionFeature(s),l="select * from json where ("+r+")";a=window.jsonsql.query(l,{attributes:u})}catch(e){continue}a&&a.length>0&&n.push(i)}return n}},{key:"replaceFilterCharacter",value:function(e){return e=e.replace(/=/g,"==").replace(/AND|and/g,"&&").replace(/or|OR/g,"||").replace(/<==/g,"<=").replace(/>==/g,">=")}},{key:"getParseSpecialCharacter",value:function(){var e={};return["(",")","ï¼","ï¼",",","ï¼"].forEach(function(t,r){e[t]="$".concat(r)}),e}},{key:"parseSpecialCharacter",value:function(e){var t=this.getParseSpecialCharacter();for(var r in t)for(var n=t[r],o=new RegExp("\\".concat(r),"g");o.test(e);)e=e.replace(o,n);return e}},{key:"parseCondition",value:function(e,t){var r=this,n=e;return e.replace(/&|\||>|<|=|!/g," ").split(" ").filter(function(e){return e}).forEach(function(e){var o=t.find(function(t){return t===e});if(r.startsWithNumber(e)&&o&&(n=n.replace(o,"$"+o)),o){var i=r.parseSpecialCharacter(o);n=n.replace(o,i)}}),n}},{key:"parseConditionFeature",value:function(e){var t={};for(var r in e){var n=r;this.startsWithNumber(r)&&(n="$"+r),t[n=this.parseSpecialCharacter(n)]=e[r]}return t}},{key:"startsWithNumber",value:function(e){return/^\d/.test(e)}},{key:"getEchartsLayerOptions",value:function(e,t,r){var n=this.webMapService.getFeatureProperties(t),o=function(e,t){var r=[];if(t&&t.length){var n,o,i=e.from,a=e.to;if("XY_FIELD"===i.type&&i.xField&&i.yField&&a.xField&&a.yField)t.forEach(function(e){var t=e[i.xField],s=e[i.yField],u=e[a.xField],l=e[a.yField];t&&s&&u&&l&&(n=[e[i.xField],e[i.yField]],o=[e[a.xField],e[a.yField]],r.push({coords:[n,o]}))});else if("PLACE_FIELD"===i.type&&i.field&&a.field){var s=yo.concat(ho);t.forEach(function(e){var t=e[i.field],u=e[a.field];n=s.find(function(e){return So(e.name,t)}),o=s.find(function(e){return So(e.name,u)}),n&&o&&r.push({coords:[n.coord,o.coord]})})}}return r}(e,n),i=this._createPointsData(o,e,n);return this._createOptions(e,o,i,r)}},{key:"getEchartsLayerById",value:function(e){return this.echartslayer.find(function(t){return t.id===e})}},{key:"getDashStyle",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"array";if(!e)return"array"===r?[]:"";var n,o=t;switch(e){case"solid":n=[];break;case"dot":n=[1,4*o];break;case"dash":n=[4*o,4*o];break;case"dashrailway":n=[8*o,12*o];break;case"dashdot":n=[4*o,4*o,1*o,4*o];break;case"longdash":n=[8*o,4*o];break;case"longdashdot":n=[8*o,4*o,1,4*o];break;default:n=M.isArray(e)?e:(e=p.trim(e).replace(/\s+/g,",")).replace(/\[|\]/gi,"").split(",")}return n="array"===r?n:n.join(",")}},{key:"getCanvasFromSVG",value:function(e,t,r){var n=this,o=document.createElement("canvas");if(o.id="dataviz-canvas-".concat((new Date).getTime()),o.style.display="none",t.appendChild(o),e){var i=$le,a=o.getContext("2d");i.from(a,e,{ignoreMouse:!0,ignoreAnimation:!0,forceRedraw:function(){return!1}}).then(function(e){e.start(),n.canvgsV.push(e),o.width>300||o.height>300||r(o)})}else r(o)}},{key:"stopCanvg",value:function(){this.canvgsV.forEach(function(e){return e.stop()}),this.canvgsV=[]}},{key:"getRangeStyleGroup",value:function(e,t){var r,n=e.featureType,o=e.style,i=e.themeSetting,a=i.customSettings,s=i.themeField,u=i.segmentCount,l=i.segmentMethod,c=i.colors,f=[];t.forEach(function(e){if(r=e.properties){var t=r[s];(t||0===t)&&!isNaN(+t)&&f.push(parseFloat(t))}},this);var p=f&&f.length&&Pne.getArraySegments(f,l,u);if(p){var h=u;r&&p[0]===p[r.length-1]&&(h=1,p.length=2);for(var y=0;y<p.length;y++){var d=p[y];d=0===y?Math.floor(100*d)/100:Math.ceil(100*d)/100+.1,p[y]=Number(d.toFixed(2))}var m=c;m=_ne.getGradientColors(m,h,"RANGE");for(var g=0;g<h;g++)g in a&&(a[g].segment.start&&(p[g]=a[g].segment.start),a[g].segment.end&&(p[g+1]=a[g].segment.end));for(var v=[],b=0;b<h;b++){var A=m[b];b in a&&a[b].color&&(A=a[b].color),"LINE"===n?o.strokeColor=A:o.fillColor=A;var w=p[b],S=p[b+1],C=JSON.parse(JSON.stringify(o));v.push({style:C,color:A,start:w,end:S})}return v}}},{key:"getCustomSettingColors",value:function(e,t){var r=[];return Object.keys(e).forEach(function(n){"LINE"===t?r.push(e[n].strokeColor):r.push(e[n].fillColor)}),r}},{key:"getUniqueStyleGroup",value:function(e,t){var r=e.featureType,n=e.style,o=e.themeSetting,i=o.colors,a=o.customSettings,s=o.themeField,u=t&&t[0]&&t[0].properties||{};Object.keys(u).forEach(function(e){e.toLocaleUpperCase()===s.toLocaleUpperCase()&&(s=e)});var l=[];for(var c in t){var f=t[c].properties[s],p=!1;for(var h in l)if(l[h]===f){p=!0;break}p||l.push(f)}var y=i;y=_ne.getGradientColors(y,l.length);var d=this.getCustomSettingColors(a,r).map(function(e){return e&&e.toLowerCase()}),m=_ne.getGradientColors(i,l.length+Object.keys(a).length).map(function(e){return e.toLowerCase()}),g=tce()(m,d),v=[];return l.forEach(function(e,t){var o=y[t],i=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?mce(Object(r),!0).forEach(function(t){gce(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mce(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},n),u=a[e];"object"===wce(u)?o=(i=Object.assign(i,u)).fillColor||i.strokeColor:("string"==typeof u&&(o=a[e]),u||(o=g.shift()),"LINE"===r?i.strokeColor=o:i.fillColor=o),v.push({color:o,style:i,value:e,themeField:s})},this),v}},{key:"transformFeatures",value:function(e){var t=this;return e&&e.forEach(function(r,n){var o=r.geometry&&r.geometry.coordinates;o&&0!==o.length&&(_C(r,function(e){var r=t._unproject(e);e[0]=r[0],e[1]=r[1]}),e[n]=r)}),e}},{key:"_drawTextRectAndGetSize",value:function(e){var t,r=e.context,n=e.style,o=e.textArray,i=e.lineHeight,a=e.doublePadding,s=e.canvas,u=n.backgroundFill,l=n.maxWidth-a,c=0,f=0,p=[];o.forEach(function(e){var t="",n=!1;f++;for(var o=0;o<e.length;o++){var i=t+e[o],a=r.measureText(i).width;a>l&&o>0||"\n"===e[o]?(t=e[o],f++,n=!0):(t=i,c=a)}n?p.push(l):p.push(c)},this);for(var h=0;h<p.length;h++){var y=p[h];if(y>=l){c=l;break}y>c&&(c=y)}return c+=a,t=f*i+a-6,s.width=c,s.height=t,r.fillStyle=u,r.fillRect(0,0,c,t),r.lineWidth=n.borderWidth,r.strokeStyle=n.borderColor,r.strokeRect(0,0,c,t),{width:c,height:t}}},{key:"_drawTextWithCanvas",value:function(e){var t=e.context,r=e.canvas,n=e.style,o=Number(n.font.replace(/[^0-9]/gi,""))+3,i=n.text.split("\r\n");t.font=n.font;var a=this._drawTextRectAndGetSize({context:t,style:n,textArray:i,lineHeight:o,doublePadding:16,canvas:r}),s=8;i.forEach(function(e,r){0!==r&&(s+=o),t.font=n.font;var i,u=n.textAlign,l=a.width-16;switch(u){case"center":i=l/2;break;case"right":i=l;break;default:i=8}for(var c=e.split(""),f="",p=n.fillColor,h=n.maxWidth-16,y=0;y<c.length;y++){var d=f+c[y];t.measureText(d).width>h&&y>0||"\n"===c[y]?(t.fillStyle=p,t.textAlign=u,t.textBaseline="top",t.fillText(f,i,s),f=c[y],s+=o):f=d}t.fillStyle=p,t.textAlign=u,t.textBaseline="top",t.fillText(f,i,s)},this)}},{key:"handleSvgColor",value:function(e,t){var r=e.fillColor,n=e.fillOpacity,o=e.strokeColor,i=e.strokeOpacity,a=e.strokeWidth,s=t.getContext("2d");e.text?this._drawTextWithCanvas({context:s,canvas:t,style:e}):(r&&(s.fillStyle=_ne.getColorWithOpacity(r,n),s.fill()),(o||a)&&(s.strokeStyle=_ne.getColorWithOpacity(o,i),s.lineWidth=a,s.stroke()))}},{key:"_createPointsData",value:function(e,t,r){var n=[],o=t.labelSetting;if(!o.show||!e.length)return n;var i=[],a=[];return e.forEach(function(e,t){var n=e.coords,s=n[0],u=n[1],l=r[t][o.from],c=r[t][o.to];!i.find(function(e){return e.value[0]===s[0]&&e.value[1]===s[1]})&&i.push({name:l,value:s}),!a.find(function(e){return e.value[0]===u[0]&&e.value[1]===u[1]})&&a.push({name:c,value:u})}),n=i.concat(a)}},{key:"_createOptions",value:function(e,t,r,n){var o,i=this._createLineSeries(e,t,n);if(r&&r.length){var a=this._createPointSeries(e,r,n);o=i.concat(a)}else o=i.slice();return{series:o,animation:!1}}},{key:"_createPointSeries",value:function(e,t,r){var n=e.lineSetting,o=e.animationSetting,i=e.labelSetting,a=[{name:"point-series",coordinateSystem:r,zlevel:2,label:{normal:{show:i.show,position:"right",formatter:"{b}",color:i.color,fontFamily:i.fontFamily}},itemStyle:{normal:{color:n.color||i.color}},data:t}];return o.show?(a[0].type="effectScatter",a[0].rippleEffect={brushType:"stroke"}):a[0].type="scatter",a}},{key:"_createLineSeries",value:function(e,t,r){var n=e.lineSetting,o=e.animationSetting,i=[{name:"line-series",coordinateSystem:r,type:"lines",zlevel:1,effect:{show:o.show,constantSpeed:o.constantSpeed,trailLength:0,symbol:o.symbol,symbolSize:o.symbolSize},lineStyle:{normal:{color:n.color,type:n.type,width:n.width,opacity:n.opacity,curveness:n.curveness}},data:t}];return t.length>=Oce&&(i[0].large=!0,i[0].largeThreshold=100,i[0].blendMode="lighter"),i}},{key:"_getLayerFeaturesSucceeded",value:function(e,t){switch(e.type){case"feature":this._initOverlayLayer(t,e.features);break;case"restMap":t.layerType="restMap",this._initOverlayLayer(t,e.restMaps);break;case"mvt":t.layerType="mvt",this._initOverlayLayer(t,e);break;case"dataflow":case"noServerId":this._initOverlayLayer(t)}}},{key:"_fire",value:function(e,r){this[t]&&this[t](e,r)}}])&&Sce(o.prototype,i),a&&Sce(o,a),Object.defineProperty(o,"prototype",{writable:!1}),o;var o,i,a}()}function Pce(e){"@babel/helpers - typeof";return(Pce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kce(e){return function(e){if(Array.isArray(e))return Tce(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Tce(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Tce(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tce(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function jce(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Mce(n.key),n)}}function Mce(e){var t=function(e,t){if("object"!=Pce(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Pce(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Pce(t)?t:t+""}var Bce=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dataSource=t.dataSource,this.id=t.id,this.title=t.title,this.renderSource=t.renderSource,this.renderLayers=[],this.type=t.type,this.themeSetting=t.themeSetting,this.visible=t.visible},(t=[{key:"addLayer",value:function(e){var t;if(e.renderSource.sourceLayer)return this.children||(this.children=[],this.type="group",this.renderSource={},this.dataSource={},this.themeSetting={}),e.visible||this.visible?this.visible=!0:this.visible=!1,void this.children.push(e);(t=this.renderLayers).push.apply(t,kce(e.renderLayers)),e.reused&&(this.reused=e.reused),e.layerOrder&&(this.layerOrder=e.layerOrder)}}])&&jce(e.prototype,t),r&&jce(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function Nce(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return Rce(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Rce(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function Rce(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Lce(e){"@babel/helpers - typeof";return(Lce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Fce(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Dce(Object(r),!0).forEach(function(t){Qce(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dce(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Qce(e,t,r){return(t=Uce(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Gce(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Uce(n.key),n)}}function Uce(e){var t=function(e,t){if("object"!=Lce(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Lce(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Lce(t)?t:t+""}function zce(e,t,r){return t=Hce(t),function(e,t){if(t&&("object"==Lce(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],Hce(e).constructor):t.apply(e,r))}function Hce(e){return(Hce=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qce(e,t){return(qce=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Vce=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=zce(this,t)).map=r.map,e.layers=r.layers||[],e.appendLayers=r.appendLayers||!1,e.unexpectedSourceNames=["tdt-search-","tdt-route-","smmeasure","mapbox-gl-draw","maplibre-gl-draw",/tracklayer-\d+-line/,/graticuleLayer_\d+_line/],e.uniqueId=+new Date,e.layersVisibleMap=new Map,e.eventTypes=["layerupdatechanged"],e._styleDataUpdatedHandler=e._styleDataUpdatedHandler.bind(e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qce(e,t)}(t,ja),r=t,(n=[{key:"setLayers",value:function(e){this.layers=e}},{key:"createLayerCatalogs",value:function(){throw new Error("createLayerCatalogs is not implemented")}},{key:"getSelfLayerIds",value:function(){throw new Error("getSelfLayerIds is not implemented")}},{key:"initLayers",value:function(){throw new Error("initLayers is not implemented")}},{key:"createAppreciableLayers",value:function(){var e=this.initLayers();return this._initAppreciableLayers(e)}},{key:"getLayerCatalog",value:function(){var e=this.createLayerCatalogs();return this._updateLayerCatalogsVisible(e),this._updateImmutableOrderLayers(e)}},{key:"getLayers",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.createAppreciableLayers();return e&&this.removeLayerExtralFields(t),this._updateImmutableOrderLayers(t,!0)}},{key:"getSelfLayers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getLayers(),t=this.getSelfLayerIds();return e.filter(function(e){return e.renderLayers.some(function(e){return t.some(function(t){return t===e})})})}},{key:"toggleLayerVisible",value:function(e,t){var r=t?"visible":"none";if("group"===e.type){var n=this._getLayerVisibleId(e);this.layersVisibleMap.set(n,t);var o=Io(e.children);o.length?this.setLayersVisible(o,r):this.map.style.fire("data",{dataType:"style"})}else this.setLayersVisible([e],r)}},{key:"setLayersVisible",value:function(e,t){var r=this;e.forEach(function(e){var n=r._getLayerVisibleId(e);if(r.layersVisibleMap.set(n,"visible"===t),e.CLASS_INSTANCE&&e.CLASS_INSTANCE.show&&e.CLASS_INSTANCE.hide)return"visible"===t?e.CLASS_INSTANCE.show():e.CLASS_INSTANCE.hide(),void r.map.style.fire("data",{dataType:"style"});e.renderLayers.forEach(function(n){("L7Layer"!==e.CLASS_NAME||r.map.getLayer(n))&&r.map.setLayoutProperty(n,"visibility",t)})})}},{key:"concatExpectLayers",value:function(e,t,r){var n=r.filter(function(e){return!t.some(function(t){return t===e.id})});return this._filterExpectedLayers(e.concat(n))}},{key:"destroy",value:function(){this.map.off("styledata",this._styleDataUpdatedHandler)}},{key:"initDatas",value:function(){this.map&&(this._styleDataUpdatedHandler(),this._registerMapEvent())}},{key:"removeLayerExtralFields",value:function(e){e.forEach(function(e){delete e.metadata})}},{key:"_initAppreciableLayers",value:function(e){var t=this;return e.reduce(function(e,r){var n=xo(r),o=e.find(function(e){return e.id===n});o||(o=t._createCommonFields(r,n),e.push(o));var i=o.renderLayers.concat(r.layerInfo?r.layerInfo.renderLayers:r.id);return o.renderLayers=Array.from(new Set(i)),e},[])}},{key:"_initSourceList",value:function(e){var t=this;return e.slice().reverse().reduce(function(e,r){var n=r.renderSource.sourceLayer?"".concat(r.renderSource.id,"_").concat(t.uniqueId):r.id,o=r.metadata.SM_Layer_Title||(r.renderSource.sourceLayer?r.renderSource.id:r.title),i=e.find(function(e){return e.id===n});if(!i){var a=new Bce(Fce(Fce({},r),{},{id:n,title:o}));e.push(a),i=a}return i.addLayer(r),e},[])}},{key:"_filterExpectedLayers",value:function(e){var t=this;return e.filter(function(e){return t._excludeLayer(e)})}},{key:"_excludeSource",value:function(e){for(var t=0;t<this.unexpectedSourceNames.length;t++)if(e&&e.match(this.unexpectedSourceNames[t]))return!1;return!0}},{key:"_excludeLayer",value:function(e){return!e.id.includes("-SM-")&&this._excludeSource(e.source)}},{key:"_pickLayerFields",value:function(e){var t=e.visibility,r=e.sourceLayer;return!t&&e.layout&&"visibility"in e.layout&&(t=e.layout.visibility),!r&&e["source-layer"]&&(r=e["source-layer"]),{id:e.id,type:e.type,visibility:t,source:e.source,sourceLayer:r,metadata:e.metadata,layerInfo:e.layerInfo}}},{key:"_getAllLayersOnMap",value:function(){var e=this,t=this.map.getStyle().layers.map(function(t){var r=e.map.getLayer(t.id);return e._pickLayerFields(r)}),r=function(){var r=e.map.overlayLayersManager[n];if(r.id&&!t.some(function(e){return e.id===r.id})){var o="visible"!==r.visibility&&!r.visibility&&!r.visible&&("visible"in r||"visibility"in r)?"none":"visible",i=r.source||r.sourceId;"object"===Lce(i)&&(i=r.id),t.push(e._pickLayerFields({id:r.id,type:r.type,visibility:o,source:i,metadata:r.metadata}))}};for(var n in this.map.overlayLayersManager)r();return t}},{key:"_createCommonFields",value:function(e,t){var r=e.layerInfo||{},n=r.dataSource,o=void 0===n?{}:n,i=r.themeSetting,a=void 0===i?{}:i,s=r.name,u=void 0===s?t:s,l=r.title,c=void 0===l?u:l,f=r.visible,p=void 0===f?!e.visibility||"visible"===e.visibility:f,h=r.CLASS_NAME,y=r.CLASS_INSTANCE,d=r.reused,m=r.metadata,g=void 0===m?e.metadata||{}:m,v=this.map.getSource(e.source),b={id:t,title:c,type:e.type,visible:this._getLayerVisible({id:t,type:e.type,visible:p}),renderSource:v?{id:e.source,type:v.type}:{},renderLayers:[],dataSource:o,themeSetting:a,metadata:g,layerOrder:g.SM_Layer_Order||"auto"};return e.sourceLayer&&(b.renderSource.sourceLayer=e.sourceLayer),h&&(b.CLASS_NAME=h),y&&(b.CLASS_INSTANCE=y),d&&(b.reused=d),b}},{key:"_findLayerCatalog",value:function(e,t){var r,n=Nce(e);try{for(n.s();!(r=n.n()).done;){var o=r.value;if(o.id===t)return o;if(o.children&&o.children.length>0){var i=this._findLayerCatalog(o.children,t);if(i)return i}}}catch(e){n.e(e)}finally{n.f()}return null}},{key:"_getLayerVisibleId",value:function(e){return"".concat(e.type,"-").concat(e.id)}},{key:"_getLayerVisible",value:function(e){var t=this._getLayerVisibleId(e);return this.layersVisibleMap.has(t)?this.layersVisibleMap.get(t):e.visible}},{key:"_updateLayerCatalogsVisible",value:function(e){var t,r=Nce(e);try{for(r.s();!(t=r.n()).done;){var n=t.value;n.visible=this._getLayerVisible(n),"group"===n.type&&this._updateLayerCatalogsVisible(n.children)}}catch(e){r.e(e)}finally{r.f()}}},{key:"_registerMapEvent",value:function(){this.map.on("styledata",this._styleDataUpdatedHandler)}},{key:"_styleDataUpdatedHandler",value:function(){var e=this.getLayers();this.triggerEvent("layerupdatechanged",{layers:e,relevantLayers:this.getSelfLayers(e),layerCatalog:this.getLayerCatalog()})}},{key:"_updateImmutableOrderLayers",value:function(e,t){var r=e.filter(function(e){return e.layerOrder&&"top"===e.layerOrder.toLowerCase()}),n=r.filter(function(e){return"MIGRATION"===e.type}),o=r.filter(function(e){return"MIGRATION"!==e.type});r=n.concat(o);var i=e.filter(function(e){return e.layerOrder&&"bottom"===e.layerOrder.toLowerCase()}),a=e.filter(function(e){return!e.layerOrder||"auto"===e.layerOrder.toLowerCase()});return t?i.concat(a,r):r.concat(a,i)}}])&&Gce(r.prototype,n),o&&Gce(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Kce(e){"@babel/helpers - typeof";return(Kce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yce(e){return function(e){if(Array.isArray(e))return Jce(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Jce(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Jce(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jce(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Wce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Xce(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Wce(Object(r),!0).forEach(function(t){Zce(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wce(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Zce(e,t,r){return(t=efe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $ce(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,efe(n.key),n)}}function efe(e){var t=function(e,t){if("object"!=Kce(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Kce(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Kce(t)?t:t+""}function tfe(e,t,r){return t=rfe(t),function(e,t){if(t&&("object"==Kce(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],rfe(e).constructor):t.apply(e,r))}function rfe(e){return(rfe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nfe(e,t){return(nfe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var ofe=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=tfe(this,t,[r])).initDatas(),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nfe(e,t)}(t,Vce),r=t,(n=[{key:"createLayerCatalogs",value:function(){var e=this.getLayers(!1);return this._initSourceList(e)}},{key:"getSelfLayerIds",value:function(){return this.layers.reduce(function(e,t){return e.concat(t.renderLayers)},[])}},{key:"initLayers",value:function(){var e=this,t=this._getAllLayersOnMap(),r=t;this.appendLayers&&(r=t.filter(function(t){return e.layers.some(function(r){return e._isBelongToMapJSON(r,t)})}));var n=[],o=[];return this.layers.forEach(function(t){var i=r.filter(function(r){return e._isBelongToMapJSON(t,r)}),a=i.find(function(e){return e.id===t.id});if(i.length>0){if(a)n.push(Xce(Xce({},a),{},{layerInfo:Xce(Xce({},t),{},{dataSource:t.dataSource||t.serverId&&{serverId:t.serverId}})}));else{var s=i.map(function(e){var r=Object.assign({},e);return r.metadata=Object.assign({},r.metadata,{SM_Layer_Title:t.name}),r});n.push.apply(n,Yce(s))}o.push.apply(o,Yce(t.renderLayers))}}),this.concatExpectLayers(n,o,r)}},{key:"_isBelongToMapJSON",value:function(e,t){return e.renderLayers&&e.renderLayers.some(function(e){return e===t.id})}}])&&$ce(r.prototype,n),o&&$ce(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function ife(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function afe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ife(Object(r),!0).forEach(function(t){sfe(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ife(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function sfe(e,t,r){return(t=cfe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ufe(e){"@babel/helpers - typeof";return(ufe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lfe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,cfe(n.key),n)}}function cfe(e){var t=function(e,t){if("object"!=ufe(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ufe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ufe(t)?t:t+""}function ffe(e,t,r){return t=pfe(t),function(e,t){if(t&&("object"==ufe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],pfe(e).constructor):t.apply(e,r))}function pfe(e){return(pfe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hfe(e,t){return(hfe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var yfe=360;function dfe(e,t){var r=t.mapRepo;return function(t){function n(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{layerFilter:function(){return!0}},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{style:{version:8,sources:{},layers:[]}};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t=ffe(this,n),"string"==typeof e||"number"==typeof e?t.mapId=e:null!==e&&"object"===ufe(e)&&(t.webMapInfo=e),t.mapId||o.center||o.zoom||(o.center=[0,0],o.zoom=0),r.map&&(t.map=r.map),t.options=Object.assign({},r),delete t.options.map,t._setServer(r.server||"https://www.supermapol.com"),t.options.target=r.target||"map",t.options.withCredentials=r.withCredentials||!1,t.mapOptions=o,t.webMapService=new dce(e,t.options),t.eventTypes=["mapinitialized","mapcreatesucceeded","addlayerssucceeded","mapcreatefailed","getmapfailed","layercreatefailed","getlayersfailed","baidumapnotsupport","layerorsourcenameduplicated","dataflowfeatureupdated","projectionnotmatch","xyztilelayernotsupport","layeraddchanged","layerupdatechanged","mapbeforeremove"],t._cacheCleanLayers=[],t._mapInitializedHandler=t._mapInitializedHandler.bind(t),t._mapCreateSucceededHandler=t._mapCreateSucceededHandler.bind(t),t._addLayerChangedHandler=t._addLayerChangedHandler.bind(t),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hfe(e,t)}(n,e),o=n,(i=[{key:"resize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.map&&this.map.resize(),this._handler&&this._handler.echartsLayerResize();var t=window.getComputedStyle(document.getElementById(this.options.target)),r=this.mapOptions.bounds;if(e&&this.map&&r&&t){var n=this._getResizedZoom(r,t);n!==this.map.getZoom()&&this.map&&this.map.setZoom(n)}}},{key:"setCenter",value:function(e){if(this.map&&this._centerValid(e)){this.mapOptions.center=e;var t=this.map.getCenter(),r=t.lng,n=t.lat;e[0]===+r.toFixed(4)&&e[1]===+n.toFixed(4)||this.map.setCenter(e,{from:"setCenter"})}}},{key:"setRenderWorldCopies",value:function(e){this.map&&(this.mapOptions.renderWorldCopies=e,this.map.setRenderWorldCopies(e))}},{key:"setBearing",value:function(e){this.map&&(this.mapOptions.bearing=e,e!==+this.map.getBearing().toFixed(2)&&(e||0===e)&&this.map.setBearing(e))}},{key:"setPitch",value:function(e){this.map&&(this.mapOptions.pitch=e,e!==+this.map.getPitch().toFixed(2)&&(e||0===e)&&this.map.setPitch(e))}},{key:"setStyle",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.map){if(this.mapOptions.style=e,t&&this.cleanLayers(),this._isWebMapV3(e))return void this.setMapId(e,t);this._initWebMap(!t)}}},{key:"setRasterTileSize",value:function(e){var t=this;if(this.map&&!(e<=0)){var r=this.map.getStyle().sources;Object.keys(r).forEach(function(n){"raster"===r[n].type&&"iserver"===r[n].rasterSource&&t._updateRasterSource(n,{tileSize:e})})}}},{key:"setMaxBounds",value:function(e){this.map&&(this.mapOptions.maxBounds=e,e&&this.map.setMaxBounds(e))}},{key:"setMinZoom",value:function(e){this.map&&(this.mapOptions.minZoom=e,(e||0===e)&&this.map.setMinZoom(e))}},{key:"setMaxZoom",value:function(e){this.map&&(this.mapOptions.maxZoom=e,(e||0===e)&&this.map.setMaxZoom(e))}},{key:"setWebMapOptions",value:function(e){this.setServerUrl(e.server),this._initWebMap()}},{key:"setMapOptions",value:function(e){var t=e.center,r=e.zoom,n=e.maxBounds,o=e.minZoom,i=e.maxZoom,a=e.isWorldCopy,s=e.bearing,u=e.pitch;t&&t.length&&this.setCenter(t),r&&this.setZoom(r),n&&this.setMaxBounds(n),o&&this.setMinZoom(o),i&&this.setMaxZoom(i),a&&this.setRenderWorldCopies(a),s&&this.setBearing(s),u&&this.setPitch(u)}},{key:"getLayers",value:function(){return this._handler&&this._handler.getLayers()||[]}},{key:"getLegends",value:function(){return this._handler&&this._handler.getLegends()||[]}},{key:"getLayerCatalog",value:function(){return this._handler&&this._handler.getLayerCatalog()||[]}},{key:"setLayersVisible",value:function(){var e;this._handler&&(e=this._handler).setLayersVisible.apply(e,arguments)}},{key:"toggleLayerVisible",value:function(){var e;this._handler&&(e=this._handler).toggleLayerVisible.apply(e,arguments)}},{key:"getWebMapType",value:function(){return this.type}},{key:"rectifyLayersOrder",value:function(){var e;this._handler&&(e=this._handler).rectifyLayersOrder.apply(e,arguments)}},{key:"updateOverlayLayer",value:function(){var e;this._handler&&(e=this._handler).updateOverlayLayer.apply(e,arguments)}},{key:"copyLayer",value:function(){var e;return this._handler&&(e=this._handler).copyLayer.apply(e,arguments)}},{key:"clean",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.map&&(e&&this._fire("mapbeforeremove",{map:this.map}),this._handler&&(this._handler.clean(e),this._handler=null),e&&(this.map=null),this.mapOptions&&(this.mapId||this.webMapInfo)&&(this.mapOptions.center=null,this.mapOptions.zoom=null))}},{key:"cleanLayers",value:function(){if(this.map){var e=this._cacheCleanLayers.filter(function(e){return!e.reused});this._handler&&this._handler.cleanLayers(e),this._cacheCleanLayers=[],this.clean(!1)}}},{key:"_readyForInitializingWebMap",value:function(){this._initWebMap(!this.map)}},{key:"_initWebMap",value:function(){var e=this;if((!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&this.clean(),this.webMapInfo){var t=this.webMapInfo;return t.mapParams={title:this.webMapInfo.title,description:this.webMapInfo.description},this.mapParams=t.mapParams,void Promise.resolve().then(function(){e._getMapInfo(t)}).catch(function(t){e._fire("mapcreatefailed",{error:t})})}this.mapId&&this.options.serverUrl?(this._taskID=new Date,this.getMapInfo(this._taskID)):Promise.resolve().then(function(){e._createMap("MapStyle")}).catch(function(t){e._fire("mapcreatefailed",{error:t})})}},{key:"setZoom",value:function(e){this.map&&(this.mapOptions.zoom=e,e!==+this.map.getZoom().toFixed(2)&&(e||0===e)&&this.map.setZoom(e,{from:"setZoom"}))}},{key:"setServerUrl",value:function(e){this._setServer(e),this.webMapService.setServerUrl(this.options.serverUrl)}},{key:"setWithCredentials",value:function(e){this.options.withCredentials=e,this.webMapService.setWithCredentials(e)}},{key:"setProxy",value:function(e){this.options.proxy=e,this.webMapService.setProxy(e)}},{key:"setMapId",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];"string"==typeof e||"number"==typeof e?(this.mapId=e,this.webMapInfo=null):null!==e&&"object"===ufe(e)&&(this.webMapInfo=e,this.mapId=""),this.webMapService.setMapId(e),e&&setTimeout(function(){t._initWebMap(!r)},0)}},{key:"getMapInfo",value:function(e){var t=this;this.webMapService.getMapInfo().then(function(r){t._taskID===e&&(t.mapParams=r.mapParams,t._getMapInfo(r))},function(e){throw e}).catch(function(e){t._fire("mapcreatefailed",{error:e}),console.log(e)})}},{key:"_createWebMapFactory",value:function(){throw new Error("_createWebMapFactory is not implemented")}},{key:"_mapInitializedHandler",value:function(e){var t=e.map;this.map=t,this._fire("mapinitialized",{map:this.map})}},{key:"_mapCreateSucceededHandler",value:function(e){this.mapParams=e.mapparams,this._cacheCleanLayers=e.layers,this._fire("mapcreatesucceeded",e)}},{key:"_addLayerChangedHandler",value:function(e){this._cacheCleanLayers=e.layers,this.fire("layeraddchanged",e)}},{key:"_isWebMapV3",value:function(e){if(!e.version)return!1;var t="".concat(e.version).split(".");return!(t.length<=1)&&+t[0]>=3}},{key:"_getMapInfo",value:function(e){var t=this._isWebMapV3(e)?"WebMap3":"WebMap2";this._createMap(t,e)}},{key:"_createMap",value:function(e,t){var r=this,n=afe(afe({},this.options),{},{iportalServiceProxyUrlPrefix:this.webMapService.iportalServiceProxyUrl}),o=afe(afe({},this.eventTypes.reduce(function(e,t){return e[t]=function(e){r._fire(t,e)},e},{})),{},{mapinitialized:this._mapInitializedHandler,mapcreatesucceeded:this._mapCreateSucceededHandler,layeraddchanged:this._addLayerChangedHandler}),i=YS()(this.mapOptions),a=this._createWebMapFactory(e),s=this.mapId||this.webMapInfo;for(var u in this._handler=new a(s,n,i),o)this._handler.on(u,o[u]);var l={},c=this.options.layerFilter;t&&(l=afe(afe({},t),{},{layers:"function"==typeof c?t.layers.filter(c):t.layers})),this.type=e,this._handler.initializeMap(l,this.map)}},{key:"_updateRasterSource",value:function(e,t){if(e){var r=this.map.getSource(e);Object.assign(r,t),this.map.style.sourceCaches[e].clearTiles(),this.map.style.sourceCaches[e].update(this.map.transform),this.map.triggerRepaint()}}},{key:"_getResizedZoom",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:512,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:yfe,o=t.width,i=t.height,a=Math.abs(e.getEast()-e.getWest()),s=Math.abs(this._getBoundsRadian(e.getSouth())-this._getBoundsRadian(e.getNorth())),u=+Math.log2(n/(a/parseInt(o)*r)).toFixed(2),l=+Math.log2(n/(s/parseInt(i)*r)).toFixed(2);return u<=l?u:l}},{key:"_getBoundsRadian",value:function(e){return 180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360))}},{key:"_centerValid",value:function(e){return!(!e||!(e.length>0||ufe(e)===r.LngLat||e.lng))}},{key:"_getWebMapInstance",value:function(){return this._handler}},{key:"_setServer",value:function(e){this.options.server=Co(e),this.options.serverUrl=this.options.server}},{key:"_fire",value:function(e,t){var r=this;([["mapcreatesucceeded","addlayerssucceeded"],["mapcreatefailed","getmapfailed"],["layercreatefailed","getlayersfailed"]].find(function(t){return t.includes(e)})||[e]).forEach(function(e){r.fire(e,t)})}}])&&lfe(o.prototype,i),a&&lfe(o,a),Object.defineProperty(o,"prototype",{writable:!1}),o;var o,i,a}()}function mfe(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}}function gfe(e){"@babel/helpers - typeof";return(gfe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vfe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],u=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||Afe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bfe(e){return function(e){if(Array.isArray(e))return wfe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Afe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Afe(e,t){if(e){if("string"==typeof e)return wfe(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?wfe(e,t):void 0}}function wfe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Sfe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Cfe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Sfe(Object(r),!0).forEach(function(t){Efe(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sfe(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Efe(e,t,r){return(t=kfe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _fe(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof s?n:s,l=Object.create(u.prototype);return Ife(l,"_invoke",function(r,n,o){var i,s,u,l=0,c=o||[],f=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,r){return i=t,s=0,u=e,p.n=r,a}};function h(r,n){for(s=r,u=n,t=0;!f&&l&&!o&&t<c.length;t++){var o,i=c[t],h=p.p,y=i[2];r>3?(o=y===n)&&(u=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=r<2&&h<i[1])?(s=0,p.v=n,p.n=i[1]):h<y&&(o=r<3||i[0]>n||n>y)&&(i[4]=r,i[5]=n,p.n=y,s=0))}if(o||r>1)return a;throw f=!0,n}return function(o,c,y){if(l>1)throw TypeError("Generator is already running");for(f&&1===c&&h(c,y),s=c,u=y;(t=s<2?e:u)||!f;){i||(s?s<3?(s>1&&(p.n=-1),h(s,u)):p.n=u:p.v=u);try{if(l=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(f=p.n<0)?u:r.call(n,p))!==a)break}catch(t){i=e,s=1,u=t}finally{l=1}}return{value:t,done:f}}}(r,o,i),!0),l}var a={};function s(){}function u(){}function l(){}t=Object.getPrototypeOf;var c=[][n]?t(t([][n]())):(Ife(t={},n,function(){return this}),t),f=l.prototype=s.prototype=Object.create(c);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,Ife(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=l,Ife(f,"constructor",l),Ife(l,"constructor",u),u.displayName="GeneratorFunction",Ife(l,o,"GeneratorFunction"),Ife(f),Ife(f,o,"Generator"),Ife(f,n,function(){return this}),Ife(f,"toString",function(){return"[object Generator]"}),(_fe=function(){return{w:i,m:p}})()}function Ife(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}(Ife=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){Ife(e,t,function(e){return this._invoke(t,r,e)})};i("next",0),i("throw",1),i("return",2)}})(e,t,r,n)}function Ofe(e,t,r,n,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function xfe(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){Ofe(i,n,o,a,s,"next",e)}function s(e){Ofe(i,n,o,a,s,"throw",e)}a(void 0)})}}function Pfe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,kfe(n.key),n)}}function kfe(e){var t=function(e,t){if("object"!=gfe(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=gfe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==gfe(t)?t:t+""}function Tfe(e,t,r){return t=Bfe(t),function(e,t){if(t&&("object"==gfe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],Bfe(e).constructor):t.apply(e,r))}function jfe(e,t,r,n){var o=Mfe(Bfe(1&n?e.prototype:e),t,r);return 2&n&&"function"==typeof o?function(e){return o.apply(r,e)}:o}function Mfe(){return(Mfe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=Bfe(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function Bfe(e){return(Bfe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Nfe(e,t){return(Nfe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Rfe={TIANDITU:[-180,-90,180,90],OSM:[-180,-90,180,90],GOOGLE_CN:[-180,-90,180,90],BING:[-180,-90,180,90]};function Lfe(e,t){var r=t.MapManager,n=t.mapRepo,o=t.crsManager,i=t.DataFlowService,a=t.GraticuleLayer;return function(t){function s(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{layerFilter:function(){return!0}},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{style:{version:8,sources:{},layers:[]}};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),t=Tfe(this,s,[e,r,n]),"string"!=typeof e&&"number"!=typeof e||(t.mapId=e),t._centerValid(n.center)&&(t.center=n.center),t.zoom=n.zoom,t.renderWorldCopies=n.renderWorldCopies,t.bounds=n.bounds,t.bearing=n.bearing,t.pitch=n.pitch,t.rasterTileSize=n.rasterTileSize||256,t.layerFilter=r.layerFilter,t.checkSameLayer=r.checkSameLayer,t._taskID=new Date,t._cacheLayerId=new Map,t._layerTimerList=[],t._appendLayers=!1,t._tileTransformRequest=r.tileTransformRequest,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Nfe(e,t)}(s,e),u=s,(l=[{key:"initializeMap",value:function(){var e=xfe(_fe().m(function e(t,r){var n;return _fe().w(function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,this._registerMapCRS(t);case 1:if(this.baseProjection=e.v,!r){e.n=3;break}if(o.isSameProjection(r,this.baseProjection)||this.ignoreBaseProjection){e.n=2;break}return this.fire("projectionnotmatch"),e.a(2);case 2:this._appendLayers=!0,this.map=r;case 3:this._mapInfo=t,this._loadLayers(t,this._taskID),e.n=5;break;case 4:e.p=4,n=e.v,console.error(n),this.fire("mapcreatefailed",{error:n});case 5:return e.a(2)}},e,this,[[0,4]])}));return function(t,r){return e.apply(this,arguments)}}()},{key:"cleanLayers",value:function(e){jfe(s,"cleanLayers",this,3)([e]),this.echartslayer.forEach(function(e){e.remove(),e.features=null,e.id=""})}},{key:"clean",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.map&&(this._sourceListModel&&(this._sourceListModel.destroy(),this._sourceListModel=null),this.stopCanvg(),e&&this.map.remove(),this.map=null,this._legendList=[],this.center=null,this.zoom=null,this._dataflowService&&(this._dataflowService.off("messageSucceeded",this._handleDataflowFeaturesCallback),this._dataflowService.off("subscribesucceeded",this._initDataflowLayerCallback)),this._unprojectProjection=null,this._cacheLayerId=new Map),this._layerTimerList.length&&(this._layerTimerList.forEach(function(e){clearInterval(e)}),this._layerTimerList=[])}},{key:"_initWebMap",value:function(){}},{key:"_getMapInfo",value:function(){}},{key:"_loadLayers",value:function(e,t){var r=this;this.map?this._handleLayerInfo(e,t):setTimeout(function(){r._createMap(e),r.map.on("load",function(){r._handleLayerInfo(e,t)})},0)}},{key:"_registerMapCRS",value:function(){var e=xfe(_fe().m(function e(t){var r,n,i,a,s,u,l,c,f,p,h;return _fe().w(function(e){for(;;)switch(e.n){case 0:if(r=t.projection,n=t.extent,i=t.baseLayer,a=void 0===i?{}:i,s=QC(r),u={name:s,extent:[n.leftBottom.x,n.leftBottom.y,n.rightTop.x,n.rightTop.y],wkt:this._getProjectionWKT(r)},o.getCRS(s)){e.n=9;break}h=a.layerType,e.n="MAPBOXSTYLE"===h?1:"TILE"===h?3:"ZXY_TILE"===h?7:8;break;case 1:return(l=a.dataSource.url).indexOf("/restjsr/")>-1&&!/\/style\.json$/.test(l)&&(l+="/style.json"),e.n=2,this.webMapService.getMapBoxStyle(l);case 2:return(c=e.v)&&c.metadata&&c.metadata.indexbounds&&(u.extent=c.metadata.indexbounds),e.a(3,9);case 3:if(u.wkt){e.n=5;break}return e.n=4,this.getEpsgCodeWKT("".concat(a.url,"/prjCoordSys.wkt"),{withoutFormatSuffix:!0,withCredentials:this.webMapService.handleWithCredentials("",a.url,!1)});case 4:u.wkt=e.v;case 5:return e.n=6,this.getBounds("".concat(a.url,".json"),{withoutFormatSuffix:!0,withCredentials:this.webMapService.handleWithCredentials("",a.url,!1)});case 6:return(f=e.v)&&f.bounds&&(u.extent=[f.bounds.leftBottom.x,f.bounds.leftBottom.y,f.bounds.rightTop.x,f.bounds.rightTop.y]),e.a(3,9);case 7:return p=this._getZXYTileCrsExtent(a),u.extent=p,e.a(3,9);case 8:return u=null,e.a(3,9);case 9:if(u){e.n=10;break}throw new Error("Unsupported coordinate system!");case 10:return o.registerCRS(u),e.a(2,s)}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_handleLayerInfo",value:function(e,t){var r=this;e=this._setLayerID(e),this._mapInfo=e,this.layerAdded=0,this.expectLayerLen=0;var n=e,o=n.layers,i=n.grid;if(this._setExpectLayerLen(e),0===this.expectLayerLen&&this._sendMapToUser(0,0),this._shouldLoadBaseLayer(e,this.layerFilter)&&this._initBaseLayer(e,function(){r._addLayerSucceeded()}),o&&0!==o.length){var a=o;"function"==typeof this.layerFilter&&(a=o.filter(this.layerFilter)),this._initOverlayLayers(a,t)}i&&i.graticule&&this._initGraticuleLayer(i.graticule)}},{key:"_setExpectLayerLen",value:function(e){this._shouldLoadBaseLayer(e,this.layerFilter)&&this.expectLayerLen++;var t=e.layers;t&&t.length>0&&("function"==typeof this.layerFilter&&(t=t.filter(this.layerFilter)),this.expectLayerLen+=t.length),e.grid&&e.grid.graticule&&this.expectLayerLen++}},{key:"_shouldLoadBaseLayer",value:function(e,t){var r=e.baseLayer;return!!r&&("function"!=typeof t||t(r))}},{key:"_createMap",value:function(e){var t=this,o=this._getLabelFontFamily(e),i=this._getMapCenter(e),a=e.level||0,s=this.mapOptions,u=s.bounds,l=s.minZoom,c=s.maxZoom,f=this.mapOptions.interactive,p=e.baseLayer.tileSize;if("ZXY_TILE"===e.baseLayer.layerType){var h=e.extent,y=h.leftBottom,d=h.rightTop;e.visibleExtent=[y.x,y.y,d.x,d.y]}if(isNaN(l)&&(l=e.minScale?this._transformScaleToZoom(e.minScale,n.CRS.get(this.baseProjection),p):0),isNaN(c)&&(c=e.maxScale?this._transformScaleToZoom(e.maxScale,n.CRS.get(this.baseProjection),p):22),e.visibleExtent&&4===e.visibleExtent.length&&!u&&(u=[this._unproject([e.visibleExtent[0],e.visibleExtent[1]]),this._unproject([e.visibleExtent[2],e.visibleExtent[3]])]),l>c){var m=[c,l];l=m[0],c=m[1]}u||(a+=e.minScale&&e.maxScale?Math.min(this._transformScaleToZoom(e.minScale,n.CRS.get(this.baseProjection),p),this._transformScaleToZoom(e.maxScale,n.CRS.get(this.baseProjection),p)):+Math.log2(this._getResolution(n.CRS.get(this.baseProjection).getExtent())/this._getResolution(e.extent)).toFixed(2)),this.map=new r(Cfe(Cfe({},this.mapOptions),{},{container:this.target,center:this.center||i,zoom:this.zoom||a,minZoom:l,maxZoom:c,bearing:this.bearing||0,pitch:this.pitch||0,bounds:u,interactive:void 0===f||f,style:{version:8,sources:{},layers:[]},crs:this.baseProjection,localIdeographFontFamily:o||"",renderWorldCopies:this.renderWorldCopies||!1,transformRequest:function(e,r){if("Tile"===r){t.isSuperMapOnline&&0===e.indexOf("http://")&&(e="https://www.supermapol.com/apps/viewer/getUrlResource.png?url=".concat(encodeURIComponent(e))),t.webMapService.isIportalResourceUrl(e)&&(e=t.webMapService.handleParentRes(e));var n=t.webMapService.handleProxy("image");return Cfe({url:e,credentials:t.webMapService.handleWithCredentials(n,e,!1)?"include":void 0},t._tileTransformRequest&&t._tileTransformRequest(e))}return{url:e}},fadeDuration:0})),this.fire("mapinitialized",{map:this.map})}},{key:"_createMVTBaseLayer",value:function(e,t){var r=this,n=e.dataSource.url;n.indexOf("/restjsr/")>-1&&!/\/style\.json$/.test(n)&&(n+="/style.json");var o=-1===n.indexOf("/restjsr/");this.webMapService.getMapBoxStyle(n,o).then(function(o){if(Object.keys(o.sources).some(function(e){return r.map.getSource(e)}))return r.fire("layerorsourcenameduplicated",{}),void(t&&t());if(o.layers.forEach(function(t){t.layout&&(t.layout.visibility=r._getVisibility(e.visible))}),"ARCGIS_VECTORTILE"===e.dataSource.type){var i=n.split("?")[1];Object.keys(o.sources).forEach(function(e){Object.keys(o.sources[e]).forEach(function(t){"url"===t&&("string"!=typeof o.sources[e][t]||r.isAbsoluteURL(o.sources[e][t])||(o.sources[e][t]=r.relative2absolute(o.sources[e][t],n)),o.sources[e][t]=o.sources[e][t]+(i?"?"+i+"&f=json":"?f=json"))})})}r.map.addStyle(o,void 0,void 0,void 0,n);var a=[];o.layers.forEach(function(e){"background"!==e.type&&a.push(e.id)}),r._setCacheLayer({parentLayerId:e.layerID||e.name,subRenderLayers:a.map(function(e){return{layerId:e}})}),t&&t()},function(e){throw t&&t(),new Error(e)}).catch(function(t){r.fire("layercreatefailed",{error:t,layer:e,map:r.map})})}},{key:"_initBaseLayer",value:function(e,t){var r,n=e.baseLayer||e,o=this.getBaseLayerType(n),i=this.getMapurls();switch(this.baseLayerProxy=this.webMapService.handleProxy("image"),o){case"TIANDITU":this.baseLayerProxy=null,this._createTiandituLayer(e,t);break;case"BING":this.baseLayerProxy=null,this._createBingLayer(n.layerID||n.name,n,t);break;case"WMS":this._createWMSLayer(n,t);break;case"WMTS":this._createWMTSLayer(n,t);break;case"TILE":this._createDynamicTiledLayer(n,t);break;case"ZXY_TILE":this._createZXYLayer(n,t);break;case"CLOUD":case"XYZ":r=i[n.layerType].replace("{googleMapsLanguage}",this.googleMapsLanguage).replace("{googleMapsAPIKey}",this.googleMapsAPIKey),this._createXYZLayer(n,r,t);break;case"BAIDU":this.fire("baidumapnotsupport",{}),t&&t();break;case"MAPBOXSTYLE":this._createMVTBaseLayer(n,t)}}},{key:"_initOverlayLayers",value:function(e,t){var r=this;this.expectLayerLen>0&&e.forEach(function(e){var n=r.webMapService.getDatasourceType(e);if("SAMPLE_DATA"===n)return r._addLayerSucceeded(),void r.fire("layercreatefailed",{error:"SAMPLE DATA is not supported",layer:e,map:r.map});if(e.visibleScale){var o=e.visibleScale,i=o.minScale,a=o.maxScale,s=r.map.getCRS();e.minzoom=Math.max(r._transformScaleToZoom(i,s,e.tileSize),0),e.maxzoom=Math.min(24,r._transformScaleToZoom(a,s,e.tileSize)+1e-7)}"tile"===n?(e.autoUpdateTime&&r._layerTimerList.push(setInterval(function(){r._initBaseLayer(e)},e.autoUpdateTime)),r._initBaseLayer(e,function(){r._addLayerSucceeded()})):(r.getLayerFeatures(e,t,n),e.autoUpdateTime&&r._layerTimerList.push(setInterval(function(){r.getLayerFeatures(e,t,n)},e.autoUpdateTime)))},this)}},{key:"_initOverlayLayer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,o=e.layerID,i=e.layerType,a=e.visible,s=e.style,u=e.featureType,l=e.projection;if(e.visible=a?"visible":"none",t=_o({sourceId:o,features:t,mergeByField:r,map:this.map}),"restMap"!==i)if("mvt"!==i){t&&t[0]&&t[0].geometry&&"Polygon"===t[0].geometry.type&&(t=this._handleMultyPolygon(t));var c=n||l;t&&c&&"EPSG:4326"!==c&&e.dataSource&&"REST_DATA"!==e.dataSource.type&&(this._unprojectProjection=QC(l),t=this.transformFeatures(t)),t=this.handleLayerFeatures(t,e),"VECTOR"===i?"POINT"===u?"SYMBOL_POINT"===s.type?this._createSymbolLayer(e,t):this._createGraphicLayer(e,t):(this._createVectorLayer(e,t),this._addLayerSucceeded({layerInfo:e,features:t})):"UNIQUE"===i?this._createUniqueLayer(e,t):"RANGE"===i?this._createRangeLayer(e,t):"HEAT"===i?this._createHeatLayer(e,t):"MARKER"===i?this._createMarkerLayer(e,t):"MIGRATION"===i?this._createMigrationLayer(e,t):"RANK_SYMBOL"===i?this._createRankSymbolLayer(e,t):this._isDataflowLayer(i)&&this._createDataflowLayer(e)}else this._createMvtLayer(t.info,e,t.featureType);else this._createRestMapLayer(t,e)}},{key:"_initGraticuleLayer",value:function(e){var t=this._createGraticuleOptions(e),r=new a(t);this._setGraticuleDash(t.strokeStyle,r),this._graticuleLayer=r,this.map.addLayer(r),this._setCacheLayer({parentLayerId:r.id,subRenderLayers:[{layerId:r.id},{layerId:r.sourceId}],metadata:{SM_Layer_Order:"Top"}}),this._addLayerSucceeded()}},{key:"_createGraticuleOptions",value:function(e){var t=e.extent,r=e.lonLabelStyle,n=e.latLabelStyle,o=e.strokeColor,i=e.lineDash,a=e.strokeWidth,s=e.interval,u={lineColor:o,lindDasharray:i,lineWidth:a};return r={textFont:r.fontFamily.split(","),textSize:r.fontSize,textAnchor:n.textBaseline,textColor:r.fill,textHaloColor:r.outlineColor,textHaloWidth:r.outlineWidth},n={textFont:n.fontFamily.split(","),textSize:n.fontSize,textAnchor:n.textBaseline,textColor:n.fill,textHaloColor:n.outlineColor,textHaloWidth:n.outlineWidth},t=t||this.map.getCRS().extent,{minZoom:1,strokeStyle:u,extent:t=[this._unproject([t[0],t[1]]),this._unproject([t[2],t[3]])],interval:s&&s[0],lngLabelStyle:r,latLabelStyle:n,layerID:"graticuleLayer_".concat(+new Date)}}},{key:"_setGraticuleDash",value:function(e,t){var r=this;this.map.on("zoomend",function(){r.map.getZoom()<3?t.setStrokeStyle(Cfe(Cfe({},e),{},{lineOpacity:.5,lineWidth:e.lineWidth/2,lindDasharray:[.1,3]})):t.setStrokeStyle(e)})}},{key:"_createTiandituLayer",value:function(e,t){var r=this._getTiandituUrl(e),n=e.baseLayer,o=n.labelLayerVisible,i=n.name,a=n.visible,s=Boolean(o),u=r.labelUrl,l=r.tiandituUrl,c=Rfe.TIANDITU;this._addBaselayer({url:l,layerID:i,visibility:a,bounds:c}),s&&this._addBaselayer({url:u,layerID:this._getTdtLabelLayerName(i),parentLayerId:i,visibility:a,bounds:c}),t&&t()}},{key:"_createWMTSLayer",value:function(e,t){var r=this;this.webMapService.getWmtsInfo(e,this.map.getCRS().epsgCode).then(function(n){var o=e.layerID||e.name;if(n.isMatched){var i=r._getWMTSUrl(Object.assign({},e,n));r._addBaselayer({url:[i],layerID:o,visibility:e.visible,minzoom:n.matchMinZoom,maxzoom:n.matchMaxZoom,isIserver:!1,bounds:n.bounds}),t&&t()}},function(e){throw t&&t(),new Error(e)}).catch(function(t){r.fire("layercreatefailed",{error:t,layer:e,map:r.map})})}},{key:"_createBingLayer",value:function(){var e=xfe(_fe().m(function e(t,r,n){var o,i,a,s;return _fe().w(function(e){for(;;)switch(e.n){case 0:return o="https://dev.virtualearth.net/REST/v1/Imagery/Metadata/RoadOnDemand?uriScheme=https&include=ImageryProviders&key=".concat(this.bingMapsKey,"&c=zh-cn"),e.n=1,this._fetchRequest(o,"json",{withoutFormatSuffix:!0});case 1:if(200===(i=e.v).statusCode&&1===i.resourceSets.length&&1===i.resourceSets[0].resources.length){e.n=2;break}return e.a(2);case 2:a=i.resourceSets[0].resources[0],s=a.imageUrlSubdomains.map(function(e){return a.imageUrl.replace("{subdomain}",e)}),this._addBaselayer({url:s,layerID:t,visibility:r.visible,bounds:Rfe.BING}),n&&n();case 3:return e.a(2)}},e,this)}));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"_createXYZLayer",value:function(e,t,r){var n=[];if("OSM"===e.layerType){for(var o=t.match(/\w\-\w/g)[0],i=o[0],a=o[2],s="",u=97;u<123;u++)s+=String.fromCharCode(u);for(var l=s.split(""),c=l.indexOf(i),f=l.indexOf(a),p=l.slice(c,f+1),h=0;h<p.length;h++){var y=t.replace(/{\w\-\w}/g,p[h]);n.push(y)}}else if("GOOGLE_CN"===e.layerType)for(var d=t.match(/\d\-\d/g)[0],m=parseInt(d[0]),g=parseInt(d[2]),v=m;v<=g;v++){var b=t.replace(/{\d\-\d}/g,v.toString());n.push(b)}else n=[t];var A=e.layerID||e.name;this._addBaselayer({url:n,layerID:A,visibility:e.visible,bounds:Rfe[e.layerType]||[-180,-90,180,90]}),r&&r()}},{key:"_createZXYLayer",value:function(e,t){var r=e.url,n=e.subdomains,o=e.layerID,i=e.name,a=e.visible,s=e.tileSize,u=e.resolutions,l=e.origin,c=e.minZoom,f=e.maxZoom,p=e.mapBounds,h=n&&n.length?n.map(function(e){return r.replace("{s}",e)}):[r],y=o||i;if(this._isSupportZXYTileLayer({resolutions:u,tileSize:s,origin:l})){var d=this._getSourceBounds(p);this._addBaselayer({url:h,layerID:y,visibility:a,minzoom:c,maxzoom:f,bounds:d,isIserver:!1,tileSize:s})}else this.fire("xyztilelayernotsupport",{error:"The resolutions or origin of layer ".concat(i," on XYZ Tile does not match the map"),error_code:"XYZ_TILE_LAYER_NOT_SUPPORTED",layer:e});t&&t()}},{key:"_getSourceBounds",value:function(e){if(e){var t=this._unproject([e[0],e[1]]),r=this._unproject([e[2],e[3]]);return[].concat(bfe(t),bfe(r))}}},{key:"_isSupportZXYTileLayer",value:function(e){var t=e.resolutions,r=e.tileSize,n=e.origin;return!(void 0!==n||void 0!==t)||this._isSameOrigin(n)&&this._isSameResolutions(t,r)}},{key:"numberEqual",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-5;return Math.abs(+e-+t)<=r}},{key:"_isSameOrigin",value:function(e){var t=this.map.getCRS().getExtent();return this.numberEqual(e[0],t[0])&&this.numberEqual(e[1],t[3])}},{key:"_isSameResolutions",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:512,o=this._getMapResolutions(),i=n/t;return e.every(function(e,t){return r.numberEqual(e,i*o[t])})}},{key:"_getMapResolutions",value:function(){return this._getResolutionsByExtent({extent:this.map.getCRS().getExtent(),tileSize:512})}},{key:"_getResolutionsByExtent",value:function(e){for(var t=e.extent,r=e.maxZoom,n=void 0===r?24:r,o=e.tileSize,i=t[2]-t[0],a=t[3]-t[1],s=(i>=a?i:a)/o,u=[],l=0;l<=n;l++)u.push(s/Math.pow(2,l));return u}},{key:"_getZXYTileCrsExtent",value:function(e){var t=e.tileSize,r=void 0===t?256:t,n=e.resolutions,o=e.origin;if(n){var i=n.sort(function(e,t){return t-e})[0]*r;return[o[0],o[1]-i,o[0]+i,o[1]]}if("EPSG:3857"==this.baseProjection)return[-20037508.3427892,-20037508.3427892,20037508.3427892,20037508.3427892]}},{key:"_createDynamicTiledLayer",value:function(){var e=xfe(_fe().m(function e(t,r){var n,o,i,a,s,u,l,c,f,p,h,y,d,m,g,v;return _fe().w(function(e){for(;;)switch(e.n){case 0:return n=t.url,o=t.layerID||t.name,i=t.minzoom,a=t.maxzoom,s={withoutFormatSuffix:!0,withCredentials:this.webMapService.handleWithCredentials("",n,!1)},e.n=1,this.getBounds("".concat(n,".json"),s);case 1:if(u=e.v,l=null,!u||!u.bounds){e.n=4;break}if(l=this._getBoundList(u),4326===(c=u.prjCoordSys.epsgCode)){e.n=4;break}if("EPSG:".concat(c)!==this.baseProjection&&this._mapInfo.baseLayer.url!==n){e.n=2;break}f=this._unproject([u.bounds.left,u.bounds.bottom]),p=vfe(f,2),h=p[0],y=p[1],d=this._unproject([u.bounds.right,u.bounds.top]),m=vfe(d,2),g=m[0],v=m[1],l=[h,y,g,v],e.n=4;break;case 2:return e.n=3,this.getBounds("".concat(n,".json?prjCoordSys=").concat(JSON.stringify({epsgCode:4326})),s);case 3:u=e.v,l=this._getBoundList(u);case 4:this._addBaselayer({url:[n],layerID:o,visibility:t.visible,minzoom:i,maxzoom:a,isIserver:!0,bounds:l}),r&&r();case 5:return e.a(2)}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"_createWMSLayer",value:function(e,t){var r=this;this.webMapService.getWmsInfo(e).then(function(n){var o=e.layerID||e.name;if(n){var i=r._getWMSUrl(e,n.version);r._addBaselayer({url:[i],layerID:o,visibility:e.visible,bounds:n.bounds}),t&&t()}},function(e){throw t&&t(),new Error(e)}).catch(function(t){r.fire("layercreatefailed",{error:t,layer:e,map:r.map})})}},{key:"_createVectorLayer",value:function(e,t){var r=this,n=e.featureType,o=e.layerID,i=e.minzoom,a=e.maxzoom,s=e.style,u=e.visible,l=e.parentLayerId,c=void 0===l?o:l,f=this.map.getSource(o),p={type:"FeatureCollection",features:t};if(f)f.setData(p);else{var h={type:"geojson",data:p};this.map.addSource(o,h)}var y=Array.isArray(s)?s:[s];2===y.length&&("solid"===y[0].lineDash&&"solid"===y[1].lineDash&&(y[0].strokeWidth=y[1].strokeWidth,y[1].strokeWidth=y[1].strokeWidth-2),"solid"===y[0].lineDash&&"dash"===y[1].lineDash&&(y[0].strokeWidth=y[1].strokeWidth,y[1].strokeWidth=.5*y[1].strokeWidth,y[1].lineDash="dashrailway")),y.forEach(function(e,t){var s={style:r._transformStyleToMapBoxGl(e,n),layout:{visibility:u}},l=0===t?o:"".concat(o,"-additional-").concat(t);r._addOverlayToMap({type:n,source:o,layerID:l,parentLayerId:c,layerStyle:s,minzoom:i,maxzoom:a})}),"POLYGON"===n&&s.strokeColor&&this._addStrokeLineForPoly({style:s,source:o,layerID:o+"-strokeLine",parentLayerId:o,visible:u,minzoom:i,maxzoom:a})}},{key:"_getWMSUrl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"1.1.1",r=e.url,n={service:"WMS",request:"GetMap",layers:null!==e.layers&&"object"===gfe(e.layers)?e.layers.join(","):e.layers||"0",styles:"",format:"image/png",transparent:"true",version:t,width:256,height:256,bbox:"{bbox}"};if(n.crs=this.baseProjection,"1.3.0"===t)if("EPSG:4326"===this.baseProjection)n.bbox="{bbox-wms-1.3.0}";else{var i=o.getProj4().defs(this.baseProjection);i.axis&&0===i.axis.indexOf("ne")&&(n.bbox="{bbox-wms-1.3.0}")}return M.urlAppend(r,this._getParamString(n,r))}},{key:"_setLayerID",value:function(e){var t=this,r={},n=e.baseLayer,o=e.layers,i=void 0===o?[]:o;if(!this.checkSameLayer){var a=this._generateUniqueLayerId({layerId:n.name,repeatIndex:0});n.title=n.name,n.name=a.newId}var s=i.map(function(e){return e.name}),u=i.map(function(e,o){e.name in r||(r[e.name]=n.name===e.name?1:0);var i=s.indexOf(e.name),a=s.lastIndexOf(e.name);o>i&&o<=a&&(r[e.name]=r[e.name]+1);var u=r[e.name]?"".concat(e.name,"-").concat(r[e.name]):e.name;if(!t.checkSameLayer||"raster"!==e.layerType){var l=t._generateUniqueLayerId({layerId:u,repeatIndex:r[e.name],layerType:e.layerType}),c=l.newId,f=l.newIndex;r[e.name]=f,u=c}return Object.assign(e,{layerID:u})});return e.layers=u,e.baseLayer=n,e}},{key:"_generateUniqueLayerId",value:function(e){var t=e.layerId,r=e.repeatIndex,n=e.layerType;return this.map.getLayer(t)?(r++,t=t.match(/-\d+&/gi)?t.replace(/\d+$/gi,r):"".concat(t,"-").concat(r),this._generateUniqueLayerId(Cfe(Cfe({},e),{},{layerId:t,repeatIndex:r}))):this._isDataflowLayer(n)?{newId:"".concat(t,"_").concat(+new Date),newIndex:r+1}:{newId:t,newIndex:r}}},{key:"_createRestMapLayer",value:function(e,t){var r=this;e.forEach(function(e){t=r.getRestMapLayerInfo(e,t),r._initBaseLayer(t)}),this._addLayerSucceeded()}},{key:"_addLayerSucceeded",value:function(e){(((e||{}).layerInfo||{}).labelStyle||{}).labelField&&"DATAFLOW_POINT_TRACK"!==e.layerInfo.layerType&&this._addLabelLayer(e.layerInfo,e.features,!1),this.layerAdded++,this._sendMapToUser(this.layerAdded,this.expectLayerLen)}},{key:"_createDataflowLayer",value:function(e){var t=new i(e.wsUrl).initSubscribe();this._handleDataflowFeaturesCallback=this._handleDataflowFeatures.bind(this,e),this._initDataflowLayerCallback=this._initDataflowLayer.bind(this,e),t.on("subscribesucceeded",this._initDataflowLayerCallback),t.on("messageSucceeded",this._handleDataflowFeaturesCallback),this._dataflowService=t}},{key:"_initDataflowLayer",value:function(){this._addLayerSucceeded()}},{key:"_handleDataflowFeatures",value:function(e,t){var r=[JSON.parse(t.data)];if(this.fire("dataflowfeatureupdated",{features:r,identifyField:e.identifyField,layerID:e.layerID}),"EPSG:4326"!==e.projection&&(r=this.transformFeatures(r)),e.filterCondition){var n=this.replaceFilterCharacter(e.filterCondition),o=r[0].properties||{};n=this.parseCondition(n,Object.keys(o));var i=this.parseConditionFeature(o),a="select * from json where ("+n+")",s=window.jsonsql.query(a,{attributes:i});s&&s.length>0&&this._addDataflowLayer(e,r[0])}else this._addDataflowLayer(e,r[0])}},{key:"_getDataFlowRotateStyle",value:function(e,t,r){var n=["match",["get",r]];return e.forEach(function(e){var o;if((o=void 0!==t&&"æªè®¾ç½®"!==t&&"None"!==t?e.properties[t]:0)>360||o<0)return null;n.push(e.properties[r],parseInt(o))}),n.push(0),n}},{key:"_addDataflowLayer",value:function(){var e=xfe(_fe().m(function e(t,r){var n,o,i,a,s,u;return _fe().w(function(e){for(;;)switch(e.n){case 0:if(n=t.layerID,"DATAFLOW_HEAT"!==t.layerType){e.n=1;break}this.map.getSource(n)?this._updateDataFlowFeature(n,r,t):this._createHeatLayer(t,[r],!1),e.n=7;break;case 1:if(o=t.pointStyle,t.style=o,this.map.getSource(n)){e.n=5;break}if(i=this._getDataFlowRotateStyle([r],t.directionField,t.identifyField),!["BASIC_POINT","SVG_POINT","IMAGE_POINT"].includes(o.type)){e.n=3;break}return e.n=2,this._createGraphicLayer(t,[r],null,i,!1);case 2:e.n=4;break;case 3:this._createSymbolLayer(t,[r],null,i,!1);case 4:e.n=6;break;case 5:this._updateDataFlowFeature(n,r,t,"point");case 6:t.labelStyle&&t.visible&&(a=this._getSymbolLabelLayerName(n),this.map.getSource(a)?this._updateDataFlowFeature(a,r,t):this._addLabelLayer(t,[r],!0)),t.lineStyle&&t.visible&&(this.map.getSource(n+"-line")?this._updateDataFlowFeature(n+"-line",r,t,"line"):(s=r.geometry.coordinates,u={type:"Feature",properties:r.properties,geometry:{type:"LineString",coordinates:[s]}},this._createVectorLayer({style:t.lineStyle,featureType:"LINE",visible:"visible",layerID:n+"-line",parentLayerId:n},[u])));case 7:return e.a(2)}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"_updateDataFlowFeature",value:function(e,t,r,n){var o=r.identifyField,i=r.maxPointCount,a=r.directionField,s=YS()(this.map.getSource(e)._data.features),u=!1;if(s.forEach(function(e,r){if(e.properties[o]===t.properties[o])if(u=!0,"line"===n){var a=e.geometry.coordinates;a.push(t.geometry.coordinates),i&&a.length>i&&a.splice(0,a.length-i),s[r].geometry.coordinates=a}else s[r]=t}),u||("line"===n?s.push({type:"Feature",properties:t.properties,geometry:{type:"LineString",coordinates:[t.geometry.coordinates]}}):s.push(t)),this.map.getSource(e).setData({type:"FeatureCollection",features:s}),"point"===n){var l=r.pointStyle.type,c=this._getDataFlowRotateStyle(s,a,o);["SVG_POINT","IMAGE_POINT"].includes(l)?this.map.setLayoutProperty(e,"icon-rotate",c):"SYMBOL_POINT"===l&&this.map.setLayoutProperty(e,"text-rotate",c)}}},{key:"_createMigrationLayer",value:function(e,t){var r=e.layerID,n=e.layerType,o=this.getEchartsLayerOptions(e,t,"GLMap");o.GLMap={roam:!0};var i=new window.EchartsLayer(this.map);i.chart.setOption(o),i.id=r,i.features=t,this.echartslayer.push(i),this._addLayer({id:r,type:n,setLayoutProperty:function(e,t){"visibility"===e&&(i.chart._dom.style.display="visible"===t?"block":"none")},metadata:{SM_Layer_Order:"top"}}),this._addLayerSucceeded({layerInfo:e,features:t})}},{key:"_createRankSymbolLayer",value:function(e,t){var r=e.minzoom,n=e.maxzoom,o=e.themeSetting.themeField,i=e.themeSetting.colors,a=e.style,s=e.featureType,u=this.createRankStyleSource(e,t).styleGroups;t=this.getFilterFeatures(e.filterCondition,t);for(var l=["match",["get","index"]],c=["match",["get","index"]],f=0;f<t.length;f++){var p=t[f],h=parseFloat(p.properties[o]);if(u)for(var y=0;y<u.length;y++)if(u[y].start<=h&&h<u[y].end){var d="SYMBOL_POINT"===a.type||"IMAGE_POINT"===a.type?"SYMBOL_POINT"===a.type?2*u[y].radius:2*Number.parseFloat((u[y].radius/a.imageInfo.size.h).toFixed(2)):u[y].radius;l.push(p.properties.index,d),c.push(p.properties.index,u[y].color);break}}if(l.push(1),c.push("rgba(0, 0, 0, 0)"),this._initLegendConfigInfo(e,u),i&&i.length>0&&(a.fillColor=c),"SYMBOL_POINT"===a.type)this._createSymbolLayer(e,t,l);else if(["SVG_POINT","IMAGE_POINT"].includes(a.type))this._createGraphicLayer(e,t,l);else{var m={type:"geojson",data:{type:"FeatureCollection",features:t}},g={layout:{visibility:e.visible},style:this._transformStyleToMapBoxGl(e.style,s,l,"circle-radius")},v=e.layerID;this._addOverlayToMap({type:s,source:m,layerID:v,layerStyle:g,minzoom:r,maxzoom:n}),this._addLayerSucceeded({layerInfo:e,features:t})}}},{key:"_addTextBackgroundImage",value:function(e){if(!e[3])return"";for(var t=new Uint8Array(1600),r=0;r<20;r++)for(var n=0;n<20;n++){var o=4*(20*n+r);t[o+0]=e[0],t[o+1]=e[1],t[o+2]=e[2],t[o+3]=255*e[3]}var i="text-background-".concat(e.join("-"));return this.map.hasImage(i)||this.map.addImage(i,{width:20,height:20,data:t},{stretchX:[[0,20]],stretchY:[[0,20]],content:[0,0,20,20]}),i}},{key:"_addLabelLayer",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=this._getSymbolLabelLayerName(e.layerID);if(!this.map.getLayer(n)){var o=e.labelStyle,i=t[0]&&t[0].properties,a=o.labelField.replace(/{(.+)}/g,"$1");if(i&&i[a]){var s=o.backgroundFill,u=void 0===s?[255,255,255,0]:s,l=o.fontFamily,c=e.minzoom,f=e.maxzoom,p=parseFloat(o.fontSize||14),h="";"line"!==o.placement&&(h=this._addTextBackgroundImage(u)),u="rgba(".concat(u.join(","),")");var y="rgba(255,255,255,0)";o.outlineColor&&o.outlineWidth>0&&(y=o.outlineColor);var d=(o.outlineWidth||0)/2,m=o.textAlign||"center";o.textBaseline&&"middle"!==o.textBaseline&&(m="".concat(o.textBaseline).concat("center"===m?"":"-".concat(m)));var g="POINT"===e.featureType?[o.offsetX/p||0,o.offsetY/p||0]:[0,0],v={"text-field":"{".concat(o.labelField,"}"),"text-size":p,"text-offset":g,"text-font":l?[l]:["DIN Offc Pro Italic","Arial Unicode MS Regular"],"symbol-placement":"line"===o.placement?"POLYGON"===e.featureType?"line":"line-center":"point","text-max-angle":"POLYGON"===e.featureType?40:30,"symbol-spacing":"POLYGON"===e.featureType?200:50,"text-anchor":m,"text-line-height":1.2,visibility:e.visible};h&&Object.assign(v,{"icon-image":h,"icon-allow-overlap":!0,"icon-text-fit":"both","icon-text-fit-padding":[2,4,2,4]}),this._addLayer({id:n,type:"symbol",source:this.map.getSource(e.layerID)&&!r?e.layerID:{type:"geojson",data:{type:"FeatureCollection",features:t}},paint:{"text-color":o.fill,"text-halo-color":y,"text-halo-width":d},layout:v,minzoom:c||0,maxzoom:f||22},e.layerID)}}}},{key:"_createSymbolLayer",value:function(e,t,r,n){var o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=arguments.length>5?arguments[5]:void 0;document.getElementById("".concat(this.target)).classList.add("supermapol-icons-map");var a=e.layerID,s=e.minzoom,u=e.maxzoom,l=e.style,c=l.unicode,f=String.fromCharCode(parseInt(c.replace(/^&#x/,""),16)),p=r||(Array.isArray(l.fontSize)?l.fontSize:l.fontSize&&parseFloat(l.fontSize)||12),h=Array.isArray(l.rotation)?l.rotation:180*(l.rotation||0)/Math.PI;this.map.getSource(a)||this.map.addSource(a,{type:"geojson",data:{type:"FeatureCollection",features:[]}});var y={id:a,type:"symbol",source:a,paint:{"text-color":Array.isArray(l.fillColor)?l.fillColor:_ne.getColorWithOpacity(l.fillColor,l.fillOpacity),"text-halo-color":Array.isArray(l.strokeColor)?l.strokeColor:_ne.getColorWithOpacity(l.strokeColor||"rgba(0,0,0,0)",l.strokeOpacity),"text-halo-width":l.strokeWidth||0},layout:{"text-field":f,"text-size":p,"text-font":["supermapol-icons"],"text-rotate":n||h||0,"text-offset":Array.isArray(l.offsetX)?l.offsetX:[l.offsetX/2||0,l.offsetY/2||0],"text-allow-overlap":!0,visibility:e.visible},minzoom:s||0,maxzoom:u||22};i&&(y.filter=i),this._addLayer(y),this.map.getSource(a).setData({type:"FeatureCollection",features:t}),o&&this._addLayerSucceeded({layerInfo:e,features:t})}},{key:"_createGraphicLayer",value:function(){var e=xfe(_fe().m(function e(t,r,n,o){var i,a,s=this,u=arguments;return _fe().w(function(e){for(;;)switch(e.n){case 0:return i=!(u.length>4&&void 0!==u[4])||u[4],a=u.length>5?u[5]:void 0,e.a(2,new Promise(function(e){var u=t.layerID,l=t.minzoom,c=t.maxzoom,f=t.style,p={type:"geojson",data:{type:"FeatureCollection",features:r}};s.map.getSource(u)?s.map.getSource(u).setData(p.data):s.map.addSource(u,p);var h="imageIcon-".concat(u);if("IMAGE_POINT"===f.type){var y=f.imageInfo;s.map.loadImage(y.url,function(p,y){if(p)console.error(p);else{var d=2*Number.parseFloat((f.radius/y.width).toFixed(2));!s.map.hasImage(h)&&s.map.addImage(h,y);var m={id:u,type:"symbol",source:u,layout:{"icon-image":h,"icon-anchor":"bottom-right","icon-size":n||d,"icon-allow-overlap":!0,visibility:t.visible,"icon-offset":[f.offsetX*y.width||0,f.offsetY*y.height||0],"icon-rotate":o||180*(t.style.rotation||0)/Math.PI},minzoom:l||0,maxzoom:c||22};a&&(m.filter=a),s._addLayer(m),i&&s._addLayerSucceeded({layerInfo:t,features:r}),e()}})}else if("SVG_POINT"===f.type){var d=f.url;s._svgDiv||(s._svgDiv=document.createElement("div"),document.body.appendChild(s._svgDiv)),s.getCanvasFromSVG(d,s._svgDiv,function(p){var h=p.toDataURL("img/png");h&&s.map.loadImage(h,function(h,y){h&&console.log(h);var m=2*Number.parseFloat((f.radius/p.width).toFixed(2));n&&Array.isArray(n)&&(n=n.map(function(e,t){return"number"==typeof e&&t%2==1?e/p.width*2:e})),!s.map.hasImage(d)&&s.map.addImage(d,y,{sdf:!0});var g={id:u,type:"symbol",source:u,layout:{"icon-image":d,"icon-size":n||m,"icon-anchor":"bottom-right",visibility:t.visible,"icon-offset":[f.offsetX*p.width||0,f.offsetY*p.height||0],"icon-allow-overlap":!0,"icon-rotate":o||180*(t.style.rotation||0)/Math.PI},paint:{"icon-color":f.fillColor},minzoom:l||0,maxzoom:c||22};a&&(g.filter=a),s._addLayer(g),i&&s._addLayerSucceeded({layerInfo:t,features:r}),e()})})}else{var m={style:s._transformStyleToMapBoxGl(f,t.featureType),layout:{visibility:t.visible}};s._addOverlayToMap({type:"POINT",source:u,layerID:u,layerStyle:m,minzoom:l,maxzoom:c}),i&&s._addLayerSucceeded({layerInfo:t,features:r}),e()}}))}},e)}));return function(t,r,n,o){return e.apply(this,arguments)}}()},{key:"_createUniqueLayer",value:function(){var e=xfe(_fe().m(function e(t,r){var n,o,i,a,s,u,l,c,f,p,h,y,d,m,g,v,b,A,w,S,C,E,_,I,O,x,P,k,T,j,M,B,N,R,L,D,F,Q,G,U,z,H,q,V,K,Y,J,W,X,Z,$,ee,te,re,ne,oe,ie=this;return _fe().w(function(e){for(;;)switch(e.n){case 0:n={unicode:function(e){var t=e.unicode;return String.fromCharCode(parseInt(t.replace(/^&#x/,""),16))},fontSize:function(e){var t=e.fontSize;return t?parseFloat(t):12},rotation:function(e){return 180*(e.rotation||0)/Math.PI},fillColor:function(e){var t=e.fillColor,r=e.fillOpacity;return _ne.getColorWithOpacity(t,r)},strokeColor:function(e){var t=e.strokeColor,r=e.strokeOpacity;return _ne.getColorWithOpacity(t||"rgba(0,0,0,0)",r)},strokeWidth:function(e){return e.strokeWidth||0},offsetX:function(e){var t=e.offsetX,r=e.offsetY;return[t/2||0,r/2||0]}},o={unicode:"",fontSize:12,rotation:0,strokeColor:"rgba(0,0,0,0)",fillColor:"rgba(0,0,0,0)",strokeWidth:0,offsetX:[0,0]},i=this.getUniqueStyleGroup(t,r),r=this.getFilterFeatures(t.filterCondition,r),a=t.layerID,s=t.minzoom,u=t.maxzoom,l=t.style,c=i[0].themeField,f=t.featureType,p=t.style,h={},y={},i.forEach(function(e){y[e.value]=e}),r.forEach(function(e){var t=e.properties,r=y[t[c]];if(r){var o=r.style;for(var i in o)if(Object.prototype.hasOwnProperty.call(o,i)){var a=o[i];a!==p[i]&&(h[i]||(h[i]=["match",["get","index"]]),h[i].push(t.index,n[i]?n[i](o):a))}}}),ne=mfe(h);case 1:if((oe=ne()).done){e.n=4;break}if(d=oe.value,!Object.prototype.hasOwnProperty.call(h,d)){e.n=3;break}if(m=h[d],Array.isArray(m)){e.n=2;break}return e.a(3,1);case 2:g=p[d]||o[d],v=Efe({},d,g),"fillColor"===d&&(h.fillOpacity=1,v.fillOpacity=isNaN(p.fillOpacity)?1:p.fillOpacity),"strokeColor"===d&&(h.strokeOpacity=1,v.strokeOpacity=isNaN(p.strokeOpacity)?1:p.strokeOpacity),b=n[d],m.push(void 0===g?null:b&&b(v)||g);case 3:e.n=1;break;case 4:if(this._initLegendConfigInfo(t,i),A={type:"geojson",data:{type:"FeatureCollection",features:r}},w=a,this.map.getSource(w)?this.map.getSource(w).setData(A.data):this.map.addSource(w,A),S=t.visible,C=function(e){var t=e.type,r=e.sourceID,n=e.layerID,o=e.parentLayerId,i=e.beforeId,a=e.style,s=e.minzoom,u=e.maxzoom,l=e.filter,c={style:ie._transformStyleToMapBoxGl(Cfe({},a),t),layout:{visibility:S}};ie._addOverlayToMap({type:t,source:r,layerID:n,parentLayerId:o,beforeId:i,layerStyle:c,minzoom:s,maxzoom:u,filter:l})},!["POLYGON","LINE"].includes(f)){e.n=5;break}if(E=h.lineDash,_=["all"],I=!1,O="",E&&E.length>1){for(delete h.lineDash,x=E[1],P="POLYGON"===f?a+"-strokeLine":a,k=2;k<E.length-1;k+=2)T=["==",x,E[k]],_.push(["!=",x,E[k]]),j="".concat(P,"-additional-linedasharray-").concat(k/2),O||(O=j),C({type:"LINE",sourceID:w,layerID:j,parentLayerId:a,style:Cfe(Cfe(Cfe({},l),h),{},{lineDash:E[k+1]}),minzoom:s,maxzoom:u,filter:T});_.length>1&&C({type:"LINE",sourceID:w,layerID:P,parentLayerId:a,style:Cfe(Cfe(Cfe({},l),h),{},{lineDash:E[E.length]}),minzoom:s,maxzoom:u,filter:_}),I=!0}"LINE"!==f||I||C({type:"LINE",sourceID:w,layerID:a,style:Cfe(Cfe({},l),h),minzoom:s,maxzoom:u,filter:_}),"POLYGON"===f&&(C({type:"POLYGON",sourceID:w,layerID:a,beforeId:O,style:Cfe(Cfe({},l),h),minzoom:s,maxzoom:u}),O&&this.map.moveLayer(a,O),I||C({type:"LINE",sourceID:w,layerID:a+"-strokeLine",parentLayerId:a,style:Cfe(Cfe({},l),h),minzoom:s,maxzoom:u,filter:_})),e.n=10;break;case 5:if(M=["all"],B=h.unicode){for(N=h.className||[],delete h.unicode,delete h.classname,R="".concat(a,"-additional-symbol"),L=["any"],D=2;D<N.length-1;D+=2)M.push(["!=",N[1],N[D]]),L.push(["==",N[1],N[D]]);document.getElementById("".concat(this.target)).classList.add("supermapol-icons-map"),F=Cfe(Cfe({},l),h),Q={id:R,type:"symbol",source:w,paint:{"text-color":F.fillColor,"text-halo-color":F.strokeColor,"text-halo-width":F.strokeWidth},layout:{"text-field":B,"text-size":"string"==typeof F.fontSize?parseInt(F.fontSize):F.fontSize||12,"text-font":["supermapol-icons"],"text-rotate":F.rotation||0,"text-offset":Array.isArray(F.offsetX)?F.offsetX:[F.offsetX/2||0,F.offsetY/2||0],"text-allow-overlap":!0,visibility:S},minzoom:s||0,maxzoom:u||22},L.length>1&&(Q.filter=L),this._addLayer(Q,a)}if(G=h.imageInfo||[],U=h.url||[],!(G.length>0||U.length>0)){e.n=6;break}for(delete h.imageInfo,delete h.url,z=[],H=G.length>0?[G[0],G[1]]:[],q=U.length>0?[U[0],U[1]]:[],V=["any"],K=["any"],Y=2;Y<G.length-1;Y+=2)J=G[Y+1],z.push(J.url),H.push(G[Y]),H.push(J.url),M.push(["!=",G[1],G[Y]]),V.push(["==",G[1],G[Y]]);for(W=2;W<U.length-1;W+=2)X=U[W+1],z.push(X),q.push(U[W]),q.push(X),M.push(["!=",U[1],U[W]]),K.push(["==",U[1],U[W]]);return H.push(""),q.push(""),Z=function(e){return new Promise(function(t){e.indexOf("svg")<0?ie.map.loadImage(e,function(r,n){if(r)return console.log(r),void t(r);!ie.map.hasImage(e)&&ie.map.addImage(e,n),t({src:e,image:n})}):(ie._svgDiv||(ie._svgDiv=document.createElement("div"),document.body.appendChild(ie._svgDiv)),ie.getCanvasFromSVG(e,ie._svgDiv,function(r){ie.handleSvgColor(p,r),ie.map.loadImage(r.toDataURL("img/png"),function(r,n){if(r)return console.log(r),void t(r);!ie.map.hasImage(e)&&ie.map.addImage(e,n,{sdf:!0}),t({src:e,image:n})})}))})},$=[],z.forEach(function(e){$.push(Z(e))}),ee=Cfe(Cfe({},l),h),e.n=6,Promise.all($).then(function(e){for(var r={},n={},o=h.radius||[],i=2;i<o.length-1;i+=2)n[o[i]]=o[i+1];if(e.forEach(function(e){e&&e.src&&(r[e.src]=e.image.width)}),H.length>1){for(var l=["match",["get","index"]],c=2;c<H.length-1;c+=2){var f=H[c],p=H[c+1],y=2*Number.parseFloat(((n[f]||8)/r[p]).toFixed(2));l.push(f),l.push(y)}l.push(1),ie._addLayer({id:"".concat(a,"-additional-image"),type:"symbol",source:w,layout:{"icon-image":H,"icon-anchor":"bottom-right","icon-size":l,"icon-allow-overlap":!0,visibility:t.visible,"icon-offset":ee.offsetX||[0,0],"icon-rotate":ee.rotation||0},minzoom:s||0,maxzoom:u||22,filter:V},a)}if(q.length>1){for(var d=["match",["get","index"]],m=2;m<q.length-1;m+=2){var g=q[m],v=q[m+1],b=2*Number.parseFloat(((n[g]||8)/r[v]).toFixed(2));d.push(g),d.push(b)}d.push(1),ie._addLayer({id:"".concat(a,"-additional-svg"),type:"symbol",source:w,layout:{"icon-image":q,"icon-anchor":"bottom-right","icon-size":1,"icon-allow-overlap":!0,visibility:t.visible,"icon-offset":ee.offsetX||[0,0],"icon-rotate":ee.rotation||0},paint:{"icon-color":ee.fillColor},minzoom:s||0,maxzoom:u||22,filter:K},a)}});case 6:if("SYMBOL_POINT"!==l.type){e.n=7;break}(te=Cfe({},t)).style=Cfe(Cfe(Cfe({},l),h),{},{type:l.type}),this._createSymbolLayer(te,r,"","",!1,M.length>1?M:void 0),e.n=10;break;case 7:if("IMAGE_POINT"!==l.type&&"SVG_POINT"!==l.type){e.n=9;break}return(re=Cfe({},t)).style=Cfe(Cfe(Cfe({},l),h),{},{type:l.type}),e.n=8,this._createGraphicLayer(re,r,"","",!1,M.length>1?M:void 0);case 8:e.n=10;break;case 9:C({type:"POINT",sourceID:w,layerID:a,style:Cfe(Cfe({},l),h),minzoom:s,maxzoom:u,filter:M.length>1?M:void 0});case 10:this._addLayerSucceeded({layerInfo:t,features:r});case 11:return e.a(2)}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"_getWMTSUrl",value:function(e){if("REST"===e.requestEncoding&&e.restResourceURL)return e.restResourceURL.replace("{Style}",e.style||"").replace("{TileMatrixSet}",e.tileMatrixSet).replace("{TileRow}","{y}").replace("{TileCol}","{x}").replace("{TileMatrix}","{z}");var t={service:"WMTS",request:"GetTile",version:"1.0.0",style:e.style||"",layer:e.layer,tilematrixSet:e.tileMatrixSet,format:"image/png",tilematrix:"{z}",tilerow:"{y}",tilecol:"{x}"};return M.urlAppend(e.kvpResourceUrl,this._getParamString(t,e.kvpResourceUrl))}},{key:"_createMarkerLayer",value:function(e,t){var r=this,n=e.minzoom,o=e.maxzoom,i=e.layerID,a={};(t=t||[]).forEach(function(e,t){var n=e.dv_v5_markerStyle,o=e.geometry.type.toUpperCase();"POINT"===o&&n.text&&(o="TEXT");var s=0===t?i:i+"-"+o+"-"+t;"POINT"===o&&n.src&&-1===n.src.indexOf("http://")&&-1===n.src.indexOf("https://")&&(n.src=r.serverUrl+n.src),a[s]||(a[s]={src:n.src,defaultStyle:n,geomType:o})});var s=function(e,t){var n=t.src,o=t.defaultStyle,i=t.geomType;return new Promise(function(t){n||"TEXT"===i?n&&n.indexOf("svg")<0&&(n.startsWith("http://")||n.startsWith("https://"))?r.map.loadImage(n,function(o,i){if(o)return console.log(o),void t(o);!r.map.hasImage(n)&&r.map.addImage(n,i),t(Efe({},e,n))}):(r._svgDiv||(r._svgDiv=document.createElement("div"),document.body.appendChild(r._svgDiv)),r.getCanvasFromSVG(n,r._svgDiv,function(i){r.handleSvgColor(o,i);var a=i.toDataURL("img/png");r.map.loadImage(a,function(o,i){if(o)return console.log(o),void t(o);var s=n||a;!r.map.hasImage(s)&&r.map.addImage(s,i),t(Efe({},e,s))})})):t(Efe({},e,void 0))})},u=[];for(var l in a)u.push(s(l,a[l]));Promise.all(u).then(function(a){for(var s=0;s<t.length;s++){var u=t[s],l=u.dv_v5_markerStyle,c=u.geometry.type.toUpperCase();"POINT"===c&&l.text&&(c="TEXT");var f=r.setFeatureInfo(u);u.properties.useStyle=l,u.properties.featureInfo=f;var p={type:"geojson",data:u},h=0===s?i:i+"-"+c+"-"+s,y=a[s][h];if("POINT"===c||"TEXT"===c){if(!y){r._addLayer({id:h,type:"circle",source:p,paint:r._transformStyleToMapBoxGl(l,c),layout:{},minzoom:n||0,maxzoom:o||22},i);continue}r._addLayer({id:h,type:"symbol",source:p,layout:{"icon-image":y,"icon-allow-overlap":!0,"icon-size":l.scale||1,visibility:e.visible},minzoom:n||0,maxzoom:o||22},i)}else{var d={layout:{},style:r._transformStyleToMapBoxGl(l,c)};"LINESTRING"===c&&l.lineCap&&(c="LINE",d.layout={"line-cap":l.lineCap});var m=e.visible;d.layout.visibility=m,r._addOverlayToMap({type:c,source:p,layerID:h,parentLayerId:i,layerStyle:d,minzoom:n,maxzoom:o}),"POLYGON"===c&&l.strokeColor&&r._addStrokeLineForPoly({style:l,source:h,layerID:h+"-strokeLine",parentLayerId:i,visible:m,minzoom:n,maxzoom:o})}}r._addLayerSucceeded({layerInfo:e,features:t})})}},{key:"_createHeatLayer",value:function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=e.minzoom,o=e.maxzoom,i=e.themeSetting,a={gradient:i.colors.slice(),radius:parseInt(i.radius)},s=i.customSettings;for(var u in s)a.gradient[u]=s[u];var l=["interpolate",["linear"],["heatmap-density"]],c=[.1,.3,.5,.7,1];a.gradient.forEach(function(e,t){l.push(c[t]),0===t&&(e=M.hexToRgba(e,0)),1===t&&(e=M.hexToRgba(e,.5)),l.push(e)}),this._initLegendConfigInfo(e,l);var f={"heatmap-color":l,"heatmap-radius":3*i.radius,"heatmap-intensity":2.8};if(i.weight&&t.length>=4){var p=[];t.forEach(function(e){e.properties[i.weight]=+e.properties[i.weight],p.push(e.properties[i.weight])});var h=Pne.getMax(p),y=Pne.getMin(p);f["heatmap-weight"]=["interpolate",["linear"],["get",i.weight],y,0,h,1]}this._addLayer({id:e.layerID,type:"heatmap",source:{type:"geojson",data:{type:"FeatureCollection",features:t}},paint:f,layout:{visibility:e.visible},minzoom:n||0,maxzoom:o||22}),r&&this._addLayerSucceeded({layerInfo:e,features:t})}},{key:"_createRangeLayer",value:function(e,t){var r=e.themeSetting.themeField,n=e.featureType,o=e.minzoom,i=e.maxzoom,a=e.style,s=this.getRangeStyleGroup(e,t),u=["match",["get","index"]],l=(t=this.getFilterFeatures(e.filterCondition,t)).filter(function(e){var t=parseFloat(e.properties[r]);if(!t&&0!==t)return!1;if(s)for(var n=0;n<s.length;n++){var o=s[n].start<=t,i=t<s[n].end,a=n===s.length-1&&t===s[n].end;if(o&&(i||a)){u.push(e.properties.index,s[n].color);break}}return!0},this);u.push("rgba(0, 0, 0, 0)");var c={type:"geojson",data:{type:"FeatureCollection",features:l}};this._initLegendConfigInfo(e,s||[]);var f={layout:{}};"LINE"===n&&a.lineCap&&(f.layout={"line-cap":a.lineCap});var p=e.visible;f.layout.visibility=p,f.style=this._transformStyleToMapBoxGl(a,n,u);var h=e.layerID;this._addOverlayToMap({type:n,source:c,layerID:h,layerStyle:f,minzoom:o,maxzoom:i}),"POLYGON"===n&&a.strokeColor&&this._addStrokeLineForPoly({style:a,source:h,layerID:h+"-strokeLine",parentLayerId:h,visible:p,minzoom:o,maxzoom:i}),this._addLayerSucceeded({layerInfo:e,features:t})}},{key:"_sendMapToUser",value:function(e,t){if(e===t){this.addLayersSucceededLen=this._cacheLayerId.size,this._changeSourceListModel();var r=this.getLayers(),n=this._getSelfAppreciableLayers(r);this.rectifyLayersOrder(n.layers),this.fire("mapcreatesucceeded",Cfe(Cfe({},n),{},{map:this.map,mapparams:this._mapInfo.mapParams}))}}},{key:"rectifyLayersOrder",value:function(e,t){for(var r=this,n=jfe(s,"rectifyLayersOrder",this,3)([e,t]),o=[],i=n.length-1;i>-1;i--){var a=n[i],u=this._getSymbolLabelLayerName(a);this.map.getLayer(u)&&o.push(u)}o.reverse().forEach(function(e){r.map.moveLayer(e)})}},{key:"_getParamString",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=[];for(var o in e)n.push((r?o.toUpperCase():o)+"="+e[o]);return(t&&-1!==t.indexOf("?")?"&":"?")+n.join("&")}},{key:"_transformStyleToMapBoxGl",value:function(e,t,r,n){var o={};"POINT"!==e.type&&"BASIC_POINT"!==e.type&&"POINT"!==t||"LINE"===t?["LINE","LINESTRING","MULTILINESTRING"].includes(t)?o={strokeWidth:"line-width",strokeColor:"line-color",strokeOpacity:"line-opacity"}:["REGION","POLYGON","MULTIPOLYGON"].includes(t)&&(o={fillColor:"fill-color",fillOpacity:"fill-opacity"}):o={fillColor:"circle-color",strokeWidth:"circle-stroke-width",fillOpacity:"circle-opacity",radius:"circle-radius",strokeColor:"circle-stroke-color",strokeOpacity:"circle-stroke-opacity"};var i={};for(var a in e)o[a]&&(i[o[a]]=e[a]);if(r&&(n?i[n]=r:i["circle-color"]?i["circle-color"]=r:i["line-color"]?i["line-color"]=r:i["fill-color"]=r),e.lineDash&&!i["line-dasharray"]&&(Array.isArray(e.lineDash)?i["line-dasharray"]=e.lineDash:"solid"!==e.lineDash&&"LINE"===t&&(i["line-dasharray"]=this.getDashStyle(e.lineDash))),e.lineDash&&!i["circle-translate"])if(Array.isArray(e.circleTranslate))i["circle-translate"]=e.circleTranslate;else if("POINT"===e.type||"BASIC_POINT"===e.type||"POINT"===t){var s=e.offsetX||0,u=e.offsetY||0;i["circle-translate"]=[s*e.radius,u*e.radius]}return i}},{key:"_addOverlayToMap",value:function(e){var t=e.type,r=e.source,n=e.layerID,o=e.parentLayerId,i=e.beforeId,a=e.layerStyle,s=e.minzoom,u=e.maxzoom,l=e.filter,c={POINT:"circle",LINE:"line",POLYGON:"fill"}[t];if("circle"===c||"line"===c||"fill"===c){var f={id:n,type:c,source:r,paint:a.style,layout:a.layout||{},minzoom:s||0,maxzoom:u||22};l&&(f.filter=l),this._addLayer(f,o,i)}}},{key:"_addBaselayer",value:function(e){var t=e.url,r=e.layerID,n=e.parentLayerId,o=e.visibility,i=void 0===o||o,a=e.minzoom,s=void 0===a?0:a,u=e.maxzoom,l=void 0===u?22:u,c=e.isIserver,f=void 0!==c&&c,p=e.tileSize,h=void 0===p?256:p,y=e.bounds,d={type:"raster",tiles:t,minzoom:s||0,maxzoom:l||22,tileSize:f?this.rasterTileSize:h,rasterSource:f?"iserver":"",prjCoordSys:f&&!this.isOnlineBaseLayer(t[0],this.baseProjection)&&+this.baseProjection.split(":")[1]>0?{epsgCode:this.baseProjection.split(":")[1]}:"",proxy:this.baseLayerProxy};y&&(d.bounds=y);var m=d;!this.map.getSource(r)||this.map.getLayer(r)&&this.checkSameLayer&&this._isSameRasterLayer(r,d)||(m="".concat(r,"_").concat(+new Date),this.map.addSource(m,d)),this._addLayer({id:r,type:"raster",source:m,minzoom:s||0,maxzoom:l||22,layout:{visibility:this._getVisibility(i)}},n),this.baseLayerProxy=null}},{key:"_addStrokeLineForPoly",value:function(e){var t=e.style,r=e.source,n=e.layerID,o=e.parentLayerId,i=e.visible,a=e.minzoom,s=e.maxzoom,u={style:this._transformStyleToMapBoxGl(t,"LINE"),layout:{visibility:i}};this._addOverlayToMap({type:"LINE",source:r,layerID:n,parentLayerId:o,layerStyle:u,minzoom:a,maxzoom:s})}},{key:"_initLegendConfigInfo",value:function(e,t){var r=this,n={layerId:e.layerID,layerTitle:e.layerID,themeField:"HEAT"===e.layerType?e.themeSetting.weight:e.themeSetting.themeField,styleGroup:t},o=function(e,t){var n={style:{shape:r._getShape(t.featureType),type:r._getType(e.style.type)}};return r._addProps(n,e),n};switch(e.layerType){case"UNIQUE":n.styleGroup=n.styleGroup.map(function(t){return Cfe({fieldValue:t.value},o(t,e))});break;case"RANGE":case"RANK_SYMBOL":n.styleGroup=n.styleGroup.map(function(t){return Cfe({start:t.start,end:t.end},o(t,e))});break;case"HEAT":n.styleGroup=[{style:{shape:"POINT",type:"style",colors:this._heatColorToGradient(n.styleGroup)}}]}var i=this._legendList.findIndex(function(t){return t.layerId===e.layerID});i>-1?this._legendList.splice(i,1,n):this._legendList.push(n)}},{key:"_heatColorToGradient",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[];return e.forEach(function(r,n){n>5&&n%2==0&&t.push({value:r,key:6===n?0:e[n-1]})}),t}},{key:"_getType",value:function(e){return["IMAGE_POINT","SVG_POINT"].includes(e)?"image":"style"}},{key:"_getShape",value:function(e){return"POLYGON"===e?"FILL":e}},{key:"_addProps",value:function(e,t){if("POINT"===e.style.shape){if(Object.assign(e.style,{color:t.style.fillColor||t.color,opacity:t.style.fillOpacity,fontSize:2*t.radius||t.style.fontSize||"14px"}),"image"===e.style.type)return void Object.assign(e.style,{url:(t.style.imageInfo||{}).url||t.style.url});if(t.style.className)return void Object.assign(e.style,{icon:t.style.className})}"LINE"!==e.style.shape?"FILL"===e.style.shape&&Object.assign(e.style,{backgroundColor:t.style.fillColor||t.color,opacity:t.style.fillOpacity,outlineColor:t.style.strokeColor,width:20,height:20}):Object.assign(e.style,{width:20,lineStyles:[{color:t.color,lineDash:[],lineOffset:0,lineWidth:2,opacity:t.style.strokeOpacity||1}]})}},{key:"_createMvtLayer",value:function(e,t,r){var o=this._getDataVectorTileStyle(r),i=this._transformStyleToMapBoxGl(o,r),a=e.url+"/tileFeature.mvt",s=n.CRS.get(this.baseProjection).getOrigin(),u=t.minzoom,l=t.maxzoom;a+="?&returnAttributes=true&width=512&height=512&x={x}&y={y}&scale={scale}&origin={x:".concat(s[0],",y:").concat(s[1],"}"),this._addLayer({id:t.layerID,type:o.mbglType,source:{type:"vector",tiles:[a],proxy:this.webMapService.handleProxy("image")},"source-layer":"".concat(e.datasetName,"@").concat(e.datasourceName),paint:i,layout:{visibility:t.visible?"visible":"none"},minzoom:u||0,maxzoom:l||22}),this._addLayerSucceeded()}},{key:"_getDataVectorTileStyle",value:function(e){var t={radius:8,fillColor:"#EE4D5A",fillOpacity:.9,strokeColor:"#ffffff",strokeWidth:1,strokeOpacity:1,lineDash:"solid",type:"BASIC_POINT",mbglType:"circle"};return["LINE","LINESTRING","MULTILINESTRING"].includes(e)?(t.strokeColor="#4CC8A3",t.strokeWidth=2,t.mbglType="line"):["REGION","POLYGON","MULTIPOLYGON"].includes(e)&&(t.fillColor="#826DBA",t.mbglType="fill"),t}},{key:"_unproject",value:function(e){var t=this._unprojectProjection||this.baseProjection;return"EPSG:4326"===t?e:GC({coordinates:e,sourceProjection:t,proj4:this.specifiedProj4})}},{key:"_getMapCenter",value:function(e){var t=e.center&&[e.center.x,e.center.y];return t||(t=[0,0]),t=this._unproject(t,!1),t=new n.LngLat(t[0],t[1])}},{key:"_getLabelFontFamily",value:function(e){var t=["sans-serif"],r=e.layers;return r&&r.length>0&&r.forEach(function(e){e.labelStyle&&t.push(e.labelStyle.fontFamily)},this),t.push("supermapol-icons"),t.join(",")}},{key:"_getTiandituUrl",value:function(e){for(var t=/t0/gi,r={tiandituUrl:[],labelUrl:[]},n=e.baseLayer.layerType.split("_")[1].toLowerCase(),o=Boolean(e.baseLayer.labelLayerVisible),i=this.tiandituKey||e.baseLayer.tk,a="https://t0.tianditu.gov.cn/{layer}_{proj}/wmts?tk=".concat(i),s=a,u="EPSG:4326"===this.baseProjection?"c":"w",l={service:"WMTS",request:"GetTile",style:"default",version:"1.0.0",layer:n,tilematrixSet:u,format:"tiles",width:256,height:256},c=(a+=this._getParamString(l,a)+"&tilematrix={z}&tilerow={y}&tilecol={x}").replace("{layer}",n).replace("{proj}",u),f=[],p=0;p<8;p++)f.push(c.replace(t,"t".concat(p)));if(r.tiandituUrl=f,o){var h={vec:"cva",ter:"cta",img:"cia"}[n];l.layer=h,s=(s+=this._getParamString(l,s)+"&tilematrix={z}&tilerow={y}&tilecol={x}").replace("{layer}",h).replace("{proj}",u);for(var y=[],d=0;d<8;d++)y.push(s.replace(t,"t".concat(d)));r.labelUrl=y}return r}},{key:"_getProjectionWKT",value:function(e){var t=QC(e);return t&&e.match(/^EPSG:/)?FC(t,this.specifiedProj4):e}},{key:"_fetchRequest",value:function(e,t,r){return z.get(e,null,r).then(function(e){return e[t]()}).then(function(e){return e}).catch(function(e){console.log(e)})}},{key:"getEpsgCodeWKT",value:function(e,t){if(e)return this._fetchRequest(e,"text",t)}},{key:"getBounds",value:function(e,t){return e?this._fetchRequest(e,"json",t):Promise.resolve(null)}},{key:"_getBoundList",value:function(e){if(e&&e.bounds)return[e.bounds.left,e.bounds.bottom,e.bounds.right,e.bounds.top]}},{key:"_addLayer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.id,r=arguments.length>2?arguments[2]:void 0,n=e.id;if(this.map.getLayer(n))return this.checkSameLayer&&this._isSameRasterLayer(n,e.source)?void this._setCacheLayer({layerInfo:e,parentLayerId:t,id:n,reused:!0,beforeId:r}):void this._updateLayer(e);var o=Object.assign({},e);o.metadata=Object.assign({},o.metadata,{SM_Layer_Id:t}),this.map.addLayer(o),this._setCacheLayer({layerInfo:e,parentLayerId:t,id:n,beforeId:r})}},{key:"_setCacheLayer",value:function(e){var t=e.parentLayerId,r=e.layerInfo,n=e.reused,o=void 0!==n&&n,i=e.beforeId,a=e.subRenderLayers,s=e.metadata,u=a||[{layerId:r.id,reused:o}];if(this._cacheLayerId.has(t)){var l,c=this._cacheLayerId.get(t),f=-1;i&&(f=c.renderLayers.findIndex(function(e){return e.layerId===i}));var p=f<0?c.renderLayers.length:f;(l=c.renderLayers).splice.apply(l,[p,0].concat(bfe(u)))}else{var h=Object.assign({},s||r&&r.metadata,{SM_Layer_Id:t});this._cacheLayerId.set(t,{renderLayers:u,metadata:h})}if(this.addLayersSucceededLen&&this._cacheLayerId.size<=this.expectLayerLen){this._changeSourceListModel();var y=this.getLayers(),d=this.getSelfAppreciableLayers(y),m=this._findTopLayerBeforeId(d);this.rectifyLayersOrder(d,m),this.fire("layeraddchanged",this._getSelfAppreciableLayers(y))}}},{key:"_findTopLayerBeforeId",value:function(e){var t=this,r=e.filter(function(e){return!e.reused}).reduce(function(e,t){return e.concat(t.renderLayers)},[]),n=r.find(function(e){return t.map.style._layers[e]});if(n){var o,i=this.map.getStyle().layers,a=i.findIndex(function(e){return e.id===n}),s=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Afe(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}(i.filter(function(e){return!r.some(function(t){return t===e.id})}).map(function(e){return e.id}));try{var u,l=function(){var e=o.value;if(i.findIndex(function(t){return t.id===e})>a)return{v:e}};for(s.s();!(o=s.n()).done;)if(u=l())return u.v}catch(e){s.e(e)}finally{s.f()}}}},{key:"_changeSourceListModel",value:function(){var e=this,t=[],r=[this._mapInfo.baseLayer].concat(this._mapInfo.layers);if(this._graticuleLayer){var n=this._graticuleLayer,o=n.id,i=n.visible;r.push({layerID:o,visible:i,name:"GraticuleLayer"})}if(r.forEach(function(r){var n=r.layerID||r.name,o=void 0===r.visible||"visible"===r.visible||!0===r.visible,i=e._cacheLayerId.get(n);if(i){var a=i.renderLayers.map(function(e){return e.layerId});if(!a.length)return;t.push(Cfe(Cfe(Cfe({},r),i),{},{id:n,visible:o,renderLayers:a,reused:i.renderLayers.some(function(e){return e.reused})}))}}),!this._sourceListModel)return this._sourceListModel=new ofe({map:this.map,layers:t,appendLayers:this._appendLayers}),void this._sourceListModel.on({layerupdatechanged:function(t){e.fire("layerupdatechanged",t)}});this._sourceListModel.setLayers(t)}},{key:"_getSelfAppreciableLayers",value:function(e){return{layers:this.getSelfAppreciableLayers(e),allLoaded:this._cacheLayerId.size===this.expectLayerLen}}},{key:"_isSameRasterLayer",value:function(e,t){return Oo(t,this.map.getSource(e))}},{key:"_centerValid",value:function(e){return!(!e||!(e.length>0||gfe(e)===n.LngLat||e.lng))}},{key:"_getResolution",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:512;return e.leftBottom&&e.rightTop?Math.max(e.rightTop.x-e.leftBottom.x,e.rightTop.y-e.leftBottom.y)/t:Math.max(e[2]-e[0],e[3]-e[1])/t}},{key:"_transformScaleToZoom",value:function(e,t,r){r=r||512;var n=t.getExtent(),o=t.unit,i=1/M.getScaleFromResolutionDpi((n[2]-n[0])/r,96,o),a=e.split(":")[1];return Math.min(24,+Math.log2(i/+a).toFixed(2))}},{key:"_updateLayer",value:function(e){var t=this,r=e.id,n=e.paint,o=e.source,i=o.type,a=o.tiles,s=o.data,u=o.proxy,l=this.map.getSource(r);l&&("geojson"===i||"geojson"===l.type?(Object.keys(n).forEach(function(e){t.map.setPaintProperty(r,e,n[e])}),s&&l.setData(s)):"raster"===i&&this._updateRasterSource(r,{proxy:u,tiles:a}))}},{key:"_updateRasterSource",value:function(e,t){if(e){var r=this.map.getSource(e);Object.assign(r,t),this.map.style.sourceCaches[e].clearTiles(),this.map.style.sourceCaches[e].update(this.map.transform),this.map.triggerRepaint()}}},{key:"updateOverlayLayer",value:function(e,t,r,n){var o=this._mapInfo.layers.find(function(t){return t.layerID===e.id});if(t)this._initOverlayLayer(o,t,r,n);else{var i=this.webMapService.getDatasourceType(o);this.getLayerFeatures(o,this._taskID,i)}}},{key:"isOnlineBaseLayer",value:function(e,t){return e.startsWith("https://maptiles.supermapol.com/iserver/services/map_China/rest/maps/China_Dark")&&"EPSG:3857"===t}},{key:"_handleMultyPolygon",value:function(e){var t=this;return e.forEach(function(e){if("Polygon"===e.geometry.type){var r=e.geometry.coordinates;if(r.length>1){for(var n=[[r[0]]],o=1;o<r.length;o++){var i=r[o],a=t.signedArea(i);0!==a&&(a>0?n[n.length-1].push(r[o]):n.push([r[o]]))}e.geometry.coordinates=n,e.geometry.type="MultiPolygon"}}}),e}},{key:"signedArea",value:function(e){for(var t,r,n=0,o=0,i=e.length,a=i-1;o<i;a=o++)t=e[o],n+=((r=e[a])[0]-t[0])*(t[1]+r[1]);return n}},{key:"_getTdtLabelLayerName",value:function(e){return"".concat(e,"-tdt-label")}},{key:"_getSymbolLabelLayerName",value:function(e){return"".concat(e,"-label")}},{key:"_isDataflowLayer",value:function(e){return"DATAFLOW_POINT_TRACK"===e||"DATAFLOW_HEAT"===e}},{key:"_getVisibility",value:function(e){return!0===e||"visible"===e?"visible":"none"}},{key:"isAbsoluteURL",value:function(e){try{return!!new URL(e)}catch(e){return!1}}},{key:"relative2absolute",value:function(e,t){var r=new URL(e,t);return r&&r.href?decodeURIComponent(r.href):null}}])&&Pfe(u.prototype,l),c&&Pfe(u,c),Object.defineProperty(u,"prototype",{writable:!1}),u;var u,l,c}()}function Dfe(e){"@babel/helpers - typeof";return(Dfe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ffe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],u=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||Qfe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qfe(e,t){if(e){if("string"==typeof e)return Gfe(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Gfe(e,t):void 0}}function Gfe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Ufe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,zfe(n.key),n)}}function zfe(e){var t=function(e,t){if("object"!=Dfe(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Dfe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Dfe(t)?t:t+""}function Hfe(e,t,r){return t=qfe(t),function(e,t){if(t&&("object"==Dfe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],qfe(e).constructor):t.apply(e,r))}function qfe(e){return(qfe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Vfe(e,t){return(Vfe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Kfe=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Hfe(this,t,[r]))._mapInfo=r.mapInfo,e._layerCatalog=r.mapInfo.metadata.layerCatalog,e._mapResourceInfo=r.mapResourceInfo,e._l7LayerUtil=r.l7LayerUtil,e._legendList=r.legendList,e._immutableTopOrderLayers=["chart","point-extrusion"];var n=e._generateLayers();return e.setLayers(n),e.initDatas(),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vfe(e,t)}(t,Vce),r=t,(n=[{key:"createLayerCatalogs",value:function(){var e=this.getLayers(!1),t=this._createSourceCatalogs(this._layerCatalog,e),r=this.getSelfLayers(),n=e.filter(function(e){return!r.some(function(t){return t.id===e.id})});return this._initSourceList(n).concat(t)}},{key:"getSelfLayerIds",value:function(){return this.layers.reduce(function(e,t){return e.concat(t.layerInfo.renderLayers)},[])}},{key:"initLayers",value:function(){var e=this,t=this._getAllLayersOnMap();this.appendLayers&&(t=[]);var r=this.layers.map(function(t){var r=Object.assign({},t);return t["source-layer"]&&(r.sourceLayer=t["source-layer"]),e._pickLayerFields(r)}),n=this.layers.reduce(function(e,t){return e.concat(t.layerInfo.renderLayers)},[]);return this.concatExpectLayers(r,n,t)}},{key:"_createSourceCatalogs",value:function(e,t){var r=this;return e.map(function(e){var n,o=e.id,i=e.title,a=void 0===i?o:i,s=e.type,u=e.visible,l=e.children,c=e.parts;if("group"===s)n={children:r._createSourceCatalogs(l,t),id:o,title:a,type:s,visible:u};else{var f=Po(c,o,r._mapInfo.layers),p=t.find(function(e){return e.id===f[0]});r.removeLayerExtralFields([p]),n=Object.assign({},p)}return n})}},{key:"_generateLayers",value:function(){var e=this,t=this._mapResourceInfo,r=t.catalogs,n=void 0===r?[]:r,o=t.datas,i=void 0===o?[]:o,a=Io(n,"catalogType"),s=Io(this._mapInfo.metadata.layerCatalog),u=this._l7LayerUtil.getL7MarkerLayers(),l=s.map(function(t){var r=Po(t.parts,t.id,e._mapInfo.layers),n=ko(t.parts,t.id,e._mapInfo.layers),o={id:n.id,title:t.title,renderLayers:r,reused:n.metadata&&n.metadata.reused},s=(a.find(function(e){return e.id===t.id})||{}).msDatasetId,l={};if(s){var c,f=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Qfe(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}(i);try{for(f.s();!(c=f.n()).done;){var p=c.value,h=p.datasets&&p.datasets.find(function(e){return e.msDatasetId===s});if(h){if(l={serverId:h.datasetId,type:p.sourceType},"REST_DATA"===p.sourceType){var y=Ffe(p.url.split("/rest/data/datasources/"),2),d=y[0],m=y[1];l.url="".concat(d,"/rest/data"),l.dataSourceName="".concat(m,":").concat(h.datasetName),delete l.serverId}break}}}catch(e){f.e(e)}finally{f.f()}}var g=e.map.getSource(n.source);if(!Object.keys(l).length&&g&&"vector"===g.type){var v=e._mapInfo.sources[n.source]||g;if(v.tiles&&v.tiles[0].includes("/rest/maps/")){var b=Ffe(v.tiles[0].split("/rest/maps/"),2),A=b[0],w=Ffe(b[1].split("/tileFeature"),1)[0];l.url="".concat(A,"/rest/maps"),l.mapName=w,l.type="REST_MAP"}}o.dataSource=l,e._l7LayerUtil.isL7Layer(n)&&(o.CLASS_NAME="L7Layer"),u[n.id]&&(o.CLASS_INSTANCE=u[n.id]);var S=e._legendList.filter(function(e){return e.layerId===n.id}).map(function(e){return e.themeField}).filter(function(e){return!!e}),C=Array.from(new Set(S));return C.length>0&&(o.themeSetting={themeField:C}),e._immutableTopOrderLayers.some(function(e){return e===n.type})&&(o.metadata=Object.assign({},n.metadata,{SM_Layer_Order:"top"})),Object.assign({},n,{layerInfo:o})});return l.reverse(),l}}])&&Ufe(r.prototype,n),o&&Ufe(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}();function Yfe(e){return function(e){if(Array.isArray(e))return Xfe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Wfe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jfe(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Wfe(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function Wfe(e,t){if(e){if("string"==typeof e)return Xfe(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Xfe(e,t):void 0}}function Xfe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Zfe(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof s?n:s,l=Object.create(u.prototype);return $fe(l,"_invoke",function(r,n,o){var i,s,u,l=0,c=o||[],f=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,r){return i=t,s=0,u=e,p.n=r,a}};function h(r,n){for(s=r,u=n,t=0;!f&&l&&!o&&t<c.length;t++){var o,i=c[t],h=p.p,y=i[2];r>3?(o=y===n)&&(u=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=r<2&&h<i[1])?(s=0,p.v=n,p.n=i[1]):h<y&&(o=r<3||i[0]>n||n>y)&&(i[4]=r,i[5]=n,p.n=y,s=0))}if(o||r>1)return a;throw f=!0,n}return function(o,c,y){if(l>1)throw TypeError("Generator is already running");for(f&&1===c&&h(c,y),s=c,u=y;(t=s<2?e:u)||!f;){i||(s?s<3?(s>1&&(p.n=-1),h(s,u)):p.n=u:p.v=u);try{if(l=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(f=p.n<0)?u:r.call(n,p))!==a)break}catch(t){i=e,s=1,u=t}finally{l=1}}return{value:t,done:f}}}(r,o,i),!0),l}var a={};function s(){}function u(){}function l(){}t=Object.getPrototypeOf;var c=[][n]?t(t([][n]())):($fe(t={},n,function(){return this}),t),f=l.prototype=s.prototype=Object.create(c);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,$fe(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=l,$fe(f,"constructor",l),$fe(l,"constructor",u),u.displayName="GeneratorFunction",$fe(l,o,"GeneratorFunction"),$fe(f),$fe(f,o,"Generator"),$fe(f,n,function(){return this}),$fe(f,"toString",function(){return"[object Generator]"}),(Zfe=function(){return{w:i,m:p}})()}function $fe(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}($fe=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){$fe(e,t,function(e){return this._invoke(t,r,e)})};i("next",0),i("throw",1),i("return",2)}})(e,t,r,n)}function epe(e){"@babel/helpers - typeof";return(epe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tpe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function rpe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tpe(Object(r),!0).forEach(function(t){cpe(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tpe(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function npe(e,t,r,n,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function ope(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){npe(i,n,o,a,s,"next",e)}function s(e){npe(i,n,o,a,s,"throw",e)}a(void 0)})}}function ipe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,fpe(n.key),n)}}function ape(e,t,r){return t=upe(t),function(e,t){if(t&&("object"==epe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],upe(e).constructor):t.apply(e,r))}function spe(){return(spe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=upe(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function upe(e){return(upe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lpe(e,t){return(lpe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function cpe(e,t,r){return(t=fpe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fpe(e){var t=function(e,t){if("object"!=epe(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=epe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==epe(t)?t:t+""}var ppe={TEXT:"TEXT",POINT:"POINT",LINE:"LINE",FILL:"FILL",FILLEXTRUSION:"FILLEXTRUSION",ANIMATEPOINT:"ANIMATEPOINT",ANIMATELINE:"ANIMATELINE",RADARPOINT:"RADARPOINT",BUILTINSYMBOL:"BUILTINSYMBOL"},hpe={TEXT:"TEXT",POINT:"POINT",LINE:"LINE",RECTANGLE:"RECTANGLE",ANIMATEPOINT:"ANIMATEPOINT",ANIMATELINE:"ANIMATELINE",RADARPOINT:"RADARPOINT",HEXAGON:"HEXAGON",TRIANGLE:"TRIANGLE",LINEGRADIENT:"LINEGRADIENT"},ype={fontSize:"size",backgroundColor:"color"},dpe=cpe(cpe(cpe(cpe(cpe(cpe(cpe(cpe(cpe({},ppe.TEXT,{textSize:"16px",textColor:"#FFFFFF",textOpacity:1,textHaloColor:"#242424",textHaloBlur:1,textHaloWidth:1,textFont:"Microsoft YaHei"}),ppe.POINT,{fontSize:"8px",color:"#FFFFFF",opacity:1}),ppe.BUILTINSYMBOL,{fontSize:"12px",color:"#FFFFFF",opacity:1}),ppe.LINE,{width:20,height:8,backgroundColor:"#FFFFFF",opacity:1}),ppe.FILL,{width:"20px",height:"20px",opacity:1,backgroundColor:"#FFFFFF",marginLeft:"1px",outline:"1px solid transparent",outlineColor:"#FFFFFF"}),ppe.FILLEXTRUSION,{width:"20px",height:"20px",opacity:1,backgroundColor:"#FFFFFF"}),ppe.ANIMATEPOINT,{size:30,color:"#EE4D5A",opacity:.9,speed:1,rings:3}),ppe.ANIMATELINE,{width:20,height:8,backgroundColor:"#FFFFFF",opacity:1}),ppe.RADARPOINT,{size:60,color:"#EE4D5A",opacity:.9,speed:3}),mpe=["textSize","textColor","textOpacity","textHaloColor"],gpe=cpe(cpe(cpe(cpe(cpe(cpe(cpe(cpe(cpe({},ppe.TEXT,[].concat(mpe,["symbolsContent","textField","textFont","textHaloBlur","textHaloWidth"])),ppe.POINT,["symbolsContent","size","color","opacity"]),ppe.BUILTINSYMBOL,["symbolsContent","size","color","opacity"]),ppe.LINE,["width","color","opacity","lineDasharray","symbolsContent"]),ppe.FILL,["color","opacity","antialias","outlineColor","symbolsContent"]),ppe.FILLEXTRUSION,["color","opacity","symbolsContent"]),ppe.ANIMATEPOINT,["color","opacity","size","speed","rings"]),ppe.ANIMATELINE,["color","opacity","width","textureBlend","symbolsContent","iconStep"]),ppe.RADARPOINT,["color","opacity","size","speed"]),vpe=cpe(cpe(cpe(cpe({},ppe.POINT,"circle"),ppe.BUILTINSYMBOL,"circle"),ppe.FILL,"polygon-0"),ppe.FILLEXTRUSION,"polygon-0"),bpe={LINEAR:"LINEAR",UNIQUE:"UNIQUE",RANGE:"RANGE"},Ape={line:"line",point:"point",polygon:"polygon"},wpe={circle:"point",line:"line",symbol:"point",fill:"polygon","fill-extrusion":"polygon",heatmap:"point",radar:"point","point-extrusion":"point","heatmap-extrusion":"point","line-extrusion":"line","line-curve":"line","line-curve-extrusion":"line"},Spe=100,Cpe="line-width",Epe={IMAGE:"image",STYLE:"style"};function _pe(e,t){var r=t.MapManager,n=t.mapRepo,o=t.crsManager,i=t.l7LayerUtil;return function(t){function a(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(r=ape(this,a)).mapId=e,r.options=t,r.mapOptions=n,r._mapResourceInfo={},r._relatedInfo=t.relatedInfo||{},r._sprite="",r._spriteDatas={},r._appendLayers=!1,r._baseProjection="",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lpe(e,t)}(a,e),s=a,(u=[{key:"initializeMap",value:function(e,t){if(this._mapInfo=e,this._baseProjection=this._registerMapCRS(e),t){if(this.map=t,!o.isSameProjection(this.map,this._baseProjection))return void this.fire("projectionnotmatch");this._appendLayers=!0;var r=this._mapInfo.sprite;return r&&(this._sprite=r,this.map.addStyle({sprite:r})),void this._initLayers()}this._createMap()}},{key:"cleanLayers",value:function(e){var t,r,n,o,s;(t=a,r="cleanLayers",n=this,s=spe(upe(1&(o=3)?t.prototype:t),r,n),2&o&&"function"==typeof s?function(e){return s.apply(n,e)}:s)([e]);var u=i.getL7MarkerLayers();for(var l in u)i.removeL7MarkerLayer(l,this.map.$l7scene)}},{key:"clean",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.map){if(this._sourceListModel&&(this._sourceListModel.destroy(),this._sourceListModel=null),e){var t=this.map.$l7scene;t&&t.removeAllLayer(),this.map.remove()}this.map=null,this._legendList=[],this._mapResourceInfo={},this._sprite="",this._spriteDatas={},this.mapOptions={},this.options={}}}},{key:"copyLayer",value:function(){var e=ope(Zfe().m(function e(t){var r,n,o,a,s,u,l=arguments;return Zfe().w(function(e){for(;;)switch(e.n){case 0:if(r=l.length>1&&void 0!==l[1]?l[1]:{},(n=this._mapInfo.layers.find(function(e){return e.id===t}))&&!this._getLayerOnMap(r.id)){e.n=1;break}return e.a(2);case 1:if(o=r.id||"".concat(n.id,"_copy"),a=rpe(rpe(rpe({},n),r),{},{id:o}),!i.isL7Layer(a)){e.n=3;break}return s=[a],u=this._getAddL7LayersParams(s,this._mapInfo.sources,s),e.n=2,i.addL7Layers(u);case 2:e.n=4;break;case 3:"object"===epe(a.source)&&(this.map.addSource(a.id,a.source),a.source=a.id),this.map.addLayer(a);case 4:return e.a(2,a)}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"updateOverlayLayer",value:function(e,t,r){if("geojson"===e.renderSource.type){var n=e.renderSource.id,o={type:"FeatureCollection",features:t=_o({sourceId:n,features:t,mergeByField:r,map:this.map})};this.map.getSource(n).setData(o)}}},{key:"_createMap",value:function(){var e=this,t=this._mapInfo,o=t.name,i=void 0===o?"":o,a=t.center,s=void 0===a?new n.LngLat(0,0):a,u=t.zoom,l=void 0===u?0:u,c=t.bearing,f=void 0===c?0:c,p=t.pitch,h=void 0===p?0:p,y=t.minzoom,d=t.maxzoom,m=t.sprite,g=void 0===m?"":m;s=this.mapOptions.center||s,l=this.mapOptions.zoom||l,f=this.mapOptions.bearing||f,h=this.mapOptions.pitch||h;var v=this._getLabelFontFamily(),b=rpe(rpe({},this.mapOptions),{},{transformRequest:this._getTransformRequest(),container:this.options.target,crs:this._baseProjection,center:s,zoom:l,style:{sprite:g,name:i,version:8,sources:{},layers:[]},minZoom:y,maxZoom:d,bearing:f,pitch:h,localIdeographFontFamily:v||""});this.map=new r(b),this._sprite=g,this.fire("mapinitialized",{map:this.map}),this.map.on("load",function(){e._initLayers()})}},{key:"_getTransformRequest",value:function(){var e=this;return this.mapOptions.transformRequest?this.mapOptions.transformRequest:function(t,r){return"Tile"===r?rpe({url:t,credentials:e.options.iportalServiceProxyUrlPrefix&&t.indexOf(e.options.iportalServiceProxyUrlPrefix)>=0?"include":void 0},e.options.tileTransformRequest&&e.options.tileTransformRequest(t)):{url:t}}}},{key:"_registerMapCRS",value:function(e){var t=e.crs,r=t;return"object"===epe(t)&&(o.registerCRS(t),r=t.name),r}},{key:"_initLayers",value:function(){var e=ope(Zfe().m(function e(){var t=this;return Zfe().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this._getSpriteDatas();case 1:if("[object Object]"!==Object.prototype.toString.call(this.mapId)){e.n=2;break}return this.mapParams={title:this._mapInfo.name,description:this._relatedInfo.description},this._relatedInfo.projectInfo&&(this._mapResourceInfo=JSON.parse(this._relatedInfo.projectInfo)),this._createMapRelatedInfo(),this._addLayersToMap(),e.a(2);case 2:this._getMapRelatedInfo().then(function(e){t.mapParams={title:t._mapInfo.name,description:e.description},t._mapResourceInfo=JSON.parse(e.projectInfo),t._createMapRelatedInfo(),t._addLayersToMap()}).catch(function(e){t.fire("mapcreatefailed",{error:e}),console.error(e)});case 3:return e.a(2)}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_createMapRelatedInfo",value:function(){var e=this._mapInfo.glyphs;for(var t in e)this.map.style.addGlyphs(t,e[t])}},{key:"_getMapRelatedInfo",value:function(){var e=function(e){var t=e.url,r=e.server,n=e.excludePortalProxyUrl,o=e.credentialValue,i=e.credentialKey,a=-1===t.indexOf(".json")?"".concat(t,".json"):t,s="getUrlResource.json?url=";if(n&&r.indexOf(s)>-1){var u=r.split(s);u.length>1&&(a=u[0]+s+a)}return o&&i&&(a+="?"+i+"="+o),a}(Object.assign({url:"".concat(this.options.server,"web/maps/").concat(this.mapId)},this.options));return z.get(e,null,{withCredentials:this.options.withCredentials}).then(function(e){return e.json()})}},{key:"_addLayersToMap",value:function(){var e=ope(Zfe().m(function e(){var t,r,n,o,a,s,u,l,c=this;return Zfe().w(function(e){for(;;)switch(e.n){case 0:if(e.p=0,t=this._setUniqueId(this._mapInfo,this._mapResourceInfo),r=t.sources,n=t.layers,o=t.layerCatalog,a=t.catalogs,Object.assign(this._mapInfo,{sources:r,layers:n,metadata:Object.assign(this._mapInfo.metadata,{layerCatalog:o})}),Object.assign(this._mapResourceInfo,{catalogs:a}),n.filter(function(e){return!i.isL7Layer(e)}).forEach(function(e){e.metadata&&e.metadata.reused||(e.source&&!c.map.getSource(e.source)&&c.map.addSource(e.source,r[e.source]),"symbol"===e.type&&0===e.layout["text-z-offset"]&&delete e.layout["text-z-offset"],c.map.addLayer(e))}),!((s=n.filter(function(e){return i.isL7Layer(e)})).length>0)){e.n=1;break}return u=this._getAddL7LayersParams(n,r,s),e.n=1,i.addL7Layers(u);case 1:this._createLegendInfo(),this._sendMapToUser(),e.n=3;break;case 2:e.p=2,l=e.v,this.fire("mapcreatefailed",{error:l,map:this.map}),console.error(l);case 3:return e.a(2)}},e,this,[[0,2]])}));return function(){return e.apply(this,arguments)}}()},{key:"_getAddL7LayersParams",value:function(e,t,r){return{map:this.map,webMapInfo:rpe(rpe({},this._mapInfo),{},{layers:e,sources:t}),l7Layers:r,spriteDatas:this._spriteDatas,options:rpe(rpe({},this.options),{},{emitterEvent:this.fire.bind(this),transformRequest:this._getTransformRequest()})}}},{key:"_setUniqueId",value:function(e,t){var r=this._handleUnSupportedLayers(e),n=JSON.parse(JSON.stringify(e.layers)).filter(function(e){return!r.includes(e.id)}),o={},i={},a=[],s="_".concat(+new Date);for(var u in e.sources){var l=u;this.map.getSource(u)&&(l=u+s),i[l]=u,o[l]=e.sources[u];var c,f=Jfe(n);try{for(f.s();!(c=f.n()).done;){var p=c.value;p.source===u&&(p.source=l)}}catch(e){f.e(e)}finally{f.f()}}var h,y=Jfe(n);try{for(y.s();!(h=y.n()).done;){var d=h.value,m=d.id,g=this._getLayerOnMap(d.id);if(g)if(this.options.checkSameLayer&&Oo(o[d.source],this.map.getSource(g.source)))d.metadata=d.metadata||{},d.metadata.reused=!0,d.source=i[d.source];else{var v=d.id+s;d.id=v}a.push({originId:m,renderId:d.id,id:m})}}catch(e){y.e(e)}finally{y.f()}var b=JSON.parse(JSON.stringify(e.metadata.layerCatalog),"parts");this._updateLayerCatalogsId({loopData:JSON.parse(JSON.stringify(b)),catalogs:b,layerIdMapList:a,unspportedLayers:r});var A=JSON.parse(JSON.stringify(t.catalogs||[]));return this._updateLayerCatalogsId({loopData:JSON.parse(JSON.stringify(A)),catalogs:A,layerIdMapList:a,catalogTypeField:"catalogType",layerIdsField:"layersContent",unspportedLayers:r}),{sources:o,layers:n,layerCatalog:b,catalogs:A}}},{key:"_getLayerOnMap",value:function(e){var t=this.map.overlayLayersManager[e];if(t)return t;var r=i.getL7MarkerLayers()[e];return r||this.map.getLayer(e)}},{key:"_findLayerCatalog",value:function(e,t){var r,n=Jfe(e);try{for(n.s();!(r=n.n()).done;){var o=r.value;if(o.id===t)return o;if(o.children){var i=this._findLayerCatalog(o.children,t);if(i)return i}}}catch(e){n.e(e)}finally{n.f()}return null}},{key:"_deleteLayerCatalog",value:function(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(n.id===t){e.splice(r,1);break}n.children&&this._deleteLayerCatalog(n.children,t)}}},{key:"_updateLayerCatalogsId",value:function(e){var t=this,r=e.loopData,n=e.catalogs,o=e.layerIdMapList,i=e.catalogTypeField,a=void 0===i?"type":i,s=e.layerIdsField,u=void 0===s?"parts":s,l=e.unspportedLayers;r.forEach(function(e){var r=e.id,i=e.children;if("group"!==e[a]){var s=Po(e[u],r,o),c=o.find(function(e){return e.originId===s[0]});if(c){var f=t._findLayerCatalog(n,r);return f.id=c.renderId,f.reused=c.reused,void(f[u]&&(f[u]=t._renameLayerIdsContent(f[u],o)))}(l.includes(r)||s.some(function(e){return l.includes(e)}))&&t._deleteLayerCatalog(n,r)}else t._updateLayerCatalogsId({loopData:i,catalogs:n,layerIdMapList:o,catalogTypeField:a,layerIdsField:u,unspportedLayers:l})})}},{key:"_sendMapToUser",value:function(){var e=this;this._sourceListModel=new Kfe({map:this.map,appendLayers:this._appendLayers,mapInfo:this._mapInfo,mapResourceInfo:this._mapResourceInfo,legendList:this._legendList,l7LayerUtil:i}),this._sourceListModel.on({layerupdatechanged:function(t){e.fire("layerupdatechanged",t)}}),this.fire("mapcreatesucceeded",{map:this.map,mapparams:this.mapParams,layers:this.getSelfAppreciableLayers()})}},{key:"_renameLayerIdsContent",value:function(e,t){return e?e.map(function(e){return t.find(function(t){return t.originId===e}).renderId}):e}},{key:"_parseRendererStyleData",value:function(e){return e instanceof Array?e:[e]}},{key:"_getLabelFontFamily",value:function(){var e=["sans-serif"],t=this._mapInfo.layers;return t&&t.length>0&&t.forEach(function(t){var r=t.layout&&t.layout["text-font"]||[];e.push.apply(e,Yfe(r))}),e.join(",")}},{key:"_getSpriteDatas",value:function(){var e=this,t=this._sprite;if(t){var r=[];return"string"==typeof t?r.push(t):"object"===epe(t)&&Object.keys(t).forEach(function(e){r.push(t[e])}),Promise.all(r.map(function(t){return e._getSpriteData(t)})).then(function(t){t.forEach(function(t){e._spriteDatas=rpe(rpe({},e._spriteDatas),t)})})}}},{key:"_getSpriteData",value:function(e){var t=e.replace(/.+(web\/maps\/.+)/,"".concat(this.options.server,"$1"));return z.get(t,null,{withCredentials:this.options.withCredentials}).then(function(e){return e.json()})}},{key:"_createLegendInfo",value:function(){var e,t=this,r=this._mapResourceInfo.catalogs,n=Jfe(Io(void 0===r?[]:r,"catalogType"));try{var o=function(){var r,n=e.value,o=n.visualization||{},i=o.renderer,a=o.label;if(!i)return 1;var s,u=ko(n.layersContent,n.id,t._mapInfo.layers),l=t._mapInfo.sources[u.source];"clusterField"in l&&(s=l.clusterField);var c=Object.assign({},u,{title:n.title,themeField:s}),f=t._parseRendererStyleData(i);a&&(f.push(rpe(rpe({},a),{},{type:"text"})),a.symbolsContent&&a.symbolsContent.value.symbolId&&f.push(rpe(rpe({},a),{},{type:"symbol"}))),f[0].textField&&f[0].textField.value&&f.push(rpe(rpe({},f[0]),{},{type:"text"}));var p=f.reduce(function(e,r){var n=t._createLayerLegendList(c,r);return n&&e.push.apply(e,Yfe(n)),e},[]);(r=t._legendList).push.apply(r,Yfe(p))};for(n.s();!(e=n.n()).done;)o()}catch(e){n.e(e)}finally{n.f()}}},{key:"_getAliasKey",value:function(e,t){return"isoline3D"===e&&"dashArray"===t?"lineDasharray":t}},{key:"_transStyleKeys",value:function(e,t){var r=this;return t.map(function(t){return r._getAliasKey(e,t)})}},{key:"_transStyleSetting",value:function(e,t){for(var r in t){var n=this._getAliasKey(e,r);n!==r&&(t[n]=t[r])}}},{key:"_getLegendSimpleStyle",value:function(e,t){var r={};t&&t.filter(function(t){return e[t]&&"simple"===e[t].type}).forEach(function(t){("outlineColor"!==t||(e.antialias||{}).value)&&(r[t]=(e[t]||{}).value)});return r}},{key:"_getLegendRenderType",value:function(e){switch(e){case"text":return ppe.TEXT;case"circle":case"symbol":case"column":return ppe.POINT;case"heatGrid":case"heatHexagon":case"heat3DGrid":case"heat3DHexagon":return ppe.BUILTINSYMBOL;case"line":case"isoline3D":return ppe.LINE;case"fill":return ppe.FILL;case"fillExtrusion":return ppe.FILLEXTRUSION;case"animatePoint":return ppe.ANIMATEPOINT;case"line3D":case"animateLine":return ppe.ANIMATELINE;case"radarPoint":return ppe.RADARPOINT}}},{key:"_getLegendShape",value:function(e,t){switch(e){case"text":return hpe.TEXT;case"circle":case"symbol":return hpe.POINT;case"column":return{cylinder:hpe.POINT,triangleColumn:hpe.TRIANGLE,squareColumn:hpe.RECTANGLE,hexagonColumn:hpe.HEXAGON}[t.shape.value]||hpe.POINT;case"heatHexagon":case"heat3DHexagon":return hpe.HEXAGON;case"line":case"isoline3D":return hpe.LINE;case"fill":case"heatGrid":case"heat3DGrid":case"fillExtrusion":return hpe.RECTANGLE;case"animatePoint":return hpe.ANIMATEPOINT;case"animateLine":case"line3D":return hpe.ANIMATELINE;case"radarPoint":return hpe.RADARPOINT;case"heat":case"heat3D":return hpe.LINEGRADIENT}}},{key:"_isShowLegendSingleItem",value:function(e,t){return 0===e.length||1===e.length&&"color"===e[0]&&t}},{key:"_isWebsymbolById",value:function(e){return["line-","polygon-","point-"].some(function(t){return e&&e.startsWith(t)})}},{key:"_getSymbolSDFStatus",value:function(e,t){return!this._isWebsymbolById(e)&&(!!this._getIconById(e)||(t[e]&&t[e].sdf||!1))}},{key:"_isAllPicturePoint",value:function(e,t){var r=this;return"simple"===e.type?!this._getSymbolSDFStatus(e.value.symbolId,t):[].concat(Yfe(e.values),[{value:e.defaultValue}]).filter(function(e){return e.value.symbolId}).every(function(e){return!r._getSymbolSDFStatus(e.value.symbolId,t)})}},{key:"_isAllPictureSymbolSaved",value:function(e,t,r){var n=this;return!!t&&("point"===e?this._isAllPicturePoint(t,r):"simple"===t.type?!!this._getImageIdFromValue(t.value.style,Ape[e]).length:t.values.map(function(e){return e.value}).concat(t.defaultValue).every(function(t){return!!n._getImageIdFromValue(t.style,Ape[e]).length}))}},{key:"_getDataDrivenStyleKeys",value:function(e,t,r){return(cpe({},ppe.TEXT,mpe)[e]||t).filter(function(e){return r[e]&&"simple"!==r[e].type})}},{key:"_createLayerLegendList",value:function(e,t){var r=this,n=e.id,o=e.title,i="text"===t.type&&t.textField&&t.textField.value.replace(/^\{|\}$/g,""),a={themeField:e.themeField||t.field,layerId:n,layerTitle:o},s=t.type||e.type,u=this._getLegendRenderType(s),l=this._getLegendShape(s,t);if(["heat","heat3D"].includes(s)){var c=this._heatColorToGradient((e.paint||{})[{heat:"heatmap-color",heat3D:"heatmap-extrusion-color"}[s]]);return[rpe(rpe({},a),{},{styleGroup:[{style:{type:Epe.STYLE,shape:l,colors:c}}]})]}var f=gpe[u];if(f){var p=this._transStyleKeys(s,f);this._transStyleSetting(s,t);var h=this._getLegendSimpleStyle(t,p),y=this._parseLegendtyle({legendRenderType:u,customValue:h}),d=this._getDataDrivenStyleKeys(u,p,t);if(u===ppe.ANIMATELINE){var m="replace"===t.textureBlend.value,g=!(!t.symbolsContent.value||!t.symbolsContent.value.symbolId);m&&g&&(d=d.filter(function(e){return"color"!==e}))}else{var v=wpe[e.type];this._isAllPictureSymbolSaved(v,t.symbolsContent,this._spriteDatas)&&(d=d.filter(function(e){return"color"!==e}))}var b=t.color&&t.color.interpolateInfo&&"linear"===t.color.interpolateInfo.type,A=[];return this._isShowLegendSingleItem(d,b)&&A.push(rpe(rpe({},a),{},{styleGroup:[{fieldValue:i||o||n,style:rpe(rpe({},y),{},{shape:l})}]})),A.concat(d.map(function(e){var n=t[e],o=r._getSettingStyle(e,n.defaultValue,h),i=[],s=r._getSettingCustom(n),c=r._getSettingInterpolateInfo(n),f={legendRenderType:u,styleField:e,subStyleSetting:n,simpleStyle:h,defaultSetting:o,custom:s,interpolateInfo:c,shape:l};switch(r._getLegendStyleType({styleField:e,currentType:n.type,custom:s,interpolateInfo:c})){case bpe.LINEAR:i=r._parseLinearStyle(f);break;case bpe.RANGE:i=r._parseRangeStyle(f);break;case bpe.UNIQUE:i=r._parseUniqueStyle(f)}return rpe(rpe({},a),{},{themeField:(n.field||[])[0],styleField:e,styleGroup:i})}))}}},{key:"_heatColorToGradient",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[];return e.forEach(function(r,n){n>5&&n%2==0&&t.push({value:r,key:6===n?0:e[n-1]})}),t}},{key:"_getSettingCustom",value:function(e){var t=e.value,r=e.values;return this._isLinear(e)?t:r}},{key:"_getSettingInterpolateInfo",value:function(e){var t=e.interpolateInfo,r=void 0===t?{}:t;return this._isLinear(e)?{type:"linear"}:r}},{key:"_isLinear",value:function(e){return"linear"===e.type}},{key:"_getLegendStyleType",value:function(e){var t=e.styleField,r=e.currentType,n=e.custom,o=e.interpolateInfo;return["unique","linear"].includes(r)?this._isColorAttr(t)&&"linear"===o.type&&n.length>1?bpe.LINEAR:bpe.UNIQUE:bpe.RANGE}},{key:"_isColorAttr",value:function(e){return["color","textColor","outlineColor","textHaloColor"].includes(e)}},{key:"_parseLinearStyle",value:function(e){var t=e.shape,r=e.custom;return[{styleField:null,style:{type:Epe.STYLE,shape:t,colors:r}}]}},{key:"_parseUniqueStyle",value:function(e){var t=this,r=e.legendRenderType,n=e.styleField,o=e.simpleStyle,i=e.defaultSetting,a=e.custom,s=e.interpolateInfo,u=e.shape,l=a.map(function(e){var i=t._getSettingStyle(n,e.value,o),a=t._parseLegendtyle({legendRenderType:r,customValue:i});return{fieldValue:e.key,style:rpe(rpe({},a),{},{shape:u})}});if(!s.type||"custom"===s.type){var c=this._parseLegendtyle({legendRenderType:r,customValue:i});l.push({fieldValue:null,style:rpe(rpe({},c),{},{shape:u})})}return l}},{key:"_parseRangeStyle",value:function(e){var t=this,r=e.legendRenderType,n=e.styleField,o=e.simpleStyle,i=e.defaultSetting,a=e.custom,s=e.shape,u=a.map(function(e){var i=t._getSettingStyle(n,e.value,o),a=t._parseLegendtyle({legendRenderType:r,customValue:i});return{start:e.start,end:e.end,style:rpe(rpe({},a),{},{shape:s})}}),l=this._parseLegendtyle({legendRenderType:r,customValue:i});return u.push({start:null,end:null,style:rpe(rpe({},l),{},{shape:s})}),u}},{key:"_getSettingStyle",value:function(e,t,r){var n=Object.assign({},r);return n[e]=t,n}},{key:"_parseLegendtyle",value:function(e){var t=this,r=e.legendRenderType,n=e.customValue,o=rpe({},dpe[r]);Object.keys(o).forEach(function(e){var t=n[ype[e]||e];([ppe.FILL,ppe.FILLEXTRUSION].includes(r)||t)&&(o[e]=t)});var i=n.symbolsContent||{},a=i.symbolId,s=void 0===a?vpe[r]:a,u=i.style;switch(r){case ppe.TEXT:return rpe({type:Epe.STYLE,icon:"supermapol-icons-text-layer"},o);case ppe.POINT:return"BASE"===(this._getIconById(s)?"BASE":"SERVICE")?rpe({type:Epe.STYLE},o):this._getSpriteStyle(s,o);case ppe.BUILTINSYMBOL:return rpe({type:Epe.STYLE},o);case ppe.ANIMATEPOINT:case ppe.RADARPOINT:return rpe({type:Epe.STYLE},o);case ppe.LINE:case ppe.ANIMATELINE:u=u||[];var l=Object.assign({},n);delete l.symbolsContent;var c=rpe(rpe({type:Epe.STYLE},l),{},{width:Spe}),f=rpe({},dpe.LINE),p=u instanceof Array?u:[u],h=p.some(function(e){return!!t._getImageIdByLegendType(e,r)}),y=p[0];if(h){var d=this._getImageIdByLegendType(y,r),m=rpe(rpe(rpe({},o),l),{},{height:o.width,width:Spe});return r===ppe.ANIMATELINE&&"replace"===l.textureBlend&&(m.backgroundColor="transparent"),this._getSpriteStyle(d,m)}if(!n.symbolsContent||r===ppe.ANIMATELINE&&!h)return rpe(rpe({},c),{},{height:n.width||f.height,lineWidth:n.width||f.width,color:n.color||f.backgroundColor});if(n.symbolsContent){var g=this._getLineWidth(p),v=p.map(function(e){return t._transformLineStyle({oldWidth:g,symbol:e,defaultStyle:f,customValue:n})});return rpe(rpe({},c),{},{lineStyles:v})}return;case ppe.FILL:case ppe.FILLEXTRUSION:var b=o.backgroundColor,A=((u||{}).paint||{})["fill-color"],w=rpe({},dpe.FILL);return b||Object.assign(o,{backgroundColor:A}),Object.keys(o).forEach(function(e){["backgroundColor","width","height","opacity"].includes(e)&&!o[e]&&(o[e]=w[e])}),o.outlineColor&&Object.assign(o,{outline:w.outline,marginLeft:"1px"}),this._spriteDatas[s]?this._getSpriteStyle(s,rpe(rpe({},o),{},{backgroundColor:"transparent"})):rpe({type:Epe.STYLE},o)}}},{key:"_getIconById",value:function(e){if("image"!==(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"svg")){return[{id:"circle",name:"circle"}].find(function(t){return t.id===e})}}},{key:"_getImageIdFromValue",value:function(e,t){var r=Array.isArray(e)?e:[e],n={symbol:"icon-image",line:"line-pattern",fill:"fill-pattern","fill-extrusion":"fill-pattern"}[t];return"symbol"===t?r.map(function(e){return e.layout&&e.layout[n]}).filter(function(e){return e}):r.map(function(e){return e.paint&&e.paint[n]}).filter(function(e){return e})}},{key:"_getImageIdByLegendType",value:function(e,t){var r={ANIMATELINE:Ape.point,LINE:Ape.line}[t],n=e.paint||{};return r===Ape.line?n["line-pattern"]:r===Ape.polygon?n["fill-pattern"]:(e.layout||{})["icon-image"]}},{key:"_getSpriteStyle",value:function(e,t){if(this._spriteDatas[e]){var r=this._spriteDatas[e];if(r.width&&r.height)return rpe(rpe({type:Epe.IMAGE,sprite:r},t),{},{url:"string"==typeof this._sprite?"".concat(this._sprite,".png"):""})}}},{key:"_transformLineStyle",value:function(e){var t,r=e.oldWidth,n=e.symbol,o=e.defaultStyle,i=e.customValue,a=n.paint,s=void 0===a?{}:a;return void 0!==i.height&&(t=this._updateSingleStyleByWidth(r,i.height,n)),{lineWidth:((t||{}).paint||{})[Cpe]||s[Cpe]||o.height,opacity:i.opacity||s["line-opacity"]||o.opacity,color:i.color||s["line-color"]||o.backgroundColor,lineDash:s["line-dasharray"]||[],lineOffset:s["line-offset"]||0}}},{key:"_updateSingleStyleByWidth",value:function(e,t,r){if(e===t)return r;var n=(r||{}).paint||{};if(0===e)return{paint:Object.assign({},n,{"line-width":Number(t.toFixed(2))})};var o=t/e,i=n["line-width"],a=n["line-offset"]||0,s=n["line-dasharray"]||[],u=this._updateDash(s,o);return{paint:Object.assign({},n,{"line-width":Number((i*o).toFixed(2)),"line-offset":Number((a*o).toFixed(2)),"line-dasharray":u&&u.map(function(e){return Number(e.toFixed(2))})})}}},{key:"_updateDash",value:function(e,t){if(e&&0!==e.length)return e.map(function(e){return e/t})}},{key:"_getLineWidth",value:function(e){return e instanceof Array?this._getWholeWidth(e):(e.paint||{})[Cpe]||0}},{key:"_getWholeWidth",value:function(e){var t,r;return e.forEach(function(e){var n=(e||{}).paint||{},o=n["line-width"],i=n["line-offset"]||0,a=i+o/2,s=i-o/2;(a>t||void 0===t)&&(t=a),(s<r||void 0===r)&&(r=s)}),Number((t-r).toFixed(2))}},{key:"_handleUnSupportedLayers",value:function(e){var t=[],r=e.interaction;return r&&r.drill&&(this.fire("layercreatefailed",{error:"drill ".concat("layer are not supported yet"),map:this.map,error_code:"DRILL_LAYERS_NOT_SUPPORTED"}),r.drill.forEach(function(e){var r=e.layerIds||e.layers.reduce(function(e,t){return e.concat(t.layerIds)},[]);t.push.apply(t,Yfe(r))})),t}}])&&ipe(s.prototype,u),l&&ipe(s,l),Object.defineProperty(s,"prototype",{writable:!1}),s;var s,u,l}()}function Ipe(e){"@babel/helpers - typeof";return(Ipe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ope(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return xpe(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?xpe(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function xpe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Ppe(e,t,r){return t=kpe(t),function(e,t){if(t&&("object"==Ipe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],kpe(e).constructor):t.apply(e,r))}function kpe(e){return(kpe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Tpe(e,t){return(Tpe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function jpe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Bpe(n.key),n)}}function Mpe(e,t,r){return t&&jpe(e.prototype,t),r&&jpe(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Bpe(e){var t=function(e,t){if("object"!=Ipe(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Ipe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ipe(t)?t:t+""}function Npe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Rpe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mpe(function e(){Npe(this,e)});return function(t){function r(){var e;return Npe(this,r),(e=Ppe(this,r))._sourceListModel=null,e._legendList=[],e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Tpe(e,t)}(r,e),Mpe(r,[{key:"initializeMap",value:function(){throw new Error("initializeMap is not implemented")}},{key:"clean",value:function(){throw new Error("clean is not implemented")}},{key:"getLayerCatalog",value:function(){return this._sourceListModel&&this._sourceListModel.getLayerCatalog()||[]}},{key:"getLayers",value:function(){return this._sourceListModel&&this._sourceListModel.getLayers()||[]}},{key:"getLegends",value:function(){return this._legendList}},{key:"getSelfAppreciableLayers",value:function(){var e;return this._sourceListModel&&(e=this._sourceListModel).getSelfLayers.apply(e,arguments)||[]}},{key:"setLayersVisible",value:function(){var e;this._sourceListModel&&(e=this._sourceListModel).setLayersVisible.apply(e,arguments)}},{key:"toggleLayerVisible",value:function(){var e;this._sourceListModel&&(e=this._sourceListModel).toggleLayerVisible.apply(e,arguments)}},{key:"rectifyLayersOrder",value:function(e,t){for(var r=this,n=e.filter(function(e){return!e.reused}).reduce(function(e,t){return e.concat(t.renderLayers)},[]).filter(function(e){return!!r.map.getLayer(e)}),o=n.length-1;o>-1;o--){var i=n[o],a=n.slice(o+1),s=a.find(function(e){return r.map.style._layers[e]});a.length||(s=t),this.map.moveLayer(i,s)}return n}},{key:"echartsLayerResize",value:function(){}},{key:"updateOverlayLayer",value:function(){}},{key:"copyLayer",value:function(){}},{key:"cleanLayers",value:function(e){var t,r=this,n=[],o=Ope(e);try{var i=function(){var e=t.value;e.renderLayers.forEach(function(t){var o=r.map.getLayer(t);o&&(r.map.removeLayer(t),!e.l7Layer&&o.source&&"string"==typeof o.source&&n.push(o.source))}),r.map.getSource(e.renderSource.id)&&!e.l7Layer&&n.push(e.renderSource.id)};for(o.s();!(t=o.n()).done;)i()}catch(e){o.e(e)}finally{o.f()}Array.from(new Set(n)).forEach(function(e){r.map.removeSource(e)})}}])}()}function Lpe(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return Dpe(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Dpe(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function Dpe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Fpe(e){"@babel/helpers - typeof";return(Fpe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qpe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Gpe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Qpe(Object(r),!0).forEach(function(t){Upe(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qpe(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Upe(e,t,r){return(t=Hpe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zpe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Hpe(n.key),n)}}function Hpe(e){var t=function(e,t){if("object"!=Fpe(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Fpe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Fpe(t)?t:t+""}function qpe(e,t,r){return t=Vpe(t),function(e,t){if(t&&("object"==Fpe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],Vpe(e).constructor):t.apply(e,r))}function Vpe(e){return(Vpe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Kpe(e,t){return(Kpe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ype(e,t){var r=t.MapManager,n=t.crsManager;return function(t){function o(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=qpe(this,o)).options=r,t.mapOptions=n,t.webMapService=new dce(e,r),t._layerIdRenameMapList=[],t._appendLayers=!1,t._baseProjection="",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Kpe(e,t)}(o,e),i=o,(a=[{key:"initializeMap",value:function(e,t){var o=this;if(this._baseProjection=this._registerMapCRS(this.mapOptions),t)return n.isSameProjection(t,this._baseProjection)?(this._appendLayers=!0,this.map=t,void this._addLayersToMap()):void this.fire("projectionnotmatch");this.mapOptions.container=this.options.target,this.mapOptions.transformRequest||(this.mapOptions.transformRequest=function(e,t){var r="";if("string"==typeof o.options.proxy){var n="data";"Tile"===t&&(n="image"),r=o.webMapService.handleProxy(n)}return Gpe({url:r?"".concat(r).concat(encodeURIComponent(e)):e,credentials:o.webMapService.handleWithCredentials(r,e,o.options.withCredentials||!1)?"include":void 0},o.options.tileTransformRequest&&o.options.tileTransformRequest(e))}),this.mapOptions.center=this.mapOptions.center||[0,0],this.mapOptions.zoom=this.mapOptions.zoom||0;var i=0;Object.prototype.hasOwnProperty.call(this.mapOptions,"fadeDuration")&&(i=this.mapOptions.fadeDuration),this.map=new r(Gpe(Gpe({},this.mapOptions),{},{fadeDuration:i,crs:this._baseProjection})),this.fire("mapinitialized",{map:this.map}),this.map.on("load",function(){o._sendMapToUser()})}},{key:"clean",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.map&&(this._sourceListModel&&(this._sourceListModel.destroy(),this._sourceListModel=null),e&&this.map.remove(),this.map=null)}},{key:"_registerMapCRS",value:function(e){var t=e.crs,r=t;if("object"===Fpe(t)&&t.epsgCode){var o=t.epsgCode,i=t.WKT,a=t.extent,s=t.unit;n.registerCRS({name:o,wkt:i,extent:a,unit:s}),r=o}return r}},{key:"_addLayersToMap",value:function(){var e=this,t=this._setUniqueId(this.mapOptions.style),r=t.sources,n=t.layers,o=t.layerIdMapList;n.forEach(function(t){var n=o.find(function(e){return e.renderId===t.id});n&&n.reused||(t.source&&!e.map.getSource(t.source)&&e.map.addSource(t.source,r[t.source]),e.map.addLayer(t))}),Object.assign(this.mapOptions.style,{layers:n,sources:r}),this._layerIdRenameMapList=o,this._sendMapToUser()}},{key:"_setUniqueId",value:function(e){var t=JSON.parse(JSON.stringify(e.layers)),r={},n={},o=[],i="_".concat(+new Date);for(var a in e.sources){var s=a;this.map.getSource(a)&&(s=a+i),n[s]=a,r[s]=e.sources[a];var u,l=Lpe(t);try{for(l.s();!(u=l.n()).done;){var c=u.value;c.source===a&&(c.source=s)}}catch(e){l.e(e)}finally{l.f()}}var f,p=Lpe(t);try{for(p.s();!(f=p.n()).done;){var h=f.value,y=h.id,d=void 0,m=this.map.getLayer(h.id);if(m)if(this.options.checkSameLayer&&Oo(r[h.source],this.map.getStyle().sources[m.source]))d=!0,h.source=n[h.source];else{var g=h.id+i;h.id=g}o.push({originId:y,renderId:h.id,reused:d})}}catch(e){p.e(e)}finally{p.f()}return{sources:r,layers:t,layerIdMapList:o}}},{key:"_generateAppreciableLayers",value:function(){var e=this;return this.mapOptions.style.layers.reduce(function(t,r){var n=xo(r["source-layer"]?r:Gpe(Gpe({},r),{},{layerInfo:{id:r.id}})),o=t.find(function(e){return e.id===n});if(o)o.renderLayers.push(r.id);else{var i=e._layerIdRenameMapList.find(function(e){return e.renderId===r.id});t.push(Gpe(Gpe({},r),{},{id:n,name:i&&i.originId,renderLayers:[r.id],reused:i&&i.reused}))}return t},[])}},{key:"_sendMapToUser",value:function(){var e=this,t=this._generateAppreciableLayers();this._sourceListModel=new ofe({map:this.map,layers:t,appendLayers:this._appendLayers}),this._sourceListModel.on({layerupdatechanged:function(t){e.fire("layerupdatechanged",t)}}),this.fire("mapcreatesucceeded",{map:this.map,mapparams:{title:this.mapOptions.name,description:""},layers:this.getSelfAppreciableLayers()})}}])&&zpe(i.prototype,a),s&&zpe(i,s),Object.defineProperty(i,"prototype",{writable:!1}),i;var i,a,s}()}var Jpe=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8],"doc":"Style specification version number. Must be 8.","example":8},"fragment":{"type":"boolean","doc":"Indicates that a style is a fragment style.","example":true},"name":{"type":"string","doc":"A human-readable name for the style.","example":"Bright"},"metadata":{"type":"*","doc":"Arbitrary properties useful to track with the stylesheet, but do not influence rendering. Properties should be prefixed to avoid collisions, like \'mapbox:\'."},"center":{"type":"array","value":"number","doc":"Default map center in longitude and latitude. The style center will be used only if the map has not been positioned by other means (e.g. map options or user interaction).","example":[-73.9749,40.7736]},"zoom":{"type":"number","doc":"Default zoom level. The style zoom will be used only if the map has not been positioned by other means (e.g. map options or user interaction).","example":12.5},"bearing":{"type":"number","default":0,"period":360,"units":"degrees","doc":"Default bearing, in degrees. The bearing is the compass direction that is \\"up\\"; for example, a bearing of 90Â° orients the map so that east is up. This value will be used only if the map has not been positioned by other means (e.g. map options or user interaction).","example":29},"pitch":{"type":"number","default":0,"units":"degrees","doc":"Default pitch, in degrees. Zero is perpendicular to the surface, for a look straight down at the map, while a greater value like 60 looks ahead towards the horizon. The style pitch will be used only if the map has not been positioned by other means (e.g. map options or user interaction).","example":50},"light":{"type":"light","doc":"The global light source. Note: This API is deprecated. Prefer using `flat` light type instead in the `lights` API.","example":{"anchor":"viewport","color":"white","intensity":0.4}},"lights":{"required":false,"type":"array","value":"light-3d","doc":"Array of light sources affecting the whole map and the default for 3D style, mutually exclusive with the light property","example":[{"id":"environment","type":"ambient","properties":{"color":"rgba(255.0, 0.0, 0.0, 1.0)","intensity":0.4}},{"id":"sun_light","type":"directional","properties":{"color":"rgba(255.0, 0.0, 0.0, 1.0)","intensity":0.4,"direction":[200,40],"cast-shadows":true,"shadow-intensity":0.2}}],"sdk-support":{"basic functionality":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}}},"terrain":{"type":"terrain","optional":true,"doc":"A global modifier that elevates layers and markers based on a DEM data source."},"fog":{"type":"fog","doc":"A global effect that fades layers and markers based on their distance to the camera. The fog can be used to approximate the effect of atmosphere on distant objects and enhance the depth perception of the map when used with terrain or 3D features. Note: fog is renamed to atmosphere in the Android and iOS SDKs and planned to be changed in GL-JS v.3.0.0."},"snow":{"type":"snow","doc":"Global precipitation particle-based snow. Having snow present in the style forces constant map repaint mode","experimental":true},"rain":{"type":"rain","doc":"Global precipitation particle-based rain effect. Having rain present in the style forces constant map repaint mode.","experimental":true},"camera":{"type":"camera","doc":"Global setting to control additional camera intrinsics parameters, e.g. projection type (perspective / orthographic)."},"color-theme":{"type":"colorTheme","doc":"A global modifier for the colors of the style."},"indoor":{"type":"indoor","experimental":true,"doc":"Controls the behaviour of indoor features."},"imports":{"type":"array","value":"import","doc":"Imports other styles into this style.","sdk-support":{"basic functionality":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}}},"iconsets":{"experimental":true,"type":"iconsets","doc":"A collection of icon sets","sdk-support":{"basic functionality":{"js":"3.11.0","android":"11.11.0","ios":"11.11.0"}}},"schema":{"type":"schema","doc":"Definition of the schema for configuration options.","sdk-support":{"basic functionality":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}}},"sources":{"required":true,"type":"sources","doc":"Data source specifications.","example":{"mapbox-streets":{"type":"vector","url":"mapbox://mapbox.mapbox-streets-v6"}}},"sprite":{"type":"string","doc":"A base URL for retrieving the sprite image and metadata. The extensions `.png`, `.json` and scale factor `@2x.png` will be automatically appended. This property is required if any layer uses the `background-pattern`, `fill-pattern`, `line-pattern`, `fill-extrusion-pattern`, or `icon-image` properties. The URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).","example":"mapbox://sprites/mapbox/bright-v8"},"glyphs":{"type":"string","doc":"A URL template for loading signed-distance-field glyph sets in PBF format. The URL must include `{fontstack}` and `{range}` tokens. This property is required if any layer uses the `text-field` layout property. The URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).","default":"mapbox://fonts/mapbox/{fontstack}/{range}.pbf","example":"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},"transition":{"type":"transition","doc":"A global transition definition to use as a default across properties, to be used for timing transitions between one value and the next when no property-specific transition is set. Collision-based symbol fading is controlled independently of the style\'s `transition` property.","example":{"duration":300,"delay":0}},"projection":{"type":"projection","doc":"The projection the map should be rendered in. Supported projections are Mercator, Globe, Albers, Equal Earth, Equirectangular (WGS84), Lambert conformal conic, Natural Earth, and Winkel Tripel. Terrain, sky and fog are supported by only Mercator and globe. CustomLayerInterface is not supported outside of Mercator.","example":{"name":"albers","center":[-154,50],"parallels":[55,65]}},"layers":{"required":true,"type":"array","value":"layer","doc":"Layers will be drawn in the order of this array.","example":[{"id":"water","source":"mapbox-streets","source-layer":"water","type":"fill","paint":{"fill-color":"#00ffff"}}]},"models":{"type":"models","doc":"Specification of models used in the style.","example":{"spruce1-lod0":"asset://spruce1-lod0.glb","spruce1-lod1":"asset://spruce1-lod1.glb","spruce1-lod2":"asset://spruce1-lod2.glb"}},"featuresets":{"experimental":true,"type":"featuresets","doc":"Defines sets of features for querying, interaction, and state management on the map, referencing individual layers or subsets of layers within the map\'s style.","sdk-support":{"basic functionality":{"js":"3.9.0","android":"11.9.0","ios":"11.9.0"}},"example":{"poi":{"selectors":[{"layer":"poi","properties":{"type":["get","type"],"name":["get","name"],"brand":"ABC"}}]}}}},"featuresets":{"experimental":true,"*":{"type":"featureset","doc":"Defines a combined set of features from one or more underlying layers within the current style. Features in a style featureset can be queried, interacted with, and their states can be queried and updated."}},"featureset":{"experimental":true,"metadata":{"experimental":true,"type":"*","doc":"Arbitrary properties useful to track with the stylesheet, but do not influence rendering. Properties should be prefixed to avoid collisions, like \'mapbox:\'."},"selectors":{"experimental":true,"type":"array","value":"selector","doc":"A collection of categorized selectors."}},"selector":{"experimental":true,"layer":{"experimental":true,"type":"string","doc":"The ID of a layer that exists in the current style.","required":true},"properties":{"experimental":true,"type":"selectorProperty","required":false,"doc":"Properties accessible to the end user through queried feautures. If properties are empty, no feature properties are exposed. If undefined, all original feature properties will be accessible."},"featureNamespace":{"experimental":true,"type":"string","required":false,"doc":"An optional field that represents the feature namespace defined by the selector within a featureset to which this feature belongs. If the underlying source is the same for multiple selectors within a featureset, the same featureNamespace should be used across those selectors."},"_uniqueFeatureID":{"experimental":true,"type":"boolean","private":true,"required":false,"doc":"Internal flag used for standard style, in case multiple features sharing the same featureId, only one feature will be returned for feature query."}},"selectorProperty":{"experimental":true,"*":{"experimental":true,"type":"*","doc":"The value of the property. It can be an expression that generates the returned value from the feature, or a constant value specifying the returned value."}},"model":{"type":"string","doc":"A URL to a model resource. Supported protocols are `http:`, `https:`, and `mapbox://<Model ID>`.","required":true},"import":{"id":{"type":"string","doc":"Unique import name.","required":true},"url":{"type":"string","doc":"The URL of the style.","required":true},"config":{"type":"config","doc":"Configuration values for the imported style\'s options."},"data":{"type":"$root","doc":"The inlined style that must correspond to the contents of the specified URL."},"color-theme":{"type":"colorTheme","optional":true,"doc":"If specified, it overrides the color-theme of the imported style."}},"config":{"*":{"type":"*","doc":"Value of the imported style\'s configuration option."}},"schema":{"*":{"type":"option","doc":"Specification of a configuration option."}},"option":{"default":{"type":"*","doc":"Default configuration value for this option.","property-type":"data-constant","expression":{"interpolated":false},"required":true},"type":{"type":"enum","doc":"The type this value is coerced to after evaluating the expression. If unspecified, the result is returned as is and is not validated.","values":{"string":{"doc":"The result will be coerced to a string."},"number":{"doc":"The result will be coerced to a number."},"boolean":{"doc":"The result will be coerced to a boolean."},"color":{"doc":"The result will be coerced to a color."}}},"array":{"type":"boolean","doc":"If true, this option is returned as an array"},"minValue":{"type":"number","doc":"If this option is a number, this specifies the minimum allowed value. Values lower than this will be clamped to the minimum value."},"maxValue":{"type":"number","doc":"If this option is a number, this specifies the maximum allowed value. Values higher than this will be clamped to the maximum value."},"stepValue":{"type":"number","doc":"If this option is a number, this specifies the increment between allowed values. Values will be rounded towards the nearest allowed value."},"values":{"type":"array","value":"*","doc":"If this option is specified, the result must be one of the given values. Otherwise, the default value is used instead."},"metadata":{"type":"*","doc":"Arbitrary properties useful to track with the layer, but do not influence rendering. Properties should be prefixed to avoid collisions, like \'mapbox:\'."}},"models":{"*":{"type":"model","doc":"A URL to a model resource. Supported protocols are `http:`, `https:`, and `mapbox://<Model ID>`."}},"light-3d":{"id":{"type":"string","doc":"Unique light name.","required":true},"properties":{"type":"properties","doc":"Properties of the light."},"type":{"type":"enum","doc":"Type of the light to be added","values":{"ambient":{"doc":"An indirect light affecting all objects in the map adding a constant amount of light on them. It has no explicit direction and cannot cast shadows.","sdk-support":{"basic functionality":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}}},"directional":{"doc":"A light that has a direction and is located at infinite distance, so its rays are parallel. It simulates the sun light and can cast shadows.","sdk-support":{"basic functionality":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}}},"flat":{"doc":"A global directional light source which is only applied on 3D and hillshade layers. Using this type disables other light sources.","sdk-support":{"basic functionality":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}}}}}},"properties":["properties_light_directional","properties_light_ambient","properties_light_flat"],"properties_light_directional":{"direction":{"type":"array","default":[210,30],"minimum":[0,0],"maximum":[360,90],"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"doc":"Direction of the light source specified as [a azimuthal angle, p polar angle] where a indicates the azimuthal angle of the light relative to north (in degrees and proceeding clockwise), and p indicates polar angle of the light (from 0Â°, directly above, to 180Â°, directly below).","example":[90,40],"sdk-support":{"basic functionality":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"use-theme":true,"transition":true,"doc":"Color of the directional light.","sdk-support":{"basic functionality":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}}},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"doc":"A multiplier for the color of the directional light.","sdk-support":{"basic functionality":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}}},"cast-shadows":{"type":"boolean","default":false,"doc":"Enable/Disable shadow casting for this light","transition":false,"property-type":"data-constant","sdk-support":{"basic functionality":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}}},"shadow-quality":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":false,"parameters":["zoom"]},"transition":false,"doc":"Determines the quality of the shadows on the map. A value of 1 ensures the highest quality and is the default value.","sdk-support":{"basic functionality":{"android":"11.9.0","ios":"11.9.0"}},"experimental":true},"shadow-intensity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"doc":"Determines the shadow strength, affecting the shadow receiver surfaces final color. Values near 0.0 reduce the shadow contribution to the final color. Values near to 1.0 make occluded surfaces receive almost no directional light. Designed to be used mostly for transitioning between values 0 and 1.","transition":true,"sdk-support":{"basic functionality":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}}}},"properties_light_ambient":{"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"use-theme":true,"transition":true,"doc":"Color of the ambient light.","sdk-support":{"basic functionality":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}}},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"doc":"A multiplier for the color of the ambient light.","sdk-support":{"basic functionality":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}}}},"properties_light_flat":{"anchor":{"type":"enum","default":"viewport","values":{"map":{"doc":"The position of the light source is aligned to the rotation of the map."},"viewport":{"doc":"The position of the light source is aligned to the rotation of the viewport. If terrain is enabled, performance regressions may occur in certain scenarios, particularly on lower-end hardware. Ensure that you test your target scenarios on the appropriate hardware to verify performance."}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"doc":"Whether extruded geometries are lit relative to the map or viewport.","example":"map","sdk-support":{"basic functionality":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"doc":"Position of the light source relative to lit (extruded) geometries, in [r radial coordinate, a azimuthal angle, p polar angle] where r indicates the distance from the center of the base of an object to its light, a indicates the position of the light relative to 0Â° (0Â° when `light.anchor` is set to `viewport` corresponds to the top of the viewport, or 0Â° when `light.anchor` is set to `map` corresponds to due north, and degrees proceed clockwise), and p indicates the height of the light (from 0Â°, directly above, to 180Â°, directly below).","example":[1.5,90,80],"sdk-support":{"basic functionality":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"use-theme":true,"transition":true,"doc":"Color tint for lighting extruded geometries.","sdk-support":{"basic functionality":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}}},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"doc":"Intensity of lighting (on a scale from 0 to 1). Higher numbers will present as more extreme contrast.","sdk-support":{"basic functionality":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}}}},"iconsets":{"*":{"type":"iconset","doc":"Specification of an icon set. For sprite icon set, a URL must be provided. For `raster-array` source icon set, a source name must be provided."}},"iconset":["iconset_sprite","iconset_source"],"iconset_sprite":{"type":{"required":true,"type":"enum","values":{"sprite":{"doc":"A sprite icon set."}},"doc":"The type of the icon set."},"url":{"required":true,"type":"string","doc":"A base URL for retrieving the icon set and metadata. The extension `.pbf` will be automatically appended. The URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).","example":"mapbox://sprites/mapbox/bright"}},"iconset_source":{"type":{"required":true,"type":"enum","values":{"source":{"doc":"A source icon set."}},"doc":"The type of the icon set."},"source":{"required":true,"type":"string","doc":"Name of a source of `raster-array` type to be used for the icon set."}},"sources":{"*":{"type":"source","doc":"Specification of a data source. For vector and raster sources, either TileJSON or a URL to a TileJSON must be provided. For image and video sources, a URL must be provided. For GeoJSON sources, a URL or inline GeoJSON must be provided."}},"source":["source_vector","source_raster","source_raster_dem","source_raster_array","source_geojson","source_video","source_image","source_model"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{"doc":"A vector tile source."}},"doc":"The type of the source."},"url":{"type":"string","doc":"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`. Required if `tiles` is not provided."},"tiles":{"type":"array","value":"string","doc":"An array of one or more tile source URLs, as in the TileJSON spec. Required if `url` is not provided."},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129],"doc":"An array containing the longitude and latitude of the southwest and northeast corners of the source\'s bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},"extra_bounds":{"type":"array","value":{"type":"array","value":"number","length":4,"doc":"An array containing the longitude and latitude of the southwest and northeast corners of the source\'s bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`."},"experimental":true,"doc":"An array of additional discrete geographic regions where tiles are available. When used alongside the `bounds` property, these regions act as an additional filter - Mapbox GL will only request tiles that are both within the `bounds` and any of the regions defined in `extra_bounds`. When used independently (without `bounds`), Mapbox GL will request tiles that fall within any of the regions in `extra_bounds`. This allows for more fine-grained control over tile requests, particularly when dealing with sparse data coverage."},"scheme":{"type":"enum","values":{"xyz":{"doc":"Slippy map tilenames scheme."},"tms":{"doc":"OSGeo spec scheme."}},"default":"xyz","doc":"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},"minzoom":{"type":"number","default":0,"doc":"Minimum zoom level for which tiles are available, as in the TileJSON spec."},"maxzoom":{"type":"number","default":22,"doc":"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},"attribution":{"type":"string","doc":"Contains an attribution to be displayed when the map is shown to a user."},"promoteId":{"type":"promoteId","doc":"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`. If specified as a string for a vector tile source, the same property is used across all its source layers. If specified as an object only specified source layers will have id overriden, others will fallback to original feature id"},"volatile":{"type":"boolean","default":false,"doc":"A setting to determine whether a source\'s tiles are cached locally.","sdk-support":{"basic functionality":{"android":"9.3.0","ios":"5.10.0"}}},"*":{"type":"*","doc":"Other keys to configure the data source."}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{"doc":"A raster tile source."}},"doc":"The type of the source."},"url":{"type":"string","doc":"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`. Required if `tiles` is not provided."},"tiles":{"type":"array","value":"string","doc":"An array of one or more tile source URLs, as in the TileJSON spec. Required if `url` is not provided."},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129],"doc":"An array containing the longitude and latitude of the southwest and northeast corners of the source\'s bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},"extra_bounds":{"type":"array","value":{"type":"array","value":"number","length":4,"doc":"An array containing the longitude and latitude of the southwest and northeast corners of the source\'s bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`."},"experimental":true,"doc":"An array of additional discrete geographic regions where tiles are available. When used alongside the `bounds` property, these regions act as an additional filter - Mapbox GL will only request tiles that are both within the `bounds` and any of the regions defined in `extra_bounds`. When used independently (without `bounds`), Mapbox GL will request tiles that fall within any of the regions in `extra_bounds`. This allows for more fine-grained control over tile requests, particularly when dealing with sparse data coverage."},"minzoom":{"type":"number","default":0,"doc":"Minimum zoom level for which tiles are available, as in the TileJSON spec."},"maxzoom":{"type":"number","default":22,"doc":"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},"tileSize":{"type":"number","default":512,"units":"pixels","doc":"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},"scheme":{"type":"enum","values":{"xyz":{"doc":"Slippy map tilenames scheme."},"tms":{"doc":"OSGeo spec scheme."}},"default":"xyz","doc":"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},"attribution":{"type":"string","doc":"Contains an attribution to be displayed when the map is shown to a user."},"volatile":{"type":"boolean","default":false,"doc":"A setting to determine whether a source\'s tiles are cached locally.","sdk-support":{"basic functionality":{"android":"9.3.0","ios":"5.10.0"}}},"*":{"type":"*","doc":"Other keys to configure the data source."}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{"doc":"A RGB-encoded raster DEM source"}},"doc":"The type of the source."},"url":{"type":"string","doc":"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`. Required if `tiles` is not provided."},"tiles":{"type":"array","value":"string","doc":"An array of one or more tile source URLs, as in the TileJSON spec. Required if `url` is not provided."},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129],"doc":"An array containing the longitude and latitude of the southwest and northeast corners of the source\'s bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},"extra_bounds":{"type":"array","value":{"type":"array","value":"number","length":4,"doc":"An array containing the longitude and latitude of the southwest and northeast corners of the source\'s bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`."},"experimental":true,"doc":"An array of additional discrete geographic regions where tiles are available. When used alongside the `bounds` property, these regions act as an additional filter - Mapbox GL will only request tiles that are both within the `bounds` and any of the regions defined in `extra_bounds`. When used independently (without `bounds`), Mapbox GL will request tiles that fall within any of the regions in `extra_bounds`. This allows for more fine-grained control over tile requests, particularly when dealing with sparse data coverage."},"minzoom":{"type":"number","default":0,"doc":"Minimum zoom level for which tiles are available, as in the TileJSON spec."},"maxzoom":{"type":"number","default":22,"doc":"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},"tileSize":{"type":"number","default":512,"units":"pixels","doc":"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},"attribution":{"type":"string","doc":"Contains an attribution to be displayed when the map is shown to a user."},"encoding":{"type":"enum","values":{"terrarium":{"doc":"Terrarium format PNG tiles. See https://aws.amazon.com/es/public-datasets/terrain/ for more info."},"mapbox":{"doc":"Mapbox Terrain RGB tiles. See https://www.mapbox.com/help/access-elevation-data/#mapbox-terrain-rgb for more info."}},"default":"mapbox","doc":"The encoding used by this source. Mapbox Terrain RGB is used by default"},"volatile":{"type":"boolean","default":false,"doc":"A setting to determine whether a source\'s tiles are cached locally.","sdk-support":{"basic functionality":{"android":"9.3.0","ios":"5.10.0"}}},"*":{"type":"*","doc":"Other keys to configure the data source."}},"source_raster_array":{"experimental":true,"type":{"required":true,"type":"enum","values":{"raster-array":{"doc":"A raster array source"}},"doc":"The type of the source."},"url":{"type":"string","doc":"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`. Required if `tiles` is not provided."},"tiles":{"type":"array","value":"string","doc":"An array of one or more tile source URLs, as in the TileJSON spec. Required if `url` is not provided."},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129],"doc":"An array containing the longitude and latitude of the southwest and northeast corners of the source\'s bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},"extra_bounds":{"type":"array","value":{"type":"array","value":"number","length":4,"doc":"An array containing the longitude and latitude of the southwest and northeast corners of the source\'s bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`."},"experimental":true,"doc":"An array of additional discrete geographic regions where tiles are available. When used alongside the `bounds` property, these regions act as an additional filter - Mapbox GL will only request tiles that are both within the `bounds` and any of the regions defined in `extra_bounds`. When used independently (without `bounds`), Mapbox GL will request tiles that fall within any of the regions in `extra_bounds`. This allows for more fine-grained control over tile requests, particularly when dealing with sparse data coverage."},"minzoom":{"type":"number","default":0,"doc":"Minimum zoom level for which tiles are available, as in the TileJSON spec."},"maxzoom":{"type":"number","default":22,"doc":"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},"tileSize":{"type":"number","default":512,"units":"pixels","doc":"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},"attribution":{"type":"string","doc":"Contains an attribution to be displayed when the map is shown to a user."},"rasterLayers":{"type":"*","doc":"Contains the description of the raster data layers and the bands contained within the tiles."},"volatile":{"type":"boolean","default":false,"doc":"A setting to determine whether a source\'s tiles are cached locally.","sdk-support":{"basic functionality":{"android":"9.3.0","ios":"5.10.0"}}},"*":{"type":"*","doc":"Other keys to configure the data source."}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{"doc":"A GeoJSON data source."}},"doc":"The data type of the GeoJSON source."},"data":{"type":"*","doc":"A URL to a GeoJSON file, or inline GeoJSON."},"maxzoom":{"type":"number","default":18,"doc":"Maximum zoom level at which to create vector tiles (higher means greater detail at high zoom levels)."},"minzoom":{"type":"number","default":0,"doc":"Minimum zoom level at which to create vector tiles"},"attribution":{"type":"string","doc":"Contains an attribution to be displayed when the map is shown to a user."},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0,"doc":"Size of the tile buffer on each side. A value of 0 produces no buffer. A value of 512 produces a buffer as wide as the tile itself. Larger values produce fewer rendering artifacts near tile edges and slower performance."},"filter":{"type":"*","doc":"An expression for filtering features prior to processing them for rendering."},"tolerance":{"type":"number","default":0.375,"doc":"Douglas-Peucker simplification tolerance (higher means simpler geometries and faster performance)."},"cluster":{"type":"boolean","default":false,"doc":"If the data is a collection of point features, setting this to true clusters the points by radius into groups. Cluster groups become new `Point` features in the source with additional properties:\\n * `cluster` Is `true` if the point is a cluster \\n * `cluster_id` A unqiue id for the cluster to be used in conjunction with the [cluster inspection methods](https://www.mapbox.com/mapbox-gl-js/api/#geojsonsource#getclusterexpansionzoom)\\n * `point_count` Number of original points grouped into this cluster\\n * `point_count_abbreviated` An abbreviated point count"},"clusterRadius":{"type":"number","default":50,"minimum":0,"doc":"Radius of each cluster if clustering is enabled. A value of 512 indicates a radius equal to the width of a tile."},"clusterMaxZoom":{"type":"number","doc":"Max zoom on which to cluster points if clustering is enabled. Defaults to one zoom less than maxzoom (so that last zoom features are not clustered). Clusters are re-evaluated at integer zoom levels so setting clusterMaxZoom to 14 means the clusters will be displayed until z15."},"clusterMinPoints":{"type":"number","doc":"Minimum number of points necessary to form a cluster if clustering is enabled. Defaults to `2`."},"clusterProperties":{"type":"*","doc":"An object defining custom properties on the generated clusters if clustering is enabled, aggregating values from clustered points. Has the form `{\\"property_name\\": [operator, map_expression]}`. `operator` is any expression function that accepts at least 2 operands (e.g. `\\"+\\"` or `\\"max\\"`) â it accumulates the property value from clusters/points the cluster contains; `map_expression` produces the value of a single point.\\n\\nExample: `{\\"sum\\": [\\"+\\", [\\"get\\", \\"scalerank\\"]]}`.\\n\\nFor more advanced use cases, in place of `operator`, you can use a custom reduce expression that references a special `[\\"accumulated\\"]` value, e.g.:\\n`{\\"sum\\": [[\\"+\\", [\\"accumulated\\"], [\\"get\\", \\"sum\\"]], [\\"get\\", \\"scalerank\\"]]}`"},"lineMetrics":{"type":"boolean","default":false,"doc":"Whether to calculate line distance metrics. This is required for line layers that specify `line-gradient` values."},"generateId":{"type":"boolean","default":false,"doc":"Whether to generate ids for the GeoJSON features. When enabled, the `feature.id` property will be auto assigned based on its index in the `features` array, over-writing any previous values."},"promoteId":{"type":"promoteId","doc":"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`."},"dynamic":{"type":"boolean","default":false,"doc":"Whether to optimize this source for frequent data updates (e.g. animating features).","sdk-support":{"basic functionality":{"js":"3.4.0"}}}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{"doc":"A video data source."}},"doc":"The data type of the video source."},"urls":{"required":true,"type":"array","value":"string","doc":"URLs to video content in order of preferred format."},"coordinates":{"required":true,"doc":"Corners of video specified in longitude, latitude pairs.","type":"array","length":4,"value":{"type":"array","length":2,"value":"number","doc":"A single longitude, latitude pair."}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{"doc":"An image data source."}},"doc":"The data type of the image source."},"url":{"required":false,"type":"string","doc":"URL that points to an image. If the URL is not specified, the image is expected to be loaded directly during runtime."},"coordinates":{"required":true,"doc":"Corners of image specified in longitude, latitude pairs. Note: When using globe projection, the image will be centered at the North or South Pole in the respective hemisphere if the average latitude value exceeds 85 degrees or falls below -85 degrees.","type":"array","length":4,"value":{"type":"array","length":2,"value":"number","doc":"A single longitude, latitude pair."}}},"source_model":{"type":{"required":true,"type":"enum","values":{"model":{"doc":"A collection of 3D models"},"batched-model":{"doc":"A collection of 3D models with anchor data"}},"doc":"Type of model source to be added. From single models to represent 2D layers to 3D tiled models covering a wide area."},"maxzoom":{"type":"number","default":18,"doc":"Maximum zoom level at which to create batched model tiles. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},"minzoom":{"type":"number","default":0,"doc":"Minimum zoom level for which batched-model tiles are available"},"tiles":{"type":"array","value":"string","doc":"An array of one or more tile source URLs, as in the TileJSON spec."}},"layer":{"id":{"type":"string","doc":"Unique layer name.","required":true},"type":{"type":"enum","values":{"fill":{"doc":"A filled polygon with an optional stroked border.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}}},"line":{"doc":"A stroked line.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}}},"symbol":{"doc":"An icon or a text label.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}}},"circle":{"doc":"A filled circle.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}}},"heatmap":{"doc":"A heatmap.","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"fill-extrusion":{"doc":"An extruded (3D) polygon.","sdk-support":{"basic functionality":{"js":"0.27.0","android":"5.1.0","ios":"3.6.0"}}},"building":{"doc":"A procedural 3D building.","sdk-support":{},"experimental":true,"private":true},"raster":{"doc":"Raster map textures such as satellite imagery.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}}},"raster-particle":{"experimental":true,"doc":"Particle animation driven by textures such as wind maps.","sdk-support":{"basic functionality":{"js":"3.3.0","android":"11.4.0","ios":"11.4.0"}}},"hillshade":{"doc":"Client-side hillshading visualization based on DEM data. Currently, the implementation only supports Mapbox Terrain RGB and Mapzen Terrarium tiles.","sdk-support":{"basic functionality":{"js":"0.43.0","android":"6.0.0","ios":"4.0.0"}}},"model":{"doc":"A 3D model","experimental":true,"sdk-support":{"basic functionality":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}}},"background":{"doc":"The background color or pattern of the map.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}}},"sky":{"doc":"A spherical dome around the map that is always rendered behind all other layers.","sdk-support":{"basic functionality":{"js":"2.0.0","ios":"10.0.0","android":"10.0.0"}}},"slot":{"doc":"Marks the position of a slot.","sdk-support":{"basic functionality":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}}},"clip":{"doc":"Layer that removes 3D content from map.","sdk-support":{"basic functionality":{"js":"3.5.0","android":"11.6.0","ios":"11.6.0"}}}},"doc":"Rendering type of this layer.","required":true},"metadata":{"type":"*","doc":"Arbitrary properties useful to track with the layer, but do not influence rendering. Properties should be prefixed to avoid collisions, like \'mapbox:\'."},"source":{"type":"string","doc":"Name of a source description to be used for this layer. Required for all layer types except `background` and `slot`."},"source-layer":{"type":"string","doc":"Layer to use from a vector tile source. Required for vector and raster-array sources; prohibited for all other source types, including GeoJSON sources."},"slot":{"type":"string","doc":"The slot this layer is assigned to. If specified, and a slot with that name exists, it will be placed at that position in the layer order.","sdk-support":{"basic functionality":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}}},"minzoom":{"type":"number","minimum":0,"maximum":24,"doc":"The minimum zoom level for the layer. At zoom levels less than the minzoom, the layer will be hidden."},"maxzoom":{"type":"number","minimum":0,"maximum":24,"doc":"The maximum zoom level for the layer. At zoom levels equal to or greater than the maxzoom, the layer will be hidden."},"filter":{"type":"filter","doc":"An expression specifying conditions on source features. Only features that match the filter are displayed. Zoom expressions in filters are only evaluated at integer zoom levels. The `[\\"feature-state\\", ...]` expression is not supported in filter expressions. The `[\\"pitch\\"]` and `[\\"distance-from-center\\"]` expressions are supported only for filter expressions on the symbol layer."},"layout":{"type":"layout","doc":"Layout properties for the layer."},"paint":{"type":"paint","doc":"Default paint properties for this layer."}},"layout":["layout_clip","layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_building","layout_symbol","layout_raster","layout_raster-particle","layout_hillshade","layout_background","layout_sky","layout_model"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{"doc":"The layer is shown."},"none":{"doc":"The layer is not shown."}},"default":"visible","doc":"Whether this layer is displayed.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"expressions support":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}},"expression":{"interpolated":false},"property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{"doc":"The layer is shown."},"none":{"doc":"The layer is not shown."}},"default":"visible","doc":"Whether this layer is displayed.","sdk-support":{"basic functionality":{"js":"2.0.0","ios":"10.0.0","android":"10.0.0"},"expressions support":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}},"expression":{"interpolated":false},"property-type":"constant"}},"layout_model":{"visibility":{"type":"enum","values":{"visible":{"doc":"The layer is shown."},"none":{"doc":"The layer is not shown."}},"default":"visible","doc":"Whether this layer is displayed.","sdk-support":{"basic functionality":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}},"expression":{"interpolated":false},"property-type":"constant"},"model-id":{"type":"string","default":"","doc":"Model to render. It can be either a string referencing an element to the models root property or an internal or external URL","property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]},"sdk-support":{"basic functionality":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"},"data-driven styling":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}},"transition":false,"requires":[{"source":["geojson","vector"]}]}},"layout_clip":{"clip-layer-types":{"type":"array","value":"enum","values":{"model":{"doc":"If present the clip layer would remove all 3d model layers below it. Currently only instanced models (e.g. trees) are removed."},"symbol":{"doc":"If present the clip layer would remove all symbol layers below it."}},"default":[],"doc":"Layer types that will also be removed if fallen below this clip layer.","sdk-support":{"basic functionality":{"js":"3.5.0","android":"11.6.0","ios":"11.6.0"}},"expression":{"interpolated":false},"property-type":"data-constant"},"clip-layer-scope":{"type":"array","value":"string","default":[],"doc":"Removes content from layers with the specified scope. By default all layers are affected. For example specifying `basemap` will only remove content from the Mapbox Standard style layers which have the same scope","sdk-support":{"basic functionality":{"js":"3.6.0","android":"11.7.0","ios":"11.7.0"}},"expression":{"interpolated":false},"property-type":"data-constant"}},"layout_fill":{"fill-sort-key":{"type":"number","doc":"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{"js":"1.2.0","android":"9.1.0","ios":"5.8.0"},"data-driven styling":{"js":"1.2.0","android":"9.1.0","ios":"5.8.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{"doc":"The layer is shown."},"none":{"doc":"The layer is not shown."}},"default":"visible","doc":"Whether this layer is displayed.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"expressions support":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}},"expression":{"interpolated":false},"property-type":"constant"},"fill-elevation-reference":{"type":"enum","doc":"Selects the base of fill-elevation. Some modes might require precomputed elevation data in the tileset.","values":{"none":{"doc":"Elevated rendering is disabled."},"hd-road-base":{"doc":"Elevate geometry relative to HD roads. Use this mode to describe base polygons of the road networks."},"hd-road-markup":{"doc":"Elevated rendering is enabled. Use this mode to describe additive and stackable features such as \'hatched areas\' that should exist only on top of road polygons."}},"default":"none","experimental":true,"private":true,"transition":false,"sdk-support":{"basic functionality":{"android":"11.9.0","ios":"11.9.0"}},"expression":{"interpolated":false},"property-type":"data-constant"},"fill-construct-bridge-guard-rail":{"type":"boolean","doc":"Determines whether bridge guard rails are added for elevated roads.","default":"true","transition":false,"experimental":true,"private":true,"sdk-support":{"basic functionality":{"android":"11.11.0","ios":"11.11.0","js":"3.14.0"},"data-driven styling":{"android":"11.11.0","ios":"11.11.0","js":"3.14.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"layout_circle":{"circle-sort-key":{"type":"number","doc":"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{"js":"1.2.0","android":"9.2.0","ios":"5.9.0"},"data-driven styling":{"js":"1.2.0","android":"9.2.0","ios":"5.9.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"circle-elevation-reference":{"type":"enum","doc":"Selects the base of circle-elevation. Some modes might require precomputed elevation data in the tileset.","values":{"none":{"doc":"Elevated rendering is disabled."},"hd-road-markup":{"doc":"Elevated rendering is enabled. Use this mode to describe additive and stackable features that should exist only on top of road polygons."}},"default":"none","experimental":true,"transition":false,"sdk-support":{"basic functionality":{"android":"11.11.0","ios":"11.11.0","js":"3.14.0"}},"expression":{"interpolated":false},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{"doc":"The layer is shown."},"none":{"doc":"The layer is not shown."}},"default":"visible","doc":"Whether this layer is displayed.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"expressions support":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}},"expression":{"interpolated":false},"property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{"doc":"The layer is shown."},"none":{"doc":"The layer is not shown."}},"default":"visible","doc":"Whether this layer is displayed.","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"expressions support":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}},"expression":{"interpolated":false},"property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{"doc":"The layer is shown."},"none":{"doc":"The layer is not shown."}},"default":"visible","doc":"Whether this layer is displayed.","sdk-support":{"basic functionality":{"js":"0.27.0","android":"5.1.0","ios":"3.6.0"},"expressions support":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}},"expression":{"interpolated":false},"property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","experimental":true,"default":0,"minimum":0,"maximum":1,"doc":"Radius of a fill extrusion edge in meters. If not zero, rounds extrusion edges for a smoother appearance.","sdk-support":{"basic functionality":{"js":"3.0.0","android":"10.7.0","ios":"10.7.0"},"expressions support":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}},"expression":{"interpolated":false},"property-type":"constant"}},"layout_building":{"visibility":{"type":"enum","values":{"visible":{"doc":"The layer is shown."},"none":{"doc":"The layer is not shown."}},"default":"visible","doc":"Whether this layer is displayed.","sdk-support":{"basic functionality":{}},"expression":{"interpolated":false},"property-type":"constant"},"building-roof-shape":{"type":"enum","values":{"flat":{"doc":"Use regular extruded buildings with flat roofs."},"hipped":{"doc":"Use hipped roof for the procedurally generated buildings."},"gabled":{"doc":"Use gabled roof for the procedurally generated buildings."},"parapet":{"doc":"Use parapet roof for the procedurally generated buildings."},"mansard":{"doc":"Use mansard roof for the procedurally generated buildings."},"skillion":{"doc":"Use skillion roof for the procedurally generated buildings."},"pyramidal":{"doc":"Use pyramidal roof for the procedurally generated buildings."}},"default":"flat","doc":"Roof type to use for the procedural buildings.","experimental":true,"private":true,"sdk-support":{"basic functionality":{},"data-driven styling":{}},"expression":{"interpolated":false,"parameters":["feature"]},"property-type":"data-driven"},"building-height":{"type":"number","default":0,"minimum":0,"units":"meters","doc":"The height of the procedural buildings.","transition":true,"experimental":true,"private":true,"sdk-support":{"basic functionality":{},"data-driven styling":{}},"expression":{"interpolated":false},"property-type":"data-driven"},"building-base":{"type":"number","default":0,"minimum":0,"units":"meters","doc":"The height with which to extrude the base of this layer. Must be less than or equal to `building-height`.","transition":true,"requires":["building-height"],"experimental":true,"private":true,"sdk-support":{"basic functionality":{},"data-driven styling":{}},"expression":{"interpolated":false},"property-type":"data-driven"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{"doc":"A cap with a squared-off end which is drawn to the exact endpoint of the line."},"round":{"doc":"A cap with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line\'s width and centered on the endpoint of the line."},"square":{"doc":"A cap with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line\'s width."}},"default":"butt","doc":"The display of line endings.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"2.3.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{"doc":"A join with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line\'s width."},"round":{"doc":"A join with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line\'s width and centered on the endpoint of the line."},"miter":{"doc":"A join with a sharp, angled corner which is drawn with the outer sides beyond the endpoint of the path until they meet."},"none":{"doc":"Line segments are not joined together, each one creates a separate line. Useful in combination with line-pattern. Line-cap property is not respected. Can\'t be used with data-driven styling."}},"default":"miter","doc":"The display of lines when joining.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.40.0","android":"5.2.0","ios":"3.7.0"},"`none` value":{"js":"3.4.0","android":"11.5.0","ios":"11.5.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"doc":"Used to automatically convert miter joins to bevel joins for sharp angles.","requires":[{"line-join":"miter"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"doc":"Used to automatically convert round joins to miter joins for shallow angles.","requires":[{"line-join":"round"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","doc":"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{"js":"1.2.0","android":"9.1.0","ios":"5.8.0"},"data-driven styling":{"js":"1.2.0","android":"9.1.0","ios":"5.8.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-z-offset":{"type":"number","experimental":true,"doc":"Vertical offset from ground, in meters. Defaults to 0. This is an experimental property with some known issues:\\n * Not supported for globe projection at the moment \\n * Elevated line discontinuity is possible on tile borders with terrain enabled \\n * Rendering artifacts can happen near line joins and line caps depending on the line styling \\n * Rendering artifacts relating to `line-opacity` and `line-blur` \\n * Elevated line visibility is determined by layer order \\n * Z-fighting issues can happen with intersecting elevated lines \\n * Elevated lines don\'t cast shadows","default":0,"requires":["line-elevation-reference"],"sdk-support":{"basic functionality":{"js":"3.5.0","android":"11.5.0","ios":"11.5.0"},"data-driven styling":{"js":"3.5.0","android":"11.5.0","ios":"11.5.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature","line-progress"]},"property-type":"data-driven"},"line-elevation-reference":{"type":"enum","doc":"Selects the base of line-elevation. Some modes might require precomputed elevation data in the tileset.","values":{"none":{"doc":"Elevated rendering is disabled."},"sea":{"doc":"Elevated rendering is enabled. Use this mode to elevate lines relative to the sea level."},"ground":{"doc":"Elevated rendering is enabled. Use this mode to elevate lines relative to the ground\'s height below them."},"hd-road-markup":{"doc":"Elevated rendering is enabled. Use this mode to describe additive and stackable features that should exist only on top of road polygons."}},"default":"none","experimental":true,"transition":false,"sdk-support":{"basic functionality":{"js":"3.8.0","android":"11.9.0","ios":"11.9.0"}},"expression":{"interpolated":false},"property-type":"data-constant"},"line-cross-slope":{"type":"number","experimental":true,"doc":"Defines the slope of an elevated line. A value of 0 creates a horizontal line. A value of 1 creates a vertical line. Other values are currently not supported. If undefined, the line follows the terrain slope. This is an experimental property with some known issues:\\n * Vertical lines don\'t support line caps \\n * `line-join: round` is not supported with this property","requires":["line-z-offset"],"sdk-support":{"basic functionality":{"js":"3.8.0","android":"11.9.0","ios":"11.9.0"}},"expression":{"interpolated":false},"property-type":"constant"},"visibility":{"type":"enum","values":{"visible":{"doc":"The layer is shown."},"none":{"doc":"The layer is not shown."}},"default":"visible","doc":"Whether this layer is displayed.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"expressions support":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}},"expression":{"interpolated":false},"property-type":"constant"},"line-width-unit":{"type":"enum","doc":"Selects the unit of line-width. The same unit is automatically used for line-blur and line-offset. Note: This is an experimental property and might be removed in a future release.","values":{"pixels":{"doc":"Width is rendered in pixels."},"meters":{"doc":"Width is rendered in meters."}},"default":"pixels","experimental":true,"private":true,"transition":false,"sdk-support":{"basic functionality":{"js":"3.9.0","android":"11.9.0","ios":"11.9.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{"doc":"The label is placed at the point where the geometry is located."},"line":{"doc":"The label is placed along the line of the geometry. Can only be used on `LineString` and `Polygon` geometries."},"line-center":{"doc":"The label is placed at the center of the line of the geometry. Can only be used on `LineString` and `Polygon` geometries. Note that a single feature in a vector tile may contain multiple line geometries."}},"default":"point","doc":"Label placement relative to its geometry.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"`line-center` value":{"js":"0.47.0","android":"6.4.0","ios":"4.3.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","doc":"Distance between two symbol anchors.","requires":[{"symbol-placement":"line"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"doc":"If true, the symbols will not cross tile edges to avoid mutual collisions. Recommended in layers that don\'t have enough padding in the vector tile to prevent collisions, or if it is a point symbol layer placed after a line symbol layer. When using a client that supports global collision detection, like Mapbox GL JS version 0.42.0 or greater, enabling this property is not needed to prevent clipped labels at tile boundaries.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","doc":"Sorts features in ascending order based on this value. Features with lower sort keys are drawn and placed first. When `icon-allow-overlap` or `text-allow-overlap` is `false`, features with a lower sort key will have priority during placement. When `icon-allow-overlap` or `text-allow-overlap` is set to `true`, features with a higher sort key will overlap over features with a lower sort key.","sdk-support":{"basic functionality":{"js":"0.53.0","android":"7.4.0","ios":"4.11.0"},"data-driven styling":{"js":"0.53.0","android":"7.4.0","ios":"4.11.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{"doc":"Sorts symbols by `symbol-sort-key` if set. Otherwise, sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},"viewport-y":{"doc":"Sorts symbols by their y-position relative to the viewport if any of the following is set to `true`: `icon-allow-overlap`, `text-allow-overlap`, `icon-ignore-placement`, `text-ignore-placement`."},"source":{"doc":"Sorts symbols by `symbol-sort-key` if set. Otherwise, no sorting is applied; symbols are rendered in the same order as the source data."}},"default":"auto","doc":"Determines whether overlapping symbols in the same layer are rendered in the order that they appear in the data source or by their y-position relative to the viewport. To control the order and prioritization of symbols otherwise, use `symbol-sort-key`.","sdk-support":{"basic functionality":{"js":"0.49.0","android":"6.6.0","ios":"4.5.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-z-elevate":{"type":"boolean","default":false,"doc":"Position symbol on buildings (both fill extrusions and models) rooftops. In order to have minimal impact on performance, this is supported only when `fill-extrusion-height` is not zoom-dependent and remains unchanged. For fading in buildings when zooming in, fill-extrusion-vertical-scale should be used and symbols would raise with building rooftops. Symbols are sorted by elevation, except in cases when `viewport-y` sorting or `symbol-sort-key` are applied.","sdk-support":{"basic functionality":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}},"requires":[{"symbol-placement":["point"]},{"symbol-z-order":["auto"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-elevation-reference":{"type":"enum","doc":"Selects the base of symbol-elevation.","values":{"sea":{"doc":"Elevate symbols relative to the sea level."},"ground":{"doc":"Elevate symbols relative to the ground\'s height below them."},"hd-road-markup":{"doc":"Use this mode to enable elevated behavior for features that are rendered on top of 3D road polygons. The feature is currently being developed."}},"default":"ground","experimental":true,"sdk-support":{"basic functionality":{"android":"11.9.0","ios":"11.9.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"doc":"If true, the icon will be visible even if it collides with other previously drawn symbols.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"doc":"If true, other symbols can be visible even if they collide with the icon.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"doc":"If true, text will display without their corresponding icons when the icon collides with other symbols and the text does not.","requires":["icon-image","text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{"doc":"When `symbol-placement` is set to `point`, aligns icons east-west. When `symbol-placement` is set to `line` or `line-center`, aligns icon x-axes with the line."},"viewport":{"doc":"Produces icons whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},"auto":{"doc":"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},"default":"auto","doc":"In combination with `symbol-placement`, determines the rotation behavior of icons.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"`auto` value":{"js":"0.25.0","android":"4.2.0","ios":"3.4.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","doc":"Scales the original size of the icon by the provided factor. The new pixel size of the image will be the original pixel size multiplied by `icon-size`. 1 is the original size; 3 triples the size of the image.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-size-scale-range":{"type":"array","value":"number","length":2,"default":[0.8,2],"doc":"Defines the minimum and maximum scaling factors for icon related properties like `icon-size`, `icon-halo-width`, `icon-halo-blur`","minimum":0.1,"maximum":10,"experimental":true,"private":true,"expression":{"interpolated":false},"sdk-support":{"basic functionality":{"js":"3.8.0"}},"property-type":"data-constant"},"icon-text-fit":{"type":"enum","values":{"none":{"doc":"The icon is displayed at its intrinsic aspect ratio."},"width":{"doc":"The icon is scaled in the x-dimension to fit the width of the text."},"height":{"doc":"The icon is scaled in the y-dimension to fit the height of the text."},"both":{"doc":"The icon is scaled in both x- and y-dimensions."}},"default":"none","doc":"Scales the icon to fit around the associated text.","requires":["icon-image","text-field"],"sdk-support":{"basic functionality":{"js":"0.21.0","android":"4.2.0","ios":"3.4.0"},"stretchable icons":{"js":"1.6.0","android":"9.2.0","ios":"5.8.0"},"data-driven styling":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","doc":"Size of the additional area added to dimensions determined by `icon-text-fit`, in clockwise order: top, right, bottom, left.","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"sdk-support":{"basic functionality":{"js":"0.21.0","android":"4.2.0","ios":"3.4.0"},"data-driven styling":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-image":{"type":"resolvedImage","doc":"Name of image in sprite to use for drawing an image background.","tokens":true,"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","doc":"Rotates the icon clockwise.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.21.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","doc":"Size of the additional area around the icon bounding box used for detecting symbol collisions.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"doc":"If true, the icon may be flipped to prevent it from being rendered upside-down.","requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"doc":"Offset distance of icon from its anchor. Positive values indicate right and down, while negative values indicate left and up. Each component is multiplied by the value of `icon-size` to obtain the final offset in pixels. When combined with `icon-rotate` the offset will be as if the rotated direction was up.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.29.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{"doc":"The center of the icon is placed closest to the anchor."},"left":{"doc":"The left side of the icon is placed closest to the anchor."},"right":{"doc":"The right side of the icon is placed closest to the anchor."},"top":{"doc":"The top of the icon is placed closest to the anchor."},"bottom":{"doc":"The bottom of the icon is placed closest to the anchor."},"top-left":{"doc":"The top left corner of the icon is placed closest to the anchor."},"top-right":{"doc":"The top right corner of the icon is placed closest to the anchor."},"bottom-left":{"doc":"The bottom left corner of the icon is placed closest to the anchor."},"bottom-right":{"doc":"The bottom right corner of the icon is placed closest to the anchor."}},"default":"center","doc":"Part of the icon placed closest to the anchor.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.40.0","android":"5.2.0","ios":"3.7.0"},"data-driven styling":{"js":"0.40.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{"doc":"The icon is aligned to the plane of the map."},"viewport":{"doc":"The icon is aligned to the plane of the viewport."},"auto":{"doc":"Automatically matches the value of `icon-rotation-alignment`."}},"default":"auto","doc":"Orientation of icon when map is pitched.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.39.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{"doc":"The text is aligned to the plane of the map."},"viewport":{"doc":"The text is aligned to the plane of the viewport."},"auto":{"doc":"Automatically matches the value of `text-rotation-alignment`."}},"default":"auto","doc":"Orientation of text when map is pitched.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.21.0","android":"4.2.0","ios":"3.4.0"},"`auto` value":{"js":"0.25.0","android":"4.2.0","ios":"3.4.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{"doc":"When `symbol-placement` is set to `point`, aligns text east-west. When `symbol-placement` is set to `line` or `line-center`, aligns text x-axes with the line."},"viewport":{"doc":"Produces glyphs whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},"auto":{"doc":"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},"default":"auto","doc":"In combination with `symbol-placement`, determines the rotation behavior of the individual glyphs forming the text.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"`auto` value":{"js":"0.25.0","android":"4.2.0","ios":"3.4.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"doc":"Value to use for a text label. If a plain `string` is provided, it will be treated as a `formatted` with default/inherited formatting options. SDF images are not supported in formatted text and will be ignored.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.33.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"doc":"Font stack to use for displaying text.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.43.0","android":"6.0.0","ios":"4.0.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","doc":"Font size.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size-scale-range":{"type":"array","value":"number","length":2,"default":[0.8,2],"doc":"Defines the minimum and maximum scaling factors for text related properties like `text-size`, `text-max-width`, `text-halo-width`, `font-size`","minimum":0.1,"maximum":10,"experimental":true,"private":true,"expression":{"interpolated":false},"sdk-support":{"basic functionality":{"js":"3.8.0"}},"property-type":"data-constant"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","doc":"The maximum line width for text wrapping.","requires":["text-field",{"symbol-placement":["point"]}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.40.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","doc":"Text leading value for multi-line text.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"2.3.0","android":"10.0.0","ios":"10.0.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","doc":"Text tracking amount.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.40.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{"doc":"The text is aligned towards the anchor position."},"left":{"doc":"The text is aligned to the left."},"center":{"doc":"The text is centered."},"right":{"doc":"The text is aligned to the right."}},"default":"center","doc":"Text justification options.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.39.0","android":"5.2.0","ios":"3.7.0"},"auto":{"js":"0.54.0","android":"7.4.0","ios":"4.10.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"doc":"Radial offset of text, in the direction of the symbol\'s anchor. Useful in combination with `text-variable-anchor`, which defaults to using the two-dimensional `text-offset` if present.","sdk-support":{"basic functionality":{"js":"0.54.0","android":"7.4.0","ios":"4.10.0"},"data-driven styling":{"js":"0.54.0","android":"7.4.0","ios":"4.10.0"}},"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{"doc":"The center of the text is placed closest to the anchor."},"left":{"doc":"The left side of the text is placed closest to the anchor."},"right":{"doc":"The right side of the text is placed closest to the anchor."},"top":{"doc":"The top of the text is placed closest to the anchor."},"bottom":{"doc":"The bottom of the text is placed closest to the anchor."},"top-left":{"doc":"The top left corner of the text is placed closest to the anchor."},"top-right":{"doc":"The top right corner of the text is placed closest to the anchor."},"bottom-left":{"doc":"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{"doc":"The bottom right corner of the text is placed closest to the anchor."}},"requires":["text-field",{"symbol-placement":["point"]}],"doc":"To increase the chance of placing high-priority labels on the map, you can provide an array of `text-anchor` locations: the renderer will attempt to place the label at each location, in order, before moving onto the next label. Use `text-justify: auto` to choose justification based on anchor position. To apply an offset, use the `text-radial-offset` or the two-dimensional `text-offset`.","sdk-support":{"basic functionality":{"js":"0.54.0","android":"7.4.0","ios":"4.10.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{"doc":"The center of the text is placed closest to the anchor."},"left":{"doc":"The left side of the text is placed closest to the anchor."},"right":{"doc":"The right side of the text is placed closest to the anchor."},"top":{"doc":"The top of the text is placed closest to the anchor."},"bottom":{"doc":"The bottom of the text is placed closest to the anchor."},"top-left":{"doc":"The top left corner of the text is placed closest to the anchor."},"top-right":{"doc":"The top right corner of the text is placed closest to the anchor."},"bottom-left":{"doc":"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{"doc":"The bottom right corner of the text is placed closest to the anchor."}},"default":"center","doc":"Part of the text placed closest to the anchor.","requires":["text-field",{"!":"text-variable-anchor"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.39.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","doc":"Maximum angle change between adjacent characters.","requires":["text-field",{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{"doc":"If a text\'s language supports horizontal writing mode, symbols would be laid out horizontally."},"vertical":{"doc":"If a text\'s language supports vertical writing mode, symbols would be laid out vertically."}},"doc":"The property allows control over a symbol\'s orientation. Note that the property values act as a hint, so that a symbol whose language doesnât support the provided orientation will be laid out in its natural orientation. Example: English point symbol will be rendered horizontally even if array value contains single \'vertical\' enum value. For symbol with point placement, the order of elements in an array define priority order for the placement of an orientation variant. For symbol with line placement, the default text writing mode is either [\'horizontal\', \'vertical\'] or [\'vertical\', \'horizontal\'], the order doesn\'t affect the placement.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"1.3.0","android":"8.3.0","ios":"5.3.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","doc":"Rotates the text clockwise.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","doc":"Size of the additional area around the text bounding box used for detecting symbol collisions.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"doc":"If true, the text may be flipped vertically to prevent it from being rendered upside-down.","requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{"doc":"The text is not altered."},"uppercase":{"doc":"Forces all letters to be displayed in uppercase."},"lowercase":{"doc":"Forces all letters to be displayed in lowercase."}},"default":"none","doc":"Specifies how to capitalize text, similar to the CSS `text-transform` property.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.33.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","doc":"Offset distance of text from its anchor. Positive values indicate right and down, while negative values indicate left and up. If used with text-variable-anchor, input values will be taken as absolute values. Offsets along the x- and y-axis will be applied automatically based on the anchor position.","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.35.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"doc":"If true, the text will be visible even if it collides with other previously drawn symbols.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"doc":"If true, other symbols can be visible even if they collide with the text.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"doc":"If true, icons will display without their corresponding text when the text collides with other symbols and the icon does not.","requires":["text-field","icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{"doc":"The layer is shown."},"none":{"doc":"The layer is not shown."}},"default":"visible","doc":"Whether this layer is displayed.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"expressions support":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}},"expression":{"interpolated":false},"property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{"doc":"The layer is shown."},"none":{"doc":"The layer is not shown."}},"default":"visible","doc":"Whether this layer is displayed.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"expressions support":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}},"expression":{"interpolated":false},"property-type":"constant"}},"layout_raster-particle":{"visibility":{"type":"enum","values":{"visible":{"doc":"The layer is shown."},"none":{"doc":"The layer is not shown."}},"default":"visible","doc":"Whether this layer is displayed.","sdk-support":{"basic functionality":{"js":"3.3.0","android":"11.4.0","ios":"11.4.0"},"expressions support":{"js":"3.3.0","android":"11.4.0","ios":"11.4.0"}},"expression":{"interpolated":false},"property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{"doc":"The layer is shown."},"none":{"doc":"The layer is not shown."}},"default":"visible","doc":"Whether this layer is displayed.","sdk-support":{"basic functionality":{"js":"0.43.0","android":"6.0.0","ios":"4.0.0"},"expressions support":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}},"expression":{"interpolated":false},"property-type":"constant"}},"filter":{"type":"array","value":"*","doc":"A filter selects specific features from a layer."},"filter_symbol":{"type":"boolean","doc":"Expression which determines whether or not to display a symbol. Symbols support dynamic filtering, meaning this expression can use the `[\\"pitch\\"]` and `[\\"distance-from-center\\"]` expressions to reference the current state of the view.","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","doc":"Expression which determines whether or not to display a polygon. Fill layer does NOT support dynamic filtering, meaning this expression can NOT use the `[\\"pitch\\"]` and `[\\"distance-from-center\\"]` expressions to reference the current state of the view.","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_hillshade":{"type":"boolean","doc":"Expression which determines whether or not to enable the hillshade layer. Hillshade layer does NOT support dynamic filtering, meaning this expression can NOT use the `[\\"pitch\\"]` and `[\\"distance-from-center\\"]` expressions to reference the current state of the view.","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_raster":{"type":"boolean","doc":"Expression which determines whether or not to enable the raster layer. Raster layer does NOT support dynamic filtering, meaning this expression can NOT use the `[\\"pitch\\"]` and `[\\"distance-from-center\\"]` expressions to reference the current state of the view.","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_raster-particle":{"type":"boolean","doc":"Expression which determines whether or not to enable the raster particle layer. Raster particle layer does NOT support dynamic filtering, meaning this expression can NOT use the `[\\"pitch\\"]` and `[\\"distance-from-center\\"]` expressions to reference the current state of the view.","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_clip":{"type":"boolean","doc":"Expression which determines whether or not to enable the clip layer. Clip layer does NOT support dynamic filtering, meaning this expression can NOT use the `[\\"pitch\\"]` and `[\\"distance-from-center\\"]` expressions to reference the current state of the view.","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_model":{"type":"boolean","doc":"Expression which determines whether or not to display a model. Model layer does NOT support dynamic filtering, meaning this expression can NOT use the `[\\"pitch\\"]` and `[\\"distance-from-center\\"]` expressions to reference the current state of the view.","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","doc":"Expression which determines whether or not to display a Polygon or LineString. Line layer does NOT support dynamic filtering, meaning this expression can NOT use the `[\\"pitch\\"]` and `[\\"distance-from-center\\"]` expressions to reference the current state of the view.","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","doc":"Expression which determines whether or not to display a circle. Circle layer does NOT support dynamic filtering, meaning this expression can NOT use the `[\\"pitch\\"]` and `[\\"distance-from-center\\"]` expressions to reference the current state of the view.","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","doc":"Expression which determines whether or not to display a Polygon. Fill-extrusion layer does NOT support dynamic filtering, meaning this expression can NOT use the `[\\"pitch\\"]` and `[\\"distance-from-center\\"]` expressions to reference the current state of the view.","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_building":{"type":"boolean","doc":"Expression which determines whether or not to display a Polygon. Building layer does NOT support dynamic filtering, meaning this expression can NOT use the `[\\"pitch\\"]` and `[\\"distance-from-center\\"]` expressions to reference the current state of the view.","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","doc":"Expression used to determine whether a point is being displayed or not. Heatmap layer does NOT support dynamic filtering, meaning this expression can NOT use the `[\\"pitch\\"]` and `[\\"distance-from-center\\"]` expressions to reference the current state of the view.","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{"doc":"`[\\"==\\", key, value]` equality: `feature[key] = value`"},"!=":{"doc":"`[\\"!=\\", key, value]` inequality: `feature[key] â  value`"},">":{"doc":"`[\\">\\", key, value]` greater than: `feature[key] > value`"},">=":{"doc":"`[\\">=\\", key, value]` greater than or equal: `feature[key] â¥ value`"},"<":{"doc":"`[\\"<\\", key, value]` less than: `feature[key] < value`"},"<=":{"doc":"`[\\"<=\\", key, value]` less than or equal: `feature[key] â¤ value`"},"in":{"doc":"`[\\"in\\", key, v0, ..., vn]` set inclusion: `feature[key] â {v0, ..., vn}`"},"!in":{"doc":"`[\\"!in\\", key, v0, ..., vn]` set exclusion: `feature[key] â {v0, ..., vn}`"},"all":{"doc":"`[\\"all\\", f0, ..., fn]` logical `AND`: `f0 â§ ... â§ fn`"},"any":{"doc":"`[\\"any\\", f0, ..., fn]` logical `OR`: `f0 â¨ ... â¨ fn`"},"none":{"doc":"`[\\"none\\", f0, ..., fn]` logical `NOR`: `Â¬f0 â§ ... â§ Â¬fn`"},"has":{"doc":"`[\\"has\\", key]` `feature[key]` exists"},"!has":{"doc":"`[\\"!has\\", key]` `feature[key]` does not exist"}},"doc":"The filter operator."},"geometry_type":{"type":"enum","values":{"Point":{"doc":"Filter to point geometries."},"LineString":{"doc":"Filter to line geometries."},"Polygon":{"doc":"Filter to polygon geometries."}},"doc":"The geometry type for the filter to select."},"function":{"expression":{"type":"expression","doc":"An expression."},"stops":{"type":"array","doc":"An array of stops.","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0,"doc":"The exponential base of the interpolation curve. It controls the rate at which the result increases. Higher values make the result increase more towards the high end of the range. With `1` the stops are interpolated linearly."},"property":{"type":"string","doc":"The name of a feature property to use as the function input.","default":"$zoom"},"type":{"type":"enum","values":{"identity":{"doc":"Return the input value as the output value."},"exponential":{"doc":"Generate an output by interpolating between stops just less than and just greater than the function input."},"interval":{"doc":"Return the output value of the stop just less than the function input."},"categorical":{"doc":"Return the output value of the stop equal to the function input."}},"doc":"The interpolation strategy to use in function evaluation.","default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{"doc":"Use the RGB color space to interpolate color values"},"lab":{"doc":"Use the LAB color space to interpolate color values."},"hcl":{"doc":"Use the HCL color space to interpolate color values, interpolating the Hue, Chroma, and Luminance channels individually."}},"doc":"The color space in which colors interpolated. Interpolating colors in perceptual color spaces like LAB and HCL tend to produce color ramps that look more consistent and produce colors that can be differentiated more easily than those interpolated in RGB space.","default":"rgb"},"default":{"type":"*","required":false,"doc":"A value to serve as a fallback function result when a value isn\'t otherwise available. It is used in the following circumstances:\\n* In categorical functions, when the feature value does not match any of the stop domain values.\\n* In property and zoom-and-property functions, when a feature does not contain a value for the specified property.\\n* In identity functions, when the feature value is not valid for the style property (for example, if the function is being used for a `circle-color` property but the feature property value is not a string or not a valid color).\\n* In interval or exponential property and zoom-and-property functions, when the feature value is not numeric.\\nIf no default is provided, the style property\'s default is used in these circumstances."}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2,"doc":"Zoom level and value pair."},"expression":{"type":"array","value":"*","minimum":1,"doc":"An expression defines a function that can be used for data-driven style properties or feature filters."},"expression_name":{"doc":"","type":"enum","values":{"let":{"doc":"Binds expressions to named variables, which can then be referenced in the result expression using [\\"var\\", \\"variable_name\\"].","group":"Variable binding","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"var":{"doc":"References variable bound using \\"let\\".","group":"Variable binding","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"config":{"doc":"Retrieves the configuration value for the given option. Returns null if the requested option is missing.","group":"Lookup","sdk-support":{"basic functionality":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}}},"literal":{"doc":"Provides a literal array or object value.","group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"array":{"doc":"Asserts that the input is an array (optionally with a specific item type and length). If, when the input expression is evaluated, it is not of the asserted type, then this assertion will cause the whole expression to be aborted.","group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"at":{"doc":"Retrieves an item from an array.","group":"Lookup","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"at-interpolated":{"doc":"Retrieves an item from an array. If the array contains numeric values and the provided index is non-integer, the expression returns an interpolated value between adjacent items.","group":"Lookup","sdk-support":{"basic functionality":{"js":"3.11.0","android":"11.12.0","ios":"11.12.0"}}},"in":{"doc":"Determines whether an item exists in an array or a substring exists in a string. In the specific case when the second and third arguments are string literals, you must wrap at least one of them in a [`literal`](#types-literal) expression to hint correct interpretation to the [type system](#type-system).","group":"Lookup","sdk-support":{"basic functionality":{"js":"1.6.0","android":"9.1.0","ios":"5.8.0"}}},"index-of":{"doc":"Returns the first position at which an item can be found in an array or a substring can be found in a string, or `-1` if the input cannot be found. Accepts an optional index from where to begin the search.","group":"Lookup","sdk-support":{"basic functionality":{"js":"1.10.0","android":"10.0.0","ios":"10.0.0"}}},"slice":{"doc":"Returns an item from an array or a substring from a string from a specified start index, or between a start index and an end index if set. The return value is inclusive of the start index but not of the end index.","group":"Lookup","sdk-support":{"basic functionality":{"js":"1.10.0","android":"10.0.0","ios":"10.0.0"}}},"case":{"doc":"Selects the first output whose corresponding test condition evaluates to true, or the fallback value otherwise.","group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"match":{"doc":"Selects the output for which the label value matches the input value, or the fallback value if no match is found. The input can be any expression (for example, `[\\"get\\", \\"building_type\\"]`). Each label must be unique, and must be either:\\n - a single literal value; or\\n - an array of literal values, the values of which must be all strings or all numbers (for example `[100, 101]` or `[\\"c\\", \\"b\\"]`).\\n\\nThe input matches if any of the values in the array matches using strict equality, similar to the `\\"in\\"` operator.\\nIf the input type does not match the type of the labels, the result will be the fallback value.","group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"coalesce":{"doc":"Evaluates each expression in turn until the first valid value is obtained. Invalid values are `null` and [`\'image\'`](#types-image) expressions that are unavailable in the style. If all values are invalid, `coalesce` returns the first value listed.","group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"step":{"doc":"Produces discrete, stepped results by evaluating a piecewise-constant function defined by pairs of input and output values (\\"stops\\"). The `input` may be any numeric expression (e.g., `[\\"get\\", \\"population\\"]`). Stop inputs must be numeric literals in strictly ascending order. Returns the output value of the stop just less than the input, or the first output if the input is less than the first stop.","group":"Ramps, scales, curves","sdk-support":{"basic functionality":{"js":"0.42.0","android":"6.0.0","ios":"4.0.0"}}},"interpolate":{"doc":"Produces continuous, smooth results by interpolating between pairs of input and output values (\\"stops\\"). The `input` may be any numeric expression (e.g., `[\\"get\\", \\"population\\"]`). Stop inputs must be numeric literals in strictly ascending order. The output type must be `number`, `array<number>`, or `color`.\\n\\nInterpolation types:\\n- `[\\"linear\\"]`: Interpolates linearly between the pair of stops just less than and just greater than the input.\\n- `[\\"exponential\\", base]`: Interpolates exponentially between the stops just less than and just greater than the input. `base` controls the rate at which the output increases: higher values make the output increase more towards the high end of the range. With values close to 1 the output increases linearly.\\n- `[\\"cubic-bezier\\", x1, y1, x2, y2]`: Interpolates using the cubic bezier curve defined by the given control points.","group":"Ramps, scales, curves","sdk-support":{"basic functionality":{"js":"0.42.0","android":"6.0.0","ios":"4.0.0"}}},"interpolate-hcl":{"doc":"Produces continuous, smooth results by interpolating between pairs of input and output values (\\"stops\\"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the Hue-Chroma-Luminance color space.","group":"Ramps, scales, curves","sdk-support":{"basic functionality":{"js":"0.49.0"}}},"interpolate-lab":{"doc":"Produces continuous, smooth results by interpolating between pairs of input and output values (\\"stops\\"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the CIELAB color space.","group":"Ramps, scales, curves","sdk-support":{"basic functionality":{"js":"0.49.0"}}},"ln2":{"doc":"Returns mathematical constant ln(2).","group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"pi":{"doc":"Returns the mathematical constant pi.","group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"e":{"doc":"Returns the mathematical constant e.","group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"typeof":{"doc":"Returns a string describing the type of the given value.","group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"string":{"doc":"Asserts that the input value is a string. If multiple values are provided, each one is evaluated in order until a string is obtained. If none of the inputs are strings, the expression is an error.","group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"number":{"doc":"Asserts that the input value is a number. If multiple values are provided, each one is evaluated in order until a number is obtained. If none of the inputs are numbers, the expression is an error.","group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"boolean":{"doc":"Asserts that the input value is a boolean. If multiple values are provided, each one is evaluated in order until a boolean is obtained. If none of the inputs are booleans, the expression is an error.","group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"object":{"doc":"Asserts that the input value is an object. If multiple values are provided, each one is evaluated in order until an object is obtained. If none of the inputs are objects, the expression is an error.","group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"collator":{"doc":"Returns a `collator` for use in locale-dependent comparison operations. The `case-sensitive` and `diacritic-sensitive` options default to `false`. The `locale` argument specifies the IETF language tag of the locale to use. If none is provided, the default locale is used. If the requested locale is not available, the `collator` will use a system-defined fallback locale. Use `resolved-locale` to test the results of locale fallback behavior.","group":"Types","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"format":{"doc":"Returns a `formatted` string for displaying mixed-format text in the `text-field` property. The input may contain a string literal or expression, including an [`\'image\'`](#types-image) expression. Strings may be followed by a style override object that supports the following properties:\\n- `\\"text-font\\"`: Overrides the font stack specified by the root layout property.\\n- `\\"text-color\\"`: Overrides the color specified by the root paint property.\\n- `\\"font-scale\\"`: Applies a scaling factor on `text-size` as specified by the root layout property.","group":"Types","sdk-support":{"basic functionality":{"js":"0.48.0","android":"6.7.0","ios":"4.6.0"},"text-font":{"js":"0.48.0","android":"6.7.0","ios":"4.6.0"},"font-scale":{"js":"0.48.0","android":"6.7.0","ios":"4.6.0"},"text-color":{"js":"1.3.0","android":"7.3.0","ios":"4.10.0"},"image":{"js":"1.6.0","android":"8.6.0","ios":"5.7.0"}}},"image":{"doc":"Returns a [`ResolvedImage`](/style-spec/reference/types/#resolvedimage) for use in [`icon-image`](/style-spec/reference/layers/#layout-symbol-icon-image), `*-pattern` entries, and as a section in the [`\'format\'`](#types-format) expression.\\n\\nA [`\'coalesce\'`](#coalesce) expression containing `image` expressions will evaluate to the first listed image that is currently in the style. This validation process is synchronous and requires the image to have been added to the style before requesting it in the `\'image\'` argument.\\n\\nEvery image name can be followed by an optional [`ImageOptions`](/style-spec/reference/types/#imageoptions) object, which will be used for vector images only.\\n\\nTo implement crossfading between two images within a symbol layer using the [`icon-image-cross-fade`](/style-spec/reference/layers/#paint-symbol-icon-image-cross-fade) attribute, include a second image as the second argument in the `\'image\'` expression.","group":"Types","sdk-support":{"basic functionality":{"js":"1.4.0","android":"8.6.0","ios":"5.7.0"}}},"number-format":{"doc":"Converts the input number into a string representation using the providing formatting rules. If set, the `locale` argument specifies the locale to use, as a BCP 47 language tag. If set, the `currency` argument specifies an ISO 4217 code to use for currency-style formatting. If set, the `unit` argument specifies a [simple ECMAScript unit](https://tc39.es/proposal-unified-intl-numberformat/section6/locales-currencies-tz_proposed_out.html#sec-issanctionedsimpleunitidentifier) to use for unit-style formatting. If set, the `min-fraction-digits` and `max-fraction-digits` arguments specify the minimum and maximum number of fractional digits to include.","group":"Types","sdk-support":{"basic functionality":{"js":"0.54.0","android":"8.4.0","ios":"5.4.0"}}},"to-string":{"doc":"Converts the input value to a string. If the input is `null`, the result is `\\"\\"`. If the input is a [`boolean`](#types-boolean), the result is `\\"true\\"` or `\\"false\\"`. If the input is a number, it is converted to a string as specified by the [\\"NumberToString\\" algorithm](https://tc39.github.io/ecma262/#sec-tostring-applied-to-the-number-type) of the ECMAScript Language Specification. If the input is a [`color`](#color), it is converted to a string of the form `\\"rgba(r,g,b,a)\\"`, where `r`, `g`, and `b` are numerals ranging from 0 to 255, and `a` ranges from 0 to 1. If the input is an [`\'image\'`](#types-image) expression, `\'to-string\'` returns the image name. Otherwise, the input is converted to a string in the format specified by the [`JSON.stringify`](https://tc39.github.io/ecma262/#sec-json.stringify) function of the ECMAScript Language Specification.","group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"to-number":{"doc":"Converts the input value to a number, if possible. If the input is `null` or `false`, the result is 0. If the input is `true`, the result is 1. If the input is a string, it is converted to a number as specified by the [\\"ToNumber Applied to the String Type\\" algorithm](https://tc39.github.io/ecma262/#sec-tonumber-applied-to-the-string-type) of the ECMAScript Language Specification. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.","group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"to-boolean":{"doc":"Converts the input value to a boolean. The result is `false` when then input is an empty string, 0, `false`, `null`, or `NaN`; otherwise it is `true`.","group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"to-rgba":{"doc":"Returns a four-element array containing the input color\'s red, green, blue, and alpha components, in that order.","group":"Color","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"to-hsla":{"doc":"Returns a four-element array containing the input color\'s Hue, Saturation, Luminance and alpha components, in that order.","group":"Color","sdk-support":{"basic functionality":{"js":"3.9.0","android":"11.9.0","ios":"11.9.0"}}},"to-color":{"doc":"Converts the input value to a color. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.","group":"Types","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"rgb":{"doc":"Creates a color value from red, green, and blue components, which must range between 0 and 255, and an alpha component of 1. If any component is out of range, the expression is an error.","group":"Color","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"rgba":{"doc":"Creates a color value from red, green, blue components, which must range between 0 and 255, and an alpha component which must range between 0 and 1. If any component is out of range, the expression is an error.","group":"Color","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"hsl":{"doc":"Creates a color value from hue (range 0-360), saturation and lightness components (range 0-100), and an alpha component of 1. If any component is out of range, the expression is an error.","group":"Color","sdk-support":{"basic functionality":{"js":"2.12.1","android":"10.11.0","ios":"10.11.0"}}},"hsla":{"doc":"Creates a color value from hue (range 0-360), saturation and lightness components (range 0-100), and an alpha component (range 0-1). If any component is out of range, the expression is an error.","group":"Color","sdk-support":{"basic functionality":{"js":"2.12.1","android":"10.11.0","ios":"10.11.0"}}},"get":{"doc":"Retrieves a property value from the current feature\'s properties, or from another object if a second argument is provided. Returns `null` if the requested property is missing.","group":"Lookup","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"has":{"doc":"Tests for the presence of an property value in the current feature\'s properties, or from another object if a second argument is provided.","group":"Lookup","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"length":{"doc":"Returns the length of an array or string.","group":"Lookup","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"properties":{"doc":"Returns the feature properties object. Note that in some cases, it may be more efficient to use `[\\"get\\", \\"property_name\\"]` directly.","group":"Feature data","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"feature-state":{"doc":"Retrieves a property value from the current feature\'s state. Returns `null` if the requested property is not present on the feature\'s state. A feature\'s state is not part of the GeoJSON or vector tile data, and must be set programmatically on each feature. Features are identified by their `id` attribute, which must be an integer or a string that can be cast to an integer. Note that [\\"feature-state\\"] can only be used with paint properties that support data-driven styling.","group":"Feature data","sdk-support":{"basic functionality":{"js":"0.46.0","android":"10.0.0","ios":"10.0.0"}}},"geometry-type":{"doc":"Returns the feature\'s geometry type: `Point`, `LineString` or `Polygon`. `Multi*` feature types return the singular forms.","group":"Feature data","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"worldview":{"doc":"Returns the current worldview being used.","group":"Lookup","experimental":true,"sdk-support":{"basic functionality":{"js":"3.13.0","android":"11.13.0","ios":"11.13.0"}}},"id":{"doc":"Returns the feature\'s id, if it has one.","group":"Feature data","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"zoom":{"doc":"Returns the current zoom level. Note that in style layout and paint properties, [\\"zoom\\"] may only appear as the input to a top-level \\"step\\" or \\"interpolate\\" expression.","group":"Camera","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"pitch":{"doc":"Returns the current pitch in degrees. `[\\"pitch\\"]` may only be used in the `filter` expression for a `symbol` layer.","group":"Camera","sdk-support":{"basic functionality":{"js":"2.6.0","android":"10.9.0","ios":"10.9.0"}}},"distance-from-center":{"doc":"Returns the distance of a `symbol` instance from the center of the map. The distance is measured in pixels divided by the height of the map container. It measures 0 at the center, decreases towards the camera and increase away from the camera. For example, if the height of the map is 1000px, a value of -1 means 1000px away from the center towards the camera, and a value of 1 means a distance of 1000px away from the camera from the center. `[\\"distance-from-center\\"]` may only be used in the `filter` expression for a `symbol` layer.","group":"Camera","sdk-support":{"basic functionality":{"js":"2.6.0","android":"10.9.0","ios":"10.9.0"}}},"measure-light":{"doc":"Returns a requested property of the light configuration based on the supplied options. Currently the only supported option is `brightness` which returns the global brightness value of the lights on a scale of 0 to 1, where 0 means total darkness and 1 means full brightness. This expression works only with 3D light, i.e. when `lights` root property is defined.","group":"Lookup","sdk-support":{"basic functionality":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}}},"heatmap-density":{"doc":"Returns the kernel density estimation of a pixel in a heatmap layer, which is a relative measure of how many data points are crowded around a particular pixel. Can only be used in the `heatmap-color` property.","group":"Heatmap","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"line-progress":{"doc":"Returns the progress along a gradient line. Can only be used in the `line-gradient` and `line-z-offset` properties.","group":"Feature data","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.5.0","ios":"4.6.0"}}},"sky-radial-progress":{"doc":"Returns the distance of a point on the sky from the sun position. Returns 0 at sun position and 1 when the distance reaches `sky-gradient-radius`. Can only be used in the `sky-gradient` property.","group":"sky","sdk-support":{"basic functionality":{"js":"2.0.0","ios":"10.0.0","android":"10.0.0"}}},"accumulated":{"doc":"Returns the value of a cluster property accumulated so far. Can only be used in the `clusterProperties` option of a clustered GeoJSON source.","group":"Feature data","sdk-support":{"basic functionality":{"js":"0.53.0","android":"8.4.0","ios":"5.5.0"}}},"+":{"doc":"Returns the sum of the inputs.","group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"*":{"doc":"Returns the product of the inputs.","group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"-":{"doc":"For two inputs, returns the result of subtracting the second input from the first. For a single input, returns the result of subtracting it from 0.","group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"/":{"doc":"Returns the result of floating point division of the first input by the second.","group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"%":{"doc":"Returns the remainder after integer division of the first input by the second.","group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"^":{"doc":"Returns the result of raising the first input to the power specified by the second.","group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"sqrt":{"doc":"Returns the square root of the input.","group":"Math","sdk-support":{"basic functionality":{"js":"0.42.0","android":"6.0.0","ios":"4.0.0"}}},"log10":{"doc":"Returns the base-ten logarithm of the input.","group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"ln":{"doc":"Returns the natural logarithm of the input.","group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"log2":{"doc":"Returns the base-two logarithm of the input.","group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"sin":{"doc":"Returns the sine of the input, interpreted as radians.","group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"cos":{"doc":"Returns the cosine of the input, interpreted as radians.","group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"tan":{"doc":"Returns the tangent of the input, interpreted as radians.","group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"asin":{"doc":"Returns the arcsine of the input, in radians between âÏ/2 and Ï/2.","group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"acos":{"doc":"Returns the arccosine of the input, in radians between âÏ/2 and Ï/2.","group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"atan":{"doc":"Returns the arctangent of the input, in radians between âÏ/2 and Ï/2.","group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"min":{"doc":"Returns the minimum value of the inputs.","group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"max":{"doc":"Returns the maximum value of the inputs.","group":"Math","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"round":{"doc":"Rounds the input to the nearest integer. Halfway values are rounded away from zero. For example, `[\\"round\\", -1.5]` evaluates to -2.","group":"Math","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.0.0","ios":"4.0.0"}}},"abs":{"doc":"Returns the absolute value of the input.","group":"Math","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.0.0","ios":"4.0.0"}}},"ceil":{"doc":"Returns the smallest integer that is greater than or equal to the input.","group":"Math","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.0.0","ios":"4.0.0"}}},"floor":{"doc":"Returns the largest integer that is less than or equal to the input.","group":"Math","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.0.0","ios":"4.0.0"}}},"distance":{"doc":"Returns the shortest distance in meters between the evaluated feature and the input geometry. The input value can be a valid GeoJSON of type `Point`, `MultiPoint`, `LineString`, `MultiLineString`, `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Distance values returned may vary in precision due to loss in precision from encoding geometries, particularly below zoom level 13.","group":"Math","sdk-support":{"basic functionality":{"js":"3.0.0","android":"9.2.0","ios":"5.9.0"}}},"==":{"doc":"Returns `true` if the input values are equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.","group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"!=":{"doc":"Returns `true` if the input values are not equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.","group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},">":{"doc":"Returns `true` if the first input is strictly greater than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.","group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"<":{"doc":"Returns `true` if the first input is strictly less than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.","group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},">=":{"doc":"Returns `true` if the first input is greater than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.","group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"<=":{"doc":"Returns `true` if the first input is less than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.","group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"collator":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"all":{"doc":"Returns `true` if all the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `false`, the result is `false` and no further input expressions are evaluated.","group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"any":{"doc":"Returns `true` if any of the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `true`, the result is `true` and no further input expressions are evaluated.","group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"!":{"doc":"Logical negation. Returns `true` if the input is `false`, and `false` if the input is `true`.","group":"Decision","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"within":{"doc":"Returns `true` if the evaluated feature is fully contained inside a boundary of the input geometry, `false` otherwise. The input value can be a valid GeoJSON of type `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Supported features for evaluation:\\n- `Point`: Returns `false` if a point is on the boundary or falls outside the boundary.\\n- `LineString`: Returns `false` if any part of a line falls outside the boundary, the line intersects the boundary, or a line\'s endpoint is on the boundary.","group":"Decision","sdk-support":{"basic functionality":{"js":"1.9.0","android":"9.1.0","ios":"5.8.0"}}},"is-supported-script":{"doc":"Returns `true` if the input string is expected to render legibly. Returns `false` if the input string contains sections that cannot be rendered without potential loss of meaning (e.g. Indic scripts that require complex text shaping, or right-to-left scripts if the the `mapbox-gl-rtl-text` plugin is not in use in Mapbox GL JS).","group":"String","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.6.0","ios":"4.1.0"}}},"upcase":{"doc":"Returns the input string converted to uppercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.","group":"String","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"downcase":{"doc":"Returns the input string converted to lowercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.","group":"String","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"concat":{"doc":"Returns a `string` consisting of the concatenation of the inputs. Each input is converted to a string as if by `to-string`.","group":"String","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}}},"resolved-locale":{"doc":"Returns the IETF language tag of the locale being used by the provided `collator`. This can be used to determine the default system locale, or to determine if a requested locale was successfully loaded.","group":"String","sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.5.0","ios":"4.2.0"}}},"raster-value":{"doc":"Returns the raster value of a pixel computed via `raster-color-mix`. Can only be used in the `raster-color` property.","group":"Raster Colorization","sdk-support":{"basic functionality":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}}},"raster-particle-speed":{"doc":"Returns the length of the particle velocity vector. Can only be used in the `raster-particle-color` property.","group":"Raster Particle Animation","sdk-support":{"basic functionality":{"js":"3.3.0","android":"11.4.0","ios":"11.4.0"}}},"random":{"doc":"Returns a random value in the specified range (first two input numbers) based on a supplied seed (third input). The seed can be an expression or a constant number or string value.","group":"Math","sdk-support":{"basic functionality":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}}}}},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"doc":"The start and end distance range in which fog fades from fully transparent to fully opaque. The distance to the point at the center of the map is defined as zero, so that negative range values are closer to the camera, and positive values are farther away.","example":[0.5,10],"sdk-support":{"basic functionality":{"js":"2.3.0","android":"10.6.0","ios":"10.6.0"}}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"use-theme":true,"transition":true,"doc":"The color of the atmosphere region immediately below the horizon and within the `range` and above the horizon and within `horizon-blend`. Using opacity is recommended only for smoothly transitioning fog on/off as anything less than 100% opacity results in more tiles loaded and drawn.","sdk-support":{"basic functionality":{"js":"2.3.0","android":"10.6.0","ios":"10.6.0"}}},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"use-theme":true,"transition":true,"doc":"The color of the atmosphere region above the horizon, `high-color` extends further above the horizon than the `color` property and its spread can be controlled with `horizon-blend`. The opacity can be set to `0` to remove the high atmosphere color contribution.","sdk-support":{"basic functionality":{"js":"2.9.0","android":"10.6.0","ios":"10.6.0"}}},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"use-theme":true,"transition":true,"doc":"The color of the region above the horizon and after the end of the `horizon-blend` contribution. The opacity can be set to `0` to have a transparent background.","sdk-support":{"basic functionality":{"js":"2.9.0","android":"10.6.0","ios":"10.6.0"}}},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true,"doc":"Horizon blend applies a smooth fade from the color of the atmosphere to the color of space. A value of zero leaves a sharp transition from atmosphere to space. Increasing the value blends the color of atmosphere into increasingly high angles of the sky.","sdk-support":{"basic functionality":{"js":"2.3.0","android":"10.6.0","ios":"10.6.0"}}},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true,"doc":"A value controlling the star intensity where `0` will show no stars and `1` will show stars at their maximum intensity.","sdk-support":{"basic functionality":{"js":"2.9.0","android":"10.6.0","ios":"10.6.0"}}},"vertical-range":{"type":"array","default":[0,0],"minimum":0,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"doc":"An array of two number values, specifying the vertical range, measured in meters, over which the fog should gradually fade out. When both parameters are set to zero, the fog will be rendered without any vertical constraints.","sdk-support":{"basic functionality":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}}}},"snow":{"density":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],11,0,13,0.85],"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true,"doc":"Snow particles density. Controls the overall particles number.","sdk-support":{"basic functionality":{"android":"11.9.0","ios":"11.9.0","js":"3.9.0"}}},"intensity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true,"doc":"Snow particles movement factor. Controls the overall particles movement speed.","sdk-support":{"basic functionality":{"android":"11.9.0","ios":"11.9.0","js":"3.9.0"}}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"use-theme":true,"transition":true,"doc":"Snow particles color.","sdk-support":{"basic functionality":{"android":"11.9.0","ios":"11.9.0","js":"3.9.0"}}},"opacity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true,"doc":"Snow particles opacity.","sdk-support":{"basic functionality":{"android":"11.9.0","ios":"11.9.0","js":"3.9.0"}}},"vignette":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],11,0,13,0.3],"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true,"doc":"Snow vignette screen-space effect. Adds snow tint to screen corners","sdk-support":{"basic functionality":{"android":"11.9.0","ios":"11.9.0","js":"3.9.0"}}},"vignette-color":{"type":"color","property-type":"data-constant","default":"#ffffff","experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"use-theme":true,"transition":true,"doc":"Snow vignette screen-space corners tint color.","sdk-support":{"basic functionality":{"android":"11.9.0","ios":"11.9.0","js":"3.9.0"}}},"center-thinning":{"type":"number","property-type":"data-constant","default":0.4,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true,"doc":"Thinning factor of snow particles from center. 0 - no thinning. 1 - maximal central area thinning.","sdk-support":{"basic functionality":{"android":"11.9.0","ios":"11.9.0","js":"3.9.0"}}},"direction":{"type":"array","default":[0,50],"minimum":0,"maximum":360,"length":2,"value":"number","property-type":"data-constant","transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"doc":"Main snow particles direction. Azimuth and polar angles","example":[0,45],"sdk-support":{"basic functionality":{"android":"11.9.0","ios":"11.9.0","js":"3.9.0"}}},"flake-size":{"type":"number","property-type":"data-constant","default":0.71,"minimum":0,"maximum":5,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true,"doc":"Snow flake particle size. Correlates with individual particle screen size","sdk-support":{"basic functionality":{"android":"11.9.0","ios":"11.9.0","js":"3.9.0"}}}},"rain":{"density":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],11,0,13,0.5],"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true,"doc":"Rain particles density. Controls the overall screen density of the rain.","sdk-support":{"basic functionality":{"android":"11.9.0","ios":"11.9.0","js":"3.9.0"}}},"intensity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true,"doc":"Rain particles movement factor. Controls the overall rain particles speed","sdk-support":{"basic functionality":{"android":"11.9.0","ios":"11.9.0","js":"3.9.0"}}},"color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["measure-light","brightness"],0,"#03113d",0.3,"#a8adbc"],"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"use-theme":true,"transition":true,"doc":"Individual rain particle dorplets color.","sdk-support":{"basic functionality":{"android":"11.9.0","ios":"11.9.0","js":"3.9.0"}}},"opacity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["measure-light","brightness"],0,0.88,1,0.7],"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true,"doc":"Rain particles opacity.","sdk-support":{"basic functionality":{"android":"11.9.0","ios":"11.9.0","js":"3.9.0"}}},"vignette":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],11,0,13,1],"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true,"doc":"Screen-space vignette rain tinting effect intensity.","sdk-support":{"basic functionality":{"android":"11.9.0","ios":"11.9.0","js":"3.9.0"}}},"vignette-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["measure-light","brightness"],0,"#001736",0.3,"#464646"],"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"use-theme":true,"transition":true,"doc":"Rain vignette screen-space corners tint color.","sdk-support":{"basic functionality":{"android":"11.9.0","ios":"11.9.0","js":"3.9.0"}}},"center-thinning":{"type":"number","property-type":"data-constant","default":0.57,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true,"doc":"Thinning factor of rain particles from center. 0 - no thinning. 1 - maximal central area thinning.","sdk-support":{"basic functionality":{"android":"11.9.0","ios":"11.9.0","js":"3.9.0"}}},"direction":{"type":"array","default":[0,80],"minimum":0,"maximum":360,"length":2,"value":"number","property-type":"data-constant","transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"doc":"Main rain particles direction. Azimuth and polar angles.","example":[0,45],"sdk-support":{"basic functionality":{"android":"11.9.0","ios":"11.9.0","js":"3.9.0"}}},"droplet-size":{"type":"array","default":[2.6,18.2],"minimum":0,"maximum":50,"length":2,"value":"number","property-type":"data-constant","transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"doc":"Rain droplet size. x - normal to direction, y - along direction","example":[0,45],"sdk-support":{"basic functionality":{"android":"11.9.0","ios":"11.9.0","js":"3.9.0"}}},"distortion-strength":{"type":"number","property-type":"data-constant","default":0.7,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true,"doc":"Rain particles screen-space distortion strength.","sdk-support":{"basic functionality":{"android":"11.9.0","ios":"11.9.0","js":"3.9.0"}}}},"camera":{"camera-projection":{"doc":"Camera projection describes how 3D world geometry get projected into 2D screen","type":"enum","values":{"perspective":{"doc":"linear projection where distant objects appear smaller than closer objects. Lines that are parallel seem to converge towards a vanishing point"},"orthographic":{"doc":"Projection where objects are of the same scale regardless of whether they are far away or near to the camera. Parallel lines remains parallel and there is no vanishing point."}},"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"sdk-support":{"basic functionality":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}},"default":"perspective","property-type":"data-constant"}},"colorTheme":{"data":{"type":"string","doc":"Expects a base64 encoded PNG image which represents a cube strip LUT. The height of the image cannot exceed 32 pixels and the width must be equal to the height squared.","transition":false,"property-type":"data-constant","expression":{"interpolated":false}}},"indoor":{"floorplanFeaturesetId":{"type":"string","doc":"An ID of a featureset to be used to query indoor floorplans.","experimental":true,"transition":false,"property-type":"data-constant","expression":{"interpolated":false}},"buildingFeaturesetId":{"type":"string","doc":"An ID of a featureset to be used to add interactivity for building selection.","experimental":true,"transition":false,"property-type":"data-constant","expression":{"interpolated":false}}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{"doc":"The position of the light source is aligned to the rotation of the map."},"viewport":{"doc":"The position of the light source is aligned to the rotation of the viewport."}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"doc":"Whether extruded geometries are lit relative to the map or viewport.","example":"map","sdk-support":{"basic functionality":{"js":"0.27.0","android":"5.1.0","ios":"3.6.0"}}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"doc":"Position of the light source relative to lit (extruded) geometries, in [r radial coordinate, a azimuthal angle, p polar angle] where r indicates the distance from the center of the base of an object to its light, a indicates the position of the light relative to 0Â° (0Â° when `light.anchor` is set to `viewport` corresponds to the top of the viewport, or 0Â° when `light.anchor` is set to `map` corresponds to due north, and degrees proceed clockwise), and p indicates the height of the light (from 0Â°, directly above, to 180Â°, directly below).","example":[1.5,90,80],"sdk-support":{"basic functionality":{"js":"0.27.0","android":"5.1.0","ios":"3.6.0"}}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"use-theme":true,"transition":true,"doc":"Color tint for lighting extruded geometries.","sdk-support":{"basic functionality":{"js":"0.27.0","android":"5.1.0","ios":"3.6.0"}}},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"doc":"Intensity of lighting (on a scale from 0 to 1). Higher numbers will present as more extreme contrast.","sdk-support":{"basic functionality":{"js":"0.27.0","android":"5.1.0","ios":"3.6.0"}}}},"projection":{"name":{"type":"enum","values":{"albers":{"doc":"An Albers equal-area projection centered on the continental United States. You can configure the projection for a different region by setting `center` and `parallels` properties. You may want to set max bounds to constrain the map to the relevant region."},"equalEarth":{"doc":"An Equal Earth projection."},"equirectangular":{"doc":"An Equirectangular projection. This projection is very similar to the Plate CarrÃ©e projection."},"lambertConformalConic":{"doc":"A Lambert conformal conic projection. You can configure the projection for a region by setting `center` and `parallels` properties. You may want to set max bounds to constrain the map to the relevant region."},"mercator":{"doc":"The Mercator projection is the default projection."},"naturalEarth":{"doc":"A Natural Earth projection."},"winkelTripel":{"doc":"A Winkel Tripel projection."},"globe":{"doc":"A globe projection."}},"default":"mercator","doc":"The name of the projection to be used for rendering the map.","required":true,"sdk-support":{"basic functionality":{"js":"2.6.0","ios":"10.5.0","android":"10.5.0"}}},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"doc":"The reference longitude and latitude of the projection. `center` takes the form of [lng, lat]. This property is only configurable for conic projections (Albers and Lambert Conformal Conic). All other projections are centered on [0, 0].","example":[-96,37.5],"requires":[{"name":["albers","lambertConformalConic"]}],"sdk-support":{"basic functionality":{"js":"2.6.0"}}},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"doc":"The standard parallels of the projection, denoting the desired latitude range with minimal distortion. `parallels` takes the form of [lat0, lat1]. This property is only configurable for conic projections (Albers and Lambert Conformal Conic).","example":[29.5,45.5],"requires":[{"name":["albers","lambertConformalConic"]}],"sdk-support":{"basic functionality":{"js":"2.6.0"}}}},"terrain":{"source":{"type":"string","doc":"Name of a source of `raster_dem` type to be used for terrain elevation.","required":true,"sdk-support":{"basic functionality":{"js":"2.0.0","ios":"10.0.0","android":"10.0.0"}}},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"doc":"Exaggerates the elevation of the terrain by multiplying the data from the DEM with this value.","requires":["source"],"sdk-support":{"basic functionality":{"js":"2.0.0","ios":"10.0.0","android":"10.0.0"}}}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_building","paint_symbol","paint_raster","paint_raster-particle","paint_hillshade","paint_background","paint_sky","paint_model"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"doc":"Whether or not the fill should be antialiased.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"doc":"The opacity of the entire fill layer. In contrast to the `fill-color`, this value will also affect the 1px stroke around the fill, if the stroke is used.","transition":true,"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.21.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","doc":"The color of the filled part of this layer. This color can be specified as `rgba` with an alpha component and the color\'s opacity will not affect the opacity of the 1px stroke, if it is used.","use-theme":true,"transition":true,"requires":[{"!":"fill-pattern"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.19.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","doc":"The outline color of the fill. Matches the value of `fill-color` if unspecified.","use-theme":true,"transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.19.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","doc":"The geometry\'s offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{"doc":"The fill is translated relative to the map."},"viewport":{"doc":"The fill is translated relative to the viewport."}},"doc":"Controls the frame of reference for `fill-translate`.","default":"map","requires":["fill-translate"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"doc":"Name of image in sprite to use for drawing image fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.49.0","android":"6.5.0","ios":"4.4.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-pattern-cross-fade":{"type":"number","property-type":"data-constant","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"requires":["line-pattern"],"sdk-support":{"basic functionality":{"js":"3.12.0","android":"11.14.0","ios":"11.14.0"}},"doc":"Controls the transition progress between the image variants of fill-pattern. Zero means the first variant is used, one is the second, and in between they are blended together. Both images should be the same size and have the same type (either raster or vector)."},"fill-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"units":"intensity","doc":"Controls the intensity of light emitted on the source features.","requires":["lights"],"sdk-support":{"basic functionality":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}},"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"fill-z-offset":{"type":"number","doc":"Specifies an uniform elevation in meters. Note: If the value is zero, the layer will be rendered on the ground. Non-zero values will elevate the layer from the sea level, which can cause it to be rendered below the terrain.","default":0,"minimum":0,"transition":true,"experimental":true,"sdk-support":{"basic functionality":{"js":"3.7.0"},"data-driven styling":{"js":"3.7.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-bridge-guard-rail-color":{"type":"color","default":"rgba(241, 236, 225, 255)","doc":"The color of bridge guard rail.","experimental":true,"private":true,"use-theme":true,"transition":true,"sdk-support":{"basic functionality":{"android":"11.11.0","ios":"11.11.0","js":"3.14.0"},"data-driven styling":{"android":"11.11.0","ios":"11.11.0","js":"3.14.0"}},"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature"]},"property-type":"data-driven"},"fill-tunnel-structure-color":{"type":"color","default":"rgba(241, 236, 225, 255)","doc":"The color of tunnel structures (tunnel entrance and tunnel walls).","use-theme":true,"transition":true,"experimental":true,"private":true,"sdk-support":{"basic functionality":{"android":"11.11.0","ios":"11.11.0","js":"3.14.0"},"data-driven styling":{"android":"11.11.0","ios":"11.11.0","js":"3.14.0"}},"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"doc":"The opacity of the entire fill extrusion layer. This is rendered on a per-layer, not per-feature, basis, and data-driven styling is not available.","transition":true,"sdk-support":{"basic functionality":{"js":"0.27.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","doc":"The base color of the extruded fill. The extrusion\'s surfaces will be shaded differently based on this color in combination with the root `light` settings. If this color is specified as `rgba` with an alpha component, the alpha component will be ignored; use `fill-extrusion-opacity` to set layer opacity.","use-theme":true,"transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"sdk-support":{"basic functionality":{"js":"0.27.0","android":"5.1.0","ios":"3.6.0"},"data-driven styling":{"js":"0.27.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","doc":"The geometry\'s offset. Values are [x, y] where negatives indicate left and up (on the flat plane), respectively.","sdk-support":{"basic functionality":{"js":"0.27.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{"doc":"The fill extrusion is translated relative to the map."},"viewport":{"doc":"The fill extrusion is translated relative to the viewport."}},"doc":"Controls the frame of reference for `fill-extrusion-translate`.","default":"map","requires":["fill-extrusion-translate"],"sdk-support":{"basic functionality":{"js":"0.27.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"doc":"Name of image in sprite to use for drawing images on extruded fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{"js":"0.27.0","android":"5.1.0","ios":"3.6.0"},"data-driven styling":{"js":"0.49.0","android":"6.5.0","ios":"4.4.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-pattern-cross-fade":{"type":"number","property-type":"data-constant","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"requires":["line-pattern"],"sdk-support":{"basic functionality":{"js":"3.12.0","android":"11.14.0","ios":"11.14.0"}},"doc":"Controls the transition progress between the image variants of fill-extrusion-pattern. Zero means the first variant is used, one is the second, and in between they are blended together. Both images should be the same size and have the same type (either raster or vector)."},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","doc":"The height with which to extrude this layer.","transition":true,"sdk-support":{"basic functionality":{"js":"0.27.0","android":"5.1.0","ios":"3.6.0"},"data-driven styling":{"js":"0.27.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","doc":"The height with which to extrude the base of this layer. Must be less than or equal to `fill-extrusion-height`.","transition":true,"requires":["fill-extrusion-height"],"sdk-support":{"basic functionality":{"js":"0.27.0","android":"5.1.0","ios":"3.6.0"},"data-driven styling":{"js":"0.27.0","android":"5.1.0","ios":"3.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-height-alignment":{"type":"enum","experimental":true,"values":{"terrain":{"doc":"The fill extrusion height follows terrain slope."},"flat":{"doc":"The fill extrusion height is flat over terrain."}},"doc":"Controls the behavior of fill extrusion height over terrain","default":"flat","requires":["fill-extrusion-height"],"sdk-support":{"basic functionality":{"js":"3.8.0","android":"11.8.0","ios":"11.8.0"}},"property-type":"data-constant"},"fill-extrusion-base-alignment":{"type":"enum","experimental":true,"values":{"terrain":{"doc":"The fill extrusion base follows terrain slope."},"flat":{"doc":"The fill extrusion base is flat over terrain."}},"doc":"Controls the behavior of fill extrusion base over terrain","default":"terrain","requires":["fill-extrusion-base"],"sdk-support":{"basic functionality":{"js":"3.8.0","android":"11.8.0","ios":"11.8.0"}},"property-type":"data-constant"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"doc":"Whether to apply a vertical gradient to the sides of a fill-extrusion layer. If true, sides will be shaded slightly darker farther down.","transition":false,"sdk-support":{"basic functionality":{"js":"0.50.0","android":"7.0.0","ios":"4.7.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"doc":"Controls the intensity of shading near ground and concave angles between walls. Default value 0.0 disables ambient occlusion and values around 0.3 provide the most plausible results for buildings.","sdk-support":{"basic functionality":{"js":"3.0.0","android":"10.7.0","ios":"10.7.0"}}},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"doc":"Shades area near ground and concave angles between walls where the radius defines only vertical impact. Default value 3.0 corresponds to height of one floor and brings the most plausible results for buildings. This property works only with legacy light. When 3D lights are enabled `fill-extrusion-ambient-occlusion-wall-radius` and `fill-extrusion-ambient-occlusion-ground-radius` are used instead.","requires":["fill-extrusion-edge-radius"],"sdk-support":{"basic functionality":{"js":"3.0.0","android":"10.7.0","ios":"10.7.0"}}},"fill-extrusion-ambient-occlusion-wall-radius":{"property-type":"data-constant","type":"number","experimental":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"doc":"Shades area near ground and concave angles between walls where the radius defines only vertical impact. Default value 3.0 corresponds to height of one floor and brings the most plausible results for buildings.","requires":["lights","fill-extrusion-edge-radius"],"sdk-support":{"basic functionality":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}}},"fill-extrusion-ambient-occlusion-ground-radius":{"property-type":"data-constant","type":"number","experimental":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"doc":"The extent of the ambient occlusion effect on the ground beneath the extruded buildings in meters.","requires":["lights"],"sdk-support":{"basic functionality":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}}},"fill-extrusion-ambient-occlusion-ground-attenuation":{"property-type":"data-constant","type":"number","experimental":true,"default":0.69,"minimum":0,"maximum":1,"doc":"Provides a control to futher fine-tune the look of the ambient occlusion on the ground beneath the extruded buildings. Lower values give the effect a more solid look while higher values make it smoother.","requires":["lights"],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"sdk-support":{"basic functionality":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}}},"fill-extrusion-flood-light-color":{"property-type":"data-constant","type":"color","experimental":true,"default":"#ffffff","doc":"The color of the flood light effect on the walls of the extruded buildings.","requires":["lights"],"use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"sdk-support":{"basic functionality":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}}},"fill-extrusion-flood-light-intensity":{"property-type":"data-constant","type":"number","experimental":true,"default":0,"minimum":0,"maximum":1,"doc":"The intensity of the flood light color.","requires":["lights"],"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"sdk-support":{"basic functionality":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}}},"fill-extrusion-flood-light-wall-radius":{"property-type":"data-driven","type":"number","experimental":true,"units":"meters","default":0,"minimum":0,"doc":"The extent of the flood light effect on the walls of the extruded buildings in meters.","requires":["lights"],"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]},"sdk-support":{"basic functionality":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"},"data-driven styling":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}}},"fill-extrusion-flood-light-ground-radius":{"property-type":"data-driven","type":"number","experimental":true,"units":"meters","default":0,"doc":"The extent of the flood light effect on the ground beneath the extruded buildings in meters. Note: this experimental property is evaluated once per tile, during tile initialization. Changing the property value could trigger tile reload. The `feature-state` styling is deprecated and will get removed soon.","requires":["lights"],"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]},"sdk-support":{"basic functionality":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"},"data-driven styling":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}}},"fill-extrusion-flood-light-ground-attenuation":{"property-type":"data-constant","type":"number","experimental":true,"default":0.69,"minimum":0,"maximum":1,"doc":"Provides a control to futher fine-tune the look of the flood light on the ground beneath the extruded buildings. Lower values give the effect a more solid look while higher values make it smoother.","requires":["lights"],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"sdk-support":{"basic functionality":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}}},"fill-extrusion-vertical-scale":{"property-type":"data-constant","type":"number","experimental":true,"default":1,"minimum":0,"doc":"A global multiplier that can be used to scale base, height, AO, and flood light of the fill extrusions.","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"sdk-support":{"basic functionality":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}}},"fill-extrusion-rounded-roof":{"property-type":"data-constant","type":"boolean","default":true,"experimental":true,"doc":"Indicates whether top edges should be rounded when fill-extrusion-edge-radius has a value greater than 0. If false, rounded edges are only applied to the sides. Default is true.","requires":["fill-extrusion-edge-radius"],"transition":false,"sdk-support":{"basic functionality":{"js":"3.0.0","android":"10.10.0","ios":"10.10.0"}},"expression":{"interpolated":false,"parameters":["zoom"]}},"fill-extrusion-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"doc":"This parameter defines the range for the fade-out effect before an automatic content cutoff on pitched map views. Fade out is implemented by scaling down and removing buildings in the fade range in a staggered fashion. Opacity is not changed. The fade range is expressed in relation to the height of the map view. A value of 1.0 indicates that the content is faded to the same extent as the map\'s height in pixels, while a value close to zero represents a sharp cutoff. When the value is set to 0.0, the cutoff is completely disabled. Note: The property has no effect on the map if terrain is enabled.","transition":false,"expression":{"interpolated":false},"sdk-support":{"basic functionality":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}},"property-type":"data-constant"},"fill-extrusion-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"units":"intensity","doc":"Controls the intensity of light emitted on the source features.","requires":["lights"],"sdk-support":{"basic functionality":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"},"data-driven styling":{"js":"3.8.0","android":"11.8.0","ios":"11.8.0"}},"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"fill-extrusion-line-width":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"units":"meters","doc":"If a non-zero value is provided, it sets the fill-extrusion layer into wall rendering mode. The value is used to render the feature with the given width over the outlines of the geometry. Note: This property is experimental and some other fill-extrusion properties might not be supported with non-zero line width.","sdk-support":{"basic functionality":{"js":"3.7.0","android":"11.7.0","ios":"11.7.0"},"data-driven styling":{"js":"3.7.0","android":"11.7.0","ios":"11.7.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-cast-shadows":{"type":"boolean","default":true,"doc":"Enable/Disable shadow casting for this layer","transition":false,"sdk-support":{"basic functionality":{"js":"3.7.0","android":"11.8.0","ios":"11.8.0"}},"property-type":"data-constant"}},"paint_building":{"building-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"doc":"The opacity of the entire procedural buildings layer. This is rendered on a per-layer, not per-feature, basis, and data-driven styling is not available.","transition":true,"experimental":true,"private":true,"sdk-support":{"basic functionality":{}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"building-ambient-occlusion-wall-intensity":{"property-type":"data-constant","type":"number","default":0,"minimum":0,"maximum":1,"experimental":true,"private":true,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"doc":"Controls the intensity of shading concave angles between walls and building elements, such as facades and rooftop.","sdk-support":{"basic functionality":{}}},"building-ambient-occlusion-ground-intensity":{"property-type":"data-constant","type":"number","default":0,"minimum":0,"maximum":1,"experimental":true,"private":true,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"doc":"Controls the intensity of shading near ground","sdk-support":{"basic functionality":{}}},"building-ambient-occlusion-ground-radius":{"property-type":"data-constant","type":"number","experimental":true,"private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"doc":"The extent of the ambient occlusion effect on the ground beneath the procedural buildings in meters.","sdk-support":{"basic functionality":{}}},"building-ambient-occlusion-ground-attenuation":{"property-type":"data-constant","type":"number","experimental":true,"private":true,"default":0.69,"minimum":0,"maximum":1,"doc":"Provides a control to further fine-tune the look of the ambient occlusion on the ground beneath the procedural buildings. Lower values give the effect a more solid look while higher values make it smoother.","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"sdk-support":{"basic functionality":{}}},"building-vertical-scale":{"property-type":"data-constant","type":"number","experimental":true,"private":true,"default":1,"minimum":0,"doc":"A global multiplier that can be used to scale base and height of the procedural buildings.","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"sdk-support":{"basic functionality":{}}},"building-cast-shadows":{"type":"boolean","default":true,"doc":"Enable/Disable shadow casting for this layer","transition":false,"experimental":true,"private":true,"sdk-support":{"basic functionality":{}},"property-type":"data-constant"},"building-color":{"type":"color","default":"rgba(193, 154, 127, 1)","doc":"Color buildings. This can be styled using different building parts (e.g. windows, wall, roof, etc.). This won\'t be used if `building-roof-shape` has a value `flat`.","experimental":true,"private":true,"use-theme":true,"transition":false,"sdk-support":{"basic functionality":{},"data-driven styling":{}},"expression":{"interpolated":true,"parameters":["feature","feature-state"]},"property-type":"data-driven"},"building-emissive-strength":{"type":"number","default":0,"minimum":0,"doc":"Controls the intensity of light emitted on the source features.","experimental":true,"private":true,"sdk-support":{"basic functionality":{},"data-driven styling":{}},"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"property-type":"data-driven"}},"paint_line":{"line-opacity":{"type":"number","doc":"The opacity at which the line will be drawn.","default":1,"minimum":0,"maximum":1,"transition":true,"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.29.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-color":{"type":"color","doc":"The color with which the line will be drawn.","default":"#000000","use-theme":true,"transition":true,"requires":[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.23.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","doc":"The geometry\'s offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{"doc":"The line is translated relative to the map."},"viewport":{"doc":"The line is translated relative to the viewport."}},"doc":"Controls the frame of reference for `line-translate`.","default":"map","requires":["line-translate"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","doc":"Stroke thickness.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.39.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light","line-progress"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"doc":"Draws a line casing outside of a line\'s actual path. Value indicates the width of the inner gap.","transition":true,"units":"pixels","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.29.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"doc":"The line\'s offset. For linear features, a positive value offsets the line to the right, relative to the direction of the line, and a negative value to the left. For polygon features, a positive value results in an inset, and a negative value results in an outset.","transition":true,"units":"pixels","sdk-support":{"basic functionality":{"js":"0.12.1","android":"3.0.0","ios":"3.1.0"},"data-driven styling":{"js":"0.29.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","doc":"Blur applied to the line, in pixels.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.29.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","doc":"Specifies the lengths of the alternating dashes and gaps that form the dash pattern. The lengths are later scaled by the line width. To convert a dash length to pixels, multiply the length by the current line width. Note that GeoJSON sources with `lineMetrics: true` specified won\'t render dashed lines to the expected scale. Also note that zoom-dependent expressions will be evaluated only at integer zoom levels.","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"2.3.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"doc":"Name of image in sprite to use for drawing image lines. For seamless patterns, image width must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.49.0","android":"6.5.0","ios":"4.4.0"}},"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern-cross-fade":{"type":"number","property-type":"data-constant","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"requires":["line-pattern"],"sdk-support":{"basic functionality":{"js":"3.12.0","android":"11.14.0","ios":"11.14.0"}},"doc":"Controls the transition progress between the image variants of line-pattern. Zero means the first variant is used, one is the second, and in between they are blended together. Both images should be the same size and have the same type (either raster or vector)."},"line-gradient":{"type":"color","doc":"A gradient used to color a line feature at various distances along its length. Defined using a `step` or `interpolate` expression which outputs a color for each corresponding `line-progress` input value. `line-progress` is a percentage of the line feature\'s total length as measured on the webmercator projected coordinate plane (a `number` between `0` and `1`). Can only be used with GeoJSON sources that specify `\\"lineMetrics\\": true`.","example":["interpolate",["linear"],["line-progress"],0,"blue",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"use-theme":true,"transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"sdk-support":{"basic functionality":{"js":"0.45.0","android":"6.5.0","ios":"4.4.0"},"data-driven styling":{}},"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","doc":"The line part between [trim-start, trim-end] will be painted using `line-trim-color,` which is transparent by default to produce a route vanishing effect. The line trim-off offset is based on the whole line range [0.0, 1.0].","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"sdk-support":{"basic functionality":{"js":"2.9.0","android":"10.5.0","ios":"10.5.0"}},"property-type":"constant"},"line-trim-fade-range":{"type":"array","value":"number","doc":"The fade range for the trim-start and trim-end points is defined by the `line-trim-offset` property. The first element of the array represents the fade range from the trim-start point toward the end of the line, while the second element defines the fade range from the trim-end point toward the beginning of the line. The fade result is achieved by interpolating between `line-trim-color` and the color specified by the `line-color` or the `line-gradient` property.","experimental":true,"length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":["line-trim-offset",{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"sdk-support":{"basic functionality":{"js":"3.6.0","android":"11.6.0","ios":"11.6.0"}},"property-type":"data-constant"},"line-trim-color":{"type":"color","doc":"The color to be used for rendering the trimmed line section that is defined by the `line-trim-offset` property.","experimental":true,"default":"transparent","use-theme":true,"transition":true,"requires":["line-trim-offset",{"source":"geojson","has":{"lineMetrics":true}}],"sdk-support":{"basic functionality":{"js":"3.6.0","android":"11.6.0","ios":"11.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"units":"intensity","doc":"Controls the intensity of light emitted on the source features.","requires":["lights"],"sdk-support":{"basic functionality":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}},"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-border-width":{"type":"number","private":true,"doc":"The width of the line border. A value of zero means no border.","default":0,"minimum":0,"transition":true,"sdk-support":{"basic functionality":{"js":"3.0.0","android":"10.9.0","ios":"10.9.0"},"data-driven styling":{"js":"3.0.0","android":"10.9.0","ios":"10.9.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-border-color":{"type":"color","private":true,"doc":"The color of the line border. If line-border-width is greater than zero and the alpha value of this color is 0 (default), the color for the border will be selected automatically based on the line color.","default":"rgba(0, 0, 0, 0)","use-theme":true,"transition":true,"sdk-support":{"basic functionality":{"js":"3.0.0","android":"10.9.0","ios":"10.9.0"},"data-driven styling":{"js":"3.0.0","android":"10.9.0","ios":"10.9.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-occlusion-opacity":{"type":"number","default":0,"minimum":0,"maximum":1,"doc":"Opacity multiplier (multiplies line-opacity value) of the line part that is occluded by 3D objects. Value 0 hides occluded part, value 1 means the same opacity as non-occluded part. The property is not supported when `line-opacity` has data-driven styling.","sdk-support":{"basic functionality":{"js":"3.5.0","android":"11.5.0","ios":"11.5.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"property-type":"data-constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","doc":"Circle radius.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.18.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","doc":"The fill color of the circle.","use-theme":true,"transition":true,"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.18.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"doc":"Amount to blur the circle. 1 blurs the circle such that only the centerpoint is full opacity. Setting a negative value renders the blur as an inner glow effect.","transition":true,"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.20.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","doc":"The opacity at which the circle will be drawn.","default":1,"minimum":0,"maximum":1,"transition":true,"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.20.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","doc":"The geometry\'s offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{"doc":"The circle is translated relative to the map."},"viewport":{"doc":"The circle is translated relative to the viewport."}},"doc":"Controls the frame of reference for `circle-translate`.","default":"map","requires":["circle-translate"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{"doc":"Circles are scaled according to their apparent distance to the camera."},"viewport":{"doc":"Circles are not scaled."}},"default":"map","doc":"Controls the scaling behavior of the circle when the map is pitched.","sdk-support":{"basic functionality":{"js":"0.21.0","android":"4.2.0","ios":"3.4.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{"doc":"The circle is aligned to the plane of the map."},"viewport":{"doc":"The circle is aligned to the plane of the viewport."}},"default":"viewport","doc":"Orientation of circle when map is pitched.","sdk-support":{"basic functionality":{"js":"0.39.0","android":"5.2.0","ios":"3.7.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","doc":"The width of the circle\'s stroke. Strokes are placed outside of the `circle-radius`.","sdk-support":{"basic functionality":{"js":"0.29.0","android":"5.0.0","ios":"3.5.0"},"data-driven styling":{"js":"0.29.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","doc":"The stroke color of the circle.","use-theme":true,"transition":true,"sdk-support":{"basic functionality":{"js":"0.29.0","android":"5.0.0","ios":"3.5.0"},"data-driven styling":{"js":"0.29.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","doc":"The opacity of the circle\'s stroke.","default":1,"minimum":0,"maximum":1,"transition":true,"sdk-support":{"basic functionality":{"js":"0.29.0","android":"5.0.0","ios":"3.5.0"},"data-driven styling":{"js":"0.29.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"units":"intensity","doc":"Controls the intensity of light emitted on the source features.","requires":["lights"],"sdk-support":{"basic functionality":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}},"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","doc":"Radius of influence of one heatmap point in pixels. Increasing the value makes the heatmap smoother, but less detailed. `queryRenderedFeatures` on heatmap layers will return points within this radius.","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"data-driven styling":{"js":"0.43.0","android":"6.0.0","ios":"4.0.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"doc":"A measure of how much an individual point contributes to the heatmap. A value of 10 would be equivalent to having 10 points of weight 1 in the same spot. Especially useful when combined with clustering.","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"data-driven styling":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"doc":"Similar to `heatmap-weight` but controls the intensity of the heatmap globally. Primarily used for adjusting the heatmap based on zoom level.","sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"doc":"Defines the color of each pixel based on its density value in a heatmap. Should be an expression that uses `[\\"heatmap-density\\"]` as input.","use-theme":true,"transition":false,"sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"},"data-driven styling":{}},"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","doc":"The global opacity at which the heatmap layer will be drawn.","default":1,"minimum":0,"maximum":1,"transition":true,"sdk-support":{"basic functionality":{"js":"0.41.0","android":"6.0.0","ios":"4.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"doc":"The opacity at which the icon will be drawn.","type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.33.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-occlusion-opacity":{"doc":"The opacity at which the icon will be drawn in case of being depth occluded. Absent value means full occlusion against terrain only.","type":"number","minimum":0,"maximum":1,"default":0,"transition":true,"requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"3.5.0","android":"11.5.0","ios":"11.6.0"},"data-driven styling":{"js":"3.5.0","android":"11.5.0","ios":"11.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"units":"intensity","doc":"Controls the intensity of light emitted on the source features.","requires":["lights"],"sdk-support":{"basic functionality":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"},"data-driven styling":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}},"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"text-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"units":"intensity","doc":"Controls the intensity of light emitted on the source features.","requires":["lights"],"sdk-support":{"basic functionality":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"},"data-driven styling":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}},"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","use-theme":true,"transition":true,"doc":"The color of the icon. This can only be used with [SDF icons](/help/troubleshooting/using-recolorable-images-in-mapbox-maps/).","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.33.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","use-theme":true,"transition":true,"doc":"The color of the icon\'s halo. Icon halos can only be used with [SDF icons](/help/troubleshooting/using-recolorable-images-in-mapbox-maps/).","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.33.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","doc":"Distance of halo to the icon outline.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.33.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","doc":"Fade out the halo towards the outside.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.33.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","doc":"Distance that the icon\'s anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.","requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{"doc":"Icons are translated relative to the map."},"viewport":{"doc":"Icons are translated relative to the viewport."}},"doc":"Controls the frame of reference for `icon-translate`.","default":"map","requires":["icon-image","icon-translate"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image-cross-fade":{"type":"number","property-type":"data-constant","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"requires":["icon-image"],"sdk-support":{"basic functionality":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}},"doc":"Controls the transition progress between the image variants of icon-image. Zero means the first variant is used, one is the second, and in between they are blended together. . Both images should be the same size and have the same type (either raster or vector)."},"text-opacity":{"type":"number","doc":"The opacity at which the text will be drawn.","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.33.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-occlusion-opacity":{"type":"number","doc":"The opacity at which the text will be drawn in case of being depth occluded. Absent value means full occlusion against terrain only.","minimum":0,"maximum":1,"default":0,"transition":true,"requires":["text-field"],"sdk-support":{"basic functionality":{"js":"3.5.0","android":"11.5.0","ios":"11.6.0"},"data-driven styling":{"js":"3.5.0","android":"11.5.0","ios":"11.6.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-color":{"type":"color","doc":"The color with which the text will be drawn.","default":"#000000","use-theme":true,"transition":true,"overridable":true,"requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.33.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","use-theme":true,"transition":true,"doc":"The color of the text\'s halo, which helps it stand out from backgrounds.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.33.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","doc":"Distance of halo to the font outline. Max text halo width is 1/4 of the font-size.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.33.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","doc":"The halo\'s fadeout distance towards the outside.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"},"data-driven styling":{"js":"0.33.0","android":"5.0.0","ios":"3.5.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","doc":"Distance that the text\'s anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.","requires":["text-field"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{"doc":"The text is translated relative to the map."},"viewport":{"doc":"The text is translated relative to the viewport."}},"doc":"Controls the frame of reference for `text-translate`.","default":"map","requires":["text-field","text-translate"],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-color-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":false,"doc":"Increase or reduce the saturation of the symbol icon.","sdk-support":{"basic functionality":{"js":"3.1.0","android":"11.1.0","ios":"11.1.0"}},"expression":{"interpolated":false},"property-type":"data-constant"},"icon-color-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":false,"doc":"Increase or reduce the contrast of the symbol icon.","sdk-support":{"basic functionality":{"js":"3.5.0","android":"11.5.0","ios":"11.5.0"}},"expression":{"interpolated":false},"property-type":"data-constant"},"icon-color-brightness-min":{"type":"number","doc":"Increase or reduce the brightness of the symbols. The value is the minimum brightness.","default":0,"minimum":0,"maximum":1,"transition":false,"sdk-support":{"basic functionality":{"js":"3.5.0","android":"11.5.0","ios":"11.5.0"}},"expression":{"interpolated":false},"property-type":"data-constant"},"icon-color-brightness-max":{"type":"number","doc":"Increase or reduce the brightness of the symbols. The value is the maximum brightness.","default":1,"minimum":0,"maximum":1,"transition":false,"sdk-support":{"basic functionality":{"js":"3.5.0","android":"11.5.0","ios":"11.5.0"}},"expression":{"interpolated":false},"property-type":"data-constant"},"symbol-z-offset":{"type":"number","doc":"Specifies an uniform elevation from the ground, in meters.","default":0,"minimum":0,"transition":true,"experimental":true,"sdk-support":{"basic functionality":{"js":"3.7.0","android":"11.7.0","ios":"11.7.0"},"data-driven styling":{"js":"3.7.0","android":"11.7.0","ios":"11.7.0"}},"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_raster":{"raster-opacity":{"type":"number","doc":"The opacity at which the image will be drawn.","default":1,"minimum":0,"maximum":1,"transition":true,"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-color":{"type":"color","doc":"Defines a color map by which to colorize a raster layer, parameterized by the `[\\"raster-value\\"]` expression and evaluated at 256 uniformly spaced steps over the range specified by `raster-color-range`.","use-theme":true,"transition":false,"sdk-support":{"basic functionality":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"},"data-driven styling":{}},"expression":{"interpolated":true,"parameters":["raster-value"]},"property-type":"color-ramp"},"raster-color-mix":{"type":"array","default":[0.2126,0.7152,0.0722,0],"length":4,"value":"number","property-type":"data-constant","transition":true,"requires":["raster-color"],"expression":{"interpolated":true,"parameters":["zoom"]},"doc":"When `raster-color` is active, specifies the combination of source RGB channels used to compute the raster value. Computed using the equation `mix.r * src.r + mix.g * src.g + mix.b * src.b + mix.a`. The first three components specify the mix of source red, green, and blue channels, respectively. The fourth component serves as a constant offset and is *not* multipled by source alpha. Source alpha is instead carried through and applied as opacity to the colorized result. Default value corresponds to RGB luminosity.","example":[0.2126,0.7152,0.0722,0],"sdk-support":{"basic functionality":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}}},"raster-color-range":{"type":"array","length":2,"value":"number","property-type":"data-constant","transition":true,"requires":["raster-color"],"expression":{"interpolated":true,"parameters":["zoom"]},"doc":"When `raster-color` is active, specifies the range over which `raster-color` is tabulated. Units correspond to the computed raster value via `raster-color-mix`. For `rasterarray` sources, if `raster-color-range` is unspecified, the source\'s stated data range is used.","example":[0.5,10],"sdk-support":{"basic functionality":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}}},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","doc":"Rotates hues around the color wheel.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","doc":"Increase or reduce the brightness of the image. The value is the minimum brightness.","default":0,"minimum":0,"maximum":1,"transition":true,"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","doc":"Increase or reduce the brightness of the image. The value is the maximum brightness.","default":1,"minimum":0,"maximum":1,"transition":true,"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","doc":"Increase or reduce the saturation of the image.","default":0,"minimum":-1,"maximum":1,"transition":true,"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","doc":"Increase or reduce the contrast of the image.","default":0,"minimum":-1,"maximum":1,"transition":true,"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","doc":"The resampling/interpolation method to use for overscaling, also known as texture magnification filter","values":{"linear":{"doc":"(Bi)linear filtering interpolates pixel values using the weighted average of the four closest original source pixels creating a smooth but blurry look when overscaled"},"nearest":{"doc":"Nearest neighbor filtering interpolates pixel values using the nearest original source pixel creating a sharp but pixelated look when overscaled"}},"default":"linear","sdk-support":{"basic functionality":{"js":"0.47.0","android":"6.3.0","ios":"4.2.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","doc":"Fade duration when a new tile is added.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"units":"intensity","doc":"Controls the intensity of light emitted on the source features.","requires":["lights"],"sdk-support":{"basic functionality":{"js":"3.1.0","android":"11.1.0","ios":"11.1.0"}},"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"raster-array-band":{"type":"string","required":false,"experimental":true,"property-type":"data-constant","transition":false,"requires":[{"source":"raster-array"}],"doc":"Displayed band of raster array source layer. Defaults to the first band if not set.","example":"band-name","sdk-support":{"basic functionality":{"js":"3.1.0","android":"11.1.0","ios":"11.1.0"}}},"raster-elevation":{"type":"number","doc":"Specifies an uniform elevation from the ground, in meters.","default":0,"minimum":0,"transition":true,"experimental":true,"sdk-support":{"basic functionality":{"js":"3.1.0","android":"11.2.0","ios":"11.2.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster-particle":{"raster-particle-array-band":{"type":"string","required":false,"property-type":"data-constant","transition":false,"doc":"Displayed band of raster array source layer","example":"\\"1713348000\\"","sdk-support":{"basic functionality":{"js":"3.3.0","android":"11.4.0","ios":"11.4.0"}}},"raster-particle-count":{"type":"number","doc":"Defines the amount of particles per tile.","default":512,"minimum":1,"transition":false,"sdk-support":{"basic functionality":{"js":"3.3.0","android":"11.4.0","ios":"11.4.0"}},"property-type":"data-constant"},"raster-particle-color":{"type":"color","doc":"Defines a color map by which to colorize a raster particle layer, parameterized by the `[\\"raster-particle-speed\\"]` expression and evaluated at 256 uniformly spaced steps over the range specified by `raster-particle-max-speed`.","use-theme":true,"transition":false,"sdk-support":{"basic functionality":{"js":"3.3.0","android":"11.4.0","ios":"11.4.0"},"data-driven styling":{}},"expression":{"interpolated":true,"parameters":["raster-particle-speed"]},"property-type":"color-ramp"},"raster-particle-max-speed":{"type":"number","doc":"Defines the maximum speed for particles. Velocities with magnitudes equal to or exceeding this value are clamped to the max value.","default":1,"minimum":1,"transition":false,"sdk-support":{"basic functionality":{"js":"3.3.0","android":"11.4.0","ios":"11.4.0"}},"property-type":"data-constant"},"raster-particle-speed-factor":{"type":"number","doc":"Defines a coefficient for the speed of particlesâ motion.","default":0.2,"minimum":0,"maximum":1,"transition":true,"sdk-support":{"basic functionality":{"js":"3.3.0","android":"11.4.0","ios":"11.4.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-particle-fade-opacity-factor":{"type":"number","doc":"Defines defines the opacity coefficient applied to the faded particles in each frame. In practice, this property controls the length of the particle tail.","default":0.98,"minimum":0,"maximum":1,"transition":true,"sdk-support":{"basic functionality":{"js":"3.3.0","android":"11.4.0","ios":"11.4.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-particle-reset-rate-factor":{"type":"number","doc":"Defines a coefficient for a time period at which particles will restart at a random position, to avoid degeneration (empty areas without particles).","default":0.8,"minimum":0,"maximum":1,"transition":false,"sdk-support":{"basic functionality":{"js":"3.3.0","android":"11.4.0","ios":"11.4.0"}},"property-type":"data-constant"},"raster-particle-elevation":{"type":"number","doc":"Specifies an uniform elevation from the ground, in meters.","default":0,"minimum":0,"transition":true,"sdk-support":{"basic functionality":{"js":"3.7.0","android":"11.7.0","ios":"11.7.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"doc":"The direction of the light source used to generate the hillshading with 0 as the top of the viewport if `hillshade-illumination-anchor` is set to `viewport` and due north if `hillshade-illumination-anchor` is set to `map` and no 3d lights enabled. If `hillshade-illumination-anchor` is set to `map` and 3d lights enabled, the direction from 3d lights is used instead.","transition":false,"sdk-support":{"basic functionality":{"js":"0.43.0","android":"6.0.0","ios":"4.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{"doc":"The hillshade illumination is relative to the north direction."},"viewport":{"doc":"The hillshade illumination is relative to the top of the viewport."}},"default":"viewport","doc":"Direction of light source when map is rotated.","sdk-support":{"basic functionality":{"js":"0.43.0","android":"6.0.0","ios":"4.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","doc":"Intensity of the hillshade","default":0.5,"minimum":0,"maximum":1,"transition":true,"sdk-support":{"basic functionality":{"js":"0.43.0","android":"6.0.0","ios":"4.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","doc":"The shading color of areas that face away from the light source.","use-theme":true,"transition":true,"sdk-support":{"basic functionality":{"js":"0.43.0","android":"6.0.0","ios":"4.0.0"}},"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","doc":"The shading color of areas that faces towards the light source.","use-theme":true,"transition":true,"sdk-support":{"basic functionality":{"js":"0.43.0","android":"6.0.0","ios":"4.0.0"}},"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","doc":"The shading color used to accentuate rugged terrain like sharp cliffs and gorges.","use-theme":true,"transition":true,"sdk-support":{"basic functionality":{"js":"0.43.0","android":"6.0.0","ios":"4.0.0"}},"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"units":"intensity","doc":"Controls the intensity of light emitted on the source features.","requires":["lights"],"sdk-support":{"basic functionality":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}},"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_background":{"background-pitch-alignment":{"type":"enum","values":{"map":{"doc":"The background is aligned to the plane of the map."},"viewport":{"doc":"The background is aligned to the plane of the viewport, covering the whole screen. Note: This mode disables the automatic reordering of the layer when terrain or globe projection is used."}},"default":"map","doc":"Orientation of background layer.","sdk-support":{"basic functionality":{"js":"3.8.0","android":"11.8.0","ios":"11.8.0"}},"expression":{"interpolated":false,"parameters":[]},"experimental":true,"property-type":"data-constant"},"background-color":{"type":"color","default":"#000000","doc":"The color with which the background will be drawn.","use-theme":true,"transition":true,"requires":[{"!":"background-pattern"}],"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"doc":"Name of image in sprite to use for drawing an image background. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"doc":"The opacity at which the background will be drawn.","transition":true,"sdk-support":{"basic functionality":{"js":"0.10.0","android":"2.0.1","ios":"2.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"units":"intensity","doc":"Controls the intensity of light emitted on the source features.","requires":["lights"],"sdk-support":{"basic functionality":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}},"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{"doc":"Renders the sky with a gradient that can be configured with `sky-gradient-radius` and `sky-gradient`."},"atmosphere":{"doc":"Renders the sky with a simulated atmospheric scattering algorithm, the sun direction can be attached to the light position or explicitly set through `sky-atmosphere-sun`."}},"default":"atmosphere","doc":"The type of the sky","sdk-support":{"basic functionality":{"js":"2.0.0","ios":"10.0.0","android":"10.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"doc":"Position of the sun center [a azimuthal angle, p polar angle]. The azimuthal angle indicates the position of the sun relative to 0Â° north, where degrees proceed clockwise. The polar angle indicates the height of the sun, where 0Â° is directly above, at zenith, and 90Â° at the horizon. When this property is ommitted, the sun center is directly inherited from the light position.","sdk-support":{"basic functionality":{"js":"2.0.0","ios":"10.0.0","android":"10.0.0"}},"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"doc":"Intensity of the sun as a light source in the atmosphere (on a scale from 0 to a 100). Setting higher values will brighten up the sky.","sdk-support":{"basic functionality":{"js":"2.0.0","ios":"10.0.0","android":"10.0.0"}},"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"doc":"Position of the gradient center [a azimuthal angle, p polar angle]. The azimuthal angle indicates the position of the gradient center relative to 0Â° north, where degrees proceed clockwise. The polar angle indicates the height of the gradient center, where 0Â° is directly above, at zenith, and 90Â° at the horizon.","sdk-support":{"basic functionality":{"js":"2.0.0","ios":"10.0.0","android":"10.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"doc":"The angular distance (measured in degrees) from `sky-gradient-center` up to which the gradient extends. A value of 180 causes the gradient to wrap around to the opposite direction from `sky-gradient-center`.","sdk-support":{"basic functionality":{"js":"2.0.0","ios":"10.0.0","android":"10.0.0"}},"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"doc":"Defines a radial color gradient with which to color the sky. The color values can be interpolated with an expression using `sky-radial-progress`. The range [0, 1] for the interpolant covers a radial distance (in degrees) of [0, `sky-gradient-radius`] centered at the position specified by `sky-gradient-center`.","use-theme":true,"transition":false,"requires":[{"sky-type":"gradient"}],"sdk-support":{"basic functionality":{"js":"2.0.0","ios":"10.0.0","android":"10.0.0"},"data-driven styling":{}},"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","doc":"A color applied to the atmosphere sun halo. The alpha channel describes how strongly the sun halo is represented in an atmosphere sky layer.","use-theme":true,"transition":false,"requires":[{"sky-type":"atmosphere"}],"sdk-support":{"basic functionality":{"js":"2.0.0","ios":"10.0.0","android":"10.0.0"}},"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","doc":"A color used to tweak the main atmospheric scattering coefficients. Using white applies the default coefficients giving the natural blue color to the atmosphere. This color affects how heavily the corresponding wavelength is represented during scattering. The alpha channel describes the density of the atmosphere, with 1 maximum density and 0 no density.","use-theme":true,"transition":false,"requires":[{"sky-type":"atmosphere"}],"sdk-support":{"basic functionality":{"js":"2.0.0","ios":"10.0.0","android":"10.0.0"}},"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"doc":"The opacity of the entire sky layer.","transition":true,"sdk-support":{"basic functionality":{"js":"2.0.0","ios":"10.0.0","android":"10.0.0"}},"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_model":{"model-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"doc":"The opacity of the model layer. Except for zoom, expressions that are data-driven are not supported if using GeoJSON or vector tile as the model layer source.","transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"sdk-support":{"basic functionality":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"},"data-driven styling":{"js":"3.9.0","android":"11.9.0","ios":"11.9.0"}},"property-type":"data-driven"},"model-rotation":{"type":"array","value":"number","length":3,"default":[0,0,0],"period":360,"units":"degrees","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"sdk-support":{"basic functionality":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"},"data-driven styling":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}},"transition":true,"doc":"The rotation of the model in euler angles [lon, lat, z]."},"model-scale":{"type":"array","value":"number","length":3,"default":[1,1,1],"doc":"The scale of the model. Expressions that are zoom-dependent are not supported if using GeoJSON or vector tile as the model layer source.","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"sdk-support":{"basic functionality":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"},"data-driven styling":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}},"transition":true},"model-translation":{"type":"array","value":"number","length":3,"default":[0,0,0],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"sdk-support":{"basic functionality":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"},"data-driven styling":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}},"transition":true,"doc":"The translation of the model in meters in form of [longitudal, latitudal, altitude] offsets."},"model-color":{"type":"color","default":"#ffffff","doc":"The tint color of the model layer. model-color-mix-intensity (defaults to 0) defines tint(mix) intensity - this means that, this color is not used unless model-color-mix-intensity gets value greater than 0. Expressions that depend on measure-light are not supported when using GeoJSON or vector tile as the model layer source.","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light","zoom"]},"sdk-support":{"basic functionality":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"},"data-driven styling":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}},"use-theme":true,"transition":true},"model-color-mix-intensity":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":1,"doc":"Intensity of model-color (on a scale from 0 to 1) in color mix with original 3D model\'s colors. Higher number will present a higher model-color contribution in mix. Expressions that depend on measure-light are not supported when using GeoJSON or vector tile as the model layer source.","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"sdk-support":{"basic functionality":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"},"data-driven styling":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}},"transition":true},"model-type":{"type":"enum","values":{"common-3d":{"doc":"Integrated to 3D scene, using depth testing, along with terrain, fill-extrusions and custom layer."},"location-indicator":{"doc":"Displayed over other 3D content, occluded by terrain."}},"sdk-support":{"basic functionality":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}},"default":"common-3d","doc":"Defines rendering behavior of model in respect to other 3D scene objects.","property-type":"data-constant"},"model-cast-shadows":{"type":"boolean","default":true,"doc":"Enable/Disable shadow casting for this layer","transition":false,"sdk-support":{"basic functionality":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}},"property-type":"data-constant"},"model-receive-shadows":{"type":"boolean","default":true,"doc":"Enable/Disable shadow receiving for this layer","transition":false,"sdk-support":{"basic functionality":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}},"property-type":"data-constant"},"model-ambient-occlusion-intensity":{"type":"number","default":1,"minimum":0,"maximum":1,"doc":"Intensity of the ambient occlusion if present in the 3D model.","expression":{"interpolated":true,"parameters":["zoom"]},"sdk-support":{"basic functionality":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}},"property-type":"data-constant","transition":true},"model-emissive-strength":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":5,"units":"intensity","doc":"Strength of the emission. There is no emission for value 0. For value 1.0, only emissive component (no shading) is displayed and values above 1.0 produce light contribution to surrounding area, for some of the parts (e.g. doors). Expressions that depend on measure-light are only supported as a global layer value (and not for each feature) when using GeoJSON or vector tile as the model layer source.","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"sdk-support":{"basic functionality":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"},"data-driven styling":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}},"transition":true},"model-roughness":{"type":"number","default":1,"minimum":0,"maximum":1,"doc":"Material roughness. Material is fully smooth for value 0, and fully rough for value 1. Affects only layers using batched-model source.","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state"]},"sdk-support":{"basic functionality":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"},"data-driven styling":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}},"transition":true},"model-height-based-emissive-strength-multiplier":{"type":"array","default":[1,1,1,1,0],"length":5,"value":"number","doc":"Emissive strength multiplier along model height (gradient begin, gradient end, value at begin, value at end, gradient curve power (logarithmic scale, curve power = pow(10, val)).","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"sdk-support":{"basic functionality":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"},"data-driven styling":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}},"transition":true},"model-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"doc":"This parameter defines the range for the fade-out effect before an automatic content cutoff on pitched map views. The automatic cutoff range is calculated according to the minimum required zoom level of the source and layer. The fade range is expressed in relation to the height of the map view. A value of 1.0 indicates that the content is faded to the same extent as the map\'s height in pixels, while a value close to zero represents a sharp cutoff. When the value is set to 0.0, the cutoff is completely disabled. Note: The property has no effect on the map if terrain is enabled.","transition":false,"expression":{"interpolated":false},"sdk-support":{"basic functionality":{"js":"3.0.0","android":"11.0.0","ios":"11.0.0"}},"property-type":"data-constant"},"model-front-cutoff":{"type":"array","private":true,"value":"number","property-type":"data-constant","transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"length":3,"default":[0,0,1],"minimum":[0,0,0],"maximum":[1,1,1],"doc":"An array for configuring the fade-out effect for the front cutoff of content on pitched map views. It contains three values: start, range and final opacity. The start parameter defines the point at which the fade-out effect begins, with smaller values causing the effect to start earlier. The range parameter specifies how long the fade-out effect will last. A value of 0.0 for range makes content disappear immediately without a fade-out effect. The final opacity determines content opacity at the end of the fade-out effect. A value of 1.0 for final opacity means that the cutoff is completely disabled.","sdk-support":{"basic functionality":{"js":"3.5.0"}}}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds","doc":"Time allotted for transitions to complete."},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds","doc":"Length of time before a transition begins."}},"property-type":{"data-driven":{"type":"property-type","doc":"Property is interpolable and can be represented using a property expression."},"color-ramp":{"type":"property-type","doc":"Property should be specified using a color ramp from which the output color can be sampled based on a property calculation."},"data-constant":{"type":"property-type","doc":"Property is interpolable but cannot be represented using a property expression."},"constant":{"type":"property-type","doc":"Property is constant across all zoom levels and property values."}},"promoteId":{"*":{"type":"*","doc":"A feature property name to use as the ID, or an expression to evaluate as the ID for feature state."}},"$doc":{"transition":{"type":"transition","doc":"Controls how a property transitions to a new value. Overrides the style\'s root `transition` for this property."},"use-theme":{"type":"enum","doc":"Controls whether the associated color property is affected by the global color theme. When set to \\"none\\", the color theme is ignored for this property. When set to \\"default\\", the color theme is applied.","values":{"default":{"doc":"The color theme is applied to this property (default behavior)."},"none":{"doc":"The color theme is ignored for this property."}},"default":"default"}}}');function Wpe(e){"@babel/helpers - typeof";return(Wpe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xpe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Zpe(n.key),n)}}function Zpe(e){var t=function(e,t){if("object"!=Wpe(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Wpe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Wpe(t)?t:t+""}function $pe(e,t,r){return t=the(t),function(e,t){if(t&&("object"==Wpe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],the(e).constructor):t.apply(e,r))}function ehe(){return(ehe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=the(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function the(e){return(the=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rhe(e,t){return(rhe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var nhe=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),$pe(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rhe(e,t)}(t,o().Map),r=t,(n=[{key:"loadImage",value:function(e,r){var n=this;return new Promise(function(o){var i,a,s,u,l;(i=t,a="loadImage",s=n,l=ehe(the(1&(u=3)?i.prototype:i),a,s),2&u&&"function"==typeof l?function(e){return l.apply(s,e)}:l)([e,function(e,t){r(e,t),o(t)}])})}}])&&Xpe(r.prototype,n),i&&Xpe(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,i}();function ohe(e){"@babel/helpers - typeof";return(ohe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ihe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ahe(n.key),n)}}function ahe(e){var t=function(e,t){if("object"!=ohe(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ohe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ohe(t)?t:t+""}var she=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.proj4=t,this.builtInEPSG=["EPSG:3857","EPSG:4326"]},(t=[{key:"isSameProjection",value:function(e,t){return e.getCRS().epsgCode===t}},{key:"getProj4",value:function(){return this.proj4||o().proj4}},{key:"getCRS",value:function(e){return o().CRS.get(e)}},{key:"registerCRS",value:function(e){var t=e.name,r=e.wkt,n=e.extent,i=e.unit,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s=o().CRS.get(t);return s||(s=new(o().CRS)(t,r,n,i||n[2]>180?"meter":"degree"),a&&o().CRS.set(s)),this.proj4&&!this.builtInEPSG.includes(t)&&this.proj4.defs(t,s.getWKT()),s}}])&&ihe(e.prototype,t),r&&ihe(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function uhe(e){"@babel/helpers - typeof";return(uhe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lhe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function che(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?lhe(Object(r),!0).forEach(function(t){fhe(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lhe(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function fhe(e,t,r){return(t=hhe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function phe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,hhe(n.key),n)}}function hhe(e){var t=function(e,t){if("object"!=uhe(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=uhe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==uhe(t)?t:t+""}function yhe(e,t,r){return t=dhe(t),function(e,t){if(t&&("object"==uhe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],dhe(e).constructor):t.apply(e,r))}function dhe(e){return(dhe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mhe(e,t){return(mhe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var ghe=function(e){function t(e,r,n){var i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=new she(r&&r.proj4),s=a.getProj4();if((i=yhe(this,t,[e,che(che({},r),{},{proj4:s}),n]))._crsManager=a,o().CRS)i._readyForInitializingWebMap();else{Promise.resolve().then(function(){i._fire("mapcreatefailed",{error:"WebMap needs to include mapbox-gl-enhance.js. Refer to the example: https://iclient.supermap.io/examples/mapboxgl/editor.html#mvtVectorTile_2362"})})}return i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mhe(e,t)}(t,dfe(o().Evented,{mapRepo:o()})),r=t,(n=[{key:"setCRS",value:function(e){if(this.map&&(this.mapOptions.crs=e,this.mapOptions.crs)){var t=e.epsgCode?this._crsManager.registerCRS(che({name:e.epsgCode,wkt:e.WKT},this.mapOptions.crs),!1):this._crsManager.getCRS(e);this.map.setCRS(t)}}},{key:"_createWebMapFactory",value:function(e){var t={MapManager:nhe,mapRepo:o(),crsManager:this._crsManager,DataFlowService:IT,GraticuleLayer:Mh},r=AE({featureFilter:Ix,expression:Lx,spec:Jpe,L7Layer:Jx,L7:EC,proj4:this._crsManager.getProj4()});switch(e){case"MapStyle":return Ype(Rpe(o().Evented),t);case"WebMap3":return _pe(Rpe(o().Evented),che(che({},t),{},{l7LayerUtil:r}));default:return Lfe(xce(Rpe(o().Evented),"fire"),t)}}}])&&phe(r.prototype,n),i&&phe(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,i}();function vhe(e){"@babel/helpers - typeof";return(vhe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bhe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ahe(n.key),n)}}function Ahe(e){var t=function(e,t){if("object"!=vhe(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=vhe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==vhe(t)?t:t+""}var whe=function(){return e=function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.MapService=t,this.url=r,this.options=n,this.CLASS_NAME="SuperMap.InitMapServiceBase"},(t=[{key:"createMapService",value:function(){var e=this.MapService,t=this.url,r=this.options;return new e(t,{proxy:r.proxy,withCredentials:r.withCredentials,crossOrigin:r.crossOrigin,headers:r.headers,projection:r.projection})}},{key:"getMapInfo",value:function(e){var t=this.createMapService();return e?new Promise(function(r,n){t.getMapInfo(function(t){e(t,r,n)})}):t.getMapInfo()}},{key:"getTilesets",value:function(){return this.createMapService().getTilesets()}},{key:"getWKT",value:function(){var e=this;return new Promise(function(t,r){e.createMapService().getWKT(function(e){try{var n=e.result.data;t(n)}catch(e){r(e)}})})}}])&&bhe(e.prototype,t),r&&bhe(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function She(e){return"PCS_NON_EARTH"===e}function Che(e){var t=e.type,r=e.epsgCode;return"PCS_NON_EARTH"==t?"":"EPSG:"+r}function Ehe(e){if(e.tileFormat){var t=e.tileFormat.toLowerCase();return["jpg_png","default","png8"].includes(t)?"png":t}return"png"}function _he(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=Array.isArray(e)&&e.filter(function(e){return e.metaData.tileType===t.tileType||Che(e.metaData.prjCoordSys)===Che(t.prjCoordSys)});return r&&r[0]&&r[0].metaData}function Ihe(e,t){var r=e.scale,n=e.dpi,o=e.coordUnit,i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:22,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:512,n=[],o=e.left,i=e.right;Array.isArray(e)&&(o=e[0],i=e[2]);for(var a=Math.abs(o-i)/r,s=0;s<t;s++)n.push(a/Math.pow(2,s));return n.sort(function(e,t){return t-e})}(t);return function(e,t){for(var r,n=0,o=0;o<t.length;o++)0===o&&(r=Math.abs(e-t[o])),r>Math.abs(e-t[o])&&(r=Math.abs(e-t[o]),n=o);return n}(mf(r,n,o),i)}function Ohe(e){"@babel/helpers - typeof";return(Ohe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xhe(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof s?n:s,l=Object.create(u.prototype);return Phe(l,"_invoke",function(r,n,o){var i,s,u,l=0,c=o||[],f=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,r){return i=t,s=0,u=e,p.n=r,a}};function h(r,n){for(s=r,u=n,t=0;!f&&l&&!o&&t<c.length;t++){var o,i=c[t],h=p.p,y=i[2];r>3?(o=y===n)&&(u=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=r<2&&h<i[1])?(s=0,p.v=n,p.n=i[1]):h<y&&(o=r<3||i[0]>n||n>y)&&(i[4]=r,i[5]=n,p.n=y,s=0))}if(o||r>1)return a;throw f=!0,n}return function(o,c,y){if(l>1)throw TypeError("Generator is already running");for(f&&1===c&&h(c,y),s=c,u=y;(t=s<2?e:u)||!f;){i||(s?s<3?(s>1&&(p.n=-1),h(s,u)):p.n=u:p.v=u);try{if(l=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(f=p.n<0)?u:r.call(n,p))!==a)break}catch(t){i=e,s=1,u=t}finally{l=1}}return{value:t,done:f}}}(r,o,i),!0),l}var a={};function s(){}function u(){}function l(){}t=Object.getPrototypeOf;var c=[][n]?t(t([][n]())):(Phe(t={},n,function(){return this}),t),f=l.prototype=s.prototype=Object.create(c);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,Phe(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=l,Phe(f,"constructor",l),Phe(l,"constructor",u),u.displayName="GeneratorFunction",Phe(l,o,"GeneratorFunction"),Phe(f),Phe(f,o,"Generator"),Phe(f,n,function(){return this}),Phe(f,"toString",function(){return"[object Generator]"}),(xhe=function(){return{w:i,m:p}})()}function Phe(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}(Phe=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){Phe(e,t,function(e){return this._invoke(t,r,e)})};i("next",0),i("throw",1),i("return",2)}})(e,t,r,n)}function khe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function The(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?khe(Object(r),!0).forEach(function(t){jhe(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):khe(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function jhe(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=Ohe(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Ohe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ohe(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Mhe(e,t,r,n,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function Bhe(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){Mhe(i,n,o,a,s,"next",e)}function s(e){Mhe(i,n,o,a,s,"throw",e)}a(void 0)})}}function Nhe(e,t,r){var n=function(e){return e instanceof Array?e:e.leftBottom&&e.rightTop?[e.leftBottom.x,e.leftBottom.y,e.rightTop.x,e.rightTop.y]:[e.left,e.bottom,e.right,e.top]}(r);return new(o().CRS)(e,t,n)}function Rhe(e,t){var r=e;return"EPSG:3857"===t?bw(t,"EPSG:4326",e):"EPSG:4326"!==t?o().proj4(t,"EPSG:4326",e):r}function Lhe(e,t){return Dhe.apply(this,arguments)}function Dhe(){return(Dhe=Bhe(xhe().m(function e(t,r){var n,o,i,a;return xhe().w(function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,z.get(t);case 1:return n=e.v,e.n=2,n.json();case 2:if(!(o=e.v).metadata||!o.metadata.indexbounds){e.n=3;break}return e.a(2,{extent:o.metadata.indexbounds});case 3:return e.n=4,z.get(M.urlPathAppend(r,"prjCoordSys/projection/extent.json"));case 4:return i=e.v,e.n=5,i.json();case 5:return a=e.v,e.a(2,{extent:a,center:o.center});case 6:return e.p=6,e.v,e.a(2,{extent:[]})}},e,null,[[0,6]])}))).apply(this,arguments)}function Fhe(e,t,r){return Qhe.apply(this,arguments)}function Qhe(){return(Qhe=Bhe(xhe().m(function e(t,r,n){var i,a,s,u,l,c,f,p,h,y,d,m,g,v,b,A,w,S,C,E,_,I,O,x,P,k,T,j,B;return xhe().w(function(e){for(;;)switch(e.n){case 0:if(!n.type||["raster","vector-tile"].includes(n.type)){e.n=1;break}return e.a(2,Promise.reject(new Error('type must be "raster" or "vector-tile".')));case 1:if(i=n.type||"raster",a=n.mapOptions||{},s=r.prjCoordSys.epsgCode,u=r.bounds,l=r.center,c=r.dpi,f=r.coordUnit,p=r.scale,h=l?[l.x,l.y]:[0,0],y="EPSG:".concat(s),d=u,m="vector-tile"===i?M.urlAppend(M.urlPathAppend(t,"tileFeature/vectorstyles.json"),"type=MapBox_GL&styleonly=true&tileURLTemplate=ZXY"):t,m=Fw.appendCredential(m),g={},v={},A=512,w="png",!o().CRS){e.n=6;break}return S=y,e.n=2,n.initMapService.getWKT();case 2:if(C=e.v,"vector-tile"!==i){e.n=4;break}return e.n=3,Lhe(m,t);case 3:E=e.v,d=E.extent;case 4:return y=Nhe(S,C,d),"raster"===i&&(v.rasterSource="iserver"),h=E&&E.center?E.center:Rhe(h,S),e.n=5,n.initMapService.getTilesets();case 5:_=e.v,(I=_he(_.result,{prjCoordSys:r.prjCoordSys,tileType:"Image"}))&&(w=Ehe(I),O=Math.max(I.bounds.right-I.originalPoint.x,I.originalPoint.y-I.bounds.bottom),x=O/(256*I.resolutions[0]),b=Math.ceil(Math.log2(x)),P=Math.pow(2,b),k=256*P*I.resolutions[0],T=[I.originalPoint.x,I.originalPoint.y-k,I.originalPoint.x+k,I.originalPoint.y],y=new(o().CRS)(S,T),b-=1,A=I.tileWidth),e.n=7;break;case 6:h=Rhe(h,y="EPSG:3857"),"raster"===i&&(j=256,g.tileSize=j,B=!1!==a.transparent,m=M.urlAppend(M.urlPathAppend(m,"zxyTileImage.png"),"z={z}&x={x}&y={y}&width=".concat(j,"&height=").concat(j,"&transparent=").concat(B)));case 7:return void 0===b&&(b=Ihe({scale:p,dpi:c,coordUnit:f},d)),e.a(2,The({container:"map",crs:y,center:h,zoom:b,style:"raster"===i?{version:8,sources:{"smaples-source":The(The({format:w,tileSize:A,type:"raster",tiles:[m]},g),v)},layers:[{id:"sample-layer",type:"raster",source:"smaples-source",minzoom:0,maxzoom:22}]}:m},a))}},e)}))).apply(this,arguments)}function Ghe(e){"@babel/helpers - typeof";return(Ghe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Uhe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,zhe(n.key),n)}}function zhe(e){var t=function(e,t){if("object"!=Ghe(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Ghe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ghe(t)?t:t+""}function Hhe(e,t,r){return t=qhe(t),function(e,t){if(t&&("object"==Ghe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],qhe(e).constructor):t.apply(e,r))}function qhe(e){return(qhe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Vhe(e,t){return(Vhe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Khe=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Hhe(this,t)).id=M.createUniqueID("videoLayer_"),r.videoMap=e,r.loop=r.videoMap.loop,r.autoplay=r.videoMap.autoplay,r.map=r.videoMap.map,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vhe(e,t)}(t,o().Evented),r=t,(n=[{key:"add",value:function(e){var t=this;this.address=e,this.address&&(this.renderer=new Lm({url:this.address,id:this.id,loop:this.loop,autoplay:this.autoplay}),this.video=this.renderer.createVideo(),this.videoDomId=this.renderer.getVideoDomId(),this.video.one("firstplay",function(){t.autoplay&&t.play()}),this.video.one("canplay",function(){t.videoWidth=t.video.videoWidth(),t.videoHeight=t.video.videoHeight(),t._addVideoLayer(t.map)}))}},{key:"_createVideoElement",value:function(){var e=document.createElement("video");e.id=this.id,e.className="video-js",e.style.width=0,e.style.height=0,e.style.visibility="hidden",e.style.display="none",e.setAttribute("crossorigin","anonymous"),document.body.appendChild(e)}},{key:"_addVideoLayer",value:function(e){if(!e||!e.getSource(this.id)){var t=this._calcCoords(this.videoMap),r=t.map(function(e){return[e.lng,e.lat]}),n=this.videoDomId;e.addSource(this.id,{type:"video",urls:[n],coordinates:r}),e.getStyle().layers.length>=1&&(this.beforeLayerId=e.getStyle().layers[0].id),e.addLayer({id:this.id,type:"raster",source:this.id},this.beforeLayerId),this.map.fitBounds([t[1],t[3]]),this._afterAddVideoLayer()}}},{key:"_afterAddVideoLayer",value:function(){this.autoplay&&this.map.getSource(this.id).play(),this.fire("loaded",{originCoordsRightBottom:this.originCoordsRightBottom,originCoordsLeftTop:this.originCoordsLeftTop,videoWidth:this.videoWidth,videoHeight:this.videoHeight})}},{key:"_calcCoords",value:function(e){var t=this,r=e.width,n=e.height,o=e.videoHeight,i=e.videoWidth||this.videoWidth,a=o||this.videoHeight,s=i/r,u=a/n,l=Math.min(s,u),c=r/2,f=n/2,p=i/l/2,h=a/l/2,y=[[c-p,f-h],[c+p,f-h],[c+p,f+h],[c-p,f+h]].map(function(e){return t.map.unproject(e)});return this.originCoordsLeftTop=y[0],this.originCoordsRightBottom=y[2],y}},{key:"play",value:function(){this.video.play()}},{key:"pause",value:function(){this.video.pause()}},{key:"remove",value:function(){this.id&&(this.map.removeLayer(this.id),this.map.removeSource(this.id),document.body.removeChild(document.getElementById(this.id)))}}])&&Uhe(r.prototype,n),i&&Uhe(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,i}();function Yhe(e){return function(e){if(Array.isArray(e))return Jhe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Jhe(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Jhe(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jhe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Whe(e){"@babel/helpers - typeof";return(Whe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xhe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Zhe(n.key),n)}}function Zhe(e){var t=function(e,t){if("object"!=Whe(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Whe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Whe(t)?t:t+""}var $he=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=t.coordTransfer,n=t.originCoordsRightBottom,o=t.originCoordsLeftTop,i=t.videoWidth,a=t.videoHeight,s=t.map;this.map=s,this.coordTransfer=r,this.layerId=null,this.originCoordsRightBottom=n,this.originCoordsLeftTop=o,this.videoWidth=i,this.videoHeight=a},(t=[{key:"add",value:function(e,t){var r=e.id,n=e.source;if(this.layerId=r,!this._existed()){if("object"===Whe(n)){var o=this.eachData(YS()(n.data));e.source.data=o}this.map.addLayer(e,t)}}},{key:"remove",value:function(){this.map&&this.map.removeLayer(this.layerId)}},{key:"_existed",value:function(){return!(!this.layerId||!this.map.getLayer(this.layerId))}},{key:"eachData",value:function(e){var t=this;return this.coordTransfer?(IC(e,function(e){_C(e,function(e){var r=bw("EPSG:4326","EPSG:3857",e),n=t.coordTransfer.toVideoCoordinate(r);e.length=0,n.data64F.length&&e.push.apply(e,Yhe(Jm({videoPoint:n.data64F,videoWidth:t.videoWidth,videoHeight:t.videoHeight,originCoordsRightBottom:t.originCoordsRightBottom,originCoordsLeftTop:t.originCoordsLeftTop})))})}),e):[]}}])&&Xhe(e.prototype,t),r&&Xhe(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function eye(e){"@babel/helpers - typeof";return(eye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tye(e){return function(e){if(Array.isArray(e))return rye(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return rye(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?rye(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rye(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function nye(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,oye(n.key),n)}}function oye(e){var t=function(e,t){if("object"!=eye(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=eye(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==eye(t)?t:t+""}var iye=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=t.coordTransfer,n=t.originCoordsRightBottom,o=t.originCoordsLeftTop,i=t.videoWidth,a=t.videoHeight,s=t.map;this.map=s,this.coordTransfer=r,this.originCoordsRightBottom=n,this.originCoordsLeftTop=o,this.videoWidth=i,this.videoHeight=a},(t=[{key:"add",value:function(e,t){var r=this;if(!this.map.getSource(e)){var n=YS()(t.data);IC(n,function(e){_C(e,function(e){var t=bw("EPSG:4326","EPSG:3857",e),n=r.coordTransfer.toVideoCoordinate(t);e.length=0,e.push.apply(e,tye(Jm({videoPoint:n.data64F,videoWidth:r.videoWidth,videoHeight:r.videoHeight,originCoordsRightBottom:r.originCoordsRightBottom,originCoordsLeftTop:r.originCoordsLeftTop})))})}),t.data=n,this.map.addSource(e,t)}}},{key:"remove",value:function(e){this.map.addSource(e)}}])&&nye(e.prototype,t),r&&nye(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function aye(e){"@babel/helpers - typeof";return(aye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sye(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof s?n:s,l=Object.create(u.prototype);return uye(l,"_invoke",function(r,n,o){var i,s,u,l=0,c=o||[],f=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,r){return i=t,s=0,u=e,p.n=r,a}};function h(r,n){for(s=r,u=n,t=0;!f&&l&&!o&&t<c.length;t++){var o,i=c[t],h=p.p,y=i[2];r>3?(o=y===n)&&(u=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=r<2&&h<i[1])?(s=0,p.v=n,p.n=i[1]):h<y&&(o=r<3||i[0]>n||n>y)&&(i[4]=r,i[5]=n,p.n=y,s=0))}if(o||r>1)return a;throw f=!0,n}return function(o,c,y){if(l>1)throw TypeError("Generator is already running");for(f&&1===c&&h(c,y),s=c,u=y;(t=s<2?e:u)||!f;){i||(s?s<3?(s>1&&(p.n=-1),h(s,u)):p.n=u:p.v=u);try{if(l=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(f=p.n<0)?u:r.call(n,p))!==a)break}catch(t){i=e,s=1,u=t}finally{l=1}}return{value:t,done:f}}}(r,o,i),!0),l}var a={};function s(){}function u(){}function l(){}t=Object.getPrototypeOf;var c=[][n]?t(t([][n]())):(uye(t={},n,function(){return this}),t),f=l.prototype=s.prototype=Object.create(c);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,uye(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=l,uye(f,"constructor",l),uye(l,"constructor",u),u.displayName="GeneratorFunction",uye(l,o,"GeneratorFunction"),uye(f),uye(f,o,"Generator"),uye(f,n,function(){return this}),uye(f,"toString",function(){return"[object Generator]"}),(sye=function(){return{w:i,m:p}})()}function uye(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}(uye=function(e,t,r,n){if(t)o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r;else{var i=function(t,r){uye(e,t,function(e){return this._invoke(t,r,e)})};i("next",0),i("throw",1),i("return",2)}})(e,t,r,n)}function lye(e,t,r,n,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function cye(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function fye(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?cye(Object(r),!0).forEach(function(t){pye(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cye(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function pye(e,t,r){return(t=yye(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hye(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,yye(n.key),n)}}function yye(e){var t=function(e,t){if("object"!=aye(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=aye(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==aye(t)?t:t+""}function dye(e,t,r){return t=mye(t),function(e,t){if(t&&("object"==aye(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,r||[],mye(e).constructor):t.apply(e,r))}function mye(e){return(mye=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gye(e,t){return(gye=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var vye=["resize","webglcontextlost","webglcontextrestored","remove","movestart","load","contextmenu","dblclick","click","touchcancel","touchmove","touchend","touchstart","dataloading","mousemove","mouseup","mousedown","sourcedataloading","error","data","styledata","sourcedata","mouseout","styledataloading","moveend","move","render","zoom","zoomstart","zoomend","boxzoomstart","boxzoomcancel","boxzoomend","rotate","rotatestart","rotateend","dragend","drag","dragstart","pitch","idle"],bye=function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=dye(this,t);var n=e.container,o=e.url,i=e.videoParameters,a=e.autoplay,s=e.loop,u=e.videoWidth,l=e.videoHeight,c=e.opencv,f=e.styleOptions;if(r.container=n||"map",r.layerCache={},r.sourceCache={},r.videoWidth=u,r.videoHeight=l,r.autoplay=void 0===a||a,r.loop=void 0===s||s,r.styleOptions=f||{},r.cv=c||window.cv,!r.cv)throw new Error("opencv.js instance is not existed!");if(!i)throw new Error("videoParameters must be config!");return r.videoParameters=i,r._createMap().then(function(e){r.map=e,r._addVideoLayer(o)}),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gye(e,t)}(t,o().Evented),r=t,(n=[{key:"addLayer",value:function(e,t){if(this._mapExisted()&&!this.layerCache[e.id]){var r=new $he(this);r.add(e,t),this.layerCache[e.id]=r}}},{key:"addSource",value:function(e,t){if(this._mapExisted()&&!this.sourceCache[e]){var r=new iye(this);r.add(e,t),this.sourceCache[e]=r}}},{key:"removeLayer",value:function(e){this._mapExisted()&&this.layerCache[e]&&(this.layerCache[e].remove(),this.layerCache[e]=null,delete this.layerCache[e])}},{key:"removeSource",value:function(e){this._mapExisted()&&this.sourceCache[e]&&(this.sourceCache[e].remove(),this.sourceCache[e]=null,delete this.sourceCache[e])}},{key:"destroy",value:function(){this.layerCache={},this.sourceCache={},this.videoMapLayer&&(this.videoMapLayer.remove(),this.videoMapLayer=null),this.map.remove(),this.map=null}},{key:"_addVideoLayer",value:function(e){this.videoMapLayer=new Khe(this),this.videoMapLayer.add(e),this._bindEvents()}},{key:"_initParameters",value:function(e){if(!e||Object.keys(e).length)return e.fx=Wm(e.fovX,this.videoWidth),e.fy=Xm(e.fovY,this.videoHeight),new Um(this.cv,e).init()}},{key:"_createMap",value:function(){var e=this;return new Promise(function(t){var r="string"==typeof e.container?window.document.getElementById(e.container):e.container;if(!r)throw new Error("Container '".concat(r,"' not found."));e.width=r.clientWidth||400,e.height=r.clientHeight||300;var n=new(o().Map)({container:e.container,style:fye(fye({},e.styleOptions),{},{version:8,sources:{},layers:[]}),renderWorldCopies:!1,center:[0,0],zoom:8});n.on("load",function(){t(n)})})}},{key:"_mapExisted",value:function(){return!!this.map}},{key:"_bindEvents",value:function(){var e=this;this.videoMapLayer.on("loaded",function(){var t,r=(t=sye().m(function t(r){var n,o,i,a;return sye().w(function(t){for(;;)switch(t.n){case 0:return n=r.originCoordsLeftTop,o=r.originCoordsRightBottom,i=r.videoWidth,a=r.videoHeight,e.originCoordsLeftTop=n,e.originCoordsRightBottom=o,void 0===e.videoWidth&&(e.videoWidth=i),void 0===e.videoHeight&&(e.videoHeight=a),t.n=1,e._initParameters(e.videoParameters);case 1:e.coordTransfer=t.v,e._bindMapEventFn=e._bindMapEvent.bind(e),vye.forEach(function(t){e.map.on(t,e._bindMapEventFn)}),e.fire("load",{map:e.map});case 2:return t.a(2)}},t)}),function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(e){lye(i,n,o,a,s,"next",e)}function s(e){lye(i,n,o,a,s,"throw",e)}a(void 0)})});return function(e){return r.apply(this,arguments)}}())}},{key:"_clearEvents",value:function(){var e=this;vye.forEach(function(t){e.map.off(t,e._bindMapEventFn)})}},{key:"_bindMapEvent",value:function(e){if(e.lngLat&&this.originCoordsRightBottom&&this.originCoordsLeftTop&&this.videoWidth&&this.videoHeight){var t=[e.lngLat.lng,e.lngLat.lat];if(this.coordTransfer){var r=this.coordTransfer.toSpatialCoordinate(function(e){var t=e.coord,r=e.originCoordsRightBottom,n=e.originCoordsLeftTop,o=e.videoHeight,i=e.videoWidth,a=Math.abs(r.lng-n.lng)/i,s=Math.abs(r.lat-n.lat)/o;return[(t[0]-n.lng)/a,(n.lat-t[1])/s]}({coord:t,originCoordsRightBottom:this.originCoordsRightBottom,originCoordsLeftTop:this.originCoordsLeftTop,videoHeight:this.videoHeight,videoWidth:this.videoWidth}));e.spatialPoint=[r[0],r[1]]}}this.fire(e.type,{mapEvent:e})}}])&&hye(r.prototype,n),i&&hye(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,i}();function Aye(e){"@babel/helpers - typeof";return(Aye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wye(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Sye(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wye(Object(r),!0).forEach(function(t){Cye(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wye(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Cye(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=Aye(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Aye(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Aye(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}o().supermap=Sye(Sye({},Q5),o().supermap),o().supermap.map=o().supermap.map||{},o().supermap.LogoControl=Be,o().supermap.Logo=Be,o().supermap.Util=To,o().supermap.decryptSources=i,o().supermap.WebMap=ghe,o().supermap.createWebMapV2BaseExtending=xce,o().supermap.WebMapService=dce,o().supermap.SourceListModelV2=ofe,o().supermap.VideoMap=bye,o().supermap.initMap=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new whe(XQ,e,t);return r.getMapInfo((n=Bhe(xhe().m(function n(i,a,s){var u,l,c,f,p,h,y;return xhe().w(function(n){for(;;)switch(n.n){case 0:if(n.p=0,"processCompleted"!==i.type){n.n=4;break}if(u=i.result,l=u.dynamicProjection,c=u.prjCoordSys,f=c.epsgCode,!She(c.type)){n.n=1;break}return s(new Error("mapbox-gl cannot support plane coordinate system.")),n.a(2);case 1:if(3857===f||l||o().CRS){n.n=2;break}return s(new Error("The EPSG code ".concat(f," needs to include mapbox-gl-enhance.js. Refer to the example: https://iclient.supermap.io/examples/mapboxgl/editor.html#mvtVectorTile_2362"))),n.a(2);case 2:return n.n=3,Fhe(e,i.result,The(The({},t),{},{initMapService:r}));case 3:return p=n.v,(h=new(o().Map)(p)).loaded()?a({map:h}):h.on("load",function(){a({map:h})}),n.a(2);case 4:s(new Error("Fetch mapService is failed.")),n.n=6;break;case 5:n.p=5,y=n.v,s(y);case 6:return n.a(2)}},n,null,[[0,5]])})),function(e,t,r){return n.apply(this,arguments)}));var n},o().supermap.Graphic=$x,o().supermap.map.getDefaultVectorTileStyle=function(e,t){t=t||{};var r={};r.version=t.version||8,r.layers=t.layers||[],r.light=t.light||{anchor:"viewport",color:"#fcf6ef",intensity:.5,position:[1.15,201,20]};var n={version:r.version,sources:{"vector-tiles":{type:"vector",tiles:[e]}},layers:r.layers,light:r.light};return null!=t.sprite&&(n.sprite=t.sprite),null!=t.glyphs&&(n.glyphs=t.glyphs),n},o().supermap.map.setBackground=function(e,t){t&&e&&e.addLayer({id:"background",type:"background",paint:{"background-color":t}},"background")},o().supermap.map.setPaintProperty=function(e,t,r,n,o,i){if(t&&e){"[object Array]"!==Object.prototype.toString.call(t)&&(t=[t]);for(var a=0;a<t.length;a++){var s=i?i[a]:null,u=tP(t[a],r,o,s,n);e.addLayer(u,t[a]),e.moveLayer(t[a])}}},o().supermap.MapvDataSet=eP,o().supermap.GeoFeatureThemeLayer=zc,o().supermap.Theme3DLayer=Ef,o().supermap.ThemeFeature=Ko,o().supermap.ThemeLayer=Zs,o().supermap.Transform=Ap,o().supermap.WebSymbol=JP,o().supermap.DeckglLayer=mh,o().supermap.GraphicLayer=mp,o().supermap.GraphThemeLayer=su,o().supermap.GraticuleLayer=Mh,o().supermap.HeatMapLayer=nh,o().supermap.LabelThemeLayer=Zc,o().supermap.MapvLayer=Af,o().supermap.FGBLayer=Tm,o().supermap.VideoLayer=xw,o().supermap.RangeTheme3DLayer=Tf,o().supermap.RangeThemeLayer=Df,o().supermap.RankSymbolThemeLayer=qf,o().supermap.ThreeLayer=zp,o().supermap.UniqueTheme3DLayer=Zf,o().supermap.UniqueThemeLayer=ip,o().supermap.GraphMap=cC,o().supermap.L7Layer=Jx,o().supermap.AddressMatchService=vk,o().supermap.ChartService=pT,o().supermap.DataFlowService=IT,o().supermap.DatasetService=WT,o().supermap.DatasourceService=dj,o().supermap.FeatureService=JB,o().supermap.FieldService=MN,o().supermap.GeoprocessingService=pR,o().supermap.GridCellInfosService=ZN,o().supermap.ImageCollectionService=F5,o().supermap.ImageService=E5,o().supermap.LayerInfoService=xQ,o().supermap.MapService=XQ,o().supermap.MeasureService=mG,o().supermap.NetworkAnalyst3DService=CV,o().supermap.NetworkAnalystService=LH,o().supermap.ProcessingService=lJ,o().supermap.QueryService=FW,o().supermap.ServiceBase=Nw,o().supermap.SpatialAnalystService=P3,o().supermap.ThemeService=Y3,o().supermap.TrafficTransferAnalystService=G4,o().supermap.WebPrintingJobService=s5,o().supermap.KnowledgeGraphService=dS,o().supermap.Components.ChartView=Kie,o().supermap.CommonUtil=M},2246:function(e,t,r){"use strict";function n(e,t,r){return(t=a(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}function a(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}var s=r(6392),u=r(4670),l=r(3214),c=r(1097),f=r(2035),p=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=t,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"Â¢"},pound:{regex:/&(pound|#163);/g,val:"Â£"},yen:{regex:/&(yen|#165);/g,val:"Â¥"},euro:{regex:/&(euro|#8364);/g,val:"â¬"},copyright:{regex:/&(copy|#169);/g,val:"Â©"},reg:{regex:/&(reg|#174);/g,val:"Â®"},inr:{regex:/&(inr|#8377);/g,val:"â¹"},num_dec:{regex:/&#([0-9]{1,7});/g,val:function(e,t){return String.fromCharCode(Number.parseInt(t,10))}},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:function(e,t){return String.fromCharCode(Number.parseInt(t,16))}}},this.addExternalEntities=h,this.parseXml=v,this.parseTextData=y,this.resolveNameSpace=d,this.buildAttributesMap=g,this.isItStopNode=S,this.replaceEntitiesValue=A,this.readStopNodeData=_,this.saveTextToParentTag=w,this.addChild=b,this.ignoreAttributesFn=f(this.options.ignoreAttributes)});function h(e){for(var t=Object.keys(e),r=0;r<t.length;r++){var n=t[r];this.lastEntities[n]={regex:new RegExp("&"+n+";","g"),val:e[n]}}}function y(e,t,r,n,i,a,s){if(void 0!==e&&(this.options.trimValues&&!n&&(e=e.trim()),e.length>0)){s||(e=this.replaceEntitiesValue(e));var u=this.options.tagValueProcessor(t,e,r,i,a);return null===u||void 0===u?e:o(u)!==o(e)||u!==e?u:this.options.trimValues?I(e,this.options.parseTagValue,this.options.numberParseOptions):e.trim()===e?I(e,this.options.parseTagValue,this.options.numberParseOptions):e}}function d(e){if(this.options.removeNSPrefix){var t=e.split(":"),r="/"===e.charAt(0)?"/":"";if("xmlns"===t[0])return"";2===t.length&&(e=r+t[1])}return e}var m=new RegExp("([^\\s=]+)\\s*(=\\s*(['\"])([\\s\\S]*?)\\3)?","gm");function g(e,t,r){if(!0!==this.options.ignoreAttributes&&"string"==typeof e){for(var n=s.getAllMatches(e,m),i=n.length,a={},u=0;u<i;u++){var l=this.resolveNameSpace(n[u][1]);if(!this.ignoreAttributesFn(l,t)){var c=n[u][4],f=this.options.attributeNamePrefix+l;if(l.length)if(this.options.transformAttributeName&&(f=this.options.transformAttributeName(f)),"__proto__"===f&&(f="#__proto__"),void 0!==c){this.options.trimValues&&(c=c.trim()),c=this.replaceEntitiesValue(c);var p=this.options.attributeValueProcessor(l,c,t);null===p||void 0===p?a[f]=c:o(p)!==o(c)||p!==c?a[f]=p:a[f]=I(c,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(a[f]=!0)}}if(!Object.keys(a).length)return;if(this.options.attributesGroupName){var h={};return h[this.options.attributesGroupName]=a,h}return a}}var v=function(e){e=e.replace(/\r\n?/g,"\n");for(var t=new u("!xml"),r=t,o="",i="",a=0;a<e.length;a++){if("<"===e[a])if("/"===e[a+1]){var s=C(e,">",a,"Closing Tag is not closed."),c=e.substring(a+2,s).trim();if(this.options.removeNSPrefix){var f=c.indexOf(":");-1!==f&&(c=c.substr(f+1))}this.options.transformTagName&&(c=this.options.transformTagName(c)),r&&(o=this.saveTextToParentTag(o,r,i));var p=i.substring(i.lastIndexOf(".")+1);if(c&&-1!==this.options.unpairedTags.indexOf(c))throw new Error("Unpaired tag can not be used as closing tag: </".concat(c,">"));var h=0;p&&-1!==this.options.unpairedTags.indexOf(p)?(h=i.lastIndexOf(".",i.lastIndexOf(".")-1),this.tagsNodeStack.pop()):h=i.lastIndexOf("."),i=i.substring(0,h),r=this.tagsNodeStack.pop(),o="",a=s}else if("?"===e[a+1]){var y=E(e,a,!1,"?>");if(!y)throw new Error("Pi Tag is not closed.");if(o=this.saveTextToParentTag(o,r,i),this.options.ignoreDeclaration&&"?xml"===y.tagName||this.options.ignorePiTags);else{var d=new u(y.tagName);d.add(this.options.textNodeName,""),y.tagName!==y.tagExp&&y.attrExpPresent&&(d[":@"]=this.buildAttributesMap(y.tagExp,i,y.tagName)),this.addChild(r,d,i)}a=y.closeIndex+1}else if("!--"===e.substr(a+1,3)){var m=C(e,"--\x3e",a+4,"Comment is not closed.");if(this.options.commentPropName){var g=e.substring(a+4,m-2);o=this.saveTextToParentTag(o,r,i),r.add(this.options.commentPropName,[n({},this.options.textNodeName,g)])}a=m}else if("!D"===e.substr(a+1,2)){var v=l(e,a);this.docTypeEntities=v.entities,a=v.i}else if("!["===e.substr(a+1,2)){var b=C(e,"]]>",a,"CDATA is not closed.")-2,A=e.substring(a+9,b);o=this.saveTextToParentTag(o,r,i);var w=this.parseTextData(A,r.tagname,i,!0,!1,!0,!0);void 0==w&&(w=""),this.options.cdataPropName?r.add(this.options.cdataPropName,[n({},this.options.textNodeName,A)]):r.add(this.options.textNodeName,w),a=b+2}else{var S=E(e,a,this.options.removeNSPrefix),_=S.tagName,I=S.rawTagName,O=S.tagExp,x=S.attrExpPresent,P=S.closeIndex;this.options.transformTagName&&(_=this.options.transformTagName(_)),r&&o&&"!xml"!==r.tagname&&(o=this.saveTextToParentTag(o,r,i,!1));var k=r;if(k&&-1!==this.options.unpairedTags.indexOf(k.tagname)&&(r=this.tagsNodeStack.pop(),i=i.substring(0,i.lastIndexOf("."))),_!==t.tagname&&(i+=i?"."+_:_),this.isItStopNode(this.options.stopNodes,i,_)){var T="";if(O.length>0&&O.lastIndexOf("/")===O.length-1)"/"===_[_.length-1]?(_=_.substr(0,_.length-1),i=i.substr(0,i.length-1),O=_):O=O.substr(0,O.length-1),a=S.closeIndex;else if(-1!==this.options.unpairedTags.indexOf(_))a=S.closeIndex;else{var j=this.readStopNodeData(e,I,P+1);if(!j)throw new Error("Unexpected end of ".concat(I));a=j.i,T=j.tagContent}var M=new u(_);_!==O&&x&&(M[":@"]=this.buildAttributesMap(O,i,_)),T&&(T=this.parseTextData(T,_,i,!0,x,!0,!0)),i=i.substr(0,i.lastIndexOf(".")),M.add(this.options.textNodeName,T),this.addChild(r,M,i)}else{if(O.length>0&&O.lastIndexOf("/")===O.length-1){"/"===_[_.length-1]?(_=_.substr(0,_.length-1),i=i.substr(0,i.length-1),O=_):O=O.substr(0,O.length-1),this.options.transformTagName&&(_=this.options.transformTagName(_));var B=new u(_);_!==O&&x&&(B[":@"]=this.buildAttributesMap(O,i,_)),this.addChild(r,B,i),i=i.substr(0,i.lastIndexOf("."))}else{var N=new u(_);this.tagsNodeStack.push(r),_!==O&&x&&(N[":@"]=this.buildAttributesMap(O,i,_)),this.addChild(r,N,i),r=N}o="",a=P}}else o+=e[a]}return t.child};function b(e,t,r){var n=this.options.updateTag(t.tagname,r,t[":@"]);!1===n||("string"==typeof n?(t.tagname=n,e.addChild(t)):e.addChild(t))}var A=function(e){if(this.options.processEntities){for(var t in this.docTypeEntities){var r=this.docTypeEntities[t];e=e.replace(r.regx,r.val)}for(var n in this.lastEntities){var o=this.lastEntities[n];e=e.replace(o.regex,o.val)}if(this.options.htmlEntities)for(var i in this.htmlEntities){var a=this.htmlEntities[i];e=e.replace(a.regex,a.val)}e=e.replace(this.ampEntity.regex,this.ampEntity.val)}return e};function w(e,t,r,n){return e&&(void 0===n&&(n=0===t.child.length),void 0!==(e=this.parseTextData(e,t.tagname,r,!1,!!t[":@"]&&0!==Object.keys(t[":@"]).length,n))&&""!==e&&t.add(this.options.textNodeName,e),e=""),e}function S(e,t,r){var n="*."+r;for(var o in e){var i=e[o];if(n===i||t===i)return!0}return!1}function C(e,t,r,n){var o=e.indexOf(t,r);if(-1===o)throw new Error(n);return o+t.length-1}function E(e,t,r){var n=function(e,t){for(var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:">",o="",i=t;i<e.length;i++){var a=e[i];if(r)a===r&&(r="");else if('"'===a||"'"===a)r=a;else if(a===n[0]){if(!n[1])return{data:o,index:i};if(e[i+1]===n[1])return{data:o,index:i}}else"\t"===a&&(a=" ");o+=a}}(e,t+1,arguments.length>3&&void 0!==arguments[3]?arguments[3]:">");if(n){var o=n.data,i=n.index,a=o.search(/\s/),s=o,u=!0;-1!==a&&(s=o.substring(0,a),o=o.substring(a+1).trimStart());var l=s;if(r){var c=s.indexOf(":");-1!==c&&(u=(s=s.substr(c+1))!==n.data.substr(c+1))}return{tagName:s,tagExp:o,closeIndex:i,attrExpPresent:u,rawTagName:l}}}function _(e,t,r){for(var n=r,o=1;r<e.length;r++)if("<"===e[r])if("/"===e[r+1]){var i=C(e,">",r,"".concat(t," is not closed"));if(e.substring(r+2,i).trim()===t&&0===--o)return{tagContent:e.substring(n,r),i:i};r=i}else if("?"===e[r+1]){r=C(e,"?>",r+1,"StopNode is not closed.")}else if("!--"===e.substr(r+1,3)){r=C(e,"--\x3e",r+3,"StopNode is not closed.")}else if("!["===e.substr(r+1,2)){r=C(e,"]]>",r,"StopNode is not closed.")-2}else{var a=E(e,r,">");if(a)(a&&a.tagName)===t&&"/"!==a.tagExp[a.tagExp.length-1]&&o++,r=a.closeIndex}}function I(e,t,r){if(t&&"string"==typeof e){var n=e.trim();return"true"===n||"false"!==n&&c(e,r)}return s.isExist(e)?e:""}e.exports=p},2299:function(e,t,r){var n,o,i;function a(e){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}i=function(){"use strict";function e(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function t(e,t){return e<t?-1:e>t?1:0}return function(r,n,o,i,a){!function t(r,n,o,i,a){for(;i>o;){if(i-o>600){var s=i-o+1,u=n-o+1,l=Math.log(s),c=.5*Math.exp(2*l/3),f=.5*Math.sqrt(l*c*(s-c)/s)*(u-s/2<0?-1:1),p=Math.max(o,Math.floor(n-u*c/s+f)),h=Math.min(i,Math.floor(n+(s-u)*c/s+f));t(r,n,p,h,a)}var y=r[n],d=o,m=i;for(e(r,o,n),a(r[i],y)>0&&e(r,o,i);d<m;){for(e(r,d,m),d++,m--;a(r[d],y)<0;)d++;for(;a(r[m],y)>0;)m--}0===a(r[o],y)?e(r,o,m):e(r,++m,i),m<=n&&(o=m+1),n<=m&&(i=m-1)}}(r,n,o||0,i||r.length-1,a||t)}},"object"===a(t)?e.exports=i():void 0===(o="function"==typeof(n=i)?n.call(t,r,t,e):n)||(e.exports=o)},2461:function(e,t,r){"use strict";var n=r(5329),o=r(2791),i=r(9385),a=r(1807).f;e.exports=function(e){var t=n.Symbol||(n.Symbol={});o(t,e)||a(t,e,{value:i.f(e)})}},2533:function(e,t,r){"use strict";var n=r(4638),o=r(6220),i=n.document,a=o(i)&&o(i.createElement);e.exports=function(e){return a?i.createElement(e):{}}},2631:function(e){"use strict";function t(e){"@babel/helpers - typeof";return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r="object"==("undefined"==typeof document?"undefined":t(document))&&document.all;e.exports=void 0===r&&void 0!==r?function(e){return"function"==typeof e||e===r}:function(e){return"function"==typeof e}},2651:function(e,t,r){"use strict";var n=r(6392),o={allowBooleanAttributes:!1,unpairedTags:[]};function i(e){return" "===e||"\t"===e||"\n"===e||"\r"===e}function a(e,t){for(var r=t;t<e.length;t++)if("?"!=e[t]&&" "!=e[t]);else{var n=e.substr(r,t-r);if(t>5&&"xml"===n)return y("InvalidXml","XML declaration allowed only at the start of the document.",m(e,t));if("?"==e[t]&&">"==e[t+1]){t++;break}}return t}function s(e,t){if(e.length>t+5&&"-"===e[t+1]&&"-"===e[t+2]){for(t+=3;t<e.length;t++)if("-"===e[t]&&"-"===e[t+1]&&">"===e[t+2]){t+=2;break}}else if(e.length>t+8&&"D"===e[t+1]&&"O"===e[t+2]&&"C"===e[t+3]&&"T"===e[t+4]&&"Y"===e[t+5]&&"P"===e[t+6]&&"E"===e[t+7]){var r=1;for(t+=8;t<e.length;t++)if("<"===e[t])r++;else if(">"===e[t]&&0===--r)break}else if(e.length>t+9&&"["===e[t+1]&&"C"===e[t+2]&&"D"===e[t+3]&&"A"===e[t+4]&&"T"===e[t+5]&&"A"===e[t+6]&&"["===e[t+7])for(t+=8;t<e.length;t++)if("]"===e[t]&&"]"===e[t+1]&&">"===e[t+2]){t+=2;break}return t}t.validate=function(e,t){t=Object.assign({},o,t);var r,u=[],l=!1,f=!1;"\ufeff"===e[0]&&(e=e.substr(1));for(var d=0;d<e.length;d++)if("<"===e[d]&&"?"===e[d+1]){if((d=a(e,d+=2)).err)return d}else{if("<"!==e[d]){if(i(e[d]))continue;return y("InvalidChar","char '"+e[d]+"' is not expected.",m(e,d))}var g=d;if("!"===e[++d]){d=s(e,d);continue}var v=!1;"/"===e[d]&&(v=!0,d++);for(var b="";d<e.length&&">"!==e[d]&&" "!==e[d]&&"\t"!==e[d]&&"\n"!==e[d]&&"\r"!==e[d];d++)b+=e[d];if("/"===(b=b.trim())[b.length-1]&&(b=b.substring(0,b.length-1),d--),r=b,!n.isName(r)){return y("InvalidTag",0===b.trim().length?"Invalid space after '<'.":"Tag '"+b+"' is an invalid name.",m(e,d))}var A=c(e,d);if(!1===A)return y("InvalidAttr","Attributes for '"+b+"' have open quote.",m(e,d));var w=A.value;if(d=A.index,"/"===w[w.length-1]){var S=d-w.length,C=p(w=w.substring(0,w.length-1),t);if(!0!==C)return y(C.err.code,C.err.msg,m(e,S+C.err.line));l=!0}else if(v){if(!A.tagClosed)return y("InvalidTag","Closing tag '"+b+"' doesn't have proper closing.",m(e,d));if(w.trim().length>0)return y("InvalidTag","Closing tag '"+b+"' can't have attributes or invalid starting.",m(e,g));if(0===u.length)return y("InvalidTag","Closing tag '"+b+"' has not been opened.",m(e,g));var E=u.pop();if(b!==E.tagName){var _=m(e,E.tagStartPos);return y("InvalidTag","Expected closing tag '"+E.tagName+"' (opened in line "+_.line+", col "+_.col+") instead of closing tag '"+b+"'.",m(e,g))}0==u.length&&(f=!0)}else{var I=p(w,t);if(!0!==I)return y(I.err.code,I.err.msg,m(e,d-w.length+I.err.line));if(!0===f)return y("InvalidXml","Multiple possible root nodes found.",m(e,d));-1!==t.unpairedTags.indexOf(b)||u.push({tagName:b,tagStartPos:g}),l=!0}for(d++;d<e.length;d++)if("<"===e[d]){if("!"===e[d+1]){d=s(e,++d);continue}if("?"!==e[d+1])break;if((d=a(e,++d)).err)return d}else if("&"===e[d]){var O=h(e,d);if(-1==O)return y("InvalidChar","char '&' is not expected.",m(e,d));d=O}else if(!0===f&&!i(e[d]))return y("InvalidXml","Extra text at the end",m(e,d));"<"===e[d]&&d--}return l?1==u.length?y("InvalidTag","Unclosed tag '"+u[0].tagName+"'.",m(e,u[0].tagStartPos)):!(u.length>0)||y("InvalidXml","Invalid '"+JSON.stringify(u.map(function(e){return e.tagName}),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1}):y("InvalidXml","Start tag expected.",1)};var u='"',l="'";function c(e,t){for(var r="",n="",o=!1;t<e.length;t++){if(e[t]===u||e[t]===l)""===n?n=e[t]:n!==e[t]||(n="");else if(">"===e[t]&&""===n){o=!0;break}r+=e[t]}return""===n&&{value:r,index:t,tagClosed:o}}var f=new RegExp("(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['\"])(([\\s\\S])*?)\\5)?","g");function p(e,t){for(var r=n.getAllMatches(e,f),o={},i=0;i<r.length;i++){if(0===r[i][1].length)return y("InvalidAttr","Attribute '"+r[i][2]+"' has no space in starting.",g(r[i]));if(void 0!==r[i][3]&&void 0===r[i][4])return y("InvalidAttr","Attribute '"+r[i][2]+"' is without value.",g(r[i]));if(void 0===r[i][3]&&!t.allowBooleanAttributes)return y("InvalidAttr","boolean attribute '"+r[i][2]+"' is not allowed.",g(r[i]));var a=r[i][2];if(!d(a))return y("InvalidAttr","Attribute '"+a+"' is an invalid name.",g(r[i]));if(o.hasOwnProperty(a))return y("InvalidAttr","Attribute '"+a+"' is repeated.",g(r[i]));o[a]=1}return!0}function h(e,t){if(";"===e[++t])return-1;if("#"===e[t])return function(e,t){var r=/\d/;for("x"===e[t]&&(t++,r=/[\da-fA-F]/);t<e.length;t++){if(";"===e[t])return t;if(!e[t].match(r))break}return-1}(e,++t);for(var r=0;t<e.length;t++,r++)if(!(e[t].match(/\w/)&&r<20)){if(";"===e[t])break;return-1}return t}function y(e,t,r){return{err:{code:e,msg:t,line:r.line||r,col:r.col}}}function d(e){return n.isName(e)}function m(e,t){var r=e.substring(0,t).split(/\r?\n/);return{line:r.length,col:r[r.length-1].length+1}}function g(e){return e.startIndex+e[1].length}},2714:function(e,t,r){var n,o;function i(e){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e=r.nmd(e),function(a,s){"use strict";"object"===i(e)&&e.exports?e.exports=s():void 0===(o="function"==typeof(n=s)?n.call(t,r,t,e):n)||(e.exports=o)}(0,function(e){"use strict";var t=e&&e.SecondLevelDomains,r={list:{ac:" com gov mil net org ",ae:" ac co gov mil name net org pro sch ",af:" com edu gov net org ",al:" com edu gov mil net org ",ao:" co ed gv it og pb ",ar:" com edu gob gov int mil net org tur ",at:" ac co gv or ",au:" asn com csiro edu gov id net org ",ba:" co com edu gov mil net org rs unbi unmo unsa untz unze ",bb:" biz co com edu gov info net org store tv ",bh:" biz cc com edu gov info net org ",bn:" com edu gov net org ",bo:" com edu gob gov int mil net org tv ",br:" adm adv agr am arq art ato b bio blog bmd cim cng cnt com coop ecn edu eng esp etc eti far flog fm fnd fot fst g12 ggf gov imb ind inf jor jus lel mat med mil mus net nom not ntr odo org ppg pro psc psi qsl rec slg srv tmp trd tur tv vet vlog wiki zlg ",bs:" com edu gov net org ",bz:" du et om ov rg ",ca:" ab bc mb nb nf nl ns nt nu on pe qc sk yk ",ck:" biz co edu gen gov info net org ",cn:" ac ah bj com cq edu fj gd gov gs gx gz ha hb he hi hl hn jl js jx ln mil net nm nx org qh sc sd sh sn sx tj tw xj xz yn zj ",co:" com edu gov mil net nom org ",cr:" ac c co ed fi go or sa ",cy:" ac biz com ekloges gov ltd name net org parliament press pro tm ",do:" art com edu gob gov mil net org sld web ",dz:" art asso com edu gov net org pol ",ec:" com edu fin gov info med mil net org pro ",eg:" com edu eun gov mil name net org sci ",er:" com edu gov ind mil net org rochest w ",es:" com edu gob nom org ",et:" biz com edu gov info name net org ",fj:" ac biz com info mil name net org pro ",fk:" ac co gov net nom org ",fr:" asso com f gouv nom prd presse tm ",gg:" co net org ",gh:" com edu gov mil org ",gn:" ac com gov net org ",gr:" com edu gov mil net org ",gt:" com edu gob ind mil net org ",gu:" com edu gov net org ",hk:" com edu gov idv net org ",hu:" 2000 agrar bolt casino city co erotica erotika film forum games hotel info ingatlan jogasz konyvelo lakas media news org priv reklam sex shop sport suli szex tm tozsde utazas video ",id:" ac co go mil net or sch web ",il:" ac co gov idf k12 muni net org ",in:" ac co edu ernet firm gen gov i ind mil net nic org res ",iq:" com edu gov i mil net org ",ir:" ac co dnssec gov i id net org sch ",it:" edu gov ",je:" co net org ",jo:" com edu gov mil name net org sch ",jp:" ac ad co ed go gr lg ne or ",ke:" ac co go info me mobi ne or sc ",kh:" com edu gov mil net org per ",ki:" biz com de edu gov info mob net org tel ",km:" asso com coop edu gouv k medecin mil nom notaires pharmaciens presse tm veterinaire ",kn:" edu gov net org ",kr:" ac busan chungbuk chungnam co daegu daejeon es gangwon go gwangju gyeongbuk gyeonggi gyeongnam hs incheon jeju jeonbuk jeonnam k kg mil ms ne or pe re sc seoul ulsan ",kw:" com edu gov net org ",ky:" com edu gov net org ",kz:" com edu gov mil net org ",lb:" com edu gov net org ",lk:" assn com edu gov grp hotel int ltd net ngo org sch soc web ",lr:" com edu gov net org ",lv:" asn com conf edu gov id mil net org ",ly:" com edu gov id med net org plc sch ",ma:" ac co gov m net org press ",mc:" asso tm ",me:" ac co edu gov its net org priv ",mg:" com edu gov mil nom org prd tm ",mk:" com edu gov inf name net org pro ",ml:" com edu gov net org presse ",mn:" edu gov org ",mo:" com edu gov net org ",mt:" com edu gov net org ",mv:" aero biz com coop edu gov info int mil museum name net org pro ",mw:" ac co com coop edu gov int museum net org ",mx:" com edu gob net org ",my:" com edu gov mil name net org sch ",nf:" arts com firm info net other per rec store web ",ng:" biz com edu gov mil mobi name net org sch ",ni:" ac co com edu gob mil net nom org ",np:" com edu gov mil net org ",nr:" biz com edu gov info net org ",om:" ac biz co com edu gov med mil museum net org pro sch ",pe:" com edu gob mil net nom org sld ",ph:" com edu gov i mil net ngo org ",pk:" biz com edu fam gob gok gon gop gos gov net org web ",pl:" art bialystok biz com edu gda gdansk gorzow gov info katowice krakow lodz lublin mil net ngo olsztyn org poznan pwr radom slupsk szczecin torun warszawa waw wroc wroclaw zgora ",pr:" ac biz com edu est gov info isla name net org pro prof ",ps:" com edu gov net org plo sec ",pw:" belau co ed go ne or ",ro:" arts com firm info nom nt org rec store tm www ",rs:" ac co edu gov in org ",sb:" com edu gov net org ",sc:" com edu gov net org ",sh:" co com edu gov net nom org ",sl:" com edu gov net org ",st:" co com consulado edu embaixada gov mil net org principe saotome store ",sv:" com edu gob org red ",sz:" ac co org ",tr:" av bbs bel biz com dr edu gen gov info k12 name net org pol tel tsk tv web ",tt:" aero biz cat co com coop edu gov info int jobs mil mobi museum name net org pro tel travel ",tw:" club com ebiz edu game gov idv mil net org ",mu:" ac co com gov net or org ",mz:" ac co edu gov org ",na:" co com ",nz:" ac co cri geek gen govt health iwi maori mil net org parliament school ",pa:" abo ac com edu gob ing med net nom org sld ",pt:" com edu gov int net nome org publ ",py:" com edu gov mil net org ",qa:" com edu gov mil net org ",re:" asso com nom ",ru:" ac adygeya altai amur arkhangelsk astrakhan bashkiria belgorod bir bryansk buryatia cbg chel chelyabinsk chita chukotka chuvashia com dagestan e-burg edu gov grozny int irkutsk ivanovo izhevsk jar joshkar-ola kalmykia kaluga kamchatka karelia kazan kchr kemerovo khabarovsk khakassia khv kirov koenig komi kostroma kranoyarsk kuban kurgan kursk lipetsk magadan mari mari-el marine mil mordovia mosreg msk murmansk nalchik net nnov nov novosibirsk nsk omsk orenburg org oryol penza perm pp pskov ptz rnd ryazan sakhalin samara saratov simbirsk smolensk spb stavropol stv surgut tambov tatarstan tom tomsk tsaritsyn tsk tula tuva tver tyumen udm udmurtia ulan-ude vladikavkaz vladimir vladivostok volgograd vologda voronezh vrn vyatka yakutia yamal yekaterinburg yuzhno-sakhalinsk ",rw:" ac co com edu gouv gov int mil net ",sa:" com edu gov med net org pub sch ",sd:" com edu gov info med net org tv ",se:" a ac b bd c d e f g h i k l m n o org p parti pp press r s t tm u w x y z ",sg:" com edu gov idn net org per ",sn:" art com edu gouv org perso univ ",sy:" com edu gov mil net news org ",th:" ac co go in mi net or ",tj:" ac biz co com edu go gov info int mil name net nic org test web ",tn:" agrinet com defense edunet ens fin gov ind info intl mincom nat net org perso rnrt rns rnu tourism ",tz:" ac co go ne or ",ua:" biz cherkassy chernigov chernovtsy ck cn co com crimea cv dn dnepropetrovsk donetsk dp edu gov if in ivano-frankivsk kh kharkov kherson khmelnitskiy kiev kirovograd km kr ks kv lg lugansk lutsk lviv me mk net nikolaev od odessa org pl poltava pp rovno rv sebastopol sumy te ternopil uzhgorod vinnica vn zaporizhzhe zhitomir zp zt ",ug:" ac co go ne or org sc ",uk:" ac bl british-library co cym gov govt icnet jet lea ltd me mil mod national-library-scotland nel net nhs nic nls org orgn parliament plc police sch scot soc ",us:" dni fed isa kids nsn ",uy:" com edu gub mil net org ",ve:" co com edu gob info mil net org web ",vi:" co com k12 net org ",vn:" ac biz com edu gov health info int name net org pro ",ye:" co com gov ltd me net org plc ",yu:" ac co edu gov org ",za:" ac agric alt bourse city co cybernet db edu gov grondar iaccess imt inca landesign law mil net ngo nis nom olivetti org pix school tm web ",zm:" ac co com edu gov net org sch ",com:"ar br cn de eu gb gr hu jpn kr no qc ru sa se uk us uy za ",net:"gb jp se uk ",org:"ae",de:"com "},has:function(e){var t=e.lastIndexOf(".");if(t<=0||t>=e.length-1)return!1;var n=e.lastIndexOf(".",t-1);if(n<=0||n>=t-1)return!1;var o=r.list[e.slice(t+1)];return!!o&&o.indexOf(" "+e.slice(n+1,t)+" ")>=0},is:function(e){var t=e.lastIndexOf(".");if(t<=0||t>=e.length-1)return!1;if(e.lastIndexOf(".",t-1)>=0)return!1;var n=r.list[e.slice(t+1)];return!!n&&n.indexOf(" "+e.slice(0,t)+" ")>=0},get:function(e){var t=e.lastIndexOf(".");if(t<=0||t>=e.length-1)return null;var n=e.lastIndexOf(".",t-1);if(n<=0||n>=t-1)return null;var o=r.list[e.slice(t+1)];return o?o.indexOf(" "+e.slice(n+1,t)+" ")<0?null:e.slice(n+1):null},noConflict:function(){return e.SecondLevelDomains===this&&(e.SecondLevelDomains=t),this}};return r})},2756:function(e,t,r){"use strict";var n=r(9234),o=r(2791),i=Function.prototype,a=n&&Object.getOwnPropertyDescriptor,s=o(i,"name"),u=s&&"something"===function(){}.name,l=s&&(!n||n&&a(i,"name").configurable);e.exports={EXISTS:s,PROPER:u,CONFIGURABLE:l}},2791:function(e,t,r){"use strict";var n=r(398),o=r(6079),i=n({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return i(o(e),t)}},2874:function(e){var t="\n";function r(e){for(var t=Object.keys(e),r=0;r<t.length;r++){var n=t[r];if(e.hasOwnProperty(n)&&":@"!==n)return n}}function n(e,t){var r="";if(e&&!t.ignoreAttributes)for(var n in e)if(e.hasOwnProperty(n)){var o=t.attributeValueProcessor(n,e[n]);!0===(o=i(o,t))&&t.suppressBooleanAttributes?r+=" ".concat(n.substr(t.attributeNamePrefix.length)):r+=" ".concat(n.substr(t.attributeNamePrefix.length),'="').concat(o,'"')}return r}function o(e,t){var r=(e=e.substr(0,e.length-t.textNodeName.length-1)).substr(e.lastIndexOf(".")+1);for(var n in t.stopNodes)if(t.stopNodes[n]===e||t.stopNodes[n]==="*."+r)return!0;return!1}function i(e,t){if(e&&e.length>0&&t.processEntities)for(var r=0;r<t.entities.length;r++){var n=t.entities[r];e=e.replace(n.regex,n.val)}return e}e.exports=function(e,a){var s="";return a.format&&a.indentBy.length>0&&(s=t),function e(t,a,s,u){for(var l="",c=!1,f=0;f<t.length;f++){var p=t[f],h=r(p);if(void 0!==h){var y="";if(y=0===s.length?h:"".concat(s,".").concat(h),h!==a.textNodeName)if(h!==a.cdataPropName)if(h!==a.commentPropName)if("?"!==h[0]){var d=u;""!==d&&(d+=a.indentBy);var m=n(p[":@"],a),g=u+"<".concat(h).concat(m),v=e(p[h],a,y,d);-1!==a.unpairedTags.indexOf(h)?a.suppressUnpairedNode?l+=g+">":l+=g+"/>":v&&0!==v.length||!a.suppressEmptyNode?v&&v.endsWith(">")?l+=g+">".concat(v).concat(u,"</").concat(h,">"):(l+=g+">",v&&""!==u&&(v.includes("/>")||v.includes("</"))?l+=u+a.indentBy+v+u:l+=v,l+="</".concat(h,">")):l+=g+"/>",c=!0}else{var b=n(p[":@"],a),A="?xml"===h?"":u,w=p[h][0][a.textNodeName];w=0!==w.length?" "+w:"",l+=A+"<".concat(h).concat(w).concat(b,"?>"),c=!0}else l+=u+"\x3c!--".concat(p[h][0][a.textNodeName],"--\x3e"),c=!0;else c&&(l+=u),l+="<![CDATA[".concat(p[h][0][a.textNodeName],"]]>"),c=!1;else{var S=p[h];o(y,a)||(S=i(S=a.tagValueProcessor(h,S),a)),c&&(l+=u),l+=S,c=!1}}}return l}(e,a,"",s)}},2968:function(e,t,r){"use strict";var n=r(7644),o=r(155);e.exports=function(e,t){var r=e[t];return o(r)?void 0:n(r)}},3070:function(e,t){var r={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},stopNodes:[],alwaysCreateTextNode:!1,isArray:function(){return!1},commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(e,t,r){return e}};t.buildOptions=function(e){return Object.assign({},r,e)},t.defaultOptions=r},3128:function(e,t,r){"use strict";var n=r(398),o=r(2631),i=r(4243),a=n(Function.toString);o(i.inspectSource)||(i.inspectSource=function(e){return a(e)}),e.exports=i.inspectSource},3174:function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i=r(2874),a=r(2035),s={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function u(e){this.options=Object.assign({},s,e),!0===this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.ignoreAttributesFn=a(this.options.ignoreAttributes),this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=f),this.processTextOrObjNode=l,this.options.format?(this.indentate=c,this.tagEndChar=">\n",this.newLine="\n"):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}function l(e,t,r,n){var o=this.j2x(e,r+1,n.concat(t));return void 0!==e[this.options.textNodeName]&&1===Object.keys(e).length?this.buildTextValNode(e[this.options.textNodeName],t,o.attrStr,r):this.buildObjectNode(o.val,t,o.attrStr,r)}function c(e){return this.options.indentBy.repeat(e)}function f(e){return!(!e.startsWith(this.options.attributeNamePrefix)||e===this.options.textNodeName)&&e.substr(this.attrPrefixLen)}u.prototype.build=function(e){return this.options.preserveOrder?i(e,this.options):(Array.isArray(e)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(e=o({},this.options.arrayNodeName,e)),this.j2x(e,0,[]).val)},u.prototype.j2x=function(e,t,r){var o="",i="",a=r.join(".");for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s))if(void 0===e[s])this.isAttribute(s)&&(i+="");else if(null===e[s])this.isAttribute(s)?i+="":s===this.options.cdataPropName?i+="":"?"===s[0]?i+=this.indentate(t)+"<"+s+"?"+this.tagEndChar:i+=this.indentate(t)+"<"+s+"/"+this.tagEndChar;else if(e[s]instanceof Date)i+=this.buildTextValNode(e[s],s,"",t);else if("object"!==n(e[s])){var u=this.isAttribute(s);if(u&&!this.ignoreAttributesFn(u,a))o+=this.buildAttrPairStr(u,""+e[s]);else if(!u)if(s===this.options.textNodeName){var l=this.options.tagValueProcessor(s,""+e[s]);i+=this.replaceEntitiesValue(l)}else i+=this.buildTextValNode(e[s],s,"",t)}else if(Array.isArray(e[s])){for(var c=e[s].length,f="",p="",h=0;h<c;h++){var y=e[s][h];if(void 0===y);else if(null===y)"?"===s[0]?i+=this.indentate(t)+"<"+s+"?"+this.tagEndChar:i+=this.indentate(t)+"<"+s+"/"+this.tagEndChar;else if("object"===n(y))if(this.options.oneListGroup){var d=this.j2x(y,t+1,r.concat(s));f+=d.val,this.options.attributesGroupName&&y.hasOwnProperty(this.options.attributesGroupName)&&(p+=d.attrStr)}else f+=this.processTextOrObjNode(y,s,t,r);else if(this.options.oneListGroup){var m=this.options.tagValueProcessor(s,y);f+=m=this.replaceEntitiesValue(m)}else f+=this.buildTextValNode(y,s,"",t)}this.options.oneListGroup&&(f=this.buildObjectNode(f,s,p,t)),i+=f}else if(this.options.attributesGroupName&&s===this.options.attributesGroupName)for(var g=Object.keys(e[s]),v=g.length,b=0;b<v;b++)o+=this.buildAttrPairStr(g[b],""+e[s][g[b]]);else i+=this.processTextOrObjNode(e[s],s,t,r);return{attrStr:o,val:i}},u.prototype.buildAttrPairStr=function(e,t){return t=this.options.attributeValueProcessor(e,""+t),t=this.replaceEntitiesValue(t),this.options.suppressBooleanAttributes&&"true"===t?" "+e:" "+e+'="'+t+'"'},u.prototype.buildObjectNode=function(e,t,r,n){if(""===e)return"?"===t[0]?this.indentate(n)+"<"+t+r+"?"+this.tagEndChar:this.indentate(n)+"<"+t+r+this.closeTag(t)+this.tagEndChar;var o="</"+t+this.tagEndChar,i="";return"?"===t[0]&&(i="?",o=""),!r&&""!==r||-1!==e.indexOf("<")?!1!==this.options.commentPropName&&t===this.options.commentPropName&&0===i.length?this.indentate(n)+"\x3c!--".concat(e,"--\x3e")+this.newLine:this.indentate(n)+"<"+t+r+i+this.tagEndChar+e+this.indentate(n)+o:this.indentate(n)+"<"+t+r+i+">"+e+o},u.prototype.closeTag=function(e){var t="";return-1!==this.options.unpairedTags.indexOf(e)?this.options.suppressUnpairedNode||(t="/"):t=this.options.suppressEmptyNode?"/":"></".concat(e),t},u.prototype.buildTextValNode=function(e,t,r,n){if(!1!==this.options.cdataPropName&&t===this.options.cdataPropName)return this.indentate(n)+"<![CDATA[".concat(e,"]]>")+this.newLine;if(!1!==this.options.commentPropName&&t===this.options.commentPropName)return this.indentate(n)+"\x3c!--".concat(e,"--\x3e")+this.newLine;if("?"===t[0])return this.indentate(n)+"<"+t+r+"?"+this.tagEndChar;var o=this.options.tagValueProcessor(t,e);return""===(o=this.replaceEntitiesValue(o))?this.indentate(n)+"<"+t+r+this.closeTag(t)+this.tagEndChar:this.indentate(n)+"<"+t+r+">"+o+"</"+t+this.tagEndChar},u.prototype.replaceEntitiesValue=function(e){if(e&&e.length>0&&this.options.processEntities)for(var t=0;t<this.options.entities.length;t++){var r=this.options.entities[t];e=e.replace(r.regex,r.val)}return e},e.exports=u},3214:function(e,t,r){function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],u=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var i=r(6392);function a(e,t){for(var r="";t<e.length&&"'"!==e[t]&&'"'!==e[t];t++)r+=e[t];if(-1!==(r=r.trim()).indexOf(" "))throw new Error("External entites are not supported");for(var n=e[t++],o="";t<e.length&&e[t]!==n;t++)o+=e[t];return[r,o,t]}function s(e,t){return"!"===e[t+1]&&"-"===e[t+2]&&"-"===e[t+3]}function u(e,t){return"!"===e[t+1]&&"E"===e[t+2]&&"N"===e[t+3]&&"T"===e[t+4]&&"I"===e[t+5]&&"T"===e[t+6]&&"Y"===e[t+7]}function l(e,t){return"!"===e[t+1]&&"E"===e[t+2]&&"L"===e[t+3]&&"E"===e[t+4]&&"M"===e[t+5]&&"E"===e[t+6]&&"N"===e[t+7]&&"T"===e[t+8]}function c(e,t){return"!"===e[t+1]&&"A"===e[t+2]&&"T"===e[t+3]&&"T"===e[t+4]&&"L"===e[t+5]&&"I"===e[t+6]&&"S"===e[t+7]&&"T"===e[t+8]}function f(e,t){return"!"===e[t+1]&&"N"===e[t+2]&&"O"===e[t+3]&&"T"===e[t+4]&&"A"===e[t+5]&&"T"===e[t+6]&&"I"===e[t+7]&&"O"===e[t+8]&&"N"===e[t+9]}function p(e){if(i.isName(e))return e;throw new Error("Invalid entity name ".concat(e))}e.exports=function(e,t){var r={};if("O"!==e[t+3]||"C"!==e[t+4]||"T"!==e[t+5]||"Y"!==e[t+6]||"P"!==e[t+7]||"E"!==e[t+8])throw new Error("Invalid Tag instead of DOCTYPE");t+=9;for(var o=1,i=!1,h=!1;t<e.length;t++)if("<"!==e[t]||h)if(">"===e[t]){if(h?"-"===e[t-1]&&"-"===e[t-2]&&(h=!1,o--):o--,0===o)break}else"["===e[t]?i=!0:e[t];else{if(i&&u(e,t)){var y,d=void 0,m=n(a(e,(t+=7)+1),3);y=m[0],d=m[1],t=m[2],-1===d.indexOf("&")&&(r[p(y)]={regx:RegExp("&".concat(y,";"),"g"),val:d})}else if(i&&l(e,t))t+=8;else if(i&&c(e,t))t+=8;else if(i&&f(e,t))t+=9;else{if(!s)throw new Error("Invalid DOCTYPE");h=!0}o++}if(0!==o)throw new Error("Unclosed DOCTYPE");return{entities:r,i:t}}},3334:function(e,t,r){"use strict";var n=r(7386),o=r(1009);e.exports=Object.keys||function(e){return n(e,o)}},3443:function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=r(5189),i=r(2631),a=r(7123),s=r(5970),u=Object;e.exports=s?function(e){return"symbol"==n(e)}:function(e){var t=o("Symbol");return i(t)&&a(t.prototype,u(e))}},3448:function(e){var t=[],r=[],n="insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).";function o(e,o){if(o=o||{},void 0===e)throw new Error(n);var i,a=!0===o.prepend?"prepend":"append",s=void 0!==o.container?o.container:document.querySelector("head"),u=t.indexOf(s);return-1===u&&(u=t.push(s)-1,r[u]={}),void 0!==r[u]&&void 0!==r[u][a]?i=r[u][a]:(i=r[u][a]=function(){var e=document.createElement("style");return e.setAttribute("type","text/css"),e}(),"prepend"===a?s.insertBefore(i,s.childNodes[0]):s.appendChild(i)),65279===e.charCodeAt(0)&&(e=e.substr(1,e.length)),i.styleSheet?i.styleSheet.cssText+=e:i.textContent+=e,i}e.exports=o,e.exports.insertCss=o},3602:function(e,t,r){"use strict";var n=r(7386),o=r(1009).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,o)}},3670:function(e,t,r){"use strict";var n=r(4877),o=r(2631),i=/#|\.prototype\./,a=function(e,t){var r=u[s(e)];return r===c||r!==l&&(o(t)?n(t):!!t)},s=a.normalize=function(e){return String(e).replace(i,".").toLowerCase()},u=a.data={},l=a.NATIVE="N",c=a.POLYFILL="P";e.exports=a},3678:function(e,t){var r,n,o;n=[t,e],void 0===(o="function"==typeof(r=function(e,t){"use strict";var r={timeout:5e3,jsonpCallback:"callback",jsonpCallbackFunction:null};function n(e){try{delete window[e]}catch(t){window[e]=void 0}}function o(e){var t=document.getElementById(e);t&&document.getElementsByTagName("head")[0].removeChild(t)}t.exports=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=e,a=t.timeout||r.timeout,s=t.jsonpCallback||r.jsonpCallback,u=void 0;return new Promise(function(r,l){var c=t.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),f=s+"_"+c;window[c]=function(e){r({ok:!0,json:function(){return Promise.resolve(e)}}),u&&clearTimeout(u),o(f),n(c)},i+=-1===i.indexOf("?")?"?":"&";var p=document.createElement("script");p.setAttribute("src",""+i+s+"="+c),t.charset&&p.setAttribute("charset",t.charset),p.id=f,document.getElementsByTagName("head")[0].appendChild(p),u=setTimeout(function(){l(new Error("JSONP request to "+e+" timed out")),n(c),o(f),window[c]=function(){n(c)}},a),p.onerror=function(){l(new Error("JSONP request to "+e+" failed")),n(c),o(f),u&&clearTimeout(u)}})}})?r.apply(t,n):r)||(e.exports=o)},3712:function(e,t,r){"use strict";var n=r(9435);e.exports=n},3768:function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=r(4638),i=r(1805).f,a=r(5233),s=r(5414),u=r(6507),l=r(578),c=r(3670);e.exports=function(e,t){var r,f,p,h,y,d=e.target,m=e.global,g=e.stat;if(r=m?o:g?o[d]||u(d,{}):o[d]&&o[d].prototype)for(f in t){if(h=t[f],p=e.dontCallGetSet?(y=i(r,f))&&y.value:r[f],!c(m?f:d+(g?".":"#")+f,e.forced)&&void 0!==p){if(n(h)==n(p))continue;l(h,p)}(e.sham||p&&p.sham)&&a(h,"sham",!0),s(r,f,h,e)}}},4186:function(e){(function(){var t,r,n,o,i,a;"undefined"!=typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:"undefined"!=typeof process&&null!==process&&process.hrtime?(e.exports=function(){return(t()-i)/1e6},r=process.hrtime,o=(t=function(){var e;return 1e9*(e=r())[0]+e[1]})(),a=1e9*process.uptime(),i=o-a):Date.now?(e.exports=function(){return Date.now()-n},n=Date.now()):(e.exports=function(){return(new Date).getTime()-n},n=(new Date).getTime())}).call(this)},4243:function(e,t,r){"use strict";var n=r(497),o=r(4638),i=r(6507),a=e.exports=o["__core-js_shared__"]||i("__core-js_shared__",{});(a.versions||(a.versions=[])).push({version:"3.43.0",mode:n?"pure":"global",copyright:"Â© 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.43.0/LICENSE",source:"https://github.com/zloirock/core-js"})},4499:function(e,t,r){"use strict";var n=r(4243);e.exports=function(e,t){return n[e]||(n[e]=t||{})}},4538:function(e,t,r){"use strict";var n=r(398),o=n({}.toString),i=n("".slice);e.exports=function(e){return i(o(e),8,-1)}},4539:function(){"use strict"},4638:function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=function(e){return e&&e.Math===Math&&e};e.exports=o("object"==("undefined"==typeof globalThis?"undefined":n(globalThis))&&globalThis)||o("object"==("undefined"==typeof window?"undefined":n(window))&&window)||o("object"==("undefined"==typeof self?"undefined":n(self))&&self)||o("object"==(void 0===r.g?"undefined":n(r.g))&&r.g)||o("object"==n(this)&&this)||function(){return this}()||Function("return this")()},4670:function(e){"use strict";function t(e){"@babel/helpers - typeof";return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t,r){return(t=o(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,o(n.key),n)}}function o(e){var r=function(e,r){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,r||"default");if("object"!=t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==t(r)?r:r+""}var i=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.tagname=t,this.child=[],this[":@"]={}},(t=[{key:"add",value:function(e,t){"__proto__"===e&&(e="#__proto__"),this.child.push(r({},e,t))}},{key:"addChild",value:function(e){"__proto__"===e.tagname&&(e.tagname="#__proto__"),e[":@"]&&Object.keys(e[":@"]).length>0?this.child.push(r(r({},e.tagname,e.child),":@",e[":@"])):this.child.push(r({},e.tagname,e.child))}}])&&n(e.prototype,t),o&&n(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,o}();e.exports=i},4796:function(e,t,r){"use strict";var n=r(9234),o=r(4877);e.exports=n&&o(function(){return 42!==Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})},4861:function(e){"use strict";var t=String;e.exports=function(e){try{return t(e)}catch(e){return"Object"}}},4877:function(e){"use strict";e.exports=function(e){try{return!!e()}catch(e){return!0}}},5032:function(e,t,r){"use strict";var n=r(4638),o=r(2631),i=n.WeakMap;e.exports=o(i)&&/native code/.test(String(i))},5045:function(e,t,r){function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,i(n.key),n)}}function i(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:t+""}var a=r(3070).buildOptions,s=r(2246),u=r(9279).prettify,l=r(2651),c=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.externalEntities={},this.options=a(t)},(t=[{key:"parse",value:function(e,t){if("string"==typeof e);else{if(!e.toString)throw new Error("XML data is accepted in String or Bytes[] form.");e=e.toString()}if(t){!0===t&&(t={});var r=l.validate(e,t);if(!0!==r)throw Error("".concat(r.err.msg,":").concat(r.err.line,":").concat(r.err.col))}var n=new s(this.options);n.addExternalEntities(this.externalEntities);var o=n.parseXml(e);return this.options.preserveOrder||void 0===o?o:u(o,this.options)}},{key:"addEntity",value:function(e,t){if(-1!==t.indexOf("&"))throw new Error("Entity value can't have '&'");if(-1!==e.indexOf("&")||-1!==e.indexOf(";"))throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if("&"===t)throw new Error("An entity with value '&' is not permitted");this.externalEntities[e]=t}}])&&o(e.prototype,t),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();e.exports=c},5161:function(e,t,r){"use strict";var n,o,i=r(4638),a=r(1289),s=i.process,u=i.Deno,l=s&&s.versions||u&&u.version,c=l&&l.v8;c&&(o=(n=c.split("."))[0]>0&&n[0]<4?1:+(n[0]+n[1])),!o&&a&&(!(n=a.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=a.match(/Chrome\/(\d+)/))&&(o=+n[1]),e.exports=o},5189:function(e,t,r){"use strict";var n=r(4638),o=r(2631);e.exports=function(e,t){return arguments.length<2?(r=n[e],o(r)?r:void 0):n[e]&&n[e][t];var r}},5233:function(e,t,r){"use strict";var n=r(9234),o=r(1807),i=r(1718);e.exports=n?function(e,t,r){return o.f(e,t,i(1,r))}:function(e,t,r){return e[t]=r,e}},5246:function(e,t,r){var n,o,i;function a(e){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}i=function(){"use strict";function e(e){var t=this.constructor;return this.then(function(r){return t.resolve(e()).then(function(){return r})},function(r){return t.resolve(e()).then(function(){return t.reject(r)})})}function t(e){return new this(function(t,r){if(!e||void 0===e.length)return r(new TypeError(a(e)+" "+e+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var n=Array.prototype.slice.call(e);if(0===n.length)return t([]);var o=n.length;function i(e,r){if(r&&("object"===a(r)||"function"==typeof r)){var s=r.then;if("function"==typeof s)return void s.call(r,function(t){i(e,t)},function(r){n[e]={status:"rejected",reason:r},0==--o&&t(n)})}n[e]={status:"fulfilled",value:r},0==--o&&t(n)}for(var s=0;s<n.length;s++)i(s,n[s])})}var n=setTimeout;function o(e){return Boolean(e&&void 0!==e.length)}function i(){}function s(e){if(!(this instanceof s))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],p(e,this)}function u(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,s._immediateFn(function(){var r=1===e._state?t.onFulfilled:t.onRejected;if(null!==r){var n;try{n=r(e._value)}catch(e){return void c(t.promise,e)}l(t.promise,n)}else(1===e._state?l:c)(t.promise,e._value)})):e._deferreds.push(t)}function l(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"===a(t)||"function"==typeof t)){var r=t.then;if(t instanceof s)return e._state=3,e._value=t,void f(e);if("function"==typeof r)return void p((n=r,o=t,function(){n.apply(o,arguments)}),e)}e._state=1,e._value=t,f(e)}catch(t){c(e,t)}var n,o}function c(e,t){e._state=2,e._value=t,f(e)}function f(e){2===e._state&&0===e._deferreds.length&&s._immediateFn(function(){e._handled||s._unhandledRejectionFn(e._value)});for(var t=0,r=e._deferreds.length;t<r;t++)u(e,e._deferreds[t]);e._deferreds=null}function p(e,t){var r=!1;try{e(function(e){r||(r=!0,l(t,e))},function(e){r||(r=!0,c(t,e))})}catch(e){if(r)return;r=!0,c(t,e)}}s.prototype.catch=function(e){return this.then(null,e)},s.prototype.then=function(e,t){var r=new this.constructor(i);return u(this,new function(e,t,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=r}(e,t,r)),r},s.prototype.finally=e,s.all=function(e){return new s(function(t,r){if(!o(e))return r(new TypeError("Promise.all accepts an array"));var n=Array.prototype.slice.call(e);if(0===n.length)return t([]);var i=n.length;function s(e,o){try{if(o&&("object"===a(o)||"function"==typeof o)){var u=o.then;if("function"==typeof u)return void u.call(o,function(t){s(e,t)},r)}n[e]=o,0==--i&&t(n)}catch(e){r(e)}}for(var u=0;u<n.length;u++)s(u,n[u])})},s.allSettled=t,s.resolve=function(e){return e&&"object"===a(e)&&e.constructor===s?e:new s(function(t){t(e)})},s.reject=function(e){return new s(function(t,r){r(e)})},s.race=function(e){return new s(function(t,r){if(!o(e))return r(new TypeError("Promise.race accepts an array"));for(var n=0,i=e.length;n<i;n++)s.resolve(e[n]).then(t,r)})},s._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){n(e,0)},s._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var h=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r.g)return r.g;throw new Error("unable to locate global object")}();"function"!=typeof h.Promise?h.Promise=s:(h.Promise.prototype.finally||(h.Promise.prototype.finally=e),h.Promise.allSettled||(h.Promise.allSettled=t))},"object"===a(t)?i():void 0===(o="function"==typeof(n=i)?n.call(t,r,t,e):n)||(e.exports=o)},5329:function(e,t,r){"use strict";var n=r(4638);e.exports=n},5400:function(e,t,r){var n,o;function i(e){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e=r.nmd(e),function(a,s){"use strict";"object"===i(e)&&e.exports?e.exports=s():void 0===(o="function"==typeof(n=s)?n.call(t,r,t,e):n)||(e.exports=o)}(0,function(e){"use strict";var t=e&&e.IPv6;return{best:function(e){var t,r,n=e.toLowerCase().split(":"),o=n.length,i=8;for(""===n[0]&&""===n[1]&&""===n[2]?(n.shift(),n.shift()):""===n[0]&&""===n[1]?n.shift():""===n[o-1]&&""===n[o-2]&&n.pop(),-1!==n[(o=n.length)-1].indexOf(".")&&(i=7),t=0;t<o&&""!==n[t];t++);if(t<i)for(n.splice(t,1,"0000");n.length<i;)n.splice(t,0,"0000");for(var a=0;a<i;a++){r=n[a].split("");for(var s=0;s<3&&"0"===r[0]&&r.length>1;s++)r.splice(0,1);n[a]=r.join("")}var u=-1,l=0,c=0,f=-1,p=!1;for(a=0;a<i;a++)p?"0"===n[a]?c+=1:(p=!1,c>l&&(u=f,l=c)):"0"===n[a]&&(p=!0,f=a,c=1);c>l&&(u=f,l=c),l>1&&n.splice(u,l,""),o=n.length;var h="";for(""===n[0]&&(h=":"),a=0;a<o&&(h+=n[a],a!==o-1);a++)h+=":";return""===n[o-1]&&(h+=":"),h},noConflict:function(){return e.IPv6===this&&(e.IPv6=t),this}}})},5414:function(e,t,r){"use strict";var n=r(2631),o=r(1807),i=r(7773),a=r(6507);e.exports=function(e,t,r,s){s||(s={});var u=s.enumerable,l=void 0!==s.name?s.name:t;if(n(r)&&i(r,l,s),s.global)u?e[t]=r:a(t,r);else{try{s.unsafe?e[t]&&(u=!0):delete e[t]}catch(e){}u?e[t]=r:o.f(e,t,{value:r,enumerable:!1,configurable:!s.nonConfigurable,writable:!s.nonWritable})}return e}},5611:function(e,t,r){function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e=r.nmd(e);var o=200,i="__lodash_hash_undefined__",a=9007199254740991,s="[object Arguments]",u="[object Boolean]",l="[object Date]",c="[object Function]",f="[object GeneratorFunction]",p="[object Map]",h="[object Number]",y="[object Object]",d="[object RegExp]",m="[object Set]",g="[object String]",v="[object Symbol]",b="[object ArrayBuffer]",A="[object DataView]",w="[object Float32Array]",S="[object Float64Array]",C="[object Int8Array]",E="[object Int16Array]",_="[object Int32Array]",I="[object Uint8Array]",O="[object Uint8ClampedArray]",x="[object Uint16Array]",P="[object Uint32Array]",k=/\w*$/,T=/^\[object .+?Constructor\]$/,j=/^(?:0|[1-9]\d*)$/,M={};M[s]=M["[object Array]"]=M[b]=M[A]=M[u]=M[l]=M[w]=M[S]=M[C]=M[E]=M[_]=M[p]=M[h]=M[y]=M[d]=M[m]=M[g]=M[v]=M[I]=M[O]=M[x]=M[P]=!0,M["[object Error]"]=M[c]=M["[object WeakMap]"]=!1;var B="object"==(void 0===r.g?"undefined":n(r.g))&&r.g&&r.g.Object===Object&&r.g,N="object"==("undefined"==typeof self?"undefined":n(self))&&self&&self.Object===Object&&self,R=B||N||Function("return this")(),L="object"==n(t)&&t&&!t.nodeType&&t,D=L&&"object"==n(e)&&e&&!e.nodeType&&e,F=D&&D.exports===L;function Q(e,t){return e.set(t[0],t[1]),e}function G(e,t){return e.add(t),e}function U(e,t,r,n){var o=-1,i=e?e.length:0;for(n&&i&&(r=e[++o]);++o<i;)r=t(r,e[o],o,e);return r}function z(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function H(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}function q(e,t){return function(r){return e(t(r))}}function V(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}var K,Y=Array.prototype,J=Function.prototype,W=Object.prototype,X=R["__core-js_shared__"],Z=(K=/[^.]+$/.exec(X&&X.keys&&X.keys.IE_PROTO||""))?"Symbol(src)_1."+K:"",$=J.toString,ee=W.hasOwnProperty,te=W.toString,re=RegExp("^"+$.call(ee).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ne=F?R.Buffer:void 0,oe=R.Symbol,ie=R.Uint8Array,ae=q(Object.getPrototypeOf,Object),se=Object.create,ue=W.propertyIsEnumerable,le=Y.splice,ce=Object.getOwnPropertySymbols,fe=ne?ne.isBuffer:void 0,pe=q(Object.keys,Object),he=De(R,"DataView"),ye=De(R,"Map"),de=De(R,"Promise"),me=De(R,"Set"),ge=De(R,"WeakMap"),ve=De(Object,"create"),be=ze(he),Ae=ze(ye),we=ze(de),Se=ze(me),Ce=ze(ge),Ee=oe?oe.prototype:void 0,_e=Ee?Ee.valueOf:void 0;function Ie(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Oe(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function xe(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Pe(e){this.__data__=new Oe(e)}function ke(e,t){var r=qe(e)||function(e){return function(e){return function(e){return!!e&&"object"==n(e)}(e)&&Ve(e)}(e)&&ee.call(e,"callee")&&(!ue.call(e,"callee")||te.call(e)==s)}(e)?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],o=r.length,i=!!o;for(var a in e)!t&&!ee.call(e,a)||i&&("length"==a||Ge(a,o))||r.push(a);return r}function Te(e,t,r){var n=e[t];ee.call(e,t)&&He(n,r)&&(void 0!==r||t in e)||(e[t]=r)}function je(e,t){for(var r=e.length;r--;)if(He(e[r][0],t))return r;return-1}function Me(e,t,r,n,o,i,a){var T;if(n&&(T=i?n(e,o,i,a):n(e)),void 0!==T)return T;if(!Je(e))return e;var j=qe(e);if(j){if(T=function(e){var t=e.length,r=e.constructor(t);t&&"string"==typeof e[0]&&ee.call(e,"index")&&(r.index=e.index,r.input=e.input);return r}(e),!t)return function(e,t){var r=-1,n=e.length;t||(t=Array(n));for(;++r<n;)t[r]=e[r];return t}(e,T)}else{var B=Qe(e),N=B==c||B==f;if(Ke(e))return function(e,t){if(t)return e.slice();var r=new e.constructor(e.length);return e.copy(r),r}(e,t);if(B==y||B==s||N&&!i){if(z(e))return i?e:{};if(T=function(e){return"function"!=typeof e.constructor||Ue(e)?{}:(t=ae(e),Je(t)?se(t):{});var t}(N?{}:e),!t)return function(e,t){return Re(e,Fe(e),t)}(e,function(e,t){return e&&Re(t,We(t),e)}(T,e))}else{if(!M[B])return i?e:{};T=function(e,t,r,n){var o=e.constructor;switch(t){case b:return Ne(e);case u:case l:return new o(+e);case A:return function(e,t){var r=t?Ne(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,n);case w:case S:case C:case E:case _:case I:case O:case x:case P:return function(e,t){var r=t?Ne(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}(e,n);case p:return function(e,t,r){return U(t?r(H(e),!0):H(e),Q,new e.constructor)}(e,n,r);case h:case g:return new o(e);case d:return(s=new(a=e).constructor(a.source,k.exec(a))).lastIndex=a.lastIndex,s;case m:return function(e,t,r){return U(t?r(V(e),!0):V(e),G,new e.constructor)}(e,n,r);case v:return i=e,_e?Object(_e.call(i)):{}}var i;var a,s}(e,B,Me,t)}}a||(a=new Pe);var R=a.get(e);if(R)return R;if(a.set(e,T),!j)var L=r?function(e){return function(e,t,r){var n=t(e);return qe(e)?n:function(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}(n,r(e))}(e,We,Fe)}(e):We(e);return function(e,t){for(var r=-1,n=e?e.length:0;++r<n&&!1!==t(e[r],r,e););}(L||e,function(o,i){L&&(o=e[i=o]),Te(T,i,Me(o,t,r,n,i,e,a))}),T}function Be(e){return!(!Je(e)||Z&&Z in e)&&(Ye(e)||z(e)?re:T).test(ze(e))}function Ne(e){var t=new e.constructor(e.byteLength);return new ie(t).set(new ie(e)),t}function Re(e,t,r,n){r||(r={});for(var o=-1,i=t.length;++o<i;){var a=t[o],s=n?n(r[a],e[a],a,r,e):void 0;Te(r,a,void 0===s?e[a]:s)}return r}function Le(e,t){var r,o,i=e.__data__;return("string"==(o=n(r=t))||"number"==o||"symbol"==o||"boolean"==o?"__proto__"!==r:null===r)?i["string"==typeof t?"string":"hash"]:i.map}function De(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return Be(r)?r:void 0}Ie.prototype.clear=function(){this.__data__=ve?ve(null):{}},Ie.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},Ie.prototype.get=function(e){var t=this.__data__;if(ve){var r=t[e];return r===i?void 0:r}return ee.call(t,e)?t[e]:void 0},Ie.prototype.has=function(e){var t=this.__data__;return ve?void 0!==t[e]:ee.call(t,e)},Ie.prototype.set=function(e,t){return this.__data__[e]=ve&&void 0===t?i:t,this},Oe.prototype.clear=function(){this.__data__=[]},Oe.prototype.delete=function(e){var t=this.__data__,r=je(t,e);return!(r<0||(r==t.length-1?t.pop():le.call(t,r,1),0))},Oe.prototype.get=function(e){var t=this.__data__,r=je(t,e);return r<0?void 0:t[r][1]},Oe.prototype.has=function(e){return je(this.__data__,e)>-1},Oe.prototype.set=function(e,t){var r=this.__data__,n=je(r,e);return n<0?r.push([e,t]):r[n][1]=t,this},xe.prototype.clear=function(){this.__data__={hash:new Ie,map:new(ye||Oe),string:new Ie}},xe.prototype.delete=function(e){return Le(this,e).delete(e)},xe.prototype.get=function(e){return Le(this,e).get(e)},xe.prototype.has=function(e){return Le(this,e).has(e)},xe.prototype.set=function(e,t){return Le(this,e).set(e,t),this},Pe.prototype.clear=function(){this.__data__=new Oe},Pe.prototype.delete=function(e){return this.__data__.delete(e)},Pe.prototype.get=function(e){return this.__data__.get(e)},Pe.prototype.has=function(e){return this.__data__.has(e)},Pe.prototype.set=function(e,t){var r=this.__data__;if(r instanceof Oe){var n=r.__data__;if(!ye||n.length<o-1)return n.push([e,t]),this;r=this.__data__=new xe(n)}return r.set(e,t),this};var Fe=ce?q(ce,Object):function(){return[]},Qe=function(e){return te.call(e)};function Ge(e,t){return!!(t=null==t?a:t)&&("number"==typeof e||j.test(e))&&e>-1&&e%1==0&&e<t}function Ue(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||W)}function ze(e){if(null!=e){try{return $.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function He(e,t){return e===t||e!=e&&t!=t}(he&&Qe(new he(new ArrayBuffer(1)))!=A||ye&&Qe(new ye)!=p||de&&"[object Promise]"!=Qe(de.resolve())||me&&Qe(new me)!=m||ge&&"[object WeakMap]"!=Qe(new ge))&&(Qe=function(e){var t=te.call(e),r=t==y?e.constructor:void 0,n=r?ze(r):void 0;if(n)switch(n){case be:return A;case Ae:return p;case we:return"[object Promise]";case Se:return m;case Ce:return"[object WeakMap]"}return t});var qe=Array.isArray;function Ve(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=a}(e.length)&&!Ye(e)}var Ke=fe||function(){return!1};function Ye(e){var t=Je(e)?te.call(e):"";return t==c||t==f}function Je(e){var t=n(e);return!!e&&("object"==t||"function"==t)}function We(e){return Ve(e)?ke(e):function(e){if(!Ue(e))return pe(e);var t=[];for(var r in Object(e))ee.call(e,r)&&"constructor"!=r&&t.push(r);return t}(e)}e.exports=function(e){return Me(e,!0,!0)}},5720:function(e,t,r){"use strict";var n=r(9707),o=r(2631),i=r(6220),a=TypeError;e.exports=function(e,t){var r,s;if("string"===t&&o(r=e.toString)&&!i(s=n(r,e)))return s;if(o(r=e.valueOf)&&!i(s=n(r,e)))return s;if("string"!==t&&o(r=e.toString)&&!i(s=n(r,e)))return s;throw new a("Can't convert object to primitive value")}},5970:function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=r(7161);e.exports=o&&!Symbol.sham&&"symbol"==n(Symbol.iterator)},6079:function(e,t,r){"use strict";var n=r(1308),o=Object;e.exports=function(e){return o(n(e))}},6220:function(e,t,r){"use strict";function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=r(2631);e.exports=function(e){return"object"==n(e)?null!==e:o(e)}},6355:function(e,t,r){"use strict";var n=r(9234),o=r(398),i=r(9707),a=r(4877),s=r(3334),u=r(791),l=r(15),c=r(6079),f=r(9213),p=Object.assign,h=Object.defineProperty,y=o([].concat);e.exports=!p||a(function(){if(n&&1!==p({b:1},p(h({},"a",{enumerable:!0,get:function(){h(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},r=Symbol("assign detection");return e[r]=7,"abcdefghijklmnopqrst".split("").forEach(function(e){t[e]=e}),7!==p({},e)[r]||"abcdefghijklmnopqrst"!==s(p({},t)).join("")})?function(e,t){for(var r=c(e),o=arguments.length,a=1,p=u.f,h=l.f;o>a;)for(var d,m=f(arguments[a++]),g=p?y(s(m),p(m)):s(m),v=g.length,b=0;v>b;)d=g[b++],n&&!i(h,m,d)||(r[d]=m[d]);return r}:p},6392:function(e,t){"use strict";var r=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",n="["+r+"][:A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*",o=new RegExp("^"+n+"$");t.isExist=function(e){return void 0!==e},t.isEmptyObject=function(e){return 0===Object.keys(e).length},t.merge=function(e,t,r){if(t)for(var n=Object.keys(t),o=n.length,i=0;i<o;i++)e[n[i]]="strict"===r?[t[n[i]]]:t[n[i]]},t.getValue=function(e){return t.isExist(e)?e:""},t.isName=function(e){var t=o.exec(e);return!(null===t||void 0===t)},t.getAllMatches=function(e,t){for(var r=[],n=t.exec(e);n;){var o=[];o.startIndex=t.lastIndex-n[0].length;for(var i=n.length,a=0;a<i;a++)o.push(n[a]);r.push(o),n=t.exec(e)}return r},t.nameRegexp=n},6433:function(e,t,r){"use strict";var n=r(8142);e.exports=n},6507:function(e,t,r){"use strict";var n=r(4638),o=Object.defineProperty;e.exports=function(e,t){try{o(n,e,{value:t,configurable:!0,writable:!0})}catch(r){n[e]=t}return t}},6779:function(e,t,r){"use strict";var n=r(8167),o=r(3443);e.exports=function(e){var t=n(e,"string");return o(t)?t:t+""}},7105:function(e,t,r){"use strict";var n=r(7443);e.exports=function(e){var t=+e;return t!=t||0===t?0:n(t)}},7123:function(e,t,r){"use strict";var n=r(398);e.exports=n({}.isPrototypeOf)},7161:function(e,t,r){"use strict";var n=r(5161),o=r(4877),i=r(4638).String;e.exports=!!Object.getOwnPropertySymbols&&!o(function(){var e=Symbol("symbol detection");return!i(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&n&&n<41})},7197:function(e,t,r){"use strict";var n=r(5189),o=r(398),i=r(3602),a=r(791),s=r(9809),u=o([].concat);e.exports=n("Reflect","ownKeys")||function(e){var t=i.f(s(e)),r=a.f;return r?u(t,r(e)):t}},7386:function(e,t,r){"use strict";var n=r(398),o=r(2791),i=r(1059),a=r(7943).indexOf,s=r(8551),u=n([].push);e.exports=function(e,t){var r,n=i(e),l=0,c=[];for(r in n)!o(s,r)&&o(n,r)&&u(c,r);for(;t.length>l;)o(n,r=t[l++])&&(~a(c,r)||u(c,r));return c}},7411:function(e,t,r){var n,o,i;function a(e){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e=r.nmd(e),function(s,u){"use strict";"object"===a(e)&&e.exports?e.exports=u(r(9018),r(5400),r(2714)):(o=[r(9018),r(5400),r(2714)],void 0===(i="function"==typeof(n=u)?n.apply(t,o):n)||(e.exports=i))}(0,function(e,t,r,n){"use strict";var o=n&&n.URI;function i(e,t){var r=arguments.length>=1,n=arguments.length>=2;if(!(this instanceof i))return r?n?new i(e,t):new i(e):new i;if(void 0===e){if(r)throw new TypeError("undefined is not a valid argument for URI");e="undefined"!=typeof location?location.href+"":""}if(null===e&&r)throw new TypeError("null is not a valid argument for URI");return this.href(e),void 0!==t?this.absoluteTo(t):this}i.version="1.19.11";var s=i.prototype,u=Object.prototype.hasOwnProperty;function l(e){return e.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function c(e){return void 0===e?"Undefined":String(Object.prototype.toString.call(e)).slice(8,-1)}function f(e){return"Array"===c(e)}function p(e,t){var r,n,o={};if("RegExp"===c(t))o=null;else if(f(t))for(r=0,n=t.length;r<n;r++)o[t[r]]=!0;else o[t]=!0;for(r=0,n=e.length;r<n;r++){(o&&void 0!==o[e[r]]||!o&&t.test(e[r]))&&(e.splice(r,1),n--,r--)}return e}function h(e,t){var r,n;if(f(t)){for(r=0,n=t.length;r<n;r++)if(!h(e,t[r]))return!1;return!0}var o=c(t);for(r=0,n=e.length;r<n;r++)if("RegExp"===o){if("string"==typeof e[r]&&e[r].match(t))return!0}else if(e[r]===t)return!0;return!1}function y(e,t){if(!f(e)||!f(t))return!1;if(e.length!==t.length)return!1;e.sort(),t.sort();for(var r=0,n=e.length;r<n;r++)if(e[r]!==t[r])return!1;return!0}function d(e){return e.replace(/^\/+|\/+$/g,"")}function m(e){return escape(e)}function g(e){return encodeURIComponent(e).replace(/[!'()*]/g,m).replace(/\*/g,"%2A")}i._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,preventInvalidHostname:i.preventInvalidHostname,duplicateQueryParameters:i.duplicateQueryParameters,escapeQuerySpace:i.escapeQuerySpace}},i.preventInvalidHostname=!1,i.duplicateQueryParameters=!1,i.escapeQuerySpace=!0,i.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,i.idn_expression=/[^a-z0-9\._-]/i,i.punycode_expression=/(xn--)/i,i.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,i.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,i.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?Â«Â»ââââ]))/gi,i.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?Â«Â»âââââ]+$/,parens:/(\([^\)]*\)|\[[^\]]*\]|\{[^}]*\}|<[^>]*>)/g},i.leading_whitespace_expression=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,i.ascii_tab_whitespace=/[\u0009\u000A\u000D]+/g,i.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},i.hostProtocols=["http","https"],i.invalid_hostname_characters=/[^a-zA-Z0-9\.\-:_]/,i.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"},i.getDomAttribute=function(e){if(e&&e.nodeName){var t=e.nodeName.toLowerCase();if("input"!==t||"image"===e.type)return i.domAttributes[t]}},i.encode=g,i.decode=decodeURIComponent,i.iso8859=function(){i.encode=escape,i.decode=unescape},i.unicode=function(){i.encode=g,i.decode=decodeURIComponent},i.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/gi,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/gi,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}},urnpath:{encode:{expression:/%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/gi,map:{"%21":"!","%24":"$","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"=","%40":"@"}},decode:{expression:/[\/\?#:]/g,map:{"/":"%2F","?":"%3F","#":"%23",":":"%3A"}}}},i.encodeQuery=function(e,t){var r=i.encode(e+"");return void 0===t&&(t=i.escapeQuerySpace),t?r.replace(/%20/g,"+"):r},i.decodeQuery=function(e,t){e+="",void 0===t&&(t=i.escapeQuerySpace);try{return i.decode(t?e.replace(/\+/g,"%20"):e)}catch(t){return e}};var v,b={encode:"encode",decode:"decode"},A=function(e,t){return function(r){try{return i[t](r+"").replace(i.characters[e][t].expression,function(r){return i.characters[e][t].map[r]})}catch(e){return r}}};for(v in b)i[v+"PathSegment"]=A("pathname",b[v]),i[v+"UrnPathSegment"]=A("urnpath",b[v]);var w=function(e,t,r){return function(n){var o;o=r?function(e){return i[t](i[r](e))}:i[t];for(var a=(n+"").split(e),s=0,u=a.length;s<u;s++)a[s]=o(a[s]);return a.join(e)}};function S(e){return function(t,r){return void 0===t?this._parts[e]||"":(this._parts[e]=t||null,this.build(!r),this)}}function C(e,t){return function(r,n){return void 0===r?this._parts[e]||"":(null!==r&&(r+="").charAt(0)===t&&(r=r.substring(1)),this._parts[e]=r,this.build(!n),this)}}i.decodePath=w("/","decodePathSegment"),i.decodeUrnPath=w(":","decodeUrnPathSegment"),i.recodePath=w("/","encodePathSegment","decode"),i.recodeUrnPath=w(":","encodeUrnPathSegment","decode"),i.encodeReserved=A("reserved","encode"),i.parse=function(e,t){var r;return t||(t={preventInvalidHostname:i.preventInvalidHostname}),(r=(e=(e=e.replace(i.leading_whitespace_expression,"")).replace(i.ascii_tab_whitespace,"")).indexOf("#"))>-1&&(t.fragment=e.substring(r+1)||null,e=e.substring(0,r)),(r=e.indexOf("?"))>-1&&(t.query=e.substring(r+1)||null,e=e.substring(0,r)),"//"===(e=(e=e.replace(/^(https?|ftp|wss?)?:+[/\\]*/i,"$1://")).replace(/^[/\\]{2,}/i,"//")).substring(0,2)?(t.protocol=null,e=e.substring(2),e=i.parseAuthority(e,t)):(r=e.indexOf(":"))>-1&&(t.protocol=e.substring(0,r)||null,t.protocol&&!t.protocol.match(i.protocol_expression)?t.protocol=void 0:"//"===e.substring(r+1,r+3).replace(/\\/g,"/")?(e=e.substring(r+3),e=i.parseAuthority(e,t)):(e=e.substring(r+1),t.urn=!0)),t.path=e,t},i.parseHost=function(e,t){e||(e="");var r,n,o=(e=e.replace(/\\/g,"/")).indexOf("/");if(-1===o&&(o=e.length),"["===e.charAt(0))r=e.indexOf("]"),t.hostname=e.substring(1,r)||null,t.port=e.substring(r+2,o)||null,"/"===t.port&&(t.port=null);else{var a=e.indexOf(":"),s=e.indexOf("/"),u=e.indexOf(":",a+1);-1!==u&&(-1===s||u<s)?(t.hostname=e.substring(0,o)||null,t.port=null):(n=e.substring(0,o).split(":"),t.hostname=n[0]||null,t.port=n[1]||null)}return t.hostname&&"/"!==e.substring(o).charAt(0)&&(o++,e="/"+e),t.preventInvalidHostname&&i.ensureValidHostname(t.hostname,t.protocol),t.port&&i.ensureValidPort(t.port),e.substring(o)||"/"},i.parseAuthority=function(e,t){return e=i.parseUserinfo(e,t),i.parseHost(e,t)},i.parseUserinfo=function(e,t){var r=e;-1!==e.indexOf("\\")&&(e=e.replace(/\\/g,"/"));var n,o=e.indexOf("/"),a=e.lastIndexOf("@",o>-1?o:e.length-1);return a>-1&&(-1===o||a<o)?(n=e.substring(0,a).split(":"),t.username=n[0]?i.decode(n[0]):null,n.shift(),t.password=n[0]?i.decode(n.join(":")):null,e=r.substring(a+1)):(t.username=null,t.password=null),e},i.parseQuery=function(e,t){if(!e)return{};if(!(e=e.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,"")))return{};for(var r,n,o,a={},s=e.split("&"),l=s.length,c=0;c<l;c++)r=s[c].split("="),n=i.decodeQuery(r.shift(),t),o=r.length?i.decodeQuery(r.join("="),t):null,"__proto__"!==n&&(u.call(a,n)?("string"!=typeof a[n]&&null!==a[n]||(a[n]=[a[n]]),a[n].push(o)):a[n]=o);return a},i.build=function(e){var t="",r=!1;return e.protocol&&(t+=e.protocol+":"),e.urn||!t&&!e.hostname||(t+="//",r=!0),t+=i.buildAuthority(e)||"","string"==typeof e.path&&("/"!==e.path.charAt(0)&&r&&(t+="/"),t+=e.path),"string"==typeof e.query&&e.query&&(t+="?"+e.query),"string"==typeof e.fragment&&e.fragment&&(t+="#"+e.fragment),t},i.buildHost=function(e){var t="";return e.hostname?(i.ip6_expression.test(e.hostname)?t+="["+e.hostname+"]":t+=e.hostname,e.port&&(t+=":"+e.port),t):""},i.buildAuthority=function(e){return i.buildUserinfo(e)+i.buildHost(e)},i.buildUserinfo=function(e){var t="";return e.username&&(t+=i.encode(e.username)),e.password&&(t+=":"+i.encode(e.password)),t&&(t+="@"),t},i.buildQuery=function(e,t,r){var n,o,a,s,l="";for(o in e)if("__proto__"!==o&&u.call(e,o))if(f(e[o]))for(n={},a=0,s=e[o].length;a<s;a++)void 0!==e[o][a]&&void 0===n[e[o][a]+""]&&(l+="&"+i.buildQueryParameter(o,e[o][a],r),!0!==t&&(n[e[o][a]+""]=!0));else void 0!==e[o]&&(l+="&"+i.buildQueryParameter(o,e[o],r));return l.substring(1)},i.buildQueryParameter=function(e,t,r){return i.encodeQuery(e,r)+(null!==t?"="+i.encodeQuery(t,r):"")},i.addQuery=function(e,t,r){if("object"===a(t))for(var n in t)u.call(t,n)&&i.addQuery(e,n,t[n]);else{if("string"!=typeof t)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");if(void 0===e[t])return void(e[t]=r);"string"==typeof e[t]&&(e[t]=[e[t]]),f(r)||(r=[r]),e[t]=(e[t]||[]).concat(r)}},i.setQuery=function(e,t,r){if("object"===a(t))for(var n in t)u.call(t,n)&&i.setQuery(e,n,t[n]);else{if("string"!=typeof t)throw new TypeError("URI.setQuery() accepts an object, string as the name parameter");e[t]=void 0===r?null:r}},i.removeQuery=function(e,t,r){var n,o,s;if(f(t))for(n=0,o=t.length;n<o;n++)e[t[n]]=void 0;else if("RegExp"===c(t))for(s in e)t.test(s)&&(e[s]=void 0);else if("object"===a(t))for(s in t)u.call(t,s)&&i.removeQuery(e,s,t[s]);else{if("string"!=typeof t)throw new TypeError("URI.removeQuery() accepts an object, string, RegExp as the first parameter");void 0!==r?"RegExp"===c(r)?!f(e[t])&&r.test(e[t])?e[t]=void 0:e[t]=p(e[t],r):e[t]!==String(r)||f(r)&&1!==r.length?f(e[t])&&(e[t]=p(e[t],r)):e[t]=void 0:e[t]=void 0}},i.hasQuery=function(e,t,r,n){switch(c(t)){case"String":break;case"RegExp":for(var o in e)if(u.call(e,o)&&t.test(o)&&(void 0===r||i.hasQuery(e,o,r)))return!0;return!1;case"Object":for(var a in t)if(u.call(t,a)&&!i.hasQuery(e,a,t[a]))return!1;return!0;default:throw new TypeError("URI.hasQuery() accepts a string, regular expression or object as the name parameter")}switch(c(r)){case"Undefined":return t in e;case"Boolean":return r===Boolean(f(e[t])?e[t].length:e[t]);case"Function":return!!r(e[t],t,e);case"Array":return!!f(e[t])&&(n?h:y)(e[t],r);case"RegExp":return f(e[t])?!!n&&h(e[t],r):Boolean(e[t]&&e[t].match(r));case"Number":r=String(r);case"String":return f(e[t])?!!n&&h(e[t],r):e[t]===r;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},i.joinPaths=function(){for(var e=[],t=[],r=0,n=0;n<arguments.length;n++){var o=new i(arguments[n]);e.push(o);for(var a=o.segment(),s=0;s<a.length;s++)"string"==typeof a[s]&&t.push(a[s]),a[s]&&r++}if(!t.length||!r)return new i("");var u=new i("").segment(t);return""!==e[0].path()&&"/"!==e[0].path().slice(0,1)||u.path("/"+u.path()),u.normalize()},i.commonPath=function(e,t){var r,n=Math.min(e.length,t.length);for(r=0;r<n;r++)if(e.charAt(r)!==t.charAt(r)){r--;break}return r<1?e.charAt(0)===t.charAt(0)&&"/"===e.charAt(0)?"/":"":("/"===e.charAt(r)&&"/"===t.charAt(r)||(r=e.substring(0,r).lastIndexOf("/")),e.substring(0,r+1))},i.withinString=function(e,t,r){r||(r={});var n=r.start||i.findUri.start,o=r.end||i.findUri.end,a=r.trim||i.findUri.trim,s=r.parens||i.findUri.parens,u=/[a-z0-9-]=["']?$/i;for(n.lastIndex=0;;){var l=n.exec(e);if(!l)break;var c=l.index;if(r.ignoreHtml){var f=e.slice(Math.max(c-3,0),c);if(f&&u.test(f))continue}for(var p=c+e.slice(c).search(o),h=e.slice(c,p),y=-1;;){var d=s.exec(h);if(!d)break;var m=d.index+d[0].length;y=Math.max(y,m)}if(!((h=y>-1?h.slice(0,y)+h.slice(y).replace(a,""):h.replace(a,"")).length<=l[0].length||r.ignore&&r.ignore.test(h))){var g=t(h,c,p=c+h.length,e);void 0!==g?(g=String(g),e=e.slice(0,c)+g+e.slice(p),n.lastIndex=c+g.length):n.lastIndex=p}}return n.lastIndex=0,e},i.ensureValidHostname=function(t,r){var n=!!t,o=!1;if(!!r&&(o=h(i.hostProtocols,r)),o&&!n)throw new TypeError("Hostname cannot be empty, if protocol is "+r);if(t&&t.match(i.invalid_hostname_characters)){if(!e)throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-:_] and Punycode.js is not available');if(e.toASCII(t).match(i.invalid_hostname_characters))throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-:_]')}},i.ensureValidPort=function(e){if(e){var t=Number(e);if(!(/^[0-9]+$/.test(t)&&t>0&&t<65536))throw new TypeError('Port "'+e+'" is not a valid port')}},i.noConflict=function(e){if(e){var t={URI:this.noConflict()};return n.URITemplate&&"function"==typeof n.URITemplate.noConflict&&(t.URITemplate=n.URITemplate.noConflict()),n.IPv6&&"function"==typeof n.IPv6.noConflict&&(t.IPv6=n.IPv6.noConflict()),n.SecondLevelDomains&&"function"==typeof n.SecondLevelDomains.noConflict&&(t.SecondLevelDomains=n.SecondLevelDomains.noConflict()),t}return n.URI===this&&(n.URI=o),this},s.build=function(e){return!0===e?this._deferred_build=!0:(void 0===e||this._deferred_build)&&(this._string=i.build(this._parts),this._deferred_build=!1),this},s.clone=function(){return new i(this)},s.valueOf=s.toString=function(){return this.build(!1)._string},s.protocol=S("protocol"),s.username=S("username"),s.password=S("password"),s.hostname=S("hostname"),s.port=S("port"),s.query=C("query","?"),s.fragment=C("fragment","#"),s.search=function(e,t){var r=this.query(e,t);return"string"==typeof r&&r.length?"?"+r:r},s.hash=function(e,t){var r=this.fragment(e,t);return"string"==typeof r&&r.length?"#"+r:r},s.pathname=function(e,t){if(void 0===e||!0===e){var r=this._parts.path||(this._parts.hostname?"/":"");return e?(this._parts.urn?i.decodeUrnPath:i.decodePath)(r):r}return this._parts.urn?this._parts.path=e?i.recodeUrnPath(e):"":this._parts.path=e?i.recodePath(e):"/",this.build(!t),this},s.path=s.pathname,s.href=function(e,t){var r;if(void 0===e)return this.toString();this._string="",this._parts=i._parts();var n=e instanceof i,o="object"===a(e)&&(e.hostname||e.path||e.pathname);e.nodeName&&(e=e[i.getDomAttribute(e)]||"",o=!1);if(!n&&o&&void 0!==e.pathname&&(e=e.toString()),"string"==typeof e||e instanceof String)this._parts=i.parse(String(e),this._parts);else{if(!n&&!o)throw new TypeError("invalid input");var s=n?e._parts:e;for(r in s)"query"!==r&&u.call(this._parts,r)&&(this._parts[r]=s[r]);s.query&&this.query(s.query,!1)}return this.build(!t),this},s.is=function(e){var t=!1,n=!1,o=!1,a=!1,s=!1,u=!1,l=!1,c=!this._parts.urn;switch(this._parts.hostname&&(c=!1,n=i.ip4_expression.test(this._parts.hostname),o=i.ip6_expression.test(this._parts.hostname),s=(a=!(t=n||o))&&r&&r.has(this._parts.hostname),u=a&&i.idn_expression.test(this._parts.hostname),l=a&&i.punycode_expression.test(this._parts.hostname)),e.toLowerCase()){case"relative":return c;case"absolute":return!c;case"domain":case"name":return a;case"sld":return s;case"ip":return t;case"ip4":case"ipv4":case"inet4":return n;case"ip6":case"ipv6":case"inet6":return o;case"idn":return u;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return l}return null};var E=s.protocol,_=s.port,I=s.hostname;s.protocol=function(e,t){if(e&&!(e=e.replace(/:(\/\/)?$/,"")).match(i.protocol_expression))throw new TypeError('Protocol "'+e+"\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");return E.call(this,e,t)},s.scheme=s.protocol,s.port=function(e,t){return this._parts.urn?void 0===e?"":this:(void 0!==e&&(0===e&&(e=null),e&&(":"===(e+="").charAt(0)&&(e=e.substring(1)),i.ensureValidPort(e))),_.call(this,e,t))},s.hostname=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0!==e){var r={preventInvalidHostname:this._parts.preventInvalidHostname};if("/"!==i.parseHost(e,r))throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-]');e=r.hostname,this._parts.preventInvalidHostname&&i.ensureValidHostname(e,this._parts.protocol)}return I.call(this,e,t)},s.origin=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e){var r=this.protocol();return this.authority()?(r?r+"://":"")+this.authority():""}var n=i(e);return this.protocol(n.protocol()).authority(n.authority()).build(!t),this},s.host=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e)return this._parts.hostname?i.buildHost(this._parts):"";if("/"!==i.parseHost(e,this._parts))throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-]');return this.build(!t),this},s.authority=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e)return this._parts.hostname?i.buildAuthority(this._parts):"";if("/"!==i.parseAuthority(e,this._parts))throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-]');return this.build(!t),this},s.userinfo=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e){var r=i.buildUserinfo(this._parts);return r?r.substring(0,r.length-1):r}return"@"!==e[e.length-1]&&(e+="@"),i.parseUserinfo(e,this._parts),this.build(!t),this},s.resource=function(e,t){var r;return void 0===e?this.path()+this.search()+this.hash():(r=i.parse(e),this._parts.path=r.path,this._parts.query=r.query,this._parts.fragment=r.fragment,this.build(!t),this)},s.subdomain=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var r=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,r)||""}var n=this._parts.hostname.length-this.domain().length,o=this._parts.hostname.substring(0,n),a=new RegExp("^"+l(o));if(e&&"."!==e.charAt(e.length-1)&&(e+="."),-1!==e.indexOf(":"))throw new TypeError("Domains cannot contain colons");return e&&i.ensureValidHostname(e,this._parts.protocol),this._parts.hostname=this._parts.hostname.replace(a,e),this.build(!t),this},s.domain=function(e,t){if(this._parts.urn)return void 0===e?"":this;if("boolean"==typeof e&&(t=e,e=void 0),void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var r=this._parts.hostname.match(/\./g);if(r&&r.length<2)return this._parts.hostname;var n=this._parts.hostname.length-this.tld(t).length-1;return n=this._parts.hostname.lastIndexOf(".",n-1)+1,this._parts.hostname.substring(n)||""}if(!e)throw new TypeError("cannot set domain empty");if(-1!==e.indexOf(":"))throw new TypeError("Domains cannot contain colons");if(i.ensureValidHostname(e,this._parts.protocol),!this._parts.hostname||this.is("IP"))this._parts.hostname=e;else{var o=new RegExp(l(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(o,e)}return this.build(!t),this},s.tld=function(e,t){if(this._parts.urn)return void 0===e?"":this;if("boolean"==typeof e&&(t=e,e=void 0),void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var n=this._parts.hostname.lastIndexOf("."),o=this._parts.hostname.substring(n+1);return!0!==t&&r&&r.list[o.toLowerCase()]&&r.get(this._parts.hostname)||o}var i;if(!e)throw new TypeError("cannot set TLD empty");if(e.match(/[^a-zA-Z0-9-]/)){if(!r||!r.is(e))throw new TypeError('TLD "'+e+'" contains characters other than [A-Z0-9]');i=new RegExp(l(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(i,e)}else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");i=new RegExp(l(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(i,e)}return this.build(!t),this},s.directory=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e||!0===e){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var r=this._parts.path.length-this.filename().length-1,n=this._parts.path.substring(0,r)||(this._parts.hostname?"/":"");return e?i.decodePath(n):n}var o=this._parts.path.length-this.filename().length,a=this._parts.path.substring(0,o),s=new RegExp("^"+l(a));return this.is("relative")||(e||(e="/"),"/"!==e.charAt(0)&&(e="/"+e)),e&&"/"!==e.charAt(e.length-1)&&(e+="/"),e=i.recodePath(e),this._parts.path=this._parts.path.replace(s,e),this.build(!t),this},s.filename=function(e,t){if(this._parts.urn)return void 0===e?"":this;if("string"!=typeof e){if(!this._parts.path||"/"===this._parts.path)return"";var r=this._parts.path.lastIndexOf("/"),n=this._parts.path.substring(r+1);return e?i.decodePathSegment(n):n}var o=!1;"/"===e.charAt(0)&&(e=e.substring(1)),e.match(/\.?\//)&&(o=!0);var a=new RegExp(l(this.filename())+"$");return e=i.recodePath(e),this._parts.path=this._parts.path.replace(a,e),o?this.normalizePath(t):this.build(!t),this},s.suffix=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e||!0===e){if(!this._parts.path||"/"===this._parts.path)return"";var r,n,o=this.filename(),a=o.lastIndexOf(".");return-1===a?"":(r=o.substring(a+1),n=/^[a-z0-9%]+$/i.test(r)?r:"",e?i.decodePathSegment(n):n)}"."===e.charAt(0)&&(e=e.substring(1));var s,u=this.suffix();if(u)s=e?new RegExp(l(u)+"$"):new RegExp(l("."+u)+"$");else{if(!e)return this;this._parts.path+="."+i.recodePath(e)}return s&&(e=i.recodePath(e),this._parts.path=this._parts.path.replace(s,e)),this.build(!t),this},s.segment=function(e,t,r){var n=this._parts.urn?":":"/",o=this.path(),i="/"===o.substring(0,1),a=o.split(n);if(void 0!==e&&"number"!=typeof e&&(r=t,t=e,e=void 0),void 0!==e&&"number"!=typeof e)throw new Error('Bad segment "'+e+'", must be 0-based integer');if(i&&a.shift(),e<0&&(e=Math.max(a.length+e,0)),void 0===t)return void 0===e?a:a[e];if(null===e||void 0===a[e])if(f(t)){a=[];for(var s=0,u=t.length;s<u;s++)(t[s].length||a.length&&a[a.length-1].length)&&(a.length&&!a[a.length-1].length&&a.pop(),a.push(d(t[s])))}else(t||"string"==typeof t)&&(t=d(t),""===a[a.length-1]?a[a.length-1]=t:a.push(t));else t?a[e]=d(t):a.splice(e,1);return i&&a.unshift(""),this.path(a.join(n),r)},s.segmentCoded=function(e,t,r){var n,o,a;if("number"!=typeof e&&(r=t,t=e,e=void 0),void 0===t){if(f(n=this.segment(e,t,r)))for(o=0,a=n.length;o<a;o++)n[o]=i.decode(n[o]);else n=void 0!==n?i.decode(n):void 0;return n}if(f(t))for(o=0,a=t.length;o<a;o++)t[o]=i.encode(t[o]);else t="string"==typeof t||t instanceof String?i.encode(t):t;return this.segment(e,t,r)};var O=s.query;return s.query=function(e,t){if(!0===e)return i.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("function"==typeof e){var r=i.parseQuery(this._parts.query,this._parts.escapeQuerySpace),n=e.call(this,r);return this._parts.query=i.buildQuery(n||r,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!t),this}return void 0!==e&&"string"!=typeof e?(this._parts.query=i.buildQuery(e,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!t),this):O.call(this,e,t)},s.setQuery=function(e,t,r){var n=i.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("string"==typeof e||e instanceof String)n[e]=void 0!==t?t:null;else{if("object"!==a(e))throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");for(var o in e)u.call(e,o)&&(n[o]=e[o])}return this._parts.query=i.buildQuery(n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof e&&(r=t),this.build(!r),this},s.addQuery=function(e,t,r){var n=i.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return i.addQuery(n,e,void 0===t?null:t),this._parts.query=i.buildQuery(n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof e&&(r=t),this.build(!r),this},s.removeQuery=function(e,t,r){var n=i.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return i.removeQuery(n,e,t),this._parts.query=i.buildQuery(n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof e&&(r=t),this.build(!r),this},s.hasQuery=function(e,t,r){var n=i.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return i.hasQuery(n,e,t,r)},s.setSearch=s.setQuery,s.addSearch=s.addQuery,s.removeSearch=s.removeQuery,s.hasSearch=s.hasQuery,s.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},s.normalizeProtocol=function(e){return"string"==typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!e)),this},s.normalizeHostname=function(r){return this._parts.hostname&&(this.is("IDN")&&e?this._parts.hostname=e.toASCII(this._parts.hostname):this.is("IPv6")&&t&&(this._parts.hostname=t.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!r)),this},s.normalizePort=function(e){return"string"==typeof this._parts.protocol&&this._parts.port===i.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!e)),this},s.normalizePath=function(e){var t,r=this._parts.path;if(!r)return this;if(this._parts.urn)return this._parts.path=i.recodeUrnPath(this._parts.path),this.build(!e),this;if("/"===this._parts.path)return this;var n,o,a="";for("/"!==(r=i.recodePath(r)).charAt(0)&&(t=!0,r="/"+r),"/.."!==r.slice(-3)&&"/."!==r.slice(-2)||(r+="/"),r=r.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),t&&(a=r.substring(1).match(/^(\.\.\/)+/)||"")&&(a=a[0]);-1!==(n=r.search(/\/\.\.(\/|$)/));)0!==n?(-1===(o=r.substring(0,n).lastIndexOf("/"))&&(o=n),r=r.substring(0,o)+r.substring(n+3)):r=r.substring(3);return t&&this.is("relative")&&(r=a+r.substring(1)),this._parts.path=r,this.build(!e),this},s.normalizePathname=s.normalizePath,s.normalizeQuery=function(e){return"string"==typeof this._parts.query&&(this._parts.query.length?this.query(i.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!e)),this},s.normalizeFragment=function(e){return this._parts.fragment||(this._parts.fragment=null,this.build(!e)),this},s.normalizeSearch=s.normalizeQuery,s.normalizeHash=s.normalizeFragment,s.iso8859=function(){var e=i.encode,t=i.decode;i.encode=escape,i.decode=decodeURIComponent;try{this.normalize()}finally{i.encode=e,i.decode=t}return this},s.unicode=function(){var e=i.encode,t=i.decode;i.encode=g,i.decode=unescape;try{this.normalize()}finally{i.encode=e,i.decode=t}return this},s.readable=function(){var t=this.clone();t.username("").password("").normalize();var r="";if(t._parts.protocol&&(r+=t._parts.protocol+"://"),t._parts.hostname&&(t.is("punycode")&&e?(r+=e.toUnicode(t._parts.hostname),t._parts.port&&(r+=":"+t._parts.port)):r+=t.host()),t._parts.hostname&&t._parts.path&&"/"!==t._parts.path.charAt(0)&&(r+="/"),r+=t.path(!0),t._parts.query){for(var n="",o=0,a=t._parts.query.split("&"),s=a.length;o<s;o++){var u=(a[o]||"").split("=");n+="&"+i.decodeQuery(u[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"),void 0!==u[1]&&(n+="="+i.decodeQuery(u[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}r+="?"+n.substring(1)}return r+=i.decodeQuery(t.hash(),!0)},s.absoluteTo=function(e){var t,r,n,o=this.clone(),a=["protocol","username","password","hostname","port"];if(this._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(e instanceof i||(e=new i(e)),o._parts.protocol)return o;if(o._parts.protocol=e._parts.protocol,this._parts.hostname)return o;for(r=0;n=a[r];r++)o._parts[n]=e._parts[n];return o._parts.path?(".."===o._parts.path.substring(-2)&&(o._parts.path+="/"),"/"!==o.path().charAt(0)&&(t=(t=e.directory())||(0===e.path().indexOf("/")?"/":""),o._parts.path=(t?t+"/":"")+o._parts.path,o.normalizePath())):(o._parts.path=e._parts.path,o._parts.query||(o._parts.query=e._parts.query)),o.build(),o},s.relativeTo=function(e){var t,r,n,o,a,s=this.clone().normalize();if(s._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(e=new i(e).normalize(),t=s._parts,r=e._parts,o=s.path(),a=e.path(),"/"!==o.charAt(0))throw new Error("URI is already relative");if("/"!==a.charAt(0))throw new Error("Cannot calculate a URI relative to another relative URI");if(t.protocol===r.protocol&&(t.protocol=null),t.username!==r.username||t.password!==r.password)return s.build();if(null!==t.protocol||null!==t.username||null!==t.password)return s.build();if(t.hostname!==r.hostname||t.port!==r.port)return s.build();if(t.hostname=null,t.port=null,o===a)return t.path="",s.build();if(!(n=i.commonPath(o,a)))return s.build();var u=r.path.substring(n.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return t.path=u+t.path.substring(n.length)||"./",s.build()},s.equals=function(e){var t,r,n,o,a,s=this.clone(),l=new i(e),c={};if(s.normalize(),l.normalize(),s.toString()===l.toString())return!0;if(n=s.query(),o=l.query(),s.query(""),l.query(""),s.toString()!==l.toString())return!1;if(n.length!==o.length)return!1;for(a in t=i.parseQuery(n,this._parts.escapeQuerySpace),r=i.parseQuery(o,this._parts.escapeQuerySpace),t)if(u.call(t,a)){if(f(t[a])){if(!y(t[a],r[a]))return!1}else if(t[a]!==r[a])return!1;c[a]=!0}for(a in r)if(u.call(r,a)&&!c[a])return!1;return!0},s.preventInvalidHostname=function(e){return this._parts.preventInvalidHostname=!!e,this},s.duplicateQueryParameters=function(e){return this._parts.duplicateQueryParameters=!!e,this},s.escapeQuerySpace=function(e){return this._parts.escapeQuerySpace=!!e,this},i})},7443:function(e){"use strict";var t=Math.ceil,r=Math.floor;e.exports=Math.trunc||function(e){var n=+e;return(n>0?r:t)(n)}},7636:function(e,t,r){"use strict";var n=r(7105),o=Math.max,i=Math.min;e.exports=function(e,t){var r=n(e);return r<0?o(r+t,0):i(r,t)}},7644:function(e,t,r){"use strict";var n=r(2631),o=r(4861),i=TypeError;e.exports=function(e){if(n(e))return e;throw new i(o(e)+" is not a function")}},7709:function(e,t,r){"use strict";var n=r(4638),o=r(4499),i=r(2791),a=r(606),s=r(7161),u=r(5970),l=n.Symbol,c=o("wks"),f=u?l.for||l:l&&l.withoutSetter||a;e.exports=function(e){return i(c,e)||(c[e]=s&&i(l,e)?l[e]:f("Symbol."+e)),c[e]}},7773:function(e,t,r){"use strict";var n=r(398),o=r(4877),i=r(2631),a=r(2791),s=r(9234),u=r(2756).CONFIGURABLE,l=r(3128),c=r(7863),f=c.enforce,p=c.get,h=String,y=Object.defineProperty,d=n("".slice),m=n("".replace),g=n([].join),v=s&&!o(function(){return 8!==y(function(){},"length",{value:8}).length}),b=String(String).split("String"),A=e.exports=function(e,t,r){"Symbol("===d(h(t),0,7)&&(t="["+m(h(t),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),r&&r.getter&&(t="get "+t),r&&r.setter&&(t="set "+t),(!a(e,"name")||u&&e.name!==t)&&(s?y(e,"name",{value:t,configurable:!0}):e.name=t),v&&r&&a(r,"arity")&&e.length!==r.arity&&y(e,"length",{value:r.arity});try{r&&a(r,"constructor")&&r.constructor?s&&y(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var n=f(e);return a(n,"source")||(n.source=g(b,"string"==typeof t?t:"")),e};Function.prototype.toString=A(function(){return i(this)&&p(this).source||l(this)},"toString")},7851:function(e,t,r){"use strict";var n=r(3768),o=r(6355);n({target:"Object",stat:!0,arity:2,forced:Object.assign!==o},{assign:o})},7863:function(e,t,r){"use strict";var n,o,i,a=r(5032),s=r(4638),u=r(6220),l=r(5233),c=r(2791),f=r(4243),p=r(109),h=r(8551),y=s.TypeError,d=s.WeakMap;if(a||f.state){var m=f.state||(f.state=new d);m.get=m.get,m.has=m.has,m.set=m.set,n=function(e,t){if(m.has(e))throw new y("Object already initialized");return t.facade=e,m.set(e,t),t},o=function(e){return m.get(e)||{}},i=function(e){return m.has(e)}}else{var g=p("state");h[g]=!0,n=function(e,t){if(c(e,g))throw new y("Object already initialized");return t.facade=e,l(e,g,t),t},o=function(e){return c(e,g)?e[g]:{}},i=function(e){return c(e,g)}}e.exports={set:n,get:o,has:i,enforce:function(e){return i(e)?o(e):n(e,{})},getterFor:function(e){return function(t){var r;if(!u(t)||(r=o(t)).type!==e)throw new y("Incompatible receiver, "+e+" required");return r}}}},7915:function(e,t,r){var n,o,i,a;function s(e){"@babel/helpers - typeof";return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e=r.nmd(e),window,a=function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==s(e)&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=32)}([function(e,t){e.exports={options:{usePureJavaScript:!1}}},function(e,t,r){(function(t){var n=r(0),o=r(35),i=e.exports=n.util=n.util||{};function a(e){if(8!==e&&16!==e&&24!==e&&32!==e)throw new Error("Only 8, 16, 24, or 32 bits supported: "+e)}function u(e){if(this.data="",this.read=0,"string"==typeof e)this.data=e;else if(i.isArrayBuffer(e)||i.isArrayBufferView(e))if("undefined"!=typeof Buffer&&e instanceof Buffer)this.data=e.toString("binary");else{var t=new Uint8Array(e);try{this.data=String.fromCharCode.apply(null,t)}catch(e){for(var r=0;r<t.length;++r)this.putByte(t[r])}}else(e instanceof u||"object"==s(e)&&"string"==typeof e.data&&"number"==typeof e.read)&&(this.data=e.data,this.read=e.read);this._constructedStringLength=0}!function(){if("undefined"!=typeof process&&process.nextTick&&!process.browser)return i.nextTick=process.nextTick,void("function"==typeof setImmediate?i.setImmediate=setImmediate:i.setImmediate=i.nextTick);if("function"==typeof setImmediate)return i.setImmediate=function(){return setImmediate.apply(void 0,arguments)},void(i.nextTick=function(e){return setImmediate(e)});if(i.setImmediate=function(e){setTimeout(e,0)},"undefined"!=typeof window&&"function"==typeof window.postMessage){var e="forge.setImmediate",t=[];i.setImmediate=function(r){t.push(r),1===t.length&&window.postMessage(e,"*")},window.addEventListener("message",function(r){if(r.source===window&&r.data===e){r.stopPropagation();var n=t.slice();t.length=0,n.forEach(function(e){e()})}},!0)}if("undefined"!=typeof MutationObserver){var r=Date.now(),n=!0,o=document.createElement("div");t=[],new MutationObserver(function(){var e=t.slice();t.length=0,e.forEach(function(e){e()})}).observe(o,{attributes:!0});var a=i.setImmediate;i.setImmediate=function(e){Date.now()-r>15?(r=Date.now(),a(e)):(t.push(e),1===t.length&&o.setAttribute("a",n=!n))}}i.nextTick=i.setImmediate}(),i.isNodejs="undefined"!=typeof process&&process.versions&&process.versions.node,i.globalScope=i.isNodejs?t:"undefined"==typeof self?window:self,i.isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},i.isArrayBuffer=function(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer},i.isArrayBufferView=function(e){return e&&i.isArrayBuffer(e.buffer)&&void 0!==e.byteLength},i.ByteBuffer=u,i.ByteStringBuffer=u,i.ByteStringBuffer.prototype._optimizeConstructedString=function(e){this._constructedStringLength+=e,this._constructedStringLength>4096&&(this.data.substr(0,1),this._constructedStringLength=0)},i.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},i.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0},i.ByteStringBuffer.prototype.putByte=function(e){return this.putBytes(String.fromCharCode(e))},i.ByteStringBuffer.prototype.fillWithByte=function(e,t){e=String.fromCharCode(e);for(var r=this.data;t>0;)1&t&&(r+=e),(t>>>=1)>0&&(e+=e);return this.data=r,this._optimizeConstructedString(t),this},i.ByteStringBuffer.prototype.putBytes=function(e){return this.data+=e,this._optimizeConstructedString(e.length),this},i.ByteStringBuffer.prototype.putString=function(e){return this.putBytes(i.encodeUtf8(e))},i.ByteStringBuffer.prototype.putInt16=function(e){return this.putBytes(String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},i.ByteStringBuffer.prototype.putInt24=function(e){return this.putBytes(String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},i.ByteStringBuffer.prototype.putInt32=function(e){return this.putBytes(String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},i.ByteStringBuffer.prototype.putInt16Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255))},i.ByteStringBuffer.prototype.putInt24Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255))},i.ByteStringBuffer.prototype.putInt32Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>24&255))},i.ByteStringBuffer.prototype.putInt=function(e,t){a(t);var r="";do{t-=8,r+=String.fromCharCode(e>>t&255)}while(t>0);return this.putBytes(r)},i.ByteStringBuffer.prototype.putSignedInt=function(e,t){return e<0&&(e+=2<<t-1),this.putInt(e,t)},i.ByteStringBuffer.prototype.putBuffer=function(e){return this.putBytes(e.getBytes())},i.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},i.ByteStringBuffer.prototype.getInt16=function(){var e=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,e},i.ByteStringBuffer.prototype.getInt24=function(){var e=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,e},i.ByteStringBuffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e},i.ByteStringBuffer.prototype.getInt16Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,e},i.ByteStringBuffer.prototype.getInt24Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,e},i.ByteStringBuffer.prototype.getInt32Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,e},i.ByteStringBuffer.prototype.getInt=function(e){a(e);var t=0;do{t=(t<<8)+this.data.charCodeAt(this.read++),e-=8}while(e>0);return t},i.ByteStringBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t},i.ByteStringBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):0===e?t="":(t=0===this.read?this.data:this.data.slice(this.read),this.clear()),t},i.ByteStringBuffer.prototype.bytes=function(e){return void 0===e?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},i.ByteStringBuffer.prototype.at=function(e){return this.data.charCodeAt(this.read+e)},i.ByteStringBuffer.prototype.setAt=function(e,t){return this.data=this.data.substr(0,this.read+e)+String.fromCharCode(t)+this.data.substr(this.read+e+1),this},i.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},i.ByteStringBuffer.prototype.copy=function(){var e=i.createBuffer(this.data);return e.read=this.read,e},i.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this},i.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this},i.ByteStringBuffer.prototype.truncate=function(e){var t=Math.max(0,this.length()-e);return this.data=this.data.substr(this.read,t),this.read=0,this},i.ByteStringBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.length;++t){var r=this.data.charCodeAt(t);r<16&&(e+="0"),e+=r.toString(16)}return e},i.ByteStringBuffer.prototype.toString=function(){return i.decodeUtf8(this.bytes())},i.DataBuffer=function(e,t){t=t||{},this.read=t.readOffset||0,this.growSize=t.growSize||1024;var r=i.isArrayBuffer(e),n=i.isArrayBufferView(e);if(r||n)return this.data=r?new DataView(e):new DataView(e.buffer,e.byteOffset,e.byteLength),void(this.write="writeOffset"in t?t.writeOffset:this.data.byteLength);this.data=new DataView(new ArrayBuffer(0)),this.write=0,null!=e&&this.putBytes(e),"writeOffset"in t&&(this.write=t.writeOffset)},i.DataBuffer.prototype.length=function(){return this.write-this.read},i.DataBuffer.prototype.isEmpty=function(){return this.length()<=0},i.DataBuffer.prototype.accommodate=function(e,t){if(this.length()>=e)return this;t=Math.max(t||this.growSize,e);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+t);return n.set(r),this.data=new DataView(n.buffer),this},i.DataBuffer.prototype.putByte=function(e){return this.accommodate(1),this.data.setUint8(this.write++,e),this},i.DataBuffer.prototype.fillWithByte=function(e,t){this.accommodate(t);for(var r=0;r<t;++r)this.data.setUint8(e);return this},i.DataBuffer.prototype.putBytes=function(e,t){if(i.isArrayBufferView(e)){var r=(n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)).byteLength-n.byteOffset;return this.accommodate(r),new Uint8Array(this.data.buffer,this.write).set(n),this.write+=r,this}if(i.isArrayBuffer(e)){var n=new Uint8Array(e);return this.accommodate(n.byteLength),new Uint8Array(this.data.buffer).set(n,this.write),this.write+=n.byteLength,this}if(e instanceof i.DataBuffer||"object"==s(e)&&"number"==typeof e.read&&"number"==typeof e.write&&i.isArrayBufferView(e.data))return n=new Uint8Array(e.data.byteLength,e.read,e.length()),this.accommodate(n.byteLength),new Uint8Array(e.data.byteLength,this.write).set(n),this.write+=n.byteLength,this;if(e instanceof i.ByteStringBuffer&&(e=e.data,t="binary"),t=t||"binary","string"==typeof e){var o;if("hex"===t)return this.accommodate(Math.ceil(e.length/2)),o=new Uint8Array(this.data.buffer,this.write),this.write+=i.binary.hex.decode(e,o,this.write),this;if("base64"===t)return this.accommodate(3*Math.ceil(e.length/4)),o=new Uint8Array(this.data.buffer,this.write),this.write+=i.binary.base64.decode(e,o,this.write),this;if("utf8"===t&&(e=i.encodeUtf8(e),t="binary"),"binary"===t||"raw"===t)return this.accommodate(e.length),o=new Uint8Array(this.data.buffer,this.write),this.write+=i.binary.raw.decode(o),this;if("utf16"===t)return this.accommodate(2*e.length),o=new Uint16Array(this.data.buffer,this.write),this.write+=i.text.utf16.encode(o),this;throw new Error("Invalid encoding: "+t)}throw Error("Invalid parameter: "+e)},i.DataBuffer.prototype.putBuffer=function(e){return this.putBytes(e),e.clear(),this},i.DataBuffer.prototype.putString=function(e){return this.putBytes(e,"utf16")},i.DataBuffer.prototype.putInt16=function(e){return this.accommodate(2),this.data.setInt16(this.write,e),this.write+=2,this},i.DataBuffer.prototype.putInt24=function(e){return this.accommodate(3),this.data.setInt16(this.write,e>>8&65535),this.data.setInt8(this.write,e>>16&255),this.write+=3,this},i.DataBuffer.prototype.putInt32=function(e){return this.accommodate(4),this.data.setInt32(this.write,e),this.write+=4,this},i.DataBuffer.prototype.putInt16Le=function(e){return this.accommodate(2),this.data.setInt16(this.write,e,!0),this.write+=2,this},i.DataBuffer.prototype.putInt24Le=function(e){return this.accommodate(3),this.data.setInt8(this.write,e>>16&255),this.data.setInt16(this.write,e>>8&65535,!0),this.write+=3,this},i.DataBuffer.prototype.putInt32Le=function(e){return this.accommodate(4),this.data.setInt32(this.write,e,!0),this.write+=4,this},i.DataBuffer.prototype.putInt=function(e,t){a(t),this.accommodate(t/8);do{t-=8,this.data.setInt8(this.write++,e>>t&255)}while(t>0);return this},i.DataBuffer.prototype.putSignedInt=function(e,t){return a(t),this.accommodate(t/8),e<0&&(e+=2<<t-1),this.putInt(e,t)},i.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)},i.DataBuffer.prototype.getInt16=function(){var e=this.data.getInt16(this.read);return this.read+=2,e},i.DataBuffer.prototype.getInt24=function(){var e=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,e},i.DataBuffer.prototype.getInt32=function(){var e=this.data.getInt32(this.read);return this.read+=4,e},i.DataBuffer.prototype.getInt16Le=function(){var e=this.data.getInt16(this.read,!0);return this.read+=2,e},i.DataBuffer.prototype.getInt24Le=function(){var e=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,e},i.DataBuffer.prototype.getInt32Le=function(){var e=this.data.getInt32(this.read,!0);return this.read+=4,e},i.DataBuffer.prototype.getInt=function(e){a(e);var t=0;do{t=(t<<8)+this.data.getInt8(this.read++),e-=8}while(e>0);return t},i.DataBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t},i.DataBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):0===e?t="":(t=0===this.read?this.data:this.data.slice(this.read),this.clear()),t},i.DataBuffer.prototype.bytes=function(e){return void 0===e?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},i.DataBuffer.prototype.at=function(e){return this.data.getUint8(this.read+e)},i.DataBuffer.prototype.setAt=function(e,t){return this.data.setUint8(e,t),this},i.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)},i.DataBuffer.prototype.copy=function(){return new i.DataBuffer(this)},i.DataBuffer.prototype.compact=function(){if(this.read>0){var e=new Uint8Array(this.data.buffer,this.read),t=new Uint8Array(e.byteLength);t.set(e),this.data=new DataView(t),this.write-=this.read,this.read=0}return this},i.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this},i.DataBuffer.prototype.truncate=function(e){return this.write=Math.max(0,this.length()-e),this.read=Math.min(this.read,this.write),this},i.DataBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.byteLength;++t){var r=this.data.getUint8(t);r<16&&(e+="0"),e+=r.toString(16)}return e},i.DataBuffer.prototype.toString=function(e){var t=new Uint8Array(this.data,this.read,this.length());if("binary"===(e=e||"utf8")||"raw"===e)return i.binary.raw.encode(t);if("hex"===e)return i.binary.hex.encode(t);if("base64"===e)return i.binary.base64.encode(t);if("utf8"===e)return i.text.utf8.decode(t);if("utf16"===e)return i.text.utf16.decode(t);throw new Error("Invalid encoding: "+e)},i.createBuffer=function(e,t){return t=t||"raw",void 0!==e&&"utf8"===t&&(e=i.encodeUtf8(e)),new i.ByteBuffer(e)},i.fillString=function(e,t){for(var r="";t>0;)1&t&&(r+=e),(t>>>=1)>0&&(e+=e);return r},i.xorBytes=function(e,t,r){for(var n="",o="",i="",a=0,s=0;r>0;--r,++a)o=e.charCodeAt(a)^t.charCodeAt(a),s>=10&&(n+=i,i="",s=0),i+=String.fromCharCode(o),++s;return n+i},i.hexToBytes=function(e){var t="",r=0;for(!0&e.length&&(r=1,t+=String.fromCharCode(parseInt(e[0],16)));r<e.length;r+=2)t+=String.fromCharCode(parseInt(e.substr(r,2),16));return t},i.bytesToHex=function(e){return i.createBuffer(e).toHex()},i.int32ToBytes=function(e){return String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e)};var l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],f="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";i.encode64=function(e,t){for(var r,n,o,i="",a="",s=0;s<e.length;)r=e.charCodeAt(s++),n=e.charCodeAt(s++),o=e.charCodeAt(s++),i+=l.charAt(r>>2),i+=l.charAt((3&r)<<4|n>>4),isNaN(n)?i+="==":(i+=l.charAt((15&n)<<2|o>>6),i+=isNaN(o)?"=":l.charAt(63&o)),t&&i.length>t&&(a+=i.substr(0,t)+"\r\n",i=i.substr(t));return a+i},i.decode64=function(e){e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var t,r,n,o,i="",a=0;a<e.length;)t=c[e.charCodeAt(a++)-43],r=c[e.charCodeAt(a++)-43],n=c[e.charCodeAt(a++)-43],o=c[e.charCodeAt(a++)-43],i+=String.fromCharCode(t<<2|r>>4),64!==n&&(i+=String.fromCharCode((15&r)<<4|n>>2),64!==o&&(i+=String.fromCharCode((3&n)<<6|o)));return i},i.encodeUtf8=function(e){return unescape(encodeURIComponent(e))},i.decodeUtf8=function(e){return decodeURIComponent(escape(e))},i.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:o.encode,decode:o.decode}},i.binary.raw.encode=function(e){return String.fromCharCode.apply(null,e)},i.binary.raw.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(e.length));for(var o=r=r||0,i=0;i<e.length;++i)n[o++]=e.charCodeAt(i);return t?o-r:n},i.binary.hex.encode=i.bytesToHex,i.binary.hex.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(Math.ceil(e.length/2)));var o=0,i=r=r||0;for(1&e.length&&(o=1,n[i++]=parseInt(e[0],16));o<e.length;o+=2)n[i++]=parseInt(e.substr(o,2),16);return t?i-r:n},i.binary.base64.encode=function(e,t){for(var r,n,o,i="",a="",s=0;s<e.byteLength;)r=e[s++],n=e[s++],o=e[s++],i+=l.charAt(r>>2),i+=l.charAt((3&r)<<4|n>>4),isNaN(n)?i+="==":(i+=l.charAt((15&n)<<2|o>>6),i+=isNaN(o)?"=":l.charAt(63&o)),t&&i.length>t&&(a+=i.substr(0,t)+"\r\n",i=i.substr(t));return a+i},i.binary.base64.decode=function(e,t,r){var n,o,i,a,s=t;s||(s=new Uint8Array(3*Math.ceil(e.length/4))),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var u=0,l=r=r||0;u<e.length;)n=c[e.charCodeAt(u++)-43],o=c[e.charCodeAt(u++)-43],i=c[e.charCodeAt(u++)-43],a=c[e.charCodeAt(u++)-43],s[l++]=n<<2|o>>4,64!==i&&(s[l++]=(15&o)<<4|i>>2,64!==a&&(s[l++]=(3&i)<<6|a));return t?l-r:s.subarray(0,l)},i.binary.base58.encode=function(e,t){return i.binary.baseN.encode(e,f,t)},i.binary.base58.decode=function(e,t){return i.binary.baseN.decode(e,f,t)},i.text={utf8:{},utf16:{}},i.text.utf8.encode=function(e,t,r){e=i.encodeUtf8(e);var n=t;n||(n=new Uint8Array(e.length));for(var o=r=r||0,a=0;a<e.length;++a)n[o++]=e.charCodeAt(a);return t?o-r:n},i.text.utf8.decode=function(e){return i.decodeUtf8(String.fromCharCode.apply(null,e))},i.text.utf16.encode=function(e,t,r){var n=t;n||(n=new Uint8Array(2*e.length));for(var o=new Uint16Array(n.buffer),i=r=r||0,a=r,s=0;s<e.length;++s)o[a++]=e.charCodeAt(s),i+=2;return t?i-r:n},i.text.utf16.decode=function(e){return String.fromCharCode.apply(null,new Uint16Array(e.buffer))},i.deflate=function(e,t,r){if(t=i.decode64(e.deflate(i.encode64(t)).rval),r){var n=2;32&t.charCodeAt(1)&&(n=6),t=t.substring(n,t.length-4)}return t},i.inflate=function(e,t,r){var n=e.inflate(i.encode64(t)).rval;return null===n?null:i.decode64(n)};var p=function(e,t,r){if(!e)throw new Error("WebStorage not available.");var n;if(null===r?n=e.removeItem(t):(r=i.encode64(JSON.stringify(r)),n=e.setItem(t,r)),void 0!==n&&!0!==n.rval){var o=new Error(n.error.message);throw o.id=n.error.id,o.name=n.error.name,o}},h=function(e,t){if(!e)throw new Error("WebStorage not available.");var r=e.getItem(t);if(e.init)if(null===r.rval){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return null!==r&&(r=JSON.parse(i.decode64(r))),r},y=function(e,t,r,n){var o=h(e,t);null===o&&(o={}),o[r]=n,p(e,t,o)},d=function(e,t,r){var n=h(e,t);return null!==n&&(n=r in n?n[r]:null),n},m=function(e,t,r){var n=h(e,t);if(null!==n&&r in n){delete n[r];var o=!0;for(var i in n){o=!1;break}o&&(n=null),p(e,t,n)}},g=function(e,t){p(e,t,null)},v=function(e,t,r){var n,o=null;void 0===r&&(r=["web","flash"]);var i=!1,a=null;for(var s in r){n=r[s];try{if("flash"===n||"both"===n){if(null===t[0])throw new Error("Flash local storage not available.");o=e.apply(this,t),i="flash"===n}"web"!==n&&"both"!==n||(t[0]=localStorage,o=e.apply(this,t),i=!0)}catch(e){a=e}if(i)break}if(!i)throw a;return o};i.setItem=function(e,t,r,n,o){v(y,arguments,o)},i.getItem=function(e,t,r,n){return v(d,arguments,n)},i.removeItem=function(e,t,r,n){v(m,arguments,n)},i.clearItems=function(e,t,r){v(g,arguments,r)},i.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},i.format=function(e){for(var t,r,n=/%./g,o=0,i=[],a=0;t=n.exec(e);){(r=e.substring(a,n.lastIndex-2)).length>0&&i.push(r),a=n.lastIndex;var s=t[0][1];switch(s){case"s":case"o":o<arguments.length?i.push(arguments[1+o++]):i.push("<?>");break;case"%":i.push("%");break;default:i.push("<%"+s+"?>")}}return i.push(e.substring(a)),i.join("")},i.formatNumber=function(e,t,r,n){var o=e,i=isNaN(t=Math.abs(t))?2:t,a=void 0===r?",":r,s=void 0===n?".":n,u=o<0?"-":"",l=parseInt(o=Math.abs(+o||0).toFixed(i),10)+"",c=l.length>3?l.length%3:0;return u+(c?l.substr(0,c)+s:"")+l.substr(c).replace(/(\d{3})(?=\d)/g,"$1"+s)+(i?a+Math.abs(o-l).toFixed(i).slice(2):"")},i.formatSize=function(e){return e>=1073741824?i.formatNumber(e/1073741824,2,".","")+" GiB":e>=1048576?i.formatNumber(e/1048576,2,".","")+" MiB":e>=1024?i.formatNumber(e/1024,0)+" KiB":i.formatNumber(e,0)+" bytes"},i.bytesFromIP=function(e){return-1!==e.indexOf(".")?i.bytesFromIPv4(e):-1!==e.indexOf(":")?i.bytesFromIPv6(e):null},i.bytesFromIPv4=function(e){if(4!==(e=e.split(".")).length)return null;for(var t=i.createBuffer(),r=0;r<e.length;++r){var n=parseInt(e[r],10);if(isNaN(n))return null;t.putByte(n)}return t.getBytes()},i.bytesFromIPv6=function(e){for(var t=0,r=2*(8-(e=e.split(":").filter(function(e){return 0===e.length&&++t,!0})).length+t),n=i.createBuffer(),o=0;o<8;++o)if(e[o]&&0!==e[o].length){var a=i.hexToBytes(e[o]);a.length<2&&n.putByte(0),n.putBytes(a)}else n.fillWithByte(0,r),r=0;return n.getBytes()},i.bytesToIP=function(e){return 4===e.length?i.bytesToIPv4(e):16===e.length?i.bytesToIPv6(e):null},i.bytesToIPv4=function(e){if(4!==e.length)return null;for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t.join(".")},i.bytesToIPv6=function(e){if(16!==e.length)return null;for(var t=[],r=[],n=0,o=0;o<e.length;o+=2){for(var a=i.bytesToHex(e[o]+e[o+1]);"0"===a[0]&&"0"!==a;)a=a.substr(1);if("0"===a){var s=r[r.length-1],u=t.length;s&&u===s.end+1?(s.end=u,s.end-s.start>r[n].end-r[n].start&&(n=r.length-1)):r.push({start:u,end:u})}t.push(a)}if(r.length>0){var l=r[n];l.end-l.start>0&&(t.splice(l.start,l.end-l.start+1,""),0===l.start&&t.unshift(""),7===l.end&&t.push(""))}return t.join(":")},i.estimateCores=function(e,t){if("function"==typeof e&&(t=e,e={}),e=e||{},"cores"in i&&!e.update)return t(null,i.cores);if("undefined"!=typeof navigator&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return i.cores=navigator.hardwareConcurrency,t(null,i.cores);if("undefined"==typeof Worker)return i.cores=1,t(null,i.cores);if("undefined"==typeof Blob)return i.cores=2,t(null,i.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(e){for(var t=Date.now(),r=t+4;Date.now()<r;);self.postMessage({st:t,et:r})})}.toString(),")()"],{type:"application/javascript"}));!function e(n,o,a){if(0===o){var s=Math.floor(n.reduce(function(e,t){return e+t},0)/n.length);return i.cores=Math.max(1,s),URL.revokeObjectURL(r),t(null,i.cores)}!function(e,t){for(var n=[],o=[],i=0;i<e;++i){var a=new Worker(r);a.addEventListener("message",function(r){if(o.push(r.data),o.length===e){for(var i=0;i<e;++i)n[i].terminate();t(null,o)}}),n.push(a)}for(i=0;i<e;++i)n[i].postMessage(i)}(a,function(t,r){n.push(function(e,t){for(var r=[],n=0;n<e;++n)for(var o=t[n],i=r[n]=[],a=0;a<e;++a)if(n!==a){var s=t[a];(o.st>s.st&&o.st<s.et||s.st>o.st&&s.st<o.et)&&i.push(a)}return r.reduce(function(e,t){return Math.max(e,t.length)},0)}(a,r)),e(n,o-1,a)})}([],5,16)}}).call(this,r(34))},function(e,t,r){var n=r(0);r(5),r(23),r(24),r(1),n.random&&n.random.getBytes?e.exports=n.random:function(t){var r={},o=new Array(4),i=n.util.createBuffer();function a(){var e=n.prng.create(r);return e.getBytes=function(t,r){return e.generate(t,r)},e.getBytesSync=function(t){return e.generate(t)},e}r.formatKey=function(e){var t=n.util.createBuffer(e);return(e=new Array(4))[0]=t.getInt32(),e[1]=t.getInt32(),e[2]=t.getInt32(),e[3]=t.getInt32(),n.aes._expandKey(e,!1)},r.formatSeed=function(e){var t=n.util.createBuffer(e);return(e=new Array(4))[0]=t.getInt32(),e[1]=t.getInt32(),e[2]=t.getInt32(),e[3]=t.getInt32(),e},r.cipher=function(e,t){return n.aes._updateBlock(e,t,o,!1),i.putInt32(o[0]),i.putInt32(o[1]),i.putInt32(o[2]),i.putInt32(o[3]),i.getBytes()},r.increment=function(e){return++e[3],e},r.md=n.md.sha256;var s=a(),u=null,l=n.util.globalScope,c=l.crypto||l.msCrypto;if(c&&c.getRandomValues&&(u=function(e){return c.getRandomValues(e)}),n.options.usePureJavaScript||!n.util.isNodejs&&!u){if("undefined"==typeof window||window.document,s.collectInt(+new Date,32),"undefined"!=typeof navigator){var f="";for(var p in navigator)try{"string"==typeof navigator[p]&&(f+=navigator[p])}catch(e){}s.collect(f),f=null}t&&(t().mousemove(function(e){s.collectInt(e.clientX,16),s.collectInt(e.clientY,16)}),t().keypress(function(e){s.collectInt(e.charCode,8)}))}if(n.random)for(var p in s)n.random[p]=s[p];else n.random=s;n.random.createInstance=a,e.exports=n.random}("undefined"!=typeof jQuery?jQuery:null)},function(e,t,r){var n=r(0);r(1),r(6);var o=e.exports=n.asn1=n.asn1||{};function i(e,t,r){if(r>t){var n=new Error("Too few bytes to parse DER.");throw n.available=e.length(),n.remaining=t,n.requested=r,n}}o.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192},o.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30},o.create=function(e,t,r,i,a){if(n.util.isArray(i)){for(var s=[],u=0;u<i.length;++u)void 0!==i[u]&&s.push(i[u]);i=s}var l={tagClass:e,type:t,constructed:r,composed:r||n.util.isArray(i),value:i};return a&&"bitStringContents"in a&&(l.bitStringContents=a.bitStringContents,l.original=o.copy(l)),l},o.copy=function(e,t){var r;if(n.util.isArray(e)){r=[];for(var i=0;i<e.length;++i)r.push(o.copy(e[i],t));return r}return"string"==typeof e?e:(r={tagClass:e.tagClass,type:e.type,constructed:e.constructed,composed:e.composed,value:o.copy(e.value,t)},t&&!t.excludeBitStringContents&&(r.bitStringContents=e.bitStringContents),r)},o.equals=function(e,t,r){if(n.util.isArray(e)){if(!n.util.isArray(t))return!1;if(e.length!==t.length)return!1;for(var i=0;i<e.length;++i)if(!o.equals(e[i],t[i]))return!1;return!0}if(s(e)!=s(t))return!1;if("string"==typeof e)return e===t;var a=e.tagClass===t.tagClass&&e.type===t.type&&e.constructed===t.constructed&&e.composed===t.composed&&o.equals(e.value,t.value);return r&&r.includeBitStringContents&&(a=a&&e.bitStringContents===t.bitStringContents),a},o.getBerValueLength=function(e){var t=e.getByte();if(128!==t)return 128&t?e.getInt((127&t)<<3):t},o.fromDer=function(e,t){void 0===t&&(t={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),"boolean"==typeof t&&(t={strict:t,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in t||(t.strict=!0),"parseAllBytes"in t||(t.parseAllBytes=!0),"decodeBitStrings"in t||(t.decodeBitStrings=!0),"string"==typeof e&&(e=n.util.createBuffer(e));var r=e.length(),a=function e(t,r,n,a){var s;i(t,r,2);var u=t.getByte();r--;var l=192&u,c=31&u;s=t.length();var f,p,h=function(e,t){var r=e.getByte();if(t--,128!==r){var n;if(128&r){var o=127&r;i(e,t,o),n=e.getInt(o<<3)}else n=r;if(n<0)throw new Error("Negative length: "+n);return n}}(t,r);if(r-=s-t.length(),void 0!==h&&h>r){if(a.strict){var y=new Error("Too few bytes to read ASN.1 value.");throw y.available=t.length(),y.remaining=r,y.requested=h,y}h=r}var d=32==(32&u);if(d)if(f=[],void 0===h)for(;;){if(i(t,r,2),t.bytes(2)===String.fromCharCode(0,0)){t.getBytes(2),r-=2;break}s=t.length(),f.push(e(t,r,n+1,a)),r-=s-t.length()}else for(;h>0;)s=t.length(),f.push(e(t,h,n+1,a)),r-=s-t.length(),h-=s-t.length();if(void 0===f&&l===o.Class.UNIVERSAL&&c===o.Type.BITSTRING&&(p=t.bytes(h)),void 0===f&&a.decodeBitStrings&&l===o.Class.UNIVERSAL&&c===o.Type.BITSTRING&&h>1){var m=t.read,g=r,v=0;if(c===o.Type.BITSTRING&&(i(t,r,1),v=t.getByte(),r--),0===v)try{s=t.length();var b=e(t,r,n+1,{strict:!0,decodeBitStrings:!0}),A=s-t.length();r-=A,c==o.Type.BITSTRING&&A++;var w=b.tagClass;A!==h||w!==o.Class.UNIVERSAL&&w!==o.Class.CONTEXT_SPECIFIC||(f=[b])}catch(e){}void 0===f&&(t.read=m,r=g)}if(void 0===f){if(void 0===h){if(a.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");h=r}if(c===o.Type.BMPSTRING)for(f="";h>0;h-=2)i(t,r,2),f+=String.fromCharCode(t.getInt16()),r-=2;else f=t.getBytes(h),r-=h}var S=void 0===p?null:{bitStringContents:p};return o.create(l,c,d,f,S)}(e,e.length(),0,t);if(t.parseAllBytes&&0!==e.length()){var s=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw s.byteCount=r,s.remaining=e.length(),s}return a},o.toDer=function(e){var t=n.util.createBuffer(),r=e.tagClass|e.type,i=n.util.createBuffer(),a=!1;if("bitStringContents"in e&&(a=!0,e.original&&(a=o.equals(e,e.original))),a)i.putBytes(e.bitStringContents);else if(e.composed){e.constructed?r|=32:i.putByte(0);for(var s=0;s<e.value.length;++s)void 0!==e.value[s]&&i.putBuffer(o.toDer(e.value[s]))}else if(e.type===o.Type.BMPSTRING)for(s=0;s<e.value.length;++s)i.putInt16(e.value.charCodeAt(s));else e.type===o.Type.INTEGER&&e.value.length>1&&(0===e.value.charCodeAt(0)&&0==(128&e.value.charCodeAt(1))||255===e.value.charCodeAt(0)&&128==(128&e.value.charCodeAt(1)))?i.putBytes(e.value.substr(1)):i.putBytes(e.value);if(t.putByte(r),i.length()<=127)t.putByte(127&i.length());else{var u=i.length(),l="";do{l+=String.fromCharCode(255&u),u>>>=8}while(u>0);for(t.putByte(128|l.length),s=l.length-1;s>=0;--s)t.putByte(l.charCodeAt(s))}return t.putBuffer(i),t},o.oidToDer=function(e){var t,r,o,i,a=e.split("."),s=n.util.createBuffer();s.putByte(40*parseInt(a[0],10)+parseInt(a[1],10));for(var u=2;u<a.length;++u){t=!0,r=[],o=parseInt(a[u],10);do{i=127&o,o>>>=7,t||(i|=128),r.push(i),t=!1}while(o>0);for(var l=r.length-1;l>=0;--l)s.putByte(r[l])}return s},o.derToOid=function(e){var t;"string"==typeof e&&(e=n.util.createBuffer(e));var r=e.getByte();t=Math.floor(r/40)+"."+r%40;for(var o=0;e.length()>0;)o<<=7,128&(r=e.getByte())?o+=127&r:(t+="."+(o+r),o=0);return t},o.utcTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(e.substr(2,2),10)-1,o=parseInt(e.substr(4,2),10),i=parseInt(e.substr(6,2),10),a=parseInt(e.substr(8,2),10),s=0;if(e.length>11){var u=e.charAt(10),l=10;"+"!==u&&"-"!==u&&(s=parseInt(e.substr(10,2),10),l+=2)}if(t.setUTCFullYear(r,n,o),t.setUTCHours(i,a,s,0),l&&("+"===(u=e.charAt(l))||"-"===u)){var c=60*parseInt(e.substr(l+1,2),10)+parseInt(e.substr(l+4,2),10);c*=6e4,"+"===u?t.setTime(+t-c):t.setTime(+t+c)}return t},o.generalizedTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,4),10),n=parseInt(e.substr(4,2),10)-1,o=parseInt(e.substr(6,2),10),i=parseInt(e.substr(8,2),10),a=parseInt(e.substr(10,2),10),s=parseInt(e.substr(12,2),10),u=0,l=0,c=!1;"Z"===e.charAt(e.length-1)&&(c=!0);var f=e.length-5,p=e.charAt(f);return"+"!==p&&"-"!==p||(l=60*parseInt(e.substr(f+1,2),10)+parseInt(e.substr(f+4,2),10),l*=6e4,"+"===p&&(l*=-1),c=!0),"."===e.charAt(14)&&(u=1e3*parseFloat(e.substr(14),10)),c?(t.setUTCFullYear(r,n,o),t.setUTCHours(i,a,s,u),t.setTime(+t+l)):(t.setFullYear(r,n,o),t.setHours(i,a,s,u)),t},o.dateToUtcTime=function(e){if("string"==typeof e)return e;var t="",r=[];r.push((""+e.getUTCFullYear()).substr(2)),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+"Z"},o.dateToGeneralizedTime=function(e){if("string"==typeof e)return e;var t="",r=[];r.push(""+e.getUTCFullYear()),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+"Z"},o.integerToDer=function(e){var t=n.util.createBuffer();if(e>=-128&&e<128)return t.putSignedInt(e,8);if(e>=-32768&&e<32768)return t.putSignedInt(e,16);if(e>=-8388608&&e<8388608)return t.putSignedInt(e,24);if(e>=-2147483648&&e<2147483648)return t.putSignedInt(e,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=e,r},o.derToInteger=function(e){"string"==typeof e&&(e=n.util.createBuffer(e));var t=8*e.length();if(t>32)throw new Error("Integer too large; max is 32-bits.");return e.getSignedInt(t)},o.validate=function(e,t,r,i){var a=!1;if(e.tagClass!==t.tagClass&&void 0!==t.tagClass||e.type!==t.type&&void 0!==t.type)i&&(e.tagClass!==t.tagClass&&i.push("["+t.name+'] Expected tag class "'+t.tagClass+'", got "'+e.tagClass+'"'),e.type!==t.type&&i.push("["+t.name+'] Expected type "'+t.type+'", got "'+e.type+'"'));else if(e.constructed===t.constructed||void 0===t.constructed){if(a=!0,t.value&&n.util.isArray(t.value))for(var s=0,u=0;a&&u<t.value.length;++u)a=t.value[u].optional||!1,e.value[s]&&((a=o.validate(e.value[s],t.value[u],r,i))?++s:t.value[u].optional&&(a=!0)),!a&&i&&i.push("["+t.name+'] Tag class "'+t.tagClass+'", type "'+t.type+'" expected value length "'+t.value.length+'", got "'+e.value.length+'"');if(a&&r&&(t.capture&&(r[t.capture]=e.value),t.captureAsn1&&(r[t.captureAsn1]=e),t.captureBitStringContents&&"bitStringContents"in e&&(r[t.captureBitStringContents]=e.bitStringContents),t.captureBitStringValue&&"bitStringContents"in e))if(e.bitStringContents.length<2)r[t.captureBitStringValue]="";else{if(0!==e.bitStringContents.charCodeAt(0))throw new Error("captureBitStringValue only supported for zero unused bits");r[t.captureBitStringValue]=e.bitStringContents.slice(1)}}else i&&i.push("["+t.name+'] Expected constructed "'+t.constructed+'", got "'+e.constructed+'"');return a};var a=/[^\\u0000-\\u00ff]/;o.prettyPrint=function(e,t,r){var i="";r=r||2,(t=t||0)>0&&(i+="\n");for(var s="",u=0;u<t*r;++u)s+=" ";switch(i+=s+"Tag: ",e.tagClass){case o.Class.UNIVERSAL:i+="Universal:";break;case o.Class.APPLICATION:i+="Application:";break;case o.Class.CONTEXT_SPECIFIC:i+="Context-Specific:";break;case o.Class.PRIVATE:i+="Private:"}if(e.tagClass===o.Class.UNIVERSAL)switch(i+=e.type,e.type){case o.Type.NONE:i+=" (None)";break;case o.Type.BOOLEAN:i+=" (Boolean)";break;case o.Type.INTEGER:i+=" (Integer)";break;case o.Type.BITSTRING:i+=" (Bit string)";break;case o.Type.OCTETSTRING:i+=" (Octet string)";break;case o.Type.NULL:i+=" (Null)";break;case o.Type.OID:i+=" (Object Identifier)";break;case o.Type.ODESC:i+=" (Object Descriptor)";break;case o.Type.EXTERNAL:i+=" (External or Instance of)";break;case o.Type.REAL:i+=" (Real)";break;case o.Type.ENUMERATED:i+=" (Enumerated)";break;case o.Type.EMBEDDED:i+=" (Embedded PDV)";break;case o.Type.UTF8:i+=" (UTF8)";break;case o.Type.ROID:i+=" (Relative Object Identifier)";break;case o.Type.SEQUENCE:i+=" (Sequence)";break;case o.Type.SET:i+=" (Set)";break;case o.Type.PRINTABLESTRING:i+=" (Printable String)";break;case o.Type.IA5String:i+=" (IA5String (ASCII))";break;case o.Type.UTCTIME:i+=" (UTC time)";break;case o.Type.GENERALIZEDTIME:i+=" (Generalized time)";break;case o.Type.BMPSTRING:i+=" (BMP String)"}else i+=e.type;if(i+="\n",i+=s+"Constructed: "+e.constructed+"\n",e.composed){var l=0,c="";for(u=0;u<e.value.length;++u)void 0!==e.value[u]&&(l+=1,c+=o.prettyPrint(e.value[u],t+1,r),u+1<e.value.length&&(c+=","));i+=s+"Sub values: "+l+c}else{if(i+=s+"Value: ",e.type===o.Type.OID){var f=o.derToOid(e.value);i+=f,n.pki&&n.pki.oids&&f in n.pki.oids&&(i+=" ("+n.pki.oids[f]+") ")}if(e.type===o.Type.INTEGER)try{i+=o.derToInteger(e.value)}catch(t){i+="0x"+n.util.bytesToHex(e.value)}else if(e.type===o.Type.BITSTRING){if(e.value.length>1?i+="0x"+n.util.bytesToHex(e.value.slice(1)):i+="(none)",e.value.length>0){var p=e.value.charCodeAt(0);1==p?i+=" (1 unused bit shown)":p>1&&(i+=" ("+p+" unused bits shown)")}}else if(e.type===o.Type.OCTETSTRING)a.test(e.value)||(i+="("+e.value+") "),i+="0x"+n.util.bytesToHex(e.value);else if(e.type===o.Type.UTF8)try{i+=n.util.decodeUtf8(e.value)}catch(t){if("URI malformed"!==t.message)throw t;i+="0x"+n.util.bytesToHex(e.value)+" (malformed UTF8)"}else e.type===o.Type.PRINTABLESTRING||e.type===o.Type.IA5String?i+=e.value:a.test(e.value)?i+="0x"+n.util.bytesToHex(e.value):0===e.value.length?i+="[null]":i+=e.value}return i}},function(e,t,r){var n=r(0);e.exports=n.md=n.md||{},n.md.algorithms=n.md.algorithms||{}},function(e,t,r){var n=r(0);function o(e,t){n.cipher.registerAlgorithm(e,function(){return new n.aes.Algorithm(e,t)})}r(13),r(19),r(1),e.exports=n.aes=n.aes||{},n.aes.startEncrypting=function(e,t,r,n){var o=y({key:e,output:r,decrypt:!1,mode:n});return o.start(t),o},n.aes.createEncryptionCipher=function(e,t){return y({key:e,output:null,decrypt:!1,mode:t})},n.aes.startDecrypting=function(e,t,r,n){var o=y({key:e,output:r,decrypt:!0,mode:n});return o.start(t),o},n.aes.createDecryptionCipher=function(e,t){return y({key:e,output:null,decrypt:!0,mode:t})},n.aes.Algorithm=function(e,t){c||f();var r=this;r.name=e,r.mode=new t({blockSize:16,cipher:{encrypt:function(e,t){return h(r._w,e,t,!1)},decrypt:function(e,t){return h(r._w,e,t,!0)}}}),r._init=!1},n.aes.Algorithm.prototype.initialize=function(e){if(!this._init){var t,r=e.key;if("string"!=typeof r||16!==r.length&&24!==r.length&&32!==r.length){if(n.util.isArray(r)&&(16===r.length||24===r.length||32===r.length)){t=r,r=n.util.createBuffer();for(var o=0;o<t.length;++o)r.putByte(t[o])}}else r=n.util.createBuffer(r);if(!n.util.isArray(r)){t=r,r=[];var i=t.length();if(16===i||24===i||32===i)for(i>>>=2,o=0;o<i;++o)r.push(t.getInt32())}if(!n.util.isArray(r)||4!==r.length&&6!==r.length&&8!==r.length)throw new Error("Invalid key parameter.");var a=this.mode.name,s=-1!==["CFB","OFB","CTR","GCM"].indexOf(a);this._w=p(r,e.decrypt&&!s),this._init=!0}},n.aes._expandKey=function(e,t){return c||f(),p(e,t)},n.aes._updateBlock=h,o("AES-ECB",n.cipher.modes.ecb),o("AES-CBC",n.cipher.modes.cbc),o("AES-CFB",n.cipher.modes.cfb),o("AES-OFB",n.cipher.modes.ofb),o("AES-CTR",n.cipher.modes.ctr),o("AES-GCM",n.cipher.modes.gcm);var i,a,s,u,l,c=!1;function f(){c=!0,s=[0,1,2,4,8,16,32,64,128,27,54];for(var e=new Array(256),t=0;t<128;++t)e[t]=t<<1,e[t+128]=t+128<<1^283;for(i=new Array(256),a=new Array(256),u=new Array(4),l=new Array(4),t=0;t<4;++t)u[t]=new Array(256),l[t]=new Array(256);var r,n,o,f,p,h,y,d=0,m=0;for(t=0;t<256;++t){f=(f=m^m<<1^m<<2^m<<3^m<<4)>>8^255&f^99,i[d]=f,a[f]=d,h=(p=e[f])<<24^f<<16^f<<8^f^p,y=((r=e[d])^(n=e[r])^(o=e[n]))<<24^(d^o)<<16^(d^n^o)<<8^d^r^o;for(var g=0;g<4;++g)u[g][d]=h,l[g][f]=y,h=h<<24|h>>>8,y=y<<24|y>>>8;0===d?d=m=1:(d=r^e[e[e[r^o]]],m^=e[e[m]])}}function p(e,t){for(var r,n=e.slice(0),o=1,a=n.length,u=4*(a+6+1),c=a;c<u;++c)r=n[c-1],c%a==0?(r=i[r>>>16&255]<<24^i[r>>>8&255]<<16^i[255&r]<<8^i[r>>>24]^s[o]<<24,o++):a>6&&c%a==4&&(r=i[r>>>24]<<24^i[r>>>16&255]<<16^i[r>>>8&255]<<8^i[255&r]),n[c]=n[c-a]^r;if(t){for(var f,p=l[0],h=l[1],y=l[2],d=l[3],m=n.slice(0),g=(c=0,(u=n.length)-4);c<u;c+=4,g-=4)if(0===c||c===u-4)m[c]=n[g],m[c+1]=n[g+3],m[c+2]=n[g+2],m[c+3]=n[g+1];else for(var v=0;v<4;++v)f=n[g+v],m[c+(3&-v)]=p[i[f>>>24]]^h[i[f>>>16&255]]^y[i[f>>>8&255]]^d[i[255&f]];n=m}return n}function h(e,t,r,n){var o,s,c,f,p,h,y,d,m,g,v,b,A=e.length/4-1;n?(o=l[0],s=l[1],c=l[2],f=l[3],p=a):(o=u[0],s=u[1],c=u[2],f=u[3],p=i),h=t[0]^e[0],y=t[n?3:1]^e[1],d=t[2]^e[2],m=t[n?1:3]^e[3];for(var w=3,S=1;S<A;++S)g=o[h>>>24]^s[y>>>16&255]^c[d>>>8&255]^f[255&m]^e[++w],v=o[y>>>24]^s[d>>>16&255]^c[m>>>8&255]^f[255&h]^e[++w],b=o[d>>>24]^s[m>>>16&255]^c[h>>>8&255]^f[255&y]^e[++w],m=o[m>>>24]^s[h>>>16&255]^c[y>>>8&255]^f[255&d]^e[++w],h=g,y=v,d=b;r[0]=p[h>>>24]<<24^p[y>>>16&255]<<16^p[d>>>8&255]<<8^p[255&m]^e[++w],r[n?3:1]=p[y>>>24]<<24^p[d>>>16&255]<<16^p[m>>>8&255]<<8^p[255&h]^e[++w],r[2]=p[d>>>24]<<24^p[m>>>16&255]<<16^p[h>>>8&255]<<8^p[255&y]^e[++w],r[n?1:3]=p[m>>>24]<<24^p[h>>>16&255]<<16^p[y>>>8&255]<<8^p[255&d]^e[++w]}function y(e){var t,r="AES-"+((e=e||{}).mode||"CBC").toUpperCase(),o=(t=e.decrypt?n.cipher.createDecipher(r,e.key):n.cipher.createCipher(r,e.key)).start;return t.start=function(e,r){var i=null;r instanceof n.util.ByteBuffer&&(i=r,r={}),(r=r||{}).output=i,r.iv=e,o.call(t,r)},t}},function(e,t,r){var n=r(0);n.pki=n.pki||{};var o=e.exports=n.pki.oids=n.oids=n.oids||{};function i(e,t){o[e]=t,o[t]=e}function a(e,t){o[e]=t}i("1.2.840.113549.1.1.1","rsaEncryption"),i("1.2.840.113549.1.1.4","md5WithRSAEncryption"),i("1.2.840.113549.1.1.5","sha1WithRSAEncryption"),i("1.2.840.113549.1.1.7","RSAES-OAEP"),i("1.2.840.113549.1.1.8","mgf1"),i("1.2.840.113549.1.1.9","pSpecified"),i("1.2.840.113549.1.1.10","RSASSA-PSS"),i("1.2.840.113549.1.1.11","sha256WithRSAEncryption"),i("1.2.840.113549.1.1.12","sha384WithRSAEncryption"),i("1.2.840.113549.1.1.13","sha512WithRSAEncryption"),i("1.3.101.112","EdDSA25519"),i("1.2.840.10040.4.3","dsa-with-sha1"),i("1.3.14.3.2.7","desCBC"),i("1.3.14.3.2.26","sha1"),i("1.3.14.3.2.29","sha1WithRSASignature"),i("2.16.840.1.101.3.4.2.1","sha256"),i("2.16.840.1.101.3.4.2.2","sha384"),i("2.16.840.1.101.3.4.2.3","sha512"),i("2.16.840.1.101.3.4.2.4","sha224"),i("2.16.840.1.101.3.4.2.5","sha512-224"),i("2.16.840.1.101.3.4.2.6","sha512-256"),i("1.2.840.113549.2.2","md2"),i("1.2.840.113549.2.5","md5"),i("1.2.840.113549.1.7.1","data"),i("1.2.840.113549.1.7.2","signedData"),i("1.2.840.113549.1.7.3","envelopedData"),i("1.2.840.113549.1.7.4","signedAndEnvelopedData"),i("1.2.840.113549.1.7.5","digestedData"),i("1.2.840.113549.1.7.6","encryptedData"),i("1.2.840.113549.1.9.1","emailAddress"),i("1.2.840.113549.1.9.2","unstructuredName"),i("1.2.840.113549.1.9.3","contentType"),i("1.2.840.113549.1.9.4","messageDigest"),i("1.2.840.113549.1.9.5","signingTime"),i("1.2.840.113549.1.9.6","counterSignature"),i("1.2.840.113549.1.9.7","challengePassword"),i("1.2.840.113549.1.9.8","unstructuredAddress"),i("1.2.840.113549.1.9.14","extensionRequest"),i("1.2.840.113549.1.9.20","friendlyName"),i("1.2.840.113549.1.9.21","localKeyId"),i("1.2.840.113549.1.9.22.1","x509Certificate"),i("1.2.840.113549.1.12.10.1.1","keyBag"),i("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag"),i("1.2.840.113549.1.12.10.1.3","certBag"),i("1.2.840.113549.1.12.10.1.4","crlBag"),i("1.2.840.113549.1.12.10.1.5","secretBag"),i("1.2.840.113549.1.12.10.1.6","safeContentsBag"),i("1.2.840.113549.1.5.13","pkcs5PBES2"),i("1.2.840.113549.1.5.12","pkcs5PBKDF2"),i("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4"),i("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4"),i("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC"),i("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC"),i("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC"),i("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC"),i("1.2.840.113549.2.7","hmacWithSHA1"),i("1.2.840.113549.2.8","hmacWithSHA224"),i("1.2.840.113549.2.9","hmacWithSHA256"),i("1.2.840.113549.2.10","hmacWithSHA384"),i("1.2.840.113549.2.11","hmacWithSHA512"),i("1.2.840.113549.3.7","des-EDE3-CBC"),i("2.16.840.1.101.3.4.1.2","aes128-CBC"),i("2.16.840.1.101.3.4.1.22","aes192-CBC"),i("2.16.840.1.101.3.4.1.42","aes256-CBC"),i("2.5.4.3","commonName"),i("2.5.4.4","surname"),i("2.5.4.5","serialNumber"),i("2.5.4.6","countryName"),i("2.5.4.7","localityName"),i("2.5.4.8","stateOrProvinceName"),i("2.5.4.9","streetAddress"),i("2.5.4.10","organizationName"),i("2.5.4.11","organizationalUnitName"),i("2.5.4.12","title"),i("2.5.4.13","description"),i("2.5.4.15","businessCategory"),i("2.5.4.17","postalCode"),i("2.5.4.42","givenName"),i("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName"),i("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName"),i("2.16.840.1.113730.1.1","nsCertType"),i("2.16.840.1.113730.1.13","nsComment"),a("2.5.29.1","authorityKeyIdentifier"),a("2.5.29.2","keyAttributes"),a("2.5.29.3","certificatePolicies"),a("2.5.29.4","keyUsageRestriction"),a("2.5.29.5","policyMapping"),a("2.5.29.6","subtreesConstraint"),a("2.5.29.7","subjectAltName"),a("2.5.29.8","issuerAltName"),a("2.5.29.9","subjectDirectoryAttributes"),a("2.5.29.10","basicConstraints"),a("2.5.29.11","nameConstraints"),a("2.5.29.12","policyConstraints"),a("2.5.29.13","basicConstraints"),i("2.5.29.14","subjectKeyIdentifier"),i("2.5.29.15","keyUsage"),a("2.5.29.16","privateKeyUsagePeriod"),i("2.5.29.17","subjectAltName"),i("2.5.29.18","issuerAltName"),i("2.5.29.19","basicConstraints"),a("2.5.29.20","cRLNumber"),a("2.5.29.21","cRLReason"),a("2.5.29.22","expirationDate"),a("2.5.29.23","instructionCode"),a("2.5.29.24","invalidityDate"),a("2.5.29.25","cRLDistributionPoints"),a("2.5.29.26","issuingDistributionPoint"),a("2.5.29.27","deltaCRLIndicator"),a("2.5.29.28","issuingDistributionPoint"),a("2.5.29.29","certificateIssuer"),a("2.5.29.30","nameConstraints"),i("2.5.29.31","cRLDistributionPoints"),i("2.5.29.32","certificatePolicies"),a("2.5.29.33","policyMappings"),a("2.5.29.34","policyConstraints"),i("2.5.29.35","authorityKeyIdentifier"),a("2.5.29.36","policyConstraints"),i("2.5.29.37","extKeyUsage"),a("2.5.29.46","freshestCRL"),a("2.5.29.54","inhibitAnyPolicy"),i("1.3.6.1.4.1.11129.2.4.2","timestampList"),i("1.3.6.1.5.5.7.1.1","authorityInfoAccess"),i("1.3.6.1.5.5.7.3.1","serverAuth"),i("1.3.6.1.5.5.7.3.2","clientAuth"),i("1.3.6.1.5.5.7.3.3","codeSigning"),i("1.3.6.1.5.5.7.3.4","emailProtection"),i("1.3.6.1.5.5.7.3.8","timeStamping")},function(e,t,r){var n=r(0);r(1);var o=e.exports=n.pem=n.pem||{};function i(e){for(var t=e.name+": ",r=[],n=function(e,t){return" "+t},o=0;o<e.values.length;++o)r.push(e.values[o].replace(/^(\S+\r\n)/,n));t+=r.join(",")+"\r\n";var i=0,a=-1;for(o=0;o<t.length;++o,++i)if(i>65&&-1!==a){var s=t[a];","===s?(++a,t=t.substr(0,a)+"\r\n "+t.substr(a)):t=t.substr(0,a)+"\r\n"+s+t.substr(a+1),i=o-a-1,a=-1,++o}else" "!==t[o]&&"\t"!==t[o]&&","!==t[o]||(a=o);return t}function a(e){return e.replace(/^\s+/,"")}o.encode=function(e,t){t=t||{};var r,o="-----BEGIN "+e.type+"-----\r\n";if(e.procType&&(o+=i(r={name:"Proc-Type",values:[String(e.procType.version),e.procType.type]})),e.contentDomain&&(o+=i(r={name:"Content-Domain",values:[e.contentDomain]})),e.dekInfo&&(r={name:"DEK-Info",values:[e.dekInfo.algorithm]},e.dekInfo.parameters&&r.values.push(e.dekInfo.parameters),o+=i(r)),e.headers)for(var a=0;a<e.headers.length;++a)o+=i(e.headers[a]);return e.procType&&(o+="\r\n"),(o+=n.util.encode64(e.body,t.maxline||64)+"\r\n")+"-----END "+e.type+"-----\r\n"},o.decode=function(e){for(var t,r=[],o=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,i=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,s=/\r?\n/;t=o.exec(e);){var u=t[1];"NEW CERTIFICATE REQUEST"===u&&(u="CERTIFICATE REQUEST");var l={type:u,procType:null,contentDomain:null,dekInfo:null,headers:[],body:n.util.decode64(t[3])};if(r.push(l),t[2]){for(var c=t[2].split(s),f=0;t&&f<c.length;){for(var p=c[f].replace(/\s+$/,""),h=f+1;h<c.length;++h){var y=c[h];if(!/\s/.test(y[0]))break;p+=y,f=h}if(t=p.match(i)){for(var d={name:t[1],values:[]},m=t[2].split(","),g=0;g<m.length;++g)d.values.push(a(m[g]));if(l.procType)if(l.contentDomain||"Content-Domain"!==d.name)if(l.dekInfo||"DEK-Info"!==d.name)l.headers.push(d);else{if(0===d.values.length)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');l.dekInfo={algorithm:m[0],parameters:m[1]||null}}else l.contentDomain=m[0]||"";else{if("Proc-Type"!==d.name)throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(2!==d.values.length)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');l.procType={version:m[0],type:m[1]}}}++f}if("ENCRYPTED"===l.procType&&!l.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(0===r.length)throw new Error("Invalid PEM formatted message.");return r}},function(e,t,r){var n=r(0);r(4),r(1),(e.exports=n.hmac=n.hmac||{}).create=function(){var e=null,t=null,r=null,o=null,i={start:function(i,a){if(null!==i)if("string"==typeof i){if(!((i=i.toLowerCase())in n.md.algorithms))throw new Error('Unknown hash algorithm "'+i+'"');t=n.md.algorithms[i].create()}else t=i;if(null===a)a=e;else{if("string"==typeof a)a=n.util.createBuffer(a);else if(n.util.isArray(a)){var s=a;a=n.util.createBuffer();for(var u=0;u<s.length;++u)a.putByte(s[u])}var l=a.length();for(l>t.blockLength&&(t.start(),t.update(a.bytes()),a=t.digest()),r=n.util.createBuffer(),o=n.util.createBuffer(),l=a.length(),u=0;u<l;++u)s=a.at(u),r.putByte(54^s),o.putByte(92^s);if(l<t.blockLength)for(s=t.blockLength-l,u=0;u<s;++u)r.putByte(54),o.putByte(92);e=a,r=r.bytes(),o=o.bytes()}t.start(),t.update(r)},update:function(e){t.update(e)},getMac:function(){var e=t.digest().bytes();return t.start(),t.update(o),t.update(e),t.digest()}};return i.digest=i.getMac,i}},function(e,t,r){var n=r(0);r(4),r(1);var o=e.exports=n.sha1=n.sha1||{};n.md.sha1=n.md.algorithms.sha1=o,o.create=function(){a||(i=String.fromCharCode(128),i+=n.util.fillString(String.fromCharCode(0),64),a=!0);var e=null,t=n.util.createBuffer(),r=new Array(80),o={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){o.messageLength=0,o.fullMessageLength=o.messageLength64=[];for(var r=o.messageLengthSize/4,i=0;i<r;++i)o.fullMessageLength.push(0);return t=n.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},o}};return o.start(),o.update=function(i,a){"utf8"===a&&(i=n.util.encodeUtf8(i));var u=i.length;o.messageLength+=u,u=[u/4294967296>>>0,u>>>0];for(var l=o.fullMessageLength.length-1;l>=0;--l)o.fullMessageLength[l]+=u[1],u[1]=u[0]+(o.fullMessageLength[l]/4294967296>>>0),o.fullMessageLength[l]=o.fullMessageLength[l]>>>0,u[0]=u[1]/4294967296>>>0;return t.putBytes(i),s(e,r,t),(t.read>2048||0===t.length())&&t.compact(),o},o.digest=function(){var a=n.util.createBuffer();a.putBytes(t.bytes());var u,l=o.fullMessageLength[o.fullMessageLength.length-1]+o.messageLengthSize&o.blockLength-1;a.putBytes(i.substr(0,o.blockLength-l));for(var c=8*o.fullMessageLength[0],f=0;f<o.fullMessageLength.length-1;++f)c+=(u=8*o.fullMessageLength[f+1])/4294967296>>>0,a.putInt32(c>>>0),c=u>>>0;a.putInt32(c);var p={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4};s(p,r,a);var h=n.util.createBuffer();return h.putInt32(p.h0),h.putInt32(p.h1),h.putInt32(p.h2),h.putInt32(p.h3),h.putInt32(p.h4),h},o};var i=null,a=!1;function s(e,t,r){for(var n,o,i,a,s,u,l,c=r.length();c>=64;){for(o=e.h0,i=e.h1,a=e.h2,s=e.h3,u=e.h4,l=0;l<16;++l)n=r.getInt32(),t[l]=n,n=(o<<5|o>>>27)+(s^i&(a^s))+u+1518500249+n,u=s,s=a,a=(i<<30|i>>>2)>>>0,i=o,o=n;for(;l<20;++l)n=(n=t[l-3]^t[l-8]^t[l-14]^t[l-16])<<1|n>>>31,t[l]=n,n=(o<<5|o>>>27)+(s^i&(a^s))+u+1518500249+n,u=s,s=a,a=(i<<30|i>>>2)>>>0,i=o,o=n;for(;l<32;++l)n=(n=t[l-3]^t[l-8]^t[l-14]^t[l-16])<<1|n>>>31,t[l]=n,n=(o<<5|o>>>27)+(i^a^s)+u+1859775393+n,u=s,s=a,a=(i<<30|i>>>2)>>>0,i=o,o=n;for(;l<40;++l)n=(n=t[l-6]^t[l-16]^t[l-28]^t[l-32])<<2|n>>>30,t[l]=n,n=(o<<5|o>>>27)+(i^a^s)+u+1859775393+n,u=s,s=a,a=(i<<30|i>>>2)>>>0,i=o,o=n;for(;l<60;++l)n=(n=t[l-6]^t[l-16]^t[l-28]^t[l-32])<<2|n>>>30,t[l]=n,n=(o<<5|o>>>27)+(i&a|s&(i^a))+u+2400959708+n,u=s,s=a,a=(i<<30|i>>>2)>>>0,i=o,o=n;for(;l<80;++l)n=(n=t[l-6]^t[l-16]^t[l-28]^t[l-32])<<2|n>>>30,t[l]=n,n=(o<<5|o>>>27)+(i^a^s)+u+3395469782+n,u=s,s=a,a=(i<<30|i>>>2)>>>0,i=o,o=n;e.h0=e.h0+o|0,e.h1=e.h1+i|0,e.h2=e.h2+a|0,e.h3=e.h3+s|0,e.h4=e.h4+u|0,c-=64}}},function(e,t,r){var n=r(0);function o(e,t){n.cipher.registerAlgorithm(e,function(){return new n.des.Algorithm(e,t)})}r(13),r(19),r(1),e.exports=n.des=n.des||{},n.des.startEncrypting=function(e,t,r,n){var o=y({key:e,output:r,decrypt:!1,mode:n||(null===t?"ECB":"CBC")});return o.start(t),o},n.des.createEncryptionCipher=function(e,t){return y({key:e,output:null,decrypt:!1,mode:t})},n.des.startDecrypting=function(e,t,r,n){var o=y({key:e,output:r,decrypt:!0,mode:n||(null===t?"ECB":"CBC")});return o.start(t),o},n.des.createDecryptionCipher=function(e,t){return y({key:e,output:null,decrypt:!0,mode:t})},n.des.Algorithm=function(e,t){var r=this;r.name=e,r.mode=new t({blockSize:8,cipher:{encrypt:function(e,t){return h(r._keys,e,t,!1)},decrypt:function(e,t){return h(r._keys,e,t,!0)}}}),r._init=!1},n.des.Algorithm.prototype.initialize=function(e){if(!this._init){var t=n.util.createBuffer(e.key);if(0===this.name.indexOf("3DES")&&24!==t.length())throw new Error("Invalid Triple-DES key size: "+8*t.length());this._keys=function(e){for(var t,r=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],n=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],o=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],a=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],s=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],u=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],l=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],c=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],f=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],p=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],h=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],y=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],d=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],m=e.length()>8?3:1,g=[],v=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],b=0,A=0;A<m;A++){var w=e.getInt32(),S=e.getInt32();w^=(t=252645135&(w>>>4^S))<<4,w^=t=65535&((S^=t)>>>-16^w),w^=(t=858993459&(w>>>2^(S^=t<<-16)))<<2,w^=t=65535&((S^=t)>>>-16^w),w^=(t=1431655765&(w>>>1^(S^=t<<-16)))<<1,w^=t=16711935&((S^=t)>>>8^w),t=(w^=(t=1431655765&(w>>>1^(S^=t<<8)))<<1)<<8|(S^=t)>>>20&240,w=S<<24|S<<8&16711680|S>>>8&65280|S>>>24&240,S=t;for(var C=0;C<v.length;++C){v[C]?(w=w<<2|w>>>26,S=S<<2|S>>>26):(w=w<<1|w>>>27,S=S<<1|S>>>27);var E=r[(w&=-15)>>>28]|n[w>>>24&15]|o[w>>>20&15]|i[w>>>16&15]|a[w>>>12&15]|s[w>>>8&15]|u[w>>>4&15],_=l[(S&=-15)>>>28]|c[S>>>24&15]|f[S>>>20&15]|p[S>>>16&15]|h[S>>>12&15]|y[S>>>8&15]|d[S>>>4&15];t=65535&(_>>>16^E),g[b++]=E^t,g[b++]=_^t<<16}}return g}(t),this._init=!0}},o("DES-ECB",n.cipher.modes.ecb),o("DES-CBC",n.cipher.modes.cbc),o("DES-CFB",n.cipher.modes.cfb),o("DES-OFB",n.cipher.modes.ofb),o("DES-CTR",n.cipher.modes.ctr),o("3DES-ECB",n.cipher.modes.ecb),o("3DES-CBC",n.cipher.modes.cbc),o("3DES-CFB",n.cipher.modes.cfb),o("3DES-OFB",n.cipher.modes.ofb),o("3DES-CTR",n.cipher.modes.ctr);var i=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],a=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],s=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],u=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],l=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],c=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],f=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],p=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function h(e,t,r,n){var o,h,y=32===e.length?3:9;o=3===y?n?[30,-2,-2]:[0,32,2]:n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var d=t[0],m=t[1];d^=(h=252645135&(d>>>4^m))<<4,d^=(h=65535&(d>>>16^(m^=h)))<<16,d^=h=858993459&((m^=h)>>>2^d),d^=h=16711935&((m^=h<<2)>>>8^d),d=(d^=(h=1431655765&(d>>>1^(m^=h<<8)))<<1)<<1|d>>>31,m=(m^=h)<<1|m>>>31;for(var g=0;g<y;g+=3){for(var v=o[g+1],b=o[g+2],A=o[g];A!=v;A+=b){var w=m^e[A],S=(m>>>4|m<<28)^e[A+1];h=d,d=m,m=h^(a[w>>>24&63]|u[w>>>16&63]|c[w>>>8&63]|p[63&w]|i[S>>>24&63]|s[S>>>16&63]|l[S>>>8&63]|f[63&S])}h=d,d=m,m=h}m=m>>>1|m<<31,m^=h=1431655765&((d=d>>>1|d<<31)>>>1^m),m^=(h=16711935&(m>>>8^(d^=h<<1)))<<8,m^=(h=858993459&(m>>>2^(d^=h)))<<2,m^=h=65535&((d^=h)>>>16^m),m^=h=252645135&((d^=h<<16)>>>4^m),d^=h<<4,r[0]=d,r[1]=m}function y(e){var t,r="DES-"+((e=e||{}).mode||"CBC").toUpperCase(),o=(t=e.decrypt?n.cipher.createDecipher(r,e.key):n.cipher.createCipher(r,e.key)).start;return t.start=function(e,r){var i=null;r instanceof n.util.ByteBuffer&&(i=r,r={}),(r=r||{}).output=i,r.iv=e,o.call(t,r)},t}},function(e,t,r){var n=r(0);if(r(3),r(12),r(6),r(26),r(27),r(2),r(1),void 0===o)var o=n.jsbn.BigInteger;var i=n.util.isNodejs?r(16):null,a=n.asn1,u=n.util;n.pki=n.pki||{},e.exports=n.pki.rsa=n.rsa=n.rsa||{};var l=n.pki,c=[6,4,2,4,2,4,6,2],f={name:"PrivateKeyInfo",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:a.Class.UNIVERSAL,type:a.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},p={name:"RSAPrivateKey",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},h={name:"RSAPublicKey",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},y=n.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:a.Class.UNIVERSAL,type:a.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},d={name:"DigestInfo",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:a.Class.UNIVERSAL,type:a.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:a.Class.UNIVERSAL,type:a.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},m=function(e){var t;if(!(e.algorithm in l.oids)){var r=new Error("Unknown message digest algorithm.");throw r.algorithm=e.algorithm,r}t=l.oids[e.algorithm];var n=a.oidToDer(t).getBytes(),o=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[]),i=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[]);i.value.push(a.create(a.Class.UNIVERSAL,a.Type.OID,!1,n)),i.value.push(a.create(a.Class.UNIVERSAL,a.Type.NULL,!1,""));var s=a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,e.digest().getBytes());return o.value.push(i),o.value.push(s),a.toDer(o).getBytes()},g=function(e,t,r){if(r)return e.modPow(t.e,t.n);if(!t.p||!t.q)return e.modPow(t.d,t.n);var i;t.dP||(t.dP=t.d.mod(t.p.subtract(o.ONE))),t.dQ||(t.dQ=t.d.mod(t.q.subtract(o.ONE))),t.qInv||(t.qInv=t.q.modInverse(t.p));do{i=new o(n.util.bytesToHex(n.random.getBytes(t.n.bitLength()/8)),16)}while(i.compareTo(t.n)>=0||!i.gcd(t.n).equals(o.ONE));for(var a=(e=e.multiply(i.modPow(t.e,t.n)).mod(t.n)).mod(t.p).modPow(t.dP,t.p),s=e.mod(t.q).modPow(t.dQ,t.q);a.compareTo(s)<0;)a=a.add(t.p);var u=a.subtract(s).multiply(t.qInv).mod(t.p).multiply(t.q).add(s);return u.multiply(i.modInverse(t.n)).mod(t.n)};function v(e,t,r){var o=n.util.createBuffer(),i=Math.ceil(t.n.bitLength()/8);if(e.length>i-11){var a=new Error("Message is too long for PKCS#1 v1.5 padding.");throw a.length=e.length,a.max=i-11,a}o.putByte(0),o.putByte(r);var s,u=i-3-e.length;if(0===r||1===r){s=0===r?0:255;for(var l=0;l<u;++l)o.putByte(s)}else for(;u>0;){var c=0,f=n.random.getBytes(u);for(l=0;l<u;++l)0===(s=f.charCodeAt(l))?++c:o.putByte(s);u=c}return o.putByte(0),o.putBytes(e),o}function b(e,t,r,o){var i=Math.ceil(t.n.bitLength()/8),a=n.util.createBuffer(e),s=a.getByte(),u=a.getByte();if(0!==s||r&&0!==u&&1!==u||!r&&2!=u||r&&0===u&&void 0===o)throw new Error("Encryption block is invalid.");var l=0;if(0===u){l=i-3-o;for(var c=0;c<l;++c)if(0!==a.getByte())throw new Error("Encryption block is invalid.")}else if(1===u)for(l=0;a.length()>1;){if(255!==a.getByte()){--a.read;break}++l}else if(2===u)for(l=0;a.length()>1;){if(0===a.getByte()){--a.read;break}++l}if(0!==a.getByte()||l!==i-3-a.length())throw new Error("Encryption block is invalid.");return a.getBytes()}function A(e,t,r){"function"==typeof t&&(r=t,t={});var i={algorithm:{name:(t=t||{}).algorithm||"PRIMEINC",options:{workers:t.workers||2,workLoad:t.workLoad||100,workerScript:t.workerScript}}};function a(){s(e.pBits,function(t,n){return t?r(t):(e.p=n,null!==e.q?u(t,e.q):void s(e.qBits,u))})}function s(e,t){n.prime.generateProbablePrime(e,i,t)}function u(t,n){if(t)return r(t);if(e.q=n,e.p.compareTo(e.q)<0){var i=e.p;e.p=e.q,e.q=i}if(0!==e.p.subtract(o.ONE).gcd(e.e).compareTo(o.ONE))return e.p=null,void a();if(0!==e.q.subtract(o.ONE).gcd(e.e).compareTo(o.ONE))return e.q=null,void s(e.qBits,u);if(e.p1=e.p.subtract(o.ONE),e.q1=e.q.subtract(o.ONE),e.phi=e.p1.multiply(e.q1),0!==e.phi.gcd(e.e).compareTo(o.ONE))return e.p=e.q=null,void a();if(e.n=e.p.multiply(e.q),e.n.bitLength()!==e.bits)return e.q=null,void s(e.qBits,u);var c=e.e.modInverse(e.phi);e.keys={privateKey:l.rsa.setPrivateKey(e.n,e.e,c,e.p,e.q,c.mod(e.p1),c.mod(e.q1),e.q.modInverse(e.p)),publicKey:l.rsa.setPublicKey(e.n,e.e)},r(null,e.keys)}"prng"in t&&(i.prng=t.prng),a()}function w(e){var t=e.toString(16);t[0]>="8"&&(t="00"+t);var r=n.util.hexToBytes(t);return r.length>1&&(0===r.charCodeAt(0)&&0==(128&r.charCodeAt(1))||255===r.charCodeAt(0)&&128==(128&r.charCodeAt(1)))?r.substr(1):r}function S(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}function C(e){return n.util.isNodejs&&"function"==typeof i[e]}function E(e){return void 0!==u.globalScope&&"object"==s(u.globalScope.crypto)&&"object"==s(u.globalScope.crypto.subtle)&&"function"==typeof u.globalScope.crypto.subtle[e]}function _(e){return void 0!==u.globalScope&&"object"==s(u.globalScope.msCrypto)&&"object"==s(u.globalScope.msCrypto.subtle)&&"function"==typeof u.globalScope.msCrypto.subtle[e]}function I(e){for(var t=n.util.hexToBytes(e.toString(16)),r=new Uint8Array(t.length),o=0;o<t.length;++o)r[o]=t.charCodeAt(o);return r}l.rsa.encrypt=function(e,t,r){var i,a=r,s=Math.ceil(t.n.bitLength()/8);!1!==r&&!0!==r?(a=2===r,i=v(e,t,r)):(i=n.util.createBuffer()).putBytes(e);for(var u=new o(i.toHex(),16),l=g(u,t,a).toString(16),c=n.util.createBuffer(),f=s-Math.ceil(l.length/2);f>0;)c.putByte(0),--f;return c.putBytes(n.util.hexToBytes(l)),c.getBytes()},l.rsa.decrypt=function(e,t,r,i){var a=Math.ceil(t.n.bitLength()/8);if(e.length!==a){var s=new Error("Encrypted message length is invalid.");throw s.length=e.length,s.expected=a,s}var u=new o(n.util.createBuffer(e).toHex(),16);if(u.compareTo(t.n)>=0)throw new Error("Encrypted message is invalid.");for(var l=g(u,t,r).toString(16),c=n.util.createBuffer(),f=a-Math.ceil(l.length/2);f>0;)c.putByte(0),--f;return c.putBytes(n.util.hexToBytes(l)),!1!==i?b(c.getBytes(),t,r):c.getBytes()},l.rsa.createKeyPairGenerationState=function(e,t,r){"string"==typeof e&&(e=parseInt(e,10)),e=e||2048;var i,a=(r=r||{}).prng||n.random,s={nextBytes:function(e){for(var t=a.getBytesSync(e.length),r=0;r<e.length;++r)e[r]=t.charCodeAt(r)}},u=r.algorithm||"PRIMEINC";if("PRIMEINC"!==u)throw new Error("Invalid key generation algorithm: "+u);return(i={algorithm:u,state:0,bits:e,rng:s,eInt:t||65537,e:new o(null),p:null,q:null,qBits:e>>1,pBits:e-(e>>1),pqState:0,num:null,keys:null}).e.fromInt(i.eInt),i},l.rsa.stepKeyPairGenerationState=function(e,t){"algorithm"in e||(e.algorithm="PRIMEINC");var r=new o(null);r.fromInt(30);for(var n,i=0,a=function(e,t){return e|t},s=+new Date,u=0;null===e.keys&&(t<=0||u<t);){if(0===e.state){var f=null===e.p?e.pBits:e.qBits,p=f-1;0===e.pqState?(e.num=new o(f,e.rng),e.num.testBit(p)||e.num.bitwiseTo(o.ONE.shiftLeft(p),a,e.num),e.num.dAddOffset(31-e.num.mod(r).byteValue(),0),i=0,++e.pqState):1===e.pqState?e.num.bitLength()>f?e.pqState=0:e.num.isProbablePrime(S(e.num.bitLength()))?++e.pqState:e.num.dAddOffset(c[i++%8],0):2===e.pqState?e.pqState=0===e.num.subtract(o.ONE).gcd(e.e).compareTo(o.ONE)?3:0:3===e.pqState&&(e.pqState=0,null===e.p?e.p=e.num:e.q=e.num,null!==e.p&&null!==e.q&&++e.state,e.num=null)}else if(1===e.state)e.p.compareTo(e.q)<0&&(e.num=e.p,e.p=e.q,e.q=e.num),++e.state;else if(2===e.state)e.p1=e.p.subtract(o.ONE),e.q1=e.q.subtract(o.ONE),e.phi=e.p1.multiply(e.q1),++e.state;else if(3===e.state)0===e.phi.gcd(e.e).compareTo(o.ONE)?++e.state:(e.p=null,e.q=null,e.state=0);else if(4===e.state)e.n=e.p.multiply(e.q),e.n.bitLength()===e.bits?++e.state:(e.q=null,e.state=0);else if(5===e.state){var h=e.e.modInverse(e.phi);e.keys={privateKey:l.rsa.setPrivateKey(e.n,e.e,h,e.p,e.q,h.mod(e.p1),h.mod(e.q1),e.q.modInverse(e.p)),publicKey:l.rsa.setPublicKey(e.n,e.e)}}u+=(n=+new Date)-s,s=n}return null!==e.keys},l.rsa.generateKeyPair=function(e,t,r,o){if(1===arguments.length?"object"==s(e)?(r=e,e=void 0):"function"==typeof e&&(o=e,e=void 0):2===arguments.length?"number"==typeof e?"function"==typeof t?(o=t,t=void 0):"number"!=typeof t&&(r=t,t=void 0):(r=e,o=t,e=void 0,t=void 0):3===arguments.length&&("number"==typeof t?"function"==typeof r&&(o=r,r=void 0):(o=r,r=t,t=void 0)),r=r||{},void 0===e&&(e=r.bits||2048),void 0===t&&(t=r.e||65537),!n.options.usePureJavaScript&&!r.prng&&e>=256&&e<=16384&&(65537===t||3===t))if(o){if(C("generateKeyPair"))return i.generateKeyPair("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(e,t,r){if(e)return o(e);o(null,{privateKey:l.privateKeyFromPem(r),publicKey:l.publicKeyFromPem(t)})});if(E("generateKey")&&E("exportKey"))return u.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:I(t),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(e){return u.globalScope.crypto.subtle.exportKey("pkcs8",e.privateKey)}).then(void 0,function(e){o(e)}).then(function(e){if(e){var t=l.privateKeyFromAsn1(a.fromDer(n.util.createBuffer(e)));o(null,{privateKey:t,publicKey:l.setRsaPublicKey(t.n,t.e)})}});if(_("generateKey")&&_("exportKey")){var c=u.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:I(t),hash:{name:"SHA-256"}},!0,["sign","verify"]);return c.oncomplete=function(e){var t=e.target.result,r=u.globalScope.msCrypto.subtle.exportKey("pkcs8",t.privateKey);r.oncomplete=function(e){var t=e.target.result,r=l.privateKeyFromAsn1(a.fromDer(n.util.createBuffer(t)));o(null,{privateKey:r,publicKey:l.setRsaPublicKey(r.n,r.e)})},r.onerror=function(e){o(e)}},void(c.onerror=function(e){o(e)})}}else if(C("generateKeyPairSync")){var f=i.generateKeyPairSync("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:l.privateKeyFromPem(f.privateKey),publicKey:l.publicKeyFromPem(f.publicKey)}}var p=l.rsa.createKeyPairGenerationState(e,t,r);if(!o)return l.rsa.stepKeyPairGenerationState(p,0),p.keys;A(p,r,o)},l.setRsaPublicKey=l.rsa.setPublicKey=function(e,t){var r={n:e,e:t,encrypt:function(e,t,o){if("string"==typeof t?t=t.toUpperCase():void 0===t&&(t="RSAES-PKCS1-V1_5"),"RSAES-PKCS1-V1_5"===t)t={encode:function(e,t,r){return v(e,t,2).getBytes()}};else if("RSA-OAEP"===t||"RSAES-OAEP"===t)t={encode:function(e,t){return n.pkcs1.encode_rsa_oaep(t,e,o)}};else if(-1!==["RAW","NONE","NULL",null].indexOf(t))t={encode:function(e){return e}};else if("string"==typeof t)throw new Error('Unsupported encryption scheme: "'+t+'".');var i=t.encode(e,r,!0);return l.rsa.encrypt(i,r,!0)},verify:function(e,t,o,i){"string"==typeof o?o=o.toUpperCase():void 0===o&&(o="RSASSA-PKCS1-V1_5"),void 0===i&&(i={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in i||(i._parseAllDigestBytes=!0),"RSASSA-PKCS1-V1_5"===o?o={verify:function(e,t){t=b(t,r,!0);var o=a.fromDer(t,{parseAllBytes:i._parseAllDigestBytes}),s={},u=[];if(!a.validate(o,d,s,u))throw(l=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.")).errors=u,l;var l,c=a.derToOid(s.algorithmIdentifier);if(c!==n.oids.md2&&c!==n.oids.md5&&c!==n.oids.sha1&&c!==n.oids.sha224&&c!==n.oids.sha256&&c!==n.oids.sha384&&c!==n.oids.sha512&&c!==n.oids["sha512-224"]&&c!==n.oids["sha512-256"])throw(l=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.")).oid=c,l;if(!(c!==n.oids.md2&&c!==n.oids.md5||"parameters"in s))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return e===s.digest}}:"NONE"!==o&&"NULL"!==o&&null!==o||(o={verify:function(e,t){return e===b(t,r,!0)}});var s=l.rsa.decrypt(t,r,!0,!1);return o.verify(e,s,r.n.bitLength())}};return r},l.setRsaPrivateKey=l.rsa.setPrivateKey=function(e,t,r,o,i,a,s,u){var c={n:e,e:t,d:r,p:o,q:i,dP:a,dQ:s,qInv:u,decrypt:function(e,t,r){"string"==typeof t?t=t.toUpperCase():void 0===t&&(t="RSAES-PKCS1-V1_5");var o=l.rsa.decrypt(e,c,!1,!1);if("RSAES-PKCS1-V1_5"===t)t={decode:b};else if("RSA-OAEP"===t||"RSAES-OAEP"===t)t={decode:function(e,t){return n.pkcs1.decode_rsa_oaep(t,e,r)}};else{if(-1===["RAW","NONE","NULL",null].indexOf(t))throw new Error('Unsupported encryption scheme: "'+t+'".');t={decode:function(e){return e}}}return t.decode(o,c,!1)},sign:function(e,t){var r=!1;"string"==typeof t&&(t=t.toUpperCase()),void 0===t||"RSASSA-PKCS1-V1_5"===t?(t={encode:m},r=1):"NONE"!==t&&"NULL"!==t&&null!==t||(t={encode:function(){return e}},r=1);var n=t.encode(e,c.n.bitLength());return l.rsa.encrypt(n,c,r)}};return c},l.wrapRsaPrivateKey=function(e){return a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,a.integerToDer(0).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(l.oids.rsaEncryption).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.NULL,!1,"")]),a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,a.toDer(e).getBytes())])},l.privateKeyFromAsn1=function(e){var t,r,i,s,u,c,h,y,d={},m=[];if(a.validate(e,f,d,m)&&(e=a.fromDer(n.util.createBuffer(d.privateKey))),d={},m=[],!a.validate(e,p,d,m)){var g=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw g.errors=m,g}return t=n.util.createBuffer(d.privateKeyModulus).toHex(),r=n.util.createBuffer(d.privateKeyPublicExponent).toHex(),i=n.util.createBuffer(d.privateKeyPrivateExponent).toHex(),s=n.util.createBuffer(d.privateKeyPrime1).toHex(),u=n.util.createBuffer(d.privateKeyPrime2).toHex(),c=n.util.createBuffer(d.privateKeyExponent1).toHex(),h=n.util.createBuffer(d.privateKeyExponent2).toHex(),y=n.util.createBuffer(d.privateKeyCoefficient).toHex(),l.setRsaPrivateKey(new o(t,16),new o(r,16),new o(i,16),new o(s,16),new o(u,16),new o(c,16),new o(h,16),new o(y,16))},l.privateKeyToAsn1=l.privateKeyToRSAPrivateKey=function(e){return a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,a.integerToDer(0).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,w(e.n)),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,w(e.e)),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,w(e.d)),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,w(e.p)),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,w(e.q)),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,w(e.dP)),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,w(e.dQ)),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,w(e.qInv))])},l.publicKeyFromAsn1=function(e){var t={},r=[];if(a.validate(e,y,t,r)){var i,s=a.derToOid(t.publicKeyOid);if(s!==l.oids.rsaEncryption)throw(i=new Error("Cannot read public key. Unknown OID.")).oid=s,i;e=t.rsaPublicKey}if(r=[],!a.validate(e,h,t,r))throw(i=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.")).errors=r,i;var u=n.util.createBuffer(t.publicKeyModulus).toHex(),c=n.util.createBuffer(t.publicKeyExponent).toHex();return l.setRsaPublicKey(new o(u,16),new o(c,16))},l.publicKeyToAsn1=l.publicKeyToSubjectPublicKeyInfo=function(e){return a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(l.oids.rsaEncryption).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.NULL,!1,"")]),a.create(a.Class.UNIVERSAL,a.Type.BITSTRING,!1,[l.publicKeyToRSAPublicKey(e)])])},l.publicKeyToRSAPublicKey=function(e){return a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,w(e.n)),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,w(e.e))])}},function(e,t,r){var n,o=r(0);function i(e,t,r){this.data=[],null!=e&&("number"==typeof e?this.fromNumber(e,t,r):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function a(){return new i(null)}function s(e,t,r,n,o,i){for(var a=16383&t,s=t>>14;--i>=0;){var u=16383&this.data[e],l=this.data[e++]>>14,c=s*u+l*a;o=((u=a*u+((16383&c)<<14)+r.data[n]+o)>>28)+(c>>14)+s*l,r.data[n++]=268435455&u}return o}e.exports=o.jsbn=o.jsbn||{},o.jsbn.BigInteger=i,"undefined"==typeof navigator?(i.prototype.am=s,n=28):"Microsoft Internet Explorer"==navigator.appName?(i.prototype.am=function(e,t,r,n,o,i){for(var a=32767&t,s=t>>15;--i>=0;){var u=32767&this.data[e],l=this.data[e++]>>15,c=s*u+l*a;o=((u=a*u+((32767&c)<<15)+r.data[n]+(1073741823&o))>>>30)+(c>>>15)+s*l+(o>>>30),r.data[n++]=1073741823&u}return o},n=30):"Netscape"!=navigator.appName?(i.prototype.am=function(e,t,r,n,o,i){for(;--i>=0;){var a=t*this.data[e++]+r.data[n]+o;o=Math.floor(a/67108864),r.data[n++]=67108863&a}return o},n=26):(i.prototype.am=s,n=28),i.prototype.DB=n,i.prototype.DM=(1<<n)-1,i.prototype.DV=1<<n,i.prototype.FV=Math.pow(2,52),i.prototype.F1=52-n,i.prototype.F2=2*n-52;var u,l,c=new Array;for(u="0".charCodeAt(0),l=0;l<=9;++l)c[u++]=l;for(u="a".charCodeAt(0),l=10;l<36;++l)c[u++]=l;for(u="A".charCodeAt(0),l=10;l<36;++l)c[u++]=l;function f(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function p(e,t){var r=c[e.charCodeAt(t)];return null==r?-1:r}function h(e){var t=a();return t.fromInt(e),t}function y(e){var t,r=1;return 0!=(t=e>>>16)&&(e=t,r+=16),0!=(t=e>>8)&&(e=t,r+=8),0!=(t=e>>4)&&(e=t,r+=4),0!=(t=e>>2)&&(e=t,r+=2),0!=(t=e>>1)&&(e=t,r+=1),r}function d(e){this.m=e}function m(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function g(e,t){return e&t}function v(e,t){return e|t}function b(e,t){return e^t}function A(e,t){return e&~t}function w(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function S(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function C(){}function E(e){return e}function _(e){this.r2=a(),this.q3=a(),i.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}d.prototype.convert=function(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e},d.prototype.revert=function(e){return e},d.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},d.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},d.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},m.prototype.convert=function(e){var t=a();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(i.ZERO)>0&&this.m.subTo(t,t),t},m.prototype.revert=function(e){var t=a();return e.copyTo(t),this.reduce(t),t},m.prototype.reduce=function(e){for(;e.t<=this.mt2;)e.data[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=32767&e.data[t],n=r*this.mpl+((r*this.mph+(e.data[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(r=t+this.m.t,e.data[r]+=this.m.am(0,n,e,t,0,this.m.t);e.data[r]>=e.DV;)e.data[r]-=e.DV,e.data[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},m.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},m.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},i.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e.data[t]=this.data[t];e.t=this.t,e.s=this.s},i.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this.data[0]=e:e<-1?this.data[0]=e+this.DV:this.t=0},i.prototype.fromString=function(e,t){var r;if(16==t)r=4;else if(8==t)r=3;else if(256==t)r=8;else if(2==t)r=1;else if(32==t)r=5;else{if(4!=t)return void this.fromRadix(e,t);r=2}this.t=0,this.s=0;for(var n=e.length,o=!1,a=0;--n>=0;){var s=8==r?255&e[n]:p(e,n);s<0?"-"==e.charAt(n)&&(o=!0):(o=!1,0==a?this.data[this.t++]=s:a+r>this.DB?(this.data[this.t-1]|=(s&(1<<this.DB-a)-1)<<a,this.data[this.t++]=s>>this.DB-a):this.data[this.t-1]|=s<<a,(a+=r)>=this.DB&&(a-=this.DB))}8==r&&0!=(128&e[0])&&(this.s=-1,a>0&&(this.data[this.t-1]|=(1<<this.DB-a)-1<<a)),this.clamp(),o&&i.ZERO.subTo(this,this)},i.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this.data[this.t-1]==e;)--this.t},i.prototype.dlShiftTo=function(e,t){var r;for(r=this.t-1;r>=0;--r)t.data[r+e]=this.data[r];for(r=e-1;r>=0;--r)t.data[r]=0;t.t=this.t+e,t.s=this.s},i.prototype.drShiftTo=function(e,t){for(var r=e;r<this.t;++r)t.data[r-e]=this.data[r];t.t=Math.max(this.t-e,0),t.s=this.s},i.prototype.lShiftTo=function(e,t){var r,n=e%this.DB,o=this.DB-n,i=(1<<o)-1,a=Math.floor(e/this.DB),s=this.s<<n&this.DM;for(r=this.t-1;r>=0;--r)t.data[r+a+1]=this.data[r]>>o|s,s=(this.data[r]&i)<<n;for(r=a-1;r>=0;--r)t.data[r]=0;t.data[a]=s,t.t=this.t+a+1,t.s=this.s,t.clamp()},i.prototype.rShiftTo=function(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t)t.t=0;else{var n=e%this.DB,o=this.DB-n,i=(1<<n)-1;t.data[0]=this.data[r]>>n;for(var a=r+1;a<this.t;++a)t.data[a-r-1]|=(this.data[a]&i)<<o,t.data[a-r]=this.data[a]>>n;n>0&&(t.data[this.t-r-1]|=(this.s&i)<<o),t.t=this.t-r,t.clamp()}},i.prototype.subTo=function(e,t){for(var r=0,n=0,o=Math.min(e.t,this.t);r<o;)n+=this.data[r]-e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n-=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=n<0?-1:0,n<-1?t.data[r++]=this.DV+n:n>0&&(t.data[r++]=n),t.t=r,t.clamp()},i.prototype.multiplyTo=function(e,t){var r=this.abs(),n=e.abs(),o=r.t;for(t.t=o+n.t;--o>=0;)t.data[o]=0;for(o=0;o<n.t;++o)t.data[o+r.t]=r.am(0,n.data[o],t,o,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&i.ZERO.subTo(t,t)},i.prototype.squareTo=function(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e.data[r]=0;for(r=0;r<t.t-1;++r){var n=t.am(r,t.data[r],e,2*r,0,1);(e.data[r+t.t]+=t.am(r+1,2*t.data[r],e,2*r+1,n,t.t-r-1))>=t.DV&&(e.data[r+t.t]-=t.DV,e.data[r+t.t+1]=1)}e.t>0&&(e.data[e.t-1]+=t.am(r,t.data[r],e,2*r,0,1)),e.s=0,e.clamp()},i.prototype.divRemTo=function(e,t,r){var n=e.abs();if(!(n.t<=0)){var o=this.abs();if(o.t<n.t)return null!=t&&t.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=a());var s=a(),u=this.s,l=e.s,c=this.DB-y(n.data[n.t-1]);c>0?(n.lShiftTo(c,s),o.lShiftTo(c,r)):(n.copyTo(s),o.copyTo(r));var f=s.t,p=s.data[f-1];if(0!=p){var h=p*(1<<this.F1)+(f>1?s.data[f-2]>>this.F2:0),d=this.FV/h,m=(1<<this.F1)/h,g=1<<this.F2,v=r.t,b=v-f,A=null==t?a():t;for(s.dlShiftTo(b,A),r.compareTo(A)>=0&&(r.data[r.t++]=1,r.subTo(A,r)),i.ONE.dlShiftTo(f,A),A.subTo(s,s);s.t<f;)s.data[s.t++]=0;for(;--b>=0;){var w=r.data[--v]==p?this.DM:Math.floor(r.data[v]*d+(r.data[v-1]+g)*m);if((r.data[v]+=s.am(0,w,r,b,0,f))<w)for(s.dlShiftTo(b,A),r.subTo(A,r);r.data[v]<--w;)r.subTo(A,r)}null!=t&&(r.drShiftTo(f,t),u!=l&&i.ZERO.subTo(t,t)),r.t=f,r.clamp(),c>0&&r.rShiftTo(c,r),u<0&&i.ZERO.subTo(r,r)}}},i.prototype.invDigit=function(){if(this.t<1)return 0;var e=this.data[0];if(0==(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},i.prototype.isEven=function(){return 0==(this.t>0?1&this.data[0]:this.s)},i.prototype.exp=function(e,t){if(e>4294967295||e<1)return i.ONE;var r=a(),n=a(),o=t.convert(this),s=y(e)-1;for(o.copyTo(r);--s>=0;)if(t.sqrTo(r,n),(e&1<<s)>0)t.mulTo(n,o,r);else{var u=r;r=n,n=u}return t.revert(r)},i.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var r,n=(1<<t)-1,o=!1,i="",a=this.t,s=this.DB-a*this.DB%t;if(a-- >0)for(s<this.DB&&(r=this.data[a]>>s)>0&&(o=!0,i=f(r));a>=0;)s<t?(r=(this.data[a]&(1<<s)-1)<<t-s,r|=this.data[--a]>>(s+=this.DB-t)):(r=this.data[a]>>(s-=t)&n,s<=0&&(s+=this.DB,--a)),r>0&&(o=!0),o&&(i+=f(r));return o?i:"0"},i.prototype.negate=function(){var e=a();return i.ZERO.subTo(this,e),e},i.prototype.abs=function(){return this.s<0?this.negate():this},i.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var r=this.t;if(0!=(t=r-e.t))return this.s<0?-t:t;for(;--r>=0;)if(0!=(t=this.data[r]-e.data[r]))return t;return 0},i.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+y(this.data[this.t-1]^this.s&this.DM)},i.prototype.mod=function(e){var t=a();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(i.ZERO)>0&&e.subTo(t,t),t},i.prototype.modPowInt=function(e,t){var r;return r=e<256||t.isEven()?new d(t):new m(t),this.exp(e,r)},i.ZERO=h(0),i.ONE=h(1),C.prototype.convert=E,C.prototype.revert=E,C.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r)},C.prototype.sqrTo=function(e,t){e.squareTo(t)},_.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=a();return e.copyTo(t),this.reduce(t),t},_.prototype.revert=function(e){return e},_.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)},_.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},_.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)};var I=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],O=(1<<26)/I[I.length-1];i.prototype.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},i.prototype.toRadix=function(e){if(null==e&&(e=10),0==this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),n=h(r),o=a(),i=a(),s="";for(this.divRemTo(n,o,i);o.signum()>0;)s=(r+i.intValue()).toString(e).substr(1)+s,o.divRemTo(n,o,i);return i.intValue().toString(e)+s},i.prototype.fromRadix=function(e,t){this.fromInt(0),null==t&&(t=10);for(var r=this.chunkSize(t),n=Math.pow(t,r),o=!1,a=0,s=0,u=0;u<e.length;++u){var l=p(e,u);l<0?"-"==e.charAt(u)&&0==this.signum()&&(o=!0):(s=t*s+l,++a>=r&&(this.dMultiply(n),this.dAddOffset(s,0),a=0,s=0))}a>0&&(this.dMultiply(Math.pow(t,a)),this.dAddOffset(s,0)),o&&i.ZERO.subTo(this,this)},i.prototype.fromNumber=function(e,t,r){if("number"==typeof t)if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(i.ONE.shiftLeft(e-1),v,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(i.ONE.shiftLeft(e-1),this);else{var n=new Array,o=7&e;n.length=1+(e>>3),t.nextBytes(n),o>0?n[0]&=(1<<o)-1:n[0]=0,this.fromString(n,256)}},i.prototype.bitwiseTo=function(e,t,r){var n,o,i=Math.min(e.t,this.t);for(n=0;n<i;++n)r.data[n]=t(this.data[n],e.data[n]);if(e.t<this.t){for(o=e.s&this.DM,n=i;n<this.t;++n)r.data[n]=t(this.data[n],o);r.t=this.t}else{for(o=this.s&this.DM,n=i;n<e.t;++n)r.data[n]=t(o,e.data[n]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()},i.prototype.changeBit=function(e,t){var r=i.ONE.shiftLeft(e);return this.bitwiseTo(r,t,r),r},i.prototype.addTo=function(e,t){for(var r=0,n=0,o=Math.min(e.t,this.t);r<o;)n+=this.data[r]+e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n+=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=e.s}t.s=n<0?-1:0,n>0?t.data[r++]=n:n<-1&&(t.data[r++]=this.DV+n),t.t=r,t.clamp()},i.prototype.dMultiply=function(e){this.data[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},i.prototype.dAddOffset=function(e,t){if(0!=e){for(;this.t<=t;)this.data[this.t++]=0;for(this.data[t]+=e;this.data[t]>=this.DV;)this.data[t]-=this.DV,++t>=this.t&&(this.data[this.t++]=0),++this.data[t]}},i.prototype.multiplyLowerTo=function(e,t,r){var n,o=Math.min(this.t+e.t,t);for(r.s=0,r.t=o;o>0;)r.data[--o]=0;for(n=r.t-this.t;o<n;++o)r.data[o+this.t]=this.am(0,e.data[o],r,o,0,this.t);for(n=Math.min(e.t,t);o<n;++o)this.am(0,e.data[o],r,o,0,t-o);r.clamp()},i.prototype.multiplyUpperTo=function(e,t,r){--t;var n=r.t=this.t+e.t-t;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(t-this.t,0);n<e.t;++n)r.data[this.t+n-t]=this.am(t-n,e.data[n],r,0,0,this.t+n-t);r.clamp(),r.drShiftTo(1,r)},i.prototype.modInt=function(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(this.t>0)if(0==t)r=this.data[0]%e;else for(var n=this.t-1;n>=0;--n)r=(t*r+this.data[n])%e;return r},i.prototype.millerRabin=function(e){var t=this.subtract(i.ONE),r=t.getLowestSetBit();if(r<=0)return!1;for(var n,o=t.shiftRight(r),a={nextBytes:function(e){for(var t=0;t<e.length;++t)e[t]=Math.floor(256*Math.random())}},s=0;s<e;++s){do{n=new i(this.bitLength(),a)}while(n.compareTo(i.ONE)<=0||n.compareTo(t)>=0);var u=n.modPow(o,this);if(0!=u.compareTo(i.ONE)&&0!=u.compareTo(t)){for(var l=1;l++<r&&0!=u.compareTo(t);)if(0==(u=u.modPowInt(2,this)).compareTo(i.ONE))return!1;if(0!=u.compareTo(t))return!1}}return!0},i.prototype.clone=function(){var e=a();return this.copyTo(e),e},i.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this.data[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this.data[0];if(0==this.t)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]},i.prototype.byteValue=function(){return 0==this.t?this.s:this.data[0]<<24>>24},i.prototype.shortValue=function(){return 0==this.t?this.s:this.data[0]<<16>>16},i.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this.data[0]<=0?0:1},i.prototype.toByteArray=function(){var e=this.t,t=new Array;t[0]=this.s;var r,n=this.DB-e*this.DB%8,o=0;if(e-- >0)for(n<this.DB&&(r=this.data[e]>>n)!=(this.s&this.DM)>>n&&(t[o++]=r|this.s<<this.DB-n);e>=0;)n<8?(r=(this.data[e]&(1<<n)-1)<<8-n,r|=this.data[--e]>>(n+=this.DB-8)):(r=this.data[e]>>(n-=8)&255,n<=0&&(n+=this.DB,--e)),0!=(128&r)&&(r|=-256),0==o&&(128&this.s)!=(128&r)&&++o,(o>0||r!=this.s)&&(t[o++]=r);return t},i.prototype.equals=function(e){return 0==this.compareTo(e)},i.prototype.min=function(e){return this.compareTo(e)<0?this:e},i.prototype.max=function(e){return this.compareTo(e)>0?this:e},i.prototype.and=function(e){var t=a();return this.bitwiseTo(e,g,t),t},i.prototype.or=function(e){var t=a();return this.bitwiseTo(e,v,t),t},i.prototype.xor=function(e){var t=a();return this.bitwiseTo(e,b,t),t},i.prototype.andNot=function(e){var t=a();return this.bitwiseTo(e,A,t),t},i.prototype.not=function(){for(var e=a(),t=0;t<this.t;++t)e.data[t]=this.DM&~this.data[t];return e.t=this.t,e.s=~this.s,e},i.prototype.shiftLeft=function(e){var t=a();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t},i.prototype.shiftRight=function(e){var t=a();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t},i.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this.data[e])return e*this.DB+w(this.data[e]);return this.s<0?this.t*this.DB:-1},i.prototype.bitCount=function(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=S(this.data[r]^t);return e},i.prototype.testBit=function(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this.data[t]&1<<e%this.DB)},i.prototype.setBit=function(e){return this.changeBit(e,v)},i.prototype.clearBit=function(e){return this.changeBit(e,A)},i.prototype.flipBit=function(e){return this.changeBit(e,b)},i.prototype.add=function(e){var t=a();return this.addTo(e,t),t},i.prototype.subtract=function(e){var t=a();return this.subTo(e,t),t},i.prototype.multiply=function(e){var t=a();return this.multiplyTo(e,t),t},i.prototype.divide=function(e){var t=a();return this.divRemTo(e,t,null),t},i.prototype.remainder=function(e){var t=a();return this.divRemTo(e,null,t),t},i.prototype.divideAndRemainder=function(e){var t=a(),r=a();return this.divRemTo(e,t,r),new Array(t,r)},i.prototype.modPow=function(e,t){var r,n,o=e.bitLength(),i=h(1);if(o<=0)return i;r=o<18?1:o<48?3:o<144?4:o<768?5:6,n=o<8?new d(t):t.isEven()?new _(t):new m(t);var s=new Array,u=3,l=r-1,c=(1<<r)-1;if(s[1]=n.convert(this),r>1){var f=a();for(n.sqrTo(s[1],f);u<=c;)s[u]=a(),n.mulTo(f,s[u-2],s[u]),u+=2}var p,g,v=e.t-1,b=!0,A=a();for(o=y(e.data[v])-1;v>=0;){for(o>=l?p=e.data[v]>>o-l&c:(p=(e.data[v]&(1<<o+1)-1)<<l-o,v>0&&(p|=e.data[v-1]>>this.DB+o-l)),u=r;0==(1&p);)p>>=1,--u;if((o-=u)<0&&(o+=this.DB,--v),b)s[p].copyTo(i),b=!1;else{for(;u>1;)n.sqrTo(i,A),n.sqrTo(A,i),u-=2;u>0?n.sqrTo(i,A):(g=i,i=A,A=g),n.mulTo(A,s[p],i)}for(;v>=0&&0==(e.data[v]&1<<o);)n.sqrTo(i,A),g=i,i=A,A=g,--o<0&&(o=this.DB-1,--v)}return n.revert(i)},i.prototype.modInverse=function(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return i.ZERO;for(var r=e.clone(),n=this.clone(),o=h(1),a=h(0),s=h(0),u=h(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),t?(o.isEven()&&a.isEven()||(o.addTo(this,o),a.subTo(e,a)),o.rShiftTo(1,o)):a.isEven()||a.subTo(e,a),a.rShiftTo(1,a);for(;n.isEven();)n.rShiftTo(1,n),t?(s.isEven()&&u.isEven()||(s.addTo(this,s),u.subTo(e,u)),s.rShiftTo(1,s)):u.isEven()||u.subTo(e,u),u.rShiftTo(1,u);r.compareTo(n)>=0?(r.subTo(n,r),t&&o.subTo(s,o),a.subTo(u,a)):(n.subTo(r,n),t&&s.subTo(o,s),u.subTo(a,u))}return 0!=n.compareTo(i.ONE)?i.ZERO:u.compareTo(e)>=0?u.subtract(e):u.signum()<0?(u.addTo(e,u),u.signum()<0?u.add(e):u):u},i.prototype.pow=function(e){return this.exp(e,new C)},i.prototype.gcd=function(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(t.compareTo(r)<0){var n=t;t=r,r=n}var o=t.getLowestSetBit(),i=r.getLowestSetBit();if(i<0)return t;for(o<i&&(i=o),i>0&&(t.rShiftTo(i,t),r.rShiftTo(i,r));t.signum()>0;)(o=t.getLowestSetBit())>0&&t.rShiftTo(o,t),(o=r.getLowestSetBit())>0&&r.rShiftTo(o,r),t.compareTo(r)>=0?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return i>0&&r.lShiftTo(i,r),r},i.prototype.isProbablePrime=function(e){var t,r=this.abs();if(1==r.t&&r.data[0]<=I[I.length-1]){for(t=0;t<I.length;++t)if(r.data[0]==I[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<I.length;){for(var n=I[t],o=t+1;o<I.length&&n<O;)n*=I[o++];for(n=r.modInt(n);t<o;)if(n%I[t++]==0)return!1}return r.millerRabin(e)}},function(e,t,r){var n=r(0);r(1),e.exports=n.cipher=n.cipher||{},n.cipher.algorithms=n.cipher.algorithms||{},n.cipher.createCipher=function(e,t){var r=e;if("string"==typeof r&&(r=n.cipher.getAlgorithm(r))&&(r=r()),!r)throw new Error("Unsupported algorithm: "+e);return new n.cipher.BlockCipher({algorithm:r,key:t,decrypt:!1})},n.cipher.createDecipher=function(e,t){var r=e;if("string"==typeof r&&(r=n.cipher.getAlgorithm(r))&&(r=r()),!r)throw new Error("Unsupported algorithm: "+e);return new n.cipher.BlockCipher({algorithm:r,key:t,decrypt:!0})},n.cipher.registerAlgorithm=function(e,t){e=e.toUpperCase(),n.cipher.algorithms[e]=t},n.cipher.getAlgorithm=function(e){return(e=e.toUpperCase())in n.cipher.algorithms?n.cipher.algorithms[e]:null};var o=n.cipher.BlockCipher=function(e){this.algorithm=e.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=e.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=e.decrypt,this.algorithm.initialize(e)};o.prototype.start=function(e){e=e||{};var t={};for(var r in e)t[r]=e[r];t.decrypt=this._decrypt,this._finish=!1,this._input=n.util.createBuffer(),this.output=e.output||n.util.createBuffer(),this.mode.start(t)},o.prototype.update=function(e){for(e&&this._input.putBuffer(e);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()},o.prototype.finish=function(e){!e||"ECB"!==this.mode.name&&"CBC"!==this.mode.name||(this.mode.pad=function(t){return e(this.blockSize,t,!1)},this.mode.unpad=function(t){return e(this.blockSize,t,!0)});var t={};return t.decrypt=this._decrypt,t.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,t)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,t)||this.mode.afterFinish&&!this.mode.afterFinish(this.output,t)))}},function(e,t,r){var n=r(0);r(4),r(1);var o=e.exports=n.md5=n.md5||{};n.md.md5=n.md.algorithms.md5=o,o.create=function(){l||function(){i=String.fromCharCode(128),i+=n.util.fillString(String.fromCharCode(0),64),a=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],s=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],u=new Array(64);for(var e=0;e<64;++e)u[e]=Math.floor(4294967296*Math.abs(Math.sin(e+1)));l=!0}();var e=null,t=n.util.createBuffer(),r=new Array(16),o={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){o.messageLength=0,o.fullMessageLength=o.messageLength64=[];for(var r=o.messageLengthSize/4,i=0;i<r;++i)o.fullMessageLength.push(0);return t=n.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},o}};return o.start(),o.update=function(i,a){"utf8"===a&&(i=n.util.encodeUtf8(i));var s=i.length;o.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var u=o.fullMessageLength.length-1;u>=0;--u)o.fullMessageLength[u]+=s[1],s[1]=s[0]+(o.fullMessageLength[u]/4294967296>>>0),o.fullMessageLength[u]=o.fullMessageLength[u]>>>0,s[0]=s[1]/4294967296>>>0;return t.putBytes(i),c(e,r,t),(t.read>2048||0===t.length())&&t.compact(),o},o.digest=function(){var a=n.util.createBuffer();a.putBytes(t.bytes());var s=o.fullMessageLength[o.fullMessageLength.length-1]+o.messageLengthSize&o.blockLength-1;a.putBytes(i.substr(0,o.blockLength-s));for(var u,l=0,f=o.fullMessageLength.length-1;f>=0;--f)l=(u=8*o.fullMessageLength[f]+l)/4294967296>>>0,a.putInt32Le(u>>>0);var p={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3};c(p,r,a);var h=n.util.createBuffer();return h.putInt32Le(p.h0),h.putInt32Le(p.h1),h.putInt32Le(p.h2),h.putInt32Le(p.h3),h},o};var i=null,a=null,s=null,u=null,l=!1;function c(e,t,r){for(var n,o,i,l,c,f,p,h=r.length();h>=64;){for(o=e.h0,i=e.h1,l=e.h2,c=e.h3,p=0;p<16;++p)t[p]=r.getInt32Le(),n=o+(c^i&(l^c))+u[p]+t[p],o=c,c=l,l=i,i+=n<<(f=s[p])|n>>>32-f;for(;p<32;++p)n=o+(l^c&(i^l))+u[p]+t[a[p]],o=c,c=l,l=i,i+=n<<(f=s[p])|n>>>32-f;for(;p<48;++p)n=o+(i^l^c)+u[p]+t[a[p]],o=c,c=l,l=i,i+=n<<(f=s[p])|n>>>32-f;for(;p<64;++p)n=o+(l^(i|~c))+u[p]+t[a[p]],o=c,c=l,l=i,i+=n<<(f=s[p])|n>>>32-f;e.h0=e.h0+o|0,e.h1=e.h1+i|0,e.h2=e.h2+l|0,e.h3=e.h3+c|0,h-=64}}},function(e,t,r){var n=r(0);r(8),r(4),r(1);var o,i=n.pkcs5=n.pkcs5||{};n.util.isNodejs&&!n.options.usePureJavaScript&&(o=r(16)),e.exports=n.pbkdf2=i.pbkdf2=function(e,t,r,i,a,u){if("function"==typeof a&&(u=a,a=null),n.util.isNodejs&&!n.options.usePureJavaScript&&o.pbkdf2&&(null===a||"object"!=s(a))&&(o.pbkdf2Sync.length>4||!a||"sha1"===a))return"string"!=typeof a&&(a="sha1"),e=Buffer.from(e,"binary"),t=Buffer.from(t,"binary"),u?4===o.pbkdf2Sync.length?o.pbkdf2(e,t,r,i,function(e,t){if(e)return u(e);u(null,t.toString("binary"))}):o.pbkdf2(e,t,r,i,a,function(e,t){if(e)return u(e);u(null,t.toString("binary"))}):4===o.pbkdf2Sync.length?o.pbkdf2Sync(e,t,r,i).toString("binary"):o.pbkdf2Sync(e,t,r,i,a).toString("binary");if(null==a&&(a="sha1"),"string"==typeof a){if(!(a in n.md.algorithms))throw new Error("Unknown hash algorithm: "+a);a=n.md[a].create()}var l=a.digestLength;if(i>4294967295*l){var c=new Error("Derived key is too long.");if(u)return u(c);throw c}var f=Math.ceil(i/l),p=i-(f-1)*l,h=n.hmac.create();h.start(a,e);var y,d,m,g="";if(!u){for(var v=1;v<=f;++v){h.start(null,null),h.update(t),h.update(n.util.int32ToBytes(v)),y=m=h.digest().getBytes();for(var b=2;b<=r;++b)h.start(null,null),h.update(m),d=h.digest().getBytes(),y=n.util.xorBytes(y,d,l),m=d;g+=v<f?y:y.substr(0,p)}return g}function A(){if(v>f)return u(null,g);h.start(null,null),h.update(t),h.update(n.util.int32ToBytes(v)),y=m=h.digest().getBytes(),b=2,w()}function w(){if(b<=r)return h.start(null,null),h.update(m),d=h.digest().getBytes(),y=n.util.xorBytes(y,d,l),m=d,++b,n.util.setImmediate(w);g+=v<f?y:y.substr(0,p),++v,A()}v=1,A()}},function(e,t){},function(e,t,r){var n=r(0);r(5),r(3),r(10),r(4),r(37),r(6),r(7),r(18),r(11),r(1);var o=n.asn1,i=e.exports=n.pki=n.pki||{},a=i.oids,u={};u.CN=a.commonName,u.commonName="CN",u.C=a.countryName,u.countryName="C",u.L=a.localityName,u.localityName="L",u.ST=a.stateOrProvinceName,u.stateOrProvinceName="ST",u.O=a.organizationName,u.organizationName="O",u.OU=a.organizationalUnitName,u.organizationalUnitName="OU",u.E=a.emailAddress,u.emailAddress="E";var l=n.pki.rsa.publicKeyValidator,c={name:"Certificate",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:o.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:o.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:o.Class.UNIVERSAL,type:o.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:o.Class.UNIVERSAL,type:o.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:o.Class.UNIVERSAL,type:o.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:o.Class.UNIVERSAL,type:o.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},l,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:o.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:o.Class.UNIVERSAL,type:o.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:o.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:o.Class.UNIVERSAL,type:o.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:o.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:o.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:o.Class.UNIVERSAL,type:o.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},f={name:"rsapss",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:o.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:o.Class.UNIVERSAL,type:o.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:o.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:o.Class.UNIVERSAL,type:o.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:o.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:o.Class.UNIVERSAL,type:o.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:o.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:o.Class.UNIVERSAL,type:o.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},p={name:"CertificationRequestInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},l,{name:"CertificationRequestInfo.attributes",tagClass:o.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:o.Class.UNIVERSAL,type:o.Type.SET,constructed:!0}]}]}]},h={name:"CertificationRequest",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[p,{name:"CertificationRequest.signatureAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:o.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:o.Class.UNIVERSAL,type:o.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};function y(e,t){"string"==typeof t&&(t={shortName:t});for(var r,n=null,o=0;null===n&&o<e.attributes.length;++o)r=e.attributes[o],(t.type&&t.type===r.type||t.name&&t.name===r.name||t.shortName&&t.shortName===r.shortName)&&(n=r);return n}i.RDNAttributesAsArray=function(e,t){for(var r,n,i,s=[],l=0;l<e.value.length;++l){r=e.value[l];for(var c=0;c<r.value.length;++c)i={},n=r.value[c],i.type=o.derToOid(n.value[0].value),i.value=n.value[1].value,i.valueTagClass=n.value[1].type,i.type in a&&(i.name=a[i.type],i.name in u&&(i.shortName=u[i.name])),t&&(t.update(i.type),t.update(i.value)),s.push(i)}return s},i.CRIAttributesAsArray=function(e){for(var t=[],r=0;r<e.length;++r)for(var n=e[r],s=o.derToOid(n.value[0].value),l=n.value[1].value,c=0;c<l.length;++c){var f={};if(f.type=s,f.value=l[c].value,f.valueTagClass=l[c].type,f.type in a&&(f.name=a[f.type],f.name in u&&(f.shortName=u[f.name])),f.type===a.extensionRequest){f.extensions=[];for(var p=0;p<f.value.length;++p)f.extensions.push(i.certificateExtensionFromAsn1(f.value[p]))}t.push(f)}return t};var d=function(e,t,r){var n={};if(e!==a["RSASSA-PSS"])return n;r&&(n={hash:{algorithmOid:a.sha1},mgf:{algorithmOid:a.mgf1,hash:{algorithmOid:a.sha1}},saltLength:20});var i={},s=[];if(!o.validate(t,f,i,s)){var u=new Error("Cannot read RSASSA-PSS parameter block.");throw u.errors=s,u}return void 0!==i.hashOid&&(n.hash=n.hash||{},n.hash.algorithmOid=o.derToOid(i.hashOid)),void 0!==i.maskGenOid&&(n.mgf=n.mgf||{},n.mgf.algorithmOid=o.derToOid(i.maskGenOid),n.mgf.hash=n.mgf.hash||{},n.mgf.hash.algorithmOid=o.derToOid(i.maskGenHashOid)),void 0!==i.saltLength&&(n.saltLength=i.saltLength.charCodeAt(0)),n},m=function(e){switch(a[e.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return n.md.sha1.create();case"md5WithRSAEncryption":return n.md.md5.create();case"sha256WithRSAEncryption":return n.md.sha256.create();case"sha384WithRSAEncryption":return n.md.sha384.create();case"sha512WithRSAEncryption":return n.md.sha512.create();case"RSASSA-PSS":return n.md.sha256.create();default:var t=new Error("Could not compute "+e.type+" digest. Unknown signature OID.");throw t.signatureOid=e.signatureOid,t}},g=function(e){var t,r=e.certificate;switch(r.signatureOid){case a.sha1WithRSAEncryption:case a.sha1WithRSASignature:break;case a["RSASSA-PSS"]:var o,i,s;if(void 0===(o=a[r.signatureParameters.mgf.hash.algorithmOid])||void 0===n.md[o])throw(s=new Error("Unsupported MGF hash function.")).oid=r.signatureParameters.mgf.hash.algorithmOid,s.name=o,s;if(void 0===(i=a[r.signatureParameters.mgf.algorithmOid])||void 0===n.mgf[i])throw(s=new Error("Unsupported MGF function.")).oid=r.signatureParameters.mgf.algorithmOid,s.name=i,s;if(i=n.mgf[i].create(n.md[o].create()),void 0===(o=a[r.signatureParameters.hash.algorithmOid])||void 0===n.md[o])throw(s=new Error("Unsupported RSASSA-PSS hash function.")).oid=r.signatureParameters.hash.algorithmOid,s.name=o,s;t=n.pss.create(n.md[o].create(),i,r.signatureParameters.saltLength)}return r.publicKey.verify(e.md.digest().getBytes(),e.signature,t)};function v(e){for(var t,r,i=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]),a=e.attributes,s=0;s<a.length;++s){var u=(t=a[s]).value,l=o.Type.PRINTABLESTRING;"valueTagClass"in t&&(l=t.valueTagClass)===o.Type.UTF8&&(u=n.util.encodeUtf8(u)),r=o.create(o.Class.UNIVERSAL,o.Type.SET,!0,[o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(t.type).getBytes()),o.create(o.Class.UNIVERSAL,l,!1,u)])]),i.value.push(r)}return i}function b(e){for(var t,r=0;r<e.length;++r){if(void 0===(t=e[r]).name&&(t.type&&t.type in i.oids?t.name=i.oids[t.type]:t.shortName&&t.shortName in u&&(t.name=i.oids[u[t.shortName]])),void 0===t.type){if(!(t.name&&t.name in i.oids))throw(s=new Error("Attribute type not specified.")).attribute=t,s;t.type=i.oids[t.name]}if(void 0===t.shortName&&t.name&&t.name in u&&(t.shortName=u[t.name]),t.type===a.extensionRequest&&(t.valueConstructed=!0,t.valueTagClass=o.Type.SEQUENCE,!t.value&&t.extensions)){t.value=[];for(var n=0;n<t.extensions.length;++n)t.value.push(i.certificateExtensionToAsn1(A(t.extensions[n])))}var s;if(void 0===t.value)throw(s=new Error("Attribute value not specified.")).attribute=t,s}}function A(e,t){if(t=t||{},void 0===e.name&&e.id&&e.id in i.oids&&(e.name=i.oids[e.id]),void 0===e.id){if(!(e.name&&e.name in i.oids))throw(w=new Error("Extension ID not specified.")).extension=e,w;e.id=i.oids[e.name]}if(void 0!==e.value)return e;if("keyUsage"===e.name){var r=0,s=0,u=0;e.digitalSignature&&(s|=128,r=7),e.nonRepudiation&&(s|=64,r=6),e.keyEncipherment&&(s|=32,r=5),e.dataEncipherment&&(s|=16,r=4),e.keyAgreement&&(s|=8,r=3),e.keyCertSign&&(s|=4,r=2),e.cRLSign&&(s|=2,r=1),e.encipherOnly&&(s|=1,r=0),e.decipherOnly&&(u|=128,r=7);var l=String.fromCharCode(r);0!==u?l+=String.fromCharCode(s)+String.fromCharCode(u):0!==s&&(l+=String.fromCharCode(s)),e.value=o.create(o.Class.UNIVERSAL,o.Type.BITSTRING,!1,l)}else if("basicConstraints"===e.name)e.value=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]),e.cA&&e.value.value.push(o.create(o.Class.UNIVERSAL,o.Type.BOOLEAN,!1,String.fromCharCode(255))),"pathLenConstraint"in e&&e.value.value.push(o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(e.pathLenConstraint).getBytes()));else if("extKeyUsage"===e.name){e.value=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]);var c=e.value.value;for(var f in e)!0===e[f]&&(f in a?c.push(o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(a[f]).getBytes())):-1!==f.indexOf(".")&&c.push(o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(f).getBytes())))}else if("nsCertType"===e.name)r=0,s=0,e.client&&(s|=128,r=7),e.server&&(s|=64,r=6),e.email&&(s|=32,r=5),e.objsign&&(s|=16,r=4),e.reserved&&(s|=8,r=3),e.sslCA&&(s|=4,r=2),e.emailCA&&(s|=2,r=1),e.objCA&&(s|=1,r=0),l=String.fromCharCode(r),0!==s&&(l+=String.fromCharCode(s)),e.value=o.create(o.Class.UNIVERSAL,o.Type.BITSTRING,!1,l);else if("subjectAltName"===e.name||"issuerAltName"===e.name){e.value=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]);for(var p=0;p<e.altNames.length;++p){if(l=(g=e.altNames[p]).value,7===g.type&&g.ip){if(null===(l=n.util.bytesFromIP(g.ip)))throw(w=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.')).extension=e,w}else 8===g.type&&(l=g.oid?o.oidToDer(o.oidToDer(g.oid)):o.oidToDer(l));e.value.value.push(o.create(o.Class.CONTEXT_SPECIFIC,g.type,!1,l))}}else if("nsComment"===e.name&&t.cert){if(!/^[\x00-\x7F]*$/.test(e.comment)||e.comment.length<1||e.comment.length>128)throw new Error('Invalid "nsComment" content.');e.value=o.create(o.Class.UNIVERSAL,o.Type.IA5STRING,!1,e.comment)}else if("subjectKeyIdentifier"===e.name&&t.cert){var h=t.cert.generateSubjectKeyIdentifier();e.subjectKeyIdentifier=h.toHex(),e.value=o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,h.getBytes())}else if("authorityKeyIdentifier"===e.name&&t.cert){if(e.value=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]),c=e.value.value,e.keyIdentifier){var y=!0===e.keyIdentifier?t.cert.generateSubjectKeyIdentifier().getBytes():e.keyIdentifier;c.push(o.create(o.Class.CONTEXT_SPECIFIC,0,!1,y))}if(e.authorityCertIssuer){var d=[o.create(o.Class.CONTEXT_SPECIFIC,4,!0,[v(!0===e.authorityCertIssuer?t.cert.issuer:e.authorityCertIssuer)])];c.push(o.create(o.Class.CONTEXT_SPECIFIC,1,!0,d))}if(e.serialNumber){var m=n.util.hexToBytes(!0===e.serialNumber?t.cert.serialNumber:e.serialNumber);c.push(o.create(o.Class.CONTEXT_SPECIFIC,2,!1,m))}}else if("cRLDistributionPoints"===e.name){e.value=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]),c=e.value.value;var g,b=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]),A=o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[]);for(p=0;p<e.altNames.length;++p){if(l=(g=e.altNames[p]).value,7===g.type&&g.ip){if(null===(l=n.util.bytesFromIP(g.ip)))throw(w=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.')).extension=e,w}else 8===g.type&&(l=g.oid?o.oidToDer(o.oidToDer(g.oid)):o.oidToDer(l));A.value.push(o.create(o.Class.CONTEXT_SPECIFIC,g.type,!1,l))}b.value.push(o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[A])),c.push(b)}var w;if(void 0===e.value)throw(w=new Error("Extension value not specified.")).extension=e,w;return e}function w(e,t){switch(e){case a["RSASSA-PSS"]:var r=[];return void 0!==t.hash.algorithmOid&&r.push(o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(t.hash.algorithmOid).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")])])),void 0!==t.mgf.algorithmOid&&r.push(o.create(o.Class.CONTEXT_SPECIFIC,1,!0,[o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(t.mgf.algorithmOid).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(t.mgf.hash.algorithmOid).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")])])])),void 0!==t.saltLength&&r.push(o.create(o.Class.CONTEXT_SPECIFIC,2,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(t.saltLength).getBytes())])),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,r);default:return o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")}}i.certificateFromPem=function(e,t,r){var a=n.pem.decode(e)[0];if("CERTIFICATE"!==a.type&&"X509 CERTIFICATE"!==a.type&&"TRUSTED CERTIFICATE"!==a.type){var s=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw s.headerType=a.type,s}if(a.procType&&"ENCRYPTED"===a.procType.type)throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var u=o.fromDer(a.body,r);return i.certificateFromAsn1(u,t)},i.certificateToPem=function(e,t){var r={type:"CERTIFICATE",body:o.toDer(i.certificateToAsn1(e)).getBytes()};return n.pem.encode(r,{maxline:t})},i.publicKeyFromPem=function(e){var t=n.pem.decode(e)[0];if("PUBLIC KEY"!==t.type&&"RSA PUBLIC KEY"!==t.type){var r=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw r.headerType=t.type,r}if(t.procType&&"ENCRYPTED"===t.procType.type)throw new Error("Could not convert public key from PEM; PEM is encrypted.");var a=o.fromDer(t.body);return i.publicKeyFromAsn1(a)},i.publicKeyToPem=function(e,t){var r={type:"PUBLIC KEY",body:o.toDer(i.publicKeyToAsn1(e)).getBytes()};return n.pem.encode(r,{maxline:t})},i.publicKeyToRSAPublicKeyPem=function(e,t){var r={type:"RSA PUBLIC KEY",body:o.toDer(i.publicKeyToRSAPublicKey(e)).getBytes()};return n.pem.encode(r,{maxline:t})},i.getPublicKeyFingerprint=function(e,t){var r,a=(t=t||{}).md||n.md.sha1.create();switch(t.type||"RSAPublicKey"){case"RSAPublicKey":r=o.toDer(i.publicKeyToRSAPublicKey(e)).getBytes();break;case"SubjectPublicKeyInfo":r=o.toDer(i.publicKeyToAsn1(e)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+t.type+'".')}a.start(),a.update(r);var s=a.digest();if("hex"===t.encoding){var u=s.toHex();return t.delimiter?u.match(/.{2}/g).join(t.delimiter):u}if("binary"===t.encoding)return s.getBytes();if(t.encoding)throw new Error('Unknown encoding "'+t.encoding+'".');return s},i.certificationRequestFromPem=function(e,t,r){var a=n.pem.decode(e)[0];if("CERTIFICATE REQUEST"!==a.type){var s=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw s.headerType=a.type,s}if(a.procType&&"ENCRYPTED"===a.procType.type)throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var u=o.fromDer(a.body,r);return i.certificationRequestFromAsn1(u,t)},i.certificationRequestToPem=function(e,t){var r={type:"CERTIFICATE REQUEST",body:o.toDer(i.certificationRequestToAsn1(e)).getBytes()};return n.pem.encode(r,{maxline:t})},i.createCertificate=function(){var e={version:2,serialNumber:"00",signatureOid:null,signature:null,siginfo:{}};return e.siginfo.algorithmOid=null,e.validity={},e.validity.notBefore=new Date,e.validity.notAfter=new Date,e.issuer={},e.issuer.getField=function(t){return y(e.issuer,t)},e.issuer.addField=function(t){b([t]),e.issuer.attributes.push(t)},e.issuer.attributes=[],e.issuer.hash=null,e.subject={},e.subject.getField=function(t){return y(e.subject,t)},e.subject.addField=function(t){b([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.extensions=[],e.publicKey=null,e.md=null,e.setSubject=function(t,r){b(t),e.subject.attributes=t,delete e.subject.uniqueId,r&&(e.subject.uniqueId=r),e.subject.hash=null},e.setIssuer=function(t,r){b(t),e.issuer.attributes=t,delete e.issuer.uniqueId,r&&(e.issuer.uniqueId=r),e.issuer.hash=null},e.setExtensions=function(t){for(var r=0;r<t.length;++r)A(t[r],{cert:e});e.extensions=t},e.getExtension=function(t){"string"==typeof t&&(t={name:t});for(var r,n=null,o=0;null===n&&o<e.extensions.length;++o)r=e.extensions[o],(t.id&&r.id===t.id||t.name&&r.name===t.name)&&(n=r);return n},e.sign=function(t,r){e.md=r||n.md.sha1.create();var s=a[e.md.algorithm+"WithRSAEncryption"];if(!s){var u=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw u.algorithm=e.md.algorithm,u}e.signatureOid=e.siginfo.algorithmOid=s,e.tbsCertificate=i.getTBSCertificate(e);var l=o.toDer(e.tbsCertificate);e.md.update(l.getBytes()),e.signature=t.sign(e.md)},e.verify=function(t){var r=!1;if(!e.issued(t)){var n=t.issuer,a=e.subject,s=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw s.expectedIssuer=a.attributes,s.actualIssuer=n.attributes,s}var u=t.md;if(null===u){u=m({signatureOid:t.signatureOid,type:"certificate"});var l=t.tbsCertificate||i.getTBSCertificate(t),c=o.toDer(l);u.update(c.getBytes())}return null!==u&&(r=g({certificate:e,md:u,signature:t.signature})),r},e.isIssuer=function(t){var r=!1,n=e.issuer,o=t.subject;if(n.hash&&o.hash)r=n.hash===o.hash;else if(n.attributes.length===o.attributes.length){var i,a;r=!0;for(var s=0;r&&s<n.attributes.length;++s)i=n.attributes[s],a=o.attributes[s],i.type===a.type&&i.value===a.value||(r=!1)}return r},e.issued=function(t){return t.isIssuer(e)},e.generateSubjectKeyIdentifier=function(){return i.getPublicKeyFingerprint(e.publicKey,{type:"RSAPublicKey"})},e.verifySubjectKeyIdentifier=function(){for(var t=a.subjectKeyIdentifier,r=0;r<e.extensions.length;++r){var o=e.extensions[r];if(o.id===t){var i=e.generateSubjectKeyIdentifier().getBytes();return n.util.hexToBytes(o.subjectKeyIdentifier)===i}}return!1},e},i.certificateFromAsn1=function(e,t){var r={},a=[];if(!o.validate(e,c,r,a)){var s=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw s.errors=a,s}if(o.derToOid(r.publicKeyOid)!==i.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var u=i.createCertificate();u.version=r.certVersion?r.certVersion.charCodeAt(0):0;var l=n.util.createBuffer(r.certSerialNumber);u.serialNumber=l.toHex(),u.signatureOid=n.asn1.derToOid(r.certSignatureOid),u.signatureParameters=d(u.signatureOid,r.certSignatureParams,!0),u.siginfo.algorithmOid=n.asn1.derToOid(r.certinfoSignatureOid),u.siginfo.parameters=d(u.siginfo.algorithmOid,r.certinfoSignatureParams,!1),u.signature=r.certSignature;var f=[];if(void 0!==r.certValidity1UTCTime&&f.push(o.utcTimeToDate(r.certValidity1UTCTime)),void 0!==r.certValidity2GeneralizedTime&&f.push(o.generalizedTimeToDate(r.certValidity2GeneralizedTime)),void 0!==r.certValidity3UTCTime&&f.push(o.utcTimeToDate(r.certValidity3UTCTime)),void 0!==r.certValidity4GeneralizedTime&&f.push(o.generalizedTimeToDate(r.certValidity4GeneralizedTime)),f.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(f.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(u.validity.notBefore=f[0],u.validity.notAfter=f[1],u.tbsCertificate=r.tbsCertificate,t){u.md=m({signatureOid:u.signatureOid,type:"certificate"});var p=o.toDer(u.tbsCertificate);u.md.update(p.getBytes())}var h=n.md.sha1.create(),g=o.toDer(r.certIssuer);h.update(g.getBytes()),u.issuer.getField=function(e){return y(u.issuer,e)},u.issuer.addField=function(e){b([e]),u.issuer.attributes.push(e)},u.issuer.attributes=i.RDNAttributesAsArray(r.certIssuer),r.certIssuerUniqueId&&(u.issuer.uniqueId=r.certIssuerUniqueId),u.issuer.hash=h.digest().toHex();var v=n.md.sha1.create(),A=o.toDer(r.certSubject);return v.update(A.getBytes()),u.subject.getField=function(e){return y(u.subject,e)},u.subject.addField=function(e){b([e]),u.subject.attributes.push(e)},u.subject.attributes=i.RDNAttributesAsArray(r.certSubject),r.certSubjectUniqueId&&(u.subject.uniqueId=r.certSubjectUniqueId),u.subject.hash=v.digest().toHex(),r.certExtensions?u.extensions=i.certificateExtensionsFromAsn1(r.certExtensions):u.extensions=[],u.publicKey=i.publicKeyFromAsn1(r.subjectPublicKeyInfo),u},i.certificateExtensionsFromAsn1=function(e){for(var t=[],r=0;r<e.value.length;++r)for(var n=e.value[r],o=0;o<n.value.length;++o)t.push(i.certificateExtensionFromAsn1(n.value[o]));return t},i.certificateExtensionFromAsn1=function(e){var t={};if(t.id=o.derToOid(e.value[0].value),t.critical=!1,e.value[1].type===o.Type.BOOLEAN?(t.critical=0!==e.value[1].value.charCodeAt(0),t.value=e.value[2].value):t.value=e.value[1].value,t.id in a)if(t.name=a[t.id],"keyUsage"===t.name){var r=0,i=0;(u=o.fromDer(t.value)).value.length>1&&(r=u.value.charCodeAt(1),i=u.value.length>2?u.value.charCodeAt(2):0),t.digitalSignature=128==(128&r),t.nonRepudiation=64==(64&r),t.keyEncipherment=32==(32&r),t.dataEncipherment=16==(16&r),t.keyAgreement=8==(8&r),t.keyCertSign=4==(4&r),t.cRLSign=2==(2&r),t.encipherOnly=1==(1&r),t.decipherOnly=128==(128&i)}else if("basicConstraints"===t.name){(u=o.fromDer(t.value)).value.length>0&&u.value[0].type===o.Type.BOOLEAN?t.cA=0!==u.value[0].value.charCodeAt(0):t.cA=!1;var s=null;u.value.length>0&&u.value[0].type===o.Type.INTEGER?s=u.value[0].value:u.value.length>1&&(s=u.value[1].value),null!==s&&(t.pathLenConstraint=o.derToInteger(s))}else if("extKeyUsage"===t.name)for(var u=o.fromDer(t.value),l=0;l<u.value.length;++l){var c=o.derToOid(u.value[l].value);c in a?t[a[c]]=!0:t[c]=!0}else if("nsCertType"===t.name)r=0,(u=o.fromDer(t.value)).value.length>1&&(r=u.value.charCodeAt(1)),t.client=128==(128&r),t.server=64==(64&r),t.email=32==(32&r),t.objsign=16==(16&r),t.reserved=8==(8&r),t.sslCA=4==(4&r),t.emailCA=2==(2&r),t.objCA=1==(1&r);else if("subjectAltName"===t.name||"issuerAltName"===t.name){var f;t.altNames=[],u=o.fromDer(t.value);for(var p=0;p<u.value.length;++p){var h={type:(f=u.value[p]).type,value:f.value};switch(t.altNames.push(h),f.type){case 1:case 2:case 6:break;case 7:h.ip=n.util.bytesToIP(f.value);break;case 8:h.oid=o.derToOid(f.value)}}}else"subjectKeyIdentifier"===t.name&&(u=o.fromDer(t.value),t.subjectKeyIdentifier=n.util.bytesToHex(u.value));return t},i.certificationRequestFromAsn1=function(e,t){var r={},a=[];if(!o.validate(e,h,r,a)){var s=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw s.errors=a,s}if(o.derToOid(r.publicKeyOid)!==i.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var u=i.createCertificationRequest();if(u.version=r.csrVersion?r.csrVersion.charCodeAt(0):0,u.signatureOid=n.asn1.derToOid(r.csrSignatureOid),u.signatureParameters=d(u.signatureOid,r.csrSignatureParams,!0),u.siginfo.algorithmOid=n.asn1.derToOid(r.csrSignatureOid),u.siginfo.parameters=d(u.siginfo.algorithmOid,r.csrSignatureParams,!1),u.signature=r.csrSignature,u.certificationRequestInfo=r.certificationRequestInfo,t){u.md=m({signatureOid:u.signatureOid,type:"certification request"});var l=o.toDer(u.certificationRequestInfo);u.md.update(l.getBytes())}var c=n.md.sha1.create();return u.subject.getField=function(e){return y(u.subject,e)},u.subject.addField=function(e){b([e]),u.subject.attributes.push(e)},u.subject.attributes=i.RDNAttributesAsArray(r.certificationRequestInfoSubject,c),u.subject.hash=c.digest().toHex(),u.publicKey=i.publicKeyFromAsn1(r.subjectPublicKeyInfo),u.getAttribute=function(e){return y(u,e)},u.addAttribute=function(e){b([e]),u.attributes.push(e)},u.attributes=i.CRIAttributesAsArray(r.certificationRequestInfoAttributes||[]),u},i.createCertificationRequest=function(){var e={version:0,signatureOid:null,signature:null,siginfo:{}};return e.siginfo.algorithmOid=null,e.subject={},e.subject.getField=function(t){return y(e.subject,t)},e.subject.addField=function(t){b([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.publicKey=null,e.attributes=[],e.getAttribute=function(t){return y(e,t)},e.addAttribute=function(t){b([t]),e.attributes.push(t)},e.md=null,e.setSubject=function(t){b(t),e.subject.attributes=t,e.subject.hash=null},e.setAttributes=function(t){b(t),e.attributes=t},e.sign=function(t,r){e.md=r||n.md.sha1.create();var s=a[e.md.algorithm+"WithRSAEncryption"];if(!s){var u=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw u.algorithm=e.md.algorithm,u}e.signatureOid=e.siginfo.algorithmOid=s,e.certificationRequestInfo=i.getCertificationRequestInfo(e);var l=o.toDer(e.certificationRequestInfo);e.md.update(l.getBytes()),e.signature=t.sign(e.md)},e.verify=function(){var t=!1,r=e.md;if(null===r){r=m({signatureOid:e.signatureOid,type:"certification request"});var n=e.certificationRequestInfo||i.getCertificationRequestInfo(e),a=o.toDer(n);r.update(a.getBytes())}return null!==r&&(t=g({certificate:e,md:r,signature:e.signature})),t},e};var S=new Date("1950-01-01T00:00:00Z"),C=new Date("2050-01-01T00:00:00Z");function E(e){return e>=S&&e<C?o.create(o.Class.UNIVERSAL,o.Type.UTCTIME,!1,o.dateToUtcTime(e)):o.create(o.Class.UNIVERSAL,o.Type.GENERALIZEDTIME,!1,o.dateToGeneralizedTime(e))}i.getTBSCertificate=function(e){var t=E(e.validity.notBefore),r=E(e.validity.notAfter),a=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(e.version).getBytes())]),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,n.util.hexToBytes(e.serialNumber)),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(e.siginfo.algorithmOid).getBytes()),w(e.siginfo.algorithmOid,e.siginfo.parameters)]),v(e.issuer),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[t,r]),v(e.subject),i.publicKeyToAsn1(e.publicKey)]);return e.issuer.uniqueId&&a.value.push(o.create(o.Class.CONTEXT_SPECIFIC,1,!0,[o.create(o.Class.UNIVERSAL,o.Type.BITSTRING,!1,String.fromCharCode(0)+e.issuer.uniqueId)])),e.subject.uniqueId&&a.value.push(o.create(o.Class.CONTEXT_SPECIFIC,2,!0,[o.create(o.Class.UNIVERSAL,o.Type.BITSTRING,!1,String.fromCharCode(0)+e.subject.uniqueId)])),e.extensions.length>0&&a.value.push(i.certificateExtensionsToAsn1(e.extensions)),a},i.getCertificationRequestInfo=function(e){return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(e.version).getBytes()),v(e.subject),i.publicKeyToAsn1(e.publicKey),function(e){var t=o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[]);if(0===e.attributes.length)return t;for(var r=e.attributes,i=0;i<r.length;++i){var a=r[i],s=a.value,u=o.Type.UTF8;"valueTagClass"in a&&(u=a.valueTagClass),u===o.Type.UTF8&&(s=n.util.encodeUtf8(s));var l=!1;"valueConstructed"in a&&(l=a.valueConstructed);var c=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(a.type).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SET,!0,[o.create(o.Class.UNIVERSAL,u,l,s)])]);t.value.push(c)}return t}(e)])},i.distinguishedNameToAsn1=function(e){return v(e)},i.certificateToAsn1=function(e){var t=e.tbsCertificate||i.getTBSCertificate(e);return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[t,o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(e.signatureOid).getBytes()),w(e.signatureOid,e.signatureParameters)]),o.create(o.Class.UNIVERSAL,o.Type.BITSTRING,!1,String.fromCharCode(0)+e.signature)])},i.certificateExtensionsToAsn1=function(e){var t=o.create(o.Class.CONTEXT_SPECIFIC,3,!0,[]),r=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]);t.value.push(r);for(var n=0;n<e.length;++n)r.value.push(i.certificateExtensionToAsn1(e[n]));return t},i.certificateExtensionToAsn1=function(e){var t=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[]);t.value.push(o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(e.id).getBytes())),e.critical&&t.value.push(o.create(o.Class.UNIVERSAL,o.Type.BOOLEAN,!1,String.fromCharCode(255)));var r=e.value;return"string"!=typeof e.value&&(r=o.toDer(r).getBytes()),t.value.push(o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,r)),t},i.certificationRequestToAsn1=function(e){var t=e.certificationRequestInfo||i.getCertificationRequestInfo(e);return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[t,o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(e.signatureOid).getBytes()),w(e.signatureOid,e.signatureParameters)]),o.create(o.Class.UNIVERSAL,o.Type.BITSTRING,!1,String.fromCharCode(0)+e.signature)])},i.createCaStore=function(e){var t={certs:{}};function r(e){return a(e),t.certs[e.hash]||null}function a(e){if(!e.hash){var t=n.md.sha1.create();e.attributes=i.RDNAttributesAsArray(v(e),t),e.hash=t.digest().toHex()}}if(t.getIssuer=function(e){return r(e.issuer)},t.addCertificate=function(e){if("string"==typeof e&&(e=n.pki.certificateFromPem(e)),a(e.subject),!t.hasCertificate(e))if(e.subject.hash in t.certs){var r=t.certs[e.subject.hash];n.util.isArray(r)||(r=[r]),r.push(e),t.certs[e.subject.hash]=r}else t.certs[e.subject.hash]=e},t.hasCertificate=function(e){"string"==typeof e&&(e=n.pki.certificateFromPem(e));var t=r(e.subject);if(!t)return!1;n.util.isArray(t)||(t=[t]);for(var a=o.toDer(i.certificateToAsn1(e)).getBytes(),s=0;s<t.length;++s)if(a===o.toDer(i.certificateToAsn1(t[s])).getBytes())return!0;return!1},t.listAllCertificates=function(){var e=[];for(var r in t.certs)if(t.certs.hasOwnProperty(r)){var o=t.certs[r];if(n.util.isArray(o))for(var i=0;i<o.length;++i)e.push(o[i]);else e.push(o)}return e},t.removeCertificate=function(e){var s;if("string"==typeof e&&(e=n.pki.certificateFromPem(e)),a(e.subject),!t.hasCertificate(e))return null;var u=r(e.subject);if(!n.util.isArray(u))return s=t.certs[e.subject.hash],delete t.certs[e.subject.hash],s;for(var l=o.toDer(i.certificateToAsn1(e)).getBytes(),c=0;c<u.length;++c)l===o.toDer(i.certificateToAsn1(u[c])).getBytes()&&(s=u[c],u.splice(c,1));return 0===u.length&&delete t.certs[e.subject.hash],s},e)for(var s=0;s<e.length;++s){var u=e[s];t.addCertificate(u)}return t},i.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"},i.verifyCertificateChain=function(e,t,r){"function"==typeof r&&(r={verify:r}),r=r||{};var o=(t=t.slice(0)).slice(0),a=r.validityCheckDate;void 0===a&&(a=new Date);var u=!0,l=null,c=0;do{var f=t.shift(),p=null,h=!1;if(a&&(a<f.validity.notBefore||a>f.validity.notAfter)&&(l={message:"Certificate is not valid yet or has expired.",error:i.certificateError.certificate_expired,notBefore:f.validity.notBefore,notAfter:f.validity.notAfter,now:a}),null===l){if(null===(p=t[0]||e.getIssuer(f))&&f.isIssuer(f)&&(h=!0,p=f),p){var y=p;n.util.isArray(y)||(y=[y]);for(var d=!1;!d&&y.length>0;){p=y.shift();try{d=p.verify(f)}catch(e){}}d||(l={message:"Certificate signature is invalid.",error:i.certificateError.bad_certificate})}null!==l||p&&!h||e.hasCertificate(f)||(l={message:"Certificate is not trusted.",error:i.certificateError.unknown_ca})}if(null===l&&p&&!f.isIssuer(p)&&(l={message:"Certificate issuer is invalid.",error:i.certificateError.bad_certificate}),null===l)for(var m={keyUsage:!0,basicConstraints:!0},g=0;null===l&&g<f.extensions.length;++g){var v=f.extensions[g];v.critical&&!(v.name in m)&&(l={message:"Certificate has an unsupported critical extension.",error:i.certificateError.unsupported_certificate})}if(null===l&&(!u||0===t.length&&(!p||h))){var b=f.getExtension("basicConstraints"),A=f.getExtension("keyUsage");null!==A&&(A.keyCertSign&&null!==b||(l={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:i.certificateError.bad_certificate})),null!==l||null===b||b.cA||(l={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:i.certificateError.bad_certificate}),null===l&&null!==A&&"pathLenConstraint"in b&&c-1>b.pathLenConstraint&&(l={message:"Certificate basicConstraints pathLenConstraint violated.",error:i.certificateError.bad_certificate})}var w=null===l||l.error,S=r.verify?r.verify(w,c,o):w;if(!0!==S)throw!0===w&&(l={message:"The application rejected the certificate.",error:i.certificateError.bad_certificate}),(S||0===S)&&("object"!=s(S)||n.util.isArray(S)?"string"==typeof S&&(l.error=S):(S.message&&(l.message=S.message),S.error&&(l.error=S.error))),l;l=null,u=!1,++c}while(t.length>0);return!0}},function(e,t,r){var n=r(0);r(2),r(1),(e.exports=n.pss=n.pss||{}).create=function(e){3===arguments.length&&(e={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var t,r=e.md,o=e.mgf,i=r.digestLength,a=e.salt||null;if("string"==typeof a&&(a=n.util.createBuffer(a)),"saltLength"in e)t=e.saltLength;else{if(null===a)throw new Error("Salt length not specified or specific salt not given.");t=a.length()}if(null!==a&&a.length()!==t)throw new Error("Given salt length does not match length of given salt.");var s=e.prng||n.random;return{encode:function(e,u){var l,c,f=u-1,p=Math.ceil(f/8),h=e.digest().getBytes();if(p<i+t+2)throw new Error("Message is too long to encrypt.");c=null===a?s.getBytesSync(t):a.bytes();var y=new n.util.ByteBuffer;y.fillWithByte(0,8),y.putBytes(h),y.putBytes(c),r.start(),r.update(y.getBytes());var d=r.digest().getBytes(),m=new n.util.ByteBuffer;m.fillWithByte(0,p-t-i-2),m.putByte(1),m.putBytes(c);var g=m.getBytes(),v=p-i-1,b=o.generate(d,v),A="";for(l=0;l<v;l++)A+=String.fromCharCode(g.charCodeAt(l)^b.charCodeAt(l));var w=65280>>8*p-f&255;return(A=String.fromCharCode(A.charCodeAt(0)&~w)+A.substr(1))+d+String.fromCharCode(188)},verify:function(e,a,s){var u,l=s-1,c=Math.ceil(l/8);if(a=a.substr(-c),c<i+t+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(188!==a.charCodeAt(c-1))throw new Error("Encoded message does not end in 0xBC.");var f=c-i-1,p=a.substr(0,f),h=a.substr(f,i),y=65280>>8*c-l&255;if(0!=(p.charCodeAt(0)&y))throw new Error("Bits beyond keysize not zero as expected.");var d=o.generate(h,f),m="";for(u=0;u<f;u++)m+=String.fromCharCode(p.charCodeAt(u)^d.charCodeAt(u));m=String.fromCharCode(m.charCodeAt(0)&~y)+m.substr(1);var g=c-i-t-2;for(u=0;u<g;u++)if(0!==m.charCodeAt(u))throw new Error("Leftmost octets not zero as expected");if(1!==m.charCodeAt(g))throw new Error("Inconsistent PSS signature, 0x01 marker not found");var v=m.substr(-t),b=new n.util.ByteBuffer;return b.fillWithByte(0,8),b.putBytes(e),b.putBytes(v),r.start(),r.update(b.getBytes()),h===r.digest().getBytes()}}}},function(e,t,r){var n=r(0);r(1),n.cipher=n.cipher||{};var o=e.exports=n.cipher.modes=n.cipher.modes||{};function i(e,t){if("string"==typeof e&&(e=n.util.createBuffer(e)),n.util.isArray(e)&&e.length>4){var r=e;e=n.util.createBuffer();for(var o=0;o<r.length;++o)e.putByte(r[o])}if(e.length()<t)throw new Error("Invalid IV length; got "+e.length()+" bytes and expected "+t+" bytes.");if(!n.util.isArray(e)){var i=[],a=t/4;for(o=0;o<a;++o)i.push(e.getInt32());e=i}return e}function a(e){e[e.length-1]=e[e.length-1]+1&4294967295}function s(e){return[e/4294967296|0,4294967295&e]}o.ecb=function(e){e=e||{},this.name="ECB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},o.ecb.prototype.start=function(e){},o.ecb.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();for(this.cipher.encrypt(this._inBlock,this._outBlock),n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])},o.ecb.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();for(this.cipher.decrypt(this._inBlock,this._outBlock),n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])},o.ecb.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0},o.ecb.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return!(n>this.blockSize<<2||(e.truncate(n),0))},o.cbc=function(e){e=e||{},this.name="CBC",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},o.cbc.prototype.start=function(e){if(null===e.iv){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else{if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=i(e.iv,this.blockSize),this._prev=this._iv.slice(0)}},o.cbc.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^e.getInt32();for(this.cipher.encrypt(this._inBlock,this._outBlock),n=0;n<this._ints;++n)t.putInt32(this._outBlock[n]);this._prev=this._outBlock},o.cbc.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();for(this.cipher.decrypt(this._inBlock,this._outBlock),n=0;n<this._ints;++n)t.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)},o.cbc.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0},o.cbc.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return!(n>this.blockSize<<2||(e.truncate(n),0))},o.cfb=function(e){e=e||{},this.name="CFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0},o.cfb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=i(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},o.cfb.prototype.encrypt=function(e,t,r){var n=e.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var o=0;o<this._ints;++o)this._inBlock[o]=e.getInt32()^this._outBlock[o],t.putInt32(this._inBlock[o]);else{var i=(this.blockSize-n)%this.blockSize;for(i>0&&(i=this.blockSize-i),this._partialOutput.clear(),o=0;o<this._ints;++o)this._partialBlock[o]=e.getInt32()^this._outBlock[o],this._partialOutput.putInt32(this._partialBlock[o]);if(i>0)e.read-=this.blockSize;else for(o=0;o<this._ints;++o)this._inBlock[o]=this._partialBlock[o];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!r)return t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},o.cfb.prototype.decrypt=function(e,t,r){var n=e.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var o=0;o<this._ints;++o)this._inBlock[o]=e.getInt32(),t.putInt32(this._inBlock[o]^this._outBlock[o]);else{var i=(this.blockSize-n)%this.blockSize;for(i>0&&(i=this.blockSize-i),this._partialOutput.clear(),o=0;o<this._ints;++o)this._partialBlock[o]=e.getInt32(),this._partialOutput.putInt32(this._partialBlock[o]^this._outBlock[o]);if(i>0)e.read-=this.blockSize;else for(o=0;o<this._ints;++o)this._inBlock[o]=this._partialBlock[o];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!r)return t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},o.ofb=function(e){e=e||{},this.name="OFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0},o.ofb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=i(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},o.ofb.prototype.encrypt=function(e,t,r){var n=e.length();if(0===e.length())return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var o=0;o<this._ints;++o)t.putInt32(e.getInt32()^this._outBlock[o]),this._inBlock[o]=this._outBlock[o];else{var i=(this.blockSize-n)%this.blockSize;for(i>0&&(i=this.blockSize-i),this._partialOutput.clear(),o=0;o<this._ints;++o)this._partialOutput.putInt32(e.getInt32()^this._outBlock[o]);if(i>0)e.read-=this.blockSize;else for(o=0;o<this._ints;++o)this._inBlock[o]=this._outBlock[o];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!r)return t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},o.ofb.prototype.decrypt=o.ofb.prototype.encrypt,o.ctr=function(e){e=e||{},this.name="CTR",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0},o.ctr.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=i(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},o.ctr.prototype.encrypt=function(e,t,r){var n=e.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var o=0;o<this._ints;++o)t.putInt32(e.getInt32()^this._outBlock[o]);else{var i=(this.blockSize-n)%this.blockSize;for(i>0&&(i=this.blockSize-i),this._partialOutput.clear(),o=0;o<this._ints;++o)this._partialOutput.putInt32(e.getInt32()^this._outBlock[o]);if(i>0&&(e.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!r)return t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}a(this._inBlock)},o.ctr.prototype.decrypt=o.ctr.prototype.encrypt,o.gcm=function(e){e=e||{},this.name="GCM",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0,this._R=3774873600},o.gcm.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");var t,r=n.util.createBuffer(e.iv);if(this._cipherLength=0,t="additionalData"in e?n.util.createBuffer(e.additionalData):n.util.createBuffer(),this._tagLength="tagLength"in e?e.tagLength:128,this._tag=null,e.decrypt&&(this._tag=n.util.createBuffer(e.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var o=r.length();if(12===o)this._j0=[r.getInt32(),r.getInt32(),r.getInt32(),1];else{for(this._j0=[0,0,0,0];r.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(s(8*o)))}this._inBlock=this._j0.slice(0),a(this._inBlock),this._partialBytes=0,t=n.util.createBuffer(t),this._aDataLength=s(8*t.length());var i=t.length()%this.blockSize;for(i&&t.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];t.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[t.getInt32(),t.getInt32(),t.getInt32(),t.getInt32()])},o.gcm.prototype.encrypt=function(e,t,r){var n=e.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize){for(var o=0;o<this._ints;++o)t.putInt32(this._outBlock[o]^=e.getInt32());this._cipherLength+=this.blockSize}else{var i=(this.blockSize-n)%this.blockSize;for(i>0&&(i=this.blockSize-i),this._partialOutput.clear(),o=0;o<this._ints;++o)this._partialOutput.putInt32(e.getInt32()^this._outBlock[o]);if(i<=0||r){if(r){var s=n%this.blockSize;this._cipherLength+=s,this._partialOutput.truncate(this.blockSize-s)}else this._cipherLength+=this.blockSize;for(o=0;o<this._ints;++o)this._outBlock[o]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!r)return e.read-=this.blockSize,t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),a(this._inBlock)},o.gcm.prototype.decrypt=function(e,t,r){var n=e.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),a(this._inBlock),this._hashBlock[0]=e.getInt32(),this._hashBlock[1]=e.getInt32(),this._hashBlock[2]=e.getInt32(),this._hashBlock[3]=e.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var o=0;o<this._ints;++o)t.putInt32(this._outBlock[o]^this._hashBlock[o]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize},o.gcm.prototype.afterFinish=function(e,t){var r=!0;t.decrypt&&t.overflow&&e.truncate(this.blockSize-t.overflow),this.tag=n.util.createBuffer();var o=this._aDataLength.concat(s(8*this._cipherLength));this._s=this.ghash(this._hashSubkey,this._s,o);var i=[];this.cipher.encrypt(this._j0,i);for(var a=0;a<this._ints;++a)this.tag.putInt32(this._s[a]^i[a]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),t.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r},o.gcm.prototype.multiply=function(e,t){for(var r=[0,0,0,0],n=t.slice(0),o=0;o<128;++o)e[o/32|0]&1<<31-o%32&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n);return r},o.gcm.prototype.pow=function(e,t){for(var r=1&e[3],n=3;n>0;--n)t[n]=e[n]>>>1|(1&e[n-1])<<31;t[0]=e[0]>>>1,r&&(t[0]^=this._R)},o.gcm.prototype.tableMultiply=function(e){for(var t=[0,0,0,0],r=0;r<32;++r){var n=e[r/8|0]>>>4*(7-r%8)&15,o=this._m[r][n];t[0]^=o[0],t[1]^=o[1],t[2]^=o[2],t[3]^=o[3]}return t},o.gcm.prototype.ghash=function(e,t,r){return t[0]^=r[0],t[1]^=r[1],t[2]^=r[2],t[3]^=r[3],this.tableMultiply(t)},o.gcm.prototype.generateHashTable=function(e,t){for(var r=8/t,n=4*r,o=16*r,i=new Array(o),a=0;a<o;++a){var s=[0,0,0,0],u=(n-1-a%n)*t;s[a/n|0]=1<<t-1<<u,i[a]=this.generateSubHashTable(this.multiply(s,e),t)}return i},o.gcm.prototype.generateSubHashTable=function(e,t){var r=1<<t,n=r>>>1,o=new Array(r);o[n]=e.slice(0);for(var i=n>>>1;i>0;)this.pow(o[2*i],o[i]=[]),i>>=1;for(i=2;i<n;){for(var a=1;a<i;++a){var s=o[i],u=o[a];o[i+a]=[s[0]^u[0],s[1]^u[1],s[2]^u[2],s[3]^u[3]]}i*=2}for(o[0]=[0,0,0,0],i=n+1;i<r;++i){var l=o[i^n];o[i]=[e[0]^l[0],e[1]^l[1],e[2]^l[2],e[3]^l[3]]}return o}},function(e,t,r){var n=r(0);r(3),r(8),r(14),r(7),r(21),r(2),r(9),r(1);var o=function(e,t,r,o){var i=n.util.createBuffer(),a=e.length>>1,s=a+(1&e.length),u=e.substr(0,s),l=e.substr(a,s),c=n.util.createBuffer(),f=n.hmac.create();r=t+r;var p=Math.ceil(o/16),h=Math.ceil(o/20);f.start("MD5",u);var y=n.util.createBuffer();c.putBytes(r);for(var d=0;d<p;++d)f.start(null,null),f.update(c.getBytes()),c.putBuffer(f.digest()),f.start(null,null),f.update(c.bytes()+r),y.putBuffer(f.digest());f.start("SHA1",l);var m=n.util.createBuffer();for(c.clear(),c.putBytes(r),d=0;d<h;++d)f.start(null,null),f.update(c.getBytes()),c.putBuffer(f.digest()),f.start(null,null),f.update(c.bytes()+r),m.putBuffer(f.digest());return i.putBytes(n.util.xorBytes(y.getBytes(),m.getBytes(),o)),i},i=function(e,t,r){var o=!1;try{var i=e.deflate(t.fragment.getBytes());t.fragment=n.util.createBuffer(i),t.length=i.length,o=!0}catch(e){}return o},a=function(e,t,r){var o=!1;try{var i=e.inflate(t.fragment.getBytes());t.fragment=n.util.createBuffer(i),t.length=i.length,o=!0}catch(e){}return o},u=function(e,t){var r=0;switch(t){case 1:r=e.getByte();break;case 2:r=e.getInt16();break;case 3:r=e.getInt24();break;case 4:r=e.getInt32()}return n.util.createBuffer(e.getBytes(r))},l=function(e,t,r){e.putInt(r.length(),t<<3),e.putBuffer(r)},c={Versions:{TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}}};c.SupportedVersions=[c.Versions.TLS_1_1,c.Versions.TLS_1_0],c.Version=c.SupportedVersions[0],c.MaxFragment=15360,c.ConnectionEnd={server:0,client:1},c.PRFAlgorithm={tls_prf_sha256:0},c.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2},c.CipherType={stream:0,block:1,aead:2},c.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4},c.CompressionMethod={none:0,deflate:1},c.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24},c.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20},c.Alert={},c.Alert.Level={warning:1,fatal:2},c.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100},c.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2},c.CipherSuites={},c.getCipherSuite=function(e){var t=null;for(var r in c.CipherSuites){var n=c.CipherSuites[r];if(n.id[0]===e.charCodeAt(0)&&n.id[1]===e.charCodeAt(1)){t=n;break}}return t},c.handleUnexpected=function(e,t){!e.open&&e.entity===c.ConnectionEnd.client||e.error(e,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.unexpected_message}})},c.handleHelloRequest=function(e,t,r){!e.handshaking&&e.handshakes>0&&(c.queue(e,c.createAlert(e,{level:c.Alert.Level.warning,description:c.Alert.Description.no_renegotiation})),c.flush(e)),e.process()},c.parseHelloMessage=function(e,t,r){var o=null,i=e.entity===c.ConnectionEnd.client;if(r<38)e.error(e,{message:i?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.illegal_parameter}});else{var a=t.fragment,s=a.length();if(o={version:{major:a.getByte(),minor:a.getByte()},random:n.util.createBuffer(a.getBytes(32)),session_id:u(a,1),extensions:[]},i?(o.cipher_suite=a.getBytes(2),o.compression_method=a.getByte()):(o.cipher_suites=u(a,2),o.compression_methods=u(a,1)),(s=r-(s-a.length()))>0){for(var l=u(a,2);l.length()>0;)o.extensions.push({type:[l.getByte(),l.getByte()],data:u(l,2)});if(!i)for(var f=0;f<o.extensions.length;++f){var p=o.extensions[f];if(0===p.type[0]&&0===p.type[1])for(var h=u(p.data,2);h.length()>0&&0===h.getByte();)e.session.extensions.server_name.serverNameList.push(u(h,2).getBytes())}}if(e.session.version&&(o.version.major!==e.session.version.major||o.version.minor!==e.session.version.minor))return e.error(e,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.protocol_version}});if(i)e.session.cipherSuite=c.getCipherSuite(o.cipher_suite);else for(var y=n.util.createBuffer(o.cipher_suites.bytes());y.length()>0&&(e.session.cipherSuite=c.getCipherSuite(y.getBytes(2)),null===e.session.cipherSuite););if(null===e.session.cipherSuite)return e.error(e,{message:"No cipher suites in common.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.handshake_failure},cipherSuite:n.util.bytesToHex(o.cipher_suite)});e.session.compressionMethod=i?o.compression_method:c.CompressionMethod.none}return o},c.createSecurityParameters=function(e,t){var r=e.entity===c.ConnectionEnd.client,n=t.random.bytes(),o=r?e.session.sp.client_random:n,i=r?n:c.createRandom().getBytes();e.session.sp={entity:e.entity,prf_algorithm:c.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:e.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:o,server_random:i}},c.handleServerHello=function(e,t,r){var n=c.parseHelloMessage(e,t,r);if(!e.fail){if(!(n.version.minor<=e.version.minor))return e.error(e,{message:"Incompatible TLS version.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.protocol_version}});e.version.minor=n.version.minor,e.session.version=e.version;var o=n.session_id.bytes();o.length>0&&o===e.session.id?(e.expect=d,e.session.resuming=!0,e.session.sp.server_random=n.random.bytes()):(e.expect=f,e.session.resuming=!1,c.createSecurityParameters(e,n)),e.session.id=o,e.process()}},c.handleClientHello=function(e,t,r){var o=c.parseHelloMessage(e,t,r);if(!e.fail){var i=o.session_id.bytes(),a=null;if(e.sessionCache&&(null===(a=e.sessionCache.getSession(i))?i="":(a.version.major!==o.version.major||a.version.minor>o.version.minor)&&(a=null,i="")),0===i.length&&(i=n.random.getBytes(32)),e.session.id=i,e.session.clientHelloVersion=o.version,e.session.sp={},a)e.version=e.session.version=a.version,e.session.sp=a.sp;else{for(var s,u=1;u<c.SupportedVersions.length&&!((s=c.SupportedVersions[u]).minor<=o.version.minor);++u);e.version={major:s.major,minor:s.minor},e.session.version=e.version}null!==a?(e.expect=S,e.session.resuming=!0,e.session.sp.client_random=o.random.bytes()):(e.expect=!1!==e.verifyClient?b:A,e.session.resuming=!1,c.createSecurityParameters(e,o)),e.open=!0,c.queue(e,c.createRecord(e,{type:c.ContentType.handshake,data:c.createServerHello(e)})),e.session.resuming?(c.queue(e,c.createRecord(e,{type:c.ContentType.change_cipher_spec,data:c.createChangeCipherSpec()})),e.state.pending=c.createConnectionState(e),e.state.current.write=e.state.pending.write,c.queue(e,c.createRecord(e,{type:c.ContentType.handshake,data:c.createFinished(e)}))):(c.queue(e,c.createRecord(e,{type:c.ContentType.handshake,data:c.createCertificate(e)})),e.fail||(c.queue(e,c.createRecord(e,{type:c.ContentType.handshake,data:c.createServerKeyExchange(e)})),!1!==e.verifyClient&&c.queue(e,c.createRecord(e,{type:c.ContentType.handshake,data:c.createCertificateRequest(e)})),c.queue(e,c.createRecord(e,{type:c.ContentType.handshake,data:c.createServerHelloDone(e)})))),c.flush(e),e.process()}},c.handleCertificate=function(e,t,r){if(r<3)return e.error(e,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.illegal_parameter}});var o,i,a=t.fragment,s={certificate_list:u(a,3)},l=[];try{for(;s.certificate_list.length()>0;)o=u(s.certificate_list,3),i=n.asn1.fromDer(o),o=n.pki.certificateFromAsn1(i,!0),l.push(o)}catch(t){return e.error(e,{message:"Could not parse certificate list.",cause:t,send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.bad_certificate}})}var f=e.entity===c.ConnectionEnd.client;!f&&!0!==e.verifyClient||0!==l.length?0===l.length?e.expect=f?p:A:(f?e.session.serverCertificate=l[0]:e.session.clientCertificate=l[0],c.verifyCertificateChain(e,l)&&(e.expect=f?p:A)):e.error(e,{message:f?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.illegal_parameter}}),e.process()},c.handleServerKeyExchange=function(e,t,r){if(r>0)return e.error(e,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.unsupported_certificate}});e.expect=h,e.process()},c.handleClientKeyExchange=function(e,t,r){if(r<48)return e.error(e,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.unsupported_certificate}});var o=t.fragment,i={enc_pre_master_secret:u(o,2).getBytes()},a=null;if(e.getPrivateKey)try{a=e.getPrivateKey(e,e.session.serverCertificate),a=n.pki.privateKeyFromPem(a)}catch(t){e.error(e,{message:"Could not get private key.",cause:t,send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.internal_error}})}if(null===a)return e.error(e,{message:"No private key set.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.internal_error}});try{var s=e.session.sp;s.pre_master_secret=a.decrypt(i.enc_pre_master_secret);var l=e.session.clientHelloVersion;if(l.major!==s.pre_master_secret.charCodeAt(0)||l.minor!==s.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch(e){s.pre_master_secret=n.random.getBytes(48)}e.expect=S,null!==e.session.clientCertificate&&(e.expect=w),e.process()},c.handleCertificateRequest=function(e,t,r){if(r<3)return e.error(e,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.illegal_parameter}});var n=t.fragment,o={certificate_types:u(n,1),certificate_authorities:u(n,2)};e.session.certificateRequest=o,e.expect=y,e.process()},c.handleCertificateVerify=function(e,t,r){if(r<2)return e.error(e,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.illegal_parameter}});var o=t.fragment;o.read-=4;var i=o.bytes();o.read+=4;var a={signature:u(o,2).getBytes()},s=n.util.createBuffer();s.putBuffer(e.session.md5.digest()),s.putBuffer(e.session.sha1.digest()),s=s.getBytes();try{if(!e.session.clientCertificate.publicKey.verify(s,a.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");e.session.md5.update(i),e.session.sha1.update(i)}catch(t){return e.error(e,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.handshake_failure}})}e.expect=S,e.process()},c.handleServerHelloDone=function(e,t,r){if(r>0)return e.error(e,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.record_overflow}});if(null===e.serverCertificate){var o={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.insufficient_security}},i=e.verify(e,o.alert.description,0,[]);if(!0!==i)return(i||0===i)&&("object"!=s(i)||n.util.isArray(i)?"number"==typeof i&&(o.alert.description=i):(i.message&&(o.message=i.message),i.alert&&(o.alert.description=i.alert))),e.error(e,o)}null!==e.session.certificateRequest&&(t=c.createRecord(e,{type:c.ContentType.handshake,data:c.createCertificate(e)}),c.queue(e,t)),t=c.createRecord(e,{type:c.ContentType.handshake,data:c.createClientKeyExchange(e)}),c.queue(e,t),e.expect=v;var a=function(e,t){null!==e.session.certificateRequest&&null!==e.session.clientCertificate&&c.queue(e,c.createRecord(e,{type:c.ContentType.handshake,data:c.createCertificateVerify(e,t)})),c.queue(e,c.createRecord(e,{type:c.ContentType.change_cipher_spec,data:c.createChangeCipherSpec()})),e.state.pending=c.createConnectionState(e),e.state.current.write=e.state.pending.write,c.queue(e,c.createRecord(e,{type:c.ContentType.handshake,data:c.createFinished(e)})),e.expect=d,c.flush(e),e.process()};if(null===e.session.certificateRequest||null===e.session.clientCertificate)return a(e,null);c.getClientSignature(e,a)},c.handleChangeCipherSpec=function(e,t){if(1!==t.fragment.getByte())return e.error(e,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.illegal_parameter}});var r=e.entity===c.ConnectionEnd.client;(e.session.resuming&&r||!e.session.resuming&&!r)&&(e.state.pending=c.createConnectionState(e)),e.state.current.read=e.state.pending.read,(!e.session.resuming&&r||e.session.resuming&&!r)&&(e.state.pending=null),e.expect=r?m:C,e.process()},c.handleFinished=function(e,t,r){var i=t.fragment;i.read-=4;var a=i.bytes();i.read+=4;var s=t.fragment.getBytes();(i=n.util.createBuffer()).putBuffer(e.session.md5.digest()),i.putBuffer(e.session.sha1.digest());var u=e.entity===c.ConnectionEnd.client,l=u?"server finished":"client finished",f=e.session.sp;if((i=o(f.master_secret,l,i.getBytes(),12)).getBytes()!==s)return e.error(e,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.decrypt_error}});e.session.md5.update(a),e.session.sha1.update(a),(e.session.resuming&&u||!e.session.resuming&&!u)&&(c.queue(e,c.createRecord(e,{type:c.ContentType.change_cipher_spec,data:c.createChangeCipherSpec()})),e.state.current.write=e.state.pending.write,e.state.pending=null,c.queue(e,c.createRecord(e,{type:c.ContentType.handshake,data:c.createFinished(e)}))),e.expect=u?g:E,e.handshaking=!1,++e.handshakes,e.peerCertificate=u?e.session.serverCertificate:e.session.clientCertificate,c.flush(e),e.isConnected=!0,e.connected(e),e.process()},c.handleAlert=function(e,t){var r,n=t.fragment,o={level:n.getByte(),description:n.getByte()};switch(o.description){case c.Alert.Description.close_notify:r="Connection closed.";break;case c.Alert.Description.unexpected_message:r="Unexpected message.";break;case c.Alert.Description.bad_record_mac:r="Bad record MAC.";break;case c.Alert.Description.decryption_failed:r="Decryption failed.";break;case c.Alert.Description.record_overflow:r="Record overflow.";break;case c.Alert.Description.decompression_failure:r="Decompression failed.";break;case c.Alert.Description.handshake_failure:r="Handshake failure.";break;case c.Alert.Description.bad_certificate:r="Bad certificate.";break;case c.Alert.Description.unsupported_certificate:r="Unsupported certificate.";break;case c.Alert.Description.certificate_revoked:r="Certificate revoked.";break;case c.Alert.Description.certificate_expired:r="Certificate expired.";break;case c.Alert.Description.certificate_unknown:r="Certificate unknown.";break;case c.Alert.Description.illegal_parameter:r="Illegal parameter.";break;case c.Alert.Description.unknown_ca:r="Unknown certificate authority.";break;case c.Alert.Description.access_denied:r="Access denied.";break;case c.Alert.Description.decode_error:r="Decode error.";break;case c.Alert.Description.decrypt_error:r="Decrypt error.";break;case c.Alert.Description.export_restriction:r="Export restriction.";break;case c.Alert.Description.protocol_version:r="Unsupported protocol version.";break;case c.Alert.Description.insufficient_security:r="Insufficient security.";break;case c.Alert.Description.internal_error:r="Internal error.";break;case c.Alert.Description.user_canceled:r="User canceled.";break;case c.Alert.Description.no_renegotiation:r="Renegotiation not supported.";break;default:r="Unknown error."}if(o.description===c.Alert.Description.close_notify)return e.close();e.error(e,{message:r,send:!1,origin:e.entity===c.ConnectionEnd.client?"server":"client",alert:o}),e.process()},c.handleHandshake=function(e,t){var r=t.fragment,o=r.getByte(),i=r.getInt24();if(i>r.length())return e.fragmented=t,t.fragment=n.util.createBuffer(),r.read-=4,e.process();e.fragmented=null,r.read-=4;var a=r.bytes(i+4);r.read+=4,o in F[e.entity][e.expect]?(e.entity!==c.ConnectionEnd.server||e.open||e.fail||(e.handshaking=!0,e.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:n.md.md5.create(),sha1:n.md.sha1.create()}),o!==c.HandshakeType.hello_request&&o!==c.HandshakeType.certificate_verify&&o!==c.HandshakeType.finished&&(e.session.md5.update(a),e.session.sha1.update(a)),F[e.entity][e.expect][o](e,t,i)):c.handleUnexpected(e,t)},c.handleApplicationData=function(e,t){e.data.putBuffer(t.fragment),e.dataReady(e),e.process()},c.handleHeartbeat=function(e,t){var r=t.fragment,o=r.getByte(),i=r.getInt16(),a=r.getBytes(i);if(o===c.HeartbeatMessageType.heartbeat_request){if(e.handshaking||i>a.length)return e.process();c.queue(e,c.createRecord(e,{type:c.ContentType.heartbeat,data:c.createHeartbeat(c.HeartbeatMessageType.heartbeat_response,a)})),c.flush(e)}else if(o===c.HeartbeatMessageType.heartbeat_response){if(a!==e.expectedHeartbeatPayload)return e.process();e.heartbeatReceived&&e.heartbeatReceived(e,n.util.createBuffer(a))}e.process()};var f=1,p=2,h=3,y=4,d=5,m=6,g=7,v=8,b=1,A=2,w=3,S=4,C=5,E=6,_=c.handleUnexpected,I=c.handleChangeCipherSpec,O=c.handleAlert,x=c.handleHandshake,P=c.handleApplicationData,k=c.handleHeartbeat,T=[];T[c.ConnectionEnd.client]=[[_,O,x,_,k],[_,O,x,_,k],[_,O,x,_,k],[_,O,x,_,k],[_,O,x,_,k],[I,O,_,_,k],[_,O,x,_,k],[_,O,x,P,k],[_,O,x,_,k]],T[c.ConnectionEnd.server]=[[_,O,x,_,k],[_,O,x,_,k],[_,O,x,_,k],[_,O,x,_,k],[I,O,_,_,k],[_,O,x,_,k],[_,O,x,P,k],[_,O,x,_,k]];var j=c.handleHelloRequest,M=c.handleServerHello,B=c.handleCertificate,N=c.handleServerKeyExchange,R=c.handleCertificateRequest,L=c.handleServerHelloDone,D=c.handleFinished,F=[];F[c.ConnectionEnd.client]=[[_,_,M,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],[j,_,_,_,_,_,_,_,_,_,_,B,N,R,L,_,_,_,_,_,_],[j,_,_,_,_,_,_,_,_,_,_,_,N,R,L,_,_,_,_,_,_],[j,_,_,_,_,_,_,_,_,_,_,_,_,R,L,_,_,_,_,_,_],[j,_,_,_,_,_,_,_,_,_,_,_,_,_,L,_,_,_,_,_,_],[j,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],[j,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,D],[j,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],[j,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_]];var Q=c.handleClientHello,G=c.handleClientKeyExchange,U=c.handleCertificateVerify;F[c.ConnectionEnd.server]=[[_,Q,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],[_,_,_,_,_,_,_,_,_,_,_,B,_,_,_,_,_,_,_,_,_],[_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,G,_,_,_,_],[_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,U,_,_,_,_,_],[_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],[_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,D],[_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_],[_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_]],c.generateKeys=function(e,t){var r=o,n=t.client_random+t.server_random;e.session.resuming||(t.master_secret=r(t.pre_master_secret,"master secret",n,48).bytes(),t.pre_master_secret=null),n=t.server_random+t.client_random;var i=2*t.mac_key_length+2*t.enc_key_length,a=e.version.major===c.Versions.TLS_1_0.major&&e.version.minor===c.Versions.TLS_1_0.minor;a&&(i+=2*t.fixed_iv_length);var s=r(t.master_secret,"key expansion",n,i),u={client_write_MAC_key:s.getBytes(t.mac_key_length),server_write_MAC_key:s.getBytes(t.mac_key_length),client_write_key:s.getBytes(t.enc_key_length),server_write_key:s.getBytes(t.enc_key_length)};return a&&(u.client_write_IV=s.getBytes(t.fixed_iv_length),u.server_write_IV=s.getBytes(t.fixed_iv_length)),u},c.createConnectionState=function(e){var t=e.entity===c.ConnectionEnd.client,r=function(){var e={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:function(e){return!0},compressionState:null,compressFunction:function(e){return!0},updateSequenceNumber:function(){4294967295===e.sequenceNumber[1]?(e.sequenceNumber[1]=0,++e.sequenceNumber[0]):++e.sequenceNumber[1]}};return e},n={read:r(),write:r()};if(n.read.update=function(e,t){return n.read.cipherFunction(t,n.read)?n.read.compressFunction(e,t,n.read)||e.error(e,{message:"Could not decompress record.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.decompression_failure}}):e.error(e,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.bad_record_mac}}),!e.fail},n.write.update=function(e,t){return n.write.compressFunction(e,t,n.write)?n.write.cipherFunction(t,n.write)||e.error(e,{message:"Could not encrypt record.",send:!1,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.internal_error}}):e.error(e,{message:"Could not compress record.",send:!1,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.internal_error}}),!e.fail},e.session){var o=e.session.sp;switch(e.session.cipherSuite.initSecurityParameters(o),o.keys=c.generateKeys(e,o),n.read.macKey=t?o.keys.server_write_MAC_key:o.keys.client_write_MAC_key,n.write.macKey=t?o.keys.client_write_MAC_key:o.keys.server_write_MAC_key,e.session.cipherSuite.initConnectionState(n,e,o),o.compression_algorithm){case c.CompressionMethod.none:break;case c.CompressionMethod.deflate:n.read.compressFunction=a,n.write.compressFunction=i;break;default:throw new Error("Unsupported compression algorithm.")}}return n},c.createRandom=function(){var e=new Date,t=+e+6e4*e.getTimezoneOffset(),r=n.util.createBuffer();return r.putInt32(t),r.putBytes(n.random.getBytes(28)),r},c.createRecord=function(e,t){return t.data?{type:t.type,version:{major:e.version.major,minor:e.version.minor},length:t.data.length(),fragment:t.data}:null},c.createAlert=function(e,t){var r=n.util.createBuffer();return r.putByte(t.level),r.putByte(t.description),c.createRecord(e,{type:c.ContentType.alert,data:r})},c.createClientHello=function(e){e.session.clientHelloVersion={major:e.version.major,minor:e.version.minor};for(var t=n.util.createBuffer(),r=0;r<e.cipherSuites.length;++r){var o=e.cipherSuites[r];t.putByte(o.id[0]),t.putByte(o.id[1])}var i=t.length(),a=n.util.createBuffer();a.putByte(c.CompressionMethod.none);var s=a.length(),u=n.util.createBuffer();if(e.virtualHost){var f=n.util.createBuffer();f.putByte(0),f.putByte(0);var p=n.util.createBuffer();p.putByte(0),l(p,2,n.util.createBuffer(e.virtualHost));var h=n.util.createBuffer();l(h,2,p),l(f,2,h),u.putBuffer(f)}var y=u.length();y>0&&(y+=2);var d=e.session.id,m=d.length+1+2+4+28+2+i+1+s+y,g=n.util.createBuffer();return g.putByte(c.HandshakeType.client_hello),g.putInt24(m),g.putByte(e.version.major),g.putByte(e.version.minor),g.putBytes(e.session.sp.client_random),l(g,1,n.util.createBuffer(d)),l(g,2,t),l(g,1,a),y>0&&l(g,2,u),g},c.createServerHello=function(e){var t=e.session.id,r=t.length+1+2+4+28+2+1,o=n.util.createBuffer();return o.putByte(c.HandshakeType.server_hello),o.putInt24(r),o.putByte(e.version.major),o.putByte(e.version.minor),o.putBytes(e.session.sp.server_random),l(o,1,n.util.createBuffer(t)),o.putByte(e.session.cipherSuite.id[0]),o.putByte(e.session.cipherSuite.id[1]),o.putByte(e.session.compressionMethod),o},c.createCertificate=function(e){var t,r=e.entity===c.ConnectionEnd.client,o=null;e.getCertificate&&(t=r?e.session.certificateRequest:e.session.extensions.server_name.serverNameList,o=e.getCertificate(e,t));var i=n.util.createBuffer();if(null!==o)try{n.util.isArray(o)||(o=[o]);for(var a=null,s=0;s<o.length;++s){var u=n.pem.decode(o[s])[0];if("CERTIFICATE"!==u.type&&"X509 CERTIFICATE"!==u.type&&"TRUSTED CERTIFICATE"!==u.type){var f=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw f.headerType=u.type,f}if(u.procType&&"ENCRYPTED"===u.procType.type)throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var p=n.util.createBuffer(u.body);null===a&&(a=n.asn1.fromDer(p.bytes(),!1));var h=n.util.createBuffer();l(h,3,p),i.putBuffer(h)}o=n.pki.certificateFromAsn1(a),r?e.session.clientCertificate=o:e.session.serverCertificate=o}catch(t){return e.error(e,{message:"Could not send certificate list.",cause:t,send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.bad_certificate}})}var y=3+i.length(),d=n.util.createBuffer();return d.putByte(c.HandshakeType.certificate),d.putInt24(y),l(d,3,i),d},c.createClientKeyExchange=function(e){var t=n.util.createBuffer();t.putByte(e.session.clientHelloVersion.major),t.putByte(e.session.clientHelloVersion.minor),t.putBytes(n.random.getBytes(46));var r=e.session.sp;r.pre_master_secret=t.getBytes();var o=(t=e.session.serverCertificate.publicKey.encrypt(r.pre_master_secret)).length+2,i=n.util.createBuffer();return i.putByte(c.HandshakeType.client_key_exchange),i.putInt24(o),i.putInt16(t.length),i.putBytes(t),i},c.createServerKeyExchange=function(e){return n.util.createBuffer()},c.getClientSignature=function(e,t){var r=n.util.createBuffer();r.putBuffer(e.session.md5.digest()),r.putBuffer(e.session.sha1.digest()),r=r.getBytes(),e.getSignature=e.getSignature||function(e,t,r){var o=null;if(e.getPrivateKey)try{o=e.getPrivateKey(e,e.session.clientCertificate),o=n.pki.privateKeyFromPem(o)}catch(t){e.error(e,{message:"Could not get private key.",cause:t,send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.internal_error}})}null===o?e.error(e,{message:"No private key set.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.internal_error}}):t=o.sign(t,null),r(e,t)},e.getSignature(e,r,t)},c.createCertificateVerify=function(e,t){var r=t.length+2,o=n.util.createBuffer();return o.putByte(c.HandshakeType.certificate_verify),o.putInt24(r),o.putInt16(t.length),o.putBytes(t),o},c.createCertificateRequest=function(e){var t=n.util.createBuffer();t.putByte(1);var r=n.util.createBuffer();for(var o in e.caStore.certs){var i=e.caStore.certs[o],a=n.pki.distinguishedNameToAsn1(i.subject),s=n.asn1.toDer(a);r.putInt16(s.length()),r.putBuffer(s)}var u=1+t.length()+2+r.length(),f=n.util.createBuffer();return f.putByte(c.HandshakeType.certificate_request),f.putInt24(u),l(f,1,t),l(f,2,r),f},c.createServerHelloDone=function(e){var t=n.util.createBuffer();return t.putByte(c.HandshakeType.server_hello_done),t.putInt24(0),t},c.createChangeCipherSpec=function(){var e=n.util.createBuffer();return e.putByte(1),e},c.createFinished=function(e){var t=n.util.createBuffer();t.putBuffer(e.session.md5.digest()),t.putBuffer(e.session.sha1.digest());var r=e.entity===c.ConnectionEnd.client,i=e.session.sp,a=r?"client finished":"server finished";t=o(i.master_secret,a,t.getBytes(),12);var s=n.util.createBuffer();return s.putByte(c.HandshakeType.finished),s.putInt24(t.length()),s.putBuffer(t),s},c.createHeartbeat=function(e,t,r){void 0===r&&(r=t.length);var o=n.util.createBuffer();o.putByte(e),o.putInt16(r),o.putBytes(t);var i=o.length(),a=Math.max(16,i-r-3);return o.putBytes(n.random.getBytes(a)),o},c.queue=function(e,t){if(t&&(0!==t.fragment.length()||t.type!==c.ContentType.handshake&&t.type!==c.ContentType.alert&&t.type!==c.ContentType.change_cipher_spec)){if(t.type===c.ContentType.handshake){var r=t.fragment.bytes();e.session.md5.update(r),e.session.sha1.update(r),r=null}var o;if(t.fragment.length()<=c.MaxFragment)o=[t];else{o=[];for(var i=t.fragment.bytes();i.length>c.MaxFragment;)o.push(c.createRecord(e,{type:t.type,data:n.util.createBuffer(i.slice(0,c.MaxFragment))})),i=i.slice(c.MaxFragment);i.length>0&&o.push(c.createRecord(e,{type:t.type,data:n.util.createBuffer(i)}))}for(var a=0;a<o.length&&!e.fail;++a){var s=o[a];e.state.current.write.update(e,s)&&e.records.push(s)}}},c.flush=function(e){for(var t=0;t<e.records.length;++t){var r=e.records[t];e.tlsData.putByte(r.type),e.tlsData.putByte(r.version.major),e.tlsData.putByte(r.version.minor),e.tlsData.putInt16(r.fragment.length()),e.tlsData.putBuffer(e.records[t].fragment)}return e.records=[],e.tlsDataReady(e)};var z=function(e){switch(e){case!0:return!0;case n.pki.certificateError.bad_certificate:return c.Alert.Description.bad_certificate;case n.pki.certificateError.unsupported_certificate:return c.Alert.Description.unsupported_certificate;case n.pki.certificateError.certificate_revoked:return c.Alert.Description.certificate_revoked;case n.pki.certificateError.certificate_expired:return c.Alert.Description.certificate_expired;case n.pki.certificateError.certificate_unknown:return c.Alert.Description.certificate_unknown;case n.pki.certificateError.unknown_ca:return c.Alert.Description.unknown_ca;default:return c.Alert.Description.bad_certificate}};for(var H in c.verifyCertificateChain=function(e,t){try{var r={};for(var o in e.verifyOptions)r[o]=e.verifyOptions[o];r.verify=function(t,r,o){z(t);var i=e.verify(e,t,r,o);if(!0!==i){if("object"==s(i)&&!n.util.isArray(i)){var a=new Error("The application rejected the certificate.");throw a.send=!0,a.alert={level:c.Alert.Level.fatal,description:c.Alert.Description.bad_certificate},i.message&&(a.message=i.message),i.alert&&(a.alert.description=i.alert),a}i!==t&&(i=function(e){switch(i){case!0:return!0;case c.Alert.Description.bad_certificate:return n.pki.certificateError.bad_certificate;case c.Alert.Description.unsupported_certificate:return n.pki.certificateError.unsupported_certificate;case c.Alert.Description.certificate_revoked:return n.pki.certificateError.certificate_revoked;case c.Alert.Description.certificate_expired:return n.pki.certificateError.certificate_expired;case c.Alert.Description.certificate_unknown:return n.pki.certificateError.certificate_unknown;case c.Alert.Description.unknown_ca:return n.pki.certificateError.unknown_ca;default:return n.pki.certificateError.bad_certificate}}())}return i},n.pki.verifyCertificateChain(e.caStore,t,r)}catch(t){var i=t;("object"!=s(i)||n.util.isArray(i))&&(i={send:!0,alert:{level:c.Alert.Level.fatal,description:z(t)}}),"send"in i||(i.send=!0),"alert"in i||(i.alert={level:c.Alert.Level.fatal,description:z(i.error)}),e.error(e,i)}return!e.fail},c.createSessionCache=function(e,t){var r=null;if(e&&e.getSession&&e.setSession&&e.order)r=e;else{for(var o in(r={}).cache=e||{},r.capacity=Math.max(t||100,1),r.order=[],e)r.order.length<=t?r.order.push(o):delete e[o];r.getSession=function(e){var t=null,o=null;if(e?o=n.util.bytesToHex(e):r.order.length>0&&(o=r.order[0]),null!==o&&o in r.cache)for(var i in t=r.cache[o],delete r.cache[o],r.order)if(r.order[i]===o){r.order.splice(i,1);break}return t},r.setSession=function(e,t){if(r.order.length===r.capacity){var o=r.order.shift();delete r.cache[o]}o=n.util.bytesToHex(e),r.order.push(o),r.cache[o]=t}}return r},c.createConnection=function(e){var t;t=e.caStore?n.util.isArray(e.caStore)?n.pki.createCaStore(e.caStore):e.caStore:n.pki.createCaStore();var r=e.cipherSuites||null;if(null===r)for(var o in r=[],c.CipherSuites)r.push(c.CipherSuites[o]);var i=e.server?c.ConnectionEnd.server:c.ConnectionEnd.client,a=e.sessionCache?c.createSessionCache(e.sessionCache):null,s={version:{major:c.Version.major,minor:c.Version.minor},entity:i,sessionId:e.sessionId,caStore:t,sessionCache:a,cipherSuites:r,connected:e.connected,virtualHost:e.virtualHost||null,verifyClient:e.verifyClient||!1,verify:e.verify||function(e,t,r,n){return t},verifyOptions:e.verifyOptions||{},getCertificate:e.getCertificate||null,getPrivateKey:e.getPrivateKey||null,getSignature:e.getSignature||null,input:n.util.createBuffer(),tlsData:n.util.createBuffer(),data:n.util.createBuffer(),tlsDataReady:e.tlsDataReady,dataReady:e.dataReady,heartbeatReceived:e.heartbeatReceived,closed:e.closed,error:function(t,r){r.origin=r.origin||(t.entity===c.ConnectionEnd.client?"client":"server"),r.send&&(c.queue(t,c.createAlert(t,r.alert)),c.flush(t));var n=!1!==r.fatal;n&&(t.fail=!0),e.error(t,r),n&&t.close(!1)},deflate:e.deflate||null,inflate:e.inflate||null,reset:function(e){s.version={major:c.Version.major,minor:c.Version.minor},s.record=null,s.session=null,s.peerCertificate=null,s.state={pending:null,current:null},s.expect=(s.entity,c.ConnectionEnd.client,0),s.fragmented=null,s.records=[],s.open=!1,s.handshakes=0,s.handshaking=!1,s.isConnected=!1,s.fail=!(e||void 0===e),s.input.clear(),s.tlsData.clear(),s.data.clear(),s.state.current=c.createConnectionState(s)}};return s.reset(),s.handshake=function(e){if(s.entity!==c.ConnectionEnd.client)s.error(s,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(s.handshaking)s.error(s,{message:"Handshake already in progress.",fatal:!1});else{s.fail&&!s.open&&0===s.handshakes&&(s.fail=!1),s.handshaking=!0;var t=null;(e=e||"").length>0&&(s.sessionCache&&(t=s.sessionCache.getSession(e)),null===t&&(e="")),0===e.length&&s.sessionCache&&null!==(t=s.sessionCache.getSession())&&(e=t.id),s.session={id:e,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:n.md.md5.create(),sha1:n.md.sha1.create()},t&&(s.version=t.version,s.session.sp=t.sp),s.session.sp.client_random=c.createRandom().getBytes(),s.open=!0,c.queue(s,c.createRecord(s,{type:c.ContentType.handshake,data:c.createClientHello(s)})),c.flush(s)}},s.process=function(e){var t=0;return e&&s.input.putBytes(e),s.fail||(null!==s.record&&s.record.ready&&s.record.fragment.isEmpty()&&(s.record=null),null===s.record&&(t=function(e){var t=0,r=e.input,o=r.length();if(o<5)t=5-o;else{e.record={type:r.getByte(),version:{major:r.getByte(),minor:r.getByte()},length:r.getInt16(),fragment:n.util.createBuffer(),ready:!1};var i=e.record.version.major===e.version.major;i&&e.session&&e.session.version&&(i=e.record.version.minor===e.version.minor),i||e.error(e,{message:"Incompatible TLS version.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.protocol_version}})}return t}(s)),s.fail||null===s.record||s.record.ready||(t=function(e){var t=0,r=e.input,n=r.length();return n<e.record.length?t=e.record.length-n:(e.record.fragment.putBytes(r.getBytes(e.record.length)),r.compact(),e.state.current.read.update(e,e.record)&&(null!==e.fragmented&&(e.fragmented.type===e.record.type?(e.fragmented.fragment.putBuffer(e.record.fragment),e.record=e.fragmented):e.error(e,{message:"Invalid fragmented record.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.unexpected_message}})),e.record.ready=!0)),t}(s)),!s.fail&&null!==s.record&&s.record.ready&&function(e,t){var r=t.type-c.ContentType.change_cipher_spec,n=T[e.entity][e.expect];r in n?n[r](e,t):c.handleUnexpected(e,t)}(s,s.record)),t},s.prepare=function(e){return c.queue(s,c.createRecord(s,{type:c.ContentType.application_data,data:n.util.createBuffer(e)})),c.flush(s)},s.prepareHeartbeatRequest=function(e,t){return e instanceof n.util.ByteBuffer&&(e=e.bytes()),void 0===t&&(t=e.length),s.expectedHeartbeatPayload=e,c.queue(s,c.createRecord(s,{type:c.ContentType.heartbeat,data:c.createHeartbeat(c.HeartbeatMessageType.heartbeat_request,e,t)})),c.flush(s)},s.close=function(e){if(!s.fail&&s.sessionCache&&s.session){var t={id:s.session.id,version:s.session.version,sp:s.session.sp};t.sp.keys=null,s.sessionCache.setSession(t.id,t)}s.open&&(s.open=!1,s.input.clear(),(s.isConnected||s.handshaking)&&(s.isConnected=s.handshaking=!1,c.queue(s,c.createAlert(s,{level:c.Alert.Level.warning,description:c.Alert.Description.close_notify})),c.flush(s)),s.closed(s)),s.reset(e)},s},e.exports=n.tls=n.tls||{},c)"function"!=typeof c[H]&&(n.tls[H]=c[H]);n.tls.prf_tls1=o,n.tls.hmac_sha1=function(e,t,r){var o=n.hmac.create();o.start("SHA1",e);var i=n.util.createBuffer();return i.putInt32(t[0]),i.putInt32(t[1]),i.putByte(r.type),i.putByte(r.version.major),i.putByte(r.version.minor),i.putInt16(r.length),i.putBytes(r.fragment.bytes()),o.update(i.getBytes()),o.digest().getBytes()},n.tls.createSessionCache=c.createSessionCache,n.tls.createConnection=c.createConnection},function(e,t,r){var n=r(0);r(3),r(6),r(22),r(7),r(15),r(28),r(18),r(11),r(1),r(17);var o=n.asn1,i=e.exports=n.pki=n.pki||{};i.pemToDer=function(e){var t=n.pem.decode(e)[0];if(t.procType&&"ENCRYPTED"===t.procType.type)throw new Error("Could not convert PEM to DER; PEM is encrypted.");return n.util.createBuffer(t.body)},i.privateKeyFromPem=function(e){var t=n.pem.decode(e)[0];if("PRIVATE KEY"!==t.type&&"RSA PRIVATE KEY"!==t.type){var r=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw r.headerType=t.type,r}if(t.procType&&"ENCRYPTED"===t.procType.type)throw new Error("Could not convert private key from PEM; PEM is encrypted.");var a=o.fromDer(t.body);return i.privateKeyFromAsn1(a)},i.privateKeyToPem=function(e,t){var r={type:"RSA PRIVATE KEY",body:o.toDer(i.privateKeyToAsn1(e)).getBytes()};return n.pem.encode(r,{maxline:t})},i.privateKeyInfoToPem=function(e,t){var r={type:"PRIVATE KEY",body:o.toDer(e).getBytes()};return n.pem.encode(r,{maxline:t})}},function(e,t,r){var n=r(0);if(r(5),r(3),r(10),r(4),r(6),r(15),r(7),r(2),r(25),r(11),r(1),void 0===o)var o=n.jsbn.BigInteger;var i=n.asn1,a=n.pki=n.pki||{};e.exports=a.pbe=n.pbe=n.pbe||{};var s=a.oids,u={name:"EncryptedPrivateKeyInfo",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},l={name:"PBES2Algorithms",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:i.Class.UNIVERSAL,type:i.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},c={name:"pkcs-12PbeParams",tagClass:i.Class.UNIVERSAL,type:i.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:i.Class.UNIVERSAL,type:i.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:i.Class.UNIVERSAL,type:i.Type.INTEGER,constructed:!1,capture:"iterations"}]};function f(e,t){return e.start().update(t).digest().getBytes()}function p(e){var t;if(e){if(!(t=a.oids[i.derToOid(e)])){var r=new Error("Unsupported PRF OID.");throw r.oid=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}}else t="hmacWithSHA1";return h(t)}function h(e){var t=n.md;switch(e){case"hmacWithSHA224":t=n.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":e=e.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!(t&&e in t))throw new Error("Unknown hash algorithm: "+e);return t[e].create()}a.encryptPrivateKeyInfo=function(e,t,r){(r=r||{}).saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var o,u,l,c=n.random.getBytesSync(r.saltSize),f=r.count,p=i.integerToDer(f);if(0===r.algorithm.indexOf("aes")||"des"===r.algorithm){var y,d,m;switch(r.algorithm){case"aes128":o=16,y=16,d=s["aes128-CBC"],m=n.aes.createEncryptionCipher;break;case"aes192":o=24,y=16,d=s["aes192-CBC"],m=n.aes.createEncryptionCipher;break;case"aes256":o=32,y=16,d=s["aes256-CBC"],m=n.aes.createEncryptionCipher;break;case"des":o=8,y=8,d=s.desCBC,m=n.des.createEncryptionCipher;break;default:throw(S=new Error("Cannot encrypt private key. Unknown encryption algorithm.")).algorithm=r.algorithm,S}var g="hmacWith"+r.prfAlgorithm.toUpperCase(),v=h(g),b=n.pkcs5.pbkdf2(t,c,f,o,v),A=n.random.getBytesSync(y);(C=m(b)).start(A),C.update(i.toDer(e)),C.finish(),l=C.output.getBytes();var w=function(e,t,r,o){var s=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,e),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,t.getBytes())]);return"hmacWithSHA1"!==o&&s.value.push(i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,n.util.hexToBytes(r.toString(16))),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(a.oids[o]).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.NULL,!1,"")])),s}(c,p,o,g);u=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(s.pkcs5PBES2).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(s.pkcs5PBKDF2).getBytes()),w]),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(d).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,A)])])])}else{var S;if("3des"!==r.algorithm)throw(S=new Error("Cannot encrypt private key. Unknown encryption algorithm.")).algorithm=r.algorithm,S;o=24;var C,E=new n.util.ByteBuffer(c);b=a.pbe.generatePkcs12Key(t,E,1,f,o),A=a.pbe.generatePkcs12Key(t,E,2,f,o),(C=n.des.createEncryptionCipher(b)).start(A),C.update(i.toDer(e)),C.finish(),l=C.output.getBytes(),u=i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OID,!1,i.oidToDer(s["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,c),i.create(i.Class.UNIVERSAL,i.Type.INTEGER,!1,p.getBytes())])])}return i.create(i.Class.UNIVERSAL,i.Type.SEQUENCE,!0,[u,i.create(i.Class.UNIVERSAL,i.Type.OCTETSTRING,!1,l)])},a.decryptPrivateKeyInfo=function(e,t){var r=null,o={},s=[];if(!i.validate(e,u,o,s)){var l=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw l.errors=s,l}var c=i.derToOid(o.encryptionOid),f=a.pbe.getCipher(c,o.encryptionParams,t),p=n.util.createBuffer(o.encryptedData);return f.update(p),f.finish()&&(r=i.fromDer(f.output)),r},a.encryptedPrivateKeyToPem=function(e,t){var r={type:"ENCRYPTED PRIVATE KEY",body:i.toDer(e).getBytes()};return n.pem.encode(r,{maxline:t})},a.encryptedPrivateKeyFromPem=function(e){var t=n.pem.decode(e)[0];if("ENCRYPTED PRIVATE KEY"!==t.type){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=t.type,r}if(t.procType&&"ENCRYPTED"===t.procType.type)throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return i.fromDer(t.body)},a.encryptRsaPrivateKey=function(e,t,r){if(!(r=r||{}).legacy){var o=a.wrapRsaPrivateKey(a.privateKeyToAsn1(e));return o=a.encryptPrivateKeyInfo(o,t,r),a.encryptedPrivateKeyToPem(o)}var s,u,l,c;switch(r.algorithm){case"aes128":s="AES-128-CBC",l=16,u=n.random.getBytesSync(16),c=n.aes.createEncryptionCipher;break;case"aes192":s="AES-192-CBC",l=24,u=n.random.getBytesSync(16),c=n.aes.createEncryptionCipher;break;case"aes256":s="AES-256-CBC",l=32,u=n.random.getBytesSync(16),c=n.aes.createEncryptionCipher;break;case"3des":s="DES-EDE3-CBC",l=24,u=n.random.getBytesSync(8),c=n.des.createEncryptionCipher;break;case"des":s="DES-CBC",l=8,u=n.random.getBytesSync(8),c=n.des.createEncryptionCipher;break;default:var f=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw f.algorithm=r.algorithm,f}var p=c(n.pbe.opensslDeriveBytes(t,u.substr(0,8),l));p.start(u),p.update(i.toDer(a.privateKeyToAsn1(e))),p.finish();var h={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:s,parameters:n.util.bytesToHex(u).toUpperCase()},body:p.output.getBytes()};return n.pem.encode(h)},a.decryptRsaPrivateKey=function(e,t){var r=null,o=n.pem.decode(e)[0];if("ENCRYPTED PRIVATE KEY"!==o.type&&"PRIVATE KEY"!==o.type&&"RSA PRIVATE KEY"!==o.type)throw(l=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".')).headerType=l,l;if(o.procType&&"ENCRYPTED"===o.procType.type){var s,u;switch(o.dekInfo.algorithm){case"DES-CBC":s=8,u=n.des.createDecryptionCipher;break;case"DES-EDE3-CBC":s=24,u=n.des.createDecryptionCipher;break;case"AES-128-CBC":s=16,u=n.aes.createDecryptionCipher;break;case"AES-192-CBC":s=24,u=n.aes.createDecryptionCipher;break;case"AES-256-CBC":s=32,u=n.aes.createDecryptionCipher;break;case"RC2-40-CBC":s=5,u=function(e){return n.rc2.createDecryptionCipher(e,40)};break;case"RC2-64-CBC":s=8,u=function(e){return n.rc2.createDecryptionCipher(e,64)};break;case"RC2-128-CBC":s=16,u=function(e){return n.rc2.createDecryptionCipher(e,128)};break;default:var l;throw(l=new Error('Could not decrypt private key; unsupported encryption algorithm "'+o.dekInfo.algorithm+'".')).algorithm=o.dekInfo.algorithm,l}var c=n.util.hexToBytes(o.dekInfo.parameters),f=u(n.pbe.opensslDeriveBytes(t,c.substr(0,8),s));if(f.start(c),f.update(n.util.createBuffer(o.body)),!f.finish())return r;r=f.output.getBytes()}else r=o.body;return null!==(r="ENCRYPTED PRIVATE KEY"===o.type?a.decryptPrivateKeyInfo(i.fromDer(r),t):i.fromDer(r))&&(r=a.privateKeyFromAsn1(r)),r},a.pbe.generatePkcs12Key=function(e,t,r,o,i,a){var s,u;if(null==a){if(!("sha1"in n.md))throw new Error('"sha1" hash algorithm unavailable.');a=n.md.sha1.create()}var l=a.digestLength,c=a.blockLength,f=new n.util.ByteBuffer,p=new n.util.ByteBuffer;if(null!=e){for(u=0;u<e.length;u++)p.putInt16(e.charCodeAt(u));p.putInt16(0)}var h=p.length(),y=t.length(),d=new n.util.ByteBuffer;d.fillWithByte(r,c);var m=c*Math.ceil(y/c),g=new n.util.ByteBuffer;for(u=0;u<m;u++)g.putByte(t.at(u%y));var v=c*Math.ceil(h/c),b=new n.util.ByteBuffer;for(u=0;u<v;u++)b.putByte(p.at(u%h));var A=g;A.putBuffer(b);for(var w=Math.ceil(i/l),S=1;S<=w;S++){var C=new n.util.ByteBuffer;C.putBytes(d.bytes()),C.putBytes(A.bytes());for(var E=0;E<o;E++)a.start(),a.update(C.getBytes()),C=a.digest();var _=new n.util.ByteBuffer;for(u=0;u<c;u++)_.putByte(C.at(u%l));var I=Math.ceil(y/c)+Math.ceil(h/c),O=new n.util.ByteBuffer;for(s=0;s<I;s++){var x=new n.util.ByteBuffer(A.getBytes(c)),P=511;for(u=_.length()-1;u>=0;u--)P>>=8,P+=_.at(u)+x.at(u),x.setAt(u,255&P);O.putBuffer(x)}A=O,f.putBuffer(C)}return f.truncate(f.length()-i),f},a.pbe.getCipher=function(e,t,r){switch(e){case a.oids.pkcs5PBES2:return a.pbe.getCipherForPBES2(e,t,r);case a.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case a.oids["pbewithSHAAnd40BitRC2-CBC"]:return a.pbe.getCipherForPKCS12PBE(e,t,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=e,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}},a.pbe.getCipherForPBES2=function(e,t,r){var o,s={},u=[];if(!i.validate(t,l,s,u))throw(o=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.")).errors=u,o;if((e=i.derToOid(s.kdfOid))!==a.oids.pkcs5PBKDF2)throw(o=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.")).oid=e,o.supportedOids=["pkcs5PBKDF2"],o;if((e=i.derToOid(s.encOid))!==a.oids["aes128-CBC"]&&e!==a.oids["aes192-CBC"]&&e!==a.oids["aes256-CBC"]&&e!==a.oids["des-EDE3-CBC"]&&e!==a.oids.desCBC)throw(o=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.")).oid=e,o.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],o;var c,f,h=s.kdfSalt,y=n.util.createBuffer(s.kdfIterationCount);switch(y=y.getInt(y.length()<<3),a.oids[e]){case"aes128-CBC":c=16,f=n.aes.createDecryptionCipher;break;case"aes192-CBC":c=24,f=n.aes.createDecryptionCipher;break;case"aes256-CBC":c=32,f=n.aes.createDecryptionCipher;break;case"des-EDE3-CBC":c=24,f=n.des.createDecryptionCipher;break;case"desCBC":c=8,f=n.des.createDecryptionCipher}var d=p(s.prfOid),m=n.pkcs5.pbkdf2(r,h,y,c,d),g=s.encIv,v=f(m);return v.start(g),v},a.pbe.getCipherForPKCS12PBE=function(e,t,r){var o={},s=[];if(!i.validate(t,c,o,s))throw(d=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.")).errors=s,d;var u,l,f,h=n.util.createBuffer(o.salt),y=n.util.createBuffer(o.iterations);switch(y=y.getInt(y.length()<<3),e){case a.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:u=24,l=8,f=n.des.startDecrypting;break;case a.oids["pbewithSHAAnd40BitRC2-CBC"]:u=5,l=8,f=function(e,t){var r=n.rc2.createDecryptionCipher(e,40);return r.start(t,null),r};break;default:var d;throw(d=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.")).oid=e,d}var m=p(o.prfOid),g=a.pbe.generatePkcs12Key(r,h,1,y,u,m);return m.start(),f(g,a.pbe.generatePkcs12Key(r,h,2,y,l,m))},a.pbe.opensslDeriveBytes=function(e,t,r,o){if(null==o){if(!("md5"in n.md))throw new Error('"md5" hash algorithm unavailable.');o=n.md.md5.create()}null===t&&(t="");for(var i=[f(o,e+t)],a=16,s=1;a<r;++s,a+=16)i.push(f(o,i[s-1]+e+t));return i.join("").substr(0,r)}},function(e,t,r){var n=r(0);r(4),r(1);var o=e.exports=n.sha256=n.sha256||{};n.md.sha256=n.md.algorithms.sha256=o,o.create=function(){a||(i=String.fromCharCode(128),i+=n.util.fillString(String.fromCharCode(0),64),s=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],a=!0);var e=null,t=n.util.createBuffer(),r=new Array(64),o={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){o.messageLength=0,o.fullMessageLength=o.messageLength64=[];for(var r=o.messageLengthSize/4,i=0;i<r;++i)o.fullMessageLength.push(0);return t=n.util.createBuffer(),e={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},o}};return o.start(),o.update=function(i,a){"utf8"===a&&(i=n.util.encodeUtf8(i));var s=i.length;o.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var l=o.fullMessageLength.length-1;l>=0;--l)o.fullMessageLength[l]+=s[1],s[1]=s[0]+(o.fullMessageLength[l]/4294967296>>>0),o.fullMessageLength[l]=o.fullMessageLength[l]>>>0,s[0]=s[1]/4294967296>>>0;return t.putBytes(i),u(e,r,t),(t.read>2048||0===t.length())&&t.compact(),o},o.digest=function(){var a=n.util.createBuffer();a.putBytes(t.bytes());var s,l=o.fullMessageLength[o.fullMessageLength.length-1]+o.messageLengthSize&o.blockLength-1;a.putBytes(i.substr(0,o.blockLength-l));for(var c=8*o.fullMessageLength[0],f=0;f<o.fullMessageLength.length-1;++f)c+=(s=8*o.fullMessageLength[f+1])/4294967296>>>0,a.putInt32(c>>>0),c=s>>>0;a.putInt32(c);var p={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4,h5:e.h5,h6:e.h6,h7:e.h7};u(p,r,a);var h=n.util.createBuffer();return h.putInt32(p.h0),h.putInt32(p.h1),h.putInt32(p.h2),h.putInt32(p.h3),h.putInt32(p.h4),h.putInt32(p.h5),h.putInt32(p.h6),h.putInt32(p.h7),h},o};var i=null,a=!1,s=null;function u(e,t,r){for(var n,o,i,a,u,l,c,f,p,h,y,d,m,g=r.length();g>=64;){for(u=0;u<16;++u)t[u]=r.getInt32();for(;u<64;++u)n=((n=t[u-2])>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,o=((o=t[u-15])>>>7|o<<25)^(o>>>18|o<<14)^o>>>3,t[u]=n+t[u-7]+o+t[u-16]|0;for(l=e.h0,c=e.h1,f=e.h2,p=e.h3,h=e.h4,y=e.h5,d=e.h6,m=e.h7,u=0;u<64;++u)i=(l>>>2|l<<30)^(l>>>13|l<<19)^(l>>>22|l<<10),a=l&c|f&(l^c),n=m+((h>>>6|h<<26)^(h>>>11|h<<21)^(h>>>25|h<<7))+(d^h&(y^d))+s[u]+t[u],m=d,d=y,y=h,h=p+n>>>0,p=f,f=c,c=l,l=n+(o=i+a)>>>0;e.h0=e.h0+l|0,e.h1=e.h1+c|0,e.h2=e.h2+f|0,e.h3=e.h3+p|0,e.h4=e.h4+h|0,e.h5=e.h5+y|0,e.h6=e.h6+d|0,e.h7=e.h7+m|0,g-=64}}},function(e,t,r){var n=r(0);r(1);var o=null;!n.util.isNodejs||n.options.usePureJavaScript||process.versions["node-webkit"]||(o=r(16)),(e.exports=n.prng=n.prng||{}).create=function(e){for(var t={plugin:e,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=e.md,i=new Array(32),a=0;a<32;++a)i[a]=r.create();function s(){if(t.pools[0].messageLength>=32)return u();var e=32-t.pools[0].messageLength<<5;t.collect(t.seedFileSync(e)),u()}function u(){t.reseeds=4294967295===t.reseeds?0:t.reseeds+1;var e=t.plugin.md.create();e.update(t.keyBytes);for(var r=1,n=0;n<32;++n)t.reseeds%r==0&&(e.update(t.pools[n].digest().getBytes()),t.pools[n].start()),r<<=1;t.keyBytes=e.digest().getBytes(),e.start(),e.update(t.keyBytes);var o=e.digest().getBytes();t.key=t.plugin.formatKey(t.keyBytes),t.seed=t.plugin.formatSeed(o),t.generated=0}function l(e){var t=null,r=n.util.globalScope,o=r.crypto||r.msCrypto;o&&o.getRandomValues&&(t=function(e){return o.getRandomValues(e)});var i=n.util.createBuffer();if(t)for(;i.length()<e;){var a=Math.max(1,Math.min(e-i.length(),65536)/4),s=new Uint32Array(Math.floor(a));try{t(s);for(var u=0;u<s.length;++u)i.putInt32(s[u])}catch(e){if(!("undefined"!=typeof QuotaExceededError&&e instanceof QuotaExceededError))throw e}}if(i.length()<e)for(var l,c,f,p=Math.floor(65536*Math.random());i.length()<e;)for(c=16807*(65535&p),c+=(32767&(l=16807*(p>>16)))<<16,p=4294967295&(c=(2147483647&(c+=l>>15))+(c>>31)),u=0;u<3;++u)f=p>>>(u<<3),f^=Math.floor(256*Math.random()),i.putByte(255&f);return i.getBytes(e)}return t.pools=i,t.pool=0,t.generate=function(e,r){if(!r)return t.generateSync(e);var o=t.plugin.cipher,i=t.plugin.increment,a=t.plugin.formatKey,s=t.plugin.formatSeed,l=n.util.createBuffer();t.key=null,function c(f){if(f)return r(f);if(l.length()>=e)return r(null,l.getBytes(e));if(t.generated>1048575&&(t.key=null),null===t.key)return n.util.nextTick(function(){!function(e){if(t.pools[0].messageLength>=32)return u(),e();var r=32-t.pools[0].messageLength<<5;t.seedFile(r,function(r,n){if(r)return e(r);t.collect(n),u(),e()})}(c)});var p=o(t.key,t.seed);t.generated+=p.length,l.putBytes(p),t.key=a(o(t.key,i(t.seed))),t.seed=s(o(t.key,t.seed)),n.util.setImmediate(c)}()},t.generateSync=function(e){var r=t.plugin.cipher,o=t.plugin.increment,i=t.plugin.formatKey,a=t.plugin.formatSeed;t.key=null;for(var u=n.util.createBuffer();u.length()<e;){t.generated>1048575&&(t.key=null),null===t.key&&s();var l=r(t.key,t.seed);t.generated+=l.length,u.putBytes(l),t.key=i(r(t.key,o(t.seed))),t.seed=a(r(t.key,t.seed))}return u.getBytes(e)},o?(t.seedFile=function(e,t){o.randomBytes(e,function(e,r){if(e)return t(e);t(null,r.toString())})},t.seedFileSync=function(e){return o.randomBytes(e).toString()}):(t.seedFile=function(e,t){try{t(null,l(e))}catch(e){t(e)}},t.seedFileSync=l),t.collect=function(e){for(var r=e.length,n=0;n<r;++n)t.pools[t.pool].update(e.substr(n,1)),t.pool=31===t.pool?0:t.pool+1},t.collectInt=function(e,r){for(var n="",o=0;o<r;o+=8)n+=String.fromCharCode(e>>o&255);t.collect(n)},t.registerWorker=function(e){e===self?t.seedFile=function(e,t){self.addEventListener("message",function e(r){var n=r.data;n.forge&&n.forge.prng&&(self.removeEventListener("message",e),t(n.forge.prng.err,n.forge.prng.bytes))}),self.postMessage({forge:{prng:{needed:e}}})}:e.addEventListener("message",function(r){var n=r.data;n.forge&&n.forge.prng&&t.seedFile(n.forge.prng.needed,function(t,r){e.postMessage({forge:{prng:{err:t,bytes:r}}})})})},t}},function(e,t,r){var n=r(0);r(1);var o=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],i=[1,2,3,5],a=function(e,t){return e<<t&65535|(65535&e)>>16-t},s=function(e,t){return(65535&e)>>t|e<<16-t&65535};e.exports=n.rc2=n.rc2||{},n.rc2.expandKey=function(e,t){"string"==typeof e&&(e=n.util.createBuffer(e)),t=t||128;var r,i=e,a=e.length(),s=t,u=Math.ceil(s/8),l=255>>(7&s);for(r=a;r<128;r++)i.putByte(o[i.at(r-1)+i.at(r-a)&255]);for(i.setAt(128-u,o[i.at(128-u)&l]),r=127-u;r>=0;r--)i.setAt(r,o[i.at(r+1)^i.at(r+u)]);return i};var u=function(e,t,r){var o,u,l,c,f=!1,p=null,h=null,y=null,d=[];for(e=n.rc2.expandKey(e,t),l=0;l<64;l++)d.push(e.getInt16Le());r?(o=function(e){for(l=0;l<4;l++)e[l]+=d[c]+(e[(l+3)%4]&e[(l+2)%4])+(~e[(l+3)%4]&e[(l+1)%4]),e[l]=a(e[l],i[l]),c++},u=function(e){for(l=0;l<4;l++)e[l]+=d[63&e[(l+3)%4]]}):(o=function(e){for(l=3;l>=0;l--)e[l]=s(e[l],i[l]),e[l]-=d[c]+(e[(l+3)%4]&e[(l+2)%4])+(~e[(l+3)%4]&e[(l+1)%4]),c--},u=function(e){for(l=3;l>=0;l--)e[l]-=d[63&e[(l+3)%4]]});var m=function(e){var t=[];for(l=0;l<4;l++){var n=p.getInt16Le();null!==y&&(r?n^=y.getInt16Le():y.putInt16Le(n)),t.push(65535&n)}c=r?0:63;for(var o=0;o<e.length;o++)for(var i=0;i<e[o][0];i++)e[o][1](t);for(l=0;l<4;l++)null!==y&&(r?y.putInt16Le(t[l]):t[l]^=y.getInt16Le()),h.putInt16Le(t[l])},g=null;return g={start:function(e,t){e&&"string"==typeof e&&(e=n.util.createBuffer(e)),f=!1,p=n.util.createBuffer(),h=t||new n.util.createBuffer,y=e,g.output=h},update:function(e){for(f||p.putBuffer(e);p.length()>=8;)m([[5,o],[1,u],[6,o],[1,u],[5,o]])},finish:function(e){var t=!0;if(r)if(e)t=e(8,p,!r);else{var n=8===p.length()?8:8-p.length();p.fillWithByte(n,n)}if(t&&(f=!0,g.update()),!r&&(t=0===p.length()))if(e)t=e(8,h,!r);else{var o=h.length(),i=h.at(o-1);i>o?t=!1:h.truncate(i)}return t}}};n.rc2.startEncrypting=function(e,t,r){var o=n.rc2.createEncryptionCipher(e,128);return o.start(t,r),o},n.rc2.createEncryptionCipher=function(e,t){return u(e,t,!0)},n.rc2.startDecrypting=function(e,t,r){var o=n.rc2.createDecryptionCipher(e,128);return o.start(t,r),o},n.rc2.createDecryptionCipher=function(e,t){return u(e,t,!1)}},function(e,t,r){var n=r(0);r(1),r(2),r(9);var o=e.exports=n.pkcs1=n.pkcs1||{};function i(e,t,r){r||(r=n.md.sha1.create());for(var o="",i=Math.ceil(t/r.digestLength),a=0;a<i;++a){var s=String.fromCharCode(a>>24&255,a>>16&255,a>>8&255,255&a);r.start(),r.update(e+s),o+=r.digest().getBytes()}return o.substring(0,t)}o.encode_rsa_oaep=function(e,t,r){var o,a,s,u;"string"==typeof r?(o=r,a=arguments[3]||void 0,s=arguments[4]||void 0):r&&(o=r.label||void 0,a=r.seed||void 0,s=r.md||void 0,r.mgf1&&r.mgf1.md&&(u=r.mgf1.md)),s?s.start():s=n.md.sha1.create(),u||(u=s);var l=Math.ceil(e.n.bitLength()/8),c=l-2*s.digestLength-2;if(t.length>c)throw(d=new Error("RSAES-OAEP input message length is too long.")).length=t.length,d.maxLength=c,d;o||(o=""),s.update(o,"raw");for(var f=s.digest(),p="",h=c-t.length,y=0;y<h;y++)p+="\0";var d,m=f.getBytes()+p+""+t;if(a){if(a.length!==s.digestLength)throw(d=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.")).seedLength=a.length,d.digestLength=s.digestLength,d}else a=n.random.getBytes(s.digestLength);var g=i(a,l-s.digestLength-1,u),v=n.util.xorBytes(m,g,m.length),b=i(v,s.digestLength,u);return"\0"+n.util.xorBytes(a,b,a.length)+v},o.decode_rsa_oaep=function(e,t,r){var o,a,s;"string"==typeof r?(o=r,a=arguments[3]||void 0):r&&(o=r.label||void 0,a=r.md||void 0,r.mgf1&&r.mgf1.md&&(s=r.mgf1.md));var u=Math.ceil(e.n.bitLength()/8);if(t.length!==u)throw(g=new Error("RSAES-OAEP encoded message length is invalid.")).length=t.length,g.expectedLength=u,g;if(void 0===a?a=n.md.sha1.create():a.start(),s||(s=a),u<2*a.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");o||(o=""),a.update(o,"raw");for(var l=a.digest().getBytes(),c=t.charAt(0),f=t.substring(1,a.digestLength+1),p=t.substring(1+a.digestLength),h=i(p,a.digestLength,s),y=i(n.util.xorBytes(f,h,f.length),u-a.digestLength-1,s),d=n.util.xorBytes(p,y,p.length),m=d.substring(0,a.digestLength),g="\0"!==c,v=0;v<a.digestLength;++v)g|=l.charAt(v)!==m.charAt(v);for(var b=1,A=a.digestLength,w=a.digestLength;w<d.length;w++){var S=d.charCodeAt(w);g|=S&(b?65534:0),A+=b&=1&S^1}if(g||1!==d.charCodeAt(A))throw new Error("Invalid RSAES-OAEP padding.");return d.substring(A+1)}},function(e,t,r){var n=r(0);r(1),r(12),r(2),function(){if(n.prime)e.exports=n.prime;else{var t=e.exports=n.prime=n.prime||{},r=n.jsbn.BigInteger,o=[6,4,2,4,2,4,6,2],i=new r(null);i.fromInt(30);var a=function(e,t){return e|t};t.generateProbablePrime=function(e,t,o){"function"==typeof t&&(o=t,t={});var i=(t=t||{}).algorithm||"PRIMEINC";"string"==typeof i&&(i={name:i}),i.options=i.options||{};var a=t.prng||n.random,l={nextBytes:function(e){for(var t=a.getBytesSync(e.length),r=0;r<e.length;++r)e[r]=t.charCodeAt(r)}};if("PRIMEINC"===i.name)return function(e,t,o,i){return"workers"in o?function(e,t,o,i){if("undefined"==typeof Worker)return s(e,t,o,i);var a=u(e,t),l=o.workers,c=o.workLoad||100,f=30*c/8,p=o.workerScript||"forge/prime.worker.js";if(-1===l)return n.util.estimateCores(function(e,t){e&&(t=2),l=t-1,h()});function h(){l=Math.max(1,l);for(var n=[],o=0;o<l;++o)n[o]=new Worker(p);for(o=0;o<l;++o)n[o].addEventListener("message",h);var s=!1;function h(o){if(!s){var l=o.data;if(l.found){for(var p=0;p<n.length;++p)n[p].terminate();return s=!0,i(null,new r(l.prime,16))}a.bitLength()>e&&(a=u(e,t));var h=a.toString(16);o.target.postMessage({hex:h,workLoad:c}),a.dAddOffset(f,0)}}}h()}(e,t,o,i):s(e,t,o,i)}(e,l,i.options,o);throw new Error("Invalid prime generation algorithm: "+i.name)}}function s(e,t,r,i){var a=u(e,t),s=function(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}(a.bitLength());"millerRabinTests"in r&&(s=r.millerRabinTests);var l=10;"maxBlockTime"in r&&(l=r.maxBlockTime),function e(t,r,i,a,s,l,c){var f=+new Date;do{if(t.bitLength()>r&&(t=u(r,i)),t.isProbablePrime(s))return c(null,t);t.dAddOffset(o[a++%8],0)}while(l<0||+new Date-f<l);n.util.setImmediate(function(){e(t,r,i,a,s,l,c)})}(a,e,t,0,s,l,i)}function u(e,t){var n=new r(e,t),o=e-1;return n.testBit(o)||n.bitwiseTo(r.ONE.shiftLeft(o),a,n),n.dAddOffset(31-n.mod(i).byteValue(),0),n}}()},function(e,t,r){var n=r(0);r(3),r(8),r(6),r(29),r(22),r(2),r(11),r(9),r(1),r(17);var o=n.asn1,i=n.pki,a=e.exports=n.pkcs12=n.pkcs12||{},s={name:"ContentInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:o.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},u={name:"PFX",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"version"},s,{name:"PFX.macData",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:o.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},l={name:"SafeBag",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:o.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:o.Class.UNIVERSAL,type:o.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},c={name:"Attribute",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:o.Class.UNIVERSAL,type:o.Type.SET,constructed:!0,capture:"values"}]},f={name:"CertBag",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:o.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:o.Class.UNIVERSAL,type:o.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function p(e,t,r,n){for(var o=[],i=0;i<e.length;i++)for(var a=0;a<e[i].safeBags.length;a++){var s=e[i].safeBags[a];void 0!==n&&s.type!==n||(null!==t?void 0!==s.attributes[t]&&s.attributes[t].indexOf(r)>=0&&o.push(s):o.push(s))}return o}function h(e){if(e.composed||e.constructed){for(var t=n.util.createBuffer(),r=0;r<e.value.length;++r)t.putBytes(e.value[r].value);e.composed=e.constructed=!1,e.value=t.getBytes()}return e}function y(e,t){var r={},a=[];if(!o.validate(e,n.pkcs7.asn1.encryptedDataValidator,r,a))throw(s=new Error("Cannot read EncryptedContentInfo.")).errors=a,s;var s,u=o.derToOid(r.contentType);if(u!==i.oids.data)throw(s=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.")).oid=u,s;u=o.derToOid(r.encAlgorithm);var l=i.pbe.getCipher(u,r.encParameter,t),c=h(r.encryptedContentAsn1),f=n.util.createBuffer(c.value);if(l.update(f),!l.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return l.output.getBytes()}function d(e,t,r){if(!t&&0===e.length)return[];if((e=o.fromDer(e,t)).tagClass!==o.Class.UNIVERSAL||e.type!==o.Type.SEQUENCE||!0!==e.constructed)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var n=[],a=0;a<e.value.length;a++){var s=e.value[a],u={},c=[];if(!o.validate(s,l,u,c))throw(g=new Error("Cannot read SafeBag.")).errors=c,g;var p,h,y={type:o.derToOid(u.bagId),attributes:m(u.bagAttributes)};n.push(y);var d=u.bagValue.value[0];switch(y.type){case i.oids.pkcs8ShroudedKeyBag:if(null===(d=i.decryptPrivateKeyInfo(d,r)))throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case i.oids.keyBag:try{y.key=i.privateKeyFromAsn1(d)}catch(e){y.key=null,y.asn1=d}continue;case i.oids.certBag:p=f,h=function(){if(o.derToOid(u.certId)!==i.oids.x509Certificate){var e=new Error("Unsupported certificate type, only X.509 supported.");throw e.oid=o.derToOid(u.certId),e}var r=o.fromDer(u.cert,t);try{y.cert=i.certificateFromAsn1(r,!0)}catch(e){y.cert=null,y.asn1=r}};break;default:var g;throw(g=new Error("Unsupported PKCS#12 SafeBag type.")).oid=y.type,g}if(void 0!==p&&!o.validate(d,p,u,c))throw(g=new Error("Cannot read PKCS#12 "+p.name)).errors=c,g;h()}return n}function m(e){var t={};if(void 0!==e)for(var r=0;r<e.length;++r){var n={},a=[];if(!o.validate(e[r],c,n,a)){var s=new Error("Cannot read PKCS#12 BagAttribute.");throw s.errors=a,s}var u=o.derToOid(n.oid);if(void 0!==i.oids[u]){t[i.oids[u]]=[];for(var l=0;l<n.values.length;++l)t[i.oids[u]].push(n.values[l].value)}}return t}a.pkcs12FromAsn1=function(e,t,r){"string"==typeof t?(r=t,t=!0):void 0===t&&(t=!0);var l={};if(!o.validate(e,u,l,[]))throw(c=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.")).errors=c,c;var c,f={version:l.version.charCodeAt(0),safeContents:[],getBags:function(e){var t,r={};return"localKeyId"in e?t=e.localKeyId:"localKeyIdHex"in e&&(t=n.util.hexToBytes(e.localKeyIdHex)),void 0===t&&!("friendlyName"in e)&&"bagType"in e&&(r[e.bagType]=p(f.safeContents,null,null,e.bagType)),void 0!==t&&(r.localKeyId=p(f.safeContents,"localKeyId",t,e.bagType)),"friendlyName"in e&&(r.friendlyName=p(f.safeContents,"friendlyName",e.friendlyName,e.bagType)),r},getBagsByFriendlyName:function(e,t){return p(f.safeContents,"friendlyName",e,t)},getBagsByLocalKeyId:function(e,t){return p(f.safeContents,"localKeyId",e,t)}};if(3!==l.version.charCodeAt(0))throw(c=new Error("PKCS#12 PFX of version other than 3 not supported.")).version=l.version.charCodeAt(0),c;if(o.derToOid(l.contentType)!==i.oids.data)throw(c=new Error("Only PKCS#12 PFX in password integrity mode supported.")).oid=o.derToOid(l.contentType),c;var m=l.content.value[0];if(m.tagClass!==o.Class.UNIVERSAL||m.type!==o.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(m=h(m),l.mac){var g=null,v=0,b=o.derToOid(l.macAlgorithm);switch(b){case i.oids.sha1:g=n.md.sha1.create(),v=20;break;case i.oids.sha256:g=n.md.sha256.create(),v=32;break;case i.oids.sha384:g=n.md.sha384.create(),v=48;break;case i.oids.sha512:g=n.md.sha512.create(),v=64;break;case i.oids.md5:g=n.md.md5.create(),v=16}if(null===g)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+b);var A=new n.util.ByteBuffer(l.macSalt),w="macIterations"in l?parseInt(n.util.bytesToHex(l.macIterations),16):1,S=a.generateKey(r,A,3,w,v,g),C=n.hmac.create();if(C.start(g,S),C.update(m.value),C.getMac().getBytes()!==l.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return function(e,t,r,n){if((t=o.fromDer(t,r)).tagClass!==o.Class.UNIVERSAL||t.type!==o.Type.SEQUENCE||!0!==t.constructed)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var a=0;a<t.value.length;a++){var u=t.value[a],l={},c=[];if(!o.validate(u,s,l,c))throw(g=new Error("Cannot read ContentInfo.")).errors=c,g;var f={encrypted:!1},p=null,m=l.content.value[0];switch(o.derToOid(l.contentType)){case i.oids.data:if(m.tagClass!==o.Class.UNIVERSAL||m.type!==o.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");p=h(m).value;break;case i.oids.encryptedData:p=y(m,n),f.encrypted=!0;break;default:var g;throw(g=new Error("Unsupported PKCS#12 contentType.")).contentType=o.derToOid(l.contentType),g}f.safeBags=d(p,r,n),e.safeContents.push(f)}}(f,m.value,t,r),f},a.toPkcs12Asn1=function(e,t,r,s){(s=s||{}).saltSize=s.saltSize||8,s.count=s.count||2048,s.algorithm=s.algorithm||s.encAlgorithm||"aes128","useMac"in s||(s.useMac=!0),"localKeyId"in s||(s.localKeyId=null),"generateLocalKeyId"in s||(s.generateLocalKeyId=!0);var u,l=s.localKeyId;if(null!==l)l=n.util.hexToBytes(l);else if(s.generateLocalKeyId)if(t){var c=n.util.isArray(t)?t[0]:t;"string"==typeof c&&(c=i.certificateFromPem(c)),(O=n.md.sha1.create()).update(o.toDer(i.certificateToAsn1(c)).getBytes()),l=O.digest().getBytes()}else l=n.random.getBytes(20);var f=[];null!==l&&f.push(o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(i.oids.localKeyId).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SET,!0,[o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,l)])])),"friendlyName"in s&&f.push(o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(i.oids.friendlyName).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SET,!0,[o.create(o.Class.UNIVERSAL,o.Type.BMPSTRING,!1,s.friendlyName)])])),f.length>0&&(u=o.create(o.Class.UNIVERSAL,o.Type.SET,!0,f));var p=[],h=[];null!==t&&(h=n.util.isArray(t)?t:[t]);for(var y=[],d=0;d<h.length;++d){"string"==typeof(t=h[d])&&(t=i.certificateFromPem(t));var m=0===d?u:void 0,g=i.certificateToAsn1(t),v=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(i.oids.certBag).getBytes()),o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(i.oids.x509Certificate).getBytes()),o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,o.toDer(g).getBytes())])])]),m]);y.push(v)}if(y.length>0){var b=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,y),A=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(i.oids.data).getBytes()),o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,o.toDer(b).getBytes())])]);p.push(A)}var w=null;if(null!==e){var S=i.wrapRsaPrivateKey(i.privateKeyToAsn1(e));w=null===r?o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(i.oids.keyBag).getBytes()),o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[S]),u]):o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(i.oids.pkcs8ShroudedKeyBag).getBytes()),o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[i.encryptPrivateKeyInfo(S,r,s)]),u]);var C=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[w]),E=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(i.oids.data).getBytes()),o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,o.toDer(C).getBytes())])]);p.push(E)}var _,I=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,p);if(s.useMac){var O=n.md.sha1.create(),x=new n.util.ByteBuffer(n.random.getBytes(s.saltSize)),P=s.count,k=(e=a.generateKey(r,x,3,P,20),n.hmac.create());k.start(O,e),k.update(o.toDer(I).getBytes());var T=k.getMac();_=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(i.oids.sha1).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")]),o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,T.getBytes())]),o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,x.getBytes()),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(P).getBytes())])}return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(3).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(i.oids.data).getBytes()),o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,o.toDer(I).getBytes())])]),_])},a.generateKey=n.pbe.generatePkcs12Key},function(e,t,r){var n=r(0);r(3),r(1);var o=n.asn1,i=e.exports=n.pkcs7asn1=n.pkcs7asn1||{};n.pkcs7=n.pkcs7||{},n.pkcs7.asn1=i;var a={name:"ContentInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:o.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};i.contentInfoValidator=a;var s={name:"EncryptedContentInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:o.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:o.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};i.envelopedDataValidator={name:"EnvelopedData",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:o.Class.UNIVERSAL,type:o.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(s)},i.encryptedDataValidator={name:"EncryptedData",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"version"}].concat(s)};var u={name:"SignerInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:o.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:o.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:o.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};i.signedDataValidator={name:"SignedData",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:o.Class.UNIVERSAL,type:o.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},a,{name:"SignedData.Certificates",tagClass:o.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:o.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:o.Class.UNIVERSAL,type:o.Type.SET,capture:"signerInfos",optional:!0,value:[u]}]},i.recipientInfoValidator={name:"RecipientInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:o.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}},function(e,t,r){var n=r(0);r(1),n.mgf=n.mgf||{},(e.exports=n.mgf.mgf1=n.mgf1=n.mgf1||{}).create=function(e){return{generate:function(t,r){for(var o=new n.util.ByteBuffer,i=Math.ceil(r/e.digestLength),a=0;a<i;a++){var s=new n.util.ByteBuffer;s.putInt32(a),e.start(),e.update(t+s.getBytes()),o.putBuffer(e.digest())}return o.truncate(o.length()-r),o.getBytes()}}}},function(e,t,r){var n=r(0);r(4),r(1);var o=e.exports=n.sha512=n.sha512||{};n.md.sha512=n.md.algorithms.sha512=o;var i=n.sha384=n.sha512.sha384=n.sha512.sha384||{};i.create=function(){return o.create("SHA-384")},n.md.sha384=n.md.algorithms.sha384=i,n.sha512.sha256=n.sha512.sha256||{create:function(){return o.create("SHA-512/256")}},n.md["sha512/256"]=n.md.algorithms["sha512/256"]=n.sha512.sha256,n.sha512.sha224=n.sha512.sha224||{create:function(){return o.create("SHA-512/224")}},n.md["sha512/224"]=n.md.algorithms["sha512/224"]=n.sha512.sha224,o.create=function(e){if(s||(a=String.fromCharCode(128),a+=n.util.fillString(String.fromCharCode(0),128),u=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],(l={})["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],l["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],l["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],l["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],s=!0),void 0===e&&(e="SHA-512"),!(e in l))throw new Error("Invalid SHA-512 algorithm: "+e);for(var t=l[e],r=null,o=n.util.createBuffer(),i=new Array(80),f=0;f<80;++f)i[f]=new Array(2);var p=64;switch(e){case"SHA-384":p=48;break;case"SHA-512/256":p=32;break;case"SHA-512/224":p=28}var h={algorithm:e.replace("-","").toLowerCase(),blockLength:128,digestLength:p,messageLength:0,fullMessageLength:null,messageLengthSize:16,start:function(){h.messageLength=0,h.fullMessageLength=h.messageLength128=[];for(var e=h.messageLengthSize/4,i=0;i<e;++i)h.fullMessageLength.push(0);for(o=n.util.createBuffer(),r=new Array(t.length),i=0;i<t.length;++i)r[i]=t[i].slice(0);return h}};return h.start(),h.update=function(e,t){"utf8"===t&&(e=n.util.encodeUtf8(e));var a=e.length;h.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var s=h.fullMessageLength.length-1;s>=0;--s)h.fullMessageLength[s]+=a[1],a[1]=a[0]+(h.fullMessageLength[s]/4294967296>>>0),h.fullMessageLength[s]=h.fullMessageLength[s]>>>0,a[0]=a[1]/4294967296>>>0;return o.putBytes(e),c(r,i,o),(o.read>2048||0===o.length())&&o.compact(),h},h.digest=function(){var t=n.util.createBuffer();t.putBytes(o.bytes());var s,u=h.fullMessageLength[h.fullMessageLength.length-1]+h.messageLengthSize&h.blockLength-1;t.putBytes(a.substr(0,h.blockLength-u));for(var l=8*h.fullMessageLength[0],f=0;f<h.fullMessageLength.length-1;++f)l+=(s=8*h.fullMessageLength[f+1])/4294967296>>>0,t.putInt32(l>>>0),l=s>>>0;t.putInt32(l);var p=new Array(r.length);for(f=0;f<r.length;++f)p[f]=r[f].slice(0);c(p,i,t);var y,d=n.util.createBuffer();for(y="SHA-512"===e?p.length:"SHA-384"===e?p.length-2:p.length-4,f=0;f<y;++f)d.putInt32(p[f][0]),f===y-1&&"SHA-512/224"===e||d.putInt32(p[f][1]);return d},h};var a=null,s=!1,u=null,l=null;function c(e,t,r){for(var n,o,i,a,s,l,c,f,p,h,y,d,m,g,v,b,A,w,S,C,E,_,I,O,x,P,k,T,j,M,B,N,R,L=r.length();L>=128;){for(k=0;k<16;++k)t[k][0]=r.getInt32()>>>0,t[k][1]=r.getInt32()>>>0;for(;k<80;++k)n=(((T=(M=t[k-2])[0])>>>19|(j=M[1])<<13)^(j>>>29|T<<3)^T>>>6)>>>0,o=((T<<13|j>>>19)^(j<<3|T>>>29)^(T<<26|j>>>6))>>>0,i=(((T=(N=t[k-15])[0])>>>1|(j=N[1])<<31)^(T>>>8|j<<24)^T>>>7)>>>0,a=((T<<31|j>>>1)^(T<<24|j>>>8)^(T<<25|j>>>7))>>>0,B=t[k-7],R=t[k-16],j=o+B[1]+a+R[1],t[k][0]=n+B[0]+i+R[0]+(j/4294967296>>>0)>>>0,t[k][1]=j>>>0;for(y=e[0][0],d=e[0][1],m=e[1][0],g=e[1][1],v=e[2][0],b=e[2][1],A=e[3][0],w=e[3][1],S=e[4][0],C=e[4][1],E=e[5][0],_=e[5][1],I=e[6][0],O=e[6][1],x=e[7][0],P=e[7][1],k=0;k<80;++k)c=((S>>>14|C<<18)^(S>>>18|C<<14)^(C>>>9|S<<23))>>>0,f=(I^S&(E^I))>>>0,s=((y>>>28|d<<4)^(d>>>2|y<<30)^(d>>>7|y<<25))>>>0,l=((y<<4|d>>>28)^(d<<30|y>>>2)^(d<<25|y>>>7))>>>0,p=(y&m|v&(y^m))>>>0,h=(d&g|b&(d^g))>>>0,j=P+(((S<<18|C>>>14)^(S<<14|C>>>18)^(C<<23|S>>>9))>>>0)+((O^C&(_^O))>>>0)+u[k][1]+t[k][1],n=x+c+f+u[k][0]+t[k][0]+(j/4294967296>>>0)>>>0,o=j>>>0,i=s+p+((j=l+h)/4294967296>>>0)>>>0,a=j>>>0,x=I,P=O,I=E,O=_,E=S,_=C,S=A+n+((j=w+o)/4294967296>>>0)>>>0,C=j>>>0,A=v,w=b,v=m,b=g,m=y,g=d,y=n+i+((j=o+a)/4294967296>>>0)>>>0,d=j>>>0;j=e[0][1]+d,e[0][0]=e[0][0]+y+(j/4294967296>>>0)>>>0,e[0][1]=j>>>0,j=e[1][1]+g,e[1][0]=e[1][0]+m+(j/4294967296>>>0)>>>0,e[1][1]=j>>>0,j=e[2][1]+b,e[2][0]=e[2][0]+v+(j/4294967296>>>0)>>>0,e[2][1]=j>>>0,j=e[3][1]+w,e[3][0]=e[3][0]+A+(j/4294967296>>>0)>>>0,e[3][1]=j>>>0,j=e[4][1]+C,e[4][0]=e[4][0]+S+(j/4294967296>>>0)>>>0,e[4][1]=j>>>0,j=e[5][1]+_,e[5][0]=e[5][0]+E+(j/4294967296>>>0)>>>0,e[5][1]=j>>>0,j=e[6][1]+O,e[6][0]=e[6][0]+I+(j/4294967296>>>0)>>>0,e[6][1]=j>>>0,j=e[7][1]+P,e[7][0]=e[7][0]+x+(j/4294967296>>>0)>>>0,e[7][1]=j>>>0,L-=128}}},function(e,t,r){e.exports=r(33)},function(e,t,r){e.exports=r(0),r(5),r(36),r(3),r(13),r(10),r(38),r(8),r(40),r(41),r(42),r(30),r(15),r(7),r(26),r(28),r(43),r(21),r(27),r(24),r(18),r(2),r(25),r(44),r(20),r(1)},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==("undefined"==typeof window?"undefined":s(window))&&(r=window)}e.exports=r},function(e,t){var r={};e.exports=r;var n={};r.encode=function(e,t,r){if("string"!=typeof t)throw new TypeError('"alphabet" must be a string.');if(void 0!==r&&"number"!=typeof r)throw new TypeError('"maxline" must be a number.');var n="";if(e instanceof Uint8Array){var o=0,i=t.length,a=t.charAt(0),s=[0];for(o=0;o<e.length;++o){for(var u=0,l=e[o];u<s.length;++u)l+=s[u]<<8,s[u]=l%i,l=l/i|0;for(;l>0;)s.push(l%i),l=l/i|0}for(o=0;0===e[o]&&o<e.length-1;++o)n+=a;for(o=s.length-1;o>=0;--o)n+=t[s[o]]}else n=function(e,t){var r=0,n=t.length,o=t.charAt(0),i=[0];for(r=0;r<e.length();++r){for(var a=0,s=e.at(r);a<i.length;++a)s+=i[a]<<8,i[a]=s%n,s=s/n|0;for(;s>0;)i.push(s%n),s=s/n|0}var u="";for(r=0;0===e.at(r)&&r<e.length()-1;++r)u+=o;for(r=i.length-1;r>=0;--r)u+=t[i[r]];return u}(e,t);if(r){var c=new RegExp(".{1,"+r+"}","g");n=n.match(c).join("\r\n")}return n},r.decode=function(e,t){if("string"!=typeof e)throw new TypeError('"input" must be a string.');if("string"!=typeof t)throw new TypeError('"alphabet" must be a string.');var r=n[t];if(!r){r=n[t]=[];for(var o=0;o<t.length;++o)r[t.charCodeAt(o)]=o}e=e.replace(/\s/g,"");var i=t.length,a=t.charAt(0),s=[0];for(o=0;o<e.length;o++){var u=r[e.charCodeAt(o)];if(void 0===u)return;for(var l=0,c=u;l<s.length;++l)c+=s[l]*i,s[l]=255&c,c>>=8;for(;c>0;)s.push(255&c),c>>=8}for(var f=0;e[f]===a&&f<e.length-1;++f)s.push(0);return"undefined"!=typeof Buffer?Buffer.from(s.reverse()):new Uint8Array(s.reverse())}},function(e,t,r){var n=r(0);r(5),r(20);var o=e.exports=n.tls;function i(e,t,r){var i=t.entity===n.tls.ConnectionEnd.client;e.read.cipherState={init:!1,cipher:n.cipher.createDecipher("AES-CBC",i?r.keys.server_write_key:r.keys.client_write_key),iv:i?r.keys.server_write_IV:r.keys.client_write_IV},e.write.cipherState={init:!1,cipher:n.cipher.createCipher("AES-CBC",i?r.keys.client_write_key:r.keys.server_write_key),iv:i?r.keys.client_write_IV:r.keys.server_write_IV},e.read.cipherFunction=l,e.write.cipherFunction=a,e.read.macLength=e.write.macLength=r.mac_length,e.read.macFunction=e.write.macFunction=o.hmac_sha1}function a(e,t){var r,i=!1,a=t.macFunction(t.macKey,t.sequenceNumber,e);e.fragment.putBytes(a),t.updateSequenceNumber(),r=e.version.minor===o.Versions.TLS_1_0.minor?t.cipherState.init?null:t.cipherState.iv:n.random.getBytesSync(16),t.cipherState.init=!0;var u=t.cipherState.cipher;return u.start({iv:r}),e.version.minor>=o.Versions.TLS_1_1.minor&&u.output.putBytes(r),u.update(e.fragment),u.finish(s)&&(e.fragment=u.output,e.length=e.fragment.length(),i=!0),i}function s(e,t,r){if(!r){var n=e-t.length()%e;t.fillWithByte(n-1,n)}return!0}function u(e,t,r){var n=!0;if(r){for(var o=t.length(),i=t.last(),a=o-1-i;a<o-1;++a)n=n&&t.at(a)==i;n&&t.truncate(i+1)}return n}function l(e,t){var r,i=!1;r=e.version.minor===o.Versions.TLS_1_0.minor?t.cipherState.init?null:t.cipherState.iv:e.fragment.getBytes(16),t.cipherState.init=!0;var a=t.cipherState.cipher;a.start({iv:r}),a.update(e.fragment),i=a.finish(u);var s=t.macLength,l=n.random.getBytesSync(s),c=a.output.length();c>=s?(e.fragment=a.output.getBytes(c-s),l=a.output.getBytes(s)):e.fragment=a.output.getBytes(),e.fragment=n.util.createBuffer(e.fragment),e.length=e.fragment.length();var f=t.macFunction(t.macKey,t.sequenceNumber,e);return t.updateSequenceNumber(),function(e,t,r){var o=n.hmac.create();return o.start("SHA1",e),o.update(t),t=o.digest().getBytes(),o.start(null,null),o.update(r),t===(r=o.digest().getBytes())}(t.macKey,l,f)&&i}o.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:function(e){e.bulk_cipher_algorithm=o.BulkCipherAlgorithm.aes,e.cipher_type=o.CipherType.block,e.enc_key_length=16,e.block_length=16,e.fixed_iv_length=16,e.record_iv_length=16,e.mac_algorithm=o.MACAlgorithm.hmac_sha1,e.mac_length=20,e.mac_key_length=20},initConnectionState:i},o.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:function(e){e.bulk_cipher_algorithm=o.BulkCipherAlgorithm.aes,e.cipher_type=o.CipherType.block,e.enc_key_length=32,e.block_length=16,e.fixed_iv_length=16,e.record_iv_length=16,e.mac_algorithm=o.MACAlgorithm.hmac_sha1,e.mac_length=20,e.mac_key_length=20},initConnectionState:i}},function(e,t,r){var n=r(0);r(30),e.exports=n.mgf=n.mgf||{},n.mgf.mgf1=n.mgf1},function(e,t,r){var n=r(0);r(12),r(2),r(31),r(1);var o=r(39),i=o.publicKeyValidator,a=o.privateKeyValidator;if(void 0===s)var s=n.jsbn.BigInteger;var u=n.util.ByteBuffer,l="undefined"==typeof Buffer?Uint8Array:Buffer;n.pki=n.pki||{},e.exports=n.pki.ed25519=n.ed25519=n.ed25519||{};var c=n.ed25519;function f(e){var t=e.message;if(t instanceof Uint8Array||t instanceof l)return t;var r=e.encoding;if(void 0===t){if(!e.md)throw new TypeError('"options.message" or "options.md" not specified.');t=e.md.digest().getBytes(),r="binary"}if("string"==typeof t&&!r)throw new TypeError('"options.encoding" must be "binary" or "utf8".');if("string"==typeof t){if("undefined"!=typeof Buffer)return Buffer.from(t,r);t=new u(t,r)}else if(!(t instanceof u))throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');for(var n=new l(t.length()),o=0;o<n.length;++o)n[o]=t.at(o);return n}c.constants={},c.constants.PUBLIC_KEY_BYTE_LENGTH=32,c.constants.PRIVATE_KEY_BYTE_LENGTH=64,c.constants.SEED_BYTE_LENGTH=32,c.constants.SIGN_BYTE_LENGTH=64,c.constants.HASH_BYTE_LENGTH=64,c.generateKeyPair=function(e){var t=(e=e||{}).seed;if(void 0===t)t=n.random.getBytesSync(c.constants.SEED_BYTE_LENGTH);else if("string"==typeof t){if(t.length!==c.constants.SEED_BYTE_LENGTH)throw new TypeError('"seed" must be '+c.constants.SEED_BYTE_LENGTH+" bytes in length.")}else if(!(t instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');t=f({message:t,encoding:"binary"});for(var r=new l(c.constants.PUBLIC_KEY_BYTE_LENGTH),o=new l(c.constants.PRIVATE_KEY_BYTE_LENGTH),i=0;i<32;++i)o[i]=t[i];return function(e,t){var r,n=[N(),N(),N(),N()],o=A(t,32);for(o[0]&=248,o[31]&=127,o[31]|=64,T(n,o),_(e,n),r=0;r<32;++r)t[r+32]=e[r]}(r,o),{publicKey:r,privateKey:o}},c.privateKeyFromAsn1=function(e){var t={},r=[];if(!n.asn1.validate(e,a,t,r)){var o=new Error("Invalid Key.");throw o.errors=r,o}var i=n.asn1.derToOid(t.privateKeyOid),s=n.oids.EdDSA25519;if(i!==s)throw new Error('Invalid OID "'+i+'"; OID must be "'+s+'".');var u=t.privateKey;return{privateKeyBytes:f({message:n.asn1.fromDer(u).value,encoding:"binary"})}},c.publicKeyFromAsn1=function(e){var t={},r=[];if(!n.asn1.validate(e,i,t,r)){var o=new Error("Invalid Key.");throw o.errors=r,o}var a=n.asn1.derToOid(t.publicKeyOid),s=n.oids.EdDSA25519;if(a!==s)throw new Error('Invalid OID "'+a+'"; OID must be "'+s+'".');var u=t.ed25519PublicKey;if(u.length!==c.constants.PUBLIC_KEY_BYTE_LENGTH)throw new Error("Key length is invalid.");return f({message:u,encoding:"binary"})},c.publicKeyFromPrivateKey=function(e){var t=f({message:(e=e||{}).privateKey,encoding:"binary"});if(t.length!==c.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+c.constants.PRIVATE_KEY_BYTE_LENGTH);for(var r=new l(c.constants.PUBLIC_KEY_BYTE_LENGTH),n=0;n<r.length;++n)r[n]=t[32+n];return r},c.sign=function(e){var t=f(e=e||{}),r=f({message:e.privateKey,encoding:"binary"});if(r.length===c.constants.SEED_BYTE_LENGTH)r=c.generateKeyPair({seed:r}).privateKey;else if(r.length!==c.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+c.constants.SEED_BYTE_LENGTH+" or "+c.constants.PRIVATE_KEY_BYTE_LENGTH);var n=new l(c.constants.SIGN_BYTE_LENGTH+t.length);!function(e,t,r,n){var o,i,a=new Float64Array(64),s=[N(),N(),N(),N()],u=A(n,32);u[0]&=248,u[31]&=127,u[31]|=64;for(o=0;o<r;++o)e[64+o]=t[o];for(o=0;o<32;++o)e[32+o]=u[32+o];var l=A(e.subarray(32),r+32);for(S(l),T(s,l),_(e,s),o=32;o<64;++o)e[o]=n[o];var c=A(e,r+64);for(S(c),o=32;o<64;++o)a[o]=0;for(o=0;o<32;++o)a[o]=l[o];for(o=0;o<32;++o)for(i=0;i<32;i++)a[o+i]+=c[o]*u[i];w(e.subarray(32),a)}(n,t,t.length,r);for(var o=new l(c.constants.SIGN_BYTE_LENGTH),i=0;i<o.length;++i)o[i]=n[i];return o},c.verify=function(e){var t=f(e=e||{});if(void 0===e.signature)throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var r=f({message:e.signature,encoding:"binary"});if(r.length!==c.constants.SIGN_BYTE_LENGTH)throw new TypeError('"options.signature" must have a byte length of '+c.constants.SIGN_BYTE_LENGTH);var n=f({message:e.publicKey,encoding:"binary"});if(n.length!==c.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('"options.publicKey" must have a byte length of '+c.constants.PUBLIC_KEY_BYTE_LENGTH);var o,i=new l(c.constants.SIGN_BYTE_LENGTH+t.length),a=new l(c.constants.SIGN_BYTE_LENGTH+t.length);for(o=0;o<c.constants.SIGN_BYTE_LENGTH;++o)i[o]=r[o];for(o=0;o<t.length;++o)i[o+c.constants.SIGN_BYTE_LENGTH]=t[o];return function(e,t,r,n){var o,i=new l(32),a=[N(),N(),N(),N()],s=[N(),N(),N(),N()];if(r<64)return-1;if(function(e,t){var r=N(),n=N(),o=N(),i=N(),a=N(),s=N(),u=N();return j(e[2],h),function(e,t){var r;for(r=0;r<16;++r)e[r]=t[2*r]+(t[2*r+1]<<8);e[15]&=32767}(e[1],t),D(o,e[1]),F(i,o,y),L(o,o,e[2]),R(i,e[2],i),D(a,i),D(s,a),F(u,s,a),F(r,u,o),F(r,r,i),function(e,t){var r,n=N();for(r=0;r<16;++r)n[r]=t[r];for(r=250;r>=0;--r)D(n,n),1!==r&&F(n,n,t);for(r=0;r<16;++r)e[r]=n[r]}(r,r),F(r,r,o),F(r,r,i),F(r,r,i),F(e[0],r,i),D(n,e[0]),F(n,n,i),O(n,o)&&F(e[0],e[0],b),D(n,e[0]),F(n,n,i),O(n,o)?-1:(P(e[0])===t[31]>>7&&L(e[0],p,e[0]),F(e[3],e[0],e[1]),0)}(s,n))return-1;for(o=0;o<r;++o)e[o]=t[o];for(o=0;o<32;++o)e[o+32]=n[o];var u=A(e,r);if(S(u),k(a,s,u),T(s,t.subarray(32)),C(a,s),_(i,a),r-=64,x(t,0,i,0)){for(o=0;o<r;++o)e[o]=0;return-1}for(o=0;o<r;++o)e[o]=t[o+64];return r}(a,i,i.length,n)>=0};var p=N(),h=N([1]),y=N([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),d=N([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),m=N([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),g=N([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),v=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),b=N([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function A(e,t){var r=n.md.sha512.create(),o=new u(e);r.update(o.getBytes(t),"binary");var i=r.digest().getBytes();if("undefined"!=typeof Buffer)return Buffer.from(i,"binary");for(var a=new l(c.constants.HASH_BYTE_LENGTH),s=0;s<64;++s)a[s]=i.charCodeAt(s);return a}function w(e,t){var r,n,o,i;for(n=63;n>=32;--n){for(r=0,o=n-32,i=n-12;o<i;++o)t[o]+=r-16*t[n]*v[o-(n-32)],r=t[o]+128>>8,t[o]-=256*r;t[o]+=r,t[n]=0}for(r=0,o=0;o<32;++o)t[o]+=r-(t[31]>>4)*v[o],r=t[o]>>8,t[o]&=255;for(o=0;o<32;++o)t[o]-=r*v[o];for(n=0;n<32;++n)t[n+1]+=t[n]>>8,e[n]=255&t[n]}function S(e){for(var t=new Float64Array(64),r=0;r<64;++r)t[r]=e[r],e[r]=0;w(e,t)}function C(e,t){var r=N(),n=N(),o=N(),i=N(),a=N(),s=N(),u=N(),l=N(),c=N();L(r,e[1],e[0]),L(c,t[1],t[0]),F(r,r,c),R(n,e[0],e[1]),R(c,t[0],t[1]),F(n,n,c),F(o,e[3],t[3]),F(o,o,d),F(i,e[2],t[2]),R(i,i,i),L(a,n,r),L(s,i,o),R(u,i,o),R(l,n,r),F(e[0],a,s),F(e[1],l,u),F(e[2],u,s),F(e[3],a,l)}function E(e,t,r){for(var n=0;n<4;++n)B(e[n],t[n],r)}function _(e,t){var r=N(),n=N(),o=N();!function(e,t){var r,n=N();for(r=0;r<16;++r)n[r]=t[r];for(r=253;r>=0;--r)D(n,n),2!==r&&4!==r&&F(n,n,t);for(r=0;r<16;++r)e[r]=n[r]}(o,t[2]),F(r,t[0],o),F(n,t[1],o),I(e,n),e[31]^=P(r)<<7}function I(e,t){var r,n,o,i=N(),a=N();for(r=0;r<16;++r)a[r]=t[r];for(M(a),M(a),M(a),n=0;n<2;++n){for(i[0]=a[0]-65517,r=1;r<15;++r)i[r]=a[r]-65535-(i[r-1]>>16&1),i[r-1]&=65535;i[15]=a[15]-32767-(i[14]>>16&1),o=i[15]>>16&1,i[14]&=65535,B(a,i,1-o)}for(r=0;r<16;r++)e[2*r]=255&a[r],e[2*r+1]=a[r]>>8}function O(e,t){var r=new l(32),n=new l(32);return I(r,e),I(n,t),x(r,0,n,0)}function x(e,t,r,n){return function(e,t,r,n,o){var i,a=0;for(i=0;i<32;++i)a|=e[t+i]^r[n+i];return(1&a-1>>>8)-1}(e,t,r,n)}function P(e){var t=new l(32);return I(t,e),1&t[0]}function k(e,t,r){var n,o;for(j(e[0],p),j(e[1],h),j(e[2],h),j(e[3],p),o=255;o>=0;--o)E(e,t,n=r[o/8|0]>>(7&o)&1),C(t,e),C(e,e),E(e,t,n)}function T(e,t){var r=[N(),N(),N(),N()];j(r[0],m),j(r[1],g),j(r[2],h),F(r[3],m,g),k(e,r,t)}function j(e,t){var r;for(r=0;r<16;r++)e[r]=0|t[r]}function M(e){var t,r,n=1;for(t=0;t<16;++t)r=e[t]+n+65535,n=Math.floor(r/65536),e[t]=r-65536*n;e[0]+=n-1+37*(n-1)}function B(e,t,r){for(var n,o=~(r-1),i=0;i<16;++i)n=o&(e[i]^t[i]),e[i]^=n,t[i]^=n}function N(e){var t,r=new Float64Array(16);if(e)for(t=0;t<e.length;++t)r[t]=e[t];return r}function R(e,t,r){for(var n=0;n<16;++n)e[n]=t[n]+r[n]}function L(e,t,r){for(var n=0;n<16;++n)e[n]=t[n]-r[n]}function D(e,t){F(e,t,t)}function F(e,t,r){var n,o,i=0,a=0,s=0,u=0,l=0,c=0,f=0,p=0,h=0,y=0,d=0,m=0,g=0,v=0,b=0,A=0,w=0,S=0,C=0,E=0,_=0,I=0,O=0,x=0,P=0,k=0,T=0,j=0,M=0,B=0,N=0,R=r[0],L=r[1],D=r[2],F=r[3],Q=r[4],G=r[5],U=r[6],z=r[7],H=r[8],q=r[9],V=r[10],K=r[11],Y=r[12],J=r[13],W=r[14],X=r[15];i+=(n=t[0])*R,a+=n*L,s+=n*D,u+=n*F,l+=n*Q,c+=n*G,f+=n*U,p+=n*z,h+=n*H,y+=n*q,d+=n*V,m+=n*K,g+=n*Y,v+=n*J,b+=n*W,A+=n*X,a+=(n=t[1])*R,s+=n*L,u+=n*D,l+=n*F,c+=n*Q,f+=n*G,p+=n*U,h+=n*z,y+=n*H,d+=n*q,m+=n*V,g+=n*K,v+=n*Y,b+=n*J,A+=n*W,w+=n*X,s+=(n=t[2])*R,u+=n*L,l+=n*D,c+=n*F,f+=n*Q,p+=n*G,h+=n*U,y+=n*z,d+=n*H,m+=n*q,g+=n*V,v+=n*K,b+=n*Y,A+=n*J,w+=n*W,S+=n*X,u+=(n=t[3])*R,l+=n*L,c+=n*D,f+=n*F,p+=n*Q,h+=n*G,y+=n*U,d+=n*z,m+=n*H,g+=n*q,v+=n*V,b+=n*K,A+=n*Y,w+=n*J,S+=n*W,C+=n*X,l+=(n=t[4])*R,c+=n*L,f+=n*D,p+=n*F,h+=n*Q,y+=n*G,d+=n*U,m+=n*z,g+=n*H,v+=n*q,b+=n*V,A+=n*K,w+=n*Y,S+=n*J,C+=n*W,E+=n*X,c+=(n=t[5])*R,f+=n*L,p+=n*D,h+=n*F,y+=n*Q,d+=n*G,m+=n*U,g+=n*z,v+=n*H,b+=n*q,A+=n*V,w+=n*K,S+=n*Y,C+=n*J,E+=n*W,_+=n*X,f+=(n=t[6])*R,p+=n*L,h+=n*D,y+=n*F,d+=n*Q,m+=n*G,g+=n*U,v+=n*z,b+=n*H,A+=n*q,w+=n*V,S+=n*K,C+=n*Y,E+=n*J,_+=n*W,I+=n*X,p+=(n=t[7])*R,h+=n*L,y+=n*D,d+=n*F,m+=n*Q,g+=n*G,v+=n*U,b+=n*z,A+=n*H,w+=n*q,S+=n*V,C+=n*K,E+=n*Y,_+=n*J,I+=n*W,O+=n*X,h+=(n=t[8])*R,y+=n*L,d+=n*D,m+=n*F,g+=n*Q,v+=n*G,b+=n*U,A+=n*z,w+=n*H,S+=n*q,C+=n*V,E+=n*K,_+=n*Y,I+=n*J,O+=n*W,x+=n*X,y+=(n=t[9])*R,d+=n*L,m+=n*D,g+=n*F,v+=n*Q,b+=n*G,A+=n*U,w+=n*z,S+=n*H,C+=n*q,E+=n*V,_+=n*K,I+=n*Y,O+=n*J,x+=n*W,P+=n*X,d+=(n=t[10])*R,m+=n*L,g+=n*D,v+=n*F,b+=n*Q,A+=n*G,w+=n*U,S+=n*z,C+=n*H,E+=n*q,_+=n*V,I+=n*K,O+=n*Y,x+=n*J,P+=n*W,k+=n*X,m+=(n=t[11])*R,g+=n*L,v+=n*D,b+=n*F,A+=n*Q,w+=n*G,S+=n*U,C+=n*z,E+=n*H,_+=n*q,I+=n*V,O+=n*K,x+=n*Y,P+=n*J,k+=n*W,T+=n*X,g+=(n=t[12])*R,v+=n*L,b+=n*D,A+=n*F,w+=n*Q,S+=n*G,C+=n*U,E+=n*z,_+=n*H,I+=n*q,O+=n*V,x+=n*K,P+=n*Y,k+=n*J,T+=n*W,j+=n*X,v+=(n=t[13])*R,b+=n*L,A+=n*D,w+=n*F,S+=n*Q,C+=n*G,E+=n*U,_+=n*z,I+=n*H,O+=n*q,x+=n*V,P+=n*K,k+=n*Y,T+=n*J,j+=n*W,M+=n*X,b+=(n=t[14])*R,A+=n*L,w+=n*D,S+=n*F,C+=n*Q,E+=n*G,_+=n*U,I+=n*z,O+=n*H,x+=n*q,P+=n*V,k+=n*K,T+=n*Y,j+=n*J,M+=n*W,B+=n*X,A+=(n=t[15])*R,a+=38*(S+=n*D),s+=38*(C+=n*F),u+=38*(E+=n*Q),l+=38*(_+=n*G),c+=38*(I+=n*U),f+=38*(O+=n*z),p+=38*(x+=n*H),h+=38*(P+=n*q),y+=38*(k+=n*V),d+=38*(T+=n*K),m+=38*(j+=n*Y),g+=38*(M+=n*J),v+=38*(B+=n*W),b+=38*(N+=n*X),i=(n=(i+=38*(w+=n*L))+(o=1)+65535)-65536*(o=Math.floor(n/65536)),a=(n=a+o+65535)-65536*(o=Math.floor(n/65536)),s=(n=s+o+65535)-65536*(o=Math.floor(n/65536)),u=(n=u+o+65535)-65536*(o=Math.floor(n/65536)),l=(n=l+o+65535)-65536*(o=Math.floor(n/65536)),c=(n=c+o+65535)-65536*(o=Math.floor(n/65536)),f=(n=f+o+65535)-65536*(o=Math.floor(n/65536)),p=(n=p+o+65535)-65536*(o=Math.floor(n/65536)),h=(n=h+o+65535)-65536*(o=Math.floor(n/65536)),y=(n=y+o+65535)-65536*(o=Math.floor(n/65536)),d=(n=d+o+65535)-65536*(o=Math.floor(n/65536)),m=(n=m+o+65535)-65536*(o=Math.floor(n/65536)),g=(n=g+o+65535)-65536*(o=Math.floor(n/65536)),v=(n=v+o+65535)-65536*(o=Math.floor(n/65536)),b=(n=b+o+65535)-65536*(o=Math.floor(n/65536)),A=(n=A+o+65535)-65536*(o=Math.floor(n/65536)),i=(n=(i+=o-1+37*(o-1))+(o=1)+65535)-65536*(o=Math.floor(n/65536)),a=(n=a+o+65535)-65536*(o=Math.floor(n/65536)),s=(n=s+o+65535)-65536*(o=Math.floor(n/65536)),u=(n=u+o+65535)-65536*(o=Math.floor(n/65536)),l=(n=l+o+65535)-65536*(o=Math.floor(n/65536)),c=(n=c+o+65535)-65536*(o=Math.floor(n/65536)),f=(n=f+o+65535)-65536*(o=Math.floor(n/65536)),p=(n=p+o+65535)-65536*(o=Math.floor(n/65536)),h=(n=h+o+65535)-65536*(o=Math.floor(n/65536)),y=(n=y+o+65535)-65536*(o=Math.floor(n/65536)),d=(n=d+o+65535)-65536*(o=Math.floor(n/65536)),m=(n=m+o+65535)-65536*(o=Math.floor(n/65536)),g=(n=g+o+65535)-65536*(o=Math.floor(n/65536)),v=(n=v+o+65535)-65536*(o=Math.floor(n/65536)),b=(n=b+o+65535)-65536*(o=Math.floor(n/65536)),A=(n=A+o+65535)-65536*(o=Math.floor(n/65536)),i+=o-1+37*(o-1),e[0]=i,e[1]=a,e[2]=s,e[3]=u,e[4]=l,e[5]=c,e[6]=f,e[7]=p,e[8]=h,e[9]=y,e[10]=d,e[11]=m,e[12]=g,e[13]=v,e[14]=b,e[15]=A}},function(e,t,r){var n=r(0);r(3);var o=n.asn1;t.privateKeyValidator={name:"PrivateKeyInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},t.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{tagClass:o.Class.UNIVERSAL,type:o.Type.BITSTRING,constructed:!1,composed:!0,captureBitStringValue:"ed25519PublicKey"}]}},function(e,t,r){var n=r(0);r(1),r(2),r(12),e.exports=n.kem=n.kem||{};var o=n.jsbn.BigInteger;function i(e,t,r,o){e.generate=function(e,i){for(var a=new n.util.ByteBuffer,s=Math.ceil(i/o)+r,u=new n.util.ByteBuffer,l=r;l<s;++l){u.putInt32(l),t.start(),t.update(e+u.getBytes());var c=t.digest();a.putBytes(c.getBytes(o))}return a.truncate(a.length()-i),a.getBytes()}}n.kem.rsa={},n.kem.rsa.create=function(e,t){var r=(t=t||{}).prng||n.random;return{encrypt:function(t,i){var a,s=Math.ceil(t.n.bitLength()/8);do{a=new o(n.util.bytesToHex(r.getBytesSync(s)),16).mod(t.n)}while(a.compareTo(o.ONE)<=0);var u=s-(a=n.util.hexToBytes(a.toString(16))).length;return u>0&&(a=n.util.fillString(String.fromCharCode(0),u)+a),{encapsulation:t.encrypt(a,"NONE"),key:e.generate(a,i)}},decrypt:function(t,r,n){var o=t.decrypt(r,"NONE");return e.generate(o,n)}}},n.kem.kdf1=function(e,t){i(this,e,0,t||e.digestLength)},n.kem.kdf2=function(e,t){i(this,e,1,t||e.digestLength)}},function(e,t,r){var n=r(0);r(1),e.exports=n.log=n.log||{},n.log.levels=["none","error","warning","info","debug","verbose","max"];var o={},i=[],a=null;n.log.LEVEL_LOCKED=2,n.log.NO_LEVEL_CHECK=4,n.log.INTERPOLATE=8;for(var s=0;s<n.log.levels.length;++s){var u=n.log.levels[s];o[u]={index:s,name:u.toUpperCase()}}n.log.logMessage=function(e){for(var t=o[e.level].index,r=0;r<i.length;++r){var a=i[r];a.flags&n.log.NO_LEVEL_CHECK?a.f(e):t<=o[a.level].index&&a.f(a,e)}},n.log.prepareStandard=function(e){"standard"in e||(e.standard=o[e.level].name+" ["+e.category+"] "+e.message)},n.log.prepareFull=function(e){if(!("full"in e)){var t=[e.message];t=t.concat([]||0),e.full=n.util.format.apply(this,t)}},n.log.prepareStandardFull=function(e){"standardFull"in e||(n.log.prepareStandard(e),e.standardFull=e.standard)};var l=["error","warning","info","debug","verbose"];for(s=0;s<l.length;++s)!function(e){n.log[e]=function(t,r){var o=Array.prototype.slice.call(arguments).slice(2),i={timestamp:new Date,level:e,category:t,message:r,arguments:o};n.log.logMessage(i)}}(l[s]);if(n.log.makeLogger=function(e){var t={flags:0,f:e};return n.log.setLevel(t,"none"),t},n.log.setLevel=function(e,t){var r=!1;if(e&&!(e.flags&n.log.LEVEL_LOCKED))for(var o=0;o<n.log.levels.length;++o)if(t==n.log.levels[o]){e.level=t,r=!0;break}return r},n.log.lock=function(e,t){void 0===t||t?e.flags|=n.log.LEVEL_LOCKED:e.flags&=~n.log.LEVEL_LOCKED},n.log.addLogger=function(e){i.push(e)},"undefined"!=typeof console&&"log"in console){var c;if(console.error&&console.warn&&console.info&&console.debug){var f={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},p=function(e,t){n.log.prepareStandard(t);var r=f[t.level],o=[t.standard];o=o.concat(t.arguments.slice()),r.apply(console,o)};c=n.log.makeLogger(p)}else p=function(e,t){n.log.prepareStandardFull(t),console.log(t.standardFull)},c=n.log.makeLogger(p);n.log.setLevel(c,"debug"),n.log.addLogger(c),a=c}else console={log:function(){}};if(null!==a&&"undefined"!=typeof window&&window.location){var h=new URL(window.location.href).searchParams;h.has("console.level")&&n.log.setLevel(a,h.get("console.level").slice(-1)[0]),h.has("console.lock")&&"true"==h.get("console.lock").slice(-1)[0]&&n.log.lock(a)}n.log.consoleLogger=a},function(e,t,r){e.exports=r(4),r(14),r(9),r(23),r(31)},function(e,t,r){var n=r(0);r(5),r(3),r(10),r(6),r(7),r(29),r(2),r(1),r(17);var o=n.asn1,i=e.exports=n.pkcs7=n.pkcs7||{};function a(e){var t={},r=[];if(!o.validate(e,i.asn1.recipientInfoValidator,t,r)){var a=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw a.errors=r,a}return{version:t.version.charCodeAt(0),issuer:n.pki.RDNAttributesAsArray(t.issuer),serialNumber:n.util.createBuffer(t.serial).toHex(),encryptedContent:{algorithm:o.derToOid(t.encAlgorithm),parameter:t.encParameter?t.encParameter.value:void 0,content:t.encKey}}}function u(e){var t=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(e.version).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[n.pki.distinguishedNameToAsn1({attributes:e.issuer}),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,n.util.hexToBytes(e.serialNumber))]),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(e.digestAlgorithm).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")])]);if(e.authenticatedAttributesAsn1&&t.value.push(e.authenticatedAttributesAsn1),t.value.push(o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(e.signatureAlgorithm).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")])),t.value.push(o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,e.signature)),e.unauthenticatedAttributes.length>0){for(var r=o.create(o.Class.CONTEXT_SPECIFIC,1,!0,[]),i=0;i<e.unauthenticatedAttributes.length;++i){var a=e.unauthenticatedAttributes[i];r.values.push(l(a))}t.value.push(r)}return t}function l(e){var t;if(e.type===n.pki.oids.contentType)t=o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(e.value).getBytes());else if(e.type===n.pki.oids.messageDigest)t=o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,e.value.bytes());else if(e.type===n.pki.oids.signingTime){var r=new Date("1950-01-01T00:00:00Z"),i=new Date("2050-01-01T00:00:00Z"),a=e.value;if("string"==typeof a){var s=Date.parse(a);a=isNaN(s)?13===a.length?o.utcTimeToDate(a):o.generalizedTimeToDate(a):new Date(s)}t=a>=r&&a<i?o.create(o.Class.UNIVERSAL,o.Type.UTCTIME,!1,o.dateToUtcTime(a)):o.create(o.Class.UNIVERSAL,o.Type.GENERALIZEDTIME,!1,o.dateToGeneralizedTime(a))}return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(e.type).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SET,!0,[t])])}function c(e,t,r){var i={};if(!o.validate(t,r,i,[])){var a=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw a.errors=a,a}if(o.derToOid(i.contentType)!==n.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(i.encryptedContent){var s="";if(n.util.isArray(i.encryptedContent))for(var u=0;u<i.encryptedContent.length;++u){if(i.encryptedContent[u].type!==o.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");s+=i.encryptedContent[u].value}else s=i.encryptedContent;e.encryptedContent={algorithm:o.derToOid(i.encAlgorithm),parameter:n.util.createBuffer(i.encParameter.value),content:n.util.createBuffer(s)}}if(i.content){if(s="",n.util.isArray(i.content))for(u=0;u<i.content.length;++u){if(i.content[u].type!==o.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");s+=i.content[u].value}else s=i.content;e.content=n.util.createBuffer(s)}return e.version=i.version.charCodeAt(0),e.rawCapture=i,i}function f(e){if(void 0===e.encryptedContent.key)throw new Error("Symmetric key not available.");if(void 0===e.content){var t;switch(e.encryptedContent.algorithm){case n.pki.oids["aes128-CBC"]:case n.pki.oids["aes192-CBC"]:case n.pki.oids["aes256-CBC"]:t=n.aes.createDecryptionCipher(e.encryptedContent.key);break;case n.pki.oids.desCBC:case n.pki.oids["des-EDE3-CBC"]:t=n.des.createDecryptionCipher(e.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+e.encryptedContent.algorithm)}if(t.start(e.encryptedContent.parameter),t.update(e.encryptedContent.content),!t.finish())throw new Error("Symmetric decryption failed.");e.content=t.output}}i.messageFromPem=function(e){var t=n.pem.decode(e)[0];if("PKCS7"!==t.type){var r=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw r.headerType=t.type,r}if(t.procType&&"ENCRYPTED"===t.procType.type)throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var a=o.fromDer(t.body);return i.messageFromAsn1(a)},i.messageToPem=function(e,t){var r={type:"PKCS7",body:o.toDer(e.toAsn1()).getBytes()};return n.pem.encode(r,{maxline:t})},i.messageFromAsn1=function(e){var t={},r=[];if(!o.validate(e,i.asn1.contentInfoValidator,t,r)){var a=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw a.errors=r,a}var s,u=o.derToOid(t.contentType);switch(u){case n.pki.oids.envelopedData:s=i.createEnvelopedData();break;case n.pki.oids.encryptedData:s=i.createEncryptedData();break;case n.pki.oids.signedData:s=i.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+u+" is not (yet) supported.")}return s.fromAsn1(t.content.value[0]),s},i.createSignedData=function(){var e=null;return e={type:n.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(t){if(c(e,t,i.asn1.signedDataValidator),e.certificates=[],e.crls=[],e.digestAlgorithmIdentifiers=[],e.contentInfo=null,e.signerInfos=[],e.rawCapture.certificates)for(var r=e.rawCapture.certificates.value,o=0;o<r.length;++o)e.certificates.push(n.pki.certificateFromAsn1(r[o]))},toAsn1:function(){e.contentInfo||e.sign();for(var t=[],r=0;r<e.certificates.length;++r)t.push(n.pki.certificateToAsn1(e.certificates[r]));var i=[],a=o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(e.version).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SET,!0,e.digestAlgorithmIdentifiers),e.contentInfo])]);return t.length>0&&a.value[0].value.push(o.create(o.Class.CONTEXT_SPECIFIC,0,!0,t)),i.length>0&&a.value[0].value.push(o.create(o.Class.CONTEXT_SPECIFIC,1,!0,i)),a.value[0].value.push(o.create(o.Class.UNIVERSAL,o.Type.SET,!0,e.signerInfos)),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(e.type).getBytes()),a])},addSigner:function(t){var r=t.issuer,o=t.serialNumber;if(t.certificate){var i=t.certificate;"string"==typeof i&&(i=n.pki.certificateFromPem(i)),r=i.issuer.attributes,o=i.serialNumber}var a=t.key;if(!a)throw new Error("Could not add PKCS#7 signer; no private key specified.");"string"==typeof a&&(a=n.pki.privateKeyFromPem(a));var s=t.digestAlgorithm||n.pki.oids.sha1;switch(s){case n.pki.oids.sha1:case n.pki.oids.sha256:case n.pki.oids.sha384:case n.pki.oids.sha512:case n.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+s)}var u=t.authenticatedAttributes||[];if(u.length>0){for(var l=!1,c=!1,f=0;f<u.length;++f){var p=u[f];if(l||p.type!==n.pki.oids.contentType){if(c||p.type!==n.pki.oids.messageDigest);else if(c=!0,l)break}else if(l=!0,c)break}if(!l||!c)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}e.signers.push({key:a,version:1,issuer:r,serialNumber:o,digestAlgorithm:s,signatureAlgorithm:n.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:u,unauthenticatedAttributes:[]})},sign:function(t){var r;t=t||{},("object"!=s(e.content)||null===e.contentInfo)&&(e.contentInfo=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(n.pki.oids.data).getBytes())]),"content"in e&&(e.content instanceof n.util.ByteBuffer?r=e.content.bytes():"string"==typeof e.content&&(r=n.util.encodeUtf8(e.content)),t.detached?e.detachedContent=o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,r):e.contentInfo.value.push(o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,r)])))),0!==e.signers.length&&function(t){var r;if(!(r=e.detachedContent?e.detachedContent:(r=e.contentInfo.value[1]).value[0]))throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var i=o.derToOid(e.contentInfo.value[0].value),a=o.toDer(r);for(var s in a.getByte(),o.getBerValueLength(a),a=a.getBytes(),t)t[s].start().update(a);for(var c=new Date,f=0;f<e.signers.length;++f){var p=e.signers[f];if(0===p.authenticatedAttributes.length){if(i!==n.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{p.authenticatedAttributesAsn1=o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var h=o.create(o.Class.UNIVERSAL,o.Type.SET,!0,[]),y=0;y<p.authenticatedAttributes.length;++y){var d=p.authenticatedAttributes[y];d.type===n.pki.oids.messageDigest?d.value=t[p.digestAlgorithm].digest():d.type===n.pki.oids.signingTime&&(d.value||(d.value=c)),h.value.push(l(d)),p.authenticatedAttributesAsn1.value.push(l(d))}a=o.toDer(h).getBytes(),p.md.start().update(a)}p.signature=p.key.sign(p.md,"RSASSA-PKCS1-V1_5")}e.signerInfos=function(e){for(var t=[],r=0;r<e.length;++r)t.push(u(e[r]));return t}(e.signers)}(function(){for(var t={},r=0;r<e.signers.length;++r){var i=e.signers[r];(a=i.digestAlgorithm)in t||(t[a]=n.md[n.pki.oids[a]].create()),0===i.authenticatedAttributes.length?i.md=t[a]:i.md=n.md[n.pki.oids[a]].create()}for(var a in e.digestAlgorithmIdentifiers=[],t)e.digestAlgorithmIdentifiers.push(o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(a).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")]));return t}())},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(t){"string"==typeof t&&(t=n.pki.certificateFromPem(t)),e.certificates.push(t)},addCertificateRevokationList:function(e){throw new Error("PKCS#7 CRL support not yet implemented.")}}},i.createEncryptedData=function(){var e=null;return e={type:n.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:n.pki.oids["aes256-CBC"]},fromAsn1:function(t){c(e,t,i.asn1.encryptedDataValidator)},decrypt:function(t){void 0!==t&&(e.encryptedContent.key=t),f(e)}}},i.createEnvelopedData=function(){var e=null;return e={type:n.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:n.pki.oids["aes256-CBC"]},fromAsn1:function(t){var r=c(e,t,i.asn1.envelopedDataValidator);e.recipients=function(e){for(var t=[],r=0;r<e.length;++r)t.push(a(e[r]));return t}(r.recipientInfos.value)},toAsn1:function(){return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(e.type).getBytes()),o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(e.version).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SET,!0,function(e){for(var t,r=[],i=0;i<e.length;++i)r.push((t=e[i],o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(t.version).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[n.pki.distinguishedNameToAsn1({attributes:t.issuer}),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,n.util.hexToBytes(t.serialNumber))]),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(t.encryptedContent.algorithm).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")]),o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,t.encryptedContent.content)])));return r}(e.recipients)),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,(t=e.encryptedContent,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(n.pki.oids.data).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(t.algorithm).getBytes()),t.parameter?o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,t.parameter.getBytes()):void 0]),o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,t.content.getBytes())])]))])])]);var t},findRecipient:function(t){for(var r=t.issuer.attributes,n=0;n<e.recipients.length;++n){var o=e.recipients[n],i=o.issuer;if(o.serialNumber===t.serialNumber&&i.length===r.length){for(var a=!0,s=0;s<r.length;++s)if(i[s].type!==r[s].type||i[s].value!==r[s].value){a=!1;break}if(a)return o}}return null},decrypt:function(t,r){if(void 0===e.encryptedContent.key&&void 0!==t&&void 0!==r)switch(t.encryptedContent.algorithm){case n.pki.oids.rsaEncryption:case n.pki.oids.desCBC:var o=r.decrypt(t.encryptedContent.content);e.encryptedContent.key=n.util.createBuffer(o);break;default:throw new Error("Unsupported asymmetric cipher, OID "+t.encryptedContent.algorithm)}f(e)},addRecipient:function(t){e.recipients.push({version:0,issuer:t.issuer.attributes,serialNumber:t.serialNumber,encryptedContent:{algorithm:n.pki.oids.rsaEncryption,key:t.publicKey}})},encrypt:function(t,r){if(void 0===e.encryptedContent.content){var o,i,a;switch(r=r||e.encryptedContent.algorithm,t=t||e.encryptedContent.key,r){case n.pki.oids["aes128-CBC"]:o=16,i=16,a=n.aes.createEncryptionCipher;break;case n.pki.oids["aes192-CBC"]:o=24,i=16,a=n.aes.createEncryptionCipher;break;case n.pki.oids["aes256-CBC"]:o=32,i=16,a=n.aes.createEncryptionCipher;break;case n.pki.oids["des-EDE3-CBC"]:o=24,i=8,a=n.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+r)}if(void 0===t)t=n.util.createBuffer(n.random.getBytes(o));else if(t.length()!=o)throw new Error("Symmetric key has wrong length; got "+t.length()+" bytes, expected "+o+".");e.encryptedContent.algorithm=r,e.encryptedContent.key=t,e.encryptedContent.parameter=n.util.createBuffer(n.random.getBytes(i));var s=a(t);if(s.start(e.encryptedContent.parameter.copy()),s.update(e.content),!s.finish())throw new Error("Symmetric encryption failed.");e.encryptedContent.content=s.output}for(var u=0;u<e.recipients.length;++u){var l=e.recipients[u];if(void 0===l.encryptedContent.content)switch(l.encryptedContent.algorithm){case n.pki.oids.rsaEncryption:l.encryptedContent.content=l.encryptedContent.key.encrypt(e.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+l.encryptedContent.algorithm)}}}}}},function(e,t,r){var n=r(0);r(5),r(8),r(14),r(9),r(1);var o=e.exports=n.ssh=n.ssh||{};function i(e,t){var r=t.toString(16);r[0]>="8"&&(r="00"+r);var o=n.util.hexToBytes(r);e.putInt32(o.length),e.putBytes(o)}function a(e,t){e.putInt32(t.length),e.putString(t)}function s(){for(var e=n.md.sha1.create(),t=arguments.length,r=0;r<t;++r)e.update(arguments[r]);return e.digest()}o.privateKeyToPutty=function(e,t,r){var o=""===(t=t||"")?"none":"aes256-cbc",u="PuTTY-User-Key-File-2: ssh-rsa\r\n";u+="Encryption: "+o+"\r\n",u+="Comment: "+(r=r||"")+"\r\n";var l=n.util.createBuffer();a(l,"ssh-rsa"),i(l,e.e),i(l,e.n);var c=n.util.encode64(l.bytes(),64),f=Math.floor(c.length/66)+1;u+="Public-Lines: "+f+"\r\n",u+=c;var p,h=n.util.createBuffer();if(i(h,e.d),i(h,e.p),i(h,e.q),i(h,e.qInv),t){var y=h.length()+16-1;y-=y%16;var d=s(h.bytes());d.truncate(d.length()-y+h.length()),h.putBuffer(d);var m=n.util.createBuffer();m.putBuffer(s("\0\0\0\0",t)),m.putBuffer(s("\0\0\0",t));var g=n.aes.createEncryptionCipher(m.truncate(8),"CBC");g.start(n.util.createBuffer().fillWithByte(0,16)),g.update(h.copy()),g.finish();var v=g.output;v.truncate(16),p=n.util.encode64(v.bytes(),64)}else p=n.util.encode64(h.bytes(),64);u+="\r\nPrivate-Lines: "+(f=Math.floor(p.length/66)+1)+"\r\n",u+=p;var b=s("putty-private-key-file-mac-key",t),A=n.util.createBuffer();a(A,"ssh-rsa"),a(A,o),a(A,r),A.putInt32(l.length()),A.putBuffer(l),A.putInt32(h.length()),A.putBuffer(h);var w=n.hmac.create();return w.start("sha1",b),w.update(A.bytes()),u+"\r\nPrivate-MAC: "+w.digest().toHex()+"\r\n"},o.publicKeyToOpenSSH=function(e,t){t=t||"";var r=n.util.createBuffer();return a(r,"ssh-rsa"),i(r,e.e),i(r,e.n),"ssh-rsa "+n.util.encode64(r.bytes())+" "+t},o.privateKeyToOpenSSH=function(e,t){return t?n.pki.encryptRsaPrivateKey(e,t,{legacy:!0,algorithm:"aes128"}):n.pki.privateKeyToPem(e)},o.getPublicKeyFingerprint=function(e,t){var r=(t=t||{}).md||n.md.md5.create(),o=n.util.createBuffer();a(o,"ssh-rsa"),i(o,e.e),i(o,e.n),r.start(),r.update(o.getBytes());var s=r.digest();if("hex"===t.encoding){var u=s.toHex();return t.delimiter?u.match(/.{2}/g).join(t.delimiter):u}if("binary"===t.encoding)return s.getBytes();if(t.encoding)throw new Error('Unknown encoding "'+t.encoding+'".');return s}}])},"object"==s(t)&&"object"==s(e)?e.exports=a():(o=[],void 0===(i="function"==typeof(n=a)?n.apply(t,o):n)||(e.exports=i))},7943:function(e,t,r){"use strict";var n=r(1059),o=r(7636),i=r(428),a=function(e){return function(t,r,a){var s=n(t),u=i(s);if(0===u)return!e&&-1;var l,c=o(a,u);if(e&&r!=r){for(;u>c;)if((l=s[c++])!=l)return!0}else for(;u>c;c++)if((e||c in s)&&s[c]===r)return e||c||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},8142:function(e,t,r){"use strict";r(494);var n=r(9385);e.exports=n.f("asyncIterator")},8167:function(e,t,r){"use strict";var n=r(9707),o=r(6220),i=r(3443),a=r(2968),s=r(5720),u=r(7709),l=TypeError,c=u("toPrimitive");e.exports=function(e,t){if(!o(e)||i(e))return e;var r,u=a(e,c);if(u){if(void 0===t&&(t="default"),r=n(u,e,t),!o(r)||i(r))return r;throw new l("Can't convert object to primitive value")}return void 0===t&&(t="number"),s(e,t)}},8461:function(e,t,r){var n,o,i;function a(e){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e=r.nmd(e),(i={}).Constants={},i.Math={},i.Accumulator={},function(e){"use strict";e.WGS84={a:6378137,f:1/298.257223563},e.version={major:2,minor:1,patch:1},e.version_string="2.1.1"}(i.Constants),function(e){"use strict";e.digits=53,e.epsilon=Math.pow(.5,e.digits-1),e.degree=Math.PI/180,e.sq=function(e){return e*e},e.hypot=function(e,t){return Math.sqrt(e*e+t*t)},e.cbrt=Math.cbrt||function(e){var t=Math.pow(Math.abs(e),1/3);return e>0?t:e<0?-t:e},e.log1p=Math.log1p||function(e){var t=1+e,r=t-1;return 0===r?e:e*Math.log(t)/r},e.atanh=Math.atanh||function(t){var r=Math.abs(t);return r=e.log1p(2*r/(1-r))/2,t>0?r:t<0?-r:t},e.copysign=function(e,t){return Math.abs(e)*(t<0||0===t&&1/t<0?-1:1)},e.sum=function(e,t){var r=e+t,n=r-t,o=r-n;return n-=e,{s:r,t:r?0-(n+(o-=t)):r}},e.polyval=function(e,t,r,n){for(var o=e<0?0:t[r++];--e>=0;)o=o*n+t[r++];return o},e.AngRound=function(t){var r=1/16,n=Math.abs(t);return n=n<r?r-(r-n):n,e.copysign(n,t)},e.remainder=function(e,t){return(e%=t)<-t/2?e+t:e<t/2?e:e-t},e.AngNormalize=function(t){var r=e.remainder(t,360);return 180===Math.abs(r)?e.copysign(180,t):r},e.LatFix=function(e){return Math.abs(e)>90?NaN:e},e.AngDiff=function(t,r){var n,o,i=e.sum(e.remainder(-t,360),e.remainder(r,360));return n=(i=e.sum(e.remainder(i.s,360),i.t)).s,o=i.t,0!==n&&180!==Math.abs(n)||(n=e.copysign(n,0===o?r-t:-o)),{d:n,e:o}},e.sincosd=function(t){var r,n,o,i,a,s,u;switch(r=t%360,n=(r-=90*(o=Math.round(r/90)))*this.degree,i=Math.sin(n),a=Math.cos(n),45===Math.abs(r)?(a=Math.sqrt(.5),i=e.copysign(a,n)):30===Math.abs(r)&&(a=Math.sqrt(.75),i=e.copysign(.5,n)),3&o){case 0:s=i,u=a;break;case 1:s=a,u=-i;break;case 2:s=-i,u=-a;break;default:s=-a,u=i}return u+=0,0===s&&(s=e.copysign(s,t)),{s:s,c:u}},e.sincosde=function(t,r){var n,o,i,a,s,u,l;switch(n=t%360,i=Math.round(n/90),o=(n=e.AngRound(n-90*i+r))*this.degree,a=Math.sin(o),s=Math.cos(o),45===Math.abs(n)?(s=Math.sqrt(.5),a=e.copysign(s,o)):30===Math.abs(n)&&(s=Math.sqrt(.75),a=e.copysign(.5,o)),3&i){case 0:u=a,l=s;break;case 1:u=s,l=-a;break;case 2:u=-a,l=-s;break;default:u=-s,l=a}return l+=0,0===u&&(u=e.copysign(u,t+r)),{s:u,c:l}},e.atan2d=function(t,r){var n,o=0;if(Math.abs(t)>Math.abs(r)){var i=[r,t];t=i[0],r=i[1],o=2}switch(e.copysign(1,r)<0&&(r=-r,++o),n=Math.atan2(t,r)/this.degree,o){case 1:n=e.copysign(180,t)-n;break;case 2:n=90-n;break;case 3:n=-90+n}return n}}(i.Math),function(e,t){"use strict";e.Accumulator=function(e){this.Set(e)},e.Accumulator.prototype.Set=function(t){t||(t=0),t.constructor===e.Accumulator?(this._s=t._s,this._t=t._t):(this._s=t,this._t=0)},e.Accumulator.prototype.Add=function(e){var r=t.sum(e,this._t),n=t.sum(r.s,this._s);r=r.t,this._s=n.s,this._t=n.t,0===this._s?this._s=r:this._t+=r},e.Accumulator.prototype.Sum=function(t){var r;return t?((r=new e.Accumulator(this)).Add(t),r._s):this._s},e.Accumulator.prototype.Negate=function(){this._s*=-1,this._t*=-1},e.Accumulator.prototype.Remainder=function(e){this._s=t.remainder(this._s,e),this.Add(0)}}(i.Accumulator,i.Math),i.Geodesic={},i.GeodesicLine={},i.PolygonArea={},function(e,t,r,n,o){"use strict";var i,a,s,u,l,c,f,p,h,y,d,m=20+n.digits+10,g=n.epsilon,v=200*g,b=Math.sqrt(g),A=g,w=1e3*b;e.tiny_=Math.sqrt(Number.MIN_VALUE/Number.EPSILON),e.nC1_=6,e.nC1p_=6,e.nC2_=6,e.nC3_=6,e.nC4_=6,i=e.nC3_*(e.nC3_-1)/2,a=e.nC4_*(e.nC4_+1)/2,e.CAP_C1=1,e.CAP_C1p=2,e.CAP_C2=4,e.CAP_C3=8,e.CAP_C4=16,e.NONE=0,e.ARC=64,e.LATITUDE=128,e.LONGITUDE=256|e.CAP_C3,e.AZIMUTH=512,e.DISTANCE=1024|e.CAP_C1,e.STANDARD=e.LATITUDE|e.LONGITUDE|e.AZIMUTH|e.DISTANCE,e.DISTANCE_IN=2048|e.CAP_C1|e.CAP_C1p,e.REDUCEDLENGTH=4096|e.CAP_C1|e.CAP_C2,e.GEODESICSCALE=8192|e.CAP_C1|e.CAP_C2,e.AREA=16384|e.CAP_C4,e.ALL=32671,e.LONG_UNROLL=32768,e.OUT_MASK=32640|e.LONG_UNROLL,e.SinCosSeries=function(e,t,r,n){var o=n.length,i=o-(e?1:0),a=2*(r-t)*(r+t),s=1&i?n[--o]:0,u=0;for(i=Math.floor(i/2);i--;)s=a*(u=a*s-u+n[--o])-s+n[--o];return e?2*t*r*s:r*(s-u)},s=function(e,t){var r,o,i,a,s,u,l,c,f,p,h,y,d=n.sq(e),m=n.sq(t),g=(d+m-1)/6;return 0===m&&g<=0?r=0:(u=g,(s=(o=d*m/4)*(o+2*(a=g*(i=n.sq(g)))))>=0?(l=o+a,l+=l<0?-Math.sqrt(s):Math.sqrt(s),u+=(c=n.cbrt(l))+(0!==c?i/c:0)):(f=Math.atan2(Math.sqrt(-s),-(o+a)),u+=2*g*Math.cos(f/3)),p=Math.sqrt(n.sq(u)+m),y=((h=u<0?m/(p-u):u+p)-m)/(2*p),r=h/(Math.sqrt(h+n.sq(y))+y)),r},u=[1,4,64,0,256],e.A1m1f=function(e){var t=Math.floor(3);return(n.polyval(t,u,0,n.sq(e))/u[t+1]+e)/(1-e)},l=[-1,6,-16,32,-9,64,-128,2048,9,-16,768,3,-5,512,-7,1280,-7,2048],e.C1f=function(t,r){var o,i,a=n.sq(t),s=t,u=0;for(o=1;o<=e.nC1_;++o)i=Math.floor((e.nC1_-o)/2),r[o]=s*n.polyval(i,l,u,a)/l[u+i+1],u+=i+2,s*=t},c=[205,-432,768,1536,4005,-4736,3840,12288,-225,116,384,-7173,2695,7680,3467,7680,38081,61440],e.C1pf=function(t,r){var o,i,a=n.sq(t),s=t,u=0;for(o=1;o<=e.nC1p_;++o)i=Math.floor((e.nC1p_-o)/2),r[o]=s*n.polyval(i,c,u,a)/c[u+i+1],u+=i+2,s*=t},f=[-11,-28,-192,0,256],e.A2m1f=function(e){var t=Math.floor(3);return(n.polyval(t,f,0,n.sq(e))/f[t+1]-e)/(1+e)},p=[1,2,16,32,35,64,384,2048,15,80,768,7,35,512,63,1280,77,2048],e.C2f=function(t,r){var o,i,a=n.sq(t),s=t,u=0;for(o=1;o<=e.nC2_;++o)i=Math.floor((e.nC2_-o)/2),r[o]=s*n.polyval(i,p,u,a)/p[u+i+1],u+=i+2,s*=t},e.Geodesic=function(e,t){if(this.a=e,this.f=t,this._f1=1-this.f,this._e2=this.f*(2-this.f),this._ep2=this._e2/n.sq(this._f1),this._n=this.f/(2-this.f),this._b=this.a*this._f1,this._c2=(n.sq(this.a)+n.sq(this._b)*(0===this._e2?1:(this._e2>0?n.atanh(Math.sqrt(this._e2)):Math.atan(Math.sqrt(-this._e2)))/Math.sqrt(Math.abs(this._e2))))/2,this._etol2=.1*b/Math.sqrt(Math.max(.001,Math.abs(this.f))*Math.min(1,1-this.f/2)/2),!(isFinite(this.a)&&this.a>0))throw new Error("Equatorial radius is not positive");if(!(isFinite(this._b)&&this._b>0))throw new Error("Polar semi-axis is not positive");this._A3x=new Array(6),this._C3x=new Array(i),this._C4x=new Array(a),this.A3coeff(),this.C3coeff(),this.C4coeff()},h=[-3,128,-2,-3,64,-1,-3,-1,16,3,-1,-2,8,1,-1,2,1,1],e.Geodesic.prototype.A3coeff=function(){var e,t,r=0,o=0;for(e=5;e>=0;--e)t=Math.min(6-e-1,e),this._A3x[o++]=n.polyval(t,h,r,this._n)/h[r+t+1],r+=t+2},y=[3,128,2,5,128,-1,3,3,64,-1,0,1,8,-1,1,4,5,256,1,3,128,-3,-2,3,64,1,-3,2,32,7,512,-10,9,384,5,-9,5,192,7,512,-14,7,512,21,2560],e.Geodesic.prototype.C3coeff=function(){var t,r,o,i=0,a=0;for(t=1;t<e.nC3_;++t)for(r=e.nC3_-1;r>=t;--r)o=Math.min(e.nC3_-r-1,r),this._C3x[a++]=n.polyval(o,y,i,this._n)/y[i+o+1],i+=o+2},d=[97,15015,1088,156,45045,-224,-4784,1573,45045,-10656,14144,-4576,-858,45045,64,624,-4576,6864,-3003,15015,100,208,572,3432,-12012,30030,45045,1,9009,-2944,468,135135,5792,1040,-1287,135135,5952,-11648,9152,-2574,135135,-64,-624,4576,-6864,3003,135135,8,10725,1856,-936,225225,-8448,4992,-1144,225225,-1440,4160,-4576,1716,225225,-136,63063,1024,-208,105105,3584,-3328,1144,315315,-128,135135,-2560,832,405405,128,99099],e.Geodesic.prototype.C4coeff=function(){var t,r,o,i=0,a=0;for(t=0;t<e.nC4_;++t)for(r=e.nC4_-1;r>=t;--r)o=e.nC4_-r-1,this._C4x[a++]=n.polyval(o,d,i,this._n)/d[i+o+1],i+=o+2},e.Geodesic.prototype.A3f=function(e){return n.polyval(5,this._A3x,0,e)},e.Geodesic.prototype.C3f=function(t,r){var o,i,a=1,s=0;for(o=1;o<e.nC3_;++o)i=e.nC3_-o-1,a*=t,r[o]=a*n.polyval(i,this._C3x,s,t),s+=i+1},e.Geodesic.prototype.C4f=function(t,r){var o,i,a=1,s=0;for(o=0;o<e.nC4_;++o)i=e.nC4_-o-1,r[o]=a*n.polyval(i,this._C4x,s,t),s+=i+1,a*=t},e.Geodesic.prototype.Lengths=function(t,r,n,o,i,a,s,u,l,c,f,p,h){var y,d,m,g,v={},b=0,A=0,w=0,S=0;if((f&=e.OUT_MASK)&(e.DISTANCE|e.REDUCEDLENGTH|e.GEODESICSCALE)&&(w=e.A1m1f(t),e.C1f(t,p),f&(e.REDUCEDLENGTH|e.GEODESICSCALE)&&(S=e.A2m1f(t),e.C2f(t,h),b=w-S,S=1+S),w=1+w),f&e.DISTANCE)y=e.SinCosSeries(!0,a,s,p)-e.SinCosSeries(!0,n,o,p),v.s12b=w*(r+y),f&(e.REDUCEDLENGTH|e.GEODESICSCALE)&&(A=b*r+(w*y-S*(e.SinCosSeries(!0,a,s,h)-e.SinCosSeries(!0,n,o,h))));else if(f&(e.REDUCEDLENGTH|e.GEODESICSCALE)){for(d=1;d<=e.nC2_;++d)h[d]=w*p[d]-S*h[d];A=b*r+(e.SinCosSeries(!0,a,s,h)-e.SinCosSeries(!0,n,o,h))}return f&e.REDUCEDLENGTH&&(v.m0=b,v.m12b=u*(o*a)-i*(n*s)-o*s*A),f&e.GEODESICSCALE&&(m=o*s+n*a,g=this._ep2*(l-c)*(l+c)/(i+u),v.M12=m+(g*a-s*A)*n/i,v.M21=m-(g*n-o*A)*a/u),v},e.Geodesic.prototype.InverseStart=function(t,r,o,i,a,u,l,c,f,p,h){var y,d,m,g,b,A,S,C,E,_,I,O,x,P,k,T,j,M,B,N,R={},L=i*r-a*t,D=a*r+i*t;return R.sig12=-1,y=i*r,y+=a*t,(d=D>=0&&L<.5&&a*l<.5)?(g=n.sq(t+i),g/=g+n.sq(r+a),R.dnm=Math.sqrt(1+this._ep2*g),m=l/(this._f1*R.dnm),b=Math.sin(m),A=Math.cos(m)):(b=c,A=f),R.salp1=a*b,R.calp1=A>=0?L+a*t*n.sq(b)/(1+A):y-a*t*n.sq(b)/(1-A),C=n.hypot(R.salp1,R.calp1),E=t*i+r*a*A,d&&C<this._etol2?(R.salp2=r*b,R.calp2=L-r*i*(A>=0?n.sq(b)/(1+A):1-A),S=n.hypot(R.salp2,R.calp2),R.salp2/=S,R.calp2/=S,R.sig12=Math.atan2(C,E)):Math.abs(this._n)>.1||E>=0||C>=6*Math.abs(this._n)*Math.PI*n.sq(r)||(N=Math.atan2(-c,-f),this.f>=0?(P=(x=n.sq(t)*this._ep2)/(2*(1+Math.sqrt(1+x))+x),_=N/(O=this.f*r*this.A3f(P)*Math.PI),I=y/(O*r)):(k=a*r-i*t,T=Math.atan2(y,k),I=l/(O=((_=(j=this.Lengths(this._n,Math.PI+T,t,-r,o,i,a,u,r,a,e.REDUCEDLENGTH,p,h)).m12b/(r*a*j.m0*Math.PI)-1)<-.01?y/_:-this.f*n.sq(r)*Math.PI)/r)),I>-v&&_>-1-w?this.f>=0?(R.salp1=Math.min(1,-_),R.calp1=-Math.sqrt(1-n.sq(R.salp1))):(R.calp1=Math.max(_>-v?0:-1,_),R.salp1=Math.sqrt(1-n.sq(R.calp1))):(M=s(_,I),B=O*(this.f>=0?-_*M/(1+M):-I*(1+M)/M),b=Math.sin(B),A=-Math.cos(B),R.salp1=a*b,R.calp1=y-a*t*n.sq(b)/(1-A))),R.salp1<=0?(R.salp1=1,R.calp1=0):(S=n.hypot(R.salp1,R.calp1),R.salp1/=S,R.calp1/=S),R},e.Geodesic.prototype.Lambda12=function(t,r,o,i,a,s,u,l,c,f,p,h,y,d){var m,g,v,b,A,w,S,C,E,_,I,O,x,P={};return 0===t&&0===l&&(l=-e.tiny_),g=u*r,v=n.hypot(l,u*t),P.ssig1=t,b=g*t,P.csig1=A=l*r,m=n.hypot(P.ssig1,P.csig1),P.ssig1/=m,P.csig1/=m,P.salp2=a!==r?g/a:u,P.calp2=a!==r||Math.abs(i)!==-t?Math.sqrt(n.sq(l*r)+(r<-t?(a-r)*(r+a):(t-i)*(t+i)))/a:Math.abs(l),P.ssig2=i,w=g*i,P.csig2=S=P.calp2*a,m=n.hypot(P.ssig2,P.csig2),P.ssig2/=m,P.csig2/=m,P.sig12=Math.atan2(Math.max(0,P.csig1*P.ssig2-P.ssig1*P.csig2),P.csig1*P.csig2+P.ssig1*P.ssig2),C=Math.max(0,A*w-b*S),E=A*S+b*w,I=Math.atan2(C*f-E*c,E*f+C*c),O=n.sq(v)*this._ep2,P.eps=O/(2*(1+Math.sqrt(1+O))+O),this.C3f(P.eps,d),_=e.SinCosSeries(!0,P.ssig2,P.csig2,d)-e.SinCosSeries(!0,P.ssig1,P.csig1,d),P.domg12=-this.f*this.A3f(P.eps)*g*(P.sig12+_),P.lam12=I+P.domg12,p&&(0===P.calp2?P.dlam12=-2*this._f1*o/t:(x=this.Lengths(P.eps,P.sig12,P.ssig1,P.csig1,o,P.ssig2,P.csig2,s,r,a,e.REDUCEDLENGTH,h,y),P.dlam12=x.m12b,P.dlam12*=this._f1/(P.calp2*a))),P},e.Geodesic.prototype.Inverse=function(t,r,o,i,a){var s,u;return a||(a=e.STANDARD),a===e.LONG_UNROLL&&(a|=e.STANDARD),a&=e.OUT_MASK,u=(s=this.InverseInt(t,r,o,i,a)).vals,a&e.AZIMUTH&&(u.azi1=n.atan2d(s.salp1,s.calp1),u.azi2=n.atan2d(s.salp2,s.calp2)),u},e.Geodesic.prototype.InverseInt=function(t,r,o,i,a){var s,u,l,c,f,p,h,y,d,v,b,w,S,C,E,_,I,O,x,P,k,T,j,M,B,N,R,L,D,F,Q,G,U,z,H,q,V,K,Y,J,W,X,Z,$,ee,te,re,ne,oe,ie,ae,se,ue,le,ce,fe,pe,he,ye,de,me,ge,ve,be,Ae,we={};if(we.lat1=t=n.LatFix(t),we.lat2=o=n.LatFix(o),t=n.AngRound(t),o=n.AngRound(o),u=(s=n.AngDiff(r,i)).e,s=s.d,a&e.LONG_UNROLL?(we.lon1=r,we.lon2=r+s+u):(we.lon1=n.AngNormalize(r),we.lon2=n.AngNormalize(i)),u*=l=n.copysign(1,s),E=(s*=l)*n.degree,_=(c=n.sincosde(s,u)).s,I=c.c,u=180-s-u,(f=Math.abs(t)<Math.abs(o)||isNaN(o)?-1:1)<0){l*=-1;var Se=[t,o];o=Se[0],t=Se[1]}if(t*=p=n.copysign(1,-t),o*=p,c=n.sincosd(t),h=this._f1*c.s,y=c.c,h/=c=n.hypot(h,y),y/=c,y=Math.max(e.tiny_,y),c=n.sincosd(o),d=this._f1*c.s,v=c.c,d/=c=n.hypot(d,v),v/=c,v=Math.max(e.tiny_,v),y<-h?v===y&&(d=n.copysign(h,d)):Math.abs(d)===-h&&(v=y),S=Math.sqrt(1+this._ep2*n.sq(h)),C=Math.sqrt(1+this._ep2*n.sq(d)),j=new Array(e.nC1_+1),M=new Array(e.nC2_+1),B=new Array(e.nC3_),(N=-90===t||0===_)&&(P=_,T=0,L=h,D=(x=I)*y,F=d,Q=(k=1)*v,O=Math.atan2(Math.max(0,D*F-L*Q),D*Q+L*F),b=(R=this.Lengths(this._n,O,L,D,S,F,Q,C,y,v,a|e.DISTANCE|e.REDUCEDLENGTH,j,M)).s12b,w=R.m12b,a&e.GEODESICSCALE&&(we.M12=R.M12,we.M21=R.M21),O<1||w>=0?((O<3*e.tiny_||O<g&&(b<0||w<0))&&(O=w=b=0),w*=this._b,b*=this._b,we.a12=O/n.degree):N=!1),pe=2,!N&&0===h&&(this.f<=0||u>=180*this.f))x=k=0,P=T=1,b=this.a*E,O=U=E/this._f1,w=this._b*Math.sin(O),a&e.GEODESICSCALE&&(we.M12=we.M21=Math.cos(O)),we.a12=s/this._f1;else if(!N)if(O=(R=this.InverseStart(h,y,S,d,v,C,E,_,I,j,M)).sig12,P=R.salp1,x=R.calp1,O>=0)T=R.salp2,k=R.calp2,z=R.dnm,b=O*this._b*z,w=n.sq(z)*this._b*Math.sin(O/z),a&e.GEODESICSCALE&&(we.M12=we.M21=Math.cos(O/z)),we.a12=O/n.degree,U=E/(this._f1*z);else{for(H=0,q=e.tiny_,V=1,K=e.tiny_,Y=-1,J=!1,W=!1;X=(R=this.Lambda12(h,y,S,d,v,C,P,x,_,I,H<20,j,M,B)).lam12,T=R.salp2,k=R.calp2,O=R.sig12,L=R.ssig1,D=R.csig1,F=R.ssig2,Q=R.csig2,G=R.eps,ye=R.domg12,Z=R.dlam12,!W&&Math.abs(X)>=(J?8:1)*g&&H!=m;++H)X>0&&(H<20||x/P>Y/K)?(K=P,Y=x):X<0&&(H<20||x/P<V/q)&&(q=P,V=x),H<20&&Z>0&&($=-X/Z,Math.abs($)<Math.PI&&(ee=Math.sin($),(re=P*(te=Math.cos($))+x*ee)>0))?(x=x*te-P*ee,P=re,P/=c=n.hypot(P,x),x/=c,J=Math.abs(X)<=16*g):(P=(q+K)/2,x=(V+Y)/2,P/=c=n.hypot(P,x),x/=c,J=!1,W=Math.abs(q-P)+(V-x)<A||Math.abs(P-K)+(x-Y)<A);ne=a|(a&(e.REDUCEDLENGTH|e.GEODESICSCALE)?e.DISTANCE:e.NONE),b=(R=this.Lengths(G,O,L,D,S,F,Q,C,y,v,ne,j,M)).s12b,w=R.m12b,a&e.GEODESICSCALE&&(we.M12=R.M12,we.M21=R.M21),w*=this._b,b*=this._b,we.a12=O/n.degree,a&e.AREA&&(be=Math.sin(ye),pe=_*(Ae=Math.cos(ye))-I*be,he=I*Ae+_*be)}if(a&e.DISTANCE&&(we.s12=0+b),a&e.REDUCEDLENGTH&&(we.m12=0+w),a&e.AREA&&(oe=P*y,0!==(ie=n.hypot(x,P*h))&&0!==oe?(L=h,D=x*y,F=d,Q=k*v,G=(se=n.sq(ie)*this._ep2)/(2*(1+Math.sqrt(1+se))+se),ue=n.sq(this.a)*ie*oe*this._e2,L/=c=n.hypot(L,D),D/=c,F/=c=n.hypot(F,Q),Q/=c,le=new Array(e.nC4_),this.C4f(G,le),ce=e.SinCosSeries(!1,L,D,le),fe=e.SinCosSeries(!1,F,Q,le),we.S12=ue*(fe-ce)):we.S12=0,N||2!=pe||(pe=Math.sin(U),he=Math.cos(U)),!N&&he>-.7071&&d-h<1.75?(ye=1+he,de=1+y,me=1+v,ae=2*Math.atan2(pe*(h*me+d*de),ye*(h*d+de*me))):(ve=k*x+T*P,0==(ge=T*x-k*P)&&ve<0&&(ge=e.tiny_*x,ve=-1),ae=Math.atan2(ge,ve)),we.S12+=this._c2*ae,we.S12*=f*l*p,we.S12+=0),f<0){var Ce=[P,T];T=Ce[0],P=Ce[1];var Ee=[x,k];if(k=Ee[0],x=Ee[1],a&e.GEODESICSCALE){var _e=[we.M12,we.M21];we.M21=_e[0],we.M12=_e[1]}}return{vals:we,salp1:P*=f*l,calp1:x*=f*p,salp2:T*=f*l,calp2:k*=f*p}},e.Geodesic.prototype.GenDirect=function(r,n,o,i,a,s){return s?s===e.LONG_UNROLL&&(s|=e.STANDARD):s=e.STANDARD,i||(s|=e.DISTANCE_IN),new t.GeodesicLine(this,r,n,o,s).GenPosition(i,a,s)},e.Geodesic.prototype.Direct=function(e,t,r,n,o){return this.GenDirect(e,t,r,!1,n,o)},e.Geodesic.prototype.ArcDirect=function(e,t,r,n,o){return this.GenDirect(e,t,r,!0,n,o)},e.Geodesic.prototype.Line=function(e,r,n,o){return new t.GeodesicLine(this,e,r,n,o)},e.Geodesic.prototype.DirectLine=function(e,t,r,n,o){return this.GenDirectLine(e,t,r,!1,n,o)},e.Geodesic.prototype.ArcDirectLine=function(e,t,r,n,o){return this.GenDirectLine(e,t,r,!0,n,o)},e.Geodesic.prototype.GenDirectLine=function(r,n,o,i,a,s){var u;return s||(s=e.STANDARD|e.DISTANCE_IN),i||(s|=e.DISTANCE_IN),(u=new t.GeodesicLine(this,r,n,o,s)).GenSetDistance(i,a),u},e.Geodesic.prototype.InverseLine=function(r,o,i,a,s){var u,l,c;return s||(s=e.STANDARD|e.DISTANCE_IN),u=this.InverseInt(r,o,i,a,e.ARC),c=n.atan2d(u.salp1,u.calp1),s&e.OUT_MASK&e.DISTANCE_IN&&(s|=e.DISTANCE),(l=new t.GeodesicLine(this,r,o,c,s,u.salp1,u.calp1)).SetArc(u.vals.a12),l},e.Geodesic.prototype.Polygon=function(e){return new r.PolygonArea(this,e)},e.WGS84=new e.Geodesic(o.WGS84.a,o.WGS84.f)}(i.Geodesic,i.GeodesicLine,i.PolygonArea,i.Math,i.Constants),function(e,t,r){"use strict";t.GeodesicLine=function(t,n,o,i,a,s,u){var l,c,f,p,h,y;a||(a=e.STANDARD|e.DISTANCE_IN),this.a=t.a,this.f=t.f,this._b=t._b,this._c2=t._c2,this._f1=t._f1,this.caps=a|e.LATITUDE|e.AZIMUTH|e.LONG_UNROLL,this.lat1=r.LatFix(n),this.lon1=o,void 0===s||void 0===u?(this.azi1=r.AngNormalize(i),l=r.sincosd(r.AngRound(this.azi1)),this.salp1=l.s,this.calp1=l.c):(this.azi1=i,this.salp1=s,this.calp1=u),l=r.sincosd(r.AngRound(this.lat1)),f=this._f1*l.s,c=l.c,f/=l=r.hypot(f,c),c/=l,c=Math.max(e.tiny_,c),this._dn1=Math.sqrt(1+t._ep2*r.sq(f)),this._salp0=this.salp1*c,this._calp0=r.hypot(this.calp1,this.salp1*f),this._ssig1=f,this._somg1=this._salp0*f,this._csig1=this._comg1=0!==f||0!==this.calp1?c*this.calp1:1,l=r.hypot(this._ssig1,this._csig1),this._ssig1/=l,this._csig1/=l,this._k2=r.sq(this._calp0)*t._ep2,p=this._k2/(2*(1+Math.sqrt(1+this._k2))+this._k2),this.caps&e.CAP_C1&&(this._A1m1=e.A1m1f(p),this._C1a=new Array(e.nC1_+1),e.C1f(p,this._C1a),this._B11=e.SinCosSeries(!0,this._ssig1,this._csig1,this._C1a),h=Math.sin(this._B11),y=Math.cos(this._B11),this._stau1=this._ssig1*y+this._csig1*h,this._ctau1=this._csig1*y-this._ssig1*h),this.caps&e.CAP_C1p&&(this._C1pa=new Array(e.nC1p_+1),e.C1pf(p,this._C1pa)),this.caps&e.CAP_C2&&(this._A2m1=e.A2m1f(p),this._C2a=new Array(e.nC2_+1),e.C2f(p,this._C2a),this._B21=e.SinCosSeries(!0,this._ssig1,this._csig1,this._C2a)),this.caps&e.CAP_C3&&(this._C3a=new Array(e.nC3_),t.C3f(p,this._C3a),this._A3c=-this.f*this._salp0*t.A3f(p),this._B31=e.SinCosSeries(!0,this._ssig1,this._csig1,this._C3a)),this.caps&e.CAP_C4&&(this._C4a=new Array(e.nC4_),t.C4f(p,this._C4a),this._A4=r.sq(this.a)*this._calp0*this._salp0*t._e2,this._B41=e.SinCosSeries(!1,this._ssig1,this._csig1,this._C4a)),this.a13=this.s13=NaN},t.GeodesicLine.prototype.GenPosition=function(t,n,o){var i,a,s,u,l,c,f,p,h,y,d,m,g,v,b,A,w,S,C,E,_,I,O,x,P,k,T={};return o?o===e.LONG_UNROLL&&(o|=e.STANDARD):o=e.STANDARD,o&=this.caps&e.OUT_MASK,T.lat1=this.lat1,T.azi1=this.azi1,T.lon1=o&e.LONG_UNROLL?this.lon1:r.AngNormalize(this.lon1),t?T.a12=n:T.s12=n,t||this.caps&e.DISTANCE_IN&e.OUT_MASK?(u=0,l=0,t?(i=n*r.degree,a=(O=r.sincosd(n)).s,s=O.c):(p=n/(this._b*(1+this._A1m1)),h=Math.sin(p),y=Math.cos(p),i=p-((u=-e.SinCosSeries(!0,this._stau1*y+this._ctau1*h,this._ctau1*y-this._stau1*h,this._C1pa))-this._B11),a=Math.sin(i),s=Math.cos(i),Math.abs(this.f)>.01&&(c=this._ssig1*s+this._csig1*a,f=this._csig1*s-this._ssig1*a,u=e.SinCosSeries(!0,c,f,this._C1a),i-=((1+this._A1m1)*(i+(u-this._B11))-n/this._b)/Math.sqrt(1+this._k2*r.sq(c)),a=Math.sin(i),s=Math.cos(i))),c=this._ssig1*s+this._csig1*a,f=this._csig1*s-this._ssig1*a,C=Math.sqrt(1+this._k2*r.sq(c)),o&(e.DISTANCE|e.REDUCEDLENGTH|e.GEODESICSCALE)&&((t||Math.abs(this.f)>.01)&&(u=e.SinCosSeries(!0,c,f,this._C1a)),l=(1+this._A1m1)*(u-this._B11)),g=this._calp0*c,0===(v=r.hypot(this._salp0,this._calp0*f))&&(v=f=e.tiny_),w=this._salp0,S=this._calp0*f,t&&o&e.DISTANCE&&(T.s12=this._b*((1+this._A1m1)*i+l)),o&e.LONGITUDE&&(b=this._salp0*c,A=f,m=r.copysign(1,this._salp0),d=((o&e.LONG_UNROLL?m*(i-(Math.atan2(c,f)-Math.atan2(this._ssig1,this._csig1))+(Math.atan2(m*b,A)-Math.atan2(m*this._somg1,this._comg1))):Math.atan2(b*this._comg1-A*this._somg1,A*this._comg1+b*this._somg1))+this._A3c*(i+(e.SinCosSeries(!0,c,f,this._C3a)-this._B31)))/r.degree,T.lon2=o&e.LONG_UNROLL?this.lon1+d:r.AngNormalize(r.AngNormalize(this.lon1)+r.AngNormalize(d))),o&e.LATITUDE&&(T.lat2=r.atan2d(g,this._f1*v)),o&e.AZIMUTH&&(T.azi2=r.atan2d(w,S)),o&(e.REDUCEDLENGTH|e.GEODESICSCALE)&&(E=e.SinCosSeries(!0,c,f,this._C2a),_=(1+this._A2m1)*(E-this._B21),I=(this._A1m1-this._A2m1)*i+(l-_),o&e.REDUCEDLENGTH&&(T.m12=this._b*(C*(this._csig1*c)-this._dn1*(this._ssig1*f)-this._csig1*f*I)),o&e.GEODESICSCALE&&(O=this._k2*(c-this._ssig1)*(c+this._ssig1)/(this._dn1+C),T.M12=s+(O*c-f*I)*this._ssig1/this._dn1,T.M21=s-(O*this._ssig1-this._csig1*I)*c/C)),o&e.AREA&&(x=e.SinCosSeries(!1,c,f,this._C4a),0===this._calp0||0===this._salp0?(P=w*this.calp1-S*this.salp1,k=S*this.calp1+w*this.salp1):(P=this._calp0*this._salp0*(s<=0?this._csig1*(1-s)+a*this._ssig1:a*(this._csig1*a/(1+s)+this._ssig1)),k=r.sq(this._salp0)+r.sq(this._calp0)*this._csig1*f),T.S12=this._c2*Math.atan2(P,k)+this._A4*(x-this._B41)),t||(T.a12=i/r.degree),T):(T.a12=NaN,T)},t.GeodesicLine.prototype.Position=function(e,t){return this.GenPosition(!1,e,t)},t.GeodesicLine.prototype.ArcPosition=function(e,t){return this.GenPosition(!0,e,t)},t.GeodesicLine.prototype.GenSetDistance=function(e,t){e?this.SetArc(t):this.SetDistance(t)},t.GeodesicLine.prototype.SetDistance=function(t){var r;this.s13=t,r=this.GenPosition(!1,this.s13,e.ARC),this.a13=0+r.a12},t.GeodesicLine.prototype.SetArc=function(t){var r;this.a13=t,r=this.GenPosition(!0,this.a13,e.DISTANCE),this.s13=0+r.s12}}(i.Geodesic,i.GeodesicLine,i.Math),function(e,t,r,n){"use strict";var o,i,a,s;o=function(e,t){var n=r.AngDiff(e,t).d;return e=r.AngNormalize(e),t=r.AngNormalize(t),n>0&&(e<0&&t>=0||e>0&&0===t)?1:n<0&&e>=0&&t<0?-1:0},i=function(e,t){return e%=720,(0<=(t%=720)&&t<360||t<-360?0:1)-(0<=e&&e<360||e<-360?0:1)},a=function(e,t,r,n,o){return e.Remainder(t),1&r&&e.Add((e.Sum()<0?1:-1)*t/2),n||e.Negate(),o?e.Sum()>t/2?e.Add(-t):e.Sum()<=-t/2&&e.Add(+t):e.Sum()>=t?e.Add(-t):e.Sum()<0&&e.Add(+t),0+e.Sum()},s=function(e,t,n,o,i){return e=r.remainder(e,t),1&n&&(e+=(e<0?1:-1)*t/2),o||(e*=-1),i?e>t/2?e-=t:e<=-t/2&&(e+=t):e>=t?e-=t:e<0&&(e+=t),0+e},e.PolygonArea=function(e,r){this._geod=e,this.a=this._geod.a,this.f=this._geod.f,this._area0=4*Math.PI*e._c2,this.polyline=r||!1,this._mask=t.LATITUDE|t.LONGITUDE|t.DISTANCE|(this.polyline?t.NONE:t.AREA|t.LONG_UNROLL),this.polyline||(this._areasum=new n.Accumulator(0)),this._perimetersum=new n.Accumulator(0),this.Clear()},e.PolygonArea.prototype.Clear=function(){this.num=0,this._crossings=0,this.polyline||this._areasum.Set(0),this._perimetersum.Set(0),this._lat0=this._lon0=this.lat=this.lon=NaN},e.PolygonArea.prototype.AddPoint=function(e,t){var r;0===this.num?(this._lat0=this.lat=e,this._lon0=this.lon=t):(r=this._geod.Inverse(this.lat,this.lon,e,t,this._mask),this._perimetersum.Add(r.s12),this.polyline||(this._areasum.Add(r.S12),this._crossings+=o(this.lon,t)),this.lat=e,this.lon=t),++this.num},e.PolygonArea.prototype.AddEdge=function(e,t){var r;this.num&&(r=this._geod.Direct(this.lat,this.lon,e,t,this._mask),this._perimetersum.Add(t),this.polyline||(this._areasum.Add(r.S12),this._crossings+=i(this.lon,r.lon2)),this.lat=r.lat2,this.lon=r.lon2),++this.num},e.PolygonArea.prototype.Compute=function(e,t){var r,i,s={number:this.num};return this.num<2?(s.perimeter=0,this.polyline||(s.area=0),s):this.polyline?(s.perimeter=this._perimetersum.Sum(),s):(r=this._geod.Inverse(this.lat,this.lon,this._lat0,this._lon0,this._mask),s.perimeter=this._perimetersum.Sum(r.s12),(i=new n.Accumulator(this._areasum)).Add(r.S12),s.area=a(i,this._area0,this._crossings+o(this.lon,this._lon0),e,t),s)},e.PolygonArea.prototype.TestPoint=function(e,t,r,n){var i,a,u,l,c={number:this.num+1};if(0===this.num)return c.perimeter=0,this.polyline||(c.area=0),c;for(c.perimeter=this._perimetersum.Sum(),a=this.polyline?0:this._areasum.Sum(),u=this._crossings,l=0;l<(this.polyline?1:2);++l)i=this._geod.Inverse(0===l?this.lat:e,0===l?this.lon:t,0!==l?this._lat0:e,0!==l?this._lon0:t,this._mask),c.perimeter+=i.s12,this.polyline||(a+=i.S12,u+=o(0===l?this.lon:t,0!==l?this._lon0:t));return this.polyline?c:(c.area=s(a,this._area0,u,r,n),c)},e.PolygonArea.prototype.TestEdge=function(e,t,r,n){var a,u,l,c={number:this.num?this.num+1:0};return 0===this.num?c:(c.perimeter=this._perimetersum.Sum()+t,this.polyline?c:(u=this._areasum.Sum(),l=this._crossings,u+=(a=this._geod.Direct(this.lat,this.lon,e,t,this._mask)).S12,l+=i(this.lon,a.lon2),l+=o(a.lon2,this._lon0),a=this._geod.Inverse(a.lat2,a.lon2,this._lat0,this._lon0,this._mask),c.perimeter+=a.s12,u+=a.S12,c.area=s(u,this._area0,l,r,n),c))}}(i.PolygonArea,i.Geodesic,i.Math,i.Accumulator),o=i,"object"===a(e)&&e.exports?e.exports=o:void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n)},8518:function(e,t,r){function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=9007199254740991,i="[object Arguments]",a="[object Function]",s="[object GeneratorFunction]",u="[object Map]",l="[object Set]",c=/^\[object .+?Constructor\]$/,f=/^(?:0|[1-9]\d*)$/,p="object"==(void 0===r.g?"undefined":n(r.g))&&r.g&&r.g.Object===Object&&r.g,h="object"==("undefined"==typeof self?"undefined":n(self))&&self&&self.Object===Object&&self,y=p||h||Function("return this")();function d(e,t){return function(e,t){for(var r=-1,n=e?e.length:0,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}(t,function(t){return[t,e[t]]})}var m,g,v,b=Function.prototype,A=Object.prototype,w=y["__core-js_shared__"],S=(m=/[^.]+$/.exec(w&&w.keys&&w.keys.IE_PROTO||""))?"Symbol(src)_1."+m:"",C=b.toString,E=A.hasOwnProperty,_=A.toString,I=RegExp("^"+C.call(E).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),O=A.propertyIsEnumerable,x=(g=Object.keys,v=Object,function(e){return g(v(e))}),P=U(y,"DataView"),k=U(y,"Map"),T=U(y,"Promise"),j=U(y,"Set"),M=U(y,"WeakMap"),B=q(P),N=q(k),R=q(T),L=q(j),D=q(M);function F(e,t){var r=V(e)||function(e){return function(e){return function(e){return!!e&&"object"==n(e)}(e)&&K(e)}(e)&&E.call(e,"callee")&&(!O.call(e,"callee")||_.call(e)==i)}(e)?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],o=r.length,a=!!o;for(var s in e)!t&&!E.call(e,s)||a&&("length"==s||H(s,o))||r.push(s);return r}function Q(e){return!(!J(e)||S&&S in e)&&(Y(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?I:c).test(q(e))}function G(e){if(r=(t=e)&&t.constructor,n="function"==typeof r&&r.prototype||A,t!==n)return x(e);var t,r,n,o=[];for(var i in Object(e))E.call(e,i)&&"constructor"!=i&&o.push(i);return o}function U(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return Q(r)?r:void 0}var z=function(e){return _.call(e)};function H(e,t){return!!(t=null==t?o:t)&&("number"==typeof e||f.test(e))&&e>-1&&e%1==0&&e<t}function q(e){if(null!=e){try{return C.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(P&&"[object DataView]"!=z(new P(new ArrayBuffer(1)))||k&&z(new k)!=u||T&&"[object Promise]"!=z(T.resolve())||j&&z(new j)!=l||M&&"[object WeakMap]"!=z(new M))&&(z=function(e){var t=_.call(e),r="[object Object]"==t?e.constructor:void 0,n=r?q(r):void 0;if(n)switch(n){case B:return"[object DataView]";case N:return u;case R:return"[object Promise]";case L:return l;case D:return"[object WeakMap]"}return t});var V=Array.isArray;function K(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=o}(e.length)&&!Y(e)}function Y(e){var t=J(e)?_.call(e):"";return t==a||t==s}function J(e){var t=n(e);return!!e&&("object"==t||"function"==t)}var W,X=(W=function(e){return K(e)?F(e):G(e)},function(e){var t,r,n,o=z(e);return o==u?(t=e,r=-1,n=Array(t.size),t.forEach(function(e,t){n[++r]=[t,e]}),n):o==l?function(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=[e,e]}),r}(e):d(e,W(e))});e.exports=X},8551:function(e){"use strict";e.exports={}},8574:function(e,t,r){"use strict";var n=r(4877);e.exports=!n(function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})},8676:function(e,t,r){function n(e){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o="Expected a function",i=NaN,a="[object Symbol]",s=/^\s+|\s+$/g,u=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,c=/^0o[0-7]+$/i,f=parseInt,p="object"==(void 0===r.g?"undefined":n(r.g))&&r.g&&r.g.Object===Object&&r.g,h="object"==("undefined"==typeof self?"undefined":n(self))&&self&&self.Object===Object&&self,y=p||h||Function("return this")(),d=Object.prototype.toString,m=Math.max,g=Math.min,v=function(){return y.Date.now()};function b(e,t,r){var n,i,a,s,u,l,c=0,f=!1,p=!1,h=!0;if("function"!=typeof e)throw new TypeError(o);function y(t){var r=n,o=i;return n=i=void 0,c=t,s=e.apply(o,r)}function d(e){var r=e-l;return void 0===l||r>=t||r<0||p&&e-c>=a}function b(){var e=v();if(d(e))return w(e);u=setTimeout(b,function(e){var r=t-(e-l);return p?g(r,a-(e-c)):r}(e))}function w(e){return u=void 0,h&&n?y(e):(n=i=void 0,s)}function C(){var e=v(),r=d(e);if(n=arguments,i=this,l=e,r){if(void 0===u)return function(e){return c=e,u=setTimeout(b,t),f?y(e):s}(l);if(p)return u=setTimeout(b,t),y(l)}return void 0===u&&(u=setTimeout(b,t)),s}return t=S(t)||0,A(r)&&(f=!!r.leading,a=(p="maxWait"in r)?m(S(r.maxWait)||0,t):a,h="trailing"in r?!!r.trailing:h),C.cancel=function(){void 0!==u&&clearTimeout(u),c=0,n=l=i=u=void 0},C.flush=function(){return void 0===u?s:w(v())},C}function A(e){var t=n(e);return!!e&&("object"==t||"function"==t)}function w(e){return"symbol"==n(e)||function(e){return!!e&&"object"==n(e)}(e)&&d.call(e)==a}function S(e){if("number"==typeof e)return e;if(w(e))return i;if(A(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=A(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(s,"");var r=l.test(e);return r||c.test(e)?f(e.slice(2),r?2:8):u.test(e)?i:+e}e.exports=function(e,t,r){var n=!0,i=!0;if("function"!=typeof e)throw new TypeError(o);return A(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),b(e,t,{leading:n,maxWait:t,trailing:i})}},9018:function(e,t,r){var n;function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e=r.nmd(e),function(i){var a="object"==o(t)&&t&&!t.nodeType&&t,s="object"==o(e)&&e&&!e.nodeType&&e,u="object"==(void 0===r.g?"undefined":o(r.g))&&r.g;u.global!==u&&u.window!==u&&u.self!==u||(i=u);var l,c,f=2147483647,p=36,h=1,y=26,d=38,m=700,g=72,v=128,b="-",A=/^xn--/,w=/[^\x20-\x7E]/,S=/[\x2E\u3002\uFF0E\uFF61]/g,C={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},E=p-h,_=Math.floor,I=String.fromCharCode;function O(e){throw new RangeError(C[e])}function x(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function P(e,t){var r=e.split("@"),n="";return r.length>1&&(n=r[0]+"@",e=r[1]),n+x((e=e.replace(S,".")).split("."),t).join(".")}function k(e){for(var t,r,n=[],o=0,i=e.length;o<i;)(t=e.charCodeAt(o++))>=55296&&t<=56319&&o<i?56320==(64512&(r=e.charCodeAt(o++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),o--):n.push(t);return n}function T(e){return x(e,function(e){var t="";return e>65535&&(t+=I((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=I(e)}).join("")}function j(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function M(e,t,r){var n=0;for(e=r?_(e/m):e>>1,e+=_(e/t);e>E*y>>1;n+=p)e=_(e/E);return _(n+(E+1)*e/(e+d))}function B(e){var t,r,n,o,i,a,s,u,l,c,d,m=[],A=e.length,w=0,S=v,C=g;for((r=e.lastIndexOf(b))<0&&(r=0),n=0;n<r;++n)e.charCodeAt(n)>=128&&O("not-basic"),m.push(e.charCodeAt(n));for(o=r>0?r+1:0;o<A;){for(i=w,a=1,s=p;o>=A&&O("invalid-input"),((u=(d=e.charCodeAt(o++))-48<10?d-22:d-65<26?d-65:d-97<26?d-97:p)>=p||u>_((f-w)/a))&&O("overflow"),w+=u*a,!(u<(l=s<=C?h:s>=C+y?y:s-C));s+=p)a>_(f/(c=p-l))&&O("overflow"),a*=c;C=M(w-i,t=m.length+1,0==i),_(w/t)>f-S&&O("overflow"),S+=_(w/t),w%=t,m.splice(w++,0,S)}return T(m)}function N(e){var t,r,n,o,i,a,s,u,l,c,d,m,A,w,S,C=[];for(m=(e=k(e)).length,t=v,r=0,i=g,a=0;a<m;++a)(d=e[a])<128&&C.push(I(d));for(n=o=C.length,o&&C.push(b);n<m;){for(s=f,a=0;a<m;++a)(d=e[a])>=t&&d<s&&(s=d);for(s-t>_((f-r)/(A=n+1))&&O("overflow"),r+=(s-t)*A,t=s,a=0;a<m;++a)if((d=e[a])<t&&++r>f&&O("overflow"),d==t){for(u=r,l=p;!(u<(c=l<=i?h:l>=i+y?y:l-i));l+=p)S=u-c,w=p-c,C.push(I(j(c+S%w,0))),u=_(S/w);C.push(I(j(u,0))),i=M(r,A,n==o),r=0,++n}++r,++t}return C.join("")}if(l={version:"1.3.2",ucs2:{decode:k,encode:T},decode:B,encode:N,toASCII:function(e){return P(e,function(e){return w.test(e)?"xn--"+N(e):e})},toUnicode:function(e){return P(e,function(e){return A.test(e)?B(e.slice(4).toLowerCase()):e})}},"object"==o(r.amdO)&&r.amdO)void 0===(n=function(){return l}.call(t,r,t,e))||(e.exports=n);else if(a&&s)if(e.exports==a)s.exports=l;else for(c in l)l.hasOwnProperty(c)&&(a[c]=l[c]);else i.punycode=l}(this)},9213:function(e,t,r){"use strict";var n=r(398),o=r(4877),i=r(4538),a=Object,s=n("".split);e.exports=o(function(){return!a("z").propertyIsEnumerable(0)})?function(e){return"String"===i(e)?s(e,""):a(e)}:a},9234:function(e,t,r){"use strict";var n=r(4877);e.exports=!n(function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]})},9279:function(e,t){"use strict";function r(e){for(var t=Object.keys(e),r=0;r<t.length;r++){var n=t[r];if(":@"!==n)return n}}function n(e,t,r,n){if(t)for(var o=Object.keys(t),i=o.length,a=0;a<i;a++){var s=o[a];n.isArray(s,r+"."+s,!0,!0)?e[s]=[t[s]]:e[s]=t[s]}}function o(e,t){var r=t.textNodeName,n=Object.keys(e).length;return 0===n||!(1!==n||!e[r]&&"boolean"!=typeof e[r]&&0!==e[r])}t.prettify=function(e,t){return function e(t,i,a){for(var s,u={},l=0;l<t.length;l++){var c=t[l],f=r(c),p="";if(p=void 0===a?f:a+"."+f,f===i.textNodeName)void 0===s?s=c[f]:s+=""+c[f];else{if(void 0===f)continue;if(c[f]){var h=e(c[f],i,p),y=o(h,i);c[":@"]?n(h,c[":@"],p,i):1!==Object.keys(h).length||void 0===h[i.textNodeName]||i.alwaysCreateTextNode?0===Object.keys(h).length&&(i.alwaysCreateTextNode?h[i.textNodeName]="":h=""):h=h[i.textNodeName],void 0!==u[f]&&u.hasOwnProperty(f)?(Array.isArray(u[f])||(u[f]=[u[f]]),u[f].push(h)):i.isArray(f,p,y)?u[f]=[h]:u[f]=h}}}return"string"==typeof s?s.length>0&&(u[i.textNodeName]=s):void 0!==s&&(u[i.textNodeName]=s),u}(e,t)}},9385:function(e,t,r){"use strict";var n=r(7709);t.f=n},9435:function(e,t,r){"use strict";r(7851);var n=r(5329);e.exports=n.Object.assign},9707:function(e,t,r){"use strict";var n=r(8574),o=Function.prototype.call;e.exports=n?o.bind(o):function(){return o.apply(o,arguments)}},9784:function(e,t,r){"use strict";var n=r(6433);e.exports=n},9800:function(e,t,r){"use strict";var n=r(7105),o=Math.min;e.exports=function(e){var t=n(e);return t>0?o(t,9007199254740991):0}},9809:function(e,t,r){"use strict";var n=r(6220),o=String,i=TypeError;e.exports=function(e){if(n(e))return e;throw new i(o(e)+" is not an object")}},9973:function(e){e.exports=function(e){this.ok=!1,this.alpha=1,"#"==e.charAt(0)&&(e=e.substr(1,6)),e=(e=e.replace(/ /g,"")).toLowerCase();var t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};e=t[e]||e;for(var r=[{re:/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*((?:\d?\.)?\d)\)$/,example:["rgba(123, 234, 45, 0.8)","rgba(255,234,245,1.0)"],process:function(e){return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3]),parseFloat(e[4])]}},{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(e){return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3])]}},{re:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,example:["#00ff00","336699"],process:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,example:["#fb0","f0f"],process:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}}],n=0;n<r.length;n++){var o=r[n].re,i=r[n].process,a=o.exec(e);if(a){var s=i(a);this.r=s[0],this.g=s[1],this.b=s[2],s.length>3&&(this.alpha=s[3]),this.ok=!0}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.alpha=this.alpha<0?0:this.alpha>1||isNaN(this.alpha)?1:this.alpha,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.alpha+")"},this.toHex=function(){var e=this.r.toString(16),t=this.g.toString(16),r=this.b.toString(16);return 1==e.length&&(e="0"+e),1==t.length&&(t="0"+t),1==r.length&&(r="0"+r),"#"+e+t+r},this.getHelpXML=function(){for(var e=new Array,n=0;n<r.length;n++)for(var o=r[n].example,i=0;i<o.length;i++)e[e.length]=o[i];for(var a in t)e[e.length]=a;var s=document.createElement("ul");s.setAttribute("id","rgbcolor-examples");for(n=0;n<e.length;n++)try{var u=document.createElement("li"),l=new RGBColor(e[n]),c=document.createElement("div");c.style.cssText="margin: 3px; border: 1px solid black; background:"+l.toHex()+"; color:"+l.toHex(),c.appendChild(document.createTextNode("test"));var f=document.createTextNode(" "+e[n]+" -> "+l.toRGB()+" -> "+l.toHex());u.appendChild(c),u.appendChild(f),s.appendChild(u)}catch(e){}return s}}}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}r.amdO={},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},r(9784),r(961),r(2039);r(4539)}();